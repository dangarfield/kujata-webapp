(self.webpackChunkkujata_webapp=self.webpackChunkkujata_webapp||[]).push([[179],{30:function(Dl,Y,pe){"use strict";function ze(n){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(n)}function Fe(n,a){for(;!Object.prototype.hasOwnProperty.call(n,a)&&null!==(n=ze(n)););return n}function we(){return we="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,e,r){var o=Fe(a,e);if(o){var u=Object.getOwnPropertyDescriptor(o,e);return u.get?u.get.call(arguments.length<3?a:r):u.value}},we.apply(this,arguments)}function ni(n,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function j(n,a,e){return a&&ni(n.prototype,a),e&&ni(n,e),n}function N(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function so(n,a){return(so=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r})(n,a)}function ve(n,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),a&&so(n,a)}function Yc(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Js(n){return(Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function Yn(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Li(n,a){if(a&&("object"===Js(a)||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return Yn(n)}function ge(n){var a=Yc();return function(){var o,r=ze(n);if(a){var u=ze(this).constructor;o=Reflect.construct(r,arguments,u)}else o=r.apply(this,arguments);return Li(this,o)}}function Zs(n,a){(null==a||a>n.length)&&(a=n.length);for(var e=0,r=new Array(a);e<a;e++)r[e]=n[e];return r}function vi(n,a){if(n){if("string"==typeof n)return Zs(n,a);var e=Object.prototype.toString.call(n).slice(8,-1);if("Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Zs(n,a)}}function Pt(n,a){var e="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=vi(n))||a&&n&&"number"==typeof n.length){e&&(n=e);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(g){throw g},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p,u=!0,f=!1;return{s:function(){e=e.call(n)},n:function(){var g=e.next();return u=g.done,g},e:function(g){f=!0,p=g},f:function(){try{!u&&null!=e.return&&e.return()}finally{if(f)throw p}}}}function pr(n,a){return function(n){if(Array.isArray(n))return n}(n)||function(n,a){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var f,p,r=[],o=!0,u=!1;try{for(e=e.call(n);!(o=(f=e.next()).done)&&(r.push(f.value),!a||r.length!==a);o=!0);}catch(v){u=!0,p=v}finally{try{!o&&null!=e.return&&e.return()}finally{if(u)throw p}}return r}}(n,a)||vi(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(n,a,e){return a in n?Object.defineProperty(n,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[a]=e,n}function On(n){return function(n){if(Array.isArray(n))return Zs(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||vi(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gi(n,a,e){return(gi=Yc()?Reflect.construct:function(o,u,f){var p=[null];p.push.apply(p,u);var g=new(Function.bind.apply(o,p));return f&&so(g,f.prototype),g}).apply(null,arguments)}function Rr(n){var a="function"==typeof Map?new Map:void 0;return Rr=function(r){if(null===r||!function(n){return-1!==Function.toString.call(n).indexOf("[native code]")}(r))return r;if("function"!=typeof r)throw new TypeError("Super expression must either be null or a function");if(void 0!==a){if(a.has(r))return a.get(r);a.set(r,o)}function o(){return gi(r,arguments,ze(this).constructor)}return o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),so(o,r)},Rr(n)}function Tn(n){return"function"==typeof n}function Ml(n){var e=n(function(o){Error.call(o),o.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var ht=Ml(function(n){return function(e){n(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map(function(r,o){return"".concat(o+1,") ").concat(r.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e}});function Ze(n,a){if(n){var e=n.indexOf(a);0<=e&&n.splice(e,1)}}var n,rt=function(){function n(a){N(this,n),this.initialTeardown=a,this.closed=!1,this._parentage=null,this._teardowns=null}return j(n,[{key:"unsubscribe",value:function(){var e;if(!this.closed){this.closed=!0;var r=this._parentage;if(r)if(this._parentage=null,Array.isArray(r)){var u,o=Pt(r);try{for(o.s();!(u=o.n()).done;)u.value.remove(this)}catch(C){o.e(C)}finally{o.f()}}else r.remove(this);var p=this.initialTeardown;if(Tn(p))try{p()}catch(C){e=C instanceof ht?C.errors:[C]}var v=this._teardowns;if(v){this._teardowns=null;var y,g=Pt(v);try{for(g.s();!(y=g.n()).done;){var _=y.value;try{$t(_)}catch(C){e=null!=e?e:[],C instanceof ht?e=[].concat(On(e),On(C.errors)):e.push(C)}}}catch(C){g.e(C)}finally{g.f()}}if(e)throw new ht(e)}}},{key:"add",value:function(e){var r;if(e&&e!==this)if(this.closed)$t(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(e)}}},{key:"_hasParent",value:function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)}},{key:"_addParent",value:function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e}},{key:"_removeParent",value:function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&Ze(r,e)}},{key:"remove",value:function(e){var r=this._teardowns;r&&Ze(r,e),e instanceof n&&e._removeParent(this)}}]),n}();rt.EMPTY=((n=new rt).closed=!0,n);var Ft=rt.EMPTY;function nn(n){return n instanceof rt||n&&"closed"in n&&Tn(n.remove)&&Tn(n.add)&&Tn(n.unsubscribe)}function $t(n){Tn(n)?n():n.unsubscribe()}var $r={setTimeout:function(n){function a(){return n.apply(this,arguments)}return a.toString=function(){return n.toString()},a}(function(){var n=$r.delegate;return((null==n?void 0:n.setTimeout)||setTimeout).apply(void 0,arguments)}),clearTimeout:function(n){function a(e){return n.apply(this,arguments)}return a.toString=function(){return n.toString()},a}(function(n){var a=$r.delegate;return((null==a?void 0:a.clearTimeout)||clearTimeout)(n)}),delegate:void 0};function mi(n){$r.setTimeout(function(){throw n})}function Br(){}var Qs=Nn("C",void 0,void 0);function Nn(n,a,e){return{kind:n,value:a,error:e}}function Pf(n){n()}var Lf=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this)).isStopped=!1,r?(o.destination=r,nn(r)&&r.add(Yn(o))):o.destination=Ma,o}return j(e,[{key:"next",value:function(o){this.isStopped?kf(function(n){return Nn("N",n,void 0)}(o),this):this._next(o)}},{key:"error",value:function(o){this.isStopped?kf(function(n){return Nn("E",void 0,n)}(o),this):(this.isStopped=!0,this._error(o))}},{key:"complete",value:function(){this.isStopped?kf(Qs,this):(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,we(ze(e.prototype),"unsubscribe",this).call(this),this.destination=null)}},{key:"_next",value:function(o){this.destination.next(o)}},{key:"_error",value:function(o){try{this.destination.error(o)}finally{this.unsubscribe()}}},{key:"_complete",value:function(){try{this.destination.complete()}finally{this.unsubscribe()}}}],[{key:"create",value:function(o,u,f){return new Ff(o,u,f)}}]),e}(rt),Ff=function(n){ve(e,n);var a=ge(e);function e(r,o,u){var f,p;if(N(this,e),f=a.call(this),Tn(r))p=r;else if(r){var v;p=r.next,o=r.error,u=r.complete,Yn(f),v=r,p=null==p?void 0:p.bind(v),o=null==o?void 0:o.bind(v),u=null==u?void 0:u.bind(v)}return f.destination={next:p?Av(p,Yn(f)):Br,error:Av(null!=o?o:Mv,Yn(f)),complete:u?Av(u,Yn(f)):Br},f}return e}(Lf);function Av(n,a){return function(){try{n.apply(void 0,arguments)}catch(e){mi(e)}}}function Mv(n){throw n}function kf(n,a){var e=null;e&&$r.setTimeout(function(){return e(n,a)})}var Ma={closed:!0,next:Br,error:Mv,complete:Br},uo="function"==typeof Symbol&&Symbol.observable||"@@observable";function ii(n){return n}function f_(n){return 0===n.length?ii:1===n.length?n[0]:function(e){return n.reduce(function(r,o){return o(r)},e)}}var br=function(){var n=function(){function a(e){N(this,a),e&&(this._subscribe=e)}return j(a,[{key:"lift",value:function(r){var o=new a;return o.source=this,o.operator=r,o}},{key:"subscribe",value:function(r,o,u){var f=this,p=function(n){return n&&n instanceof Lf||function(n){return n&&Tn(n.next)&&Tn(n.error)&&Tn(n.complete)}(n)&&nn(n)}(r)?r:new Ff(r,o,u);return Pf(function(){var v=f.operator,g=f.source;p.add(v?v.call(p,g):g?f._subscribe(p):f._trySubscribe(p))}),p}},{key:"_trySubscribe",value:function(r){try{return this._subscribe(r)}catch(o){r.error(o)}}},{key:"forEach",value:function(r,o){var u=this;return new(o=Ov(o))(function(f,p){var v;v=u.subscribe(function(g){try{r(g)}catch(y){p(y),null==v||v.unsubscribe()}},p,f)})}},{key:"_subscribe",value:function(r){var o;return null===(o=this.source)||void 0===o?void 0:o.subscribe(r)}},{key:uo,value:function(){return this}},{key:"pipe",value:function(){for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return f_(o)(this)}},{key:"toPromise",value:function(r){var o=this;return new(r=Ov(r))(function(u,f){var p;o.subscribe(function(v){return p=v},function(v){return f(v)},function(){return u(p)})})}}]),a}();return n.create=function(a){return new n(a)},n}();function Ov(n){var a;return null!==(a=null!=n?n:undefined)&&void 0!==a?a:Promise}var Ol=Ml(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),vs=function(){var n=function(a){ve(r,a);var e=ge(r);function r(){var o;return N(this,r),(o=e.call(this)).closed=!1,o.observers=[],o.isStopped=!1,o.hasError=!1,o.thrownError=null,o}return j(r,[{key:"lift",value:function(u){var f=new h_(this,this);return f.operator=u,f}},{key:"_throwIfClosed",value:function(){if(this.closed)throw new Ol}},{key:"next",value:function(u){var f=this;Pf(function(){if(f._throwIfClosed(),!f.isStopped){var g,v=Pt(f.observers.slice());try{for(v.s();!(g=v.n()).done;)g.value.next(u)}catch(_){v.e(_)}finally{v.f()}}})}},{key:"error",value:function(u){var f=this;Pf(function(){if(f._throwIfClosed(),!f.isStopped){f.hasError=f.isStopped=!0,f.thrownError=u;for(var p=f.observers;p.length;)p.shift().error(u)}})}},{key:"complete",value:function(){var u=this;Pf(function(){if(u._throwIfClosed(),!u.isStopped){u.isStopped=!0;for(var f=u.observers;f.length;)f.shift().complete()}})}},{key:"unsubscribe",value:function(){this.isStopped=this.closed=!0,this.observers=null}},{key:"observed",get:function(){var u;return(null===(u=this.observers)||void 0===u?void 0:u.length)>0}},{key:"_trySubscribe",value:function(u){return this._throwIfClosed(),we(ze(r.prototype),"_trySubscribe",this).call(this,u)}},{key:"_subscribe",value:function(u){return this._throwIfClosed(),this._checkFinalizedStatuses(u),this._innerSubscribe(u)}},{key:"_innerSubscribe",value:function(u){var v=this.observers;return this.hasError||this.isStopped?Ft:(v.push(u),new rt(function(){return Ze(v,u)}))}},{key:"_checkFinalizedStatuses",value:function(u){var v=this.isStopped;this.hasError?u.error(this.thrownError):v&&u.complete()}},{key:"asObservable",value:function(){var u=new br;return u.source=this,u}}]),r}(br);return n.create=function(a,e){return new h_(a,e)},n}(),h_=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;return N(this,e),(u=a.call(this)).destination=r,u.source=o,u}return j(e,[{key:"next",value:function(o){var u,f;null===(f=null===(u=this.destination)||void 0===u?void 0:u.next)||void 0===f||f.call(u,o)}},{key:"error",value:function(o){var u,f;null===(f=null===(u=this.destination)||void 0===u?void 0:u.error)||void 0===f||f.call(u,o)}},{key:"complete",value:function(){var o,u;null===(u=null===(o=this.destination)||void 0===o?void 0:o.complete)||void 0===u||u.call(o)}},{key:"_subscribe",value:function(o){var u,f;return null!==(f=null===(u=this.source)||void 0===u?void 0:u.subscribe(o))&&void 0!==f?f:Ft}}]),e}(vs);function v_(n){return Tn(null==n?void 0:n.lift)}function oi(n){return function(a){if(v_(a))return a.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var mn=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f,p){var v,g,y,_;return N(this,e),(_=a.call(this,r)).onFinalize=p,_._next=o?function(C){try{o(C)}catch(w){r.error(w)}}:we((v=Yn(_),ze(e.prototype)),"_next",v),_._error=f?function(C){try{f(C)}catch(w){r.error(w)}finally{this.unsubscribe()}}:we((g=Yn(_),ze(e.prototype)),"_error",g),_._complete=u?function(){try{u()}catch(C){r.error(C)}finally{this.unsubscribe()}}:we((y=Yn(_),ze(e.prototype)),"_complete",y),_}return j(e,[{key:"unsubscribe",value:function(){var o,u=this.closed;we(ze(e.prototype),"unsubscribe",this).call(this),!u&&(null===(o=this.onFinalize)||void 0===o||o.call(this))}}]),e}(Lf);function $n(n,a){return oi(function(e,r){var o=0;e.subscribe(new mn(r,function(u){r.next(n.call(a,u,o++))}))})}var yi=pe(757),eu=pe.n(yi);function H(n){return this instanceof H?(this.v=n,this):new H(n)}function Gn(n,a,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=e.apply(n,a||[]),u=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(C){r[C]&&(o[C]=function(w){return new Promise(function(x,E){u.push([C,w,x,E])>1||p(C,w)})})}function p(C,w){try{!function(C){C.value instanceof H?Promise.resolve(C.value.v).then(g,y):_(u[0][2],C)}(r[C](w))}catch(x){_(u[0][3],x)}}function g(C){p("next",C)}function y(C){p("throw",C)}function _(C,w){C(w),u.shift(),u.length&&p(u[0][0],u[0][1])}}function ki(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,a=n[Symbol.asyncIterator];return a?a.call(n):(n=function(n){var a="function"==typeof Symbol&&Symbol.iterator,e=a&&n[a],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(u){e[u]=n[u]&&function(f){return new Promise(function(p,v){!function(u,f,p,v){Promise.resolve(v).then(function(g){u({value:g,done:p})},f)}(p,v,(f=n[u](f)).done,f.value)})}}}var Nu=function(a){return a&&"number"==typeof a.length&&"function"!=typeof a};function w_(n){return Tn(null==n?void 0:n.then)}function Pn(n){return Tn(n[uo])}function S_(n){return Symbol.asyncIterator&&Tn(null==n?void 0:n[Symbol.asyncIterator])}function ai(n){return new TypeError("You provided ".concat(null!==n&&"object"==typeof n?"an invalid object":"'".concat(n,"'")," where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable."))}var b_="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Lv(n){return Tn(null==n?void 0:n[b_])}function E_(n){return Gn(this,arguments,eu().mark(function a(){var e,r,o;return eu().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:e=n.getReader(),p.prev=1;case 2:return p.next=5,H(e.read());case 5:if(o=(r=p.sent).value,!r.done){p.next=12;break}return p.next=11,H(void 0);case 11:return p.abrupt("return",p.sent);case 12:return p.next=14,H(o);case 14:return p.next=16,p.sent;case 16:p.next=2;break;case 18:return p.prev=18,e.releaseLock(),p.finish(18);case 21:case"end":return p.stop()}},a,null,[[1,,18,21]])}))}function Hf(n){return Tn(null==n?void 0:n.getReader)}function lo(n){if(n instanceof br)return n;if(null!=n){if(Pn(n))return function(n){return new br(function(a){var e=n[uo]();if(Tn(e.subscribe))return e.subscribe(a);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Nu(n))return function(n){return new br(function(a){for(var e=0;e<n.length&&!a.closed;e++)a.next(n[e]);a.complete()})}(n);if(w_(n))return function(n){return new br(function(a){n.then(function(e){a.closed||(a.next(e),a.complete())},function(e){return a.error(e)}).then(null,mi)})}(n);if(S_(n))return Gu(n);if(Lv(n))return function(n){return new br(function(a){var r,e=Pt(n);try{for(e.s();!(r=e.n()).done;)if(a.next(r.value),a.closed)return}catch(u){e.e(u)}finally{e.f()}a.complete()})}(n);if(Hf(n))return function(n){return Gu(E_(n))}(n)}throw ai(n)}function Gu(n){return new br(function(a){(function(n,a){var e,r,o,u;return function(n,a,e,r){return new(e||(e=Promise))(function(u,f){function p(y){try{g(r.next(y))}catch(_){f(_)}}function v(y){try{g(r.throw(y))}catch(_){f(_)}}function g(y){y.done?u(y.value):function(u){return u instanceof e?u:new e(function(f){f(u)})}(y.value).then(p,v)}g((r=r.apply(n,a||[])).next())})}(this,void 0,void 0,eu().mark(function f(){return eu().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:g.prev=0,e=ki(n);case 2:return g.next=4,e.next();case 4:if((r=g.sent).done){g.next=12;break}if(a.next(r.value),!a.closed){g.next=10;break}return g.abrupt("return");case 10:g.next=2;break;case 12:g.next=17;break;case 14:g.prev=14,g.t0=g.catch(0),o={error:g.t0};case 17:if(g.prev=17,g.prev=18,!r||r.done||!(u=e.return)){g.next=22;break}return g.next=22,u.call(e);case 22:if(g.prev=22,!o){g.next=25;break}throw o.error;case 25:return g.finish(22);case 26:return g.finish(17);case 27:a.complete();case 28:case"end":return g.stop()}},f,null,[[0,14,17,27],[18,,22,26]])}))})(n,a).catch(function(e){return a.error(e)})})}function gs(n,a,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=a.schedule(function(){e(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(u),!o)return u}function kv(n,a,e,r,o,u,f,p){var v=[],g=0,y=0,_=!1,C=function(){_&&!v.length&&!g&&a.complete()},w=function(b){return g<r?x(b):v.push(b)},x=function E(b){u&&a.next(b),g++;var T=!1;lo(e(b,y++)).subscribe(new mn(a,function(A){null==o||o(A),u?w(A):a.next(A)},function(){T=!0},void 0,function(){if(T)try{g--;for(var A=function(){var O=v.shift();f?gs(a,f,function(){return E(O)}):E(O)};v.length&&g<r;)A();C()}catch(M){a.error(M)}}))};return n.subscribe(new mn(a,w,function(){_=!0,C()})),function(){null==p||p()}}function Xr(n,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Tn(a)?Xr(function(r,o){return $n(function(u,f){return a(r,u,o,f)})(lo(n(r,o)))},e):("number"==typeof a&&(e=a),oi(function(r,o){return kv(r,o,n,e)}))}function Jc(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;return Xr(ii,n)}var bo=new br(function(n){return n.complete()});function Gv(n){return n[n.length-1]}function R_(n){return Tn(Gv(n))?n.pop():void 0}function $(n){return function(n){return n&&Tn(n.schedule)}(Gv(n))?n.pop():void 0}function Bv(n,a){return"number"==typeof Gv(n)?n.pop():a}function T_(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return oi(function(e,r){e.subscribe(new mn(r,function(o){return gs(r,n,function(){return r.next(o)},a)},function(){return gs(r,n,function(){return r.complete()},a)},function(o){return gs(r,n,function(){return r.error(o)},a)}))})}function D_(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return oi(function(e,r){r.add(n.schedule(function(){return e.subscribe(r)},a))})}function Vv(n,a){if(!n)throw new Error("Iterable cannot be null");return new br(function(e){gs(e,a,function(){var r=n[Symbol.asyncIterator]();gs(e,a,function(){r.next().then(function(o){o.done?e.complete():e.next(o.value)})},0,!0)})})}function Jr(n,a){return a?function(n,a){if(null!=n){if(Pn(n))return function(n,a){return lo(n).pipe(D_(a),T_(a))}(n,a);if(Nu(n))return function(n,a){return new br(function(e){var r=0;return a.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}(n,a);if(w_(n))return function(n,a){return lo(n).pipe(D_(a),T_(a))}(n,a);if(S_(n))return Vv(n,a);if(Lv(n))return function(n,a){return new br(function(e){var r;return gs(e,a,function(){r=n[b_](),gs(e,a,function(){var o,u;try{var f=r.next();o=f.value,u=f.done}catch(p){return void e.error(p)}u?e.complete():e.next(o)},0,!0)}),function(){return Tn(null==r?void 0:r.return)&&r.return()}})}(n,a);if(Hf(n))return function(n,a){return Vv(E_(n),a)}(n,a)}throw ai(n)}(n,a):lo(n)}function Uf(n){return n<=0?function(){return bo}:oi(function(a,e){var r=0;a.subscribe(new mn(e,function(o){++r<=n&&(e.next(o),n<=r&&e.complete())}))})}function Uv(n,a){if(!0===a)return n(),null;if(!1===a)return null;for(var e=arguments.length,r=new Array(e>2?e-2:0),o=2;o<e;o++)r[o-2]=arguments[o];return a.apply(void 0,r).pipe(Uf(1)).subscribe(function(){return n()})}function ar(n){for(var a in n)if(n[a]===ar)return a;throw Error("Could not find renamed property on target object.")}function Wn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Wn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return"".concat(n.overriddenName);if(n.name)return"".concat(n.name);var a=n.toString();if(null==a)return""+a;var e=a.indexOf("\n");return-1===e?a:a.substring(0,e)}function Hr(n,a){return null==n||""===n?null===a?"":a:null==a||""===a?n:n+" "+a}var jb=ar({__forward_ref__:ar});function jv(n){return n.__forward_ref__=jv,n.toString=function(){return Wn(this())},n}function pn(n){return zf(n)?n():n}function zf(n){return"function"==typeof n&&n.hasOwnProperty(jb)&&n.__forward_ref__===jv}var Ni=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;return N(this,e),(u=a.call(this,function(n,a){var e=n?"NG0".concat(n,": "):"";return"".concat(e).concat(a)}(r,o))).code=r,u}return e}(Rr(Error));function rn(n){return"string"==typeof n?n:null==n?"":String(n)}function qi(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():rn(n)}function jf(n,a){var e=a?" in ".concat(a):"";throw new Ni("201","No provider for ".concat(qi(n)," found").concat(e))}function xo(n,a){null==n&&function(n,a,e,r){throw new Error("ASSERTION ERROR: ".concat(n)+(null==r?"":" [Expected=> ".concat(e," ").concat(r," ").concat(a," <=Actual]")))}(a,n,null,"!=")}function un(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Vo(n){return{providers:n.providers||[],imports:n.imports||[]}}function Qc(n){return qf(n,Ki)||qf(n,ed)}function qf(n,a){return n.hasOwnProperty(a)?n[a]:null}function Kf(n){return n&&(n.hasOwnProperty(Il)||n.hasOwnProperty(td))?n[Il]:null}var nu,Ki=ar({"\u0275prov":ar}),Il=ar({"\u0275inj":ar}),ed=ar({ngInjectableDef:ar}),td=ar({ngInjectorDef:ar}),Qt=function(){return(Qt=Qt||{})[Qt.Default=0]="Default",Qt[Qt.Host=1]="Host",Qt[Qt.Self=2]="Self",Qt[Qt.SkipSelf=4]="SkipSelf",Qt[Qt.Optional=8]="Optional",Qt}();function Yf(){return nu}function ys(n){var a=nu;return nu=n,a}function Xv(n,a,e){var r=Qc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&Qt.Optional?null:void 0!==a?a:void jf(Wn(n),"Injector")}function _s(n){return{toString:n}.toString()}var la=function(){return(la=la||{})[la.OnPush=0]="OnPush",la[la.Default=1]="Default",la}(),La=function(){return function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"}(La||(La={})),La}(),$f="undefined"!=typeof globalThis&&globalThis,At="undefined"!=typeof window&&window,_i="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,kt="undefined"!=typeof global&&global,rr=$f||kt||At||_i,Xn={},ir=[],ws=ar({"\u0275cmp":ar}),Ll=ar({"\u0275dir":ar}),Bu=ar({"\u0275pipe":ar}),Fl=ar({"\u0275mod":ar}),Wo=ar({"\u0275fac":ar}),Hu=ar({__NG_ELEMENT_ID__:ar}),Xf=0;function Er(n){return _s(function(){var e={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===la.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||ir,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||La.Emulated,id:"c",styles:n.styles||ir,_:null,setInput:null,schemas:n.schemas||null,tView:null},o=n.directives,u=n.features,f=n.pipes;return r.id+=Xf++,r.inputs=ca(n.inputs,e),r.outputs=ca(n.outputs),u&&u.forEach(function(p){return p(r)}),r.directiveDefs=o?function(){return("function"==typeof o?o():o).map(rd)}:null,r.pipeDefs=f?function(){return("function"==typeof f?f():f).map(co)}:null,r})}function rd(n){return si(n)||function(n){return n[Ll]||null}(n)}function co(n){return function(n){return n[Bu]||null}(n)}var L_={};function Ci(n){return _s(function(){var a={type:n.type,bootstrap:n.bootstrap||ir,declarations:n.declarations||ir,imports:n.imports||ir,exports:n.exports||ir,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(L_[n.id]=n.type),a})}function ca(n,a){if(null==n)return Xn;var e={};for(var r in n)if(n.hasOwnProperty(r)){var o=n[r],u=o;Array.isArray(o)&&(u=o[1],o=o[0]),e[o]=r,a&&(a[o]=u)}return e}var Gi=Er;function fo(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function si(n){return n[ws]||null}function po(n,a){var e=n[Fl]||null;if(!e&&!0===a)throw new Error("Type ".concat(Wn(n)," does not have '\u0275mod' property."));return e}function Ga(n){return Array.isArray(n)&&"object"==typeof n[1]}function zo(n){return Array.isArray(n)&&!0===n[1]}function Qv(n){return 0!=(8&n.flags)}function Ba(n){return 2==(2&n.flags)}function Hl(n){return 1==(1&n.flags)}function go(n){return null!==n.template}function iE(n){return 0!=(512&n[2])}function au(n,a){return n.hasOwnProperty(Wo)?n[Wo]:null}var B_=function(){function n(a,e,r){N(this,n),this.previousValue=a,this.currentValue=e,this.firstChange=r}return j(n,[{key:"isFirstChange",value:function(){return this.firstChange}}]),n}();function jo(){return tg}function tg(n){return n.type.prototype.ngOnChanges&&(n.setInput=ui),qo}function qo(){var n=V_(this),a=null==n?void 0:n.current;if(a){var e=n.previous;if(e===Xn)n.previous=a;else for(var r in a)e[r]=a[r];n.current=null,this.ngOnChanges(a)}}function ui(n,a,e,r){var o=V_(n)||function(n,a){return n[H_]=a}(n,{previous:Xn,current:null}),u=o.current||(o.current={}),f=o.previous,p=this.declaredInputs[e],v=f[p];u[p]=new B_(v&&v.currentValue,a,f===Xn),n[r]=a}jo.ngInherit=!0;var H_="__ngSimpleChanges__";function V_(n){return n[H_]||null}var ng="http://www.w3.org/2000/svg",rg=void 0;function Dr(n){return!!n.listen}var j_={createRenderer:function(a,e){return void 0!==rg?rg:"undefined"!=typeof document?document:void 0}};function Wr(n){for(;Array.isArray(n);)n=n[0];return n}function vr(n,a){return Wr(a[n])}function Ko(n,a){return Wr(a[n.index])}function xs(n,a){return n.data[a]}function Ro(n,a){var e=a[n];return Ga(e)?e:e[0]}function q_(n){return 4==(4&n[2])}function ud(n){return 128==(128&n[2])}function ei(n,a){return null==a?null:n[a]}function ep(n){n[18]=0}function ag(n,a){n[5]+=a;for(var e=n,r=n[3];null!==r&&(1===a&&1===e[5]||-1===a&&0===e[5]);)r[5]+=a,e=r,r=r[3]}var jt={lFrame:ap(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function sg(){return jt.bindingsEnabled}function Ke(){return jt.lFrame.lView}function Bn(){return jt.lFrame.tView}function lr(n){return jt.lFrame.contextLView=n,n[8]}function Ur(){for(var n=tp();null!==n&&64===n.type;)n=n.parent;return n}function tp(){return jt.lFrame.currentTNode}function Ha(n,a){var e=jt.lFrame;e.currentTNode=n,e.isParent=a}function Xe(){return jt.lFrame.isParent}function ug(){jt.lFrame.isParent=!1}function Yo(){return jt.isInCheckNoChangesMode}function np(n){jt.isInCheckNoChangesMode=n}function Hi(){var n=jt.lFrame,a=n.bindingRootIndex;return-1===a&&(a=n.bindingRootIndex=n.tView.bindingStartIndex),a}function To(){return jt.lFrame.bindingIndex}function Wl(){return jt.lFrame.bindingIndex++}function da(n){var a=jt.lFrame,e=a.bindingIndex;return a.bindingIndex=a.bindingIndex+n,e}function EE(n,a){var e=jt.lFrame;e.bindingIndex=e.bindingRootIndex=n,ip(a)}function ip(n){jt.lFrame.currentDirectiveIndex=n}function X_(){return jt.lFrame.currentQueryIndex}function op(n){jt.lFrame.currentQueryIndex=n}function xE(n){var a=n[1];return 2===a.type?a.declTNode:1===a.type?n[6]:null}function cg(n,a,e){if(e&Qt.SkipSelf){for(var r=a,o=n;!(null!==(r=r.parent)||e&Qt.Host||null===(r=xE(o))||(o=o[15],10&r.type)););if(null===r)return!1;a=r,n=o}var u=jt.lFrame=J_();return u.currentTNode=a,u.lView=n,!0}function Ul(n){var a=J_(),e=n[1];jt.lFrame=a,a.currentTNode=e.firstChild,a.lView=n,a.tView=e,a.contextLView=n,a.bindingIndex=e.bindingStartIndex,a.inI18n=!1}function J_(){var n=jt.lFrame,a=null===n?null:n.child;return null===a?ap(n):a}function ap(n){var a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=a),a}function Va(){var n=jt.lFrame;return jt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Z_=Va;function Wa(){var n=Va();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function wi(n){var a=jt.lFrame.contextLView=function(n,a){for(;n>0;)a=a[15],n--;return a}(n,jt.lFrame.contextLView);return a[8]}function Ji(){return jt.lFrame.selectedIndex}function Ar(n){jt.lFrame.selectedIndex=n}function Mr(){var n=jt.lFrame;return xs(n.tView,n.selectedIndex)}function dd(n,a){for(var e=a.directiveStart,r=a.directiveEnd;e<r;e++){var u=n.data[e].type.prototype,f=u.ngAfterContentInit,p=u.ngAfterContentChecked,v=u.ngAfterViewInit,g=u.ngAfterViewChecked,y=u.ngOnDestroy;f&&(n.contentHooks||(n.contentHooks=[])).push(-e,f),p&&((n.contentHooks||(n.contentHooks=[])).push(e,p),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,p)),v&&(n.viewHooks||(n.viewHooks=[])).push(-e,v),g&&((n.viewHooks||(n.viewHooks=[])).push(e,g),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,g)),null!=y&&(n.destroyHooks||(n.destroyHooks=[])).push(e,y)}}function up(n,a,e){tC(n,a,3,e)}function zl(n,a,e,r){(3&n[2])===e&&tC(n,a,e,r)}function fg(n,a){var e=n[2];(3&e)===a&&(e&=2047,n[2]=e+=1)}function tC(n,a,e,r){for(var u=null!=r?r:-1,f=a.length-1,p=0,v=void 0!==r?65535&n[18]:0;v<f;v++)if("number"==typeof a[v+1]){if(p=a[v],null!=r&&p>=r)break}else a[v]<0&&(n[18]+=65536),(p<u||-1==u)&&(TE(n,e,a,v),n[18]=(4294901760&n[18])+v+2),v++}function TE(n,a,e,r){var o=e[r]<0,u=e[r+1],p=n[o?-e[r]:e[r]];if(o){if(n[2]>>11<n[18]>>16&&(3&n[2])===a){n[2]+=2048;try{u.call(p)}finally{}}}else try{u.call(p)}finally{}}var fd=function n(a,e,r){N(this,n),this.factory=a,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r};function dp(n,a,e){for(var r=Dr(n),o=0;o<e.length;){var u=e[o];if("number"==typeof u){if(0!==u)break;o++;var f=e[o++],p=e[o++],v=e[o++];r?n.setAttribute(a,p,v,f):a.setAttributeNS(f,p,v)}else{var g=u,y=e[++o];hg(g)?r&&n.setProperty(a,g,y):r?n.setAttribute(a,g,y):a.setAttribute(g,y),o++}}return o}function rC(n){return 3===n||4===n||6===n}function hg(n){return 64===n.charCodeAt(0)}function hd(n,a){if(null!==a&&0!==a.length)if(null===n||0===n.length)n=a.slice();else for(var e=-1,r=0;r<a.length;r++){var o=a[r];"number"==typeof o?e=o:0===e||Do(n,e,o,null,-1===e||2===e?a[++r]:null)}return n}function Do(n,a,e,r,o){var u=0,f=n.length;if(-1===a)f=-1;else for(;u<n.length;){var p=n[u++];if("number"==typeof p){if(p===a){f=-1;break}if(p>a){f=u-1;break}}}for(;u<n.length;){var v=n[u];if("number"==typeof v)break;if(v===e){if(null===r)return void(null!==o&&(n[u+1]=o));if(r===n[u+1])return void(n[u+2]=o)}u++,null!==r&&u++,null!==o&&u++}-1!==f&&(n.splice(f,0,a),u=f+1),n.splice(u++,0,e),null!==r&&n.splice(u++,0,r),null!==o&&n.splice(u++,0,o)}function iC(n){return-1!==n}function Zi(n){return 32767&n}function ql(n,a){for(var e=function(n){return n>>16}(n),r=a;e>0;)r=r[15],e--;return r}var vd=!0;function fp(n){var a=vd;return vd=n,a}var PE=0;function gd(n,a){var e=md(n,a);if(-1!==e)return e;var r=a[1];r.firstCreatePass&&(n.injectorIndex=a.length,pp(r.data,n),pp(a,null),pp(r.blueprint,null));var o=hp(n,a),u=n.injectorIndex;if(iC(o))for(var f=Zi(o),p=ql(o,a),v=p[1].data,g=0;g<8;g++)a[u+g]=p[f+g]|v[f+g];return a[u+8]=o,u}function pp(n,a){n.push(0,0,0,0,0,0,0,0,a)}function md(n,a){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===a[n.injectorIndex+8]?-1:n.injectorIndex}function hp(n,a){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;for(var e=0,r=null,o=a;null!==o;){var u=o[1],f=u.type;if(null===(r=2===f?u.declTNode:1===f?o[6]:null))return-1;if(e++,o=o[15],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return-1}function yd(n,a,e){!function(n,a,e){var r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(Hu)&&(r=e[Hu]),null==r&&(r=e[Hu]=PE++);var o=255&r;a.data[n+(o>>5)]|=1<<o}(n,a,e)}function sC(n,a,e){if(e&Qt.Optional)return n;jf(a,"NodeInjector")}function _d(n,a,e,r){if(e&Qt.Optional&&void 0===r&&(r=null),0==(e&(Qt.Self|Qt.Host))){var o=n[9],u=ys(void 0);try{return o?o.get(a,r,e&Qt.Optional):Xv(a,r,e&Qt.Optional)}finally{ys(u)}}return sC(r,a,e)}function uC(n,a,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qt.Default,o=arguments.length>4?arguments[4]:void 0;if(null!==n){var u=lC(e);if("function"==typeof u){if(!cg(a,n,r))return r&Qt.Host?sC(o,e,r):_d(a,e,r,o);try{var f=u(r);if(null!=f||r&Qt.Optional)return f;jf(e)}finally{Z_()}}else if("number"==typeof u){var p=null,v=md(n,a),g=-1,y=r&Qt.Host?a[16][6]:null;for((-1===v||r&Qt.SkipSelf)&&(-1!==(g=-1===v?hp(n,a):a[v+8])&&dC(r,!1)?(p=a[1],v=Zi(g),a=ql(g,a)):v=-1);-1!==v;){var _=a[1];if(cC(u,v,_.data)){var C=FE(v,a,e,p,r,y);if(C!==vg)return C}-1!==(g=a[v+8])&&dC(r,a[1].data[v+8]===y)&&cC(u,v,a)?(p=_,v=Zi(g),a=ql(g,a)):v=-1}}}return _d(a,e,r,o)}var vg={};function LE(){return new zu(Ur(),Ke())}function FE(n,a,e,r,o,u){var f=a[1],p=f.data[n+8],y=vp(p,f,e,null==r?Ba(p)&&vd:r!=f&&0!=(3&p.type),o&Qt.Host&&u===p);return null!==y?Cd(a,f,y,p):vg}function vp(n,a,e,r,o){for(var u=n.providerIndexes,f=a.data,p=1048575&u,v=n.directiveStart,y=u>>20,C=o?p+y:n.directiveEnd,w=r?p:p+y;w<C;w++){var x=f[w];if(w<v&&e===x||w>=v&&x.type===e)return w}if(o){var E=f[v];if(E&&go(E)&&E.type===e)return v}return null}function Cd(n,a,e,r){var o=n[e],u=a.data;if(function(n){return n instanceof fd}(o)){var f=o;f.resolving&&function(n,a){throw new Ni("200","Circular dependency in DI detected for ".concat(n).concat(""))}(qi(u[e]));var p=fp(f.canSeeViewProviders);f.resolving=!0;var v=f.injectImpl?ys(f.injectImpl):null;cg(n,r,Qt.Default);try{o=n[e]=f.factory(void 0,u,n,r),a.firstCreatePass&&e>=r.directiveStart&&function(n,a,e){var r=a.type.prototype,u=r.ngOnInit,f=r.ngDoCheck;if(r.ngOnChanges){var p=tg(a);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,p),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,p)}u&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,u),f&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,f),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,f))}(e,u[e],a)}finally{null!==v&&ys(v),fp(p),f.resolving=!1,Z_()}}return o}function lC(n){if("string"==typeof n)return n.charCodeAt(0)||0;var a=n.hasOwnProperty(Hu)?n[Hu]:void 0;return"number"==typeof a?a>=0?255&a:LE:a}function cC(n,a,e){return!!(e[a+(n>>5)]&1<<n)}function dC(n,a){return!(n&Qt.Self||n&Qt.Host&&a)}var zu=function(){function n(a,e){N(this,n),this._tNode=a,this._lView=e}return j(n,[{key:"get",value:function(e,r,o){return uC(this._tNode,this._lView,e,o,r)}}]),n}();function gg(n){return zf(n)?function(){var a=gg(pn(n));return a&&a()}:au(n)}function Kl(n){return function(n,a){if("class"===a)return n.classes;if("style"===a)return n.styles;var e=n.attrs;if(e)for(var r=e.length,o=0;o<r;){var u=e[o];if(rC(u))break;if(0===u)o+=2;else if("number"==typeof u)for(o++;o<r&&"string"==typeof e[o];)o++;else{if(u===a)return e[o+1];o+=2}}return null}(Ur(),n)}var Yl="__parameters__",$o="__prop__metadata__";function $l(n){return function(){if(n){var e=n.apply(void 0,arguments);for(var r in e)this[r]=e[r]}}}function Ua(n,a,e){return _s(function(){var r=$l(a);function o(){for(var u=arguments.length,f=new Array(u),p=0;p<u;p++)f[p]=arguments[p];if(this instanceof o)return r.apply(this,f),this;var v=gi(o,f);return g.annotation=v,g;function g(y,_,C){for(var w=y.hasOwnProperty(Yl)?y[Yl]:Object.defineProperty(y,Yl,{value:[]})[Yl];w.length<=C;)w.push(null);return(w[C]=w[C]||[]).push(v),y}}return e&&(o.prototype=Object.create(e.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}function Xl(n,a,e,r){return _s(function(){var o=$l(a);function u(){for(var f=arguments.length,p=new Array(f),v=0;v<f;v++)p[v]=arguments[v];if(this instanceof u)return o.apply(this,p),this;var g=gi(u,p);function y(_,C){var w=_.constructor,x=w.hasOwnProperty($o)?w[$o]:Object.defineProperty(w,$o,{value:{}})[$o];x[C]=x.hasOwnProperty(C)&&x[C]||[],x[C].unshift(g),r&&r.apply(void 0,[_,C].concat(p))}return y}return e&&(u.prototype=Object.create(e.prototype)),u.prototype.ngMetadataName=n,u.annotationCls=u,u})}var In=function(){function n(a,e){N(this,n),this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=un({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}return j(n,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),n}(),mg=new In("AnalyzeForEntryComponents"),gp=function n(){N(this,n)},Jl=Xl("ContentChildren",function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:n,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0},a)},gp);function Xo(n,a){void 0===a&&(a=n);for(var e=0;e<n.length;e++){var r=n[e];Array.isArray(r)?(a===n&&(a=n.slice(0,e)),Xo(r,a)):a!==n&&a.push(r)}return a}function za(n,a){n.forEach(function(e){return Array.isArray(e)?za(e,a):a(e)})}function pC(n,a,e){a>=n.length?n.push(e):n.splice(a,0,e)}function mp(n,a){return a>=n.length-1?n.pop():n.splice(a,1)[0]}function mo(n,a,e){var r=Zl(n,a);return r>=0?n[1|r]=e:function(n,a,e,r){var o=n.length;if(o==a)n.push(e,r);else if(1===o)n.push(r,n[0]),n[0]=e;else{for(o--,n.push(n[o-1],n[o]);o>a;)n[o]=n[o-2],o--;n[a]=e,n[a+1]=r}}(n,r=~r,a,e),r}function Cg(n,a){var e=Zl(n,a);if(e>=0)return n[1|e]}function Zl(n,a){return function(n,a,e){for(var r=0,o=n.length>>e;o!==r;){var u=r+(o-r>>1),f=n[u<<e];if(a===f)return u<<e;f>a?o=u:r=u+1}return~(o<<e)}(n,a,1)}var Ku={},Sg="__NG_DI_FLAG__",_p="ngTempTokenPath",KE=/\n/gm,Ie="__source",mC=ar({provide:String,useValue:ar}),bd=void 0;function bg(n){var a=bd;return bd=n,a}function gt(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt.Default;if(void 0===bd)throw new Error("inject() must be called from an injection context");return null===bd?Xv(n,void 0,a):bd.get(n,a&Qt.Optional?null:void 0,a)}function Ot(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt.Default;return(Yf()||gt)(pn(n),a)}function Eg(n){for(var a=[],e=0;e<n.length;e++){var r=pn(n[e]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var o=void 0,u=Qt.Default,f=0;f<r.length;f++){var p=r[f],v=xg(p);"number"==typeof v?-1===v?o=p.token:u|=v:o=p}a.push(Ot(o,u))}else a.push(Ot(r))}return a}function ec(n,a){return n[Sg]=a,n.prototype[Sg]=a,n}function xg(n){return n[Sg]}function _C(n,a,e,r){var o=n[_p];throw a[Ie]&&o.unshift(a[Ie]),n.message=function(n,a,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;var o=Wn(a);if(Array.isArray(a))o=a.map(Wn).join(" -> ");else if("object"==typeof a){var u=[];for(var f in a)if(a.hasOwnProperty(f)){var p=a[f];u.push(f+":"+("string"==typeof p?JSON.stringify(p):Wn(p)))}o="{".concat(u.join(", "),"}")}return"".concat(e).concat(r?"("+r+")":"","[").concat(o,"]: ").concat(n.replace(KE,"\n  "))}("\n"+n.message,o,e,r),n.ngTokenPath=o,n[_p]=null,n}var Rd=ec(Ua("Inject",function(n){return{token:n}}),-1),qa=ec(Ua("Optional"),8),tc=ec(Ua("SkipSelf"),4),Mg=function(){function n(a){N(this,n),this.changingThisBreaksApplicationSecurity=a}return j(n,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see https://g.co/ng/security#xss)"}}]),n}();function Qi(n){return n instanceof Mg?n.changingThisBreaksApplicationSecurity:n}var DC=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,dx=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Lr=function(){return(Lr=Lr||{})[Lr.NONE=0]="NONE",Lr[Lr.HTML=1]="HTML",Lr[Lr.STYLE=2]="STYLE",Lr[Lr.SCRIPT=3]="SCRIPT",Lr[Lr.URL=4]="URL",Lr[Lr.RESOURCE_URL=5]="RESOURCE_URL",Lr}();function li(n){var a=function(){var n=Ke();return n&&n[12]}();return a?a.sanitize(Lr.URL,n)||"":function(n,a){var e=function(n){return n instanceof Mg&&n.getTypeName()||null}(n);if(null!=e&&e!==a){if("ResourceURL"===e&&"URL"===a)return!0;throw new Error("Required a safe ".concat(a,", got a ").concat(e," (see https://g.co/ng/security#xss)"))}return e===a}(n,"URL")?Qi(n):function(n){return(n=String(n)).match(DC)||n.match(dx)?n:"unsafe:"+n}(rn(n))}var GC="__ngContext__";function Or(n,a){n[GC]=a}function Md(n){var a=function(n){return n[GC]||null}(n);return a?Array.isArray(a)?a:a.lView:null}function kg(n){return n.ngOriginalError}function Tx(n){for(var a=arguments.length,e=new Array(a>1?a-1:0),r=1;r<a;r++)e[r-1]=arguments[r];n.error.apply(n,e)}var oc=function(){function n(){N(this,n),this._console=console}return j(n,[{key:"handleError",value:function(e){var r=this._findOriginalError(e),o=function(n){return n&&n.ngErrorLogger||Tx}(e);o(this._console,"ERROR",e),r&&o(this._console,"ORIGINAL ERROR",r)}},{key:"_findOriginalError",value:function(e){for(var r=e&&kg(e);r&&kg(r);)r=kg(r);return r||null}}]),n}(),UC=function(){return("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(rr)}();function pa(n){return n instanceof Function?n():n}var Mo=function(){return(Mo=Mo||{})[Mo.Important=1]="Important",Mo[Mo.DashCase=2]="DashCase",Mo}();function Fp(n,a){return undefined(n,a)}function el(n){var a=n[3];return zo(a)?a[3]:a}function Hg(n){return jC(n[13])}function kp(n){return jC(n[4])}function jC(n){for(;null!==n&&!zo(n);)n=n[4];return n}function bi(n,a,e,r,o){if(null!=r){var u,f=!1;zo(r)?u=r:Ga(r)&&(f=!0,r=r[0]);var p=Wr(r);0===n&&null!==e?null==o?nw(a,e,p):du(a,e,p,o||null,!0):1===n&&null!==e?du(a,e,p,o||null,!0):2===n?function(n,a,e){var r=Gp(n,a);r&&function(n,a,e,r){Dr(n)?n.removeChild(a,e,r):a.removeChild(e)}(n,r,a,e)}(a,p,f):3===n&&a.destroyNode(p),null!=u&&function(n,a,e,r,o){var u=e[7];u!==Wr(e)&&bi(a,n,r,u,o);for(var p=10;p<e.length;p++){var v=e[p];Ld(v[1],v,n,a,r,u)}}(a,n,u,e,o)}}function Np(n,a){return Dr(n)?n.createText(a):n.createTextNode(a)}function eo(n,a,e){return Dr(n)?n.createElement(a,e):null===e?n.createElement(a):n.createElementNS(e,a)}function ZC(n,a){var e=n[9],r=e.indexOf(a),o=a[3];1024&a[2]&&(a[2]&=-1025,ag(o,-1)),e.splice(r,1)}function Vg(n,a){if(!(n.length<=10)){var e=10+a,r=n[e];if(r){var o=r[17];null!==o&&o!==n&&ZC(o,r),a>0&&(n[e-1][4]=r[4]);var u=mp(n,10+a);!function(n,a){Ld(n,a,a[11],2,null,null),a[0]=null,a[6]=null}(r[1],r);var f=u[19];null!==f&&f.detachView(u[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function tl(n,a){if(!(256&a[2])){var e=a[11];Dr(e)&&e.destroyNode&&Ld(n,a,e,3,null,null),function(n){var a=n[13];if(!a)return Wg(n[1],n);for(;a;){var e=null;if(Ga(a))e=a[13];else{var r=a[10];r&&(e=r)}if(!e){for(;a&&!a[4]&&a!==n;)Ga(a)&&Wg(a[1],a),a=a[3];null===a&&(a=n),Ga(a)&&Wg(a[1],a),e=a&&a[4]}a=e}}(a)}}function Wg(n,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function(n,a){var e;if(null!=n&&null!=(e=n.destroyHooks))for(var r=0;r<e.length;r+=2){var o=a[e[r]];if(!(o instanceof fd)){var u=e[r+1];if(Array.isArray(u))for(var f=0;f<u.length;f+=2){var p=o[u[f]],v=u[f+1];try{v.call(p)}finally{}}else try{u.call(o)}finally{}}}}(n,a),function(n,a){var e=n.cleanup,r=a[7],o=-1;if(null!==e)for(var u=0;u<e.length-1;u+=2)if("string"==typeof e[u]){var f=e[u+1],p="function"==typeof f?f(a):Wr(a[f]),v=r[o=e[u+2]],g=e[u+3];"boolean"==typeof g?p.removeEventListener(e[u],v,g):g>=0?r[o=g]():r[o=-g].unsubscribe(),u+=2}else{var y=r[o=e[u+1]];e[u].call(y)}if(null!==r){for(var _=o+1;_<r.length;_++)(0,r[_])();a[7]=null}}(n,a),1===a[1].type&&Dr(a[11])&&a[11].destroy();var e=a[17];if(null!==e&&zo(a[3])){e!==a[3]&&ZC(e,a);var r=a[19];null!==r&&r.detachView(n)}}}function ew(n,a,e){return function(n,a,e){for(var r=a;null!==r&&40&r.type;)r=(a=r).parent;if(null===r)return e[0];if(2&r.flags){var o=n.data[r.directiveStart].encapsulation;if(o===La.None||o===La.Emulated)return null}return Ko(r,e)}(n,a.parent,e)}function du(n,a,e,r,o){Dr(n)?n.insertBefore(a,e,r,o):a.insertBefore(e,r,o)}function nw(n,a,e){Dr(n)?n.appendChild(a,e):a.appendChild(e)}function rw(n,a,e,r,o){null!==r?du(n,a,e,r,o):nw(n,a,e)}function Gp(n,a){return Dr(n)?n.parentNode(a):a.parentNode}var aw=function(n,a,e){return 40&n.type?Ko(n,e):null};function Hp(n,a,e,r){var o=ew(n,r,a),u=a[11],p=function(n,a,e){return aw(n,a,e)}(r.parent||a[6],r,a);if(null!=o)if(Array.isArray(e))for(var v=0;v<e.length;v++)rw(u,o,e[v],p,!1);else rw(u,o,e,p,!1)}function Vp(n,a){if(null!==a){var e=a.type;if(3&e)return Ko(a,n);if(4&e)return uc(-1,n[a.index]);if(8&e){var r=a.child;if(null!==r)return Vp(n,r);var o=n[a.index];return zo(o)?uc(-1,o):Wr(o)}if(32&e)return Fp(a,n)()||Wr(n[a.index]);var p=uw(n,a);return null!==p?Array.isArray(p)?p[0]:Vp(el(n[16]),p):Vp(n,a.next)}return null}function uw(n,a){return null!==a?n[16][6].projection[a.projection]:null}function uc(n,a){var e=10+n+1;if(e<a.length){var r=a[e],o=r[1].firstChild;if(null!==o)return Vp(r,o)}return a[7]}function Ts(n,a,e,r,o,u,f){for(;null!=e;){var p=r[e.index],v=e.type;if(f&&0===a&&(p&&Or(Wr(p),r),e.flags|=4),64!=(64&e.flags))if(8&v)Ts(n,a,e.child,r,o,u,!1),bi(a,n,o,p,u);else if(32&v){for(var g=Fp(e,r),y=void 0;y=g();)bi(a,n,o,y,u);bi(a,n,o,p,u)}else 16&v?Dn(n,a,r,e,o,u):bi(a,n,o,p,u);e=f?e.projectionNext:e.next}}function Ld(n,a,e,r,o,u){Ts(e,r,n.firstChild,a,o,u,!1)}function Dn(n,a,e,r,o,u){var f=e[16],v=f[6].projection[r.projection];if(Array.isArray(v))for(var g=0;g<v.length;g++)bi(a,n,o,v[g],u);else Ts(n,a,v,f[3],o,u,!0)}function Ug(n,a,e){Dr(n)?n.setAttribute(a,"style",e):a.style.cssText=e}function zg(n,a,e){Dr(n)?""===e?n.removeAttribute(a,"class"):n.setAttribute(a,"class",e):a.className=e}function jg(n,a,e){for(var r=n.length;;){var o=n.indexOf(a,e);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){var u=a.length;if(o+u===r||n.charCodeAt(o+u)<=32)return o}e=o+1}}var qg="ng-template";function fw(n,a,e){for(var r=0;r<n.length;){var o=n[r++];if(e&&"class"===o){if(-1!==jg((o=n[r]).toLowerCase(),a,0))return!0}else if(1===o){for(;r<n.length&&"string"==typeof(o=n[r++]);)if(o.toLowerCase()===a)return!0;return!1}}return!1}function pw(n){return 4===n.type&&n.value!==qg}function va(n,a,e){return a===(4!==n.type||e?n.value:qg)}function Hx(n,a,e){for(var r=4,o=n.attrs||[],u=function(n){for(var a=0;a<n.length;a++)if(rC(n[a]))return a;return n.length}(o),f=!1,p=0;p<a.length;p++){var v=a[p];if("number"!=typeof v){if(!f)if(4&r){if(r=2|1&r,""!==v&&!va(n,v,e)||""===v&&1===a.length){if(Wi(r))return!1;f=!0}}else{var g=8&r?v:a[++p];if(8&r&&null!==n.attrs){if(!fw(n.attrs,g,e)){if(Wi(r))return!1;f=!0}continue}var _=Vx(8&r?"class":v,o,pw(n),e);if(-1===_){if(Wi(r))return!1;f=!0;continue}if(""!==g){var C;C=_>u?"":o[_+1].toLowerCase();var w=8&r?C:null;if(w&&-1!==jg(w,g,0)||2&r&&g!==C){if(Wi(r))return!1;f=!0}}}}else{if(!f&&!Wi(r)&&!Wi(v))return!1;if(f&&Wi(v))continue;f=!1,r=v|1&r}}return Wi(r)||f}function Wi(n){return 0==(1&n)}function Vx(n,a,e,r){if(null===a)return-1;var o=0;if(r||!e){for(var u=!1;o<a.length;){var f=a[o];if(f===n)return o;if(3===f||6===f)u=!0;else{if(1===f||2===f){for(var p=a[++o];"string"==typeof p;)p=a[++o];continue}if(4===f)break;if(0===f){o+=4;continue}}o+=u?1:2}return-1}return function(n,a){var e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){var r=n[e];if("number"==typeof r)return-1;if(r===a)return e;e++}return-1}(a,n)}function lc(n,a){for(var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<a.length;r++)if(Hx(n,a[r],e))return!0;return!1}function Kg(n,a){return n?":not("+a.trim()+")":a}function zx(n){for(var a=n[0],e=1,r=2,o="",u=!1;e<n.length;){var f=n[e];if("string"==typeof f)if(2&r){var p=n[++e];o+="["+f+(p.length>0?'="'+p+'"':"")+"]"}else 8&r?o+="."+f:4&r&&(o+=" "+f);else""!==o&&!Wi(f)&&(a+=Kg(u,o),o=""),r=f,u=u||!Wi(r);e++}return""!==o&&(a+=Kg(u,o)),a}var on={};function J(n){Yg(Bn(),Ke(),Ji()+n,Yo())}function Yg(n,a,e,r){if(!r)if(3==(3&a[2])){var u=n.preOrderCheckHooks;null!==u&&up(a,u,e)}else{var f=n.preOrderHooks;null!==f&&zl(a,f,0,e)}Ar(e)}function cc(n,a){return n<<17|a<<2}function Qo(n){return n>>17&32767}function Up(n){return 2|n}function As(n){return(131068&n)>>2}function zp(n,a){return-131069&n|a<<2}function Xg(n){return 1|n}function Tw(n,a){var e=n.contentQueries;if(null!==e)for(var r=0;r<e.length;r+=2){var u=e[r+1];if(-1!==u){var f=n.data[u];op(e[r]),f.contentQueries(2,a[u],u)}}}function Nd(n,a,e,r,o,u,f,p,v,g){var y=a.blueprint.slice();return y[0]=o,y[2]=140|r,ep(y),y[3]=y[15]=n,y[8]=e,y[10]=f||n&&n[10],y[11]=p||n&&n[11],y[12]=v||n&&n[12]||null,y[9]=g||n&&n[9]||null,y[6]=u,y[16]=2==a.type?n[16]:y,y}function Ms(n,a,e,r,o){var u=n.data[a];if(null===u)u=function(n,a,e,r,o){var u=tp(),f=Xe(),v=n.data[a]=function(n,a,e,r,o,u){return{type:e,index:r,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:u,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,f?u:u&&u.parent,e,a,r,o);return null===n.firstChild&&(n.firstChild=v),null!==u&&(f?null==u.child&&null!==v.parent&&(u.child=v):null===u.next&&(u.next=v)),v}(n,a,e,r,o),jt.lFrame.inI18n&&(u.flags|=64);else if(64&u.type){u.type=e,u.value=r,u.attrs=o;var f=function(){var n=jt.lFrame,a=n.currentTNode;return n.isParent?a:a.parent}();u.injectorIndex=null===f?-1:f.injectorIndex}return Ha(u,!0),u}function dc(n,a,e,r){if(0===e)return-1;for(var o=a.length,u=0;u<e;u++)a.push(r),n.blueprint.push(r),n.data.push(null);return o}function Os(n,a,e){Ul(a);try{var r=n.viewQuery;null!==r&&_m(1,r,e);var o=n.template;null!==o&&Ow(n,a,o,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Tw(n,a),n.staticViewQueries&&_m(2,n.viewQuery,e);var u=n.components;null!==u&&function(n,a){for(var e=0;e<a.length;e++)zw(n,a[e])}(a,u)}catch(f){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),f}finally{a[2]&=-5,Wa()}}function fc(n,a,e,r){var o=a[2];if(256!=(256&o)){Ul(a);var u=Yo();try{ep(a),function(n){jt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&Ow(n,a,e,2,r);var f=3==(3&o);if(!u)if(f){var p=n.preOrderCheckHooks;null!==p&&up(a,p,null)}else{var v=n.preOrderHooks;null!==v&&zl(a,v,0,null),fg(a,0)}if(function(n){for(var a=Hg(n);null!==a;a=kp(a))if(a[2])for(var e=a[9],r=0;r<e.length;r++){var o=e[r];0==(1024&o[2])&&ag(o[3],1),o[2]|=1024}}(a),function(n){for(var a=Hg(n);null!==a;a=kp(a))for(var e=10;e<a.length;e++){var r=a[e],o=r[1];ud(r)&&fc(o,r,o.template,r[8])}}(a),null!==n.contentQueries&&Tw(n,a),!u)if(f){var g=n.contentCheckHooks;null!==g&&up(a,g)}else{var y=n.contentHooks;null!==y&&zl(a,y,1),fg(a,1)}!function(n,a){var e=n.hostBindingOpCodes;if(null!==e)try{for(var r=0;r<e.length;r++){var o=e[r];if(o<0)Ar(~o);else{var u=o,f=e[++r],p=e[++r];EE(f,u),p(2,a[u])}}}finally{Ar(-1)}}(n,a);var _=n.components;null!==_&&function(n,a){for(var e=0;e<a.length;e++)sR(n,a[e])}(a,_);var C=n.viewQuery;if(null!==C&&_m(2,C,r),!u)if(f){var w=n.viewCheckHooks;null!==w&&up(a,w)}else{var x=n.viewHooks;null!==x&&zl(a,x,2),fg(a,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),u||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,ag(a[3],-1))}finally{Wa()}}}function Mw(n,a,e,r){var o=a[10],u=!Yo(),f=q_(a);try{u&&!f&&o.begin&&o.begin(),f&&Os(n,a,r),fc(n,a,e,r)}finally{u&&!f&&o.end&&o.end()}}function Ow(n,a,e,r,o){var u=Ji(),f=2&r;try{Ar(-1),f&&a.length>20&&Yg(n,a,20,Yo()),e(r,o)}finally{Ar(u)}}function sm(n,a,e){if(Qv(a))for(var o=a.directiveEnd,u=a.directiveStart;u<o;u++){var f=n.data[u];f.contentQueries&&f.contentQueries(1,e[u],u)}}function um(n,a,e){!sg()||(function(n,a,e,r){var o=e.directiveStart,u=e.directiveEnd;n.firstCreatePass||gd(e,a),Or(r,a);for(var f=e.initialInputs,p=o;p<u;p++){var v=n.data[p],g=go(v);g&&Vw(a,e,v);var y=Cd(a,n,p,e);Or(y,a),null!==f&&pc(0,p-o,y,v,0,f),g&&(Ro(e.index,a)[8]=y)}}(n,a,e,Ko(e,a)),128==(128&e.flags)&&function(n,a,e){var r=e.directiveStart,o=e.directiveEnd,f=e.index,p=jt.lFrame.currentDirectiveIndex;try{Ar(f);for(var v=r;v<o;v++){var g=n.data[v],y=a[v];ip(v),(null!==g.hostBindings||0!==g.hostVars||null!==g.hostAttrs)&&hm(g,y)}}finally{Ar(-1),ip(p)}}(n,a,e))}function lm(n,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ko,r=a.localNames;if(null!==r)for(var o=a.index+1,u=0;u<r.length;u+=2){var f=r[u+1],p=-1===f?e(a,n):n[f];n[o++]=p}}function Zp(n){var a=n.tView;return null===a||a.incompleteFirstPass?n.tView=Qp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):a}function Qp(n,a,e,r,o,u,f,p,v,g){var y=20+r,_=y+o,C=function(n,a){for(var e=[],r=0;r<a;r++)e.push(r<n?null:on);return e}(y,_),w="function"==typeof g?g():g;return C[1]={type:n,blueprint:C,template:e,queries:null,viewQuery:p,declTNode:a,data:C.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof u?u():u,pipeRegistry:"function"==typeof f?f():f,firstChild:null,schemas:v,consts:w,incompleteFirstPass:!1}}function eh(n,a,e,r){var o=Cm(a);null===e?o.push(r):(o.push(e),n.firstCreatePass&&qw(n).push(r,o.length-1))}function Lw(n,a,e){for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];(e=null===e?{}:e).hasOwnProperty(r)?e[r].push(a,o):e[r]=[a,o]}return e}function yo(n,a,e,r,o,u,f,p){var y,v=Ko(a,e),g=a.inputs;!p&&null!=g&&(y=g[r])?(Kw(n,e,y,r,o),Ba(a)&&function(n,a){var e=Ro(a,n);16&e[2]||(e[2]|=64)}(e,a.index)):3&a.type&&(r=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),o=null!=f?f(o,a.value||"",r):o,Dr(u)?u.setProperty(v,r,o):hg(r)||(v.setProperty?v.setProperty(r,o):v[r]=o))}function pm(n,a,e,r){var o=!1;if(sg()){var u=function(n,a,e){var r=n.directiveRegistry,o=null;if(r)for(var u=0;u<r.length;u++){var f=r[u];lc(e,f.selectors,!1)&&(o||(o=[]),yd(gd(e,a),n,f.type),go(f)?(Gw(n,e),o.unshift(f)):o.push(f))}return o}(n,a,e),f=null===r?null:{"":-1};if(null!==u){o=!0,Bw(e,n.data.length,u.length);for(var p=0;p<u.length;p++){var v=u[p];v.providersResolver&&v.providersResolver(v)}for(var g=!1,y=!1,_=dc(n,a,u.length,null),C=0;C<u.length;C++){var w=u[C];e.mergedAttrs=hd(e.mergedAttrs,w.hostAttrs),Hw(n,e,a,_,w),aR(_,w,f),null!==w.contentQueries&&(e.flags|=8),(null!==w.hostBindings||null!==w.hostAttrs||0!==w.hostVars)&&(e.flags|=128);var x=w.type.prototype;!g&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),g=!0),!y&&(x.ngOnChanges||x.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),y=!0),_++}!function(n,a){for(var r=a.directiveEnd,o=n.data,u=a.attrs,f=[],p=null,v=null,g=a.directiveStart;g<r;g++){var y=o[g],_=y.inputs,C=null===u||pw(a)?null:nl(_,u);f.push(C),p=Lw(_,g,p),v=Lw(y.outputs,g,v)}null!==p&&(p.hasOwnProperty("class")&&(a.flags|=16),p.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=f,a.inputs=p,a.outputs=v}(n,e)}f&&function(n,a,e){if(a)for(var r=n.localNames=[],o=0;o<a.length;o+=2){var u=e[a[o+1]];if(null==u)throw new Ni("301","Export of name '".concat(a[o+1],"' not found!"));r.push(a[o],u)}}(e,r,f)}return e.mergedAttrs=hd(e.mergedAttrs,e.attrs),o}function Hd(n,a,e,r,o,u){var f=u.hostBindings;if(f){var p=n.hostBindingOpCodes;null===p&&(p=n.hostBindingOpCodes=[]);var v=~a.index;(function(n){for(var a=n.length;a>0;){var e=n[--a];if("number"==typeof e&&e<0)return e}return 0})(p)!=v&&p.push(v),p.push(r,o,f)}}function hm(n,a){null!==n.hostBindings&&n.hostBindings(1,a)}function Gw(n,a){a.flags|=2,(n.components||(n.components=[])).push(a.index)}function aR(n,a,e){if(e){if(a.exportAs)for(var r=0;r<a.exportAs.length;r++)e[a.exportAs[r]]=n;go(a)&&(e[""]=n)}}function Bw(n,a,e){n.flags|=1,n.directiveStart=a,n.directiveEnd=a+e,n.providerIndexes=a}function Hw(n,a,e,r,o){n.data[r]=o;var u=o.factory||(o.factory=au(o.type)),f=new fd(u,go(o),null);n.blueprint[r]=f,e[r]=f,Hd(n,a,0,r,dc(n,e,o.hostVars,on),o)}function Vw(n,a,e){var r=Ko(a,n),o=Zp(e),u=n[10],f=Vd(n,Nd(n,o,null,e.onPush?64:16,r,a,u,u.createRenderer(r,e),null,null));n[a.index]=f}function ga(n,a,e,r,o,u){var f=Ko(n,a);!function(n,a,e,r,o,u,f){if(null==u)Dr(n)?n.removeAttribute(a,o,e):a.removeAttribute(o);else{var p=null==f?rn(u):f(u,r||"",o);Dr(n)?n.setAttribute(a,o,p,e):e?a.setAttributeNS(e,o,p):a.setAttribute(o,p)}}(a[11],f,u,n.value,e,r,o)}function pc(n,a,e,r,o,u){var f=u[a];if(null!==f)for(var p=r.setInput,v=0;v<f.length;){var g=f[v++],y=f[v++],_=f[v++];null!==p?r.setInput(e,_,g,y):e[y]=_}}function nl(n,a){for(var e=null,r=0;r<a.length;){var o=a[r];if(0!==o)if(5!==o){if("number"==typeof o)break;n.hasOwnProperty(o)&&(null===e&&(e=[]),e.push(o,n[o],a[r+1])),r+=2}else r+=2;else r+=4}return e}function Ww(n,a,e,r){return new Array(n,!0,!1,a,null,0,r,e,null,null)}function sR(n,a){var e=Ro(a,n);if(ud(e)){var r=e[1];80&e[2]?fc(r,e,r.template,e[8]):e[5]>0&&th(e)}}function th(n){for(var a=Hg(n);null!==a;a=kp(a))for(var e=10;e<a.length;e++){var r=a[e];if(1024&r[2]){var o=r[1];fc(o,r,o.template,r[8])}else r[5]>0&&th(r)}var f=n[1].components;if(null!==f)for(var p=0;p<f.length;p++){var v=Ro(f[p],n);ud(v)&&v[5]>0&&th(v)}}function zw(n,a){var e=Ro(a,n),r=e[1];(function(n,a){for(var e=a.length;e<n.blueprint.length;e++)a.push(n.blueprint[e])})(r,e),Os(r,e,e[8])}function Vd(n,a){return n[13]?n[14][4]=a:n[13]=a,n[14]=a,a}function gm(n){for(;n;){n[2]|=64;var a=el(n);if(iE(n)&&!a)return n;n=a}return null}function mm(n,a,e){var r=a[10];r.begin&&r.begin();try{fc(n,a,n.template,e)}catch(o){throw wm(a,o),o}finally{r.end&&r.end()}}function zd(n){!function(n){for(var a=0;a<n.components.length;a++){var e=n.components[a],r=Md(e),o=r[1];Mw(o,r,o.template,e)}}(n[8])}function _m(n,a,e){op(0),a(n,e)}var cR=function(){return Promise.resolve(null)}();function Cm(n){return n[7]||(n[7]=[])}function qw(n){return n.cleanup||(n.cleanup=[])}function wm(n,a){var e=n[9],r=e?e.get(oc,null):null;r&&r.handleError(a)}function Kw(n,a,e,r,o){for(var u=0;u<e.length;){var f=e[u++],p=e[u++],v=a[f],g=n.data[f];null!==g.setInput?g.setInput(v,o,r,p):v[p]=o}}function Ei(n,a,e){var r=vr(a,n);!function(n,a,e){Dr(n)?n.setValue(a,e):a.textContent=e}(n[11],r,e)}function nh(n,a,e){var r=e?n.styles:null,o=e?n.classes:null,u=0;if(null!==a)for(var f=0;f<a.length;f++){var p=a[f];"number"==typeof p?u=p:1==u?o=Hr(o,p):2==u&&(r=Hr(r,p+": "+a[++f]+";"))}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=o:n.classesWithoutHost=o}var rh=new In("INJECTOR",-1),$w=function(){function n(){N(this,n)}return j(n,[{key:"get",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ku;if(r===Ku){var o=new Error("NullInjectorError: No provider for ".concat(Wn(e),"!"));throw o.name="NullInjectorError",o}return r}}]),n}(),ih=new In("Set Injector scope."),qd={},Kd={},oh=void 0;function Xw(){return void 0===oh&&(oh=new $w),oh}function Sm(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,o=Jw(n,a,e,r);return o._resolveInjectorDefTypes(),o}function Jw(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new ah(n,e,a||Xw(),r)}var ah=function(){function n(a,e,r){var o=this,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;N(this,n),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var f=[];e&&za(e,function(v){return o.processProvider(v,a,e)}),za([a],function(v){return o.processInjectorType(v,[],f)}),this.records.set(rh,hc(void 0,this));var p=this.records.get(ih);this.scope=null!=p?p.value:null,this.source=u||("object"==typeof a?null:Wn(a))}return j(n,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ku,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qt.Default;this.assertNotDestroyed();var u=bg(this),f=ys(void 0);try{if(!(o&Qt.SkipSelf)){var p=this.records.get(e);if(void 0===p){var v=gu(e)&&Qc(e);p=v&&this.injectableDefInScope(v)?hc(sh(e),qd):null,this.records.set(e,p)}if(null!=p)return this.hydrate(e,p)}var g=o&Qt.Self?Xw():this.parent;return g.get(e,r=o&Qt.Optional&&r===Ku?null:r)}catch(_){if("NullInjectorError"===_.name){var y=_[_p]=_[_p]||[];if(y.unshift(Wn(e)),u)throw _;return _C(_,e,"R3InjectorError",this.source)}throw _}finally{ys(f),bg(u)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach(function(r){return e.get(r)})}},{key:"toString",value:function(){var e=[];return this.records.forEach(function(o,u){return e.push(Wn(u))}),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,r,o){var u=this;if(!(e=pn(e)))return!1;var f=Kf(e),p=null==f&&e.ngModule||void 0,v=void 0===p?e:p,_=-1!==o.indexOf(v);if(void 0!==p&&(f=Kf(p)),null==f)return!1;if(null!=f.imports&&!_){var C;o.push(v);try{za(f.imports,function(A){u.processInjectorType(A,r,o)&&(void 0===C&&(C=[]),C.push(A))})}finally{}if(void 0!==C)for(var w=function(M){var O=C[M],I=O.ngModule,B=O.providers;za(B,function(z){return u.processProvider(z,I,B||ir)})},x=0;x<C.length;x++)w(x)}this.injectorDefTypes.add(v);var E=au(v)||function(){return new v};this.records.set(v,hc(E,qd));var b=f.providers;if(null!=b&&!_){var T=e;za(b,function(A){return u.processProvider(A,T,b)})}return void 0!==p&&void 0!==e.providers}},{key:"processProvider",value:function(e,r,o){var u=Ps(e=pn(e))?e:pn(e&&e.provide),f=function(n,a,e){return vc(n)?hc(void 0,n.useValue):hc(bm(n),qd)}(e);if(Ps(e)||!0!==e.multi)this.records.get(u);else{var p=this.records.get(u);p||((p=hc(void 0,qd,!0)).factory=function(){return Eg(p.multi)},this.records.set(u,p)),u=e,p.multi.push(e)}this.records.set(u,f)}},{key:"hydrate",value:function(e,r){return r.value===qd&&(r.value=Kd,r.value=r.factory()),"object"==typeof r.value&&r.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(r.value)&&this.onDestroy.add(r.value),r.value}},{key:"injectableDefInScope",value:function(e){if(!e.providedIn)return!1;var r=pn(e.providedIn);return"string"==typeof r?"any"===r||r===this.scope:this.injectorDefTypes.has(r)}}]),n}();function sh(n){var a=Qc(n),e=null!==a?a.factory:au(n);if(null!==e)return e;if(n instanceof In)throw new Error("Token ".concat(Wn(n)," is missing a \u0275prov definition."));if(n instanceof Function)return function(n){var a=n.length;if(a>0){var e=function(n,a){for(var e=[],r=0;r<n;r++)e.push(a);return e}(a,"?");throw new Error("Can't resolve all parameters for ".concat(Wn(n),": (").concat(e.join(", "),")."))}var r=function(n){var a=n&&(n[Ki]||n[ed]);if(a){var e=function(n){if(n.hasOwnProperty("name"))return n.name;var a=(""+n).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(n);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(e,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in a future version of Angular. Please add @Injectable() to the "'.concat(e,'" class.')),a}return null}(n);return null!==r?function(){return r.factory(n)}:function(){return new n}}(n);throw new Error("unreachable")}function bm(n,a,e){var r=void 0;if(Ps(n)){var o=pn(n);return au(o)||sh(o)}if(vc(n))r=function(){return pn(n.useValue)};else if(function(n){return!(!n||!n.useFactory)}(n))r=function(){return n.useFactory.apply(n,On(Eg(n.deps||[])))};else if(function(n){return!(!n||!n.useExisting)}(n))r=function(){return Ot(pn(n.useExisting))};else{var u=pn(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return au(u)||sh(u);r=function(){return gi(u,On(Eg(n.deps)))}}return r}function hc(n,a){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:n,value:a,multi:e?[]:void 0}}function vc(n){return null!==n&&"object"==typeof n&&mC in n}function Ps(n){return"function"==typeof n}function gu(n){return"function"==typeof n||"object"==typeof n&&n instanceof In}var Ui=function(){var n=function(){function a(){N(this,a)}return j(a,null,[{key:"create",value:function(r,o){var u;if(Array.isArray(r))return Sm({name:""},o,r,"");var f=null!==(u=r.name)&&void 0!==u?u:"";return Sm({name:f},r.parent,r.providers,f)}}]),a}();return n.THROW_IF_NOT_FOUND=Ku,n.NULL=new $w,n.\u0275prov=un({token:n,providedIn:"any",factory:function(){return Ot(rh)}}),n.__NG_ELEMENT_ID__=-1,n}();function SR(n,a){dd(Md(n)[1],Ur())}var mc=null;function ya(){if(!mc){var n=rr.Symbol;if(n&&n.iterator)mc=n.iterator;else for(var a=Object.getOwnPropertyNames(Map.prototype),e=0;e<a.length;++e){var r=a[e];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(mc=r)}}return mc}function yc(n){return!!Mm(n)&&(Array.isArray(n)||!(n instanceof Map)&&ya()in n)}function Mm(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function $a(n,a,e){return n[a]=e}function xi(n,a,e){return!Object.is(n[a],e)&&(n[a]=e,!0)}function Ls(n,a,e,r){var o=xi(n,a,e);return xi(n,a+1,r)||o}function na(n,a,e,r,o,u){var f=Ls(n,a,e,r);return Ls(n,a+2,o,u)||f}function Om(n,a,e,r){var o=Ke();return xi(o,Wl(),a)&&(Bn(),ga(Mr(),o,n,a,e,r)),Om}function _c(n,a,e,r){return xi(n,Wl(),e)?a+rn(e)+r:on}function wc(n,a,e,r,o,u,f,p){var g=function(n,a,e,r,o){var u=Ls(n,a,e,r);return xi(n,a+2,o)||u}(n,To(),e,o,f);return da(3),g?a+rn(e)+r+rn(o)+u+rn(f)+p:on}function Ge(n,a,e,r,o,u,f,p){var v=Ke(),g=Bn(),y=n+20,_=g.firstCreatePass?function(n,a,e,r,o,u,f,p,v){var g=a.consts,y=Ms(a,n,4,f||null,ei(g,p));pm(a,e,y,ei(g,v)),dd(a,y);var _=y.tViews=Qp(2,y,r,o,u,a.directiveRegistry,a.pipeRegistry,null,a.schemas,g);return null!==a.queries&&(a.queries.template(a,y),_.queries=a.queries.embeddedTView(y)),y}(y,g,v,a,e,r,o,u,f):g.data[y];Ha(_,!1);var C=v[11].createComment("");Hp(g,v,C,_),Or(C,v),Vd(v,v[y]=Ww(C,v,C,_)),Hl(_)&&um(g,v,_),null!=f&&lm(v,_,p)}function st(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt.Default,e=Ke();if(null===e)return Ot(n,a);var r=Ur();return uC(r,e,pn(n),a)}function Bm(){throw new Error("invalid")}function d(n,a,e){var r=Ke();return xi(r,Wl(),a)&&yo(Bn(),Mr(),r,n,a,r[11],e,!1),d}function i(n,a,e,r,o){var f=o?"class":"style";Kw(n,e,a.inputs[f],f,r)}function s(n,a,e,r){var o=Ke(),u=Bn(),f=20+n,p=o[11],v=o[f]=eo(p,a,jt.lFrame.currentNamespace),g=u.firstCreatePass?function(n,a,e,r,o,u,f){var p=a.consts,g=Ms(a,n,2,o,ei(p,u));return pm(a,e,g,ei(p,f)),null!==g.attrs&&nh(g,g.attrs,!1),null!==g.mergedAttrs&&nh(g,g.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,g),g}(f,u,o,0,a,e,r):u.data[f];Ha(g,!0);var y=g.mergedAttrs;null!==y&&dp(p,v,y);var _=g.classes;null!==_&&zg(p,v,_);var C=g.styles;null!==C&&Ug(p,v,C),64!=(64&g.flags)&&Hp(u,o,v,g),0===jt.lFrame.elementDepthCount&&Or(v,o),jt.lFrame.elementDepthCount++,Hl(g)&&(um(u,o,g),sm(u,g,o)),null!==r&&lm(o,g)}function l(){var n=Ur();Xe()?ug():Ha(n=n.parent,!1);var a=n;jt.lFrame.elementDepthCount--;var e=Bn();e.firstCreatePass&&(dd(e,n),Qv(n)&&e.queries.elementEnd(n)),null!=a.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(a)&&i(e,a,Ke(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(a)&&i(e,a,Ke(),a.stylesWithoutHost,!1)}function c(n,a,e,r){s(n,a,e,r),l()}function S(n,a,e){var r=Ke(),o=Bn(),u=n+20,f=o.firstCreatePass?function(n,a,e,r,o){var u=a.consts,f=ei(u,r),p=Ms(a,n,8,"ng-container",f);return null!==f&&nh(p,f,!0),pm(a,e,p,ei(u,o)),null!==a.queries&&a.queries.elementStart(a,p),p}(u,o,r,a,e):o.data[u];Ha(f,!0);var p=r[u]=r[11].createComment("");Hp(o,r,p,f),Or(p,r),Hl(f)&&(um(o,r,f),sm(o,f,r)),null!=e&&lm(r,f)}function R(){var n=Ur(),a=Bn();Xe()?ug():Ha(n=n.parent,!1),a.firstCreatePass&&(dd(a,n),Qv(n)&&a.queries.elementEnd(n))}function L(){return Ke()}function U(n){return!!n&&"function"==typeof n.then}function K(n){return!!n&&"function"==typeof n.subscribe}var ee=K;function ae(n,a,e,r){var o=Ke(),u=Bn(),f=Ur();return function(n,a,e,r,o,u,f,p){var v=Hl(r),y=n.firstCreatePass&&qw(n),_=a[8],C=Cm(a),w=!0;if(3&r.type||p){var x=Ko(r,a),E=p?p(x):x,b=C.length,T=p?function(te){return p(Wr(te[r.index]))}:r.index;if(Dr(e)){var A=null;if(!p&&v&&(A=function(n,a,e,r){var o=n.cleanup;if(null!=o)for(var u=0;u<o.length-1;u+=2){var f=o[u];if(f===e&&o[u+1]===r){var p=a[7],v=o[u+2];return p.length>v?p[v]:null}"string"==typeof f&&(u+=2)}return null}(n,a,o,r.index)),null!==A)(A.__ngLastListenerFn__||A).__ngNextListenerFn__=u,A.__ngLastListenerFn__=u,w=!1;else{u=Qe(r,a,_,u,!1);var O=e.listen(E,o,u);C.push(u,O),y&&y.push(o,T,b,b+1)}}else u=Qe(r,a,_,u,!0),E.addEventListener(o,u,f),C.push(u),y&&y.push(o,T,b,f)}else u=Qe(r,a,_,u,!1);var B,I=r.outputs;if(w&&null!==I&&(B=I[o])){var z=B.length;if(z)for(var P=0;P<z;P+=2){var ce=a[B[P]][B[P+1]].subscribe(u),G=C.length;C.push(u,ce),y&&y.push(o,r.index,G,-(G+1))}}}(u,o,o[11],f,n,a,!!e,r),ae}function Pe(n,a,e,r){try{return!1!==e(r)}catch(o){return wm(n,o),!1}}function Qe(n,a,e,r,o){return function u(f){if(f===Function)return r;var p=2&n.flags?Ro(n.index,a):a;0==(32&a[2])&&gm(p);for(var v=Pe(a,0,r,f),g=u.__ngNextListenerFn__;g;)v=Pe(a,0,g,f)&&v,g=g.__ngNextListenerFn__;return o&&!1===v&&(f.preventDefault(),f.returnValue=!1),v}}function ye(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return wi(n)}function er(n,a,e,r,o){var u=Ke(),f=_c(u,a,e,r);return f!==on&&yo(Bn(),Mr(),u,n,f,u[11],o,!1),er}function iO(n,a,e,r,o){for(var u=n[e+1],f=null===a,p=r?Qo(u):As(u),v=!1;0!==p&&(!1===v||f);){var y=n[p+1];r2(n[p],a)&&(v=!0,n[p+1]=r?Xg(y):Up(y)),p=r?Qo(y):As(y)}v&&(n[e+1]=r?Up(u):Xg(u))}function r2(n,a){return null===n||null==a||(Array.isArray(n)?n[1]:n)===a||!(!Array.isArray(n)||"string"!=typeof a)&&Zl(n,a)>=0}function gh(n,a,e){return Gs(n,a,e,!1),gh}function yu(n,a){return Gs(n,a,null,!0),yu}function Gs(n,a,e,r){var o=Ke(),u=Bn(),f=da(2);u.firstUpdatePass&&function(n,a,e,r){var o=n.data;if(null===o[e+1]){var u=o[Ji()],f=function(n,a){return a>=n.expandoStartIndex}(n,e);(function(n,a){return 0!=(n.flags&(a?16:32))})(u,r)&&null===a&&!f&&(a=!1),a=function(n,a,e,r){var o=function(n){var a=jt.lFrame.currentDirectiveIndex;return-1===a?null:n[a]}(n),u=r?a.residualClasses:a.residualStyles;if(null===o)0===(r?a.classBindings:a.styleBindings)&&(e=Hm(e=KR(null,n,a,e,r),a.attrs,r),u=null);else{var p=a.directiveStylingLast;if(-1===p||n[p]!==o)if(e=KR(o,n,a,e,r),null===u){var g=function(n,a,e){var r=e?a.classBindings:a.styleBindings;if(0!==As(r))return n[Qo(r)]}(n,a,r);void 0!==g&&Array.isArray(g)&&function(n,a,e,r){n[Qo(e?a.classBindings:a.styleBindings)]=r}(n,a,r,g=Hm(g=KR(null,n,a,g[1],r),a.attrs,r))}else u=function(n,a,e){for(var r=void 0,o=a.directiveEnd,u=1+a.directiveStylingLast;u<o;u++)r=Hm(r,n[u].hostAttrs,e);return Hm(r,a.attrs,e)}(n,a,r)}return void 0!==u&&(r?a.residualClasses=u:a.residualStyles=u),e}(o,u,a,r),function(n,a,e,r,o,u){var f=u?a.classBindings:a.styleBindings,p=Qo(f),v=As(f);n[r]=e;var y,g=!1;if(Array.isArray(e)?(null===(y=e[1])||Zl(e,y)>0)&&(g=!0):y=e,o)if(0!==v){var w=Qo(n[p+1]);n[r+1]=cc(w,p),0!==w&&(n[w+1]=zp(n[w+1],r)),n[p+1]=function(n,a){return 131071&n|a<<17}(n[p+1],r)}else n[r+1]=cc(p,0),0!==p&&(n[p+1]=zp(n[p+1],r)),p=r;else n[r+1]=cc(v,0),0===p?p=r:n[v+1]=zp(n[v+1],r),v=r;g&&(n[r+1]=Up(n[r+1])),iO(n,y,r,!0),iO(n,y,r,!1),function(n,a,e,r,o){var u=o?n.residualClasses:n.residualStyles;null!=u&&"string"==typeof a&&Zl(u,a)>=0&&(e[r+1]=Xg(e[r+1]))}(a,y,n,r,u),f=cc(p,v),u?a.classBindings=f:a.styleBindings=f}(o,u,a,e,f,r)}}(u,n,f,r),a!==on&&xi(o,f,a)&&function(n,a,e,r,o,u,f,p){if(3&a.type){var v=n.data,g=v[p+1];O0(function(n){return 1==(1&n)}(g)?vO(v,a,e,o,As(g),f):void 0)||(O0(u)||function(n){return 2==(2&n)}(g)&&(u=vO(v,null,e,o,p,f)),function(n,a,e,r,o){var u=Dr(n);if(a)o?u?n.addClass(e,r):e.classList.add(r):u?n.removeClass(e,r):e.classList.remove(r);else{var f=-1===r.indexOf("-")?void 0:Mo.DashCase;if(null==o)u?n.removeStyle(e,r,f):e.style.removeProperty(r);else{var p="string"==typeof o&&o.endsWith("!important");p&&(o=o.slice(0,-10),f|=Mo.Important),u?n.setStyle(e,r,o,f):e.style.setProperty(r,o,p?"important":"")}}}(r,f,vr(Ji(),e),o,u))}}(u,u.data[Ji()],o,o[11],n,o[f+1]=function(n,a){return null==n||("string"==typeof a?n+=a:"object"==typeof n&&(n=Wn(Qi(n)))),n}(a,e),r,f)}function KR(n,a,e,r,o){var u=null,f=e.directiveEnd,p=e.directiveStylingLast;for(-1===p?p=e.directiveStart:p++;p<f&&(r=Hm(r,(u=a[p]).hostAttrs,o),u!==n);)p++;return null!==n&&(e.directiveStylingLast=p),r}function Hm(n,a,e){var r=e?1:2,o=-1;if(null!==a)for(var u=0;u<a.length;u++){var f=a[u];"number"==typeof f?o=f:o===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),mo(n,f,!!e||a[++u]))}return void 0===n?null:n}function vO(n,a,e,r,o,u){for(var f=null===a,p=void 0;o>0;){var v=n[o],g=Array.isArray(v),y=g?v[1]:v,_=null===y,C=e[o+1];C===on&&(C=_?ir:void 0);var w=_?Cg(C,r):y===r?C:void 0;if(g&&!O0(w)&&(w=Cg(v,r)),O0(w)&&(p=w,f))return p;var x=n[o+1];o=f?Qo(x):As(x)}if(null!==a){var E=u?a.residualClasses:a.residualStyles;null!=E&&(p=Cg(E,r))}return p}function O0(n){return void 0!==n}function oe(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=Ke(),r=Bn(),o=n+20,u=r.firstCreatePass?Ms(r,o,1,a,null):r.data[o],f=e[o]=Np(e[11],a);Hp(r,e,f,u),Ha(u,!1)}function cn(n){return Ct("",n,""),cn}function Ct(n,a,e){var r=Ke(),o=_c(r,n,a,e);return o!==on&&Ei(r,Ji(),o),Ct}function zi(n,a,e,r,o){var u=Ke(),f=function(n,a,e,r,o,u){var p=Ls(n,To(),e,o);return da(2),p?a+rn(e)+r+rn(o)+u:on}(u,n,a,e,r,o);return f!==on&&Ei(u,Ji(),f),zi}function Jd(n,a,e,r,o,u,f){var p=Ke(),v=wc(p,n,a,e,r,o,u,f);return v!==on&&Ei(p,Ji(),v),Jd}function YR(n,a,e,r,o,u,f,p,v,g,y,_,C){var w=Ke(),x=function(n,a,e,r,o,u,f,p,v,g,y,_,C,w){var x=To(),E=na(n,x,e,o,f,v);return E=Ls(n,x+4,y,C)||E,da(6),E?a+rn(e)+r+rn(o)+u+rn(f)+p+rn(v)+g+rn(y)+_+rn(C)+w:on}(w,n,a,e,r,o,u,f,p,v,g,y,_,C);return x!==on&&Ei(w,Ji(),x),YR}var Zd=void 0,G2=["en",[["a","p"],["AM","PM"],Zd],[["AM","PM"],Zd,Zd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zd,"{1} 'at' {0}",Zd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){var e=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===r?1:5}],mh={};function LO(n){return n in mh||(mh[n]=rr.ng&&rr.ng.common&&rr.ng.common.locales&&rr.ng.common.locales[n]),mh[n]}var mt=function(){return(mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt}(),P0="en-US";function LG(n,a,e){var r=Bn();if(r.firstCreatePass){var o=go(n);JR(e,r.data,r.blueprint,o,!0),JR(a,r.data,r.blueprint,o,!1)}}function JR(n,a,e,r,o){if(n=pn(n),Array.isArray(n))for(var u=0;u<n.length;u++)JR(n[u],a,e,r,o);else{var f=Bn(),p=Ke(),v=Ps(n)?n:pn(n.provide),g=bm(n),y=Ur(),_=1048575&y.providerIndexes,C=y.directiveStart,w=y.providerIndexes>>20;if(Ps(n)||!n.multi){var x=new fd(g,o,st),E=QR(v,a,o?_:_+w,C);-1===E?(yd(gd(y,p),f,v),ZR(f,n,a.length),a.push(v),y.directiveStart++,y.directiveEnd++,o&&(y.providerIndexes+=1048576),e.push(x),p.push(x)):(e[E]=x,p[E]=x)}else{var b=QR(v,a,_+w,C),T=QR(v,a,_,_+w),M=T>=0&&e[T];if(o&&!M||!o&&!(b>=0&&e[b])){yd(gd(y,p),f,v);var O=function(n,a,e,r,o){var u=new fd(n,e,st);return u.multi=[],u.index=a,u.componentProviders=0,oP(u,o,r&&!e),u}(o?kG:FG,e.length,o,r,g);!o&&M&&(e[T].providerFactory=O),ZR(f,n,a.length,0),a.push(v),y.directiveStart++,y.directiveEnd++,o&&(y.providerIndexes+=1048576),e.push(O),p.push(O)}else ZR(f,n,b>-1?b:T,oP(e[o?T:b],g,!o&&r));!o&&r&&M&&e[T].componentProviders++}}}function ZR(n,a,e,r){var o=Ps(a),u=function(n){return!!n.useClass}(a);if(o||u){var v=(u?pn(a.useClass):a).prototype.ngOnDestroy;if(v){var g=n.destroyHooks||(n.destroyHooks=[]);if(!o&&a.multi){var y=g.indexOf(e);-1===y?g.push(e,[r,v]):g[y+1].push(r,v)}else g.push(e,v)}}}function oP(n,a,e){return e&&n.componentProviders++,n.multi.push(a)-1}function QR(n,a,e,r){for(var o=e;o<r;o++)if(a[o]===n)return o;return-1}function FG(n,a,e,r){return eT(this.multi,[])}function kG(n,a,e,r){var u,o=this.multi;if(this.providerFactory){var f=this.providerFactory.componentProviders,p=Cd(e,e[1],this.providerFactory.index,r);eT(o,u=p.slice(0,f));for(var v=f;v<p.length;v++)u.push(p[v])}else eT(o,u=[]);return u}function eT(n,a){for(var e=0;e<n.length;e++)a.push((0,n[e])());return a}function aP(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(e){e.providersResolver=function(r,o){return LG(r,o?o(n):n,a)}}}var GG=function n(){N(this,n)},sP=function n(){N(this,n)},HG=function(){function n(){N(this,n)}return j(n,[{key:"resolveComponentFactory",value:function(e){throw function(n){var a=Error("No component factory found for ".concat(Wn(n),". Did you add it to @NgModule.entryComponents?"));return a.ngComponent=n,a}(e)}}]),n}(),Rc=function(){var n=function a(){N(this,a)};return n.NULL=new HG,n}();function VG(){return _h(Ur(),Ke())}function _h(n,a){return new wu(Ko(n,a))}var wu=function(){var n=function a(e){N(this,a),this.nativeElement=e};return n.__NG_ELEMENT_ID__=VG,n}();function WG(n){return n instanceof wu?n.nativeElement:n}var lP=function n(){N(this,n)},N0=function(){var n=function a(){N(this,a)};return n.__NG_ELEMENT_ID__=function(){return function(){var n=Ke(),e=Ro(Ur().index,n);return function(n){return n[11]}(Ga(e)?e:n)}()},n}(),jG=function(){var n=function a(){N(this,a)};return n.\u0275prov=un({token:n,providedIn:"root",factory:function(){return null}}),n}(),G0=function n(a){N(this,n),this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")},qG=new G0("13.1.0"),tT={};function B0(n,a,e,r){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==e;){var u=a[e.index];if(null!==u&&r.push(Wr(u)),zo(u))for(var f=10;f<u.length;f++){var p=u[f],v=p[1].firstChild;null!==v&&B0(p[1],p,v,r)}var g=e.type;if(8&g)B0(n,a,e.child,r);else if(32&g)for(var y=Fp(e,a),_=void 0;_=y();)r.push(_);else if(16&g){var C=uw(a,e);if(Array.isArray(C))r.push.apply(r,On(C));else{var w=el(a[16]);B0(w[1],w,C,r,!0)}}e=o?e.projectionNext:e.next}return r}var jm=function(){function n(a,e){N(this,n),this._lView=a,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}return j(n,[{key:"rootNodes",get:function(){var e=this._lView,r=e[1];return B0(r,e,r.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(e){this._lView[8]=e}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var e=this._lView[3];if(zo(e)){var r=e[8],o=r?r.indexOf(this):-1;o>-1&&(Vg(e,o),mp(r,o))}this._attachedToViewContainer=!1}tl(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){eh(this._lView[1],this._lView,null,e)}},{key:"markForCheck",value:function(){gm(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){mm(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(n,a,e){np(!0);try{mm(n,a,e)}finally{np(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){this._appRef=null,function(n,a){Ld(n,a,a[11],2,null,null)}(this._lView[1],this._lView)}},{key:"attachToAppRef",value:function(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}]),n}(),KG=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this,r))._view=r,o}return j(e,[{key:"detectChanges",value:function(){zd(this._view)}},{key:"checkNoChanges",value:function(){!function(n){np(!0);try{zd(n)}finally{np(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),e}(jm),cP=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this)).ngModule=r,o}return j(e,[{key:"resolveComponentFactory",value:function(o){var u=si(o);return new nT(u,this.ngModule)}}]),e}(Rc);function dP(n){var a=[];for(var e in n)n.hasOwnProperty(e)&&a.push({propName:n[e],templateName:e});return a}var $G=new In("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return UC}}),nT=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;return N(this,e),(u=a.call(this)).componentDef=r,u.ngModule=o,u.componentType=r.type,u.selector=function(n){return n.map(zx).join(",")}(r.selectors),u.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],u.isBoundToModule=!!o,u}return j(e,[{key:"inputs",get:function(){return dP(this.componentDef.inputs)}},{key:"outputs",get:function(){return dP(this.componentDef.outputs)}},{key:"create",value:function(o,u,f,p){var A,M,v=(p=p||this.ngModule)?function(n,a){return{get:function(r,o,u){var f=n.get(r,tT,u);return f!==tT||o===tT?f:a.get(r,o,u)}}}(o,p.injector):o,g=v.get(lP,j_),y=v.get(jG,null),_=g.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",w=f?function(n,a,e){if(Dr(n))return n.selectRootElement(a,e===La.ShadowDom);var o="string"==typeof a?n.querySelector(a):a;return o.textContent="",o}(_,f,this.componentDef.encapsulation):eo(g.createRenderer(null,this.componentDef),C,function(n){var a=n.toLowerCase();return"svg"===a?ng:"math"===a?"http://www.w3.org/1998/MathML/":null}(C)),x=this.componentDef.onPush?576:528,E=function(n,a){return{components:[],scheduler:n||UC,clean:cR,playerHandler:a||null,flags:0}}(),b=Qp(0,null,null,1,0,null,null,null,null,null),T=Nd(null,b,E,x,null,null,g,_,y,v);Ul(T);try{var O=function(n,a,e,r,o,u){var f=e[1];e[20]=n;var v=Ms(f,20,2,"#host",null),g=v.mergedAttrs=a.hostAttrs;null!==g&&(nh(v,g,!0),null!==n&&(dp(o,n,g),null!==v.classes&&zg(o,n,v.classes),null!==v.styles&&Ug(o,n,v.styles)));var y=r.createRenderer(n,a),_=Nd(e,Zp(a),null,a.onPush?64:16,e[20],v,r,y,u||null,null);return f.firstCreatePass&&(yd(gd(v,e),f,a.type),Gw(f,v),Bw(v,e.length,1)),Vd(e,_),e[20]=_}(w,this.componentDef,T,g,_);if(w)if(f)dp(_,w,["ng-version",qG.full]);else{var I=function(n){for(var a=[],e=[],r=1,o=2;r<n.length;){var u=n[r];if("string"==typeof u)2===o?""!==u&&a.push(u,n[++r]):8===o&&e.push(u);else{if(!Wi(o))break;o=u}r++}return{attrs:a,classes:e}}(this.componentDef.selectors[0]),B=I.attrs,z=I.classes;B&&dp(_,w,B),z&&z.length>0&&zg(_,w,z.join(" "))}if(M=xs(b,20),void 0!==u)for(var P=M.projection=[],W=0;W<this.ngContentSelectors.length;W++){var X=u[W];P.push(null!=X?Array.from(X):null)}A=function(n,a,e,r,o){var u=e[1],f=function(n,a,e){var r=Ur();n.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),Hw(n,r,a,dc(n,a,1,null),e));var u=Cd(a,n,r.directiveStart,r);Or(u,a);var f=Ko(r,a);return f&&Or(f,a),u}(u,e,a);if(r.components.push(f),n[8]=f,o&&o.forEach(function(y){return y(f,a)}),a.contentQueries){var p=Ur();a.contentQueries(1,f,p.directiveStart)}var v=Ur();return!u.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Ar(v.index),Hd(e[1],v,0,v.directiveStart,v.directiveEnd,a),hm(a,f)),f}(O,this.componentDef,T,E,[SR]),Os(b,T,null)}finally{Wa()}return new ZG(this.componentType,A,_h(M,T),T,M)}}]),e}(sP),ZG=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f,p){var v;return N(this,e),(v=a.call(this)).location=u,v._rootLView=f,v._tNode=p,v.instance=o,v.hostView=v.changeDetectorRef=new KG(f),v.componentType=r,v}return j(e,[{key:"injector",get:function(){return new zu(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(o){this.hostView.onDestroy(o)}}]),e}(GG),ol=function n(){N(this,n)},fP=function n(){N(this,n)},Ch=new Map;var vP=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;N(this,e),(u=a.call(this))._parent=o,u._bootstrapComponents=[],u.injector=Yn(u),u.destroyCbs=[],u.componentFactoryResolver=new cP(Yn(u));var f=po(r);return u._bootstrapComponents=pa(f.bootstrap),u._r3Injector=Jw(r,o,[{provide:ol,useValue:Yn(u)},{provide:Rc,useValue:u.componentFactoryResolver}],Wn(r)),u._r3Injector._resolveInjectorDefTypes(),u.instance=u.get(r),u}return j(e,[{key:"get",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ui.THROW_IF_NOT_FOUND,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qt.Default;return o===Ui||o===ol||o===rh?this:this._r3Injector.get(o,u,f)}},{key:"destroy",value:function(){var o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(function(u){return u()}),this.destroyCbs=null}},{key:"onDestroy",value:function(o){this.destroyCbs.push(o)}}]),e}(ol),rT=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this)).moduleType=r,null!==po(r)&&function(n){var a=new Set;!function e(r){var o=po(r,!0),u=o.id;null!==u&&(function(n,a,e){if(a&&a!==e)throw new Error("Duplicate module registered for ".concat(n," - ").concat(Wn(a)," vs ").concat(Wn(a.name)))}(u,Ch.get(u),r),Ch.set(u,r));var g,v=Pt(pa(o.imports));try{for(v.s();!(g=v.n()).done;){var y=g.value;a.has(y)||(a.add(y),e(y))}}catch(_){v.e(_)}finally{v.f()}}(n)}(r),o}return j(e,[{key:"create",value:function(o){return new vP(this.moduleType,o)}}]),e}(fP);function wh(n,a,e,r){return mP(Ke(),Hi(),n,a,e,r)}function gP(n,a,e,r,o,u,f){return function(n,a,e,r,o,u,f,p,v){var g=a+e;return na(n,g,o,u,f,p)?$a(n,g+4,v?r.call(v,o,u,f,p):r(o,u,f,p)):qm(n,g+4)}(Ke(),Hi(),n,a,e,r,o,u,f)}function qm(n,a){var e=n[a];return e===on?void 0:e}function mP(n,a,e,r,o,u){var f=a+e;return xi(n,f,o)?$a(n,f+1,u?r.call(u,o):r(o)):qm(n,f+1)}function Sh(n,a){var r,e=Bn(),o=n+20;e.firstCreatePass?(r=function(n,a){if(a)for(var e=a.length-1;e>=0;e--){var r=a[e];if(n===r.name)return r}}(a,e.pipeRegistry),e.data[o]=r,r.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(o,r.onDestroy)):r=e.data[o];var u=r.factory||(r.factory=au(r.type)),f=ys(st);try{var p=fp(!1),v=u();return fp(p),function(n,a,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),a[e]=r}(e,Ke(),o,v),v}finally{ys(f)}}function bh(n,a,e){var r=n+20,o=Ke(),u=function(n,a){return n[a]}(o,r);return function(n,a){return n[1].data[a].pure}(o,r)?mP(o,Hi(),a,u.transform,e,u):u.transform(e)}var h3=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return N(this,e),(r=a.call(this)).__isAsync=o,r}return j(e,[{key:"emit",value:function(o){we(ze(e.prototype),"next",this).call(this,o)}},{key:"subscribe",value:function(o,u,f){var p,v,g,y=o,_=u||function(){return null},C=f;if(o&&"object"==typeof o){var w=o;y=null===(p=w.next)||void 0===p?void 0:p.bind(w),_=null===(v=w.error)||void 0===v?void 0:v.bind(w),C=null===(g=w.complete)||void 0===g?void 0:g.bind(w)}this.__isAsync&&(_=iT(_),y&&(y=iT(y)),C&&(C=iT(C)));var x=we(ze(e.prototype),"subscribe",this).call(this,{next:y,error:_,complete:C});return o instanceof rt&&o.add(x),x}}]),e}(vs);function iT(n){return function(a){setTimeout(n,void 0,a)}}var Ee=h3;function v3(){return this._results[ya()]()}var oT=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];N(this,n),this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var e=ya(),r=n.prototype;r[e]||(r[e]=v3)}return j(n,[{key:"changes",get:function(){return this._changes||(this._changes=new Ee)}},{key:"get",value:function(e){return this._results[e]}},{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,r){return this._results.reduce(e,r)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e,r){var o=this;o.dirty=!1;var u=Xo(e);(this._changesDetected=!function(n,a,e){if(n.length!==a.length)return!1;for(var r=0;r<n.length;r++){var o=n[r],u=a[r];if(e&&(o=e(o),u=e(u)),u!==o)return!1}return!0}(o._results,u,r))&&(o._results=u,o.length=u.length,o.last=u[this.length-1],o.first=u[0])}},{key:"notifyOnChanges",value:function(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),n}();Symbol;var al=function(){var n=function a(){N(this,a)};return n.__NG_ELEMENT_ID__=y3,n}(),m3=function(n){ve(e,n);var a=ge(e);function e(r,o,u){var f;return N(this,e),(f=a.call(this))._declarationLView=r,f._declarationTContainer=o,f.elementRef=u,f}return j(e,[{key:"createEmbeddedView",value:function(o){var u=this._declarationTContainer.tViews,f=Nd(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);f[17]=this._declarationLView[this._declarationTContainer.index];var v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(u)),Os(u,f,o),new jm(f)}}]),e}(al);function y3(){return H0(Ur(),Ke())}function H0(n,a){return 4&n.type?new m3(a,n,_h(n,a)):null}var Ca=function(){var n=function a(){N(this,a)};return n.__NG_ELEMENT_ID__=_3,n}();function _3(){return EP(Ur(),Ke())}var SP=function(n){ve(e,n);var a=ge(e);function e(r,o,u){var f;return N(this,e),(f=a.call(this))._lContainer=r,f._hostTNode=o,f._hostLView=u,f}return j(e,[{key:"element",get:function(){return _h(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new zu(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var o=hp(this._hostTNode,this._hostLView);if(iC(o)){var u=ql(o,this._hostLView),f=Zi(o);return new zu(u[1].data[f+8],u)}return new zu(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(o){var u=bP(this._lContainer);return null!==u&&u[o]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(o,u,f){var p=o.createEmbeddedView(u||{});return this.insert(p,f),p}},{key:"createComponent",value:function(o,u,f,p,v){var y,g=o&&!function(n){return"function"==typeof n}(o);if(g)y=u;else{var _=u||{};y=_.index,f=_.injector,p=_.projectableNodes,v=_.ngModuleRef}var C=g?o:new nT(si(o)),w=f||this.parentInjector;if(!v&&null==C.ngModule&&w){var x=w.get(ol,null);x&&(v=x)}var E=C.create(w,p,void 0,v);return this.insert(E.hostView,y),E}},{key:"insert",value:function(o,u){var f=o._lView,p=f[1];if(function(n){return zo(n[3])}(f)){var v=this.indexOf(o);if(-1!==v)this.detach(v);else{var g=f[3],y=new SP(g,g[6],g[3]);y.detach(y.indexOf(o))}}var _=this._adjustIndex(u),C=this._lContainer;!function(n,a,e,r){var o=10+r,u=e.length;r>0&&(e[o-1][4]=a),r<u-10?(a[4]=e[o],pC(e,10+r,a)):(e.push(a),a[4]=null),a[3]=e;var f=a[17];null!==f&&e!==f&&function(n,a){var e=n[9];a[16]!==a[3][3][16]&&(n[2]=!0),null===e?n[9]=[a]:e.push(a)}(f,a);var p=a[19];null!==p&&p.insertView(n),a[2]|=128}(p,f,C,_);var w=uc(_,C),x=f[11],E=Gp(x,C[7]);return null!==E&&function(n,a,e,r,o,u){r[0]=o,r[6]=a,Ld(n,r,e,1,o,u)}(p,C[6],x,f,E,w),o.attachToViewContainerRef(),pC(aT(C),_,o),o}},{key:"move",value:function(o,u){return this.insert(o,u)}},{key:"indexOf",value:function(o){var u=bP(this._lContainer);return null!==u?u.indexOf(o):-1}},{key:"remove",value:function(o){var u=this._adjustIndex(o,-1),f=Vg(this._lContainer,u);f&&(mp(aT(this._lContainer),u),tl(f[1],f))}},{key:"detach",value:function(o){var u=this._adjustIndex(o,-1),f=Vg(this._lContainer,u);return f&&null!=mp(aT(this._lContainer),u)?new jm(f):null}},{key:"_adjustIndex",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==o?this.length+u:o}}]),e}(Ca);function bP(n){return n[8]}function aT(n){return n[8]||(n[8]=[])}function EP(n,a){var e,r=a[n.index];if(zo(r))e=r;else{var o;if(8&n.type)o=Wr(r);else{var u=a[11];o=u.createComment("");var f=Ko(n,a);du(u,Gp(u,f),o,function(n,a){return Dr(n)?n.nextSibling(a):a.nextSibling}(u,f),!1)}a[n.index]=e=Ww(r,a,o,n),Vd(a,e)}return new SP(e,n,a)}var b3=function(){function n(a){N(this,n),this.queryList=a,this.matches=null}return j(n,[{key:"clone",value:function(){return new n(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),n}(),E3=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];N(this,n),this.queries=a}return j(n,[{key:"createEmbeddedView",value:function(e){var r=e.queries;if(null!==r){for(var o=null!==e.contentQueries?e.contentQueries[0]:r.length,u=[],f=0;f<o;f++){var p=r.getByIndex(f);u.push(this.queries[p.indexInDeclarationView].clone())}return new n(u)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var r=0;r<this.queries.length;r++)null!==AP(e,r).matches&&this.queries[r].setDirty()}}]),n}(),xP=function n(a,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;N(this,n),this.predicate=a,this.flags=e,this.read=r},x3=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];N(this,n),this.queries=a}return j(n,[{key:"elementStart",value:function(e,r){for(var o=0;o<this.queries.length;o++)this.queries[o].elementStart(e,r)}},{key:"elementEnd",value:function(e){for(var r=0;r<this.queries.length;r++)this.queries[r].elementEnd(e)}},{key:"embeddedTView",value:function(e){for(var r=null,o=0;o<this.length;o++){var u=null!==r?r.length:0,f=this.getByIndex(o).embeddedTView(e,u);f&&(f.indexInDeclarationView=o,null!==r?r.push(f):r=[f])}return null!==r?new n(r):null}},{key:"template",value:function(e,r){for(var o=0;o<this.queries.length;o++)this.queries[o].template(e,r)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(e){this.queries.push(e)}}]),n}(),R3=function(){function n(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;N(this,n),this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}return j(n,[{key:"elementStart",value:function(e,r){this.isApplyingToNode(r)&&this.matchTNode(e,r)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,r){this.elementStart(e,r)}},{key:"embeddedTView",value:function(e,r){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,r),new n(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var r=this._declarationNodeIndex,o=e.parent;null!==o&&8&o.type&&o.index!==r;)o=o.parent;return r===(null!==o?o.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,r){var o=this.metadata.predicate;if(Array.isArray(o))for(var u=0;u<o.length;u++){var f=o[u];this.matchTNodeWithReadOption(e,r,T3(r,f)),this.matchTNodeWithReadOption(e,r,vp(r,e,f,!1,!1))}else o===al?4&r.type&&this.matchTNodeWithReadOption(e,r,-1):this.matchTNodeWithReadOption(e,r,vp(r,e,o,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(e,r,o){if(null!==o){var u=this.metadata.read;if(null!==u)if(u===wu||u===Ca||u===al&&4&r.type)this.addMatch(r.index,-2);else{var f=vp(r,e,u,!1,!1);null!==f&&this.addMatch(r.index,f)}else this.addMatch(r.index,o)}}},{key:"addMatch",value:function(e,r){null===this.matches?this.matches=[e,r]:this.matches.push(e,r)}}]),n}();function T3(n,a){var e=n.localNames;if(null!==e)for(var r=0;r<e.length;r+=2)if(e[r]===a)return e[r+1];return null}function A3(n,a,e,r){return-1===e?function(n,a){return 11&n.type?_h(n,a):4&n.type?H0(n,a):null}(a,n):-2===e?function(n,a,e){return e===wu?_h(a,n):e===al?H0(a,n):e===Ca?EP(a,n):void 0}(n,a,r):Cd(n,n[1],e,a)}function RP(n,a,e,r){var o=a[19].queries[r];if(null===o.matches){for(var u=n.data,f=e.matches,p=[],v=0;v<f.length;v+=2){var g=f[v];p.push(g<0?null:A3(a,u[g],f[v+1],e.metadata.read))}o.matches=p}return o.matches}function sT(n,a,e,r){var o=n.queries.getByIndex(e),u=o.matches;if(null!==u)for(var f=RP(n,a,o,e),p=0;p<u.length;p+=2){var v=u[p];if(v>0)r.push(f[p/2]);else{for(var g=u[p+1],y=a[-v],_=10;_<y.length;_++){var C=y[_];C[17]===C[3]&&sT(C[1],C,g,r)}if(null!==y[9])for(var w=y[9],x=0;x<w.length;x++){var E=w[x];sT(E[1],E,g,r)}}}return r}function Ym(n){var a=Ke(),e=Bn(),r=X_();op(r+1);var o=AP(e,r);if(n.dirty&&q_(a)===(2==(2&o.metadata.flags))){if(null===o.matches)n.reset([]);else{var u=o.crossesNgTemplate?sT(e,a,r,[]):RP(e,a,o,r);n.reset(u,WG),n.notifyOnChanges()}return!0}return!1}function $m(n,a,e,r){var o=Bn();if(o.firstCreatePass){var u=Ur();(function(n,a,e){null===n.queries&&(n.queries=new x3),n.queries.track(new R3(a,e))})(o,new xP(a,e,r),u.index),function(n,a){var e=n.contentQueries||(n.contentQueries=[]);a!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,a)}(o,n),2==(2&e)&&(o.staticContentQueries=!0)}!function(n,a,e){var r=new oT(4==(4&e));eh(n,a,r,r.destroy),null===a[19]&&(a[19]=new E3),a[19].queries.push(new b3(r))}(o,Ke(),e)}function Xm(){return function(n,a){return n[19].queries[a].queryList}(Ke(),X_())}function AP(n,a){return n.queries.getByIndex(a)}var V=Xl("Input",function(n){return{bindingPropertyName:n}}),_t=Xl("Output",function(n){return{bindingPropertyName:n}});function U0(){}var z0=new In("Application Initializer"),xh=function(){var n=function(){function a(e){var r=this;N(this,a),this.appInits=e,this.resolve=U0,this.reject=U0,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(o,u){r.resolve=o,r.reject=u})}return j(a,[{key:"runInitializers",value:function(){var r=this;if(!this.initialized){var o=[],u=function(){r.done=!0,r.resolve()};if(this.appInits)for(var f=function(g){var y=r.appInits[g]();if(U(y))o.push(y);else if(ee(y)){var _=new Promise(function(C,w){y.subscribe({complete:C,error:w})});o.push(_)}},p=0;p<this.appInits.length;p++)f(p);Promise.all(o).then(function(){u()}).catch(function(v){r.reject(v)}),0===o.length&&u(),this.initialized=!0}}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(z0,8))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),Zm=new In("AppId"),Z3={provide:Zm,useFactory:function(){return"".concat(pT()).concat(pT()).concat(pT())},deps:[]};function pT(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var qP=new In("Platform Initializer"),j0=new In("Platform ID"),KP=new In("appBootstrapListener"),YP=function(){var n=function(){function a(){N(this,a)}return j(a,[{key:"log",value:function(r){console.log(r)}},{key:"warn",value:function(r){console.warn(r)}}]),a}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),Tc=new In("LocaleId"),$P=new In("DefaultCurrencyCode"),Q3=function n(a,e){N(this,n),this.ngModuleFactory=a,this.componentFactories=e},q0=function(){var n=function(){function a(){N(this,a)}return j(a,[{key:"compileModuleSync",value:function(r){return new rT(r)}},{key:"compileModuleAsync",value:function(r){return Promise.resolve(this.compileModuleSync(r))}},{key:"compileModuleAndAllComponentsSync",value:function(r){var o=this.compileModuleSync(r),f=pa(po(r).declarations).reduce(function(p,v){var g=si(v);return g&&p.push(new nT(g)),p},[]);return new Q3(o,f)}},{key:"compileModuleAndAllComponentsAsync",value:function(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}},{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(r){}},{key:"getModuleId",value:function(r){}}]),a}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),tB=function(){return Promise.resolve(0)}();function hT(n){"undefined"==typeof Zone?tB.then(function(){n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}var Di=function(){function n(a){var e=a.enableLongStackTrace,r=void 0!==e&&e,o=a.shouldCoalesceEventChangeDetection,u=void 0!==o&&o,f=a.shouldCoalesceRunChangeDetection,p=void 0!==f&&f;if(N(this,n),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ee(!1),this.onMicrotaskEmpty=new Ee(!1),this.onStable=new Ee(!1),this.onError=new Ee(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();var v=this;v._nesting=0,v._outer=v._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(v._inner=v._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(v._inner=v._inner.fork(Zone.longStackTraceZoneSpec)),v.shouldCoalesceEventChangeDetection=!p&&u,v.shouldCoalesceRunChangeDetection=p,v.lastRequestAnimationFrameId=-1,v.nativeRequestAnimationFrame=function(){var n=rr.requestAnimationFrame,a=rr.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&a){var e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);var r=a[Zone.__symbol__("OriginalDelegate")];r&&(a=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function(n){var a=function(){!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(rr,function(){n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){n.lastRequestAnimationFrameId=-1,gT(n),n.isCheckStableRunning=!0,vT(n),n.isCheckStableRunning=!1},void 0,function(){},function(){})),n.fakeTopEventTask.invoke()}),gT(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(r,o,u,f,p,v){try{return XP(n),r.invokeTask(u,f,p,v)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&a(),JP(n)}},onInvoke:function(r,o,u,f,p,v,g){try{return XP(n),r.invoke(u,f,p,v,g)}finally{n.shouldCoalesceRunChangeDetection&&a(),JP(n)}},onHasTask:function(r,o,u,f){r.hasTask(u,f),o===u&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,gT(n),vT(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:function(r,o,u,f){return r.handleError(u,f),n.runOutsideAngular(function(){return n.onError.emit(f)}),!1}})}(v)}return j(n,[{key:"run",value:function(e,r,o){return this._inner.run(e,r,o)}},{key:"runTask",value:function(e,r,o,u){var f=this._inner,p=f.scheduleEventTask("NgZoneEvent: "+u,e,rB,U0,U0);try{return f.runTask(p,r,o)}finally{f.cancelTask(p)}}},{key:"runGuarded",value:function(e,r,o){return this._inner.runGuarded(e,r,o)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!n.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(n.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),n}(),rB={};function vT(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(function(){return n.onStable.emit(null)})}finally{n.isStable=!0}}}function gT(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function XP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function JP(n){n._nesting--,vT(n)}var Hs,aB=function(){function n(){N(this,n),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ee,this.onMicrotaskEmpty=new Ee,this.onStable=new Ee,this.onError=new Ee}return j(n,[{key:"run",value:function(e,r,o){return e.apply(r,o)}},{key:"runGuarded",value:function(e,r,o){return e.apply(r,o)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,r,o,u){return e.apply(r,o)}}]),n}(),mT=function(){var n=function(){function a(e){var r=this;N(this,a),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(function(){r.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return j(a,[{key:"_watchAngularEvents",value:function(){var r=this;this._ngZone.onUnstable.subscribe({next:function(){r._didWork=!0,r._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){r._ngZone.onStable.subscribe({next:function(){Di.assertNotInAngularZone(),hT(function(){r._isZoneStable=!0,r._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var r=this;if(this.isStable())hT(function(){for(;0!==r._callbacks.length;){var u=r._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(r._didWork)}r._didWork=!1});else{var o=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(u){return!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(r){return{source:r.source,creationLocation:r.creationLocation,data:r.data}}):[]}},{key:"addCallback",value:function(r,o,u){var f=this,p=-1;o&&o>0&&(p=setTimeout(function(){f._callbacks=f._callbacks.filter(function(v){return v.timeoutId!==p}),r(f._didWork,f.getPendingTasks())},o)),this._callbacks.push({doneCb:r,timeoutId:p,updateCb:u})}},{key:"whenStable",value:function(r,o,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,u),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(r,o,u){return[]}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(Di))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),ZP=function(){var n=function(){function a(){N(this,a),this._applications=new Map,yT.addToWindow(this)}return j(a,[{key:"registerApplication",value:function(r,o){this._applications.set(r,o)}},{key:"unregisterApplication",value:function(r){this._applications.delete(r)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(r){return this._applications.get(r)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(r){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return yT.findTestabilityInTree(this,r,o)}}]),a}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),sB=function(){function n(){N(this,n)}return j(n,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,r,o){return null}}]),n}(),yT=new sB;function lB(n,a,e){var r=new rT(e);return Promise.resolve(r)}var QP=new In("AllowMultipleToken"),e1=function n(a,e){N(this,n),this.name=a,this.token=e};function fB(n){if(Hs&&!Hs.destroyed&&!Hs.injector.get(QP,!1))throw new Ni("400","");Hs=n.get(r1);var e=n.get(qP,null);return e&&e.forEach(function(r){return r()}),Hs}function t1(n,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(a),o=new In(r);return function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],f=n1();if(!f||f.injector.get(QP,!1))if(n)n(e.concat(u).concat({provide:o,useValue:!0}));else{var p=e.concat(u).concat({provide:o,useValue:!0},{provide:ih,useValue:"platform"});fB(Ui.create({providers:p,name:r}))}return pB()}}function pB(n){var a=n1();if(!a)throw new Ni("401","");return a}function n1(){return Hs&&!Hs.destroyed?Hs:null}var r1=function(){var n=function(){function a(e){N(this,a),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return j(a,[{key:"bootstrapModuleFactory",value:function(r,o){var u=this,g=function(n,a){return"noop"===n?new aB:("zone.js"===n?void 0:n)||new Di({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)})}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),y=[{provide:Di,useValue:g}];return g.run(function(){var _=Ui.create({providers:y,parent:u.injector,name:r.moduleType.name}),C=r.create(_),w=C.injector.get(oc,null);if(!w)throw new Ni("402","");return g.runOutsideAngular(function(){var E=g.onError.subscribe({next:function(T){w.handleError(T)}});C.onDestroy(function(){_T(u._modules,C),E.unsubscribe()})}),function(n,a,e){try{var r=((E=C.injector.get(xh)).runInitializers(),E.donePromise.then(function(){return function(n){xo(n,"Expected localeId to be defined"),"string"==typeof n&&n.toLowerCase().replace(/_/g,"-")}(C.injector.get(Tc,P0)||P0),u._moduleDoBootstrap(C),C}));return U(r)?r.catch(function(o){throw a.runOutsideAngular(function(){return n.handleError(o)}),o}):r}catch(o){throw a.runOutsideAngular(function(){return n.handleError(o)}),o}var E}(w,g)})}},{key:"bootstrapModule",value:function(r){var o=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],f=i1({},u);return lB(0,0,r).then(function(p){return o.bootstrapModuleFactory(p,f)})}},{key:"_moduleDoBootstrap",value:function(r){var o=r.injector.get(Qm);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(function(f){return o.bootstrap(f)});else{if(!r.instance.ngDoBootstrap)throw new Ni("403","");r.instance.ngDoBootstrap(o)}this._modules.push(r)}},{key:"onDestroy",value:function(r){this._destroyListeners.push(r)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Ni("404","");this._modules.slice().forEach(function(o){return o.destroy()}),this._destroyListeners.forEach(function(o){return o()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(Ui))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}();function i1(n,a){return Array.isArray(a)?a.reduce(i1,n):Object.assign(Object.assign({},n),a)}var Qm=function(){var n=function(){function a(e,r,o,u,f){var p=this;N(this,a),this._zone=e,this._injector=r,this._exceptionHandler=o,this._componentFactoryResolver=u,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){p._zone.run(function(){p.tick()})}});var v=new br(function(y){p._stable=p._zone.isStable&&!p._zone.hasPendingMacrotasks&&!p._zone.hasPendingMicrotasks,p._zone.runOutsideAngular(function(){y.next(p._stable),y.complete()})}),g=new br(function(y){var _;p._zone.runOutsideAngular(function(){_=p._zone.onStable.subscribe(function(){Di.assertNotInAngularZone(),hT(function(){!p._stable&&!p._zone.hasPendingMacrotasks&&!p._zone.hasPendingMicrotasks&&(p._stable=!0,y.next(!0))})})});var C=p._zone.onUnstable.subscribe(function(){Di.assertInAngularZone(),p._stable&&(p._stable=!1,p._zone.runOutsideAngular(function(){y.next(!1)}))});return function(){_.unsubscribe(),C.unsubscribe()}});this.isStable=function(){for(var n=arguments.length,a=new Array(n),e=0;e<n;e++)a[e]=arguments[e];var r=$(a),o=Bv(a,1/0),u=a;return u.length?1===u.length?lo(u[0]):Jc(o)(Jr(u,r)):bo}(v,g.pipe(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.connector,e=void 0===a?function(){return new vs}:a,r=n.resetOnError,o=void 0===r||r,u=n.resetOnComplete,f=void 0===u||u,p=n.resetOnRefCountZero,v=void 0===p||p;return function(g){var y=null,_=null,C=null,w=0,x=!1,E=!1,b=function(){null==_||_.unsubscribe(),_=null},T=function(){b(),y=C=null,x=E=!1},A=function(){var O=y;T(),null==O||O.unsubscribe()};return oi(function(M,O){w++,!E&&!x&&b();var I=C=null!=C?C:e();O.add(function(){0==--w&&!E&&!x&&(_=Uv(A,v))}),I.subscribe(O),y||(y=new Ff({next:function(z){return I.next(z)},error:function(z){E=!0,b(),_=Uv(T,o,z),I.error(z)},complete:function(){x=!0,b(),_=Uv(T,f),I.complete()}}),Jr(M).subscribe(y))})(g)}}()))}return j(a,[{key:"bootstrap",value:function(r,o){var p,u=this;if(!this._initStatus.done)throw new Ni("405","");p=r instanceof sP?r:this._componentFactoryResolver.resolveComponentFactory(r),this.componentTypes.push(p.componentType);var v=function(n){return n.isBoundToModule}(p)?void 0:this._injector.get(ol),y=p.create(Ui.NULL,[],o||p.selector,v),_=y.location.nativeElement,C=y.injector.get(mT,null),w=C&&y.injector.get(ZP);return C&&w&&w.registerApplication(_,C),y.onDestroy(function(){u.detachView(y.hostView),_T(u.components,y),w&&w.unregisterApplication(_)}),this._loadComponent(y),y}},{key:"tick",value:function(){var r=this;if(this._runningTick)throw new Ni("101","");try{this._runningTick=!0;var f,u=Pt(this._views);try{for(u.s();!(f=u.n()).done;)f.value.detectChanges()}catch(_){u.e(_)}finally{u.f()}}catch(_){this._zone.runOutsideAngular(function(){return r._exceptionHandler.handleError(_)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(r){var o=r;this._views.push(o),o.attachToAppRef(this)}},{key:"detachView",value:function(r){var o=r;_T(this._views,o),o.detachFromAppRef()}},{key:"_loadComponent",value:function(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(KP,[]).concat(this._bootstrapListeners).forEach(function(u){return u(r)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(r){return r.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(Di),Ot(Ui),Ot(oc),Ot(Rc),Ot(xh))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}();function _T(n,a){var e=n.indexOf(a);e>-1&&n.splice(e,1)}var K0=function(){var n=function a(){N(this,a)};return n.__NG_ELEMENT_ID__=yB,n}();function yB(n){return function(n,a,e){if(Ba(n)&&!e){var r=Ro(n.index,a);return new jm(r,r)}return 47&n.type?new jm(a[16],a):null}(Ur(),Ke(),16==(16&n))}var d1=function(){function n(){N(this,n)}return j(n,[{key:"supports",value:function(e){return yc(e)}},{key:"create",value:function(e){return new bB(e)}}]),n}(),SB=function(a,e){return e},bB=function(){function n(a){N(this,n),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||SB}return j(n,[{key:"forEachItem",value:function(e){var r;for(r=this._itHead;null!==r;r=r._next)e(r)}},{key:"forEachOperation",value:function(e){for(var r=this._itHead,o=this._removalsHead,u=0,f=null;r||o;){var p=!o||r&&r.currentIndex<p1(o,u,f)?r:o,v=p1(p,u,f),g=p.currentIndex;if(p===o)u--,o=o._nextRemoved;else if(r=r._next,null==p.previousIndex)u++;else{f||(f=[]);var y=v-u,_=g-u;if(y!=_){for(var C=0;C<y;C++){var w=C<f.length?f[C]:f[C]=0,x=w+C;_<=x&&x<y&&(f[C]=w+1)}f[p.previousIndex]=_-y}}v!==g&&e(p,v,g)}}},{key:"forEachPreviousItem",value:function(e){var r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)e(r)}},{key:"forEachAddedItem",value:function(e){var r;for(r=this._additionsHead;null!==r;r=r._nextAdded)e(r)}},{key:"forEachMovedItem",value:function(e){var r;for(r=this._movesHead;null!==r;r=r._nextMoved)e(r)}},{key:"forEachRemovedItem",value:function(e){var r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)e(r)}},{key:"forEachIdentityChange",value:function(e){var r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)e(r)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!yc(e))throw new Error("Error trying to diff '".concat(Wn(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var r=this;this._reset();var f,p,v,o=this._itHead,u=!1;if(Array.isArray(e)){this.length=e.length;for(var g=0;g<this.length;g++)v=this._trackByFn(g,p=e[g]),null!==o&&Object.is(o.trackById,v)?(u&&(o=this._verifyReinsertion(o,p,v,g)),Object.is(o.item,p)||this._addIdentityChange(o,p)):(o=this._mismatch(o,p,v,g),u=!0),o=o._next}else f=0,function(n,a){if(Array.isArray(n))for(var e=0;e<n.length;e++)a(n[e]);else for(var o,r=n[ya()]();!(o=r.next()).done;)a(o.value)}(e,function(y){v=r._trackByFn(f,y),null!==o&&Object.is(o.trackById,v)?(u&&(o=r._verifyReinsertion(o,y,v,f)),Object.is(o.item,y)||r._addIdentityChange(o,y)):(o=r._mismatch(o,y,v,f),u=!0),o=o._next,f++}),this.length=f;return this._truncate(o),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,r,o,u){var f;return null===e?f=this._itTail:(f=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(e.item,r)||this._addIdentityChange(e,r),this._reinsertAfter(e,f,u)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(o,u))?(Object.is(e.item,r)||this._addIdentityChange(e,r),this._moveAfter(e,f,u)):e=this._addAfter(new EB(r,o),f,u),e}},{key:"_verifyReinsertion",value:function(e,r,o,u){var f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?e=this._reinsertAfter(f,e._prev,u):e.currentIndex!=u&&(e.currentIndex=u,this._addToMoves(e,u)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var r=e._next;this._addToRemovals(this._unlink(e)),e=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,r,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var u=e._prevRemoved,f=e._nextRemoved;return null===u?this._removalsHead=f:u._nextRemoved=f,null===f?this._removalsTail=u:f._prevRemoved=u,this._insertAfter(e,r,o),this._addToMoves(e,o),e}},{key:"_moveAfter",value:function(e,r,o){return this._unlink(e),this._insertAfter(e,r,o),this._addToMoves(e,o),e}},{key:"_addAfter",value:function(e,r,o){return this._insertAfter(e,r,o),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,r,o){var u=null===r?this._itHead:r._next;return e._next=u,e._prev=r,null===u?this._itTail=e:u._prev=e,null===r?this._itHead=e:r._next=e,null===this._linkedRecords&&(this._linkedRecords=new f1),this._linkedRecords.put(e),e.currentIndex=o,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var r=e._prev,o=e._next;return null===r?this._itHead=o:r._next=o,null===o?this._itTail=r:o._prev=r,e}},{key:"_addToMoves",value:function(e,r){return e.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new f1),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,r){return e.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}]),n}(),EB=function n(a,e){N(this,n),this.item=a,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},xB=function(){function n(){N(this,n),this._head=null,this._tail=null}return j(n,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,r){var o;for(o=this._head;null!==o;o=o._nextDup)if((null===r||r<=o.currentIndex)&&Object.is(o.trackById,e))return o;return null}},{key:"remove",value:function(e){var r=e._prevDup,o=e._nextDup;return null===r?this._head=o:r._nextDup=o,null===o?this._tail=r:o._prevDup=r,null===this._head}}]),n}(),f1=function(){function n(){N(this,n),this.map=new Map}return j(n,[{key:"put",value:function(e){var r=e.trackById,o=this.map.get(r);o||(o=new xB,this.map.set(r,o)),o.add(e)}},{key:"get",value:function(e,r){var u=this.map.get(e);return u?u.get(e,r):null}},{key:"remove",value:function(e){var r=e.trackById;return this.map.get(r).remove(e)&&this.map.delete(r),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),n}();function p1(n,a,e){var r=n.previousIndex;if(null===r)return r;var o=0;return e&&r<e.length&&(o=e[r]),r+a+o}var h1=function(){function n(){N(this,n)}return j(n,[{key:"supports",value:function(e){return e instanceof Map||Mm(e)}},{key:"create",value:function(){return new RB}}]),n}(),RB=function(){function n(){N(this,n),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return j(n,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var r;for(r=this._mapHead;null!==r;r=r._next)e(r)}},{key:"forEachPreviousItem",value:function(e){var r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)e(r)}},{key:"forEachChangedItem",value:function(e){var r;for(r=this._changesHead;null!==r;r=r._nextChanged)e(r)}},{key:"forEachAddedItem",value:function(e){var r;for(r=this._additionsHead;null!==r;r=r._nextAdded)e(r)}},{key:"forEachRemovedItem",value:function(e){var r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)e(r)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||Mm(e)))throw new Error("Error trying to diff '".concat(Wn(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var r=this;this._reset();var o=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(f,p){if(o&&o.key===p)r._maybeAddToChanges(o,f),r._appendAfter=o,o=o._next;else{var v=r._getOrCreateRecordForKey(p,f);o=r._insertBeforeOrAppend(o,v)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(var u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,r){if(e){var o=e._prev;return r._next=e,r._prev=o,e._prev=r,o&&(o._next=r),e===this._mapHead&&(this._mapHead=r),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}},{key:"_getOrCreateRecordForKey",value:function(e,r){if(this._records.has(e)){var o=this._records.get(e);this._maybeAddToChanges(o,r);var u=o._prev,f=o._next;return u&&(u._next=f),f&&(f._prev=u),o._next=null,o._prev=null,o}var p=new TB(e);return this._records.set(e,p),p.currentValue=r,this._addToAdditions(p),p}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,r){Object.is(r,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=r,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,r){e instanceof Map?e.forEach(r):Object.keys(e).forEach(function(o){return r(e[o],o)})}}]),n}(),TB=function n(a){N(this,n),this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null};function v1(){return new ey([new d1])}var ey=function(){var n=function(){function a(e){N(this,a),this.factories=e}return j(a,[{key:"find",value:function(r){var o=this.factories.find(function(u){return u.supports(r)});if(null!=o)return o;throw new Error("Cannot find a differ supporting object '".concat(r,"' of type '").concat(function(n){return n.name||typeof n}(r),"'"))}}],[{key:"create",value:function(r,o){if(null!=o){var u=o.factories.slice();r=r.concat(u)}return new a(r)}},{key:"extend",value:function(r){return{provide:a,useFactory:function(u){return a.create(r,u||v1())},deps:[[a,new tc,new qa]]}}}]),a}();return n.\u0275prov=un({token:n,providedIn:"root",factory:v1}),n}();function g1(){return new Rh([new h1])}var Rh=function(){var n=function(){function a(e){N(this,a),this.factories=e}return j(a,[{key:"find",value:function(r){var o=this.factories.find(function(u){return u.supports(r)});if(o)return o;throw new Error("Cannot find a differ supporting object '".concat(r,"'"))}}],[{key:"create",value:function(r,o){if(o){var u=o.factories.slice();r=r.concat(u)}return new a(r)}},{key:"extend",value:function(r){return{provide:a,useFactory:function(u){return a.create(r,u||g1())},deps:[[a,new tc,new qa]]}}}]),a}();return n.\u0275prov=un({token:n,providedIn:"root",factory:g1}),n}(),AB=[new h1],OB=new ey([new d1]),PB=new Rh(AB),LB=t1(null,"core",[{provide:j0,useValue:"unknown"},{provide:r1,deps:[Ui]},{provide:ZP,deps:[]},{provide:YP,deps:[]}]),BB=[{provide:Qm,useClass:Qm,deps:[Di,Ui,oc,Rc,xh]},{provide:$G,deps:[Di],useFactory:function(n){var a=[];return n.onStable.subscribe(function(){for(;a.length;)a.pop()()}),function(e){a.push(e)}}},{provide:xh,useClass:xh,deps:[[new qa,z0]]},{provide:q0,useClass:q0,deps:[]},Z3,{provide:ey,useFactory:function(){return OB},deps:[]},{provide:Rh,useFactory:function(){return PB},deps:[]},{provide:Tc,useFactory:function(n){return n||"undefined"!=typeof $localize&&$localize.locale||P0},deps:[[new Rd(Tc),new qa,new tc]]},{provide:$P,useValue:"USD"}],VB=function(){var n=function a(e){N(this,a)};return n.\u0275fac=function(e){return new(e||n)(Ot(Qm))},n.\u0275mod=Ci({type:n}),n.\u0275inj=Vo({providers:BB}),n}(),Y0=null;function Dc(){return Y0}var zB=function n(){N(this,n)},wa=new In("DocumentToken"),ef=function(){var n=function(){function a(){N(this,a)}return j(a,[{key:"historyGo",value:function(r){throw new Error("Not implemented")}}]),a}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=un({token:n,factory:function(){return Ot(m1)},providedIn:"platform"}),n}(),qB=new In("Location Initialized"),m1=function(){var n=function(a){ve(r,a);var e=ge(r);function r(o){var u;return N(this,r),(u=e.call(this))._doc=o,u._init(),u}return j(r,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return Dc().getBaseHref(this._doc)}},{key:"onPopState",value:function(u){var f=Dc().getGlobalEventTarget(this._doc,"window");return f.addEventListener("popstate",u,!1),function(){return f.removeEventListener("popstate",u)}}},{key:"onHashChange",value:function(u){var f=Dc().getGlobalEventTarget(this._doc,"window");return f.addEventListener("hashchange",u,!1),function(){return f.removeEventListener("hashchange",u)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(u){this.location.pathname=u}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(u,f,p){y1()?this._history.pushState(u,f,p):this.location.hash=p}},{key:"replaceState",value:function(u,f,p){y1()?this._history.replaceState(u,f,p):this.location.hash=p}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(u)}},{key:"getState",value:function(){return this._history.state}}]),r}(ef);return n.\u0275fac=function(e){return new(e||n)(Ot(wa))},n.\u0275prov=un({token:n,factory:function(){return new m1(Ot(wa))},providedIn:"platform"}),n}();function y1(){return!!window.history.pushState}function xT(n,a){if(0==n.length)return a;if(0==a.length)return n;var e=0;return n.endsWith("/")&&e++,a.startsWith("/")&&e++,2==e?n+a.substring(1):1==e?n+a:n+"/"+a}function _1(n){var a=n.match(/#|\?|$/),e=a&&a.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function sl(n){return n&&"?"!==n[0]?"?"+n:n}var Th=function(){var n=function(){function a(){N(this,a)}return j(a,[{key:"historyGo",value:function(r){throw new Error("Not implemented")}}]),a}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=un({token:n,factory:function(){return a=Ot(wa).location,new C1(Ot(ef),a&&a.origin||"");var a},providedIn:"root"}),n}(),RT=new In("appBaseHref"),C1=function(){var n=function(a){ve(r,a);var e=ge(r);function r(o,u){var f;if(N(this,r),(f=e.call(this))._platformLocation=o,f._removeListenerFns=[],null==u&&(u=f._platformLocation.getBaseHrefFromDOM()),null==u)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return f._baseHref=u,f}return j(r,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(u){this._removeListenerFns.push(this._platformLocation.onPopState(u),this._platformLocation.onHashChange(u))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(u){return xT(this._baseHref,u)}},{key:"path",value:function(){var u=arguments.length>0&&void 0!==arguments[0]&&arguments[0],f=this._platformLocation.pathname+sl(this._platformLocation.search),p=this._platformLocation.hash;return p&&u?"".concat(f).concat(p):f}},{key:"pushState",value:function(u,f,p,v){var g=this.prepareExternalUrl(p+sl(v));this._platformLocation.pushState(u,f,g)}},{key:"replaceState",value:function(u,f,p,v){var g=this.prepareExternalUrl(p+sl(v));this._platformLocation.replaceState(u,f,g)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var f,p,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(p=(f=this._platformLocation).historyGo)||void 0===p||p.call(f,u)}}]),r}(Th);return n.\u0275fac=function(e){return new(e||n)(Ot(ef),Ot(RT,8))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),$B=function(){var n=function(a){ve(r,a);var e=ge(r);function r(o,u){var f;return N(this,r),(f=e.call(this))._platformLocation=o,f._baseHref="",f._removeListenerFns=[],null!=u&&(f._baseHref=u),f}return j(r,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(u){this._removeListenerFns.push(this._platformLocation.onPopState(u),this._platformLocation.onHashChange(u))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var f=this._platformLocation.hash;return null==f&&(f="#"),f.length>0?f.substring(1):f}},{key:"prepareExternalUrl",value:function(u){var f=xT(this._baseHref,u);return f.length>0?"#"+f:f}},{key:"pushState",value:function(u,f,p,v){var g=this.prepareExternalUrl(p+sl(v));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.pushState(u,f,g)}},{key:"replaceState",value:function(u,f,p,v){var g=this.prepareExternalUrl(p+sl(v));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.replaceState(u,f,g)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var f,p,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(p=(f=this._platformLocation).historyGo)||void 0===p||p.call(f,u)}}]),r}(Th);return n.\u0275fac=function(e){return new(e||n)(Ot(ef),Ot(RT,8))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),TT=function(){var n=function(){function a(e,r){var o=this;N(this,a),this._subject=new Ee,this._urlChangeListeners=[],this._platformStrategy=e;var u=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=_1(w1(u)),this._platformStrategy.onPopState(function(f){o._subject.emit({url:o.path(!0),pop:!0,state:f.state,type:f.type})})}return j(a,[{key:"path",value:function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(r))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(r+sl(o))}},{key:"normalize",value:function(r){return a.stripTrailingSlash(function(n,a){return n&&a.startsWith(n)?a.substring(n.length):a}(this._baseHref,w1(r)))}},{key:"prepareExternalUrl",value:function(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}},{key:"go",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(u,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+sl(o)),u)}},{key:"replaceState",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(u,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+sl(o)),u)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var o,u,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(u=(o=this._platformStrategy).historyGo)||void 0===u||u.call(o,r)}},{key:"onUrlChange",value:function(r){var o=this;this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(u){o._notifyUrlChangeListeners(u.url,u.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(u){return u(r,o)})}},{key:"subscribe",value:function(r,o,u){return this._subject.subscribe({next:r,error:o,complete:u})}}]),a}();return n.normalizeQueryParams=sl,n.joinWithSlash=xT,n.stripTrailingSlash=_1,n.\u0275fac=function(e){return new(e||n)(Ot(Th),Ot(ef))},n.\u0275prov=un({token:n,factory:function(){return new TT(Ot(Th),Ot(ef))},providedIn:"root"}),n}();function w1(n){return n.replace(/\/index.html$/,"")}var ci=function(){return(ci=ci||{})[ci.Zero=0]="Zero",ci[ci.One=1]="One",ci[ci.Two=2]="Two",ci[ci.Few=3]="Few",ci[ci.Many=4]="Many",ci[ci.Other=5]="Other",ci}(),iH=function(n){return function(n){var a=function(n){return n.toLowerCase().replace(/_/g,"-")}(n),e=LO(a);if(e)return e;var r=a.split("-")[0];if(e=LO(r))return e;if("en"===r)return G2;throw new Error('Missing locale data for the locale "'.concat(n,'".'))}(n)[mt.PluralCase]},iS=function n(){N(this,n)},IH=function(){var n=function(a){ve(r,a);var e=ge(r);function r(o){var u;return N(this,r),(u=e.call(this)).locale=o,u}return j(r,[{key:"getPluralCategory",value:function(u,f){switch(iH(f||this.locale)(u)){case ci.Zero:return"zero";case ci.One:return"one";case ci.Two:return"two";case ci.Few:return"few";case ci.Many:return"many";default:return"other"}}}]),r}(iS);return n.\u0275fac=function(e){return new(e||n)(Ot(Tc))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}();function M1(n,a){a=encodeURIComponent(a);var r,e=Pt(n.split(";"));try{for(e.s();!(r=e.n()).done;){var o=r.value,u=o.indexOf("="),p=pr(-1==u?[o,""]:[o.slice(0,u),o.slice(u+1)],2),g=p[1];if(p[0].trim()===a)return decodeURIComponent(g)}}catch(y){e.e(y)}finally{e.f()}return null}var kH=function(){function n(a,e,r,o){N(this,n),this.$implicit=a,this.ngForOf=e,this.index=r,this.count=o}return j(n,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),n}(),Za=function(){var n=function(){function a(e,r,o){N(this,a),this._viewContainer=e,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return j(a,[{key:"ngForOf",set:function(r){this._ngForOf=r,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(r){this._trackByFn=r}},{key:"ngForTemplate",set:function(r){r&&(this._template=r)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var r=this._ngForOf;!this._differ&&r&&(this._differ=this._differs.find(r).create(this.ngForTrackBy))}if(this._differ){var o=this._differ.diff(this._ngForOf);o&&this._applyChanges(o)}}},{key:"_applyChanges",value:function(r){var o=this,u=this._viewContainer;r.forEachOperation(function(y,_,C){if(null==y.previousIndex)u.createEmbeddedView(o._template,new kH(y.item,o._ngForOf,-1,-1),null===C?void 0:C);else if(null==C)u.remove(null===_?void 0:_);else if(null!==_){var w=u.get(_);u.move(w,C),O1(w,y)}});for(var f=0,p=u.length;f<p;f++){var g=u.get(f).context;g.index=f,g.count=p,g.ngForOf=this._ngForOf}r.forEachIdentityChange(function(y){O1(u.get(y.currentIndex),y)})}}],[{key:"ngTemplateContextGuard",value:function(r,o){return!0}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(Ca),st(al),st(ey))},n.\u0275dir=Gi({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n}();function O1(n,a){n.context.$implicit=a.item}var aa=function(){var n=function(){function a(e,r){N(this,a),this._viewContainer=e,this._context=new NH,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}return j(a,[{key:"ngIf",set:function(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}},{key:"ngIfThen",set:function(r){P1("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(r){P1("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(r,o){return!0}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(Ca),st(al))},n.\u0275dir=Gi({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n}(),NH=function n(){N(this,n),this.$implicit=null,this.ngIf=null};function P1(n,a){if(a&&!a.createEmbeddedView)throw new Error("".concat(n," must be a TemplateRef, but received '").concat(Wn(a),"'."))}function Ws(n,a){return Error("InvalidPipeArgument: '".concat(a,"' for pipe '").concat(Wn(n),"'"))}var UH=function(){function n(){N(this,n)}return j(n,[{key:"createSubscription",value:function(e,r){return e.subscribe({next:r,error:function(u){throw u}})}},{key:"dispose",value:function(e){e.unsubscribe()}},{key:"onDestroy",value:function(e){e.unsubscribe()}}]),n}(),zH=function(){function n(){N(this,n)}return j(n,[{key:"createSubscription",value:function(e,r){return e.then(r,function(o){throw o})}},{key:"dispose",value:function(e){}},{key:"onDestroy",value:function(e){}}]),n}(),jH=new zH,qH=new UH,GT=function(){var n=function(){function a(e){N(this,a),this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}return j(a,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(r){return this._obj?r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue:(r&&this._subscribe(r),this._latestValue)}},{key:"_subscribe",value:function(r){var o=this;this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,function(u){return o._updateLatestValue(r,u)})}},{key:"_selectStrategy",value:function(r){if(U(r))return jH;if(K(r))return qH;throw Ws(a,r)}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(r,o){r===this._obj&&(this._latestValue=o,this._ref.markForCheck())}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(K0,16))},n.\u0275pipe=fo({name:"async",type:n,pure:!1}),n}(),YH=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,BT=function(){var n=function(){function a(){N(this,a)}return j(a,[{key:"transform",value:function(r){if(null==r)return null;if("string"!=typeof r)throw Ws(a,r);return r.replace(YH,function(o){return o[0].toUpperCase()+o.substr(1).toLowerCase()})}}]),a}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=fo({name:"titlecase",type:n,pure:!0}),n}(),L1=function(){var n=function(){function a(){N(this,a)}return j(a,[{key:"transform",value:function(r){return JSON.stringify(r,null,2)}}]),a}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=fo({name:"json",type:n,pure:!1}),n}(),sV=function(){var n=function a(){N(this,a)};return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ci({type:n}),n.\u0275inj=Vo({providers:[{provide:iS,useClass:IH}]}),n}(),dV=function(){var n=function a(){N(this,a)};return n.\u0275prov=un({token:n,providedIn:"root",factory:function(){return new fV(Ot(wa),window)}}),n}(),fV=function(){function n(a,e){N(this,n),this.document=a,this.window=e,this.offset=function(){return[0,0]}}return j(n,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportsScrolling()){var r=function(n,a){var e=n.getElementById(a)||n.getElementsByName(a)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow))for(var r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;o;){var u=o.shadowRoot;if(u){var f=u.getElementById(a)||u.querySelector('[name="'.concat(a,'"]'));if(f)return f}o=r.nextNode()}return null}(this.document,e);r&&(this.scrollToElement(r),this.attemptFocus(r))}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var r=e.getBoundingClientRect(),o=r.left+this.window.pageXOffset,u=r.top+this.window.pageYOffset,f=this.offset();this.window.scrollTo(o-f[0],u-f[1])}},{key:"attemptFocus",value:function(e){return e.focus(),this.document.activeElement===e}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var e=N1(this.window.history)||N1(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(r){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}]),n}();function N1(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}var oS,WT=function n(){N(this,n)},hV=function(n){ve(e,n);var a=ge(e);function e(){var r;return N(this,e),(r=a.apply(this,arguments)).supportsDOMEvents=!0,r}return e}(zB),vV=function(n){ve(e,n);var a=ge(e);function e(){return N(this,e),a.apply(this,arguments)}return j(e,[{key:"onAndCancel",value:function(o,u,f){return o.addEventListener(u,f,!1),function(){o.removeEventListener(u,f,!1)}}},{key:"dispatchEvent",value:function(o,u){o.dispatchEvent(u)}},{key:"remove",value:function(o){o.parentNode&&o.parentNode.removeChild(o)}},{key:"createElement",value:function(o,u){return(u=u||this.getDefaultDocument()).createElement(o)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(o){return o.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(o){return o instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(o,u){return"window"===u?window:"document"===u?o:"body"===u?o.body:null}},{key:"getBaseHref",value:function(o){var u=(ry=ry||document.querySelector("base"))?ry.getAttribute("href"):null;return null==u?null:function(n){(oS=oS||document.createElement("a")).setAttribute("href",n);var a=oS.pathname;return"/"===a.charAt(0)?a:"/".concat(a)}(u)}},{key:"resetBaseElement",value:function(){ry=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(o){return M1(document.cookie,o)}}],[{key:"makeCurrent",value:function(){!function(n){Y0||(Y0=n)}(new e)}}]),e}(hV),ry=null,G1=new In("TRANSITION_ID"),_V=[{provide:z0,useFactory:function(n,a,e){return function(){e.get(xh).donePromise.then(function(){for(var r=Dc(),o=a.querySelectorAll('style[ng-transition="'.concat(n,'"]')),u=0;u<o.length;u++)r.remove(o[u])})}},deps:[G1,wa,Ui],multi:!0}],CV=function(){function n(){N(this,n)}return j(n,[{key:"addToWindow",value:function(e){rr.getAngularTestability=function(o){var u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],f=e.findTestabilityInTree(o,u);if(null==f)throw new Error("Could not find testability for element.");return f},rr.getAllAngularTestabilities=function(){return e.getAllTestabilities()},rr.getAllAngularRootElements=function(){return e.getAllRootElements()},rr.frameworkStabilizers||(rr.frameworkStabilizers=[]),rr.frameworkStabilizers.push(function(u){var f=rr.getAllAngularTestabilities(),p=f.length,v=!1,g=function(_){v=v||_,0==--p&&u(v)};f.forEach(function(y){y.whenStable(g)})})}},{key:"findTestabilityInTree",value:function(e,r,o){if(null==r)return null;var u=e.getTestability(r);return null!=u?u:o?Dc().isShadowRoot(r)?this.findTestabilityInTree(e,r.host,!0):this.findTestabilityInTree(e,r.parentElement,!0):null}}],[{key:"init",value:function(){!function(n){yT=n}(new n)}}]),n}(),wV=function(){var n=function(){function a(){N(this,a)}return j(a,[{key:"build",value:function(){return new XMLHttpRequest}}]),a}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),aS=new In("EventManagerPlugins"),sS=function(){var n=function(){function a(e,r){var o=this;N(this,a),this._zone=r,this._eventNameToPlugin=new Map,e.forEach(function(u){return u.manager=o}),this._plugins=e.slice().reverse()}return j(a,[{key:"addEventListener",value:function(r,o,u){return this._findPluginFor(o).addEventListener(r,o,u)}},{key:"addGlobalEventListener",value:function(r,o,u){return this._findPluginFor(o).addGlobalEventListener(r,o,u)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(r){var o=this._eventNameToPlugin.get(r);if(o)return o;for(var u=this._plugins,f=0;f<u.length;f++){var p=u[f];if(p.supports(r))return this._eventNameToPlugin.set(r,p),p}throw new Error("No event manager plugin found for event ".concat(r))}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(aS),Ot(Di))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),B1=function(){function n(a){N(this,n),this._doc=a}return j(n,[{key:"addGlobalEventListener",value:function(e,r,o){var u=Dc().getGlobalEventTarget(this._doc,e);if(!u)throw new Error("Unsupported event target ".concat(u," for event ").concat(r));return this.addEventListener(u,r,o)}}]),n}(),H1=function(){var n=function(){function a(){N(this,a),this._stylesSet=new Set}return j(a,[{key:"addStyles",value:function(r){var o=this,u=new Set;r.forEach(function(f){o._stylesSet.has(f)||(o._stylesSet.add(f),u.add(f))}),this.onStylesAdded(u)}},{key:"onStylesAdded",value:function(r){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),a}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),iy=function(){var n=function(a){ve(r,a);var e=ge(r);function r(o){var u;return N(this,r),(u=e.call(this))._doc=o,u._hostNodes=new Map,u._hostNodes.set(o.head,[]),u}return j(r,[{key:"_addStylesToHost",value:function(u,f,p){var v=this;u.forEach(function(g){var y=v._doc.createElement("style");y.textContent=g,p.push(f.appendChild(y))})}},{key:"addHost",value:function(u){var f=[];this._addStylesToHost(this._stylesSet,u,f),this._hostNodes.set(u,f)}},{key:"removeHost",value:function(u){var f=this._hostNodes.get(u);f&&f.forEach(V1),this._hostNodes.delete(u)}},{key:"onStylesAdded",value:function(u){var f=this;this._hostNodes.forEach(function(p,v){f._addStylesToHost(u,v,p)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(u){return u.forEach(V1)})}}]),r}(H1);return n.\u0275fac=function(e){return new(e||n)(Ot(wa))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}();function V1(n){Dc().remove(n)}var UT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},zT=/%COMP%/g,SV="_nghost-".concat("%COMP%"),bV="_ngcontent-".concat("%COMP%");function uS(n,a,e){for(var r=0;r<a.length;r++){var o=a[r];Array.isArray(o)?uS(n,o,e):(o=o.replace(zT,n),e.push(o))}return e}function z1(n){return function(a){if("__ngUnwrap__"===a)return n;!1===n(a)&&(a.preventDefault(),a.returnValue=!1)}}var jT=function(){var n=function(){function a(e,r,o){N(this,a),this.eventManager=e,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new qT(e)}return j(a,[{key:"createRenderer",value:function(r,o){if(!r||!o)return this.defaultRenderer;switch(o.encapsulation){case La.Emulated:var u=this.rendererByCompId.get(o.id);return u||(u=new TV(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,u)),u.applyToHost(r),u;case 1:case La.ShadowDom:return new DV(this.eventManager,this.sharedStylesHost,r,o);default:if(!this.rendererByCompId.has(o.id)){var f=uS(o.id,o.styles,[]);this.sharedStylesHost.addStyles(f),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(sS),Ot(iy),Ot(Zm))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),qT=function(){function n(a){N(this,n),this.eventManager=a,this.data=Object.create(null),this.destroyNode=null}return j(n,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,r){return r?document.createElementNS(UT[r]||r,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,r){e.appendChild(r)}},{key:"insertBefore",value:function(e,r,o){e&&e.insertBefore(r,o)}},{key:"removeChild",value:function(e,r){e&&e.removeChild(r)}},{key:"selectRootElement",value:function(e,r){var o="string"==typeof e?document.querySelector(e):e;if(!o)throw new Error('The selector "'.concat(e,'" did not match any elements'));return r||(o.textContent=""),o}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,r,o,u){if(u){r=u+":"+r;var f=UT[u];f?e.setAttributeNS(f,r,o):e.setAttribute(r,o)}else e.setAttribute(r,o)}},{key:"removeAttribute",value:function(e,r,o){if(o){var u=UT[o];u?e.removeAttributeNS(u,r):e.removeAttribute("".concat(o,":").concat(r))}else e.removeAttribute(r)}},{key:"addClass",value:function(e,r){e.classList.add(r)}},{key:"removeClass",value:function(e,r){e.classList.remove(r)}},{key:"setStyle",value:function(e,r,o,u){u&(Mo.DashCase|Mo.Important)?e.style.setProperty(r,o,u&Mo.Important?"important":""):e.style[r]=o}},{key:"removeStyle",value:function(e,r,o){o&Mo.DashCase?e.style.removeProperty(r):e.style[r]=""}},{key:"setProperty",value:function(e,r,o){e[r]=o}},{key:"setValue",value:function(e,r){e.nodeValue=r}},{key:"listen",value:function(e,r,o){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,r,z1(o)):this.eventManager.addEventListener(e,r,z1(o))}}]),n}(),TV=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f){var p;N(this,e),(p=a.call(this,r)).component=u;var v=uS(f+"-"+u.id,u.styles,[]);return o.addStyles(v),p.contentAttr=function(n){return bV.replace(zT,n)}(f+"-"+u.id),p.hostAttr=function(n){return SV.replace(zT,n)}(f+"-"+u.id),p}return j(e,[{key:"applyToHost",value:function(o){we(ze(e.prototype),"setAttribute",this).call(this,o,this.hostAttr,"")}},{key:"createElement",value:function(o,u){var f=we(ze(e.prototype),"createElement",this).call(this,o,u);return we(ze(e.prototype),"setAttribute",this).call(this,f,this.contentAttr,""),f}}]),e}(qT),DV=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f){var p;N(this,e),(p=a.call(this,r)).sharedStylesHost=o,p.hostEl=u,p.shadowRoot=u.attachShadow({mode:"open"}),p.sharedStylesHost.addHost(p.shadowRoot);for(var v=uS(f.id,f.styles,[]),g=0;g<v.length;g++){var y=document.createElement("style");y.textContent=v[g],p.shadowRoot.appendChild(y)}return p}return j(e,[{key:"nodeOrShadowRoot",value:function(o){return o===this.hostEl?this.shadowRoot:o}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(o,u){return we(ze(e.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(o),u)}},{key:"insertBefore",value:function(o,u,f){return we(ze(e.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(o),u,f)}},{key:"removeChild",value:function(o,u){return we(ze(e.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(o),u)}},{key:"parentNode",value:function(o){return this.nodeOrShadowRoot(we(ze(e.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(o)))}}]),e}(qT),AV=function(){var n=function(a){ve(r,a);var e=ge(r);function r(o){return N(this,r),e.call(this,o)}return j(r,[{key:"supports",value:function(u){return!0}},{key:"addEventListener",value:function(u,f,p){var v=this;return u.addEventListener(f,p,!1),function(){return v.removeEventListener(u,f,p)}}},{key:"removeEventListener",value:function(u,f,p){return u.removeEventListener(f,p)}}]),r}(B1);return n.\u0275fac=function(e){return new(e||n)(Ot(wa))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),q1=["alt","control","meta","shift"],OV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},K1={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},PV={alt:function(a){return a.altKey},control:function(a){return a.ctrlKey},meta:function(a){return a.metaKey},shift:function(a){return a.shiftKey}},IV=function(){var n=function(a){ve(r,a);var e=ge(r);function r(o){return N(this,r),e.call(this,o)}return j(r,[{key:"supports",value:function(u){return null!=r.parseEventName(u)}},{key:"addEventListener",value:function(u,f,p){var v=r.parseEventName(f),g=r.eventCallback(v.fullKey,p,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Dc().onAndCancel(u,v.domEventName,g)})}}],[{key:"parseEventName",value:function(u){var f=u.toLowerCase().split("."),p=f.shift();if(0===f.length||"keydown"!==p&&"keyup"!==p)return null;var v=r._normalizeKey(f.pop()),g="";if(q1.forEach(function(_){var C=f.indexOf(_);C>-1&&(f.splice(C,1),g+=_+".")}),g+=v,0!=f.length||0===v.length)return null;var y={};return y.domEventName=p,y.fullKey=g,y}},{key:"getEventFullKey",value:function(u){var f="",p=function(n){var a=n.key;if(null==a){if(null==(a=n.keyIdentifier))return"Unidentified";a.startsWith("U+")&&(a=String.fromCharCode(parseInt(a.substring(2),16)),3===n.location&&K1.hasOwnProperty(a)&&(a=K1[a]))}return OV[a]||a}(u);return" "===(p=p.toLowerCase())?p="space":"."===p&&(p="dot"),q1.forEach(function(v){v!=p&&(0,PV[v])(u)&&(f+=v+".")}),f+=p}},{key:"eventCallback",value:function(u,f,p){return function(v){r.getEventFullKey(v)===u&&p.runGuarded(function(){return f(v)})}}},{key:"_normalizeKey",value:function(u){return"esc"===u?"escape":u}}]),r}(B1);return n.\u0275fac=function(e){return new(e||n)(Ot(wa))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),GV=[{provide:j0,useValue:"browser"},{provide:qP,useValue:function(){vV.makeCurrent(),CV.init()},multi:!0},{provide:wa,useFactory:function(){return function(n){rg=n}(document),document},deps:[]}],BV=t1(LB,"browser",GV),HV=[{provide:ih,useValue:"root"},{provide:oc,useFactory:function(){return new oc},deps:[]},{provide:aS,useClass:AV,multi:!0,deps:[wa,Di,j0]},{provide:aS,useClass:IV,multi:!0,deps:[wa]},{provide:jT,useClass:jT,deps:[sS,iy,Zm]},{provide:lP,useExisting:jT},{provide:H1,useExisting:iy},{provide:iy,useClass:iy,deps:[wa]},{provide:mT,useClass:mT,deps:[Di]},{provide:sS,useClass:sS,deps:[aS,Di]},{provide:WT,useClass:wV,deps:[]}],VV=function(){var n=function(){function a(e){if(N(this,a),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return j(a,null,[{key:"withServerTransition",value:function(r){return{ngModule:a,providers:[{provide:Zm,useValue:r.appId},{provide:G1,useExisting:Zm},_V]}}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(n,12))},n.\u0275mod=Ci({type:n}),n.\u0275inj=Vo({providers:HV,imports:[sV,VB]}),n}();function sn(){for(var n=arguments.length,a=new Array(n),e=0;e<n;e++)a[e]=arguments[e];var r=$(a);return Jr(a,r)}function Dh(n,a){return Tn(a)?Xr(n,a,1):Xr(n,1)}function tf(n,a){return oi(function(e,r){var o=0;e.subscribe(new mn(r,function(u){return n.call(a,u,o++)&&r.next(u)}))})}"undefined"!=typeof window&&window;var X1=function n(){N(this,n)},J1=function n(){N(this,n)},oy=function(){function n(a){var e=this;N(this,n),this.normalizedNames=new Map,this.lazyUpdate=null,a?this.lazyInit="string"==typeof a?function(){e.headers=new Map,a.split("\n").forEach(function(r){var o=r.indexOf(":");if(o>0){var u=r.slice(0,o),f=u.toLowerCase(),p=r.slice(o+1).trim();e.maybeSetNormalizedName(u,f),e.headers.has(f)?e.headers.get(f).push(p):e.headers.set(f,[p])}})}:function(){e.headers=new Map,Object.keys(a).forEach(function(r){var o=a[r],u=r.toLowerCase();"string"==typeof o&&(o=[o]),o.length>0&&(e.headers.set(u,o),e.maybeSetNormalizedName(r,u))})}:this.headers=new Map}return j(n,[{key:"has",value:function(e){return this.init(),this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){this.init();var r=this.headers.get(e.toLowerCase());return r&&r.length>0?r[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(e){return this.init(),this.headers.get(e.toLowerCase())||null}},{key:"append",value:function(e,r){return this.clone({name:e,value:r,op:"a"})}},{key:"set",value:function(e,r){return this.clone({name:e,value:r,op:"s"})}},{key:"delete",value:function(e,r){return this.clone({name:e,value:r,op:"d"})}},{key:"maybeSetNormalizedName",value:function(e,r){this.normalizedNames.has(r)||this.normalizedNames.set(r,e)}},{key:"init",value:function(){var e=this;this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(r){return e.applyUpdate(r)}),this.lazyUpdate=null))}},{key:"copyFrom",value:function(e){var r=this;e.init(),Array.from(e.headers.keys()).forEach(function(o){r.headers.set(o,e.headers.get(o)),r.normalizedNames.set(o,e.normalizedNames.get(o))})}},{key:"clone",value:function(e){var r=new n;return r.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,r.lazyUpdate=(this.lazyUpdate||[]).concat([e]),r}},{key:"applyUpdate",value:function(e){var r=e.name.toLowerCase();switch(e.op){case"a":case"s":var o=e.value;if("string"==typeof o&&(o=[o]),0===o.length)return;this.maybeSetNormalizedName(e.name,r);var u=("a"===e.op?this.headers.get(r):void 0)||[];u.push.apply(u,On(o)),this.headers.set(r,u);break;case"d":var f=e.value;if(f){var p=this.headers.get(r);if(!p)return;0===(p=p.filter(function(v){return-1===f.indexOf(v)})).length?(this.headers.delete(r),this.normalizedNames.delete(r)):this.headers.set(r,p)}else this.headers.delete(r),this.normalizedNames.delete(r)}}},{key:"forEach",value:function(e){var r=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(o){return e(r.normalizedNames.get(o),r.headers.get(o))})}}]),n}(),XV=function(){function n(){N(this,n)}return j(n,[{key:"encodeKey",value:function(e){return Z1(e)}},{key:"encodeValue",value:function(e){return Z1(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),n}();function JV(n,a){var e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(function(o){var u=o.indexOf("="),p=pr(-1==u?[a.decodeKey(o),""]:[a.decodeKey(o.slice(0,u)),a.decodeValue(o.slice(u+1))],2),v=p[0],g=p[1],y=e.get(v)||[];y.push(g),e.set(v,y)}),e}var ZV=/%(\d[a-f0-9])/gi,QV={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Z1(n){return encodeURIComponent(n).replace(ZV,function(a,e){var r;return null!==(r=QV[e])&&void 0!==r?r:a})}function Q1(n){return"".concat(n)}var Ah=function(){function n(){var a=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(N(this,n),this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new XV,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=JV(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(function(r){var o=e.fromObject[r];a.map.set(r,Array.isArray(o)?o:[o])})):this.map=null}return j(n,[{key:"has",value:function(e){return this.init(),this.map.has(e)}},{key:"get",value:function(e){this.init();var r=this.map.get(e);return r?r[0]:null}},{key:"getAll",value:function(e){return this.init(),this.map.get(e)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(e,r){return this.clone({param:e,value:r,op:"a"})}},{key:"appendAll",value:function(e){var r=[];return Object.keys(e).forEach(function(o){var u=e[o];Array.isArray(u)?u.forEach(function(f){r.push({param:o,value:f,op:"a"})}):r.push({param:o,value:u,op:"a"})}),this.clone(r)}},{key:"set",value:function(e,r){return this.clone({param:e,value:r,op:"s"})}},{key:"delete",value:function(e,r){return this.clone({param:e,value:r,op:"d"})}},{key:"toString",value:function(){var e=this;return this.init(),this.keys().map(function(r){var o=e.encoder.encodeKey(r);return e.map.get(r).map(function(u){return o+"="+e.encoder.encodeValue(u)}).join("&")}).filter(function(r){return""!==r}).join("&")}},{key:"clone",value:function(e){var r=new n({encoder:this.encoder});return r.cloneFrom=this.cloneFrom||this,r.updates=(this.updates||[]).concat(e),r}},{key:"init",value:function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(r){return e.map.set(r,e.cloneFrom.map.get(r))}),this.updates.forEach(function(r){switch(r.op){case"a":case"s":var o=("a"===r.op?e.map.get(r.param):void 0)||[];o.push(Q1(r.value)),e.map.set(r.param,o);break;case"d":if(void 0===r.value){e.map.delete(r.param);break}var u=e.map.get(r.param)||[],f=u.indexOf(Q1(r.value));-1!==f&&u.splice(f,1),u.length>0?e.map.set(r.param,u):e.map.delete(r.param)}}),this.cloneFrom=this.updates=null)}}]),n}(),eW=function(){function n(){N(this,n),this.map=new Map}return j(n,[{key:"set",value:function(e,r){return this.map.set(e,r),this}},{key:"get",value:function(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}},{key:"delete",value:function(e){return this.map.delete(e),this}},{key:"has",value:function(e){return this.map.has(e)}},{key:"keys",value:function(){return this.map.keys()}}]),n}();function eI(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function tI(n){return"undefined"!=typeof Blob&&n instanceof Blob}function nI(n){return"undefined"!=typeof FormData&&n instanceof FormData}var YT=function(){function n(a,e,r,o){var u;if(N(this,n),this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=a.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,u=o):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new oy),this.context||(this.context=new eW),this.params){var f=this.params.toString();if(0===f.length)this.urlWithParams=e;else{var p=e.indexOf("?");this.urlWithParams=e+(-1===p?"?":p<e.length-1?"&":"")+f}}else this.params=new Ah,this.urlWithParams=e}return j(n,[{key:"serializeBody",value:function(){return null===this.body?null:eI(this.body)||tI(this.body)||nI(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ah?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||nI(this.body)?null:tI(this.body)?this.body.type||null:eI(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ah?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}},{key:"clone",value:function(){var r,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.method||this.method,u=e.url||this.url,f=e.responseType||this.responseType,p=void 0!==e.body?e.body:this.body,v=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,y=e.headers||this.headers,_=e.params||this.params,C=null!==(r=e.context)&&void 0!==r?r:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce(function(w,x){return w.set(x,e.setHeaders[x])},y)),e.setParams&&(_=Object.keys(e.setParams).reduce(function(w,x){return w.set(x,e.setParams[x])},_)),new n(o,u,p,{params:_,headers:y,context:C,reportProgress:g,responseType:f,withCredentials:v})}}]),n}(),fi=function(){return(fi=fi||{})[fi.Sent=0]="Sent",fi[fi.UploadProgress=1]="UploadProgress",fi[fi.ResponseHeader=2]="ResponseHeader",fi[fi.DownloadProgress=3]="DownloadProgress",fi[fi.Response=4]="Response",fi[fi.User=5]="User",fi}(),$T=function n(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";N(this,n),this.headers=a.headers||new oy,this.status=void 0!==a.status?a.status:e,this.statusText=a.statusText||r,this.url=a.url||null,this.ok=this.status>=200&&this.status<300},rW=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return N(this,e),(r=a.call(this,o)).type=fi.ResponseHeader,r}return j(e,[{key:"clone",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e({headers:o.headers||this.headers,status:void 0!==o.status?o.status:this.status,statusText:o.statusText||this.statusText,url:o.url||this.url||void 0})}}]),e}($T),rI=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return N(this,e),(r=a.call(this,o)).type=fi.Response,r.body=void 0!==o.body?o.body:null,r}return j(e,[{key:"clone",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e({body:void 0!==o.body?o.body:this.body,headers:o.headers||this.headers,status:void 0!==o.status?o.status:this.status,statusText:o.statusText||this.statusText,url:o.url||this.url||void 0})}}]),e}($T),iI=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this,r,0,"Unknown Error")).name="HttpErrorResponse",o.ok=!1,o.message=o.status>=200&&o.status<300?"Http failure during parsing for ".concat(r.url||"(unknown url)"):"Http failure response for ".concat(r.url||"(unknown url)",": ").concat(r.status," ").concat(r.statusText),o.error=r.error||null,o}return e}($T);function XT(n,a){return{body:a,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}var sa=function(){var n=function(){function a(e){N(this,a),this.handler=e}return j(a,[{key:"request",value:function(r,o){var p,u=this,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r instanceof YT)p=r;else{var v=void 0;v=f.headers instanceof oy?f.headers:new oy(f.headers);var g=void 0;f.params&&(g=f.params instanceof Ah?f.params:new Ah({fromObject:f.params})),p=new YT(r,o,void 0!==f.body?f.body:null,{headers:v,context:f.context,params:g,reportProgress:f.reportProgress,responseType:f.responseType||"json",withCredentials:f.withCredentials})}var y=sn(p).pipe(Dh(function(C){return u.handler.handle(C)}));if(r instanceof YT||"events"===f.observe)return y;var _=y.pipe(tf(function(C){return C instanceof rI}));switch(f.observe||"body"){case"body":switch(p.responseType){case"arraybuffer":return _.pipe($n(function(C){if(null!==C.body&&!(C.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return C.body}));case"blob":return _.pipe($n(function(C){if(null!==C.body&&!(C.body instanceof Blob))throw new Error("Response is not a Blob.");return C.body}));case"text":return _.pipe($n(function(C){if(null!==C.body&&"string"!=typeof C.body)throw new Error("Response is not a string.");return C.body}));default:return _.pipe($n(function(C){return C.body}))}case"response":return _;default:throw new Error("Unreachable: unhandled observe type ".concat(f.observe,"}"))}}},{key:"delete",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",r,o)}},{key:"get",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",r,o)}},{key:"head",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",r,o)}},{key:"jsonp",value:function(r,o){return this.request("JSONP",r,{params:(new Ah).append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",r,o)}},{key:"patch",value:function(r,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",r,XT(u,o))}},{key:"post",value:function(r,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",r,XT(u,o))}},{key:"put",value:function(r,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",r,XT(u,o))}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(X1))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),oI=function(){function n(a,e){N(this,n),this.next=a,this.interceptor=e}return j(n,[{key:"handle",value:function(e){return this.interceptor.intercept(e,this.next)}}]),n}(),aI=new In("HTTP_INTERCEPTORS"),iW=function(){var n=function(){function a(){N(this,a)}return j(a,[{key:"intercept",value:function(r,o){return o.handle(r)}}]),a}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),oW=/^\)\]\}',?\n/,sI=function(){var n=function(){function a(e){N(this,a),this.xhrFactory=e}return j(a,[{key:"handle",value:function(r){var o=this;if("JSONP"===r.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new br(function(u){var f=o.xhrFactory.build();if(f.open(r.method,r.urlWithParams),r.withCredentials&&(f.withCredentials=!0),r.headers.forEach(function(T,A){return f.setRequestHeader(T,A.join(","))}),r.headers.has("Accept")||f.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){var p=r.detectContentTypeHeader();null!==p&&f.setRequestHeader("Content-Type",p)}if(r.responseType){var v=r.responseType.toLowerCase();f.responseType="json"!==v?v:"text"}var g=r.serializeBody(),y=null,_=function(){if(null!==y)return y;var A=1223===f.status?204:f.status,M=f.statusText||"OK",O=new oy(f.getAllResponseHeaders()),I=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(f)||r.url;return y=new rW({headers:O,status:A,statusText:M,url:I})},C=function(){var A=_(),M=A.headers,O=A.status,I=A.statusText,B=A.url,z=null;204!==O&&(z=void 0===f.response?f.responseText:f.response),0===O&&(O=z?200:0);var P=O>=200&&O<300;if("json"===r.responseType&&"string"==typeof z){var W=z;z=z.replace(oW,"");try{z=""!==z?JSON.parse(z):null}catch(X){z=W,P&&(P=!1,z={error:X,text:z})}}P?(u.next(new rI({body:z,headers:M,status:O,statusText:I,url:B||void 0})),u.complete()):u.error(new iI({error:z,headers:M,status:O,statusText:I,url:B||void 0}))},w=function(A){var M=_(),I=new iI({error:A,status:f.status||0,statusText:f.statusText||"Unknown Error",url:M.url||void 0});u.error(I)},x=!1,E=function(A){x||(u.next(_()),x=!0);var M={type:fi.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(M.total=A.total),"text"===r.responseType&&!!f.responseText&&(M.partialText=f.responseText),u.next(M)},b=function(A){var M={type:fi.UploadProgress,loaded:A.loaded};A.lengthComputable&&(M.total=A.total),u.next(M)};return f.addEventListener("load",C),f.addEventListener("error",w),f.addEventListener("timeout",w),f.addEventListener("abort",w),r.reportProgress&&(f.addEventListener("progress",E),null!==g&&f.upload&&f.upload.addEventListener("progress",b)),f.send(g),u.next({type:fi.Sent}),function(){f.removeEventListener("error",w),f.removeEventListener("abort",w),f.removeEventListener("load",C),f.removeEventListener("timeout",w),r.reportProgress&&(f.removeEventListener("progress",E),null!==g&&f.upload&&f.upload.removeEventListener("progress",b)),f.readyState!==f.DONE&&f.abort()}})}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(WT))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),JT=new In("XSRF_COOKIE_NAME"),ZT=new In("XSRF_HEADER_NAME"),uI=function n(){N(this,n)},sW=function(){var n=function(){function a(e,r,o){N(this,a),this.doc=e,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return j(a,[{key:"getToken",value:function(){if("server"===this.platform)return null;var r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=M1(r,this.cookieName),this.lastCookieString=r),this.lastToken}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(wa),Ot(j0),Ot(JT))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),QT=function(){var n=function(){function a(e,r){N(this,a),this.tokenService=e,this.headerName=r}return j(a,[{key:"intercept",value:function(r,o){var u=r.url.toLowerCase();if("GET"===r.method||"HEAD"===r.method||u.startsWith("http://")||u.startsWith("https://"))return o.handle(r);var f=this.tokenService.getToken();return null!==f&&!r.headers.has(this.headerName)&&(r=r.clone({headers:r.headers.set(this.headerName,f)})),o.handle(r)}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(uI),Ot(ZT))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),uW=function(){var n=function(){function a(e,r){N(this,a),this.backend=e,this.injector=r,this.chain=null}return j(a,[{key:"handle",value:function(r){if(null===this.chain){var o=this.injector.get(aI,[]);this.chain=o.reduceRight(function(u,f){return new oI(u,f)},this.backend)}return this.chain.handle(r)}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(J1),Ot(Ui))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),lW=function(){var n=function(){function a(){N(this,a)}return j(a,null,[{key:"disable",value:function(){return{ngModule:a,providers:[{provide:QT,useClass:iW}]}}},{key:"withOptions",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:a,providers:[r.cookieName?{provide:JT,useValue:r.cookieName}:[],r.headerName?{provide:ZT,useValue:r.headerName}:[]]}}}]),a}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ci({type:n}),n.\u0275inj=Vo({providers:[QT,{provide:aI,useExisting:QT,multi:!0},{provide:uI,useClass:sW},{provide:JT,useValue:"XSRF-TOKEN"},{provide:ZT,useValue:"X-XSRF-TOKEN"}]}),n}(),cW=function(){var n=function a(){N(this,a)};return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ci({type:n}),n.\u0275inj=Vo({providers:[sa,{provide:X1,useClass:uW},sI,{provide:J1,useExisting:sI}],imports:[[lW.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n}(),Us=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this))._value=r,o}return j(e,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(o){var u=we(ze(e.prototype),"_subscribe",this).call(this,o);return!u.closed&&o.next(this._value),u}},{key:"getValue",value:function(){var f=this._value;if(this.hasError)throw this.thrownError;return this._throwIfClosed(),f}},{key:"next",value:function(o){we(ze(e.prototype),"next",this).call(this,this._value=o)}}]),e}(vs),dW=Array.isArray,fW=Object.getPrototypeOf,pW=Object.prototype,hW=Object.keys;function vW(n){if(1===n.length){var a=n[0];if(dW(a))return{args:a,keys:null};if(function(n){return n&&"object"==typeof n&&fW(n)===pW}(a)){var e=hW(a);return{args:e.map(function(r){return a[r]}),keys:e}}}return{args:n,keys:null}}var mW=Array.isArray;function _W(n){return $n(function(a){return function(n,a){return mW(a)?n.apply(void 0,On(a)):n(a)}(n,a)})}function CW(n,a){return n.reduce(function(e,r,o){return e[r]=a[o],e},{})}function SW(n,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ii;return function(r){lI(a,function(){for(var o=n.length,u=new Array(o),f=o,p=o,v=function(_){lI(a,function(){var C=Jr(n[_],a),w=!1;C.subscribe(new mn(r,function(x){u[_]=x,w||(w=!0,p--),p||r.next(e(u.slice()))},function(){--f||r.complete()}))},r)},g=0;g<o;g++)v(g)},r)}}function lI(n,a,e){n?gs(e,n,a):a()}var lS=Ml(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function bW(){return Jc(1)}function eD(){for(var n=arguments.length,a=new Array(n),e=0;e<n;e++)a[e]=arguments[e];return bW()(Jr(a,$(a)))}function cI(n){return new br(function(a){lo(n()).subscribe(a)})}function dI(){return oi(function(n,a){var e=null;n._refCount++;var r=new mn(a,void 0,void 0,void 0,function(){if(!n||n._refCount<=0||0<--n._refCount)e=null;else{var o=n._connection,u=e;e=null,o&&(!u||o===u)&&o.unsubscribe(),a.unsubscribe()}});n.subscribe(r),r.closed||(e=n.connect())})}var EW=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;return N(this,e),(u=a.call(this)).source=r,u.subjectFactory=o,u._subject=null,u._refCount=0,u._connection=null,v_(r)&&(u.lift=r.lift),u}return j(e,[{key:"_subscribe",value:function(o){return this.getSubject().subscribe(o)}},{key:"getSubject",value:function(){var o=this._subject;return(!o||o.isStopped)&&(this._subject=this.subjectFactory()),this._subject}},{key:"_teardown",value:function(){this._refCount=0;var o=this._connection;this._subject=this._connection=null,null==o||o.unsubscribe()}},{key:"connect",value:function(){var o=this,u=this._connection;if(!u){u=this._connection=new rt;var f=this.getSubject();u.add(this.source.subscribe(new mn(f,void 0,function(){o._teardown(),f.complete()},function(p){o._teardown(),f.error(p)},function(){return o._teardown()}))),u.closed&&(this._connection=null,u=rt.EMPTY)}return u}},{key:"refCount",value:function(){return dI()(this)}}]),e}(br);function nf(n,a){return oi(function(e,r){var o=null,u=0,f=!1,p=function(){return f&&!o&&r.complete()};e.subscribe(new mn(r,function(v){null==o||o.unsubscribe();var g=0,y=u++;lo(n(v,y)).subscribe(o=new mn(r,function(_){return r.next(a?a(v,_,y,g++):_)},function(){o=null,p()}))},function(){f=!0,p()}))})}function RW(n,a,e,r,o){return function(u,f){var p=e,v=a,g=0;u.subscribe(new mn(f,function(y){var _=g++;v=p?n(v,y,_):(p=!0,y),r&&f.next(v)},o&&function(){p&&f.next(v),f.complete()}))}}function fI(n,a){return oi(RW(n,a,arguments.length>=2,!0))}function Ac(n){return oi(function(a,e){var u,r=null,o=!1;r=a.subscribe(new mn(e,void 0,void 0,function(f){u=lo(n(f,Ac(n)(a))),r?(r.unsubscribe(),r=null,u.subscribe(e)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(e))})}function tD(n){return n<=0?function(){return bo}:oi(function(a,e){var r=[];a.subscribe(new mn(e,function(o){r.push(o),n<r.length&&r.shift()},function(){var u,o=Pt(r);try{for(o.s();!(u=o.n()).done;)e.next(u.value)}catch(p){o.e(p)}finally{o.f()}e.complete()},void 0,function(){r=null}))})}function pI(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TW;return oi(function(a,e){var r=!1;a.subscribe(new mn(e,function(o){r=!0,e.next(o)},function(){return r?e.complete():e.error(n())}))})}function TW(){return new lS}function hI(n){return oi(function(a,e){var r=!1;a.subscribe(new mn(e,function(o){r=!0,e.next(o)},function(){r||e.next(n),e.complete()}))})}function Mh(n,a){var e=arguments.length>=2;return function(r){return r.pipe(n?tf(function(o,u){return n(o,u,r)}):ii,Uf(1),e?hI(a):pI(function(){return new lS}))}}function Sa(n,a,e){var r=Tn(n)||a||e?{next:n,error:a,complete:e}:n;return r?oi(function(o,u){var f;null===(f=r.subscribe)||void 0===f||f.call(r);var p=!0;o.subscribe(new mn(u,function(v){var g;null===(g=r.next)||void 0===g||g.call(r,v),u.next(v)},function(){var v;p=!1,null===(v=r.complete)||void 0===v||v.call(r),u.complete()},function(v){var g;p=!1,null===(g=r.error)||void 0===g||g.call(r,v),u.error(v)},function(){var v,g;p&&(null===(v=r.unsubscribe)||void 0===v||v.call(r)),null===(g=r.finalize)||void 0===g||g.call(r)}))}):ii}var ll=function n(a,e){N(this,n),this.id=a,this.url=e},nD=function(n){ve(e,n);var a=ge(e);function e(r,o){var u,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return N(this,e),(u=a.call(this,r,o)).navigationTrigger=f,u.restoredState=p,u}return j(e,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),e}(ll),ay=function(n){ve(e,n);var a=ge(e);function e(r,o,u){var f;return N(this,e),(f=a.call(this,r,o)).urlAfterRedirects=u,f}return j(e,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),e}(ll),vI=function(n){ve(e,n);var a=ge(e);function e(r,o,u){var f;return N(this,e),(f=a.call(this,r,o)).reason=u,f}return j(e,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),e}(ll),MW=function(n){ve(e,n);var a=ge(e);function e(r,o,u){var f;return N(this,e),(f=a.call(this,r,o)).error=u,f}return j(e,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),e}(ll),OW=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f){var p;return N(this,e),(p=a.call(this,r,o)).urlAfterRedirects=u,p.state=f,p}return j(e,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),e}(ll),PW=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f){var p;return N(this,e),(p=a.call(this,r,o)).urlAfterRedirects=u,p.state=f,p}return j(e,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),e}(ll),IW=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f,p){var v;return N(this,e),(v=a.call(this,r,o)).urlAfterRedirects=u,v.state=f,v.shouldActivate=p,v}return j(e,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),e}(ll),LW=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f){var p;return N(this,e),(p=a.call(this,r,o)).urlAfterRedirects=u,p.state=f,p}return j(e,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),e}(ll),FW=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f){var p;return N(this,e),(p=a.call(this,r,o)).urlAfterRedirects=u,p.state=f,p}return j(e,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),e}(ll),gI=function(){function n(a){N(this,n),this.route=a}return j(n,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),n}(),mI=function(){function n(a){N(this,n),this.route=a}return j(n,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),n}(),kW=function(){function n(a){N(this,n),this.snapshot=a}return j(n,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),n}(),NW=function(){function n(a){N(this,n),this.snapshot=a}return j(n,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),n}(),GW=function(){function n(a){N(this,n),this.snapshot=a}return j(n,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),n}(),BW=function(){function n(a){N(this,n),this.snapshot=a}return j(n,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),n}(),yI=function(){function n(a,e,r){N(this,n),this.routerEvent=a,this.position=e,this.anchor=r}return j(n,[{key:"toString",value:function(){var e=this.position?"".concat(this.position[0],", ").concat(this.position[1]):null;return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(e,"')")}}]),n}(),Ln="primary",HW=function(){function n(a){N(this,n),this.params=a||{}}return j(n,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.params,e)}},{key:"get",value:function(e){if(this.has(e)){var r=this.params[e];return Array.isArray(r)?r[0]:r}return null}},{key:"getAll",value:function(e){if(this.has(e)){var r=this.params[e];return Array.isArray(r)?r:[r]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),n}();function Oh(n){return new HW(n)}var _I="ngNavigationCancelingError";function rD(n){var a=Error("NavigationCancelingError: "+n);return a[_I]=!0,a}function WW(n,a,e){var r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(a.hasChildren()||r.length<n.length))return null;for(var o={},u=0;u<r.length;u++){var f=r[u],p=n[u];if(f.startsWith(":"))o[f.substring(1)]=p;else if(f!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Su(n,a){var e=n?Object.keys(n):void 0,r=a?Object.keys(a):void 0;if(!e||!r||e.length!=r.length)return!1;for(var o,u=0;u<e.length;u++)if(!CI(n[o=e[u]],a[o]))return!1;return!0}function CI(n,a){if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length)return!1;var e=On(n).sort(),r=On(a).sort();return e.every(function(o,u){return r[u]===o})}return n===a}function wI(n){return Array.prototype.concat.apply([],n)}function SI(n){return n.length>0?n[n.length-1]:null}function no(n,a){for(var e in n)n.hasOwnProperty(e)&&a(n[e],e)}function bu(n){return ee(n)?n:U(n)?Jr(Promise.resolve(n)):sn(n)}var jW={exact:function xI(n,a,e){if(!of(n.segments,a.segments)||!cS(n.segments,a.segments,e)||n.numberOfChildren!==a.numberOfChildren)return!1;for(var r in a.children)if(!n.children[r]||!xI(n.children[r],a.children[r],e))return!1;return!0},subset:RI},bI={exact:function(n,a){return Su(n,a)},subset:function(n,a){return Object.keys(a).length<=Object.keys(n).length&&Object.keys(a).every(function(e){return CI(n[e],a[e])})},ignored:function(){return!0}};function EI(n,a,e){return jW[e.paths](n.root,a.root,e.matrixParams)&&bI[e.queryParams](n.queryParams,a.queryParams)&&!("exact"===e.fragment&&n.fragment!==a.fragment)}function RI(n,a,e){return TI(n,a,a.segments,e)}function TI(n,a,e,r){if(n.segments.length>e.length){var o=n.segments.slice(0,e.length);return!(!of(o,e)||a.hasChildren()||!cS(o,e,r))}if(n.segments.length===e.length){if(!of(n.segments,e)||!cS(n.segments,e,r))return!1;for(var u in a.children)if(!n.children[u]||!RI(n.children[u],a.children[u],r))return!1;return!0}var f=e.slice(0,n.segments.length),p=e.slice(n.segments.length);return!!(of(n.segments,f)&&cS(n.segments,f,r)&&n.children[Ln])&&TI(n.children[Ln],a,p,r)}function cS(n,a,e){return a.every(function(r,o){return bI[e](n[o].parameters,r.parameters)})}var rf=function(){function n(a,e,r){N(this,n),this.root=a,this.queryParams=e,this.fragment=r}return j(n,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Oh(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return XW.serialize(this)}}]),n}(),Un=function(){function n(a,e){var r=this;N(this,n),this.segments=a,this.children=e,this.parent=null,no(e,function(o,u){return o.parent=r})}return j(n,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return dS(this)}}]),n}(),sy=function(){function n(a,e){N(this,n),this.path=a,this.parameters=e}return j(n,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=Oh(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return PI(this)}}]),n}();function of(n,a){return n.length===a.length&&n.every(function(e,r){return e.path===a[r].path})}var DI=function n(){N(this,n)},AI=function(){function n(){N(this,n)}return j(n,[{key:"parse",value:function(e){var r=new oU(e);return new rf(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}},{key:"serialize",value:function(e){var r="/".concat(uy(e.root,!0)),o=function(n){var a=Object.keys(n).map(function(e){var r=n[e];return Array.isArray(r)?r.map(function(o){return"".concat(fS(e),"=").concat(fS(o))}).join("&"):"".concat(fS(e),"=").concat(fS(r))}).filter(function(e){return!!e});return a.length?"?".concat(a.join("&")):""}(e.queryParams),u="string"==typeof e.fragment?"#".concat(function(n){return encodeURI(n)}(e.fragment)):"";return"".concat(r).concat(o).concat(u)}}]),n}(),XW=new AI;function dS(n){return n.segments.map(function(a){return PI(a)}).join("/")}function uy(n,a){if(!n.hasChildren())return dS(n);if(a){var e=n.children[Ln]?uy(n.children[Ln],!1):"",r=[];return no(n.children,function(u,f){f!==Ln&&r.push("".concat(f,":").concat(uy(u,!1)))}),r.length>0?"".concat(e,"(").concat(r.join("//"),")"):e}var o=function(n,a){var e=[];return no(n.children,function(r,o){o===Ln&&(e=e.concat(a(r,o)))}),no(n.children,function(r,o){o!==Ln&&(e=e.concat(a(r,o)))}),e}(n,function(u,f){return f===Ln?[uy(n.children[Ln],!1)]:["".concat(f,":").concat(uy(u,!1))]});return 1===Object.keys(n.children).length&&null!=n.children[Ln]?"".concat(dS(n),"/").concat(o[0]):"".concat(dS(n),"/(").concat(o.join("//"),")")}function MI(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fS(n){return MI(n).replace(/%3B/gi,";")}function iD(n){return MI(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pS(n){return decodeURIComponent(n)}function OI(n){return pS(n.replace(/\+/g,"%20"))}function PI(n){return"".concat(iD(n.path)).concat(function(n){return Object.keys(n).map(function(a){return";".concat(iD(a),"=").concat(iD(n[a]))}).join("")}(n.parameters))}var eU=/^[^\/()?;=#]+/;function hS(n){var a=n.match(eU);return a?a[0]:""}var tU=/^[^=?&#]+/,rU=/^[^&#]+/,oU=function(){function n(a){N(this,n),this.url=a,this.remaining=a}return j(n,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Un([],{}):new Un([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));var o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(e.length>0||Object.keys(r).length>0)&&(o[Ln]=new Un(e,r)),o}},{key:"parseSegment",value:function(){var e=hS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new sy(pS(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var r=hS(this.remaining);if(r){this.capture(r);var o="";if(this.consumeOptional("=")){var u=hS(this.remaining);u&&this.capture(o=u)}e[pS(r)]=pS(o)}}},{key:"parseQueryParam",value:function(e){var r=function(n){var a=n.match(tU);return a?a[0]:""}(this.remaining);if(r){this.capture(r);var o="";if(this.consumeOptional("=")){var u=function(n){var a=n.match(rU);return a?a[0]:""}(this.remaining);u&&this.capture(o=u)}var f=OI(r),p=OI(o);if(e.hasOwnProperty(f)){var v=e[f];Array.isArray(v)||(e[f]=v=[v]),v.push(p)}else e[f]=p}}},{key:"parseParens",value:function(e){var r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var o=hS(this.remaining),u=this.remaining[o.length];if("/"!==u&&")"!==u&&";"!==u)throw new Error("Cannot parse url '".concat(this.url,"'"));var f=void 0;o.indexOf(":")>-1?(f=o.substr(0,o.indexOf(":")),this.capture(f),this.capture(":")):e&&(f=Ln);var p=this.parseChildren();r[f]=1===Object.keys(p).length?p[Ln]:new Un([],p),this.consumeOptional("//")}return r}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),n}(),II=function(){function n(a){N(this,n),this._root=a}return j(n,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(e){var r=this.pathFromRoot(e);return r.length>1?r[r.length-2]:null}},{key:"children",value:function(e){var r=oD(e,this._root);return r?r.children.map(function(o){return o.value}):[]}},{key:"firstChild",value:function(e){var r=oD(e,this._root);return r&&r.children.length>0?r.children[0].value:null}},{key:"siblings",value:function(e){var r=aD(e,this._root);return r.length<2?[]:r[r.length-2].children.map(function(u){return u.value}).filter(function(u){return u!==e})}},{key:"pathFromRoot",value:function(e){return aD(e,this._root).map(function(r){return r.value})}}]),n}();function oD(n,a){if(n===a.value)return a;var r,e=Pt(a.children);try{for(e.s();!(r=e.n()).done;){var u=oD(n,r.value);if(u)return u}}catch(f){e.e(f)}finally{e.f()}return null}function aD(n,a){if(n===a.value)return[a];var r,e=Pt(a.children);try{for(e.s();!(r=e.n()).done;){var u=aD(n,r.value);if(u.length)return u.unshift(a),u}}catch(f){e.e(f)}finally{e.f()}return[]}var cl=function(){function n(a,e){N(this,n),this.value=a,this.children=e}return j(n,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),n}();function Ph(n){var a={};return n&&n.children.forEach(function(e){return a[e.value.outlet]=e}),a}var LI=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;return N(this,e),(u=a.call(this,r)).snapshot=o,sD(Yn(u),r),u}return j(e,[{key:"toString",value:function(){return this.snapshot.toString()}}]),e}(II);function FI(n,a){var e=function(n,a){var f=new vS([],{},{},"",{},Ln,a,null,n.root,-1,{});return new NI("",new cl(f,[]))}(n,a),r=new Us([new sy("",{})]),o=new Us({}),u=new Us({}),f=new Us({}),p=new Us(""),v=new zs(r,o,f,p,u,Ln,a,e.root);return v.snapshot=e.root,new LI(new cl(v,[]),e)}var zs=function(){function n(a,e,r,o,u,f,p,v){N(this,n),this.url=a,this.params=e,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=f,this.component=p,this._futureSnapshot=v}return j(n,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe($n(function(e){return Oh(e)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe($n(function(e){return Oh(e)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),n}();function kI(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",e=n.pathFromRoot,r=0;if("always"!==a)for(r=e.length-1;r>=1;){var o=e[r],u=e[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return sU(e.slice(r))}function sU(n){return n.reduce(function(a,e){return{params:Object.assign(Object.assign({},a.params),e.params),data:Object.assign(Object.assign({},a.data),e.data),resolve:Object.assign(Object.assign({},a.resolve),e._resolvedData)}},{params:{},data:{},resolve:{}})}var vS=function(){function n(a,e,r,o,u,f,p,v,g,y,_){N(this,n),this.url=a,this.params=e,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=f,this.component=p,this.routeConfig=v,this._urlSegment=g,this._lastPathIndex=y,this._resolve=_}return j(n,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=Oh(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Oh(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){var e=this.url.map(function(o){return o.toString()}).join("/"),r=this.routeConfig?this.routeConfig.path:"";return"Route(url:'".concat(e,"', path:'").concat(r,"')")}}]),n}(),NI=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;return N(this,e),(u=a.call(this,o)).url=r,sD(Yn(u),o),u}return j(e,[{key:"toString",value:function(){return GI(this._root)}}]),e}(II);function sD(n,a){a.value._routerState=n,a.children.forEach(function(e){return sD(n,e)})}function GI(n){var a=n.children.length>0?" { ".concat(n.children.map(GI).join(", ")," } "):"";return"".concat(n.value).concat(a)}function uD(n){if(n.snapshot){var a=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Su(a.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),a.fragment!==e.fragment&&n.fragment.next(e.fragment),Su(a.params,e.params)||n.params.next(e.params),function(n,a){if(n.length!==a.length)return!1;for(var e=0;e<n.length;++e)if(!Su(n[e],a[e]))return!1;return!0}(a.url,e.url)||n.url.next(e.url),Su(a.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function lD(n,a){var e=Su(n.params,a.params)&&function(n,a){return of(n,a)&&n.every(function(e,r){return Su(e.parameters,a[r].parameters)})}(n.url,a.url);return e&&!(!n.parent!=!a.parent)&&(!n.parent||lD(n.parent,a.parent))}function ly(n,a,e){if(e&&n.shouldReuseRoute(a.value,e.value.snapshot)){var r=e.value;r._futureSnapshot=a.value;var o=function(n,a,e){return a.children.map(function(r){var u,o=Pt(e.children);try{for(o.s();!(u=o.n()).done;){var f=u.value;if(n.shouldReuseRoute(r.value,f.value.snapshot))return ly(n,r,f)}}catch(p){o.e(p)}finally{o.f()}return ly(n,r)})}(n,a,e);return new cl(r,o)}if(n.shouldAttach(a.value)){var u=n.retrieve(a.value);if(null!==u){var f=u.route;return f.value._futureSnapshot=a.value,f.children=a.children.map(function(g){return ly(n,g)}),f}}var p=function(n){return new zs(new Us(n.url),new Us(n.params),new Us(n.queryParams),new Us(n.fragment),new Us(n.data),n.outlet,n.component,n)}(a.value),v=a.children.map(function(g){return ly(n,g)});return new cl(p,v)}function dU(n,a,e,r,o){if(0===e.length)return cD(a.root,a.root,a,r,o);var u=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new HI(!0,0,n);var a=0,e=!1,r=n.reduce(function(o,u,f){if("object"==typeof u&&null!=u){if(u.outlets){var p={};return no(u.outlets,function(v,g){p[g]="string"==typeof v?v.split("/"):v}),[].concat(On(o),[{outlets:p}])}if(u.segmentPath)return[].concat(On(o),[u.segmentPath])}return"string"!=typeof u?[].concat(On(o),[u]):0===f?(u.split("/").forEach(function(v,g){0==g&&"."===v||(0==g&&""===v?e=!0:".."===v?a++:""!=v&&o.push(v))}),o):[].concat(On(o),[u])},[]);return new HI(e,a,r)}(e);if(u.toRoot())return cD(a.root,new Un([],{}),a,r,o);var f=function(n,a,e){if(n.isAbsolute)return new dD(a.root,!0,0);if(-1===e.snapshot._lastPathIndex){var r=e.snapshot._urlSegment;return new dD(r,r===a.root,0)}var u=gS(n.commands[0])?0:1;return function(n,a,e){for(var r=n,o=a,u=e;u>o;){if(u-=o,!(r=r.parent))throw new Error("Invalid number of '../'");o=r.segments.length}return new dD(r,!1,o-u)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+u,n.numberOfDoubleDots)}(u,a,n),p=f.processChildren?mS(f.segmentGroup,f.index,u.commands):VI(f.segmentGroup,f.index,u.commands);return cD(f.segmentGroup,p,a,r,o)}function gS(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function cy(n){return"object"==typeof n&&null!=n&&n.outlets}function cD(n,a,e,r,o){var u={};return r&&no(r,function(f,p){u[p]=Array.isArray(f)?f.map(function(v){return"".concat(v)}):"".concat(f)}),new rf(e.root===n?a:BI(e.root,n,a),u,o)}function BI(n,a,e){var r={};return no(n.children,function(o,u){r[u]=o===a?e:BI(o,a,e)}),new Un(n.segments,r)}var HI=function(){function n(a,e,r){if(N(this,n),this.isAbsolute=a,this.numberOfDoubleDots=e,this.commands=r,a&&r.length>0&&gS(r[0]))throw new Error("Root segment cannot have matrix parameters");var o=r.find(cy);if(o&&o!==SI(r))throw new Error("{outlets:{}} has to be the last command")}return j(n,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),n}(),dD=function n(a,e,r){N(this,n),this.segmentGroup=a,this.processChildren=e,this.index=r};function VI(n,a,e){if(n||(n=new Un([],{})),0===n.segments.length&&n.hasChildren())return mS(n,a,e);var r=function(n,a,e){for(var r=0,o=a,u={match:!1,pathIndex:0,commandIndex:0};o<n.segments.length;){if(r>=e.length)return u;var f=n.segments[o],p=e[r];if(cy(p))break;var v="".concat(p),g=r<e.length-1?e[r+1]:null;if(o>0&&void 0===v)break;if(v&&g&&"object"==typeof g&&void 0===g.outlets){if(!UI(v,g,f))return u;r+=2}else{if(!UI(v,{},f))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,a,e),o=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){var u=new Un(n.segments.slice(0,r.pathIndex),{});return u.children[Ln]=new Un(n.segments.slice(r.pathIndex),n.children),mS(u,0,o)}return r.match&&0===o.length?new Un(n.segments,{}):r.match&&!n.hasChildren()?fD(n,a,e):r.match?mS(n,0,o):fD(n,a,e)}function mS(n,a,e){if(0===e.length)return new Un(n.segments,{});var r=function(n){return cy(n[0])?n[0].outlets:Rn({},Ln,n)}(e),o={};return no(r,function(u,f){"string"==typeof u&&(u=[u]),null!==u&&(o[f]=VI(n.children[f],a,u))}),no(n.children,function(u,f){void 0===r[f]&&(o[f]=u)}),new Un(n.segments,o)}function fD(n,a,e){for(var r=n.segments.slice(0,a),o=0;o<e.length;){var u=e[o];if(cy(u)){var f=mU(u.outlets);return new Un(r,f)}if(0===o&&gS(e[0]))r.push(new sy(n.segments[a].path,WI(e[0]))),o++;else{var v=cy(u)?u.outlets[Ln]:"".concat(u),g=o<e.length-1?e[o+1]:null;v&&g&&gS(g)?(r.push(new sy(v,WI(g))),o+=2):(r.push(new sy(v,{})),o++)}}return new Un(r,{})}function mU(n){var a={};return no(n,function(e,r){"string"==typeof e&&(e=[e]),null!==e&&(a[r]=fD(new Un([],{}),0,e))}),a}function WI(n){var a={};return no(n,function(e,r){return a[r]="".concat(e)}),a}function UI(n,a,e){return n==e.path&&Su(a,e.parameters)}var _U=function(){function n(a,e,r,o){N(this,n),this.routeReuseStrategy=a,this.futureState=e,this.currState=r,this.forwardEvent=o}return j(n,[{key:"activate",value:function(e){var r=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,o,e),uD(this.futureState.root),this.activateChildRoutes(r,o,e)}},{key:"deactivateChildRoutes",value:function(e,r,o){var u=this,f=Ph(r);e.children.forEach(function(p){var v=p.value.outlet;u.deactivateRoutes(p,f[v],o),delete f[v]}),no(f,function(p,v){u.deactivateRouteAndItsChildren(p,o)})}},{key:"deactivateRoutes",value:function(e,r,o){var u=e.value,f=r?r.value:null;if(u===f)if(u.component){var p=o.getContext(u.outlet);p&&this.deactivateChildRoutes(e,r,p.children)}else this.deactivateChildRoutes(e,r,o);else f&&this.deactivateRouteAndItsChildren(r,o)}},{key:"deactivateRouteAndItsChildren",value:function(e,r){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,r):this.deactivateRouteAndOutlet(e,r)}},{key:"detachAndStoreRouteSubtree",value:function(e,r){for(var o=r.getContext(e.value.outlet),u=o&&e.value.component?o.children:r,f=Ph(e),p=0,v=Object.keys(f);p<v.length;p++)this.deactivateRouteAndItsChildren(f[v[p]],u);if(o&&o.outlet){var y=o.outlet.detach(),_=o.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:y,route:e,contexts:_})}}},{key:"deactivateRouteAndOutlet",value:function(e,r){for(var o=r.getContext(e.value.outlet),u=o&&e.value.component?o.children:r,f=Ph(e),p=0,v=Object.keys(f);p<v.length;p++)this.deactivateRouteAndItsChildren(f[v[p]],u);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}},{key:"activateChildRoutes",value:function(e,r,o){var u=this,f=Ph(r);e.children.forEach(function(p){u.activateRoutes(p,f[p.value.outlet],o),u.forwardEvent(new BW(p.value.snapshot))}),e.children.length&&this.forwardEvent(new NW(e.value.snapshot))}},{key:"activateRoutes",value:function(e,r,o){var u=e.value,f=r?r.value:null;if(uD(u),u===f)if(u.component){var p=o.getOrCreateContext(u.outlet);this.activateChildRoutes(e,r,p.children)}else this.activateChildRoutes(e,r,o);else if(u.component){var v=o.getOrCreateContext(u.outlet);if(this.routeReuseStrategy.shouldAttach(u.snapshot)){var g=this.routeReuseStrategy.retrieve(u.snapshot);this.routeReuseStrategy.store(u.snapshot,null),v.children.onOutletReAttached(g.contexts),v.attachRef=g.componentRef,v.route=g.route.value,v.outlet&&v.outlet.attach(g.componentRef,g.route.value),uD(g.route.value),this.activateChildRoutes(e,null,v.children)}else{var y=function(n){for(var a=n.parent;a;a=a.parent){var e=a.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(u.snapshot),_=y?y.module.componentFactoryResolver:null;v.attachRef=null,v.route=u,v.resolver=_,v.outlet&&v.outlet.activateWith(u,_),this.activateChildRoutes(e,null,v.children)}}else this.activateChildRoutes(e,null,o)}}]),n}(),pD=function n(a,e){N(this,n),this.routes=a,this.module=e};function Mc(n){return"function"==typeof n}function af(n){return n instanceof rf}var dy=Symbol("INITIAL_VALUE");function fy(){return nf(function(n){return function(){for(var n=arguments.length,a=new Array(n),e=0;e<n;e++)a[e]=arguments[e];var r=$(a),o=R_(a),u=vW(a),f=u.args,p=u.keys;if(0===f.length)return Jr([],r);var v=new br(SW(f,r,p?function(g){return CW(p,g)}:ii));return o?v.pipe(_W(o)):v}(n.map(function(a){return a.pipe(Uf(1),function(){for(var n=arguments.length,a=new Array(n),e=0;e<n;e++)a[e]=arguments[e];var r=$(a);return oi(function(o,u){(r?eD(a,o,r):eD(a,o)).subscribe(u)})}(dy))})).pipe(fI(function(a,e){var r=!1;return e.reduce(function(o,u,f){return o!==dy?o:(u===dy&&(r=!0),r||!1!==u&&f!==e.length-1&&!af(u)?o:u)},a)},dy),tf(function(a){return a!==dy}),$n(function(a){return af(a)?a:!0===a}),Uf(1))})}var RU=function n(){N(this,n),this.outlet=null,this.route=null,this.resolver=null,this.children=new py,this.attachRef=null},py=function(){function n(){N(this,n),this.contexts=new Map}return j(n,[{key:"onChildOutletCreated",value:function(e,r){var o=this.getOrCreateContext(e);o.outlet=r,this.contexts.set(e,o)}},{key:"onChildOutletDestroyed",value:function(e){var r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var r=this.getContext(e);return r||(r=new RU,this.contexts.set(e,r)),r}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),n}(),hD=function(){var n=function(){function a(e,r,o,u,f){N(this,a),this.parentContexts=e,this.location=r,this.resolver=o,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ee,this.deactivateEvents=new Ee,this.attachEvents=new Ee,this.detachEvents=new Ee,this.name=u||Ln,e.onChildOutletCreated(this.name,this)}return j(a,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}},{key:"attach",value:function(r,o){this.activated=r,this._activatedRoute=o,this.location.insert(r.hostView),this.attachEvents.emit(r.instance)}},{key:"deactivate",value:function(){if(this.activated){var r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}},{key:"activateWith",value:function(r,o){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;var p=(o=o||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),v=this.parentContexts.getOrCreateContext(this.name).children,g=new TU(r,v,this.location.injector);this.activated=this.location.createComponent(p,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(py),st(Ca),st(Rc),Kl("name"),st(K0))},n.\u0275dir=Gi({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n}(),TU=function(){function n(a,e,r){N(this,n),this.route=a,this.childContexts=e,this.parent=r}return j(n,[{key:"get",value:function(e,r){return e===zs?this.route:e===py?this.childContexts:this.parent.get(e,r)}}]),n}(),zI=function(){var n=function a(){N(this,a)};return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Er({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&c(0,"router-outlet")},directives:[hD],encapsulation:2}),n}();function jI(n){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=0;e<n.length;e++){var r=n[e],o=AU(a,r);DU(r,o)}}function DU(n,a){n.children&&jI(n.children,a)}function AU(n,a){return a?n||a.path?n&&!a.path?"".concat(n,"/"):!n&&a.path?a.path:"".concat(n,"/").concat(a.path):"":n}function vD(n){var a=n.children&&n.children.map(vD),e=a?Object.assign(Object.assign({},n),{children:a}):Object.assign({},n);return!e.component&&(a||e.loadChildren)&&e.outlet&&e.outlet!==Ln&&(e.component=zI),e}function Qa(n){return n.outlet||Ln}function qI(n,a){var e=n.filter(function(r){return Qa(r)===a});return e.push.apply(e,On(n.filter(function(r){return Qa(r)!==a}))),e}var KI={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function yS(n,a,e){var r;if(""===a.path)return"full"===a.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},KI):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var u=(a.matcher||WW)(e,n,a);if(!u)return Object.assign({},KI);var f={};no(u.posParams,function(v,g){f[g]=v.path});var p=u.consumed.length>0?Object.assign(Object.assign({},f),u.consumed[u.consumed.length-1].parameters):f;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function _S(n,a,e,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(e.length>0&&PU(n,e,r)){var u=new Un(a,OU(n,a,r,new Un(e,n.children)));return u._sourceSegment=n,u._segmentIndexShift=a.length,{segmentGroup:u,slicedSegments:[]}}if(0===e.length&&IU(n,e,r)){var f=new Un(n.segments,MU(n,a,e,r,n.children,o));return f._sourceSegment=n,f._segmentIndexShift=a.length,{segmentGroup:f,slicedSegments:e}}var p=new Un(n.segments,n.children);return p._sourceSegment=n,p._segmentIndexShift=a.length,{segmentGroup:p,slicedSegments:e}}function MU(n,a,e,r,o,u){var v,f={},p=Pt(r);try{for(p.s();!(v=p.n()).done;){var g=v.value;if(CS(n,e,g)&&!o[Qa(g)]){var y=new Un([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:a.length,f[Qa(g)]=y}}}catch(_){p.e(_)}finally{p.f()}return Object.assign(Object.assign({},o),f)}function OU(n,a,e,r){var o={};o[Ln]=r,r._sourceSegment=n,r._segmentIndexShift=a.length;var f,u=Pt(e);try{for(u.s();!(f=u.n()).done;){var p=f.value;if(""===p.path&&Qa(p)!==Ln){var v=new Un([],{});v._sourceSegment=n,v._segmentIndexShift=a.length,o[Qa(p)]=v}}}catch(g){u.e(g)}finally{u.f()}return o}function PU(n,a,e){return e.some(function(r){return CS(n,a,r)&&Qa(r)!==Ln})}function IU(n,a,e){return e.some(function(r){return CS(n,a,r)})}function CS(n,a,e){return(!(n.hasChildren()||a.length>0)||"full"!==e.pathMatch)&&""===e.path}function YI(n,a,e,r){return!!(Qa(n)===r||r!==Ln&&CS(a,e,n))&&("**"===n.path||yS(a,n,e).matched)}function $I(n,a,e){return 0===a.length&&!n.children[e]}var hy=function n(a){N(this,n),this.segmentGroup=a||null},XI=function n(a){N(this,n),this.urlTree=a};function wS(n){return new br(function(a){return a.error(new hy(n))})}function JI(n){return new br(function(a){return a.error(new XI(n))})}function LU(n){return new br(function(a){return a.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(n,"'")))})}var NU=function(){function n(a,e,r,o,u){N(this,n),this.configLoader=e,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=a.get(ol)}return j(n,[{key:"apply",value:function(){var e=this,r=_S(this.urlTree.root,[],[],this.config).segmentGroup,o=new Un(r.segments,r.children);return this.expandSegmentGroup(this.ngModule,this.config,o,Ln).pipe($n(function(p){return e.createUrlTree(gD(p),e.urlTree.queryParams,e.urlTree.fragment)})).pipe(Ac(function(p){if(p instanceof XI)return e.allowRedirects=!1,e.match(p.urlTree);throw p instanceof hy?e.noMatchError(p):p}))}},{key:"match",value:function(e){var r=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ln).pipe($n(function(f){return r.createUrlTree(gD(f),e.queryParams,e.fragment)})).pipe(Ac(function(f){throw f instanceof hy?r.noMatchError(f):f}))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,r,o){var u=e.segments.length>0?new Un([],Rn({},Ln,e)):e;return new rf(u,r,o)}},{key:"expandSegmentGroup",value:function(e,r,o,u){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(e,r,o).pipe($n(function(f){return new Un([],f)})):this.expandSegment(e,o,r,o.segments,u,!0)}},{key:"expandChildren",value:function(e,r,o){for(var u=this,f=[],p=0,v=Object.keys(o.children);p<v.length;p++){var g=v[p];"primary"===g?f.unshift(g):f.push(g)}return Jr(f).pipe(Dh(function(y){var _=o.children[y],C=qI(r,y);return u.expandSegmentGroup(e,C,_,y).pipe($n(function(w){return{segment:w,outlet:y}}))}),fI(function(y,_){return y[_.outlet]=_.segment,y},{}),function(n,a){var e=arguments.length>=2;return function(r){return r.pipe(n?tf(function(o,u){return n(o,u,r)}):ii,tD(1),e?hI(a):pI(function(){return new lS}))}}())}},{key:"expandSegment",value:function(e,r,o,u,f,p){var v=this;return Jr(o).pipe(Dh(function(g){return v.expandSegmentAgainstRoute(e,r,o,g,u,f,p).pipe(Ac(function(_){if(_ instanceof hy)return sn(null);throw _}))}),Mh(function(g){return!!g}),Ac(function(g,y){if(g instanceof lS||"EmptyError"===g.name){if($I(r,u,f))return sn(new Un([],{}));throw new hy(r)}throw g}))}},{key:"expandSegmentAgainstRoute",value:function(e,r,o,u,f,p,v){return YI(u,r,f,p)?void 0===u.redirectTo?this.matchSegmentAgainstRoute(e,r,u,f,p):v&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,o,u,f,p):wS(r):wS(r)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,r,o,u,f,p){return"**"===u.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,o,u,p):this.expandRegularSegmentAgainstRouteUsingRedirect(e,r,o,u,f,p)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,r,o,u){var f=this,p=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?JI(p):this.lineralizeSegments(o,p).pipe(Xr(function(v){var g=new Un(v,{});return f.expandSegment(e,g,r,v,u,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,r,o,u,f,p){var v=this,g=yS(r,u,f),_=g.consumedSegments,C=g.lastChild,w=g.positionalParamSegments;if(!g.matched)return wS(r);var x=this.applyRedirectCommands(_,u.redirectTo,w);return u.redirectTo.startsWith("/")?JI(x):this.lineralizeSegments(u,x).pipe(Xr(function(E){return v.expandSegment(e,r,o,E.concat(f.slice(C)),p,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(e,r,o,u,f){var p=this;if("**"===o.path)return o.loadChildren?(o._loadedConfig?sn(o._loadedConfig):this.configLoader.load(e.injector,o)).pipe($n(function(E){return o._loadedConfig=E,new Un(u,{})})):sn(new Un(u,{}));var g=yS(r,o,u),_=g.consumedSegments,C=g.lastChild;if(!g.matched)return wS(r);var w=u.slice(C);return this.getChildConfig(e,o,u).pipe(Xr(function(E){var b=E.module,T=E.routes,A=_S(r,_,w,T),M=A.segmentGroup,O=A.slicedSegments,I=new Un(M.segments,M.children);if(0===O.length&&I.hasChildren())return p.expandChildren(b,T,I).pipe($n(function(W){return new Un(_,W)}));if(0===T.length&&0===O.length)return sn(new Un(_,{}));var z=Qa(o)===f;return p.expandSegment(b,I,T,O,z?Ln:f,!0).pipe($n(function(W){return new Un(_.concat(W.segments),W.children)}))}))}},{key:"getChildConfig",value:function(e,r,o){var u=this;return r.children?sn(new pD(r.children,e)):r.loadChildren?void 0!==r._loadedConfig?sn(r._loadedConfig):this.runCanLoadGuards(e.injector,r,o).pipe(Xr(function(f){return f?u.configLoader.load(e.injector,r).pipe($n(function(p){return r._loadedConfig=p,p})):function(n){return new br(function(a){return a.error(rD("Cannot load children because the guard of the route \"path: '".concat(n.path,"'\" returned false")))})}(r)})):sn(new pD([],e))}},{key:"runCanLoadGuards",value:function(e,r,o){var u=this,f=r.canLoad;if(!f||0===f.length)return sn(!0);var p=f.map(function(v){var y,g=e.get(v);if(function(n){return n&&Mc(n.canLoad)}(g))y=g.canLoad(r,o);else{if(!Mc(g))throw new Error("Invalid CanLoad guard");y=g(r,o)}return bu(y)});return sn(p).pipe(fy(),Sa(function(v){if(af(v)){var g=rD('Redirecting to "'.concat(u.urlSerializer.serialize(v),'"'));throw g.url=v,g}}),$n(function(v){return!0===v}))}},{key:"lineralizeSegments",value:function(e,r){for(var o=[],u=r.root;;){if(o=o.concat(u.segments),0===u.numberOfChildren)return sn(o);if(u.numberOfChildren>1||!u.children[Ln])return LU(e.redirectTo);u=u.children[Ln]}}},{key:"applyRedirectCommands",value:function(e,r,o){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),e,o)}},{key:"applyRedirectCreatreUrlTree",value:function(e,r,o,u){var f=this.createSegmentGroup(e,r.root,o,u);return new rf(f,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}},{key:"createQueryParams",value:function(e,r){var o={};return no(e,function(u,f){if("string"==typeof u&&u.startsWith(":")){var v=u.substring(1);o[f]=r[v]}else o[f]=u}),o}},{key:"createSegmentGroup",value:function(e,r,o,u){var f=this,p=this.createSegments(e,r.segments,o,u),v={};return no(r.children,function(g,y){v[y]=f.createSegmentGroup(e,g,o,u)}),new Un(p,v)}},{key:"createSegments",value:function(e,r,o,u){var f=this;return r.map(function(p){return p.path.startsWith(":")?f.findPosParam(e,p,u):f.findOrReturn(p,o)})}},{key:"findPosParam",value:function(e,r,o){var u=o[r.path.substring(1)];if(!u)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(r.path,"'."));return u}},{key:"findOrReturn",value:function(e,r){var f,o=0,u=Pt(r);try{for(u.s();!(f=u.n()).done;){var p=f.value;if(p.path===e.path)return r.splice(o),p;o++}}catch(v){u.e(v)}finally{u.f()}return e}}]),n}();function gD(n){for(var a={},e=0,r=Object.keys(n.children);e<r.length;e++){var o=r[e],f=gD(n.children[o]);(f.segments.length>0||f.hasChildren())&&(a[o]=f)}return function(n){if(1===n.numberOfChildren&&n.children[Ln]){var a=n.children[Ln];return new Un(n.segments.concat(a.segments),a.children)}return n}(new Un(n.segments,a))}var ZI=function n(a){N(this,n),this.path=a,this.route=this.path[this.path.length-1]},SS=function n(a,e){N(this,n),this.component=a,this.route=e};function HU(n,a,e){var r=n._root;return vy(r,a?a._root:null,e,[r.value])}function bS(n,a,e){var r=function(n){if(!n)return null;for(var a=n.parent;a;a=a.parent){var e=a.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(a);return(r?r.module.injector:e).get(n)}function vy(n,a,e,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},u=Ph(a);return n.children.forEach(function(f){UU(f,u[f.value.outlet],e,r.concat([f.value]),o),delete u[f.value.outlet]}),no(u,function(f,p){return gy(f,e.getContext(p),o)}),o}function UU(n,a,e,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},u=n.value,f=a?a.value:null,p=e?e.getContext(n.value.outlet):null;if(f&&u.routeConfig===f.routeConfig){var v=zU(f,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new ZI(r)):(u.data=f.data,u._resolvedData=f._resolvedData),vy(n,a,u.component?p?p.children:null:e,r,o),v&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new SS(p.outlet.component,f))}else f&&gy(a,p,o),o.canActivateChecks.push(new ZI(r)),vy(n,null,u.component?p?p.children:null:e,r,o);return o}function zU(n,a,e){if("function"==typeof e)return e(n,a);switch(e){case"pathParamsChange":return!of(n.url,a.url);case"pathParamsOrQueryParamsChange":return!of(n.url,a.url)||!Su(n.queryParams,a.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lD(n,a)||!Su(n.queryParams,a.queryParams);default:return!lD(n,a)}}function gy(n,a,e){var r=Ph(n),o=n.value;no(r,function(u,f){gy(u,o.component?a?a.children.getContext(f):null:a,e)}),e.canDeactivateChecks.push(new SS(o.component&&a&&a.outlet&&a.outlet.isActivated?a.outlet.component:null,o))}var QU=function n(){N(this,n)};function QI(n){return new br(function(a){return a.error(n)})}var tz=function(){function n(a,e,r,o,u,f){N(this,n),this.rootComponentType=a,this.config=e,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=f}return j(n,[{key:"recognize",value:function(){var e=_S(this.urlTree.root,[],[],this.config.filter(function(p){return void 0===p.redirectTo}),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,e,Ln);if(null===r)return null;var o=new vS([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ln,this.rootComponentType,null,this.urlTree.root,-1,{}),u=new cl(o,r),f=new NI(this.url,u);return this.inheritParamsAndData(f._root),f}},{key:"inheritParamsAndData",value:function(e){var r=this,o=e.value,u=kI(o,this.paramsInheritanceStrategy);o.params=Object.freeze(u.params),o.data=Object.freeze(u.data),e.children.forEach(function(f){return r.inheritParamsAndData(f)})}},{key:"processSegmentGroup",value:function(e,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,r):this.processSegment(e,r,r.segments,o)}},{key:"processChildren",value:function(e,r){for(var o=[],u=0,f=Object.keys(r.children);u<f.length;u++){var p=f[u],v=r.children[p],g=qI(e,p),y=this.processSegmentGroup(g,v,p);if(null===y)return null;o.push.apply(o,On(y))}var _=eL(o);return function(n){n.sort(function(a,e){return a.value.outlet===Ln?-1:e.value.outlet===Ln?1:a.value.outlet.localeCompare(e.value.outlet)})}(_),_}},{key:"processSegment",value:function(e,r,o,u){var p,f=Pt(e);try{for(f.s();!(p=f.n()).done;){var g=this.processSegmentAgainstRoute(p.value,r,o,u);if(null!==g)return g}}catch(y){f.e(y)}finally{f.f()}return $I(r,o,u)?[]:null}},{key:"processSegmentAgainstRoute",value:function(e,r,o,u){if(e.redirectTo||!YI(e,r,o,u))return null;var f,p=[],v=[];if("**"===e.path){var g=o.length>0?SI(o).parameters:{};f=new vS(o,g,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rL(e),Qa(e),e.component,e,tL(r),nL(r)+o.length,iL(e))}else{var y=yS(r,e,o);if(!y.matched)return null;p=y.consumedSegments,v=o.slice(y.lastChild),f=new vS(p,y.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rL(e),Qa(e),e.component,e,tL(r),nL(r)+p.length,iL(e))}var _=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),C=_S(r,p,v,_.filter(function(A){return void 0===A.redirectTo}),this.relativeLinkResolution),w=C.segmentGroup,x=C.slicedSegments;if(0===x.length&&w.hasChildren()){var E=this.processChildren(_,w);return null===E?null:[new cl(f,E)]}if(0===_.length&&0===x.length)return[new cl(f,[])];var b=Qa(e)===u,T=this.processSegment(_,w,x,b?Ln:u);return null===T?null:[new cl(f,T)]}}]),n}();function eL(n){var o,a=[],e=new Set,r=Pt(n);try{var u=function(){var C=o.value;if(!function(n){var a=n.value.routeConfig;return a&&""===a.path&&void 0===a.redirectTo}(C))return a.push(C),"continue";var x,w=a.find(function(E){return C.value.routeConfig===E.value.routeConfig});void 0!==w?((x=w.children).push.apply(x,On(C.children)),e.add(w)):a.push(C)};for(r.s();!(o=r.n()).done;)u()}catch(_){r.e(_)}finally{r.f()}var v,p=Pt(e);try{for(p.s();!(v=p.n()).done;){var g=v.value,y=eL(g.children);a.push(new cl(g.value,y))}}catch(_){p.e(_)}finally{p.f()}return a.filter(function(_){return!e.has(_)})}function tL(n){for(var a=n;a._sourceSegment;)a=a._sourceSegment;return a}function nL(n){for(var a=n,e=a._segmentIndexShift?a._segmentIndexShift:0;a._sourceSegment;)e+=(a=a._sourceSegment)._segmentIndexShift?a._segmentIndexShift:0;return e-1}function rL(n){return n.data||{}}function iL(n){return n.resolve||{}}function mD(n){return nf(function(a){var e=n(a);return e?Jr(e).pipe($n(function(){return a})):sn(a)})}var dz=function(){function n(){N(this,n)}return j(n,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,r){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,r){return e.routeConfig===r.routeConfig}}]),n}(),fz=function(n){ve(e,n);var a=ge(e);function e(){return N(this,e),a.apply(this,arguments)}return e}(dz),yD=new In("ROUTES"),oL=function(){function n(a,e,r,o){N(this,n),this.injector=a,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=o}return j(n,[{key:"load",value:function(e,r){var o=this;if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);var f=this.loadModuleFactory(r.loadChildren).pipe($n(function(p){o.onLoadEndListener&&o.onLoadEndListener(r);var v=p.create(e);return new pD(wI(v.injector.get(yD,void 0,Qt.Self|Qt.Optional)).map(vD),v)}),Ac(function(p){throw r._loader$=void 0,p}));return r._loader$=new EW(f,function(){return new vs}).pipe(dI()),r._loader$}},{key:"loadModuleFactory",value:function(e){var r=this;return bu(e()).pipe(Xr(function(o){return o instanceof fP?sn(o):Jr(r.compiler.compileModuleAsync(o))}))}}]),n}(),hz=function(){function n(){N(this,n)}return j(n,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,r){return e}}]),n}();function vz(n){throw n}function gz(n,a,e){return a.parse("/")}function aL(n,a){return sn(null)}var mz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Fo=function(){var n=function(){function a(e,r,o,u,f,p,v){var g=this;N(this,a),this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new vs,this.errorHandler=vz,this.malformedUriErrorHandler=gz,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:aL,afterPreactivation:aL},this.urlHandlingStrategy=new hz,this.routeReuseStrategy=new fz,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(ol),this.console=f.get(YP);var C=f.get(Di);this.isNgZoneEnabled=C instanceof Di&&Di.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=new rf(new Un([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new oL(f,p,function(x){return g.triggerEvent(new gI(x))},function(x){return g.triggerEvent(new mI(x))}),this.routerState=FI(this.currentUrlTree,this.rootComponentType),this.transitions=new Us({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return j(a,[{key:"browserPageId",get:function(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}},{key:"setupNavigations",value:function(r){var o=this,u=this.events;return r.pipe(tf(function(f){return 0!==f.id}),$n(function(f){return Object.assign(Object.assign({},f),{extractedUrl:o.urlHandlingStrategy.extract(f.rawUrl)})}),nf(function(f){var p=!1,v=!1;return sn(f).pipe(Sa(function(g){o.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:o.lastSuccessfulNavigation?Object.assign(Object.assign({},o.lastSuccessfulNavigation),{previousNavigation:null}):null}}),nf(function(g){var y=o.browserUrlTree.toString(),_=!o.navigated||g.extractedUrl.toString()!==y||y!==o.currentUrlTree.toString();if(("reload"===o.onSameUrlNavigation||_)&&o.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return ES(g.source)&&(o.browserUrlTree=g.extractedUrl),sn(g).pipe(nf(function(I){var B=o.transitions.getValue();return u.next(new nD(I.id,o.serializeUrl(I.extractedUrl),I.source,I.restoredState)),B!==o.transitions.getValue()?bo:Promise.resolve(I)}),function(n,a,e,r){return nf(function(o){return function(n,a,e,r,o){return new NU(n,a,e,r,o).apply()}(n,a,e,o.extractedUrl,r).pipe($n(function(u){return Object.assign(Object.assign({},o),{urlAfterRedirects:u})}))})}(o.ngModule.injector,o.configLoader,o.urlSerializer,o.config),Sa(function(I){o.currentNavigation=Object.assign(Object.assign({},o.currentNavigation),{finalUrl:I.urlAfterRedirects})}),function(n,a,e,r,o){return Xr(function(u){return function(n,a,e,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var f=new tz(n,a,e,r,o,u).recognize();return null===f?QI(new QU):sn(f)}catch(p){return QI(p)}}(n,a,u.urlAfterRedirects,e(u.urlAfterRedirects),r,o).pipe($n(function(f){return Object.assign(Object.assign({},u),{targetSnapshot:f})}))})}(o.rootComponentType,o.config,function(I){return o.serializeUrl(I)},o.paramsInheritanceStrategy,o.relativeLinkResolution),Sa(function(I){if("eager"===o.urlUpdateStrategy){if(!I.extras.skipLocationChange){var B=o.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);o.setBrowserUrl(B,I)}o.browserUrlTree=I.urlAfterRedirects}var z=new OW(I.id,o.serializeUrl(I.extractedUrl),o.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);u.next(z)}));if(_&&o.rawUrlTree&&o.urlHandlingStrategy.shouldProcessUrl(o.rawUrlTree)){var E=g.extractedUrl,b=g.source,T=g.restoredState,A=g.extras,M=new nD(g.id,o.serializeUrl(E),b,T);u.next(M);var O=FI(E,o.rootComponentType).snapshot;return sn(Object.assign(Object.assign({},g),{targetSnapshot:O,urlAfterRedirects:E,extras:Object.assign(Object.assign({},A),{skipLocationChange:!1,replaceUrl:!1})}))}return o.rawUrlTree=g.rawUrl,g.resolve(null),bo}),mD(function(g){var x=g.extras;return o.hooks.beforePreactivation(g.targetSnapshot,{navigationId:g.id,appliedUrlTree:g.extractedUrl,rawUrlTree:g.rawUrl,skipLocationChange:!!x.skipLocationChange,replaceUrl:!!x.replaceUrl})}),Sa(function(g){var y=new PW(g.id,o.serializeUrl(g.extractedUrl),o.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);o.triggerEvent(y)}),$n(function(g){return Object.assign(Object.assign({},g),{guards:HU(g.targetSnapshot,g.currentSnapshot,o.rootContexts)})}),function(n,a){return Xr(function(e){var r=e.targetSnapshot,o=e.currentSnapshot,u=e.guards,f=u.canActivateChecks,p=u.canDeactivateChecks;return 0===p.length&&0===f.length?sn(Object.assign(Object.assign({},e),{guardsResult:!0})):function(n,a,e,r){return Jr(n).pipe(Xr(function(o){return function(n,a,e,r,o){var u=a&&a.routeConfig?a.routeConfig.canDeactivate:null;if(!u||0===u.length)return sn(!0);var f=u.map(function(p){var g,v=bS(p,a,o);if(function(n){return n&&Mc(n.canDeactivate)}(v))g=bu(v.canDeactivate(n,a,e,r));else{if(!Mc(v))throw new Error("Invalid CanDeactivate guard");g=bu(v(n,a,e,r))}return g.pipe(Mh())});return sn(f).pipe(fy())}(o.component,o.route,e,a,r)}),Mh(function(o){return!0!==o},!0))}(p,r,o,n).pipe(Xr(function(v){return v&&function(n){return"boolean"==typeof n}(v)?function(n,a,e,r){return Jr(a).pipe(Dh(function(o){return eD(function(n,a){return null!==n&&a&&a(new kW(n)),sn(!0)}(o.route.parent,r),function(n,a){return null!==n&&a&&a(new GW(n)),sn(!0)}(o.route,r),function(n,a,e){var r=a[a.length-1],o=a.slice(0,a.length-1).reverse().map(function(f){return function(n){var a=n.routeConfig?n.routeConfig.canActivateChild:null;return a&&0!==a.length?{node:n,guards:a}:null}(f)}).filter(function(f){return null!==f}),u=o.map(function(f){return cI(function(){var p=f.guards.map(function(v){var y,g=bS(v,f.node,e);if(function(n){return n&&Mc(n.canActivateChild)}(g))y=bu(g.canActivateChild(r,n));else{if(!Mc(g))throw new Error("Invalid CanActivateChild guard");y=bu(g(r,n))}return y.pipe(Mh())});return sn(p).pipe(fy())})});return sn(u).pipe(fy())}(n,o.path,e),function(n,a,e){var r=a.routeConfig?a.routeConfig.canActivate:null;if(!r||0===r.length)return sn(!0);var o=r.map(function(u){return cI(function(){var p,f=bS(u,a,e);if(function(n){return n&&Mc(n.canActivate)}(f))p=bu(f.canActivate(a,n));else{if(!Mc(f))throw new Error("Invalid CanActivate guard");p=bu(f(a,n))}return p.pipe(Mh())})});return sn(o).pipe(fy())}(n,o.route,e))}),Mh(function(o){return!0!==o},!0))}(r,f,n,a):sn(v)}),$n(function(v){return Object.assign(Object.assign({},e),{guardsResult:v})}))})}(o.ngModule.injector,function(g){return o.triggerEvent(g)}),Sa(function(g){if(af(g.guardsResult)){var y=rD('Redirecting to "'.concat(o.serializeUrl(g.guardsResult),'"'));throw y.url=g.guardsResult,y}var _=new IW(g.id,o.serializeUrl(g.extractedUrl),o.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);o.triggerEvent(_)}),tf(function(g){return!!g.guardsResult||(o.restoreHistory(g),o.cancelNavigationTransition(g,""),!1)}),mD(function(g){if(g.guards.canActivateChecks.length)return sn(g).pipe(Sa(function(y){var _=new LW(y.id,o.serializeUrl(y.extractedUrl),o.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);o.triggerEvent(_)}),nf(function(y){var _=!1;return sn(y).pipe(function(n,a){return Xr(function(e){var r=e.targetSnapshot,o=e.guards.canActivateChecks;if(!o.length)return sn(e);var u=0;return Jr(o).pipe(Dh(function(f){return function(n,a,e,r){return function(n,a,e,r){var o=Object.keys(n);if(0===o.length)return sn({});var u={};return Jr(o).pipe(Xr(function(f){return function(n,a,e,r){var o=bS(n,a,r);return bu(o.resolve?o.resolve(a,e):o(a,e))}(n[f],a,e,r).pipe(Sa(function(p){u[f]=p}))}),tD(1),Xr(function(){return Object.keys(u).length===o.length?sn(u):bo}))}(n._resolve,n,a,r).pipe($n(function(u){return n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),kI(n,e).resolve),null}))}(f.route,r,n,a)}),Sa(function(){return u++}),tD(1),Xr(function(f){return u===o.length?sn(e):bo}))})}(o.paramsInheritanceStrategy,o.ngModule.injector),Sa({next:function(){return _=!0},complete:function(){_||(o.restoreHistory(y),o.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),Sa(function(y){var _=new FW(y.id,o.serializeUrl(y.extractedUrl),o.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);o.triggerEvent(_)}))}),mD(function(g){var x=g.extras;return o.hooks.afterPreactivation(g.targetSnapshot,{navigationId:g.id,appliedUrlTree:g.extractedUrl,rawUrlTree:g.rawUrl,skipLocationChange:!!x.skipLocationChange,replaceUrl:!!x.replaceUrl})}),$n(function(g){var y=function(n,a,e){var r=ly(n,a._root,e?e._root:void 0);return new LI(r,a)}(o.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:y})}),Sa(function(g){o.currentUrlTree=g.urlAfterRedirects,o.rawUrlTree=o.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),o.routerState=g.targetRouterState,"deferred"===o.urlUpdateStrategy&&(g.extras.skipLocationChange||o.setBrowserUrl(o.rawUrlTree,g),o.browserUrlTree=g.urlAfterRedirects)}),function(a,e,r){return $n(function(o){return new _U(e,o.targetRouterState,o.currentRouterState,r).activate(a),o})}(o.rootContexts,o.routeReuseStrategy,function(g){return o.triggerEvent(g)}),Sa({next:function(){p=!0},complete:function(){p=!0}}),function(n){return oi(function(a,e){try{a.subscribe(e)}finally{e.add(n)}})}(function(){var g;if(!p&&!v){var y="Navigation ID ".concat(f.id," is not equal to the current navigation id ").concat(o.navigationId);o.cancelNavigationTransition(f,y)}(null===(g=o.currentNavigation)||void 0===g?void 0:g.id)===f.id&&(o.currentNavigation=null)}),Ac(function(g){if(v=!0,function(n){return n&&n[_I]}(g)){var y=af(g.url);y||(o.navigated=!0,o.restoreHistory(f,!0));var _=new vI(f.id,o.serializeUrl(f.extractedUrl),g.message);u.next(_),y?setTimeout(function(){var w=o.urlHandlingStrategy.merge(g.url,o.rawUrlTree),x={skipLocationChange:f.extras.skipLocationChange,replaceUrl:"eager"===o.urlUpdateStrategy||ES(f.source)};o.scheduleNavigation(w,"imperative",null,x,{resolve:f.resolve,reject:f.reject,promise:f.promise})},0):f.resolve(!1)}else{o.restoreHistory(f,!0);var C=new MW(f.id,o.serializeUrl(f.extractedUrl),g);u.next(C);try{f.resolve(o.errorHandler(g))}catch(w){f.reject(w)}}return bo}))}))}},{key:"resetRootComponentType",value:function(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}},{key:"setTransition",value:function(r){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),r))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var r=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(o){var u="popstate"===o.type?"popstate":"hashchange";"popstate"===u&&setTimeout(function(){var f,p={replaceUrl:!0},v=(null===(f=o.state)||void 0===f?void 0:f.navigationId)?o.state:null;if(v){var g=Object.assign({},v);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(p.state=g)}var y=r.parseUrl(o.url);r.scheduleNavigation(y,u,v,p)},0)}))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(r){this.events.next(r)}},{key:"resetConfig",value:function(r){jI(r),this.config=r.map(vD),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=o.relativeTo,f=o.queryParams,p=o.fragment,v=o.queryParamsHandling,g=o.preserveFragment,y=u||this.routerState.root,_=g?this.currentUrlTree.fragment:p,C=null;switch(v){case"merge":C=Object.assign(Object.assign({},this.currentUrlTree.queryParams),f);break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=f||null}return null!==C&&(C=this.removeEmptyProps(C)),dU(y,this.currentUrlTree,r,C,null!=_?_:null)}},{key:"navigateByUrl",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},u=af(r)?r:this.parseUrl(r),f=this.urlHandlingStrategy.merge(u,this.rawUrlTree);return this.scheduleNavigation(f,"imperative",null,o)}},{key:"navigate",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return _z(r),this.navigateByUrl(this.createUrlTree(r,o),o)}},{key:"serializeUrl",value:function(r){return this.urlSerializer.serialize(r)}},{key:"parseUrl",value:function(r){var o;try{o=this.urlSerializer.parse(r)}catch(u){o=this.malformedUriErrorHandler(u,this.urlSerializer,r)}return o}},{key:"isActive",value:function(r,o){var u;if(u=!0===o?Object.assign({},mz):!1===o?Object.assign({},yz):o,af(r))return EI(this.currentUrlTree,r,u);var f=this.parseUrl(r);return EI(this.currentUrlTree,f,u)}},{key:"removeEmptyProps",value:function(r){return Object.keys(r).reduce(function(o,u){var f=r[u];return null!=f&&(o[u]=f),o},{})}},{key:"processNavigations",value:function(){var r=this;this.navigations.subscribe(function(o){r.navigated=!0,r.lastSuccessfulId=o.id,r.currentPageId=o.targetPageId,r.events.next(new ay(o.id,r.serializeUrl(o.extractedUrl),r.serializeUrl(r.currentUrlTree))),r.lastSuccessfulNavigation=r.currentNavigation,o.resolve(!0)},function(o){r.console.warn("Unhandled Navigation Error: ".concat(o))})}},{key:"scheduleNavigation",value:function(r,o,u,f,p){var v,g,y;if(this.disposed)return Promise.resolve(!1);var b,T,A,_=this.transitions.value,C=ES(o)&&_&&!ES(_.source),w=_.rawUrl.toString()===r.toString(),x=_.id===(null===(v=this.currentNavigation)||void 0===v?void 0:v.id);if(C&&w&&x)return Promise.resolve(!0);p?(b=p.resolve,T=p.reject,A=p.promise):A=new Promise(function(B,z){b=B,T=z});var O,M=++this.navigationId;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(u=this.location.getState()),O=u&&u.\u0275routerPageId?u.\u0275routerPageId:f.replaceUrl||f.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):O=0,this.setTransition({id:M,targetPageId:O,source:o,restoredState:u,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:f,resolve:b,reject:T,promise:A,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),A.catch(function(B){return Promise.reject(B)})}},{key:"setBrowserUrl",value:function(r,o){var u=this.urlSerializer.serialize(r),f=Object.assign(Object.assign({},o.extras.state),this.generateNgRouterState(o.id,o.targetPageId));this.location.isCurrentPathEqualTo(u)||o.extras.replaceUrl?this.location.replaceState(u,"",f):this.location.go(u,"",f)}},{key:"restoreHistory",value:function(r){var u,f,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("computed"===this.canceledNavigationResolution){var p=this.currentPageId-r.targetPageId,v="popstate"===r.source||"eager"===this.urlUpdateStrategy||this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl);v&&0!==p?this.location.historyGo(p):this.currentUrlTree===(null===(f=this.currentNavigation)||void 0===f?void 0:f.finalUrl)&&0===p&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(r),this.resetUrlToCurrentUrlTree())}},{key:"resetState",value:function(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(r,o){var u=new vI(r.id,this.serializeUrl(r.extractedUrl),o);this.triggerEvent(u),r.resolve(!1)}},{key:"generateNgRouterState",value:function(r,o){return"computed"===this.canceledNavigationResolution?{navigationId:r,"\u0275routerPageId":o}:{navigationId:r}}}]),a}();return n.\u0275fac=function(e){Bm()},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}();function _z(n){for(var a=0;a<n.length;a++){var e=n[a];if(null==e)throw new Error("The requested path contains ".concat(e," segment at index ").concat(a))}}function ES(n){return"imperative"!==n}var _D=function(){var n=function(){function a(e,r,o,u,f){N(this,a),this.router=e,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=f,this.commands=null,this.onChanges=new vs,this.setTabIndexIfNotOnNativeEl("0")}return j(a,[{key:"setTabIndexIfNotOnNativeEl",value:function(r){if(null==this.tabIndexAttribute){var o=this.renderer,u=this.el.nativeElement;null!==r?o.setAttribute(u,"tabindex",r):o.removeAttribute(u,"tabindex")}}},{key:"ngOnChanges",value:function(r){this.onChanges.next(this)}},{key:"routerLink",set:function(r){null!=r?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}},{key:"onClick",value:function(){if(null===this.urlTree)return!0;var r={skipLocationChange:Ih(this.skipLocationChange),replaceUrl:Ih(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!0}},{key:"urlTree",get:function(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ih(this.preserveFragment)})}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(Fo),st(zs),Kl("tabindex"),st(N0),st(wu))},n.\u0275dir=Gi({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,r){1&e&&ae("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[jo]}),n}(),es=function(){var n=function(){function a(e,r,o){var u=this;N(this,a),this.router=e,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new vs,this.subscription=e.events.subscribe(function(f){f instanceof ay&&u.updateTargetUrlAndHref()})}return j(a,[{key:"routerLink",set:function(r){this.commands=null!=r?Array.isArray(r)?r:[r]:null}},{key:"ngOnChanges",value:function(r){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(r,o,u,f,p){if(0!==r||o||u||f||p||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;var v={skipLocationChange:Ih(this.skipLocationChange),replaceUrl:Ih(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,v),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}},{key:"urlTree",get:function(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ih(this.preserveFragment)})}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(Fo),st(zs),st(Th))},n.\u0275dir=Gi({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,r){1&e&&ae("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&e&&Om("target",r.target)("href",r.href,li)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[jo]}),n}();function Ih(n){return""===n||!!n}var sL=function(){var n=function(){function a(e,r,o,u,f,p){var v=this;N(this,a),this.router=e,this.element=r,this.renderer=o,this.cdr=u,this.link=f,this.linkWithHref=p,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ee,this.routerEventsSubscription=e.events.subscribe(function(g){g instanceof ay&&v.update()})}return j(a,[{key:"ngAfterContentInit",value:function(){var r=this;sn(this.links.changes,this.linksWithHrefs.changes,sn(null)).pipe(Jc()).subscribe(function(o){r.update(),r.subscribeToEachLinkOnChanges()})}},{key:"subscribeToEachLinkOnChanges",value:function(){var o,r=this;null===(o=this.linkInputChangesSubscription)||void 0===o||o.unsubscribe();var u=[].concat(On(this.links.toArray()),On(this.linksWithHrefs.toArray()),[this.link,this.linkWithHref]).filter(function(f){return!!f}).map(function(f){return f.onChanges});this.linkInputChangesSubscription=Jr(u).pipe(Jc()).subscribe(function(f){r.isActive!==r.isLinkActive(r.router)(f)&&r.update()})}},{key:"routerLinkActive",set:function(r){var o=Array.isArray(r)?r:r.split(" ");this.classes=o.filter(function(u){return!!u})}},{key:"ngOnChanges",value:function(r){this.update()}},{key:"ngOnDestroy",value:function(){var r;this.routerEventsSubscription.unsubscribe(),null===(r=this.linkInputChangesSubscription)||void 0===r||r.unsubscribe()}},{key:"update",value:function(){var r=this;!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(function(){var o=r.hasActiveLinks();r.isActive!==o&&(r.isActive=o,r.cdr.markForCheck(),r.classes.forEach(function(u){o?r.renderer.addClass(r.element.nativeElement,u):r.renderer.removeClass(r.element.nativeElement,u)}),r.isActiveChange.emit(o))})}},{key:"isLinkActive",value:function(r){var o=function(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return function(u){return!!u.urlTree&&r.isActive(u.urlTree,o)}}},{key:"hasActiveLinks",value:function(){var r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.linkWithHref&&r(this.linkWithHref)||this.links.some(r)||this.linksWithHrefs.some(r)}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(Fo),st(wu),st(N0),st(K0),st(_D,8),st(es,8))},n.\u0275dir=Gi({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(e,r,o){var u;1&e&&($m(o,_D,5),$m(o,es,5)),2&e&&(Ym(u=Xm())&&(r.links=u),Ym(u=Xm())&&(r.linksWithHrefs=u))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[jo]}),n}(),uL=function n(){N(this,n)},wz=function(){function n(){N(this,n)}return j(n,[{key:"preload",value:function(e,r){return r().pipe(Ac(function(){return sn(null)}))}}]),n}(),lL=function(){function n(){N(this,n)}return j(n,[{key:"preload",value:function(e,r){return sn(null)}}]),n}(),cL=function(){var n=function(){function a(e,r,o,u){N(this,a),this.router=e,this.injector=o,this.preloadingStrategy=u,this.loader=new oL(o,r,function(g){return e.triggerEvent(new gI(g))},function(g){return e.triggerEvent(new mI(g))})}return j(a,[{key:"setUpPreloading",value:function(){var r=this;this.subscription=this.router.events.pipe(tf(function(o){return o instanceof ay}),Dh(function(){return r.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var r=this.injector.get(ol);return this.processRoutes(r,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(r,o){var p,u=[],f=Pt(o);try{for(f.s();!(p=f.n()).done;){var v=p.value;if(v.loadChildren&&!v.canLoad&&v._loadedConfig){var g=v._loadedConfig;u.push(this.processRoutes(g.module,g.routes))}else v.loadChildren&&!v.canLoad?u.push(this.preloadConfig(r,v)):v.children&&u.push(this.processRoutes(r,v.children))}}catch(y){f.e(y)}finally{f.f()}return Jr(u).pipe(Jc(),$n(function(y){}))}},{key:"preloadConfig",value:function(r,o){var u=this;return this.preloadingStrategy.preload(o,function(){return(o._loadedConfig?sn(o._loadedConfig):u.loader.load(r.injector,o)).pipe(Xr(function(p){return o._loadedConfig=p,u.processRoutes(p.module,p.routes)}))})}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(Fo),Ot(q0),Ot(Ui),Ot(uL))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),CD=function(){var n=function(){function a(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};N(this,a),this.router=e,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}return j(a,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var r=this;return this.router.events.subscribe(function(o){o instanceof nD?(r.store[r.lastId]=r.viewportScroller.getScrollPosition(),r.lastSource=o.navigationTrigger,r.restoredId=o.restoredState?o.restoredState.navigationId:0):o instanceof ay&&(r.lastId=o.id,r.scheduleScrollEvent(o,r.router.parseUrl(o.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var r=this;return this.router.events.subscribe(function(o){o instanceof yI&&(o.position?"top"===r.options.scrollPositionRestoration?r.viewportScroller.scrollToPosition([0,0]):"enabled"===r.options.scrollPositionRestoration&&r.viewportScroller.scrollToPosition(o.position):o.anchor&&"enabled"===r.options.anchorScrolling?r.viewportScroller.scrollToAnchor(o.anchor):"disabled"!==r.options.scrollPositionRestoration&&r.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(r,o){this.router.triggerEvent(new yI(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),a}();return n.\u0275fac=function(e){Bm()},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),sf=new In("ROUTER_CONFIGURATION"),dL=new In("ROUTER_FORROOT_GUARD"),Sz=[TT,{provide:DI,useClass:AI},{provide:Fo,useFactory:function(n,a,e,r,o,u){var f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},p=arguments.length>7?arguments[7]:void 0,v=arguments.length>8?arguments[8]:void 0,g=new Fo(null,n,a,e,r,o,wI(u));return p&&(g.urlHandlingStrategy=p),v&&(g.routeReuseStrategy=v),Az(f,g),f.enableTracing&&g.events.subscribe(function(y){var _,C;null===(_=console.group)||void 0===_||_.call(console,"Router Event: ".concat(y.constructor.name)),console.log(y.toString()),console.log(y),null===(C=console.groupEnd)||void 0===C||C.call(console)}),g},deps:[DI,py,TT,Ui,q0,yD,sf,[function n(){N(this,n)},new qa],[function n(){N(this,n)},new qa]]},py,{provide:zs,useFactory:function(n){return n.routerState.root},deps:[Fo]},cL,lL,wz,{provide:sf,useValue:{enableTracing:!1}}];function bz(){return new e1("Router",Fo)}var Ez=function(){var n=function(){function a(e,r){N(this,a)}return j(a,null,[{key:"forRoot",value:function(r,o){return{ngModule:a,providers:[Sz,fL(r),{provide:dL,useFactory:Tz,deps:[[Fo,new qa,new tc]]},{provide:sf,useValue:o||{}},{provide:Th,useFactory:Rz,deps:[ef,[new Rd(RT),new qa],sf]},{provide:CD,useFactory:xz,deps:[Fo,dV,sf]},{provide:uL,useExisting:o&&o.preloadingStrategy?o.preloadingStrategy:lL},{provide:e1,multi:!0,useFactory:bz},[wD,{provide:z0,multi:!0,useFactory:Oz,deps:[wD]},{provide:pL,useFactory:Pz,deps:[wD]},{provide:KP,multi:!0,useExisting:pL}]]}}},{key:"forChild",value:function(r){return{ngModule:a,providers:[fL(r)]}}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(dL,8),Ot(Fo,8))},n.\u0275mod=Ci({type:n}),n.\u0275inj=Vo({}),n}();function xz(n,a,e){return e.scrollOffset&&a.setOffset(e.scrollOffset),new CD(n,a,e)}function Rz(n,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.useHash?new $B(n,a):new C1(n,a)}function Tz(n){return"guarded"}function fL(n){return[{provide:mg,multi:!0,useValue:n},{provide:yD,multi:!0,useValue:n}]}function Az(n,a){n.errorHandler&&(a.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(a.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(a.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(a.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(a.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(a.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(a.canceledNavigationResolution=n.canceledNavigationResolution)}var wD=function(){var n=function(){function a(e){N(this,a),this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new vs}return j(a,[{key:"appInitializer",value:function(){var r=this;return this.injector.get(qB,Promise.resolve(null)).then(function(){if(r.destroyed)return Promise.resolve(!0);var u=null,f=new Promise(function(g){return u=g}),p=r.injector.get(Fo),v=r.injector.get(sf);return"disabled"===v.initialNavigation?(p.setUpLocationChangeListener(),u(!0)):"enabled"===v.initialNavigation||"enabledBlocking"===v.initialNavigation?(p.hooks.afterPreactivation=function(){return r.initNavigation?sn(null):(r.initNavigation=!0,u(!0),r.resultOfPreactivationDone)},p.initialNavigation()):u(!0),f})}},{key:"bootstrapListener",value:function(r){var o=this.injector.get(sf),u=this.injector.get(cL),f=this.injector.get(CD),p=this.injector.get(Fo),v=this.injector.get(Qm);r===v.components[0]&&(("enabledNonBlocking"===o.initialNavigation||void 0===o.initialNavigation)&&p.initialNavigation(),u.setUpPreloading(),f.init(),p.resetRootComponentType(v.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"ngOnDestroy",value:function(){this.destroyed=!0}}]),a}();return n.\u0275fac=function(e){return new(e||n)(Ot(Ui))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}();function Oz(n){return n.appInitializer.bind(n)}function Pz(n){return n.bootstrapListener.bind(n)}var pL=new In("Router Initializer");function F(n,a,e,r){var f,o=arguments.length,u=o<3?a:null===r?r=Object.getOwnPropertyDescriptor(a,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,a,e,r);else for(var p=n.length-1;p>=0;p--)(f=n[p])&&(u=(o<3?f(u):o>3?f(a,e,u):f(a,e))||u);return o>3&&u&&Object.defineProperty(a,e,u),u}function k(n,a){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,a)}var bD,uf=pe(564),Me=bD=function(){function n(){N(this,n)}return j(n,[{key:"hasChildColumns",value:function(){return!(!(this.childColumns&&this.childColumns.length>0)||1===this.childColumns.length&&this.childColumns.first===this)}},{key:"toColDef",value:function(){var e=this.createColDefFromGridColumn(this);return this.hasChildColumns()&&(e.children=this.getChildColDefs(this.childColumns)),e}},{key:"getChildColDefs",value:function(e){return e.filter(function(r){return!r.hasChildColumns()}).map(function(r){return r.toColDef()})}},{key:"createColDefFromGridColumn",value:function(e){var o=function(n,a){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&a.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(e[r[o]]=n[r[o]])}return e}(e,["childColumns"]);return o}}]),n}();Me.\u0275fac=function(a){return new(a||Me)},Me.\u0275cmp=Er({type:Me,selectors:[["ag-grid-column"]],contentQueries:function(a,e,r){var o;1&a&&$m(r,bD,4),2&a&&Ym(o=Xm())&&(e.childColumns=o)},inputs:{filterFramework:"filterFramework",filterParams:"filterParams",floatingFilterComponent:"floatingFilterComponent",floatingFilterComponentParams:"floatingFilterComponentParams",floatingFilterComponentFramework:"floatingFilterComponentFramework",filter:"filter",headerName:"headerName",headerValueGetter:"headerValueGetter",headerTooltip:"headerTooltip",headerClass:"headerClass",suppressHeaderKeyboardEvent:"suppressHeaderKeyboardEvent",columnGroupShow:"columnGroupShow",toolPanelClass:"toolPanelClass",suppressColumnsToolPanel:"suppressColumnsToolPanel",suppressFiltersToolPanel:"suppressFiltersToolPanel",tooltipComponent:"tooltipComponent",tooltipComponentFramework:"tooltipComponentFramework",tooltipComponentParams:"tooltipComponentParams",children:"children",groupId:"groupId",openByDefault:"openByDefault",marryChildren:"marryChildren",headerGroupComponent:"headerGroupComponent",headerGroupComponentFramework:"headerGroupComponentFramework",headerGroupComponentParams:"headerGroupComponentParams",colId:"colId",field:"field",type:"type",valueGetter:"valueGetter",valueFormatter:"valueFormatter",refData:"refData",keyCreator:"keyCreator",equals:"equals",tooltipField:"tooltipField",tooltipValueGetter:"tooltipValueGetter",checkboxSelection:"checkboxSelection",icons:"icons",suppressNavigable:"suppressNavigable",suppressKeyboardEvent:"suppressKeyboardEvent",suppressPaste:"suppressPaste",suppressFillHandle:"suppressFillHandle",hide:"hide",initialHide:"initialHide",lockVisible:"lockVisible",lockPosition:"lockPosition",suppressMovable:"suppressMovable",editable:"editable",valueSetter:"valueSetter",valueParser:"valueParser",cellEditor:"cellEditor",cellEditorFramework:"cellEditorFramework",cellEditorParams:"cellEditorParams",cellEditorSelector:"cellEditorSelector",singleClickEdit:"singleClickEdit",newValueHandler:"newValueHandler",cellEditorPopup:"cellEditorPopup",cellEditorPopupPosition:"cellEditorPopupPosition",onCellValueChanged:"onCellValueChanged",onCellClicked:"onCellClicked",onCellDoubleClicked:"onCellDoubleClicked",onCellContextMenu:"onCellContextMenu",getQuickFilterText:"getQuickFilterText",filterValueGetter:"filterValueGetter",floatingFilter:"floatingFilter",headerComponent:"headerComponent",headerComponentFramework:"headerComponentFramework",headerComponentParams:"headerComponentParams",menuTabs:"menuTabs",columnsMenuParams:"columnsMenuParams",suppressMenu:"suppressMenu",headerCheckboxSelection:"headerCheckboxSelection",headerCheckboxSelectionFilteredOnly:"headerCheckboxSelectionFilteredOnly",chartDataType:"chartDataType",pinned:"pinned",initialPinned:"initialPinned",lockPinned:"lockPinned",pinnedRowCellRenderer:"pinnedRowCellRenderer",pinnedRowCellRendererFramework:"pinnedRowCellRendererFramework",pinnedRowCellRendererParams:"pinnedRowCellRendererParams",pinnedRowValueFormatter:"pinnedRowValueFormatter",pivot:"pivot",initialPivot:"initialPivot",pivotIndex:"pivotIndex",initialPivotIndex:"initialPivotIndex",pivotComparator:"pivotComparator",enablePivot:"enablePivot",cellStyle:"cellStyle",cellClass:"cellClass",cellClassRules:"cellClassRules",cellRenderer:"cellRenderer",cellRendererFramework:"cellRendererFramework",cellRendererParams:"cellRendererParams",cellRendererSelector:"cellRendererSelector",autoHeight:"autoHeight",wrapText:"wrapText",enableCellChangeFlash:"enableCellChangeFlash",suppressCellFlash:"suppressCellFlash",rowDrag:"rowDrag",rowDragText:"rowDragText",dndSource:"dndSource",dndSourceOnRowDrag:"dndSourceOnRowDrag",rowGroup:"rowGroup",initialRowGroup:"initialRowGroup",rowGroupIndex:"rowGroupIndex",initialRowGroupIndex:"initialRowGroupIndex",enableRowGroup:"enableRowGroup",enableValue:"enableValue",aggFunc:"aggFunc",initialAggFunc:"initialAggFunc",allowedAggFuncs:"allowedAggFuncs",showRowGroup:"showRowGroup",sortable:"sortable",sort:"sort",initialSort:"initialSort",sortIndex:"sortIndex",initialSortIndex:"initialSortIndex",sortingOrder:"sortingOrder",comparator:"comparator",unSortIcon:"unSortIcon",sortedAt:"sortedAt",colSpan:"colSpan",rowSpan:"rowSpan",width:"width",initialWidth:"initialWidth",minWidth:"minWidth",maxWidth:"maxWidth",flex:"flex",initialFlex:"initialFlex",resizable:"resizable",suppressSizeToFit:"suppressSizeToFit",suppressAutoSize:"suppressAutoSize"},decls:0,vars:0,template:function(a,e){},encapsulation:2}),F([Jl(bD),k("design:type",oT)],Me.prototype,"childColumns",void 0),F([V(),k("design:type",Object)],Me.prototype,"filterFramework",void 0),F([V(),k("design:type",Object)],Me.prototype,"filterParams",void 0),F([V(),k("design:type",Object)],Me.prototype,"floatingFilterComponent",void 0),F([V(),k("design:type",Object)],Me.prototype,"floatingFilterComponentParams",void 0),F([V(),k("design:type",Object)],Me.prototype,"floatingFilterComponentFramework",void 0),F([V(),k("design:type",Object)],Me.prototype,"filter",void 0),F([V(),k("design:type",String)],Me.prototype,"headerName",void 0),F([V(),k("design:type",Object)],Me.prototype,"headerValueGetter",void 0),F([V(),k("design:type",String)],Me.prototype,"headerTooltip",void 0),F([V(),k("design:type",Object)],Me.prototype,"headerClass",void 0),F([V(),k("design:type",Function)],Me.prototype,"suppressHeaderKeyboardEvent",void 0),F([V(),k("design:type",String)],Me.prototype,"columnGroupShow",void 0),F([V(),k("design:type",Object)],Me.prototype,"toolPanelClass",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"suppressColumnsToolPanel",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"suppressFiltersToolPanel",void 0),F([V(),k("design:type",Object)],Me.prototype,"tooltipComponent",void 0),F([V(),k("design:type",Object)],Me.prototype,"tooltipComponentFramework",void 0),F([V(),k("design:type",Object)],Me.prototype,"tooltipComponentParams",void 0),F([V(),k("design:type",Array)],Me.prototype,"children",void 0),F([V(),k("design:type",String)],Me.prototype,"groupId",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"openByDefault",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"marryChildren",void 0),F([V(),k("design:type",Object)],Me.prototype,"headerGroupComponent",void 0),F([V(),k("design:type",Object)],Me.prototype,"headerGroupComponentFramework",void 0),F([V(),k("design:type",Object)],Me.prototype,"headerGroupComponentParams",void 0),F([V(),k("design:type",String)],Me.prototype,"colId",void 0),F([V(),k("design:type",String)],Me.prototype,"field",void 0),F([V(),k("design:type",Object)],Me.prototype,"type",void 0),F([V(),k("design:type",Object)],Me.prototype,"valueGetter",void 0),F([V(),k("design:type",Object)],Me.prototype,"valueFormatter",void 0),F([V(),k("design:type",Object)],Me.prototype,"refData",void 0),F([V(),k("design:type",Function)],Me.prototype,"keyCreator",void 0),F([V(),k("design:type",Function)],Me.prototype,"equals",void 0),F([V(),k("design:type",String)],Me.prototype,"tooltipField",void 0),F([V(),k("design:type",Function)],Me.prototype,"tooltipValueGetter",void 0),F([V(),k("design:type",Object)],Me.prototype,"checkboxSelection",void 0),F([V(),k("design:type",Object)],Me.prototype,"icons",void 0),F([V(),k("design:type",Object)],Me.prototype,"suppressNavigable",void 0),F([V(),k("design:type",Function)],Me.prototype,"suppressKeyboardEvent",void 0),F([V(),k("design:type",Object)],Me.prototype,"suppressPaste",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"suppressFillHandle",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"hide",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"initialHide",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"lockVisible",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"lockPosition",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"suppressMovable",void 0),F([V(),k("design:type",Object)],Me.prototype,"editable",void 0),F([V(),k("design:type",Object)],Me.prototype,"valueSetter",void 0),F([V(),k("design:type",Object)],Me.prototype,"valueParser",void 0),F([V(),k("design:type",Object)],Me.prototype,"cellEditor",void 0),F([V(),k("design:type",Object)],Me.prototype,"cellEditorFramework",void 0),F([V(),k("design:type",Object)],Me.prototype,"cellEditorParams",void 0),F([V(),k("design:type",Function)],Me.prototype,"cellEditorSelector",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"singleClickEdit",void 0),F([V(),k("design:type",Function)],Me.prototype,"newValueHandler",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"cellEditorPopup",void 0),F([V(),k("design:type",String)],Me.prototype,"cellEditorPopupPosition",void 0),F([V(),k("design:type",Function)],Me.prototype,"onCellValueChanged",void 0),F([V(),k("design:type",Function)],Me.prototype,"onCellClicked",void 0),F([V(),k("design:type",Function)],Me.prototype,"onCellDoubleClicked",void 0),F([V(),k("design:type",Function)],Me.prototype,"onCellContextMenu",void 0),F([V(),k("design:type",Function)],Me.prototype,"getQuickFilterText",void 0),F([V(),k("design:type",Object)],Me.prototype,"filterValueGetter",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"floatingFilter",void 0),F([V(),k("design:type",Object)],Me.prototype,"headerComponent",void 0),F([V(),k("design:type",Object)],Me.prototype,"headerComponentFramework",void 0),F([V(),k("design:type",Object)],Me.prototype,"headerComponentParams",void 0),F([V(),k("design:type",Array)],Me.prototype,"menuTabs",void 0),F([V(),k("design:type",Object)],Me.prototype,"columnsMenuParams",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"suppressMenu",void 0),F([V(),k("design:type",Object)],Me.prototype,"headerCheckboxSelection",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"headerCheckboxSelectionFilteredOnly",void 0),F([V(),k("design:type",String)],Me.prototype,"chartDataType",void 0),F([V(),k("design:type",Object)],Me.prototype,"pinned",void 0),F([V(),k("design:type",Object)],Me.prototype,"initialPinned",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"lockPinned",void 0),F([V(),k("design:type",Object)],Me.prototype,"pinnedRowCellRenderer",void 0),F([V(),k("design:type",Object)],Me.prototype,"pinnedRowCellRendererFramework",void 0),F([V(),k("design:type",Object)],Me.prototype,"pinnedRowCellRendererParams",void 0),F([V(),k("design:type",Object)],Me.prototype,"pinnedRowValueFormatter",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"pivot",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"initialPivot",void 0),F([V(),k("design:type",Number)],Me.prototype,"pivotIndex",void 0),F([V(),k("design:type",Number)],Me.prototype,"initialPivotIndex",void 0),F([V(),k("design:type",Function)],Me.prototype,"pivotComparator",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"enablePivot",void 0),F([V(),k("design:type",Object)],Me.prototype,"cellStyle",void 0),F([V(),k("design:type",Object)],Me.prototype,"cellClass",void 0),F([V(),k("design:type",Object)],Me.prototype,"cellClassRules",void 0),F([V(),k("design:type",Object)],Me.prototype,"cellRenderer",void 0),F([V(),k("design:type",Object)],Me.prototype,"cellRendererFramework",void 0),F([V(),k("design:type",Object)],Me.prototype,"cellRendererParams",void 0),F([V(),k("design:type",Function)],Me.prototype,"cellRendererSelector",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"autoHeight",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"wrapText",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"enableCellChangeFlash",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"suppressCellFlash",void 0),F([V(),k("design:type",Object)],Me.prototype,"rowDrag",void 0),F([V(),k("design:type",Function)],Me.prototype,"rowDragText",void 0),F([V(),k("design:type",Object)],Me.prototype,"dndSource",void 0),F([V(),k("design:type",Function)],Me.prototype,"dndSourceOnRowDrag",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"rowGroup",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"initialRowGroup",void 0),F([V(),k("design:type",Number)],Me.prototype,"rowGroupIndex",void 0),F([V(),k("design:type",Number)],Me.prototype,"initialRowGroupIndex",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"enableRowGroup",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"enableValue",void 0),F([V(),k("design:type",Object)],Me.prototype,"aggFunc",void 0),F([V(),k("design:type",Object)],Me.prototype,"initialAggFunc",void 0),F([V(),k("design:type",Array)],Me.prototype,"allowedAggFuncs",void 0),F([V(),k("design:type",Object)],Me.prototype,"showRowGroup",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"sortable",void 0),F([V(),k("design:type",String)],Me.prototype,"sort",void 0),F([V(),k("design:type",String)],Me.prototype,"initialSort",void 0),F([V(),k("design:type",Number)],Me.prototype,"sortIndex",void 0),F([V(),k("design:type",Number)],Me.prototype,"initialSortIndex",void 0),F([V(),k("design:type",Array)],Me.prototype,"sortingOrder",void 0),F([V(),k("design:type",Function)],Me.prototype,"comparator",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"unSortIcon",void 0),F([V(),k("design:type",Number)],Me.prototype,"sortedAt",void 0),F([V(),k("design:type",Function)],Me.prototype,"colSpan",void 0),F([V(),k("design:type",Function)],Me.prototype,"rowSpan",void 0),F([V(),k("design:type",Number)],Me.prototype,"width",void 0),F([V(),k("design:type",Number)],Me.prototype,"initialWidth",void 0),F([V(),k("design:type",Number)],Me.prototype,"minWidth",void 0),F([V(),k("design:type",Number)],Me.prototype,"maxWidth",void 0),F([V(),k("design:type",Number)],Me.prototype,"flex",void 0),F([V(),k("design:type",Number)],Me.prototype,"initialFlex",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"resizable",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"suppressSizeToFit",void 0),F([V(),k("design:type",Boolean)],Me.prototype,"suppressAutoSize",void 0);var RD,ED=function(){var n=function(a){ve(r,a);var e=ge(r);function r(o){var u;return N(this,r),(u=e.call(this))._ngZone=o,u}return j(r,[{key:"setEmitterUsedCallback",value:function(u){this.isEmitterUsed=u}},{key:"setTimeout",value:function(u,f){this._ngZone?this._ngZone.runOutsideAngular(function(){window.setTimeout(function(){u()},f)}):window.setTimeout(function(){u()},f)}},{key:"setInterval",value:function(u,f){var p=this;return new uf.j_S(function(v){p._ngZone?p._ngZone.runOutsideAngular(function(){v(window.setInterval(function(){u()},f))}):v(window.setInterval(function(){u()},f))})}},{key:"addEventListener",value:function(u,f,p,v){this.isOutsideAngular(f)&&this._ngZone?this._ngZone.runOutsideAngular(function(){u.addEventListener(f,p,v)}):u.addEventListener(f,p,v)}},{key:"dispatchEvent",value:function(u,f){var p=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isOutsideAngular(u)?this._ngZone?this._ngZone.runOutsideAngular(f):f():(this.isEmitterUsed(u)||p)&&(!Di.isInAngularZone()&&this._ngZone?this._ngZone.run(f):f())}}]),r}(uf.vA3);return n.\u0275fac=function(e){return new(e||n)(Ot(Di))},n.\u0275prov=un({token:n,factory:function(e){return n.\u0275fac(e)}}),n=F([k("design:paramtypes",[Di])],n)}(),xD=function(){var n=function(a){ve(r,a);var e=ge(r);function r(){return N(this,r),e.apply(this,arguments)}return j(r,[{key:"setViewContainerRef",value:function(u){this.viewContainerRef=u}},{key:"setComponentFactoryResolver",value:function(u){this.componentFactoryResolver=u}},{key:"createWrapper",value:function(u){var f=this,p=function(g){ve(_,g);var y=ge(_);function _(){return N(this,_),y.apply(this,arguments)}return j(_,[{key:"init",value:function(w){we(ze(_.prototype),"init",this).call(this,w),this._componentRef.changeDetectorRef.detectChanges()}},{key:"createComponent",value:function(){return f.createComponent(u)}},{key:"hasMethod",value:function(w){return null!=v.getFrameworkComponentInstance()[w]}},{key:"callMethod",value:function(w,x){var E=this.getFrameworkComponentInstance();return v.getFrameworkComponentInstance()[w].apply(E,x)}},{key:"addMethod",value:function(w,x){v[w]=x}}]),_}(kz),v=new p;return v}},{key:"createComponent",value:function(u){var f=this.componentFactoryResolver.resolveComponentFactory(u);return this.viewContainerRef.createComponent(f)}}]),r}(uf.Nk3);return n.\u0275fac=function(){var a;return function(r){return(a||(a=function(n){return _s(function(){for(var a=n.prototype.constructor,e=a[Wo]||gg(a),r=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;o&&o!==r;){var u=o[Wo]||gg(o);if(u&&u!==e)return u;o=Object.getPrototypeOf(o)}return function(f){return new f}})}(n)))(r||n)}}(),n.\u0275prov=un({token:n,factory:function(e){return n.\u0275fac(e)}}),n}(),kz=function(){function n(){N(this,n)}return j(n,[{key:"init",value:function(e){this._params=e,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,this._agAwareComponent.agInit(this._params)}},{key:"getGui",value:function(){return this._eGui}},{key:"destroy",value:function(){this._frameworkComponentInstance&&"function"==typeof this._frameworkComponentInstance.destroy&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}},{key:"getFrameworkComponentInstance",value:function(){return this._frameworkComponentInstance}}]),n}(),gL=function(){var n=function(){function a(e,r,o,u,f){N(this,a),this.viewContainerRef=r,this.angularFrameworkOverrides=o,this.frameworkComponentWrapper=u,this.componentFactoryResolver=f,this._initialised=!1,this._destroyed=!1,this._fullyReady=uf.j_S.resolve(!0),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipShowDelay=void 0,this.tooltipMouseTrack=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.clipboardDeliminator=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.deltaColumnMode=void 0,this.applyColumnDefOrder=void 0,this.immutableColumns=void 0,this.suppressSetColumnStateEvents=void 0,this.suppressColumnStateEvents=void 0,this.colWidth=void 0,this.minColWidth=void 0,this.maxColWidth=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.components=void 0,this.frameworkComponents=void 0,this.reactUi=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterMovesDown=void 0,this.enterMovesDownAfterEdit=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.stopEditingWhenGridLosesFocus=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.defaultExportParams=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.floatingFilter=void 0,this.enableOldSetFilterModel=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererFramework=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererFramework=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressParentsInRowNodes=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentFramework=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentFramework=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.suppressAggAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDelay=void 0,this.cellFadeDelay=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererFramework=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.deprecatedEmbedFullWidthRows=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererFramework=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.groupRowInnerRenderer=void 0,this.groupRowInnerRendererFramework=void 0,this.groupMultiAutoColumn=void 0,this.groupUseEntireRow=void 0,this.groupSuppressAutoColumn=void 0,this.rememberGroupStateWhenNewData=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.immutableData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.deltaRowDataMode=void 0,this.batchUpdateWaitMillis=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideStoreType=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortingAlwaysResets=void 0,this.serverSideFilteringAlwaysResets=void 0,this.suppressEnterpriseResetOnNewColumns=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellSelection=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.angularCompileRows=void 0,this.angularCompileFilters=void 0,this.functionsPassive=void 0,this.enableGroupEdit=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.suppressKeyboardEvent=void 0,this.localeTextFunc=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.groupRowAggNodes=void 0,this.isGroupOpenByDefault=void 0,this.defaultGroupOrderComparator=void 0,this.processSecondaryColDef=void 0,this.processSecondaryColGroupDef=void 0,this.getDataPath=void 0,this.defaultGroupSortComparator=void 0,this.getChildCount=void 0,this.getServerSideStoreParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowNodeId=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSort=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthCell=void 0,this.toolPanelVisibleChanged=new Ee,this.pasteStart=new Ee,this.pasteEnd=new Ee,this.columnVisible=new Ee,this.columnPinned=new Ee,this.columnResized=new Ee,this.columnMoved=new Ee,this.columnValueChanged=new Ee,this.columnPivotModeChanged=new Ee,this.columnPivotChanged=new Ee,this.columnGroupOpened=new Ee,this.newColumnsLoaded=new Ee,this.gridColumnsChanged=new Ee,this.displayedColumnsChanged=new Ee,this.virtualColumnsChanged=new Ee,this.columnEverythingChanged=new Ee,this.componentStateChanged=new Ee,this.cellValueChanged=new Ee,this.rowValueChanged=new Ee,this.cellEditingStarted=new Ee,this.cellEditingStopped=new Ee,this.rowEditingStarted=new Ee,this.rowEditingStopped=new Ee,this.filterOpened=new Ee,this.filterChanged=new Ee,this.filterModified=new Ee,this.chartCreated=new Ee,this.chartRangeSelectionChanged=new Ee,this.chartOptionsChanged=new Ee,this.chartDestroyed=new Ee,this.cellKeyDown=new Ee,this.cellKeyPress=new Ee,this.gridReady=new Ee,this.firstDataRendered=new Ee,this.gridSizeChanged=new Ee,this.modelUpdated=new Ee,this.virtualRowRemoved=new Ee,this.viewportChanged=new Ee,this.bodyScroll=new Ee,this.bodyScrollEnd=new Ee,this.dragStarted=new Ee,this.dragStopped=new Ee,this.paginationChanged=new Ee,this.rowDragEnter=new Ee,this.rowDragMove=new Ee,this.rowDragLeave=new Ee,this.rowDragEnd=new Ee,this.columnRowGroupChanged=new Ee,this.rowGroupOpened=new Ee,this.expandOrCollapseAll=new Ee,this.pinnedRowDataChanged=new Ee,this.rowDataChanged=new Ee,this.rowDataUpdated=new Ee,this.asyncTransactionsFlushed=new Ee,this.cellClicked=new Ee,this.cellDoubleClicked=new Ee,this.cellFocused=new Ee,this.cellMouseOver=new Ee,this.cellMouseOut=new Ee,this.cellMouseDown=new Ee,this.rowClicked=new Ee,this.rowDoubleClicked=new Ee,this.rowSelected=new Ee,this.selectionChanged=new Ee,this.cellContextMenu=new Ee,this.rangeSelectionChanged=new Ee,this.sortChanged=new Ee,this.columnRowGroupChangeRequest=new Ee,this.columnPivotChangeRequest=new Ee,this.columnValueChangeRequest=new Ee,this.columnAggFuncChangeRequest=new Ee,this._nativeElement=e.nativeElement}return j(a,[{key:"ngAfterViewInit",value:function(){this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef),this.frameworkComponentWrapper.setComponentFactoryResolver(this.componentFactoryResolver),this.angularFrameworkOverrides.setEmitterUsedCallback(this.isEmitterUsed.bind(this)),this.gridOptions=uf.plv.copyAttributesToGridOptions(this.gridOptions,this,!0),this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]},this.columns&&this.columns.length>0&&(this.gridOptions.columnDefs=this.columns.map(function(r){return r.toColDef()})),new uf.rjZ(this._nativeElement,this.gridOptions,this.gridParams),this.gridOptions.api&&(this.api=this.gridOptions.api),this.gridOptions.columnApi&&(this.columnApi=this.gridOptions.columnApi),this._initialised=!0,this._fullyReady.resolveNow(null,function(r){return r})}},{key:"ngOnChanges",value:function(r){this._initialised&&uf.plv.processOnChange(r,this.gridOptions,this.api,this.columnApi)}},{key:"ngOnDestroy",value:function(){this._initialised&&(this._destroyed=!0,this.api&&this.api.destroy())}},{key:"isEmitterUsed",value:function(r){var o=this[r],u=!!o&&o.observers&&o.observers.length>0,f="on".concat(r.charAt(0).toUpperCase()).concat(r.substring(1));return u||!!this.gridOptions&&!!this.gridOptions[f]}},{key:"globalEventListener",value:function(r,o){if(!this._destroyed){var u=this[r];u&&this.isEmitterUsed(r)&&("gridReady"===r?this._fullyReady.then(function(f){u.emit(o)}):u.emit(o))}}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(wu),st(Ca),st(ED),st(xD),st(Rc))},n.\u0275cmp=Er({type:n,selectors:[["ag-grid-angular"]],contentQueries:function(e,r,o){var u;1&e&&$m(o,Me,4),2&e&&Ym(u=Xm())&&(r.columns=u)},inputs:{statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipShowDelay:"tooltipShowDelay",tooltipMouseTrack:"tooltipMouseTrack",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",clipboardDeliminator:"clipboardDeliminator",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",deltaColumnMode:"deltaColumnMode",applyColumnDefOrder:"applyColumnDefOrder",immutableColumns:"immutableColumns",suppressSetColumnStateEvents:"suppressSetColumnStateEvents",suppressColumnStateEvents:"suppressColumnStateEvents",colWidth:"colWidth",minColWidth:"minColWidth",maxColWidth:"maxColWidth",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",components:"components",frameworkComponents:"frameworkComponents",reactUi:"reactUi",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterMovesDown:"enterMovesDown",enterMovesDownAfterEdit:"enterMovesDownAfterEdit",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",stopEditingWhenGridLosesFocus:"stopEditingWhenGridLosesFocus",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",defaultExportParams:"defaultExportParams",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",floatingFilter:"floatingFilter",enableOldSetFilterModel:"enableOldSetFilterModel",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererFramework:"loadingCellRendererFramework",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererFramework:"detailCellRendererFramework",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressParentsInRowNodes:"suppressParentsInRowNodes",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentFramework:"loadingOverlayComponentFramework",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentFramework:"noRowsOverlayComponentFramework",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",suppressAggAtRootLevel:"suppressAggAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDelay:"cellFlashDelay",cellFadeDelay:"cellFadeDelay",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererFramework:"fullWidthCellRendererFramework",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",deprecatedEmbedFullWidthRows:"deprecatedEmbedFullWidthRows",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererFramework:"groupRowRendererFramework",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",groupRowInnerRenderer:"groupRowInnerRenderer",groupRowInnerRendererFramework:"groupRowInnerRendererFramework",groupMultiAutoColumn:"groupMultiAutoColumn",groupUseEntireRow:"groupUseEntireRow",groupSuppressAutoColumn:"groupSuppressAutoColumn",rememberGroupStateWhenNewData:"rememberGroupStateWhenNewData",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",immutableData:"immutableData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",deltaRowDataMode:"deltaRowDataMode",batchUpdateWaitMillis:"batchUpdateWaitMillis",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideStoreType:"serverSideStoreType",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortingAlwaysResets:"serverSideSortingAlwaysResets",serverSideFilteringAlwaysResets:"serverSideFilteringAlwaysResets",suppressEnterpriseResetOnNewColumns:"suppressEnterpriseResetOnNewColumns",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellSelection:"suppressCellSelection",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",angularCompileRows:"angularCompileRows",angularCompileFilters:"angularCompileFilters",functionsPassive:"functionsPassive",enableGroupEdit:"enableGroupEdit",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",suppressKeyboardEvent:"suppressKeyboardEvent",localeTextFunc:"localeTextFunc",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",groupRowAggNodes:"groupRowAggNodes",isGroupOpenByDefault:"isGroupOpenByDefault",defaultGroupOrderComparator:"defaultGroupOrderComparator",processSecondaryColDef:"processSecondaryColDef",processSecondaryColGroupDef:"processSecondaryColGroupDef",getDataPath:"getDataPath",defaultGroupSortComparator:"defaultGroupSortComparator",getChildCount:"getChildCount",getServerSideStoreParams:"getServerSideStoreParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowNodeId:"getRowNodeId",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSort:"postSort",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthCell:"isFullWidthCell",gridOptions:"gridOptions",modules:"modules"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",cellKeyPress:"cellKeyPress",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataChanged:"rowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",sortChanged:"sortChanged",columnRowGroupChangeRequest:"columnRowGroupChangeRequest",columnPivotChangeRequest:"columnPivotChangeRequest",columnValueChangeRequest:"columnValueChangeRequest",columnAggFuncChangeRequest:"columnAggFuncChangeRequest"},features:[aP([ED,xD]),jo],decls:0,vars:0,template:function(e,r){},encapsulation:2}),F([Jl(Me),k("design:type",oT)],n.prototype,"columns",void 0),F([V(),k("design:type",Object)],n.prototype,"gridOptions",void 0),F([V(),k("design:type",Array)],n.prototype,"modules",void 0),F([V(),k("design:type",Object)],n.prototype,"statusBar",void 0),F([V(),k("design:type",Object)],n.prototype,"sideBar",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressContextMenu",void 0),F([V(),k("design:type",Boolean)],n.prototype,"preventDefaultOnContextMenu",void 0),F([V(),k("design:type",Boolean)],n.prototype,"allowContextMenuWithControlKey",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressMenuHide",void 0),F([V(),k("design:type",Boolean)],n.prototype,"enableBrowserTooltips",void 0),F([V(),k("design:type",Number)],n.prototype,"tooltipShowDelay",void 0),F([V(),k("design:type",Boolean)],n.prototype,"tooltipMouseTrack",void 0),F([V(),k("design:type",HTMLElement)],n.prototype,"popupParent",void 0),F([V(),k("design:type",Boolean)],n.prototype,"copyHeadersToClipboard",void 0),F([V(),k("design:type",String)],n.prototype,"clipboardDeliminator",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressCopyRowsToClipboard",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressLastEmptyLineOnPaste",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressClipboardPaste",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressClipboardApi",void 0),F([V(),k("design:type",Array)],n.prototype,"columnDefs",void 0),F([V(),k("design:type",Object)],n.prototype,"defaultColDef",void 0),F([V(),k("design:type",Object)],n.prototype,"defaultColGroupDef",void 0),F([V(),k("design:type",Object)],n.prototype,"columnTypes",void 0),F([V(),k("design:type",Boolean)],n.prototype,"maintainColumnOrder",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressFieldDotNotation",void 0),F([V(),k("design:type",Boolean)],n.prototype,"deltaColumnMode",void 0),F([V(),k("design:type",Boolean)],n.prototype,"applyColumnDefOrder",void 0),F([V(),k("design:type",Boolean)],n.prototype,"immutableColumns",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressSetColumnStateEvents",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressColumnStateEvents",void 0),F([V(),k("design:type",Number)],n.prototype,"colWidth",void 0),F([V(),k("design:type",Number)],n.prototype,"minColWidth",void 0),F([V(),k("design:type",Number)],n.prototype,"maxColWidth",void 0),F([V(),k("design:type",Number)],n.prototype,"headerHeight",void 0),F([V(),k("design:type",Number)],n.prototype,"groupHeaderHeight",void 0),F([V(),k("design:type",Number)],n.prototype,"floatingFiltersHeight",void 0),F([V(),k("design:type",Number)],n.prototype,"pivotHeaderHeight",void 0),F([V(),k("design:type",Number)],n.prototype,"pivotGroupHeaderHeight",void 0),F([V(),k("design:type",Boolean)],n.prototype,"allowDragFromColumnsToolPanel",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressMovableColumns",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressColumnMoveAnimation",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressDragLeaveHidesColumns",void 0),F([V(),k("design:type",String)],n.prototype,"colResizeDefault",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressAutoSize",void 0),F([V(),k("design:type",Number)],n.prototype,"autoSizePadding",void 0),F([V(),k("design:type",Boolean)],n.prototype,"skipHeaderOnAutoSize",void 0),F([V(),k("design:type",Object)],n.prototype,"components",void 0),F([V(),k("design:type",Object)],n.prototype,"frameworkComponents",void 0),F([V(),k("design:type",Boolean)],n.prototype,"reactUi",void 0),F([V(),k("design:type",String)],n.prototype,"editType",void 0),F([V(),k("design:type",Boolean)],n.prototype,"singleClickEdit",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressClickEdit",void 0),F([V(),k("design:type",Boolean)],n.prototype,"stopEditingWhenCellsLoseFocus",void 0),F([V(),k("design:type",Boolean)],n.prototype,"enterMovesDown",void 0),F([V(),k("design:type",Boolean)],n.prototype,"enterMovesDownAfterEdit",void 0),F([V(),k("design:type",Boolean)],n.prototype,"undoRedoCellEditing",void 0),F([V(),k("design:type",Number)],n.prototype,"undoRedoCellEditingLimit",void 0),F([V(),k("design:type",Boolean)],n.prototype,"stopEditingWhenGridLosesFocus",void 0),F([V(),k("design:type",Object)],n.prototype,"defaultCsvExportParams",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressCsvExport",void 0),F([V(),k("design:type",Object)],n.prototype,"defaultExcelExportParams",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressExcelExport",void 0),F([V(),k("design:type",Array)],n.prototype,"excelStyles",void 0),F([V(),k("design:type",Object)],n.prototype,"defaultExportParams",void 0),F([V(),k("design:type",String)],n.prototype,"quickFilterText",void 0),F([V(),k("design:type",Boolean)],n.prototype,"cacheQuickFilter",void 0),F([V(),k("design:type",Boolean)],n.prototype,"excludeChildrenWhenTreeDataFiltering",void 0),F([V(),k("design:type",Boolean)],n.prototype,"floatingFilter",void 0),F([V(),k("design:type",Boolean)],n.prototype,"enableOldSetFilterModel",void 0),F([V(),k("design:type",Boolean)],n.prototype,"enableCharts",void 0),F([V(),k("design:type",Array)],n.prototype,"chartThemes",void 0),F([V(),k("design:type",Object)],n.prototype,"customChartThemes",void 0),F([V(),k("design:type",Object)],n.prototype,"chartThemeOverrides",void 0),F([V(),k("design:type",Object)],n.prototype,"loadingCellRenderer",void 0),F([V(),k("design:type",Object)],n.prototype,"loadingCellRendererFramework",void 0),F([V(),k("design:type",Object)],n.prototype,"loadingCellRendererParams",void 0),F([V(),k("design:type",Function)],n.prototype,"loadingCellRendererSelector",void 0),F([V(),k("design:type",Object)],n.prototype,"localeText",void 0),F([V(),k("design:type",Boolean)],n.prototype,"masterDetail",void 0),F([V(),k("design:type",Boolean)],n.prototype,"keepDetailRows",void 0),F([V(),k("design:type",Number)],n.prototype,"keepDetailRowsCount",void 0),F([V(),k("design:type",Object)],n.prototype,"detailCellRenderer",void 0),F([V(),k("design:type",Object)],n.prototype,"detailCellRendererFramework",void 0),F([V(),k("design:type",Object)],n.prototype,"detailCellRendererParams",void 0),F([V(),k("design:type",Number)],n.prototype,"detailRowHeight",void 0),F([V(),k("design:type",Boolean)],n.prototype,"detailRowAutoHeight",void 0),F([V(),k("design:type",Object)],n.prototype,"context",void 0),F([V(),k("design:type",Array)],n.prototype,"alignedGrids",void 0),F([V(),k("design:type",Number)],n.prototype,"tabIndex",void 0),F([V(),k("design:type",Number)],n.prototype,"rowBuffer",void 0),F([V(),k("design:type",Boolean)],n.prototype,"valueCache",void 0),F([V(),k("design:type",Boolean)],n.prototype,"valueCacheNeverExpires",void 0),F([V(),k("design:type",Boolean)],n.prototype,"enableCellExpressions",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressParentsInRowNodes",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressTouch",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressFocusAfterRefresh",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressAsyncEvents",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressBrowserResizeObserver",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressPropertyNamesCheck",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressChangeDetection",void 0),F([V(),k("design:type",Boolean)],n.prototype,"debug",void 0),F([V(),k("design:type",String)],n.prototype,"overlayLoadingTemplate",void 0),F([V(),k("design:type",Object)],n.prototype,"loadingOverlayComponent",void 0),F([V(),k("design:type",Object)],n.prototype,"loadingOverlayComponentFramework",void 0),F([V(),k("design:type",Object)],n.prototype,"loadingOverlayComponentParams",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressLoadingOverlay",void 0),F([V(),k("design:type",String)],n.prototype,"overlayNoRowsTemplate",void 0),F([V(),k("design:type",Object)],n.prototype,"noRowsOverlayComponent",void 0),F([V(),k("design:type",Object)],n.prototype,"noRowsOverlayComponentFramework",void 0),F([V(),k("design:type",Object)],n.prototype,"noRowsOverlayComponentParams",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressNoRowsOverlay",void 0),F([V(),k("design:type",Boolean)],n.prototype,"pagination",void 0),F([V(),k("design:type",Number)],n.prototype,"paginationPageSize",void 0),F([V(),k("design:type",Boolean)],n.prototype,"paginationAutoPageSize",void 0),F([V(),k("design:type",Boolean)],n.prototype,"paginateChildRows",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressPaginationPanel",void 0),F([V(),k("design:type",Boolean)],n.prototype,"pivotMode",void 0),F([V(),k("design:type",String)],n.prototype,"pivotPanelShow",void 0),F([V(),k("design:type",String)],n.prototype,"pivotColumnGroupTotals",void 0),F([V(),k("design:type",String)],n.prototype,"pivotRowTotals",void 0),F([V(),k("design:type",Boolean)],n.prototype,"pivotSuppressAutoColumn",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressExpandablePivotGroups",void 0),F([V(),k("design:type",Boolean)],n.prototype,"functionsReadOnly",void 0),F([V(),k("design:type",Object)],n.prototype,"aggFuncs",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressAggFuncInHeader",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressAggAtRootLevel",void 0),F([V(),k("design:type",Boolean)],n.prototype,"aggregateOnlyChangedColumns",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressAggFilteredOnly",void 0),F([V(),k("design:type",Boolean)],n.prototype,"animateRows",void 0),F([V(),k("design:type",Boolean)],n.prototype,"enableCellChangeFlash",void 0),F([V(),k("design:type",Number)],n.prototype,"cellFlashDelay",void 0),F([V(),k("design:type",Number)],n.prototype,"cellFadeDelay",void 0),F([V(),k("design:type",String)],n.prototype,"domLayout",void 0),F([V(),k("design:type",Boolean)],n.prototype,"ensureDomOrder",void 0),F([V(),k("design:type",Boolean)],n.prototype,"enableRtl",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressColumnVirtualisation",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressMaxRenderedRowRestriction",void 0),F([V(),k("design:type",Boolean)],n.prototype,"rowDragManaged",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressRowDrag",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressMoveWhenRowDragging",void 0),F([V(),k("design:type",Boolean)],n.prototype,"rowDragEntireRow",void 0),F([V(),k("design:type",Boolean)],n.prototype,"rowDragMultiRow",void 0),F([V(),k("design:type",Object)],n.prototype,"fullWidthCellRenderer",void 0),F([V(),k("design:type",Object)],n.prototype,"fullWidthCellRendererFramework",void 0),F([V(),k("design:type",Object)],n.prototype,"fullWidthCellRendererParams",void 0),F([V(),k("design:type",Boolean)],n.prototype,"embedFullWidthRows",void 0),F([V(),k("design:type",Boolean)],n.prototype,"deprecatedEmbedFullWidthRows",void 0),F([V(),k("design:type",String)],n.prototype,"groupDisplayType",void 0),F([V(),k("design:type",Number)],n.prototype,"groupDefaultExpanded",void 0),F([V(),k("design:type",Object)],n.prototype,"autoGroupColumnDef",void 0),F([V(),k("design:type",Boolean)],n.prototype,"groupMaintainOrder",void 0),F([V(),k("design:type",Boolean)],n.prototype,"groupSelectsChildren",void 0),F([V(),k("design:type",Boolean)],n.prototype,"groupIncludeFooter",void 0),F([V(),k("design:type",Boolean)],n.prototype,"groupIncludeTotalFooter",void 0),F([V(),k("design:type",Boolean)],n.prototype,"groupSuppressBlankHeader",void 0),F([V(),k("design:type",Boolean)],n.prototype,"groupSelectsFiltered",void 0),F([V(),k("design:type",Boolean)],n.prototype,"showOpenedGroup",void 0),F([V(),k("design:type",Boolean)],n.prototype,"groupRemoveSingleChildren",void 0),F([V(),k("design:type",Boolean)],n.prototype,"groupRemoveLowestSingleChildren",void 0),F([V(),k("design:type",Boolean)],n.prototype,"groupHideOpenParents",void 0),F([V(),k("design:type",String)],n.prototype,"rowGroupPanelShow",void 0),F([V(),k("design:type",Object)],n.prototype,"groupRowRenderer",void 0),F([V(),k("design:type",Object)],n.prototype,"groupRowRendererFramework",void 0),F([V(),k("design:type",Object)],n.prototype,"groupRowRendererParams",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressMakeColumnVisibleAfterUnGroup",void 0),F([V(),k("design:type",Boolean)],n.prototype,"treeData",void 0),F([V(),k("design:type",Object)],n.prototype,"groupRowInnerRenderer",void 0),F([V(),k("design:type",Object)],n.prototype,"groupRowInnerRendererFramework",void 0),F([V(),k("design:type",Boolean)],n.prototype,"groupMultiAutoColumn",void 0),F([V(),k("design:type",Boolean)],n.prototype,"groupUseEntireRow",void 0),F([V(),k("design:type",Boolean)],n.prototype,"groupSuppressAutoColumn",void 0),F([V(),k("design:type",Boolean)],n.prototype,"rememberGroupStateWhenNewData",void 0),F([V(),k("design:type",Array)],n.prototype,"pinnedTopRowData",void 0),F([V(),k("design:type",Array)],n.prototype,"pinnedBottomRowData",void 0),F([V(),k("design:type",String)],n.prototype,"rowModelType",void 0),F([V(),k("design:type",Array)],n.prototype,"rowData",void 0),F([V(),k("design:type",Boolean)],n.prototype,"immutableData",void 0),F([V(),k("design:type",Number)],n.prototype,"asyncTransactionWaitMillis",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressModelUpdateAfterUpdateTransaction",void 0),F([V(),k("design:type",Boolean)],n.prototype,"deltaRowDataMode",void 0),F([V(),k("design:type",Number)],n.prototype,"batchUpdateWaitMillis",void 0),F([V(),k("design:type",Object)],n.prototype,"datasource",void 0),F([V(),k("design:type",Number)],n.prototype,"cacheOverflowSize",void 0),F([V(),k("design:type",Number)],n.prototype,"infiniteInitialRowCount",void 0),F([V(),k("design:type",String)],n.prototype,"serverSideStoreType",void 0),F([V(),k("design:type",Number)],n.prototype,"cacheBlockSize",void 0),F([V(),k("design:type",Number)],n.prototype,"maxBlocksInCache",void 0),F([V(),k("design:type",Number)],n.prototype,"maxConcurrentDatasourceRequests",void 0),F([V(),k("design:type",Number)],n.prototype,"blockLoadDebounceMillis",void 0),F([V(),k("design:type",Boolean)],n.prototype,"purgeClosedRowNodes",void 0),F([V(),k("design:type",Object)],n.prototype,"serverSideDatasource",void 0),F([V(),k("design:type",Boolean)],n.prototype,"serverSideSortingAlwaysResets",void 0),F([V(),k("design:type",Boolean)],n.prototype,"serverSideFilteringAlwaysResets",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressEnterpriseResetOnNewColumns",void 0),F([V(),k("design:type",Object)],n.prototype,"viewportDatasource",void 0),F([V(),k("design:type",Number)],n.prototype,"viewportRowModelPageSize",void 0),F([V(),k("design:type",Number)],n.prototype,"viewportRowModelBufferSize",void 0),F([V(),k("design:type",Boolean)],n.prototype,"alwaysShowHorizontalScroll",void 0),F([V(),k("design:type",Boolean)],n.prototype,"alwaysShowVerticalScroll",void 0),F([V(),k("design:type",Boolean)],n.prototype,"debounceVerticalScrollbar",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressHorizontalScroll",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressScrollOnNewData",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressScrollWhenPopupsAreOpen",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressAnimationFrame",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressMiddleClickScrolls",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressPreventDefaultOnMouseWheel",void 0),F([V(),k("design:type",Number)],n.prototype,"scrollbarWidth",void 0),F([V(),k("design:type",String)],n.prototype,"rowSelection",void 0),F([V(),k("design:type",Boolean)],n.prototype,"rowMultiSelectWithClick",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressRowDeselection",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressRowClickSelection",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressCellSelection",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressMultiRangeSelection",void 0),F([V(),k("design:type",Boolean)],n.prototype,"enableCellTextSelection",void 0),F([V(),k("design:type",Boolean)],n.prototype,"enableRangeSelection",void 0),F([V(),k("design:type",Boolean)],n.prototype,"enableRangeHandle",void 0),F([V(),k("design:type",Boolean)],n.prototype,"enableFillHandle",void 0),F([V(),k("design:type",String)],n.prototype,"fillHandleDirection",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressClearOnFillReduction",void 0),F([V(),k("design:type",Array)],n.prototype,"sortingOrder",void 0),F([V(),k("design:type",Boolean)],n.prototype,"accentedSort",void 0),F([V(),k("design:type",Boolean)],n.prototype,"unSortIcon",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressMultiSort",void 0),F([V(),k("design:type",String)],n.prototype,"multiSortKey",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressMaintainUnsortedOrder",void 0),F([V(),k("design:type",Object)],n.prototype,"icons",void 0),F([V(),k("design:type",Number)],n.prototype,"rowHeight",void 0),F([V(),k("design:type",Object)],n.prototype,"rowStyle",void 0),F([V(),k("design:type",Object)],n.prototype,"rowClass",void 0),F([V(),k("design:type",Object)],n.prototype,"rowClassRules",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressRowHoverHighlight",void 0),F([V(),k("design:type",Boolean)],n.prototype,"suppressRowTransform",void 0),F([V(),k("design:type",Boolean)],n.prototype,"columnHoverHighlight",void 0),F([V(),k("design:type",Boolean)],n.prototype,"deltaSort",void 0),F([V(),k("design:type",String)],n.prototype,"treeDataDisplayType",void 0),F([V(),k("design:type",Boolean)],n.prototype,"angularCompileRows",void 0),F([V(),k("design:type",Boolean)],n.prototype,"angularCompileFilters",void 0),F([V(),k("design:type",Boolean)],n.prototype,"functionsPassive",void 0),F([V(),k("design:type",Boolean)],n.prototype,"enableGroupEdit",void 0),F([V(),k("design:type",Function)],n.prototype,"getContextMenuItems",void 0),F([V(),k("design:type",Function)],n.prototype,"getMainMenuItems",void 0),F([V(),k("design:type",Function)],n.prototype,"postProcessPopup",void 0),F([V(),k("design:type",Function)],n.prototype,"processCellForClipboard",void 0),F([V(),k("design:type",Function)],n.prototype,"processHeaderForClipboard",void 0),F([V(),k("design:type",Function)],n.prototype,"processCellFromClipboard",void 0),F([V(),k("design:type",Function)],n.prototype,"sendToClipboard",void 0),F([V(),k("design:type",Function)],n.prototype,"processDataFromClipboard",void 0),F([V(),k("design:type",Function)],n.prototype,"isExternalFilterPresent",void 0),F([V(),k("design:type",Function)],n.prototype,"doesExternalFilterPass",void 0),F([V(),k("design:type",Function)],n.prototype,"getChartToolbarItems",void 0),F([V(),k("design:type",Function)],n.prototype,"createChartContainer",void 0),F([V(),k("design:type",Function)],n.prototype,"navigateToNextHeader",void 0),F([V(),k("design:type",Function)],n.prototype,"tabToNextHeader",void 0),F([V(),k("design:type",Function)],n.prototype,"navigateToNextCell",void 0),F([V(),k("design:type",Function)],n.prototype,"tabToNextCell",void 0),F([V(),k("design:type",Function)],n.prototype,"suppressKeyboardEvent",void 0),F([V(),k("design:type",Function)],n.prototype,"localeTextFunc",void 0),F([V(),k("design:type",Function)],n.prototype,"getDocument",void 0),F([V(),k("design:type",Function)],n.prototype,"paginationNumberFormatter",void 0),F([V(),k("design:type",Function)],n.prototype,"groupRowAggNodes",void 0),F([V(),k("design:type",Function)],n.prototype,"isGroupOpenByDefault",void 0),F([V(),k("design:type",Function)],n.prototype,"defaultGroupOrderComparator",void 0),F([V(),k("design:type",Function)],n.prototype,"processSecondaryColDef",void 0),F([V(),k("design:type",Function)],n.prototype,"processSecondaryColGroupDef",void 0),F([V(),k("design:type",Function)],n.prototype,"getDataPath",void 0),F([V(),k("design:type",Function)],n.prototype,"defaultGroupSortComparator",void 0),F([V(),k("design:type",Function)],n.prototype,"getChildCount",void 0),F([V(),k("design:type",Function)],n.prototype,"getServerSideStoreParams",void 0),F([V(),k("design:type",Function)],n.prototype,"isServerSideGroupOpenByDefault",void 0),F([V(),k("design:type",Function)],n.prototype,"isApplyServerSideTransaction",void 0),F([V(),k("design:type",Function)],n.prototype,"isServerSideGroup",void 0),F([V(),k("design:type",Function)],n.prototype,"getServerSideGroupKey",void 0),F([V(),k("design:type",Function)],n.prototype,"getBusinessKeyForNode",void 0),F([V(),k("design:type",Function)],n.prototype,"getRowNodeId",void 0),F([V(),k("design:type",Function)],n.prototype,"processRowPostCreate",void 0),F([V(),k("design:type",Function)],n.prototype,"isRowSelectable",void 0),F([V(),k("design:type",Function)],n.prototype,"isRowMaster",void 0),F([V(),k("design:type",Function)],n.prototype,"fillOperation",void 0),F([V(),k("design:type",Function)],n.prototype,"postSort",void 0),F([V(),k("design:type",Function)],n.prototype,"getRowStyle",void 0),F([V(),k("design:type",Function)],n.prototype,"getRowClass",void 0),F([V(),k("design:type",Function)],n.prototype,"getRowHeight",void 0),F([V(),k("design:type",Function)],n.prototype,"isFullWidthCell",void 0),F([_t(),k("design:type",Ee)],n.prototype,"toolPanelVisibleChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"pasteStart",void 0),F([_t(),k("design:type",Ee)],n.prototype,"pasteEnd",void 0),F([_t(),k("design:type",Ee)],n.prototype,"columnVisible",void 0),F([_t(),k("design:type",Ee)],n.prototype,"columnPinned",void 0),F([_t(),k("design:type",Ee)],n.prototype,"columnResized",void 0),F([_t(),k("design:type",Ee)],n.prototype,"columnMoved",void 0),F([_t(),k("design:type",Ee)],n.prototype,"columnValueChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"columnPivotModeChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"columnPivotChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"columnGroupOpened",void 0),F([_t(),k("design:type",Ee)],n.prototype,"newColumnsLoaded",void 0),F([_t(),k("design:type",Ee)],n.prototype,"gridColumnsChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"displayedColumnsChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"virtualColumnsChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"columnEverythingChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"componentStateChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"cellValueChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"rowValueChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"cellEditingStarted",void 0),F([_t(),k("design:type",Ee)],n.prototype,"cellEditingStopped",void 0),F([_t(),k("design:type",Ee)],n.prototype,"rowEditingStarted",void 0),F([_t(),k("design:type",Ee)],n.prototype,"rowEditingStopped",void 0),F([_t(),k("design:type",Ee)],n.prototype,"filterOpened",void 0),F([_t(),k("design:type",Ee)],n.prototype,"filterChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"filterModified",void 0),F([_t(),k("design:type",Ee)],n.prototype,"chartCreated",void 0),F([_t(),k("design:type",Ee)],n.prototype,"chartRangeSelectionChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"chartOptionsChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"chartDestroyed",void 0),F([_t(),k("design:type",Ee)],n.prototype,"cellKeyDown",void 0),F([_t(),k("design:type",Ee)],n.prototype,"cellKeyPress",void 0),F([_t(),k("design:type",Ee)],n.prototype,"gridReady",void 0),F([_t(),k("design:type",Ee)],n.prototype,"firstDataRendered",void 0),F([_t(),k("design:type",Ee)],n.prototype,"gridSizeChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"modelUpdated",void 0),F([_t(),k("design:type",Ee)],n.prototype,"virtualRowRemoved",void 0),F([_t(),k("design:type",Ee)],n.prototype,"viewportChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"bodyScroll",void 0),F([_t(),k("design:type",Ee)],n.prototype,"bodyScrollEnd",void 0),F([_t(),k("design:type",Ee)],n.prototype,"dragStarted",void 0),F([_t(),k("design:type",Ee)],n.prototype,"dragStopped",void 0),F([_t(),k("design:type",Ee)],n.prototype,"paginationChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"rowDragEnter",void 0),F([_t(),k("design:type",Ee)],n.prototype,"rowDragMove",void 0),F([_t(),k("design:type",Ee)],n.prototype,"rowDragLeave",void 0),F([_t(),k("design:type",Ee)],n.prototype,"rowDragEnd",void 0),F([_t(),k("design:type",Ee)],n.prototype,"columnRowGroupChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"rowGroupOpened",void 0),F([_t(),k("design:type",Ee)],n.prototype,"expandOrCollapseAll",void 0),F([_t(),k("design:type",Ee)],n.prototype,"pinnedRowDataChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"rowDataChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"rowDataUpdated",void 0),F([_t(),k("design:type",Ee)],n.prototype,"asyncTransactionsFlushed",void 0),F([_t(),k("design:type",Ee)],n.prototype,"cellClicked",void 0),F([_t(),k("design:type",Ee)],n.prototype,"cellDoubleClicked",void 0),F([_t(),k("design:type",Ee)],n.prototype,"cellFocused",void 0),F([_t(),k("design:type",Ee)],n.prototype,"cellMouseOver",void 0),F([_t(),k("design:type",Ee)],n.prototype,"cellMouseOut",void 0),F([_t(),k("design:type",Ee)],n.prototype,"cellMouseDown",void 0),F([_t(),k("design:type",Ee)],n.prototype,"rowClicked",void 0),F([_t(),k("design:type",Ee)],n.prototype,"rowDoubleClicked",void 0),F([_t(),k("design:type",Ee)],n.prototype,"rowSelected",void 0),F([_t(),k("design:type",Ee)],n.prototype,"selectionChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"cellContextMenu",void 0),F([_t(),k("design:type",Ee)],n.prototype,"rangeSelectionChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"sortChanged",void 0),F([_t(),k("design:type",Ee)],n.prototype,"columnRowGroupChangeRequest",void 0),F([_t(),k("design:type",Ee)],n.prototype,"columnPivotChangeRequest",void 0),F([_t(),k("design:type",Ee)],n.prototype,"columnValueChangeRequest",void 0),F([_t(),k("design:type",Ee)],n.prototype,"columnAggFuncChangeRequest",void 0),n=F([k("design:paramtypes",[wu,Ca,ED,xD,Rc])],n)}(),Lh=RD=function(){function n(){N(this,n)}return j(n,null,[{key:"withComponents",value:function(e){return{ngModule:RD,providers:[{provide:mg,useValue:e,multi:!0}]}}},{key:"forRoot",value:function(e){return{ngModule:RD,providers:[{provide:mg,useValue:e,multi:!0}]}}}]),n}();Lh.\u0275fac=function(a){return new(a||Lh)},Lh.\u0275mod=Ci({type:Lh}),Lh.\u0275inj=Vo({imports:[[]]});var Nz=function(){var n=function(){function a(){N(this,a)}return j(a,[{key:"ngOnInit",value:function(){}}]),a}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Er({type:n,selectors:[["app-root"]],decls:23,vars:0,consts:[[1,"kujata-menu"],[1,"kujata-menu-item"],["routerLink","/field-scenes","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/field-op-codes","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/field-models","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/battle-models","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/world-models","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/world-map","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/sounds","routerLinkActive","active",1,"kujata-menu-item-text"]],template:function(e,r){1&e&&(s(0,"div",0),s(1,"div",1),s(2,"a",2),oe(3,"Fields"),l(),l(),s(4,"div",1),s(5,"a",3),oe(6,"Field Op Codes"),l(),l(),s(7,"div",1),s(8,"a",4),oe(9,"Field Models"),l(),l(),s(10,"div",1),s(11,"a",5),oe(12,"Battle Models"),l(),l(),s(13,"div",1),s(14,"a",6),oe(15,"World Models"),l(),l(),s(16,"div",1),s(17,"a",7),oe(18,"World Map"),l(),l(),s(19,"div",1),s(20,"a",8),oe(21,"Sounds"),l(),l(),l(),c(22,"router-outlet"))},directives:[es,sL,hD],styles:[".kujata-menu[_ngcontent-%COMP%]{background-color:silver;margin-bottom:4px;padding:4px;display:flex;flex-flow:row wrap;align-items:flex-start;align-content:flex-start;font-size:10pt}.kujata-menu-item[_ngcontent-%COMP%]{background-color:#fff;margin-right:4px;padding:4px}.kujata-menu-item-text[_ngcontent-%COMP%]{color:#404040;font-weight:700}"]}),n}(),vn={production:!0,KUJATA_DATA_BASE_URL:"https://kujata-data-dg.netlify.app/"};function Gz(n,a){1&n&&c(0,"img",12),2&n&&d("src",ye(5).environment.KUJATA_DATA_BASE_URL+"/metadata/world-map/wm0.png",li)}function Bz(n,a){1&n&&c(0,"img",12),2&n&&d("src","https://makou-reactor-bg-images.netlify.app/"+ye().$implicit+".png",li)}function Hz(n,a){if(1&n&&(s(0,"a",8),s(1,"div",9),oe(2),l(),s(3,"div",10),oe(4),l(),Ge(5,Gz,1,1,"img",11),Ge(6,Bz,1,1,"img",11),l()),2&n){var e=a.$implicit,r=ye(4);d("routerLink","/scene-details/"+e),J(2),cn(e),J(2),cn(r.getMenuName(e)),J(1),d("ngIf",e.startsWith("wm")),J(1),d("ngIf",!e.startsWith("wm"))}}function Vz(n,a){if(1&n&&(s(0,"div",6),Ge(1,Hz,7,5,"a",7),l()),2&n){var e=ye().$implicit;J(1),d("ngForOf",e.fieldNames)}}function Wz(n,a){if(1&n&&(s(0,"div",3),s(1,"div",4),oe(2),l(),Ge(3,Vz,2,1,"div",5),l()),2&n){var e=a.$implicit;J(2),cn(e.name),J(1),d("ngIf","Missing"!=e.name)}}function Uz(n,a){if(1&n&&(S(0),Ge(1,Wz,4,2,"div",2),R()),2&n){var e=ye();J(1),d("ngForOf",e.chapters)}}var RS,mL=function(){var n=function(){function a(e){N(this,a),this.http=e,this.environment=vn,this.fetchStatus="NONE",this.sceneGraph=null,this.fieldIdToFieldMetadataMap=null,this.fieldNameToFieldMetadataMap=null,this.GRID_X=150,this.GRID_Y=75}return j(a,[{key:"createFieldNameToIdMap",value:function(r){this.fieldNameToIdMap={};for(var o=0;o<r.length;o++){var u=r[o];u&&u.length>0&&(this.fieldNameToIdMap[u]=o)}}},{key:"fieldNameToId",value:function(r){return this.fieldNameToIdMap[r]||-1}},{key:"fieldNameToMetadata",value:function(r){return this.fieldNameToFieldMetadataMap[r]}},{key:"getFieldMenuName",value:function(r){return""!==r.mapName?r.mapName:r.fieldName}},{key:"getMenuName",value:function(r){var o=this.fieldNameToMetadata(r);return this.getFieldMenuName(o)}},{key:"ngOnInit",value:function(){var r=this,o=vn.KUJATA_DATA_BASE_URL+"/data/field/flevel.lgp/maplist.json";this.http.get(o).subscribe(function(u){r.mapList=u,r.createFieldNameToIdMap(u),r.http.get(o=vn.KUJATA_DATA_BASE_URL+"/metadata/scene-graph.json").subscribe(function(f){r.sceneGraph=f,r.fieldIdToFieldMetadataMap={},r.fieldNameToFieldMetadataMap={};var v,p=Pt(r.sceneGraph.nodes);try{for(p.s();!(v=p.n()).done;){var g=v.value;r.fieldIdToFieldMetadataMap[g.id]=g,r.fieldNameToFieldMetadataMap[g.fieldName]=g}}catch(y){p.e(y)}finally{p.f()}console.log("this.fieldNameToFieldMetadataMap:",r.fieldNameToFieldMetadataMap),r.http.get(o=vn.KUJATA_DATA_BASE_URL+"/metadata/chapters.json").subscribe(function(y){r.chapters=y;for(var _={},C=65;C<r.mapList.length;C++){var w=r.mapList[C];w&&w.length>0&&(_[w]=!0)}var E,x=Pt(r.chapters);try{for(x.s();!(E=x.n()).done;){var A,T=Pt(E.value.fieldNames);try{for(T.s();!(A=T.n()).done;)_[A.value]=void 0}catch(P){T.e(P)}finally{T.f()}}}catch(P){x.e(P)}finally{x.f()}for(var O=r.chapters[r.chapters.length-3],I=0,B=Object.keys(_);I<B.length;I++){var z=B[I];null!=_[z]&&O.fieldNames.push(z)}})})},function(u){r.fetchStatus="ERROR"})}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(sa))},n.\u0275cmp=Er({type:n,selectors:[["field-scenes"]],decls:2,vars:1,consts:[[2,"background-color","#c0c0c0","padding","4px"],[4,"ngIf"],["class","chapter-container",4,"ngFor","ngForOf"],[1,"chapter-container"],[1,"chapter-name"],["class","field-cards-container",4,"ngIf"],[1,"field-cards-container"],["class","field-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"field-card",3,"routerLink"],[1,"field-name"],[1,"field-menu-name"],["class","field-image",3,"src",4,"ngIf"],[1,"field-image",3,"src"]],template:function(e,r){1&e&&(s(0,"div",0),Ge(1,Uz,2,1,"ng-container",1),l()),2&e&&(J(1),d("ngIf",r.chapters))},directives:[aa,Za,es],styles:[".chapter-container[_ngcontent-%COMP%]{background-color:#e0e0e0;margin-bottom:4px;padding:4px}.field-cards-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:flex-start;align-content:flex-start;font-size:10pt}.field-card[_ngcontent-%COMP%]{width:150px;height:180px;background-color:#f0f0f0;margin:4px 4px 0 0;text-align:center}.field-card[_ngcontent-%COMP%]:hover{background-color:#fff;text-decoration:none}.field-name[_ngcontent-%COMP%]{color:#404040;font-weight:700}.field-menu-name[_ngcontent-%COMP%]{color:gray;font-weight:700}.field-image[_ngcontent-%COMP%]{max-width:120px;max-height:120px;width:auto;height:auto}"]}),n}();function yL(n,a,e,r,o,u,f){try{var p=n[u](f),v=p.value}catch(g){return void e(g)}p.done?a(v):Promise.resolve(v).then(r,o)}var TD="148",ff=1e3,ba=1001,Mi=1003,ko=1006,Ic=1008,pf=1009,hf=1014,Lc=1015,wy=1016,Bh=1020,ns=1023,vf=1026,Hh=1027,OD=33776,PD=33777,ID=33778,LD=33779,ML=35840,OL=35841,PL=35842,IL=35843,LL=37492,FL=37496,kL=37808,NL=37809,GL=37810,BL=37811,HL=37812,VL=37813,WL=37814,UL=37815,zL=37816,jL=37817,qL=37818,KL=37819,YL=37820,$L=37821,XL=36492,Sy=2300,Vh=2301,Wh=2400,Uh=2401,gf=3e3,Vn=3001,Eu="srgb",by="srgb-linear",GD=35044,fl=function(){function n(){N(this,n)}return j(n,[{key:"addEventListener",value:function(e,r){void 0===this._listeners&&(this._listeners={});var o=this._listeners;void 0===o[e]&&(o[e]=[]),-1===o[e].indexOf(r)&&o[e].push(r)}},{key:"hasEventListener",value:function(e,r){if(void 0===this._listeners)return!1;var o=this._listeners;return void 0!==o[e]&&-1!==o[e].indexOf(r)}},{key:"removeEventListener",value:function(e,r){if(void 0!==this._listeners){var u=this._listeners[e];if(void 0!==u){var f=u.indexOf(r);-1!==f&&u.splice(f,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var o=this._listeners[e.type];if(void 0!==o){e.target=this;for(var u=o.slice(0),f=0,p=u.length;f<p;f++)u[f].call(this,e);e.target=null}}}}]),n}(),_o=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],tF=1234567,zh=Math.PI/180,Ey=180/Math.PI;function rs(){var n=4294967295*Math.random()|0,a=4294967295*Math.random()|0,e=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(_o[255&n]+_o[n>>8&255]+_o[n>>16&255]+_o[n>>24&255]+"-"+_o[255&a]+_o[a>>8&255]+"-"+_o[a>>16&15|64]+_o[a>>24&255]+"-"+_o[63&e|128]+_o[e>>8&255]+"-"+_o[e>>16&255]+_o[e>>24&255]+_o[255&r]+_o[r>>8&255]+_o[r>>16&255]+_o[r>>24&255]).toLowerCase()}function pi(n,a,e){return Math.max(a,Math.min(e,n))}function HD(n,a){return(n%a+a)%a}function xy(n,a,e){return(1-e)*n+e*a}function VD(n){return 0==(n&n-1)&&0!==n}function nF(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function LS(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function pl(n,a){switch(a.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function gr(n,a){switch(a.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}var e4=Object.freeze({__proto__:null,DEG2RAD:zh,RAD2DEG:Ey,generateUUID:rs,clamp:pi,euclideanModulo:HD,mapLinear:function(n,a,e,r,o){return r+(n-a)*(o-r)/(e-a)},inverseLerp:function(n,a,e){return n!==a?(e-n)/(a-n):0},lerp:xy,damp:function(n,a,e,r){return xy(n,a,1-Math.exp(-e*r))},pingpong:function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return a-Math.abs(HD(n,2*a)-a)},smoothstep:function(n,a,e){return n<=a?0:n>=e?1:(n=(n-a)/(e-a))*n*(3-2*n)},smootherstep:function(n,a,e){return n<=a?0:n>=e?1:(n=(n-a)/(e-a))*n*n*(n*(6*n-15)+10)},randInt:function(n,a){return n+Math.floor(Math.random()*(a-n+1))},randFloat:function(n,a){return n+Math.random()*(a-n)},randFloatSpread:function(n){return n*(.5-Math.random())},seededRandom:function(n){void 0!==n&&(tF=n);var a=tF+=1831565813;return a=Math.imul(a^a>>>15,1|a),(((a^=a+Math.imul(a^a>>>7,61|a))^a>>>14)>>>0)/4294967296},degToRad:function(n){return n*zh},radToDeg:function(n){return n*Ey},isPowerOfTwo:VD,ceilPowerOfTwo:nF,floorPowerOfTwo:LS,setQuaternionFromProperEuler:function(n,a,e,r,o){var u=Math.cos,f=Math.sin,p=u(e/2),v=f(e/2),g=u((a+r)/2),y=f((a+r)/2),_=u((a-r)/2),C=f((a-r)/2),w=u((r-a)/2),x=f((r-a)/2);switch(o){case"XYX":n.set(p*y,v*_,v*C,p*g);break;case"YZY":n.set(v*C,p*y,v*_,p*g);break;case"ZXZ":n.set(v*_,v*C,p*y,p*g);break;case"XZX":n.set(p*y,v*x,v*w,p*g);break;case"YXY":n.set(v*w,p*y,v*x,p*g);break;case"ZYZ":n.set(v*x,v*w,p*y,p*g);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}},normalize:gr,denormalize:pl}),$e=function(n){function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;N(this,a),a.prototype.isVector2=!0,this.x=e,this.y=r}return j(a,[{key:"width",get:function(){return this.x},set:function(r){this.x=r}},{key:"height",get:function(){return this.y},set:function(r){this.y=r}},{key:"set",value:function(r,o){return this.x=r,this.y=o,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setComponent",value:function(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this}},{key:"add",value:function(r){return this.x+=r.x,this.y+=r.y,this}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this}},{key:"addVectors",value:function(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this}},{key:"addScaledVector",value:function(r,o){return this.x+=r.x*o,this.y+=r.y*o,this}},{key:"sub",value:function(r){return this.x-=r.x,this.y-=r.y,this}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this}},{key:"subVectors",value:function(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this}},{key:"multiply",value:function(r){return this.x*=r.x,this.y*=r.y,this}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this}},{key:"divide",value:function(r){return this.x/=r.x,this.y/=r.y,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"applyMatrix3",value:function(r){var o=this.x,u=this.y,f=r.elements;return this.x=f[0]*o+f[3]*u+f[6],this.y=f[1]*o+f[4]*u+f[7],this}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this}},{key:"clamp",value:function(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this}},{key:"clampScalar",value:function(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this}},{key:"clampLength",value:function(r,o){var u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(r,Math.min(o,u)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y}},{key:"cross",value:function(r){return this.x*r.y-this.y*r.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(r){return Math.sqrt(this.distanceToSquared(r))}},{key:"distanceToSquared",value:function(r){var o=this.x-r.x,u=this.y-r.y;return o*o+u*u}},{key:"manhattanDistanceTo",value:function(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this}},{key:"lerpVectors",value:function(r,o,u){return this.x=r.x+(o.x-r.x)*u,this.y=r.y+(o.y-r.y)*u,this}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y}},{key:"fromArray",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[o],this.y=r[o+1],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[o]=this.x,r[o+1]=this.y,r}},{key:"fromBufferAttribute",value:function(r,o){return this.x=r.getX(o),this.y=r.getY(o),this}},{key:"rotateAround",value:function(r,o){var u=Math.cos(o),f=Math.sin(o),p=this.x-r.x,v=this.y-r.y;return this.x=p*u-v*f+r.x,this.y=p*f+v*u+r.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:yi.mark(function e(){return yi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.x;case 2:return o.next=4,this.y;case 4:case"end":return o.stop()}},e,this)})}]),a}(),js=function(){function n(){N(this,n),n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return j(n,[{key:"set",value:function(e,r,o,u,f,p,v,g,y){var _=this.elements;return _[0]=e,_[1]=u,_[2]=v,_[3]=r,_[4]=f,_[5]=g,_[6]=o,_[7]=p,_[8]=y,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var r=this.elements,o=e.elements;return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],this}},{key:"extractBasis",value:function(e,r,o){return e.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),o.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var r=e.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,r){var o=e.elements,u=r.elements,f=this.elements,p=o[0],v=o[3],g=o[6],y=o[1],_=o[4],C=o[7],w=o[2],x=o[5],E=o[8],b=u[0],T=u[3],A=u[6],M=u[1],O=u[4],I=u[7],B=u[2],z=u[5],P=u[8];return f[0]=p*b+v*M+g*B,f[3]=p*T+v*O+g*z,f[6]=p*A+v*I+g*P,f[1]=y*b+_*M+C*B,f[4]=y*T+_*O+C*z,f[7]=y*A+_*I+C*P,f[2]=w*b+x*M+E*B,f[5]=w*T+x*O+E*z,f[8]=w*A+x*I+E*P,this}},{key:"multiplyScalar",value:function(e){var r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,r=e[0],o=e[1],u=e[2],f=e[3],p=e[4],v=e[5],g=e[6],y=e[7],_=e[8];return r*p*_-r*v*y-o*f*_+o*v*g+u*f*y-u*p*g}},{key:"invert",value:function(){var e=this.elements,r=e[0],o=e[1],u=e[2],f=e[3],p=e[4],v=e[5],g=e[6],y=e[7],_=e[8],C=_*p-v*y,w=v*g-_*f,x=y*f-p*g,E=r*C+o*w+u*x;if(0===E)return this.set(0,0,0,0,0,0,0,0,0);var b=1/E;return e[0]=C*b,e[1]=(u*y-_*o)*b,e[2]=(v*o-u*p)*b,e[3]=w*b,e[4]=(_*r-u*g)*b,e[5]=(u*f-v*r)*b,e[6]=x*b,e[7]=(o*g-y*r)*b,e[8]=(p*r-o*f)*b,this}},{key:"transpose",value:function(){var e,r=this.elements;return e=r[1],r[1]=r[3],r[3]=e,e=r[2],r[2]=r[6],r[6]=e,e=r[5],r[5]=r[7],r[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this}},{key:"setUvTransform",value:function(e,r,o,u,f,p,v){var g=Math.cos(f),y=Math.sin(f);return this.set(o*g,o*y,-o*(g*p+y*v)+p+e,-u*y,u*g,-u*(-y*p+g*v)+v+r,0,0,1),this}},{key:"scale",value:function(e,r){return this.premultiply(WD.makeScale(e,r)),this}},{key:"rotate",value:function(e){return this.premultiply(WD.makeRotation(-e)),this}},{key:"translate",value:function(e,r){return this.premultiply(WD.makeTranslation(e,r)),this}},{key:"makeTranslation",value:function(e,r){return this.set(1,0,e,0,1,r,0,0,1),this}},{key:"makeRotation",value:function(e){var r=Math.cos(e),o=Math.sin(e);return this.set(r,-o,0,o,r,0,0,0,1),this}},{key:"makeScale",value:function(e,r){return this.set(e,0,0,0,r,0,0,0,1),this}},{key:"equals",value:function(e){for(var r=this.elements,o=e.elements,u=0;u<9;u++)if(r[u]!==o[u])return!1;return!0}},{key:"fromArray",value:function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=0;o<9;o++)this.elements[o]=e[o+r];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.elements;return e[r]=o[0],e[r+1]=o[1],e[r+2]=o[2],e[r+3]=o[3],e[r+4]=o[4],e[r+5]=o[5],e[r+6]=o[6],e[r+7]=o[7],e[r+8]=o[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),n}(),WD=new js;function rF(n){for(var a=n.length-1;a>=0;--a)if(n[a]>=65535)return!0;return!1}function Ry(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function mf(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function FS(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;var UD=(Rn(RS={},Eu,Rn({},by,mf)),Rn(RS,by,Rn({},Eu,FS)),RS),No={legacyMode:!0,get workingColorSpace(){return by},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(a,e,r){if(this.legacyMode||e===r||!e||!r)return a;if(UD[e]&&void 0!==UD[e][r]){var o=UD[e][r];return a.r=o(a.r),a.g=o(a.g),a.b=o(a.b),a}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(a,e){return this.convert(a,this.workingColorSpace,e)},toWorkingColorSpace:function(a,e){return this.convert(a,e,this.workingColorSpace)}},iF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Oi={r:0,g:0,b:0},qs={h:0,s:0,l:0},kS={h:0,s:0,l:0};function zD(n,a,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+6*(a-n)*e:e<.5?a:e<2/3?n+6*(a-n)*(2/3-e):n}function NS(n,a){return a.r=n.r,a.g=n.g,a.b=n.b,a}var jh,Ht=function(){var n=function(a){function e(r,o,u){return N(this,e),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===o&&void 0===u?this.set(r):this.setRGB(r,o,u)}return j(e,[{key:"set",value:function(o){return o&&o.isColor?this.copy(o):"number"==typeof o?this.setHex(o):"string"==typeof o&&this.setStyle(o),this}},{key:"setScalar",value:function(o){return this.r=o,this.g=o,this.b=o,this}},{key:"setHex",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eu;return o=Math.floor(o),this.r=(o>>16&255)/255,this.g=(o>>8&255)/255,this.b=(255&o)/255,No.toWorkingColorSpace(this,u),this}},{key:"setRGB",value:function(o,u,f){var p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:No.workingColorSpace;return this.r=o,this.g=u,this.b=f,No.toWorkingColorSpace(this,p),this}},{key:"setHSL",value:function(o,u,f){var p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:No.workingColorSpace;if(o=HD(o,1),u=pi(u,0,1),f=pi(f,0,1),0===u)this.r=this.g=this.b=f;else{var v=f<=.5?f*(1+u):f+u-f*u,g=2*f-v;this.r=zD(g,v,o+1/3),this.g=zD(g,v,o),this.b=zD(g,v,o-1/3)}return No.toWorkingColorSpace(this,p),this}},{key:"setStyle",value:function(o){var p,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eu;function f(b){void 0!==b&&parseFloat(b)<1&&console.warn("THREE.Color: Alpha component of "+o+" will be ignored.")}if(p=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(o)){var v,g=p[1],y=p[2];switch(g){case"rgb":case"rgba":if(v=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y))return this.r=Math.min(255,parseInt(v[1],10))/255,this.g=Math.min(255,parseInt(v[2],10))/255,this.b=Math.min(255,parseInt(v[3],10))/255,No.toWorkingColorSpace(this,u),f(v[4]),this;if(v=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y))return this.r=Math.min(100,parseInt(v[1],10))/100,this.g=Math.min(100,parseInt(v[2],10))/100,this.b=Math.min(100,parseInt(v[3],10))/100,No.toWorkingColorSpace(this,u),f(v[4]),this;break;case"hsl":case"hsla":if(v=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y)){var _=parseFloat(v[1])/360,C=parseFloat(v[2])/100,w=parseFloat(v[3])/100;return f(v[4]),this.setHSL(_,C,w,u)}}}else if(p=/^\#([A-Fa-f\d]+)$/.exec(o)){var x=p[1],E=x.length;if(3===E)return this.r=parseInt(x.charAt(0)+x.charAt(0),16)/255,this.g=parseInt(x.charAt(1)+x.charAt(1),16)/255,this.b=parseInt(x.charAt(2)+x.charAt(2),16)/255,No.toWorkingColorSpace(this,u),this;if(6===E)return this.r=parseInt(x.charAt(0)+x.charAt(1),16)/255,this.g=parseInt(x.charAt(2)+x.charAt(3),16)/255,this.b=parseInt(x.charAt(4)+x.charAt(5),16)/255,No.toWorkingColorSpace(this,u),this}return o&&o.length>0?this.setColorName(o,u):this}},{key:"setColorName",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eu,f=iF[o.toLowerCase()];return void 0!==f?this.setHex(f,u):console.warn("THREE.Color: Unknown color "+o),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(o){return this.r=o.r,this.g=o.g,this.b=o.b,this}},{key:"copySRGBToLinear",value:function(o){return this.r=mf(o.r),this.g=mf(o.g),this.b=mf(o.b),this}},{key:"copyLinearToSRGB",value:function(o){return this.r=FS(o.r),this.g=FS(o.g),this.b=FS(o.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Eu;return No.fromWorkingColorSpace(NS(this,Oi),o),pi(255*Oi.r,0,255)<<16^pi(255*Oi.g,0,255)<<8^pi(255*Oi.b,0,255)<<0}},{key:"getHexString",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Eu;return("000000"+this.getHex(o).toString(16)).slice(-6)}},{key:"getHSL",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:No.workingColorSpace;No.fromWorkingColorSpace(NS(this,Oi),u);var _,C,f=Oi.r,p=Oi.g,v=Oi.b,g=Math.max(f,p,v),y=Math.min(f,p,v),w=(y+g)/2;if(y===g)_=0,C=0;else{var x=g-y;switch(C=w<=.5?x/(g+y):x/(2-g-y),g){case f:_=(p-v)/x+(p<v?6:0);break;case p:_=(v-f)/x+2;break;case v:_=(f-p)/x+4}_/=6}return o.h=_,o.s=C,o.l=w,o}},{key:"getRGB",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:No.workingColorSpace;return No.fromWorkingColorSpace(NS(this,Oi),u),o.r=Oi.r,o.g=Oi.g,o.b=Oi.b,o}},{key:"getStyle",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Eu;return No.fromWorkingColorSpace(NS(this,Oi),o),o!==Eu?"color(".concat(o," ").concat(Oi.r," ").concat(Oi.g," ").concat(Oi.b,")"):"rgb(".concat(255*Oi.r|0,",").concat(255*Oi.g|0,",").concat(255*Oi.b|0,")")}},{key:"offsetHSL",value:function(o,u,f){return this.getHSL(qs),qs.h+=o,qs.s+=u,qs.l+=f,this.setHSL(qs.h,qs.s,qs.l),this}},{key:"add",value:function(o){return this.r+=o.r,this.g+=o.g,this.b+=o.b,this}},{key:"addColors",value:function(o,u){return this.r=o.r+u.r,this.g=o.g+u.g,this.b=o.b+u.b,this}},{key:"addScalar",value:function(o){return this.r+=o,this.g+=o,this.b+=o,this}},{key:"sub",value:function(o){return this.r=Math.max(0,this.r-o.r),this.g=Math.max(0,this.g-o.g),this.b=Math.max(0,this.b-o.b),this}},{key:"multiply",value:function(o){return this.r*=o.r,this.g*=o.g,this.b*=o.b,this}},{key:"multiplyScalar",value:function(o){return this.r*=o,this.g*=o,this.b*=o,this}},{key:"lerp",value:function(o,u){return this.r+=(o.r-this.r)*u,this.g+=(o.g-this.g)*u,this.b+=(o.b-this.b)*u,this}},{key:"lerpColors",value:function(o,u,f){return this.r=o.r+(u.r-o.r)*f,this.g=o.g+(u.g-o.g)*f,this.b=o.b+(u.b-o.b)*f,this}},{key:"lerpHSL",value:function(o,u){this.getHSL(qs),o.getHSL(kS);var f=xy(qs.h,kS.h,u),p=xy(qs.s,kS.s,u),v=xy(qs.l,kS.l,u);return this.setHSL(f,p,v),this}},{key:"equals",value:function(o){return o.r===this.r&&o.g===this.g&&o.b===this.b}},{key:"fromArray",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=o[u],this.g=o[u+1],this.b=o[u+2],this}},{key:"toArray",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o[u]=this.r,o[u+1]=this.g,o[u+2]=this.b,o}},{key:"fromBufferAttribute",value:function(o,u){return this.r=o.getX(u),this.g=o.getY(u),this.b=o.getZ(u),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:yi.mark(function r(){return yi.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.r;case 2:return u.next=4,this.g;case 4:return u.next=6,this.b;case 6:case"end":return u.stop()}},r,this)})}]),e}();return n.NAMES=iF,n}(),oF=function(){function n(){N(this,n)}return j(n,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;var r;if(e instanceof HTMLCanvasElement)r=e;else{void 0===jh&&(jh=Ry("canvas")),jh.width=e.width,jh.height=e.height;var o=jh.getContext("2d");e instanceof ImageData?o.putImageData(e,0,0):o.drawImage(e,0,0,e.width,e.height),r=jh}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var r=Ry("canvas");r.width=e.width,r.height=e.height;var o=r.getContext("2d");o.drawImage(e,0,0,e.width,e.height);for(var u=o.getImageData(0,0,e.width,e.height),f=u.data,p=0;p<f.length;p++)f[p]=255*mf(f[p]/255);return o.putImageData(u,0,0),r}if(e.data){for(var v=e.data.slice(0),g=0;g<v.length;g++)v[g]=v instanceof Uint8Array||v instanceof Uint8ClampedArray?Math.floor(255*mf(v[g]/255)):mf(v[g]);return{data:v,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),n}(),aF=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;N(this,n),this.isSource=!0,this.uuid=rs(),this.data=a,this.version=0}return j(n,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var r=void 0===e||"string"==typeof e;if(!r&&void 0!==e.images[this.uuid])return e.images[this.uuid];var o={uuid:this.uuid,url:""},u=this.data;if(null!==u){var f;if(Array.isArray(u)){f=[];for(var p=0,v=u.length;p<v;p++)f.push(jD(u[p].isDataTexture?u[p].image:u[p]))}else f=jD(u);o.url=f}return r||(e.images[this.uuid]=o),o}}]),n}();function jD(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?oF.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var n4=0,xu=function(){var n=function(a){ve(r,a);var e=ge(r);function r(){var o,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.DEFAULT_IMAGE,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.DEFAULT_MAPPING,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ba,v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ba,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ko,y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ic,_=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ns,C=arguments.length>7&&void 0!==arguments[7]?arguments[7]:pf,w=arguments.length>8&&void 0!==arguments[8]?arguments[8]:r.DEFAULT_ANISOTROPY,x=arguments.length>9&&void 0!==arguments[9]?arguments[9]:gf;return N(this,r),(o=e.call(this)).isTexture=!0,Object.defineProperty(Yn(o),"id",{value:n4++}),o.uuid=rs(),o.name="",o.source=new aF(u),o.mipmaps=[],o.mapping=f,o.wrapS=p,o.wrapT=v,o.magFilter=g,o.minFilter=y,o.anisotropy=w,o.format=_,o.internalFormat=null,o.type=C,o.offset=new $e(0,0),o.repeat=new $e(1,1),o.center=new $e(0,0),o.rotation=0,o.matrixAutoUpdate=!0,o.matrix=new js,o.generateMipmaps=!0,o.premultiplyAlpha=!1,o.flipY=!0,o.unpackAlignment=4,o.encoding=x,o.userData={},o.version=0,o.onUpdate=null,o.isRenderTargetTexture=!1,o.needsPMREMUpdate=!1,o}return j(r,[{key:"image",get:function(){return this.source.data},set:function(u){this.source.data=u}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(u){return this.name=u.name,this.source=u.source,this.mipmaps=u.mipmaps.slice(0),this.mapping=u.mapping,this.wrapS=u.wrapS,this.wrapT=u.wrapT,this.magFilter=u.magFilter,this.minFilter=u.minFilter,this.anisotropy=u.anisotropy,this.format=u.format,this.internalFormat=u.internalFormat,this.type=u.type,this.offset.copy(u.offset),this.repeat.copy(u.repeat),this.center.copy(u.center),this.rotation=u.rotation,this.matrixAutoUpdate=u.matrixAutoUpdate,this.matrix.copy(u.matrix),this.generateMipmaps=u.generateMipmaps,this.premultiplyAlpha=u.premultiplyAlpha,this.flipY=u.flipY,this.unpackAlignment=u.unpackAlignment,this.encoding=u.encoding,this.userData=JSON.parse(JSON.stringify(u.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(u){var f=void 0===u||"string"==typeof u;if(!f&&void 0!==u.textures[this.uuid])return u.textures[this.uuid];var p={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(u).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(p.userData=this.userData),f||(u.textures[this.uuid]=p),p}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(u){if(300!==this.mapping)return u;if(u.applyMatrix3(this.matrix),u.x<0||u.x>1)switch(this.wrapS){case ff:u.x=u.x-Math.floor(u.x);break;case ba:u.x=u.x<0?0:1;break;case 1002:u.x=1===Math.abs(Math.floor(u.x)%2)?Math.ceil(u.x)-u.x:u.x-Math.floor(u.x)}if(u.y<0||u.y>1)switch(this.wrapT){case ff:u.y=u.y-Math.floor(u.y);break;case ba:u.y=u.y<0?0:1;break;case 1002:u.y=1===Math.abs(Math.floor(u.y)%2)?Math.ceil(u.y)-u.y:u.y-Math.floor(u.y)}return this.flipY&&(u.y=1-u.y),u}},{key:"needsUpdate",set:function(u){!0===u&&(this.version++,this.source.needsUpdate=!0)}}]),r}(fl);return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n}(),xr=function(n){function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;N(this,a),a.prototype.isVector4=!0,this.x=e,this.y=r,this.z=o,this.w=u}return j(a,[{key:"width",get:function(){return this.z},set:function(r){this.z=r}},{key:"height",get:function(){return this.w},set:function(r){this.w=r}},{key:"set",value:function(r,o,u,f){return this.x=r,this.y=o,this.z=u,this.w=f,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this.z=r,this.w=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setZ",value:function(r){return this.z=r,this}},{key:"setW",value:function(r){return this.w=r,this}},{key:"setComponent",value:function(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=void 0!==r.w?r.w:1,this}},{key:"add",value:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this}},{key:"addVectors",value:function(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this.z=r.z+o.z,this.w=r.w+o.w,this}},{key:"addScaledVector",value:function(r,o){return this.x+=r.x*o,this.y+=r.y*o,this.z+=r.z*o,this.w+=r.w*o,this}},{key:"sub",value:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this}},{key:"subVectors",value:function(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this.z=r.z-o.z,this.w=r.w-o.w,this}},{key:"multiply",value:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this.w*=r.w,this}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this}},{key:"applyMatrix4",value:function(r){var o=this.x,u=this.y,f=this.z,p=this.w,v=r.elements;return this.x=v[0]*o+v[4]*u+v[8]*f+v[12]*p,this.y=v[1]*o+v[5]*u+v[9]*f+v[13]*p,this.z=v[2]*o+v[6]*u+v[10]*f+v[14]*p,this.w=v[3]*o+v[7]*u+v[11]*f+v[15]*p,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"setAxisAngleFromQuaternion",value:function(r){this.w=2*Math.acos(r.w);var o=Math.sqrt(1-r.w*r.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=r.x/o,this.y=r.y/o,this.z=r.z/o),this}},{key:"setAxisAngleFromRotationMatrix",value:function(r){var o,u,f,p,v=.01,g=.1,y=r.elements,_=y[0],C=y[4],w=y[8],x=y[1],E=y[5],b=y[9],T=y[2],A=y[6],M=y[10];if(Math.abs(C-x)<v&&Math.abs(w-T)<v&&Math.abs(b-A)<v){if(Math.abs(C+x)<g&&Math.abs(w+T)<g&&Math.abs(b+A)<g&&Math.abs(_+E+M-3)<g)return this.set(1,0,0,0),this;o=Math.PI;var O=(_+1)/2,I=(E+1)/2,B=(M+1)/2,z=(C+x)/4,P=(w+T)/4,W=(b+A)/4;return O>I&&O>B?O<v?(u=0,f=.707106781,p=.707106781):(f=z/(u=Math.sqrt(O)),p=P/u):I>B?I<v?(u=.707106781,f=0,p=.707106781):(u=z/(f=Math.sqrt(I)),p=W/f):B<v?(u=.707106781,f=.707106781,p=0):(u=P/(p=Math.sqrt(B)),f=W/p),this.set(u,f,p,o),this}var X=Math.sqrt((A-b)*(A-b)+(w-T)*(w-T)+(x-C)*(x-C));return Math.abs(X)<.001&&(X=1),this.x=(A-b)/X,this.y=(w-T)/X,this.z=(x-C)/X,this.w=Math.acos((_+E+M-1)/2),this}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this.w=Math.min(this.w,r.w),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this.w=Math.max(this.w,r.w),this}},{key:"clamp",value:function(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this.z=Math.max(r.z,Math.min(o.z,this.z)),this.w=Math.max(r.w,Math.min(o.w,this.w)),this}},{key:"clampScalar",value:function(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this.z=Math.max(r,Math.min(o,this.z)),this.w=Math.max(r,Math.min(o,this.w)),this}},{key:"clampLength",value:function(r,o){var u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(r,Math.min(o,u)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this.z+=(r.z-this.z)*o,this.w+=(r.w-this.w)*o,this}},{key:"lerpVectors",value:function(r,o,u){return this.x=r.x+(o.x-r.x)*u,this.y=r.y+(o.y-r.y)*u,this.z=r.z+(o.z-r.z)*u,this.w=r.w+(o.w-r.w)*u,this}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w}},{key:"fromArray",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[o],this.y=r[o+1],this.z=r[o+2],this.w=r[o+3],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[o]=this.x,r[o+1]=this.y,r[o+2]=this.z,r[o+3]=this.w,r}},{key:"fromBufferAttribute",value:function(r,o){return this.x=r.getX(o),this.y=r.getY(o),this.z=r.getZ(o),this.w=r.getW(o),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:yi.mark(function e(){return yi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.x;case 2:return o.next=4,this.y;case 4:return o.next=6,this.z;case 6:return o.next=8,this.w;case 8:case"end":return o.stop()}},e,this)})}]),a}(),yf=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};N(this,e),(r=a.call(this)).isWebGLRenderTarget=!0,r.width=o,r.height=u,r.depth=1,r.scissor=new xr(0,0,o,u),r.scissorTest=!1,r.viewport=new xr(0,0,o,u);var p={width:o,height:u,depth:1};return r.texture=new xu(p,f.mapping,f.wrapS,f.wrapT,f.magFilter,f.minFilter,f.format,f.type,f.anisotropy,f.encoding),r.texture.isRenderTargetTexture=!0,r.texture.flipY=!1,r.texture.generateMipmaps=void 0!==f.generateMipmaps&&f.generateMipmaps,r.texture.internalFormat=void 0!==f.internalFormat?f.internalFormat:null,r.texture.minFilter=void 0!==f.minFilter?f.minFilter:ko,r.depthBuffer=void 0===f.depthBuffer||f.depthBuffer,r.stencilBuffer=void 0!==f.stencilBuffer&&f.stencilBuffer,r.depthTexture=void 0!==f.depthTexture?f.depthTexture:null,r.samples=void 0!==f.samples?f.samples:0,r}return j(e,[{key:"setSize",value:function(o,u){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(this.width!==o||this.height!==u||this.depth!==f)&&(this.width=o,this.height=u,this.depth=f,this.texture.image.width=o,this.texture.image.height=u,this.texture.image.depth=f,this.dispose()),this.viewport.set(0,0,o,u),this.scissor.set(0,0,o,u)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(o){this.width=o.width,this.height=o.height,this.depth=o.depth,this.viewport.copy(o.viewport),this.texture=o.texture.clone(),this.texture.isRenderTargetTexture=!0;var u=Object.assign({},o.texture.image);return this.texture.source=new aF(u),this.depthBuffer=o.depthBuffer,this.stencilBuffer=o.stencilBuffer,null!==o.depthTexture&&(this.depthTexture=o.depthTexture.clone()),this.samples=o.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),e}(fl),sF=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return N(this,e),(r=a.call(this,null)).isDataArrayTexture=!0,r.image={data:o,width:u,height:f,depth:p},r.magFilter=Mi,r.minFilter=Mi,r.wrapR=ba,r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r}return e}(xu),r4=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return N(this,e),(r=a.call(this,null)).isData3DTexture=!0,r.image={data:o,width:u,height:f,depth:p},r.magFilter=Mi,r.minFilter=Mi,r.wrapR=ba,r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r}return e}(xu),ro=function(n){function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;N(this,a),this.isQuaternion=!0,this._x=e,this._y=r,this._z=o,this._w=u}return j(a,[{key:"x",get:function(){return this._x},set:function(r){this._x=r,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(r){this._y=r,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(r){this._z=r,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(r){this._w=r,this._onChangeCallback()}},{key:"set",value:function(r,o,u,f){return this._x=r,this._y=o,this._z=u,this._w=f,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(r){return this._x=r.x,this._y=r.y,this._z=r.z,this._w=r.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(r,o){var u=r._x,f=r._y,p=r._z,v=r._order,g=Math.cos,y=Math.sin,_=g(u/2),C=g(f/2),w=g(p/2),x=y(u/2),E=y(f/2),b=y(p/2);switch(v){case"XYZ":this._x=x*C*w+_*E*b,this._y=_*E*w-x*C*b,this._z=_*C*b+x*E*w,this._w=_*C*w-x*E*b;break;case"YXZ":this._x=x*C*w+_*E*b,this._y=_*E*w-x*C*b,this._z=_*C*b-x*E*w,this._w=_*C*w+x*E*b;break;case"ZXY":this._x=x*C*w-_*E*b,this._y=_*E*w+x*C*b,this._z=_*C*b+x*E*w,this._w=_*C*w-x*E*b;break;case"ZYX":this._x=x*C*w-_*E*b,this._y=_*E*w+x*C*b,this._z=_*C*b-x*E*w,this._w=_*C*w+x*E*b;break;case"YZX":this._x=x*C*w+_*E*b,this._y=_*E*w+x*C*b,this._z=_*C*b-x*E*w,this._w=_*C*w-x*E*b;break;case"XZY":this._x=x*C*w-_*E*b,this._y=_*E*w-x*C*b,this._z=_*C*b+x*E*w,this._w=_*C*w+x*E*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+v)}return!1!==o&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(r,o){var u=o/2,f=Math.sin(u);return this._x=r.x*f,this._y=r.y*f,this._z=r.z*f,this._w=Math.cos(u),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(r){var o=r.elements,u=o[0],f=o[4],p=o[8],v=o[1],g=o[5],y=o[9],_=o[2],C=o[6],w=o[10],x=u+g+w;if(x>0){var E=.5/Math.sqrt(x+1);this._w=.25/E,this._x=(C-y)*E,this._y=(p-_)*E,this._z=(v-f)*E}else if(u>g&&u>w){var b=2*Math.sqrt(1+u-g-w);this._w=(C-y)/b,this._x=.25*b,this._y=(f+v)/b,this._z=(p+_)/b}else if(g>w){var T=2*Math.sqrt(1+g-u-w);this._w=(p-_)/T,this._x=(f+v)/T,this._y=.25*T,this._z=(y+C)/T}else{var A=2*Math.sqrt(1+w-u-g);this._w=(v-f)/A,this._x=(p+_)/A,this._y=(y+C)/A,this._z=.25*A}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(r,o){var u=r.dot(o)+1;return u<Number.EPSILON?(u=0,Math.abs(r.x)>Math.abs(r.z)?(this._x=-r.y,this._y=r.x,this._z=0,this._w=u):(this._x=0,this._y=-r.z,this._z=r.y,this._w=u)):(this._x=r.y*o.z-r.z*o.y,this._y=r.z*o.x-r.x*o.z,this._z=r.x*o.y-r.y*o.x,this._w=u),this.normalize()}},{key:"angleTo",value:function(r){return 2*Math.acos(Math.abs(pi(this.dot(r),-1,1)))}},{key:"rotateTowards",value:function(r,o){var u=this.angleTo(r);if(0===u)return this;var f=Math.min(1,o/u);return this.slerp(r,f),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var r=this.length();return 0===r?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(r=1/r),this._y=this._y*r,this._z=this._z*r,this._w=this._w*r),this._onChangeCallback(),this}},{key:"multiply",value:function(r){return this.multiplyQuaternions(this,r)}},{key:"premultiply",value:function(r){return this.multiplyQuaternions(r,this)}},{key:"multiplyQuaternions",value:function(r,o){var u=r._x,f=r._y,p=r._z,v=r._w,g=o._x,y=o._y,_=o._z,C=o._w;return this._x=u*C+v*g+f*_-p*y,this._y=f*C+v*y+p*g-u*_,this._z=p*C+v*_+u*y-f*g,this._w=v*C-u*g-f*y-p*_,this._onChangeCallback(),this}},{key:"slerp",value:function(r,o){if(0===o)return this;if(1===o)return this.copy(r);var u=this._x,f=this._y,p=this._z,v=this._w,g=v*r._w+u*r._x+f*r._y+p*r._z;if(g<0?(this._w=-r._w,this._x=-r._x,this._y=-r._y,this._z=-r._z,g=-g):this.copy(r),g>=1)return this._w=v,this._x=u,this._y=f,this._z=p,this;var y=1-g*g;if(y<=Number.EPSILON){var _=1-o;return this._w=_*v+o*this._w,this._x=_*u+o*this._x,this._y=_*f+o*this._y,this._z=_*p+o*this._z,this.normalize(),this._onChangeCallback(),this}var C=Math.sqrt(y),w=Math.atan2(C,g),x=Math.sin((1-o)*w)/C,E=Math.sin(o*w)/C;return this._w=v*x+this._w*E,this._x=u*x+this._x*E,this._y=f*x+this._y*E,this._z=p*x+this._z*E,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(r,o,u){return this.copy(r).slerp(o,u)}},{key:"random",value:function(){var r=Math.random(),o=Math.sqrt(1-r),u=Math.sqrt(r),f=2*Math.PI*Math.random(),p=2*Math.PI*Math.random();return this.set(o*Math.cos(f),u*Math.sin(p),u*Math.cos(p),o*Math.sin(f))}},{key:"equals",value:function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w}},{key:"fromArray",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=r[o],this._y=r[o+1],this._z=r[o+2],this._w=r[o+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[o]=this._x,r[o+1]=this._y,r[o+2]=this._z,r[o+3]=this._w,r}},{key:"fromBufferAttribute",value:function(r,o){return this._x=r.getX(o),this._y=r.getY(o),this._z=r.getZ(o),this._w=r.getW(o),this}},{key:"_onChange",value:function(r){return this._onChangeCallback=r,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:yi.mark(function e(){return yi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this._x;case 2:return o.next=4,this._y;case 4:return o.next=6,this._z;case 6:return o.next=8,this._w;case 8:case"end":return o.stop()}},e,this)})}],[{key:"slerpFlat",value:function(r,o,u,f,p,v,g){var y=u[f+0],_=u[f+1],C=u[f+2],w=u[f+3],x=p[v+0],E=p[v+1],b=p[v+2],T=p[v+3];if(0===g)return r[o+0]=y,r[o+1]=_,r[o+2]=C,void(r[o+3]=w);if(1===g)return r[o+0]=x,r[o+1]=E,r[o+2]=b,void(r[o+3]=T);if(w!==T||y!==x||_!==E||C!==b){var A=1-g,M=y*x+_*E+C*b+w*T,O=M>=0?1:-1,I=1-M*M;if(I>Number.EPSILON){var B=Math.sqrt(I),z=Math.atan2(B,M*O);A=Math.sin(A*z)/B,g=Math.sin(g*z)/B}var P=g*O;if(y=y*A+x*P,_=_*A+E*P,C=C*A+b*P,w=w*A+T*P,A===1-g){var W=1/Math.sqrt(y*y+_*_+C*C+w*w);y*=W,_*=W,C*=W,w*=W}}r[o]=y,r[o+1]=_,r[o+2]=C,r[o+3]=w}},{key:"multiplyQuaternionsFlat",value:function(r,o,u,f,p,v){var g=u[f],y=u[f+1],_=u[f+2],C=u[f+3],w=p[v],x=p[v+1],E=p[v+2],b=p[v+3];return r[o]=g*b+C*w+y*E-_*x,r[o+1]=y*b+C*x+_*w-g*E,r[o+2]=_*b+C*E+g*x-y*w,r[o+3]=C*b-g*w-y*x-_*E,r}}]),a}(),Z=function(n){function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;N(this,a),a.prototype.isVector3=!0,this.x=e,this.y=r,this.z=o}return j(a,[{key:"set",value:function(r,o,u){return void 0===u&&(u=this.z),this.x=r,this.y=o,this.z=u,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this.z=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setZ",value:function(r){return this.z=r,this}},{key:"setComponent",value:function(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this}},{key:"add",value:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z,this}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this.z+=r,this}},{key:"addVectors",value:function(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this.z=r.z+o.z,this}},{key:"addScaledVector",value:function(r,o){return this.x+=r.x*o,this.y+=r.y*o,this.z+=r.z*o,this}},{key:"sub",value:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z,this}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this.z-=r,this}},{key:"subVectors",value:function(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this.z=r.z-o.z,this}},{key:"multiply",value:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this.z*=r,this}},{key:"multiplyVectors",value:function(r,o){return this.x=r.x*o.x,this.y=r.y*o.y,this.z=r.z*o.z,this}},{key:"applyEuler",value:function(r){return this.applyQuaternion(uF.setFromEuler(r))}},{key:"applyAxisAngle",value:function(r,o){return this.applyQuaternion(uF.setFromAxisAngle(r,o))}},{key:"applyMatrix3",value:function(r){var o=this.x,u=this.y,f=this.z,p=r.elements;return this.x=p[0]*o+p[3]*u+p[6]*f,this.y=p[1]*o+p[4]*u+p[7]*f,this.z=p[2]*o+p[5]*u+p[8]*f,this}},{key:"applyNormalMatrix",value:function(r){return this.applyMatrix3(r).normalize()}},{key:"applyMatrix4",value:function(r){var o=this.x,u=this.y,f=this.z,p=r.elements,v=1/(p[3]*o+p[7]*u+p[11]*f+p[15]);return this.x=(p[0]*o+p[4]*u+p[8]*f+p[12])*v,this.y=(p[1]*o+p[5]*u+p[9]*f+p[13])*v,this.z=(p[2]*o+p[6]*u+p[10]*f+p[14])*v,this}},{key:"applyQuaternion",value:function(r){var o=this.x,u=this.y,f=this.z,p=r.x,v=r.y,g=r.z,y=r.w,_=y*o+v*f-g*u,C=y*u+g*o-p*f,w=y*f+p*u-v*o,x=-p*o-v*u-g*f;return this.x=_*y+x*-p+C*-g-w*-v,this.y=C*y+x*-v+w*-p-_*-g,this.z=w*y+x*-g+_*-v-C*-p,this}},{key:"project",value:function(r){return this.applyMatrix4(r.matrixWorldInverse).applyMatrix4(r.projectionMatrix)}},{key:"unproject",value:function(r){return this.applyMatrix4(r.projectionMatrixInverse).applyMatrix4(r.matrixWorld)}},{key:"transformDirection",value:function(r){var o=this.x,u=this.y,f=this.z,p=r.elements;return this.x=p[0]*o+p[4]*u+p[8]*f,this.y=p[1]*o+p[5]*u+p[9]*f,this.z=p[2]*o+p[6]*u+p[10]*f,this.normalize()}},{key:"divide",value:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this}},{key:"clamp",value:function(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this.z=Math.max(r.z,Math.min(o.z,this.z)),this}},{key:"clampScalar",value:function(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this.z=Math.max(r,Math.min(o,this.z)),this}},{key:"clampLength",value:function(r,o){var u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(r,Math.min(o,u)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y+this.z*r.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this.z+=(r.z-this.z)*o,this}},{key:"lerpVectors",value:function(r,o,u){return this.x=r.x+(o.x-r.x)*u,this.y=r.y+(o.y-r.y)*u,this.z=r.z+(o.z-r.z)*u,this}},{key:"cross",value:function(r){return this.crossVectors(this,r)}},{key:"crossVectors",value:function(r,o){var u=r.x,f=r.y,p=r.z,v=o.x,g=o.y,y=o.z;return this.x=f*y-p*g,this.y=p*v-u*y,this.z=u*g-f*v,this}},{key:"projectOnVector",value:function(r){var o=r.lengthSq();if(0===o)return this.set(0,0,0);var u=r.dot(this)/o;return this.copy(r).multiplyScalar(u)}},{key:"projectOnPlane",value:function(r){return qD.copy(this).projectOnVector(r),this.sub(qD)}},{key:"reflect",value:function(r){return this.sub(qD.copy(r).multiplyScalar(2*this.dot(r)))}},{key:"angleTo",value:function(r){var o=Math.sqrt(this.lengthSq()*r.lengthSq());if(0===o)return Math.PI/2;var u=this.dot(r)/o;return Math.acos(pi(u,-1,1))}},{key:"distanceTo",value:function(r){return Math.sqrt(this.distanceToSquared(r))}},{key:"distanceToSquared",value:function(r){var o=this.x-r.x,u=this.y-r.y,f=this.z-r.z;return o*o+u*u+f*f}},{key:"manhattanDistanceTo",value:function(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)+Math.abs(this.z-r.z)}},{key:"setFromSpherical",value:function(r){return this.setFromSphericalCoords(r.radius,r.phi,r.theta)}},{key:"setFromSphericalCoords",value:function(r,o,u){var f=Math.sin(o)*r;return this.x=f*Math.sin(u),this.y=Math.cos(o)*r,this.z=f*Math.cos(u),this}},{key:"setFromCylindrical",value:function(r){return this.setFromCylindricalCoords(r.radius,r.theta,r.y)}},{key:"setFromCylindricalCoords",value:function(r,o,u){return this.x=r*Math.sin(o),this.y=u,this.z=r*Math.cos(o),this}},{key:"setFromMatrixPosition",value:function(r){var o=r.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this}},{key:"setFromMatrixScale",value:function(r){var o=this.setFromMatrixColumn(r,0).length(),u=this.setFromMatrixColumn(r,1).length(),f=this.setFromMatrixColumn(r,2).length();return this.x=o,this.y=u,this.z=f,this}},{key:"setFromMatrixColumn",value:function(r,o){return this.fromArray(r.elements,4*o)}},{key:"setFromMatrix3Column",value:function(r,o){return this.fromArray(r.elements,3*o)}},{key:"setFromEuler",value:function(r){return this.x=r._x,this.y=r._y,this.z=r._z,this}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z}},{key:"fromArray",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[o],this.y=r[o+1],this.z=r[o+2],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[o]=this.x,r[o+1]=this.y,r[o+2]=this.z,r}},{key:"fromBufferAttribute",value:function(r,o){return this.x=r.getX(o),this.y=r.getY(o),this.z=r.getZ(o),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var r=2*(Math.random()-.5),o=Math.random()*Math.PI*2,u=Math.sqrt(1-Math.pow(r,2));return this.x=u*Math.cos(o),this.y=u*Math.sin(o),this.z=r,this}},{key:Symbol.iterator,value:yi.mark(function e(){return yi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.x;case 2:return o.next=4,this.y;case 4:return o.next=6,this.z;case 6:case"end":return o.stop()}},e,this)})}]),a}(),qD=new Z,uF=new ro,Ks=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Z(1/0,1/0,1/0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Z(-1/0,-1/0,-1/0);N(this,n),this.isBox3=!0,this.min=a,this.max=e}return j(n,[{key:"set",value:function(e,r){return this.min.copy(e),this.max.copy(r),this}},{key:"setFromArray",value:function(e){for(var r=1/0,o=1/0,u=1/0,f=-1/0,p=-1/0,v=-1/0,g=0,y=e.length;g<y;g+=3){var _=e[g],C=e[g+1],w=e[g+2];_<r&&(r=_),C<o&&(o=C),w<u&&(u=w),_>f&&(f=_),C>p&&(p=C),w>v&&(v=w)}return this.min.set(r,o,u),this.max.set(f,p,v),this}},{key:"setFromBufferAttribute",value:function(e){for(var r=1/0,o=1/0,u=1/0,f=-1/0,p=-1/0,v=-1/0,g=0,y=e.count;g<y;g++){var _=e.getX(g),C=e.getY(g),w=e.getZ(g);_<r&&(r=_),C<o&&(o=C),w<u&&(u=w),_>f&&(f=_),C>p&&(p=C),w>v&&(v=w)}return this.min.set(r,o,u),this.max.set(f,p,v),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var r=0,o=e.length;r<o;r++)this.expandByPoint(e[r]);return this}},{key:"setFromCenterAndSize",value:function(e,r){var o=_f.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(o),this.max.copy(e).add(o),this}},{key:"setFromObject",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,r)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var o=e.geometry;if(void 0!==o)if(r&&null!=o.attributes&&void 0!==o.attributes.position)for(var u=o.attributes.position,f=0,p=u.count;f<p;f++)_f.fromBufferAttribute(u,f).applyMatrix4(e.matrixWorld),this.expandByPoint(_f);else null===o.boundingBox&&o.computeBoundingBox(),KD.copy(o.boundingBox),KD.applyMatrix4(e.matrixWorld),this.union(KD);for(var v=e.children,g=0,y=v.length;g<y;g++)this.expandByObject(v[g],r);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,r){return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,_f),_f.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var r,o;return e.normal.x>0?(r=e.normal.x*this.min.x,o=e.normal.x*this.max.x):(r=e.normal.x*this.max.x,o=e.normal.x*this.min.x),e.normal.y>0?(r+=e.normal.y*this.min.y,o+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,o+=e.normal.y*this.min.y),e.normal.z>0?(r+=e.normal.z*this.min.z,o+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,o+=e.normal.z*this.min.z),r<=-e.constant&&o>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Ty),GS.subVectors(this.max,Ty),qh.subVectors(e.a,Ty),Kh.subVectors(e.b,Ty),Yh.subVectors(e.c,Ty),Fc.subVectors(Kh,qh),kc.subVectors(Yh,Kh),Cf.subVectors(qh,Yh);var r=[0,-Fc.z,Fc.y,0,-kc.z,kc.y,0,-Cf.z,Cf.y,Fc.z,0,-Fc.x,kc.z,0,-kc.x,Cf.z,0,-Cf.x,-Fc.y,Fc.x,0,-kc.y,kc.x,0,-Cf.y,Cf.x,0];return!(!YD(r,qh,Kh,Yh,GS)||(r=[1,0,0,0,1,0,0,0,1],!YD(r,qh,Kh,Yh,GS)))&&(BS.crossVectors(Fc,kc),YD(r=[BS.x,BS.y,BS.z],qh,Kh,Yh,GS))}},{key:"clampPoint",value:function(e,r){return r.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return _f.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(_f).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(hl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),hl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),hl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),hl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),hl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),hl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),hl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),hl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(hl)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),n}(),hl=[new Z,new Z,new Z,new Z,new Z,new Z,new Z,new Z],_f=new Z,KD=new Ks,qh=new Z,Kh=new Z,Yh=new Z,Fc=new Z,kc=new Z,Cf=new Z,Ty=new Z,GS=new Z,BS=new Z,wf=new Z;function YD(n,a,e,r,o){for(var u=0,f=n.length-3;u<=f;u+=3){wf.fromArray(n,u);var p=o.x*Math.abs(wf.x)+o.y*Math.abs(wf.y)+o.z*Math.abs(wf.z),v=a.dot(wf),g=e.dot(wf),y=r.dot(wf);if(Math.max(-Math.max(v,g,y),Math.min(v,g,y))>p)return!1}return!0}var i4=new Ks,Dy=new Z,$D=new Z,$h=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Z,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;N(this,n),this.center=a,this.radius=e}return j(n,[{key:"set",value:function(e,r){return this.center.copy(e),this.radius=r,this}},{key:"setFromPoints",value:function(e,r){var o=this.center;void 0!==r?o.copy(r):i4.setFromPoints(e).getCenter(o);for(var u=0,f=0,p=e.length;f<p;f++)u=Math.max(u,o.distanceToSquared(e[f]));return this.radius=Math.sqrt(u),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,r){var o=this.center.distanceToSquared(e);return r.copy(e),o>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Dy.subVectors(e,this.center);var r=Dy.lengthSq();if(r>this.radius*this.radius){var o=Math.sqrt(r),u=.5*(o-this.radius);this.center.addScaledVector(Dy,u/o),this.radius+=u}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):($D.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Dy.copy(e.center).add($D)),this.expandByPoint(Dy.copy(e.center).sub($D))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(),vl=new Z,XD=new Z,HS=new Z,Nc=new Z,JD=new Z,VS=new Z,ZD=new Z,WS=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Z,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Z(0,0,-1);N(this,n),this.origin=a,this.direction=e}return j(n,[{key:"set",value:function(e,r){return this.origin.copy(e),this.direction.copy(r),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,r){return r.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,vl)),this}},{key:"closestPointToPoint",value:function(e,r){r.subVectors(e,this.origin);var o=r.dot(this.direction);return o<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(o).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var r=vl.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(vl.copy(this.direction).multiplyScalar(r).add(this.origin),vl.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,r,o,u){XD.copy(e).add(r).multiplyScalar(.5),HS.copy(r).sub(e).normalize(),Nc.copy(this.origin).sub(XD);var C,w,x,E,f=.5*e.distanceTo(r),p=-this.direction.dot(HS),v=Nc.dot(this.direction),g=-Nc.dot(HS),y=Nc.lengthSq(),_=Math.abs(1-p*p);if(_>0)if(w=p*v-g,E=f*_,(C=p*g-v)>=0)if(w>=-E)if(w<=E){var b=1/_;x=(C*=b)*(C+p*(w*=b)+2*v)+w*(p*C+w+2*g)+y}else w=f,x=-(C=Math.max(0,-(p*w+v)))*C+w*(w+2*g)+y;else w=-f,x=-(C=Math.max(0,-(p*w+v)))*C+w*(w+2*g)+y;else w<=-E?x=-(C=Math.max(0,-(-p*f+v)))*C+(w=C>0?-f:Math.min(Math.max(-f,-g),f))*(w+2*g)+y:w<=E?(C=0,x=(w=Math.min(Math.max(-f,-g),f))*(w+2*g)+y):x=-(C=Math.max(0,-(p*f+v)))*C+(w=C>0?f:Math.min(Math.max(-f,-g),f))*(w+2*g)+y;else w=p>0?-f:f,x=-(C=Math.max(0,-(p*w+v)))*C+w*(w+2*g)+y;return o&&o.copy(this.direction).multiplyScalar(C).add(this.origin),u&&u.copy(HS).multiplyScalar(w).add(XD),x}},{key:"intersectSphere",value:function(e,r){vl.subVectors(e.center,this.origin);var o=vl.dot(this.direction),u=vl.dot(vl)-o*o,f=e.radius*e.radius;if(u>f)return null;var p=Math.sqrt(f-u),v=o-p,g=o+p;return v<0&&g<0?null:this.at(v<0?g:v,r)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var r=e.normal.dot(this.direction);if(0===r)return 0===e.distanceToPoint(this.origin)?0:null;var o=-(this.origin.dot(e.normal)+e.constant)/r;return o>=0?o:null}},{key:"intersectPlane",value:function(e,r){var o=this.distanceToPlane(e);return null===o?null:this.at(o,r)}},{key:"intersectsPlane",value:function(e){var r=e.distanceToPoint(this.origin);return 0===r||e.normal.dot(this.direction)*r<0}},{key:"intersectBox",value:function(e,r){var o,u,f,p,v,g,y=1/this.direction.x,_=1/this.direction.y,C=1/this.direction.z,w=this.origin;return y>=0?(o=(e.min.x-w.x)*y,u=(e.max.x-w.x)*y):(o=(e.max.x-w.x)*y,u=(e.min.x-w.x)*y),_>=0?(f=(e.min.y-w.y)*_,p=(e.max.y-w.y)*_):(f=(e.max.y-w.y)*_,p=(e.min.y-w.y)*_),o>p||f>u||((f>o||isNaN(o))&&(o=f),(p<u||isNaN(u))&&(u=p),C>=0?(v=(e.min.z-w.z)*C,g=(e.max.z-w.z)*C):(v=(e.max.z-w.z)*C,g=(e.min.z-w.z)*C),o>g||v>u)||((v>o||o!=o)&&(o=v),(g<u||u!=u)&&(u=g),u<0)?null:this.at(o>=0?o:u,r)}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,vl)}},{key:"intersectTriangle",value:function(e,r,o,u,f){JD.subVectors(r,e),VS.subVectors(o,e),ZD.crossVectors(JD,VS);var v,p=this.direction.dot(ZD);if(p>0){if(u)return null;v=1}else{if(!(p<0))return null;v=-1,p=-p}Nc.subVectors(this.origin,e);var g=v*this.direction.dot(VS.crossVectors(Nc,VS));if(g<0)return null;var y=v*this.direction.dot(JD.cross(Nc));if(y<0||g+y>p)return null;var _=-v*Nc.dot(ZD);return _<0?null:this.at(_/p,f)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(),En=function(){function n(){N(this,n),n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return j(n,[{key:"set",value:function(e,r,o,u,f,p,v,g,y,_,C,w,x,E,b,T){var A=this.elements;return A[0]=e,A[4]=r,A[8]=o,A[12]=u,A[1]=f,A[5]=p,A[9]=v,A[13]=g,A[2]=y,A[6]=_,A[10]=C,A[14]=w,A[3]=x,A[7]=E,A[11]=b,A[15]=T,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new n).fromArray(this.elements)}},{key:"copy",value:function(e){var r=this.elements,o=e.elements;return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],this}},{key:"copyPosition",value:function(e){var r=this.elements,o=e.elements;return r[12]=o[12],r[13]=o[13],r[14]=o[14],this}},{key:"setFromMatrix3",value:function(e){var r=e.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,r,o){return e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),o.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,r,o){return this.set(e.x,r.x,o.x,0,e.y,r.y,o.y,0,e.z,r.z,o.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var r=this.elements,o=e.elements,u=1/Xh.setFromMatrixColumn(e,0).length(),f=1/Xh.setFromMatrixColumn(e,1).length(),p=1/Xh.setFromMatrixColumn(e,2).length();return r[0]=o[0]*u,r[1]=o[1]*u,r[2]=o[2]*u,r[3]=0,r[4]=o[4]*f,r[5]=o[5]*f,r[6]=o[6]*f,r[7]=0,r[8]=o[8]*p,r[9]=o[9]*p,r[10]=o[10]*p,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var r=this.elements,o=e.x,u=e.y,f=e.z,p=Math.cos(o),v=Math.sin(o),g=Math.cos(u),y=Math.sin(u),_=Math.cos(f),C=Math.sin(f);if("XYZ"===e.order){var w=p*_,x=p*C,E=v*_,b=v*C;r[0]=g*_,r[4]=-g*C,r[8]=y,r[1]=x+E*y,r[5]=w-b*y,r[9]=-v*g,r[2]=b-w*y,r[6]=E+x*y,r[10]=p*g}else if("YXZ"===e.order){var T=g*_,A=g*C,M=y*_,O=y*C;r[0]=T+O*v,r[4]=M*v-A,r[8]=p*y,r[1]=p*C,r[5]=p*_,r[9]=-v,r[2]=A*v-M,r[6]=O+T*v,r[10]=p*g}else if("ZXY"===e.order){var I=g*_,B=g*C,z=y*_,P=y*C;r[0]=I-P*v,r[4]=-p*C,r[8]=z+B*v,r[1]=B+z*v,r[5]=p*_,r[9]=P-I*v,r[2]=-p*y,r[6]=v,r[10]=p*g}else if("ZYX"===e.order){var W=p*_,X=p*C,re=v*_,de=v*C;r[0]=g*_,r[4]=re*y-X,r[8]=W*y+de,r[1]=g*C,r[5]=de*y+W,r[9]=X*y-re,r[2]=-y,r[6]=v*g,r[10]=p*g}else if("YZX"===e.order){var ce=p*g,G=p*y,te=v*g,se=v*y;r[0]=g*_,r[4]=se-ce*C,r[8]=te*C+G,r[1]=C,r[5]=p*_,r[9]=-v*_,r[2]=-y*_,r[6]=G*C+te,r[10]=ce-se*C}else if("XZY"===e.order){var le=p*g,ue=p*y,_e=v*g,Re=v*y;r[0]=g*_,r[4]=-C,r[8]=y*_,r[1]=le*C+Re,r[5]=p*_,r[9]=ue*C-_e,r[2]=_e*C-ue,r[6]=v*_,r[10]=Re*C+le}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(o4,e,a4)}},{key:"lookAt",value:function(e,r,o){var u=this.elements;return Ea.subVectors(e,r),0===Ea.lengthSq()&&(Ea.z=1),Ea.normalize(),Gc.crossVectors(o,Ea),0===Gc.lengthSq()&&(1===Math.abs(o.z)?Ea.x+=1e-4:Ea.z+=1e-4,Ea.normalize(),Gc.crossVectors(o,Ea)),Gc.normalize(),US.crossVectors(Ea,Gc),u[0]=Gc.x,u[4]=US.x,u[8]=Ea.x,u[1]=Gc.y,u[5]=US.y,u[9]=Ea.y,u[2]=Gc.z,u[6]=US.z,u[10]=Ea.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,r){var o=e.elements,u=r.elements,f=this.elements,p=o[0],v=o[4],g=o[8],y=o[12],_=o[1],C=o[5],w=o[9],x=o[13],E=o[2],b=o[6],T=o[10],A=o[14],M=o[3],O=o[7],I=o[11],B=o[15],z=u[0],P=u[4],W=u[8],X=u[12],re=u[1],de=u[5],ce=u[9],G=u[13],te=u[2],se=u[6],le=u[10],ue=u[14],_e=u[3],Re=u[7],Se=u[11],Ce=u[15];return f[0]=p*z+v*re+g*te+y*_e,f[4]=p*P+v*de+g*se+y*Re,f[8]=p*W+v*ce+g*le+y*Se,f[12]=p*X+v*G+g*ue+y*Ce,f[1]=_*z+C*re+w*te+x*_e,f[5]=_*P+C*de+w*se+x*Re,f[9]=_*W+C*ce+w*le+x*Se,f[13]=_*X+C*G+w*ue+x*Ce,f[2]=E*z+b*re+T*te+A*_e,f[6]=E*P+b*de+T*se+A*Re,f[10]=E*W+b*ce+T*le+A*Se,f[14]=E*X+b*G+T*ue+A*Ce,f[3]=M*z+O*re+I*te+B*_e,f[7]=M*P+O*de+I*se+B*Re,f[11]=M*W+O*ce+I*le+B*Se,f[15]=M*X+O*G+I*ue+B*Ce,this}},{key:"multiplyScalar",value:function(e){var r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,r=e[0],o=e[4],u=e[8],f=e[12],p=e[1],v=e[5],g=e[9],y=e[13],_=e[2],C=e[6],w=e[10],x=e[14];return e[3]*(+f*g*C-u*y*C-f*v*w+o*y*w+u*v*x-o*g*x)+e[7]*(+r*g*x-r*y*w+f*p*w-u*p*x+u*y*_-f*g*_)+e[11]*(+r*y*C-r*v*x-f*p*C+o*p*x+f*v*_-o*y*_)+e[15]*(-u*v*_-r*g*C+r*v*w+u*p*C-o*p*w+o*g*_)}},{key:"transpose",value:function(){var r,e=this.elements;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,this}},{key:"setPosition",value:function(e,r,o){var u=this.elements;return e.isVector3?(u[12]=e.x,u[13]=e.y,u[14]=e.z):(u[12]=e,u[13]=r,u[14]=o),this}},{key:"invert",value:function(){var e=this.elements,r=e[0],o=e[1],u=e[2],f=e[3],p=e[4],v=e[5],g=e[6],y=e[7],_=e[8],C=e[9],w=e[10],x=e[11],E=e[12],b=e[13],T=e[14],A=e[15],M=C*T*y-b*w*y+b*g*x-v*T*x-C*g*A+v*w*A,O=E*w*y-_*T*y-E*g*x+p*T*x+_*g*A-p*w*A,I=_*b*y-E*C*y+E*v*x-p*b*x-_*v*A+p*C*A,B=E*C*g-_*b*g-E*v*w+p*b*w+_*v*T-p*C*T,z=r*M+o*O+u*I+f*B;if(0===z)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var P=1/z;return e[0]=M*P,e[1]=(b*w*f-C*T*f-b*u*x+o*T*x+C*u*A-o*w*A)*P,e[2]=(v*T*f-b*g*f+b*u*y-o*T*y-v*u*A+o*g*A)*P,e[3]=(C*g*f-v*w*f-C*u*y+o*w*y+v*u*x-o*g*x)*P,e[4]=O*P,e[5]=(_*T*f-E*w*f+E*u*x-r*T*x-_*u*A+r*w*A)*P,e[6]=(E*g*f-p*T*f-E*u*y+r*T*y+p*u*A-r*g*A)*P,e[7]=(p*w*f-_*g*f+_*u*y-r*w*y-p*u*x+r*g*x)*P,e[8]=I*P,e[9]=(E*C*f-_*b*f-E*o*x+r*b*x+_*o*A-r*C*A)*P,e[10]=(p*b*f-E*v*f+E*o*y-r*b*y-p*o*A+r*v*A)*P,e[11]=(_*v*f-p*C*f-_*o*y+r*C*y+p*o*x-r*v*x)*P,e[12]=B*P,e[13]=(_*b*u-E*C*u+E*o*w-r*b*w-_*o*T+r*C*T)*P,e[14]=(E*v*u-p*b*u-E*o*g+r*b*g+p*o*T-r*v*T)*P,e[15]=(p*C*u-_*v*u+_*o*g-r*C*g-p*o*w+r*v*w)*P,this}},{key:"scale",value:function(e){var r=this.elements,o=e.x,u=e.y,f=e.z;return r[0]*=o,r[4]*=u,r[8]*=f,r[1]*=o,r[5]*=u,r[9]*=f,r[2]*=o,r[6]*=u,r[10]*=f,r[3]*=o,r[7]*=u,r[11]*=f,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}},{key:"makeTranslation",value:function(e,r,o){return this.set(1,0,0,e,0,1,0,r,0,0,1,o,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var r=Math.cos(e),o=Math.sin(e);return this.set(1,0,0,0,0,r,-o,0,0,o,r,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var r=Math.cos(e),o=Math.sin(e);return this.set(r,0,o,0,0,1,0,0,-o,0,r,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var r=Math.cos(e),o=Math.sin(e);return this.set(r,-o,0,0,o,r,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,r){var o=Math.cos(r),u=Math.sin(r),f=1-o,p=e.x,v=e.y,g=e.z,y=f*p,_=f*v;return this.set(y*p+o,y*v-u*g,y*g+u*v,0,y*v+u*g,_*v+o,_*g-u*p,0,y*g-u*v,_*g+u*p,f*g*g+o,0,0,0,0,1),this}},{key:"makeScale",value:function(e,r,o){return this.set(e,0,0,0,0,r,0,0,0,0,o,0,0,0,0,1),this}},{key:"makeShear",value:function(e,r,o,u,f,p){return this.set(1,o,f,0,e,1,p,0,r,u,1,0,0,0,0,1),this}},{key:"compose",value:function(e,r,o){var u=this.elements,f=r._x,p=r._y,v=r._z,g=r._w,y=f+f,_=p+p,C=v+v,w=f*y,x=f*_,E=f*C,b=p*_,T=p*C,A=v*C,M=g*y,O=g*_,I=g*C,B=o.x,z=o.y,P=o.z;return u[0]=(1-(b+A))*B,u[1]=(x+I)*B,u[2]=(E-O)*B,u[3]=0,u[4]=(x-I)*z,u[5]=(1-(w+A))*z,u[6]=(T+M)*z,u[7]=0,u[8]=(E+O)*P,u[9]=(T-M)*P,u[10]=(1-(w+b))*P,u[11]=0,u[12]=e.x,u[13]=e.y,u[14]=e.z,u[15]=1,this}},{key:"decompose",value:function(e,r,o){var u=this.elements,f=Xh.set(u[0],u[1],u[2]).length(),p=Xh.set(u[4],u[5],u[6]).length(),v=Xh.set(u[8],u[9],u[10]).length();this.determinant()<0&&(f=-f),e.x=u[12],e.y=u[13],e.z=u[14],Ys.copy(this);var y=1/f,_=1/p,C=1/v;return Ys.elements[0]*=y,Ys.elements[1]*=y,Ys.elements[2]*=y,Ys.elements[4]*=_,Ys.elements[5]*=_,Ys.elements[6]*=_,Ys.elements[8]*=C,Ys.elements[9]*=C,Ys.elements[10]*=C,r.setFromRotationMatrix(Ys),o.x=f,o.y=p,o.z=v,this}},{key:"makePerspective",value:function(e,r,o,u,f,p){var v=this.elements,y=2*f/(o-u),_=(r+e)/(r-e),C=(o+u)/(o-u),w=-(p+f)/(p-f),x=-2*p*f/(p-f);return v[0]=2*f/(r-e),v[4]=0,v[8]=_,v[12]=0,v[1]=0,v[5]=y,v[9]=C,v[13]=0,v[2]=0,v[6]=0,v[10]=w,v[14]=x,v[3]=0,v[7]=0,v[11]=-1,v[15]=0,this}},{key:"makeOrthographic",value:function(e,r,o,u,f,p){var v=this.elements,g=1/(r-e),y=1/(o-u),_=1/(p-f),C=(r+e)*g,w=(o+u)*y,x=(p+f)*_;return v[0]=2*g,v[4]=0,v[8]=0,v[12]=-C,v[1]=0,v[5]=2*y,v[9]=0,v[13]=-w,v[2]=0,v[6]=0,v[10]=-2*_,v[14]=-x,v[3]=0,v[7]=0,v[11]=0,v[15]=1,this}},{key:"equals",value:function(e){for(var r=this.elements,o=e.elements,u=0;u<16;u++)if(r[u]!==o[u])return!1;return!0}},{key:"fromArray",value:function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=0;o<16;o++)this.elements[o]=e[o+r];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.elements;return e[r]=o[0],e[r+1]=o[1],e[r+2]=o[2],e[r+3]=o[3],e[r+4]=o[4],e[r+5]=o[5],e[r+6]=o[6],e[r+7]=o[7],e[r+8]=o[8],e[r+9]=o[9],e[r+10]=o[10],e[r+11]=o[11],e[r+12]=o[12],e[r+13]=o[13],e[r+14]=o[14],e[r+15]=o[15],e}}]),n}(),Xh=new Z,Ys=new En,o4=new Z(0,0,0),a4=new Z(1,1,1),Gc=new Z,US=new Z,Ea=new Z,lF=new En,cF=new ro,dF=function(){var n=function(a){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;N(this,e),this.isEuler=!0,this._x=r,this._y=o,this._z=u,this._order=f}return j(e,[{key:"x",get:function(){return this._x},set:function(o){this._x=o,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(o){this._y=o,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(o){this._z=o,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(o){this._order=o,this._onChangeCallback()}},{key:"set",value:function(o,u,f){var p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=o,this._y=u,this._z=f,this._order=p,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(o){return this._x=o._x,this._y=o._y,this._z=o._z,this._order=o._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,f=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],p=o.elements,v=p[0],g=p[4],y=p[8],_=p[1],C=p[5],w=p[9],x=p[2],E=p[6],b=p[10];switch(u){case"XYZ":this._y=Math.asin(pi(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(-w,b),this._z=Math.atan2(-g,v)):(this._x=Math.atan2(E,C),this._z=0);break;case"YXZ":this._x=Math.asin(-pi(w,-1,1)),Math.abs(w)<.9999999?(this._y=Math.atan2(y,b),this._z=Math.atan2(_,C)):(this._y=Math.atan2(-x,v),this._z=0);break;case"ZXY":this._x=Math.asin(pi(E,-1,1)),Math.abs(E)<.9999999?(this._y=Math.atan2(-x,b),this._z=Math.atan2(-g,C)):(this._y=0,this._z=Math.atan2(_,v));break;case"ZYX":this._y=Math.asin(-pi(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(E,b),this._z=Math.atan2(_,v)):(this._x=0,this._z=Math.atan2(-g,C));break;case"YZX":this._z=Math.asin(pi(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(-w,C),this._y=Math.atan2(-x,v)):(this._x=0,this._y=Math.atan2(y,b));break;case"XZY":this._z=Math.asin(-pi(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(E,C),this._y=Math.atan2(y,v)):(this._x=Math.atan2(-w,b),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+u)}return this._order=u,!0===f&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(o,u,f){return lF.makeRotationFromQuaternion(o),this.setFromRotationMatrix(lF,u,f)}},{key:"setFromVector3",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(o.x,o.y,o.z,u)}},{key:"reorder",value:function(o){return cF.setFromEuler(this),this.setFromQuaternion(cF,o)}},{key:"equals",value:function(o){return o._x===this._x&&o._y===this._y&&o._z===this._z&&o._order===this._order}},{key:"fromArray",value:function(o){return this._x=o[0],this._y=o[1],this._z=o[2],void 0!==o[3]&&(this._order=o[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o[u]=this._x,o[u+1]=this._y,o[u+2]=this._z,o[u+3]=this._order,o}},{key:"_onChange",value:function(o){return this._onChangeCallback=o,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:yi.mark(function r(){return yi.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this._x;case 2:return u.next=4,this._y;case 4:return u.next=6,this._z;case 6:return u.next=8,this._order;case 8:case"end":return u.stop()}},r,this)})},{key:"toVector3",value:function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}]),e}();return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n}(),QD=function(){function n(){N(this,n),this.mask=1}return j(n,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!=(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!=(this.mask&(1<<e|0))}}]),n}(),s4=0,fF=new Z,Jh=new ro,gl=new En,zS=new Z,Ay=new Z,u4=new Z,l4=new ro,pF=new Z(1,0,0),hF=new Z(0,1,0),vF=new Z(0,0,1),c4={type:"added"},gF={type:"removed"},Co=function(){var n=function(a){ve(r,a);var e=ge(r);function r(){var o;N(this,r),(o=e.call(this)).isObject3D=!0,Object.defineProperty(Yn(o),"id",{value:s4++}),o.uuid=rs(),o.name="",o.type="Object3D",o.parent=null,o.children=[],o.up=r.DefaultUp.clone();var u=new Z,f=new dF,p=new ro,v=new Z(1,1,1);return f._onChange(function(){p.setFromEuler(f,!1)}),p._onChange(function(){f.setFromQuaternion(p,void 0,!1)}),Object.defineProperties(Yn(o),{position:{configurable:!0,enumerable:!0,value:u},rotation:{configurable:!0,enumerable:!0,value:f},quaternion:{configurable:!0,enumerable:!0,value:p},scale:{configurable:!0,enumerable:!0,value:v},modelViewMatrix:{value:new En},normalMatrix:{value:new js}}),o.matrix=new En,o.matrixWorld=new En,o.matrixAutoUpdate=r.DefaultMatrixAutoUpdate,o.matrixWorldNeedsUpdate=!1,o.matrixWorldAutoUpdate=r.DefaultMatrixWorldAutoUpdate,o.layers=new QD,o.visible=!0,o.castShadow=!1,o.receiveShadow=!1,o.frustumCulled=!0,o.renderOrder=0,o.animations=[],o.userData={},o}return j(r,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(u){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(u),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(u){return this.quaternion.premultiply(u),this}},{key:"setRotationFromAxisAngle",value:function(u,f){this.quaternion.setFromAxisAngle(u,f)}},{key:"setRotationFromEuler",value:function(u){this.quaternion.setFromEuler(u,!0)}},{key:"setRotationFromMatrix",value:function(u){this.quaternion.setFromRotationMatrix(u)}},{key:"setRotationFromQuaternion",value:function(u){this.quaternion.copy(u)}},{key:"rotateOnAxis",value:function(u,f){return Jh.setFromAxisAngle(u,f),this.quaternion.multiply(Jh),this}},{key:"rotateOnWorldAxis",value:function(u,f){return Jh.setFromAxisAngle(u,f),this.quaternion.premultiply(Jh),this}},{key:"rotateX",value:function(u){return this.rotateOnAxis(pF,u)}},{key:"rotateY",value:function(u){return this.rotateOnAxis(hF,u)}},{key:"rotateZ",value:function(u){return this.rotateOnAxis(vF,u)}},{key:"translateOnAxis",value:function(u,f){return fF.copy(u).applyQuaternion(this.quaternion),this.position.add(fF.multiplyScalar(f)),this}},{key:"translateX",value:function(u){return this.translateOnAxis(pF,u)}},{key:"translateY",value:function(u){return this.translateOnAxis(hF,u)}},{key:"translateZ",value:function(u){return this.translateOnAxis(vF,u)}},{key:"localToWorld",value:function(u){return this.updateWorldMatrix(!0,!1),u.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(u){return this.updateWorldMatrix(!0,!1),u.applyMatrix4(gl.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(u,f,p){u.isVector3?zS.copy(u):zS.set(u,f,p);var v=this.parent;this.updateWorldMatrix(!0,!1),Ay.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?gl.lookAt(Ay,zS,this.up):gl.lookAt(zS,Ay,this.up),this.quaternion.setFromRotationMatrix(gl),v&&(gl.extractRotation(v.matrixWorld),Jh.setFromRotationMatrix(gl),this.quaternion.premultiply(Jh.invert()))}},{key:"add",value:function(u){if(arguments.length>1){for(var f=0;f<arguments.length;f++)this.add(arguments[f]);return this}return u===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",u),this):(u&&u.isObject3D?(null!==u.parent&&u.parent.remove(u),u.parent=this,this.children.push(u),u.dispatchEvent(c4)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",u),this)}},{key:"remove",value:function(u){if(arguments.length>1){for(var f=0;f<arguments.length;f++)this.remove(arguments[f]);return this}var p=this.children.indexOf(u);return-1!==p&&(u.parent=null,this.children.splice(p,1),u.dispatchEvent(gF)),this}},{key:"removeFromParent",value:function(){var u=this.parent;return null!==u&&u.remove(this),this}},{key:"clear",value:function(){for(var u=0;u<this.children.length;u++){var f=this.children[u];f.parent=null,f.dispatchEvent(gF)}return this.children.length=0,this}},{key:"attach",value:function(u){return this.updateWorldMatrix(!0,!1),gl.copy(this.matrixWorld).invert(),null!==u.parent&&(u.parent.updateWorldMatrix(!0,!1),gl.multiply(u.parent.matrixWorld)),u.applyMatrix4(gl),this.add(u),u.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(u){return this.getObjectByProperty("id",u)}},{key:"getObjectByName",value:function(u){return this.getObjectByProperty("name",u)}},{key:"getObjectByProperty",value:function(u,f){if(this[u]===f)return this;for(var p=0,v=this.children.length;p<v;p++){var y=this.children[p].getObjectByProperty(u,f);if(void 0!==y)return y}}},{key:"getObjectsByProperty",value:function(u,f){var p=[];this[u]===f&&p.push(this);for(var v=0,g=this.children.length;v<g;v++){var y=this.children[v].getObjectsByProperty(u,f);y.length>0&&(p=p.concat(y))}return p}},{key:"getWorldPosition",value:function(u){return this.updateWorldMatrix(!0,!1),u.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(u){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ay,u,u4),u}},{key:"getWorldScale",value:function(u){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ay,l4,u),u}},{key:"getWorldDirection",value:function(u){this.updateWorldMatrix(!0,!1);var f=this.matrixWorld.elements;return u.set(f[8],f[9],f[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(u){u(this);for(var f=this.children,p=0,v=f.length;p<v;p++)f[p].traverse(u)}},{key:"traverseVisible",value:function(u){if(!1!==this.visible){u(this);for(var f=this.children,p=0,v=f.length;p<v;p++)f[p].traverseVisible(u)}}},{key:"traverseAncestors",value:function(u){var f=this.parent;null!==f&&(u(f),f.traverseAncestors(u))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(u){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||u)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,u=!0);for(var f=this.children,p=0,v=f.length;p<v;p++){var g=f[p];(!0===g.matrixWorldAutoUpdate||!0===u)&&g.updateMatrixWorld(u)}}},{key:"updateWorldMatrix",value:function(u,f){var p=this.parent;if(!0===u&&null!==p&&!0===p.matrixWorldAutoUpdate&&p.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===f)for(var v=this.children,g=0,y=v.length;g<y;g++){var _=v[g];!0===_.matrixWorldAutoUpdate&&_.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(u){var f=void 0===u||"string"==typeof u,p={};f&&(u={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},p.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var v={};function g(G,te){return void 0===G[te.uuid]&&(G[te.uuid]=te.toJSON(u)),te.uuid}if(v.uuid=this.uuid,v.type=this.type,""!==this.name&&(v.name=this.name),!0===this.castShadow&&(v.castShadow=!0),!0===this.receiveShadow&&(v.receiveShadow=!0),!1===this.visible&&(v.visible=!1),!1===this.frustumCulled&&(v.frustumCulled=!1),0!==this.renderOrder&&(v.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(v.userData=this.userData),v.layers=this.layers.mask,v.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(v.matrixAutoUpdate=!1),this.isInstancedMesh&&(v.type="InstancedMesh",v.count=this.count,v.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(v.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?v.background=this.background.toJSON():this.background.isTexture&&(v.background=this.background.toJSON(u).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(v.environment=this.environment.toJSON(u).uuid);else if(this.isMesh||this.isLine||this.isPoints){v.geometry=g(u.geometries,this.geometry);var y=this.geometry.parameters;if(void 0!==y&&void 0!==y.shapes){var _=y.shapes;if(Array.isArray(_))for(var C=0,w=_.length;C<w;C++)g(u.shapes,_[C]);else g(u.shapes,_)}}if(this.isSkinnedMesh&&(v.bindMode=this.bindMode,v.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(g(u.skeletons,this.skeleton),v.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var E=[],b=0,T=this.material.length;b<T;b++)E.push(g(u.materials,this.material[b]));v.material=E}else v.material=g(u.materials,this.material);if(this.children.length>0){v.children=[];for(var A=0;A<this.children.length;A++)v.children.push(this.children[A].toJSON(u).object)}if(this.animations.length>0){v.animations=[];for(var M=0;M<this.animations.length;M++)v.animations.push(g(u.animations,this.animations[M]))}if(f){var I=ce(u.geometries),B=ce(u.materials),z=ce(u.textures),P=ce(u.images),W=ce(u.shapes),X=ce(u.skeletons),re=ce(u.animations),de=ce(u.nodes);I.length>0&&(p.geometries=I),B.length>0&&(p.materials=B),z.length>0&&(p.textures=z),P.length>0&&(p.images=P),W.length>0&&(p.shapes=W),X.length>0&&(p.skeletons=X),re.length>0&&(p.animations=re),de.length>0&&(p.nodes=de)}return p.object=v,p;function ce(G){var te=[];for(var se in G){var le=G[se];delete le.metadata,te.push(le)}return te}}},{key:"clone",value:function(u){return(new this.constructor).copy(this,u)}},{key:"copy",value:function(u){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=u.name,this.up.copy(u.up),this.position.copy(u.position),this.rotation.order=u.rotation.order,this.quaternion.copy(u.quaternion),this.scale.copy(u.scale),this.matrix.copy(u.matrix),this.matrixWorld.copy(u.matrixWorld),this.matrixAutoUpdate=u.matrixAutoUpdate,this.matrixWorldNeedsUpdate=u.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=u.matrixWorldAutoUpdate,this.layers.mask=u.layers.mask,this.visible=u.visible,this.castShadow=u.castShadow,this.receiveShadow=u.receiveShadow,this.frustumCulled=u.frustumCulled,this.renderOrder=u.renderOrder,this.userData=JSON.parse(JSON.stringify(u.userData)),!0===f)for(var p=0;p<u.children.length;p++){var v=u.children[p];this.add(v.clone())}return this}}]),r}(fl);return n.DefaultUp=new Z(0,1,0),n.DefaultMatrixAutoUpdate=!0,n.DefaultMatrixWorldAutoUpdate=!0,n}(),$s=new Z,ml=new Z,eA=new Z,yl=new Z,Zh=new Z,Qh=new Z,mF=new Z,tA=new Z,nA=new Z,rA=new Z,jS=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Z,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Z,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Z;N(this,n),this.a=a,this.b=e,this.c=r}return j(n,[{key:"set",value:function(e,r,o){return this.a.copy(e),this.b.copy(r),this.c.copy(o),this}},{key:"setFromPointsAndIndices",value:function(e,r,o,u){return this.a.copy(e[r]),this.b.copy(e[o]),this.c.copy(e[u]),this}},{key:"setFromAttributeAndIndices",value:function(e,r,o,u){return this.a.fromBufferAttribute(e,r),this.b.fromBufferAttribute(e,o),this.c.fromBufferAttribute(e,u),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return $s.subVectors(this.c,this.b),ml.subVectors(this.a,this.b),.5*$s.cross(ml).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return n.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,r){return n.getBarycoord(e,this.a,this.b,this.c,r)}},{key:"getUV",value:function(e,r,o,u,f){return n.getUV(e,this.a,this.b,this.c,r,o,u,f)}},{key:"containsPoint",value:function(e){return n.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return n.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,r){var p,v,o=this.a,u=this.b,f=this.c;Zh.subVectors(u,o),Qh.subVectors(f,o),tA.subVectors(e,o);var g=Zh.dot(tA),y=Qh.dot(tA);if(g<=0&&y<=0)return r.copy(o);nA.subVectors(e,u);var _=Zh.dot(nA),C=Qh.dot(nA);if(_>=0&&C<=_)return r.copy(u);var w=g*C-_*y;if(w<=0&&g>=0&&_<=0)return p=g/(g-_),r.copy(o).addScaledVector(Zh,p);rA.subVectors(e,f);var x=Zh.dot(rA),E=Qh.dot(rA);if(E>=0&&x<=E)return r.copy(f);var b=x*y-g*E;if(b<=0&&y>=0&&E<=0)return v=y/(y-E),r.copy(o).addScaledVector(Qh,v);var T=_*E-x*C;if(T<=0&&C-_>=0&&x-E>=0)return mF.subVectors(f,u),v=(C-_)/(C-_+(x-E)),r.copy(u).addScaledVector(mF,v);var A=1/(T+b+w);return p=b*A,v=w*A,r.copy(o).addScaledVector(Zh,p).addScaledVector(Qh,v)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,r,o,u){u.subVectors(o,r),$s.subVectors(e,r),u.cross($s);var f=u.lengthSq();return f>0?u.multiplyScalar(1/Math.sqrt(f)):u.set(0,0,0)}},{key:"getBarycoord",value:function(e,r,o,u,f){$s.subVectors(u,r),ml.subVectors(o,r),eA.subVectors(e,r);var p=$s.dot($s),v=$s.dot(ml),g=$s.dot(eA),y=ml.dot(ml),_=ml.dot(eA),C=p*y-v*v;if(0===C)return f.set(-2,-1,-1);var w=1/C,x=(y*g-v*_)*w,E=(p*_-v*g)*w;return f.set(1-x-E,E,x)}},{key:"containsPoint",value:function(e,r,o,u){return this.getBarycoord(e,r,o,u,yl),yl.x>=0&&yl.y>=0&&yl.x+yl.y<=1}},{key:"getUV",value:function(e,r,o,u,f,p,v,g){return this.getBarycoord(e,r,o,u,yl),g.set(0,0),g.addScaledVector(f,yl.x),g.addScaledVector(p,yl.y),g.addScaledVector(v,yl.z),g}},{key:"isFrontFacing",value:function(e,r,o,u){return $s.subVectors(o,r),ml.subVectors(e,r),$s.cross(ml).dot(u)<0}}]),n}(),d4=0,is=function(n){ve(e,n);var a=ge(e);function e(){var r;return N(this,e),(r=a.call(this)).isMaterial=!0,Object.defineProperty(Yn(r),"id",{value:d4++}),r.uuid=rs(),r.name="",r.type="Material",r.blending=1,r.side=0,r.vertexColors=!1,r.opacity=1,r.transparent=!1,r.blendSrc=204,r.blendDst=205,r.blendEquation=100,r.blendSrcAlpha=null,r.blendDstAlpha=null,r.blendEquationAlpha=null,r.depthFunc=3,r.depthTest=!0,r.depthWrite=!0,r.stencilWriteMask=255,r.stencilFunc=519,r.stencilRef=0,r.stencilFuncMask=255,r.stencilFail=7680,r.stencilZFail=7680,r.stencilZPass=7680,r.stencilWrite=!1,r.clippingPlanes=null,r.clipIntersection=!1,r.clipShadows=!1,r.shadowSide=null,r.colorWrite=!0,r.precision=null,r.polygonOffset=!1,r.polygonOffsetFactor=0,r.polygonOffsetUnits=0,r.dithering=!1,r.alphaToCoverage=!1,r.premultipliedAlpha=!1,r.visible=!0,r.toneMapped=!0,r.userData={},r.version=0,r._alphaTest=0,r}return j(e,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(o){this._alphaTest>0!=o>0&&this.version++,this._alphaTest=o}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(o){if(void 0!==o)for(var u in o){var f=o[u];if(void 0!==f){var p=this[u];void 0!==p?p&&p.isColor?p.set(f):p&&p.isVector3&&f&&f.isVector3?p.copy(f):this[u]=f:console.warn("THREE."+this.type+": '"+u+"' is not a property of this material.")}else console.warn("THREE.Material: '"+u+"' parameter is undefined.")}}},{key:"toJSON",value:function(o){var u=void 0===o||"string"==typeof o;u&&(o={textures:{},images:{}});var f={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function p(y){var _=[];for(var C in y){var w=y[C];delete w.metadata,_.push(w)}return _}if(f.uuid=this.uuid,f.type=this.type,""!==this.name&&(f.name=this.name),this.color&&this.color.isColor&&(f.color=this.color.getHex()),void 0!==this.roughness&&(f.roughness=this.roughness),void 0!==this.metalness&&(f.metalness=this.metalness),void 0!==this.sheen&&(f.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(f.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(f.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(f.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(f.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(f.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(f.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(f.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(f.shininess=this.shininess),void 0!==this.clearcoat&&(f.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(f.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(f.clearcoatMap=this.clearcoatMap.toJSON(o).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(f.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(o).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(f.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(o).uuid,f.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(f.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(f.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(f.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(f.iridescenceMap=this.iridescenceMap.toJSON(o).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(f.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(o).uuid),this.map&&this.map.isTexture&&(f.map=this.map.toJSON(o).uuid),this.matcap&&this.matcap.isTexture&&(f.matcap=this.matcap.toJSON(o).uuid),this.alphaMap&&this.alphaMap.isTexture&&(f.alphaMap=this.alphaMap.toJSON(o).uuid),this.lightMap&&this.lightMap.isTexture&&(f.lightMap=this.lightMap.toJSON(o).uuid,f.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(f.aoMap=this.aoMap.toJSON(o).uuid,f.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(f.bumpMap=this.bumpMap.toJSON(o).uuid,f.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(f.normalMap=this.normalMap.toJSON(o).uuid,f.normalMapType=this.normalMapType,f.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(f.displacementMap=this.displacementMap.toJSON(o).uuid,f.displacementScale=this.displacementScale,f.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(f.roughnessMap=this.roughnessMap.toJSON(o).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(f.metalnessMap=this.metalnessMap.toJSON(o).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(f.emissiveMap=this.emissiveMap.toJSON(o).uuid),this.specularMap&&this.specularMap.isTexture&&(f.specularMap=this.specularMap.toJSON(o).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(f.specularIntensityMap=this.specularIntensityMap.toJSON(o).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(f.specularColorMap=this.specularColorMap.toJSON(o).uuid),this.envMap&&this.envMap.isTexture&&(f.envMap=this.envMap.toJSON(o).uuid,void 0!==this.combine&&(f.combine=this.combine)),void 0!==this.envMapIntensity&&(f.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(f.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(f.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(f.gradientMap=this.gradientMap.toJSON(o).uuid),void 0!==this.transmission&&(f.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(f.transmissionMap=this.transmissionMap.toJSON(o).uuid),void 0!==this.thickness&&(f.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(f.thicknessMap=this.thicknessMap.toJSON(o).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(f.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(f.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(f.size=this.size),null!==this.shadowSide&&(f.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(f.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(f.blending=this.blending),0!==this.side&&(f.side=this.side),this.vertexColors&&(f.vertexColors=!0),this.opacity<1&&(f.opacity=this.opacity),!0===this.transparent&&(f.transparent=this.transparent),f.depthFunc=this.depthFunc,f.depthTest=this.depthTest,f.depthWrite=this.depthWrite,f.colorWrite=this.colorWrite,f.stencilWrite=this.stencilWrite,f.stencilWriteMask=this.stencilWriteMask,f.stencilFunc=this.stencilFunc,f.stencilRef=this.stencilRef,f.stencilFuncMask=this.stencilFuncMask,f.stencilFail=this.stencilFail,f.stencilZFail=this.stencilZFail,f.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(f.rotation=this.rotation),!0===this.polygonOffset&&(f.polygonOffset=!0),0!==this.polygonOffsetFactor&&(f.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(f.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(f.linewidth=this.linewidth),void 0!==this.dashSize&&(f.dashSize=this.dashSize),void 0!==this.gapSize&&(f.gapSize=this.gapSize),void 0!==this.scale&&(f.scale=this.scale),!0===this.dithering&&(f.dithering=!0),this.alphaTest>0&&(f.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(f.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(f.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(f.wireframe=this.wireframe),this.wireframeLinewidth>1&&(f.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(f.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(f.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(f.flatShading=this.flatShading),!1===this.visible&&(f.visible=!1),!1===this.toneMapped&&(f.toneMapped=!1),!1===this.fog&&(f.fog=!1),Object.keys(this.userData).length>0&&(f.userData=this.userData),u){var v=p(o.textures),g=p(o.images);v.length>0&&(f.textures=v),g.length>0&&(f.images=g)}return f}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(o){this.name=o.name,this.blending=o.blending,this.side=o.side,this.vertexColors=o.vertexColors,this.opacity=o.opacity,this.transparent=o.transparent,this.blendSrc=o.blendSrc,this.blendDst=o.blendDst,this.blendEquation=o.blendEquation,this.blendSrcAlpha=o.blendSrcAlpha,this.blendDstAlpha=o.blendDstAlpha,this.blendEquationAlpha=o.blendEquationAlpha,this.depthFunc=o.depthFunc,this.depthTest=o.depthTest,this.depthWrite=o.depthWrite,this.stencilWriteMask=o.stencilWriteMask,this.stencilFunc=o.stencilFunc,this.stencilRef=o.stencilRef,this.stencilFuncMask=o.stencilFuncMask,this.stencilFail=o.stencilFail,this.stencilZFail=o.stencilZFail,this.stencilZPass=o.stencilZPass,this.stencilWrite=o.stencilWrite;var u=o.clippingPlanes,f=null;if(null!==u){var p=u.length;f=new Array(p);for(var v=0;v!==p;++v)f[v]=u[v].clone()}return this.clippingPlanes=f,this.clipIntersection=o.clipIntersection,this.clipShadows=o.clipShadows,this.shadowSide=o.shadowSide,this.colorWrite=o.colorWrite,this.precision=o.precision,this.polygonOffset=o.polygonOffset,this.polygonOffsetFactor=o.polygonOffsetFactor,this.polygonOffsetUnits=o.polygonOffsetUnits,this.dithering=o.dithering,this.alphaTest=o.alphaTest,this.alphaToCoverage=o.alphaToCoverage,this.premultipliedAlpha=o.premultipliedAlpha,this.visible=o.visible,this.toneMapped=o.toneMapped,this.userData=JSON.parse(JSON.stringify(o.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(o){!0===o&&this.version++}}]),e}(fl),xa=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this)).isMeshBasicMaterial=!0,o.type="MeshBasicMaterial",o.color=new Ht(16777215),o.map=null,o.lightMap=null,o.lightMapIntensity=1,o.aoMap=null,o.aoMapIntensity=1,o.specularMap=null,o.alphaMap=null,o.envMap=null,o.combine=0,o.reflectivity=1,o.refractionRatio=.98,o.wireframe=!1,o.wireframeLinewidth=1,o.wireframeLinecap="round",o.wireframeLinejoin="round",o.fog=!0,o.setValues(r),o}return j(e,[{key:"copy",value:function(o){return we(ze(e.prototype),"copy",this).call(this,o),this.color.copy(o.color),this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.fog=o.fog,this}}]),e}(is),hi=new Z,qS=new $e,io=function(){function n(a,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(N(this,n),Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=a,this.itemSize=e,this.count=void 0!==a?a.length/e:0,this.normalized=r,this.usage=GD,this.updateRange={offset:0,count:-1},this.version=0}return j(n,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,r,o){e*=this.itemSize,o*=r.itemSize;for(var u=0,f=this.itemSize;u<f;u++)this.array[e+u]=r.array[o+u];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var r=0,o=this.count;r<o;r++)qS.fromBufferAttribute(this,r),qS.applyMatrix3(e),this.setXY(r,qS.x,qS.y);else if(3===this.itemSize)for(var u=0,f=this.count;u<f;u++)hi.fromBufferAttribute(this,u),hi.applyMatrix3(e),this.setXYZ(u,hi.x,hi.y,hi.z);return this}},{key:"applyMatrix4",value:function(e){for(var r=0,o=this.count;r<o;r++)hi.fromBufferAttribute(this,r),hi.applyMatrix4(e),this.setXYZ(r,hi.x,hi.y,hi.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var r=0,o=this.count;r<o;r++)hi.fromBufferAttribute(this,r),hi.applyNormalMatrix(e),this.setXYZ(r,hi.x,hi.y,hi.z);return this}},{key:"transformDirection",value:function(e){for(var r=0,o=this.count;r<o;r++)hi.fromBufferAttribute(this,r),hi.transformDirection(e),this.setXYZ(r,hi.x,hi.y,hi.z);return this}},{key:"set",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,r),this}},{key:"getX",value:function(e){var r=this.array[e*this.itemSize];return this.normalized&&(r=pl(r,this.array)),r}},{key:"setX",value:function(e,r){return this.normalized&&(r=gr(r,this.array)),this.array[e*this.itemSize]=r,this}},{key:"getY",value:function(e){var r=this.array[e*this.itemSize+1];return this.normalized&&(r=pl(r,this.array)),r}},{key:"setY",value:function(e,r){return this.normalized&&(r=gr(r,this.array)),this.array[e*this.itemSize+1]=r,this}},{key:"getZ",value:function(e){var r=this.array[e*this.itemSize+2];return this.normalized&&(r=pl(r,this.array)),r}},{key:"setZ",value:function(e,r){return this.normalized&&(r=gr(r,this.array)),this.array[e*this.itemSize+2]=r,this}},{key:"getW",value:function(e){var r=this.array[e*this.itemSize+3];return this.normalized&&(r=pl(r,this.array)),r}},{key:"setW",value:function(e,r){return this.normalized&&(r=gr(r,this.array)),this.array[e*this.itemSize+3]=r,this}},{key:"setXY",value:function(e,r,o){return e*=this.itemSize,this.normalized&&(r=gr(r,this.array),o=gr(o,this.array)),this.array[e+0]=r,this.array[e+1]=o,this}},{key:"setXYZ",value:function(e,r,o,u){return e*=this.itemSize,this.normalized&&(r=gr(r,this.array),o=gr(o,this.array),u=gr(u,this.array)),this.array[e+0]=r,this.array[e+1]=o,this.array[e+2]=u,this}},{key:"setXYZW",value:function(e,r,o,u,f){return e*=this.itemSize,this.normalized&&(r=gr(r,this.array),o=gr(o,this.array),u=gr(u,this.array),f=gr(f,this.array)),this.array[e+0]=r,this.array[e+1]=o,this.array[e+2]=u,this.array[e+3]=f,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==GD&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}]),n}(),yF=function(n){ve(e,n);var a=ge(e);function e(r,o,u){return N(this,e),a.call(this,new Uint16Array(r),o,u)}return e}(io),_F=function(n){ve(e,n);var a=ge(e);function e(r,o,u){return N(this,e),a.call(this,new Uint32Array(r),o,u)}return e}(io),dn=function(n){ve(e,n);var a=ge(e);function e(r,o,u){return N(this,e),a.call(this,new Float32Array(r),o,u)}return e}(io),f4=0,os=new En,iA=new Co,ev=new Z,Ra=new Ks,My=new Ks,ji=new Z,Pr=function(n){ve(e,n);var a=ge(e);function e(){var r;return N(this,e),(r=a.call(this)).isBufferGeometry=!0,Object.defineProperty(Yn(r),"id",{value:f4++}),r.uuid=rs(),r.name="",r.type="BufferGeometry",r.index=null,r.attributes={},r.morphAttributes={},r.morphTargetsRelative=!1,r.groups=[],r.boundingBox=null,r.boundingSphere=null,r.drawRange={start:0,count:1/0},r.userData={},r}return j(e,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(o){return this.index=Array.isArray(o)?new(rF(o)?_F:yF)(o,1):o,this}},{key:"getAttribute",value:function(o){return this.attributes[o]}},{key:"setAttribute",value:function(o,u){return this.attributes[o]=u,this}},{key:"deleteAttribute",value:function(o){return delete this.attributes[o],this}},{key:"hasAttribute",value:function(o){return void 0!==this.attributes[o]}},{key:"addGroup",value:function(o,u){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:o,count:u,materialIndex:f})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(o,u){this.drawRange.start=o,this.drawRange.count=u}},{key:"applyMatrix4",value:function(o){var u=this.attributes.position;void 0!==u&&(u.applyMatrix4(o),u.needsUpdate=!0);var f=this.attributes.normal;if(void 0!==f){var p=(new js).getNormalMatrix(o);f.applyNormalMatrix(p),f.needsUpdate=!0}var v=this.attributes.tangent;return void 0!==v&&(v.transformDirection(o),v.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(o){return os.makeRotationFromQuaternion(o),this.applyMatrix4(os),this}},{key:"rotateX",value:function(o){return os.makeRotationX(o),this.applyMatrix4(os),this}},{key:"rotateY",value:function(o){return os.makeRotationY(o),this.applyMatrix4(os),this}},{key:"rotateZ",value:function(o){return os.makeRotationZ(o),this.applyMatrix4(os),this}},{key:"translate",value:function(o,u,f){return os.makeTranslation(o,u,f),this.applyMatrix4(os),this}},{key:"scale",value:function(o,u,f){return os.makeScale(o,u,f),this.applyMatrix4(os),this}},{key:"lookAt",value:function(o){return iA.lookAt(o),iA.updateMatrix(),this.applyMatrix4(iA.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ev).negate(),this.translate(ev.x,ev.y,ev.z),this}},{key:"setFromPoints",value:function(o){for(var u=[],f=0,p=o.length;f<p;f++){var v=o[f];u.push(v.x,v.y,v.z||0)}return this.setAttribute("position",new dn(u,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Ks);var o=this.attributes.position,u=this.morphAttributes.position;if(o&&o.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Z(-1/0,-1/0,-1/0),new Z(1/0,1/0,1/0));if(void 0!==o){if(this.boundingBox.setFromBufferAttribute(o),u)for(var f=0,p=u.length;f<p;f++)Ra.setFromBufferAttribute(u[f]),this.morphTargetsRelative?(ji.addVectors(this.boundingBox.min,Ra.min),this.boundingBox.expandByPoint(ji),ji.addVectors(this.boundingBox.max,Ra.max),this.boundingBox.expandByPoint(ji)):(this.boundingBox.expandByPoint(Ra.min),this.boundingBox.expandByPoint(Ra.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new $h);var o=this.attributes.position,u=this.morphAttributes.position;if(o&&o.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Z,1/0);if(o){var f=this.boundingSphere.center;if(Ra.setFromBufferAttribute(o),u)for(var p=0,v=u.length;p<v;p++)My.setFromBufferAttribute(u[p]),this.morphTargetsRelative?(ji.addVectors(Ra.min,My.min),Ra.expandByPoint(ji),ji.addVectors(Ra.max,My.max),Ra.expandByPoint(ji)):(Ra.expandByPoint(My.min),Ra.expandByPoint(My.max));Ra.getCenter(f);for(var y=0,_=0,C=o.count;_<C;_++)ji.fromBufferAttribute(o,_),y=Math.max(y,f.distanceToSquared(ji));if(u)for(var w=0,x=u.length;w<x;w++)for(var E=u[w],b=this.morphTargetsRelative,T=0,A=E.count;T<A;T++)ji.fromBufferAttribute(E,T),b&&(ev.fromBufferAttribute(o,T),ji.add(ev)),y=Math.max(y,f.distanceToSquared(ji));this.boundingSphere.radius=Math.sqrt(y),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var o=this.index,u=this.attributes;if(null!==o&&void 0!==u.position&&void 0!==u.normal&&void 0!==u.uv){var f=o.array,p=u.position.array,v=u.normal.array,g=u.uv.array,y=p.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new io(new Float32Array(4*y),4));for(var _=this.getAttribute("tangent").array,C=[],w=[],x=0;x<y;x++)C[x]=new Z,w[x]=new Z;var E=new Z,b=new Z,T=new Z,A=new $e,M=new $e,O=new $e,I=new Z,B=new Z,P=this.groups;0===P.length&&(P=[{start:0,count:f.length}]);for(var W=0,X=P.length;W<X;++W)for(var re=P[W],de=re.start,G=de,te=de+re.count;G<te;G+=3)z(f[G+0],f[G+1],f[G+2]);for(var se=new Z,le=new Z,ue=new Z,_e=new Z,Se=0,Ce=P.length;Se<Ce;++Se)for(var Be=P[Se],xe=Be.start,me=xe,Je=xe+Be.count;me<Je;me+=3)Re(f[me+0]),Re(f[me+1]),Re(f[me+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function z(Ne,qe,Ue){E.fromArray(p,3*Ne),b.fromArray(p,3*qe),T.fromArray(p,3*Ue),A.fromArray(g,2*Ne),M.fromArray(g,2*qe),O.fromArray(g,2*Ue),b.sub(E),T.sub(E),M.sub(A),O.sub(A);var je=1/(M.x*O.y-O.x*M.y);!isFinite(je)||(I.copy(b).multiplyScalar(O.y).addScaledVector(T,-M.y).multiplyScalar(je),B.copy(T).multiplyScalar(M.x).addScaledVector(b,-O.x).multiplyScalar(je),C[Ne].add(I),C[qe].add(I),C[Ue].add(I),w[Ne].add(B),w[qe].add(B),w[Ue].add(B))}function Re(Ne){ue.fromArray(v,3*Ne),_e.copy(ue);var qe=C[Ne];se.copy(qe),se.sub(ue.multiplyScalar(ue.dot(qe))).normalize(),le.crossVectors(_e,qe);var je=le.dot(w[Ne])<0?-1:1;_[4*Ne]=se.x,_[4*Ne+1]=se.y,_[4*Ne+2]=se.z,_[4*Ne+3]=je}}},{key:"computeVertexNormals",value:function(){var o=this.index,u=this.getAttribute("position");if(void 0!==u){var f=this.getAttribute("normal");if(void 0===f)f=new io(new Float32Array(3*u.count),3),this.setAttribute("normal",f);else for(var p=0,v=f.count;p<v;p++)f.setXYZ(p,0,0,0);var g=new Z,y=new Z,_=new Z,C=new Z,w=new Z,x=new Z,E=new Z,b=new Z;if(o)for(var T=0,A=o.count;T<A;T+=3){var M=o.getX(T+0),O=o.getX(T+1),I=o.getX(T+2);g.fromBufferAttribute(u,M),y.fromBufferAttribute(u,O),_.fromBufferAttribute(u,I),E.subVectors(_,y),b.subVectors(g,y),E.cross(b),C.fromBufferAttribute(f,M),w.fromBufferAttribute(f,O),x.fromBufferAttribute(f,I),C.add(E),w.add(E),x.add(E),f.setXYZ(M,C.x,C.y,C.z),f.setXYZ(O,w.x,w.y,w.z),f.setXYZ(I,x.x,x.y,x.z)}else for(var B=0,z=u.count;B<z;B+=3)g.fromBufferAttribute(u,B+0),y.fromBufferAttribute(u,B+1),_.fromBufferAttribute(u,B+2),E.subVectors(_,y),b.subVectors(g,y),E.cross(b),f.setXYZ(B+0,E.x,E.y,E.z),f.setXYZ(B+1,E.x,E.y,E.z),f.setXYZ(B+2,E.x,E.y,E.z);this.normalizeNormals(),f.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var o=this.attributes.normal,u=0,f=o.count;u<f;u++)ji.fromBufferAttribute(o,u),ji.normalize(),o.setXYZ(u,ji.x,ji.y,ji.z)}},{key:"toNonIndexed",value:function(){function o(z,P){for(var W=z.array,X=z.itemSize,re=z.normalized,de=new W.constructor(P.length*X),ce=0,G=0,te=0,se=P.length;te<se;te++){ce=z.isInterleavedBufferAttribute?P[te]*z.data.stride+z.offset:P[te]*X;for(var le=0;le<X;le++)de[G++]=W[ce++]}return new io(de,X,re)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var u=new e,f=this.index.array,p=this.attributes;for(var v in p){var y=o(p[v],f);u.setAttribute(v,y)}var _=this.morphAttributes;for(var C in _){for(var w=[],x=_[C],E=0,b=x.length;E<b;E++){var A=o(x[E],f);w.push(A)}u.morphAttributes[C]=w}u.morphTargetsRelative=this.morphTargetsRelative;for(var M=this.groups,O=0,I=M.length;O<I;O++){var B=M[O];u.addGroup(B.start,B.count,B.materialIndex)}return u}},{key:"toJSON",value:function(){var o={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),Object.keys(this.userData).length>0&&(o.userData=this.userData),void 0!==this.parameters){var u=this.parameters;for(var f in u)void 0!==u[f]&&(o[f]=u[f]);return o}o.data={attributes:{}};var p=this.index;null!==p&&(o.data.index={type:p.array.constructor.name,array:Array.prototype.slice.call(p.array)});var v=this.attributes;for(var g in v)o.data.attributes[g]=v[g].toJSON(o.data);var _={},C=!1;for(var w in this.morphAttributes){for(var x=this.morphAttributes[w],E=[],b=0,T=x.length;b<T;b++)E.push(x[b].toJSON(o.data));E.length>0&&(_[w]=E,C=!0)}C&&(o.data.morphAttributes=_,o.data.morphTargetsRelative=this.morphTargetsRelative);var M=this.groups;M.length>0&&(o.data.groups=JSON.parse(JSON.stringify(M)));var O=this.boundingSphere;return null!==O&&(o.data.boundingSphere={center:O.center.toArray(),radius:O.radius}),o}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(o){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var u={};this.name=o.name;var f=o.index;null!==f&&this.setIndex(f.clone(u));var p=o.attributes;for(var v in p)this.setAttribute(v,p[v].clone(u));var y=o.morphAttributes;for(var _ in y){for(var C=[],w=y[_],x=0,E=w.length;x<E;x++)C.push(w[x].clone(u));this.morphAttributes[_]=C}this.morphTargetsRelative=o.morphTargetsRelative;for(var b=o.groups,T=0,A=b.length;T<A;T++){var M=b[T];this.addGroup(M.start,M.count,M.materialIndex)}var O=o.boundingBox;null!==O&&(this.boundingBox=O.clone());var I=o.boundingSphere;return null!==I&&(this.boundingSphere=I.clone()),this.drawRange.start=o.drawRange.start,this.drawRange.count=o.drawRange.count,this.userData=o.userData,void 0!==o.parameters&&(this.parameters=Object.assign({},o.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),e}(fl),CF=new En,tv=new WS,oA=new $h,Oy=new Z,Py=new Z,Iy=new Z,aA=new Z,KS=new Z,YS=new $e,$S=new $e,XS=new $e,sA=new Z,JS=new Z,mr=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Pr,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xa;return N(this,e),(r=a.call(this)).isMesh=!0,r.type="Mesh",r.geometry=o,r.material=u,r.updateMorphTargets(),r}return j(e,[{key:"copy",value:function(o,u){return we(ze(e.prototype),"copy",this).call(this,o,u),void 0!==o.morphTargetInfluences&&(this.morphTargetInfluences=o.morphTargetInfluences.slice()),void 0!==o.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},o.morphTargetDictionary)),this.material=o.material,this.geometry=o.geometry,this}},{key:"updateMorphTargets",value:function(){var u=this.geometry.morphAttributes,f=Object.keys(u);if(f.length>0){var p=u[f[0]];if(void 0!==p){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var v=0,g=p.length;v<g;v++){var y=p[v].name||String(v);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=v}}}}},{key:"getVertexPosition",value:function(o,u){var f=this.geometry,v=f.morphAttributes.position,g=f.morphTargetsRelative;u.fromBufferAttribute(f.attributes.position,o);var y=this.morphTargetInfluences;if(v&&y){KS.set(0,0,0);for(var _=0,C=v.length;_<C;_++){var w=y[_];0!==w&&(aA.fromBufferAttribute(v[_],o),KS.addScaledVector(g?aA:aA.sub(u),w))}u.add(KS)}return this.isSkinnedMesh&&this.boneTransform(o,u),u}},{key:"raycast",value:function(o,u){var f=this.geometry,p=this.material,v=this.matrixWorld;if(void 0!==p&&(null===f.boundingSphere&&f.computeBoundingSphere(),oA.copy(f.boundingSphere),oA.applyMatrix4(v),!1!==o.ray.intersectsSphere(oA)&&(CF.copy(v).invert(),tv.copy(o.ray).applyMatrix4(CF),null===f.boundingBox||!1!==tv.intersectsBox(f.boundingBox)))){var g,y=f.index,_=f.attributes.position,C=f.attributes.uv,w=f.attributes.uv2,x=f.groups,E=f.drawRange;if(null!==y)if(Array.isArray(p))for(var b=0,T=x.length;b<T;b++)for(var A=x[b],M=p[A.materialIndex],B=Math.max(A.start,E.start),z=Math.min(y.count,Math.min(A.start+A.count,E.start+E.count));B<z;B+=3){var P=y.getX(B),W=y.getX(B+1),X=y.getX(B+2);(g=ZS(this,M,o,tv,C,w,P,W,X))&&(g.faceIndex=Math.floor(B/3),g.face.materialIndex=A.materialIndex,u.push(g))}else for(var ce=Math.max(0,E.start),G=Math.min(y.count,E.start+E.count);ce<G;ce+=3){var te=y.getX(ce),se=y.getX(ce+1),le=y.getX(ce+2);(g=ZS(this,p,o,tv,C,w,te,se,le))&&(g.faceIndex=Math.floor(ce/3),u.push(g))}else if(void 0!==_)if(Array.isArray(p))for(var ue=0,_e=x.length;ue<_e;ue++)for(var Re=x[ue],Se=p[Re.materialIndex],xe=Math.max(Re.start,E.start),Ae=Math.min(_.count,Math.min(Re.start+Re.count,E.start+E.count));xe<Ae;xe+=3)(g=ZS(this,Se,o,tv,C,w,xe,xe+1,xe+2))&&(g.faceIndex=Math.floor(xe/3),g.face.materialIndex=Re.materialIndex,u.push(g));else for(var je=Math.max(0,E.start),ot=Math.min(_.count,E.start+E.count);je<ot;je+=3)(g=ZS(this,p,o,tv,C,w,je,je+1,je+2))&&(g.faceIndex=Math.floor(je/3),u.push(g))}}}]),e}(Co);function ZS(n,a,e,r,o,u,f,p,v){n.getVertexPosition(f,Oy),n.getVertexPosition(p,Py),n.getVertexPosition(v,Iy);var g=function(n,a,e,r,o,u,f,p){if(null===(1===a.side?r.intersectTriangle(f,u,o,!0,p):r.intersectTriangle(o,u,f,0===a.side,p)))return null;JS.copy(p),JS.applyMatrix4(n.matrixWorld);var g=e.ray.origin.distanceTo(JS);return g<e.near||g>e.far?null:{distance:g,point:JS.clone(),object:n}}(n,a,e,r,Oy,Py,Iy,sA);if(g){o&&(YS.fromBufferAttribute(o,f),$S.fromBufferAttribute(o,p),XS.fromBufferAttribute(o,v),g.uv=jS.getUV(sA,Oy,Py,Iy,YS,$S,XS,new $e)),u&&(YS.fromBufferAttribute(u,f),$S.fromBufferAttribute(u,p),XS.fromBufferAttribute(u,v),g.uv2=jS.getUV(sA,Oy,Py,Iy,YS,$S,XS,new $e));var y={a:f,b:p,c:v,normal:new Z,materialIndex:0};jS.getNormal(Oy,Py,Iy,y.normal),g.face=y}return g}var Ly=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;N(this,e),(r=a.call(this)).type="BoxGeometry",r.parameters={width:o,height:u,depth:f,widthSegments:p,heightSegments:v,depthSegments:g};var y=Yn(r);p=Math.floor(p),v=Math.floor(v),g=Math.floor(g);var _=[],C=[],w=[],x=[],E=0,b=0;function T(A,M,O,I,B,z,P,W,X,re,de){for(var ce=z/X,G=P/re,te=z/2,se=P/2,le=W/2,ue=X+1,_e=re+1,Re=0,Se=0,Ce=new Z,Be=0;Be<_e;Be++)for(var xe=Be*G-se,Ae=0;Ae<ue;Ae++)Ce[A]=(Ae*ce-te)*I,Ce[M]=xe*B,Ce[O]=le,C.push(Ce.x,Ce.y,Ce.z),Ce[A]=0,Ce[M]=0,Ce[O]=W>0?1:-1,w.push(Ce.x,Ce.y,Ce.z),x.push(Ae/X),x.push(1-Be/re),Re+=1;for(var Je=0;Je<re;Je++)for(var Ne=0;Ne<X;Ne++){var Ue=E+Ne+ue*(Je+1),je=E+(Ne+1)+ue*(Je+1),ot=E+(Ne+1)+ue*Je;_.push(E+Ne+ue*Je,Ue,ot),_.push(Ue,je,ot),Se+=6}y.addGroup(b,Se,de),b+=Se,E+=Re}return T("z","y","x",-1,-1,f,u,o,g,v,0),T("z","y","x",1,-1,f,u,-o,g,v,1),T("x","z","y",1,1,o,f,u,p,g,2),T("x","z","y",1,-1,o,f,-u,p,g,3),T("x","y","z",1,-1,o,u,f,p,v,4),T("x","y","z",-1,-1,o,u,-f,p,v,5),r.setIndex(_),r.setAttribute("position",new dn(C,3)),r.setAttribute("normal",new dn(w,3)),r.setAttribute("uv",new dn(x,2)),r}return j(e,null,[{key:"fromJSON",value:function(o){return new e(o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments)}}]),e}(Pr);function nv(n){var a={};for(var e in n)for(var r in a[e]={},n[e]){var o=n[e][r];a[e][r]=o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.clone():Array.isArray(o)?o.slice():o}return a}function Go(n){for(var a={},e=0;e<n.length;e++){var r=nv(n[e]);for(var o in r)a[o]=r[o]}return a}function wF(n){return null===n.getRenderTarget()&&n.outputEncoding===Vn?Eu:by}var v4={clone:nv,merge:Go},Sf=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this)).isShaderMaterial=!0,o.type="ShaderMaterial",o.defines={},o.uniforms={},o.uniformsGroups=[],o.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",o.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",o.linewidth=1,o.wireframe=!1,o.wireframeLinewidth=1,o.fog=!1,o.lights=!1,o.clipping=!1,o.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},o.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},o.index0AttributeName=void 0,o.uniformsNeedUpdate=!1,o.glslVersion=null,void 0!==r&&o.setValues(r),o}return j(e,[{key:"copy",value:function(o){return we(ze(e.prototype),"copy",this).call(this,o),this.fragmentShader=o.fragmentShader,this.vertexShader=o.vertexShader,this.uniforms=nv(o.uniforms),this.uniformsGroups=function(n){for(var a=[],e=0;e<n.length;e++)a.push(n[e].clone());return a}(o.uniformsGroups),this.defines=Object.assign({},o.defines),this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.fog=o.fog,this.lights=o.lights,this.clipping=o.clipping,this.extensions=Object.assign({},o.extensions),this.glslVersion=o.glslVersion,this}},{key:"toJSON",value:function(o){var u=we(ze(e.prototype),"toJSON",this).call(this,o);for(var f in u.glslVersion=this.glslVersion,u.uniforms={},this.uniforms){var v=this.uniforms[f].value;u.uniforms[f]=v&&v.isTexture?{type:"t",value:v.toJSON(o).uuid}:v&&v.isColor?{type:"c",value:v.getHex()}:v&&v.isVector2?{type:"v2",value:v.toArray()}:v&&v.isVector3?{type:"v3",value:v.toArray()}:v&&v.isVector4?{type:"v4",value:v.toArray()}:v&&v.isMatrix3?{type:"m3",value:v.toArray()}:v&&v.isMatrix4?{type:"m4",value:v.toArray()}:{value:v}}Object.keys(this.defines).length>0&&(u.defines=this.defines),u.vertexShader=this.vertexShader,u.fragmentShader=this.fragmentShader;var g={};for(var y in this.extensions)!0===this.extensions[y]&&(g[y]=!0);return Object.keys(g).length>0&&(u.extensions=g),u}}]),e}(is),uA=function(n){ve(e,n);var a=ge(e);function e(){var r;return N(this,e),(r=a.call(this)).isCamera=!0,r.type="Camera",r.matrixWorldInverse=new En,r.projectionMatrix=new En,r.projectionMatrixInverse=new En,r}return j(e,[{key:"copy",value:function(o,u){return we(ze(e.prototype),"copy",this).call(this,o,u),this.matrixWorldInverse.copy(o.matrixWorldInverse),this.projectionMatrix.copy(o.projectionMatrix),this.projectionMatrixInverse.copy(o.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(o){this.updateWorldMatrix(!0,!1);var u=this.matrixWorld.elements;return o.set(-u[8],-u[9],-u[10]).normalize()}},{key:"updateMatrixWorld",value:function(o){we(ze(e.prototype),"updateMatrixWorld",this).call(this,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(o,u){we(ze(e.prototype),"updateWorldMatrix",this).call(this,o,u),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(Co),kr=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return N(this,e),(r=a.call(this)).isPerspectiveCamera=!0,r.type="PerspectiveCamera",r.fov=o,r.zoom=1,r.near=f,r.far=p,r.focus=10,r.aspect=u,r.view=null,r.filmGauge=35,r.filmOffset=0,r.updateProjectionMatrix(),r}return j(e,[{key:"copy",value:function(o,u){return we(ze(e.prototype),"copy",this).call(this,o,u),this.fov=o.fov,this.zoom=o.zoom,this.near=o.near,this.far=o.far,this.focus=o.focus,this.aspect=o.aspect,this.view=null===o.view?null:Object.assign({},o.view),this.filmGauge=o.filmGauge,this.filmOffset=o.filmOffset,this}},{key:"setFocalLength",value:function(o){var u=.5*this.getFilmHeight()/o;this.fov=2*Ey*Math.atan(u),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var o=Math.tan(.5*zh*this.fov);return.5*this.getFilmHeight()/o}},{key:"getEffectiveFOV",value:function(){return 2*Ey*Math.atan(Math.tan(.5*zh*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(o,u,f,p,v,g){this.aspect=o/u,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=u,this.view.offsetX=f,this.view.offsetY=p,this.view.width=v,this.view.height=g,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var o=this.near,u=o*Math.tan(.5*zh*this.fov)/this.zoom,f=2*u,p=this.aspect*f,v=-.5*p,g=this.view;if(null!==this.view&&this.view.enabled){var y=g.fullWidth,_=g.fullHeight;v+=g.offsetX*p/y,u-=g.offsetY*f/_,p*=g.width/y,f*=g.height/_}var C=this.filmOffset;0!==C&&(v+=o*C/this.getFilmWidth()),this.projectionMatrix.makePerspective(v,v+p,u,u-f,o,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(o){var u=we(ze(e.prototype),"toJSON",this).call(this,o);return u.object.fov=this.fov,u.object.zoom=this.zoom,u.object.near=this.near,u.object.far=this.far,u.object.focus=this.focus,u.object.aspect=this.aspect,null!==this.view&&(u.object.view=Object.assign({},this.view)),u.object.filmGauge=this.filmGauge,u.object.filmOffset=this.filmOffset,u}}]),e}(uA),y4=function(n){ve(e,n);var a=ge(e);function e(r,o,u){var f;N(this,e),(f=a.call(this)).type="CubeCamera",f.renderTarget=u;var p=new kr(-90,1,r,o);p.layers=f.layers,p.up.set(0,1,0),p.lookAt(1,0,0),f.add(p);var v=new kr(-90,1,r,o);v.layers=f.layers,v.up.set(0,1,0),v.lookAt(-1,0,0),f.add(v);var g=new kr(-90,1,r,o);g.layers=f.layers,g.up.set(0,0,-1),g.lookAt(0,1,0),f.add(g);var y=new kr(-90,1,r,o);y.layers=f.layers,y.up.set(0,0,1),y.lookAt(0,-1,0),f.add(y);var _=new kr(-90,1,r,o);_.layers=f.layers,_.up.set(0,1,0),_.lookAt(0,0,1),f.add(_);var C=new kr(-90,1,r,o);return C.layers=f.layers,C.up.set(0,1,0),C.lookAt(0,0,-1),f.add(C),f}return j(e,[{key:"update",value:function(o,u){null===this.parent&&this.updateMatrixWorld();var f=this.renderTarget,p=pr(this.children,6),v=p[0],g=p[1],y=p[2],_=p[3],C=p[4],w=p[5],x=o.getRenderTarget(),E=o.toneMapping,b=o.xr.enabled;o.toneMapping=0,o.xr.enabled=!1;var T=f.texture.generateMipmaps;f.texture.generateMipmaps=!1,o.setRenderTarget(f,0),o.render(u,v),o.setRenderTarget(f,1),o.render(u,g),o.setRenderTarget(f,2),o.render(u,y),o.setRenderTarget(f,3),o.render(u,_),o.setRenderTarget(f,4),o.render(u,C),f.texture.generateMipmaps=T,o.setRenderTarget(f,5),o.render(u,w),o.setRenderTarget(x),o.toneMapping=E,o.xr.enabled=b,f.texture.needsPMREMUpdate=!0}}]),e}(Co),SF=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f,p,v,g,y,_,C){var w;return N(this,e),(w=a.call(this,r=void 0!==r?r:[],o=void 0!==o?o:301,u,f,p,v,g,y,_,C)).isCubeTexture=!0,w.flipY=!1,w}return j(e,[{key:"images",get:function(){return this.image},set:function(o){this.image=o}}]),e}(xu),_4=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};N(this,e),(r=a.call(this,o,o,u)).isWebGLCubeRenderTarget=!0;var f={width:o,height:o,depth:1},p=[f,f,f,f,f,f];return r.texture=new SF(p,u.mapping,u.wrapS,u.wrapT,u.magFilter,u.minFilter,u.format,u.type,u.anisotropy,u.encoding),r.texture.isRenderTargetTexture=!0,r.texture.generateMipmaps=void 0!==u.generateMipmaps&&u.generateMipmaps,r.texture.minFilter=void 0!==u.minFilter?u.minFilter:ko,r}return j(e,[{key:"fromEquirectangularTexture",value:function(o,u){this.texture.type=u.type,this.texture.encoding=u.encoding,this.texture.generateMipmaps=u.generateMipmaps,this.texture.minFilter=u.minFilter,this.texture.magFilter=u.magFilter;var p=new Ly(5,5,5),v=new Sf({name:"CubemapFromEquirect",uniforms:nv({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});v.uniforms.tEquirect.value=u;var g=new mr(p,v),y=u.minFilter;return u.minFilter===Ic&&(u.minFilter=ko),new y4(1,10,this).update(o,g),u.minFilter=y,g.geometry.dispose(),g.material.dispose(),this}},{key:"clear",value:function(o,u,f,p){for(var v=o.getRenderTarget(),g=0;g<6;g++)o.setRenderTarget(this,g),o.clear(u,f,p);o.setRenderTarget(v)}}]),e}(yf),lA=new Z,C4=new Z,w4=new js,bf=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Z(1,0,0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;N(this,n),this.isPlane=!0,this.normal=a,this.constant=e}return j(n,[{key:"set",value:function(e,r){return this.normal.copy(e),this.constant=r,this}},{key:"setComponents",value:function(e,r,o,u){return this.normal.set(e,r,o),this.constant=u,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,r,o){var u=lA.subVectors(o,r).cross(C4.subVectors(e,r)).normalize();return this.setFromNormalAndCoplanarPoint(u,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,r){return r.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,r){var o=e.delta(lA),u=this.normal.dot(o);if(0===u)return 0===this.distanceToPoint(e.start)?r.copy(e.start):null;var f=-(e.start.dot(this.normal)+this.constant)/u;return f<0||f>1?null:r.copy(o).multiplyScalar(f).add(e.start)}},{key:"intersectsLine",value:function(e){var r=this.distanceToPoint(e.start),o=this.distanceToPoint(e.end);return r<0&&o>0||o<0&&r>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,r){var o=r||w4.getNormalMatrix(e),u=this.coplanarPoint(lA).applyMatrix4(e),f=this.normal.applyMatrix3(o).normalize();return this.constant=-u.dot(f),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(),ov=new $h,QS=new Z,cA=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new bf,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new bf,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new bf,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new bf,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new bf,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new bf;N(this,n),this.planes=[a,e,r,o,u,f]}return j(n,[{key:"set",value:function(e,r,o,u,f,p){var v=this.planes;return v[0].copy(e),v[1].copy(r),v[2].copy(o),v[3].copy(u),v[4].copy(f),v[5].copy(p),this}},{key:"copy",value:function(e){for(var r=this.planes,o=0;o<6;o++)r[o].copy(e.planes[o]);return this}},{key:"setFromProjectionMatrix",value:function(e){var r=this.planes,o=e.elements,u=o[0],f=o[1],p=o[2],v=o[3],g=o[4],y=o[5],_=o[6],C=o[7],w=o[8],x=o[9],E=o[10],b=o[11],T=o[12],A=o[13],M=o[14],O=o[15];return r[0].setComponents(v-u,C-g,b-w,O-T).normalize(),r[1].setComponents(v+u,C+g,b+w,O+T).normalize(),r[2].setComponents(v+f,C+y,b+x,O+A).normalize(),r[3].setComponents(v-f,C-y,b-x,O-A).normalize(),r[4].setComponents(v-p,C-_,b-E,O-M).normalize(),r[5].setComponents(v+p,C+_,b+E,O+M).normalize(),this}},{key:"intersectsObject",value:function(e){var r=e.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),ov.copy(r.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ov)}},{key:"intersectsSprite",value:function(e){return ov.center.set(0,0,0),ov.radius=.7071067811865476,ov.applyMatrix4(e.matrixWorld),this.intersectsSphere(ov)}},{key:"intersectsSphere",value:function(e){for(var r=this.planes,o=e.center,u=-e.radius,f=0;f<6;f++)if(r[f].distanceToPoint(o)<u)return!1;return!0}},{key:"intersectsBox",value:function(e){for(var r=this.planes,o=0;o<6;o++){var u=r[o];if(QS.x=u.normal.x>0?e.max.x:e.min.x,QS.y=u.normal.y>0?e.max.y:e.min.y,QS.z=u.normal.z>0?e.max.z:e.min.z,u.distanceToPoint(QS)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var r=this.planes,o=0;o<6;o++)if(r[o].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}();function bF(){var n=null,a=!1,e=null,r=null;function o(u,f){e(u,f),r=n.requestAnimationFrame(o)}return{start:function(){!0!==a&&null!==e&&(r=n.requestAnimationFrame(o),a=!0)},stop:function(){n.cancelAnimationFrame(r),a=!1},setAnimationLoop:function(f){e=f},setContext:function(f){n=f}}}function S4(n,a){var e=a.isWebGL2,r=new WeakMap;return{get:function(g){return g.isInterleavedBufferAttribute&&(g=g.data),r.get(g)},remove:function(g){g.isInterleavedBufferAttribute&&(g=g.data);var y=r.get(g);y&&(n.deleteBuffer(y.buffer),r.delete(g))},update:function(g,y){if(g.isGLBufferAttribute){var _=r.get(g);(!_||_.version<g.version)&&r.set(g,{buffer:g.buffer,type:g.type,bytesPerElement:g.elementSize,version:g.version})}else{g.isInterleavedBufferAttribute&&(g=g.data);var C=r.get(g);void 0===C?r.set(g,function(g,y){var x,_=g.array,C=g.usage,w=n.createBuffer();if(n.bindBuffer(y,w),n.bufferData(y,_,C),g.onUploadCallback(),_ instanceof Float32Array)x=5126;else if(_ instanceof Uint16Array)if(g.isFloat16BufferAttribute){if(!e)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");x=5131}else x=5123;else if(_ instanceof Int16Array)x=5122;else if(_ instanceof Uint32Array)x=5125;else if(_ instanceof Int32Array)x=5124;else if(_ instanceof Int8Array)x=5120;else if(_ instanceof Uint8Array)x=5121;else{if(!(_ instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_);x=5121}return{buffer:w,type:x,bytesPerElement:_.BYTES_PER_ELEMENT,version:g.version}}(g,y)):C.version<g.version&&(function(g,y,_){var C=y.array,w=y.updateRange;n.bindBuffer(_,g),-1===w.count?n.bufferSubData(_,0,C):(e?n.bufferSubData(_,w.offset*C.BYTES_PER_ELEMENT,C,w.offset,w.count):n.bufferSubData(_,w.offset*C.BYTES_PER_ELEMENT,C.subarray(w.offset,w.offset+w.count)),w.count=-1),y.onUploadCallback()}(C.buffer,g,y),C.version=g.version)}}}}var dA=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;N(this,e),(r=a.call(this)).type="PlaneGeometry",r.parameters={width:o,height:u,widthSegments:f,heightSegments:p};for(var v=o/2,g=u/2,y=Math.floor(f),_=Math.floor(p),C=y+1,w=_+1,x=o/y,E=u/_,b=[],T=[],A=[],M=[],O=0;O<w;O++)for(var I=O*E-g,B=0;B<C;B++){var z=B*x-v;T.push(z,-I,0),A.push(0,0,1),M.push(B/y),M.push(1-O/_)}for(var P=0;P<_;P++)for(var W=0;W<y;W++){var X=W+C*P,re=W+C*(P+1),de=W+1+C*(P+1),ce=W+1+C*P;b.push(X,re,ce),b.push(re,de,ce)}return r.setIndex(b),r.setAttribute("position",new dn(T,3)),r.setAttribute("normal",new dn(A,3)),r.setAttribute("uv",new dn(M,2)),r}return j(e,null,[{key:"fromJSON",value:function(o){return new e(o.width,o.height,o.widthSegments,o.heightSegments)}}]),e}(Pr),An={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ct={common:{diffuse:{value:new Ht(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new js},uv2Transform:{value:new js},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new $e(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ht(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new js}},sprite:{diffuse:{value:new Ht(16777215)},opacity:{value:1},center:{value:new $e(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new js}}},Ru={basic:{uniforms:Go([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.fog]),vertexShader:An.meshbasic_vert,fragmentShader:An.meshbasic_frag},lambert:{uniforms:Go([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new Ht(0)}}]),vertexShader:An.meshlambert_vert,fragmentShader:An.meshlambert_frag},phong:{uniforms:Go([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new Ht(0)},specular:{value:new Ht(1118481)},shininess:{value:30}}]),vertexShader:An.meshphong_vert,fragmentShader:An.meshphong_frag},standard:{uniforms:Go([ct.common,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.roughnessmap,ct.metalnessmap,ct.fog,ct.lights,{emissive:{value:new Ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:An.meshphysical_vert,fragmentShader:An.meshphysical_frag},toon:{uniforms:Go([ct.common,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.gradientmap,ct.fog,ct.lights,{emissive:{value:new Ht(0)}}]),vertexShader:An.meshtoon_vert,fragmentShader:An.meshtoon_frag},matcap:{uniforms:Go([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,{matcap:{value:null}}]),vertexShader:An.meshmatcap_vert,fragmentShader:An.meshmatcap_frag},points:{uniforms:Go([ct.points,ct.fog]),vertexShader:An.points_vert,fragmentShader:An.points_frag},dashed:{uniforms:Go([ct.common,ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:An.linedashed_vert,fragmentShader:An.linedashed_frag},depth:{uniforms:Go([ct.common,ct.displacementmap]),vertexShader:An.depth_vert,fragmentShader:An.depth_frag},normal:{uniforms:Go([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,{opacity:{value:1}}]),vertexShader:An.meshnormal_vert,fragmentShader:An.meshnormal_frag},sprite:{uniforms:Go([ct.sprite,ct.fog]),vertexShader:An.sprite_vert,fragmentShader:An.sprite_frag},background:{uniforms:{uvTransform:{value:new js},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:An.background_vert,fragmentShader:An.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:An.backgroundCube_vert,fragmentShader:An.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:An.cube_vert,fragmentShader:An.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:An.equirect_vert,fragmentShader:An.equirect_frag},distanceRGBA:{uniforms:Go([ct.common,ct.displacementmap,{referencePosition:{value:new Z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:An.distanceRGBA_vert,fragmentShader:An.distanceRGBA_frag},shadow:{uniforms:Go([ct.lights,ct.fog,{color:{value:new Ht(0)},opacity:{value:1}}]),vertexShader:An.shadow_vert,fragmentShader:An.shadow_frag}};Ru.physical={uniforms:Go([Ru.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new $e(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Ht(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new $e},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ht(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ht(1,1,1)},specularColorMap:{value:null}}]),vertexShader:An.meshphysical_vert,fragmentShader:An.meshphysical_frag};var eb={r:0,b:0,g:0};function t8(n,a,e,r,o,u,f){var g,y,p=new Ht(0),v=!0===u?0:1,_=null,C=0,w=null;function E(b,T){b.getRGB(eb,wF(n)),r.buffers.color.setClear(eb.r,eb.g,eb.b,T,f)}return{getClearColor:function(){return p},setClearColor:function(T){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;p.set(T),E(p,v=A)},getClearAlpha:function(){return v},setClearAlpha:function(T){E(p,v=T)},render:function(b,T){var A=!1,M=!0===T.isScene?T.background:null;M&&M.isTexture&&(M=(T.backgroundBlurriness>0?e:a).get(M));var I=n.xr,B=I.getSession&&I.getSession();B&&"additive"===B.environmentBlendMode&&(M=null),null===M?E(p,v):M&&M.isColor&&(E(M,1),A=!0),(n.autoClear||A)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),M&&(M.isCubeTexture||306===M.mapping)?(void 0===y&&((y=new mr(new Ly(1,1,1),new Sf({name:"BackgroundCubeMaterial",uniforms:nv(Ru.backgroundCube.uniforms),vertexShader:Ru.backgroundCube.vertexShader,fragmentShader:Ru.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),y.geometry.deleteAttribute("uv"),y.onBeforeRender=function(z,P,W){this.matrixWorld.copyPosition(W.matrixWorld)},Object.defineProperty(y.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(y)),y.material.uniforms.envMap.value=M,y.material.uniforms.flipEnvMap.value=M.isCubeTexture&&!1===M.isRenderTargetTexture?-1:1,y.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,y.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,y.material.toneMapped=M.encoding!==Vn,(_!==M||C!==M.version||w!==n.toneMapping)&&(y.material.needsUpdate=!0,_=M,C=M.version,w=n.toneMapping),y.layers.enableAll(),b.unshift(y,y.geometry,y.material,0,0,null)):M&&M.isTexture&&(void 0===g&&((g=new mr(new dA(2,2),new Sf({name:"BackgroundMaterial",uniforms:nv(Ru.background.uniforms),vertexShader:Ru.background.vertexShader,fragmentShader:Ru.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(g.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(g)),g.material.uniforms.t2D.value=M,g.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,g.material.toneMapped=M.encoding!==Vn,!0===M.matrixAutoUpdate&&M.updateMatrix(),g.material.uniforms.uvTransform.value.copy(M.matrix),(_!==M||C!==M.version||w!==n.toneMapping)&&(g.material.needsUpdate=!0,_=M,C=M.version,w=n.toneMapping),g.layers.enableAll(),b.unshift(g,g.geometry,g.material,0,0,null))}}}function n8(n,a,e,r){var o=n.getParameter(34921),u=r.isWebGL2?null:a.get("OES_vertex_array_object"),f=r.isWebGL2||null!==u,p={},v=b(null),g=v,y=!1;function w(G){return r.isWebGL2?n.bindVertexArray(G):u.bindVertexArrayOES(G)}function x(G){return r.isWebGL2?n.deleteVertexArray(G):u.deleteVertexArrayOES(G)}function b(G){for(var te=[],se=[],le=[],ue=0;ue<o;ue++)te[ue]=0,se[ue]=0,le[ue]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:te,enabledAttributes:se,attributeDivisors:le,object:G,attributes:{},index:null}}function M(){for(var G=g.newAttributes,te=0,se=G.length;te<se;te++)G[te]=0}function O(G){I(G,0)}function I(G,te){var le=g.enabledAttributes,ue=g.attributeDivisors;g.newAttributes[G]=1,0===le[G]&&(n.enableVertexAttribArray(G),le[G]=1),ue[G]!==te&&((r.isWebGL2?n:a.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,te),ue[G]=te)}function B(){for(var G=g.newAttributes,te=g.enabledAttributes,se=0,le=te.length;se<le;se++)te[se]!==G[se]&&(n.disableVertexAttribArray(se),te[se]=0)}function z(G,te,se,le,ue,_e){!0!==r.isWebGL2||5124!==se&&5125!==se?n.vertexAttribPointer(G,te,se,le,ue,_e):n.vertexAttribIPointer(G,te,se,ue,_e)}function de(){ce(),y=!0,g!==v&&w((g=v).object)}function ce(){v.geometry=null,v.program=null,v.wireframe=!1}return{setup:function(G,te,se,le,ue){var _e=!1;if(f){var Re=function(G,te,se){var le=!0===se.wireframe,ue=p[G.id];void 0===ue&&(p[G.id]=ue={});var _e=ue[te.id];void 0===_e&&(ue[te.id]=_e={});var Re=_e[le];return void 0===Re&&(Re=b(r.isWebGL2?n.createVertexArray():u.createVertexArrayOES()),_e[le]=Re),Re}(le,se,te);g!==Re&&w((g=Re).object),_e=function(G,te,se,le){var ue=g.attributes,_e=te.attributes,Re=0,Se=se.getAttributes();for(var Ce in Se)if(Se[Ce].location>=0){var xe=ue[Ce],Ae=_e[Ce];if(void 0===Ae&&("instanceMatrix"===Ce&&G.instanceMatrix&&(Ae=G.instanceMatrix),"instanceColor"===Ce&&G.instanceColor&&(Ae=G.instanceColor)),void 0===xe||xe.attribute!==Ae||Ae&&xe.data!==Ae.data)return!0;Re++}return g.attributesNum!==Re||g.index!==le}(G,le,se,ue),_e&&function(G,te,se,le){var ue={},_e=te.attributes,Re=0,Se=se.getAttributes();for(var Ce in Se)if(Se[Ce].location>=0){var xe=_e[Ce];void 0===xe&&("instanceMatrix"===Ce&&G.instanceMatrix&&(xe=G.instanceMatrix),"instanceColor"===Ce&&G.instanceColor&&(xe=G.instanceColor));var Ae={};Ae.attribute=xe,xe&&xe.data&&(Ae.data=xe.data),ue[Ce]=Ae,Re++}g.attributes=ue,g.attributesNum=Re,g.index=le}(G,le,se,ue)}else{var Se=!0===te.wireframe;(g.geometry!==le.id||g.program!==se.id||g.wireframe!==Se)&&(g.geometry=le.id,g.program=se.id,g.wireframe=Se,_e=!0)}null!==ue&&e.update(ue,34963),(_e||y)&&(y=!1,function(G,te,se,le){if(!1!==r.isWebGL2||!G.isInstancedMesh&&!le.isInstancedBufferGeometry||null!==a.get("ANGLE_instanced_arrays")){M();var ue=le.attributes,_e=se.getAttributes(),Re=te.defaultAttributeValues;for(var Se in _e){var Ce=_e[Se];if(Ce.location>=0){var Be=ue[Se];if(void 0===Be&&("instanceMatrix"===Se&&G.instanceMatrix&&(Be=G.instanceMatrix),"instanceColor"===Se&&G.instanceColor&&(Be=G.instanceColor)),void 0!==Be){var xe=Be.normalized,Ae=Be.itemSize,me=e.get(Be);if(void 0===me)continue;var Je=me.buffer,Ne=me.type,qe=me.bytesPerElement;if(Be.isInterleavedBufferAttribute){var Ue=Be.data,je=Ue.stride,ot=Be.offset;if(Ue.isInstancedInterleavedBuffer){for(var Wt=0;Wt<Ce.locationSize;Wt++)I(Ce.location+Wt,Ue.meshPerAttribute);!0!==G.isInstancedMesh&&void 0===le._maxInstanceCount&&(le._maxInstanceCount=Ue.meshPerAttribute*Ue.count)}else for(var tt=0;tt<Ce.locationSize;tt++)O(Ce.location+tt);n.bindBuffer(34962,Je);for(var It=0;It<Ce.locationSize;It++)z(Ce.location+It,Ae/Ce.locationSize,Ne,xe,je*qe,(ot+Ae/Ce.locationSize*It)*qe)}else{if(Be.isInstancedBufferAttribute){for(var xn=0;xn<Ce.locationSize;xn++)I(Ce.location+xn,Be.meshPerAttribute);!0!==G.isInstancedMesh&&void 0===le._maxInstanceCount&&(le._maxInstanceCount=Be.meshPerAttribute*Be.count)}else for(var Sn=0;Sn<Ce.locationSize;Sn++)O(Ce.location+Sn);n.bindBuffer(34962,Je);for(var Rt=0;Rt<Ce.locationSize;Rt++)z(Ce.location+Rt,Ae/Ce.locationSize,Ne,xe,Ae*qe,Ae/Ce.locationSize*Rt*qe)}}else if(void 0!==Re){var gn=Re[Se];if(void 0!==gn)switch(gn.length){case 2:n.vertexAttrib2fv(Ce.location,gn);break;case 3:n.vertexAttrib3fv(Ce.location,gn);break;case 4:n.vertexAttrib4fv(Ce.location,gn);break;default:n.vertexAttrib1fv(Ce.location,gn)}}}}B()}}(G,te,se,le),null!==ue&&n.bindBuffer(34963,e.get(ue).buffer))},reset:de,resetDefaultState:ce,dispose:function(){for(var G in de(),p){var te=p[G];for(var se in te){var le=te[se];for(var ue in le)x(le[ue].object),delete le[ue];delete te[se]}delete p[G]}},releaseStatesOfGeometry:function(G){if(void 0!==p[G.id]){var te=p[G.id];for(var se in te){var le=te[se];for(var ue in le)x(le[ue].object),delete le[ue];delete te[se]}delete p[G.id]}},releaseStatesOfProgram:function(G){for(var te in p){var se=p[te];if(void 0!==se[G.id]){var le=se[G.id];for(var ue in le)x(le[ue].object),delete le[ue];delete se[G.id]}}},initAttributes:M,enableAttribute:O,disableUnusedAttributes:B}}function r8(n,a,e,r){var u,o=r.isWebGL2;this.setMode=function(g){u=g},this.render=function(g,y){n.drawArrays(u,g,y),e.update(y,u,1)},this.renderInstances=function(g,y,_){if(0!==_){var C,w;if(o)C=n,w="drawArraysInstanced";else if(w="drawArraysInstancedANGLE",null===(C=a.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");C[w](u,g,y,_),e.update(y,u,_)}}}function i8(n,a,e){var r;function u(z){if("highp"===z){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";z="mediump"}return"mediump"===z&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var f="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&n instanceof WebGL2ComputeRenderingContext,p=void 0!==e.precision?e.precision:"highp",v=u(p);v!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",v,"instead."),p=v);var g=f||a.has("WEBGL_draw_buffers"),y=!0===e.logarithmicDepthBuffer,_=n.getParameter(34930),C=n.getParameter(35660),w=n.getParameter(3379),x=n.getParameter(34076),E=n.getParameter(34921),b=n.getParameter(36347),T=n.getParameter(36348),A=n.getParameter(36349),M=C>0,O=f||a.has("OES_texture_float");return{isWebGL2:f,drawBuffers:g,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===a.has("EXT_texture_filter_anisotropic")){var z=a.get("EXT_texture_filter_anisotropic");r=n.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:u,precision:p,logarithmicDepthBuffer:y,maxTextures:_,maxVertexTextures:C,maxTextureSize:w,maxCubemapSize:x,maxAttributes:E,maxVertexUniforms:b,maxVaryings:T,maxFragmentUniforms:A,vertexTextures:M,floatFragmentTextures:O,floatVertexTextures:M&&O,maxSamples:f?n.getParameter(36183):0}}function o8(n){var a=this,e=null,r=0,o=!1,u=!1,f=new bf,p=new js,v={value:null,needsUpdate:!1};function g(){v.value!==e&&(v.value=e,v.needsUpdate=r>0),a.numPlanes=r,a.numIntersection=0}function y(_,C,w,x){var E=null!==_?_.length:0,b=null;if(0!==E){if(b=v.value,!0!==x||null===b){var T=w+4*E,A=C.matrixWorldInverse;p.getNormalMatrix(A),(null===b||b.length<T)&&(b=new Float32Array(T));for(var M=0,O=w;M!==E;++M,O+=4)f.copy(_[M]).applyMatrix4(A,p),f.normal.toArray(b,O),b[O+3]=f.constant}v.value=b,v.needsUpdate=!0}return a.numPlanes=E,a.numIntersection=0,b}this.uniform=v,this.numPlanes=0,this.numIntersection=0,this.init=function(_,C,w){var x=0!==_.length||C||0!==r||o;return o=C,e=y(_,w,0),r=_.length,x},this.beginShadows=function(){u=!0,y(null)},this.endShadows=function(){u=!1,g()},this.setState=function(_,C,w){var x=_.clippingPlanes,E=_.clipIntersection,b=_.clipShadows,T=n.get(_);if(!o||null===x||0===x.length||u&&!b)u?y(null):g();else{var A=u?0:r,M=4*A,O=T.clippingState||null;v.value=O,O=y(x,C,M,w);for(var I=0;I!==M;++I)O[I]=e[I];T.clippingState=O,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=A}}}function a8(n){var a=new WeakMap;function e(f,p){return 303===p?f.mapping=301:304===p&&(f.mapping=302),f}function o(f){var p=f.target;p.removeEventListener("dispose",o);var v=a.get(p);void 0!==v&&(a.delete(p),v.dispose())}return{get:function(f){if(f&&f.isTexture&&!1===f.isRenderTargetTexture){var p=f.mapping;if(303===p||304===p){if(a.has(f))return e(a.get(f).texture,f.mapping);var g=f.image;if(g&&g.height>0){var y=new _4(g.height/2);return y.fromEquirectangularTexture(n,f),a.set(f,y),f.addEventListener("dispose",o),e(y.texture,f.mapping)}return null}}return f},dispose:function(){a=new WeakMap}}}var fA=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return N(this,e),(r=a.call(this)).isOrthographicCamera=!0,r.type="OrthographicCamera",r.zoom=1,r.view=null,r.left=o,r.right=u,r.top=f,r.bottom=p,r.near=v,r.far=g,r.updateProjectionMatrix(),r}return j(e,[{key:"copy",value:function(o,u){return we(ze(e.prototype),"copy",this).call(this,o,u),this.left=o.left,this.right=o.right,this.top=o.top,this.bottom=o.bottom,this.near=o.near,this.far=o.far,this.zoom=o.zoom,this.view=null===o.view?null:Object.assign({},o.view),this}},{key:"setViewOffset",value:function(o,u,f,p,v,g){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=u,this.view.offsetX=f,this.view.offsetY=p,this.view.width=v,this.view.height=g,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var o=(this.right-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),f=(this.right+this.left)/2,p=(this.top+this.bottom)/2,v=f-o,g=f+o,y=p+u,_=p-u;if(null!==this.view&&this.view.enabled){var C=(this.right-this.left)/this.view.fullWidth/this.zoom,w=(this.top-this.bottom)/this.view.fullHeight/this.zoom;g=(v+=C*this.view.offsetX)+C*this.view.width,_=(y-=w*this.view.offsetY)-w*this.view.height}this.projectionMatrix.makeOrthographic(v,g,y,_,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(o){var u=we(ze(e.prototype),"toJSON",this).call(this,o);return u.object.zoom=this.zoom,u.object.left=this.left,u.object.right=this.right,u.object.top=this.top,u.object.bottom=this.bottom,u.object.near=this.near,u.object.far=this.far,null!==this.view&&(u.object.view=Object.assign({},this.view)),u}}]),e}(uA),EF=[.125,.215,.35,.446,.526,.582],pA=new fA,xF=new Ht,hA=null,xf=(1+Math.sqrt(5))/2,sv=1/xf,RF=[new Z(1,1,1),new Z(-1,1,1),new Z(1,1,-1),new Z(-1,1,-1),new Z(0,xf,sv),new Z(0,xf,-sv),new Z(sv,0,xf),new Z(-sv,0,xf),new Z(xf,sv,0),new Z(-xf,sv,0)],TF=function(){function n(a){N(this,n),this._renderer=a,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return j(n,[{key:"fromScene",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;hA=this._renderer.getRenderTarget(),this._setSize(256);var f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(e,o,u,f),r>0&&this._blur(f,0,0,r),this._applyPMREM(f),this._cleanup(f),f}},{key:"fromEquirectangular",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,r)}},{key:"fromCubemap",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,r)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=MF(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=AF(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(hA),e.scissorTest=!1,tb(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,r){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),hA=this._renderer.getRenderTarget();var o=r||this._allocateTargets();return this._textureToCubeUV(e,o),this._applyPMREM(o),this._cleanup(o),o}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,o={magFilter:ko,minFilter:ko,generateMipmaps:!1,type:wy,format:ns,encoding:gf,depthBuffer:!1},u=DF(e,r,o);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=DF(e,r,o);var f=this._lodMax,p=function(n){for(var a=[],e=[],r=[],o=n,u=n-4+1+EF.length,f=0;f<u;f++){var p=Math.pow(2,o);e.push(p);var v=1/p;f>n-4?v=EF[f-n+4-1]:0===f&&(v=0),r.push(v);for(var g=1/(p-2),y=-g,_=1+g,C=[y,y,_,y,_,_,y,y,_,_,y,_],A=new Float32Array(108),M=new Float32Array(72),O=new Float32Array(36),I=0;I<6;I++){var B=I%3*2/3-1,z=I>2?0:-1;A.set([B,z,0,B+2/3,z,0,B+2/3,z+1,0,B,z,0,B+2/3,z+1,0,B,z+1,0],18*I),M.set(C,12*I),O.set([I,I,I,I,I,I],6*I)}var X=new Pr;X.setAttribute("position",new io(A,3)),X.setAttribute("uv",new io(M,2)),X.setAttribute("faceIndex",new io(O,1)),a.push(X),o>4&&o--}return{lodPlanes:a,sizeLods:e,sigmas:r}}(f);this._sizeLods=p.sizeLods,this._lodPlanes=p.lodPlanes,this._sigmas=p.sigmas,this._blurMaterial=function(n,a,e){var r=new Float32Array(20),o=new Z(0,1,0);return new Sf({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/a,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:"".concat(n,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(f,e,r)}return u}},{key:"_compileMaterial",value:function(e){var r=new mr(this._lodPlanes[0],e);this._renderer.compile(r,pA)}},{key:"_sceneToCubeUV",value:function(e,r,o,u){var v=new kr(90,1,r,o),g=[1,-1,1,1,1,1],y=[1,1,1,-1,-1,-1],_=this._renderer,C=_.autoClear,w=_.toneMapping;_.getClearColor(xF),_.toneMapping=0,_.autoClear=!1;var x=new xa({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),E=new mr(new Ly,x),b=!1,T=e.background;T?T.isColor&&(x.color.copy(T),e.background=null,b=!0):(x.color.copy(xF),b=!0);for(var A=0;A<6;A++){var M=A%3;0===M?(v.up.set(0,g[A],0),v.lookAt(y[A],0,0)):1===M?(v.up.set(0,0,g[A]),v.lookAt(0,y[A],0)):(v.up.set(0,g[A],0),v.lookAt(0,0,y[A]));var O=this._cubeSize;tb(u,M*O,A>2?O:0,O,O),_.setRenderTarget(u),b&&_.render(E,v),_.render(e,v)}E.geometry.dispose(),E.material.dispose(),_.toneMapping=w,_.autoClear=C,e.background=T}},{key:"_textureToCubeUV",value:function(e,r){var o=this._renderer,u=301===e.mapping||302===e.mapping;u?(null===this._cubemapMaterial&&(this._cubemapMaterial=MF()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=AF());var f=u?this._cubemapMaterial:this._equirectMaterial,p=new mr(this._lodPlanes[0],f);f.uniforms.envMap.value=e;var g=this._cubeSize;tb(r,0,0,3*g,2*g),o.setRenderTarget(r),o.render(p,pA)}},{key:"_applyPMREM",value:function(e){var r=this._renderer,o=r.autoClear;r.autoClear=!1;for(var u=1;u<this._lodPlanes.length;u++){var f=Math.sqrt(this._sigmas[u]*this._sigmas[u]-this._sigmas[u-1]*this._sigmas[u-1]);this._blur(e,u-1,u,f,RF[(u-1)%RF.length])}r.autoClear=o}},{key:"_blur",value:function(e,r,o,u,f){var p=this._pingPongRenderTarget;this._halfBlur(e,p,r,o,u,"latitudinal",f),this._halfBlur(p,e,o,o,u,"longitudinal",f)}},{key:"_halfBlur",value:function(e,r,o,u,f,p,v){var g=this._renderer,y=this._blurMaterial;"latitudinal"!==p&&"longitudinal"!==p&&console.error("blur direction must be either latitudinal or longitudinal!");var C=new mr(this._lodPlanes[u],y),w=y.uniforms,x=this._sizeLods[o]-1,E=isFinite(f)?Math.PI/(2*x):2*Math.PI/39,b=f/E,T=isFinite(f)?1+Math.floor(3*b):20;T>20&&console.warn("sigmaRadians, ".concat(f,", is too large and will clip, as it requested ").concat(T," samples when the maximum is set to ").concat(20));for(var A=[],M=0,O=0;O<20;++O){var I=O/b,B=Math.exp(-I*I/2);A.push(B),0===O?M+=B:O<T&&(M+=2*B)}for(var z=0;z<A.length;z++)A[z]=A[z]/M;w.envMap.value=e.texture,w.samples.value=T,w.weights.value=A,w.latitudinal.value="latitudinal"===p,v&&(w.poleAxis.value=v);var P=this._lodMax;w.dTheta.value=E,w.mipInt.value=P-o;var W=this._sizeLods[u];tb(r,3*W*(u>P-4?u-P+4:0),4*(this._cubeSize-W),3*W,2*W),g.setRenderTarget(r),g.render(C,pA)}}]),n}();function DF(n,a,e){var r=new yf(n,a,e);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function tb(n,a,e,r,o){n.viewport.set(a,e,r,o),n.scissor.set(a,e,r,o)}function AF(){return new Sf({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function MF(){return new Sf({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function l8(n){var a=new WeakMap,e=null;function u(p){var v=p.target;v.removeEventListener("dispose",u);var g=a.get(v);void 0!==g&&(a.delete(v),g.dispose())}return{get:function(p){if(p&&p.isTexture){var v=p.mapping,g=303===v||304===v,y=301===v||302===v;if(g||y){if(p.isRenderTargetTexture&&!0===p.needsPMREMUpdate){p.needsPMREMUpdate=!1;var _=a.get(p);return null===e&&(e=new TF(n)),_=g?e.fromEquirectangular(p,_):e.fromCubemap(p,_),a.set(p,_),_.texture}if(a.has(p))return a.get(p).texture;var C=p.image;if(g&&C&&C.height>0||y&&C&&function(p){for(var v=0,y=0;y<6;y++)void 0!==p[y]&&v++;return 6===v}(C)){null===e&&(e=new TF(n));var w=g?e.fromEquirectangular(p):e.fromCubemap(p);return a.set(p,w),p.addEventListener("dispose",u),w.texture}return null}}return p},dispose:function(){a=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function c8(n){var a={};function e(r){if(void 0!==a[r])return a[r];var o;switch(r){case"WEBGL_depth_texture":o=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=n.getExtension(r)}return a[r]=o,o}return{has:function(o){return null!==e(o)},init:function(o){o.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(o){var u=e(o);return null===u&&console.warn("THREE.WebGLRenderer: "+o+" extension not supported."),u}}}function d8(n,a,e,r){var o={},u=new WeakMap;function f(_){var C=_.target;for(var w in null!==C.index&&a.remove(C.index),C.attributes)a.remove(C.attributes[w]);C.removeEventListener("dispose",f),delete o[C.id];var x=u.get(C);x&&(a.remove(x),u.delete(C)),r.releaseStatesOfGeometry(C),!0===C.isInstancedBufferGeometry&&delete C._maxInstanceCount,e.memory.geometries--}function g(_){var C=[],w=_.index,x=_.attributes.position,E=0;if(null!==w){var b=w.array;E=w.version;for(var T=0,A=b.length;T<A;T+=3){var M=b[T+0],O=b[T+1],I=b[T+2];C.push(M,O,O,I,I,M)}}else{E=x.version;for(var z=0,P=x.array.length/3-1;z<P;z+=3){var W=z+0,X=z+1,re=z+2;C.push(W,X,X,re,re,W)}}var de=new(rF(C)?_F:yF)(C,1);de.version=E;var ce=u.get(_);ce&&a.remove(ce),u.set(_,de)}return{get:function(_,C){return!0===o[C.id]||(C.addEventListener("dispose",f),o[C.id]=!0,e.memory.geometries++),C},update:function(_){var C=_.attributes;for(var w in C)a.update(C[w],34962);var x=_.morphAttributes;for(var E in x)for(var b=x[E],T=0,A=b.length;T<A;T++)a.update(b[T],34962)},getWireframeAttribute:function(_){var C=u.get(_);if(C){var w=_.index;null!==w&&C.version<w.version&&g(_)}else g(_);return u.get(_)}}}function f8(n,a,e,r){var u,p,v,o=r.isWebGL2;this.setMode=function(C){u=C},this.setIndex=function(C){p=C.type,v=C.bytesPerElement},this.render=function(C,w){n.drawElements(u,w,p,C*v),e.update(w,u,1)},this.renderInstances=function(C,w,x){if(0!==x){var E,b;if(o)E=n,b="drawElementsInstanced";else if(b="drawElementsInstancedANGLE",null===(E=a.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");E[b](u,w,p,C*v,x),e.update(w,u,x)}}}function p8(n){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(u,f,p){switch(e.calls++,f){case 4:e.triangles+=p*(u/3);break;case 1:e.lines+=p*(u/2);break;case 3:e.lines+=p*(u-1);break;case 2:e.lines+=p*u;break;case 0:e.points+=p*u;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",f)}}}}function h8(n,a){return n[0]-a[0]}function v8(n,a){return Math.abs(a[1])-Math.abs(n[1])}function g8(n,a,e){for(var r={},o=new Float32Array(8),u=new WeakMap,f=new xr,p=[],v=0;v<8;v++)p[v]=[v,0];return{update:function(y,_,C,w){var x=y.morphTargetInfluences;if(!0===a.isWebGL2){var E=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,b=void 0!==E?E.length:0,T=u.get(_);if(void 0===T||T.count!==b){void 0!==T&&T.texture.dispose();var M=void 0!==_.morphAttributes.position,O=void 0!==_.morphAttributes.normal,I=void 0!==_.morphAttributes.color,B=_.morphAttributes.position||[],z=_.morphAttributes.normal||[],P=_.morphAttributes.color||[],W=0;!0===M&&(W=1),!0===O&&(W=2),!0===I&&(W=3);var X=_.attributes.position.count*W,re=1;X>a.maxTextureSize&&(re=Math.ceil(X/a.maxTextureSize),X=a.maxTextureSize);var de=new Float32Array(X*re*4*b),ce=new sF(de,X,re,b);ce.type=Lc,ce.needsUpdate=!0;for(var G=4*W,te=0;te<b;te++)for(var se=B[te],le=z[te],ue=P[te],_e=X*re*4*te,Re=0;Re<se.count;Re++){var Se=Re*G;!0===M&&(f.fromBufferAttribute(se,Re),de[_e+Se+0]=f.x,de[_e+Se+1]=f.y,de[_e+Se+2]=f.z,de[_e+Se+3]=0),!0===O&&(f.fromBufferAttribute(le,Re),de[_e+Se+4]=f.x,de[_e+Se+5]=f.y,de[_e+Se+6]=f.z,de[_e+Se+7]=0),!0===I&&(f.fromBufferAttribute(ue,Re),de[_e+Se+8]=f.x,de[_e+Se+9]=f.y,de[_e+Se+10]=f.z,de[_e+Se+11]=4===ue.itemSize?f.w:1)}T={count:b,texture:ce,size:new $e(X,re)},u.set(_,T),_.addEventListener("dispose",function gn(){ce.dispose(),u.delete(_),_.removeEventListener("dispose",gn)})}for(var Ce=0,Be=0;Be<x.length;Be++)Ce+=x[Be];var xe=_.morphTargetsRelative?1:1-Ce;w.getUniforms().setValue(n,"morphTargetBaseInfluence",xe),w.getUniforms().setValue(n,"morphTargetInfluences",x),w.getUniforms().setValue(n,"morphTargetsTexture",T.texture,e),w.getUniforms().setValue(n,"morphTargetsTextureSize",T.size)}else{var Ae=void 0===x?0:x.length,me=r[_.id];if(void 0===me||me.length!==Ae){me=[];for(var Je=0;Je<Ae;Je++)me[Je]=[Je,0];r[_.id]=me}for(var Ne=0;Ne<Ae;Ne++){var qe=me[Ne];qe[0]=Ne,qe[1]=x[Ne]}me.sort(v8);for(var Ue=0;Ue<8;Ue++)Ue<Ae&&me[Ue][1]?(p[Ue][0]=me[Ue][0],p[Ue][1]=me[Ue][1]):(p[Ue][0]=Number.MAX_SAFE_INTEGER,p[Ue][1]=0);p.sort(h8);for(var je=_.morphAttributes.position,ot=_.morphAttributes.normal,Wt=0,tt=0;tt<8;tt++){var It=p[tt],xn=It[0],Sn=It[1];xn!==Number.MAX_SAFE_INTEGER&&Sn?(je&&_.getAttribute("morphTarget"+tt)!==je[xn]&&_.setAttribute("morphTarget"+tt,je[xn]),ot&&_.getAttribute("morphNormal"+tt)!==ot[xn]&&_.setAttribute("morphNormal"+tt,ot[xn]),o[tt]=Sn,Wt+=Sn):(je&&!0===_.hasAttribute("morphTarget"+tt)&&_.deleteAttribute("morphTarget"+tt),ot&&!0===_.hasAttribute("morphNormal"+tt)&&_.deleteAttribute("morphNormal"+tt),o[tt]=0)}var Rt=_.morphTargetsRelative?1:1-Wt;w.getUniforms().setValue(n,"morphTargetBaseInfluence",Rt),w.getUniforms().setValue(n,"morphTargetInfluences",o)}}}}function m8(n,a,e,r){var o=new WeakMap;function p(v){var g=v.target;g.removeEventListener("dispose",p),e.remove(g.instanceMatrix),null!==g.instanceColor&&e.remove(g.instanceColor)}return{update:function(v){var g=r.render.frame,_=a.get(v,v.geometry);return o.get(_)!==g&&(a.update(_),o.set(_,g)),v.isInstancedMesh&&(!1===v.hasEventListener("dispose",p)&&v.addEventListener("dispose",p),e.update(v.instanceMatrix,34962),null!==v.instanceColor&&e.update(v.instanceColor,34962)),_},dispose:function(){o=new WeakMap}}}var OF=new xu,PF=new sF,IF=new r4,LF=new SF,FF=[],kF=[],NF=new Float32Array(16),GF=new Float32Array(9),BF=new Float32Array(4);function uv(n,a,e){var r=n[0];if(r<=0||r>0)return n;var o=a*e,u=FF[o];if(void 0===u&&(u=new Float32Array(o),FF[o]=u),0!==a){r.toArray(u,0);for(var f=1,p=0;f!==a;++f)n[f].toArray(u,p+=e)}return u}function Pi(n,a){if(n.length!==a.length)return!1;for(var e=0,r=n.length;e<r;e++)if(n[e]!==a[e])return!1;return!0}function Ii(n,a){for(var e=0,r=a.length;e<r;e++)n[e]=a[e]}function nb(n,a){var e=kF[a];void 0===e&&(e=new Int32Array(a),kF[a]=e);for(var r=0;r!==a;++r)e[r]=n.allocateTextureUnit();return e}function y8(n,a){var e=this.cache;e[0]!==a&&(n.uniform1f(this.addr,a),e[0]=a)}function _8(n,a){var e=this.cache;if(void 0!==a.x)(e[0]!==a.x||e[1]!==a.y)&&(n.uniform2f(this.addr,a.x,a.y),e[0]=a.x,e[1]=a.y);else{if(Pi(e,a))return;n.uniform2fv(this.addr,a),Ii(e,a)}}function C8(n,a){var e=this.cache;if(void 0!==a.x)(e[0]!==a.x||e[1]!==a.y||e[2]!==a.z)&&(n.uniform3f(this.addr,a.x,a.y,a.z),e[0]=a.x,e[1]=a.y,e[2]=a.z);else if(void 0!==a.r)(e[0]!==a.r||e[1]!==a.g||e[2]!==a.b)&&(n.uniform3f(this.addr,a.r,a.g,a.b),e[0]=a.r,e[1]=a.g,e[2]=a.b);else{if(Pi(e,a))return;n.uniform3fv(this.addr,a),Ii(e,a)}}function w8(n,a){var e=this.cache;if(void 0!==a.x)(e[0]!==a.x||e[1]!==a.y||e[2]!==a.z||e[3]!==a.w)&&(n.uniform4f(this.addr,a.x,a.y,a.z,a.w),e[0]=a.x,e[1]=a.y,e[2]=a.z,e[3]=a.w);else{if(Pi(e,a))return;n.uniform4fv(this.addr,a),Ii(e,a)}}function S8(n,a){var e=this.cache,r=a.elements;if(void 0===r){if(Pi(e,a))return;n.uniformMatrix2fv(this.addr,!1,a),Ii(e,a)}else{if(Pi(e,r))return;BF.set(r),n.uniformMatrix2fv(this.addr,!1,BF),Ii(e,r)}}function b8(n,a){var e=this.cache,r=a.elements;if(void 0===r){if(Pi(e,a))return;n.uniformMatrix3fv(this.addr,!1,a),Ii(e,a)}else{if(Pi(e,r))return;GF.set(r),n.uniformMatrix3fv(this.addr,!1,GF),Ii(e,r)}}function E8(n,a){var e=this.cache,r=a.elements;if(void 0===r){if(Pi(e,a))return;n.uniformMatrix4fv(this.addr,!1,a),Ii(e,a)}else{if(Pi(e,r))return;NF.set(r),n.uniformMatrix4fv(this.addr,!1,NF),Ii(e,r)}}function x8(n,a){var e=this.cache;e[0]!==a&&(n.uniform1i(this.addr,a),e[0]=a)}function R8(n,a){var e=this.cache;if(void 0!==a.x)(e[0]!==a.x||e[1]!==a.y)&&(n.uniform2i(this.addr,a.x,a.y),e[0]=a.x,e[1]=a.y);else{if(Pi(e,a))return;n.uniform2iv(this.addr,a),Ii(e,a)}}function T8(n,a){var e=this.cache;if(void 0!==a.x)(e[0]!==a.x||e[1]!==a.y||e[2]!==a.z)&&(n.uniform3i(this.addr,a.x,a.y,a.z),e[0]=a.x,e[1]=a.y,e[2]=a.z);else{if(Pi(e,a))return;n.uniform3iv(this.addr,a),Ii(e,a)}}function D8(n,a){var e=this.cache;if(void 0!==a.x)(e[0]!==a.x||e[1]!==a.y||e[2]!==a.z||e[3]!==a.w)&&(n.uniform4i(this.addr,a.x,a.y,a.z,a.w),e[0]=a.x,e[1]=a.y,e[2]=a.z,e[3]=a.w);else{if(Pi(e,a))return;n.uniform4iv(this.addr,a),Ii(e,a)}}function A8(n,a){var e=this.cache;e[0]!==a&&(n.uniform1ui(this.addr,a),e[0]=a)}function M8(n,a){var e=this.cache;if(void 0!==a.x)(e[0]!==a.x||e[1]!==a.y)&&(n.uniform2ui(this.addr,a.x,a.y),e[0]=a.x,e[1]=a.y);else{if(Pi(e,a))return;n.uniform2uiv(this.addr,a),Ii(e,a)}}function O8(n,a){var e=this.cache;if(void 0!==a.x)(e[0]!==a.x||e[1]!==a.y||e[2]!==a.z)&&(n.uniform3ui(this.addr,a.x,a.y,a.z),e[0]=a.x,e[1]=a.y,e[2]=a.z);else{if(Pi(e,a))return;n.uniform3uiv(this.addr,a),Ii(e,a)}}function P8(n,a){var e=this.cache;if(void 0!==a.x)(e[0]!==a.x||e[1]!==a.y||e[2]!==a.z||e[3]!==a.w)&&(n.uniform4ui(this.addr,a.x,a.y,a.z,a.w),e[0]=a.x,e[1]=a.y,e[2]=a.z,e[3]=a.w);else{if(Pi(e,a))return;n.uniform4uiv(this.addr,a),Ii(e,a)}}function I8(n,a,e){var r=this.cache,o=e.allocateTextureUnit();r[0]!==o&&(n.uniform1i(this.addr,o),r[0]=o),e.setTexture2D(a||OF,o)}function L8(n,a,e){var r=this.cache,o=e.allocateTextureUnit();r[0]!==o&&(n.uniform1i(this.addr,o),r[0]=o),e.setTexture3D(a||IF,o)}function F8(n,a,e){var r=this.cache,o=e.allocateTextureUnit();r[0]!==o&&(n.uniform1i(this.addr,o),r[0]=o),e.setTextureCube(a||LF,o)}function k8(n,a,e){var r=this.cache,o=e.allocateTextureUnit();r[0]!==o&&(n.uniform1i(this.addr,o),r[0]=o),e.setTexture2DArray(a||PF,o)}function G8(n,a){n.uniform1fv(this.addr,a)}function B8(n,a){var e=uv(a,this.size,2);n.uniform2fv(this.addr,e)}function H8(n,a){var e=uv(a,this.size,3);n.uniform3fv(this.addr,e)}function V8(n,a){var e=uv(a,this.size,4);n.uniform4fv(this.addr,e)}function W8(n,a){var e=uv(a,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function U8(n,a){var e=uv(a,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function z8(n,a){var e=uv(a,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function j8(n,a){n.uniform1iv(this.addr,a)}function q8(n,a){n.uniform2iv(this.addr,a)}function K8(n,a){n.uniform3iv(this.addr,a)}function Y8(n,a){n.uniform4iv(this.addr,a)}function $8(n,a){n.uniform1uiv(this.addr,a)}function X8(n,a){n.uniform2uiv(this.addr,a)}function J8(n,a){n.uniform3uiv(this.addr,a)}function Z8(n,a){n.uniform4uiv(this.addr,a)}function Q8(n,a,e){var r=this.cache,o=a.length,u=nb(e,o);Pi(r,u)||(n.uniform1iv(this.addr,u),Ii(r,u));for(var f=0;f!==o;++f)e.setTexture2D(a[f]||OF,u[f])}function e9(n,a,e){var r=this.cache,o=a.length,u=nb(e,o);Pi(r,u)||(n.uniform1iv(this.addr,u),Ii(r,u));for(var f=0;f!==o;++f)e.setTexture3D(a[f]||IF,u[f])}function t9(n,a,e){var r=this.cache,o=a.length,u=nb(e,o);Pi(r,u)||(n.uniform1iv(this.addr,u),Ii(r,u));for(var f=0;f!==o;++f)e.setTextureCube(a[f]||LF,u[f])}function n9(n,a,e){var r=this.cache,o=a.length,u=nb(e,o);Pi(r,u)||(n.uniform1iv(this.addr,u),Ii(r,u));for(var f=0;f!==o;++f)e.setTexture2DArray(a[f]||PF,u[f])}var i9=function n(a,e,r){N(this,n),this.id=a,this.addr=r,this.cache=[],this.setValue=function(n){switch(n){case 5126:return y8;case 35664:return _8;case 35665:return C8;case 35666:return w8;case 35674:return S8;case 35675:return b8;case 35676:return E8;case 5124:case 35670:return x8;case 35667:case 35671:return R8;case 35668:case 35672:return T8;case 35669:case 35673:return D8;case 5125:return A8;case 36294:return M8;case 36295:return O8;case 36296:return P8;case 35678:case 36198:case 36298:case 36306:case 35682:return I8;case 35679:case 36299:case 36307:return L8;case 35680:case 36300:case 36308:case 36293:return F8;case 36289:case 36303:case 36311:case 36292:return k8}}(e.type)},o9=function n(a,e,r){N(this,n),this.id=a,this.addr=r,this.cache=[],this.size=e.size,this.setValue=function(n){switch(n){case 5126:return G8;case 35664:return B8;case 35665:return H8;case 35666:return V8;case 35674:return W8;case 35675:return U8;case 35676:return z8;case 5124:case 35670:return j8;case 35667:case 35671:return q8;case 35668:case 35672:return K8;case 35669:case 35673:return Y8;case 5125:return $8;case 36294:return X8;case 36295:return J8;case 36296:return Z8;case 35678:case 36198:case 36298:case 36306:case 35682:return Q8;case 35679:case 36299:case 36307:return e9;case 35680:case 36300:case 36308:case 36293:return t9;case 36289:case 36303:case 36311:case 36292:return n9}}(e.type)},a9=function(){function n(a){N(this,n),this.id=a,this.seq=[],this.map={}}return j(n,[{key:"setValue",value:function(e,r,o){for(var u=this.seq,f=0,p=u.length;f!==p;++f){var v=u[f];v.setValue(e,r[v.id],o)}}}]),n}(),gA=/(\w+)(\])?(\[|\.)?/g;function HF(n,a){n.seq.push(a),n.map[a.id]=a}function s9(n,a,e){var r=n.name,o=r.length;for(gA.lastIndex=0;;){var u=gA.exec(r),p=u[1],g=u[3];if("]"===u[2]&&(p|=0),void 0===g||"["===g&&gA.lastIndex+2===o){HF(e,void 0===g?new i9(p,n,a):new o9(p,n,a));break}var _=e.map[p];void 0===_&&HF(e,_=new a9(p)),e=_}}var rb=function(){function n(a,e){N(this,n),this.seq=[],this.map={};for(var r=a.getProgramParameter(e,35718),o=0;o<r;++o){var u=a.getActiveUniform(e,o);s9(u,a.getUniformLocation(e,u.name),this)}}return j(n,[{key:"setValue",value:function(e,r,o,u){var f=this.map[r];void 0!==f&&f.setValue(e,o,u)}},{key:"setOptional",value:function(e,r,o){var u=r[o];void 0!==u&&this.setValue(e,o,u)}}],[{key:"upload",value:function(e,r,o,u){for(var f=0,p=r.length;f!==p;++f){var v=r[f],g=o[v.id];!1!==g.needsUpdate&&v.setValue(e,g.value,u)}}},{key:"seqWithValue",value:function(e,r){for(var o=[],u=0,f=e.length;u!==f;++u){var p=e[u];p.id in r&&o.push(p)}return o}}]),n}();function VF(n,a,e){var r=n.createShader(a);return n.shaderSource(r,e),n.compileShader(r),r}var u9=0;function WF(n,a,e){var r=n.getShaderParameter(a,35713),o=n.getShaderInfoLog(a).trim();if(r&&""===o)return"";var u=/ERROR: 0:(\d+)/.exec(o);if(u){var f=parseInt(u[1]);return e.toUpperCase()+"\n\n"+o+"\n\n"+function(n,a){for(var e=n.split("\n"),r=[],o=Math.max(a-6,0),u=Math.min(a+6,e.length),f=o;f<u;f++){var p=f+1;r.push("".concat(p===a?">":" "," ").concat(p,": ").concat(e[f]))}return r.join("\n")}(n.getShaderSource(a),f)}return o}function d9(n,a){var e=function(n){switch(n){case gf:return["Linear","( value )"];case Vn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(a);return"vec4 "+n+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function f9(n,a){var e;switch(a){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="OptimizedCineon";break;case 4:e="ACESFilmic";break;case 5:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",a),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function Fy(n){return""!==n}function UF(n,a){var e=a.numSpotLightShadows+a.numSpotLightMaps-a.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,a.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,a.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,a.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,a.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,a.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,a.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,a.numPointLightShadows)}function zF(n,a){return n.replace(/NUM_CLIPPING_PLANES/g,a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,a.numClippingPlanes-a.numClipIntersection)}var g9=/^[ \t]*#include +<([\w\d./]+)>/gm;function mA(n){return n.replace(g9,m9)}function m9(n,a){var e=An[a];if(void 0===e)throw new Error("Can not resolve #include <"+a+">");return mA(e)}var y9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function jF(n){return n.replace(y9,_9)}function _9(n,a,e,r){for(var o="",u=parseInt(a);u<parseInt(e);u++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+u+" ]").replace(/UNROLLED_LOOP_INDEX/g,u);return o}function qF(n){var a="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?a+="\n#define HIGH_PRECISION":"mediump"===n.precision?a+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(a+="\n#define LOW_PRECISION"),a}function x9(n,a,e,r){var b,T,o=n.getContext(),u=e.defines,f=e.vertexShader,p=e.fragmentShader,v=function(n){var a="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?a="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?a="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(a="SHADOWMAP_TYPE_VSM"),a}(e),g=function(n){var a="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:a="ENVMAP_TYPE_CUBE";break;case 306:a="ENVMAP_TYPE_CUBE_UV"}return a}(e),y=function(n){var a="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(a="ENVMAP_MODE_REFRACTION"),a}(e),_=function(n){var a="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:a="ENVMAP_BLENDING_MULTIPLY";break;case 1:a="ENVMAP_BLENDING_MIX";break;case 2:a="ENVMAP_BLENDING_ADD"}return a}(e),C=function(n){var a=n.envMapCubeUVHeight;if(null===a)return null;var e=Math.log2(a)-2,r=1/a;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:r,maxMip:e}}(e),w=e.isWebGL2?"":function(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Fy).join("\n")}(e),x=function(n){var a=[];for(var e in n){var r=n[e];!1!==r&&a.push("#define "+e+" "+r)}return a.join("\n")}(u),E=o.createProgram(),A=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?((b=[x].filter(Fy).join("\n")).length>0&&(b+="\n"),(T=[w,x].filter(Fy).join("\n")).length>0&&(T+="\n")):(b=[qF(e),"#define SHADER_NAME "+e.shaderName,x,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+y:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+v:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Fy).join("\n"),T=[w,qF(e),"#define SHADER_NAME "+e.shaderName,x,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+g:"",e.envMap?"#define "+y:"",e.envMap?"#define "+_:"",C?"#define CUBEUV_TEXEL_WIDTH "+C.texelWidth:"",C?"#define CUBEUV_TEXEL_HEIGHT "+C.texelHeight:"",C?"#define CUBEUV_MAX_MIP "+C.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+v:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==e.toneMapping?"#define TONE_MAPPING":"",0!==e.toneMapping?An.tonemapping_pars_fragment:"",0!==e.toneMapping?f9("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",An.encodings_pars_fragment,d9("linearToOutputTexel",e.outputEncoding),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(Fy).join("\n")),f=zF(f=UF(f=mA(f),e),e),p=zF(p=UF(p=mA(p),e),e),f=jF(f),p=jF(p),e.isWebGL2&&!0!==e.isRawShaderMaterial&&(A="#version 300 es\n",b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,T=["#define varying in","300 es"===e.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===e.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+T);var G,te,O=A+T+p,I=VF(o,35633,A+b+f),B=VF(o,35632,O);if(o.attachShader(E,I),o.attachShader(E,B),void 0!==e.index0AttributeName?o.bindAttribLocation(E,0,e.index0AttributeName):!0===e.morphTargets&&o.bindAttribLocation(E,0,"position"),o.linkProgram(E),n.debug.checkShaderErrors){var z=o.getProgramInfoLog(E).trim(),P=o.getShaderInfoLog(I).trim(),W=o.getShaderInfoLog(B).trim(),X=!0,re=!0;if(!1===o.getProgramParameter(E,35714)){X=!1;var de=WF(o,I,"vertex"),ce=WF(o,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(E,35715)+"\n\nProgram Info Log: "+z+"\n"+de+"\n"+ce)}else""!==z?console.warn("THREE.WebGLProgram: Program Info Log:",z):(""===P||""===W)&&(re=!1);re&&(this.diagnostics={runnable:X,programLog:z,vertexShader:{log:P,prefix:b},fragmentShader:{log:W,prefix:T}})}return o.deleteShader(I),o.deleteShader(B),this.getUniforms=function(){return void 0===G&&(G=new rb(o,E)),G},this.getAttributes=function(){return void 0===te&&(te=function(n,a){for(var e={},r=n.getProgramParameter(a,35721),o=0;o<r;o++){var u=n.getActiveAttrib(a,o),f=u.name,p=1;35674===u.type&&(p=2),35675===u.type&&(p=3),35676===u.type&&(p=4),e[f]={type:u.type,location:n.getAttribLocation(a,f),locationSize:p}}return e}(o,E)),te},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(E),this.program=void 0},this.name=e.shaderName,this.id=u9++,this.cacheKey=a,this.usedTimes=1,this.program=E,this.vertexShader=I,this.fragmentShader=B,this}var R9=0,T9=function(){function n(){N(this,n),this.shaderCache=new Map,this.materialCache=new Map}return j(n,[{key:"update",value:function(e){var o=e.fragmentShader,u=this._getShaderStage(e.vertexShader),f=this._getShaderStage(o),p=this._getShaderCacheForMaterial(e);return!1===p.has(u)&&(p.add(u),u.usedTimes++),!1===p.has(f)&&(p.add(f),f.usedTimes++),this}},{key:"remove",value:function(e){var u,o=Pt(this.materialCache.get(e));try{for(o.s();!(u=o.n()).done;){var f=u.value;f.usedTimes--,0===f.usedTimes&&this.shaderCache.delete(f.code)}}catch(p){o.e(p)}finally{o.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var r=this.materialCache,o=r.get(e);return void 0===o&&r.set(e,o=new Set),o}},{key:"_getShaderStage",value:function(e){var r=this.shaderCache,o=r.get(e);return void 0===o&&(o=new D9(e),r.set(e,o)),o}}]),n}(),D9=function n(a){N(this,n),this.id=R9++,this.code=a,this.usedTimes=0};function A9(n,a,e,r,o,u,f){var p=new QD,v=new T9,g=[],y=o.isWebGL2,_=o.logarithmicDepthBuffer,C=o.vertexTextures,w=o.precision,x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(P,W,X,re,de){var ce=re.fog,G=de.geometry,se=(P.isMeshStandardMaterial?e:a).get(P.envMap||(P.isMeshStandardMaterial?re.environment:null)),le=se&&306===se.mapping?se.image.height:null,ue=x[P.type];null!==P.precision&&(w=o.getMaxPrecision(P.precision))!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",w,"instead.");var Ce,Be,xe,Ae,_e=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,Re=void 0!==_e?_e.length:0,Se=0;if(void 0!==G.morphAttributes.position&&(Se=1),void 0!==G.morphAttributes.normal&&(Se=2),void 0!==G.morphAttributes.color&&(Se=3),ue){var me=Ru[ue];Ce=me.vertexShader,Be=me.fragmentShader}else Ce=P.vertexShader,Be=P.fragmentShader,v.update(P),xe=v.getVertexShaderID(P),Ae=v.getFragmentShaderID(P);var Je=n.getRenderTarget(),qe=P.clearcoat>0,Ue=P.iridescence>0;return{isWebGL2:y,shaderID:ue,shaderName:P.type,vertexShader:Ce,fragmentShader:Be,defines:P.defines,customVertexShaderID:xe,customFragmentShaderID:Ae,isRawShaderMaterial:!0===P.isRawShaderMaterial,glslVersion:P.glslVersion,precision:w,instancing:!0===de.isInstancedMesh,instancingColor:!0===de.isInstancedMesh&&null!==de.instanceColor,supportsVertexTextures:C,outputEncoding:null===Je?n.outputEncoding:!0===Je.isXRRenderTarget?Je.texture.encoding:gf,map:!!P.map,matcap:!!P.matcap,envMap:!!se,envMapMode:se&&se.mapping,envMapCubeUVHeight:le,lightMap:!!P.lightMap,aoMap:!!P.aoMap,emissiveMap:!!P.emissiveMap,bumpMap:!!P.bumpMap,normalMap:!!P.normalMap,objectSpaceNormalMap:1===P.normalMapType,tangentSpaceNormalMap:0===P.normalMapType,decodeVideoTexture:!!P.map&&!0===P.map.isVideoTexture&&P.map.encoding===Vn,clearcoat:qe,clearcoatMap:qe&&!!P.clearcoatMap,clearcoatRoughnessMap:qe&&!!P.clearcoatRoughnessMap,clearcoatNormalMap:qe&&!!P.clearcoatNormalMap,iridescence:Ue,iridescenceMap:Ue&&!!P.iridescenceMap,iridescenceThicknessMap:Ue&&!!P.iridescenceThicknessMap,displacementMap:!!P.displacementMap,roughnessMap:!!P.roughnessMap,metalnessMap:!!P.metalnessMap,specularMap:!!P.specularMap,specularIntensityMap:!!P.specularIntensityMap,specularColorMap:!!P.specularColorMap,opaque:!1===P.transparent&&1===P.blending,alphaMap:!!P.alphaMap,alphaTest:P.alphaTest>0,gradientMap:!!P.gradientMap,sheen:P.sheen>0,sheenColorMap:!!P.sheenColorMap,sheenRoughnessMap:!!P.sheenRoughnessMap,transmission:P.transmission>0,transmissionMap:!!P.transmissionMap,thicknessMap:!!P.thicknessMap,combine:P.combine,vertexTangents:!!P.normalMap&&!!G.attributes.tangent,vertexColors:P.vertexColors,vertexAlphas:!0===P.vertexColors&&!!G.attributes.color&&4===G.attributes.color.itemSize,vertexUvs:!!(P.map||P.bumpMap||P.normalMap||P.specularMap||P.alphaMap||P.emissiveMap||P.roughnessMap||P.metalnessMap||P.clearcoatMap||P.clearcoatRoughnessMap||P.clearcoatNormalMap||P.iridescenceMap||P.iridescenceThicknessMap||P.displacementMap||P.transmissionMap||P.thicknessMap||P.specularIntensityMap||P.specularColorMap||P.sheenColorMap||P.sheenRoughnessMap),uvsVertexOnly:!(P.map||P.bumpMap||P.normalMap||P.specularMap||P.alphaMap||P.emissiveMap||P.roughnessMap||P.metalnessMap||P.clearcoatNormalMap||P.iridescenceMap||P.iridescenceThicknessMap||P.transmission>0||P.transmissionMap||P.thicknessMap||P.specularIntensityMap||P.specularColorMap||P.sheen>0||P.sheenColorMap||P.sheenRoughnessMap||!P.displacementMap),fog:!!ce,useFog:!0===P.fog,fogExp2:ce&&ce.isFogExp2,flatShading:!!P.flatShading,sizeAttenuation:P.sizeAttenuation,logarithmicDepthBuffer:_,skinning:!0===de.isSkinnedMesh,morphTargets:void 0!==G.morphAttributes.position,morphNormals:void 0!==G.morphAttributes.normal,morphColors:void 0!==G.morphAttributes.color,morphTargetsCount:Re,morphTextureStride:Se,numDirLights:W.directional.length,numPointLights:W.point.length,numSpotLights:W.spot.length,numSpotLightMaps:W.spotLightMap.length,numRectAreaLights:W.rectArea.length,numHemiLights:W.hemi.length,numDirLightShadows:W.directionalShadowMap.length,numPointLightShadows:W.pointShadowMap.length,numSpotLightShadows:W.spotShadowMap.length,numSpotLightShadowsWithMaps:W.numSpotLightShadowsWithMaps,numClippingPlanes:f.numPlanes,numClipIntersection:f.numIntersection,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&X.length>0,shadowMapType:n.shadowMap.type,toneMapping:P.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:P.premultipliedAlpha,doubleSided:2===P.side,flipSided:1===P.side,useDepthPacking:!!P.depthPacking,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionDerivatives:P.extensions&&P.extensions.derivatives,extensionFragDepth:P.extensions&&P.extensions.fragDepth,extensionDrawBuffers:P.extensions&&P.extensions.drawBuffers,extensionShaderTextureLOD:P.extensions&&P.extensions.shaderTextureLOD,rendererExtensionFragDepth:y||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:y||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:y||r.has("EXT_shader_texture_lod"),customProgramCacheKey:P.customProgramCacheKey()}},getProgramCacheKey:function(P){var W=[];if(P.shaderID?W.push(P.shaderID):(W.push(P.customVertexShaderID),W.push(P.customFragmentShaderID)),void 0!==P.defines)for(var X in P.defines)W.push(X),W.push(P.defines[X]);return!1===P.isRawShaderMaterial&&(function(P,W){P.push(W.precision),P.push(W.outputEncoding),P.push(W.envMapMode),P.push(W.envMapCubeUVHeight),P.push(W.combine),P.push(W.vertexUvs),P.push(W.fogExp2),P.push(W.sizeAttenuation),P.push(W.morphTargetsCount),P.push(W.morphAttributeCount),P.push(W.numDirLights),P.push(W.numPointLights),P.push(W.numSpotLights),P.push(W.numSpotLightMaps),P.push(W.numHemiLights),P.push(W.numRectAreaLights),P.push(W.numDirLightShadows),P.push(W.numPointLightShadows),P.push(W.numSpotLightShadows),P.push(W.numSpotLightShadowsWithMaps),P.push(W.shadowMapType),P.push(W.toneMapping),P.push(W.numClippingPlanes),P.push(W.numClipIntersection),P.push(W.depthPacking)}(W,P),function(P,W){p.disableAll(),W.isWebGL2&&p.enable(0),W.supportsVertexTextures&&p.enable(1),W.instancing&&p.enable(2),W.instancingColor&&p.enable(3),W.map&&p.enable(4),W.matcap&&p.enable(5),W.envMap&&p.enable(6),W.lightMap&&p.enable(7),W.aoMap&&p.enable(8),W.emissiveMap&&p.enable(9),W.bumpMap&&p.enable(10),W.normalMap&&p.enable(11),W.objectSpaceNormalMap&&p.enable(12),W.tangentSpaceNormalMap&&p.enable(13),W.clearcoat&&p.enable(14),W.clearcoatMap&&p.enable(15),W.clearcoatRoughnessMap&&p.enable(16),W.clearcoatNormalMap&&p.enable(17),W.iridescence&&p.enable(18),W.iridescenceMap&&p.enable(19),W.iridescenceThicknessMap&&p.enable(20),W.displacementMap&&p.enable(21),W.specularMap&&p.enable(22),W.roughnessMap&&p.enable(23),W.metalnessMap&&p.enable(24),W.gradientMap&&p.enable(25),W.alphaMap&&p.enable(26),W.alphaTest&&p.enable(27),W.vertexColors&&p.enable(28),W.vertexAlphas&&p.enable(29),W.vertexUvs&&p.enable(30),W.vertexTangents&&p.enable(31),W.uvsVertexOnly&&p.enable(32),P.push(p.mask),p.disableAll(),W.fog&&p.enable(0),W.useFog&&p.enable(1),W.flatShading&&p.enable(2),W.logarithmicDepthBuffer&&p.enable(3),W.skinning&&p.enable(4),W.morphTargets&&p.enable(5),W.morphNormals&&p.enable(6),W.morphColors&&p.enable(7),W.premultipliedAlpha&&p.enable(8),W.shadowMapEnabled&&p.enable(9),W.physicallyCorrectLights&&p.enable(10),W.doubleSided&&p.enable(11),W.flipSided&&p.enable(12),W.useDepthPacking&&p.enable(13),W.dithering&&p.enable(14),W.specularIntensityMap&&p.enable(15),W.specularColorMap&&p.enable(16),W.transmission&&p.enable(17),W.transmissionMap&&p.enable(18),W.thicknessMap&&p.enable(19),W.sheen&&p.enable(20),W.sheenColorMap&&p.enable(21),W.sheenRoughnessMap&&p.enable(22),W.decodeVideoTexture&&p.enable(23),W.opaque&&p.enable(24),P.push(p.mask)}(W,P),W.push(n.outputEncoding)),W.push(P.customProgramCacheKey),W.join()},getUniforms:function(P){var W=x[P.type];return W?v4.clone(Ru[W].uniforms):P.uniforms},acquireProgram:function(P,W){for(var X,re=0,de=g.length;re<de;re++){var ce=g[re];if(ce.cacheKey===W){++(X=ce).usedTimes;break}}return void 0===X&&(X=new x9(n,W,P,u),g.push(X)),X},releaseProgram:function(P){if(0==--P.usedTimes){var W=g.indexOf(P);g[W]=g[g.length-1],g.pop(),P.destroy()}},releaseShaderCache:function(P){v.remove(P)},programs:g,dispose:function(){v.dispose()}}}function M9(){var n=new WeakMap;return{get:function(u){var f=n.get(u);return void 0===f&&n.set(u,f={}),f},remove:function(u){n.delete(u)},update:function(u,f,p){n.get(u)[f]=p},dispose:function(){n=new WeakMap}}}function O9(n,a){return n.groupOrder!==a.groupOrder?n.groupOrder-a.groupOrder:n.renderOrder!==a.renderOrder?n.renderOrder-a.renderOrder:n.material.id!==a.material.id?n.material.id-a.material.id:n.z!==a.z?n.z-a.z:n.id-a.id}function KF(n,a){return n.groupOrder!==a.groupOrder?n.groupOrder-a.groupOrder:n.renderOrder!==a.renderOrder?n.renderOrder-a.renderOrder:n.z!==a.z?a.z-n.z:n.id-a.id}function YF(){var n=[],a=0,e=[],r=[],o=[];function f(_,C,w,x,E,b){var T=n[a];return void 0===T?n[a]=T={id:_.id,object:_,geometry:C,material:w,groupOrder:x,renderOrder:_.renderOrder,z:E,group:b}:(T.id=_.id,T.object=_,T.geometry=C,T.material=w,T.groupOrder=x,T.renderOrder=_.renderOrder,T.z=E,T.group=b),a++,T}return{opaque:e,transmissive:r,transparent:o,init:function(){a=0,e.length=0,r.length=0,o.length=0},push:function(_,C,w,x,E,b){var T=f(_,C,w,x,E,b);w.transmission>0?r.push(T):!0===w.transparent?o.push(T):e.push(T)},unshift:function(_,C,w,x,E,b){var T=f(_,C,w,x,E,b);w.transmission>0?r.unshift(T):!0===w.transparent?o.unshift(T):e.unshift(T)},finish:function(){for(var _=a,C=n.length;_<C;_++){var w=n[_];if(null===w.id)break;w.id=null,w.object=null,w.geometry=null,w.material=null,w.group=null}},sort:function(_,C){e.length>1&&e.sort(_||O9),r.length>1&&r.sort(C||KF),o.length>1&&o.sort(C||KF)}}}function P9(){var n=new WeakMap;return{get:function(r,o){var f,u=n.get(r);return void 0===u?(f=new YF,n.set(r,[f])):o>=u.length?(f=new YF,u.push(f)):f=u[o],f},dispose:function(){n=new WeakMap}}}function I9(){var n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];var r;switch(e.type){case"DirectionalLight":r={direction:new Z,color:new Ht};break;case"SpotLight":r={position:new Z,direction:new Z,color:new Ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Z,color:new Ht,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Z,skyColor:new Ht,groundColor:new Ht};break;case"RectAreaLight":r={color:new Ht,position:new Z,halfWidth:new Z,halfHeight:new Z}}return n[e.id]=r,r}}}var F9=0;function k9(n,a){return(a.castShadow?2:0)-(n.castShadow?2:0)+(a.map?1:0)-(n.map?1:0)}function N9(n,a){for(var e=new I9,r=function(){var n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];var r;switch(e.type){case"DirectionalLight":case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=r,r}}}(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},u=0;u<9;u++)o.probe.push(new Z);var f=new Z,p=new En,v=new En;return{setup:function(_,C){for(var w=0,x=0,E=0,b=0;b<9;b++)o.probe[b].set(0,0,0);var T=0,A=0,M=0,O=0,I=0,B=0,z=0,P=0,W=0,X=0;_.sort(k9);for(var re=!0!==C?Math.PI:1,de=0,ce=_.length;de<ce;de++){var G=_[de],te=G.color,se=G.intensity,le=G.distance,ue=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)w+=te.r*se*re,x+=te.g*se*re,E+=te.b*se*re;else if(G.isLightProbe)for(var _e=0;_e<9;_e++)o.probe[_e].addScaledVector(G.sh.coefficients[_e],se);else if(G.isDirectionalLight){var Re=e.get(G);if(Re.color.copy(G.color).multiplyScalar(G.intensity*re),G.castShadow){var Se=G.shadow,Ce=r.get(G);Ce.shadowBias=Se.bias,Ce.shadowNormalBias=Se.normalBias,Ce.shadowRadius=Se.radius,Ce.shadowMapSize=Se.mapSize,o.directionalShadow[T]=Ce,o.directionalShadowMap[T]=ue,o.directionalShadowMatrix[T]=G.shadow.matrix,B++}o.directional[T]=Re,T++}else if(G.isSpotLight){var Be=e.get(G);Be.position.setFromMatrixPosition(G.matrixWorld),Be.color.copy(te).multiplyScalar(se*re),Be.distance=le,Be.coneCos=Math.cos(G.angle),Be.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),Be.decay=G.decay,o.spot[M]=Be;var xe=G.shadow;if(G.map&&(o.spotLightMap[W]=G.map,W++,xe.updateMatrices(G),G.castShadow&&X++),o.spotLightMatrix[M]=xe.matrix,G.castShadow){var Ae=r.get(G);Ae.shadowBias=xe.bias,Ae.shadowNormalBias=xe.normalBias,Ae.shadowRadius=xe.radius,Ae.shadowMapSize=xe.mapSize,o.spotShadow[M]=Ae,o.spotShadowMap[M]=ue,P++}M++}else if(G.isRectAreaLight){var me=e.get(G);me.color.copy(te).multiplyScalar(se),me.halfWidth.set(.5*G.width,0,0),me.halfHeight.set(0,.5*G.height,0),o.rectArea[O]=me,O++}else if(G.isPointLight){var Je=e.get(G);if(Je.color.copy(G.color).multiplyScalar(G.intensity*re),Je.distance=G.distance,Je.decay=G.decay,G.castShadow){var Ne=G.shadow,qe=r.get(G);qe.shadowBias=Ne.bias,qe.shadowNormalBias=Ne.normalBias,qe.shadowRadius=Ne.radius,qe.shadowMapSize=Ne.mapSize,qe.shadowCameraNear=Ne.camera.near,qe.shadowCameraFar=Ne.camera.far,o.pointShadow[A]=qe,o.pointShadowMap[A]=ue,o.pointShadowMatrix[A]=G.shadow.matrix,z++}o.point[A]=Je,A++}else if(G.isHemisphereLight){var Ue=e.get(G);Ue.skyColor.copy(G.color).multiplyScalar(se*re),Ue.groundColor.copy(G.groundColor).multiplyScalar(se*re),o.hemi[I]=Ue,I++}}O>0&&(a.isWebGL2||!0===n.has("OES_texture_float_linear")?(o.rectAreaLTC1=ct.LTC_FLOAT_1,o.rectAreaLTC2=ct.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=ct.LTC_HALF_1,o.rectAreaLTC2=ct.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=w,o.ambient[1]=x,o.ambient[2]=E;var je=o.hash;(je.directionalLength!==T||je.pointLength!==A||je.spotLength!==M||je.rectAreaLength!==O||je.hemiLength!==I||je.numDirectionalShadows!==B||je.numPointShadows!==z||je.numSpotShadows!==P||je.numSpotMaps!==W)&&(o.directional.length=T,o.spot.length=M,o.rectArea.length=O,o.point.length=A,o.hemi.length=I,o.directionalShadow.length=B,o.directionalShadowMap.length=B,o.pointShadow.length=z,o.pointShadowMap.length=z,o.spotShadow.length=P,o.spotShadowMap.length=P,o.directionalShadowMatrix.length=B,o.pointShadowMatrix.length=z,o.spotLightMatrix.length=P+W-X,o.spotLightMap.length=W,o.numSpotLightShadowsWithMaps=X,je.directionalLength=T,je.pointLength=A,je.spotLength=M,je.rectAreaLength=O,je.hemiLength=I,je.numDirectionalShadows=B,je.numPointShadows=z,je.numSpotShadows=P,je.numSpotMaps=W,o.version=F9++)},setupView:function(_,C){for(var w=0,x=0,E=0,b=0,T=0,A=C.matrixWorldInverse,M=0,O=_.length;M<O;M++){var I=_[M];if(I.isDirectionalLight){var B=o.directional[w];B.direction.setFromMatrixPosition(I.matrixWorld),f.setFromMatrixPosition(I.target.matrixWorld),B.direction.sub(f),B.direction.transformDirection(A),w++}else if(I.isSpotLight){var z=o.spot[E];z.position.setFromMatrixPosition(I.matrixWorld),z.position.applyMatrix4(A),z.direction.setFromMatrixPosition(I.matrixWorld),f.setFromMatrixPosition(I.target.matrixWorld),z.direction.sub(f),z.direction.transformDirection(A),E++}else if(I.isRectAreaLight){var P=o.rectArea[b];P.position.setFromMatrixPosition(I.matrixWorld),P.position.applyMatrix4(A),v.identity(),p.copy(I.matrixWorld),p.premultiply(A),v.extractRotation(p),P.halfWidth.set(.5*I.width,0,0),P.halfHeight.set(0,.5*I.height,0),P.halfWidth.applyMatrix4(v),P.halfHeight.applyMatrix4(v),b++}else if(I.isPointLight){var W=o.point[x];W.position.setFromMatrixPosition(I.matrixWorld),W.position.applyMatrix4(A),x++}else if(I.isHemisphereLight){var X=o.hemi[T];X.direction.setFromMatrixPosition(I.matrixWorld),X.direction.transformDirection(A),T++}}},state:o}}function $F(n,a){var e=new N9(n,a),r=[],o=[];return{init:function(){r.length=0,o.length=0},state:{lightsArray:r,shadowsArray:o,lights:e},setupLights:function(_){e.setup(r,_)},setupLightsView:function(_){e.setupView(r,_)},pushLight:function(_){r.push(_)},pushShadow:function(_){o.push(_)}}}function G9(n,a){var e=new WeakMap;return{get:function(u){var v,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,p=e.get(u);return void 0===p?(v=new $F(n,a),e.set(u,[v])):f>=p.length?(v=new $F(n,a),p.push(v)):v=p[f],v},dispose:function(){e=new WeakMap}}}var B9=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this)).isMeshDepthMaterial=!0,o.type="MeshDepthMaterial",o.depthPacking=3200,o.map=null,o.alphaMap=null,o.displacementMap=null,o.displacementScale=1,o.displacementBias=0,o.wireframe=!1,o.wireframeLinewidth=1,o.setValues(r),o}return j(e,[{key:"copy",value:function(o){return we(ze(e.prototype),"copy",this).call(this,o),this.depthPacking=o.depthPacking,this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this}}]),e}(is),H9=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this)).isMeshDistanceMaterial=!0,o.type="MeshDistanceMaterial",o.referencePosition=new Z,o.nearDistance=1,o.farDistance=1e3,o.map=null,o.alphaMap=null,o.displacementMap=null,o.displacementScale=1,o.displacementBias=0,o.setValues(r),o}return j(e,[{key:"copy",value:function(o){return we(ze(e.prototype),"copy",this).call(this,o),this.referencePosition.copy(o.referencePosition),this.nearDistance=o.nearDistance,this.farDistance=o.farDistance,this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this}}]),e}(is);function U9(n,a,e){var r=new cA,o=new $e,u=new $e,f=new xr,p=new B9({depthPacking:3201}),v=new H9,g={},y=e.maxTextureSize,_={0:1,1:0,2:2},C=new Sf({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new $e},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),w=C.clone();w.defines.HORIZONTAL_PASS=1;var x=new Pr;x.setAttribute("position",new io(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var E=new mr(x,C),b=this;function T(O,I){var B=a.update(E);C.defines.VSM_SAMPLES!==O.blurSamples&&(C.defines.VSM_SAMPLES=O.blurSamples,w.defines.VSM_SAMPLES=O.blurSamples,C.needsUpdate=!0,w.needsUpdate=!0),null===O.mapPass&&(O.mapPass=new yf(o.x,o.y)),C.uniforms.shadow_pass.value=O.map.texture,C.uniforms.resolution.value=O.mapSize,C.uniforms.radius.value=O.radius,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(I,null,B,C,E,null),w.uniforms.shadow_pass.value=O.mapPass.texture,w.uniforms.resolution.value=O.mapSize,w.uniforms.radius.value=O.radius,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(I,null,B,w,E,null)}function A(O,I,B,z,P,W){var X=null,re=!0===B.isPointLight?O.customDistanceMaterial:O.customDepthMaterial;if(void 0!==re)X=re;else if(X=!0===B.isPointLight?v:p,n.localClippingEnabled&&!0===I.clipShadows&&Array.isArray(I.clippingPlanes)&&0!==I.clippingPlanes.length||I.displacementMap&&0!==I.displacementScale||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){var de=X.uuid,ce=I.uuid,G=g[de];void 0===G&&(g[de]=G={});var te=G[ce];void 0===te&&(te=X.clone(),G[ce]=te),X=te}return X.visible=I.visible,X.wireframe=I.wireframe,X.side=3===W?null!==I.shadowSide?I.shadowSide:I.side:null!==I.shadowSide?I.shadowSide:_[I.side],X.alphaMap=I.alphaMap,X.alphaTest=I.alphaTest,X.map=I.map,X.clipShadows=I.clipShadows,X.clippingPlanes=I.clippingPlanes,X.clipIntersection=I.clipIntersection,X.displacementMap=I.displacementMap,X.displacementScale=I.displacementScale,X.displacementBias=I.displacementBias,X.wireframeLinewidth=I.wireframeLinewidth,X.linewidth=I.linewidth,!0===B.isPointLight&&!0===X.isMeshDistanceMaterial&&(X.referencePosition.setFromMatrixPosition(B.matrixWorld),X.nearDistance=z,X.farDistance=P),X}function M(O,I,B,z,P){if(!1!==O.visible){if(O.layers.test(I.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&3===P)&&(!O.frustumCulled||r.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,O.matrixWorld);var X=a.update(O),re=O.material;if(Array.isArray(re))for(var de=X.groups,ce=0,G=de.length;ce<G;ce++){var te=de[ce],se=re[te.materialIndex];if(se&&se.visible){var le=A(O,se,z,B.near,B.far,P);n.renderBufferDirect(B,null,X,le,O,te)}}else if(re.visible){var ue=A(O,re,z,B.near,B.far,P);n.renderBufferDirect(B,null,X,ue,O,null)}}for(var _e=O.children,Re=0,Se=_e.length;Re<Se;Re++)M(_e[Re],I,B,z,P)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(O,I,B){if(!1!==b.enabled&&(!1!==b.autoUpdate||!1!==b.needsUpdate)&&0!==O.length){var z=n.getRenderTarget(),P=n.getActiveCubeFace(),W=n.getActiveMipmapLevel(),X=n.state;X.setBlending(0),X.buffers.color.setClear(1,1,1,1),X.buffers.depth.setTest(!0),X.setScissorTest(!1);for(var re=0,de=O.length;re<de;re++){var ce=O[re],G=ce.shadow;if(void 0!==G){if(!1!==G.autoUpdate||!1!==G.needsUpdate){o.copy(G.mapSize);var te=G.getFrameExtents();o.multiply(te),u.copy(G.mapSize),(o.x>y||o.y>y)&&(o.x>y&&(u.x=Math.floor(y/te.x),o.x=u.x*te.x,G.mapSize.x=u.x),o.y>y&&(u.y=Math.floor(y/te.y),o.y=u.y*te.y,G.mapSize.y=u.y)),null===G.map&&(G.map=new yf(o.x,o.y,3!==this.type?{minFilter:Mi,magFilter:Mi}:{}),G.map.texture.name=ce.name+".shadowMap",G.camera.updateProjectionMatrix()),n.setRenderTarget(G.map),n.clear();for(var le=G.getViewportCount(),ue=0;ue<le;ue++){var _e=G.getViewport(ue);f.set(u.x*_e.x,u.y*_e.y,u.x*_e.z,u.y*_e.w),X.viewport(f),G.updateMatrices(ce,ue),r=G.getFrustum(),M(I,B,G.camera,ce,this.type)}!0!==G.isPointLightShadow&&3===this.type&&T(G,B),G.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",ce,"has no shadow.")}b.needsUpdate=!1,n.setRenderTarget(z,P,W)}}}function z9(n,a,e){var r,o,u=e.isWebGL2,g=new function(){var he=!1,St=new xr,at=null,bt=new xr(0,0,0,0);return{setMask:function(xt){at!==xt&&!he&&(n.colorMask(xt,xt,xt,xt),at=xt)},setLocked:function(xt){he=xt},setClear:function(xt,dr,Zn,Sr,Kr){!0===Kr&&(xt*=Sr,dr*=Sr,Zn*=Sr),St.set(xt,dr,Zn,Sr),!1===bt.equals(St)&&(n.clearColor(xt,dr,Zn,Sr),bt.copy(St))},reset:function(){he=!1,at=null,bt.set(-1,0,0,0)}}},y=new function(){var he=!1,St=null,at=null,bt=null;return{setTest:function(xt){xt?qe(2929):Ue(2929)},setMask:function(xt){St!==xt&&!he&&(n.depthMask(xt),St=xt)},setFunc:function(xt){if(at!==xt){switch(xt){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}at=xt}},setLocked:function(xt){he=xt},setClear:function(xt){bt!==xt&&(n.clearDepth(xt),bt=xt)},reset:function(){he=!1,St=null,at=null,bt=null}}},_=new function(){var he=!1,St=null,at=null,bt=null,Et=null,xt=null,dr=null,Zn=null,Sr=null;return{setTest:function(nr){he||(nr?qe(2960):Ue(2960))},setMask:function(nr){St!==nr&&!he&&(n.stencilMask(nr),St=nr)},setFunc:function(nr,us,ls){(at!==nr||bt!==us||Et!==ls)&&(n.stencilFunc(nr,us,ls),at=nr,bt=us,Et=ls)},setOp:function(nr,us,ls){(xt!==nr||dr!==us||Zn!==ls)&&(n.stencilOp(nr,us,ls),xt=nr,dr=us,Zn=ls)},setLocked:function(nr){he=nr},setClear:function(nr){Sr!==nr&&(n.clearStencil(nr),Sr=nr)},reset:function(){he=!1,St=null,at=null,bt=null,Et=null,xt=null,dr=null,Zn=null,Sr=null}}},C=new WeakMap,w=new WeakMap,x={},E={},b=new WeakMap,T=[],A=null,M=!1,O=null,I=null,B=null,z=null,P=null,W=null,X=null,re=!1,de=null,ce=null,G=null,te=null,se=null,le=n.getParameter(35661),ue=!1,_e=0,Re=n.getParameter(7938);-1!==Re.indexOf("WebGL")?(_e=parseFloat(/^WebGL (\d)/.exec(Re)[1]),ue=_e>=1):-1!==Re.indexOf("OpenGL ES")&&(_e=parseFloat(/^OpenGL ES (\d)/.exec(Re)[1]),ue=_e>=2);var Se=null,Ce={},Be=n.getParameter(3088),xe=n.getParameter(2978),Ae=(new xr).fromArray(Be),me=(new xr).fromArray(xe);function Je(he,St,at){var bt=new Uint8Array(4),Et=n.createTexture();n.bindTexture(he,Et),n.texParameteri(he,10241,9728),n.texParameteri(he,10240,9728);for(var xt=0;xt<at;xt++)n.texImage2D(St+xt,0,6408,1,1,0,6408,5121,bt);return Et}var Ne={};function qe(he){!0!==x[he]&&(n.enable(he),x[he]=!0)}function Ue(he){!1!==x[he]&&(n.disable(he),x[he]=!1)}Ne[3553]=Je(3553,3553,1),Ne[34067]=Je(34067,34069,6),g.setClear(0,0,0,1),y.setClear(1),_.setClear(0),qe(2929),y.setFunc(3),gn(!1),zn(1),qe(2884),Sn(0);var tt=(Rn(r={},100,32774),Rn(r,101,32778),Rn(r,102,32779),r);if(u)tt[103]=32775,tt[104]=32776;else{var It=a.get("EXT_blend_minmax");null!==It&&(tt[103]=It.MIN_EXT,tt[104]=It.MAX_EXT)}var xn=(Rn(o={},200,0),Rn(o,201,1),Rn(o,202,768),Rn(o,204,770),Rn(o,210,776),Rn(o,208,774),Rn(o,206,772),Rn(o,203,769),Rn(o,205,771),Rn(o,209,775),Rn(o,207,773),o);function Sn(he,St,at,bt,Et,xt,dr,Zn){if(0!==he){if(!1===M&&(qe(3042),M=!0),5===he)Et=Et||St,xt=xt||at,dr=dr||bt,(St!==I||Et!==P)&&(n.blendEquationSeparate(tt[St],tt[Et]),I=St,P=Et),(at!==B||bt!==z||xt!==W||dr!==X)&&(n.blendFuncSeparate(xn[at],xn[bt],xn[xt],xn[dr]),B=at,z=bt,W=xt,X=dr),O=he,re=!1;else if(he!==O||Zn!==re){if((100!==I||100!==P)&&(n.blendEquation(32774),I=100,P=100),Zn)switch(he){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",he)}else switch(he){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",he)}B=null,z=null,W=null,X=null,O=he,re=Zn}}else!0===M&&(Ue(3042),M=!1)}function gn(he){de!==he&&(n.frontFace(he?2304:2305),de=he)}function zn(he){0!==he?(qe(2884),he!==ce&&n.cullFace(1===he?1029:2===he?1028:1032)):Ue(2884),ce=he}function yr(he,St,at){he?(qe(32823),(te!==St||se!==at)&&(n.polygonOffset(St,at),te=St,se=at)):Ue(32823)}return{buffers:{color:g,depth:y,stencil:_},enable:qe,disable:Ue,bindFramebuffer:function(he,St){return E[he]!==St&&(n.bindFramebuffer(he,St),E[he]=St,u&&(36009===he&&(E[36160]=St),36160===he&&(E[36009]=St)),!0)},drawBuffers:function(he,St){var at=T,bt=!1;if(he)if(void 0===(at=b.get(St))&&b.set(St,at=[]),he.isWebGLMultipleRenderTargets){var Et=he.texture;if(at.length!==Et.length||36064!==at[0]){for(var xt=0,dr=Et.length;xt<dr;xt++)at[xt]=36064+xt;at.length=Et.length,bt=!0}}else 36064!==at[0]&&(at[0]=36064,bt=!0);else 1029!==at[0]&&(at[0]=1029,bt=!0);bt&&(e.isWebGL2?n.drawBuffers(at):a.get("WEBGL_draw_buffers").drawBuffersWEBGL(at))},useProgram:function(he){return A!==he&&(n.useProgram(he),A=he,!0)},setBlending:Sn,setMaterial:function(he,St){2===he.side?Ue(2884):qe(2884);var at=1===he.side;St&&(at=!at),gn(at),1===he.blending&&!1===he.transparent?Sn(0):Sn(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.premultipliedAlpha),y.setFunc(he.depthFunc),y.setTest(he.depthTest),y.setMask(he.depthWrite),g.setMask(he.colorWrite);var bt=he.stencilWrite;_.setTest(bt),bt&&(_.setMask(he.stencilWriteMask),_.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),_.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),yr(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),!0===he.alphaToCoverage?qe(32926):Ue(32926)},setFlipSided:gn,setCullFace:zn,setLineWidth:function(he){he!==G&&(ue&&n.lineWidth(he),G=he)},setPolygonOffset:yr,setScissorTest:function(he){he?qe(3089):Ue(3089)},activeTexture:function(he){void 0===he&&(he=33984+le-1),Se!==he&&(n.activeTexture(he),Se=he)},bindTexture:function(he,St,at){void 0===at&&(at=null===Se?33984+le-1:Se);var bt=Ce[at];void 0===bt&&(Ce[at]=bt={type:void 0,texture:void 0}),(bt.type!==he||bt.texture!==St)&&(Se!==at&&(n.activeTexture(at),Se=at),n.bindTexture(he,St||Ne[he]),bt.type=he,bt.texture=St)},unbindTexture:function(){var he=Ce[Se];void 0!==he&&void 0!==he.type&&(n.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)},compressedTexImage2D:function(){try{n.compressedTexImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},compressedTexImage3D:function(){try{n.compressedTexImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texImage2D:function(){try{n.texImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texImage3D:function(){try{n.texImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},updateUBOMapping:function(he,St){var at=w.get(St);void 0===at&&(at=new WeakMap,w.set(St,at));var bt=at.get(he);void 0===bt&&(bt=n.getUniformBlockIndex(St,he.name),at.set(he,bt))},uniformBlockBinding:function(he,St){var bt=w.get(St).get(he);C.get(St)!==bt&&(n.uniformBlockBinding(St,bt,he.__bindingPointIndex),C.set(St,bt))},texStorage2D:function(){try{n.texStorage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texStorage3D:function(){try{n.texStorage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texSubImage2D:function(){try{n.texSubImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texSubImage3D:function(){try{n.texSubImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},compressedTexSubImage2D:function(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},compressedTexSubImage3D:function(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},scissor:function(he){!1===Ae.equals(he)&&(n.scissor(he.x,he.y,he.z,he.w),Ae.copy(he))},viewport:function(he){!1===me.equals(he)&&(n.viewport(he.x,he.y,he.z,he.w),me.copy(he))},reset:function(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===u&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),x={},Se=null,Ce={},E={},b=new WeakMap,T=[],A=null,M=!1,O=null,I=null,B=null,z=null,P=null,W=null,X=null,re=!1,de=null,ce=null,G=null,te=null,se=null,Ae.set(0,0,n.canvas.width,n.canvas.height),me.set(0,0,n.canvas.width,n.canvas.height),g.reset(),y.reset(),_.reset()}}}function j9(n,a,e,r,o,u,f){var p,v,T,g=o.isWebGL2,y=o.maxTextures,_=o.maxCubemapSize,C=o.maxTextureSize,w=o.maxSamples,x=a.has("WEBGL_multisampled_render_to_texture")?a.get("WEBGL_multisampled_render_to_texture"):null,E="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),b=new WeakMap,A=new WeakMap,M=!1;try{M="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ie){}function O(ie,q){return M?new OffscreenCanvas(ie,q):Ry("canvas")}function I(ie,q,Oe,nt){var dt=1;if((ie.width>nt||ie.height>nt)&&(dt=nt/Math.max(ie.width,ie.height)),dt<1||!0===q){if("undefined"!=typeof HTMLImageElement&&ie instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&ie instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&ie instanceof ImageBitmap){var ft=q?LS:Math.floor,Vt=ft(dt*ie.width),Nt=ft(dt*ie.height);void 0===T&&(T=O(Vt,Nt));var ne=Oe?O(Vt,Nt):T;return ne.width=Vt,ne.height=Nt,ne.getContext("2d").drawImage(ie,0,0,Vt,Nt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ie.width+"x"+ie.height+") to ("+Vt+"x"+Nt+")."),ne}return"data"in ie&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ie.width+"x"+ie.height+")."),ie}return ie}function B(ie){return VD(ie.width)&&VD(ie.height)}function P(ie,q){return ie.generateMipmaps&&q&&ie.minFilter!==Mi&&ie.minFilter!==ko}function W(ie){n.generateMipmap(ie)}function X(ie,q,Oe,nt){var dt=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===g)return q;if(null!==ie){if(void 0!==n[ie])return n[ie];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ie+"'")}var ft=q;return 6403===q&&(5126===Oe&&(ft=33326),5131===Oe&&(ft=33325),5121===Oe&&(ft=33321)),33319===q&&(5126===Oe&&(ft=33328),5131===Oe&&(ft=33327),5121===Oe&&(ft=33323)),6408===q&&(5126===Oe&&(ft=34836),5131===Oe&&(ft=34842),5121===Oe&&(ft=nt===Vn&&!1===dt?35907:32856),32819===Oe&&(ft=32854),32820===Oe&&(ft=32855)),(33325===ft||33326===ft||33327===ft||33328===ft||34842===ft||34836===ft)&&a.get("EXT_color_buffer_float"),ft}function re(ie,q,Oe){return!0===P(ie,Oe)||ie.isFramebufferTexture&&ie.minFilter!==Mi&&ie.minFilter!==ko?Math.log2(Math.max(q.width,q.height))+1:void 0!==ie.mipmaps&&ie.mipmaps.length>0?ie.mipmaps.length:ie.isCompressedTexture&&Array.isArray(ie.image)?q.mipmaps.length:1}function de(ie){return ie===Mi||1004===ie||1005===ie?9728:9729}function ce(ie){var q=ie.target;q.removeEventListener("dispose",ce),function(ie){var q=r.get(ie);if(void 0!==q.__webglInit){var Oe=ie.source,nt=A.get(Oe);if(nt){var dt=nt[q.__cacheKey];dt.usedTimes--,0===dt.usedTimes&&se(ie),0===Object.keys(nt).length&&A.delete(Oe)}r.remove(ie)}}(q),q.isVideoTexture&&b.delete(q)}function G(ie){var q=ie.target;q.removeEventListener("dispose",G),function(ie){var q=ie.texture,Oe=r.get(ie),nt=r.get(q);if(void 0!==nt.__webglTexture&&(n.deleteTexture(nt.__webglTexture),f.memory.textures--),ie.depthTexture&&ie.depthTexture.dispose(),ie.isWebGLCubeRenderTarget)for(var dt=0;dt<6;dt++)n.deleteFramebuffer(Oe.__webglFramebuffer[dt]),Oe.__webglDepthbuffer&&n.deleteRenderbuffer(Oe.__webglDepthbuffer[dt]);else{if(n.deleteFramebuffer(Oe.__webglFramebuffer),Oe.__webglDepthbuffer&&n.deleteRenderbuffer(Oe.__webglDepthbuffer),Oe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Oe.__webglMultisampledFramebuffer),Oe.__webglColorRenderbuffer)for(var ft=0;ft<Oe.__webglColorRenderbuffer.length;ft++)Oe.__webglColorRenderbuffer[ft]&&n.deleteRenderbuffer(Oe.__webglColorRenderbuffer[ft]);Oe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Oe.__webglDepthRenderbuffer)}if(ie.isWebGLMultipleRenderTargets)for(var Vt=0,Nt=q.length;Vt<Nt;Vt++){var ne=r.get(q[Vt]);ne.__webglTexture&&(n.deleteTexture(ne.__webglTexture),f.memory.textures--),r.remove(q[Vt])}r.remove(q),r.remove(ie)}(q)}function se(ie){var q=r.get(ie);n.deleteTexture(q.__webglTexture),delete A.get(ie.source)[q.__cacheKey],f.memory.textures--}var ue=0;function Ce(ie,q){var Oe=r.get(ie);if(ie.isVideoTexture&&function(ie){var q=f.render.frame;b.get(ie)!==q&&(b.set(ie,q),ie.update())}(ie),!1===ie.isRenderTargetTexture&&ie.version>0&&Oe.__version!==ie.version){var nt=ie.image;if(null===nt)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==nt.complete)return void Ue(Oe,ie,q);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.bindTexture(3553,Oe.__webglTexture,33984+q)}var me=(Rn(p={},ff,10497),Rn(p,ba,33071),Rn(p,1002,33648),p),Je=(Rn(v={},Mi,9728),Rn(v,1004,9984),Rn(v,1005,9986),Rn(v,ko,9729),Rn(v,1007,9985),Rn(v,Ic,9987),v);function Ne(ie,q,Oe){if(Oe?(n.texParameteri(ie,10242,me[q.wrapS]),n.texParameteri(ie,10243,me[q.wrapT]),(32879===ie||35866===ie)&&n.texParameteri(ie,32882,me[q.wrapR]),n.texParameteri(ie,10240,Je[q.magFilter]),n.texParameteri(ie,10241,Je[q.minFilter])):(n.texParameteri(ie,10242,33071),n.texParameteri(ie,10243,33071),(32879===ie||35866===ie)&&n.texParameteri(ie,32882,33071),(q.wrapS!==ba||q.wrapT!==ba)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(ie,10240,de(q.magFilter)),n.texParameteri(ie,10241,de(q.minFilter)),q.minFilter!==Mi&&q.minFilter!==ko&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===a.has("EXT_texture_filter_anisotropic")){var nt=a.get("EXT_texture_filter_anisotropic");if(q.magFilter===Mi||1005!==q.minFilter&&q.minFilter!==Ic||q.type===Lc&&!1===a.has("OES_texture_float_linear")||!1===g&&q.type===wy&&!1===a.has("OES_texture_half_float_linear"))return;(q.anisotropy>1||r.get(q).__currentAnisotropy)&&(n.texParameterf(ie,nt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,o.getMaxAnisotropy())),r.get(q).__currentAnisotropy=q.anisotropy)}}function qe(ie,q){var Oe=!1;void 0===ie.__webglInit&&(ie.__webglInit=!0,q.addEventListener("dispose",ce));var nt=q.source,dt=A.get(nt);void 0===dt&&A.set(nt,dt={});var ft=function(ie){var q=[];return q.push(ie.wrapS),q.push(ie.wrapT),q.push(ie.wrapR||0),q.push(ie.magFilter),q.push(ie.minFilter),q.push(ie.anisotropy),q.push(ie.internalFormat),q.push(ie.format),q.push(ie.type),q.push(ie.generateMipmaps),q.push(ie.premultiplyAlpha),q.push(ie.flipY),q.push(ie.unpackAlignment),q.push(ie.encoding),q.join()}(q);if(ft!==ie.__cacheKey){void 0===dt[ft]&&(dt[ft]={texture:n.createTexture(),usedTimes:0},f.memory.textures++,Oe=!0),dt[ft].usedTimes++;var Vt=dt[ie.__cacheKey];void 0!==Vt&&(dt[ie.__cacheKey].usedTimes--,0===Vt.usedTimes&&se(q)),ie.__cacheKey=ft,ie.__webglTexture=dt[ft].texture}return Oe}function Ue(ie,q,Oe){var nt=3553;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(nt=35866),q.isData3DTexture&&(nt=32879);var dt=qe(ie,q),ft=q.source;e.bindTexture(nt,ie.__webglTexture,33984+Oe);var Vt=r.get(ft);if(ft.version!==Vt.__version||!0===dt){e.activeTexture(33984+Oe),n.pixelStorei(37440,q.flipY),n.pixelStorei(37441,q.premultiplyAlpha),n.pixelStorei(3317,q.unpackAlignment),n.pixelStorei(37443,0);var Nt=function(ie){return!g&&(ie.wrapS!==ba||ie.wrapT!==ba||ie.minFilter!==Mi&&ie.minFilter!==ko)}(q)&&!1===B(q.image),ne=I(q.image,Nt,!1,C),it=B(ne=_r(q,ne))||g,Mt=u.convert(q.format,q.encoding),wt=u.convert(q.type),pt=X(q.internalFormat,Mt,wt,q.encoding,q.isVideoTexture);Ne(nt,q,it);var ut,Xt=q.mipmaps,Fn=g&&!0!==q.isVideoTexture,qn=void 0===Vt.__version||!0===dt,Kn=re(q,ne,it);if(q.isDepthTexture)pt=6402,g?pt=q.type===Lc?36012:q.type===hf?33190:q.type===Bh?35056:33189:q.type===Lc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),q.format===vf&&6402===pt&&1012!==q.type&&q.type!==hf&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),q.type=hf,wt=u.convert(q.type)),q.format===Hh&&6402===pt&&(pt=34041,q.type!==Bh&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),q.type=Bh,wt=u.convert(q.type))),qn&&(Fn?e.texStorage2D(3553,1,pt,ne.width,ne.height):e.texImage2D(3553,0,pt,ne.width,ne.height,0,Mt,wt,null));else if(q.isDataTexture)if(Xt.length>0&&it){Fn&&qn&&e.texStorage2D(3553,Kn,pt,Xt[0].width,Xt[0].height);for(var he=0,St=Xt.length;he<St;he++)ut=Xt[he],Fn?e.texSubImage2D(3553,he,0,0,ut.width,ut.height,Mt,wt,ut.data):e.texImage2D(3553,he,pt,ut.width,ut.height,0,Mt,wt,ut.data);q.generateMipmaps=!1}else Fn?(qn&&e.texStorage2D(3553,Kn,pt,ne.width,ne.height),e.texSubImage2D(3553,0,0,0,ne.width,ne.height,Mt,wt,ne.data)):e.texImage2D(3553,0,pt,ne.width,ne.height,0,Mt,wt,ne.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){Fn&&qn&&e.texStorage3D(35866,Kn,pt,Xt[0].width,Xt[0].height,ne.depth);for(var at=0,bt=Xt.length;at<bt;at++)ut=Xt[at],q.format!==ns?null!==Mt?Fn?e.compressedTexSubImage3D(35866,at,0,0,0,ut.width,ut.height,ne.depth,Mt,ut.data,0,0):e.compressedTexImage3D(35866,at,pt,ut.width,ut.height,ne.depth,0,ut.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Fn?e.texSubImage3D(35866,at,0,0,0,ut.width,ut.height,ne.depth,Mt,wt,ut.data):e.texImage3D(35866,at,pt,ut.width,ut.height,ne.depth,0,Mt,wt,ut.data)}else{Fn&&qn&&e.texStorage2D(3553,Kn,pt,Xt[0].width,Xt[0].height);for(var Et=0,xt=Xt.length;Et<xt;Et++)ut=Xt[Et],q.format!==ns?null!==Mt?Fn?e.compressedTexSubImage2D(3553,Et,0,0,ut.width,ut.height,Mt,ut.data):e.compressedTexImage2D(3553,Et,pt,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Fn?e.texSubImage2D(3553,Et,0,0,ut.width,ut.height,Mt,wt,ut.data):e.texImage2D(3553,Et,pt,ut.width,ut.height,0,Mt,wt,ut.data)}else if(q.isDataArrayTexture)Fn?(qn&&e.texStorage3D(35866,Kn,pt,ne.width,ne.height,ne.depth),e.texSubImage3D(35866,0,0,0,0,ne.width,ne.height,ne.depth,Mt,wt,ne.data)):e.texImage3D(35866,0,pt,ne.width,ne.height,ne.depth,0,Mt,wt,ne.data);else if(q.isData3DTexture)Fn?(qn&&e.texStorage3D(32879,Kn,pt,ne.width,ne.height,ne.depth),e.texSubImage3D(32879,0,0,0,0,ne.width,ne.height,ne.depth,Mt,wt,ne.data)):e.texImage3D(32879,0,pt,ne.width,ne.height,ne.depth,0,Mt,wt,ne.data);else if(q.isFramebufferTexture){if(qn)if(Fn)e.texStorage2D(3553,Kn,pt,ne.width,ne.height);else for(var dr=ne.width,Zn=ne.height,Sr=0;Sr<Kn;Sr++)e.texImage2D(3553,Sr,pt,dr,Zn,0,Mt,wt,null),dr>>=1,Zn>>=1}else if(Xt.length>0&&it){Fn&&qn&&e.texStorage2D(3553,Kn,pt,Xt[0].width,Xt[0].height);for(var Kr=0,nr=Xt.length;Kr<nr;Kr++)ut=Xt[Kr],Fn?e.texSubImage2D(3553,Kr,0,0,Mt,wt,ut):e.texImage2D(3553,Kr,pt,Mt,wt,ut);q.generateMipmaps=!1}else Fn?(qn&&e.texStorage2D(3553,Kn,pt,ne.width,ne.height),e.texSubImage2D(3553,0,0,0,Mt,wt,ne)):e.texImage2D(3553,0,pt,Mt,wt,ne);P(q,it)&&W(nt),Vt.__version=ft.version,q.onUpdate&&q.onUpdate(q)}ie.__version=q.version}function ot(ie,q,Oe,nt,dt){var ft=u.convert(Oe.format,Oe.encoding),Vt=u.convert(Oe.type),Nt=X(Oe.internalFormat,ft,Vt,Oe.encoding);r.get(q).__hasExternalTextures||(32879===dt||35866===dt?e.texImage3D(dt,0,Nt,q.width,q.height,q.depth,0,ft,Vt,null):e.texImage2D(dt,0,Nt,q.width,q.height,0,ft,Vt,null)),e.bindFramebuffer(36160,ie),qt(q)?x.framebufferTexture2DMultisampleEXT(36160,nt,dt,r.get(Oe).__webglTexture,0,zn(q)):(3553===dt||dt>=34069&&dt<=34074)&&n.framebufferTexture2D(36160,nt,dt,r.get(Oe).__webglTexture,0),e.bindFramebuffer(36160,null)}function Wt(ie,q,Oe){if(n.bindRenderbuffer(36161,ie),q.depthBuffer&&!q.stencilBuffer){var nt=33189;if(Oe||qt(q)){var dt=q.depthTexture;dt&&dt.isDepthTexture&&(dt.type===Lc?nt=36012:dt.type===hf&&(nt=33190));var ft=zn(q);qt(q)?x.renderbufferStorageMultisampleEXT(36161,ft,nt,q.width,q.height):n.renderbufferStorageMultisample(36161,ft,nt,q.width,q.height)}else n.renderbufferStorage(36161,nt,q.width,q.height);n.framebufferRenderbuffer(36160,36096,36161,ie)}else if(q.depthBuffer&&q.stencilBuffer){var Vt=zn(q);Oe&&!1===qt(q)?n.renderbufferStorageMultisample(36161,Vt,35056,q.width,q.height):qt(q)?x.renderbufferStorageMultisampleEXT(36161,Vt,35056,q.width,q.height):n.renderbufferStorage(36161,34041,q.width,q.height),n.framebufferRenderbuffer(36160,33306,36161,ie)}else for(var Nt=!0===q.isWebGLMultipleRenderTargets?q.texture:[q.texture],ne=0;ne<Nt.length;ne++){var it=Nt[ne],Mt=u.convert(it.format,it.encoding),wt=u.convert(it.type),pt=X(it.internalFormat,Mt,wt,it.encoding),ut=zn(q);Oe&&!1===qt(q)?n.renderbufferStorageMultisample(36161,ut,pt,q.width,q.height):qt(q)?x.renderbufferStorageMultisampleEXT(36161,ut,pt,q.width,q.height):n.renderbufferStorage(36161,pt,q.width,q.height)}n.bindRenderbuffer(36161,null)}function It(ie){var q=r.get(ie),Oe=!0===ie.isWebGLCubeRenderTarget;if(ie.depthTexture&&!q.__autoAllocateDepthBuffer){if(Oe)throw new Error("target.depthTexture not supported in Cube render targets");!function(ie,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,ie),!q.depthTexture||!q.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(q.depthTexture).__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),Ce(q.depthTexture,0);var nt=r.get(q.depthTexture).__webglTexture,dt=zn(q);if(q.depthTexture.format===vf)qt(q)?x.framebufferTexture2DMultisampleEXT(36160,36096,3553,nt,0,dt):n.framebufferTexture2D(36160,36096,3553,nt,0);else{if(q.depthTexture.format!==Hh)throw new Error("Unknown depthTexture format");qt(q)?x.framebufferTexture2DMultisampleEXT(36160,33306,3553,nt,0,dt):n.framebufferTexture2D(36160,33306,3553,nt,0)}}(q.__webglFramebuffer,ie)}else if(Oe){q.__webglDepthbuffer=[];for(var nt=0;nt<6;nt++)e.bindFramebuffer(36160,q.__webglFramebuffer[nt]),q.__webglDepthbuffer[nt]=n.createRenderbuffer(),Wt(q.__webglDepthbuffer[nt],ie,!1)}else e.bindFramebuffer(36160,q.__webglFramebuffer),q.__webglDepthbuffer=n.createRenderbuffer(),Wt(q.__webglDepthbuffer,ie,!1);e.bindFramebuffer(36160,null)}function zn(ie){return Math.min(w,ie.samples)}function qt(ie){var q=r.get(ie);return g&&ie.samples>0&&!0===a.has("WEBGL_multisampled_render_to_texture")&&!1!==q.__useRenderToTexture}function _r(ie,q){var Oe=ie.encoding,nt=ie.format,dt=ie.type;return!0===ie.isCompressedTexture||!0===ie.isVideoTexture||1035===ie.format||Oe!==gf&&(Oe===Vn?!1===g?!0===a.has("EXT_sRGB")&&nt===ns?(ie.format=1035,ie.minFilter=ko,ie.generateMipmaps=!1):q=oF.sRGBToLinear(q):(nt!==ns||dt!==pf)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Oe)),q}this.allocateTextureUnit=function(){var ie=ue;return ie>=y&&console.warn("THREE.WebGLTextures: Trying to use "+ie+" texture units while this GPU supports only "+y),ue+=1,ie},this.resetTextureUnits=function(){ue=0},this.setTexture2D=Ce,this.setTexture2DArray=function(ie,q){var Oe=r.get(ie);ie.version>0&&Oe.__version!==ie.version?Ue(Oe,ie,q):e.bindTexture(35866,Oe.__webglTexture,33984+q)},this.setTexture3D=function(ie,q){var Oe=r.get(ie);ie.version>0&&Oe.__version!==ie.version?Ue(Oe,ie,q):e.bindTexture(32879,Oe.__webglTexture,33984+q)},this.setTextureCube=function(ie,q){var Oe=r.get(ie);ie.version>0&&Oe.__version!==ie.version?function(ie,q,Oe){if(6===q.image.length){var nt=qe(ie,q),dt=q.source;e.bindTexture(34067,ie.__webglTexture,33984+Oe);var ft=r.get(dt);if(dt.version!==ft.__version||!0===nt){e.activeTexture(33984+Oe),n.pixelStorei(37440,q.flipY),n.pixelStorei(37441,q.premultiplyAlpha),n.pixelStorei(3317,q.unpackAlignment),n.pixelStorei(37443,0);for(var Vt=q.isCompressedTexture||q.image[0].isCompressedTexture,Nt=q.image[0]&&q.image[0].isDataTexture,ne=[],it=0;it<6;it++)ne[it]=Vt||Nt?Nt?q.image[it].image:q.image[it]:I(q.image[it],!1,!0,_),ne[it]=_r(q,ne[it]);var he,Mt=ne[0],wt=B(Mt)||g,pt=u.convert(q.format,q.encoding),ut=u.convert(q.type),Xt=X(q.internalFormat,pt,ut,q.encoding),Fn=g&&!0!==q.isVideoTexture,qn=void 0===ft.__version||!0===nt,Kn=re(q,Mt,wt);if(Ne(34067,q,wt),Vt){Fn&&qn&&e.texStorage2D(34067,Kn,Xt,Mt.width,Mt.height);for(var St=0;St<6;St++){he=ne[St].mipmaps;for(var at=0;at<he.length;at++){var bt=he[at];q.format!==ns?null!==pt?Fn?e.compressedTexSubImage2D(34069+St,at,0,0,bt.width,bt.height,pt,bt.data):e.compressedTexImage2D(34069+St,at,Xt,bt.width,bt.height,0,bt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Fn?e.texSubImage2D(34069+St,at,0,0,bt.width,bt.height,pt,ut,bt.data):e.texImage2D(34069+St,at,Xt,bt.width,bt.height,0,pt,ut,bt.data)}}}else{he=q.mipmaps,Fn&&qn&&(he.length>0&&Kn++,e.texStorage2D(34067,Kn,Xt,ne[0].width,ne[0].height));for(var Et=0;Et<6;Et++)if(Nt){Fn?e.texSubImage2D(34069+Et,0,0,0,ne[Et].width,ne[Et].height,pt,ut,ne[Et].data):e.texImage2D(34069+Et,0,Xt,ne[Et].width,ne[Et].height,0,pt,ut,ne[Et].data);for(var xt=0;xt<he.length;xt++){var Zn=he[xt].image[Et].image;Fn?e.texSubImage2D(34069+Et,xt+1,0,0,Zn.width,Zn.height,pt,ut,Zn.data):e.texImage2D(34069+Et,xt+1,Xt,Zn.width,Zn.height,0,pt,ut,Zn.data)}}else{Fn?e.texSubImage2D(34069+Et,0,0,0,pt,ut,ne[Et]):e.texImage2D(34069+Et,0,Xt,pt,ut,ne[Et]);for(var Sr=0;Sr<he.length;Sr++){var Kr=he[Sr];Fn?e.texSubImage2D(34069+Et,Sr+1,0,0,pt,ut,Kr.image[Et]):e.texImage2D(34069+Et,Sr+1,Xt,pt,ut,Kr.image[Et])}}}P(q,wt)&&W(34067),ft.__version=dt.version,q.onUpdate&&q.onUpdate(q)}ie.__version=q.version}}(Oe,ie,q):e.bindTexture(34067,Oe.__webglTexture,33984+q)},this.rebindTextures=function(ie,q,Oe){var nt=r.get(ie);void 0!==q&&ot(nt.__webglFramebuffer,ie,ie.texture,36064,3553),void 0!==Oe&&It(ie)},this.setupRenderTarget=function(ie){var q=ie.texture,Oe=r.get(ie),nt=r.get(q);ie.addEventListener("dispose",G),!0!==ie.isWebGLMultipleRenderTargets&&(void 0===nt.__webglTexture&&(nt.__webglTexture=n.createTexture()),nt.__version=q.version,f.memory.textures++);var dt=!0===ie.isWebGLCubeRenderTarget,ft=!0===ie.isWebGLMultipleRenderTargets,Vt=B(ie)||g;if(dt){Oe.__webglFramebuffer=[];for(var Nt=0;Nt<6;Nt++)Oe.__webglFramebuffer[Nt]=n.createFramebuffer()}else{if(Oe.__webglFramebuffer=n.createFramebuffer(),ft)if(o.drawBuffers)for(var ne=ie.texture,it=0,Mt=ne.length;it<Mt;it++){var wt=r.get(ne[it]);void 0===wt.__webglTexture&&(wt.__webglTexture=n.createTexture(),f.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(g&&ie.samples>0&&!1===qt(ie)){var pt=ft?q:[q];Oe.__webglMultisampledFramebuffer=n.createFramebuffer(),Oe.__webglColorRenderbuffer=[],e.bindFramebuffer(36160,Oe.__webglMultisampledFramebuffer);for(var ut=0;ut<pt.length;ut++){var Xt=pt[ut];Oe.__webglColorRenderbuffer[ut]=n.createRenderbuffer(),n.bindRenderbuffer(36161,Oe.__webglColorRenderbuffer[ut]);var Fn=u.convert(Xt.format,Xt.encoding),qn=u.convert(Xt.type),Kn=X(Xt.internalFormat,Fn,qn,Xt.encoding,!0===ie.isXRRenderTarget),he=zn(ie);n.renderbufferStorageMultisample(36161,he,Kn,ie.width,ie.height),n.framebufferRenderbuffer(36160,36064+ut,36161,Oe.__webglColorRenderbuffer[ut])}n.bindRenderbuffer(36161,null),ie.depthBuffer&&(Oe.__webglDepthRenderbuffer=n.createRenderbuffer(),Wt(Oe.__webglDepthRenderbuffer,ie,!0)),e.bindFramebuffer(36160,null)}}if(dt){e.bindTexture(34067,nt.__webglTexture),Ne(34067,q,Vt);for(var St=0;St<6;St++)ot(Oe.__webglFramebuffer[St],ie,q,36064,34069+St);P(q,Vt)&&W(34067),e.unbindTexture()}else if(ft){for(var at=ie.texture,bt=0,Et=at.length;bt<Et;bt++){var xt=at[bt],dr=r.get(xt);e.bindTexture(3553,dr.__webglTexture),Ne(3553,xt,Vt),ot(Oe.__webglFramebuffer,ie,xt,36064+bt,3553),P(xt,Vt)&&W(3553)}e.unbindTexture()}else{var Zn=3553;(ie.isWebGL3DRenderTarget||ie.isWebGLArrayRenderTarget)&&(g?Zn=ie.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(Zn,nt.__webglTexture),Ne(Zn,q,Vt),ot(Oe.__webglFramebuffer,ie,q,36064,Zn),P(q,Vt)&&W(Zn),e.unbindTexture()}ie.depthBuffer&&It(ie)},this.updateRenderTargetMipmap=function(ie){for(var q=B(ie)||g,Oe=!0===ie.isWebGLMultipleRenderTargets?ie.texture:[ie.texture],nt=0,dt=Oe.length;nt<dt;nt++){var ft=Oe[nt];if(P(ft,q)){var Vt=ie.isWebGLCubeRenderTarget?34067:3553,Nt=r.get(ft).__webglTexture;e.bindTexture(Vt,Nt),W(Vt),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function(ie){if(g&&ie.samples>0&&!1===qt(ie)){var q=ie.isWebGLMultipleRenderTargets?ie.texture:[ie.texture],Oe=ie.width,nt=ie.height,dt=16384,ft=[],Vt=ie.stencilBuffer?33306:36096,Nt=r.get(ie),ne=!0===ie.isWebGLMultipleRenderTargets;if(ne)for(var it=0;it<q.length;it++)e.bindFramebuffer(36160,Nt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+it,36161,null),e.bindFramebuffer(36160,Nt.__webglFramebuffer),n.framebufferTexture2D(36009,36064+it,3553,null,0);e.bindFramebuffer(36008,Nt.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,Nt.__webglFramebuffer);for(var Mt=0;Mt<q.length;Mt++){ft.push(36064+Mt),ie.depthBuffer&&ft.push(Vt);var wt=void 0!==Nt.__ignoreDepthValues&&Nt.__ignoreDepthValues;if(!1===wt&&(ie.depthBuffer&&(dt|=256),ie.stencilBuffer&&(dt|=1024)),ne&&n.framebufferRenderbuffer(36008,36064,36161,Nt.__webglColorRenderbuffer[Mt]),!0===wt&&(n.invalidateFramebuffer(36008,[Vt]),n.invalidateFramebuffer(36009,[Vt])),ne){var pt=r.get(q[Mt]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,pt,0)}n.blitFramebuffer(0,0,Oe,nt,0,0,Oe,nt,dt,9728),E&&n.invalidateFramebuffer(36008,ft)}if(e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,null),ne)for(var ut=0;ut<q.length;ut++){e.bindFramebuffer(36160,Nt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+ut,36161,Nt.__webglColorRenderbuffer[ut]);var Xt=r.get(q[ut]).__webglTexture;e.bindFramebuffer(36160,Nt.__webglFramebuffer),n.framebufferTexture2D(36009,36064+ut,3553,Xt,0)}e.bindFramebuffer(36009,Nt.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=It,this.setupFrameBufferTexture=ot,this.useMultisampledRTT=qt}function q9(n,a,e){var r=e.isWebGL2;return{convert:function(u){var p,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(u===pf)return 5121;if(1017===u)return 32819;if(1018===u)return 32820;if(1010===u)return 5120;if(1011===u)return 5122;if(1012===u)return 5123;if(1013===u)return 5124;if(u===hf)return 5125;if(u===Lc)return 5126;if(u===wy)return r?5131:null!==(p=a.get("OES_texture_half_float"))?p.HALF_FLOAT_OES:null;if(1021===u)return 6406;if(u===ns)return 6408;if(1024===u)return 6409;if(1025===u)return 6410;if(u===vf)return 6402;if(u===Hh)return 34041;if(1022===u)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===u)return null!==(p=a.get("EXT_sRGB"))?p.SRGB_ALPHA_EXT:null;if(1028===u)return 6403;if(1029===u)return 36244;if(1030===u)return 33319;if(1031===u)return 33320;if(1033===u)return 36249;if(u===OD||u===PD||u===ID||u===LD)if(f===Vn){if(null===(p=a.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(u===OD)return p.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(u===PD)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(u===ID)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(u===LD)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(p=a.get("WEBGL_compressed_texture_s3tc")))return null;if(u===OD)return p.COMPRESSED_RGB_S3TC_DXT1_EXT;if(u===PD)return p.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(u===ID)return p.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(u===LD)return p.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(u===ML||u===OL||u===PL||u===IL){if(null===(p=a.get("WEBGL_compressed_texture_pvrtc")))return null;if(u===ML)return p.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(u===OL)return p.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(u===PL)return p.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(u===IL)return p.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===u)return null!==(p=a.get("WEBGL_compressed_texture_etc1"))?p.COMPRESSED_RGB_ETC1_WEBGL:null;if(u===LL||u===FL){if(null===(p=a.get("WEBGL_compressed_texture_etc")))return null;if(u===LL)return f===Vn?p.COMPRESSED_SRGB8_ETC2:p.COMPRESSED_RGB8_ETC2;if(u===FL)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:p.COMPRESSED_RGBA8_ETC2_EAC}if(u===kL||u===NL||u===GL||u===BL||u===HL||u===VL||u===WL||u===UL||u===zL||u===jL||u===qL||u===KL||u===YL||u===$L){if(null===(p=a.get("WEBGL_compressed_texture_astc")))return null;if(u===kL)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:p.COMPRESSED_RGBA_ASTC_4x4_KHR;if(u===NL)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:p.COMPRESSED_RGBA_ASTC_5x4_KHR;if(u===GL)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:p.COMPRESSED_RGBA_ASTC_5x5_KHR;if(u===BL)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:p.COMPRESSED_RGBA_ASTC_6x5_KHR;if(u===HL)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:p.COMPRESSED_RGBA_ASTC_6x6_KHR;if(u===VL)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:p.COMPRESSED_RGBA_ASTC_8x5_KHR;if(u===WL)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:p.COMPRESSED_RGBA_ASTC_8x6_KHR;if(u===UL)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:p.COMPRESSED_RGBA_ASTC_8x8_KHR;if(u===zL)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:p.COMPRESSED_RGBA_ASTC_10x5_KHR;if(u===jL)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:p.COMPRESSED_RGBA_ASTC_10x6_KHR;if(u===qL)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:p.COMPRESSED_RGBA_ASTC_10x8_KHR;if(u===KL)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:p.COMPRESSED_RGBA_ASTC_10x10_KHR;if(u===YL)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:p.COMPRESSED_RGBA_ASTC_12x10_KHR;if(u===$L)return f===Vn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:p.COMPRESSED_RGBA_ASTC_12x12_KHR}if(u===XL){if(null===(p=a.get("EXT_texture_compression_bptc")))return null;if(u===XL)return f===Vn?p.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:p.COMPRESSED_RGBA_BPTC_UNORM_EXT}return u===Bh?r?34042:null!==(p=a.get("WEBGL_depth_texture"))?p.UNSIGNED_INT_24_8_WEBGL:null:void 0!==n[u]?n[u]:null}}}var K9=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return N(this,e),(r=a.call(this)).isArrayCamera=!0,r.cameras=o,r}return e}(kr),Bc=function(n){ve(e,n);var a=ge(e);function e(){var r;return N(this,e),(r=a.call(this)).isGroup=!0,r.type="Group",r}return e}(Co),Y9={type:"move"},yA=function(){function n(){N(this,n),this._targetRay=null,this._grip=null,this._hand=null}return j(n,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new Bc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new Bc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Z),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new Bc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Z),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var r=this._hand;if(r){var u,o=Pt(e.hand.values());try{for(o.s();!(u=o.n()).done;)this._getHandJoint(r,u.value)}catch(p){o.e(p)}finally{o.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,r,o){var u=null,f=null,p=null,v=this._targetRay,g=this._grip,y=this._hand;if(e&&"visible-blurred"!==r.session.visibilityState){if(y&&e.hand){p=!0;var C,_=Pt(e.hand.values());try{for(_.s();!(C=_.n()).done;){var w=C.value,x=r.getJointPose(w,o),E=this._getHandJoint(y,w);null!==x&&(E.matrix.fromArray(x.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.jointRadius=x.radius),E.visible=null!==x}}catch(I){_.e(I)}finally{_.f()}var A=y.joints["index-finger-tip"].position.distanceTo(y.joints["thumb-tip"].position);y.inputState.pinching&&A>.025?(y.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!y.inputState.pinching&&A<=.015&&(y.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==g&&e.gripSpace&&null!==(f=r.getPose(e.gripSpace,o))&&(g.matrix.fromArray(f.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),f.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(f.linearVelocity)):g.hasLinearVelocity=!1,f.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(f.angularVelocity)):g.hasAngularVelocity=!1);null!==v&&(null===(u=r.getPose(e.targetRaySpace,o))&&null!==f&&(u=f),null!==u&&(v.matrix.fromArray(u.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),u.linearVelocity?(v.hasLinearVelocity=!0,v.linearVelocity.copy(u.linearVelocity)):v.hasLinearVelocity=!1,u.angularVelocity?(v.hasAngularVelocity=!0,v.angularVelocity.copy(u.angularVelocity)):v.hasAngularVelocity=!1,this.dispatchEvent(Y9)))}return null!==v&&(v.visible=null!==u),null!==g&&(g.visible=null!==f),null!==y&&(y.visible=null!==p),this}},{key:"_getHandJoint",value:function(e,r){if(void 0===e.joints[r.jointName]){var o=new Bc;o.matrixAutoUpdate=!1,o.visible=!1,e.joints[r.jointName]=o,e.add(o)}return e.joints[r.jointName]}}]),n}(),$9=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f,p,v,g,y,_,C){var w;if(N(this,e),(C=void 0!==C?C:vf)!==vf&&C!==Hh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===u&&C===vf&&(u=hf),void 0===u&&C===Hh&&(u=Bh),(w=a.call(this,null,f,p,v,g,y,C,u,_)).isDepthTexture=!0,w.image={width:r,height:o},w.magFilter=void 0!==g?g:Mi,w.minFilter=void 0!==y?y:Mi,w.flipY=!1,w.generateMipmaps=!1,w}return e}(xu),X9=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;N(this,e);var f=Yn(u=a.call(this)),p=null,v=1,g=null,y="local-floor",_=null,C=null,w=null,x=null,E=null,b=null,T=o.getContextAttributes(),A=null,M=null,O=[],I=[],B=new Set,z=new Map,P=new kr;P.layers.enable(1),P.viewport=new xr;var W=new kr;W.layers.enable(2),W.viewport=new xr;var X=[P,W],re=new K9;re.layers.enable(1),re.layers.enable(2);var de=null,ce=null;function G(xe){var Ae=I.indexOf(xe.inputSource);if(-1!==Ae){var me=O[Ae];void 0!==me&&me.dispatchEvent({type:xe.type,data:xe.inputSource})}}function te(){p.removeEventListener("select",G),p.removeEventListener("selectstart",G),p.removeEventListener("selectend",G),p.removeEventListener("squeeze",G),p.removeEventListener("squeezestart",G),p.removeEventListener("squeezeend",G),p.removeEventListener("end",te),p.removeEventListener("inputsourceschange",se);for(var xe=0;xe<O.length;xe++){var Ae=I[xe];null!==Ae&&(I[xe]=null,O[xe].disconnect(Ae))}de=null,ce=null,r.setRenderTarget(A),E=null,x=null,w=null,p=null,M=null,Be.stop(),f.isPresenting=!1,f.dispatchEvent({type:"sessionend"})}function se(xe){for(var Ae=0;Ae<xe.removed.length;Ae++){var me=xe.removed[Ae],Je=I.indexOf(me);Je>=0&&(I[Je]=null,O[Je].disconnect(me))}for(var Ne=0;Ne<xe.added.length;Ne++){var qe=xe.added[Ne],Ue=I.indexOf(qe);if(-1===Ue){for(var je=0;je<O.length;je++){if(je>=I.length){I.push(qe),Ue=je;break}if(null===I[je]){I[je]=qe,Ue=je;break}}if(-1===Ue)break}var ot=O[Ue];ot&&ot.connect(qe)}}u.cameraAutoUpdate=!0,u.enabled=!1,u.isPresenting=!1,u.getController=function(xe){var Ae=O[xe];return void 0===Ae&&(Ae=new yA,O[xe]=Ae),Ae.getTargetRaySpace()},u.getControllerGrip=function(xe){var Ae=O[xe];return void 0===Ae&&(Ae=new yA,O[xe]=Ae),Ae.getGripSpace()},u.getHand=function(xe){var Ae=O[xe];return void 0===Ae&&(Ae=new yA,O[xe]=Ae),Ae.getHandSpace()},u.setFramebufferScaleFactor=function(xe){v=xe,!0===f.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},u.setReferenceSpaceType=function(xe){y=xe,!0===f.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},u.getReferenceSpace=function(){return _||g},u.setReferenceSpace=function(xe){_=xe},u.getBaseLayer=function(){return null!==x?x:E},u.getBinding=function(){return w},u.getFrame=function(){return b},u.getSession=function(){return p},u.setSession=function(){var xe=function(n){return function(){var a=this,e=arguments;return new Promise(function(r,o){var u=n.apply(a,e);function f(v){yL(u,r,o,f,p,"next",v)}function p(v){yL(u,r,o,f,p,"throw",v)}f(void 0)})}}(yi.mark(function Ae(me){var Ne,qe,Ue,je;return yi.wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(null===(p=me)){tt.next=25;break}if(A=r.getRenderTarget(),p.addEventListener("select",G),p.addEventListener("selectstart",G),p.addEventListener("selectend",G),p.addEventListener("squeeze",G),p.addEventListener("squeezestart",G),p.addEventListener("squeezeend",G),p.addEventListener("end",te),p.addEventListener("inputsourceschange",se),!0===T.xrCompatible){tt.next=14;break}return tt.next=14,o.makeXRCompatible();case 14:return void 0===p.renderState.layers||!1===r.capabilities.isWebGL2?(E=new XRWebGLLayer(p,o,{antialias:void 0!==p.renderState.layers||T.antialias,alpha:T.alpha,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:v}),p.updateRenderState({baseLayer:E}),M=new yf(E.framebufferWidth,E.framebufferHeight,{format:ns,type:pf,encoding:r.outputEncoding,stencilBuffer:T.stencil})):(Ne=null,qe=null,Ue=null,T.depth&&(Ue=T.stencil?35056:33190,Ne=T.stencil?Hh:vf,qe=T.stencil?Bh:hf),je={colorFormat:32856,depthFormat:Ue,scaleFactor:v},w=new XRWebGLBinding(p,o),x=w.createProjectionLayer(je),p.updateRenderState({layers:[x]}),M=new yf(x.textureWidth,x.textureHeight,{format:ns,type:pf,depthTexture:new $9(x.textureWidth,x.textureHeight,qe,void 0,void 0,void 0,void 0,void 0,void 0,Ne),stencilBuffer:T.stencil,encoding:r.outputEncoding,samples:T.antialias?4:0}),r.properties.get(M).__ignoreDepthValues=x.ignoreDepthValues),M.isXRRenderTarget=!0,this.setFoveation(1),_=null,tt.next=20,p.requestReferenceSpace(y);case 20:g=tt.sent,Be.setContext(p),Be.start(),f.isPresenting=!0,f.dispatchEvent({type:"sessionstart"});case 25:case"end":return tt.stop()}},Ae,this)}));return function(Ae){return xe.apply(this,arguments)}}();var le=new Z,ue=new Z;function Re(xe,Ae){null===Ae?xe.matrixWorld.copy(xe.matrix):xe.matrixWorld.multiplyMatrices(Ae.matrixWorld,xe.matrix),xe.matrixWorldInverse.copy(xe.matrixWorld).invert()}u.updateCamera=function(xe){if(null!==p){re.near=W.near=P.near=xe.near,re.far=W.far=P.far=xe.far,(de!==re.near||ce!==re.far)&&(p.updateRenderState({depthNear:re.near,depthFar:re.far}),de=re.near,ce=re.far);var Ae=xe.parent,me=re.cameras;Re(re,Ae);for(var Je=0;Je<me.length;Je++)Re(me[Je],Ae);re.matrixWorld.decompose(re.position,re.quaternion,re.scale),xe.matrix.copy(re.matrix),xe.matrix.decompose(xe.position,xe.quaternion,xe.scale);for(var Ne=xe.children,qe=0,Ue=Ne.length;qe<Ue;qe++)Ne[qe].updateMatrixWorld(!0);2===me.length?function(xe,Ae,me){le.setFromMatrixPosition(Ae.matrixWorld),ue.setFromMatrixPosition(me.matrixWorld);var Je=le.distanceTo(ue),Ne=Ae.projectionMatrix.elements,qe=me.projectionMatrix.elements,Ue=Ne[14]/(Ne[10]-1),je=Ne[14]/(Ne[10]+1),ot=(Ne[9]+1)/Ne[5],Wt=(Ne[9]-1)/Ne[5],tt=(Ne[8]-1)/Ne[0],It=(qe[8]+1)/qe[0],xn=Ue*tt,Sn=Ue*It,Rt=Je/(-tt+It),gn=Rt*-tt;Ae.matrixWorld.decompose(xe.position,xe.quaternion,xe.scale),xe.translateX(gn),xe.translateZ(Rt),xe.matrixWorld.compose(xe.position,xe.quaternion,xe.scale),xe.matrixWorldInverse.copy(xe.matrixWorld).invert();var zn=Ue+Rt,qt=je+Rt;xe.projectionMatrix.makePerspective(xn-gn,Sn+(Je-gn),ot*je/qt*zn,Wt*je/qt*zn,zn,qt)}(re,P,W):re.projectionMatrix.copy(P.projectionMatrix)}},u.getCamera=function(){return re},u.getFoveation=function(){return null!==x?x.fixedFoveation:null!==E?E.fixedFoveation:void 0},u.setFoveation=function(xe){null!==x&&(x.fixedFoveation=xe),null!==E&&void 0!==E.fixedFoveation&&(E.fixedFoveation=xe)},u.getPlanes=function(){return B};var Se=null,Be=new bF;return Be.setAnimationLoop(function(xe,Ae){if(C=Ae.getViewerPose(_||g),b=Ae,null!==C){var me=C.views;null!==E&&(r.setRenderTargetFramebuffer(M,E.framebuffer),r.setRenderTarget(M));var Je=!1;me.length!==re.cameras.length&&(re.cameras.length=0,Je=!0);for(var Ne=0;Ne<me.length;Ne++){var qe=me[Ne],Ue=null;if(null!==E)Ue=E.getViewport(qe);else{var je=w.getViewSubImage(x,qe);Ue=je.viewport,0===Ne&&(r.setRenderTargetTextures(M,je.colorTexture,x.ignoreDepthValues?void 0:je.depthStencilTexture),r.setRenderTarget(M))}var ot=X[Ne];void 0===ot&&((ot=new kr).layers.enable(Ne),ot.viewport=new xr,X[Ne]=ot),ot.matrix.fromArray(qe.transform.matrix),ot.projectionMatrix.fromArray(qe.projectionMatrix),ot.viewport.set(Ue.x,Ue.y,Ue.width,Ue.height),0===Ne&&re.matrix.copy(ot.matrix),!0===Je&&re.cameras.push(ot)}}for(var Wt=0;Wt<O.length;Wt++){var tt=I[Wt],It=O[Wt];null!==tt&&void 0!==It&&It.update(tt,Ae,_||g)}if(Se&&Se(xe,Ae),Ae.detectedPlanes){f.dispatchEvent({type:"planesdetected",data:Ae.detectedPlanes});var Rt,xn=null,Sn=Pt(B);try{for(Sn.s();!(Rt=Sn.n()).done;){var gn=Rt.value;Ae.detectedPlanes.has(gn)||(null===xn&&(xn=[]),xn.push(gn))}}catch(nt){Sn.e(nt)}finally{Sn.f()}if(null!==xn){var qt,zn=Pt(xn);try{for(zn.s();!(qt=zn.n()).done;){var yr=qt.value;B.delete(yr),z.delete(yr),f.dispatchEvent({type:"planeremoved",data:yr})}}catch(nt){zn.e(nt)}finally{zn.f()}}var ie,_r=Pt(Ae.detectedPlanes);try{for(_r.s();!(ie=_r.n()).done;){var q=ie.value;if(B.has(q)){var Oe=z.get(q);q.lastChangedTime>Oe&&(z.set(q,q.lastChangedTime),f.dispatchEvent({type:"planechanged",data:q}))}else B.add(q),z.set(q,Ae.lastChangedTime),f.dispatchEvent({type:"planeadded",data:q})}}catch(nt){_r.e(nt)}finally{_r.f()}}b=null}),u.setAnimationLoop=function(xe){Se=xe},u.dispose=function(){},u}return e}(fl);function J9(n,a){function o(E,b){E.opacity.value=b.opacity,b.color&&E.diffuse.value.copy(b.color),b.emissive&&E.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(E.map.value=b.map),b.alphaMap&&(E.alphaMap.value=b.alphaMap),b.bumpMap&&(E.bumpMap.value=b.bumpMap,E.bumpScale.value=b.bumpScale,1===b.side&&(E.bumpScale.value*=-1)),b.displacementMap&&(E.displacementMap.value=b.displacementMap,E.displacementScale.value=b.displacementScale,E.displacementBias.value=b.displacementBias),b.emissiveMap&&(E.emissiveMap.value=b.emissiveMap),b.normalMap&&(E.normalMap.value=b.normalMap,E.normalScale.value.copy(b.normalScale),1===b.side&&E.normalScale.value.negate()),b.specularMap&&(E.specularMap.value=b.specularMap),b.alphaTest>0&&(E.alphaTest.value=b.alphaTest);var M,O,T=a.get(b).envMap;if(T&&(E.envMap.value=T,E.flipEnvMap.value=T.isCubeTexture&&!1===T.isRenderTargetTexture?-1:1,E.reflectivity.value=b.reflectivity,E.ior.value=b.ior,E.refractionRatio.value=b.refractionRatio),b.lightMap){E.lightMap.value=b.lightMap;var A=!0!==n.physicallyCorrectLights?Math.PI:1;E.lightMapIntensity.value=b.lightMapIntensity*A}b.aoMap&&(E.aoMap.value=b.aoMap,E.aoMapIntensity.value=b.aoMapIntensity),b.map?M=b.map:b.specularMap?M=b.specularMap:b.displacementMap?M=b.displacementMap:b.normalMap?M=b.normalMap:b.bumpMap?M=b.bumpMap:b.roughnessMap?M=b.roughnessMap:b.metalnessMap?M=b.metalnessMap:b.alphaMap?M=b.alphaMap:b.emissiveMap?M=b.emissiveMap:b.clearcoatMap?M=b.clearcoatMap:b.clearcoatNormalMap?M=b.clearcoatNormalMap:b.clearcoatRoughnessMap?M=b.clearcoatRoughnessMap:b.iridescenceMap?M=b.iridescenceMap:b.iridescenceThicknessMap?M=b.iridescenceThicknessMap:b.specularIntensityMap?M=b.specularIntensityMap:b.specularColorMap?M=b.specularColorMap:b.transmissionMap?M=b.transmissionMap:b.thicknessMap?M=b.thicknessMap:b.sheenColorMap?M=b.sheenColorMap:b.sheenRoughnessMap&&(M=b.sheenRoughnessMap),void 0!==M&&(M.isWebGLRenderTarget&&(M=M.texture),!0===M.matrixAutoUpdate&&M.updateMatrix(),E.uvTransform.value.copy(M.matrix)),b.aoMap?O=b.aoMap:b.lightMap&&(O=b.lightMap),void 0!==O&&(O.isWebGLRenderTarget&&(O=O.texture),!0===O.matrixAutoUpdate&&O.updateMatrix(),E.uv2Transform.value.copy(O.matrix))}return{refreshFogUniforms:function(E,b){b.color.getRGB(E.fogColor.value,wF(n)),b.isFog?(E.fogNear.value=b.near,E.fogFar.value=b.far):b.isFogExp2&&(E.fogDensity.value=b.density)},refreshMaterialUniforms:function(E,b,T,A,M){b.isMeshBasicMaterial||b.isMeshLambertMaterial?o(E,b):b.isMeshToonMaterial?(o(E,b),function(E,b){b.gradientMap&&(E.gradientMap.value=b.gradientMap)}(E,b)):b.isMeshPhongMaterial?(o(E,b),function(E,b){E.specular.value.copy(b.specular),E.shininess.value=Math.max(b.shininess,1e-4)}(E,b)):b.isMeshStandardMaterial?(o(E,b),function(E,b){E.roughness.value=b.roughness,E.metalness.value=b.metalness,b.roughnessMap&&(E.roughnessMap.value=b.roughnessMap),b.metalnessMap&&(E.metalnessMap.value=b.metalnessMap),a.get(b).envMap&&(E.envMapIntensity.value=b.envMapIntensity)}(E,b),b.isMeshPhysicalMaterial&&function(E,b,T){E.ior.value=b.ior,b.sheen>0&&(E.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),E.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(E.sheenColorMap.value=b.sheenColorMap),b.sheenRoughnessMap&&(E.sheenRoughnessMap.value=b.sheenRoughnessMap)),b.clearcoat>0&&(E.clearcoat.value=b.clearcoat,E.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(E.clearcoatMap.value=b.clearcoatMap),b.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap),b.clearcoatNormalMap&&(E.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),E.clearcoatNormalMap.value=b.clearcoatNormalMap,1===b.side&&E.clearcoatNormalScale.value.negate())),b.iridescence>0&&(E.iridescence.value=b.iridescence,E.iridescenceIOR.value=b.iridescenceIOR,E.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(E.iridescenceMap.value=b.iridescenceMap),b.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=b.iridescenceThicknessMap)),b.transmission>0&&(E.transmission.value=b.transmission,E.transmissionSamplerMap.value=T.texture,E.transmissionSamplerSize.value.set(T.width,T.height),b.transmissionMap&&(E.transmissionMap.value=b.transmissionMap),E.thickness.value=b.thickness,b.thicknessMap&&(E.thicknessMap.value=b.thicknessMap),E.attenuationDistance.value=b.attenuationDistance,E.attenuationColor.value.copy(b.attenuationColor)),E.specularIntensity.value=b.specularIntensity,E.specularColor.value.copy(b.specularColor),b.specularIntensityMap&&(E.specularIntensityMap.value=b.specularIntensityMap),b.specularColorMap&&(E.specularColorMap.value=b.specularColorMap)}(E,b,M)):b.isMeshMatcapMaterial?(o(E,b),function(E,b){b.matcap&&(E.matcap.value=b.matcap)}(E,b)):b.isMeshDepthMaterial?o(E,b):b.isMeshDistanceMaterial?(o(E,b),function(E,b){E.referencePosition.value.copy(b.referencePosition),E.nearDistance.value=b.nearDistance,E.farDistance.value=b.farDistance}(E,b)):b.isMeshNormalMaterial?o(E,b):b.isLineBasicMaterial?(function(E,b){E.diffuse.value.copy(b.color),E.opacity.value=b.opacity}(E,b),b.isLineDashedMaterial&&function(E,b){E.dashSize.value=b.dashSize,E.totalSize.value=b.dashSize+b.gapSize,E.scale.value=b.scale}(E,b)):b.isPointsMaterial?function(E,b,T,A){var M;E.diffuse.value.copy(b.color),E.opacity.value=b.opacity,E.size.value=b.size*T,E.scale.value=.5*A,b.map&&(E.map.value=b.map),b.alphaMap&&(E.alphaMap.value=b.alphaMap),b.alphaTest>0&&(E.alphaTest.value=b.alphaTest),b.map?M=b.map:b.alphaMap&&(M=b.alphaMap),void 0!==M&&(!0===M.matrixAutoUpdate&&M.updateMatrix(),E.uvTransform.value.copy(M.matrix))}(E,b,T,A):b.isSpriteMaterial?function(E,b){var T;E.diffuse.value.copy(b.color),E.opacity.value=b.opacity,E.rotation.value=b.rotation,b.map&&(E.map.value=b.map),b.alphaMap&&(E.alphaMap.value=b.alphaMap),b.alphaTest>0&&(E.alphaTest.value=b.alphaTest),b.map?T=b.map:b.alphaMap&&(T=b.alphaMap),void 0!==T&&(!0===T.matrixAutoUpdate&&T.updateMatrix(),E.uvTransform.value.copy(T.matrix))}(E,b):b.isShadowMaterial?(E.color.value.copy(b.color),E.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}}}function Z9(n,a,e,r){var o={},u={},f=[],p=e.isWebGL2?n.getParameter(35375):0;function w(A,M,O){var I=A.value;if(void 0===O[M]){if("number"==typeof I)O[M]=I;else{for(var B=Array.isArray(I)?I:[I],z=[],P=0;P<B.length;P++)z.push(B[P].clone());O[M]=z}return!0}if("number"==typeof I){if(O[M]!==I)return O[M]=I,!0}else for(var W=Array.isArray(O[M])?O[M]:[O[M]],X=Array.isArray(I)?I:[I],re=0;re<W.length;re++){var de=W[re];if(!1===de.equals(X[re]))return de.copy(X[re]),!0}return!1}function E(A){var M={boundary:0,storage:0};return"number"==typeof A?(M.boundary=4,M.storage=4):A.isVector2?(M.boundary=8,M.storage=8):A.isVector3||A.isColor?(M.boundary=16,M.storage=12):A.isVector4?(M.boundary=16,M.storage=16):A.isMatrix3?(M.boundary=48,M.storage=48):A.isMatrix4?(M.boundary=64,M.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),M}function b(A){var M=A.target;M.removeEventListener("dispose",b);var O=f.indexOf(M.__bindingPointIndex);f.splice(O,1),n.deleteBuffer(o[M.id]),delete o[M.id],delete u[M.id]}return{bind:function(A,M){r.uniformBlockBinding(A,M.program)},update:function(A,M){var O=o[A.id];void 0===O&&(function(A){for(var M=A.uniforms,O=0,B=0,z=0,P=M.length;z<P;z++){for(var W=M[z],X={boundary:0,storage:0},re=Array.isArray(W.value)?W.value:[W.value],de=0,ce=re.length;de<ce;de++){var te=E(re[de]);X.boundary+=te.boundary,X.storage+=te.storage}W.__data=new Float32Array(X.storage/Float32Array.BYTES_PER_ELEMENT),W.__offset=O,z>0&&0!=(B=O%16)&&16-B-X.boundary<0&&(W.__offset=O+=16-B),O+=X.storage}(B=O%16)>0&&(O+=16-B),A.__size=O,A.__cache={}}(A),O=function(A){var M=function(){for(var A=0;A<p;A++)if(-1===f.indexOf(A))return f.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();A.__bindingPointIndex=M;var O=n.createBuffer(),I=A.__size,B=A.usage;return n.bindBuffer(35345,O),n.bufferData(35345,I,B),n.bindBuffer(35345,null),n.bindBufferBase(35345,M,O),O}(A),o[A.id]=O,A.addEventListener("dispose",b)),r.updateUBOMapping(A,M.program);var B=a.render.frame;u[A.id]!==B&&(function(A){var O=A.uniforms,I=A.__cache;n.bindBuffer(35345,o[A.id]);for(var B=0,z=O.length;B<z;B++){var P=O[B];if(!0===w(P,B,I)){for(var W=P.__offset,X=Array.isArray(P.value)?P.value:[P.value],re=0,de=0;de<X.length;de++){var ce=X[de],G=E(ce);"number"==typeof ce?(P.__data[0]=ce,n.bufferSubData(35345,W+re,P.__data)):ce.isMatrix3?(P.__data[0]=ce.elements[0],P.__data[1]=ce.elements[1],P.__data[2]=ce.elements[2],P.__data[3]=ce.elements[0],P.__data[4]=ce.elements[3],P.__data[5]=ce.elements[4],P.__data[6]=ce.elements[5],P.__data[7]=ce.elements[0],P.__data[8]=ce.elements[6],P.__data[9]=ce.elements[7],P.__data[10]=ce.elements[8],P.__data[11]=ce.elements[0]):(ce.toArray(P.__data,re),re+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,W,P.__data)}}n.bindBuffer(35345,null)}(A),u[A.id]=B)},dispose:function(){for(var A in o)n.deleteBuffer(o[A]);f=[],o={},u={}}}}function Q9(){var n=Ry("canvas");return n.style.display="block",n}function Tu(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var y,a=void 0!==n.canvas?n.canvas:Q9(),e=void 0!==n.context?n.context:null,r=void 0===n.depth||n.depth,o=void 0===n.stencil||n.stencil,u=void 0!==n.antialias&&n.antialias,f=void 0===n.premultipliedAlpha||n.premultipliedAlpha,p=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,v=void 0!==n.powerPreference?n.powerPreference:"default",g=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;y=null!==e?e.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;var _=null,C=null,w=[],x=[];this.domElement=a,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=gf,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var E=this,b=!1,T=0,A=0,M=null,O=-1,I=null,B=new xr,z=new xr,P=null,W=a.width,X=a.height,re=1,de=null,ce=null,G=new xr(0,0,W,X),te=new xr(0,0,W,X),se=!1,le=new cA,ue=!1,_e=!1,Re=null,Se=new En,Ce=new $e,Be=new Z,xe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ae(){return null===M?re:1}var Ue,je,ot,Wt,tt,It,xn,Sn,Rt,gn,zn,qt,yr,_r,ie,q,Oe,nt,dt,ft,Vt,Nt,ne,it,me=e;function Je(Q,De){for(var ke=0;ke<Q.length;ke++){var Le=a.getContext(Q[ke],De);if(null!==Le)return Le}return null}try{var Ne={alpha:!0,depth:r,stencil:o,antialias:u,premultipliedAlpha:f,preserveDrawingBuffer:p,powerPreference:v,failIfMajorPerformanceCaveat:g};if("setAttribute"in a&&a.setAttribute("data-engine","three.js r".concat(TD)),a.addEventListener("webglcontextlost",pt,!1),a.addEventListener("webglcontextrestored",ut,!1),a.addEventListener("webglcontextcreationerror",Xt,!1),null===me){var qe=["webgl2","webgl","experimental-webgl"];if(!0===E.isWebGL1Renderer&&qe.shift(),null===(me=Je(qe,Ne)))throw Je(qe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===me.getShaderPrecisionFormat&&(me.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Q){throw console.error("THREE.WebGLRenderer: "+Q.message),Q}function Mt(){Ue=new c8(me),je=new i8(me,Ue,n),Ue.init(je),Nt=new q9(me,Ue,je),ot=new z9(me,Ue,je),Wt=new p8,tt=new M9,It=new j9(me,Ue,ot,tt,je,Nt,Wt),xn=new a8(E),Sn=new l8(E),Rt=new S4(me,je),ne=new n8(me,Ue,Rt,je),gn=new d8(me,Rt,Wt,ne),zn=new m8(me,gn,Rt,Wt),dt=new g8(me,je,It),q=new o8(tt),qt=new A9(E,xn,Sn,Ue,je,ne,q),yr=new J9(E,tt),_r=new P9,ie=new G9(Ue,je),nt=new t8(E,xn,Sn,ot,zn,y,f),Oe=new U9(E,zn,je),it=new Z9(me,Wt,je,ot),ft=new r8(me,Ue,Wt,je),Vt=new f8(me,Ue,Wt,je),Wt.programs=qt.programs,E.capabilities=je,E.extensions=Ue,E.properties=tt,E.renderLists=_r,E.shadowMap=Oe,E.state=ot,E.info=Wt}Mt();var wt=new X9(E,me);function pt(Q){Q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function ut(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;var Q=Wt.autoReset,De=Oe.enabled,ke=Oe.autoUpdate,be=Oe.needsUpdate,Le=Oe.type;Mt(),Wt.autoReset=Q,Oe.enabled=De,Oe.autoUpdate=ke,Oe.needsUpdate=be,Oe.type=Le}function Xt(Q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Q.statusMessage)}function Fn(Q){var De=Q.target;De.removeEventListener("dispose",Fn),qn(De)}function qn(Q){Kn(Q),tt.remove(Q)}function Kn(Q){var De=tt.get(Q).programs;void 0!==De&&(De.forEach(function(ke){qt.releaseProgram(ke)}),Q.isShaderMaterial&&qt.releaseShaderCache(Q))}this.xr=wt,this.getContext=function(){return me},this.getContextAttributes=function(){return me.getContextAttributes()},this.forceContextLoss=function(){var Q=Ue.get("WEBGL_lose_context");Q&&Q.loseContext()},this.forceContextRestore=function(){var Q=Ue.get("WEBGL_lose_context");Q&&Q.restoreContext()},this.getPixelRatio=function(){return re},this.setPixelRatio=function(Q){void 0!==Q&&(re=Q,this.setSize(W,X,!1))},this.getSize=function(Q){return Q.set(W,X)},this.setSize=function(Q,De,ke){wt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=Q,X=De,a.width=Math.floor(Q*re),a.height=Math.floor(De*re),!1!==ke&&(a.style.width=Q+"px",a.style.height=De+"px"),this.setViewport(0,0,Q,De))},this.getDrawingBufferSize=function(Q){return Q.set(W*re,X*re).floor()},this.setDrawingBufferSize=function(Q,De,ke){W=Q,X=De,re=ke,a.width=Math.floor(Q*ke),a.height=Math.floor(De*ke),this.setViewport(0,0,Q,De)},this.getCurrentViewport=function(Q){return Q.copy(B)},this.getViewport=function(Q){return Q.copy(G)},this.setViewport=function(Q,De,ke,be){Q.isVector4?G.set(Q.x,Q.y,Q.z,Q.w):G.set(Q,De,ke,be),ot.viewport(B.copy(G).multiplyScalar(re).floor())},this.getScissor=function(Q){return Q.copy(te)},this.setScissor=function(Q,De,ke,be){Q.isVector4?te.set(Q.x,Q.y,Q.z,Q.w):te.set(Q,De,ke,be),ot.scissor(z.copy(te).multiplyScalar(re).floor())},this.getScissorTest=function(){return se},this.setScissorTest=function(Q){ot.setScissorTest(se=Q)},this.setOpaqueSort=function(Q){de=Q},this.setTransparentSort=function(Q){ce=Q},this.getClearColor=function(Q){return Q.copy(nt.getClearColor())},this.setClearColor=function(){nt.setClearColor.apply(nt,arguments)},this.getClearAlpha=function(){return nt.getClearAlpha()},this.setClearAlpha=function(){nt.setClearAlpha.apply(nt,arguments)},this.clear=function(){var Q=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],De=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ke=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],be=0;Q&&(be|=16384),De&&(be|=256),ke&&(be|=1024),me.clear(be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){a.removeEventListener("webglcontextlost",pt,!1),a.removeEventListener("webglcontextrestored",ut,!1),a.removeEventListener("webglcontextcreationerror",Xt,!1),_r.dispose(),ie.dispose(),tt.dispose(),xn.dispose(),Sn.dispose(),zn.dispose(),ne.dispose(),it.dispose(),qt.dispose(),wt.dispose(),wt.removeEventListener("sessionstart",at),wt.removeEventListener("sessionend",bt),Re&&(Re.dispose(),Re=null),Et.stop()},this.renderBufferDirect=function(Q,De,ke,be,Le,Bt){null===De&&(De=xe);var kn=Le.isMesh&&Le.matrixWorld.determinant()<0,fn=ls(Q,De,ke,be,Le);ot.setMaterial(be,kn);var Cn=ke.index,Lt=1;!0===be.wireframe&&(Cn=gn.getWireframeAttribute(ke),Lt=2);var Tt=ke.drawRange,Dt=ke.attributes.position,tn=Tt.start*Lt,Jt=(Tt.start+Tt.count)*Lt;null!==Bt&&(tn=Math.max(tn,Bt.start*Lt),Jt=Math.min(Jt,(Bt.start+Bt.count)*Lt)),null!==Cn?(tn=Math.max(tn,0),Jt=Math.min(Jt,Cn.count)):null!=Dt&&(tn=Math.max(tn,0),Jt=Math.min(Jt,Dt.count));var Qn=Jt-tn;if(!(Qn<0||Qn===1/0)){ne.setup(Le,be,fn,ke,Cn);var fr,Mn=ft;if(null!==Cn&&(fr=Rt.get(Cn),(Mn=Vt).setIndex(fr)),Le.isMesh)!0===be.wireframe?(ot.setLineWidth(be.wireframeLinewidth*Ae()),Mn.setMode(1)):Mn.setMode(4);else if(Le.isLine){var Zt=be.linewidth;void 0===Zt&&(Zt=1),ot.setLineWidth(Zt*Ae()),Mn.setMode(Le.isLineSegments?1:Le.isLineLoop?2:3)}else Le.isPoints?Mn.setMode(0):Le.isSprite&&Mn.setMode(4);if(Le.isInstancedMesh)Mn.renderInstances(tn,Qn,Le.count);else if(ke.isInstancedBufferGeometry){var Aa=Math.min(ke.instanceCount,void 0!==ke._maxInstanceCount?ke._maxInstanceCount:1/0);Mn.renderInstances(tn,Qn,Aa)}else Mn.render(tn,Qn)}},this.compile=function(Q,De){function ke(be,Le,Bt){!0===be.transparent&&3===be.side?(be.side=1,be.needsUpdate=!0,nr(be,Le,Bt),be.side=0,be.needsUpdate=!0,nr(be,Le,Bt),be.side=3):nr(be,Le,Bt)}(C=ie.get(Q)).init(),x.push(C),Q.traverseVisible(function(be){be.isLight&&be.layers.test(De.layers)&&(C.pushLight(be),be.castShadow&&C.pushShadow(be))}),C.setupLights(E.physicallyCorrectLights),Q.traverse(function(be){var Le=be.material;if(Le)if(Array.isArray(Le))for(var Bt=0;Bt<Le.length;Bt++)ke(Le[Bt],Q,be);else ke(Le,Q,be)}),x.pop(),C=null};var he=null;function St(Q){he&&he(Q)}function at(){Et.stop()}function bt(){Et.start()}var Et=new bF;function xt(Q,De,ke,be){if(!1!==Q.visible){if(Q.layers.test(De.layers))if(Q.isGroup)ke=Q.renderOrder;else if(Q.isLOD)!0===Q.autoUpdate&&Q.update(De);else if(Q.isLight)C.pushLight(Q),Q.castShadow&&C.pushShadow(Q);else if(Q.isSprite){if(!Q.frustumCulled||le.intersectsSprite(Q)){be&&Be.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(Se);var Bt=zn.update(Q),kn=Q.material;kn.visible&&_.push(Q,Bt,kn,ke,Be.z,null)}}else if((Q.isMesh||Q.isLine||Q.isPoints)&&(Q.isSkinnedMesh&&Q.skeleton.frame!==Wt.render.frame&&(Q.skeleton.update(),Q.skeleton.frame=Wt.render.frame),!Q.frustumCulled||le.intersectsObject(Q))){be&&Be.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(Se);var fn=zn.update(Q),Cn=Q.material;if(Array.isArray(Cn))for(var Lt=fn.groups,Tt=0,Dt=Lt.length;Tt<Dt;Tt++){var tn=Lt[Tt],Jt=Cn[tn.materialIndex];Jt&&Jt.visible&&_.push(Q,fn,Jt,ke,Be.z,tn)}else Cn.visible&&_.push(Q,fn,Cn,ke,Be.z,null)}for(var Qn=Q.children,fr=0,Mn=Qn.length;fr<Mn;fr++)xt(Qn[fr],De,ke,be)}}function dr(Q,De,ke,be){var Le=Q.opaque,Bt=Q.transmissive,kn=Q.transparent;C.setupLightsView(ke),Bt.length>0&&Zn(Le,De,ke),be&&ot.viewport(B.copy(be)),Le.length>0&&Sr(Le,De,ke),Bt.length>0&&Sr(Bt,De,ke),kn.length>0&&Sr(kn,De,ke),ot.buffers.depth.setTest(!0),ot.buffers.depth.setMask(!0),ot.buffers.color.setMask(!0),ot.setPolygonOffset(!1)}function Zn(Q,De,ke){var be=je.isWebGL2;null===Re&&(Re=new yf(1,1,{generateMipmaps:!0,type:Ue.has("EXT_color_buffer_half_float")?wy:pf,minFilter:Ic,samples:be&&!0===u?4:0})),E.getDrawingBufferSize(Ce),be?Re.setSize(Ce.x,Ce.y):Re.setSize(LS(Ce.x),LS(Ce.y));var Le=E.getRenderTarget();E.setRenderTarget(Re),E.clear();var Bt=E.toneMapping;E.toneMapping=0,Sr(Q,De,ke),E.toneMapping=Bt,It.updateMultisampleRenderTarget(Re),It.updateRenderTargetMipmap(Re),E.setRenderTarget(Le)}function Sr(Q,De,ke){for(var be=!0===De.isScene?De.overrideMaterial:null,Le=0,Bt=Q.length;Le<Bt;Le++){var kn=Q[Le],fn=kn.object,Cn=kn.geometry,Lt=null===be?kn.material:be,Tt=kn.group;fn.layers.test(ke.layers)&&Kr(fn,De,ke,Cn,Lt,Tt)}}function Kr(Q,De,ke,be,Le,Bt){Q.onBeforeRender(E,De,ke,be,Le,Bt),Q.modelViewMatrix.multiplyMatrices(ke.matrixWorldInverse,Q.matrixWorld),Q.normalMatrix.getNormalMatrix(Q.modelViewMatrix),Le.onBeforeRender(E,De,ke,be,Q,Bt),!0===Le.transparent&&3===Le.side?(Le.side=1,Le.needsUpdate=!0,E.renderBufferDirect(ke,De,be,Le,Q,Bt),Le.side=0,Le.needsUpdate=!0,E.renderBufferDirect(ke,De,be,Le,Q,Bt),Le.side=3):E.renderBufferDirect(ke,De,be,Le,Q,Bt),Q.onAfterRender(E,De,ke,be,Le,Bt)}function nr(Q,De,ke){!0!==De.isScene&&(De=xe);var be=tt.get(Q),Le=C.state.lights,kn=Le.state.version,fn=qt.getParameters(Q,Le.state,C.state.shadowsArray,De,ke),Cn=qt.getProgramCacheKey(fn),Lt=be.programs;be.environment=Q.isMeshStandardMaterial?De.environment:null,be.fog=De.fog,be.envMap=(Q.isMeshStandardMaterial?Sn:xn).get(Q.envMap||be.environment),void 0===Lt&&(Q.addEventListener("dispose",Fn),be.programs=Lt=new Map);var Tt=Lt.get(Cn);if(void 0!==Tt){if(be.currentProgram===Tt&&be.lightsStateVersion===kn)return us(Q,fn),Tt}else fn.uniforms=qt.getUniforms(Q),Q.onBuild(ke,fn,E),Q.onBeforeCompile(fn,E),Tt=qt.acquireProgram(fn,Cn),Lt.set(Cn,Tt),be.uniforms=fn.uniforms;var Dt=be.uniforms;(!Q.isShaderMaterial&&!Q.isRawShaderMaterial||!0===Q.clipping)&&(Dt.clippingPlanes=q.uniform),us(Q,fn),be.needsLights=hM(Q),be.lightsStateVersion=kn,be.needsLights&&(Dt.ambientLightColor.value=Le.state.ambient,Dt.lightProbe.value=Le.state.probe,Dt.directionalLights.value=Le.state.directional,Dt.directionalLightShadows.value=Le.state.directionalShadow,Dt.spotLights.value=Le.state.spot,Dt.spotLightShadows.value=Le.state.spotShadow,Dt.rectAreaLights.value=Le.state.rectArea,Dt.ltc_1.value=Le.state.rectAreaLTC1,Dt.ltc_2.value=Le.state.rectAreaLTC2,Dt.pointLights.value=Le.state.point,Dt.pointLightShadows.value=Le.state.pointShadow,Dt.hemisphereLights.value=Le.state.hemi,Dt.directionalShadowMap.value=Le.state.directionalShadowMap,Dt.directionalShadowMatrix.value=Le.state.directionalShadowMatrix,Dt.spotShadowMap.value=Le.state.spotShadowMap,Dt.spotLightMatrix.value=Le.state.spotLightMatrix,Dt.spotLightMap.value=Le.state.spotLightMap,Dt.pointShadowMap.value=Le.state.pointShadowMap,Dt.pointShadowMatrix.value=Le.state.pointShadowMatrix);var tn=Tt.getUniforms(),Jt=rb.seqWithValue(tn.seq,Dt);return be.currentProgram=Tt,be.uniformsList=Jt,Tt}function us(Q,De){var ke=tt.get(Q);ke.outputEncoding=De.outputEncoding,ke.instancing=De.instancing,ke.skinning=De.skinning,ke.morphTargets=De.morphTargets,ke.morphNormals=De.morphNormals,ke.morphColors=De.morphColors,ke.morphTargetsCount=De.morphTargetsCount,ke.numClippingPlanes=De.numClippingPlanes,ke.numIntersection=De.numClipIntersection,ke.vertexAlphas=De.vertexAlphas,ke.vertexTangents=De.vertexTangents,ke.toneMapping=De.toneMapping}function ls(Q,De,ke,be,Le){!0!==De.isScene&&(De=xe),It.resetTextureUnits();var Bt=De.fog,fn=null===M?E.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:gf,Cn=(be.isMeshStandardMaterial?Sn:xn).get(be.envMap||(be.isMeshStandardMaterial?De.environment:null)),Lt=!0===be.vertexColors&&!!ke.attributes.color&&4===ke.attributes.color.itemSize,Tt=!!be.normalMap&&!!ke.attributes.tangent,Dt=!!ke.morphAttributes.position,tn=!!ke.morphAttributes.normal,Jt=!!ke.morphAttributes.color,Qn=be.toneMapped?E.toneMapping:0,fr=ke.morphAttributes.position||ke.morphAttributes.normal||ke.morphAttributes.color,Mn=void 0!==fr?fr.length:0,Zt=tt.get(be),oo=C.state.lights;!0!==ue||!0!==_e&&Q===I||q.setState(be,Q,Q===I&&be.id===O);var Yr=!1;be.version===Zt.__version?(Zt.needsLights&&Zt.lightsStateVersion!==oo.state.version||Zt.outputEncoding!==fn||Le.isInstancedMesh&&!1===Zt.instancing||!Le.isInstancedMesh&&!0===Zt.instancing||Le.isSkinnedMesh&&!1===Zt.skinning||!Le.isSkinnedMesh&&!0===Zt.skinning||Zt.envMap!==Cn||!0===be.fog&&Zt.fog!==Bt||void 0!==Zt.numClippingPlanes&&(Zt.numClippingPlanes!==q.numPlanes||Zt.numIntersection!==q.numIntersection)||Zt.vertexAlphas!==Lt||Zt.vertexTangents!==Tt||Zt.morphTargets!==Dt||Zt.morphNormals!==tn||Zt.morphColors!==Jt||Zt.toneMapping!==Qn||!0===je.isWebGL2&&Zt.morphTargetsCount!==Mn)&&(Yr=!0):(Yr=!0,Zt.__version=be.version);var cs=Zt.currentProgram;!0===Yr&&(cs=nr(be,De,Le));var c_=!1,jc=!1,Dv=!1,ao=cs.getUniforms(),Tl=Zt.uniforms;if(ot.useProgram(cs.program)&&(c_=!0,jc=!0,Dv=!0),be.id!==O&&(O=be.id,jc=!0),c_||I!==Q){if(ao.setValue(me,"projectionMatrix",Q.projectionMatrix),je.logarithmicDepthBuffer&&ao.setValue(me,"logDepthBufFC",2/(Math.log(Q.far+1)/Math.LN2)),I!==Q&&(I=Q,jc=!0,Dv=!0),be.isShaderMaterial||be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshStandardMaterial||be.envMap){var d_=ao.map.cameraPosition;void 0!==d_&&d_.setValue(me,Be.setFromMatrixPosition(Q.matrixWorld))}(be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshLambertMaterial||be.isMeshBasicMaterial||be.isMeshStandardMaterial||be.isShaderMaterial)&&ao.setValue(me,"isOrthographic",!0===Q.isOrthographicCamera),(be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshLambertMaterial||be.isMeshBasicMaterial||be.isMeshStandardMaterial||be.isShaderMaterial||be.isShadowMaterial||Le.isSkinnedMesh)&&ao.setValue(me,"viewMatrix",Q.matrixWorldInverse)}if(Le.isSkinnedMesh){ao.setOptional(me,Le,"bindMatrix"),ao.setOptional(me,Le,"bindMatrixInverse");var qc=Le.skeleton;qc&&(je.floatVertexTextures?(null===qc.boneTexture&&qc.computeBoneTexture(),ao.setValue(me,"boneTexture",qc.boneTexture,It),ao.setValue(me,"boneTextureSize",qc.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var Kc=ke.morphAttributes;if((void 0!==Kc.position||void 0!==Kc.normal||void 0!==Kc.color&&!0===je.isWebGL2)&&dt.update(Le,ke,be,cs),(jc||Zt.receiveShadow!==Le.receiveShadow)&&(Zt.receiveShadow=Le.receiveShadow,ao.setValue(me,"receiveShadow",Le.receiveShadow)),be.isMeshGouraudMaterial&&null!==be.envMap&&(Tl.envMap.value=Cn,Tl.flipEnvMap.value=Cn.isCubeTexture&&!1===Cn.isRenderTargetTexture?-1:1),jc&&(ao.setValue(me,"toneMappingExposure",E.toneMappingExposure),Zt.needsLights&&Tv(Tl,Dv),Bt&&!0===be.fog&&yr.refreshFogUniforms(Tl,Bt),yr.refreshMaterialUniforms(Tl,be,re,X,Re),rb.upload(me,Zt.uniformsList,Tl,It)),be.isShaderMaterial&&!0===be.uniformsNeedUpdate&&(rb.upload(me,Zt.uniformsList,Tl,It),be.uniformsNeedUpdate=!1),be.isSpriteMaterial&&ao.setValue(me,"center",Le.center),ao.setValue(me,"modelViewMatrix",Le.modelViewMatrix),ao.setValue(me,"normalMatrix",Le.normalMatrix),ao.setValue(me,"modelMatrix",Le.matrixWorld),be.isShaderMaterial||be.isRawShaderMaterial)for(var QN=be.uniformsGroups,vM=0,mQ=QN.length;vM<mQ;vM++)if(je.isWebGL2){var e2=QN[vM];it.update(e2,cs),it.bind(e2,cs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return cs}function Tv(Q,De){Q.ambientLightColor.needsUpdate=De,Q.lightProbe.needsUpdate=De,Q.directionalLights.needsUpdate=De,Q.directionalLightShadows.needsUpdate=De,Q.pointLights.needsUpdate=De,Q.pointLightShadows.needsUpdate=De,Q.spotLights.needsUpdate=De,Q.spotLightShadows.needsUpdate=De,Q.rectAreaLights.needsUpdate=De,Q.hemisphereLights.needsUpdate=De}function hM(Q){return Q.isMeshLambertMaterial||Q.isMeshToonMaterial||Q.isMeshPhongMaterial||Q.isMeshStandardMaterial||Q.isShadowMaterial||Q.isShaderMaterial&&!0===Q.lights}Et.setAnimationLoop(St),"undefined"!=typeof self&&Et.setContext(self),this.setAnimationLoop=function(Q){he=Q,wt.setAnimationLoop(Q),null===Q?Et.stop():Et.start()},wt.addEventListener("sessionstart",at),wt.addEventListener("sessionend",bt),this.render=function(Q,De){if(void 0===De||!0===De.isCamera){if(!0!==b){if(!0===Q.matrixWorldAutoUpdate&&Q.updateMatrixWorld(),null===De.parent&&!0===De.matrixWorldAutoUpdate&&De.updateMatrixWorld(),!0===wt.enabled&&!0===wt.isPresenting&&(!0===wt.cameraAutoUpdate&&wt.updateCamera(De),De=wt.getCamera()),!0===Q.isScene&&Q.onBeforeRender(E,Q,De,M),(C=ie.get(Q,x.length)).init(),x.push(C),Se.multiplyMatrices(De.projectionMatrix,De.matrixWorldInverse),le.setFromProjectionMatrix(Se),ue=q.init(this.clippingPlanes,_e=this.localClippingEnabled,De),(_=_r.get(Q,w.length)).init(),w.push(_),xt(Q,De,0,E.sortObjects),_.finish(),!0===E.sortObjects&&_.sort(de,ce),!0===ue&&q.beginShadows(),Oe.render(C.state.shadowsArray,Q,De),!0===ue&&q.endShadows(),!0===this.info.autoReset&&this.info.reset(),nt.render(_,Q),C.setupLights(E.physicallyCorrectLights),De.isArrayCamera)for(var be=De.cameras,Le=0,Bt=be.length;Le<Bt;Le++){var kn=be[Le];dr(_,Q,kn,kn.viewport)}else dr(_,Q,De);null!==M&&(It.updateMultisampleRenderTarget(M),It.updateRenderTargetMipmap(M)),!0===Q.isScene&&Q.onAfterRender(E,Q,De),ne.resetDefaultState(),O=-1,I=null,x.pop(),C=x.length>0?x[x.length-1]:null,w.pop(),_=w.length>0?w[w.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(Q,De,ke){tt.get(Q.texture).__webglTexture=De,tt.get(Q.depthTexture).__webglTexture=ke;var be=tt.get(Q);be.__hasExternalTextures=!0,be.__hasExternalTextures&&(be.__autoAllocateDepthBuffer=void 0===ke,be.__autoAllocateDepthBuffer||!0===Ue.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),be.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Q,De){var ke=tt.get(Q);ke.__webglFramebuffer=De,ke.__useDefaultFramebuffer=void 0===De},this.setRenderTarget=function(Q){var De=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ke=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;M=Q,T=De,A=ke;var be=!0,Le=null,Bt=!1,kn=!1;if(Q){var fn=tt.get(Q);void 0!==fn.__useDefaultFramebuffer?(ot.bindFramebuffer(36160,null),be=!1):void 0===fn.__webglFramebuffer?It.setupRenderTarget(Q):fn.__hasExternalTextures&&It.rebindTextures(Q,tt.get(Q.texture).__webglTexture,tt.get(Q.depthTexture).__webglTexture);var Cn=Q.texture;(Cn.isData3DTexture||Cn.isDataArrayTexture||Cn.isCompressedArrayTexture)&&(kn=!0);var Lt=tt.get(Q).__webglFramebuffer;Q.isWebGLCubeRenderTarget?(Le=Lt[De],Bt=!0):Le=je.isWebGL2&&Q.samples>0&&!1===It.useMultisampledRTT(Q)?tt.get(Q).__webglMultisampledFramebuffer:Lt,B.copy(Q.viewport),z.copy(Q.scissor),P=Q.scissorTest}else B.copy(G).multiplyScalar(re).floor(),z.copy(te).multiplyScalar(re).floor(),P=se;var Tt=ot.bindFramebuffer(36160,Le);if(Tt&&je.drawBuffers&&be&&ot.drawBuffers(Q,Le),ot.viewport(B),ot.scissor(z),ot.setScissorTest(P),Bt){var Dt=tt.get(Q.texture);me.framebufferTexture2D(36160,36064,34069+De,Dt.__webglTexture,ke)}else if(kn){var tn=tt.get(Q.texture),Jt=De||0;me.framebufferTextureLayer(36160,36064,tn.__webglTexture,ke||0,Jt)}O=-1},this.readRenderTargetPixels=function(Q,De,ke,be,Le,Bt,kn){if(Q&&Q.isWebGLRenderTarget){var fn=tt.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&void 0!==kn&&(fn=fn[kn]),fn){ot.bindFramebuffer(36160,fn);try{var Cn=Q.texture,Lt=Cn.format,Tt=Cn.type;if(Lt!==ns&&Nt.convert(Lt)!==me.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var Dt=Tt===wy&&(Ue.has("EXT_color_buffer_half_float")||je.isWebGL2&&Ue.has("EXT_color_buffer_float"));if(!(Tt===pf||Nt.convert(Tt)===me.getParameter(35738)||Tt===Lc&&(je.isWebGL2||Ue.has("OES_texture_float")||Ue.has("WEBGL_color_buffer_float"))||Dt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");De>=0&&De<=Q.width-be&&ke>=0&&ke<=Q.height-Le&&me.readPixels(De,ke,be,Le,Nt.convert(Lt),Nt.convert(Tt),Bt)}finally{var tn=null!==M?tt.get(M).__webglFramebuffer:null;ot.bindFramebuffer(36160,tn)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(Q,De){var ke=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,be=Math.pow(2,-ke),Le=Math.floor(De.image.width*be),Bt=Math.floor(De.image.height*be);It.setTexture2D(De,0),me.copyTexSubImage2D(3553,ke,0,0,Q.x,Q.y,Le,Bt),ot.unbindTexture()},this.copyTextureToTexture=function(Q,De,ke){var be=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,Le=De.image.width,Bt=De.image.height,kn=Nt.convert(ke.format),fn=Nt.convert(ke.type);It.setTexture2D(ke,0),me.pixelStorei(37440,ke.flipY),me.pixelStorei(37441,ke.premultiplyAlpha),me.pixelStorei(3317,ke.unpackAlignment),De.isDataTexture?me.texSubImage2D(3553,be,Q.x,Q.y,Le,Bt,kn,fn,De.image.data):De.isCompressedTexture?me.compressedTexSubImage2D(3553,be,Q.x,Q.y,De.mipmaps[0].width,De.mipmaps[0].height,kn,De.mipmaps[0].data):me.texSubImage2D(3553,be,Q.x,Q.y,kn,fn,De.image),0===be&&ke.generateMipmaps&&me.generateMipmap(3553),ot.unbindTexture()},this.copyTextureToTexture3D=function(Q,De,ke,be){var Le=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(E.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var Tt,Bt=Q.max.x-Q.min.x+1,kn=Q.max.y-Q.min.y+1,fn=Q.max.z-Q.min.z+1,Cn=Nt.convert(be.format),Lt=Nt.convert(be.type);if(be.isData3DTexture)It.setTexture3D(be,0),Tt=32879;else{if(!be.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");It.setTexture2DArray(be,0),Tt=35866}me.pixelStorei(37440,be.flipY),me.pixelStorei(37441,be.premultiplyAlpha),me.pixelStorei(3317,be.unpackAlignment);var Dt=me.getParameter(3314),tn=me.getParameter(32878),Jt=me.getParameter(3316),Qn=me.getParameter(3315),fr=me.getParameter(32877),Mn=ke.isCompressedTexture?ke.mipmaps[0]:ke.image;me.pixelStorei(3314,Mn.width),me.pixelStorei(32878,Mn.height),me.pixelStorei(3316,Q.min.x),me.pixelStorei(3315,Q.min.y),me.pixelStorei(32877,Q.min.z),ke.isDataTexture||ke.isData3DTexture?me.texSubImage3D(Tt,Le,De.x,De.y,De.z,Bt,kn,fn,Cn,Lt,Mn.data):ke.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),me.compressedTexSubImage3D(Tt,Le,De.x,De.y,De.z,Bt,kn,fn,Cn,Mn.data)):me.texSubImage3D(Tt,Le,De.x,De.y,De.z,Bt,kn,fn,Cn,Lt,Mn),me.pixelStorei(3314,Dt),me.pixelStorei(32878,tn),me.pixelStorei(3316,Jt),me.pixelStorei(3315,Qn),me.pixelStorei(32877,fr),0===Le&&be.generateMipmaps&&me.generateMipmap(Tt),ot.unbindTexture()}},this.initTexture=function(Q){Q.isCubeTexture?It.setTextureCube(Q,0):Q.isData3DTexture?It.setTexture3D(Q,0):Q.isDataArrayTexture||Q.isCompressedArrayTexture?It.setTexture2DArray(Q,0):It.setTexture2D(Q,0),ot.unbindTexture()},this.resetState=function(){T=0,A=0,M=null,ot.reset(),ne.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var e7=function(n){ve(e,n);var a=ge(e);function e(){return N(this,e),a.apply(this,arguments)}return e}(Tu);e7.prototype.isWebGL1Renderer=!0;var _l=function(n){ve(e,n);var a=ge(e);function e(){var r;return N(this,e),(r=a.call(this)).isScene=!0,r.type="Scene",r.background=null,r.environment=null,r.fog=null,r.backgroundBlurriness=0,r.backgroundIntensity=1,r.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:Yn(r)})),r}return j(e,[{key:"copy",value:function(o,u){return we(ze(e.prototype),"copy",this).call(this,o,u),null!==o.background&&(this.background=o.background.clone()),null!==o.environment&&(this.environment=o.environment.clone()),null!==o.fog&&(this.fog=o.fog.clone()),this.backgroundBlurriness=o.backgroundBlurriness,this.backgroundIntensity=o.backgroundIntensity,null!==o.overrideMaterial&&(this.overrideMaterial=o.overrideMaterial.clone()),this.matrixAutoUpdate=o.matrixAutoUpdate,this}},{key:"toJSON",value:function(o){var u=we(ze(e.prototype),"toJSON",this).call(this,o);return null!==this.fog&&(u.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(u.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(u.backgroundIntensity=this.backgroundIntensity),u}},{key:"autoUpdate",get:function(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function(o){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=o}}]),e}(Co),t7=function(){function n(a,e){N(this,n),this.isInterleavedBuffer=!0,this.array=a,this.stride=e,this.count=void 0!==a?a.length/e:0,this.usage=GD,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=rs()}return j(n,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,r,o){e*=this.stride,o*=r.stride;for(var u=0,f=this.stride;u<f;u++)this.array[e+u]=r.array[o+u];return this}},{key:"set",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,r),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=rs()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var r=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),o=new this.constructor(r,this.stride);return o.setUsage(this.usage),o}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=rs()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),n}(),Bo=new Z,n7=function(){function n(a,e,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];N(this,n),this.isInterleavedBufferAttribute=!0,this.name="",this.data=a,this.itemSize=e,this.offset=r,this.normalized=o}return j(n,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var r=0,o=this.data.count;r<o;r++)Bo.fromBufferAttribute(this,r),Bo.applyMatrix4(e),this.setXYZ(r,Bo.x,Bo.y,Bo.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var r=0,o=this.count;r<o;r++)Bo.fromBufferAttribute(this,r),Bo.applyNormalMatrix(e),this.setXYZ(r,Bo.x,Bo.y,Bo.z);return this}},{key:"transformDirection",value:function(e){for(var r=0,o=this.count;r<o;r++)Bo.fromBufferAttribute(this,r),Bo.transformDirection(e),this.setXYZ(r,Bo.x,Bo.y,Bo.z);return this}},{key:"setX",value:function(e,r){return this.normalized&&(r=gr(r,this.array)),this.data.array[e*this.data.stride+this.offset]=r,this}},{key:"setY",value:function(e,r){return this.normalized&&(r=gr(r,this.array)),this.data.array[e*this.data.stride+this.offset+1]=r,this}},{key:"setZ",value:function(e,r){return this.normalized&&(r=gr(r,this.array)),this.data.array[e*this.data.stride+this.offset+2]=r,this}},{key:"setW",value:function(e,r){return this.normalized&&(r=gr(r,this.array)),this.data.array[e*this.data.stride+this.offset+3]=r,this}},{key:"getX",value:function(e){var r=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(r=pl(r,this.array)),r}},{key:"getY",value:function(e){var r=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(r=pl(r,this.array)),r}},{key:"getZ",value:function(e){var r=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(r=pl(r,this.array)),r}},{key:"getW",value:function(e){var r=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(r=pl(r,this.array)),r}},{key:"setXY",value:function(e,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(r=gr(r,this.array),o=gr(o,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=o,this}},{key:"setXYZ",value:function(e,r,o,u){return e=e*this.data.stride+this.offset,this.normalized&&(r=gr(r,this.array),o=gr(o,this.array),u=gr(u,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=o,this.data.array[e+2]=u,this}},{key:"setXYZW",value:function(e,r,o,u,f){return e=e*this.data.stride+this.offset,this.normalized&&(r=gr(r,this.array),o=gr(o,this.array),u=gr(u,this.array),f=gr(f,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=o,this.data.array[e+2]=u,this.data.array[e+3]=f,this}},{key:"clone",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var r=[],o=0;o<this.count;o++)for(var u=o*this.data.stride+this.offset,f=0;f<this.itemSize;f++)r.push(this.data.array[u+f]);return new io(new this.array.constructor(r),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new n(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var r=[],o=0;o<this.count;o++)for(var u=o*this.data.stride+this.offset,f=0;f<this.itemSize;f++)r.push(this.data.array[u+f]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),n}(),XF=new Z,JF=new xr,ZF=new xr,i7=new Z,QF=new En,o7=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;return N(this,e),(u=a.call(this,r,o)).isSkinnedMesh=!0,u.type="SkinnedMesh",u.bindMode="attached",u.bindMatrix=new En,u.bindMatrixInverse=new En,u}return j(e,[{key:"copy",value:function(o,u){return we(ze(e.prototype),"copy",this).call(this,o,u),this.bindMode=o.bindMode,this.bindMatrix.copy(o.bindMatrix),this.bindMatrixInverse.copy(o.bindMatrixInverse),this.skeleton=o.skeleton,this}},{key:"bind",value:function(o,u){this.skeleton=o,void 0===u&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),u=this.matrixWorld),this.bindMatrix.copy(u),this.bindMatrixInverse.copy(u).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var o=new xr,u=this.geometry.attributes.skinWeight,f=0,p=u.count;f<p;f++){o.fromBufferAttribute(u,f);var v=1/o.manhattanLength();v!==1/0?o.multiplyScalar(v):o.set(1,0,0,0),u.setXYZW(f,o.x,o.y,o.z,o.w)}}},{key:"updateMatrixWorld",value:function(o){we(ze(e.prototype),"updateMatrixWorld",this).call(this,o),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(o,u){var f=this.skeleton,p=this.geometry;JF.fromBufferAttribute(p.attributes.skinIndex,o),ZF.fromBufferAttribute(p.attributes.skinWeight,o),XF.copy(u).applyMatrix4(this.bindMatrix),u.set(0,0,0);for(var v=0;v<4;v++){var g=ZF.getComponent(v);if(0!==g){var y=JF.getComponent(v);QF.multiplyMatrices(f.bones[y].matrixWorld,f.boneInverses[y]),u.addScaledVector(i7.copy(XF).applyMatrix4(QF),g)}}return u.applyMatrix4(this.bindMatrixInverse)}}]),e}(mr),ek=function(n){ve(e,n);var a=ge(e);function e(){var r;return N(this,e),(r=a.call(this)).isBone=!0,r.type="Bone",r}return e}(Co),a7=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,p=arguments.length>3?arguments[3]:void 0,v=arguments.length>4?arguments[4]:void 0,g=arguments.length>5?arguments[5]:void 0,y=arguments.length>6?arguments[6]:void 0,_=arguments.length>7?arguments[7]:void 0,C=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Mi,w=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Mi,x=arguments.length>10?arguments[10]:void 0,E=arguments.length>11?arguments[11]:void 0;return N(this,e),(r=a.call(this,null,g,y,_,C,w,p,v,x,E)).isDataTexture=!0,r.image={data:o,width:u,height:f},r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r}return e}(xu),tk=new En,s7=new En,u7=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];N(this,n),this.uuid=rs(),this.bones=a.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return j(n,[{key:"init",value:function(){var e=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===r.length)this.calculateInverses();else if(e.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var o=0,u=this.bones.length;o<u;o++)this.boneInverses.push(new En)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,r=this.bones.length;e<r;e++){var o=new En;this.bones[e]&&o.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(o)}}},{key:"pose",value:function(){for(var e=0,r=this.bones.length;e<r;e++){var o=this.bones[e];o&&o.matrixWorld.copy(this.boneInverses[e]).invert()}for(var u=0,f=this.bones.length;u<f;u++){var p=this.bones[u];p&&(p.parent&&p.parent.isBone?(p.matrix.copy(p.parent.matrixWorld).invert(),p.matrix.multiply(p.matrixWorld)):p.matrix.copy(p.matrixWorld),p.matrix.decompose(p.position,p.quaternion,p.scale))}}},{key:"update",value:function(){for(var e=this.bones,r=this.boneInverses,o=this.boneMatrices,u=this.boneTexture,f=0,p=e.length;f<p;f++)tk.multiplyMatrices(e[f]?e[f].matrixWorld:s7,r[f]),tk.toArray(o,16*f);null!==u&&(u.needsUpdate=!0)}},{key:"clone",value:function(){return new n(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=nF(e),e=Math.max(e,4);var r=new Float32Array(e*e*4);r.set(this.boneMatrices);var o=new a7(r,e,e,ns,Lc);return o.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=o,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var r=0,o=this.bones.length;r<o;r++){var u=this.bones[r];if(u.name===e)return u}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,r){this.uuid=e.uuid;for(var o=0,u=e.bones.length;o<u;o++){var f=e.bones[o],p=r[f];void 0===p&&(console.warn("THREE.Skeleton: No bone found with UUID:",f),p=new ek),this.bones.push(p),this.boneInverses.push((new En).fromArray(e.boneInverses[o]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var r=this.bones,o=this.boneInverses,u=0,f=r.length;u<f;u++)e.bones.push(r[u].uuid),e.boneInverses.push(o[u].toArray());return e}}]),n}(),nk=function(n){ve(e,n);var a=ge(e);function e(r,o,u){var f,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return N(this,e),(f=a.call(this,r,o,u)).isInstancedBufferAttribute=!0,f.meshPerAttribute=p,f}return j(e,[{key:"copy",value:function(o){return we(ze(e.prototype),"copy",this).call(this,o),this.meshPerAttribute=o.meshPerAttribute,this}},{key:"toJSON",value:function(){var o=we(ze(e.prototype),"toJSON",this).call(this);return o.meshPerAttribute=this.meshPerAttribute,o.isInstancedBufferAttribute=!0,o}}]),e}(io),rk=new En,ik=new En,ib=[],l7=new En,Ny=new mr,c7=function(n){ve(e,n);var a=ge(e);function e(r,o,u){var f;N(this,e),(f=a.call(this,r,o)).isInstancedMesh=!0,f.instanceMatrix=new nk(new Float32Array(16*u),16),f.instanceColor=null,f.count=u,f.frustumCulled=!1;for(var p=0;p<u;p++)f.setMatrixAt(p,l7);return f}return j(e,[{key:"copy",value:function(o,u){return we(ze(e.prototype),"copy",this).call(this,o,u),this.instanceMatrix.copy(o.instanceMatrix),null!==o.instanceColor&&(this.instanceColor=o.instanceColor.clone()),this.count=o.count,this}},{key:"getColorAt",value:function(o,u){u.fromArray(this.instanceColor.array,3*o)}},{key:"getMatrixAt",value:function(o,u){u.fromArray(this.instanceMatrix.array,16*o)}},{key:"raycast",value:function(o,u){var f=this.matrixWorld,p=this.count;if(Ny.geometry=this.geometry,Ny.material=this.material,void 0!==Ny.material)for(var v=0;v<p;v++){this.getMatrixAt(v,rk),ik.multiplyMatrices(f,rk),Ny.matrixWorld=ik,Ny.raycast(o,ib);for(var g=0,y=ib.length;g<y;g++){var _=ib[g];_.instanceId=v,_.object=this,u.push(_)}ib.length=0}}},{key:"setColorAt",value:function(o,u){null===this.instanceColor&&(this.instanceColor=new nk(new Float32Array(3*this.instanceMatrix.count),3)),u.toArray(this.instanceColor.array,3*o)}},{key:"setMatrixAt",value:function(o,u){u.toArray(this.instanceMatrix.array,16*o)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),e}(mr),cv=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this)).isLineBasicMaterial=!0,o.type="LineBasicMaterial",o.color=new Ht(16777215),o.linewidth=1,o.linecap="round",o.linejoin="round",o.fog=!0,o.setValues(r),o}return j(e,[{key:"copy",value:function(o){return we(ze(e.prototype),"copy",this).call(this,o),this.color.copy(o.color),this.linewidth=o.linewidth,this.linecap=o.linecap,this.linejoin=o.linejoin,this.fog=o.fog,this}}]),e}(is),ok=new Z,ak=new Z,sk=new En,_A=new WS,ob=new $h,Gy=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Pr,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cv;return N(this,e),(r=a.call(this)).isLine=!0,r.type="Line",r.geometry=o,r.material=u,r.updateMorphTargets(),r}return j(e,[{key:"copy",value:function(o,u){return we(ze(e.prototype),"copy",this).call(this,o,u),this.material=o.material,this.geometry=o.geometry,this}},{key:"computeLineDistances",value:function(){var o=this.geometry;if(null===o.index){for(var u=o.attributes.position,f=[0],p=1,v=u.count;p<v;p++)ok.fromBufferAttribute(u,p-1),ak.fromBufferAttribute(u,p),f[p]=f[p-1],f[p]+=ok.distanceTo(ak);o.setAttribute("lineDistance",new dn(f,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(o,u){var f=this.geometry,p=this.matrixWorld,v=o.params.Line.threshold,g=f.drawRange;if(null===f.boundingSphere&&f.computeBoundingSphere(),ob.copy(f.boundingSphere),ob.applyMatrix4(p),ob.radius+=v,!1!==o.ray.intersectsSphere(ob)){sk.copy(p).invert(),_A.copy(o.ray).applyMatrix4(sk);var y=v/((this.scale.x+this.scale.y+this.scale.z)/3),_=y*y,C=new Z,w=new Z,x=new Z,E=new Z,b=this.isLineSegments?2:1,T=f.index,M=f.attributes.position;if(null!==T)for(var B=Math.max(0,g.start),z=Math.min(T.count,g.start+g.count)-1;B<z;B+=b){var P=T.getX(B),W=T.getX(B+1);if(C.fromBufferAttribute(M,P),w.fromBufferAttribute(M,W),!(_A.distanceSqToSegment(C,w,E,x)>_)){E.applyMatrix4(this.matrixWorld);var re=o.ray.origin.distanceTo(E);re<o.near||re>o.far||u.push({distance:re,point:x.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this})}}else for(var G=Math.max(0,g.start),te=Math.min(M.count,g.start+g.count)-1;G<te;G+=b)if(C.fromBufferAttribute(M,G),w.fromBufferAttribute(M,G+1),!(_A.distanceSqToSegment(C,w,E,x)>_)){E.applyMatrix4(this.matrixWorld);var le=o.ray.origin.distanceTo(E);le<o.near||le>o.far||u.push({distance:le,point:x.clone().applyMatrix4(this.matrixWorld),index:G,face:null,faceIndex:null,object:this})}}}},{key:"updateMorphTargets",value:function(){var u=this.geometry.morphAttributes,f=Object.keys(u);if(f.length>0){var p=u[f[0]];if(void 0!==p){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var v=0,g=p.length;v<g;v++){var y=p[v].name||String(v);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=v}}}}}]),e}(Co),uk=new Z,lk=new Z,ab=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;return N(this,e),(u=a.call(this,r,o)).isLineSegments=!0,u.type="LineSegments",u}return j(e,[{key:"computeLineDistances",value:function(){var o=this.geometry;if(null===o.index){for(var u=o.attributes.position,f=[],p=0,v=u.count;p<v;p+=2)uk.fromBufferAttribute(u,p),lk.fromBufferAttribute(u,p+1),f[p]=0===p?0:f[p-1],f[p+1]=f[p]+uk.distanceTo(lk);o.setAttribute("lineDistance",new dn(f,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),e}(Gy),d7=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;return N(this,e),(u=a.call(this,r,o)).isLineLoop=!0,u.type="LineLoop",u}return e}(Gy),ck=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this)).isPointsMaterial=!0,o.type="PointsMaterial",o.color=new Ht(16777215),o.map=null,o.alphaMap=null,o.size=1,o.sizeAttenuation=!0,o.fog=!0,o.setValues(r),o}return j(e,[{key:"copy",value:function(o){return we(ze(e.prototype),"copy",this).call(this,o),this.color.copy(o.color),this.map=o.map,this.alphaMap=o.alphaMap,this.size=o.size,this.sizeAttenuation=o.sizeAttenuation,this.fog=o.fog,this}}]),e}(is),dk=new En,CA=new WS,sb=new $h,ub=new Z,f7=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Pr,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ck;return N(this,e),(r=a.call(this)).isPoints=!0,r.type="Points",r.geometry=o,r.material=u,r.updateMorphTargets(),r}return j(e,[{key:"copy",value:function(o,u){return we(ze(e.prototype),"copy",this).call(this,o,u),this.material=o.material,this.geometry=o.geometry,this}},{key:"raycast",value:function(o,u){var f=this.geometry,p=this.matrixWorld,v=o.params.Points.threshold,g=f.drawRange;if(null===f.boundingSphere&&f.computeBoundingSphere(),sb.copy(f.boundingSphere),sb.applyMatrix4(p),sb.radius+=v,!1!==o.ray.intersectsSphere(sb)){dk.copy(p).invert(),CA.copy(o.ray).applyMatrix4(dk);var y=v/((this.scale.x+this.scale.y+this.scale.z)/3),_=y*y,C=f.index,x=f.attributes.position;if(null!==C)for(var T=Math.max(0,g.start),A=Math.min(C.count,g.start+g.count);T<A;T++){var M=C.getX(T);ub.fromBufferAttribute(x,M),fk(ub,M,_,p,o,u,this)}else for(var B=Math.max(0,g.start),z=Math.min(x.count,g.start+g.count);B<z;B++)ub.fromBufferAttribute(x,B),fk(ub,B,_,p,o,u,this)}}},{key:"updateMorphTargets",value:function(){var u=this.geometry.morphAttributes,f=Object.keys(u);if(f.length>0){var p=u[f[0]];if(void 0!==p){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var v=0,g=p.length;v<g;v++){var y=p[v].name||String(v);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=v}}}}}]),e}(Co);function fk(n,a,e,r,o,u,f){var p=CA.distanceSqToPoint(n);if(p<e){var v=new Z;CA.closestPointToPoint(n,v),v.applyMatrix4(r);var g=o.ray.origin.distanceTo(v);if(g<o.near||g>o.far)return;u.push({distance:g,distanceToRay:Math.sqrt(p),point:v,index:a,face:null,object:f})}}var cb=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;N(this,e),(r=a.call(this)).type="CircleGeometry",r.parameters={radius:o,segments:u,thetaStart:f,thetaLength:p},u=Math.max(3,u);var v=[],g=[],y=[],_=[],C=new Z,w=new $e;g.push(0,0,0),y.push(0,0,1),_.push(.5,.5);for(var x=0,E=3;x<=u;x++,E+=3){var b=f+x/u*p;C.x=o*Math.cos(b),C.y=o*Math.sin(b),g.push(C.x,C.y,C.z),y.push(0,0,1),w.x=(g[E]/o+1)/2,w.y=(g[E+1]/o+1)/2,_.push(w.x,w.y)}for(var T=1;T<=u;T++)v.push(T,T+1,0);return r.setIndex(v),r.setAttribute("position",new dn(g,3)),r.setAttribute("normal",new dn(y,3)),r.setAttribute("uv",new dn(_,2)),r}return j(e,null,[{key:"fromJSON",value:function(o){return new e(o.radius,o.segments,o.thetaStart,o.thetaLength)}}]),e}(Pr),Tk=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(N(this,e),(r=a.call(this)).type="WireframeGeometry",r.parameters={geometry:o},null!==o){var u=[],f=new Set,p=new Z,v=new Z;if(null!==o.index){var g=o.attributes.position,y=o.index,_=o.groups;0===_.length&&(_=[{start:0,count:y.count,materialIndex:0}]);for(var C=0,w=_.length;C<w;++C)for(var x=_[C],E=x.start,b=x.count,T=E,A=E+b;T<A;T+=3)for(var M=0;M<3;M++){var O=y.getX(T+M),I=y.getX(T+(M+1)%3);p.fromBufferAttribute(g,O),v.fromBufferAttribute(g,I),!0===Dk(p,v,f)&&(u.push(p.x,p.y,p.z),u.push(v.x,v.y,v.z))}}else for(var B=o.attributes.position,z=0,P=B.count/3;z<P;z++)for(var W=0;W<3;W++){var X=3*z+W,re=3*z+(W+1)%3;p.fromBufferAttribute(B,X),v.fromBufferAttribute(B,re),!0===Dk(p,v,f)&&(u.push(p.x,p.y,p.z),u.push(v.x,v.y,v.z))}r.setAttribute("position",new dn(u,3))}return r}return e}(Pr);function Dk(n,a,e){var r="".concat(n.x,",").concat(n.y,",").concat(n.z,"-").concat(a.x,",").concat(a.y,",").concat(a.z),o="".concat(a.x,",").concat(a.y,",").concat(a.z,"-").concat(n.x,",").concat(n.y,",").concat(n.z);return!0!==e.has(r)&&!0!==e.has(o)&&(e.add(r),e.add(o),!0)}var PA=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this)).isMeshStandardMaterial=!0,o.defines={STANDARD:""},o.type="MeshStandardMaterial",o.color=new Ht(16777215),o.roughness=1,o.metalness=0,o.map=null,o.lightMap=null,o.lightMapIntensity=1,o.aoMap=null,o.aoMapIntensity=1,o.emissive=new Ht(0),o.emissiveIntensity=1,o.emissiveMap=null,o.bumpMap=null,o.bumpScale=1,o.normalMap=null,o.normalMapType=0,o.normalScale=new $e(1,1),o.displacementMap=null,o.displacementScale=1,o.displacementBias=0,o.roughnessMap=null,o.metalnessMap=null,o.alphaMap=null,o.envMap=null,o.envMapIntensity=1,o.wireframe=!1,o.wireframeLinewidth=1,o.wireframeLinecap="round",o.wireframeLinejoin="round",o.flatShading=!1,o.fog=!0,o.setValues(r),o}return j(e,[{key:"copy",value:function(o){return we(ze(e.prototype),"copy",this).call(this,o),this.defines={STANDARD:""},this.color.copy(o.color),this.roughness=o.roughness,this.metalness=o.metalness,this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.roughnessMap=o.roughnessMap,this.metalnessMap=o.metalnessMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.envMapIntensity=o.envMapIntensity,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.flatShading=o.flatShading,this.fog=o.fog,this}}]),e}(is),Tf=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this)).isMeshPhysicalMaterial=!0,o.defines={STANDARD:"",PHYSICAL:""},o.type="MeshPhysicalMaterial",o.clearcoatMap=null,o.clearcoatRoughness=0,o.clearcoatRoughnessMap=null,o.clearcoatNormalScale=new $e(1,1),o.clearcoatNormalMap=null,o.ior=1.5,Object.defineProperty(Yn(o),"reflectivity",{get:function(){return pi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(f){this.ior=(1+.4*f)/(1-.4*f)}}),o.iridescenceMap=null,o.iridescenceIOR=1.3,o.iridescenceThicknessRange=[100,400],o.iridescenceThicknessMap=null,o.sheenColor=new Ht(0),o.sheenColorMap=null,o.sheenRoughness=1,o.sheenRoughnessMap=null,o.transmissionMap=null,o.thickness=0,o.thicknessMap=null,o.attenuationDistance=1/0,o.attenuationColor=new Ht(1,1,1),o.specularIntensity=1,o.specularIntensityMap=null,o.specularColor=new Ht(1,1,1),o.specularColorMap=null,o._sheen=0,o._clearcoat=0,o._iridescence=0,o._transmission=0,o.setValues(r),o}return j(e,[{key:"sheen",get:function(){return this._sheen},set:function(o){this._sheen>0!=o>0&&this.version++,this._sheen=o}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(o){this._clearcoat>0!=o>0&&this.version++,this._clearcoat=o}},{key:"iridescence",get:function(){return this._iridescence},set:function(o){this._iridescence>0!=o>0&&this.version++,this._iridescence=o}},{key:"transmission",get:function(){return this._transmission},set:function(o){this._transmission>0!=o>0&&this.version++,this._transmission=o}},{key:"copy",value:function(o){return we(ze(e.prototype),"copy",this).call(this,o),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=o.clearcoat,this.clearcoatMap=o.clearcoatMap,this.clearcoatRoughness=o.clearcoatRoughness,this.clearcoatRoughnessMap=o.clearcoatRoughnessMap,this.clearcoatNormalMap=o.clearcoatNormalMap,this.clearcoatNormalScale.copy(o.clearcoatNormalScale),this.ior=o.ior,this.iridescence=o.iridescence,this.iridescenceMap=o.iridescenceMap,this.iridescenceIOR=o.iridescenceIOR,this.iridescenceThicknessRange=On(o.iridescenceThicknessRange),this.iridescenceThicknessMap=o.iridescenceThicknessMap,this.sheen=o.sheen,this.sheenColor.copy(o.sheenColor),this.sheenColorMap=o.sheenColorMap,this.sheenRoughness=o.sheenRoughness,this.sheenRoughnessMap=o.sheenRoughnessMap,this.transmission=o.transmission,this.transmissionMap=o.transmissionMap,this.thickness=o.thickness,this.thicknessMap=o.thicknessMap,this.attenuationDistance=o.attenuationDistance,this.attenuationColor.copy(o.attenuationColor),this.specularIntensity=o.specularIntensity,this.specularIntensityMap=o.specularIntensityMap,this.specularColor.copy(o.specularColor),this.specularColorMap=o.specularColorMap,this}}]),e}(PA),Ak=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this)).isMeshPhongMaterial=!0,o.type="MeshPhongMaterial",o.color=new Ht(16777215),o.specular=new Ht(1118481),o.shininess=30,o.map=null,o.lightMap=null,o.lightMapIntensity=1,o.aoMap=null,o.aoMapIntensity=1,o.emissive=new Ht(0),o.emissiveIntensity=1,o.emissiveMap=null,o.bumpMap=null,o.bumpScale=1,o.normalMap=null,o.normalMapType=0,o.normalScale=new $e(1,1),o.displacementMap=null,o.displacementScale=1,o.displacementBias=0,o.specularMap=null,o.alphaMap=null,o.envMap=null,o.combine=0,o.reflectivity=1,o.refractionRatio=.98,o.wireframe=!1,o.wireframeLinewidth=1,o.wireframeLinecap="round",o.wireframeLinejoin="round",o.flatShading=!1,o.fog=!0,o.setValues(r),o}return j(e,[{key:"copy",value:function(o){return we(ze(e.prototype),"copy",this).call(this,o),this.color.copy(o.color),this.specular.copy(o.specular),this.shininess=o.shininess,this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.flatShading=o.flatShading,this.fog=o.fog,this}}]),e}(is),hv=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this)).isMeshLambertMaterial=!0,o.type="MeshLambertMaterial",o.color=new Ht(16777215),o.map=null,o.lightMap=null,o.lightMapIntensity=1,o.aoMap=null,o.aoMapIntensity=1,o.emissive=new Ht(0),o.emissiveIntensity=1,o.emissiveMap=null,o.bumpMap=null,o.bumpScale=1,o.normalMap=null,o.normalMapType=0,o.normalScale=new $e(1,1),o.displacementMap=null,o.displacementScale=1,o.displacementBias=0,o.specularMap=null,o.alphaMap=null,o.envMap=null,o.combine=0,o.reflectivity=1,o.refractionRatio=.98,o.wireframe=!1,o.wireframeLinewidth=1,o.wireframeLinecap="round",o.wireframeLinejoin="round",o.flatShading=!1,o.fog=!0,o.setValues(r),o}return j(e,[{key:"copy",value:function(o){return we(ze(e.prototype),"copy",this).call(this,o),this.color.copy(o.color),this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.flatShading=o.flatShading,this.fog=o.fog,this}}]),e}(is);function as(n,a,e){return IA(n)?new n.constructor(n.subarray(a,void 0!==e?e:n.length)):n.slice(a,e)}function Df(n,a,e){return!n||!e&&n.constructor===a?n:"number"==typeof a.BYTES_PER_ELEMENT?new a(n):Array.prototype.slice.call(n)}function IA(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Mk(n){for(var e=n.length,r=new Array(e),o=0;o!==e;++o)r[o]=o;return r.sort(function(u,f){return n[u]-n[f]}),r}function LA(n,a,e){for(var r=n.length,o=new n.constructor(r),u=0,f=0;f!==r;++u)for(var p=e[u]*a,v=0;v!==a;++v)o[f++]=n[p+v];return o}function FA(n,a,e,r){for(var o=1,u=n[0];void 0!==u&&void 0===u[r];)u=n[o++];if(void 0!==u){var f=u[r];if(void 0!==f)if(Array.isArray(f))do{void 0!==(f=u[r])&&(a.push(u.time),e.push.apply(e,f)),u=n[o++]}while(void 0!==u);else if(void 0!==f.toArray)do{void 0!==(f=u[r])&&(a.push(u.time),f.toArray(e,e.length)),u=n[o++]}while(void 0!==u);else do{void 0!==(f=u[r])&&(a.push(u.time),e.push(f)),u=n[o++]}while(void 0!==u)}}var jy=function(){function n(a,e,r,o){N(this,n),this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0!==o?o:new e.constructor(r),this.sampleValues=e,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return j(n,[{key:"evaluate",value:function(e){var r=this.parameterPositions,o=this._cachedIndex,u=r[o],f=r[o-1];e:{t:{var p;n:{r:if(!(e<u)){for(var v=o+2;;){if(void 0===u){if(e<f)break r;return this._cachedIndex=o=r.length,this.copySampleValue_(o-1)}if(o===v)break;if(f=u,e<(u=r[++o]))break t}p=r.length;break n}if(e>=f)break e;var g=r[1];e<g&&(o=2,f=g);for(var y=o-2;;){if(void 0===f)return this._cachedIndex=0,this.copySampleValue_(0);if(o===y)break;if(u=f,e>=(f=r[--o-1]))break t}p=o,o=0}for(;o<p;){var _=o+p>>>1;e<r[_]?p=_:o=_+1}if(u=r[o],void 0===(f=r[o-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===u)return this._cachedIndex=o=r.length,this.copySampleValue_(o-1)}this._cachedIndex=o,this.intervalChanged_(o,f,u)}return this.interpolate_(o,f,e,u)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var r=this.resultBuffer,o=this.sampleValues,u=this.valueSize,f=e*u,p=0;p!==u;++p)r[p]=o[f+p];return r}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),n}(),sq=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f){var p;return N(this,e),(p=a.call(this,r,o,u,f))._weightPrev=-0,p._offsetPrev=-0,p._weightNext=-0,p._offsetNext=-0,p.DefaultSettings_={endingStart:Wh,endingEnd:Wh},p}return j(e,[{key:"intervalChanged_",value:function(o,u,f){var p=this.parameterPositions,v=o-2,g=o+1,y=p[v],_=p[g];if(void 0===y)switch(this.getSettings_().endingStart){case Uh:v=o,y=2*u-f;break;case 2402:y=u+p[v=p.length-2]-p[v+1];break;default:v=o,y=f}if(void 0===_)switch(this.getSettings_().endingEnd){case Uh:g=o,_=2*f-u;break;case 2402:g=1,_=f+p[1]-p[0];break;default:g=o-1,_=u}var C=.5*(f-u),w=this.valueSize;this._weightPrev=C/(u-y),this._weightNext=C/(_-f),this._offsetPrev=v*w,this._offsetNext=g*w}},{key:"interpolate_",value:function(o,u,f,p){for(var v=this.resultBuffer,g=this.sampleValues,y=this.valueSize,_=o*y,C=_-y,w=this._offsetPrev,x=this._offsetNext,E=this._weightPrev,b=this._weightNext,T=(f-u)/(p-u),A=T*T,M=A*T,O=-E*M+2*E*A-E*T,I=(1+E)*M+(-1.5-2*E)*A+(-.5+E)*T+1,B=(-1-b)*M+(1.5+b)*A+.5*T,z=b*M-b*A,P=0;P!==y;++P)v[P]=O*g[w+P]+I*g[C+P]+B*g[_+P]+z*g[x+P];return v}}]),e}(jy),Ok=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f){return N(this,e),a.call(this,r,o,u,f)}return j(e,[{key:"interpolate_",value:function(o,u,f,p){for(var v=this.resultBuffer,g=this.sampleValues,y=this.valueSize,_=o*y,C=_-y,w=(f-u)/(p-u),x=1-w,E=0;E!==y;++E)v[E]=g[C+E]*x+g[_+E]*w;return v}}]),e}(jy),uq=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f){return N(this,e),a.call(this,r,o,u,f)}return j(e,[{key:"interpolate_",value:function(o){return this.copySampleValue_(o-1)}}]),e}(jy),Au=function(){function n(a,e,r,o){if(N(this,n),void 0===a)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a,this.times=Df(e,this.TimeBufferType),this.values=Df(r,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}return j(n,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new uq(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new Ok(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new sq(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var r;switch(e){case Sy:r=this.InterpolantFactoryMethodDiscrete;break;case Vh:r=this.InterpolantFactoryMethodLinear;break;case 2302:r=this.InterpolantFactoryMethodSmooth}if(void 0===r){var o="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(o);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",o),this}return this.createInterpolant=r,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Sy;case this.InterpolantFactoryMethodLinear:return Vh;case this.InterpolantFactoryMethodSmooth:return 2302}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var r=this.times,o=0,u=r.length;o!==u;++o)r[o]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var r=this.times,o=0,u=r.length;o!==u;++o)r[o]*=e;return this}},{key:"trim",value:function(e,r){for(var o=this.times,u=o.length,f=0,p=u-1;f!==u&&o[f]<e;)++f;for(;-1!==p&&o[p]>r;)--p;if(++p,0!==f||p!==u){f>=p&&(f=(p=Math.max(p,1))-1);var v=this.getValueSize();this.times=as(o,f,p),this.values=as(this.values,f*v,p*v)}return this}},{key:"validate",value:function(){var e=!0,r=this.getValueSize();r-Math.floor(r)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var o=this.times,u=this.values,f=o.length;0===f&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var p=null,v=0;v!==f;v++){var g=o[v];if("number"==typeof g&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,v,g),e=!1;break}if(null!==p&&p>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,v,g,p),e=!1;break}p=g}if(void 0!==u&&IA(u))for(var y=0,_=u.length;y!==_;++y){var C=u[y];if(isNaN(C)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,y,C),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=as(this.times),r=as(this.values),o=this.getValueSize(),u=2302===this.getInterpolation(),f=e.length-1,p=1,v=1;v<f;++v){var g=!1,y=e[v];if(y!==e[v+1]&&(1!==v||y!==e[0]))if(u)g=!0;else for(var C=v*o,w=C-o,x=C+o,E=0;E!==o;++E){var b=r[C+E];if(b!==r[w+E]||b!==r[x+E]){g=!0;break}}if(g){if(v!==p){e[p]=e[v];for(var T=v*o,A=p*o,M=0;M!==o;++M)r[A+M]=r[T+M]}++p}}if(f>0){e[p]=e[f];for(var O=f*o,I=p*o,B=0;B!==o;++B)r[I+B]=r[O+B];++p}return p!==e.length?(this.times=as(e,0,p),this.values=as(r,0,p*o)):(this.times=e,this.values=r),this}},{key:"clone",value:function(){var e=as(this.times,0),r=as(this.values,0),u=new(0,this.constructor)(this.name,e,r);return u.createInterpolant=this.createInterpolant,u}}],[{key:"toJSON",value:function(e){var o,r=e.constructor;if(r.toJSON!==this.toJSON)o=r.toJSON(e);else{o={name:e.name,times:Df(e.times,Array),values:Df(e.values,Array)};var u=e.getInterpolation();u!==e.DefaultInterpolation&&(o.interpolation=u)}return o.type=e.ValueTypeName,o}}]),n}();Au.prototype.TimeBufferType=Float32Array,Au.prototype.ValueBufferType=Float32Array,Au.prototype.DefaultInterpolation=Vh;var vv=function(n){ve(e,n);var a=ge(e);function e(){return N(this,e),a.apply(this,arguments)}return e}(Au);vv.prototype.ValueTypeName="bool",vv.prototype.ValueBufferType=Array,vv.prototype.DefaultInterpolation=Sy,vv.prototype.InterpolantFactoryMethodLinear=void 0,vv.prototype.InterpolantFactoryMethodSmooth=void 0;var Pk=function(n){ve(e,n);var a=ge(e);function e(){return N(this,e),a.apply(this,arguments)}return e}(Au);Pk.prototype.ValueTypeName="color";var qy=function(n){ve(e,n);var a=ge(e);function e(){return N(this,e),a.apply(this,arguments)}return e}(Au);qy.prototype.ValueTypeName="number";var lq=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f){return N(this,e),a.call(this,r,o,u,f)}return j(e,[{key:"interpolate_",value:function(o,u,f,p){for(var v=this.resultBuffer,g=this.sampleValues,y=this.valueSize,_=(f-u)/(p-u),C=o*y,w=C+y;C!==w;C+=4)ro.slerpFlat(v,0,g,C-y,g,C,_);return v}}]),e}(jy),Af=function(n){ve(e,n);var a=ge(e);function e(){return N(this,e),a.apply(this,arguments)}return j(e,[{key:"InterpolantFactoryMethodLinear",value:function(o){return new lq(this.times,this.values,this.getValueSize(),o)}}]),e}(Au);Af.prototype.ValueTypeName="quaternion",Af.prototype.DefaultInterpolation=Vh,Af.prototype.InterpolantFactoryMethodSmooth=void 0;var gv=function(n){ve(e,n);var a=ge(e);function e(){return N(this,e),a.apply(this,arguments)}return e}(Au);gv.prototype.ValueTypeName="string",gv.prototype.ValueBufferType=Array,gv.prototype.DefaultInterpolation=Sy,gv.prototype.InterpolantFactoryMethodLinear=void 0,gv.prototype.InterpolantFactoryMethodSmooth=void 0;var Ky=function(n){ve(e,n);var a=ge(e);function e(){return N(this,e),a.apply(this,arguments)}return e}(Au);Ky.prototype.ValueTypeName="vector";var kA=function(){function n(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;N(this,n),this.name=a,this.tracks=r,this.duration=e,this.blendMode=o,this.uuid=rs(),this.duration<0&&this.resetDuration()}return j(n,[{key:"resetDuration",value:function(){for(var r=0,o=0,u=this.tracks.length;o!==u;++o){var f=this.tracks[o];r=Math.max(r,f.times[f.times.length-1])}return this.duration=r,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,r=0;r<this.tracks.length;r++)e=e&&this.tracks[r].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],r=0;r<this.tracks.length;r++)e.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var r=[],o=e.tracks,u=1/(e.fps||1),f=0,p=o.length;f!==p;++f)r.push(dq(o[f]).scale(u));var v=new this(e.name,e.duration,r,e.blendMode);return v.uuid=e.uuid,v}},{key:"toJSON",value:function(e){for(var r=[],o=e.tracks,u={name:e.name,duration:e.duration,tracks:r,uuid:e.uuid,blendMode:e.blendMode},f=0,p=o.length;f!==p;++f)r.push(Au.toJSON(o[f]));return u}},{key:"CreateFromMorphTargetSequence",value:function(e,r,o,u){for(var f=r.length,p=[],v=0;v<f;v++){var g=[],y=[];g.push((v+f-1)%f,v,(v+1)%f),y.push(0,1,0);var _=Mk(g);g=LA(g,1,_),y=LA(y,1,_),!u&&0===g[0]&&(g.push(f),y.push(y[0])),p.push(new qy(".morphTargetInfluences["+r[v].name+"]",g,y).scale(1/o))}return new this(e,-1,p)}},{key:"findByName",value:function(e,r){var o=e;Array.isArray(e)||(o=e.geometry&&e.geometry.animations||e.animations);for(var f=0;f<o.length;f++)if(o[f].name===r)return o[f];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,r,o){for(var u={},f=/^([\w-]*?)([\d]+)$/,p=0,v=e.length;p<v;p++){var g=e[p],y=g.name.match(f);if(y&&y.length>1){var _=y[1],C=u[_];C||(u[_]=C=[]),C.push(g)}}var w=[];for(var x in u)w.push(this.CreateFromMorphTargetSequence(x,u[x],r,o));return w}},{key:"parseAnimation",value:function(e,r){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var o=function(P,W,X,re,de){if(0!==X.length){var ce=[],G=[];FA(X,ce,G,re),0!==ce.length&&de.push(new P(W,ce,G))}},u=[],f=e.name||"default",p=e.fps||30,v=e.blendMode,g=e.length||-1,y=e.hierarchy||[],_=0;_<y.length;_++){var C=y[_].keys;if(C&&0!==C.length)if(C[0].morphTargets){var w={},x=void 0;for(x=0;x<C.length;x++)if(C[x].morphTargets)for(var E=0;E<C[x].morphTargets.length;E++)w[C[x].morphTargets[E]]=-1;for(var b in w){for(var T=[],A=[],M=0;M!==C[x].morphTargets.length;++M){var O=C[x];T.push(O.time),A.push(O.morphTarget===b?1:0)}u.push(new qy(".morphTargetInfluence["+b+"]",T,A))}g=w.length*p}else{var I=".bones["+r[_].name+"]";o(Ky,I+".position",C,"pos",u),o(Af,I+".quaternion",C,"rot",u),o(Ky,I+".scale",C,"scl",u)}}return 0===u.length?null:new this(f,g,u,v)}}]),n}();function dq(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var a=function(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return qy;case"vector":case"vector2":case"vector3":case"vector4":return Ky;case"color":return Pk;case"quaternion":return Af;case"bool":case"boolean":return vv;case"string":return gv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){var e=[],r=[];FA(n.keys,e,r,"value"),n.times=e,n.values=r}return void 0!==a.parse?a.parse(n):new a(n.name,n.times,n.values,n.interpolation)}var mv={enabled:!1,files:{},add:function(a,e){!1!==this.enabled&&(this.files[a]=e)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},Ik=function n(a,e,r){N(this,n);var o=this,u=!1,f=0,p=0,v=void 0,g=[];this.onStart=void 0,this.onLoad=a,this.onProgress=e,this.onError=r,this.itemStart=function(y){p++,!1===u&&void 0!==o.onStart&&o.onStart(y,f,p),u=!0},this.itemEnd=function(y){f++,void 0!==o.onProgress&&o.onProgress(y,f,p),f===p&&(u=!1,void 0!==o.onLoad&&o.onLoad())},this.itemError=function(y){void 0!==o.onError&&o.onError(y)},this.resolveURL=function(y){return v?v(y):y},this.setURLModifier=function(y){return v=y,this},this.addHandler=function(y,_){return g.push(y,_),this},this.removeHandler=function(y){var _=g.indexOf(y);return-1!==_&&g.splice(_,2),this},this.getHandler=function(y){for(var _=0,C=g.length;_<C;_+=2){var w=g[_],x=g[_+1];if(w.global&&(w.lastIndex=0),w.test(y))return x}return null}},fq=new Ik,Yy=function(){function n(a){N(this,n),this.manager=void 0!==a?a:fq,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return j(n,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,r){var o=this;return new Promise(function(u,f){o.load(e,u,r,f)})}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),n}(),Cl={},pq=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;return N(this,e),(u=a.call(this,r)).response=o,u}return e}(Rr(Error)),Lk=function(n){ve(e,n);var a=ge(e);function e(r){return N(this,e),a.call(this,r)}return j(e,[{key:"load",value:function(o,u,f,p){var v=this;void 0===o&&(o=""),void 0!==this.path&&(o=this.path+o),o=this.manager.resolveURL(o);var g=mv.get(o);if(void 0!==g)return this.manager.itemStart(o),setTimeout(function(){u&&u(g),v.manager.itemEnd(o)},0),g;if(void 0===Cl[o]){Cl[o]=[],Cl[o].push({onLoad:u,onProgress:f,onError:p});var y=new Request(o,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),_=this.mimeType,C=this.responseType;fetch(y).then(function(w){if(200===w.status||0===w.status){if(0===w.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===w.body||void 0===w.body.getReader)return w;var x=Cl[o],E=w.body.getReader(),b=w.headers.get("Content-Length")||w.headers.get("X-File-Size"),T=b?parseInt(b):0,A=0!==T,M=0,O=new ReadableStream({start:function(B){!function z(){E.read().then(function(P){var X=P.value;if(P.done)B.close();else{for(var re=new ProgressEvent("progress",{lengthComputable:A,loaded:M+=X.byteLength,total:T}),de=0,ce=x.length;de<ce;de++){var G=x[de];G.onProgress&&G.onProgress(re)}B.enqueue(X),z()}})}()}});return new Response(O)}throw new pq('fetch for "'.concat(w.url,'" responded with ').concat(w.status,": ").concat(w.statusText),w)}).then(function(w){switch(C){case"arraybuffer":return w.arrayBuffer();case"blob":return w.blob();case"document":return w.text().then(function(A){return(new DOMParser).parseFromString(A,_)});case"json":return w.json();default:if(void 0===_)return w.text();var E=/charset="?([^;"\s]*)"?/i.exec(_),b=E&&E[1]?E[1].toLowerCase():void 0,T=new TextDecoder(b);return w.arrayBuffer().then(function(A){return T.decode(A)})}}).then(function(w){mv.add(o,w);var x=Cl[o];delete Cl[o];for(var E=0,b=x.length;E<b;E++){var T=x[E];T.onLoad&&T.onLoad(w)}}).catch(function(w){var x=Cl[o];if(void 0===x)throw v.manager.itemError(o),w;delete Cl[o];for(var E=0,b=x.length;E<b;E++){var T=x[E];T.onError&&T.onError(w)}v.manager.itemError(o)}).finally(function(){v.manager.itemEnd(o)}),this.manager.itemStart(o)}else Cl[o].push({onLoad:u,onProgress:f,onError:p})}},{key:"setResponseType",value:function(o){return this.responseType=o,this}},{key:"setMimeType",value:function(o){return this.mimeType=o,this}}]),e}(Yy),hq=function(n){ve(e,n);var a=ge(e);function e(r){return N(this,e),a.call(this,r)}return j(e,[{key:"load",value:function(o,u,f,p){void 0!==this.path&&(o=this.path+o),o=this.manager.resolveURL(o);var v=this,g=mv.get(o);if(void 0!==g)return v.manager.itemStart(o),setTimeout(function(){u&&u(g),v.manager.itemEnd(o)},0),g;var y=Ry("img");function _(){w(),mv.add(o,this),u&&u(this),v.manager.itemEnd(o)}function C(x){w(),p&&p(x),v.manager.itemError(o),v.manager.itemEnd(o)}function w(){y.removeEventListener("load",_,!1),y.removeEventListener("error",C,!1)}return y.addEventListener("load",_,!1),y.addEventListener("error",C,!1),"data:"!==o.slice(0,5)&&void 0!==this.crossOrigin&&(y.crossOrigin=this.crossOrigin),v.manager.itemStart(o),y.src=o,y}}]),e}(Yy),vq=function(n){ve(e,n);var a=ge(e);function e(r){return N(this,e),a.call(this,r)}return j(e,[{key:"load",value:function(o,u,f,p){var v=new xu,g=new hq(this.manager);return g.setCrossOrigin(this.crossOrigin),g.setPath(this.path),g.load(o,function(y){v.image=y,v.needsUpdate=!0,void 0!==u&&u(v)},f,p),v}}]),e}(Yy),gb=function(n){ve(e,n);var a=ge(e);function e(r){var o,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return N(this,e),(o=a.call(this)).isLight=!0,o.type="Light",o.color=new Ht(r),o.intensity=u,o}return j(e,[{key:"dispose",value:function(){}},{key:"copy",value:function(o,u){return we(ze(e.prototype),"copy",this).call(this,o,u),this.color.copy(o.color),this.intensity=o.intensity,this}},{key:"toJSON",value:function(o){var u=we(ze(e.prototype),"toJSON",this).call(this,o);return u.object.color=this.color.getHex(),u.object.intensity=this.intensity,void 0!==this.groundColor&&(u.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(u.object.distance=this.distance),void 0!==this.angle&&(u.object.angle=this.angle),void 0!==this.decay&&(u.object.decay=this.decay),void 0!==this.penumbra&&(u.object.penumbra=this.penumbra),void 0!==this.shadow&&(u.object.shadow=this.shadow.toJSON()),u}}]),e}(Co),NA=new En,Fk=new Z,kk=new Z,GA=function(){function n(a){N(this,n),this.camera=a,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new $e(512,512),this.map=null,this.mapPass=null,this.matrix=new En,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new cA,this._frameExtents=new $e(1,1),this._viewportCount=1,this._viewports=[new xr(0,0,1,1)]}return j(n,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var r=this.camera,o=this.matrix;Fk.setFromMatrixPosition(e.matrixWorld),r.position.copy(Fk),kk.setFromMatrixPosition(e.target.matrixWorld),r.lookAt(kk),r.updateMatrixWorld(),NA.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(NA),o.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),o.multiply(NA)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),n}(),gq=function(n){ve(e,n);var a=ge(e);function e(){var r;return N(this,e),(r=a.call(this,new kr(50,1,.5,500))).isSpotLightShadow=!0,r.focus=1,r}return j(e,[{key:"updateMatrices",value:function(o){var u=this.camera,f=2*Ey*o.angle*this.focus,p=this.mapSize.width/this.mapSize.height,v=o.distance||u.far;(f!==u.fov||p!==u.aspect||v!==u.far)&&(u.fov=f,u.aspect=p,u.far=v,u.updateProjectionMatrix()),we(ze(e.prototype),"updateMatrices",this).call(this,o)}},{key:"copy",value:function(o){return we(ze(e.prototype),"copy",this).call(this,o),this.focus=o.focus,this}}]),e}(GA),mq=function(n){ve(e,n);var a=ge(e);function e(r,o){var u,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return N(this,e),(u=a.call(this,r,o)).isSpotLight=!0,u.type="SpotLight",u.position.copy(Co.DefaultUp),u.updateMatrix(),u.target=new Co,u.distance=f,u.angle=p,u.penumbra=v,u.decay=g,u.map=null,u.shadow=new gq,u}return j(e,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(o){this.intensity=o/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(o,u){return we(ze(e.prototype),"copy",this).call(this,o,u),this.distance=o.distance,this.angle=o.angle,this.penumbra=o.penumbra,this.decay=o.decay,this.target=o.target.clone(),this.shadow=o.shadow.clone(),this}}]),e}(gb),Nk=new En,$y=new Z,BA=new Z,yq=function(n){ve(e,n);var a=ge(e);function e(){var r;return N(this,e),(r=a.call(this,new kr(90,1,.5,500))).isPointLightShadow=!0,r._frameExtents=new $e(4,2),r._viewportCount=6,r._viewports=[new xr(2,1,1,1),new xr(0,1,1,1),new xr(3,1,1,1),new xr(1,1,1,1),new xr(3,0,1,1),new xr(1,0,1,1)],r._cubeDirections=[new Z(1,0,0),new Z(-1,0,0),new Z(0,0,1),new Z(0,0,-1),new Z(0,1,0),new Z(0,-1,0)],r._cubeUps=[new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,0,1),new Z(0,0,-1)],r}return j(e,[{key:"updateMatrices",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,f=this.camera,p=this.matrix,v=o.distance||f.far;v!==f.far&&(f.far=v,f.updateProjectionMatrix()),$y.setFromMatrixPosition(o.matrixWorld),f.position.copy($y),BA.copy(f.position),BA.add(this._cubeDirections[u]),f.up.copy(this._cubeUps[u]),f.lookAt(BA),f.updateMatrixWorld(),p.makeTranslation(-$y.x,-$y.y,-$y.z),Nk.multiplyMatrices(f.projectionMatrix,f.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Nk)}}]),e}(GA),_q=function(n){ve(e,n);var a=ge(e);function e(r,o){var u,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return N(this,e),(u=a.call(this,r,o)).isPointLight=!0,u.type="PointLight",u.distance=f,u.decay=p,u.shadow=new yq,u}return j(e,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(o){this.intensity=o/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(o,u){return we(ze(e.prototype),"copy",this).call(this,o,u),this.distance=o.distance,this.decay=o.decay,this.shadow=o.shadow.clone(),this}}]),e}(gb),Cq=function(n){ve(e,n);var a=ge(e);function e(){var r;return N(this,e),(r=a.call(this,new fA(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,r}return e}(GA),Mu=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;return N(this,e),(u=a.call(this,r,o)).isDirectionalLight=!0,u.type="DirectionalLight",u.position.copy(Co.DefaultUp),u.updateMatrix(),u.target=new Co,u.shadow=new Cq,u}return j(e,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(o){return we(ze(e.prototype),"copy",this).call(this,o),this.target=o.target.clone(),this.shadow=o.shadow.clone(),this}}]),e}(gb),wl=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;return N(this,e),(u=a.call(this,r,o)).isAmbientLight=!0,u.type="AmbientLight",u}return e}(gb),Mf=function(){function n(){N(this,n)}return j(n,null,[{key:"decodeText",value:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var r="",o=0,u=e.length;o<u;o++)r+=String.fromCharCode(e[o]);try{return decodeURIComponent(escape(r))}catch(f){return r}}},{key:"extractUrlBase",value:function(e){var r=e.lastIndexOf("/");return-1===r?"./":e.slice(0,r+1)}},{key:"resolveURL",value:function(e,r){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(r)&&/^\//.test(e)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:r+e)}}]),n}(),wq=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this,r)).isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),o.options={premultiplyAlpha:"none"},o}return j(e,[{key:"setOptions",value:function(o){return this.options=o,this}},{key:"load",value:function(o,u,f,p){void 0===o&&(o=""),void 0!==this.path&&(o=this.path+o),o=this.manager.resolveURL(o);var v=this,g=mv.get(o);if(void 0!==g)return v.manager.itemStart(o),setTimeout(function(){u&&u(g),v.manager.itemEnd(o)},0),g;var y={};y.credentials="anonymous"===this.crossOrigin?"same-origin":"include",y.headers=this.requestHeader,fetch(o,y).then(function(_){return _.blob()}).then(function(_){return createImageBitmap(_,Object.assign(v.options,{colorSpaceConversion:"none"}))}).then(function(_){mv.add(o,_),u&&u(_),v.manager.itemEnd(o)}).catch(function(_){p&&p(_),v.manager.itemError(o),v.manager.itemEnd(o)}),v.manager.itemStart(o)}}]),e}(Yy),Sl=function(){function n(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];N(this,n),this.autoStart=a,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return j(n,[{key:"start",value:function(){this.startTime=Gk(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var r=Gk();e=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=e}return e}}]),n}();function Gk(){return("undefined"==typeof performance?Date:performance).now()}var Sq=function(){function n(a,e,r){var o,u,f;switch(N(this,n),this.binding=a,this.valueSize=r,e){case"quaternion":o=this._slerp,u=this._slerpAdditive,f=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":o=this._select,u=this._select,f=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:o=this._lerp,u=this._lerpAdditive,f=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=u,this._setIdentity=f,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return j(n,[{key:"accumulate",value:function(e,r){var o=this.buffer,u=this.valueSize,f=e*u+u,p=this.cumulativeWeight;if(0===p){for(var v=0;v!==u;++v)o[f+v]=o[v];p=r}else this._mixBufferRegion(o,f,0,r/(p+=r),u);this.cumulativeWeight=p}},{key:"accumulateAdditive",value:function(e){var r=this.buffer,o=this.valueSize,u=o*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(r,u,0,e,o),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var r=this.valueSize,o=this.buffer,u=e*r+r,f=this.cumulativeWeight,p=this.cumulativeWeightAdditive,v=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,f<1&&this._mixBufferRegion(o,u,r*this._origIndex,1-f,r),p>0&&this._mixBufferRegionAdditive(o,u,this._addIndex*r,1,r);for(var y=r,_=r+r;y!==_;++y)if(o[y]!==o[y+r]){v.setValue(o,u);break}}},{key:"saveOriginalState",value:function(){var r=this.buffer,o=this.valueSize,u=o*this._origIndex;this.binding.getValue(r,u);for(var f=o,p=u;f!==p;++f)r[f]=r[u+f%o];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){this.binding.setValue(this.buffer,3*this.valueSize)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,r=e+this.valueSize,o=e;o<r;o++)this.buffer[o]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize,o=0;o<this.valueSize;o++)this.buffer[r+o]=this.buffer[e+o]}},{key:"_select",value:function(e,r,o,u,f){if(u>=.5)for(var p=0;p!==f;++p)e[r+p]=e[o+p]}},{key:"_slerp",value:function(e,r,o,u){ro.slerpFlat(e,r,e,r,e,o,u)}},{key:"_slerpAdditive",value:function(e,r,o,u,f){var p=this._workIndex*f;ro.multiplyQuaternionsFlat(e,p,e,r,e,o),ro.slerpFlat(e,r,e,r,e,p,u)}},{key:"_lerp",value:function(e,r,o,u,f){for(var p=1-u,v=0;v!==f;++v){var g=r+v;e[g]=e[g]*p+e[o+v]*u}}},{key:"_lerpAdditive",value:function(e,r,o,u,f){for(var p=0;p!==f;++p){var v=r+p;e[v]=e[v]+e[o+p]*u}}}]),n}(),HA="\\[\\]\\.:\\/",bq=new RegExp("["+HA+"]","g"),VA="[^"+HA+"]",Eq="[^"+HA.replace("\\.","")+"]",Aq=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",VA)+/(WCOD+)?/.source.replace("WCOD",Eq)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",VA)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",VA)+"$"),Mq=["material","materials","bones","map"],Oq=function(){function n(a,e,r){N(this,n);var o=r||Gr.parseTrackName(e);this._targetGroup=a,this._bindings=a.subscribe_(e,o)}return j(n,[{key:"getValue",value:function(e,r){this.bind();var u=this._bindings[this._targetGroup.nCachedObjects_];void 0!==u&&u.getValue(e,r)}},{key:"setValue",value:function(e,r){for(var o=this._bindings,u=this._targetGroup.nCachedObjects_,f=o.length;u!==f;++u)o[u].setValue(e,r)}},{key:"bind",value:function(){for(var e=this._bindings,r=this._targetGroup.nCachedObjects_,o=e.length;r!==o;++r)e[r].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,r=this._targetGroup.nCachedObjects_,o=e.length;r!==o;++r)e[r].unbind()}}]),n}(),Gr=function(){var n=function(){function a(e,r,o){N(this,a),this.path=r,this.parsedPath=o||a.parseTrackName(r),this.node=a.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return j(a,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(r,o){r[o]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(r,o){for(var u=this.resolvedProperty,f=0,p=u.length;f!==p;++f)r[o++]=u[f]}},{key:"_getValue_arrayElement",value:function(r,o){r[o]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(r,o){this.resolvedProperty.toArray(r,o)}},{key:"_setValue_direct",value:function(r,o){this.targetObject[this.propertyName]=r[o]}},{key:"_setValue_direct_setNeedsUpdate",value:function(r,o){this.targetObject[this.propertyName]=r[o],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(r,o){this.targetObject[this.propertyName]=r[o],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(r,o){for(var u=this.resolvedProperty,f=0,p=u.length;f!==p;++f)u[f]=r[o++]}},{key:"_setValue_array_setNeedsUpdate",value:function(r,o){for(var u=this.resolvedProperty,f=0,p=u.length;f!==p;++f)u[f]=r[o++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(r,o){for(var u=this.resolvedProperty,f=0,p=u.length;f!==p;++f)u[f]=r[o++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(r,o){this.resolvedProperty[this.propertyIndex]=r[o]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(r,o){this.resolvedProperty[this.propertyIndex]=r[o],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(r,o){this.resolvedProperty[this.propertyIndex]=r[o],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(r,o){this.resolvedProperty.fromArray(r,o)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(r,o){this.resolvedProperty.fromArray(r,o),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(r,o){this.resolvedProperty.fromArray(r,o),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(r,o){this.bind(),this.getValue(r,o)}},{key:"_setValue_unbound",value:function(r,o){this.bind(),this.setValue(r,o)}},{key:"bind",value:function(){var r=this.node,o=this.parsedPath,u=o.objectName,f=o.propertyName,p=o.propertyIndex;if(r||(r=a.findNode(this.rootNode,o.nodeName)||this.rootNode,this.node=r),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,r){if(u){var v=o.objectIndex;switch(u){case"materials":if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);r=r.material.materials;break;case"bones":if(!r.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);r=r.skeleton.bones;for(var g=0;g<r.length;g++)if(r[g].name===v){v=g;break}break;case"map":if("map"in r){r=r.map;break}if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);r=r.material.map;break;default:if(void 0===r[u])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);r=r[u]}if(void 0!==v){if(void 0===r[v])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,r);r=r[v]}}var y=r[f];if(void 0!==y){var C=this.Versioning.None;this.targetObject=r,void 0!==r.needsUpdate?C=this.Versioning.NeedsUpdate:void 0!==r.matrixWorldNeedsUpdate&&(C=this.Versioning.MatrixWorldNeedsUpdate);var w=this.BindingType.Direct;if(void 0!==p){if("morphTargetInfluences"===f){if(!r.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!r.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==r.morphTargetDictionary[p]&&(p=r.morphTargetDictionary[p])}w=this.BindingType.ArrayElement,this.resolvedProperty=y,this.propertyIndex=p}else void 0!==y.fromArray&&void 0!==y.toArray?(w=this.BindingType.HasFromToArray,this.resolvedProperty=y):Array.isArray(y)?(w=this.BindingType.EntireArray,this.resolvedProperty=y):this.propertyName=f;this.getValue=this.GetterByBindingType[w],this.setValue=this.SetterByBindingTypeAndVersioning[w][C]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+o.nodeName+"."+f+" but it wasn't found.",r)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(r,o,u){return r&&r.isAnimationObjectGroup?new a.Composite(r,o,u):new a(r,o,u)}},{key:"sanitizeNodeName",value:function(r){return r.replace(/\s/g,"_").replace(bq,"")}},{key:"parseTrackName",value:function(r){var o=Aq.exec(r);if(null===o)throw new Error("PropertyBinding: Cannot parse trackName: "+r);var u={nodeName:o[2],objectName:o[3],objectIndex:o[4],propertyName:o[5],propertyIndex:o[6]},f=u.nodeName&&u.nodeName.lastIndexOf(".");if(void 0!==f&&-1!==f){var p=u.nodeName.substring(f+1);-1!==Mq.indexOf(p)&&(u.nodeName=u.nodeName.substring(0,f),u.objectName=p)}if(null===u.propertyName||0===u.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+r);return u}},{key:"findNode",value:function(r,o){if(void 0===o||""===o||"."===o||-1===o||o===r.name||o===r.uuid)return r;if(r.skeleton){var u=r.skeleton.getBoneByName(o);if(void 0!==u)return u}if(r.children){var p=function v(g){for(var y=0;y<g.length;y++){var _=g[y];if(_.name===o||_.uuid===o)return _;var C=v(_.children);if(C)return C}return null}(r.children);if(p)return p}return null}}]),a}();return n.Composite=Oq,n}();Gr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Gr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Gr.prototype.GetterByBindingType=[Gr.prototype._getValue_direct,Gr.prototype._getValue_array,Gr.prototype._getValue_arrayElement,Gr.prototype._getValue_toArray],Gr.prototype.SetterByBindingTypeAndVersioning=[[Gr.prototype._setValue_direct,Gr.prototype._setValue_direct_setNeedsUpdate,Gr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gr.prototype._setValue_array,Gr.prototype._setValue_array_setNeedsUpdate,Gr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gr.prototype._setValue_arrayElement,Gr.prototype._setValue_arrayElement_setNeedsUpdate,Gr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gr.prototype._setValue_fromArray,Gr.prototype._setValue_fromArray_setNeedsUpdate,Gr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Pq=function(){function n(a,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.blendMode;N(this,n),this._mixer=a,this._clip=e,this._localRoot=r,this.blendMode=o;for(var u=e.tracks,f=u.length,p=new Array(f),v={endingStart:Wh,endingEnd:Wh},g=0;g!==f;++g){var y=u[g].createInterpolant(null);p[g]=y,y.settings=v}this._interpolantSettings=v,this._interpolants=p,this._propertyBindings=new Array(f),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return j(n,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,r){return this.loop=e,this.repetitions=r,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,r,o){if(e.fadeOut(r),this.fadeIn(r),o){var u=this._clip.duration,f=e._clip.duration,v=u/f;e.warp(1,f/u,r),this.warp(v,1,r)}return this}},{key:"crossFadeTo",value:function(e,r,o){return e.crossFadeFrom(this,r,o)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,r,o){var u=this._mixer,f=u.time,p=this.timeScale,v=this._timeScaleInterpolant;null===v&&(v=u._lendControlInterpolant(),this._timeScaleInterpolant=v);var g=v.parameterPositions,y=v.sampleValues;return g[0]=f,g[1]=f+o,y[0]=e/p,y[1]=r/p,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,r,o,u){if(this.enabled){var f=this._startTime;if(null!==f){var p=(e-f)*o;p<0||0===o?r=0:(this._startTime=null,r=o*p)}r*=this._updateTimeScale(e);var v=this._updateTime(r),g=this._updateWeight(e);if(g>0){var y=this._interpolants,_=this._propertyBindings;if(2501===this.blendMode)for(var C=0,w=y.length;C!==w;++C)y[C].evaluate(v),_[C].accumulateAdditive(g);else for(var x=0,E=y.length;x!==E;++x)y[x].evaluate(v),_[x].accumulate(u,g)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var r=0;if(this.enabled){r=this.weight;var o=this._weightInterpolant;if(null!==o){var u=o.evaluate(e)[0];r*=u,e>o.parameterPositions[1]&&(this.stopFading(),0===u&&(this.enabled=!1))}}return this._effectiveWeight=r,r}},{key:"_updateTimeScale",value:function(e){var r=0;if(!this.paused){r=this.timeScale;var o=this._timeScaleInterpolant;null!==o&&(r*=o.evaluate(e)[0],e>o.parameterPositions[1]&&(this.stopWarping(),0===r?this.paused=!0:this.timeScale=r))}return this._effectiveTimeScale=r,r}},{key:"_updateTime",value:function(e){var r=this._clip.duration,o=this.loop,u=this.time+e,f=this._loopCount,p=2202===o;if(0===e)return-1===f?u:p&&1==(1&f)?r-u:u;if(2200===o){-1===f&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(u>=r)u=r;else{if(!(u<0)){this.time=u;break e}u=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=u,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===f&&(e>=0?(f=0,this._setEndings(!0,0===this.repetitions,p)):this._setEndings(0===this.repetitions,!0,p)),u>=r||u<0){var v=Math.floor(u/r);u-=r*v,f+=Math.abs(v);var g=this.repetitions-f;if(g<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=u=e>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===g){var y=e<0;this._setEndings(y,!y,p)}else this._setEndings(!1,!1,p);this._loopCount=f,this.time=u,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:v})}}else this.time=u;if(p&&1==(1&f))return r-u}return u}},{key:"_setEndings",value:function(e,r,o){var u=this._interpolantSettings;o?(u.endingStart=Uh,u.endingEnd=Uh):(u.endingStart=e?this.zeroSlopeAtStart?Uh:Wh:2402,u.endingEnd=r?this.zeroSlopeAtEnd?Uh:Wh:2402)}},{key:"_scheduleFading",value:function(e,r,o){var u=this._mixer,f=u.time,p=this._weightInterpolant;null===p&&(p=u._lendControlInterpolant(),this._weightInterpolant=p);var v=p.parameterPositions,g=p.sampleValues;return v[0]=f,g[0]=r,v[1]=f+e,g[1]=o,this}}]),n}(),Iq=new Float32Array(1),Xy=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this))._root=r,o._initMemoryManager(),o._accuIndex=0,o.time=0,o.timeScale=1,o}return j(e,[{key:"_bindAction",value:function(o,u){var f=o._localRoot||this._root,p=o._clip.tracks,v=p.length,g=o._propertyBindings,y=o._interpolants,_=f.uuid,C=this._bindingsByRootAndName,w=C[_];void 0===w&&(C[_]=w={});for(var x=0;x!==v;++x){var E=p[x],b=E.name,T=w[b];if(void 0!==T)++T.referenceCount,g[x]=T;else{if(void 0!==(T=g[x])){null===T._cacheIndex&&(++T.referenceCount,this._addInactiveBinding(T,_,b));continue}++(T=new Sq(Gr.create(f,b,u&&u._propertyBindings[x].binding.parsedPath),E.ValueTypeName,E.getValueSize())).referenceCount,this._addInactiveBinding(T,_,b),g[x]=T}y[x].resultBuffer=T.buffer}}},{key:"_activateAction",value:function(o){if(!this._isActiveAction(o)){if(null===o._cacheIndex){var u=(o._localRoot||this._root).uuid,f=o._clip.uuid,p=this._actionsByClip[f];this._bindAction(o,p&&p.knownActions[0]),this._addInactiveAction(o,f,u)}for(var v=o._propertyBindings,g=0,y=v.length;g!==y;++g){var _=v[g];0==_.useCount++&&(this._lendBinding(_),_.saveOriginalState())}this._lendAction(o)}}},{key:"_deactivateAction",value:function(o){if(this._isActiveAction(o)){for(var u=o._propertyBindings,f=0,p=u.length;f!==p;++f){var v=u[f];0==--v.useCount&&(v.restoreOriginalState(),this._takeBackBinding(v))}this._takeBackAction(o)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var o=this;this.stats={actions:{get total(){return o._actions.length},get inUse(){return o._nActiveActions}},bindings:{get total(){return o._bindings.length},get inUse(){return o._nActiveBindings}},controlInterpolants:{get total(){return o._controlInterpolants.length},get inUse(){return o._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(o){var u=o._cacheIndex;return null!==u&&u<this._nActiveActions}},{key:"_addInactiveAction",value:function(o,u,f){var p=this._actions,v=this._actionsByClip,g=v[u];if(void 0===g)g={knownActions:[o],actionByRoot:{}},o._byClipCacheIndex=0,v[u]=g;else{var y=g.knownActions;o._byClipCacheIndex=y.length,y.push(o)}o._cacheIndex=p.length,p.push(o),g.actionByRoot[f]=o}},{key:"_removeInactiveAction",value:function(o){var u=this._actions,f=u[u.length-1],p=o._cacheIndex;f._cacheIndex=p,u[p]=f,u.pop(),o._cacheIndex=null;var v=o._clip.uuid,g=this._actionsByClip,y=g[v],_=y.knownActions,C=_[_.length-1],w=o._byClipCacheIndex;C._byClipCacheIndex=w,_[w]=C,_.pop(),o._byClipCacheIndex=null,delete y.actionByRoot[(o._localRoot||this._root).uuid],0===_.length&&delete g[v],this._removeInactiveBindingsForAction(o)}},{key:"_removeInactiveBindingsForAction",value:function(o){for(var u=o._propertyBindings,f=0,p=u.length;f!==p;++f){var v=u[f];0==--v.referenceCount&&this._removeInactiveBinding(v)}}},{key:"_lendAction",value:function(o){var u=this._actions,f=o._cacheIndex,p=this._nActiveActions++,v=u[p];o._cacheIndex=p,u[p]=o,v._cacheIndex=f,u[f]=v}},{key:"_takeBackAction",value:function(o){var u=this._actions,f=o._cacheIndex,p=--this._nActiveActions,v=u[p];o._cacheIndex=p,u[p]=o,v._cacheIndex=f,u[f]=v}},{key:"_addInactiveBinding",value:function(o,u,f){var p=this._bindingsByRootAndName,v=this._bindings,g=p[u];void 0===g&&(p[u]=g={}),g[f]=o,o._cacheIndex=v.length,v.push(o)}},{key:"_removeInactiveBinding",value:function(o){var u=this._bindings,f=o.binding,p=f.rootNode.uuid,v=f.path,g=this._bindingsByRootAndName,y=g[p],_=u[u.length-1],C=o._cacheIndex;_._cacheIndex=C,u[C]=_,u.pop(),delete y[v],0===Object.keys(y).length&&delete g[p]}},{key:"_lendBinding",value:function(o){var u=this._bindings,f=o._cacheIndex,p=this._nActiveBindings++,v=u[p];o._cacheIndex=p,u[p]=o,v._cacheIndex=f,u[f]=v}},{key:"_takeBackBinding",value:function(o){var u=this._bindings,f=o._cacheIndex,p=--this._nActiveBindings,v=u[p];o._cacheIndex=p,u[p]=o,v._cacheIndex=f,u[f]=v}},{key:"_lendControlInterpolant",value:function(){var o=this._controlInterpolants,u=this._nActiveControlInterpolants++,f=o[u];return void 0===f&&((f=new Ok(new Float32Array(2),new Float32Array(2),1,Iq)).__cacheIndex=u,o[u]=f),f}},{key:"_takeBackControlInterpolant",value:function(o){var u=this._controlInterpolants,f=o.__cacheIndex,p=--this._nActiveControlInterpolants,v=u[p];o.__cacheIndex=p,u[p]=o,v.__cacheIndex=f,u[f]=v}},{key:"clipAction",value:function(o,u,f){var p=u||this._root,v=p.uuid,g="string"==typeof o?kA.findByName(p,o):o,y=null!==g?g.uuid:o,_=this._actionsByClip[y],C=null;if(void 0===f&&(f=null!==g?g.blendMode:2500),void 0!==_){var w=_.actionByRoot[v];if(void 0!==w&&w.blendMode===f)return w;C=_.knownActions[0],null===g&&(g=C._clip)}if(null===g)return null;var x=new Pq(this,g,u,f);return this._bindAction(x,C),this._addInactiveAction(x,y,v),x}},{key:"existingAction",value:function(o,u){var f=u||this._root,p=f.uuid,v="string"==typeof o?kA.findByName(f,o):o,y=this._actionsByClip[v?v.uuid:o];return void 0!==y&&y.actionByRoot[p]||null}},{key:"stopAllAction",value:function(){for(var o=this._actions,f=this._nActiveActions-1;f>=0;--f)o[f].stop();return this}},{key:"update",value:function(o){for(var u=this._actions,f=this._nActiveActions,p=this.time+=o*=this.timeScale,v=Math.sign(o),g=this._accuIndex^=1,y=0;y!==f;++y)u[y]._update(p,o,v,g);for(var C=this._bindings,w=this._nActiveBindings,x=0;x!==w;++x)C[x].apply(g);return this}},{key:"setTime",value:function(o){this.time=0;for(var u=0;u<this._actions.length;u++)this._actions[u].time=0;return this.update(o)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(o){var u=this._actions,f=o.uuid,p=this._actionsByClip,v=p[f];if(void 0!==v){for(var g=v.knownActions,y=0,_=g.length;y!==_;++y){var C=g[y];this._deactivateAction(C);var w=C._cacheIndex,x=u[u.length-1];C._cacheIndex=null,C._byClipCacheIndex=null,x._cacheIndex=w,u[w]=x,u.pop(),this._removeInactiveBindingsForAction(C)}delete p[f]}}},{key:"uncacheRoot",value:function(o){var u=o.uuid,f=this._actionsByClip;for(var p in f){var g=f[p].actionByRoot[u];void 0!==g&&(this._deactivateAction(g),this._removeInactiveAction(g))}var _=this._bindingsByRootAndName[u];if(void 0!==_)for(var C in _){var w=_[C];w.restoreOriginalState(),this._removeInactiveBinding(w)}}},{key:"uncacheAction",value:function(o,u){var f=this.existingAction(o,u);null!==f&&(this._deactivateAction(f),this._removeInactiveAction(f))}}]),e}(fl),Lq=function(){function n(a,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;N(this,n),this.ray=new WS(a,e),this.near=r,this.far=o,this.camera=null,this.layers=new QD,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return j(n,[{key:"set",value:function(e,r){this.ray.set(e,r)}},{key:"setFromCamera",value:function(e,r){r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type: "+r.type)}},{key:"intersectObject",value:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return WA(e,this,o,r),o.sort(Bk),o}},{key:"intersectObjects",value:function(e){for(var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=0,f=e.length;u<f;u++)WA(e[u],this,o,r);return o.sort(Bk),o}}]),n}();function Bk(n,a){return n.distance-a.distance}function WA(n,a,e,r){if(n.layers.test(a.layers)&&n.raycast(a,e),!0===r)for(var o=n.children,u=0,f=o.length;u<f;u++)WA(o[u],a,e,!0)}var Hk=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return N(this,n),this.radius=a,this.phi=e,this.theta=r,this}return j(n,[{key:"set",value:function(e,r,o){return this.radius=e,this.phi=r,this.theta=o,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,r,o){return this.radius=Math.sqrt(e*e+r*r+o*o),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,o),this.phi=Math.acos(pi(r/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(),kq=function(n){ve(e,n);var a=ge(e);function e(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;N(this,e);var u=[0,0,0,o,0,0,0,0,0,0,o,0,0,0,0,0,0,o],f=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],p=new Pr;p.setAttribute("position",new dn(u,3)),p.setAttribute("color",new dn(f,3));var v=new cv({vertexColors:!0,toneMapped:!1});return(r=a.call(this,p,v)).type="AxesHelper",r}return j(e,[{key:"setColors",value:function(o,u,f){var p=new Ht,v=this.geometry.attributes.color.array;return p.set(o),p.toArray(v,0),p.toArray(v,3),p.set(u),p.toArray(v,6),p.toArray(v,9),p.set(f),p.toArray(v,12),p.toArray(v,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),e}(ab);"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:TD}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=TD);var Hc=function(n){ve(e,n);var a=ge(e);function e(r){var o;return N(this,e),(o=a.call(this,r)).dracoLoader=null,o.ktx2Loader=null,o.meshoptDecoder=null,o.pluginCallbacks=[],o.register(function(u){return new zq(u)}),o.register(function(u){return new Jq(u)}),o.register(function(u){return new Zq(u)}),o.register(function(u){return new qq(u)}),o.register(function(u){return new Kq(u)}),o.register(function(u){return new Yq(u)}),o.register(function(u){return new $q(u)}),o.register(function(u){return new Uq(u)}),o.register(function(u){return new Xq(u)}),o.register(function(u){return new jq(u)}),o.register(function(u){return new Vq(u)}),o.register(function(u){return new Qq(u)}),o.register(function(u){return new eK(u)}),o}return j(e,[{key:"load",value:function(o,u,f,p){var g,v=this;g=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Mf.extractUrlBase(o),this.manager.itemStart(o);var y=function(w){p?p(w):console.error(w),v.manager.itemError(o),v.manager.itemEnd(o)},_=new Lk(this.manager);_.setPath(this.path),_.setResponseType("arraybuffer"),_.setRequestHeader(this.requestHeader),_.setWithCredentials(this.withCredentials),_.load(o,function(C){try{v.parse(C,g,function(w){u(w),v.manager.itemEnd(o)},y)}catch(w){y(w)}},f,y)}},{key:"setDRACOLoader",value:function(o){return this.dracoLoader=o,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(o){return this.ktx2Loader=o,this}},{key:"setMeshoptDecoder",value:function(o){return this.meshoptDecoder=o,this}},{key:"register",value:function(o){return-1===this.pluginCallbacks.indexOf(o)&&this.pluginCallbacks.push(o),this}},{key:"unregister",value:function(o){return-1!==this.pluginCallbacks.indexOf(o)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(o),1),this}},{key:"parse",value:function(o,u,f,p){var v,g={},y={};if("string"==typeof o)v=JSON.parse(o);else if(o instanceof ArrayBuffer)if(Mf.decodeText(new Uint8Array(o,0,4))===Vk){try{g[tr.KHR_BINARY_GLTF]=new tK(o)}catch(A){return void(p&&p(A))}v=JSON.parse(g[tr.KHR_BINARY_GLTF].content)}else v=JSON.parse(Mf.decodeText(new Uint8Array(o)));else v=o;if(void 0===v.asset||v.asset.version[0]<2)p&&p(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var C=new hK(v,{path:u||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});C.fileLoader.setRequestHeader(this.requestHeader);for(var w=0;w<this.pluginCallbacks.length;w++){var x=this.pluginCallbacks[w](C);y[x.name]=x,g[x.name]=!0}if(v.extensionsUsed)for(var E=0;E<v.extensionsUsed.length;++E){var b=v.extensionsUsed[E],T=v.extensionsRequired||[];switch(b){case tr.KHR_MATERIALS_UNLIT:g[b]=new Wq;break;case tr.KHR_DRACO_MESH_COMPRESSION:g[b]=new nK(v,this.dracoLoader);break;case tr.KHR_TEXTURE_TRANSFORM:g[b]=new rK;break;case tr.KHR_MESH_QUANTIZATION:g[b]=new iK;break;default:T.indexOf(b)>=0&&void 0===y[b]&&console.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}C.setExtensions(g),C.setPlugins(y),C.parse(f,p)}}},{key:"parseAsync",value:function(o,u){var f=this;return new Promise(function(p,v){f.parse(o,u,p,v)})}}]),e}(Yy);function Hq(){var n={};return{get:function(e){return n[e]},add:function(e,r){n[e]=r},remove:function(e){delete n[e]},removeAll:function(){n={}}}}var tr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},Vq=function(){function n(a){N(this,n),this.parser=a,this.name=tr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return j(n,[{key:"_markDefs",value:function(){for(var e=this.parser,r=this.parser.json.nodes||[],o=0,u=r.length;o<u;o++){var f=r[o];f.extensions&&f.extensions[this.name]&&void 0!==f.extensions[this.name].light&&e._addNodeRef(this.cache,f.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var r=this.parser,o="light:"+e,u=r.cache.get(o);if(u)return u;var y,f=r.json,g=((f.extensions&&f.extensions[this.name]||{}).lights||[])[e],_=new Ht(16777215);void 0!==g.color&&_.fromArray(g.color);var C=void 0!==g.range?g.range:0;switch(g.type){case"directional":(y=new Mu(_)).target.position.set(0,0,-1),y.add(y.target);break;case"point":(y=new _q(_)).distance=C;break;case"spot":(y=new mq(_)).distance=C,g.spot=g.spot||{},g.spot.innerConeAngle=void 0!==g.spot.innerConeAngle?g.spot.innerConeAngle:0,g.spot.outerConeAngle=void 0!==g.spot.outerConeAngle?g.spot.outerConeAngle:Math.PI/4,y.angle=g.spot.outerConeAngle,y.penumbra=1-g.spot.innerConeAngle/g.spot.outerConeAngle,y.target.position.set(0,0,-1),y.add(y.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+g.type)}return y.position.set(0,0,0),y.decay=2,Wc(y,g),void 0!==g.intensity&&(y.intensity=g.intensity),y.name=r.createUniqueName(g.name||"light_"+e),u=Promise.resolve(y),r.cache.add(o,u),u}},{key:"getDependency",value:function(e,r){if("light"===e)return this._loadLight(r)}},{key:"createNodeAttachment",value:function(e){var r=this,o=this.parser,f=o.json.nodes[e],v=(f.extensions&&f.extensions[this.name]||{}).light;return void 0===v?null:this._loadLight(v).then(function(g){return o._getNodeRef(r.cache,v,g)})}}]),n}(),Wq=function(){function n(){N(this,n),this.name=tr.KHR_MATERIALS_UNLIT}return j(n,[{key:"getMaterialType",value:function(){return xa}},{key:"extendParams",value:function(e,r,o){var u=[];e.color=new Ht(1,1,1),e.opacity=1;var f=r.pbrMetallicRoughness;if(f){if(Array.isArray(f.baseColorFactor)){var p=f.baseColorFactor;e.color.fromArray(p),e.opacity=p[3]}void 0!==f.baseColorTexture&&u.push(o.assignTexture(e,"map",f.baseColorTexture,Vn))}return Promise.all(u)}}]),n}(),Uq=function(){function n(a){N(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_EMISSIVE_STRENGTH}return j(n,[{key:"extendMaterialParams",value:function(e,r){var u=this.parser.json.materials[e];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=u.extensions[this.name].emissiveStrength;return void 0!==f&&(r.emissiveIntensity=f),Promise.resolve()}}]),n}(),zq=function(){function n(a){N(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_CLEARCOAT}return j(n,[{key:"getMaterialType",value:function(e){var o=this.parser.json.materials[e];return o.extensions&&o.extensions[this.name]?Tf:null}},{key:"extendMaterialParams",value:function(e,r){var o=this.parser,u=o.json.materials[e];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],p=u.extensions[this.name];if(void 0!==p.clearcoatFactor&&(r.clearcoat=p.clearcoatFactor),void 0!==p.clearcoatTexture&&f.push(o.assignTexture(r,"clearcoatMap",p.clearcoatTexture)),void 0!==p.clearcoatRoughnessFactor&&(r.clearcoatRoughness=p.clearcoatRoughnessFactor),void 0!==p.clearcoatRoughnessTexture&&f.push(o.assignTexture(r,"clearcoatRoughnessMap",p.clearcoatRoughnessTexture)),void 0!==p.clearcoatNormalTexture&&(f.push(o.assignTexture(r,"clearcoatNormalMap",p.clearcoatNormalTexture)),void 0!==p.clearcoatNormalTexture.scale)){var v=p.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new $e(v,v)}return Promise.all(f)}}]),n}(),jq=function(){function n(a){N(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_IRIDESCENCE}return j(n,[{key:"getMaterialType",value:function(e){var o=this.parser.json.materials[e];return o.extensions&&o.extensions[this.name]?Tf:null}},{key:"extendMaterialParams",value:function(e,r){var o=this.parser,u=o.json.materials[e];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],p=u.extensions[this.name];return void 0!==p.iridescenceFactor&&(r.iridescence=p.iridescenceFactor),void 0!==p.iridescenceTexture&&f.push(o.assignTexture(r,"iridescenceMap",p.iridescenceTexture)),void 0!==p.iridescenceIor&&(r.iridescenceIOR=p.iridescenceIor),void 0===r.iridescenceThicknessRange&&(r.iridescenceThicknessRange=[100,400]),void 0!==p.iridescenceThicknessMinimum&&(r.iridescenceThicknessRange[0]=p.iridescenceThicknessMinimum),void 0!==p.iridescenceThicknessMaximum&&(r.iridescenceThicknessRange[1]=p.iridescenceThicknessMaximum),void 0!==p.iridescenceThicknessTexture&&f.push(o.assignTexture(r,"iridescenceThicknessMap",p.iridescenceThicknessTexture)),Promise.all(f)}}]),n}(),qq=function(){function n(a){N(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_SHEEN}return j(n,[{key:"getMaterialType",value:function(e){var o=this.parser.json.materials[e];return o.extensions&&o.extensions[this.name]?Tf:null}},{key:"extendMaterialParams",value:function(e,r){var o=this.parser,u=o.json.materials[e];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[];r.sheenColor=new Ht(0,0,0),r.sheenRoughness=0,r.sheen=1;var p=u.extensions[this.name];return void 0!==p.sheenColorFactor&&r.sheenColor.fromArray(p.sheenColorFactor),void 0!==p.sheenRoughnessFactor&&(r.sheenRoughness=p.sheenRoughnessFactor),void 0!==p.sheenColorTexture&&f.push(o.assignTexture(r,"sheenColorMap",p.sheenColorTexture,Vn)),void 0!==p.sheenRoughnessTexture&&f.push(o.assignTexture(r,"sheenRoughnessMap",p.sheenRoughnessTexture)),Promise.all(f)}}]),n}(),Kq=function(){function n(a){N(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_TRANSMISSION}return j(n,[{key:"getMaterialType",value:function(e){var o=this.parser.json.materials[e];return o.extensions&&o.extensions[this.name]?Tf:null}},{key:"extendMaterialParams",value:function(e,r){var o=this.parser,u=o.json.materials[e];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],p=u.extensions[this.name];return void 0!==p.transmissionFactor&&(r.transmission=p.transmissionFactor),void 0!==p.transmissionTexture&&f.push(o.assignTexture(r,"transmissionMap",p.transmissionTexture)),Promise.all(f)}}]),n}(),Yq=function(){function n(a){N(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_VOLUME}return j(n,[{key:"getMaterialType",value:function(e){var o=this.parser.json.materials[e];return o.extensions&&o.extensions[this.name]?Tf:null}},{key:"extendMaterialParams",value:function(e,r){var o=this.parser,u=o.json.materials[e];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],p=u.extensions[this.name];r.thickness=void 0!==p.thicknessFactor?p.thicknessFactor:0,void 0!==p.thicknessTexture&&f.push(o.assignTexture(r,"thicknessMap",p.thicknessTexture)),r.attenuationDistance=p.attenuationDistance||1/0;var v=p.attenuationColor||[1,1,1];return r.attenuationColor=new Ht(v[0],v[1],v[2]),Promise.all(f)}}]),n}(),$q=function(){function n(a){N(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_IOR}return j(n,[{key:"getMaterialType",value:function(e){var o=this.parser.json.materials[e];return o.extensions&&o.extensions[this.name]?Tf:null}},{key:"extendMaterialParams",value:function(e,r){var u=this.parser.json.materials[e];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=u.extensions[this.name];return r.ior=void 0!==f.ior?f.ior:1.5,Promise.resolve()}}]),n}(),Xq=function(){function n(a){N(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_SPECULAR}return j(n,[{key:"getMaterialType",value:function(e){var o=this.parser.json.materials[e];return o.extensions&&o.extensions[this.name]?Tf:null}},{key:"extendMaterialParams",value:function(e,r){var o=this.parser,u=o.json.materials[e];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],p=u.extensions[this.name];r.specularIntensity=void 0!==p.specularFactor?p.specularFactor:1,void 0!==p.specularTexture&&f.push(o.assignTexture(r,"specularIntensityMap",p.specularTexture));var v=p.specularColorFactor||[1,1,1];return r.specularColor=new Ht(v[0],v[1],v[2]),void 0!==p.specularColorTexture&&f.push(o.assignTexture(r,"specularColorMap",p.specularColorTexture,Vn)),Promise.all(f)}}]),n}(),Jq=function(){function n(a){N(this,n),this.parser=a,this.name=tr.KHR_TEXTURE_BASISU}return j(n,[{key:"loadTexture",value:function(e){var r=this.parser,o=r.json,u=o.textures[e];if(!u.extensions||!u.extensions[this.name])return null;var f=u.extensions[this.name],p=r.options.ktx2Loader;if(!p){if(o.extensionsRequired&&o.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(e,f.source,p)}}]),n}(),Zq=function(){function n(a){N(this,n),this.parser=a,this.name=tr.EXT_TEXTURE_WEBP,this.isSupported=null}return j(n,[{key:"loadTexture",value:function(e){var r=this.name,o=this.parser,u=o.json,f=u.textures[e];if(!f.extensions||!f.extensions[r])return null;var p=f.extensions[r],v=u.images[p.source],g=o.textureLoader;if(v.uri){var y=o.options.manager.getHandler(v.uri);null!==y&&(g=y)}return this.detectSupport().then(function(_){if(_)return o.loadTextureImage(e,p.source,g);if(u.extensionsRequired&&u.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return o.loadTexture(e)})}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise(function(e){var r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){e(1===r.height)}})),this.isSupported}}]),n}(),Qq=function(){function n(a){N(this,n),this.name=tr.EXT_MESHOPT_COMPRESSION,this.parser=a}return j(n,[{key:"loadBufferView",value:function(e){var r=this.parser.json,o=r.bufferViews[e];if(o.extensions&&o.extensions[this.name]){var u=o.extensions[this.name],f=this.parser.getDependency("buffer",u.buffer),p=this.parser.options.meshoptDecoder;if(!p||!p.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return f.then(function(v){var _=u.count,C=u.byteStride,w=new Uint8Array(v,u.byteOffset||0,u.byteLength||0);return p.decodeGltfBufferAsync?p.decodeGltfBufferAsync(_,C,w,u.mode,u.filter).then(function(x){return x.buffer}):p.ready.then(function(){var x=new ArrayBuffer(_*C);return p.decodeGltfBuffer(new Uint8Array(x),_,C,w,u.mode,u.filter),x})})}return null}}]),n}(),eK=function(){function n(a){N(this,n),this.name=tr.EXT_MESH_GPU_INSTANCING,this.parser=a}return j(n,[{key:"createNodeMesh",value:function(e){var r=this,o=this.parser.json,u=o.nodes[e];if(!u.extensions||!u.extensions[this.name]||void 0===u.mesh)return null;var v,p=Pt(o.meshes[u.mesh].primitives);try{for(p.s();!(v=p.n()).done;){var g=v.value;if(g.mode!==ss.TRIANGLES&&g.mode!==ss.TRIANGLE_STRIP&&g.mode!==ss.TRIANGLE_FAN&&void 0!==g.mode)return null}}catch(b){p.e(b)}finally{p.f()}var _=u.extensions[this.name].attributes,C=[],w={},x=function(T){C.push(r.parser.getDependency("accessor",_[T]).then(function(A){return w[T]=A,w[T]}))};for(var E in _)x(E);return C.length<1?null:(C.push(this.parser.createNodeMesh(e)),Promise.all(C).then(function(b){var B,T=b.pop(),M=b[0].count,O=[],I=Pt(T.isGroup?T.children:[T]);try{for(I.s();!(B=I.n()).done;){for(var z=B.value,P=new En,W=new Z,X=new ro,re=new Z(1,1,1),de=new c7(z.geometry,z.material,M),ce=0;ce<M;ce++)w.TRANSLATION&&W.fromBufferAttribute(w.TRANSLATION,ce),w.ROTATION&&X.fromBufferAttribute(w.ROTATION,ce),w.SCALE&&re.fromBufferAttribute(w.SCALE,ce),de.setMatrixAt(ce,P.compose(W,X,re));for(var G in w)"TRANSLATION"!==G&&"ROTATION"!==G&&"SCALE"!==G&&z.geometry.setAttribute(G,w[G]);Co.prototype.copy.call(de,z),de.frustumCulled=!1,r.parser.assignFinalMaterial(de),O.push(de)}}catch(te){I.e(te)}finally{I.f()}return T.isGroup?(T.clear(),T.add.apply(T,O),T):O[0]}))}}]),n}(),Vk="glTF",tK=function n(a){N(this,n),this.name=tr.KHR_BINARY_GLTF,this.content=null,this.body=null;var e=new DataView(a,0,12);if(this.header={magic:Mf.decodeText(new Uint8Array(a.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==Vk)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,o=new DataView(a,12),u=0;u<r;){var f=o.getUint32(u,!0),p=o.getUint32(u+=4,!0);if(u+=4,1313821514===p){var v=new Uint8Array(a,12+u,f);this.content=Mf.decodeText(v)}else if(5130562===p){var g=12+u;this.body=a.slice(g,g+f)}u+=f}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")},nK=function(){function n(a,e){if(N(this,n),!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=tr.KHR_DRACO_MESH_COMPRESSION,this.json=a,this.dracoLoader=e,this.dracoLoader.preload()}return j(n,[{key:"decodePrimitive",value:function(e,r){var o=this.json,u=this.dracoLoader,f=e.extensions[this.name].bufferView,p=e.extensions[this.name].attributes,v={},g={},y={};for(var _ in p){var C=zA[_]||_.toLowerCase();v[C]=p[_]}for(var w in e.attributes){var x=zA[w]||w.toLowerCase();if(void 0!==p[w]){var E=o.accessors[e.attributes[w]];y[x]=yv[E.componentType].name,g[x]=!0===E.normalized}}return r.getDependency("bufferView",f).then(function(T){return new Promise(function(A){u.decodeDracoFile(T,function(M){for(var O in M.attributes){var B=g[O];void 0!==B&&(M.attributes[O].normalized=B)}A(M)},v,y)})})}}]),n}(),rK=function(){function n(){N(this,n),this.name=tr.KHR_TEXTURE_TRANSFORM}return j(n,[{key:"extendTexture",value:function(e,r){return void 0!==r.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===r.offset&&void 0===r.rotation&&void 0===r.scale||(e=e.clone(),void 0!==r.offset&&e.offset.fromArray(r.offset),void 0!==r.rotation&&(e.rotation=r.rotation),void 0!==r.scale&&e.repeat.fromArray(r.scale),e.needsUpdate=!0),e}}]),n}(),iK=function n(){N(this,n),this.name=tr.KHR_MESH_QUANTIZATION},Uk=function(n){ve(e,n);var a=ge(e);function e(r,o,u,f){return N(this,e),a.call(this,r,o,u,f)}return j(e,[{key:"copySampleValue_",value:function(o){for(var u=this.resultBuffer,f=this.sampleValues,p=this.valueSize,v=o*p*3+p,g=0;g!==p;g++)u[g]=f[v+g];return u}},{key:"interpolate_",value:function(o,u,f,p){for(var v=this.resultBuffer,g=this.sampleValues,y=this.valueSize,_=2*y,C=3*y,w=p-u,x=(f-u)/w,E=x*x,b=E*x,T=o*C,A=T-C,M=-2*b+3*E,O=b-E,I=1-M,B=O-E+x,z=0;z!==y;z++)v[z]=I*g[A+z+y]+B*(g[A+z+_]*w)+M*g[T+z+y]+O*(g[T+z]*w);return v}}]),e}(jy),oK=new ro,aK=function(n){ve(e,n);var a=ge(e);function e(){return N(this,e),a.apply(this,arguments)}return j(e,[{key:"interpolate_",value:function(o,u,f,p){var v=we(ze(e.prototype),"interpolate_",this).call(this,o,u,f,p);return oK.fromArray(v).normalize().toArray(v),v}}]),e}(Uk),ss={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},yv={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},zk={9728:Mi,9729:ko,9984:1004,9985:1007,9986:1005,9987:Ic},jk={33071:ba,33648:1002,10497:ff},UA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},zA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Vc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},sK={CUBICSPLINE:void 0,LINEAR:Vh,STEP:Sy};function uK(n){return void 0===n.DefaultMaterial&&(n.DefaultMaterial=new PA({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial}function Zy(n,a,e){for(var r in e.extensions)void 0===n[r]&&(a.userData.gltfExtensions=a.userData.gltfExtensions||{},a.userData.gltfExtensions[r]=e.extensions[r])}function Wc(n,a){void 0!==a.extras&&("object"==typeof a.extras?Object.assign(n.userData,a.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+a.extras))}function cK(n,a){if(n.updateMorphTargets(),void 0!==a.weights)for(var e=0,r=a.weights.length;e<r;e++)n.morphTargetInfluences[e]=a.weights[e];if(a.extras&&Array.isArray(a.extras.targetNames)){var o=a.extras.targetNames;if(n.morphTargetInfluences.length===o.length){n.morphTargetDictionary={};for(var u=0,f=o.length;u<f;u++)n.morphTargetDictionary[o[u]]=u}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function dK(n){var a=n.extensions&&n.extensions[tr.KHR_DRACO_MESH_COMPRESSION];return a?"draco:"+a.bufferView+":"+a.indices+":"+qk(a.attributes):n.indices+":"+qk(n.attributes)+":"+n.mode}function qk(n){for(var a="",e=Object.keys(n).sort(),r=0,o=e.length;r<o;r++)a+=e[r]+":"+n[e[r]]+";";return a}function qA(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var pK=new En,hK=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};N(this,n),this.json=a,this.extensions={},this.plugins={},this.options=e,this.cache=new Hq,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var r=!1,o=!1,u=-1;"undefined"!=typeof navigator&&(r=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),u=(o=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader="undefined"==typeof createImageBitmap||r||o&&u<98?new vq(this.options.manager):new wq(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Lk(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return j(n,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,r){var o=this,u=this.json,f=this.extensions;this.cache.removeAll(),this._invokeAll(function(p){return p._markDefs&&p._markDefs()}),Promise.all(this._invokeAll(function(p){return p.beforeRoot&&p.beforeRoot()})).then(function(){return Promise.all([o.getDependencies("scene"),o.getDependencies("animation"),o.getDependencies("camera")])}).then(function(p){var v={scene:p[0][u.scene||0],scenes:p[0],animations:p[1],cameras:p[2],asset:u.asset,parser:o,userData:{}};Zy(f,v,u),Wc(v,u),Promise.all(o._invokeAll(function(g){return g.afterRoot&&g.afterRoot(v)})).then(function(){e(v)})}).catch(r)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],r=this.json.skins||[],o=this.json.meshes||[],u=0,f=r.length;u<f;u++)for(var p=r[u].joints,v=0,g=p.length;v<g;v++)e[p[v]].isBone=!0;for(var y=0,_=e.length;y<_;y++){var C=e[y];void 0!==C.mesh&&(this._addNodeRef(this.meshCache,C.mesh),void 0!==C.skin&&(o[C.mesh].isSkinnedMesh=!0)),void 0!==C.camera&&this._addNodeRef(this.cameraCache,C.camera)}}},{key:"_addNodeRef",value:function(e,r){void 0!==r&&(void 0===e.refs[r]&&(e.refs[r]=e.uses[r]=0),e.refs[r]++)}},{key:"_getNodeRef",value:function(e,r,o){var u=this;if(e.refs[r]<=1)return o;var f=o.clone();return function v(g,y){var _=u.associations.get(g);null!=_&&u.associations.set(y,_);var w,C=Pt(g.children.entries());try{for(C.s();!(w=C.n()).done;){var x=pr(w.value,2);v(x[1],y.children[x[0]])}}catch(T){C.e(T)}finally{C.f()}}(o,f),f.name+="_instance_"+e.uses[r]++,f}},{key:"_invokeOne",value:function(e){var r=Object.values(this.plugins);r.push(this);for(var o=0;o<r.length;o++){var u=e(r[o]);if(u)return u}return null}},{key:"_invokeAll",value:function(e){var r=Object.values(this.plugins);r.unshift(this);for(var o=[],u=0;u<r.length;u++){var f=e(r[u]);f&&o.push(f)}return o}},{key:"getDependency",value:function(e,r){var o=e+":"+r,u=this.cache.get(o);if(!u){switch(e){case"scene":u=this.loadScene(r);break;case"node":u=this._invokeOne(function(f){return f.loadNode&&f.loadNode(r)});break;case"mesh":u=this._invokeOne(function(f){return f.loadMesh&&f.loadMesh(r)});break;case"accessor":u=this.loadAccessor(r);break;case"bufferView":u=this._invokeOne(function(f){return f.loadBufferView&&f.loadBufferView(r)});break;case"buffer":u=this.loadBuffer(r);break;case"material":u=this._invokeOne(function(f){return f.loadMaterial&&f.loadMaterial(r)});break;case"texture":u=this._invokeOne(function(f){return f.loadTexture&&f.loadTexture(r)});break;case"skin":u=this.loadSkin(r);break;case"animation":u=this._invokeOne(function(f){return f.loadAnimation&&f.loadAnimation(r)});break;case"camera":u=this.loadCamera(r);break;default:if(!(u=this._invokeOne(function(f){return f!=this&&f.getDependency&&f.getDependency(e,r)})))throw new Error("Unknown type: "+e)}this.cache.add(o,u)}return u}},{key:"getDependencies",value:function(e){var r=this.cache.get(e);if(!r){var o=this;r=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(f,p){return o.getDependency(e,p)})),this.cache.add(e,r)}return r}},{key:"loadBuffer",value:function(e){var r=this.json.buffers[e],o=this.fileLoader;if(r.type&&"arraybuffer"!==r.type)throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(void 0===r.uri&&0===e)return Promise.resolve(this.extensions[tr.KHR_BINARY_GLTF].body);var u=this.options;return new Promise(function(f,p){o.load(Mf.resolveURL(r.uri,u.path),f,void 0,function(){p(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}},{key:"loadBufferView",value:function(e){var r=this.json.bufferViews[e];return this.getDependency("buffer",r.buffer).then(function(o){var f=r.byteOffset||0;return o.slice(f,f+(r.byteLength||0))})}},{key:"loadAccessor",value:function(e){var r=this,o=this.json,u=this.json.accessors[e];if(void 0===u.bufferView&&void 0===u.sparse){var f=UA[u.type],v=!0===u.normalized,g=new(0,yv[u.componentType])(u.count*f);return Promise.resolve(new io(g,f,v))}var y=[];return y.push(void 0!==u.bufferView?this.getDependency("bufferView",u.bufferView):null),void 0!==u.sparse&&(y.push(this.getDependency("bufferView",u.sparse.indices.bufferView)),y.push(this.getDependency("bufferView",u.sparse.values.bufferView))),Promise.all(y).then(function(_){var O,I,C=_[0],w=UA[u.type],x=yv[u.componentType],E=x.BYTES_PER_ELEMENT,T=u.byteOffset||0,A=void 0!==u.bufferView?o.bufferViews[u.bufferView].byteStride:void 0,M=!0===u.normalized;if(A&&A!==E*w){var B=Math.floor(T/A),z="InterleavedBuffer:"+u.bufferView+":"+u.componentType+":"+B+":"+u.count,P=r.cache.get(z);P||(O=new x(C,B*A,u.count*A/E),P=new t7(O,A/E),r.cache.add(z,P)),I=new n7(P,w,T%A/E,M)}else O=null===C?new x(u.count*w):new x(C,T,u.count*w),I=new io(O,w,M);if(void 0!==u.sparse){var de=u.sparse.values.byteOffset||0,ce=new(0,yv[u.sparse.indices.componentType])(_[1],u.sparse.indices.byteOffset||0,u.sparse.count*UA.SCALAR),G=new x(_[2],de,u.sparse.count*w);null!==C&&(I=new io(I.array.slice(),I.itemSize,I.normalized));for(var te=0,se=ce.length;te<se;te++){var le=ce[te];if(I.setX(le,G[te*w]),w>=2&&I.setY(le,G[te*w+1]),w>=3&&I.setZ(le,G[te*w+2]),w>=4&&I.setW(le,G[te*w+3]),w>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return I})}},{key:"loadTexture",value:function(e){var r=this.json,f=r.textures[e].source,p=r.images[f],v=this.textureLoader;if(p.uri){var g=this.options.manager.getHandler(p.uri);null!==g&&(v=g)}return this.loadTextureImage(e,f,v)}},{key:"loadTextureImage",value:function(e,r,o){var u=this,f=this.json,p=f.textures[e],v=f.images[r],g=(v.uri||v.bufferView)+":"+p.sampler;if(this.textureCache[g])return this.textureCache[g];var y=this.loadImageSource(r,o).then(function(_){_.flipY=!1,_.name=p.name||v.name||"";var w=(f.samplers||{})[p.sampler]||{};return _.magFilter=zk[w.magFilter]||ko,_.minFilter=zk[w.minFilter]||Ic,_.wrapS=jk[w.wrapS]||ff,_.wrapT=jk[w.wrapT]||ff,u.associations.set(_,{textures:e}),_}).catch(function(){return null});return this.textureCache[g]=y,y}},{key:"loadImageSource",value:function(e,r){var u=this.json,f=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(function(C){return C.clone()});var p=u.images[e],v=self.URL||self.webkitURL,g=p.uri||"",y=!1;if(void 0!==p.bufferView)g=this.getDependency("bufferView",p.bufferView).then(function(C){y=!0;var w=new Blob([C],{type:p.mimeType});return g=v.createObjectURL(w)});else if(void 0===p.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var _=Promise.resolve(g).then(function(C){return new Promise(function(w,x){var E=w;!0===r.isImageBitmapLoader&&(E=function(T){var A=new xu(T);A.needsUpdate=!0,w(A)}),r.load(Mf.resolveURL(C,f.path),E,void 0,x)})}).then(function(C){return!0===y&&v.revokeObjectURL(g),C.userData.mimeType=p.mimeType||function(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(p.uri),C}).catch(function(C){throw console.error("THREE.GLTFLoader: Couldn't load texture",g),C});return this.sourceCache[e]=_,_}},{key:"assignTexture",value:function(e,r,o,u){var f=this;return this.getDependency("texture",o.index).then(function(p){if(!p)return null;if(void 0!==o.texCoord&&0!=o.texCoord&&!("aoMap"===r&&1==o.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+o.texCoord+" for texture "+r+" not yet supported."),f.extensions[tr.KHR_TEXTURE_TRANSFORM]){var v=void 0!==o.extensions?o.extensions[tr.KHR_TEXTURE_TRANSFORM]:void 0;if(v){var g=f.associations.get(p);p=f.extensions[tr.KHR_TEXTURE_TRANSFORM].extendTexture(p,v),f.associations.set(p,g)}}return void 0!==u&&(p.encoding=u),e[r]=p,p})}},{key:"assignFinalMaterial",value:function(e){var r=e.geometry,o=e.material,u=void 0===r.attributes.tangent,f=void 0!==r.attributes.color,p=void 0===r.attributes.normal;if(e.isPoints){var v="PointsMaterial:"+o.uuid,g=this.cache.get(v);g||(g=new ck,is.prototype.copy.call(g,o),g.color.copy(o.color),g.map=o.map,g.sizeAttenuation=!1,this.cache.add(v,g)),o=g}else if(e.isLine){var y="LineBasicMaterial:"+o.uuid,_=this.cache.get(y);_||(_=new cv,is.prototype.copy.call(_,o),_.color.copy(o.color),this.cache.add(y,_)),o=_}if(u||f||p){var C="ClonedMaterial:"+o.uuid+":";u&&(C+="derivative-tangents:"),f&&(C+="vertex-colors:"),p&&(C+="flat-shading:");var w=this.cache.get(C);w||(w=o.clone(),f&&(w.vertexColors=!0),p&&(w.flatShading=!0),u&&(w.normalScale&&(w.normalScale.y*=-1),w.clearcoatNormalScale&&(w.clearcoatNormalScale.y*=-1)),this.cache.add(C,w),this.associations.set(w,this.associations.get(o))),o=w}o.aoMap&&void 0===r.attributes.uv2&&void 0!==r.attributes.uv&&r.setAttribute("uv2",r.attributes.uv),e.material=o}},{key:"getMaterialType",value:function(){return PA}},{key:"loadMaterial",value:function(e){var p,r=this,u=this.extensions,f=this.json.materials[e],v={},y=[];if((f.extensions||{})[tr.KHR_MATERIALS_UNLIT]){var _=u[tr.KHR_MATERIALS_UNLIT];p=_.getMaterialType(),y.push(_.extendParams(v,f,r))}else{var C=f.pbrMetallicRoughness||{};if(v.color=new Ht(1,1,1),v.opacity=1,Array.isArray(C.baseColorFactor)){var w=C.baseColorFactor;v.color.fromArray(w),v.opacity=w[3]}void 0!==C.baseColorTexture&&y.push(r.assignTexture(v,"map",C.baseColorTexture,Vn)),v.metalness=void 0!==C.metallicFactor?C.metallicFactor:1,v.roughness=void 0!==C.roughnessFactor?C.roughnessFactor:1,void 0!==C.metallicRoughnessTexture&&(y.push(r.assignTexture(v,"metalnessMap",C.metallicRoughnessTexture)),y.push(r.assignTexture(v,"roughnessMap",C.metallicRoughnessTexture))),p=this._invokeOne(function(b){return b.getMaterialType&&b.getMaterialType(e)}),y.push(Promise.all(this._invokeAll(function(b){return b.extendMaterialParams&&b.extendMaterialParams(e,v)})))}!0===f.doubleSided&&(v.side=2);var x=f.alphaMode||"OPAQUE";if("BLEND"===x?(v.transparent=!0,v.depthWrite=!1):(v.transparent=!1,"MASK"===x&&(v.alphaTest=void 0!==f.alphaCutoff?f.alphaCutoff:.5)),void 0!==f.normalTexture&&p!==xa&&(y.push(r.assignTexture(v,"normalMap",f.normalTexture)),v.normalScale=new $e(1,1),void 0!==f.normalTexture.scale)){var E=f.normalTexture.scale;v.normalScale.set(E,E)}return void 0!==f.occlusionTexture&&p!==xa&&(y.push(r.assignTexture(v,"aoMap",f.occlusionTexture)),void 0!==f.occlusionTexture.strength&&(v.aoMapIntensity=f.occlusionTexture.strength)),void 0!==f.emissiveFactor&&p!==xa&&(v.emissive=(new Ht).fromArray(f.emissiveFactor)),void 0!==f.emissiveTexture&&p!==xa&&y.push(r.assignTexture(v,"emissiveMap",f.emissiveTexture,Vn)),Promise.all(y).then(function(){var b=new p(v);return f.name&&(b.name=f.name),Wc(b,f),r.associations.set(b,{materials:e}),f.extensions&&Zy(u,b,f),b})}},{key:"createUniqueName",value:function(e){for(var r=Gr.sanitizeNodeName(e||""),o=r,u=1;this.nodeNamesUsed[o];++u)o=r+"_"+u;return this.nodeNamesUsed[o]=!0,o}},{key:"loadGeometries",value:function(e){var r=this,o=this.extensions,u=this.primitiveCache;function f(x){return o[tr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(x,r).then(function(E){return Kk(E,x,r)})}for(var p=[],v=0,g=e.length;v<g;v++){var y=e[v],_=dK(y),C=u[_];if(C)p.push(C.promise);else{var w;w=y.extensions&&y.extensions[tr.KHR_DRACO_MESH_COMPRESSION]?f(y):Kk(new Pr,y,r),u[_]={primitive:y,promise:w},p.push(w)}}return Promise.all(p)}},{key:"loadMesh",value:function(e){for(var r=this,u=this.extensions,f=this.json.meshes[e],p=f.primitives,v=[],g=0,y=p.length;g<y;g++){var _=void 0===p[g].material?uK(this.cache):this.getDependency("material",p[g].material);v.push(_)}return v.push(r.loadGeometries(p)),Promise.all(v).then(function(C){for(var w=C.slice(0,C.length-1),x=C[C.length-1],E=[],b=0,T=x.length;b<T;b++){var A=x[b],M=p[b],O=void 0,I=w[b];if(M.mode===ss.TRIANGLES||M.mode===ss.TRIANGLE_STRIP||M.mode===ss.TRIANGLE_FAN||void 0===M.mode)!0===(O=!0===f.isSkinnedMesh?new o7(A,I):new mr(A,I)).isSkinnedMesh&&!O.geometry.attributes.skinWeight.normalized&&O.normalizeSkinWeights(),M.mode===ss.TRIANGLE_STRIP?O.geometry=Yk(O.geometry,1):M.mode===ss.TRIANGLE_FAN&&(O.geometry=Yk(O.geometry,2));else if(M.mode===ss.LINES)O=new ab(A,I);else if(M.mode===ss.LINE_STRIP)O=new Gy(A,I);else if(M.mode===ss.LINE_LOOP)O=new d7(A,I);else{if(M.mode!==ss.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);O=new f7(A,I)}Object.keys(O.geometry.morphAttributes).length>0&&cK(O,f),O.name=r.createUniqueName(f.name||"mesh_"+e),Wc(O,f),M.extensions&&Zy(u,O,M),r.assignFinalMaterial(O),E.push(O)}for(var B=0,z=E.length;B<z;B++)r.associations.set(E[B],{meshes:e,primitives:B});if(1===E.length)return E[0];var P=new Bc;r.associations.set(P,{meshes:e});for(var W=0,X=E.length;W<X;W++)P.add(E[W]);return P})}},{key:"loadCamera",value:function(e){var r,o=this.json.cameras[e],u=o[o.type];if(u)return"perspective"===o.type?r=new kr(e4.radToDeg(u.yfov),u.aspectRatio||1,u.znear||1,u.zfar||2e6):"orthographic"===o.type&&(r=new fA(-u.xmag,u.xmag,u.ymag,-u.ymag,u.znear,u.zfar)),o.name&&(r.name=this.createUniqueName(o.name)),Wc(r,o),Promise.resolve(r);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){for(var r=this.json.skins[e],o=[],u=0,f=r.joints.length;u<f;u++)o.push(this.getDependency("node",r.joints[u]));return o.push(void 0!==r.inverseBindMatrices?this.getDependency("accessor",r.inverseBindMatrices):null),Promise.all(o).then(function(p){for(var v=p.pop(),g=p,y=[],_=[],C=0,w=g.length;C<w;C++){var x=g[C];if(x){y.push(x);var E=new En;null!==v&&E.fromArray(v.array,16*C),_.push(E)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[C])}return new u7(y,_)})}},{key:"loadAnimation",value:function(e){for(var o=this.json.animations[e],u=[],f=[],p=[],v=[],g=[],y=0,_=o.channels.length;y<_;y++){var C=o.channels[y],w=o.samplers[C.sampler],x=C.target,b=void 0!==o.parameters?o.parameters[w.input]:w.input,T=void 0!==o.parameters?o.parameters[w.output]:w.output;u.push(this.getDependency("node",x.node)),f.push(this.getDependency("accessor",b)),p.push(this.getDependency("accessor",T)),v.push(w),g.push(x)}return Promise.all([Promise.all(u),Promise.all(f),Promise.all(p),Promise.all(v),Promise.all(g)]).then(function(A){for(var M=A[0],O=A[1],I=A[2],B=A[3],z=A[4],P=[],W=function(te,se){var le=M[te],ue=O[te],_e=I[te],Re=B[te],Se=z[te];if(void 0===le)return"continue";le.updateMatrix();var Ce=void 0;switch(Vc[Se.path]){case Vc.weights:Ce=qy;break;case Vc.rotation:Ce=Af;break;default:Ce=Ky}var Be=le.name?le.name:le.uuid,xe=void 0!==Re.interpolation?sK[Re.interpolation]:Vh,Ae=[];Vc[Se.path]===Vc.weights?le.traverse(function(tt){tt.morphTargetInfluences&&Ae.push(tt.name?tt.name:tt.uuid)}):Ae.push(Be);var me=_e.array;if(_e.normalized){for(var Je=qA(me.constructor),Ne=new Float32Array(me.length),qe=0,Ue=me.length;qe<Ue;qe++)Ne[qe]=me[qe]*Je;me=Ne}for(var je=0,ot=Ae.length;je<ot;je++){var Wt=new Ce(Ae[je]+"."+Vc[Se.path],ue.array,me,xe);"CUBICSPLINE"===Re.interpolation&&(Wt.createInterpolant=function(It){return new(this instanceof Af?aK:Uk)(this.times,this.values,this.getValueSize()/3,It)},Wt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),P.push(Wt)}},X=0,re=M.length;X<re;X++)W(X);return new kA(o.name?o.name:"animation_"+e,void 0,P)})}},{key:"createNodeMesh",value:function(e){var o=this,u=this.json.nodes[e];return void 0===u.mesh?null:o.getDependency("mesh",u.mesh).then(function(f){var p=o._getNodeRef(o.meshCache,u.mesh,f);return void 0!==u.weights&&p.traverse(function(v){if(v.isMesh)for(var g=0,y=u.weights.length;g<y;g++)v.morphTargetInfluences[g]=u.weights[g]}),p})}},{key:"loadNode",value:function(e){var o=this.extensions,u=this,f=this.json.nodes[e],p=f.name?u.createUniqueName(f.name):"";return function(){var v=[],g=u._invokeOne(function(E){return E.createNodeMesh&&E.createNodeMesh(e)});g&&v.push(g),void 0!==f.camera&&v.push(u.getDependency("camera",f.camera).then(function(E){return u._getNodeRef(u.cameraCache,f.camera,E)})),u._invokeAll(function(E){return E.createNodeAttachment&&E.createNodeAttachment(e)}).forEach(function(E){v.push(E)});for(var y=[],_=f.children||[],C=0,w=_.length;C<w;C++)y.push(u.getDependency("node",_[C]));var x=void 0===f.skin?Promise.resolve(null):u.getDependency("skin",f.skin);return Promise.all([Promise.all(v),Promise.all(y),x])}().then(function(v){var C,g=v[0],y=v[1],_=v[2];if((C=!0===f.isBone?new ek:g.length>1?new Bc:1===g.length?g[0]:new Co)!==g[0])for(var w=0,x=g.length;w<x;w++)C.add(g[w]);if(f.name&&(C.userData.name=f.name,C.name=p),Wc(C,f),f.extensions&&Zy(o,C,f),void 0!==f.matrix){var E=new En;E.fromArray(f.matrix),C.applyMatrix4(E)}else void 0!==f.translation&&C.position.fromArray(f.translation),void 0!==f.rotation&&C.quaternion.fromArray(f.rotation),void 0!==f.scale&&C.scale.fromArray(f.scale);u.associations.has(C)||u.associations.set(C,{}),u.associations.get(C).nodes=e,null!==_&&C.traverse(function(A){!A.isSkinnedMesh||A.bind(_,pK)});for(var b=0,T=y.length;b<T;b++)C.add(y[b]);return C})}},{key:"loadScene",value:function(e){var r=this.extensions,o=this.json.scenes[e],u=this,f=new Bc;o.name&&(f.name=u.createUniqueName(o.name)),Wc(f,o),o.extensions&&Zy(r,f,o);for(var p=o.nodes||[],v=[],g=0,y=p.length;g<y;g++)v.push(u.getDependency("node",p[g]));return Promise.all(v).then(function(_){for(var C=0,w=_.length;C<w;C++)f.add(_[C]);return u.associations=function(b){var M,T=new Map,A=Pt(u.associations);try{for(A.s();!(M=A.n()).done;){var O=pr(M.value,2),I=O[0];(I instanceof is||I instanceof xu)&&T.set(I,O[1])}}catch(z){A.e(z)}finally{A.f()}return b.traverse(function(z){var P=u.associations.get(z);null!=P&&T.set(z,P)}),T}(f),f})}}]),n}();function Kk(n,a,e){var r=a.attributes,o=[];function u(g,y){return e.getDependency("accessor",g).then(function(_){n.setAttribute(y,_)})}for(var f in r){var p=zA[f]||f.toLowerCase();p in n.attributes||o.push(u(r[f],p))}if(void 0!==a.indices&&!n.index){var v=e.getDependency("accessor",a.indices).then(function(g){n.setIndex(g)});o.push(v)}return Wc(n,a),function(n,a,e){var r=a.attributes,o=new Ks;if(void 0!==r.POSITION){var u=e.json.accessors[r.POSITION],f=u.min,p=u.max;if(void 0!==f&&void 0!==p){if(o.set(new Z(f[0],f[1],f[2]),new Z(p[0],p[1],p[2])),u.normalized){var v=qA(yv[u.componentType]);o.min.multiplyScalar(v),o.max.multiplyScalar(v)}var g=a.targets;if(void 0!==g){for(var y=new Z,_=new Z,C=0,w=g.length;C<w;C++){var x=g[C];if(void 0!==x.POSITION){var E=e.json.accessors[x.POSITION],b=E.min,T=E.max;if(void 0!==b&&void 0!==T){if(_.setX(Math.max(Math.abs(b[0]),Math.abs(T[0]))),_.setY(Math.max(Math.abs(b[1]),Math.abs(T[1]))),_.setZ(Math.max(Math.abs(b[2]),Math.abs(T[2]))),E.normalized){var A=qA(yv[E.componentType]);_.multiplyScalar(A)}y.max(_)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(y)}n.boundingBox=o;var M=new $h;o.getCenter(M.center),M.radius=o.min.distanceTo(o.max)/2,n.boundingSphere=M}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(n,a,e),Promise.all(o).then(function(){return void 0!==a.targets?function(n,a,e){for(var r=!1,o=!1,u=!1,f=0,p=a.length;f<p;f++){var v=a[f];if(void 0!==v.POSITION&&(r=!0),void 0!==v.NORMAL&&(o=!0),void 0!==v.COLOR_0&&(u=!0),r&&o&&u)break}if(!r&&!o&&!u)return Promise.resolve(n);for(var g=[],y=[],_=[],C=0,w=a.length;C<w;C++){var x=a[C];if(r){var E=void 0!==x.POSITION?e.getDependency("accessor",x.POSITION):n.attributes.position;g.push(E)}if(o){var b=void 0!==x.NORMAL?e.getDependency("accessor",x.NORMAL):n.attributes.normal;y.push(b)}if(u){var T=void 0!==x.COLOR_0?e.getDependency("accessor",x.COLOR_0):n.attributes.color;_.push(T)}}return Promise.all([Promise.all(g),Promise.all(y),Promise.all(_)]).then(function(A){var O=A[1],I=A[2];return r&&(n.morphAttributes.position=A[0]),o&&(n.morphAttributes.normal=O),u&&(n.morphAttributes.color=I),n.morphTargetsRelative=!0,n})}(n,a.targets,e):n})}function Yk(n,a){var e=n.getIndex();if(null===e){var r=[],o=n.getAttribute("position");if(void 0===o)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(var u=0;u<o.count;u++)r.push(u);n.setIndex(r),e=n.getIndex()}var f=e.count-2,p=[];if(2===a)for(var v=1;v<=f;v++)p.push(e.getX(0)),p.push(e.getX(v)),p.push(e.getX(v+1));else for(var g=0;g<f;g++)g%2==0?(p.push(e.getX(g)),p.push(e.getX(g+1)),p.push(e.getX(g+2))):(p.push(e.getX(g+2)),p.push(e.getX(g+1)),p.push(e.getX(g)));p.length/3!==f&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var y=n.clone();return y.setIndex(p),y}var $k={type:"change"},KA={type:"start"},Xk={type:"end"},yb=function(n){ve(e,n);var a=ge(e);function e(r,o){var u,ne,it,Mt,wt,pt,ut;N(this,e),(u=a.call(this)).object=r,u.domElement=o,u.domElement.style.touchAction="none",u.enabled=!0,u.target=new Z,u.minDistance=0,u.maxDistance=1/0,u.minZoom=0,u.maxZoom=1/0,u.minPolarAngle=0,u.maxPolarAngle=Math.PI,u.minAzimuthAngle=-1/0,u.maxAzimuthAngle=1/0,u.enableDamping=!1,u.dampingFactor=.05,u.enableZoom=!0,u.zoomSpeed=1,u.enableRotate=!0,u.rotateSpeed=1,u.enablePan=!0,u.panSpeed=1,u.screenSpacePanning=!0,u.keyPanSpeed=7,u.autoRotate=!1,u.autoRotateSpeed=2,u.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},u.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},u.touches={ONE:0,TWO:2},u.target0=u.target.clone(),u.position0=u.object.position.clone(),u.zoom0=u.object.zoom,u._domElementKeyEvents=null,u.getPolarAngle=function(){return y.phi},u.getAzimuthalAngle=function(){return y.theta},u.getDistance=function(){return this.object.position.distanceTo(this.target)},u.listenToKeyEvents=function(ne){ne.addEventListener("keydown",ie),this._domElementKeyEvents=ne},u.saveState=function(){f.target0.copy(f.target),f.position0.copy(f.object.position),f.zoom0=f.object.zoom},u.reset=function(){f.target.copy(f.target0),f.object.position.copy(f.position0),f.object.zoom=f.zoom0,f.object.updateProjectionMatrix(),f.dispatchEvent($k),f.update(),v=p.NONE},u.update=(ne=new Z,it=(new ro).setFromUnitVectors(r.up,new Z(0,1,0)),Mt=it.clone().invert(),wt=new Z,pt=new ro,ut=2*Math.PI,function(){var Fn=f.object.position;ne.copy(Fn).sub(f.target),ne.applyQuaternion(it),y.setFromVector3(ne),f.autoRotate&&v===p.NONE&&de(2*Math.PI/60/60*f.autoRotateSpeed),f.enableDamping?(y.theta+=_.theta*f.dampingFactor,y.phi+=_.phi*f.dampingFactor):(y.theta+=_.theta,y.phi+=_.phi);var qn=f.minAzimuthAngle,Kn=f.maxAzimuthAngle;return isFinite(qn)&&isFinite(Kn)&&(qn<-Math.PI?qn+=ut:qn>Math.PI&&(qn-=ut),Kn<-Math.PI?Kn+=ut:Kn>Math.PI&&(Kn-=ut),y.theta=qn<=Kn?Math.max(qn,Math.min(Kn,y.theta)):y.theta>(qn+Kn)/2?Math.max(qn,y.theta):Math.min(Kn,y.theta)),y.phi=Math.max(f.minPolarAngle,Math.min(f.maxPolarAngle,y.phi)),y.makeSafe(),y.radius*=C,y.radius=Math.max(f.minDistance,Math.min(f.maxDistance,y.radius)),!0===f.enableDamping?f.target.addScaledVector(w,f.dampingFactor):f.target.add(w),ne.setFromSpherical(y),ne.applyQuaternion(Mt),Fn.copy(f.target).add(ne),f.object.lookAt(f.target),!0===f.enableDamping?(_.theta*=1-f.dampingFactor,_.phi*=1-f.dampingFactor,w.multiplyScalar(1-f.dampingFactor)):(_.set(0,0,0),w.set(0,0,0)),C=1,!!(x||wt.distanceToSquared(f.object.position)>g||8*(1-pt.dot(f.object.quaternion))>g)&&(f.dispatchEvent($k),wt.copy(f.object.position),pt.copy(f.object.quaternion),x=!1,!0)}),u.dispose=function(){f.domElement.removeEventListener("contextmenu",nt),f.domElement.removeEventListener("pointerdown",Sn),f.domElement.removeEventListener("pointercancel",zn),f.domElement.removeEventListener("wheel",_r),f.domElement.removeEventListener("pointermove",Rt),f.domElement.removeEventListener("pointerup",gn),null!==f._domElementKeyEvents&&f._domElementKeyEvents.removeEventListener("keydown",ie)};var f=Yn(u),p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},v=p.NONE,g=1e-6,y=new Hk,_=new Hk,C=1,w=new Z,x=!1,E=new $e,b=new $e,T=new $e,A=new $e,M=new $e,O=new $e,I=new $e,B=new $e,z=new $e,P=[],W={};function re(){return Math.pow(.95,f.zoomSpeed)}function de(ne){_.theta-=ne}function ce(ne){_.phi-=ne}var G=function(){var ne=new Z;return function(Mt,wt){ne.setFromMatrixColumn(wt,0),ne.multiplyScalar(-Mt),w.add(ne)}}(),te=function(){var ne=new Z;return function(Mt,wt){!0===f.screenSpacePanning?ne.setFromMatrixColumn(wt,1):(ne.setFromMatrixColumn(wt,0),ne.crossVectors(f.object.up,ne)),ne.multiplyScalar(Mt),w.add(ne)}}(),se=function(){var ne=new Z;return function(Mt,wt){var pt=f.domElement;if(f.object.isPerspectiveCamera){ne.copy(f.object.position).sub(f.target);var Xt=ne.length();Xt*=Math.tan(f.object.fov/2*Math.PI/180),G(2*Mt*Xt/pt.clientHeight,f.object.matrix),te(2*wt*Xt/pt.clientHeight,f.object.matrix)}else f.object.isOrthographicCamera?(G(Mt*(f.object.right-f.object.left)/f.object.zoom/pt.clientWidth,f.object.matrix),te(wt*(f.object.top-f.object.bottom)/f.object.zoom/pt.clientHeight,f.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),f.enablePan=!1)}}();function le(ne){f.object.isPerspectiveCamera?C/=ne:f.object.isOrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom*ne)),f.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function ue(ne){f.object.isPerspectiveCamera?C*=ne:f.object.isOrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom/ne)),f.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function _e(ne){E.set(ne.clientX,ne.clientY)}function Se(ne){A.set(ne.clientX,ne.clientY)}function Je(){1===P.length?E.set(P[0].pageX,P[0].pageY):E.set(.5*(P[0].pageX+P[1].pageX),.5*(P[0].pageY+P[1].pageY))}function Ne(){1===P.length?A.set(P[0].pageX,P[0].pageY):A.set(.5*(P[0].pageX+P[1].pageX),.5*(P[0].pageY+P[1].pageY))}function qe(){var ne=P[0].pageX-P[1].pageX,it=P[0].pageY-P[1].pageY,Mt=Math.sqrt(ne*ne+it*it);I.set(0,Mt)}function ot(ne){if(1==P.length)b.set(ne.pageX,ne.pageY);else{var it=Nt(ne);b.set(.5*(ne.pageX+it.x),.5*(ne.pageY+it.y))}T.subVectors(b,E).multiplyScalar(f.rotateSpeed);var pt=f.domElement;de(2*Math.PI*T.x/pt.clientHeight),ce(2*Math.PI*T.y/pt.clientHeight),E.copy(b)}function Wt(ne){if(1===P.length)M.set(ne.pageX,ne.pageY);else{var it=Nt(ne);M.set(.5*(ne.pageX+it.x),.5*(ne.pageY+it.y))}O.subVectors(M,A).multiplyScalar(f.panSpeed),se(O.x,O.y),A.copy(M)}function tt(ne){var it=Nt(ne),Mt=ne.pageX-it.x,wt=ne.pageY-it.y,pt=Math.sqrt(Mt*Mt+wt*wt);B.set(0,pt),z.set(0,Math.pow(B.y/I.y,f.zoomSpeed)),le(z.y),I.copy(B)}function Sn(ne){!1!==f.enabled&&(0===P.length&&(f.domElement.setPointerCapture(ne.pointerId),f.domElement.addEventListener("pointermove",Rt),f.domElement.addEventListener("pointerup",gn)),function(ne){P.push(ne)}(ne),"touch"===ne.pointerType?function(ne){switch(Vt(ne),P.length){case 1:switch(f.touches.ONE){case 0:if(!1===f.enableRotate)return;Je(),v=p.TOUCH_ROTATE;break;case 1:if(!1===f.enablePan)return;Ne(),v=p.TOUCH_PAN;break;default:v=p.NONE}break;case 2:switch(f.touches.TWO){case 2:if(!1===f.enableZoom&&!1===f.enablePan)return;f.enableZoom&&qe(),f.enablePan&&Ne(),v=p.TOUCH_DOLLY_PAN;break;case 3:if(!1===f.enableZoom&&!1===f.enableRotate)return;f.enableZoom&&qe(),f.enableRotate&&Je(),v=p.TOUCH_DOLLY_ROTATE;break;default:v=p.NONE}break;default:v=p.NONE}v!==p.NONE&&f.dispatchEvent(KA)}(ne):function(ne){var it;switch(ne.button){case 0:it=f.mouseButtons.LEFT;break;case 1:it=f.mouseButtons.MIDDLE;break;case 2:it=f.mouseButtons.RIGHT;break;default:it=-1}switch(it){case 1:if(!1===f.enableZoom)return;(function(ne){I.set(ne.clientX,ne.clientY)})(ne),v=p.DOLLY;break;case 0:if(ne.ctrlKey||ne.metaKey||ne.shiftKey){if(!1===f.enablePan)return;Se(ne),v=p.PAN}else{if(!1===f.enableRotate)return;_e(ne),v=p.ROTATE}break;case 2:if(ne.ctrlKey||ne.metaKey||ne.shiftKey){if(!1===f.enableRotate)return;_e(ne),v=p.ROTATE}else{if(!1===f.enablePan)return;Se(ne),v=p.PAN}break;default:v=p.NONE}v!==p.NONE&&f.dispatchEvent(KA)}(ne))}function Rt(ne){!1!==f.enabled&&("touch"===ne.pointerType?function(ne){switch(Vt(ne),v){case p.TOUCH_ROTATE:if(!1===f.enableRotate)return;ot(ne),f.update();break;case p.TOUCH_PAN:if(!1===f.enablePan)return;Wt(ne),f.update();break;case p.TOUCH_DOLLY_PAN:if(!1===f.enableZoom&&!1===f.enablePan)return;(function(ne){f.enableZoom&&tt(ne),f.enablePan&&Wt(ne)})(ne),f.update();break;case p.TOUCH_DOLLY_ROTATE:if(!1===f.enableZoom&&!1===f.enableRotate)return;(function(ne){f.enableZoom&&tt(ne),f.enableRotate&&ot(ne)})(ne),f.update();break;default:v=p.NONE}}(ne):function(ne){switch(v){case p.ROTATE:if(!1===f.enableRotate)return;!function(ne){b.set(ne.clientX,ne.clientY),T.subVectors(b,E).multiplyScalar(f.rotateSpeed);var it=f.domElement;de(2*Math.PI*T.x/it.clientHeight),ce(2*Math.PI*T.y/it.clientHeight),E.copy(b),f.update()}(ne);break;case p.DOLLY:if(!1===f.enableZoom)return;!function(ne){B.set(ne.clientX,ne.clientY),z.subVectors(B,I),z.y>0?le(re()):z.y<0&&ue(re()),I.copy(B),f.update()}(ne);break;case p.PAN:if(!1===f.enablePan)return;!function(ne){M.set(ne.clientX,ne.clientY),O.subVectors(M,A).multiplyScalar(f.panSpeed),se(O.x,O.y),A.copy(M),f.update()}(ne)}}(ne))}function gn(ne){ft(ne),0===P.length&&(f.domElement.releasePointerCapture(ne.pointerId),f.domElement.removeEventListener("pointermove",Rt),f.domElement.removeEventListener("pointerup",gn)),f.dispatchEvent(Xk),v=p.NONE}function zn(ne){ft(ne)}function _r(ne){!1===f.enabled||!1===f.enableZoom||v!==p.NONE||(ne.preventDefault(),f.dispatchEvent(KA),function(ne){ne.deltaY<0?ue(re()):ne.deltaY>0&&le(re()),f.update()}(ne),f.dispatchEvent(Xk))}function ie(ne){!1===f.enabled||!1===f.enablePan||function(ne){var it=!1;switch(ne.code){case f.keys.UP:ne.ctrlKey||ne.metaKey||ne.shiftKey?ce(2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):se(0,f.keyPanSpeed),it=!0;break;case f.keys.BOTTOM:ne.ctrlKey||ne.metaKey||ne.shiftKey?ce(-2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):se(0,-f.keyPanSpeed),it=!0;break;case f.keys.LEFT:ne.ctrlKey||ne.metaKey||ne.shiftKey?de(2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):se(f.keyPanSpeed,0),it=!0;break;case f.keys.RIGHT:ne.ctrlKey||ne.metaKey||ne.shiftKey?de(-2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):se(-f.keyPanSpeed,0),it=!0}it&&(ne.preventDefault(),f.update())}(ne)}function nt(ne){!1!==f.enabled&&ne.preventDefault()}function ft(ne){delete W[ne.pointerId];for(var it=0;it<P.length;it++)if(P[it].pointerId==ne.pointerId)return void P.splice(it,1)}function Vt(ne){var it=W[ne.pointerId];void 0===it&&(it=new $e,W[ne.pointerId]=it),it.set(ne.pageX,ne.pageY)}function Nt(ne){return W[(ne.pointerId===P[0].pointerId?P[1]:P[0]).pointerId]}return f.domElement.addEventListener("contextmenu",nt),f.domElement.addEventListener("pointerdown",Sn),f.domElement.addEventListener("pointercancel",zn),f.domElement.addEventListener("wheel",_r,{passive:!1}),u.update(),u}return e}(fl),Uc=function(a){a.scene.traverse(function(e){if("Mesh"===e.type&&e.material&&e.material.userData&&e.material.userData.BlendType)switch(e.material.userData.BlendType){case"AdditiveBlending":e.material.blending=2;break;case"SubtractiveBlending":e.material.blending=3;break;case"MultiplyBlending":e.material.blending=4}})};function gK(){}function YA(n){return null==n?gK:function(){return this.querySelector(n)}}function yK(n){return null==n?[]:Array.isArray(n)?n:Array.from(n)}function _K(){return[]}function Jk(n){return null==n?_K:function(){return this.querySelectorAll(n)}}function Zk(n){return function(){return this.matches(n)}}function Qk(n){return function(a){return a.matches(n)}}var SK=Array.prototype.find;function EK(){return this.firstElementChild}var RK=Array.prototype.filter;function TK(){return Array.from(this.children)}function eN(n){return new Array(n.length)}function _b(n,a){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=a}function PK(n){return function(){return n}}function IK(n,a,e,r,o,u){for(var p,f=0,v=a.length,g=u.length;f<g;++f)(p=a[f])?(p.__data__=u[f],r[f]=p):e[f]=new _b(n,u[f]);for(;f<v;++f)(p=a[f])&&(o[f]=p)}function LK(n,a,e,r,o,u,f){var p,v,w,g=new Map,y=a.length,_=u.length,C=new Array(y);for(p=0;p<y;++p)(v=a[p])&&(C[p]=w=f.call(v,v.__data__,p,a)+"",g.has(w)?o[p]=v:g.set(w,v));for(p=0;p<_;++p)w=f.call(n,u[p],p,u)+"",(v=g.get(w))?(r[p]=v,v.__data__=u[p],g.delete(w)):e[p]=new _b(n,u[p]);for(p=0;p<y;++p)(v=a[p])&&g.get(C[p])===v&&(o[p]=v)}function FK(n){return n.__data__}function NK(n){return"object"==typeof n&&"length"in n?n:Array.from(n)}function UK(n,a){return n<a?-1:n>a?1:n>=a?0:NaN}_b.prototype={constructor:_b,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,e){return this._parent.insertBefore(a,e)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};var $A="http://www.w3.org/1999/xhtml",tN={svg:"http://www.w3.org/2000/svg",xhtml:$A,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cb(n){var a=n+="",e=a.indexOf(":");return e>=0&&"xmlns"!==(a=n.slice(0,e))&&(n=n.slice(e+1)),tN.hasOwnProperty(a)?{space:tN[a],local:n}:n}function XK(n){return function(){this.removeAttribute(n)}}function JK(n){return function(){this.removeAttributeNS(n.space,n.local)}}function ZK(n,a){return function(){this.setAttribute(n,a)}}function QK(n,a){return function(){this.setAttributeNS(n.space,n.local,a)}}function eY(n,a){return function(){var e=a.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}}function tY(n,a){return function(){var e=a.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function nN(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function rY(n){return function(){this.style.removeProperty(n)}}function iY(n,a,e){return function(){this.style.setProperty(n,a,e)}}function oY(n,a,e){return function(){var r=a.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}}function _v(n,a){return n.style.getPropertyValue(a)||nN(n).getComputedStyle(n,null).getPropertyValue(a)}function sY(n){return function(){delete this[n]}}function uY(n,a){return function(){this[n]=a}}function lY(n,a){return function(){var e=a.apply(this,arguments);null==e?delete this[n]:this[n]=e}}function rN(n){return n.trim().split(/^|\s+/)}function XA(n){return n.classList||new iN(n)}function iN(n){this._node=n,this._names=rN(n.getAttribute("class")||"")}function oN(n,a){for(var e=XA(n),r=-1,o=a.length;++r<o;)e.add(a[r])}function aN(n,a){for(var e=XA(n),r=-1,o=a.length;++r<o;)e.remove(a[r])}function dY(n){return function(){oN(this,n)}}function fY(n){return function(){aN(this,n)}}function pY(n,a){return function(){(a.apply(this,arguments)?oN:aN)(this,n)}}function vY(){this.textContent=""}function gY(n){return function(){this.textContent=n}}function mY(n){return function(){var a=n.apply(this,arguments);this.textContent=null==a?"":a}}function _Y(){this.innerHTML=""}function CY(n){return function(){this.innerHTML=n}}function wY(n){return function(){var a=n.apply(this,arguments);this.innerHTML=null==a?"":a}}function bY(){this.nextSibling&&this.parentNode.appendChild(this)}function xY(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function TY(n){return function(){var a=this.ownerDocument,e=this.namespaceURI;return e===$A&&a.documentElement.namespaceURI===$A?a.createElement(n):a.createElementNS(e,n)}}function DY(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function sN(n){var a=Cb(n);return(a.local?DY:TY)(a)}function MY(){return null}function PY(){var n=this.parentNode;n&&n.removeChild(this)}function LY(){var n=this.cloneNode(!1),a=this.parentNode;return a?a.insertBefore(n,this.nextSibling):n}function FY(){var n=this.cloneNode(!0),a=this.parentNode;return a?a.insertBefore(n,this.nextSibling):n}function BY(n){return n.trim().split(/^|\s+/).map(function(a){var e="",r=a.indexOf(".");return r>=0&&(e=a.slice(r+1),a=a.slice(0,r)),{type:a,name:e}})}function HY(n){return function(){var a=this.__on;if(a){for(var u,e=0,r=-1,o=a.length;e<o;++e)u=a[e],n.type&&u.type!==n.type||u.name!==n.name?a[++r]=u:this.removeEventListener(u.type,u.listener,u.options);++r?a.length=r:delete this.__on}}}function VY(n,a,e){return function(){var o,r=this.__on,u=function(n){return function(a){n.call(this,a,this.__data__)}}(a);if(r)for(var f=0,p=r.length;f<p;++f)if((o=r[f]).type===n.type&&o.name===n.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=u,o.options=e),void(o.value=a);this.addEventListener(n.type,u,e),o={type:n.type,name:n.name,value:a,listener:u,options:e},r?r.push(o):this.__on=[o]}}function uN(n,a,e){var r=nN(n),o=r.CustomEvent;"function"==typeof o?o=new o(a,e):(o=r.document.createEvent("Event"),e?(o.initEvent(a,e.bubbles,e.cancelable),o.detail=e.detail):o.initEvent(a,!1,!1)),n.dispatchEvent(o)}function UY(n,a){return function(){return uN(this,n,a)}}function zY(n,a){return function(){return uN(this,n,a.apply(this,arguments))}}iN.prototype={add:function(a){this._names.indexOf(a)<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var e=this._names.indexOf(a);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};var qY=yi.mark(lN);function lN(){var n,a,e,r,o,u,f;return yi.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:a=0,e=(n=this._groups).length;case 1:if(!(a<e)){v.next=13;break}o=0,u=(r=n[a]).length;case 3:if(!(o<u)){v.next=10;break}if(!(f=r[o])){v.next=7;break}return v.next=7,f;case 7:++o,v.next=3;break;case 10:++a,v.next=1;break;case 13:case"end":return v.stop()}},qY,this)}var cN=[null];function Ta(n,a){this._groups=n,this._parents=a}function dN(){return new Ta([[document.documentElement]],cN)}Ta.prototype=dN.prototype=Rn({constructor:Ta,select:function(n){"function"!=typeof n&&(n=YA(n));for(var a=this._groups,e=a.length,r=new Array(e),o=0;o<e;++o)for(var v,g,u=a[o],f=u.length,p=r[o]=new Array(f),y=0;y<f;++y)(v=u[y])&&(g=n.call(v,v.__data__,y,u))&&("__data__"in v&&(g.__data__=v.__data__),p[y]=g);return new Ta(r,this._parents)},selectAll:function(n){n="function"==typeof n?function(n){return function(){return yK(n.apply(this,arguments))}}(n):Jk(n);for(var a=this._groups,e=a.length,r=[],o=[],u=0;u<e;++u)for(var v,f=a[u],p=f.length,g=0;g<p;++g)(v=f[g])&&(r.push(n.call(v,v.__data__,g,f)),o.push(v));return new Ta(r,o)},selectChild:function(n){return this.select(null==n?EK:function(n){return function(){return SK.call(this.children,n)}}("function"==typeof n?n:Qk(n)))},selectChildren:function(n){return this.selectAll(null==n?TK:function(n){return function(){return RK.call(this.children,n)}}("function"==typeof n?n:Qk(n)))},filter:function(n){"function"!=typeof n&&(n=Zk(n));for(var a=this._groups,e=a.length,r=new Array(e),o=0;o<e;++o)for(var v,u=a[o],f=u.length,p=r[o]=[],g=0;g<f;++g)(v=u[g])&&n.call(v,v.__data__,g,u)&&p.push(v);return new Ta(r,this._parents)},data:function(n,a){if(!arguments.length)return Array.from(this,FK);var e=a?LK:IK,r=this._parents,o=this._groups;"function"!=typeof n&&(n=PK(n));for(var u=o.length,f=new Array(u),p=new Array(u),v=new Array(u),g=0;g<u;++g){var y=r[g],_=o[g],C=_.length,w=NK(n.call(y,y&&y.__data__,g,r)),x=w.length,E=p[g]=new Array(x),b=f[g]=new Array(x),T=v[g]=new Array(C);e(y,_,E,b,T,w,a);for(var O,I,A=0,M=0;A<x;++A)if(O=E[A]){for(A>=M&&(M=A+1);!(I=b[M])&&++M<x;);O._next=I||null}}return(f=new Ta(f,r))._enter=p,f._exit=v,f},enter:function(){return new Ta(this._enter||this._groups.map(eN),this._parents)},exit:function(){return new Ta(this._exit||this._groups.map(eN),this._parents)},join:function(n,a,e){var r=this.enter(),o=this,u=this.exit();return"function"==typeof n?(r=n(r))&&(r=r.selection()):r=r.append(n+""),null!=a&&(o=a(o))&&(o=o.selection()),null==e?u.remove():e(u),r&&o?r.merge(o).order():o},merge:function(n){for(var a=n.selection?n.selection():n,e=this._groups,r=a._groups,o=e.length,f=Math.min(o,r.length),p=new Array(o),v=0;v<f;++v)for(var w,g=e[v],y=r[v],_=g.length,C=p[v]=new Array(_),x=0;x<_;++x)(w=g[x]||y[x])&&(C[x]=w);for(;v<o;++v)p[v]=e[v];return new Ta(p,this._parents)},selection:function(){return this},order:function(){for(var n=this._groups,a=-1,e=n.length;++a<e;)for(var f,r=n[a],o=r.length-1,u=r[o];--o>=0;)(f=r[o])&&(u&&4^f.compareDocumentPosition(u)&&u.parentNode.insertBefore(f,u),u=f);return this},sort:function(n){function a(_,C){return _&&C?n(_.__data__,C.__data__):!_-!C}n||(n=UK);for(var e=this._groups,r=e.length,o=new Array(r),u=0;u<r;++u){for(var g,f=e[u],p=f.length,v=o[u]=new Array(p),y=0;y<p;++y)(g=f[y])&&(v[y]=g);v.sort(a)}return new Ta(o,this._parents).order()},call:function(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var n=this._groups,a=0,e=n.length;a<e;++a)for(var r=n[a],o=0,u=r.length;o<u;++o){var f=r[o];if(f)return f}return null},size:function(){var n=0,a=Pt(this);try{for(a.s();!a.n().done;)++n}catch(o){a.e(o)}finally{a.f()}return n},empty:function(){return!this.node()},each:function(n){for(var a=this._groups,e=0,r=a.length;e<r;++e)for(var p,o=a[e],u=0,f=o.length;u<f;++u)(p=o[u])&&n.call(p,p.__data__,u,o);return this},attr:function(n,a){var e=Cb(n);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==a?e.local?JK:XK:"function"==typeof a?e.local?tY:eY:e.local?QK:ZK)(e,a))},style:function(n,a,e){return arguments.length>1?this.each((null==a?rY:"function"==typeof a?oY:iY)(n,a,null==e?"":e)):_v(this.node(),n)},property:function(n,a){return arguments.length>1?this.each((null==a?sY:"function"==typeof a?lY:uY)(n,a)):this.node()[n]},classed:function(n,a){var e=rN(n+"");if(arguments.length<2){for(var r=XA(this.node()),o=-1,u=e.length;++o<u;)if(!r.contains(e[o]))return!1;return!0}return this.each(("function"==typeof a?pY:a?dY:fY)(e,a))},text:function(n){return arguments.length?this.each(null==n?vY:("function"==typeof n?mY:gY)(n)):this.node().textContent},html:function(n){return arguments.length?this.each(null==n?_Y:("function"==typeof n?wY:CY)(n)):this.node().innerHTML},raise:function(){return this.each(bY)},lower:function(){return this.each(xY)},append:function(n){var a="function"==typeof n?n:sN(n);return this.select(function(){return this.appendChild(a.apply(this,arguments))})},insert:function(n,a){var e="function"==typeof n?n:sN(n),r=null==a?MY:"function"==typeof a?a:YA(a);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(PY)},clone:function(n){return this.select(n?FY:LY)},datum:function(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function(n,a,e){var o,f,r=BY(n+""),u=r.length;if(!(arguments.length<2)){for(p=a?VY:HY,o=0;o<u;++o)this.each(p(r[o],a,e));return this}var p=this.node().__on;if(p)for(var y,v=0,g=p.length;v<g;++v)for(o=0,y=p[v];o<u;++o)if((f=r[o]).type===y.type&&f.name===y.name)return y.value},dispatch:function(n,a){return this.each(("function"==typeof a?zY:UY)(n,a))}},Symbol.iterator,lN);var Qy=dN,YY={value:function(){}};function fN(){for(var r,n=0,a=arguments.length,e={};n<a;++n){if(!(r=arguments[n]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new wb(e)}function wb(n){this._=n}function $Y(n,a){return n.trim().split(/^|\s+/).map(function(e){var r="",o=e.indexOf(".");if(o>=0&&(r=e.slice(o+1),e=e.slice(0,o)),e&&!a.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}function XY(n,a){for(var o,e=0,r=n.length;e<r;++e)if((o=n[e]).name===a)return o.value}function pN(n,a,e){for(var r=0,o=n.length;r<o;++r)if(n[r].name===a){n[r]=YY,n=n.slice(0,r).concat(n.slice(r+1));break}return null!=e&&n.push({name:a,value:e}),n}wb.prototype=fN.prototype={constructor:wb,on:function(a,e){var u,r=this._,o=$Y(a+"",r),f=-1,p=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++f<p;)if(u=(a=o[f]).type)r[u]=pN(r[u],a.name,e);else if(null==e)for(u in r)r[u]=pN(r[u],a.name,null);return this}for(;++f<p;)if((u=(a=o[f]).type)&&(u=XY(r[u],a.name)))return u},copy:function(){var a={},e=this._;for(var r in e)a[r]=e[r].slice();return new wb(a)},call:function(a,e){if((u=arguments.length-2)>0)for(var u,f,r=new Array(u),o=0;o<u;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(o=0,u=(f=this._[a]).length;o<u;++o)f[o].value.apply(e,r)},apply:function(a,e,r){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var o=this._[a],u=0,f=o.length;u<f;++u)o[u].value.apply(e,r)}};var Sb,n_,JY=fN,Cv=0,e_=0,t_=0,bb=0,Of=0,Eb=0,r_="object"==typeof performance&&performance.now?performance:Date,vN="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function JA(){return Of||(vN(ZY),Of=r_.now()+Eb)}function ZY(){Of=0}function xb(){this._call=this._time=this._next=null}function gN(n,a,e){var r=new xb;return r.restart(n,a,e),r}function mN(){Of=(bb=r_.now())+Eb,Cv=e_=0;try{!function(){JA(),++Cv;for(var a,n=Sb;n;)(a=Of-n._time)>=0&&n._call.call(void 0,a),n=n._next;--Cv}()}finally{Cv=0,function(){for(var n,e,a=Sb,r=1/0;a;)a._call?(r>a._time&&(r=a._time),n=a,a=a._next):(e=a._next,a._next=null,a=n?n._next=e:Sb=e);n_=n,ZA(r)}(),Of=0}}function e$(){var n=r_.now(),a=n-bb;a>1e3&&(Eb-=a,bb=n)}function ZA(n){Cv||(e_&&(e_=clearTimeout(e_)),n-Of>24?(n<1/0&&(e_=setTimeout(mN,n-r_.now()-Eb)),t_&&(t_=clearInterval(t_))):(t_||(bb=r_.now(),t_=setInterval(e$,1e3)),Cv=1,vN(mN)))}function yN(n,a,e){var r=new xb;return r.restart(function(o){r.stop(),n(o+a)},a=null==a?0:+a,e),r}xb.prototype=gN.prototype={constructor:xb,restart:function(a,e,r){if("function"!=typeof a)throw new TypeError("callback is not a function");r=(null==r?JA():+r)+(null==e?0:+e),!this._next&&n_!==this&&(n_?n_._next=this:Sb=this,n_=this),this._call=a,this._time=r,ZA()},stop:function(){this._call&&(this._call=null,this._time=1/0,ZA())}};var n$=JY("start","end","cancel","interrupt"),r$=[];function Db(n,a,e,r,o,u){var f=n.__transition;if(f){if(e in f)return}else n.__transition={};!function(n,a,e){var o,r=n.__transition;function f(g){var y,_,C,w;if(1!==e.state)return v();for(y in r)if((w=r[y]).name===e.name){if(3===w.state)return yN(f);4===w.state?(w.state=6,w.timer.stop(),w.on.call("interrupt",n,n.__data__,w.index,w.group),delete r[y]):+y<a&&(w.state=6,w.timer.stop(),w.on.call("cancel",n,n.__data__,w.index,w.group),delete r[y])}if(yN(function(){3===e.state&&(e.state=4,e.timer.restart(p,e.delay,e.time),p(g))}),e.state=2,e.on.call("start",n,n.__data__,e.index,e.group),2===e.state){for(e.state=3,o=new Array(C=e.tween.length),y=0,_=-1;y<C;++y)(w=e.tween[y].value.call(n,n.__data__,e.index,e.group))&&(o[++_]=w);o.length=_+1}}function p(g){for(var y=g<e.duration?e.ease.call(null,g/e.duration):(e.timer.restart(v),e.state=5,1),_=-1,C=o.length;++_<C;)o[_].call(n,y);5===e.state&&(e.on.call("end",n,n.__data__,e.index,e.group),v())}function v(){for(var g in e.state=6,e.timer.stop(),delete r[a],r)return;delete n.__transition}r[a]=e,e.timer=gN(function(g){e.state=1,e.timer.restart(f,e.delay,e.time),e.delay<=g&&f(g-e.delay)},0,e.time)}(n,e,{name:a,index:r,group:o,on:n$,tween:r$,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:0})}function tM(n,a){var e=Xs(n,a);if(e.state>0)throw new Error("too late; already scheduled");return e}function Ou(n,a){var e=Xs(n,a);if(e.state>3)throw new Error("too late; already running");return e}function Xs(n,a){var e=n.__transition;if(!e||!(e=e[a]))throw new Error("transition not found");return e}function zc(n,a){return n=+n,a=+a,function(e){return n*(1-e)+a*e}}var Ab,SN=180/Math.PI,nM={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bN(n,a,e,r,o,u){var f,p,v;return(f=Math.sqrt(n*n+a*a))&&(n/=f,a/=f),(v=n*e+a*r)&&(e-=n*v,r-=a*v),(p=Math.sqrt(e*e+r*r))&&(e/=p,r/=p,v/=p),n*r<a*e&&(n=-n,a=-a,v=-v,f=-f),{translateX:o,translateY:u,rotate:Math.atan2(a,n)*SN,skewX:Math.atan(v)*SN,scaleX:f,scaleY:p}}function EN(n,a,e,r){function o(g){return g.length?g.pop()+" ":""}return function(g,y){var _=[],C=[];return g=n(g),y=n(y),function(g,y,_,C,w,x){if(g!==_||y!==C){var E=w.push("translate(",null,a,null,e);x.push({i:E-4,x:zc(g,_)},{i:E-2,x:zc(y,C)})}else(_||C)&&w.push("translate("+_+a+C+e)}(g.translateX,g.translateY,y.translateX,y.translateY,_,C),function(g,y,_,C){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),C.push({i:_.push(o(_)+"rotate(",null,r)-2,x:zc(g,y)})):y&&_.push(o(_)+"rotate("+y+r)}(g.rotate,y.rotate,_,C),function(g,y,_,C){g!==y?C.push({i:_.push(o(_)+"skewX(",null,r)-2,x:zc(g,y)}):y&&_.push(o(_)+"skewX("+y+r)}(g.skewX,y.skewX,_,C),function(g,y,_,C,w,x){if(g!==_||y!==C){var E=w.push(o(w)+"scale(",null,",",null,")");x.push({i:E-4,x:zc(g,_)},{i:E-2,x:zc(y,C)})}else(1!==_||1!==C)&&w.push(o(w)+"scale("+_+","+C+")")}(g.scaleX,g.scaleY,y.scaleX,y.scaleY,_,C),g=y=null,function(w){for(var b,x=-1,E=C.length;++x<E;)_[(b=C[x]).i]=b.x(w);return _.join("")}}}var l$=EN(function(n){var a=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(n+"");return a.isIdentity?nM:bN(a.a,a.b,a.c,a.d,a.e,a.f)},"px, ","px)","deg)"),c$=EN(function(n){return null!=n&&(Ab||(Ab=document.createElementNS("http://www.w3.org/2000/svg","g")),Ab.setAttribute("transform",n),n=Ab.transform.baseVal.consolidate())?bN((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):nM},", ",")",")");function d$(n,a){var e,r;return function(){var o=Ou(this,n),u=o.tween;if(u!==e)for(var f=0,p=(r=e=u).length;f<p;++f)if(r[f].name===a){(r=r.slice()).splice(f,1);break}o.tween=r}}function f$(n,a,e){var r,o;if("function"!=typeof e)throw new Error;return function(){var u=Ou(this,n),f=u.tween;if(f!==r){o=(r=f).slice();for(var p={name:a,value:e},v=0,g=o.length;v<g;++v)if(o[v].name===a){o[v]=p;break}v===g&&o.push(p)}u.tween=o}}function rM(n,a,e){var r=n._id;return n.each(function(){var o=Ou(this,r);(o.value||(o.value={}))[a]=e.apply(this,arguments)}),function(o){return Xs(o,r).value[a]}}function iM(n,a,e){n.prototype=a.prototype=e,e.constructor=n}function xN(n,a){var e=Object.create(n.prototype);for(var r in a)e[r]=a[r];return e}function i_(){}var Mb=1/.7,wv="\\s*([+-]?\\d+)\\s*",a_="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h$=/^#([0-9a-f]{3,8})$/,v$=new RegExp("^rgb\\("+[wv,wv,wv]+"\\)$"),g$=new RegExp("^rgb\\("+[Pu,Pu,Pu]+"\\)$"),m$=new RegExp("^rgba\\("+[wv,wv,wv,a_]+"\\)$"),y$=new RegExp("^rgba\\("+[Pu,Pu,Pu,a_]+"\\)$"),_$=new RegExp("^hsl\\("+[a_,Pu,Pu]+"\\)$"),C$=new RegExp("^hsla\\("+[a_,Pu,Pu,a_]+"\\)$"),RN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function TN(){return this.rgb().formatHex()}function DN(){return this.rgb().formatRgb()}function s_(n){var a,e;return n=(n+"").trim().toLowerCase(),(a=h$.exec(n))?(e=a[1].length,a=parseInt(a[1],16),6===e?AN(a):3===e?new Da(a>>8&15|a>>4&240,a>>4&15|240&a,(15&a)<<4|15&a,1):8===e?Ob(a>>24&255,a>>16&255,a>>8&255,(255&a)/255):4===e?Ob(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|240&a,((15&a)<<4|15&a)/255):null):(a=v$.exec(n))?new Da(a[1],a[2],a[3],1):(a=g$.exec(n))?new Da(255*a[1]/100,255*a[2]/100,255*a[3]/100,1):(a=m$.exec(n))?Ob(a[1],a[2],a[3],a[4]):(a=y$.exec(n))?Ob(255*a[1]/100,255*a[2]/100,255*a[3]/100,a[4]):(a=_$.exec(n))?PN(a[1],a[2]/100,a[3]/100,1):(a=C$.exec(n))?PN(a[1],a[2]/100,a[3]/100,a[4]):RN.hasOwnProperty(n)?AN(RN[n]):"transparent"===n?new Da(NaN,NaN,NaN,0):null}function AN(n){return new Da(n>>16&255,n>>8&255,255&n,1)}function Ob(n,a,e,r){return r<=0&&(n=a=e=NaN),new Da(n,a,e,r)}function S$(n){return n instanceof i_||(n=s_(n)),n?new Da((n=n.rgb()).r,n.g,n.b,n.opacity):new Da}function Pb(n,a,e,r){return 1===arguments.length?S$(n):new Da(n,a,e,null==r?1:r)}function Da(n,a,e,r){this.r=+n,this.g=+a,this.b=+e,this.opacity=+r}function MN(){return"#"+oM(this.r)+oM(this.g)+oM(this.b)}function ON(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?")":", "+n+")")}function oM(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function PN(n,a,e,r){return r<=0?n=a=e=NaN:e<=0||e>=1?n=a=NaN:a<=0&&(n=NaN),new Iu(n,a,e,r)}function IN(n){if(n instanceof Iu)return new Iu(n.h,n.s,n.l,n.opacity);if(n instanceof i_||(n=s_(n)),!n)return new Iu;if(n instanceof Iu)return n;var a=(n=n.rgb()).r/255,e=n.g/255,r=n.b/255,o=Math.min(a,e,r),u=Math.max(a,e,r),f=NaN,p=u-o,v=(u+o)/2;return p?(f=a===u?(e-r)/p+6*(e<r):e===u?(r-a)/p+2:(a-e)/p+4,p/=v<.5?u+o:2-u-o,f*=60):p=v>0&&v<1?0:f,new Iu(f,p,v,n.opacity)}function Iu(n,a,e,r){this.h=+n,this.s=+a,this.l=+e,this.opacity=+r}function aM(n,a,e){return 255*(n<60?a+(e-a)*n/60:n<180?e:n<240?a+(e-a)*(240-n)/60:a)}function LN(n,a,e,r,o){var u=n*n,f=u*n;return((1-3*n+3*u-f)*a+(4-6*u+3*f)*e+(1+3*n+3*u-3*f)*r+f*o)/6}iM(i_,s_,{copy:function(a){return Object.assign(new this.constructor,this,a)},displayable:function(){return this.rgb().displayable()},hex:TN,formatHex:TN,formatHsl:function(){return IN(this).formatHsl()},formatRgb:DN,toString:DN}),iM(Da,Pb,xN(i_,{brighter:function(a){return a=null==a?Mb:Math.pow(Mb,a),new Da(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new Da(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:MN,formatHex:MN,formatRgb:ON,toString:ON})),iM(Iu,function(n,a,e,r){return 1===arguments.length?IN(n):new Iu(n,a,e,null==r?1:r)},xN(i_,{brighter:function(a){return a=null==a?Mb:Math.pow(Mb,a),new Iu(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new Iu(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(this.h<0),e=isNaN(a)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*e,u=2*r-o;return new Da(aM(a>=240?a-240:a+120,u,o),aM(a,u,o),aM(a<120?a+240:a-120,u,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}));var FN=function(n){return function(){return n}};function NN(n,a){var e=a-n;return e?function(n,a){return function(e){return n+e*a}}(n,e):FN(isNaN(n)?a:n)}var GN=function n(a){var e=function(n){return 1==(n=+n)?NN:function(a,e){return e-a?function(n,a,e){return n=Math.pow(n,e),a=Math.pow(a,e)-n,e=1/e,function(r){return Math.pow(n+r*a,e)}}(a,e,n):FN(isNaN(a)?e:a)}}(a);function r(o,u){var f=e((o=Pb(o)).r,(u=Pb(u)).r),p=e(o.g,u.g),v=e(o.b,u.b),g=NN(o.opacity,u.opacity);return function(y){return o.r=f(y),o.g=p(y),o.b=v(y),o.opacity=g(y),o+""}}return r.gamma=n,r}(1);function BN(n){return function(a){var f,p,e=a.length,r=new Array(e),o=new Array(e),u=new Array(e);for(f=0;f<e;++f)p=Pb(a[f]),r[f]=p.r||0,o[f]=p.g||0,u[f]=p.b||0;return r=n(r),o=n(o),u=n(u),p.opacity=1,function(v){return p.r=r(v),p.g=o(v),p.b=u(v),p+""}}}BN(function(n){var a=n.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,a-1):Math.floor(e*a),o=n[r],u=n[r+1];return LN((e-r/a)*a,r>0?n[r-1]:2*o-u,o,u,r<a-1?n[r+2]:2*u-o)}}),BN(function(n){var a=n.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*a);return LN((e-r/a)*a,n[(r+a-1)%a],n[r%a],n[(r+1)%a],n[(r+2)%a])}});var sM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uM=new RegExp(sM.source,"g");function M$(n,a){var r,o,u,e=sM.lastIndex=uM.lastIndex=0,f=-1,p=[],v=[];for(n+="",a+="";(r=sM.exec(n))&&(o=uM.exec(a));)(u=o.index)>e&&(u=a.slice(e,u),p[f]?p[f]+=u:p[++f]=u),(r=r[0])===(o=o[0])?p[f]?p[f]+=o:p[++f]=o:(p[++f]=null,v.push({i:f,x:zc(r,o)})),e=uM.lastIndex;return e<a.length&&(u=a.slice(e),p[f]?p[f]+=u:p[++f]=u),p.length<2?v[0]?function(n){return function(a){return n(a)+""}}(v[0].x):function(n){return function(){return n}}(a):(a=v.length,function(g){for(var _,y=0;y<a;++y)p[(_=v[y]).i]=_.x(g);return p.join("")})}function HN(n,a){var e;return("number"==typeof a?zc:a instanceof s_?GN:(e=s_(a))?(a=e,GN):M$)(n,a)}function O$(n){return function(){this.removeAttribute(n)}}function P$(n){return function(){this.removeAttributeNS(n.space,n.local)}}function I$(n,a,e){var r,u,o=e+"";return function(){var f=this.getAttribute(n);return f===o?null:f===r?u:u=a(r=f,e)}}function L$(n,a,e){var r,u,o=e+"";return function(){var f=this.getAttributeNS(n.space,n.local);return f===o?null:f===r?u:u=a(r=f,e)}}function F$(n,a,e){var r,o,u;return function(){var f,v,p=e(this);return null==p?void this.removeAttribute(n):(f=this.getAttribute(n))===(v=p+"")?null:f===r&&v===o?u:(o=v,u=a(r=f,p))}}function k$(n,a,e){var r,o,u;return function(){var f,v,p=e(this);return null==p?void this.removeAttributeNS(n.space,n.local):(f=this.getAttributeNS(n.space,n.local))===(v=p+"")?null:f===r&&v===o?u:(o=v,u=a(r=f,p))}}function G$(n,a){return function(e){this.setAttribute(n,a.call(this,e))}}function B$(n,a){return function(e){this.setAttributeNS(n.space,n.local,a.call(this,e))}}function H$(n,a){var e,r;function o(){var u=a.apply(this,arguments);return u!==r&&(e=(r=u)&&B$(n,u)),e}return o._value=a,o}function V$(n,a){var e,r;function o(){var u=a.apply(this,arguments);return u!==r&&(e=(r=u)&&G$(n,u)),e}return o._value=a,o}function U$(n,a){return function(){tM(this,n).delay=+a.apply(this,arguments)}}function z$(n,a){return a=+a,function(){tM(this,n).delay=a}}function q$(n,a){return function(){Ou(this,n).duration=+a.apply(this,arguments)}}function K$(n,a){return a=+a,function(){Ou(this,n).duration=a}}function $$(n,a){if("function"!=typeof a)throw new Error;return function(){Ou(this,n).ease=a}}function nX(n,a,e){var r,o,u=function(n){return(n+"").trim().split(/^|\s+/).every(function(a){var e=a.indexOf(".");return e>=0&&(a=a.slice(0,e)),!a||"start"===a})}(a)?tM:Ou;return function(){var f=u(this,n),p=f.on;p!==r&&(o=(r=p).copy()).on(a,e),f.on=o}}var uX=Qy.prototype.constructor;function VN(n){return function(){this.style.removeProperty(n)}}function vX(n,a,e){return function(r){this.style.setProperty(n,a.call(this,r),e)}}function gX(n,a,e){var r,o;function u(){var f=a.apply(this,arguments);return f!==o&&(r=(o=f)&&vX(n,f,e)),r}return u._value=a,u}function wX(n){return function(a){this.textContent=n.call(this,a)}}function SX(n){var a,e;function r(){var o=n.apply(this,arguments);return o!==e&&(a=(e=o)&&wX(o)),a}return r._value=n,r}var RX=0;function El(n,a,e,r){this._groups=n,this._parents=a,this._name=e,this._id=r}function WN(){return++RX}var xl=Qy.prototype;El.prototype=function(n){return Qy().transition(n)}.prototype=Rn({constructor:El,select:function(n){var a=this._name,e=this._id;"function"!=typeof n&&(n=YA(n));for(var r=this._groups,o=r.length,u=new Array(o),f=0;f<o;++f)for(var y,_,p=r[f],v=p.length,g=u[f]=new Array(v),C=0;C<v;++C)(y=p[C])&&(_=n.call(y,y.__data__,C,p))&&("__data__"in y&&(_.__data__=y.__data__),g[C]=_,Db(g[C],a,e,C,g,Xs(y,e)));return new El(u,this._parents,a,e)},selectAll:function(n){var a=this._name,e=this._id;"function"!=typeof n&&(n=Jk(n));for(var r=this._groups,o=r.length,u=[],f=[],p=0;p<o;++p)for(var y,v=r[p],g=v.length,_=0;_<g;++_)if(y=v[_]){for(var w,C=n.call(y,y.__data__,_,v),x=Xs(y,e),E=0,b=C.length;E<b;++E)(w=C[E])&&Db(w,a,e,E,C,x);u.push(C),f.push(y)}return new El(u,f,a,e)},selectChild:xl.selectChild,selectChildren:xl.selectChildren,filter:function(n){"function"!=typeof n&&(n=Zk(n));for(var a=this._groups,e=a.length,r=new Array(e),o=0;o<e;++o)for(var v,u=a[o],f=u.length,p=r[o]=[],g=0;g<f;++g)(v=u[g])&&n.call(v,v.__data__,g,u)&&p.push(v);return new El(r,this._parents,this._name,this._id)},merge:function(n){if(n._id!==this._id)throw new Error;for(var a=this._groups,e=n._groups,r=a.length,u=Math.min(r,e.length),f=new Array(r),p=0;p<u;++p)for(var C,v=a[p],g=e[p],y=v.length,_=f[p]=new Array(y),w=0;w<y;++w)(C=v[w]||g[w])&&(_[w]=C);for(;p<r;++p)f[p]=a[p];return new El(f,this._parents,this._name,this._id)},selection:function(){return new uX(this._groups,this._parents)},transition:function(){for(var n=this._name,a=this._id,e=WN(),r=this._groups,o=r.length,u=0;u<o;++u)for(var v,f=r[u],p=f.length,g=0;g<p;++g)if(v=f[g]){var y=Xs(v,a);Db(v,n,e,g,f,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new El(r,this._parents,n,e)},call:xl.call,nodes:xl.nodes,node:xl.node,size:xl.size,empty:xl.empty,each:xl.each,on:function(n,a){var e=this._id;return arguments.length<2?Xs(this.node(),e).on.on(n):this.each(nX(e,n,a))},attr:function(n,a){var e=Cb(n),r="transform"===e?c$:HN;return this.attrTween(n,"function"==typeof a?(e.local?k$:F$)(e,r,rM(this,"attr."+n,a)):null==a?(e.local?P$:O$)(e):(e.local?L$:I$)(e,r,a))},attrTween:function(n,a){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==a)return this.tween(e,null);if("function"!=typeof a)throw new Error;var r=Cb(n);return this.tween(e,(r.local?H$:V$)(r,a))},style:function(n,a,e){var r="transform"==(n+="")?l$:HN;return null==a?this.styleTween(n,function(n,a){var e,r,o;return function(){var u=_v(this,n),f=(this.style.removeProperty(n),_v(this,n));return u===f?null:u===e&&f===r?o:o=a(e=u,r=f)}}(n,r)).on("end.style."+n,VN(n)):"function"==typeof a?this.styleTween(n,function(n,a,e){var r,o,u;return function(){var f=_v(this,n),p=e(this),v=p+"";return null==p&&(this.style.removeProperty(n),v=p=_v(this,n)),f===v?null:f===r&&v===o?u:(o=v,u=a(r=f,p))}}(n,r,rM(this,"style."+n,a))).each(function(n,a){var e,r,o,p,u="style."+a,f="end."+u;return function(){var v=Ou(this,n),g=v.on,y=null==v.value[u]?p||(p=VN(a)):void 0;(g!==e||o!==y)&&(r=(e=g).copy()).on(f,o=y),v.on=r}}(this._id,n)):this.styleTween(n,function(n,a,e){var r,u,o=e+"";return function(){var f=_v(this,n);return f===o?null:f===r?u:u=a(r=f,e)}}(n,r,a),e).on("end.style."+n,null)},styleTween:function(n,a,e){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==a)return this.tween(r,null);if("function"!=typeof a)throw new Error;return this.tween(r,gX(n,a,null==e?"":e))},text:function(n){return this.tween("text","function"==typeof n?function(n){return function(){var a=n(this);this.textContent=null==a?"":a}}(rM(this,"text",n)):function(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function(n){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(null==n)return this.tween(a,null);if("function"!=typeof n)throw new Error;return this.tween(a,SX(n))},remove:function(){return this.on("end.remove",function(n){return function(){var a=this.parentNode;for(var e in this.__transition)if(+e!==n)return;a&&a.removeChild(this)}}(this._id))},tween:function(n,a){var e=this._id;if(n+="",arguments.length<2){for(var f,r=Xs(this.node(),e).tween,o=0,u=r.length;o<u;++o)if((f=r[o]).name===n)return f.value;return null}return this.each((null==a?d$:f$)(e,n,a))},delay:function(n){var a=this._id;return arguments.length?this.each(("function"==typeof n?U$:z$)(a,n)):Xs(this.node(),a).delay},duration:function(n){var a=this._id;return arguments.length?this.each(("function"==typeof n?q$:K$)(a,n)):Xs(this.node(),a).duration},ease:function(n){var a=this._id;return arguments.length?this.each($$(a,n)):Xs(this.node(),a).ease},easeVarying:function(n){if("function"!=typeof n)throw new Error;return this.each(function(n,a){return function(){var e=a.apply(this,arguments);if("function"!=typeof e)throw new Error;Ou(this,n).ease=e}}(this._id,n))},end:function(){var n,a,e=this,r=e._id,o=e.size();return new Promise(function(u,f){var p={value:f},v={value:function(){0==--o&&u()}};e.each(function(){var g=Ou(this,r),y=g.on;y!==n&&((a=(n=y).copy())._.cancel.push(p),a._.interrupt.push(p),a._.end.push(v)),g.on=a}),0===o&&u()})}},Symbol.iterator,xl[Symbol.iterator]);var AX={time:null,delay:0,duration:250,ease:function(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};function MX(n,a){for(var e;!(e=n.__transition)||!(e=e[a]);)if(!(n=n.parentNode))throw new Error("transition ".concat(a," not found"));return e}function u_(n){return{type:n}}function Ev(n,a,e){this.k=n,this.x=a,this.y=e}function KX(n,a){1&n&&(s(0,"div"),s(1,"p"),oe(2,"Fetching..."),l(),l())}function YX(n,a){1&n&&(s(0,"div"),s(1,"p"),oe(2,"Sorry, this app had a problem getting that info."),l(),l())}function $X(n,a){if(1&n&&c(0,"div",34),2&n){var e=ye(2).index,r=ye(4);gh("width",r.DISPLAY_WIDTH,"px")("height",r.DISPLAY_HEIGHT,"px"),d("id","model_display_"+e)}}function XX(n,a){if(1&n&&(s(0,"div",35),c(1,"img",36),l()),2&n){var e=ye().$implicit,r=ye(5);gh("width",r.DISPLAY_WIDTH,"px")("height",r.DISPLAY_HEIGHT,"px"),J(1),d("src",e.screenshotDataUrl,li)}}function JX(n,a){if(1&n&&(s(0,"div",31),Ge(1,$X,1,5,"div",32),Ge(2,XX,2,5,"div",33),l()),2&n){var e=a.$implicit;J(1),d("ngIf",!e.screenshotDataUrl),J(1),d("ngIf",e.screenshotDataUrl)}}function ZX(n,a){if(1&n&&(s(0,"span"),oe(1),l()),2&n){var e=ye().$implicit;J(1),Jd("\xa0@\xa0xyz(",e.x,", ",e.y,", ",e.z,")")}}function QX(n,a){if(1&n&&(s(0,"div"),s(1,"span",23),oe(2),l(),s(3,"span"),oe(4," ( "),c(5,"div",37),oe(6," ) "),Ge(7,ZX,2,3,"span",12),l(),l()),2&n){var e=a.$implicit,r=a.index;J(2),Ct("",3==r?"G":r+1,":"),J(3),gh("background-color","rgb("+e.r+","+e.g+","+e.b+")"),J(2),d("ngIf",null!=e.x)}}function eJ(n,a){if(1&n&&(s(0,"span"),s(1,"span",23),oe(2),l(),oe(3),l()),2&n){var e=a.$implicit,r=a.index;J(2),Ct("",r,":"),J(1),Ct("\xa0",e.substring(0,4)," ")}}Qy.prototype.interrupt=function(n){return this.each(function(){!function(n,a){var r,o,f,e=n.__transition,u=!0;if(e){for(f in a=null==a?null:a+"",e)(r=e[f]).name===a?(o=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(o?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete e[f]):u=!1;u&&delete n.__transition}}(this,n)})},Qy.prototype.transition=function(n){var a,e;n instanceof El?(a=n._id,n=n._name):(a=WN(),(e=AX).time=JA(),n=null==n?null:n+"");for(var r=this._groups,o=r.length,u=0;u<o;++u)for(var v,f=r[u],p=f.length,g=0;g<p;++g)(v=f[g])&&Db(v,n,a,g,f,e||MX(v,a));return new El(r,this._parents,n,a)},Math,Math,Math,["w","e"].map(u_),["n","s"].map(u_),["n","w","e","s","nw","ne","sw","se"].map(u_),Ev.prototype={constructor:Ev,scale:function(a){return 1===a?this:new Ev(this.k*a,this.x,this.y)},translate:function(a,e){return 0===a&0===e?this:new Ev(this.k,this.x+this.k*a,this.y+this.k*e)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Ev(1,0,0);var l_=function(a){return[a]},tJ=function(a,e,r,o){return[a,e,r,o]};function nJ(n,a){if(1&n&&(s(0,"div",26),Ge(1,JX,3,2,"div",27),s(2,"div",28),s(3,"b"),oe(4),l(),l(),c(5,"div",29),s(6,"b"),oe(7,"Model:"),l(),oe(8,"\xa0"),s(9,"a",30),oe(10),l(),oe(11," \xb7 "),s(12,"b"),oe(13,"Scale:"),l(),oe(14),c(15,"br"),s(16,"div",23),oe(17,"Lights:"),l(),Ge(18,QX,8,4,"div",15),s(19,"div",23),oe(20,"Animations:"),l(),Ge(21,eJ,4,2,"span",15),c(22,"br"),l()),2&n){var e=a.$implicit,r=ye(4);J(1),d("ngForOf",wh(7,l_,r.getDisplay(e.hrcId))),J(3),cn(e.name),J(5),er("href","field-model-details/",e.hrcIdShort,"",li),J(1),cn(e.hrcId),J(4),Ct(" ",e.scaleString," "),J(4),d("ngForOf",gP(9,tJ,e.light1,e.light2,e.light3,e.globalLight)),J(3),d("ngForOf",e.animations)}}function rJ(n,a){if(1&n&&(s(0,"div",21),s(1,"div",3),oe(2,"Model Loader Section"),l(),c(3,"div",13),s(4,"div"),oe(5),l(),c(6,"div",22),s(7,"div",23),oe(8,"Model Loaders"),l(),s(9,"div",24),Ge(10,nJ,23,14,"div",25),l(),l()),2&n){var e=a.$implicit;J(5),Ct("Scale: ",e.header.modelScale,""),J(5),d("ngForOf",e.modelLoaders)}}function iJ(n,a){if(1&n){var e=L();s(0,"div",39),s(1,"div",40),s(2,"b"),oe(3,"From Line:"),l(),oe(4),l(),s(5,"div",40),s(6,"b"),oe(7,"To Map:"),l(),oe(8,"\xa0"),s(9,"a",41),ae("click",function(){var f=lr(e).$implicit;return ye(4).onSelectFieldName(f.fieldName)}),oe(10),l(),oe(11," \xa0 "),s(12,"b"),oe(13,"Position:"),l(),oe(14),l(),l()}if(2&n){var r=a.$implicit;J(4),YR(" (",r.exitLineVertex1.x,", ",r.exitLineVertex1.y,", ",r.exitLineVertex1.z,") - (",r.exitLineVertex2.x,", ",r.exitLineVertex2.y,", ",r.exitLineVertex2.z,") "),J(6),zi("",r.fieldName," (",r.fieldId,")"),J(4),Jd("\xa0 (",r.destinationVertex.x,", ",r.destinationVertex.y,", ",r.destinationVertex.z,") ")}}function oJ(n,a){if(1&n&&(s(0,"div",21),s(1,"div",3),oe(2,"Triggers/Gateways Section"),l(),c(3,"div",13),s(4,"div",24),Ge(5,iJ,15,11,"div",38),l(),l()),2&n){var e=a.$implicit;J(5),d("ngForOf",e.gateways)}}function aJ(n,a){if(1&n&&(s(0,"div",50),s(1,"div",51),oe(2),l(),s(3,"div",52),oe(4),l(),l()),2&n){var e=a.$implicit;J(2),cn(e.raw),J(2),cn(e.js)}}function sJ(n,a){if(1&n&&(s(0,"div",47),s(1,"div"),s(2,"b"),oe(3),l(),l(),c(4,"div",48),Ge(5,aJ,5,2,"div",49),l()),2&n){var e=a.$implicit;J(3),Ct("script ",e.index,":"),J(2),d("ngForOf",e.ops)}}function uJ(n,a){if(1&n&&(s(0,"div",43),s(1,"div",44),oe(2),s(3,"span",45),oe(4),l(),l(),c(5,"div",22),Ge(6,sJ,6,2,"div",46),l()),2&n){var e=a.$implicit,r=a.index;J(2),Ct("#",r,": "),J(2),Ct('"',e.entityName,'"'),J(2),d("ngForOf",e.scripts)}}function lJ(n,a){if(1&n&&(s(0,"div",21),s(1,"div",3),oe(2,"Entities Section"),l(),c(3,"div",13),Ge(4,uJ,7,3,"div",42),l()),2&n){var e=a.$implicit;J(4),d("ngForOf",e)}}function cJ(n,a){if(1&n&&(s(0,"div"),c(1,"div",19),Ge(2,rJ,11,2,"div",20),c(3,"div",19),Ge(4,oJ,6,1,"div",20),c(5,"div",13),Ge(6,lJ,5,1,"div",20),c(7,"div",13),l()),2&n){var e=ye(2);J(2),d("ngForOf",wh(3,l_,e.scene.model)),J(2),d("ngForOf",wh(5,l_,e.scene.triggers)),J(2),d("ngForOf",wh(7,l_,e.scene.script.entities))}}function dJ(n,a){if(1&n&&(s(0,"div",54),s(1,"a",55),oe(2),l(),c(3,"br"),oe(4),c(5,"br"),c(6,"img",18),l()),2&n){var e=ye().$implicit,r=ye(2);J(1),d("routerLink","/scene-details/"+e.sourceName),J(1),cn(e.sourceName),J(2),Ct(" ",e.sourceFieldMenuName,""),J(2),d("src",r.environment.KUJATA_DATA_BASE_URL+"/metadata/makou-reactor/backgrounds/"+e.sourceName+".png",li)}}function fJ(n,a){if(1&n&&(S(0),Ge(1,dJ,7,4,"div",53),R()),2&n){var e=a.$implicit;J(1),d("ngIf","inbound"==e.direction)}}function pJ(n,a){if(1&n&&(s(0,"div",54),s(1,"a",55),oe(2),l(),c(3,"br"),oe(4),c(5,"br"),c(6,"img",18),l()),2&n){var e=ye().$implicit,r=ye(2);J(1),d("routerLink","/scene-details/"+e.targetName),J(1),cn(e.targetName),J(2),Ct(" ",e.targetFieldMenuName,""),J(2),d("src",r.environment.KUJATA_DATA_BASE_URL+"/metadata/makou-reactor/backgrounds/"+e.targetName+".png",li)}}function hJ(n,a){if(1&n&&(S(0),Ge(1,pJ,7,4,"div",53),R()),2&n){var e=a.$implicit;J(1),d("ngIf","outbound"==e.direction)}}function vJ(n,a){1&n&&(s(0,"div",21),s(1,"div",3),oe(2,"Entity Script Visualization (Experimental)"),l(),c(3,"div",13),s(4,"div",56),jt.lFrame.currentNamespace=ng,s(5,"svg",57),s(6,"style"),oe(7," text { font-size: 8pt; } tspan { font-size: 8pt; } "),l(),l(),l(),l())}function gJ(n,a){if(1&n&&(S(0),Ge(1,vJ,8,0,"div",20),R()),2&n){var e=ye(2);J(1),d("ngForOf",wh(1,l_,e.scene.model))}}function mJ(n,a){if(1&n&&(s(0,"div",1),s(1,"div",2),s(2,"div",3),oe(3),l(),s(4,"div",4),oe(5),l(),l(),s(6,"div",2),s(7,"div",5),s(8,"div",6),s(9,"div",7),oe(10,"Background"),l(),s(11,"div",8),c(12,"img",9),l(),l(),c(13,"div",10),s(14,"div"),s(15,"div",7),oe(16,"Walkmesh"),l(),c(17,"div",11),l(),l(),l(),Ge(18,KX,3,0,"div",12),Ge(19,YX,3,0,"div",12),Ge(20,cJ,8,9,"div",12),c(21,"div",13),s(22,"div",14),s(23,"div",3),oe(24,"Field Links (Experimental)"),l(),s(25,"div",4),oe(26,"(Based on Gateway data and Mapjump Ops)"),l(),c(27,"div",13),s(28,"div",5),Ge(29,fJ,2,1,"ng-container",15),s(30,"div",16),oe(31,"\u2192"),l(),S(32),s(33,"div",17),s(34,"b"),oe(35),l(),c(36,"br"),s(37,"b"),oe(38),l(),c(39,"br"),c(40,"img",18),l(),R(),s(41,"div",16),oe(42,"\u2192"),l(),Ge(43,hJ,2,1,"ng-container",15),l(),l(),c(44,"div",13),Ge(45,gJ,2,3,"ng-container",12),l()),2&n){var e=ye();J(3),cn(e.selectedFieldName),J(2),cn(e.selectedFieldMenuName),J(7),d("src","https://makou-reactor-bg-images.netlify.app/"+e.selectedFieldName+".png",li),J(6),d("ngIf","FETCHING"==e.fetchStatus),J(1),d("ngIf","ERROR"==e.fetchStatus),J(1),d("ngIf","SUCCESS"==e.fetchStatus),J(9),d("ngForOf",e.fieldLinks),J(6),cn(e.selectedFieldName),J(3),cn(e.selectedFieldMenuName),J(2),d("src",e.environment.KUJATA_DATA_BASE_URL+"/metadata/makou-reactor/backgrounds/"+e.selectedFieldName+".png",li),J(3),d("ngForOf",e.fieldLinks),J(2),d("ngIf",e.scene)}}var yJ=function(){var n=function(){function a(e,r){N(this,a),this.route=e,this.http=r,this.fetchStatus="NONE",this.fieldLinks=null,this.environment=vn,this.mapList=null,this.sceneGraph=null,this.fieldIdToFieldMetadataMap=null,this.fieldNameToFieldMetadataMap=null,this.selectedFieldName=null,this.selectedFieldMenuName=null,this.GRID_X=150,this.GRID_Y=75,this.PSX_RES_X=320,this.PSX_RES_Y=224,this.NODE_SPACE_PROPORTION=.8,this.LABEL_LINE_LENGTH=18,this.DISPLAY_WIDTH=100,this.DISPLAY_HEIGHT=100,this.rendererGlobal=new Tu({alpha:!0,antialias:!0}),this.displayMap=null,this.isDestroyed=!1,console.log("scene-details component constructor")}return j(a,[{key:"ngOnInit",value:function(){var r=this;console.log("scene-details component ngOnInit()"),this.clock=new Sl;var o=vn.KUJATA_DATA_BASE_URL+"/data/field/flevel.lgp/maplist.json";this.http.get(o).subscribe(function(u){r.mapList=u,console.log("this.mapList:",r.mapList),r.initialize()},function(u){r.fetchStatus="ERROR"}),this.http.get(o=vn.KUJATA_DATA_BASE_URL+"/metadata/scene-graph.json").subscribe(function(u){r.sceneGraph=u,r.fieldIdToFieldMetadataMap={},r.fieldNameToFieldMetadataMap={};var p,f=Pt(r.sceneGraph.nodes);try{for(f.s();!(p=f.n()).done;){var v=p.value;r.fieldIdToFieldMetadataMap[v.id]=v,r.fieldNameToFieldMetadataMap[v.fieldName]=v}}catch(g){f.e(g)}finally{f.f()}r.initialize()},function(u){r.fetchStatus="ERROR"}),this.route.paramMap.subscribe(function(u){var f=u.get("name");r.selectedFieldName=f,r.initialize()})}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0}},{key:"idToMetadata",value:function(r){return this.fieldIdToFieldMetadataMap[r]}},{key:"fieldNameToMetadata",value:function(r){return this.fieldNameToFieldMetadataMap[r]}},{key:"idFor",value:function(r){return this.fieldNameToMetadata(r).id}},{key:"fieldNameFor",value:function(r){return this.idToMetadata(r).fieldName}},{key:"getFieldMenuName",value:function(r){return""!==r.mapName?r.mapName:r.fieldName}},{key:"initialize",value:function(){var r=this;if(null!=this.mapList&&null!=this.sceneGraph&&null!=this.selectedFieldName){console.log("ready to initialize!");var o=this.fieldNameToMetadata(this.selectedFieldName),u=o.id;this.selectedFieldMenuName=this.getFieldMenuName(o),this.fieldLinks=[];var g,f={},p={},v=Pt(this.sceneGraph.links);try{for(v.s();!(g=v.n()).done;){var y=g.value;if(y.source==u){var _=this.idToMetadata(y.target);p[_.id]={direction:"outbound",sourceId:u,sourceName:this.selectedFieldName,targetId:_.id,targetName:_.fieldName,targetFieldMenuName:this.getFieldMenuName(_)}}if(y.target==u){var C=this.idToMetadata(y.source);f[C.id]={direction:"inbound",sourceId:C.id,sourceName:C.fieldName,sourceFieldMenuName:this.getFieldMenuName(C),targetId:u,targetName:this.selectedFieldName}}}}catch(O){v.e(O)}finally{v.f()}for(var w=0,x=Object.keys(f);w<x.length;w++)this.fieldLinks.push(f[x[w]]);for(var b=0,T=Object.keys(p);b<T.length;b++)this.fieldLinks.push(p[T[b]]);console.log("this.fieldLinks:",this.fieldLinks),this.fetchStatus="FETCHING",this.http.get(vn.KUJATA_DATA_BASE_URL+"/data/field/flevel.lgp/"+this.selectedFieldName+".json").subscribe(function(O){r.fetchStatus="SUCCESS",r.scene=O,r.displays=[],r.displayMap={};for(var I=r.scene.model.modelLoaders,B=0;B<I.length;B++){var z=I[B];z.hrcIdShort=z.hrcId.toLowerCase().replace(".hrc","");var X=r.createEmptyDisplay({id:z.hrcId,name:"TODO"},"model_display_"+B,200,200);r.displays.push(X),r.displayMap[z.hrcId]=X}setTimeout(function(){r.recursiveLoadSkeletonAndAddToDisplay(0)},250),setTimeout(function(){r.buildGraph()},250),r.createWalkmeshDisplay()},function(O){r.fetchStatus="ERROR"})}}},{key:"createWalkmeshDisplay",value:function(){console.log("Creating walkmesh display...");var r=document.getElementById("walkmesh-container");if(r){for(;r.firstChild;)r.removeChild(r.firstChild);var o=this.scene;console.log("flevel:",o);var u=o.cameraSection.cameras[0],f=2*Math.atan(240/(2*u.zoom))*57.29577951;this.walkmeshRenderer=new Tu({alpha:!0,antialias:!0}),this.walkmeshRenderer.setSize(410,240),this.walkmeshScene=new _l,this.walkmeshScene.background=new Ht(2236962),this.walkmeshCamera=new kr(f,410/240,.001/4096,24.4140625);var y=-u.yAxis.x/4096,_=-u.yAxis.y/4096,C=-u.yAxis.z/4096,w=u.zAxis.x/4096,x=u.zAxis.y/4096,E=u.zAxis.z/4096,b=u.position.x/4096,T=-u.position.y/4096,A=u.position.z/4096,M=-(b*(u.xAxis.x/4096)+T*y+A*w),O=-(b*(u.xAxis.y/4096)+T*_+A*x),I=-(b*(u.xAxis.z/4096)+T*C+A*E);this.walkmeshCamera.position.x=M,this.walkmeshCamera.position.y=O,this.walkmeshCamera.position.z=I,this.walkmeshCamera.lookAt(M+w,O+x,I+E),this.walkmeshCamera.up.set(y,_,C),this.walkmeshCamera.updateProjectionMatrix(),this.walkmeshScene.add(this.walkmeshCamera);var B=new Mu(16777215);B.position.set(0,0,50).normalize(),this.walkmeshScene.add(B);var z=new wl(4210752);this.walkmeshScene.add(z);for(var W=o.walkmeshSection.triangles.length,X=0;X<W;X++){var re=o.walkmeshSection.triangles[X],de=o.walkmeshSection.accessors[X],ce=new Z(re.vertices[0].x/4096,re.vertices[0].y/4096,re.vertices[0].z/4096),G=new Z(re.vertices[1].x/4096,re.vertices[1].y/4096,re.vertices[1].z/4096),te=new Z(re.vertices[2].x/4096,re.vertices[2].y/4096,re.vertices[2].z/4096),se=function(Ne,qe,Ue,je){var Wt=new cv({color:-1==je?4491468:8947848}),tt=new Pr;tt.vertices.push(qe),tt.vertices.push(Ue);var It=new Gy(tt,Wt);Ne.add(It)};se(this.walkmeshScene,ce,G,de[0]),se(this.walkmeshScene,G,te,de[1]),se(this.walkmeshScene,te,ce,de[2])}var ue,le=Pt(o.triggers.gateways);try{for(le.s();!(ue=le.n()).done;){var _e=ue.value,Re=_e.exitLineVertex1,Se=_e.exitLineVertex2,Ce=(ce=new Z(Re.x/4096,Re.y/4096,Re.z/4096),G=new Z(Se.x/4096,Se.y/4096,Se.z/4096),new cv({color:16711680})),Be=new Pr;Be.vertices.push(ce),Be.vertices.push(G);var xe=new Gy(Be,Ce);this.walkmeshScene.add(xe)}}catch(Je){le.e(Je)}finally{le.f()}this.walkmeshControls=new yb(this.walkmeshCamera,this.walkmeshRenderer.domElement),this.walkmeshControls.target=new Z(M+w,O+x,I+E),this.walkmeshControls.panSpeed=1/4,this.walkmeshControls.rotateSpeed=1/4,this.walkmeshControls.zoomSpeed=1/4,this.walkmeshControls.update(),r.appendChild(this.walkmeshRenderer.domElement),this.walkmeshRenderer.render(this.walkmeshScene,this.walkmeshCamera);var Ae=this;!function Je(){if(Ae&&!Ae.isDestroyed){requestAnimationFrame(Je);var Ne=Ae.clock.getDelta();Ae.walkmeshControls&&Ae.walkmeshControls.update(Ne),Ae.walkmeshRenderer&&Ae.walkmeshScene&&Ae.walkmeshCamera&&Ae.walkmeshRenderer.render(Ae.walkmeshScene,Ae.walkmeshCamera)}else console.log("stopping walkmeshTick()")}()}else console.log("WARN: Could not find walkmeshContainerElement")}},{key:"createEmptyDisplay",value:function(r,o,u,f){var p={containerId:o,skeleton:r,scene:new _l,camera:new kr(45,this.DISPLAY_WIDTH/this.DISPLAY_HEIGHT,.1,1e3),renderer:null};p.containerId=o,p.scene.background=new Ht(5263440),p.scene.add(p.camera);var v=new Mu(16777215);v.position.set(0,0,50).normalize(),p.scene.add(v);var g=new wl(4210752);return p.scene.add(g),p.camera.position.x=0,p.camera.position.y=33.53,p.camera.position.z=60,p.camera.lookAt(new Z(0,13.53,0)),p}},{key:"getDisplay",value:function(r){return this.displayMap[r]}},{key:"showDisplay",value:function(r,o,u){var f=r.displays[o];f.renderer=r.rendererGlobal,f.renderer.setSize(this.DISPLAY_WIDTH,this.DISPLAY_HEIGHT);var p=document.getElementById(f.containerId);p?(p.appendChild(f.renderer.domElement),f.renderer.render(f.scene,f.camera),f.screenshotDataUrl=f.renderer.domElement.toDataURL(),f.renderer.dispose(),f.renderer=null):console.log("WARN: Could not find element by display.containerId, display: ",f)}},{key:"recursiveLoadSkeletonAndAddToDisplay",value:function(r){var o=this;if(!(r>=o.displays.length)){var u=o.displays[r],f=u.skeleton;(new Hc).load(vn.KUJATA_DATA_BASE_URL+"/data/field/char.lgp/"+f.id.toLowerCase()+".gltf",function(v){Uc(v);var g=v.scene,y=g.children[0];y.position.x=0,y.position.y=0,y.position.z=0,u.scene.add(g),o.showDisplay(o,r,10),o.recursiveLoadSkeletonAndAddToDisplay(r+1)},void 0,function(v){console.error("oops!",v),o.recursiveLoadSkeletonAndAddToDisplay(r+1)})}}},{key:"addNodeToGraphAndMap",value:function(r){this.graph.nodes.push(r),this.nodeMap[r.id]=r}},{key:"buildGraph",value:function(){this.graph={rows:[],nodes:[],links:[]},this.nodeMap={};for(var o=0,u=0,f=[],p=0;p<this.scene.script.entities.length;p++)for(var v=this.scene.script.entities[p],g=0;g<v.scripts.length;g++){var y=v.scripts[g];if(y.ops.length<=1)console.log("Skipping script of length <= 1, ops = ",y.ops);else{var _=[];u=0;var C={type:"scriptStart",id:"scriptStart|"+p+"|"+g,row:o,col:u++,name:p+":"+v.entityName+", Script "+g,labelLines:[]};C.labelLines=this.stringToLines(C.name,this.LABEL_LINE_LENGTH),_.push(C),this.addNodeToGraphAndMap(C);for(var w=0;w<y.ops.length;w++){var x=y.ops[w],E={type:"RET"==x.op?"scriptEnd":"op",id:"op|"+p+"|"+g+"|"+w,row:o,col:u++,name:x.js,pres:x.pres,labelLines:[]};E.labelLines=this.stringToLines(E.pres?E.pres:E.name,this.LABEL_LINE_LENGTH),_.push(E),this.addNodeToGraphAndMap(E),this.graph.links.push({source:this.graph.nodes[this.graph.nodes.length-2],target:E,type:"script"}),("REQ"==x.op||"REQSW"==x.op||"REQEW"==x.op)&&f.push({source:E,targetId:"scriptStart|"+x.e+"|"+x.f,type:"REQ"})}this.graph.rows.push(_),o++}}for(var M=0,O=f;M<O.length;M++){var I=O[M];I.targetId&&!I.target&&(I.target=this.nodeMap[I.targetId],I.target?this.graph.links.push(I):console.log("WARNING: Did not show link for execution of empty script:",I))}this.drawGraph()}},{key:"getNodeCenterX",value:function(r){return(r.col+this.NODE_SPACE_PROPORTION)*this.GRID_X}},{key:"getNodeCenterY",value:function(r){return(r.row+this.NODE_SPACE_PROPORTION)*this.GRID_Y}},{key:"getNodeWidth",value:function(r){return this.GRID_X/2*this.NODE_SPACE_PROPORTION*2}},{key:"getNodeHeight",value:function(r){return this.GRID_Y/2*this.NODE_SPACE_PROPORTION*2}},{key:"getNodeRightEdgeX",value:function(r){return this.getNodeCenterX(r)+this.getNodeWidth(r)/2}},{key:"getNodeLeftEdgeX",value:function(r){return this.getNodeCenterX(r)-this.getNodeWidth(r)/2}},{key:"lastIndexOfMulti",value:function(r,o){var p,u=-1,f=Pt(o);try{for(f.s();!(p=f.n()).done;){var g=r.lastIndexOf(p.value);g>u&&(u=g)}}catch(y){f.e(y)}finally{f.f()}return u}},{key:"stringToLines",value:function(r,o){if(!o)throw new Error("maxLineLength required");for(var u=[],f=r;u.length<10;){if(f.length<=o)return u.push(f),u;var v=f.substring(0,o),g=this.lastIndexOfMulti(v,[" ","{","("]);-1==g&&(g=o);var y=f.substring(0,g+1);u.push(y),f=f.substring(g+1)}return console.log("WARNING: maxines reached!"),u}},{key:"drawGraph",value:function(){var r=this;console.log("graph:",this.graph);var o=function(n){return new Ta([[document.querySelector(n)]],[document.documentElement])}("svg");o.selectAll("g").remove();var u=o.append("g").attr("class","view"),f=u.append("g").attr("class","links").selectAll("line").data(this.graph.links).enter().append("line").attr("stroke-width",function(C){return 2}).attr("stroke",function(C){return"gray"}),p=u.append("g").attr("class","nodes").selectAll("g").data(this.graph.nodes).enter().append("g").attr("transform",function(C){return"translate("+r.getNodeCenterX(C)+" "+r.getNodeCenterY(C)+")"});f.attr("x1",function(C){return r.getNodeRightEdgeX(C.source)}).attr("y1",function(C){return r.getNodeCenterY(C.source)}).attr("x2",function(C){return r.getNodeLeftEdgeX(C.target)}).attr("y2",function(C){return r.getNodeCenterY(C.target)}),p.append("rect").attr("rx",function(C){return.05*r.GRID_X}).attr("ry",function(C){return.05*r.GRID_X}).attr("x",function(C){return-r.getNodeWidth(C)/2}).attr("y",function(C){return-r.getNodeHeight(C)/2}).attr("width",function(C){return r.getNodeWidth(C)}).attr("height",function(C){return r.getNodeHeight(C)}).attr("stroke",function(C){return"scriptStart"==C.type?"#339933":"scriptEnd"==C.type?"#993333":"gray"}).attr("stroke-width","2").attr("fill",function(C){return"white"});for(var g=p.append("text").attr("fill",function(C){return"#333"}).attr("x",0).attr("y",function(C){return C.labelLines||console.log("This does not have labelLines:",C),-C.labelLines.length/2-.5+"em"}).attr("text-anchor","middle").attr("alignment-baseline","central"),y=function(w){g.filter(function(x){return x.labelLines.length>w}).append("tspan").attr("x",0).attr("dy","1em").attr("text-anchor","middle").attr("alignment-baseline","central").text(function(x){return x.labelLines[w]})},_=0;_<10;_++)y(_)}},{key:"onSelectHrcId",value:function(r){}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(zs),st(sa))},n.\u0275cmp=Er({type:n,selectors:[["scene-details"]],decls:1,vars:1,consts:[["style","background-color:#c0c0c0; padding:4px;",4,"ngIf"],[2,"background-color","#c0c0c0","padding","4px"],[2,"background-color","white","padding","4px","margin-bottom","4px"],[2,"font-size","20pt","color","#404040"],[2,"font-size","16pt","color","#808080"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","font-size","10pt","background-color","#e0e0e0","padding","16px"],[2,"width","410px"],[2,"font-size","12pt","text-align","center"],[2,"width","410px","height","240px","background-color","#222222","text-align","center"],[2,"display","inline-block","max-width","410px","max-height","240px","width","auto","height","auto","padding","0px","margin","0",3,"src"],[2,"width","4px"],["id","walkmesh-container",2,"display","inline-block","width","410px","height","240px","background-color","#222222","padding","0px"],[4,"ngIf"],[2,"height","16px"],[2,"width","100%","height","100%","padding","16px","background-color","white"],[4,"ngFor","ngForOf"],[2,"padding","100px 8px 8px 8px"],[2,"width","200px","height","250px","text-align","center","background-color","white","border","solid #555 2px"],[2,"max-width","200px","max-height","200px","width","auto","height","auto",3,"src"],[2,"height","1em"],["style","background-color:white; padding:16px;",4,"ngFor","ngForOf"],[2,"background-color","white","padding","16px"],[2,"height","8px"],[2,"font-weight","bold"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","background-color","#e0e0e0","padding","16px","margin-bottom","16px"],["style","font-size:8pt; background-color:white; width:260px; height:450px; padding:16px; margin:0px 16px 16px 0px;",4,"ngFor","ngForOf"],[2,"font-size","8pt","background-color","white","width","260px","height","450px","padding","16px","margin","0px 16px 16px 0px"],["style","background-color:white; margin:16px 16px 16px 16px;",4,"ngFor","ngForOf"],[2,"font-size","10pt","margin","auto","text-align","center"],[2,"height","1.0em"],[3,"href"],[2,"background-color","white","margin","16px 16px 16px 16px"],["style","margin:auto; background-color:#808080",3,"width","height","id",4,"ngIf"],["style","margin:auto; background-color:white",3,"width","height",4,"ngIf"],[2,"margin","auto","background-color","#808080",3,"id"],[2,"margin","auto","background-color","white"],[3,"src"],[2,"display","inline-block","width","0.75em","height","0.75em","border","solid #808080 1px"],["style","font-size:8pt; border:solid #e0e0e0 1px; width:100; height:64; margin-right:16px; margin-bottom:16px; padding:16px; background-color:white;",4,"ngFor","ngForOf"],[2,"font-size","8pt","border","solid #e0e0e0 1px","width","100","height","64","margin-right","16px","margin-bottom","16px","padding","16px","background-color","white"],[2,"font-size","10pt"],[3,"routerLink","click"],["style","font-size:8pt; background-color:#e0e0e0; padding:16px; margin-bottom:16px; ",4,"ngFor","ngForOf"],[2,"font-size","8pt","background-color","#e0e0e0","padding","16px","margin-bottom","16px"],[2,"font-size","14pt","color","#404040"],[2,"font-size","12pt","color","#808080"],["style","background-color:white; padding:8px; margin-bottom:8px;",4,"ngFor","ngForOf"],[2,"background-color","white","padding","8px","margin-bottom","8px"],[2,"height","0.5em"],["style","font-size:8pt","class","kujata-font-mono",4,"ngFor","ngForOf"],[1,"kujata-font-mono",2,"font-size","8pt"],[2,"display","inline-block","width","24em"],[2,"display","inline-block"],["style","width:200px; height:250px; text-align:center;",4,"ngIf"],[2,"width","200px","height","250px","text-align","center"],[3,"routerLink"],[2,"width","100%","height","100%","padding","0","margin","0","background-color","#e0e0e0"],["width","100%","height","800",2,"margin","0","padding","0","font-family","'Fira Mono', monospace"]],template:function(e,r){1&e&&Ge(0,mJ,46,12,"div",0),2&e&&d("ngIf",r.selectedFieldName)},directives:[aa,Za,es],styles:[""]}),n}();function _J(n,a){if(1&n&&(s(0,"a",12),s(1,"div",13),s(2,"div",14),oe(3,"0x"),s(4,"b"),oe(5),l(),l(),s(6,"div",15),oe(7),l(),l(),s(8,"div",16),s(9,"div",17),oe(10),l(),l(),l()),2&n){var e=a.$implicit,r=ye(3);d("routerLink","/field-op-code-details/"+e),J(5),cn(e),J(2),cn(r.opMetadata[e].shortName),J(3),cn(r.opMetadata[e].description||e)}}function CJ(n,a){if(1&n&&(s(0,"div"),s(1,"div",9),oe(2),l(),s(3,"div",10),Ge(4,_J,11,4,"a",11),l(),l()),2&n){var e=a.$implicit;J(2),cn(e.name),J(2),d("ngForOf",e.opCodes)}}function wJ(n,a){if(1&n&&(s(0,"a",18),s(1,"div",14),oe(2,"0x"),s(3,"b"),oe(4),l(),l(),l()),2&n){var e=a.$implicit;d("routerLink","/field-op-code-details/"+e),J(4),cn(e)}}function SJ(n,a){if(1&n&&(s(0,"div",4),s(1,"div",5),oe(2,"Arranged by Category"),l(),c(3,"div",2),Ge(4,CJ,5,2,"div",6),c(5,"div",2),s(6,"div",5),oe(7,"All OpCodes in Numerical Order"),l(),c(8,"div",2),s(9,"div",7),Ge(10,wJ,5,2,"a",8),l(),l()),2&n){var e=ye();J(4),d("ngForOf",e.opCategories),J(6),d("ngForOf",e.opCodes)}}var bJ=function(){var n=function(){function a(e){N(this,a),this.http=e,this.opCategories=[],this.opCodes=[],this.Object=Object}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.http.get(vn.KUJATA_DATA_BASE_URL+"/metadata/op-categories.json").subscribe(function(u){r.opCategories=u,r.http.get(vn.KUJATA_DATA_BASE_URL+"/metadata/op-metadata.json").subscribe(function(p){r.opMetadata=p;for(var v=0,g=Object.keys(p);v<g.length;v++)r.opCodes.push(g[v]);r.opCodes.sort()})})}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(sa))},n.\u0275cmp=Er({type:n,selectors:[["field-op-codes"]],decls:5,vars:1,consts:[[2,"background-color","white","padding","4px","margin-bottom","4px"],[2,"font-size","24pt","color","#404040"],[2,"height","16px"],["style","font-size:12pt;",4,"ngIf"],[2,"font-size","12pt"],[2,"font-size","20pt","color","#404040"],[4,"ngFor","ngForOf"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","font-size","10pt"],["style","border:solid white 2px; color: #404040; margin:0px 4px 4px 0px; text-align:center; text-decoration:none; ",3,"routerLink",4,"ngFor","ngForOf"],[2,"font-size","16pt","color","#404040"],[1,"op-cards-container"],["class","op-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"op-card",3,"routerLink"],[2,"height","2em"],[1,"op-code"],[1,"op-short-name"],[2,"height","4em"],[1,"op-description"],[2,"border","solid white 2px","color","#404040","margin","0px 4px 4px 0px","text-align","center","text-decoration","none",3,"routerLink"]],template:function(e,r){1&e&&(s(0,"div",0),s(1,"div",1),oe(2,"Field Op Codes"),l(),c(3,"div",2),Ge(4,SJ,11,2,"div",3),l()),2&e&&(J(4),d("ngIf",r.opMetadata))},directives:[aa,Za,es],styles:[".op-cards-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:flex-start;align-content:flex-start;font-size:10pt;background-color:silver;padding:4px}.op-card[_ngcontent-%COMP%]{width:150px;height:120px;border:solid white 2px;background-color:#fff;color:#404040;margin:0 4px 4px 0;text-align:center;text-decoration:none;padding:4px}.op-card[_ngcontent-%COMP%]:hover{background-color:#fff;border:solid black 2px}.op-code[_ngcontent-%COMP%]{display:inline-block;width:50px;padding:4px;background-color:#d22;color:#fff}.op-short-name[_ngcontent-%COMP%]{display:inline-block;width:80px;padding:4px;background-color:gray;color:#fff}.op-description[_ngcontent-%COMP%]{display:inline-block;padding:4px;color:#404040}"]}),n}();function EJ(n,a){1&n&&(s(0,"div"),s(1,"p"),oe(2,"Fetching..."),l(),l())}function xJ(n,a){1&n&&(s(0,"div"),s(1,"p"),oe(2,"Sorry, this app had a problem getting that info."),l(),l())}function RJ(n,a){if(1&n){var e=L();s(0,"div"),s(1,"p"),s(2,"a",4),ae("click",function(){return lr(e),ye(2).exportToCsv()}),oe(3,"Export To CSV"),l(),l(),c(4,"ag-grid-angular",5),Sh(5,"async"),l()}if(2&n){var r=ye(2);J(4),d("gridOptions",r.gridOptions)("rowData",bh(5,3,r.rowData))("columnDefs",r.columnDefs)}}function TJ(n,a){if(1&n&&(s(0,"div",2),s(1,"h2"),oe(2),l(),s(3,"h3"),oe(4,"Usages"),l(),Ge(5,EJ,3,0,"div",3),Ge(6,xJ,3,0,"div",3),Ge(7,RJ,6,5,"div",3),l()),2&n){var e=ye();J(2),zi("Op Code ",e.selectedOpCode," - ",e.selectedOpDescription,""),J(3),d("ngIf","FETCHING"==e.fetchStatus),J(1),d("ngIf","ERROR"==e.fetchStatus),J(1),d("ngIf","SUCCESS"==e.fetchStatus)}}var DJ=function(){var n=function(){function a(e,r,o){N(this,a),this.route=e,this.router=r,this.http=o,this.selectedOpCode=null,this.selectedOpDescription="...loading...",this.selectedOpMetadata=null,this.usages=[],this.fetchStatus="NONE",this.Object=Object,this.columnDefs=[],this.rowData=sn([]),this.friendlyColumnNames={routerLink:"Router Link",fieldName:"Field",entityName:"Entity",scriptIndex:"Script",opIndex:"Line",raw:"Raw",mr:"Makou Reactor translation",js:"Javascript translation (experimental)",pres:"Dramatization (experimental)"},this.columnWidths={fieldName:100,entityName:100,op:100,mr:400,js:400,pres:400}}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.gridOptions={rowData:this.rowData,columnDefs:this.columnDefs,rowSelection:"single",onRowClicked:function(f){console.log("a row was clicked")},onColumnResized:function(f){console.log("a column was resized")},onGridReady:function(f){console.log("the grid is now ready")},suppressNoRowsOverlay:!0};var o=vn.KUJATA_DATA_BASE_URL+"/metadata/op-metadata.json";this.http.get(o).subscribe(function(u){r.opMetadata=u,r.initialize()}),this.http.get(o=vn.KUJATA_DATA_BASE_URL+"/metadata/op-metadata.json").subscribe(function(u){r.opMetadata=u,r.initialize()}),this.route.paramMap.subscribe(function(u){r.selectedOpCode=u.get("hex"),r.initialize()})}},{key:"addColumnDef",value:function(r,o){var u={headerName:this.friendlyColumnNames[r]||r,field:r,width:o,sortable:!0,filter:!0,resizable:!0,onCellClicked:void 0,cellStyle:void 0,cellRenderer:void 0};"fieldName"==r&&(u.cellRenderer=function(f){return'<a href="scene-details/'.concat(f.value,'">').concat(f.value,"</a>")}),this.columnDefs.push(u)}},{key:"initialize",value:function(){var r=this;this.opMetadata&&this.selectedOpCode&&(this.selectedOpMetadata=this.opMetadata[this.selectedOpCode],this.selectedOpDescription="".concat(this.selectedOpMetadata.shortName," - ").concat(this.selectedOpMetadata.description),this.fetchStatus="FETCHING",this.gridOptions.api&&this.gridOptions.api.showLoadingOverlay(),this.http.get(vn.KUJATA_DATA_BASE_URL+"/metadata/op-code-usages/"+this.selectedOpCode+".json").subscribe(function(u){if(r.fetchStatus="SUCCESS",r.usages=u,r.rowData=sn(r.usages),r.columnDefs=[],r.usages.length>0)for(var f=r.usages[0],p=0,v=Object.keys(f);p<v.length;p++){var g=v[p];"op"==g&&r.addColumnDef("raw",60+6*f.raw.length),"raw"!=g&&r.addColumnDef(g,r.columnWidths[g]||75)}r.gridOptions.api&&r.gridOptions.api.hideOverlay()},function(u){r.fetchStatus="ERROR"}))}},{key:"exportToCsv",value:function(){this.gridOptions.api.exportDataAsCsv({})}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(zs),st(Fo),st(sa))},n.\u0275cmp=Er({type:n,selectors:[["field-op-code-details"]],decls:2,vars:1,consts:[[2,"background-color","#e0e0e0","padding","16px","margin-bottom","16px"],["style","background-color:white; padding:16px;",4,"ngIf"],[2,"background-color","white","padding","16px"],[4,"ngIf"],[3,"routerLink","click"],[1,"ag-theme-balham",2,"width","100%","height","500px",3,"gridOptions","rowData","columnDefs"]],template:function(e,r){1&e&&(s(0,"div",0),Ge(1,TJ,8,5,"div",1),l()),2&e&&(J(1),d("ngIf",r.selectedOpCode))},directives:[aa,es,gL],pipes:[GT],styles:[""]}),n}();function AJ(n,a){1&n&&c(0,"div",13),2&n&&d("id",ye().$implicit.containerId)}function MJ(n,a){if(1&n&&(s(0,"div",14),c(1,"img",15),l()),2&n){var e=ye().$implicit;J(1),d("src",e.screenshotDataUrl,li)}}function OJ(n,a){if(1&n&&(s(0,"a",7),Ge(1,AJ,1,1,"div",8),Ge(2,MJ,2,1,"div",9),s(3,"div",10),s(4,"div",11),s(5,"b"),oe(6),l(),l(),s(7,"div",12),s(8,"b"),oe(9),l(),l(),l(),l()),2&n){var e=a.$implicit;d("routerLink","/field-model-details/"+e.skeleton),J(1),d("ngIf",!e.screenshotDataUrl),J(1),d("ngIf",e.screenshotDataUrl),J(4),cn(e.friendlyName),J(3),cn(e.skeleton)}}function PJ(n,a){if(1&n&&(s(0,"tr"),s(1,"td"),oe(2),l(),s(3,"td"),oe(4),l(),l()),2&n){var e=ye().$implicit;J(2),cn(e.id),J(2),cn(e.name)}}function IJ(n,a){if(1&n&&(S(0),Ge(1,PJ,5,2,"tr",6),R()),2&n){var e=a.$implicit,r=ye().$implicit;J(1),d("ngIf",e.numBones==r)}}function LJ(n,a){if(1&n&&(s(0,"tr"),s(1,"td"),oe(2),l(),s(3,"td"),oe(4),l(),l()),2&n){var e=ye().$implicit;J(2),cn(e.id),J(2),cn(e.numFrames)}}function FJ(n,a){if(1&n&&(S(0),Ge(1,LJ,5,2,"tr",6),R()),2&n){var e=a.$implicit,r=ye().$implicit;J(1),d("ngIf",e.numBones==r)}}function kJ(n,a){if(1&n&&(s(0,"div",19),s(1,"h2",20),oe(2),l(),s(3,"div",21),s(4,"div",22),s(5,"h3"),oe(6,"Field Models"),l(),s(7,"table"),s(8,"thead"),s(9,"tr"),s(10,"th"),oe(11,"id"),l(),s(12,"th"),oe(13,"name"),l(),l(),l(),s(14,"tbody"),Ge(15,IJ,2,1,"ng-container",23),l(),l(),l(),s(16,"div",24),s(17,"h3"),oe(18,"Field Animations"),l(),s(19,"table"),s(20,"thead"),s(21,"tr"),s(22,"th"),oe(23,"id"),l(),s(24,"th"),oe(25,"numFrames"),l(),l(),l(),s(26,"tbody"),Ge(27,FJ,2,1,"ng-container",23),l(),l(),l(),l(),c(28,"div",3),l()),2&n){var e=a.$implicit,r=ye(3);J(2),Ct("Models with ",e," bones"),J(13),d("ngForOf",r.database.skeletons),J(12),d("ngForOf",r.database.animations)}}function NJ(n,a){if(1&n&&(s(0,"div",17),c(1,"div",3),Ge(2,kJ,29,3,"div",18),l()),2&n){var e=ye(2);J(2),d("ngForOf",e.uniqueBoneCounts)}}function GJ(n,a){if(1&n&&(S(0),Ge(1,NJ,3,1,"div",16),R()),2&n){var e=ye();J(1),d("ngIf",e.database)}}var BJ=function(){var n=function(){function a(e){N(this,a),this.http=e,this.environment=vn,this.rendererGlobal=new Tu({alpha:!0,antialias:!0}),this.isDestroyed=!1}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.displays=[],this.status="Loading skeleton info from database...",this.http.get(vn.KUJATA_DATA_BASE_URL+"/metadata/skeleton-names-field.json").subscribe(function(o){r.modelIds=o,r.clock=new Sl,Object.keys(r.modelIds).forEach(function(f,p){var g=r.createEmptyDisplay(f,r.modelIds[f],"ff7_scene_container"+p,200,200);r.displays.push(g)}),r.recursiveLoadSkeletonAndAddToDisplay(0)})}},{key:"ngOnChanges",value:function(r){console.log("simpleChanges:",r)}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0}},{key:"showDisplay",value:function(r,o,u){var f=r.displays[o];f.renderer=r.rendererGlobal,f.renderer.setSize(150,150),f.renderer.outputEncoding=Vn,document.getElementById(f.containerId).appendChild(f.renderer.domElement),f.renderer.render(f.scene,f.camera),f.screenshotDataUrl=f.renderer.domElement.toDataURL(),f.renderer.dispose(),f.renderer=null}},{key:"createEmptyDisplay",value:function(r,o,u,f,p){var v={containerId:u,skeleton:r,friendlyName:o,scene:new _l,camera:new kr(75,f/p,.1,1e3),renderer:null};v.containerId=u,v.scene.background=new Ht(5263440),v.scene.add(v.camera);var g=new Mu(16777215);g.position.set(0,0,50).normalize(),v.scene.add(g);var y=new wl(4210752);return v.scene.add(y),v.camera.position.x=0,v.camera.position.y=13.53,v.camera.position.z=50,v.camera.rotation.x=0*Math.PI/180,v}},{key:"recursiveLoadSkeletonAndAddToDisplay",value:function(r){var o=this;if(o&&!o.isDestroyed)if(r>=o.displays.length)this.status="Finished.";else{var u=o.displays[r],f=u.skeleton;this.status="Loading skeleton model "+f+" ("+u.friendlyName+")...",(new Hc).load(vn.KUJATA_DATA_BASE_URL+"/data/field/char.lgp/"+f+".hrc.gltf",function(g){if(o&&!o.isDestroyed){Uc(g);var y=g.scene,_=y.children[0];_.position.x=0,_.position.y=0,_.position.z=0,u.scene.add(y),o.showDisplay(o,r,10),o.recursiveLoadSkeletonAndAddToDisplay(r+1)}else console.log("ignoring gltf load() callback")},void 0,function(g){console.error("oops!",g),o.recursiveLoadSkeletonAndAddToDisplay(r+1)})}else console.log("stopping recursive loading")}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(sa))},n.\u0275cmp=Er({type:n,selectors:[["field-models"]],features:[jo],decls:8,vars:3,consts:[[2,"background-color","#c0c0c0"],[2,"padding","4px"],[2,"background-color","white","padding","4px","width","308px","font-size","10pt"],[2,"height","1em"],[2,"display","flex","flex-wrap","wrap"],["class","display-box",3,"routerLink",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"display-box",3,"routerLink"],["class","scene-container",3,"id",4,"ngIf"],["class","scene-container",4,"ngIf"],[2,"height","15px"],[2,"text-align","center"],[2,"text-align","center","font-size","10pt"],[1,"scene-container",3,"id"],[1,"scene-container"],[3,"src"],["style","background-color:#e0e0e0",4,"ngIf"],[2,"background-color","#e0e0e0"],["style","background-color:white; margin:8px; padding:8px; border-radius:8px;",4,"ngFor","ngForOf"],[2,"background-color","white","margin","8px","padding","8px","border-radius","8px"],[2,"margin","auto"],[2,"display","grid","grid-template-columns","50% 50%","grid-template-rows","auto auto"],[2,"grid-row","1","grid-column","1/2"],[4,"ngFor","ngForOf"],[2,"grid-row","1","grid-column","2/3"]],template:function(e,r){1&e&&(s(0,"div",0),s(1,"div",1),s(2,"div",2),oe(3),l(),l(),c(4,"div",3),s(5,"div",4),Ge(6,OJ,10,5,"a",5),l(),l(),Ge(7,GJ,2,1,"ng-container",6)),2&e&&(J(3),Ct(" ",r.status," "),J(3),d("ngForOf",r.displays),J(1),d("ngIf",!1))},directives:[Za,aa,es],styles:[".display-box[_ngcontent-%COMP%]{width:150px;height:220px;background-color:#fff;margin:4px;color:#404040;text-decoration:none}.scene-container[_ngcontent-%COMP%]{width:150px;height:150px;margin:0;padding:0;background-color:gray}"]}),n}();function HJ(n,a){1&n&&c(0,"div",12),2&n&&d("id",ye().$implicit.containerId)}function VJ(n,a){if(1&n&&(s(0,"div",13),c(1,"img",14),l()),2&n){var e=ye().$implicit;J(1),d("src",e.screenshotDataUrl,li)}}function WJ(n,a){if(1&n&&(s(0,"a",7),Ge(1,HJ,1,1,"div",8),Ge(2,VJ,2,1,"div",9),s(3,"div",10),s(4,"div",11),s(5,"b"),oe(6),l(),l(),s(7,"div",11),oe(8),l(),l(),l()),2&n){var e=a.$implicit;d("routerLink","/battle-model-details/"+e.skeleton),J(1),d("ngIf",!e.screenshotDataUrl),J(1),d("ngIf",e.screenshotDataUrl),J(4),cn(e.friendlyName),J(2),cn(e.skeleton)}}function UJ(n,a){if(1&n&&(s(0,"tr"),s(1,"td"),oe(2),l(),s(3,"td"),oe(4),l(),l()),2&n){var e=ye().$implicit;J(2),cn(e.id),J(2),cn(e.name)}}function zJ(n,a){if(1&n&&(S(0),Ge(1,UJ,5,2,"tr",6),R()),2&n){var e=a.$implicit,r=ye().$implicit;J(1),d("ngIf",e.numBones==r)}}function jJ(n,a){if(1&n&&(s(0,"tr"),s(1,"td"),oe(2),l(),s(3,"td"),oe(4),l(),l()),2&n){var e=ye().$implicit;J(2),cn(e.id),J(2),cn(e.numFrames)}}function qJ(n,a){if(1&n&&(S(0),Ge(1,jJ,5,2,"tr",6),R()),2&n){var e=a.$implicit,r=ye().$implicit;J(1),d("ngIf",e.numBones==r)}}function KJ(n,a){if(1&n&&(s(0,"div",18),s(1,"h2",19),oe(2),l(),s(3,"div",20),s(4,"div",21),s(5,"h3"),oe(6,"Battle Models"),l(),s(7,"table"),s(8,"thead"),s(9,"tr"),s(10,"th"),oe(11,"id"),l(),s(12,"th"),oe(13,"name"),l(),l(),l(),s(14,"tbody"),Ge(15,zJ,2,1,"ng-container",22),l(),l(),l(),s(16,"div",23),s(17,"h3"),oe(18,"Battle Animations"),l(),s(19,"table"),s(20,"thead"),s(21,"tr"),s(22,"th"),oe(23,"id"),l(),s(24,"th"),oe(25,"numFrames"),l(),l(),l(),s(26,"tbody"),Ge(27,qJ,2,1,"ng-container",22),l(),l(),l(),l(),c(28,"div",3),l()),2&n){var e=a.$implicit,r=ye(3);J(2),Ct("Models with ",e," bones"),J(13),d("ngForOf",r.database.skeletons),J(12),d("ngForOf",r.database.animations)}}function YJ(n,a){if(1&n&&(s(0,"div",16),c(1,"div",3),Ge(2,KJ,29,3,"div",17),l()),2&n){var e=ye(2);J(2),d("ngForOf",e.uniqueBoneCounts)}}function $J(n,a){if(1&n&&(S(0),Ge(1,YJ,3,1,"div",15),R()),2&n){var e=ye();J(1),d("ngIf",e.database)}}var XJ=function(){var n=function(){function a(e){N(this,a),this.http=e,this.environment=vn,this.rendererGlobal=new Tu({alpha:!0,antialias:!0}),this.isDestroyed=!1}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.displays=[],this.status="Loading skeleton info from database...",this.http.get(vn.KUJATA_DATA_BASE_URL+"/metadata/skeleton-names-battle.json").subscribe(function(o){r.battleModelList=o,r.clock=new Sl,Object.keys(r.battleModelList).forEach(function(f,p){var g=r.createEmptyDisplay(f,r.battleModelList[f],"ff7_scene_container"+p,200,200);r.displays.push(g)}),r.recursiveLoadSkeletonAndAddToDisplay(0)})}},{key:"ngOnChanges",value:function(r){console.log("simpleChanges:",r)}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0}},{key:"showDisplay",value:function(r,o,u){var f=r.displays[o];f.renderer=r.rendererGlobal,f.renderer.setSize(150,150),f.renderer.outputEncoding=Vn,document.getElementById(f.containerId).appendChild(f.renderer.domElement),f.renderer.render(f.scene,f.camera),f.screenshotDataUrl=f.renderer.domElement.toDataURL(),f.renderer.dispose(),f.renderer=null}},{key:"createEmptyDisplay",value:function(r,o,u,f,p){var v={containerId:u,skeleton:r,friendlyName:o,scene:new _l,camera:new kr(90,f/p,.1,1e3),renderer:null};v.containerId=u,v.scene.background=new Ht(5263440),v.scene.add(v.camera);var g=new Mu(16777215);g.position.set(0,0,50).normalize(),v.scene.add(g);var y=new wl(4210752);return v.scene.add(y),v.camera.position.x=0,v.camera.position.y=0,v.camera.position.z=0,v.camera.rotation.x=0*Math.PI/180,v}},{key:"fitCameraToCenteredObject",value:function(r,o,u,f){var p=new Ks;p.setFromObject(o),new Z;var g=new Z;p.getSize(g);var y=r.fov*(Math.PI/180),_=2*Math.atan(Math.tan(y/2)*r.aspect),C=g.z/2+Math.abs(g.x/2/Math.tan(_/2)),w=g.z/2+Math.abs(g.y/2/Math.tan(y/2)),x=Math.max(C,w);void 0!==u&&0!==u&&(x*=u),r.position.set(0,g.y/2,x);var E=p.min.z,b=E<0?-E+x:x-E;r.far=3*b,r.updateProjectionMatrix(),void 0!==f&&(f.target=new Z(0,0,0),f.maxDistance=2*b)}},{key:"recursiveLoadSkeletonAndAddToDisplay",value:function(r){var o=this;if(o&&!o.isDestroyed)if(r>=o.displays.length)this.status="Finished.";else{var u=o.displays[r],f=u.skeleton;this.status="Loading skeleton model "+f+" ("+u.friendlyName+")...",(new Hc).load(vn.KUJATA_DATA_BASE_URL+"/data/battle/battle.lgp/"+f+".hrc.gltf",function(g){if(o&&!o.isDestroyed){Uc(g);var y=g.scene,_=y.children[0];_.position.x=0,_.position.y=0,_.position.z=0,u.scene.add(y),o.fitCameraToCenteredObject(u.camera,y,void 0,void 0),o.showDisplay(o,r,10),o.recursiveLoadSkeletonAndAddToDisplay(r+1)}else console.log("ignoring gltf load() callback")},void 0,function(g){console.error("oops!",g),o.recursiveLoadSkeletonAndAddToDisplay(r+1)})}else console.log("stopping recursive loading")}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(sa))},n.\u0275cmp=Er({type:n,selectors:[["battle-models"]],features:[jo],decls:8,vars:3,consts:[[2,"background-color","#c0c0c0"],[2,"padding","4px"],[2,"background-color","white","padding","4px","width","308px","font-size","10pt"],[2,"height","1em"],[2,"display","flex","flex-wrap","wrap"],["class","display-box",3,"routerLink",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"display-box",3,"routerLink"],["class","scene-container",3,"id",4,"ngIf"],["class","scene-container",4,"ngIf"],[2,"height","25px"],[2,"text-align","center"],[1,"scene-container",3,"id"],[1,"scene-container"],[3,"src"],["style","background-color:#e0e0e0",4,"ngIf"],[2,"background-color","#e0e0e0"],["style","background-color:white; margin:8px; padding:8px; border-radius:8px;",4,"ngFor","ngForOf"],[2,"background-color","white","margin","8px","padding","8px","border-radius","8px"],[2,"margin","auto"],[2,"display","grid","grid-template-columns","50% 50%","grid-template-rows","auto auto"],[2,"grid-row","1","grid-column","1/2"],[4,"ngFor","ngForOf"],[2,"grid-row","1","grid-column","2/3"]],template:function(e,r){1&e&&(s(0,"div",0),s(1,"div",1),s(2,"div",2),oe(3),l(),l(),c(4,"div",3),s(5,"div",4),Ge(6,WJ,9,5,"a",5),l(),l(),Ge(7,$J,2,1,"ng-container",6)),2&e&&(J(3),Ct(" ",r.status," "),J(3),d("ngForOf",r.displays),J(1),d("ngIf",!1))},directives:[Za,aa,es],styles:[".display-box[_ngcontent-%COMP%]{width:150px;height:220px;background-color:#fff;margin:4px;color:#404040;text-decoration:none}.scene-container[_ngcontent-%COMP%]{width:150px;height:150px;margin:0;padding:0;background-color:gray}"]}),n}();function JJ(n,a){if(1&n){var e=L();s(0,"div",11),ae("click",function(){var p=lr(e).$implicit;return ye(2).onSelectAnimation(p)}),oe(1),l()}if(2&n){var r=a.$implicit,o=ye(2);J(1),zi(" ",r," (",o.metadata.animationStats.stand[r],") ")}}function ZJ(n,a){if(1&n){var e=L();s(0,"div",11),ae("click",function(){var p=lr(e).$implicit;return ye(2).onSelectAnimation(p)}),oe(1),l()}if(2&n){var r=a.$implicit,o=ye(2);J(1),zi(" ",r," (",o.metadata.animationStats.walk[r],") ")}}function QJ(n,a){if(1&n){var e=L();s(0,"div",11),ae("click",function(){var p=lr(e).$implicit;return ye(2).onSelectAnimation(p)}),oe(1),l()}if(2&n){var r=a.$implicit,o=ye(2);J(1),zi(" ",r," (",o.metadata.animationStats.run[r],") ")}}function eZ(n,a){if(1&n){var e=L();s(0,"div",11),ae("click",function(){var p=lr(e).$implicit;return ye(2).onSelectAnimation(p)}),oe(1),l()}if(2&n){var r=a.$implicit,o=ye(2);J(1),zi(" ",r," (",o.metadata.animationStats.other[r],") ")}}function tZ(n,a){if(1&n&&(s(0,"div",12),oe(1),l()),2&n){var e=a.$implicit,r=ye(2);J(1),zi(" ",e," (",r.metadata.fieldStats[e],") ")}}function nZ(n,a){if(1&n&&(s(0,"div",2),s(1,"h2"),oe(2),l(),s(3,"h3"),oe(4),l(),s(5,"h4"),oe(6),l(),s(7,"div",3),s(8,"div",4),s(9,"h4"),oe(10,"Model"),l(),c(11,"div",5),l(),s(12,"div",6),s(13,"h4"),oe(14,"Animations"),l(),s(15,"div",7),s(16,"h5"),oe(17,"Stand"),l(),Ge(18,JJ,2,2,"div",8),l(),s(19,"div",7),s(20,"h5"),oe(21,"Walk"),l(),Ge(22,ZJ,2,2,"div",8),l(),s(23,"div",7),s(24,"h5"),oe(25,"Run"),l(),Ge(26,QJ,2,2,"div",8),l(),s(27,"div",7),s(28,"h5"),oe(29,"Other"),l(),Ge(30,eZ,2,2,"div",8),l(),l(),s(31,"div",9),s(32,"h4"),oe(33,"Fields"),l(),Ge(34,tZ,2,2,"div",10),l(),l(),l()),2&n){var e=ye();J(2),Ct("HRC ID: ",e.selectedHrcId,""),J(2),Ct("Name: ",e.friendlyName,""),J(2),Ct("Used in ",e.metadata.numFieldModelLoaders," field model loaders"),J(12),d("ngForOf",e.standAnimations),J(4),d("ngForOf",e.walkAnimations),J(4),d("ngForOf",e.runAnimations),J(4),d("ngForOf",e.otherAnimations),J(4),d("ngForOf",e.Object.keys(e.metadata.fieldStats))}}var rZ=function(){var n=function(){function a(e,r){N(this,a),this.route=e,this.http=r,this.environment=vn,this.CHAR_BASE_URL=vn.KUJATA_DATA_BASE_URL+"/data/field/char.lgp/",this.SCENE_WIDTH=300,this.SCENE_HEIGHT=300,this.standAnimations=[],this.walkAnimations=[],this.runAnimations=[],this.otherAnimations=[],this.Object=Object,this.isAnimationEnabled=!1,this.isDestroyed=!1}return j(a,[{key:"ngOnInit",value:function(){var r=this,o=vn.KUJATA_DATA_BASE_URL+"/metadata/field-model-metadata.json";this.http.get(o).subscribe(function(u){r.fieldModelMetadata=u,r.initialize()}),this.http.get(o=vn.KUJATA_DATA_BASE_URL+"/metadata/skeleton-names-field.json").subscribe(function(u){r.skeletonFriendlyNames=u,r.initialize()}),this.route.paramMap.subscribe(function(u){r.selectedHrcId=u.get("hrcId"),r.initialize()})}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0,this.isAnimationEnabled=!1}},{key:"initialize",value:function(){var r=this;if(this.fieldModelMetadata&&this.skeletonFriendlyNames&&this.selectedHrcId){this.friendlyName=this.skeletonFriendlyNames[this.selectedHrcId],this.metadata=this.fieldModelMetadata[this.selectedHrcId],this.standAnimations=Object.keys(this.metadata.animationStats.stand),this.walkAnimations=Object.keys(this.metadata.animationStats.walk),this.runAnimations=Object.keys(this.metadata.animationStats.run),this.otherAnimations=Object.keys(this.metadata.animationStats.other);var o=function(v){return function(g,y){return v[y]-v[g]}};this.standAnimations.sort(o(this.metadata.animationStats.stand)),this.walkAnimations.sort(o(this.metadata.animationStats.walk)),this.runAnimations.sort(o(this.metadata.animationStats.run)),this.otherAnimations.sort(o(this.metadata.animationStats.other)),this.isAnimationEnabled=!1,this.selectedAnimId=this.standAnimations[0],this.clock=new Sl,this.renderer=new Tu({alpha:!0,antialias:!0}),this.renderer.setSize(this.SCENE_WIDTH,this.SCENE_HEIGHT),this.renderer.outputEncoding=Vn,this.modelGLTF=null,this.gltf=null,this.scene=null,this.camera=new kr(90,this.SCENE_WIDTH/this.SCENE_HEIGHT,.1,1e3),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=50,this.camera.rotation.x=0*Math.PI/180,this.controls=null,this.http.get(this.CHAR_BASE_URL+this.selectedHrcId+".hrc.gltf").subscribe(function(p){r.modelGLTF=p,r.fetchAnimationAndInitializeScene()},function(p){console.error("oops!",p)});var u=this;!function p(){if(u&&!u.isDestroyed){requestAnimationFrame(p);var v=u.clock.getDelta();u.controls&&u.controls.update(v),u.mixer&&u.isAnimationEnabled&&u.mixer.update(v),u.renderer&&u.scene&&u.camera&&u.renderer.render(u.scene,u.camera)}else console.log("stopping appTick()")}()}}},{key:"onSelectAnimation",value:function(r){this.selectedAnimId=r,this.fetchAnimationAndInitializeScene()}},{key:"fetchAnimationAndInitializeScene",value:function(){var r=this;this.http.get(this.CHAR_BASE_URL+this.selectedAnimId+".a.gltf").subscribe(function(o){var u=r.createCombinedGLTF(r.modelGLTF,o);r.initializeSceneWithCombinedGLTF(r,u)},function(o){console.error("oops!",o)})}},{key:"initializeSceneWithCombinedGLTF",value:function(r,o){var u=o.nodes[1].translation[1];0==u&&(u=15),0==r.camera.position.y&&(console.log("setting camera height to:"+2*u),r.camera.position.y=2*u,r.camera.position.z=Math.max(3*u,50)),console.log("modelRootHeight="+u),(new Hc).parse(JSON.stringify(o),r.CHAR_BASE_URL,function(p){Uc(p);var g,v=Pt(p.animations);try{for(v.s();!(g=v.n()).done;){var C,_=Pt(g.value.tracks);try{for(_.s();!(C=_.n()).done;)C.value.optimize()}catch(B){_.e(B)}finally{_.f()}}}catch(B){v.e(B)}finally{v.f()}console.log("combined gltf:",p),r.gltf=p;var x=p.scene;r.scene=new _l,r.scene.background=new Ht(12312063),r.scene.add(r.camera);var b=new Mu(16777215);b.position.set(0,0,50).normalize(),r.scene.add(b);var T=new wl(4210752);r.scene.add(T);var A=new xa({color:3390293,opacity:1,side:2}),M=new cb(50,32),O=new mr(M,A);O.rotateX(-Math.PI/2),r.scene.add(O),r.scene.add(x),document.getElementById("scene-container").appendChild(r.renderer.domElement),r.controls=new yb(r.camera,r.renderer.domElement),r.controls.target=new Z(0,u,0),r.controls.update(),r.startAnimation(),r.renderer.render(r.scene,r.camera)},void 0,function(p){console.error("oops!",p)})}},{key:"createCombinedGLTF",value:function(r,o){console.log("modelGLTF:",r),console.log("animGLTF:",o);var u=JSON.parse(JSON.stringify(r)),f=JSON.parse(JSON.stringify(o)),p=u.buffers.length,v=u.bufferViews.length,g=u.accessors.length;u.animations||(u.animations=[]);var _,y=Pt(f.buffers);try{for(y.s();!(_=y.n()).done;)u.buffers.push(_.value)}catch(W){y.e(W)}finally{y.f()}var x,w=Pt(f.bufferViews);try{for(w.s();!(x=w.n()).done;){var E=x.value;E.buffer+=p,u.bufferViews.push(E)}}catch(W){w.e(W)}finally{w.f()}var T,b=Pt(f.accessors);try{for(b.s();!(T=b.n()).done;){var A=T.value;A.bufferView+=v,u.accessors.push(A)}}catch(W){b.e(W)}finally{b.f()}var O,M=Pt(f.animations);try{for(M.s();!(O=M.n()).done;){var z,I=O.value,B=Pt(I.samplers);try{for(B.s();!(z=B.n()).done;){var P=z.value;P.input+=g,P.output+=g}}catch(W){B.e(W)}finally{B.f()}u.animations.push(I)}}catch(W){M.e(W)}finally{M.f()}return console.log("combinedGLTF:",u),u}},{key:"startAnimation",value:function(){this.isAnimationEnabled=!0,this.mixer=new Xy(this.gltf.scene),this.mixer.clipAction(this.gltf.animations[0]).play()}},{key:"stopAnimation",value:function(){this.isAnimationEnabled=!1}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(zs),st(sa))},n.\u0275cmp=Er({type:n,selectors:[["field-model-details"]],decls:2,vars:1,consts:[[2,"background-color","#e0e0e0","padding","4px","margin-bottom","16px"],["style","background-color:white; padding:4px;",4,"ngIf"],[2,"background-color","white","padding","4px"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","font-size","12pt"],[1,"model-panel"],["id","scene-container",1,"scene-container"],[1,"animations-panel"],[1,"animation-category"],["class","animation-box",3,"click",4,"ngFor","ngForOf"],[1,"fields-panel"],["class","field-box",4,"ngFor","ngForOf"],[1,"animation-box",3,"click"],[1,"field-box"]],template:function(e,r){1&e&&(s(0,"div",0),Ge(1,nZ,35,8,"div",1),l()),2&e&&(J(1),d("ngIf",r.metadata))},directives:[aa,Za],styles:[".model-panel[_ngcontent-%COMP%]{width:360px;height:400px;background-color:#f0f0f0;margin:4px 4px 0 0;text-align:center;padding:4px}.animations-panel[_ngcontent-%COMP%], .fields-panel[_ngcontent-%COMP%]{width:360px;height:400px;background-color:#f0f0f0;margin:4px 4px 0 0;overflow-y:auto;padding:4px}.animation-category[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#f8f8f8}.animation-box[_ngcontent-%COMP%], .field-box[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#fff}"]}),n}();function iZ(n,a){if(1&n){var e=L();s(0,"div",10),ae("click",function(){var p=lr(e).$implicit;return ye(2).onSelectAnimation(p)}),oe(1),l()}if(2&n){var r=a.$implicit,o=ye(2);J(1),zi(" ",r," ",o.bodyAnimationIdToFriendlyNameMap[r]," ")}}function oZ(n,a){if(1&n&&(s(0,"div",3),s(1,"h2"),oe(2),l(),s(3,"h3"),oe(4),l(),s(5,"div",4),s(6,"div",5),s(7,"h4"),oe(8,"Model"),l(),c(9,"div",6),l(),s(10,"div",7),s(11,"h4"),oe(12,"Animations"),l(),s(13,"div",8),s(14,"h5"),oe(15,"Body Animations"),l(),Ge(16,iZ,2,2,"div",9),l(),l(),l(),l()),2&n){var e=ye();J(2),Ct("HRC ID: ",e.selectedHrcId,""),J(2),Ct("Name: ",e.friendlyName,""),J(12),d("ngForOf",e.bodyAnimationIds)}}function aZ(n,a){if(1&n&&(s(0,"div",21),s(1,"div",22),oe(2),l(),s(3,"div",23),oe(4),l(),l()),2&n){var e=a.$implicit;J(2),cn(e.raw),J(2),cn(e.js)}}function sZ(n,a){if(1&n){var e=L();s(0,"div",11),s(1,"div",15),oe(2),s(3,"span",16),oe(4),l(),s(5,"span",17),ae("click",function(){lr(e);var p=ye().$implicit;return ye(2).startScriptPreviewAndScroll(p.play)}),c(6,"i",18),l(),l(),s(7,"div",19),Ge(8,aZ,5,2,"div",20),l(),l()}if(2&n){var r=ye(),o=r.index,u=r.$implicit;J(2),Ct(" #",o," "),J(2),cn(u.name),J(4),d("ngForOf",u.script)}}function uZ(n,a){if(1&n&&(s(0,"div"),Ge(1,sZ,9,3,"div",14),l()),2&n){var e=a.$implicit;J(1),d("ngIf",e.script.length>0)}}function lZ(n,a){if(1&n&&(s(0,"div",11),s(1,"div",12),s(2,"h4"),oe(3,"Action Scripts"),l(),s(4,"div",4),Ge(5,uZ,2,1,"div",13),l(),l(),l()),2&n){var e=ye();J(5),d("ngForOf",e.scripts)}}var cZ=function(){var n=function(){function a(e,r){N(this,a),this.route=e,this.http=r,this.environment=vn,this.BATTLE_LGP_BASE_URL=vn.KUJATA_DATA_BASE_URL+"/data/battle/battle.lgp/",this.SCENE_WIDTH=600,this.SCENE_HEIGHT=600,this.bodyAnimationIdToIndexMap={},this.bodyAnimationIdToFriendlyNameMap={"body-0":"battle stance","body-1":"critical status","body-2":"victory","body-3":"move to front row","body-4":"move to back row","body-5":"block","body-6":"knocked out","body-7":"running away","body-8":"frozen/defend","body-9":"use item","body-10":"throw item","body-12":"magic: pre-cast","body-13":"magic: cast","body-14":"magic: post-cast","body-15":"take damage (quick)","body-16":"take damage (sustained)","body-17":"return to battle stance","body-18":"knocked off feet","body-19":"dodge/twirl"},this.bodyAnimationNames=[],this.bodyAnimationIds=[],this.selectedAnimId=0,this.previewAnimations=[],this.Object=Object,this.isAnimationEnabled=!1,this.isDestroyed=!1}return j(a,[{key:"enemyCodeToEnemyId",value:function(r){return 26*(r.charCodeAt(0)-97)+(r.charCodeAt(1)-97)}},{key:"getEnemyDataFromSceneBin",value:function(r,o){var p,u=this.enemyCodeToEnemyId(r),f=Pt(o);try{for(f.s();!(p=f.n()).done;)for(var v=p.value,g=0,y=[1,2,3];g<y.length;g++){var _=y[g];if(v["enemyId".concat(_)]===u)return{scene:v,enemy:v["enemyData".concat(_)]}}}catch(w){f.e(w)}finally{f.f()}return null}},{key:"ngOnInit",value:function(){var r=this;this.route.paramMap.subscribe(function(o){r.http.get(vn.KUJATA_DATA_BASE_URL+"/metadata/skeleton-names-battle.json").subscribe(function(u){r.http.get(vn.KUJATA_DATA_BASE_URL+"/data/battle/scene.bin/scene.bin.json").subscribe(function(f){r.http.get(vn.KUJATA_DATA_BASE_URL+"/data/battle/action-sequences.json").subscribe(function(p){r.http.get(vn.KUJATA_DATA_BASE_URL+"/metadata/action-sequence-metadata-player.json").subscribe(function(v){r.selectedHrcId=o.get("hrcId"),r.friendlyName=u[r.selectedHrcId],console.log("friendlyName",r.friendlyName);var g=r.getEnemyDataFromSceneBin(r.selectedHrcId,f);r.actionSequence=p[r.selectedHrcId.slice(0,-1)+"b"],console.log("actionSequence",r.actionSequence),r.scripts=r.actionSequence.scripts.map(function(y,_){var C={id:_,script:y,name:"???",play:y.map(function(M){return parseInt(M.raw.substring(0,2),16)}).filter(function(M){return M<=141})};if("player"===r.actionSequence.type){var x,w=Pt(v);try{for(w.s();!(x=w.n()).done;){var b=x.value.actionSequences.find(function(M){return M.id===C.id});if(b){C.name=b.name;break}}}catch(M){w.e(M)}finally{w.f()}}else{0===C.id&&(C.name="Idle"),1===C.id&&(C.name="Hurt"),2===C.id&&(C.name="Hurt Critical");var T=g.enemy.actionSequenceIndex.findIndex(function(M){return M===C.id});T>=0&&(C.name=g.scene.attackData[T].name)}return C}),console.log("actionSequence",r.actionSequence),r.initialize()})})})})})}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0,this.isAnimationEnabled=!1}},{key:"initialize",value:function(){var r=this;if(this.selectedHrcId){this.isAnimationEnabled=!1,this.clock=new Sl,this.renderer=new Tu({alpha:!0,antialias:!0}),this.renderer.setSize(this.SCENE_WIDTH,this.SCENE_HEIGHT),this.renderer.outputEncoding=Vn,this.modelGLTF=null,this.gltf=null,this.scene=null,this.camera=new kr(90,this.SCENE_WIDTH/this.SCENE_HEIGHT,.1,1e5),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=50,this.controls=null,this.http.get(this.BATTLE_LGP_BASE_URL+this.selectedHrcId+".hrc.gltf").subscribe(function(f){r.modelGLTF=f,r.bodyAnimationNames=[];for(var p=0;p<f.animations.length;p++){var g=f.animations[p].name;r.bodyAnimationIds.push(g),r.bodyAnimationIdToIndexMap[g]=p}r.selectedAnimId=r.bodyAnimationIds[0],r.initializeSceneWithCombinedGLTF(r,r.modelGLTF)},function(f){console.error("oops!",f)});var o=this;!function f(){if(o&&!o.isDestroyed){requestAnimationFrame(f);var p=o.clock.getDelta();o.controls&&o.controls.update(p),o.mixer&&o.isAnimationEnabled&&o.mixer.update(p),o.renderer&&o.scene&&o.camera&&o.renderer.render(o.scene,o.camera)}else console.log("stopping appTick()")}()}}},{key:"onSelectAnimation",value:function(r){console.log("onSelectAnimation",r),this.previewAnimationSequence=null,this.selectedAnimId=r,this.initializeSceneWithCombinedGLTF(this,this.modelGLTF)}},{key:"startScriptPreviewAndScroll",value:function(r){this.previewAnimationSequence=r,this.selectedAnimId=null,this.initializeSceneWithCombinedGLTF(this,this.modelGLTF),window.scrollTo({top:0,behavior:"smooth"})}},{key:"initializeSceneWithCombinedGLTF",value:function(r,o){var u=o.nodes[1].translation[1];0==u&&(u=15),0==r.camera.position.y&&(console.log("setting camera height to:"+2*u),r.camera.position.y=600+1.5*u,r.camera.position.z=Math.max(2.5*u,1e3)),(new Hc).parse(JSON.stringify(o),r.BATTLE_LGP_BASE_URL,function(p){Uc(p);var g,v=Pt(p.animations);try{for(v.s();!(g=v.n()).done;){var C,_=Pt(g.value.tracks);try{for(_.s();!(C=_.n()).done;)C.value.optimize()}catch(I){_.e(I)}finally{_.f()}}}catch(I){v.e(I)}finally{v.f()}console.log("parsed gltf:",p),r.gltf=p;var x=p.scene;p.scene.rotation.y=-20*Math.PI/180,r.scene=new _l,r.scene.background=new Ht(12312063),r.scene.add(r.camera);var E=function(B,z,P){var W=new Mu(12632256);W.position.set(B,z,P).normalize(),r.scene.add(W)};E(4,2,3),E(0,-2,-3);var b=new wl(4210752);r.scene.add(b);var T=new xa({color:3390293,opacity:1,side:2}),A=new cb(50,32),M=new mr(A,T);M.rotateX(-Math.PI/2),r.scene.add(M),r.scene.add(x),document.getElementById("scene-container").appendChild(r.renderer.domElement),r.controls=new yb(r.camera,r.renderer.domElement),r.controls.target=new Z(0,u,0),r.controls.update(),r.startAnimation(),r.renderer.render(r.scene,r.camera)},void 0,function(p){console.error("oops!",p)})}},{key:"startAnimation",value:function(){var r=this;if(this.previewAnimationSequence){this.isAnimationEnabled=!0,this.mixer=new Xy(this.gltf.scene);var o=this.previewAnimationSequence.map(function(v){var g=r.bodyAnimationIdToIndexMap["body-".concat(v)],y=r.mixer.clipAction(r.gltf.animations[g]);return console.log("animation mapping",v,"->","body-".concat(v),g),y.setLoop(2200),y.clampWhenFinished=!0,y}),u=0,f=function(){console.log("play",u,o[u]),o[u].reset().play()};this.mixer.addEventListener("finished",function(){r.gltf.scene.position.x=r.gltf.scene.children[0].position.x,r.gltf.scene.position.z=r.gltf.scene.children[0].position.z,r.mixer.stopAllAction(),o[u].reset(),++u>=o.length&&(u=0),f()}),this.controls.target.y=this.controls.target.y+this.gltf.animations[0].tracks[0].values[1],f()}else if(this.selectedAnimId){this.isAnimationEnabled=!0,this.mixer=new Xy(this.gltf.scene);var p=this.bodyAnimationIdToIndexMap[this.selectedAnimId];this.controls.target.y=this.controls.target.y+this.gltf.animations[p].tracks[0].values[1],this.action=this.mixer.clipAction(this.gltf.animations[p]),this.action.play()}}},{key:"stopAnimation",value:function(){this.isAnimationEnabled=!1}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(zs),st(sa))},n.\u0275cmp=Er({type:n,selectors:[["battle-model-details"]],decls:3,vars:2,consts:[[2,"background-color","#e0e0e0","padding","4px","margin-bottom","16px"],["style","background-color:white; padding:4px;",4,"ngIf"],["class","grey-panel",4,"ngIf"],[2,"background-color","white","padding","4px"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","font-size","12pt"],[1,"model-panel"],["id","scene-container",1,"scene-container"],[1,"animations-panel"],[1,"animation-category"],["class","animation-box",3,"click",4,"ngFor","ngForOf"],[1,"animation-box",3,"click"],[1,"grey-panel"],[1,"white-panel"],[4,"ngFor","ngForOf"],["class","grey-panel","style","width-600px; ",4,"ngIf"],[2,"font-size","14pt","color","#404040"],[2,"font-size","12pt","color","#808080"],[2,"margin-left","20px","cursor","pointer",3,"click"],[1,"fa","fa-play-circle"],[1,"white-panel","kujata-font-mono",2,"font-size","8pt"],["class","",4,"ngFor","ngForOf"],[1,""],[2,"display","inline-block","width","150px"],[2,"display","inline-block"]],template:function(e,r){1&e&&(s(0,"div",0),Ge(1,oZ,17,3,"div",1),l(),Ge(2,lZ,6,1,"div",2)),2&e&&(J(1),d("ngIf",r.selectedHrcId),J(1),d("ngIf",r.scripts&&r.scripts.length>0))},directives:[aa,Za],styles:[".model-panel[_ngcontent-%COMP%]{width:620px;height:660px;background-color:#f0f0f0;margin:4px 4px 0 0;text-align:center;padding:4px}.animations-panel[_ngcontent-%COMP%]{width:360px;height:660px;background-color:#f0f0f0;margin:4px 4px 0 0;overflow-y:auto;padding:4px}.fields-panel[_ngcontent-%COMP%]{width:360px;height:400px;background-color:#f0f0f0;margin:4px 4px 0 0;overflow-y:auto;padding:4px}.animation-category[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#f8f8f8}.white-panel[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#fff}.grey-panel[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#f0f0f0}"]}),n}();function dZ(n,a){1&n&&c(0,"div",12),2&n&&d("id",ye().$implicit.containerId)}function fZ(n,a){if(1&n&&(s(0,"div",13),c(1,"img",14),l()),2&n){var e=ye().$implicit;J(1),d("src",e.screenshotDataUrl,li)}}function pZ(n,a){if(1&n&&(s(0,"a",6),Ge(1,dZ,1,1,"div",7),Ge(2,fZ,2,1,"div",8),s(3,"div",9),s(4,"div",10),s(5,"b"),oe(6),l(),l(),s(7,"div",11),s(8,"b"),oe(9),l(),l(),l(),l()),2&n){var e=a.$implicit;d("routerLink","/world-model-details/"+e.skeleton),J(1),d("ngIf",!e.screenshotDataUrl),J(1),d("ngIf",e.screenshotDataUrl),J(4),cn(e.friendlyName),J(3),cn(e.skeleton)}}var hZ=function(){var n=function(){function a(e){N(this,a),this.http=e,this.environment=vn,this.rendererGlobal=new Tu({alpha:!0,antialias:!0}),this.isDestroyed=!1}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.displays=[],this.status="Loading skeleton info from database...",this.http.get(vn.KUJATA_DATA_BASE_URL+"/metadata/skeleton-names-world.json").subscribe(function(o){r.modelIds=o,r.clock=new Sl,Object.keys(r.modelIds).forEach(function(f,p){var g=r.createEmptyDisplay(f,r.modelIds[f],"world_scene_container"+p,200,200);r.displays.push(g)}),r.recursiveLoadSkeletonAndAddToDisplay(0)})}},{key:"ngOnChanges",value:function(r){console.log("simpleChanges:",r)}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0}},{key:"showDisplay",value:function(r,o,u){var f=r.displays[o];if(f.renderer=r.rendererGlobal,f.renderer.setSize(150,150),f.renderer.outputEncoding=Vn,document.getElementById(f.containerId).appendChild(f.renderer.domElement),f.isAnimated&&f.mixer)for(var v=0;v<10;v++)f.mixer.update(.016),f.renderer.render(f.scene,f.camera);else f.renderer.render(f.scene,f.camera);f.screenshotDataUrl=f.renderer.domElement.toDataURL(),f.renderer.dispose(),f.renderer=null}},{key:"createEmptyDisplay",value:function(r,o,u,f,p){var v={containerId:u,skeleton:r,friendlyName:o,scene:new _l,camera:new kr(75,f/p,.1,1e3),renderer:null,mixer:null,clock:null,isAnimated:!1};v.containerId=u,v.scene.background=new Ht(5263440),v.scene.add(v.camera);var g=new Mu(16777215);g.position.set(0,0,50).normalize(),v.scene.add(g);var y=new wl(4210752);return v.scene.add(y),v.camera.position.x=0,v.camera.position.y=13.53,v.camera.position.z=50,v.camera.rotation.x=0*Math.PI/180,v}},{key:"recursiveLoadSkeletonAndAddToDisplay",value:function(r){var o=this;if(o&&!o.isDestroyed)if(r>=o.displays.length)this.status="Finished.";else{var u=o.displays[r],f=u.skeleton;this.status="Loading skeleton model "+f+" ("+u.friendlyName+")...",(new Hc).load(vn.KUJATA_DATA_BASE_URL+"/data/world/world_us.lgp/"+f+".hrc.gltf",function(g){if(o&&!o.isDestroyed){Uc(g);var y=g.scene,_=y.children[0];_.position.x=0,_.position.y=0,_.position.z=0,u.scene.add(y),g.animations&&g.animations.length>0&&(u.mixer=new Xy(y),u.mixer.clipAction(g.animations[0]).play(),u.isAnimated=!0,u.clock=new Sl,function x(){if(o&&!o.isDestroyed&&u.mixer){requestAnimationFrame(x);var E=u.clock.getDelta();u.mixer.update(E)}}()),o.showDisplay(o,r,10),o.recursiveLoadSkeletonAndAddToDisplay(r+1)}else console.log("ignoring gltf load() callback")},void 0,function(g){console.error("oops!",g),o.recursiveLoadSkeletonAndAddToDisplay(r+1)})}else console.log("stopping recursive loading")}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(sa))},n.\u0275cmp=Er({type:n,selectors:[["world-models"]],features:[jo],decls:7,vars:2,consts:[[2,"background-color","#c0c0c0"],[2,"padding","4px"],[2,"background-color","white","padding","4px","width","308px","font-size","10pt"],[2,"height","1em"],[2,"display","flex","flex-wrap","wrap"],["class","display-box",3,"routerLink",4,"ngFor","ngForOf"],[1,"display-box",3,"routerLink"],["class","scene-container",3,"id",4,"ngIf"],["class","scene-container",4,"ngIf"],[2,"height","15px"],[2,"text-align","center"],[2,"text-align","center","font-size","10pt"],[1,"scene-container",3,"id"],[1,"scene-container"],[3,"src"]],template:function(e,r){1&e&&(s(0,"div",0),s(1,"div",1),s(2,"div",2),oe(3),l(),l(),c(4,"div",3),s(5,"div",4),Ge(6,pZ,10,5,"a",5),l(),l()),2&e&&(J(3),Ct(" ",r.status," "),J(3),d("ngForOf",r.displays))},directives:[Za,es,aa],styles:[".display-box[_ngcontent-%COMP%]{width:150px;height:220px;background-color:#fff;margin:4px;color:#404040;text-decoration:none}.scene-container[_ngcontent-%COMP%]{width:150px;height:150px;margin:0;padding:0;background-color:gray}"]}),n}();function vZ(n,a){if(1&n){var e=L();s(0,"div",11),ae("click",function(){var v=lr(e).index;return ye(3).onSelectAnimation(v)}),oe(1),l()}if(2&n){var r=a.$implicit;yu("selected",a.index===ye(3).selectedAnimationIndex),J(1),Ct(" ",r.name," ")}}function gZ(n,a){if(1&n&&(s(0,"div",8),s(1,"h4"),oe(2),l(),s(3,"div",9),Ge(4,vZ,2,3,"div",10),l(),l()),2&n){var e=ye(2);J(2),Ct("Animations (",e.availableAnimations.length,")"),J(2),d("ngForOf",e.availableAnimations)}}function mZ(n,a){1&n&&(s(0,"div",12),s(1,"h4"),oe(2,"Animations"),l(),s(3,"div",13),oe(4," No animations found in this model "),l(),l())}function yZ(n,a){if(1&n&&(s(0,"div",2),s(1,"h2"),oe(2),l(),s(3,"h3"),oe(4),l(),s(5,"div",3),s(6,"div",4),s(7,"h4"),oe(8,"Model"),l(),c(9,"div",5),l(),Ge(10,gZ,5,2,"div",6),Ge(11,mZ,5,0,"div",7),l(),l()),2&n){var e=ye();J(2),Ct("HRC ID: ",e.selectedHrcId,""),J(2),Ct("Name: ",e.friendlyName,""),J(6),d("ngIf",e.availableAnimations.length>0),J(1),d("ngIf",0===e.availableAnimations.length&&e.gltf)}}var _Z=function(){var n=function(){function a(e,r){N(this,a),this.route=e,this.http=r,this.environment=vn,this.CHAR_BASE_URL=vn.KUJATA_DATA_BASE_URL+"/data/world/world_us.lgp/",this.SCENE_WIDTH=300,this.SCENE_HEIGHT=300,this.availableAnimations=[],this.selectedAnimationIndex=0,this.Object=Object,this.isAnimationEnabled=!1,this.isDestroyed=!1}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.http.get(vn.KUJATA_DATA_BASE_URL+"/metadata/skeleton-names-world.json").subscribe(function(u){r.skeletonFriendlyNames=u,r.initialize()}),this.route.paramMap.subscribe(function(u){r.selectedHrcId=u.get("hrcId"),r.initialize()})}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0,this.isAnimationEnabled=!1}},{key:"initialize",value:function(){var r=this;if(this.skeletonFriendlyNames&&this.selectedHrcId){this.friendlyName=this.skeletonFriendlyNames[this.selectedHrcId],this.clock=new Sl,this.renderer=new Tu({alpha:!0,antialias:!0}),this.renderer.setSize(this.SCENE_WIDTH,this.SCENE_HEIGHT),this.renderer.outputEncoding=Vn,this.modelGLTF=null,this.gltf=null,this.scene=null,this.camera=new kr(90,this.SCENE_WIDTH/this.SCENE_HEIGHT,.1,1e3),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=50,this.camera.rotation.x=0*Math.PI/180,this.controls=null,this.http.get(this.CHAR_BASE_URL+this.selectedHrcId+".hrc.gltf").subscribe(function(f){r.modelGLTF=f,r.initializeSceneWithGLTF(r,f)},function(f){console.error("oops!",f)});var o=this;!function f(){if(o&&!o.isDestroyed){requestAnimationFrame(f);var p=o.clock.getDelta();o.controls&&o.controls.update(p),o.mixer&&o.isAnimationEnabled&&o.mixer.update(p),o.renderer&&o.scene&&o.camera&&o.renderer.render(o.scene,o.camera)}else console.log("stopping appTick()")}()}}},{key:"initializeSceneWithGLTF",value:function(r,o){console.log("gltf data:",o),(new Hc).parse(JSON.stringify(o),r.CHAR_BASE_URL,function(f){if(Uc(f),console.log("loaded gltf:",f),r.gltf=f,r.availableAnimations=[],f.animations&&f.animations.length>0)for(var p=0;p<f.animations.length;p++){var v=f.animations[p];r.availableAnimations.push({index:p,name:v.name||"Animation ".concat(p+1),duration:v.duration||0})}var g=f.scene;r.scene=new _l,r.scene.background=new Ht(12312063),r.scene.add(r.camera);var _=new Mu(16777215);_.position.set(0,0,50).normalize(),r.scene.add(_);var C=new wl(4210752);r.scene.add(C);var w=new xa({color:3390293,opacity:1,side:2}),x=new cb(50,32),E=new mr(x,w);E.rotateX(-Math.PI/2),r.scene.add(E),r.scene.add(g),document.getElementById("scene-container").appendChild(r.renderer.domElement);var T=15;o.nodes&&o.nodes[1]&&o.nodes[1].translation&&0==(T=o.nodes[1].translation[1])&&(T=15),0==r.camera.position.y&&(console.log("setting camera height to:"+2*T),r.camera.position.y=2*T,r.camera.position.z=Math.max(3*T,50)),console.log("modelRootHeight="+T),r.controls=new yb(r.camera,r.renderer.domElement),r.controls.target=new Z(0,T,0),r.controls.update(),r.availableAnimations.length>0&&r.startAnimation(r.selectedAnimationIndex),r.renderer.render(r.scene,r.camera)},void 0,function(f){console.error("oops!",f)})}},{key:"onSelectAnimation",value:function(r){this.selectedAnimationIndex=r,this.startAnimation(r)}},{key:"startAnimation",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.gltf&&this.gltf.animations&&0!==this.gltf.animations.length){if(this.mixer&&this.mixer.stopAllAction(),this.isAnimationEnabled=!0,this.mixer=new Xy(this.gltf.scene),r<this.gltf.animations.length){var o=this.mixer.clipAction(this.gltf.animations[r]);o.play(),console.log("Playing animation ".concat(r,": ").concat(this.gltf.animations[r].name))}}else console.log("No animations available")}},{key:"stopAnimation",value:function(){this.isAnimationEnabled=!1,this.mixer&&this.mixer.stopAllAction()}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(zs),st(sa))},n.\u0275cmp=Er({type:n,selectors:[["world-model-details"]],decls:2,vars:1,consts:[[2,"background-color","#e0e0e0","padding","4px","margin-bottom","16px"],["style","background-color:white; padding:4px;",4,"ngIf"],[2,"background-color","white","padding","4px"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","font-size","12pt"],[1,"model-panel"],["id","scene-container",1,"scene-container"],["class","animations-panel",4,"ngIf"],["class","no-animations-panel",4,"ngIf"],[1,"animations-panel"],[1,"animation-category"],["class","animation-box",3,"selected","click",4,"ngFor","ngForOf"],[1,"animation-box",3,"click"],[1,"no-animations-panel"],[2,"padding","8px","color","#666","font-style","italic"]],template:function(e,r){1&e&&(s(0,"div",0),Ge(1,yZ,12,4,"div",1),l()),2&e&&(J(1),d("ngIf",r.friendlyName))},directives:[aa,Za],styles:[".model-panel[_ngcontent-%COMP%]{width:360px;height:400px;background-color:#f0f0f0;margin:4px 4px 0 0;text-align:center;padding:4px}.animations-panel[_ngcontent-%COMP%]{width:360px;height:400px;background-color:#f0f0f0;margin:4px 4px 0 0;overflow-y:auto;padding:4px}.no-animations-panel[_ngcontent-%COMP%]{width:360px;height:100px;background-color:#f0f0f0;margin:4px 4px 0 0;padding:4px}.animation-category[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#f8f8f8}.animation-box[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#fff;cursor:pointer;border:2px solid transparent;transition:all .2s ease}.animation-box[_ngcontent-%COMP%]:hover{background-color:#f0f8ff;border-color:#ccc}.animation-box.selected[_ngcontent-%COMP%]{background-color:#e6f3ff;border-color:#06c;font-weight:700}"]}),n}();function CZ(n,a){1&n&&(s(0,"div"),s(1,"p"),oe(2,"Fetching..."),l(),l())}function wZ(n,a){1&n&&(s(0,"div"),s(1,"p"),oe(2,"Sorry, this app had a problem getting that info."),l(),l())}function SZ(n,a){if(1&n){var e=L();s(0,"div"),s(1,"p"),s(2,"a",3),ae("click",function(){return lr(e),ye().exportToCsv()}),oe(3,"Export To CSV"),l(),l(),c(4,"ag-grid-angular",4),Sh(5,"async"),l()}if(2&n){var r=ye();J(4),d("gridOptions",r.gridOptions)("rowData",bh(5,3,r.rowData))("columnDefs",r.columnDefs)}}var bZ=function(){var n=function(){function a(e,r){N(this,a),this.router=e,this.http=r,this.soundMetadata=[],this.fetchStatus="NONE",this.Object=Object,this.columnDefs=[],this.rowData=sn([]),this.friendlyColumnNames={fieldName:"Field",entityName:"Entity",scriptType:"Script",lineNo:"Line",opType:"Op",direction:"Direction",soundId:"Sound ID",playSound:"Play Sound"},this.columnWidths={direction:100,soundId:150,playSound:150}}return j(a,[{key:"ngOnInit",value:function(){this.gridOptions={rowData:this.rowData,columnDefs:this.columnDefs,rowSelection:"single",onRowClicked:function(o){console.log("a row was clicked")},onColumnResized:function(o){console.log("a column was resized")},onGridReady:function(o){console.log("the grid is now ready")},suppressNoRowsOverlay:!0},this.init()}},{key:"addColumnDef",value:function(r,o){var u=this,f={headerName:this.friendlyColumnNames[r]||r,field:r,width:o,sortable:!0,filter:!0,resizable:!0,onCellClicked:void 0,cellStyle:void 0,sort:void 0,cellRenderer:void 0};"soundId"===r&&(f.sort="asc"),"fieldName"===r&&(f.cellRenderer=function(p){return'<a href="/scene-details/'.concat(p.value,'">').concat(p.value,"</a>")}),"playSound"===r&&(f.onCellClicked=function(p){u.playSound(p.data.soundId)},f.cellStyle={color:"#007bff",textDecoration:"underline",cursor:"pointer"},f.cellRenderer=function(p){return'<i class="fa fa-play-circle"></i> Play sound: '.concat(p.value)}),this.columnDefs.push(f)}},{key:"playSound",value:function(r){var o="".concat(vn.KUJATA_DATA_BASE_URL,"/media/sounds/").concat(r,".ogg");console.log("Play sound - ".concat(r," - ").concat(o)),0!==r?(this.playingSound&&(this.playingSound.pause(),this.playingSound.currentTime=0),this.playingSound=new Audio(o),this.playingSound.play()):window.alert("Play sound 0 in game actually stops current sounds playing")}},{key:"init",value:function(){var r=this;this.fetchStatus="FETCHING",this.gridOptions.api&&this.gridOptions.api.showLoadingOverlay(),this.http.get(vn.KUJATA_DATA_BASE_URL+"/metadata/sound-list.json").subscribe(function(u){if(r.soundMetadata=u,r.soundMetadata.map(function(g){delete g.entityId,delete g.scriptIndex,g.playSound=g.soundId}),console.log("soundMetadata",u),r.rowData=sn(r.soundMetadata),r.fetchStatus="SUCCESS",r.soundMetadata.length>0)for(var f=0,p=Object.keys(r.friendlyColumnNames);f<p.length;f++){var v=p[f];r.addColumnDef(v,r.columnWidths[v]||75)}},function(u){r.fetchStatus="ERROR"})}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(Fo),st(sa))},n.\u0275cmp=Er({type:n,selectors:[["sound-details"]],decls:9,vars:3,consts:[[2,"background-color","#e0e0e0","padding","16px","margin-bottom","16px"],[2,"background-color","white","padding","16px"],[4,"ngIf"],[3,"routerLink","click"],[1,"ag-theme-balham",2,"width","100%","height","500px",3,"gridOptions","rowData","columnDefs"]],template:function(e,r){1&e&&(s(0,"div",0),s(1,"div",1),s(2,"h2"),oe(3,"Sound Details"),l(),s(4,"h3"),oe(5,"Usages"),l(),Ge(6,CZ,3,0,"div",2),Ge(7,wZ,3,0,"div",2),Ge(8,SZ,6,5,"div",2),l(),l()),2&e&&(J(6),d("ngIf","FETCHING"==r.fetchStatus),J(1),d("ngIf","ERROR"==r.fetchStatus),J(1),d("ngIf","SUCCESS"==r.fetchStatus))},directives:[aa,es,gL],pipes:[GT],styles:[""]}),n}();var xv=new dF(0,0,0,"YXZ"),Rv=new Z,TZ={type:"change"},DZ={type:"lock"},AZ={type:"unlock"},ZN=Math.PI/2,MZ=function(n){ve(e,n);var a=ge(e);function e(r,o){var u;N(this,e),(u=a.call(this)).domElement=o,u.isLocked=!1,u.minPolarAngle=0,u.maxPolarAngle=Math.PI,u.pointerSpeed=1;var y,f=Yn(u);function p(y){if(!1!==f.isLocked){var _=y.movementX||y.mozMovementX||y.webkitMovementX||0,C=y.movementY||y.mozMovementY||y.webkitMovementY||0;xv.setFromQuaternion(r.quaternion),xv.y-=.002*_*f.pointerSpeed,xv.x-=.002*C*f.pointerSpeed,xv.x=Math.max(ZN-f.maxPolarAngle,Math.min(ZN-f.minPolarAngle,xv.x)),r.quaternion.setFromEuler(xv),f.dispatchEvent(TZ)}}function v(){f.domElement.ownerDocument.pointerLockElement===f.domElement?(f.dispatchEvent(DZ),f.isLocked=!0):(f.dispatchEvent(AZ),f.isLocked=!1)}function g(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}return u.connect=function(){f.domElement.ownerDocument.addEventListener("mousemove",p),f.domElement.ownerDocument.addEventListener("pointerlockchange",v),f.domElement.ownerDocument.addEventListener("pointerlockerror",g)},u.disconnect=function(){f.domElement.ownerDocument.removeEventListener("mousemove",p),f.domElement.ownerDocument.removeEventListener("pointerlockchange",v),f.domElement.ownerDocument.removeEventListener("pointerlockerror",g)},u.dispose=function(){this.disconnect()},u.getObject=function(){return r},u.getDirection=(y=new Z(0,0,-1),function(_){return _.copy(y).applyQuaternion(r.quaternion)}),u.moveForward=function(y){Rv.setFromMatrixColumn(r.matrix,0),Rv.crossVectors(r.up,Rv),r.position.addScaledVector(Rv,y)},u.moveRight=function(y){Rv.setFromMatrixColumn(r.matrix,0),r.position.addScaledVector(Rv,y)},u.lock=function(){this.domElement.requestPointerLock()},u.unlock=function(){f.domElement.ownerDocument.exitPointerLock()},u.connect(),u}return e}(fl);function OZ(n,a){if(1&n&&(s(0,"div",13),s(1,"p"),oe(2),l(),s(3,"div",14),c(4,"div",15),l(),l()),2&n){var e=ye(2);J(2),zi("Loading blocks: ",e.loadingProgress.loaded," / ",e.loadingProgress.total,""),J(2),gh("width",e.loadingProgress.loaded/e.loadingProgress.total*100,"%")}}function PZ(n,a){if(1&n&&(s(0,"div",11),s(1,"p"),oe(2,"Loading world map metadata and blocks..."),l(),Ge(3,OZ,5,4,"div",12),l()),2&n){var e=ye();J(3),d("ngIf",e.loadingProgress.total>0)}}function IZ(n,a){1&n&&(s(0,"div",16),s(1,"p"),oe(2,"Sorry, this app had a problem loading the world map."),l(),l())}function LZ(n,a){if(1&n&&(s(0,"option",28),oe(1),l()),2&n){var e=a.$implicit;d("value",e.value),J(1),Ct(" ",e.label," ")}}function FZ(n,a){if(1&n){var e=L();s(0,"div",29),s(1,"div",30),oe(2,"UV Debug Panel - Editing Triangle"),l(),s(3,"div",31),s(4,"div"),s(5,"strong"),oe(6,"Block:"),l(),oe(7),l(),s(8,"div"),s(9,"strong"),oe(10,"Mesh:"),l(),oe(11),l(),s(12,"div"),s(13,"strong"),oe(14,"Triangle:"),l(),oe(15),l(),s(16,"div",32),oe(17,"Press 'U' to transfer hovered triangle here"),l(),l(),s(18,"div",33),s(19,"div",34),oe(20,"UV Visualizer (0-1 range)"),l(),c(21,"canvas",35),s(22,"div",36),s(23,"div",37),c(24,"span",38),oe(25,"UV1 (Red)"),l(),s(26,"div",37),c(27,"span",39),oe(28,"UV2 (Green)"),l(),s(29,"div",37),c(30,"span",40),oe(31,"UV3 (Blue)"),l(),l(),s(32,"div",41),oe(33,"Drag points to change UV coordinates"),l(),l(),s(34,"div",42),s(35,"div",43),oe(36),l(),s(37,"div",44),s(38,"label"),oe(39),l(),s(40,"input",45),ae("input",function(u){return lr(e),ye(2).updateUV("uv1","u",+u.target.value)}),l(),l(),s(41,"div",44),s(42,"label"),oe(43),l(),s(44,"input",45),ae("input",function(u){return lr(e),ye(2).updateUV("uv1","v",+u.target.value)}),l(),l(),l(),s(45,"div",42),s(46,"div",43),oe(47),l(),s(48,"div",44),s(49,"label"),oe(50),l(),s(51,"input",45),ae("input",function(u){return lr(e),ye(2).updateUV("uv2","u",+u.target.value)}),l(),l(),s(52,"div",44),s(53,"label"),oe(54),l(),s(55,"input",45),ae("input",function(u){return lr(e),ye(2).updateUV("uv2","v",+u.target.value)}),l(),l(),l(),s(56,"div",42),s(57,"div",43),oe(58),l(),s(59,"div",44),s(60,"label"),oe(61),l(),s(62,"input",45),ae("input",function(u){return lr(e),ye(2).updateUV("uv3","u",+u.target.value)}),l(),l(),s(63,"div",44),s(64,"label"),oe(65),l(),s(66,"input",45),ae("input",function(u){return lr(e),ye(2).updateUV("uv3","v",+u.target.value)}),l(),l(),l(),s(67,"div",46),s(68,"button",20),ae("click",function(){return lr(e),ye(2).resetUVs()}),oe(69,"Reset UVs"),l(),l(),l()}if(2&n){var r=ye(2);J(7),Ct(" ",r.uvDebugData.blockId,""),J(4),Ct(" ",r.uvDebugData.meshName,""),J(4),Ct(" ",r.uvDebugData.triangleIndex,""),J(21),Ct("Vertex 1 (",r.uvDebugData.vertexIndices[0],")"),J(3),Ct("U: ",r.uvDebugData.uvCoords.uv1.u.toFixed(4),""),J(1),d("value",r.uvDebugData.uvCoords.uv1.u),J(3),Ct("V: ",r.uvDebugData.uvCoords.uv1.v.toFixed(4),""),J(1),d("value",r.uvDebugData.uvCoords.uv1.v),J(3),Ct("Vertex 2 (",r.uvDebugData.vertexIndices[1],")"),J(3),Ct("U: ",r.uvDebugData.uvCoords.uv2.u.toFixed(4),""),J(1),d("value",r.uvDebugData.uvCoords.uv2.u),J(3),Ct("V: ",r.uvDebugData.uvCoords.uv2.v.toFixed(4),""),J(1),d("value",r.uvDebugData.uvCoords.uv2.v),J(3),Ct("Vertex 3 (",r.uvDebugData.vertexIndices[2],")"),J(3),Ct("U: ",r.uvDebugData.uvCoords.uv3.u.toFixed(4),""),J(1),d("value",r.uvDebugData.uvCoords.uv3.u),J(3),Ct("V: ",r.uvDebugData.uvCoords.uv3.v.toFixed(4),""),J(1),d("value",r.uvDebugData.uvCoords.uv3.v)}}function kZ(n,a){if(1&n){var e=L();s(0,"div",17),s(1,"p"),oe(2,"Complete FF7 World Map loaded! Use WASD to move, Space/Shift for up/down, mouse to look around."),l(),s(3,"p"),oe(4,"Click on the scene to enable pointer lock controls. Hover over triangles for details."),l(),s(5,"p"),s(6,"strong"),oe(7,"Press 'U'"),l(),oe(8," to transfer selected triangle to UV debugger (or default triangle if none selected)."),l(),s(9,"div",18),s(10,"button",19),ae("click",function(){return lr(e),ye().toggleWireframes()}),oe(11),l(),s(12,"button",20),ae("click",function(){return lr(e),ye().resetCameraPosition()}),oe(13," Reset Camera "),l(),s(14,"button",21),ae("click",function(){return lr(e),ye().toggleUVDebugPanel()}),oe(15),l(),s(16,"span",22),oe(17),l(),l(),s(18,"div",23),s(19,"label",24),oe(20,"Visualization Mode:"),l(),s(21,"select",25),ae("change",function(u){return lr(e),ye().changeVisualizationMode(u.target.value)}),Ge(22,LZ,2,2,"option",26),l(),l(),Ge(23,FZ,70,18,"div",27),l()}if(2&n){var r=ye();J(11),Ct(" ",r.showWireframes?"Hide":"Show"," Wireframes "),J(4),Ct(" ",r.showUVDebugPanel?"Hide":"Show"," UV Debug "),J(2),Ct("Debug: ",r.wireframeBlocks.size," blocks with wireframes"),J(4),d("value",r.visualizationMode),J(1),d("ngForOf",r.visualizationModes),J(1),d("ngIf",r.showUVDebugPanel&&r.uvDebugData)}}function NZ(n,a){1&n&&(s(0,"div",47),s(1,"p"),oe(2,"Hover over triangles to see details"),l(),s(3,"p"),s(4,"small"),oe(5,"(Unlock pointer first if using FPS controls)"),l(),l(),l())}function GZ(n,a){if(1&n&&(s(0,"div",48),s(1,"div",49),oe(2,"UV Coordinates:"),l(),s(3,"div",50),oe(4),c(5,"br"),oe(6),l(),l()),2&n){var e=ye(2);J(4),Ct(" U: ",e.triangleInfo.uv.u,""),J(2),Ct(" V: ",e.triangleInfo.uv.v," ")}}function BZ(n,a){if(1&n&&(s(0,"div"),oe(1),l()),2&n){var e=ye(2);J(1),Ct("Color: ",e.triangleInfo.material.color,"")}}function HZ(n,a){if(1&n&&(s(0,"div"),s(1,"strong"),oe(2,"Texture:"),l(),c(3,"br"),oe(4),c(5,"br"),oe(6),c(7,"br"),oe(8),l()),2&n){var e=ye(2);J(4),Ct(" Name: ",e.triangleInfo.material.texture.name,""),J(2),Ct(" Size: ",e.triangleInfo.material.texture.size,""),J(2),zi(" Wrap: ",e.triangleInfo.material.texture.wrapS,", ",e.triangleInfo.material.texture.wrapT," ")}}function VZ(n,a){if(1&n&&(s(0,"div",48),s(1,"div",49),oe(2,"Triangle Vertices:"),l(),s(3,"div",52),s(4,"div"),oe(5),l(),s(6,"div"),oe(7),l(),s(8,"div"),oe(9),l(),l(),l()),2&n){var e=ye(2);J(5),Jd("V1: [",e.triangleInfo.triangleVertices.v1[0].toFixed(2),", ",e.triangleInfo.triangleVertices.v1[1].toFixed(2),", ",e.triangleInfo.triangleVertices.v1[2].toFixed(2),"]"),J(2),Jd("V2: [",e.triangleInfo.triangleVertices.v2[0].toFixed(2),", ",e.triangleInfo.triangleVertices.v2[1].toFixed(2),", ",e.triangleInfo.triangleVertices.v2[2].toFixed(2),"]"),J(2),Jd("V3: [",e.triangleInfo.triangleVertices.v3[0].toFixed(2),", ",e.triangleInfo.triangleVertices.v3[1].toFixed(2),", ",e.triangleInfo.triangleVertices.v3[2].toFixed(2),"]")}}function WZ(n,a){if(1&n&&(s(0,"div",48),s(1,"div",49),oe(2,"Triangle UVs:"),l(),s(3,"div",52),s(4,"div"),oe(5),l(),s(6,"div"),oe(7),l(),s(8,"div"),oe(9),l(),l(),l()),2&n){var e=ye(2);J(5),zi("UV1: [",e.triangleInfo.triangleUVs.uv1[0].toFixed(4),", ",e.triangleInfo.triangleUVs.uv1[1].toFixed(4),"]"),J(2),zi("UV2: [",e.triangleInfo.triangleUVs.uv2[0].toFixed(4),", ",e.triangleInfo.triangleUVs.uv2[1].toFixed(4),"]"),J(2),zi("UV3: [",e.triangleInfo.triangleUVs.uv3[0].toFixed(4),", ",e.triangleInfo.triangleUVs.uv3[1].toFixed(4),"]")}}function UZ(n,a){if(1&n&&(s(0,"div",55),s(1,"strong"),oe(2,"Terrain:"),l(),oe(3),l()),2&n){var e=ye(3);J(3),zi(" ",e.getTerrainName(e.triangleInfo.metadata.terrain)," (",e.triangleInfo.metadata.terrain,") ")}}function zZ(n,a){1&n&&(s(0,"div",56),s(1,"strong"),oe(2,"Terrain:"),l(),oe(3," Not found "),l())}function jZ(n,a){if(1&n&&(s(0,"div",55),s(1,"strong"),oe(2,"Region:"),l(),oe(3),l()),2&n){var e=ye(3);J(3),zi(" ",e.getRegionName(e.triangleInfo.metadata.region)," (",e.triangleInfo.metadata.region,") ")}}function qZ(n,a){1&n&&(s(0,"div",56),s(1,"strong"),oe(2,"Region:"),l(),oe(3," Not found "),l())}function KZ(n,a){if(1&n&&(s(0,"div",55),s(1,"strong"),oe(2,"Script:"),l(),oe(3),l()),2&n){var e=ye(3);J(3),Ct(" ",e.triangleInfo.metadata.script," ")}}function YZ(n,a){1&n&&(s(0,"div",56),s(1,"strong"),oe(2,"Script:"),l(),oe(3," Not found "),l())}function $Z(n,a){if(1&n&&(s(0,"div",48),s(1,"div",49),oe(2,"Metadata:"),l(),s(3,"div",50),Ge(4,UZ,4,2,"div",53),Ge(5,zZ,4,0,"div",54),Ge(6,jZ,4,2,"div",53),Ge(7,qZ,4,0,"div",54),Ge(8,KZ,4,1,"div",53),Ge(9,YZ,4,0,"div",54),l(),l()),2&n){var e=ye(2);J(4),d("ngIf",null!==e.triangleInfo.metadata.terrain),J(1),d("ngIf",null===e.triangleInfo.metadata.terrain),J(1),d("ngIf",null!==e.triangleInfo.metadata.region),J(1),d("ngIf",null===e.triangleInfo.metadata.region),J(1),d("ngIf",null!==e.triangleInfo.metadata.script),J(1),d("ngIf",null===e.triangleInfo.metadata.script)}}function XZ(n,a){if(1&n&&(s(0,"div"),s(1,"div",48),s(2,"div",49),oe(3,"Block & Mesh:"),l(),s(4,"div",50),oe(5),l(),l(),s(6,"div",48),s(7,"div",49),oe(8,"Face Index:"),l(),s(9,"div",50),oe(10),l(),l(),s(11,"div",48),s(12,"div",49),oe(13,"Distance:"),l(),s(14,"div",50),oe(15),l(),l(),s(16,"div",48),s(17,"div",49),oe(18,"World Position:"),l(),s(19,"div",50),oe(20),c(21,"br"),oe(22),c(23,"br"),oe(24),l(),l(),Ge(25,GZ,7,2,"div",51),s(26,"div",48),s(27,"div",49),oe(28,"Material:"),l(),s(29,"div",50),s(30,"div"),oe(31),l(),s(32,"div"),oe(33),l(),Ge(34,BZ,2,1,"div",10),Ge(35,HZ,9,4,"div",10),l(),l(),s(36,"div",48),s(37,"div",49),oe(38,"Geometry:"),l(),s(39,"div",50),s(40,"div"),oe(41),l(),s(42,"div"),oe(43),l(),s(44,"div"),oe(45),l(),s(46,"div"),oe(47),l(),s(48,"div"),oe(49),l(),l(),l(),Ge(50,VZ,10,9,"div",51),Ge(51,WZ,10,6,"div",51),Ge(52,$Z,10,6,"div",51),l()),2&n){var e=ye();J(5),zi("Block ",e.triangleInfo.blockId," - ",e.triangleInfo.meshName,""),J(5),cn(e.triangleInfo.faceIndex),J(5),Ct("",e.triangleInfo.distance," units"),J(5),Ct(" X: ",e.triangleInfo.worldPosition.x,""),J(2),Ct(" Y: ",e.triangleInfo.worldPosition.y,""),J(2),Ct(" Z: ",e.triangleInfo.worldPosition.z," "),J(1),d("ngIf",e.triangleInfo.uv),J(6),Ct("Type: ",e.triangleInfo.material.type,""),J(2),Ct("Name: ",e.triangleInfo.material.name,""),J(1),d("ngIf",e.triangleInfo.material.color),J(1),d("ngIf",e.triangleInfo.material.texture),J(6),Ct("Type: ",e.triangleInfo.geometry.type,""),J(2),Ct("Vertices: ",e.triangleInfo.geometry.vertexCount,""),J(2),Ct("Faces: ",e.triangleInfo.geometry.faceCount,""),J(2),Ct("Has Normals: ",e.triangleInfo.geometry.hasNormals?"Yes":"No",""),J(2),Ct("Has UVs: ",e.triangleInfo.geometry.hasUVs?"Yes":"No",""),J(1),d("ngIf",e.triangleInfo.triangleVertices),J(1),d("ngIf",e.triangleInfo.triangleUVs),J(1),d("ngIf",e.triangleInfo.metadata)}}var JZ=function(){var n=function(){function a(e,r){N(this,a),this.http=e,this.cdr=r,this.environment=vn,this.SCENE_WIDTH=1200,this.SCENE_HEIGHT=800,this.fetchStatus="NONE",this.worldMapMetadata=null,this.walkmeshTypes=null,this.loadedBlocks=new Map,this.wireframeBlocks=new Map,this.showWireframes=!1,this.loadingProgress={loaded:0,total:0},this.isWorldTypeSwitching=!1,this.triangleInfo=null,this.raycaster=new Lq,this.mouse=new $e,this.isPointerLocked=!1,this.showUVDebugPanel=!1,this.uvDebugData=null,this.debugTriangleMesh=null,this.debugTriangleIndex=0,this.originalMaterial=null,this.availableTextures=[],this.currentTexture="",this.uvVisualizerCanvas=null,this.uvVisualizerContext=null,this.isDraggingUVPoint=!1,this.draggedVertex=null,this.uvVisualizerSize=200,this.visualizationMode="textured",this.visualizationModes=[{value:"textured",label:"Textured"},{value:"terrain",label:"Terrain"},{value:"region",label:"Region"},{value:"script",label:"Script (tbc)"}],this.originalMaterials=new Map,this.isDestroyed=!1,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.moveUp=!1,this.moveDown=!1,this.velocity=new Z,this.direction=new Z,this.clock=new Sl}return j(a,[{key:"ngOnInit",value:function(){this.containerId="world-".concat(this.worldType,"-container"),this.cameraStorageKey="ff7-world-camera-".concat(this.worldType)}},{key:"ngAfterViewInit",value:function(){var r=this;this.initThreeJS(),setTimeout(function(){r.loadWorldMapMetadata()},0)}},{key:"ngOnChanges",value:function(){this.scene&&(this.clearWorldData(),this.isWorldTypeSwitching=!0,this.loadWorldMapMetadata())}},{key:"ngOnDestroy",value:function(){console.log("WorldDetailsComponent destroying..."),this.isDestroyed=!0,this.saveCameraPosition(),this.saveInterval&&clearInterval(this.saveInterval),this.clearWorldData(),this.renderer&&this.renderer.dispose(),console.log("WorldDetailsComponent destroyed")}},{key:"initThreeJS",value:function(){var r=this;this.scene=new _l,this.scene.background=new Ht(2236962),this.camera=new kr(75,this.SCENE_WIDTH/this.SCENE_HEIGHT,.1,3e5),this.camera.position.set(0,5,10),this.renderer=new Tu({alpha:!0,antialias:!0}),this.renderer.setSize(this.SCENE_WIDTH,this.SCENE_HEIGHT),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=2,this.renderer.outputEncoding=Vn,this.controls=new MZ(this.camera,this.renderer.domElement),this.renderer.domElement.addEventListener("click",function(){r.controls.lock()}),this.controls.addEventListener("lock",function(){r.isPointerLocked=!0}),this.controls.addEventListener("unlock",function(){r.isPointerLocked=!1}),this.setupTriangleInspection(),this.setupKeyboardControls(),this.ambientLight=new wl(16777215,1),this.scene.add(this.ambientLight),this.directionalLight=new Mu(16777215,1),this.directionalLight.position.set(2e5,2e5,1e5),this.directionalLight.castShadow=!0,this.directionalLight.shadow.mapSize.width=2048,this.directionalLight.shadow.mapSize.height=2048,this.directionalLight.shadow.camera.near=.5,this.directionalLight.shadow.camera.far=1e5,this.directionalLight.visible=!1,this.scene.add(this.directionalLight);var o=new kq(5);this.scene.add(o);var u=new Ly(2,2,2),f=new hv({color:65280}),p=new mr(u,f);p.position.set(0,1,0),p.castShadow=!0,p.receiveShadow=!0;var v=new dA(20,20),g=new hv({color:8421504}),y=new mr(v,g);y.rotation.x=-Math.PI/2,y.position.y=-1,y.receiveShadow=!0;var _=document.getElementById(this.containerId);_&&_.appendChild(this.renderer.domElement),this.animate()}},{key:"clearWorldData",value:function(){var r=this;this.loadedBlocks.forEach(function(o){o.traverse(function(u){u instanceof mr&&(u.geometry&&u.geometry.dispose(),u.material&&(Array.isArray(u.material)?u.material.forEach(function(f){r.disposeMaterial(f)}):r.disposeMaterial(u.material)))}),r.scene.remove(o)}),this.loadedBlocks.clear(),this.wireframeBlocks.forEach(function(o){o.traverse(function(u){u instanceof ab&&(u.geometry&&u.geometry.dispose(),u.material&&r.disposeMaterial(u.material))}),r.scene.remove(o)}),this.wireframeBlocks.clear(),this.renderer&&this.renderer.renderLists.dispose(),this.loadingProgress={loaded:0,total:0},this.triangleInfo=null,this.uvDebugData=null,this.debugTriangleMesh=null,this.originalMaterial=null,this.availableTextures=[],this.currentTexture="",this.showUVDebugPanel=!1,this.originalMaterials.clear(),this.visualizationMode="textured",this.walkmeshTypes=null,this.fetchStatus="NONE",console.log("World data cleared and resources disposed")}},{key:"disposeMaterial",value:function(r){"map"in r&&r.map&&r.map.dispose(),"normalMap"in r&&r.normalMap&&r.normalMap.dispose(),"emissiveMap"in r&&r.emissiveMap&&r.emissiveMap.dispose(),"specularMap"in r&&r.specularMap&&r.specularMap.dispose(),"envMap"in r&&r.envMap&&r.envMap.dispose(),r.dispose()}},{key:"getWorldMapType",value:function(){switch(this.worldType){case"overground":default:return"wm0";case"underwater":return"wm2";case"glacier":return"wm3"}}},{key:"loadWorldMapMetadata",value:function(){var r=this;this.fetchStatus="FETCHING",this.cdr.detectChanges();var o=this.getWorldMapType(),u=vn.KUJATA_DATA_BASE_URL+"/metadata/world/".concat(o,"-map.json"),f=vn.KUJATA_DATA_BASE_URL+"/metadata/world/walkmesh-types.json";Promise.all([this.http.get(u).toPromise(),this.http.get(f).toPromise()]).then(function(p){var v=pr(p,2),y=v[1];r.worldMapMetadata=v[0],r.walkmeshTypes=y,r.loadAllWorldBlocks()}).catch(function(p){console.error("Error loading world map data for ".concat(o,":"),p),r.fetchStatus="ERROR",r.cdr.detectChanges()})}},{key:"loadAllWorldBlocks",value:function(){if(this.worldMapMetadata){var r=this.worldMapMetadata.blockCoordinates,o=Object.keys(r).filter(function(f){return r[f].isDefault}).map(function(f){return parseInt(f)});this.loadingProgress.total=o.length,this.loadingProgress.loaded=0;var u=this.createLoadingManager();this.loadBlocksInBatches(o,u)}}},{key:"createLoadingManager",value:function(){var r=this,o=new Ik;return o.onLoad=function(){console.log("All world blocks loaded successfully"),r.fetchStatus="SUCCESS",r.cdr.detectChanges(),r.positionCameraForWorldView(),r.initUVDebugPanel()},o.onProgress=function(u,f,p){console.log("Loading progress: ".concat(f,"/").concat(p," - ").concat(u))},o.onError=function(u){console.error("Error loading resource:",u)},o}},{key:"loadBlocksInBatches",value:function(r,o){return function(n,a,e,r){return new(e||(e=Promise))(function(u,f){function p(y){try{g(r.next(y))}catch(_){f(_)}}function v(y){try{g(r.throw(y))}catch(_){f(_)}}function g(y){y.done?u(y.value):function(u){return u instanceof e?u:new e(function(f){f(u)})}(y.value).then(p,v)}g((r=r.apply(n,a||[])).next())})}(this,void 0,void 0,eu().mark(function u(){var f,p,v;return eu().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:f=3,p=0;case 2:if(!(p<r.length)){y.next=12;break}return v=r.slice(p,p+f),y.next=6,this.loadBlockBatch(v,o);case 6:if(!(p+f<r.length)){y.next=9;break}return y.next=9,new Promise(function(_){return setTimeout(_,200)});case 9:p+=f,y.next=2;break;case 12:case"end":return y.stop()}},u,this)}))}},{key:"loadBlockBatch",value:function(r,o){var u=this,f=r.map(function(p){return u.loadWorldBlockPromise(p,o)});return Promise.all(f).then(function(){})}},{key:"loadWorldBlockPromise",value:function(r,o){var u=this;return new Promise(function(f,p){var v=new Hc(o),g=u.getWorldMapType(),y="/data/world/world_us.lgp/".concat(g,"-block_").concat(r,".gltf"),_=u.worldMapMetadata.blockCoordinates[r.toString()];v.load(vn.KUJATA_DATA_BASE_URL+y,function(C){if(u.isDestroyed)return console.log("Ignoring load callback for block ".concat(r," - component destroyed")),void f();Uc(C),C.scene.position.set(_.x,0,_.y),u.loadedBlocks.set(r,C.scene),u.scene.add(C.scene),u.createWireframeForBlock(r,C.scene),u.loadingProgress.loaded++,u.cdr.detectChanges(),console.log("Loaded block ".concat(r," (").concat(u.loadingProgress.loaded,"/").concat(u.loadingProgress.total,")")),f()},function(C){if(C.lengthComputable){var w=C.loaded/C.total*100;console.log("Block ".concat(r," loading: ").concat(w.toFixed(1),"%"))}},function(C){console.error("Error loading ".concat(g," block ").concat(r,":"),C),u.loadingProgress.loaded++,u.cdr.detectChanges(),f()})})}},{key:"positionCameraForWorldView",value:function(){this.setCameraToFitScene(),this.isWorldTypeSwitching=!1,this.initCameraPersistence()}},{key:"createWireframeForBlock",value:function(r,o){var u=new Bc;u.position.copy(o.position),u.scale.copy(o.scale),o.traverse(function(f){if(f instanceof mr&&f.geometry){var p=new Tk(f.geometry),v=new cv({color:0,transparent:!0,opacity:.5}),g=new ab(p,v);g.position.copy(f.position),g.rotation.copy(f.rotation),g.scale.copy(f.scale),u.add(g)}}),this.wireframeBlocks.set(r,u),u.visible=this.showWireframes,this.scene.add(u)}},{key:"toggleWireframes",value:function(){var r=this;this.showWireframes=!this.showWireframes,this.wireframeBlocks.forEach(function(o,u){o.visible=r.showWireframes})}},{key:"animate",value:function(){var r=this;if(!this.isDestroyed){requestAnimationFrame(function(){return r.animate()});var o=this.clock.getDelta();this.velocity.x-=10*this.velocity.x*o,this.velocity.z-=10*this.velocity.z*o,this.velocity.y-=10*this.velocity.y*o,this.direction.z=Number(this.moveForward)-Number(this.moveBackward),this.direction.x=Number(this.moveRight)-Number(this.moveLeft),this.direction.y=Number(this.moveUp)-Number(this.moveDown),this.direction.normalize(),(this.moveForward||this.moveBackward)&&(this.velocity.z-=5e5*this.direction.z*o),(this.moveLeft||this.moveRight)&&(this.velocity.x-=5e5*this.direction.x*o),(this.moveUp||this.moveDown)&&(this.velocity.y-=5e5*this.direction.y*o),this.controls.moveRight(-this.velocity.x*o),this.controls.moveForward(-this.velocity.z*o),this.camera.position.y+=-this.velocity.y*o,this.renderer&&this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)}}},{key:"focusCameraOnModel",value:function(r){var o=(new Ks).setFromObject(r),u=o.getCenter(new Z),f=o.getSize(new Z),v=2*Math.max(f.x,f.y,f.z);this.camera.position.set(u.x+v,u.y+.5*v,u.z+v),this.camera.lookAt(u)}},{key:"setupKeyboardControls",value:function(){var r=this;document.addEventListener("keydown",function(p){switch(p.code){case"ArrowUp":case"KeyW":r.moveForward=!0;break;case"ArrowLeft":case"KeyA":r.moveLeft=!0;break;case"ArrowDown":case"KeyS":r.moveBackward=!0;break;case"ArrowRight":case"KeyD":r.moveRight=!0;break;case"Space":r.moveUp=!0;break;case"ShiftLeft":case"ShiftRight":r.moveDown=!0;break;case"KeyU":r.transferTriangleToUVDebugger()}}),document.addEventListener("keyup",function(p){switch(p.code){case"ArrowUp":case"KeyW":r.moveForward=!1;break;case"ArrowLeft":case"KeyA":r.moveLeft=!1;break;case"ArrowDown":case"KeyS":r.moveBackward=!1;break;case"ArrowRight":case"KeyD":r.moveRight=!1;break;case"Space":r.moveUp=!1;break;case"ShiftLeft":case"ShiftRight":r.moveDown=!1}})}},{key:"setupTriangleInspection",value:function(){var r=this;this.renderer.domElement.addEventListener("mousemove",function(o){r.isPointerLocked?r.triangleInfo=null:r.inspectTriangleAtMouse(o)}),this.renderer.domElement.addEventListener("mouseleave",function(){r.triangleInfo=null})}},{key:"inspectTriangleAtMouse",value:function(r){var o=this.renderer.domElement.getBoundingClientRect();this.mouse.x=(r.clientX-o.left)/o.width*2-1,this.mouse.y=-(r.clientY-o.top)/o.height*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var u=[];this.loadedBlocks.forEach(function(v){v.traverse(function(g){g instanceof mr&&u.push(g)})});var f=this.raycaster.intersectObjects(u);f.length>0?this.analyzeTriangle(f[0]):this.triangleInfo=null}},{key:"analyzeTriangle",value:function(r){var o,u,f,p,v=r.object,g=v.geometry,y=v.material,_=r.faceIndex,C=r.point,w=r.uv,x=-1;this.loadedBlocks.forEach(function(X,re){X.traverse(function(de){de===v&&(x=re)})});var E=null,b=null,T=null;if(g.index&&void 0!==_){var A=g.index.array,M=g.attributes.position.array,O=null===(o=g.attributes.normal)||void 0===o?void 0:o.array,I=null===(u=g.attributes.uv)||void 0===u?void 0:u.array,B=A[3*_],z=A[3*_+1],P=A[3*_+2];E={v1:[M[3*B],M[3*B+1],M[3*B+2]],v2:[M[3*z],M[3*z+1],M[3*z+2]],v3:[M[3*P],M[3*P+1],M[3*P+2]]},O&&(b={n1:[O[3*B],O[3*B+1],O[3*B+2]],n2:[O[3*z],O[3*z+1],O[3*z+2]],n3:[O[3*P],O[3*P+1],O[3*P+2]]}),I&&(T={uv1:[I[2*B],I[2*B+1]],uv2:[I[2*z],I[2*z+1]],uv3:[I[2*P],I[2*P+1]]})}var W={type:y.constructor.name,name:y.name||"Unnamed"};(y instanceof hv||y instanceof xa)&&(W.color="#".concat(y.color.getHexString()),y.map&&(W.texture={name:y.map.name||"Unnamed texture",size:"".concat((null===(f=y.map.image)||void 0===f?void 0:f.width)||"unknown","x").concat((null===(p=y.map.image)||void 0===p?void 0:p.height)||"unknown"),format:y.map.format,type:y.map.type,wrapS:y.map.wrapS,wrapT:y.map.wrapT,magFilter:y.map.magFilter,minFilter:y.map.minFilter})),this.triangleInfo={blockId:x,meshName:v.name||"Unnamed mesh",faceIndex:_,distance:r.distance.toFixed(2),worldPosition:{x:C.x.toFixed(2),y:C.y.toFixed(2),z:C.z.toFixed(2)},uv:w?{u:w.x.toFixed(4),v:w.y.toFixed(4)}:null,triangleVertices:E,triangleNormals:b,triangleUVs:T,material:W,geometry:{type:g.constructor.name,vertexCount:g.attributes.position.count,faceCount:g.index?g.index.count/3:g.attributes.position.count/3,hasNormals:!!g.attributes.normal,hasUVs:!!g.attributes.uv},metadata:this.getTriangleMetadata(v,_)}}},{key:"getTriangleMetadata",value:function(r,o){var u=r.geometry,f={terrain:null,region:null,script:null,availableAttributes:Object.keys(u.attributes)},p=u.attributes._terrain_type||u.attributes._TERRAIN_TYPE||u.attributes.TERRAIN_TYPE;p&&3*o<p.count&&(f.terrain=p.getX(3*o));var v=u.attributes._region_id||u.attributes._REGION_ID||u.attributes.REGION_ID;v&&3*o<v.count&&(f.region=v.getX(3*o));var g=u.attributes._script_id||u.attributes._SCRIPT_ID||u.attributes.SCRIPT_ID;return g&&3*o<g.count&&(f.script=g.getX(3*o)),f}},{key:"getTerrainName",value:function(r){return this.walkmeshTypes&&this.walkmeshTypes.triangleTypes?this.walkmeshTypes.triangleTypes[r]||"Unknown":"Loading..."}},{key:"getRegionName",value:function(r){return this.walkmeshTypes&&this.walkmeshTypes.regionNames?this.walkmeshTypes.regionNames[r]||"Unknown":"Loading..."}},{key:"setCameraToFitScene",value:function(){if(0!==this.loadedBlocks.size){var r=new Ks;if(this.loadedBlocks.forEach(function(_,C){_.traverse(function(w){if(w instanceof mr){var x=(new Ks).setFromObject(w);r.union(x)}})}),!r.isEmpty()){var o=r.getCenter(new Z),u=r.getSize(new Z),f=Math.max(u.x,u.z),p=this.camera.fov*(Math.PI/180),v=f/2/Math.tan(p/2),y=new Z(o.x,o.y+.75*v,o.z);this.camera.position.copy(y),this.camera.lookAt(o.x,o.y,o.z)}}}},{key:"transferTriangleToUVDebugger",value:function(){var r=null,o=0;if(this.triangleInfo){var f=this.triangleInfo.meshName,p=this.loadedBlocks.get(this.triangleInfo.blockId);p&&p.traverse(function(y){y instanceof mr&&y.name===f&&(r=y)}),o=this.triangleInfo.faceIndex||0}else{var v=Math.min.apply(Math,On(Array.from(this.loadedBlocks.keys()))),g=this.loadedBlocks.get(v);g&&g.traverse(function(y){y instanceof mr&&!r&&(r=y)}),o=0}r&&r.geometry.attributes.uv?(this.debugTriangleMesh=r,this.debugTriangleIndex=o,this.originalMaterial=r.material,this.collectAvailableTextures(),this.updateUVDebugData(),this.showUVDebugPanel=!0,this.initUVVisualizer()):console.warn("No valid mesh with UV coordinates found for UV debugger")}},{key:"initUVDebugPanel",value:function(){var r=Math.min.apply(Math,On(Array.from(this.loadedBlocks.keys()))),o=this.loadedBlocks.get(r);if(o){var u=null;o.traverse(function(f){f instanceof mr&&!u&&(u=f)}),u&&u.geometry.attributes.uv?(this.debugTriangleMesh=u,this.debugTriangleIndex=0,this.originalMaterial=u.material,this.collectAvailableTextures(),this.updateUVDebugData()):console.warn("No mesh with UV coordinates found for debug panel")}else console.warn("No blocks loaded for UV debug panel")}},{key:"updateUVDebugData",value:function(){if(this.debugTriangleMesh){var r=this.debugTriangleMesh.geometry,o=r.attributes.uv,u=r.index;if(o&&u){var f=u.array[3*this.debugTriangleIndex],p=u.array[3*this.debugTriangleIndex+1],v=u.array[3*this.debugTriangleIndex+2],g=o.array;this.uvDebugData={blockId:this.getBlockIdForMesh(this.debugTriangleMesh),meshName:this.debugTriangleMesh.name||"Unnamed",triangleIndex:this.debugTriangleIndex,vertexIndices:[f,p,v],uvCoords:{uv1:{u:g[2*f],v:g[2*f+1]},uv2:{u:g[2*p],v:g[2*p+1]},uv3:{u:g[2*v],v:g[2*v+1]}}}}}}},{key:"getBlockIdForMesh",value:function(r){var u,o=Pt(this.loadedBlocks.entries());try{for(o.s();!(u=o.n()).done;){var f=pr(u.value,2),p=f[0],g=!1;if(f[1].traverse(function(y){y===r&&(g=!0)}),g)return p}}catch(y){o.e(y)}finally{o.f()}return-1}},{key:"toggleUVDebugPanel",value:function(){this.showUVDebugPanel=!this.showUVDebugPanel,this.showUVDebugPanel&&!this.uvDebugData&&this.initUVDebugPanel(),this.showUVDebugPanel&&this.initUVVisualizer()}},{key:"updateUV",value:function(r,o,u){if(this.debugTriangleMesh&&this.uvDebugData){var f=this.debugTriangleMesh.geometry,p=f.attributes.uv;p&&f.index&&(p.array[2*this.uvDebugData.vertexIndices[{uv1:0,uv2:1,uv3:2}[r]]+("u"===o?0:1)]=u,this.uvDebugData.uvCoords[r][o]=u,p.needsUpdate=!0,this.drawUVVisualizer())}}},{key:"resetUVs",value:function(){!this.debugTriangleMesh||!this.uvDebugData||(this.updateUV("uv1","u",0),this.updateUV("uv1","v",0),this.updateUV("uv2","u",1),this.updateUV("uv2","v",0),this.updateUV("uv3","u",.5),this.updateUV("uv3","v",1))}},{key:"collectAvailableTextures",value:function(){var r=new Set,o=new Map;if(this.loadedBlocks.forEach(function(f,p){f.traverse(function(v){if(v instanceof mr){var g=v.material;if((g instanceof hv||g instanceof xa)&&g.map&&g.map.name){var y=g.map.name||"texture_".concat(p,"_").concat(v.name);r.add(y),o.set(y,g.map)}}})}),this.availableTextures=Array.from(r).sort(),this.debugTriangleMesh&&this.originalMaterial){var u=this.originalMaterial;u.map&&u.map.name?this.currentTexture=u.map.name:this.availableTextures.length>0&&(this.currentTexture=this.availableTextures[0])}console.log("Found ".concat(this.availableTextures.length," available textures:"),this.availableTextures)}},{key:"changeTexture",value:function(r){if(this.debugTriangleMesh&&r){var o=null;if(this.loadedBlocks.forEach(function(p){p.traverse(function(v){if(v instanceof mr){var g=v.material;g.map&&g.map.name===r&&(o=g.map)}})}),!o)return void console.warn("Texture ".concat(r," not found"));var f,u=this.debugTriangleMesh.material;f=u instanceof hv?new hv({map:o,color:u.color,transparent:u.transparent,opacity:u.opacity}):new xa({map:o,color:u.color||16777215,transparent:u.transparent,opacity:u.opacity}),this.debugTriangleMesh.material=f,this.currentTexture=r}}},{key:"resetTexture",value:function(){if(this.debugTriangleMesh&&this.originalMaterial){this.debugTriangleMesh.material=this.originalMaterial;var r=this.originalMaterial;r.map&&r.map.name&&(this.currentTexture=r.map.name)}}},{key:"initUVVisualizer",value:function(){var r=this;setTimeout(function(){r.uvVisualizerCanvas=document.getElementById("uv-visualizer-canvas"),r.uvVisualizerCanvas&&(r.uvVisualizerContext=r.uvVisualizerCanvas.getContext("2d"),r.uvVisualizerContext&&(r.uvVisualizerCanvas.width=r.uvVisualizerSize,r.uvVisualizerCanvas.height=r.uvVisualizerSize,r.setupUVVisualizerEvents(),r.drawUVVisualizer()))},100)}},{key:"setupUVVisualizerEvents",value:function(){var r=this;!this.uvVisualizerCanvas||(this.uvVisualizerCanvas.addEventListener("mousedown",function(o){var u=r.uvVisualizerCanvas.getBoundingClientRect(),y=r.findClosestUVVertex((o.clientX-u.left)/r.uvVisualizerSize,(o.clientY-u.top)/r.uvVisualizerSize);y&&(r.isDraggingUVPoint=!0,r.draggedVertex=y,r.uvVisualizerCanvas.style.cursor="grabbing")}),this.uvVisualizerCanvas.addEventListener("mousemove",function(o){if(r.isDraggingUVPoint&&r.draggedVertex){var _=r.uvVisualizerCanvas.getBoundingClientRect(),w=o.clientY-_.top,x=Math.max(0,Math.min(1,(o.clientX-_.left)/r.uvVisualizerSize)),E=Math.max(0,Math.min(1,w/r.uvVisualizerSize));r.updateUV(r.draggedVertex,"u",x),r.updateUV(r.draggedVertex,"v",E),r.drawUVVisualizer()}else{var u=r.uvVisualizerCanvas.getBoundingClientRect(),y=r.findClosestUVVertex((o.clientX-u.left)/r.uvVisualizerSize,(o.clientY-u.top)/r.uvVisualizerSize);r.uvVisualizerCanvas.style.cursor=y?"grab":"default"}}),this.uvVisualizerCanvas.addEventListener("mouseup",function(){r.isDraggingUVPoint=!1,r.draggedVertex=null,r.uvVisualizerCanvas.style.cursor="default"}),this.uvVisualizerCanvas.addEventListener("mouseleave",function(){r.isDraggingUVPoint=!1,r.draggedVertex=null,r.uvVisualizerCanvas.style.cursor="default"}))}},{key:"findClosestUVVertex",value:function(r,o){if(!this.uvDebugData)return null;for(var p=null,v=.2,g=0,y=[{name:"uv1",u:this.uvDebugData.uvCoords.uv1.u%1,v:this.uvDebugData.uvCoords.uv1.v%1},{name:"uv2",u:this.uvDebugData.uvCoords.uv2.u%1,v:this.uvDebugData.uvCoords.uv2.v%1},{name:"uv3",u:this.uvDebugData.uvCoords.uv3.u%1,v:this.uvDebugData.uvCoords.uv3.v%1}];g<y.length;g++){var _=y[g],C=Math.sqrt(Math.pow(r-_.u,2)+Math.pow(o-_.v,2));C<v&&(v=C,p=_.name)}return p}},{key:"drawUVVisualizer",value:function(){if(this.uvVisualizerContext&&this.uvDebugData){var r=this.uvVisualizerContext,o=this.uvVisualizerSize;r.clearRect(0,0,o,o),this.drawTextureBackground(r,o),this.drawUVTriangle(r,o),this.drawUVPoints(r,o)}}},{key:"drawTextureBackground",value:function(r,o){if(this.debugTriangleMesh){var u=this.debugTriangleMesh.material;if(u.map&&u.map.image)try{r.drawImage(u.map.image,0,0,o,o),r.fillStyle="rgba(255, 255, 255, 0.1)",r.fillRect(0,0,o,o)}catch(p){r.fillStyle="#f0f0f0",r.fillRect(0,0,o,o)}}}},{key:"drawUVGrid",value:function(r,o){r.strokeStyle="#ccc",r.lineWidth=1;for(var u=0;u<=10;u++){var f=u/10*o;r.beginPath(),r.moveTo(f,0),r.lineTo(f,o),r.stroke(),r.beginPath(),r.moveTo(0,f),r.lineTo(o,f),r.stroke()}r.strokeStyle="#999",r.lineWidth=2,r.strokeRect(0,0,o,o)}},{key:"drawUVTriangle",value:function(r,o){if(this.uvDebugData){var u=this.uvDebugData.uvCoords,f=u.uv1.u%1*o,p=u.uv1.v%1*o,v=u.uv2.u%1*o,g=u.uv2.v%1*o,y=u.uv3.u%1*o,_=u.uv3.v%1*o;r.strokeStyle="#ff0000",r.lineWidth=2,r.beginPath(),r.moveTo(f,p),r.lineTo(v,g),r.lineTo(y,_),r.closePath(),r.stroke(),r.fillStyle="rgba(255, 0, 0, 0.1)",r.fill()}}},{key:"drawUVPoints",value:function(r,o){if(this.uvDebugData){var u=this.uvDebugData.uvCoords;[{name:"UV1",u:u.uv1.u,v:u.uv1.v,color:"#ff0000"},{name:"UV2",u:u.uv2.u,v:u.uv2.v,color:"#00ff00"},{name:"UV3",u:u.uv3.u,v:u.uv3.v,color:"#0000ff"}].forEach(function(p){var v=p.u%1*o,g=p.v%1*o;r.fillStyle=p.color,r.beginPath(),r.arc(v,g,6,0,2*Math.PI),r.fill(),r.strokeStyle="#ffffff",r.lineWidth=2,r.stroke(),r.fillStyle="#000000",r.font="10px Arial",r.fillText("".concat(p.name," (").concat(p.u.toFixed(2),", ").concat(p.v.toFixed(2),")"),v+8,g-8)})}}},{key:"changeVisualizationMode",value:function(r){this.visualizationMode=r,this.updateLightingForMode(r),this.applyVisualizationMode()}},{key:"updateLightingForMode",value:function(r){"textured"===r?(this.ambientLight.intensity=1,this.directionalLight.visible=!1):(this.ambientLight.intensity=.3,this.directionalLight.visible=!0)}},{key:"applyVisualizationMode",value:function(){var r=this;this.loadedBlocks.forEach(function(o){o.traverse(function(u){u instanceof mr&&r.applyMaterialToMesh(u,r.visualizationMode)})}),this.setCameraToFitScene()}},{key:"applyMaterialToMesh",value:function(r,o){if(this.originalMaterials.has(r)||this.originalMaterials.set(r,r.material),"textured"!==o)this.applyVertexColors(r,o);else{var u=this.originalMaterials.get(r);u&&(r.material=u,r.geometry.attributes.color&&r.geometry.deleteAttribute("color"))}}},{key:"applyVertexColors",value:function(r,o){var f,p,u=r.geometry,v=u.attributes._terrain_type||u.attributes._TERRAIN_TYPE||u.attributes.TERRAIN_TYPE,g=u.attributes._region_id||u.attributes._REGION_ID||u.attributes.REGION_ID,y=u.attributes._script_id||u.attributes._SCRIPT_ID||u.attributes.SCRIPT_ID;switch(o){case"terrain":f=v,p=this.getTerrainColors();break;case"region":f=g,p=this.getRegionColors();break;case"script":f=y,p=this.getScriptColors();break;default:return}if(f){var _=u.attributes.position.count;if(f.count!==(u.index?u.index.count/3:_/3))return f.count===_?void this.applyPerVertexMetadata(r,o,f,p):void this.applySharedMetadata(r,o,f,p);this.applyPerTriangleMetadata(r,o,f,p)}else this.applyFallbackVertexColors(r,[.8,.4,.4])}},{key:"applyPerTriangleMetadata",value:function(r,o,u,f){var p=r.geometry,v=p.attributes.position.count,g=new Float32Array(3*v);if(p.index)for(var y=p.index.array,_=0;_<y.length;_+=3){var C=Math.floor(_/3),x=f[u.getX(C)]||[.7,.7,.7],E=y[_],b=y[_+1],T=y[_+2];g[3*E]=x[0],g[3*E+1]=x[1],g[3*E+2]=x[2],g[3*b]=x[0],g[3*b+1]=x[1],g[3*b+2]=x[2],g[3*T]=x[0],g[3*T+1]=x[1],g[3*T+2]=x[2]}else for(var A=0;A<v;A+=3)for(var M=Math.floor(A/3),I=f[u.getX(M)]||[.7,.7,.7],B=0;B<3;B++){var z=A+B;g[3*z]=I[0],g[3*z+1]=I[1],g[3*z+2]=I[2]}this.applyColorsToMesh(r,g,o)}},{key:"applyPerVertexMetadata",value:function(r,o,u,f){for(var v=r.geometry.attributes.position.count,g=new Float32Array(3*v),y=0;y<v;y++){var C=f[u.getX(y)]||[.7,.7,.7];g[3*y]=C[0],g[3*y+1]=C[1],g[3*y+2]=C[2]}this.applyColorsToMesh(r,g,o)}},{key:"applySharedMetadata",value:function(r,o,u,f){var p=r.geometry,v=p.attributes.position.count,g=new Float32Array(3*v);if(p.index)for(var y=p.index.array,_=0;_<y.length;_+=3){var C=Math.floor(_/3),E=f[u.getX(C%u.count)]||[.7,.7,.7],b=y[_],T=y[_+1],A=y[_+2];g[3*b]=E[0],g[3*b+1]=E[1],g[3*b+2]=E[2],g[3*T]=E[0],g[3*T+1]=E[1],g[3*T+2]=E[2],g[3*A]=E[0],g[3*A+1]=E[1],g[3*A+2]=E[2]}else for(var M=0;M<v;M+=3)for(var O=Math.floor(M/3),z=f[u.getX(O%u.count)]||[.7,.7,.7],P=0;P<3;P++){var W=M+P;g[3*W]=z[0],g[3*W+1]=z[1],g[3*W+2]=z[2]}this.applyColorsToMesh(r,g,o)}},{key:"applyColorsToMesh",value:function(r,o,u){var f=r.geometry,p=new io(o,3);f.setAttribute("color",p);var v=new Ak({vertexColors:!0,name:"".concat(u,"_vertex_colors")});r.material=v,r.receiveShadow=!0,r.castShadow=!0}},{key:"applyFallbackVertexColors",value:function(r,o){for(var u=r.geometry,f=u.attributes.position.count,p=new Float32Array(3*f),v=0;v<f;v++)p[3*v]=o[0],p[3*v+1]=o[1],p[3*v+2]=o[2];var g=new io(p,3);u.setAttribute("color",g);var y=new Ak({vertexColors:!0,name:"fallback_vertex_colors"});r.material=y,r.receiveShadow=!0,r.castShadow=!0}},{key:"getTerrainColors",value:function(){var r=this,u={};switch(this.getWorldMapType()){case"wm0":u={0:"#4c3",1:"#3a3",2:"#977",3:"#00a",4:"#2bad9f",5:"#00d",6:"#14f",7:"#898",8:"#ee7",9:"#aa5",10:"#eee",11:"#ff0",12:"#aa0",13:"#0d0",14:"#0e0",15:"#0f0",16:"#a98",17:"#ffa",18:"#668",19:"#aa7",20:"#bba",21:"#a88",22:"#0af",23:"#000",24:"#ee7",25:"#282",26:"#008",27:"#fbb",28:"#ffc",29:"#b99",30:"#c99"};break;case"wm2":u={0:"#258",3:"#69a",15:"#479"};break;case"wm3":u={1:"#aaa",2:"#cce",9:"#eee",10:"#fff"}}var f={};return Object.entries(u).forEach(function(p){var v=pr(p,2),g=v[0],_=r.hexToRgb(v[1]);f[parseInt(g)]=[_.r/255,_.g/255,_.b/255]}),f}},{key:"getRegionColors",value:function(){var r=this,u={};switch(this.getWorldMapType()){case"wm0":u={0:"#605a5a",1:"#5c3",2:"#69c",3:"#988",4:"#d0a040",5:"#492",6:"#aa6039",7:"#809080",8:"#6a7",9:"#e65",10:"#5e5",11:"#fff",12:"#a86",13:"#c97",14:"#0d0",15:"#8f0",16:"#f9a",17:"#00a"};break;case"wm2":u={0:"#258",18:"#69a"};break;case"wm3":u={11:"#fff"}}var f={};return Object.entries(u).forEach(function(p){var v=pr(p,2),g=v[0],_=r.hexToRgb(v[1]);f[parseInt(g)]=[_.r/255,_.g/255,_.b/255]}),f}},{key:"getScriptColors",value:function(){var r=this,u={};Object.entries({0:"#6a6a6a",1:"#555555",2:"#000000",3:"#ff4a00",4:"#ff0000",5:"#ff5500",6:"#ff8800",7:"#ffaa00",8:"#cc0000"}).forEach(function(C){var w=pr(C,2),x=w[0],b=r.hexToRgb(w[1]);u[parseInt(x)]=[b.r/255,b.g/255,b.b/255]});for(var f=9;f<256;f++)if(f>=100&&f<=150){var p=this.hexToRgb("#ffff00");u[f]=[p.r/255,p.g/255,p.b/255]}else{var _=this.hsvToRgb(137.508*f%360,.7,.8);u[f]=[_.r/255,_.g/255,_.b/255]}return u}},{key:"hexToRgb",value:function(r){return 3===(r=r.replace("#","")).length&&(r=r.split("").map(function(p){return p+p}).join("")),{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16)}}},{key:"hsvToRgb",value:function(r,o,u){var f=u*o,p=f*(1-Math.abs(r/60%2-1)),v=u-f,g=0,y=0,_=0;return 0<=r&&r<60?(g=f,y=p,_=0):60<=r&&r<120?(g=p,y=f,_=0):120<=r&&r<180?(g=0,y=f,_=p):180<=r&&r<240?(g=0,y=p,_=f):240<=r&&r<300?(g=p,y=0,_=f):300<=r&&r<360&&(g=f,y=0,_=p),{r:Math.round(255*(g+v)),g:Math.round(255*(y+v)),b:Math.round(255*(_+v))}}},{key:"initCameraPersistence",value:function(){var r=this;this.loadCameraPosition(),this.saveInterval=setInterval(function(){r.saveCameraPosition()},2e3)}},{key:"saveCameraPosition",value:function(){if(this.camera){var r={position:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},rotation:{x:this.camera.rotation.x,y:this.camera.rotation.y,z:this.camera.rotation.z},quaternion:{x:this.camera.quaternion.x,y:this.camera.quaternion.y,z:this.camera.quaternion.z,w:this.camera.quaternion.w},timestamp:Date.now()};localStorage.setItem(this.cameraStorageKey,JSON.stringify(r))}}},{key:"loadCameraPosition",value:function(){var r=localStorage.getItem(this.cameraStorageKey);if(r&&this.camera)try{var o=JSON.parse(r);if(Date.now()-o.timestamp>6048e5)return;this.camera.position.set(o.position.x,o.position.y,o.position.z),this.camera.rotation.set(o.rotation.x,o.rotation.y,o.rotation.z),this.camera.quaternion.set(o.quaternion.x,o.quaternion.y,o.quaternion.z,o.quaternion.w)}catch(f){console.error("Error loading saved camera position:",f)}}},{key:"resetCameraPosition",value:function(){localStorage.removeItem(this.cameraStorageKey),this.positionCameraForWorldView()}},{key:"exportCameraPosition",value:function(){return this.camera?JSON.stringify({position:this.camera.position,rotation:this.camera.rotation,quaternion:this.camera.quaternion},null,2):""}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(sa),st(K0))},n.\u0275cmp=Er({type:n,selectors:[["world-details"]],inputs:{worldType:"worldType"},features:[jo],decls:14,vars:9,consts:[[1,"world-details-panel"],[1,"world-title"],["class","status-message",4,"ngIf"],["class","status-message error",4,"ngIf"],["class","world-info",4,"ngIf"],[1,"main-content"],[1,"scene-container",3,"id"],[1,"triangle-info-panel"],[1,"info-header"],["class","no-info-message",4,"ngIf"],[4,"ngIf"],[1,"status-message"],["class","loading-progress",4,"ngIf"],[1,"loading-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"status-message","error"],[1,"world-info"],[1,"debug-controls"],[1,"debug-button",3,"click"],[1,"debug-button","reset-button",3,"click"],[1,"debug-button","uv-button",3,"click"],[1,"debug-info"],[1,"visualization-controls"],[1,"visualization-label"],[1,"visualization-dropdown",3,"value","change"],[3,"value",4,"ngFor","ngForOf"],["class","uv-debug-panel",4,"ngIf"],[3,"value"],[1,"uv-debug-panel"],[1,"uv-debug-header"],[1,"uv-debug-info"],[1,"uv-debug-hint"],[1,"uv-visualizer-container"],[1,"uv-visualizer-label"],["id","uv-visualizer-canvas",1,"uv-visualizer-canvas"],[1,"uv-visualizer-legend"],[1,"uv-legend-item"],[1,"uv-legend-color","uv1-color"],[1,"uv-legend-color","uv2-color"],[1,"uv-legend-color","uv3-color"],[1,"uv-visualizer-hint"],[1,"uv-vertex-controls"],[1,"uv-vertex-label"],[1,"uv-slider-group"],["type","range","min","0","max","1","step","0.001",3,"value","input"],[1,"uv-debug-actions"],[1,"no-info-message"],[1,"info-section"],[1,"info-label"],[1,"info-value"],["class","info-section",4,"ngIf"],[1,"info-value","vertex-data"],["class","metadata-section",4,"ngIf"],["class","metadata-missing",4,"ngIf"],[1,"metadata-section"],[1,"metadata-missing"]],template:function(e,r){1&e&&(s(0,"div",0),s(1,"div",1),oe(2),Sh(3,"titlecase"),l(),Ge(4,PZ,4,1,"div",2),Ge(5,IZ,3,0,"div",3),Ge(6,kZ,24,6,"div",4),s(7,"div",5),c(8,"div",6),s(9,"div",7),s(10,"div",8),oe(11,"Triangle Inspector"),l(),Ge(12,NZ,6,0,"div",9),Ge(13,XZ,53,20,"div",10),l(),l(),l()),2&e&&(J(2),Ct("",bh(3,7,r.worldType)," World"),J(2),d("ngIf","FETCHING"==r.fetchStatus),J(1),d("ngIf","ERROR"==r.fetchStatus),J(1),d("ngIf","SUCCESS"==r.fetchStatus),J(2),d("id","world-"+r.worldType+"-container"),J(4),d("ngIf",!r.triangleInfo),J(1),d("ngIf",r.triangleInfo))},directives:[aa,Za],pipes:[BT],styles:[".world-details-panel[_ngcontent-%COMP%]{width:100%;background-color:#f0f0f0;padding:16px;text-align:center}.world-title[_ngcontent-%COMP%]{font-size:16pt;color:#404040;margin-bottom:16px;font-weight:700}.main-content[_ngcontent-%COMP%]{display:flex;grid-gap:16px;gap:16px;align-items:flex-start;justify-content:center}.scene-container[_ngcontent-%COMP%]{display:inline-block;width:1200px;height:800px;background-color:#222;border:solid #c0c0c0 2px;flex-shrink:0}.triangle-info-panel[_ngcontent-%COMP%]{width:300px;background-color:#f8f8f8;border:solid #c0c0c0 2px;border-radius:4px;padding:12px;font-size:9pt;max-height:800px;overflow-y:auto;flex-shrink:0}.info-header[_ngcontent-%COMP%]{font-weight:700;font-size:11pt;color:#404040;margin-bottom:12px;text-align:center;border-bottom:solid #c0c0c0 1px;padding-bottom:4px}.info-section[_ngcontent-%COMP%]{margin-bottom:8px;padding:4px;background-color:#fff;border-radius:2px;border:solid #e0e0e0 1px}.info-label[_ngcontent-%COMP%]{font-weight:700;color:#666;font-size:8pt;margin-bottom:2px}.info-value[_ngcontent-%COMP%]{color:#333;font-family:monospace;font-size:8pt;line-height:1.3}.vertex-data[_ngcontent-%COMP%]{font-size:7pt;line-height:1.2}.vertex-data[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:1px 0}.no-info-message[_ngcontent-%COMP%]{text-align:center;color:#888;font-style:italic;padding:20px;background-color:#f0f0f0;border-radius:4px;margin:10px 0}.no-info-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.no-info-message[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:7pt;color:#aaa}.status-message[_ngcontent-%COMP%]{padding:20px;font-size:12pt;color:#666}.status-message.error[_ngcontent-%COMP%]{color:#c00}.world-info[_ngcontent-%COMP%]{padding:12px;font-size:10pt;color:#404040;background-color:#e0e0e0;margin-bottom:16px;border-radius:4px}.debug-controls[_ngcontent-%COMP%]{margin-top:8px;padding-top:8px;border-top:solid #c0c0c0 1px}.debug-button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none;padding:6px 12px;margin-right:8px;cursor:pointer;border-radius:4px;font-size:9pt;transition:background-color .3s}.debug-button[_ngcontent-%COMP%]:hover{background-color:#45a049}.debug-button.reset-button[_ngcontent-%COMP%]{background-color:#ff6b6b}.debug-button.reset-button[_ngcontent-%COMP%]:hover{background-color:#ff5252}.debug-button.uv-button[_ngcontent-%COMP%]{background-color:#2196f3}.debug-button.uv-button[_ngcontent-%COMP%]:hover{background-color:#1976d2}.visualization-controls[_ngcontent-%COMP%]{background-color:#f8f8f8;border:solid #c0c0c0 1px;border-radius:4px;padding:8px;margin:8px 0;display:flex;align-items:center;grid-gap:8px;gap:8px}.visualization-label[_ngcontent-%COMP%]{font-weight:700;color:#404040;font-size:9pt;min-width:120px}.visualization-dropdown[_ngcontent-%COMP%]{padding:4px 8px;border:solid #ccc 1px;border-radius:2px;font-size:9pt;background-color:#fff;min-width:100px}.visualization-dropdown[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3}.attribute-list[_ngcontent-%COMP%]{font-family:monospace;font-size:7pt;color:#666;margin-bottom:6px;word-break:break-all}.metadata-section[_ngcontent-%COMP%]{margin:2px 0;font-size:8pt}.metadata-missing[_ngcontent-%COMP%]{margin:2px 0;font-size:8pt;color:#999;font-style:italic}.uv-debug-panel[_ngcontent-%COMP%]{background-color:#f0f8ff;border:solid #2196F3 2px;border-radius:4px;padding:12px;margin:12px 0;font-size:9pt}.uv-debug-header[_ngcontent-%COMP%]{font-weight:700;font-size:11pt;color:#1976d2;margin-bottom:8px;text-align:center;border-bottom:solid #2196F3 1px;padding-bottom:4px}.uv-debug-info[_ngcontent-%COMP%]{background-color:#fff;padding:6px;margin-bottom:8px;border-radius:2px;font-family:monospace;font-size:8pt}.uv-debug-hint[_ngcontent-%COMP%]{font-style:italic;color:#666;font-size:7pt;margin-top:4px;padding-top:4px;border-top:solid #e0e0e0 1px}.texture-selector[_ngcontent-%COMP%]{background-color:#fff;border:solid #e0e0e0 1px;border-radius:2px;padding:8px;margin-bottom:8px}.texture-selector-label[_ngcontent-%COMP%]{font-weight:700;color:#1976d2;margin-bottom:4px;font-size:8pt}.texture-dropdown[_ngcontent-%COMP%]{width:100%;padding:4px;margin-bottom:6px;border:solid #ccc 1px;border-radius:2px;font-size:8pt;font-family:monospace;background-color:#fff}.texture-dropdown[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3}.reset-texture-button[_ngcontent-%COMP%]{background-color:#ff9800;font-size:7pt;padding:4px 8px}.reset-texture-button[_ngcontent-%COMP%]:hover{background-color:#f57c00}.uv-visualizer-container[_ngcontent-%COMP%]{background-color:#fff;border:solid #e0e0e0 1px;border-radius:2px;padding:8px;margin-bottom:8px;text-align:center}.uv-visualizer-label[_ngcontent-%COMP%]{font-weight:700;color:#1976d2;margin-bottom:6px;font-size:8pt}.uv-visualizer-canvas[_ngcontent-%COMP%]{border:solid #ccc 2px;border-radius:2px;cursor:default;display:block;margin:0 auto 6px}.uv-visualizer-legend[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:4px}.uv-legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:7pt;color:#333}.uv-legend-color[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;margin-right:4px;border:solid #fff 1px}.uv1-color[_ngcontent-%COMP%]{background-color:red}.uv2-color[_ngcontent-%COMP%]{background-color:#0f0}.uv3-color[_ngcontent-%COMP%]{background-color:#00f}.uv-visualizer-hint[_ngcontent-%COMP%]{font-style:italic;color:#666;font-size:7pt}.uv-vertex-controls[_ngcontent-%COMP%]{background-color:#fff;border:solid #e0e0e0 1px;border-radius:2px;padding:8px;margin-bottom:6px}.uv-vertex-label[_ngcontent-%COMP%]{font-weight:700;color:#1976d2;margin-bottom:4px;font-size:8pt}.uv-slider-group[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:4px;grid-gap:8px;gap:8px}.uv-slider-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:80px;font-family:monospace;font-size:7pt;color:#333}.uv-slider-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{flex:1;height:4px;background:#ddd;outline:none;border-radius:2px}.uv-slider-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:12px;height:12px;background:#2196F3;cursor:pointer;border-radius:50%}.uv-slider-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{width:12px;height:12px;background:#2196F3;cursor:pointer;border-radius:50%;border:none}.uv-debug-actions[_ngcontent-%COMP%]{text-align:center;margin-top:8px;padding-top:8px;border-top:solid #e0e0e0 1px}.debug-info[_ngcontent-%COMP%]{font-size:8pt;color:#666;font-style:italic}.loading-progress[_ngcontent-%COMP%]{margin-top:16px}.progress-bar[_ngcontent-%COMP%]{width:300px;height:20px;background-color:#ddd;border-radius:10px;margin:8px auto;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background-color:#4caf50;transition:width .3s ease}"]}),n}();function ZZ(n,a){if(1&n){var e=L();s(0,"div",11),ae("click",function(){var p=lr(e).$implicit;return ye().onSelectTab(p.id)}),oe(1),l()}if(2&n){var r=a.$implicit;yu("active",ye().activeTab===r.id),J(1),Ct(" ",r.label," ")}}function QZ(n,a){1&n&&(s(0,"div",14),c(1,"world-details",15),l()),2&n&&(J(1),d("worldType","overground"))}function eQ(n,a){1&n&&(s(0,"div",14),c(1,"world-details",15),l()),2&n&&(J(1),d("worldType","underwater"))}function tQ(n,a){1&n&&(s(0,"div",14),c(1,"world-details",15),l()),2&n&&(J(1),d("worldType","glacier"))}function nQ(n,a){if(1&n&&(s(0,"div",12),Ge(1,QZ,2,1,"div",13),Ge(2,eQ,2,1,"div",13),Ge(3,tQ,2,1,"div",13),l()),2&n){var e=ye();J(1),d("ngIf","overground"===e.activeTab),J(1),d("ngIf","underwater"===e.activeTab),J(1),d("ngIf","glacier"===e.activeTab)}}function rQ(n,a){if(1&n){var e=L();s(0,"div",27),ae("click",function(){var p=lr(e).$implicit;return ye(2).onSelectFunction(p)}),s(1,"div",28),s(2,"span",29),oe(3),l(),s(4,"span",30),oe(5),l(),s(6,"span",31),oe(7),l(),l(),l()}if(2&n){var r=a.$implicit;yu("selected",ye(2).selectedFunction===r),J(3),cn(r.index),J(2),cn(r.name),J(2),Ct("",(null==r.opcodes?null:r.opcodes.length)||0," opcodes")}}function iQ(n,a){if(1&n&&(s(0,"div",32),s(1,"h4"),oe(2,"Select a function to view details"),l(),s(3,"p"),oe(4),l(),l()),2&n){var e=ye(2);J(4),Ct("Choose a ",e.activeFunctionType," function from the list to see its opcodes and metadata.")}}function oQ(n,a){if(1&n&&(s(0,"span",49),oe(1),l()),2&n){var e=ye().$implicit;J(1),cn(e.raw)}}function aQ(n,a){1&n&&c(0,"span",50)}function sQ(n,a){if(1&n&&(s(0,"span",51),oe(1),l()),2&n){var e=ye().$implicit;J(1),cn(e.js)}}function uQ(n,a){if(1&n&&(s(0,"span",52),oe(1),Sh(2,"json"),l()),2&n){var e=ye().$implicit;J(1),cn(bh(2,1,e))}}function lQ(n,a){if(1&n&&(s(0,"div",43),s(1,"div",44),Ge(2,oQ,2,1,"span",45),Ge(3,aQ,1,0,"span",46),Ge(4,sQ,2,1,"span",47),Ge(5,uQ,3,3,"span",48),l(),l()),2&n){var e=a.$implicit;J(2),d("ngIf",e.raw),J(1),d("ngIf",!e.raw),J(1),d("ngIf",e.js),J(1),d("ngIf",!e.js&&!e.raw)}}function cQ(n,a){if(1&n&&(s(0,"div",41),Ge(1,lQ,6,4,"div",42),l()),2&n){var e=ye(3);J(1),d("ngForOf",e.selectedFunction.opcodes)}}function dQ(n,a){1&n&&(s(0,"div",53),oe(1," No opcodes available for this function. "),l())}function fQ(n,a){if(1&n&&(s(0,"div",33),s(1,"div",34),s(2,"span",35),oe(3),l(),s(4,"span",36),oe(5),l(),s(6,"span",37),oe(7),l(),l(),s(8,"div",38),Ge(9,cQ,2,1,"div",39),Ge(10,dQ,2,0,"div",40),l(),l()),2&n){var e=ye(2);J(3),cn(e.selectedFunction.index),J(2),cn(e.selectedFunction.name),J(2),Ct("",(null==e.selectedFunction.opcodes?null:e.selectedFunction.opcodes.length)||0," opcodes"),J(2),d("ngIf",e.selectedFunction.hasOpcodes),J(1),d("ngIf",!e.selectedFunction.hasOpcodes)}}function pQ(n,a){if(1&n){var e=L();s(0,"div",12),s(1,"div",16),s(2,"div",17),s(3,"div",18),ae("click",function(){return lr(e),ye().onSelectFunctionType("system")}),oe(4),l(),s(5,"div",18),ae("click",function(){return lr(e),ye().onSelectFunctionType("model")}),oe(6),l(),s(7,"div",18),ae("click",function(){return lr(e),ye().onSelectFunctionType("mesh")}),oe(8),l(),l(),s(9,"div",19),s(10,"div",20),s(11,"h4",21),oe(12),Sh(13,"titlecase"),l(),s(14,"div",22),Ge(15,rQ,8,5,"div",23),l(),l(),s(16,"div",24),Ge(17,iQ,5,1,"div",25),Ge(18,fQ,11,5,"div",26),l(),l(),l(),l()}if(2&n){var r=ye();J(3),yu("active","system"===r.activeFunctionType),J(1),Ct(" System (",r.getFunctionTypeCount("system"),") "),J(1),yu("active","model"===r.activeFunctionType),J(1),Ct(" Model (",r.getFunctionTypeCount("model"),") "),J(1),yu("active","mesh"===r.activeFunctionType),J(1),Ct(" Mesh (",r.getFunctionTypeCount("mesh"),") "),J(4),Ct("",bh(13,13,r.activeFunctionType)," Functions"),J(3),d("ngForOf",r.getFunctionsByType(r.activeFunctionType)),J(2),d("ngIf",!r.selectedFunction),J(1),d("ngIf",r.selectedFunction)}}var hQ=function(){var n=function(){function a(e){N(this,a),this.http=e,this.activeTab="overground",this.viewMode="map",this.activeFunctionType="system",this.selectedFunction=null,this.tabs=[{id:"overground",label:"Overground"},{id:"underwater",label:"Underwater"},{id:"glacier",label:"Glacier"}],this.scriptData={},this.loadingScripts=!1,this.scriptError="",this.expandedSections={},this.cachedSections={}}return j(a,[{key:"ngOnInit",value:function(){this.loadAllScripts()}},{key:"onSelectTab",value:function(r){this.activeTab=r,this.cachedSections={}}},{key:"onToggleView",value:function(r){this.viewMode=r,"scripts"===r&&(this.selectedFunction=null)}},{key:"onSelectFunctionType",value:function(r){this.activeFunctionType=r,this.selectedFunction=null}},{key:"onSelectFunction",value:function(r){this.selectedFunction=r}},{key:"getFunctionsByType",value:function(r){var o=this.getScriptDataForActiveTab();return o&&o.functions?this.parseFunctions(o.functions).filter(function(f){var p=f.name.toLowerCase();switch(r){case"system":return p.includes("system")||p.includes("init")||p.includes("main")||f.index<10;case"model":return p.includes("model")||p.includes("entity")||p.includes("object")||f.index>=10&&f.index<50;case"mesh":return p.includes("mesh")||p.includes("render")||p.includes("draw")||f.index>=50;default:return!1}}):[]}},{key:"getFunctionTypeCount",value:function(r){return this.getFunctionsByType(r).length}},{key:"loadAllScripts",value:function(){var r=this;this.loadingScripts=!0,this.scriptError="";var u=[{key:"overground",file:"wm0.json"},{key:"underwater",file:"wm2.json"},{key:"glacier",file:"wm3.json"}].map(function(f){return r.http.get("".concat(vn.KUJATA_DATA_BASE_URL,"/data/world/scripts/").concat(f.file)).toPromise().then(function(p){return{key:f.key,data:p,error:null}}).catch(function(p){return{key:f.key,data:null,error:p}})});Promise.all(u).then(function(f){console.log("Script loading results:",f),f.forEach(function(p){p.error?(console.error("Error loading ".concat(p.key," scripts:"),p.error),r.scriptError+="Failed to load ".concat(p.key," scripts. ")):(console.log("Successfully loaded ".concat(p.key," scripts:"),p.data),r.scriptData[p.key]=p.data)}),console.log("Final scriptData object:",r.scriptData),r.loadingScripts=!1})}},{key:"getScriptDataForActiveTab",value:function(){return this.scriptData[this.activeTab]||null}},{key:"getScriptKeys",value:function(r){return r?Object.keys(r):[]}},{key:"getScriptSections",value:function(r){if(!r)return[];var o=this.activeTab;if(this.cachedSections[o])return this.cachedSections[o];var u=Object.keys(r).map(function(f){return{name:f,data:r[f],expanded:!1}});return this.cachedSections[o]=u,u}},{key:"parseScriptCommands",value:function(r){var o=this;return r&&Array.isArray(r)?r.map(function(u,f){return{index:f,opcode:u.opcode||"Unknown",operation:u.operation||u.op||"Unknown Operation",parameters:o.formatParameters(u),rawCommand:u}}):[]}},{key:"parseFunctions",value:function(r){return r&&Array.isArray(r)?r.map(function(o,u){return{index:u,name:o.description||o.name||"Function ".concat(u),offset:o.offset||0,length:o.length||0,numOpcodes:o.numOpcodes||0,opcodes:o.opcodes||[],hasOpcodes:o.opcodes&&o.opcodes.length>0}}):[]}},{key:"formatOpcode",value:function(r,o){return{index:o,js:r.js||"No JS representation",raw:r.raw||"No raw data",hasJs:!!r.js,hasRaw:!!r.raw}}},{key:"formatParameters",value:function(r){var o=this,u=["opcode","operation","op"];return Object.keys(r).filter(function(p){return!u.includes(p)}).map(function(p){return"".concat(p,": ").concat(o.formatValue(r[p]))}).join(", ")||"No parameters"}},{key:"formatValue",value:function(r){return"object"==typeof r&&null!==r?JSON.stringify(r):String(r)}},{key:"getScriptTypeName",value:function(r){return{init:"Initialization Script",main:"Main Script",entity:"Entity Scripts",entities:"Entity Scripts",script:"General Scripts",scripts:"General Scripts"}[r.toLowerCase()]||r}},{key:"isArray",value:function(r){return Array.isArray(r)}},{key:"isObject",value:function(r){return!Array.isArray(r)&&"object"==typeof r&&null!==r}},{key:"isPrimitive",value:function(r){return!Array.isArray(r)&&"object"!=typeof r}},{key:"getObjectKeys",value:function(r){return Object.keys(r||{})}},{key:"toggleSection",value:function(r){var o="".concat(this.activeTab,"_").concat(r);console.log("toggleSection called - Section:",r,"Key:",o,"Before:",this.expandedSections[o]),this.expandedSections[o]=!this.expandedSections[o],console.log("After toggle:",this.expandedSections[o])}},{key:"isSectionExpanded",value:function(r){var o="".concat(this.activeTab,"_").concat(r);return!!this.expandedSections[o]}}]),a}();return n.\u0275fac=function(e){return new(e||n)(st(sa))},n.\u0275cmp=Er({type:n,selectors:[["world-map"]],decls:17,vars:7,consts:[[2,"background-color","#c0c0c0","padding","4px"],[2,"background-color","white","padding","4px","margin-bottom","4px"],[2,"font-size","20pt","color","#404040"],[2,"font-size","16pt","color","#808080"],[1,"tab-container"],[1,"world-tabs-group"],["class","tab-header",3,"active","click",4,"ngFor","ngForOf"],[1,"view-toggle-container"],[1,"view-toggle-button",3,"click"],[1,"tab-content"],["class","view-panel",4,"ngIf"],[1,"tab-header",3,"click"],[1,"view-panel"],["class","tab-panel",4,"ngIf"],[1,"tab-panel"],[3,"worldType"],[1,"scripts-view"],[1,"function-type-tabs"],[1,"function-type-tab",3,"click"],[1,"scripts-main-content"],[1,"function-list-panel"],[1,"panel-header"],[1,"function-list"],["class","function-list-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"function-detail-panel"],["class","no-function-selected",4,"ngIf"],["class","function-details",4,"ngIf"],[1,"function-list-item",3,"click"],[1,"function-list-header"],[1,"function-list-index"],[1,"function-list-name"],[1,"function-list-meta"],[1,"no-function-selected"],[1,"function-details"],[1,"function-detail-header"],[1,"function-detail-index"],[1,"function-detail-name"],[1,"detail-badge"],[1,"function-detail-opcodes"],["class","opcode-list",4,"ngIf"],["class","no-opcodes",4,"ngIf"],[1,"opcode-list"],["class","opcode-detail-line",4,"ngFor","ngForOf"],[1,"opcode-detail-line"],[1,"opcode-detail-content"],["class","opcode-raw",4,"ngIf"],["class","opcode-raw-placeholder",4,"ngIf"],["class","opcode-js",4,"ngIf"],["class","opcode-fallback",4,"ngIf"],[1,"opcode-raw"],[1,"opcode-raw-placeholder"],[1,"opcode-js"],[1,"opcode-fallback"],[1,"no-opcodes"]],template:function(e,r){1&e&&(s(0,"div",0),s(1,"div",1),s(2,"div",2),oe(3,"World Map"),l(),s(4,"div",3),oe(5,"Final Fantasy VII World Map Viewer"),l(),l(),s(6,"div",4),s(7,"div",5),Ge(8,ZZ,2,3,"div",6),l(),s(9,"div",7),s(10,"div",8),ae("click",function(){return r.onToggleView("map")}),oe(11," Map "),l(),s(12,"div",8),ae("click",function(){return r.onToggleView("scripts")}),oe(13," Scripts "),l(),l(),l(),s(14,"div",9),Ge(15,nQ,4,3,"div",10),Ge(16,pQ,19,15,"div",10),l(),l()),2&e&&(J(8),d("ngForOf",r.tabs),J(2),yu("active","map"===r.viewMode),J(2),yu("active","scripts"===r.viewMode),J(3),d("ngIf","map"===r.viewMode),J(1),d("ngIf","scripts"===r.viewMode))},directives:[Za,aa,JZ],pipes:[BT,L1],styles:[".tab-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;background-color:#e0e0e0;margin-bottom:4px}.world-tabs-group[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.tab-header[_ngcontent-%COMP%]{background-color:#f0f0f0;border:solid #c0c0c0 1px;border-bottom:none;padding:8px 16px;margin-right:2px;cursor:pointer;font-size:12pt;color:#404040;font-weight:700;transition:background-color .2s}.tab-header[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.tab-header.active[_ngcontent-%COMP%]{background-color:#fff;border-bottom:solid white 1px;margin-bottom:-1px;position:relative;z-index:1}.view-toggle-container[_ngcontent-%COMP%]{display:flex;grid-gap:2px;gap:2px;align-items:flex-end}.view-toggle-button[_ngcontent-%COMP%]{background-color:#d0d0d0;border:solid #b0b0b0 1px;border-bottom:none;padding:6px 12px;cursor:pointer;font-size:11pt;color:#505050;font-weight:700;transition:background-color .2s;border-radius:4px 4px 0 0}.view-toggle-button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.view-toggle-button.active[_ngcontent-%COMP%]{background-color:#fff;color:#404040;border-bottom:solid white 1px;margin-bottom:-1px;position:relative;z-index:1}.tab-content[_ngcontent-%COMP%]{background-color:#fff;border:solid #c0c0c0 1px;min-height:500px}.tab-panel[_ngcontent-%COMP%], .view-panel[_ngcontent-%COMP%]{padding:0}.scripts-view[_ngcontent-%COMP%]{padding:0;height:100%}.function-type-tabs[_ngcontent-%COMP%]{display:flex;background-color:#f8f8f8;border-bottom:1px solid #ddd;padding:8px 16px 0}.function-type-tab[_ngcontent-%COMP%]{background-color:#e9ecef;border:1px solid #ddd;border-bottom:none;padding:8px 16px;margin-right:4px;cursor:pointer;font-size:12px;font-weight:700;color:#666;border-radius:4px 4px 0 0;transition:background-color .2s}.function-type-tab[_ngcontent-%COMP%]:hover{background-color:#dee2e6}.function-type-tab.active[_ngcontent-%COMP%]{background-color:#fff;color:#333;border-bottom:1px solid white;margin-bottom:-1px;position:relative;z-index:1}.scripts-main-content[_ngcontent-%COMP%]{display:flex;height:calc(100vh - 200px);background-color:#fff}.function-list-panel[_ngcontent-%COMP%]{width:300px;border-right:1px solid #ddd;background-color:#fafafa;overflow-y:auto}.panel-header[_ngcontent-%COMP%]{background-color:#f0f0f0;margin:0;padding:12px 16px;font-size:14px;font-weight:700;color:#333;border-bottom:1px solid #ddd;position:sticky;top:0;z-index:1}.function-list[_ngcontent-%COMP%]{padding:8px}.function-list-item[_ngcontent-%COMP%]{padding:8px 12px;margin-bottom:4px;background-color:#fff;border:1px solid #e9ecef;border-radius:4px;cursor:pointer;transition:all .2s}.function-list-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;border-color:#dee2e6}.function-list-item.selected[_ngcontent-%COMP%]{background-color:#e3f2fd;border-color:#2196f3;box-shadow:0 2px 4px #2196f31a}.function-list-header[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:8px;gap:8px;flex-wrap:wrap}.function-list-index[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;padding:1px 4px;border-radius:2px;font-size:9px;font-weight:700;min-width:20px;text-align:center;flex-shrink:0}.function-list-name[_ngcontent-%COMP%]{font-weight:700;font-size:11px;color:#333;flex-shrink:0}.function-list-meta[_ngcontent-%COMP%]{font-size:10px;color:#666;font-family:Courier New,monospace;margin-left:auto}.function-detail-panel[_ngcontent-%COMP%]{flex:1;padding:16px;overflow-y:auto;background-color:#fff}.no-function-selected[_ngcontent-%COMP%]{text-align:center;color:#666;margin-top:50px}.no-function-selected[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#999;margin-bottom:8px}.function-details[_ngcontent-%COMP%]{height:100%}.function-detail-header[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:12px;gap:12px;margin-bottom:16px;padding-bottom:8px;border-bottom:1px solid #eee}.function-detail-index[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;padding:1px 4px;border-radius:2px;font-size:9px;font-weight:700;min-width:20px;text-align:center;flex-shrink:0}.function-detail-name[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333;flex-shrink:0}.detail-badge[_ngcontent-%COMP%]{background-color:#e9ecef;padding:4px 8px;border-radius:3px;font-size:11px;color:#495057;font-weight:700}.function-detail-opcodes[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:none}.opcode-list[_ngcontent-%COMP%]{font-family:Courier New,monospace}.opcode-detail-line[_ngcontent-%COMP%]{padding:4px 0;border-bottom:1px solid #f8f9fa;font-family:Courier New,monospace;font-size:12px}.opcode-detail-line[_ngcontent-%COMP%]:last-child{border-bottom:none}.opcode-detail-content[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:12px;gap:12px;line-height:1.4}.opcode-raw[_ngcontent-%COMP%]{color:#dc3545;font-weight:700;font-family:Courier New,monospace;width:120px;flex-shrink:0;font-size:11px}.opcode-raw-placeholder[_ngcontent-%COMP%]{width:120px;flex-shrink:0}.opcode-js[_ngcontent-%COMP%]{background-color:#000!important;color:#fff!important;padding:3px 8px;border-radius:4px;font-family:Courier New,monospace;font-size:11px;font-weight:400;display:inline-block}.opcode-fallback[_ngcontent-%COMP%]{color:#6c757d;font-style:italic;font-family:Courier New,monospace;font-size:11px}.no-opcodes[_ngcontent-%COMP%]{text-align:center;color:#999;font-style:italic;padding:20px}.scripts-container[_ngcontent-%COMP%]{overflow-y:auto;border:1px solid #ddd;border-radius:4px}.section-header[_ngcontent-%COMP%]{background-color:#f8f8f8;margin:0 0 8px;padding:12px 16px;font-size:14px;font-weight:700;color:#333;border-bottom:1px solid #ddd}.metadata-section[_ngcontent-%COMP%], .file-info-section[_ngcontent-%COMP%], .functions-section[_ngcontent-%COMP%]{border-bottom:1px solid #eee;margin-bottom:0}.metadata-content[_ngcontent-%COMP%], .file-info-content[_ngcontent-%COMP%]{padding:12px 16px}.metadata-item[_ngcontent-%COMP%]{margin-bottom:8px;padding:4px 0}.metadata-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333;margin-right:8px}.nested-metadata[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:4px 0 0;font-family:Courier New,monospace;font-size:11px;background-color:#f9f9f9;padding:8px;border-radius:2px}.file-info-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:4px}.functions-content[_ngcontent-%COMP%]{padding:8px 16px}.function-item[_ngcontent-%COMP%]{margin-bottom:16px;padding:8px;background-color:#fafafa;border-radius:4px;border-left:3px solid #5cb85c}.function-header[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:8px;gap:8px;margin-bottom:8px;font-family:Courier New,monospace;font-size:12px}.function-index[_ngcontent-%COMP%]{background-color:#4a90e2;color:#fff;padding:2px 6px;border-radius:3px;font-size:10px;min-width:30px;text-align:center;font-weight:700}.function-name[_ngcontent-%COMP%]{background-color:#5cb85c;color:#fff;padding:2px 8px;border-radius:3px;font-weight:700;font-size:11px}.function-info[_ngcontent-%COMP%]{color:#666;font-size:10px;background-color:#e9ecef;padding:2px 6px;border-radius:3px}.function-opcodes[_ngcontent-%COMP%]{margin-top:8px}.opcode-line[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:8px;gap:8px;padding:4px 8px;margin-bottom:2px;background-color:#fff;border-radius:2px;font-family:Courier New,monospace;font-size:11px}.opcode-line[_ngcontent-%COMP%]:last-child{margin-bottom:0}.opcode-index[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;padding:1px 4px;border-radius:2px;font-size:9px;font-weight:700;min-width:20px;text-align:center}.opcode-js[_ngcontent-%COMP%]{color:#28a745;font-weight:700}.opcode-raw[_ngcontent-%COMP%]{color:#dc3545;font-weight:700}.opcode-fallback[_ngcontent-%COMP%]{color:#6c757d;font-style:italic}.opcode-js[_ngcontent-%COMP%]   code[_ngcontent-%COMP%], .opcode-raw[_ngcontent-%COMP%]   code[_ngcontent-%COMP%], .opcode-fallback[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:1px 3px;border-radius:2px;font-size:10px;border:1px solid #e9ecef}"]}),n}(),vQ=[{path:"field-scenes",component:mL},{path:"scene-details/:name",component:yJ},{path:"field-models",component:BJ},{path:"field-model-details/:hrcId",component:rZ},{path:"battle-models",component:XJ},{path:"battle-model-details/:hrcId",component:cZ},{path:"world-models",component:hZ},{path:"world-model-details/:hrcId",component:_Z},{path:"field-op-codes",component:bJ},{path:"field-op-code-details/:hex",component:DJ},{path:"sounds",component:bZ},{path:"world-map",component:hQ},{path:"**",component:mL}],gQ=function(){var n=function a(){N(this,a)};return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ci({type:n,bootstrap:[Nz]}),n.\u0275inj=Vo({providers:[],imports:[[VV,Ez.forRoot(vQ),cW,Lh.withComponents([])]]}),n}();BV().bootstrapModule(gQ).catch(function(n){return console.error(n)})},564:function(Dl,Y){"use strict";function ze(d){return null==d||""===d?null:d}function Fe(d,i){return void 0===i&&(i=!1),null!=d&&(""!==d||i)}function we(d){return!Fe(d)}function ni(d){return null==d||0===d.length}function j(d){return null!=d&&"function"==typeof d.toString?d.toString():null}function N(d){if(void 0!==d){if(null===d||""===d)return null;if("number"==typeof d)return isNaN(d)?void 0:d;var i=parseInt(d,10);return isNaN(i)?void 0:i}}function so(d){if(void 0!==d)return null!==d&&""!==d&&("boolean"==typeof d?d:/true/i.test(d))}function Li(d,i,t){if(null==d)return null;if(!Array.isArray(d))return Li(ge(d),i,t);for(var l=d,c=null,h=0;h<l.length;h++){var m=l[h];if("string"==typeof i){if(m[i]===t){c=m;break}}else if(i(m)){c=m;break}}return c}function ge(d){if(d instanceof Set||d instanceof Map){var i=[];return d.forEach(function(t){return i.push(t)}),i}return Object.keys(d).map(function(t){return d[t]})}var Zs=Object.freeze({__proto__:null,makeNull:ze,exists:Fe,missing:we,missingOrEmpty:ni,toStringOrNull:j,attrToNumber:N,attrToBoolean:so,attrToString:function(d){if(null!=d&&""!==d)return d},referenceCompare:function(d,i){return null==d&&null==i||!(null==d&&null!=i||null!=d&&null==i)&&d===i},jsonEquals:function(d,i){return(d?JSON.stringify(d):null)===(i?JSON.stringify(i):null)},defaultComparator:function(d,i,t){void 0===t&&(t=!1);var s=null==d,l=null==i;if(d&&d.toNumber&&(d=d.toNumber()),i&&i.toNumber&&(i=i.toNumber()),s&&l)return 0;if(s)return-1;if(l)return 1;function c(h,m){return h>m?1:h<m?-1:0}if("string"!=typeof d||!t)return c(d,i);try{return d.localeCompare(i)}catch(h){return c(d,i)}},find:Li,values:ge}),vi=function(){function d(){this.existingKeys={}}return d.prototype.addExistingKeys=function(i){for(var t=0;t<i.length;t++)this.existingKeys[i[t]]=!0},d.prototype.getUniqueKey=function(i,t){i=j(i);for(var s=0;;){var l=void 0;if(i?(l=i,0!==s&&(l+="_"+s)):t?(l=t,0!==s&&(l+="_"+s)):l=""+s,!this.existingKeys[l])return this.existingKeys[l]=!0,l;s++}},d}();function Pt(){for(var d=[],i=0;i<arguments.length;i++)d[i]=arguments[i];for(var t=0;t<d.length;t++){var s=d[t];if(Fe(s))return s}return null}function jn(d){if(d&&d.length)return d[d.length-1]}function pr(d,i,t){return null==d&&null==i||null!=d&&null!=i&&d.length===i.length&&nn(d,function(s,l){return t?t(s,i[l]):i[l]===s})}function $c(d){return d.sort(function(i,t){return i-t})}function ri(d,i){var t=d.indexOf(i);t>=0&&d.splice(t,1)}function On(d,i){Ut(i,function(t){return ri(d,t)})}function gi(d,i,t){d.splice(t,0,i)}function Rr(d,i,t){On(d,i),Ut(i.slice().reverse(),function(s){return gi(d,s,t)})}function Tn(d,i){return d.indexOf(i)>-1}function ht(d,i){null==i||null==d||Ut(i,function(t){return d.push(t)})}function rt(d,i){for(var t=0;t<d.length;t++)if(i(d[t],t,d))return t;return-1}function nn(d,i){if(null==d)return!0;for(var t=0;t<d.length;t++)if(!i(d[t],t))return!1;return!0}function $t(d,i){if(null==d)return!1;for(var t=0;t<d.length;t++)if(i(d[t],t))return!0;return!1}function Ut(d,i){if(null!=d)for(var t=0;t<d.length;t++)i(d[t],t)}function mi(d,i){if(null==d)return null;for(var t=[],s=0;s<d.length;s++)t.push(i(d[s],s));return t}function Br(d,i){if(null==d)return null;for(var t=[],s=0;s<d.length;s++)i(d[s],s)&&t.push(d[s]);return t}var ps=Object.freeze({__proto__:null,firstExistingValue:Pt,anyExists:function(d){return d&&null!=Pt(d)},existsAndNotEmpty:function(d){return null!=d&&d.length>0},last:jn,areEqual:pr,compareArrays:function(d,i){return pr(d,i)},shallowCompare:function(d,i){return pr(d,i)},sortNumerically:$c,removeRepeatsFromArray:function(d,i){if(d)for(var t=d.length-2;t>=0;t--)d[t]===i&&d[t+1]===i&&d.splice(t+1,1)},removeFromArray:ri,removeAllFromArray:On,insertIntoArray:gi,insertArrayIntoArray:function(d,i,t){if(null!=d&&null!=i)for(var s=i.length-1;s>=0;s--)gi(d,i[s],t)},moveInArray:Rr,includes:Tn,flatten:function(d){return[].concat.apply([],d)},pushAll:ht,toStrings:function(d){return mi(d,j)},findIndex:rt,fill:function(d,i,t,s){void 0===i&&(i=null),void 0===t&&(t=0),void 0===s&&(s=d.length);for(var l=t;l<s;l++)d[l]=i;return d},every:nn,some:$t,forEach:Ut,forEachReverse:function(d,i){if(null!=d)for(var t=d.length-1;t>=0;t--)i(d[t],t)},map:mi,filter:Br,reduce:function(d,i,t){if(null==d||null==t)return null;for(var s=t,l=0;l<d.length;l++)s=i(s,d[l],l);return s},forEachSnapshotFirst:function(d,i){d&&d.slice(0).forEach(i)}});function Nn(d,i){null!=d&&(Array.isArray(d)?Ut(d,function(t,s){return i(""+s,t)}):Ut(Object.keys(d),function(t){return i(t,d[t])}))}function hs(d){for(var i={},t=Object.keys(d),s=0;s<t.length;s++){var l=t[s];i[l]=d[l]}return i}function If(d,i){if(d){var t=d,s={};return Object.keys(t).forEach(function(l){if(!(i&&i.indexOf(l)>=0)){var c=t[l],h=Ol(c)&&c.constructor===Object;s[l]=h?If(c):c}}),s}}function Lf(d,i){return d[i]}function Ff(d,i,t){d[i]=t}function Mv(d,i,t,s){var l=Lf(d,t);void 0!==l&&Ff(i,t,s?s(l):l)}function kf(d){var i={};return d.filter(function(t){return null!=t}).forEach(function(t){Ut(Object.keys(t),function(s){return i[s]=null})}),Object.keys(i)}function Ma(d){if(!d)return[];var i=Object;if("function"==typeof i.values)return i.values(d);var t=[];for(var s in d)d.hasOwnProperty(s)&&d.propertyIsEnumerable(s)&&t.push(d[s]);return t}function uo(d,i,t,s){void 0===t&&(t=!0),void 0===s&&(s=!1),Fe(i)&&Nn(i,function(l,c){var h=d[l];h!==c&&(s&&null==h&&null!=c&&"object"==typeof c&&c.constructor===Object&&(d[l]=h={}),Ol(c)&&Ol(h)&&!Array.isArray(h)?uo(h,c,t,s):(t||void 0!==c)&&(d[l]=c))})}function ii(d){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return Ut(i,function(s){return Nn(s,function(l,c){return d[l]=c})}),d}function Nf(d,i,t){if(i&&d){if(!t)return d[i];for(var s=i.split("."),l=d,c=0;c<s.length;c++){if(null==l)return;l=l[s[c]]}return l}}function p_(d,i){Object.keys(d).forEach(function(l){"object"==typeof d[l]&&(d[l]=void 0)});var t=Object.getPrototypeOf(d),s={};Object.keys(t).forEach(function(l){"function"==typeof t[l]&&(s[l]={value:function(){console.warn("AG Grid: "+i+" function "+l+"() cannot be called as the grid has been destroyed.\n                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't\n                     be keeping the API reference, your application has a memory leak! Remove the API reference\n                     when the grid is destroyed.")},writable:!0})}),Object.defineProperties(d,s)}function Ol(d){return"object"==typeof d&&null!==d}var vs=Object.freeze({__proto__:null,iterateObject:Nn,cloneObject:hs,deepCloneObject:function(d){return JSON.parse(JSON.stringify(d))},deepCloneDefinition:If,getProperty:Lf,setProperty:Ff,copyPropertiesIfPresent:function(d,i){for(var t=[],s=2;s<arguments.length;s++)t[s-2]=arguments[s];Ut(t,function(l){return Mv(d,i,l)})},copyPropertyIfPresent:Mv,getAllKeysInObjects:kf,getAllValuesInObject:Ma,mergeDeep:uo,assign:ii,missingOrEmptyObject:function(d){return we(d)||0===Object.keys(d).length},get:function(d,i,t){if(null==d)return t;for(var s=i.split("."),l=d;s.length>1;)if(null==(l=l[s.shift()]))return t;var c=l[s[0]];return null!=c?c:t},set:function(d,i,t){if(null!=d){for(var s=i.split("."),l=d;s.length>1;)if(null==(l=l[s.shift()]))return;l[s[0]]=t}},deepFreeze:function Ov(d){return Object.freeze(d),Ut(ge(d),function(i){(Ol(i)||"function"==typeof i)&&Ov(i)}),d},getValueUsingField:Nf,removeAllReferences:p_,isNonNullObject:Ol}),h_=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,v_=/([^\s,]+)/g,oi={};function mn(d,i){oi[i]||(d(),oi[i]=!0)}function $n(d){if(d.name)return d.name;var i=/function\s+([^\(]+)/.exec(d.toString());return i&&2===i.length?i[1].trim():null}function eu(d){return!!(d&&d.constructor&&d.call&&d.apply)}function Gf(d){kb(d,400)}var g_=[],Bf=!1;function m_(d){g_.push(d),!Bf&&(Bf=!0,window.setTimeout(function(){var i=g_.slice();g_.length=0,Bf=!1,i.forEach(function(t){return t()})},0))}function kb(d,i){void 0===i&&(i=0),d.length>0&&window.setTimeout(function(){return d.forEach(function(t){return t()})},i)}function ku(d,i,t){var s;return void 0===t&&(t=!1),function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var h=this,m=t&&!s;window.clearTimeout(s),s=window.setTimeout(function(){s=null,t||d.apply(h,l)},i),m&&d.apply(h,l)}}function Nb(d,i,t,s){void 0===t&&(t=100);var l=(new Date).getTime(),c=null,h=!1,m=function(){var R=(new Date).getTime()-l>t;(d()||R)&&(i(),h=!0,null!=c&&(window.clearInterval(c),c=null),R&&s&&console.warn(s))};m(),h||(c=window.setInterval(m,10))}function Bb(d){d&&d()}var y_=Object.freeze({__proto__:null,doOnce:mn,getFunctionName:$n,getFunctionParameters:function(d){var i=d.toString().replace(h_,"");return i.slice(i.indexOf("(")+1,i.indexOf(")")).match(v_)||[]},isFunction:eu,executeInAWhile:Gf,executeNextVMTurn:m_,executeAfter:kb,debounce:ku,waitUntil:Nb,compose:function(){for(var d=[],i=0;i<arguments.length;i++)d[i]=arguments[i];return function(t){return d.reduce(function(s,l){return l(s)},t)}},callIfPresent:Bb}),Hb=function(){function d(i,t){if(this.beanWrappers={},this.destroyed=!1,i&&i.beanClasses){this.contextParams=i,this.logger=t,this.logger.log(">> creating ag-Application Context"),this.createBeans();var s=this.getBeanInstances();this.wireBeans(s),this.logger.log(">> ag-Application Context ready - component is alive")}}return d.prototype.getBeanInstances=function(){return ge(this.beanWrappers).map(function(i){return i.beanInstance})},d.prototype.createBean=function(i,t){if(!i)throw Error("Can't wire to bean since it is null");return this.wireBeans([i],t),i},d.prototype.wireBeans=function(i,t){this.autoWireBeans(i),this.methodWireBeans(i),this.callLifeCycleMethods(i,"preConstructMethods"),Fe(t)&&i.forEach(t),this.callLifeCycleMethods(i,"postConstructMethods")},d.prototype.createBeans=function(){var i=this;this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),Nn(this.beanWrappers,function(s,l){var c;l.bean.__agBeanMetaData&&l.bean.__agBeanMetaData.autowireMethods&&l.bean.__agBeanMetaData.autowireMethods.agConstructor&&(c=l.bean.__agBeanMetaData.autowireMethods.agConstructor);var h=i.getBeansForParameters(c,l.bean.name),m=function(d,i){var t=[null].concat(i);return new(d.bind.apply(d,t))}(l.bean,h);l.beanInstance=m});var t=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: "+t)},d.prototype.createBeanWrapper=function(i){var t=i.__agBeanMetaData;if(!t){var s;return s=i.prototype.constructor?$n(i.prototype.constructor):""+i,void console.error("Context item "+s+" is not a bean")}this.beanWrappers[t.beanName]={bean:i,beanInstance:null,beanName:t.beanName}},d.prototype.autoWireBeans=function(i){var t=this;i.forEach(function(s){t.forEachMetaDataInHierarchy(s,function(l,c){var h=l.agClassAttributes;!h||h.forEach(function(m){var S=t.lookupBeanInstance(c,m.beanName,m.optional);s[m.attributeName]=S})})})},d.prototype.methodWireBeans=function(i){var t=this;i.forEach(function(s){t.forEachMetaDataInHierarchy(s,function(l,c){Nn(l.autowireMethods,function(h,m){if("agConstructor"!==h){var S=t.getBeansForParameters(m,c);s[h].apply(s,S)}})})})},d.prototype.forEachMetaDataInHierarchy=function(i,t){for(var s=Object.getPrototypeOf(i);null!=s;){var l=s.constructor;l.hasOwnProperty("__agBeanMetaData")&&t(l.__agBeanMetaData,this.getBeanName(l)),s=Object.getPrototypeOf(s)}},d.prototype.getBeanName=function(i){if(i.__agBeanMetaData&&i.__agBeanMetaData.beanName)return i.__agBeanMetaData.beanName;var t=i.toString();return t.substring(9,t.indexOf("("))},d.prototype.getBeansForParameters=function(i,t){var s=this,l=[];return i&&Nn(i,function(c,h){var m=s.lookupBeanInstance(t,h);l[Number(c)]=m}),l},d.prototype.lookupBeanInstance=function(i,t,s){if(void 0===s&&(s=!1),"context"===t)return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(t))return this.contextParams.providedBeanInstances[t];var l=this.beanWrappers[t];return l?l.beanInstance:(s||console.error("AG Grid: unable to find bean reference "+t+" while initialising "+i),null)},d.prototype.callLifeCycleMethods=function(i,t){var s=this;i.forEach(function(l){return s.callLifeCycleMethodsOnBean(l,t)})},d.prototype.callLifeCycleMethodsOnBean=function(i,t,s){var l={};this.forEachMetaDataInHierarchy(i,function(h){var m=h[t];m&&m.forEach(function(S){S!=s&&(l[S]=!0)})}),Object.keys(l).forEach(function(h){return i[h]()})},d.prototype.getBean=function(i){return this.lookupBeanInstance("getBean",i,!0)},d.prototype.destroy=function(){if(!this.destroyed){this.logger.log(">> Shutting down ag-Application Context");var i=this.getBeanInstances();this.destroyBeans(i),this.contextParams.providedBeanInstances=null,this.destroyed=!0,this.logger.log(">> ag-Application Context shut down - component is dead")}},d.prototype.destroyBean=function(i){!i||this.destroyBeans([i])},d.prototype.destroyBeans=function(i){var t=this;return i?(i.forEach(function(s){t.callLifeCycleMethodsOnBean(s,"preDestroyMethods","destroy"),"function"==typeof s.destroy&&s.destroy()}),[]):[]},d}();function Pv(d,i,t){var s=Pl(d.constructor);s.preConstructMethods||(s.preConstructMethods=[]),s.preConstructMethods.push(i)}function et(d,i,t){var s=Pl(d.constructor);s.postConstructMethods||(s.postConstructMethods=[]),s.postConstructMethods.push(i)}function Fi(d,i,t){var s=Pl(d.constructor);s.preDestroyMethods||(s.preDestroyMethods=[]),s.preDestroyMethods.push(i)}function vt(d){return function(i){Pl(i).beanName=d}}function H(d){return function(i,t,s){Vb(i,d,!1,0,t,null)}}function Gn(d){return function(i,t,s){Vb(i,d,!0,0,t,null)}}function Vb(d,i,t,s,l,c){if(null!==i)if("number"!=typeof c){var h=Pl(d.constructor);h.agClassAttributes||(h.agClassAttributes=[]),h.agClassAttributes.push({attributeName:l,beanName:i,optional:t})}else console.error("AG Grid: Autowired should be on an attribute");else console.error("AG Grid: Autowired name should not be null")}function ki(d){return function(i,t,s){var c,l="function"==typeof i?i:i.constructor;if("number"==typeof s){var h=void 0;t?(c=Pl(l),h=t):(c=Pl(l),h="agConstructor"),c.autowireMethods||(c.autowireMethods={}),c.autowireMethods[h]||(c.autowireMethods[h]={}),c.autowireMethods[h][s]=d}}}function Pl(d){return d.hasOwnProperty("__agBeanMetaData")||(d.__agBeanMetaData={}),d.__agBeanMetaData}var d,C_=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Iv=function(d,i){return function(t,s){i(t,s,d)}},tu=function(){function d(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}return d.prototype.setBeans=function(i,t,s,l){if(void 0===l&&(l=null),this.frameworkOverrides=s,l){var c=t.useAsyncEvents();this.addGlobalListener(l,c)}},d.prototype.getListeners=function(i,t,s){var l=t?this.allAsyncListeners:this.allSyncListeners,c=l.get(i);return!c&&s&&l.set(i,c=new Set),c},d.prototype.noRegisteredListenersExist=function(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size},d.prototype.addEventListener=function(i,t,s){void 0===s&&(s=!1),this.getListeners(i,s,!0).add(t)},d.prototype.removeEventListener=function(i,t,s){void 0===s&&(s=!1);var l=this.getListeners(i,s,!1);l&&(l.delete(t),0===l.size)&&(s?this.allAsyncListeners:this.allSyncListeners).delete(i)},d.prototype.addGlobalListener=function(i,t){void 0===t&&(t=!1),(t?this.globalAsyncListeners:this.globalSyncListeners).add(i)},d.prototype.removeGlobalListener=function(i,t){void 0===t&&(t=!1),(t?this.globalAsyncListeners:this.globalSyncListeners).delete(i)},d.prototype.dispatchEvent=function(i){this.dispatchToListeners(i,!0),this.dispatchToListeners(i,!1),this.firedEvents[i.type]=!0},d.prototype.dispatchEventOnce=function(i){this.firedEvents[i.type]||this.dispatchEvent(i)},d.prototype.dispatchToListeners=function(i,t){var s=this,l=i.type,h=this.getListeners(l,t,!1);h&&h.forEach(function(D){t?s.dispatchAsync(function(){return D(i)}):D(i)}),(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(function(S){t?s.dispatchAsync(function(){return s.frameworkOverrides.dispatchEvent(l,function(){return S(l,i)},!0)}):s.frameworkOverrides.dispatchEvent(l,function(){return S(l,i)},!0)})},d.prototype.dispatchAsync=function(i){this.asyncFunctionsQueue.push(i),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},d.prototype.flushAsyncQueue=function(){this.scheduled=!1;var i=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],i.forEach(function(t){return t()})},C_([Iv(0,ki("loggerFactory")),Iv(1,ki("gridOptionsWrapper")),Iv(2,ki("frameworkOverrides")),Iv(3,ki("globalEventListener"))],d.prototype,"setBeans",null),C_([vt("eventService")],d)}(),fe=function(){function d(){}return d.ROW_BUFFER_SIZE=10,d.LAYOUT_INTERVAL=500,d.BATCH_WAIT_MILLIS=50,d.EXPORT_TYPE_DRAG_COPY="dragCopy",d.EXPORT_TYPE_CLIPBOARD="clipboard",d.EXPORT_TYPE_EXCEL="excel",d.EXPORT_TYPE_CSV="csv",d.ROW_MODEL_TYPE_INFINITE="infinite",d.ROW_MODEL_TYPE_VIEWPORT="viewport",d.ROW_MODEL_TYPE_CLIENT_SIDE="clientSide",d.ROW_MODEL_TYPE_SERVER_SIDE="serverSide",d.ALWAYS="always",d.ONLY_WHEN_GROUPING="onlyWhenGrouping",d.PINNED_TOP="top",d.PINNED_BOTTOM="bottom",d.DOM_LAYOUT_NORMAL="normal",d.DOM_LAYOUT_PRINT="print",d.DOM_LAYOUT_AUTO_HEIGHT="autoHeight",d.GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",d.SOURCE_PASTE="paste",d.PINNED_RIGHT="right",d.PINNED_LEFT="left",d.SORT_ASC="asc",d.SORT_DESC="desc",d.INPUT_SELECTOR="input, select, button, textarea",d.FOCUSABLE_SELECTOR="[tabindex], input, select, button, textarea",d.FOCUSABLE_EXCLUDE=".ag-hidden, .ag-hidden *, [disabled], .ag-disabled, .ag-disabled *",d}();(d=Y.GXE||(Y.GXE={})).CommunityCoreModule="@ag-grid-community/core",d.CommunityAllModules="@ag-grid-community/all",d.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",d.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",d.CsvExportModule="@ag-grid-community/csv-export",d.EnterpriseCoreModule="@ag-grid-enterprise/core",d.EnterpriseAllModules="@ag-grid-enterprise/all",d.RowGroupingModule="@ag-grid-enterprise/row-grouping",d.ColumnToolPanelModule="@ag-grid-enterprise/column-tool-panel",d.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",d.MenuModule="@ag-grid-enterprise/menu",d.SetFilterModule="@ag-grid-enterprise/set-filter",d.MultiFilterModule="@ag-grid-enterprise/multi-filter",d.StatusBarModule="@ag-grid-enterprise/status-bar",d.SideBarModule="@ag-grid-enterprise/side-bar",d.RangeSelectionModule="@ag-grid-enterprise/range-selection",d.MasterDetailModule="@ag-grid-enterprise/master-detail",d.RichSelectModule="@ag-grid-enterprise/rich-select",d.GridChartsModule="@ag-grid-enterprise/charts",d.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",d.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",d.ExcelExportModule="@ag-grid-enterprise/excel-export",d.ClipboardModule="@ag-grid-enterprise/clipboard",d.SparklinesModule="@ag-grid-enterprise/sparklines",d.AngularModule="@ag-grid-community/angular",d.ReactModule="@ag-grid-community/react",d.VueModule="@ag-grid-community/vue",d.PolymerModule="@ag-grid-community/polymer";var Kt=function(){function d(){}return d.register=function(i,t){void 0===t&&(t=!0),d.modulesMap[i.moduleName]=i,void 0===d.moduleBased?d.moduleBased=t:d.moduleBased!==t&&mn(function(){console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")},d.registerModules=function(i,t){void 0===t&&(t=!0),i&&i.forEach(function(s){return d.register(s,t)})},d.assertRegistered=function(i,t){if(this.isRegistered(i))return!0;var l="AG Grid: unable to use "+t+" as module "+i+" is not present. Please see: https://www.ag-grid.com/javascript-grid/modules/";return mn(function(){console.warn(l)},t+i),!1},d.isRegistered=function(i){return!!d.modulesMap[i]},d.getRegisteredModules=function(){return ge(d.modulesMap)},d.isPackageBased=function(){return!d.moduleBased},d.modulesMap={},d}(),Nu=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},w_=0,Pn=function(){function d(i,t,s,l){this.instanceId=w_++,this.moving=!1,this.menuVisible=!1,this.filterActive=!1,this.eventService=new tu,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=i,this.userProvidedColDef=t,this.colId=s,this.primary=l,this.setState(i)}return d.prototype.getInstanceId=function(){return this.instanceId},d.prototype.setState=function(i){void 0!==i.sort?(i.sort===fe.SORT_ASC||i.sort===fe.SORT_DESC)&&(this.sort=i.sort):(i.initialSort===fe.SORT_ASC||i.initialSort===fe.SORT_DESC)&&(this.sort=i.initialSort);var t=N(i.sortIndex),s=N(i.initialSortIndex);void 0!==t?null!==t&&(this.sortIndex=t):null!==s&&(this.sortIndex=s);var l=so(i.hide),c=so(i.initialHide);this.visible=void 0!==l?!l:!c,this.setPinned(void 0!==i.pinned?i.pinned:i.initialPinned);var h=N(i.flex),m=N(i.initialFlex);void 0!==h?this.flex=h:void 0!==m&&(this.flex=m)},d.prototype.setColDef=function(i,t){this.colDef=i,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation()},d.prototype.getUserProvidedColDef=function(){return this.userProvidedColDef},d.prototype.setParent=function(i){this.parent=i},d.prototype.getParent=function(){return this.parent},d.prototype.setOriginalParent=function(i){this.originalParent=i},d.prototype.getOriginalParent=function(){return this.originalParent},d.prototype.initialise=function(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.validate()},d.prototype.initDotNotation=function(){var i=this.gridOptionsWrapper.isSuppressFieldDotNotation();this.fieldContainsDots=Fe(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!i,this.tooltipFieldContainsDots=Fe(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!i},d.prototype.initMinAndMaxWidths=function(){var i=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(i),this.maxWidth=this.columnUtils.calculateColMaxWidth(i)},d.prototype.resetActualWidth=function(i){void 0===i&&(i="api");var t=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(t,i,!0)},d.prototype.isEmptyGroup=function(){return!1},d.prototype.isRowGroupDisplayed=function(i){return!(we(this.colDef)||we(this.colDef.showRowGroup)||!0!==this.colDef.showRowGroup&&this.colDef.showRowGroup!==i)},d.prototype.isPrimary=function(){return this.primary},d.prototype.isFilterAllowed=function(){return this.primary&&(!!this.colDef.filter||!!this.colDef.filterFramework)},d.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},d.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},d.prototype.validate=function(){var i=this.colDef;function t(h,m,S){mn(function(){S?console.warn(h,S):mn(function(){return console.warn(h)},m)},m)}this.gridOptionsWrapper.isRowModelDefault()&&!Kt.isRegistered(Y.GXE.RowGroupingModule)&&["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","enableValue","pivot","pivotIndex","aggFunc"].forEach(function(h){Fe(i[h])&&(Kt.isPackageBased()?t("AG Grid: "+h+" is only valid in ag-grid-enterprise, your column definition should not have "+h,"ColumnRowGroupingMissing"+h):t("AG Grid: "+h+" is only valid with AG Grid Enterprise Module "+Y.GXE.RowGroupingModule+" - your column definition should not have "+h,"ColumnRowGroupingMissing"+h))}),Kt.isRegistered(Y.GXE.RichSelectModule)||"agRichSelect"===this.colDef.cellEditor&&(Kt.isPackageBased()?t("AG Grid: "+this.colDef.cellEditor+" can only be used with ag-grid-enterprise","ColumnRichSelectMissing"):t("AG Grid: "+this.colDef.cellEditor+" can only be used with AG Grid Enterprise Module "+Y.GXE.RichSelectModule,"ColumnRichSelectMissing")),this.gridOptionsWrapper.isTreeData()&&["rowGroup","rowGroupIndex","pivot","pivotIndex"].forEach(function(h){Fe(i[h])&&t("AG Grid: "+h+" is not possible when doing tree data, your column definition should not have "+h,"TreeDataCannotRowGroup")}),Fe(this.colDef.width)&&"number"!=typeof this.colDef.width&&t("AG Grid: colDef.width should be a number, not "+typeof this.colDef.width,"ColumnCheck_asdfawef"),i.pinnedRowCellRenderer&&t("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),i.pinnedRowCellRendererParams&&t("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),i.pinnedRowCellRendererFramework&&t("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),i.pinnedRowValueGetter&&t("AG Grid: pinnedRowCellRenderer is deprecated, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue.","colDef.pinnedRowCellRenderer-deprecated")},d.prototype.addEventListener=function(i,t){this.eventService.addEventListener(i,t)},d.prototype.removeEventListener=function(i,t){this.eventService.removeEventListener(i,t)},d.prototype.createColumnFunctionCallbackParams=function(i){return{node:i,data:i.data,column:this,colDef:this.colDef,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()}},d.prototype.isSuppressNavigable=function(i){if("boolean"==typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"==typeof this.colDef.suppressNavigable){var t=this.createColumnFunctionCallbackParams(i);return(0,this.colDef.suppressNavigable)(t)}return!1},d.prototype.isCellEditable=function(i){return!(i.group&&!this.gridOptionsWrapper.isEnableGroupEdit())&&this.isColumnFunc(i,this.colDef.editable)},d.prototype.isSuppressFillHandle=function(){return!!this.colDef.suppressFillHandle},d.prototype.isRowDrag=function(i){return this.isColumnFunc(i,this.colDef.rowDrag)},d.prototype.isDndSource=function(i){return this.isColumnFunc(i,this.colDef.dndSource)},d.prototype.isCellCheckboxSelection=function(i){return this.isColumnFunc(i,this.colDef.checkboxSelection)},d.prototype.isSuppressPaste=function(i){return this.isColumnFunc(i,this.colDef?this.colDef.suppressPaste:null)},d.prototype.isResizable=function(){return!0===this.colDef.resizable},d.prototype.isColumnFunc=function(i,t){return"boolean"==typeof t?t:"function"==typeof t&&t(this.createColumnFunctionCallbackParams(i))},d.prototype.setMoving=function(i,t){void 0===t&&(t="api"),this.moving=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_MOVING_CHANGED,t))},d.prototype.createColumnEvent=function(i,t){return{api:this.gridApi,columnApi:this.columnApi,type:i,column:this,columns:[this],source:t}},d.prototype.isMoving=function(){return this.moving},d.prototype.getSort=function(){return this.sort},d.prototype.setSort=function(i,t){void 0===t&&(t="api"),this.sort!==i&&(this.sort=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_SORT_CHANGED,t)))},d.prototype.setMenuVisible=function(i,t){void 0===t&&(t="api"),this.menuVisible!==i&&(this.menuVisible=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_MENU_VISIBLE_CHANGED,t)))},d.prototype.isMenuVisible=function(){return this.menuVisible},d.prototype.isSortAscending=function(){return this.sort===fe.SORT_ASC},d.prototype.isSortDescending=function(){return this.sort===fe.SORT_DESC},d.prototype.isSortNone=function(){return we(this.sort)},d.prototype.isSorting=function(){return Fe(this.sort)},d.prototype.getSortIndex=function(){return this.sortIndex},d.prototype.setSortIndex=function(i){this.sortIndex=i},d.prototype.setAggFunc=function(i){this.aggFunc=i},d.prototype.getAggFunc=function(){return this.aggFunc},d.prototype.getLeft=function(){return this.left},d.prototype.getOldLeft=function(){return this.oldLeft},d.prototype.getRight=function(){return this.left+this.actualWidth},d.prototype.setLeft=function(i,t){void 0===t&&(t="api"),this.oldLeft=this.left,this.left!==i&&(this.left=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_LEFT_CHANGED,t)))},d.prototype.isFilterActive=function(){return this.filterActive},d.prototype.setFilterActive=function(i,t,s){void 0===t&&(t="api"),this.filterActive!==i&&(this.filterActive=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_FILTER_ACTIVE_CHANGED,t)));var l=this.createColumnEvent(d.EVENT_FILTER_CHANGED,t);s&&uo(l,s),this.eventService.dispatchEvent(l)},d.prototype.setPinned=function(i){this.pinned=!0===i||i===fe.PINNED_LEFT?fe.PINNED_LEFT:i===fe.PINNED_RIGHT?fe.PINNED_RIGHT:null},d.prototype.setFirstRightPinned=function(i,t){void 0===t&&(t="api"),this.firstRightPinned!==i&&(this.firstRightPinned=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_FIRST_RIGHT_PINNED_CHANGED,t)))},d.prototype.setLastLeftPinned=function(i,t){void 0===t&&(t="api"),this.lastLeftPinned!==i&&(this.lastLeftPinned=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_LAST_LEFT_PINNED_CHANGED,t)))},d.prototype.isFirstRightPinned=function(){return this.firstRightPinned},d.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},d.prototype.isPinned=function(){return this.pinned===fe.PINNED_LEFT||this.pinned===fe.PINNED_RIGHT},d.prototype.isPinnedLeft=function(){return this.pinned===fe.PINNED_LEFT},d.prototype.isPinnedRight=function(){return this.pinned===fe.PINNED_RIGHT},d.prototype.getPinned=function(){return this.pinned},d.prototype.setVisible=function(i,t){void 0===t&&(t="api");var s=!0===i;this.visible!==s&&(this.visible=s,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_VISIBLE_CHANGED,t)))},d.prototype.isVisible=function(){return this.visible},d.prototype.getColDef=function(){return this.colDef},d.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},d.prototype.getColId=function(){return this.colId},d.prototype.getId=function(){return this.getColId()},d.prototype.getUniqueId=function(){return this.getId()},d.prototype.getDefinition=function(){return this.colDef},d.prototype.getActualWidth=function(){return this.actualWidth},d.prototype.createBaseColDefParams=function(i){return{node:i,data:i.data,colDef:this.colDef,column:this,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}},d.prototype.getColSpan=function(i){if(we(this.colDef.colSpan))return 1;var t=this.createBaseColDefParams(i),s=this.colDef.colSpan(t);return Math.max(s,1)},d.prototype.getRowSpan=function(i){if(we(this.colDef.rowSpan))return 1;var t=this.createBaseColDefParams(i),s=this.colDef.rowSpan(t);return Math.max(s,1)},d.prototype.setActualWidth=function(i,t,s){void 0===t&&(t="api"),void 0===s&&(s=!1),null!=this.minWidth&&(i=Math.max(i,this.minWidth)),null!=this.maxWidth&&(i=Math.min(i,this.maxWidth)),this.actualWidth!==i&&(this.actualWidth=i,this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),s||this.fireColumnWidthChangedEvent(t))},d.prototype.fireColumnWidthChangedEvent=function(i){this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_WIDTH_CHANGED,i))},d.prototype.isGreaterThanMax=function(i){return null!=this.maxWidth&&i>this.maxWidth},d.prototype.getMinWidth=function(){return this.minWidth},d.prototype.getMaxWidth=function(){return this.maxWidth},d.prototype.getFlex=function(){return this.flex||0},d.prototype.setFlex=function(i){this.flex!==i&&(this.flex=i)},d.prototype.setMinimum=function(i){void 0===i&&(i="api"),Fe(this.minWidth)&&this.setActualWidth(this.minWidth,i)},d.prototype.setRowGroupActive=function(i,t){void 0===t&&(t="api"),this.rowGroupActive!==i&&(this.rowGroupActive=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_ROW_GROUP_CHANGED,t)))},d.prototype.isRowGroupActive=function(){return this.rowGroupActive},d.prototype.setPivotActive=function(i,t){void 0===t&&(t="api"),this.pivotActive!==i&&(this.pivotActive=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_PIVOT_CHANGED,t)))},d.prototype.isPivotActive=function(){return this.pivotActive},d.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},d.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},d.prototype.setValueActive=function(i,t){void 0===t&&(t="api"),this.aggregationActive!==i&&(this.aggregationActive=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_VALUE_CHANGED,t)))},d.prototype.isValueActive=function(){return this.aggregationActive},d.prototype.isAllowPivot=function(){return!0===this.colDef.enablePivot},d.prototype.isAllowValue=function(){return!0===this.colDef.enableValue},d.prototype.isAllowRowGroup=function(){return!0===this.colDef.enableRowGroup},d.prototype.getMenuTabs=function(i){var t=this.getColDef().menuTabs;return null==t&&(t=i),t},d.prototype.isLockPosition=function(){return console.warn("AG Grid: since v21, col.isLockPosition() should not be used, please use col.getColDef().lockPosition instead."),!!this.colDef&&!!this.colDef.lockPosition},d.prototype.isLockVisible=function(){return console.warn("AG Grid: since v21, col.isLockVisible() should not be used, please use col.getColDef().lockVisible instead."),!!this.colDef&&!!this.colDef.lockVisible},d.prototype.isLockPinned=function(){return console.warn("AG Grid: since v21, col.isLockPinned() should not be used, please use col.getColDef().lockPinned instead."),!!this.colDef&&!!this.colDef.lockPinned},d.EVENT_MOVING_CHANGED="movingChanged",d.EVENT_LEFT_CHANGED="leftChanged",d.EVENT_WIDTH_CHANGED="widthChanged",d.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",d.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",d.EVENT_VISIBLE_CHANGED="visibleChanged",d.EVENT_FILTER_CHANGED="filterChanged",d.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",d.EVENT_SORT_CHANGED="sortChanged",d.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",d.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",d.EVENT_PIVOT_CHANGED="columnPivotChanged",d.EVENT_VALUE_CHANGED="columnValueChanged",Nu([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),Nu([H("columnUtils")],d.prototype,"columnUtils",void 0),Nu([H("columnApi")],d.prototype,"columnApi",void 0),Nu([H("gridApi")],d.prototype,"gridApi",void 0),Nu([H("context")],d.prototype,"context",void 0),Nu([et],d.prototype,"initialise",null),d}(),ai=function(){function d(i,t,s,l){this.displayedChildren=[],this.localEventService=new tu,this.groupId=t,this.instanceId=s,this.originalColumnGroup=i,this.pinned=l}return d.createUniqueId=function(i,t){return i+"_"+t},d.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},d.prototype.getParent=function(){return this.parent},d.prototype.setParent=function(i){this.parent=i},d.prototype.getUniqueId=function(){return d.createUniqueId(this.groupId,this.instanceId)},d.prototype.isEmptyGroup=function(){return 0===this.displayedChildren.length},d.prototype.isMoving=function(){var i=this.getOriginalColumnGroup().getLeafColumns();return!(!i||0===i.length)&&i.every(function(t){return t.isMoving()})},d.prototype.checkLeft=function(){if(this.displayedChildren.forEach(function(l){l instanceof d&&l.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsWrapper.isEnableRtl()){var t=jn(this.displayedChildren).getLeft();this.setLeft(t)}else{var s=this.displayedChildren[0].getLeft();this.setLeft(s)}else this.setLeft(null)},d.prototype.getLeft=function(){return this.left},d.prototype.getOldLeft=function(){return this.oldLeft},d.prototype.setLeft=function(i){this.oldLeft=i,this.left!==i&&(this.left=i,this.localEventService.dispatchEvent(this.createAgEvent(d.EVENT_LEFT_CHANGED)))},d.prototype.getPinned=function(){return this.pinned},d.prototype.createAgEvent=function(i){return{type:i}},d.prototype.addEventListener=function(i,t){this.localEventService.addEventListener(i,t)},d.prototype.removeEventListener=function(i,t){this.localEventService.removeEventListener(i,t)},d.prototype.getGroupId=function(){return this.groupId},d.prototype.getInstanceId=function(){return this.instanceId},d.prototype.isChildInThisGroupDeepSearch=function(i){var t=!1;return this.children.forEach(function(s){i===s&&(t=!0),s instanceof d&&s.isChildInThisGroupDeepSearch(i)&&(t=!0)}),t},d.prototype.getActualWidth=function(){var i=0;return this.displayedChildren&&this.displayedChildren.forEach(function(t){i+=t.getActualWidth()}),i},d.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var i=!1;return this.displayedChildren.forEach(function(t){t.isResizable()&&(i=!0)}),i},d.prototype.getMinWidth=function(){var i=0;return this.displayedChildren.forEach(function(t){i+=t.getMinWidth()||0}),i},d.prototype.addChild=function(i){this.children||(this.children=[]),this.children.push(i)},d.prototype.getDisplayedChildren=function(){return this.displayedChildren},d.prototype.getLeafColumns=function(){var i=[];return this.addLeafColumns(i),i},d.prototype.getDisplayedLeafColumns=function(){var i=[];return this.addDisplayedLeafColumns(i),i},d.prototype.getDefinition=function(){return this.originalColumnGroup.getColGroupDef()},d.prototype.getColGroupDef=function(){return this.originalColumnGroup.getColGroupDef()},d.prototype.isPadding=function(){return this.originalColumnGroup.isPadding()},d.prototype.isExpandable=function(){return this.originalColumnGroup.isExpandable()},d.prototype.isExpanded=function(){return this.originalColumnGroup.isExpanded()},d.prototype.setExpanded=function(i){this.originalColumnGroup.setExpanded(i)},d.prototype.addDisplayedLeafColumns=function(i){this.displayedChildren.forEach(function(t){t instanceof Pn?i.push(t):t instanceof d&&t.addDisplayedLeafColumns(i)})},d.prototype.addLeafColumns=function(i){this.children.forEach(function(t){t instanceof Pn?i.push(t):t instanceof d&&t.addLeafColumns(i)})},d.prototype.getChildren=function(){return this.children},d.prototype.getColumnGroupShow=function(){return this.originalColumnGroup.getColumnGroupShow()},d.prototype.getOriginalColumnGroup=function(){return this.originalColumnGroup},d.prototype.getPaddingLevel=function(){var i=this.getParent();return this.isPadding()&&i&&i.isPadding()?1+i.getPaddingLevel():0},d.prototype.calculateDisplayedColumns=function(){var i=this;this.displayedChildren=[];for(var t=this;null!=t&&t.isPadding();)t=t.getParent();if(!t||!t.originalColumnGroup.isExpandable())return this.displayedChildren=this.children,void this.localEventService.dispatchEvent(this.createAgEvent(d.EVENT_DISPLAYED_CHILDREN_CHANGED));this.children.forEach(function(l){if(!(l instanceof d)||l.displayedChildren&&l.displayedChildren.length)switch(l.getColumnGroupShow()){case d.HEADER_GROUP_SHOW_OPEN:t.originalColumnGroup.isExpanded()&&i.displayedChildren.push(l);break;case d.HEADER_GROUP_SHOW_CLOSED:t.originalColumnGroup.isExpanded()||i.displayedChildren.push(l);break;default:i.displayedChildren.push(l)}}),this.localEventService.dispatchEvent(this.createAgEvent(d.EVENT_DISPLAYED_CHILDREN_CHANGED))},d.HEADER_GROUP_SHOW_OPEN="open",d.HEADER_GROUP_SHOW_CLOSED="closed",d.EVENT_LEFT_CHANGED="leftChanged",d.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),d}(),Cr=function(){function d(i,t,s,l){this.localEventService=new tu,this.expandable=!1,this.colGroupDef=i,this.groupId=t,this.expanded=!!i&&!!i.openByDefault,this.padding=s,this.level=l}return d.prototype.setOriginalParent=function(i){this.originalParent=i},d.prototype.getOriginalParent=function(){return this.originalParent},d.prototype.getLevel=function(){return this.level},d.prototype.isVisible=function(){return!!this.children&&this.children.some(function(i){return i.isVisible()})},d.prototype.isPadding=function(){return this.padding},d.prototype.setExpanded=function(i){this.expanded=void 0!==i&&i,this.localEventService.dispatchEvent({type:d.EVENT_EXPANDED_CHANGED})},d.prototype.isExpandable=function(){return this.expandable},d.prototype.isExpanded=function(){return this.expanded},d.prototype.getGroupId=function(){return this.groupId},d.prototype.getId=function(){return this.getGroupId()},d.prototype.setChildren=function(i){this.children=i},d.prototype.getChildren=function(){return this.children},d.prototype.getColGroupDef=function(){return this.colGroupDef},d.prototype.getLeafColumns=function(){var i=[];return this.addLeafColumns(i),i},d.prototype.addLeafColumns=function(i){!this.children||this.children.forEach(function(t){t instanceof Pn?i.push(t):t instanceof d&&t.addLeafColumns(i)})},d.prototype.getColumnGroupShow=function(){var i=this.colGroupDef;if(i)return i.columnGroupShow},d.prototype.setupExpandable=function(){var i=this;this.setExpandable(),this.getLeafColumns().forEach(function(t){return t.addEventListener(Pn.EVENT_VISIBLE_CHANGED,i.onColumnVisibilityChanged.bind(i))})},d.prototype.setExpandable=function(){if(!this.isPadding()){for(var i=!1,t=!1,s=!1,l=this.findChildrenRemovingPadding(),c=0,h=l.length;c<h;c++){var m=l[c];if(m.isVisible()){var S=m.getColumnGroupShow();S===ai.HEADER_GROUP_SHOW_OPEN?(i=!0,s=!0):S===ai.HEADER_GROUP_SHOW_CLOSED?(t=!0,s=!0):(i=!0,t=!0)}}var R=i&&t&&s;this.expandable!==R&&(this.expandable=R,this.localEventService.dispatchEvent({type:d.EVENT_EXPANDABLE_CHANGED}))}},d.prototype.findChildrenRemovingPadding=function(){var i=[];return function s(l){l.forEach(function(c){c instanceof d&&c.isPadding()?s(c.children):i.push(c)})}(this.children),i},d.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},d.prototype.addEventListener=function(i,t){this.localEventService.addEventListener(i,t)},d.prototype.removeEventListener=function(i,t){this.localEventService.removeEventListener(i,t)},d.EVENT_EXPANDED_CHANGED="expandedChanged",d.EVENT_EXPANDABLE_CHANGED="expandableChanged",d}(),b_={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},Lv="__ag_Grid_Stop_Propagation",E_=["touchstart","touchend","touchmove","touchcancel"],Hf={};function lo(d){d[Lv]=!0}function Oa(d){return!0===d[Lv]}var Fv=function(){var d={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(s){if("boolean"==typeof Hf[s])return Hf[s];var l=document.createElement(d[s]||"div"),c=(s="on"+s)in l;return c||(l.setAttribute(s,"return;"),c="function"==typeof l[s]),Hf[s]=c}}();function Vf(d,i,t){for(var s=Gu(i);s;){var l=d.getDomData(s,t);if(l)return l;s=s.parentElement}return null}function Gu(d){return d.target||d.srcElement}function Wf(d,i){return!(!i||!d)&&kv(i).indexOf(d)>=0}function x_(d){for(var i=[],t=Gu(d);t;)i.push(t),t=t.parentElement;return i}function kv(d){var i=d;return i.deepPath?i.deepPath():i.path?i.path:i.composedPath?i.composedPath():i.__agGridEventPath?i.__agGridEventPath:x_(d)}function Xr(d,i,t,s){var l=Tn(E_,t);d&&d.addEventListener&&d.addEventListener(i,t,s,l?{passive:!0}:void 0)}var Jc=Object.freeze({__proto__:null,stopPropagationForAgGrid:lo,isStopPropagationForAgGrid:Oa,isEventSupported:Fv,getCtrlForEvent:Vf,addChangeListener:function(d,i){d.addEventListener("changed",i),d.addEventListener("paste",i),d.addEventListener("input",i),d.addEventListener("keydown",i),d.addEventListener("keyup",i)},getTarget:Gu,isElementInEventPath:Wf,createEventPath:x_,addAgGridEventPath:function(d){d.__agGridEventPath=kv(d)},getEventPath:kv,addSafePassiveEventListener:Xr}),bo=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Ye=function(){function d(){var i=this;this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.isAlive=function(){return!i.destroyed}}return d.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},d.prototype.getContext=function(){return this.context},d.prototype.destroy=function(){this.destroyFunctions.forEach(function(i){return i()}),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:d.EVENT_DESTROYED})},d.prototype.addEventListener=function(i,t){this.localEventService||(this.localEventService=new tu),this.localEventService.addEventListener(i,t)},d.prototype.removeEventListener=function(i,t){this.localEventService&&this.localEventService.removeEventListener(i,t)},d.prototype.dispatchEventAsync=function(i){var t=this;window.setTimeout(function(){return t.dispatchEvent(i)},0)},d.prototype.dispatchEvent=function(i){this.localEventService&&this.localEventService.dispatchEvent(i)},d.prototype.addManagedListener=function(i,t,s){var l=this;if(!this.destroyed){i instanceof HTMLElement?Xr(this.getFrameworkOverrides(),i,t,s):i.addEventListener(t,s);var c=function h(){return i.removeEventListener(t,s),l.destroyFunctions=l.destroyFunctions.filter(function(m){return m!==h}),null};return this.destroyFunctions.push(c),c}},d.prototype.addDestroyFunc=function(i){this.isAlive()?this.destroyFunctions.push(i):i()},d.prototype.createManagedBean=function(i,t){var s=this.createBean(i,t);return this.addDestroyFunc(this.destroyBean.bind(this,i,t)),s},d.prototype.createBean=function(i,t,s){return(t||this.getContext()).createBean(i,s)},d.prototype.destroyBean=function(i,t){return(t||this.getContext()).destroyBean(i)},d.prototype.destroyBeans=function(i,t){var s=this;return i&&Ut(i,function(l){return s.destroyBean(l,t)}),[]},d.EVENT_DESTROYED="destroyed",bo([H("frameworkOverrides")],d.prototype,"frameworkOverrides",void 0),bo([H("context")],d.prototype,"context",void 0),bo([H("eventService")],d.prototype,"eventService",void 0),bo([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),bo([Fi],d.prototype,"destroy",null),d}(),Ub=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Nv=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Gv=function(d,i){return function(t,s){i(t,s,d)}},R_=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Ub(i,d),i.prototype.setBeans=function(t){this.logger=t.create("ColumnFactory")},i.prototype.createColumnTree=function(t,s,l){var c=new vi,h=this.extractExistingTreeData(l),m=h.existingCols,S=h.existingGroups;c.addExistingKeys(h.existingColKeys);var D=this.recursivelyCreateColumns(t,0,s,m,c,S),L=this.findMaxDept(D,0);this.logger.log("Number of levels for grouped columns is "+L);var U=this.balanceColumnTree(D,0,L,c);return this.columnUtils.depthFirstOriginalTreeSearch(null,U,function(ae,Te){ae instanceof Cr&&ae.setupExpandable(),ae.setOriginalParent(Te)}),{columnTree:U,treeDept:L}},i.prototype.extractExistingTreeData=function(t){var s=[],l=[],c=[];return t&&this.columnUtils.depthFirstOriginalTreeSearch(null,t,function(h){if(h instanceof Cr)l.push(h);else{var S=h;c.push(S.getId()),s.push(S)}}),{existingCols:s,existingGroups:l,existingColKeys:c}},i.prototype.createForAutoGroups=function(t,s){var l=this,c=[];return t.forEach(function(h){var m=l.createAutoGroupTreeItem(s,h);c.push(m)}),c},i.prototype.createAutoGroupTreeItem=function(t,s){for(var c=s,h=this.findDepth(t)-1;h>=0;h--){var m=new Cr(null,"FAKE_PATH_"+s.getId()+"}_"+h,!0,h);this.context.createBean(m),m.setChildren([c]),c.setOriginalParent(m),c=m}return c},i.prototype.findDepth=function(t){for(var s=0,l=t;l&&l[0]&&l[0]instanceof Cr;)s++,l=l[0].getChildren();return s},i.prototype.balanceColumnTree=function(t,s,l,c){for(var h=[],m=0;m<t.length;m++){var S=t[m];if(S instanceof Cr){var R=S,D=this.balanceColumnTree(R.getChildren(),s+1,l,c);R.setChildren(D),h.push(R)}else{for(var L=void 0,U=void 0,K=l-1;K>=s;K--){var ee=c.getUniqueKey(null,null),ae=this.createMergedColGroupDef(null),Te=new Cr(ae,ee,!0,s);this.context.createBean(Te),U&&U.setChildren([Te]),U=Te,L||(L=U)}if(L&&U){if(h.push(L),t.some(function(We){return We instanceof Cr})){U.setChildren([S]);continue}U.setChildren(t);break}h.push(S)}}return h},i.prototype.findMaxDept=function(t,s){for(var l=s,c=0;c<t.length;c++){var h=t[c];if(h instanceof Cr){var S=this.findMaxDept(h.getChildren(),s+1);l<S&&(l=S)}}return l},i.prototype.recursivelyCreateColumns=function(t,s,l,c,h,m){var S=this,R=[];return t&&t.forEach(function(D){var L;L=S.isColumnGroup(D)?S.createColumnGroup(l,D,s,c,h,m):S.createColumn(l,D,c,h),R.push(L)}),R},i.prototype.createColumnGroup=function(t,s,l,c,h,m){var S=this.createMergedColGroupDef(s),R=h.getUniqueKey(S.groupId||null,null),D=new Cr(S,R,!1,l);this.context.createBean(D);var L=this.findExistingGroup(s,m);L&&L.isExpanded()&&D.setExpanded(!0);var U=this.recursivelyCreateColumns(S.children,l+1,t,c,h,m);return D.setChildren(U),D},i.prototype.createMergedColGroupDef=function(t){var s={};return ii(s,this.gridOptionsWrapper.getDefaultColGroupDef()),ii(s,t),this.checkForDeprecatedItems(s),s},i.prototype.createColumn=function(t,s,l,c){var h=this.mergeColDefs(s);this.checkForDeprecatedItems(h);var m=this.findExistingColumn(s,l);if(m)m.setColDef(h,s),this.applyColumnState(m,h);else{var S=c.getUniqueKey(h.colId,h.field);m=new Pn(h,s,S,t),this.context.createBean(m)}return m},i.prototype.applyColumnState=function(t,s){var l=N(s.flex);if(void 0!==l&&t.setFlex(l),t.getFlex()<=0){var h=N(s.width);if(null!=h)t.setActualWidth(h);else{var m=t.getActualWidth();t.setActualWidth(m)}}void 0!==s.sort&&t.setSort(s.sort==fe.SORT_ASC||s.sort==fe.SORT_DESC?s.sort:void 0);var S=N(s.sortIndex);void 0!==S&&t.setSortIndex(S);var R=so(s.hide);void 0!==R&&t.setVisible(!R),void 0!==s.pinned&&t.setPinned(s.pinned)},i.prototype.findExistingColumn=function(t,s){var l=Li(s,function(c){var h=c.getUserProvidedColDef();if(!h)return!1;var S=null!=t.field;return null!=t.colId?c.getId()===t.colId:S?h.field===t.field:h===t});return s&&l&&ri(s,l),l},i.prototype.findExistingGroup=function(t,s){var l=Li(s,function(c){return!(!c.getColGroupDef()||null==t.groupId||c.getId()!==t.groupId)});return l&&ri(s,l),l},i.prototype.mergeColDefs=function(t){var s={},l=this.gridOptionsWrapper.getDefaultColDef();uo(s,l,!1,!0);var c=t.type;return c||(c=l&&l.type),c&&this.assignColumnTypes(c,s),uo(s,t,!1,!0),s},i.prototype.assignColumnTypes=function(t,s){var l=[];if(t instanceof Array)t.some(function(S){return"string"!=typeof S})?console.warn("ag-grid: if colDef.type is supplied an array it should be of type 'string[]'"):l=t;else{if("string"!=typeof t)return void console.warn("ag-grid: colDef.type should be of type 'string' | 'string[]'");l=t.split(",")}var h=ii({},b_);Nn(this.gridOptionsWrapper.getColumnTypes()||{},function(S,R){S in h?console.warn("AG Grid: the column type '"+S+"' is a default column type and cannot be overridden."):h[S]=R}),l.forEach(function(S){var R=h[S.trim()];R?uo(s,R,!1,!0):console.warn("ag-grid: colDef.type '"+S+"' does not correspond to defined gridOptions.columnTypes")})},i.prototype.checkForDeprecatedItems=function(t){if(t){var s=t;void 0!==s.group&&console.warn("ag-grid: colDef.group is invalid, please check documentation on how to do grouping as it changed in version 3"),void 0!==s.headerGroup&&console.warn("ag-grid: colDef.headerGroup is invalid, please check documentation on how to do grouping as it changed in version 3"),void 0!==s.headerGroupShow&&console.warn("ag-grid: colDef.headerGroupShow is invalid, should be columnGroupShow, please check documentation on how to do grouping as it changed in version 3"),void 0!==s.suppressRowGroup&&console.warn("ag-grid: colDef.suppressRowGroup is deprecated, please use colDef.type instead"),void 0!==s.suppressAggregation&&console.warn("ag-grid: colDef.suppressAggregation is deprecated, please use colDef.type instead"),(s.suppressRowGroup||s.suppressAggregation)&&console.warn("ag-grid: colDef.suppressAggregation and colDef.suppressRowGroup are deprecated, use allowRowGroup, allowPivot and allowValue instead"),s.displayName&&(console.warn("ag-grid: Found displayName "+s.displayName+", please use headerName instead, displayName is deprecated."),s.headerName=s.displayName)}},i.prototype.isColumnGroup=function(t){return void 0!==t.children},Nv([H("columnUtils")],i.prototype,"columnUtils",void 0),Nv([Gv(0,ki("loggerFactory"))],i.prototype,"setBeans",null),Nv([vt("columnFactory")],i)}(Ye),$=function(){function d(){}return d.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",d.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",d.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",d.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",d.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",d.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",d.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",d.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",d.EVENT_COLUMN_MOVED="columnMoved",d.EVENT_COLUMN_VISIBLE="columnVisible",d.EVENT_COLUMN_PINNED="columnPinned",d.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",d.EVENT_COLUMN_RESIZED="columnResized",d.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",d.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",d.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",d.EVENT_ROW_GROUP_OPENED="rowGroupOpened",d.EVENT_ROW_DATA_CHANGED="rowDataChanged",d.EVENT_ROW_DATA_UPDATED="rowDataUpdated",d.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",d.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",d.EVENT_CHART_CREATED="chartCreated",d.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",d.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",d.EVENT_CHART_DESTROYED="chartDestroyed",d.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",d.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",d.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",d.EVENT_MODEL_UPDATED="modelUpdated",d.EVENT_PASTE_START="pasteStart",d.EVENT_PASTE_END="pasteEnd",d.EVENT_FILL_START="fillStart",d.EVENT_FILL_END="fillEnd",d.EVENT_CELL_CLICKED="cellClicked",d.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",d.EVENT_CELL_MOUSE_DOWN="cellMouseDown",d.EVENT_CELL_CONTEXT_MENU="cellContextMenu",d.EVENT_CELL_VALUE_CHANGED="cellValueChanged",d.EVENT_ROW_VALUE_CHANGED="rowValueChanged",d.EVENT_CELL_FOCUSED="cellFocused",d.EVENT_ROW_SELECTED="rowSelected",d.EVENT_SELECTION_CHANGED="selectionChanged",d.EVENT_CELL_KEY_DOWN="cellKeyDown",d.EVENT_CELL_KEY_PRESS="cellKeyPress",d.EVENT_CELL_MOUSE_OVER="cellMouseOver",d.EVENT_CELL_MOUSE_OUT="cellMouseOut",d.EVENT_FILTER_CHANGED="filterChanged",d.EVENT_FILTER_MODIFIED="filterModified",d.EVENT_FILTER_OPENED="filterOpened",d.EVENT_SORT_CHANGED="sortChanged",d.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",d.EVENT_ROW_CLICKED="rowClicked",d.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",d.EVENT_GRID_READY="gridReady",d.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",d.EVENT_VIEWPORT_CHANGED="viewportChanged",d.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",d.EVENT_FIRST_DATA_RENDERED="firstDataRendered",d.EVENT_DRAG_STARTED="dragStarted",d.EVENT_DRAG_STOPPED="dragStopped",d.EVENT_CHECKBOX_CHANGED="checkboxChanged",d.EVENT_ROW_EDITING_STARTED="rowEditingStarted",d.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",d.EVENT_CELL_EDITING_STARTED="cellEditingStarted",d.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",d.EVENT_BODY_SCROLL="bodyScroll",d.EVENT_BODY_SCROLL_END="bodyScrollEnd",d.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",d.EVENT_PAGINATION_CHANGED="paginationChanged",d.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",d.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",d.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",d.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",d.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",d.EVENT_FLASH_CELLS="flashCells",d.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",d.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",d.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",d.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",d.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",d.EVENT_ROW_DRAG_ENTER="rowDragEnter",d.EVENT_ROW_DRAG_MOVE="rowDragMove",d.EVENT_ROW_DRAG_LEAVE="rowDragLeave",d.EVENT_ROW_DRAG_END="rowDragEnd",d.EVENT_POPUP_TO_FRONT="popupToFront",d.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",d.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",d.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",d.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",d.EVENT_KEYBOARD_FOCUS="keyboardFocus",d.EVENT_MOUSE_FOCUS="mouseFocus",d.EVENT_STORE_UPDATED="storeUpdated",d}(),Bv=function(){function d(){this.existingIds={}}return d.prototype.getInstanceIdForKey=function(i){var s,t=this.existingIds[i];return this.existingIds[i]=s="number"!=typeof t?0:t+1,s},d}(),T_=/[&<>"']/g,D_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function A_(d,i){if(i=Math.floor(i),0===d.length||0===i)return"";var t=d.length*i;for(i=Math.floor(Math.log(i)/Math.log(2));i;)d+=d,i--;return d+d.substring(0,t-d.length)}function Hv(d,i,t){return d.length>i?d:((i-=d.length)>t.length&&(t+=A_(t,i/t.length)),t.slice(0,i)+d)}function M_(d){return null==d?null:d.replace(/([A-Z])/g,function(i){return"-"+i[0].toLowerCase()})}function Vv(d){return null==d?null:d.replace(/-([a-z])/g,function(i){return i[1].toUpperCase()})}function O_(d){return d[0].toUpperCase()+d.substr(1).toLowerCase()}function ua(d){return null==d?null:d.toString().toString().replace(T_,function(i){return D_[i]})}function Jr(d){return d&&null!=d?d.replace(/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g,"$1$4 $2$3$5").replace("."," ").split(" ").map(function(s){return s.substring(0,1).toUpperCase()+(s.length>1?s.substring(1,s.length):"")}).join(" "):null}function Wv(d,i){return d===i||null!=d&&d.slice(0,i.length)===i}var Uf=Object.freeze({__proto__:null,utf8_encode:function(d){var i=String.fromCharCode;function l(L,U){return i(L>>U&63|128)}function c(L){if(L>=0&&L<=31&&10!==L)return"_x"+Hv(L.toString(16).toUpperCase(),4,"0")+"_";if(0==(4294967168&L))return i(L);var ee="";return 0==(4294965248&L)?ee=i(L>>6&31|192):0==(4294901760&L)?(function(L){if(L>=55296&&L<=57343)throw Error("Lone surrogate U+"+L.toString(16).toUpperCase()+" is not a scalar value")}(L),ee=i(L>>12&15|224),ee+=l(L,6)):0==(4292870144&L)&&(ee=i(L>>18&7|240),ee+=l(L,12),ee+=l(L,6)),ee+i(63&L|128)}for(var h=function(L){var U=[];if(!L)return[];for(var ae,Te,K=L.length,ee=0;ee<K;)(ae=L.charCodeAt(ee++))>=55296&&ae<=56319&&ee<K?56320==(64512&(Te=L.charCodeAt(ee++)))?U.push(((1023&ae)<<10)+(1023&Te)+65536):(U.push(ae),ee--):U.push(ae);return U}(d),m=h.length,S=-1,D="";++S<m;)D+=c(h[S]);return D},stringRepeat:A_,padStart:Hv,camelCaseToHyphen:M_,hyphenToCamelCase:Vv,capitalise:O_,escapeString:ua,camelCaseToHumanText:Jr,startsWith:Wv});function Pa(d){var i=new Map;return d.forEach(function(t){return i.set(t[0],t[1])}),i}var zv=Object.freeze({__proto__:null,convertToMap:Pa,mapById:function(d,i){var t=new Map;return d.forEach(function(s){return t.set(i(s),s)}),t},keys:function(d){var i=[];return d.forEach(function(t,s){return i.push(s)}),i}}),Wn=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Hr=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},jb=function(d,i){return function(t,s){i(t,s,d)}},pn=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.primaryHeaderRowCount=0,t.secondaryHeaderRowCount=0,t.secondaryColumnsPresent=!1,t.gridHeaderRowCount=0,t.displayedColumnsLeft=[],t.displayedColumnsRight=[],t.displayedColumnsCenter=[],t.displayedColumns=[],t.displayedColumnsAndGroupsMap={},t.viewportColumns=[],t.viewportColumnsCenter=[],t.autoHeightActiveAtLeastOnce=!1,t.rowGroupColumns=[],t.valueColumns=[],t.pivotColumns=[],t.ready=!1,t.autoGroupsNeedBuilding=!1,t.forceRecreateAutoGroups=!1,t.pivotMode=!1,t.bodyWidth=0,t.leftWidth=0,t.rightWidth=0,t.bodyWidthDirty=!0,t.colDefVersion=0,t.flexColsCalculatedAtLestOnce=!1,t}return Wn(i,d),i.prototype.init=function(){this.suppressColumnVirtualisation=this.gridOptionsWrapper.isSuppressColumnVirtualisation();var t=this.gridOptionsWrapper.isPivotMode();this.isPivotSettingAllowed(t)&&(this.pivotMode=t),this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.addManagedListener(this.gridOptionsWrapper,"autoGroupColumnDef",this.onAutoGroupColumnDefChanged.bind(this))},i.prototype.onAutoGroupColumnDefChanged=function(){this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged")},i.prototype.getColDefVersion=function(){return this.colDefVersion},i.prototype.setColumnDefs=function(t,s){var l=this;void 0===s&&(s="api");var c=!!this.columnDefs;this.colDefVersion++;var h=this.compareColumnStatesAndRaiseEvents(s);this.columnDefs=t,this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var m=this.primaryColumns,R=this.columnFactory.createColumnTree(t,!0,this.primaryColumnTree);this.primaryColumnTree=R.columnTree,this.primaryHeaderRowCount=R.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(function(D){return l.primaryColumnsMap[D.getId()]=D}),this.extractRowGroupColumns(s,m),this.extractPivotColumns(s,m),this.extractValueColumns(s,m),this.ready=!0,this.updateGridColumns(),c&&this.gridColsArePrimary&&!this.gridOptionsWrapper.isMaintainColumnOrder()&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(s),this.checkViewportColumns(),this.dispatchEverythingChanged(s),h(),this.dispatchNewColumnsLoaded()},i.prototype.dispatchNewColumnsLoaded=function(){this.eventService.dispatchEvent({type:$.EVENT_NEW_COLUMNS_LOADED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.dispatchEverythingChanged=function(t){void 0===t&&(t="api"),this.eventService.dispatchEvent({type:$.EVENT_COLUMN_EVERYTHING_CHANGED,api:this.gridApi,columnApi:this.columnApi,source:t})},i.prototype.orderGridColumnsLikePrimary=function(){var t=this,s=this.primaryColumns;!s||this.gridColumns.sort(function(l,c){var h=s.indexOf(l),m=s.indexOf(c),S=h>=0,R=m>=0;return S&&R?h-m:S?1:R?-1:t.gridColumns.indexOf(l)-t.gridColumns.indexOf(c)})},i.prototype.getAllDisplayedAutoHeightCols=function(){return this.displayedAutoHeightCols},i.prototype.setViewport=function(){this.gridOptionsWrapper.isEnableRtl()?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},i.prototype.getDisplayedColumnsStartingAt=function(t){for(var s=t,l=[];null!=s;)l.push(s),s=this.getDisplayedColAfter(s);return l},i.prototype.checkViewportColumns=function(){if(null!=this.displayedColumnsCenter){var t=this.viewportColumns.map(function(c){return c.getId()}).join("#");this.extractViewport(),t!==this.viewportColumns.map(function(c){return c.getId()}).join("#")&&this.eventService.dispatchEvent({type:$.EVENT_VIRTUAL_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi})}},i.prototype.setViewportPosition=function(t,s){(t!==this.scrollWidth||s!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=t,this.scrollPosition=s,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns())},i.prototype.isPivotMode=function(){return this.pivotMode},i.prototype.isPivotSettingAllowed=function(t){return!t||!this.gridOptionsWrapper.isTreeData()||(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1)},i.prototype.setPivotMode=function(t,s){void 0===s&&(s="api"),t!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)&&(this.pivotMode=t,this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(s),this.eventService.dispatchEvent({type:$.EVENT_COLUMN_PIVOT_MODE_CHANGED,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.getSecondaryPivotColumn=function(t,s){if(!this.secondaryColumnsPresent||!this.secondaryColumns)return null;var l=this.getPrimaryColumn(s),c=null;return this.secondaryColumns.forEach(function(h){var m=h.getColDef().pivotKeys,S=h.getColDef().pivotValueColumn;pr(m,t)&&S===l&&(c=h)}),c},i.prototype.setBeans=function(t){this.logger=t.create("columnModel")},i.prototype.setFirstRightAndLastLeftPinned=function(t){var s,l;this.gridOptionsWrapper.isEnableRtl()?(s=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,l=this.displayedColumnsRight?jn(this.displayedColumnsRight):null):(s=this.displayedColumnsLeft?jn(this.displayedColumnsLeft):null,l=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(function(c){c.setLastLeftPinned(c===s,t),c.setFirstRightPinned(c===l,t)})},i.prototype.autoSizeColumns=function(t,s,l){var c=this;void 0===l&&(l="api"),this.animationFrameService.flushAllFrames();var h=[],m=-1;for(null==s&&(s=this.gridOptionsWrapper.isSkipHeaderOnAutoSize());0!==m;)m=0,this.actionOnGridColumns(t,function(S){if(h.indexOf(S)>=0)return!1;var R=c.autoWidthCalculator.getPreferredWidthForColumn(S,s);if(R>0){var D=c.normaliseColumnWidth(S,R);S.setActualWidth(D,l),h.push(S),m++}return!0},l);this.fireColumnResizedEvent(h,!0,"autosizeColumns")},i.prototype.fireColumnResizedEvent=function(t,s,l,c){void 0===c&&(c=null),t&&t.length&&this.eventService.dispatchEvent({type:$.EVENT_COLUMN_RESIZED,columns:t,column:1===t.length?t[0]:null,flexColumns:c,finished:s,api:this.gridApi,columnApi:this.columnApi,source:l})},i.prototype.autoSizeColumn=function(t,s,l){void 0===l&&(l="api"),t&&this.autoSizeColumns([t],s,l)},i.prototype.autoSizeAllColumns=function(t,s){void 0===s&&(s="api");var l=this.getAllDisplayedColumns();this.autoSizeColumns(l,t,s)},i.prototype.getColumnsFromTree=function(t){var s=[];return function c(h){for(var m=0;m<h.length;m++){var S=h[m];S instanceof Pn?s.push(S):S instanceof Cr&&c(S.getChildren())}}(t),s},i.prototype.getAllDisplayedTrees=function(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null},i.prototype.getPrimaryColumnTree=function(){return this.primaryColumnTree},i.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},i.prototype.getDisplayedTreeLeft=function(){return this.displayedTreeLeft},i.prototype.getDisplayedTreeRight=function(){return this.displayedTreeRight},i.prototype.getDisplayedTreeCentre=function(){return this.displayedTreeCentre},i.prototype.isColumnDisplayed=function(t){return this.getAllDisplayedColumns().indexOf(t)>=0},i.prototype.getAllDisplayedColumns=function(){return this.displayedColumns},i.prototype.getViewportColumns=function(){return this.viewportColumns},i.prototype.getDisplayedLeftColumnsForRow=function(t){return this.colSpanActive?this.getDisplayedColumnsForRow(t,this.displayedColumnsLeft):this.displayedColumnsLeft},i.prototype.getDisplayedRightColumnsForRow=function(t){return this.colSpanActive?this.getDisplayedColumnsForRow(t,this.displayedColumnsRight):this.displayedColumnsRight},i.prototype.getDisplayedColumnsForRow=function(t,s,l,c){for(var R,h=[],m=null,S=function(U){var Pe,K=s[U],ee=s.length-U,ae=Math.min(K.getColSpan(t),ee),Te=[K];if(ae>1){for(var Ve=ae-1,We=1;We<=Ve;We++)Te.push(s[U+We]);U+=Ve}l?(Pe=!1,Te.forEach(function(ye){l(ye)&&(Pe=!0)})):Pe=!0,Pe&&(0===h.length&&m&&c&&c(K)&&h.push(m),h.push(K)),m=K,R=U},D=0;D<s.length;D++)S(D),D=R;return h},i.prototype.getViewportCenterColumnsForRow=function(t){var s=this;if(!this.colSpanActive)return this.viewportColumnsCenter;var c=this.suppressColumnVirtualisation?null:this.isColumnInViewport.bind(this);return this.getDisplayedColumnsForRow(t,this.displayedColumnsCenter,c,function(m){var S=m.getLeft();return Fe(S)&&S>s.viewportLeft})},i.prototype.getAriaColumnIndex=function(t){return this.getAllGridColumns().indexOf(t)+1},i.prototype.isColumnInViewport=function(t){if(t.getColDef().autoHeight)return!0;var s=t.getLeft()||0,l=s+t.getActualWidth(),c=this.viewportLeft-200,h=this.viewportRight+200;return!(s<c&&l<c||s>h&&l>h)},i.prototype.getDisplayedColumnsLeftWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsLeft)},i.prototype.getDisplayedColumnsRightWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsRight)},i.prototype.updatePrimaryColumnList=function(t,s,l,c,h,m){var S=this;if(void 0===m&&(m="api"),t&&!ni(t)){var R=!1;t.forEach(function(L){var U=S.getPrimaryColumn(L);if(U){if(l){if(s.indexOf(U)>=0)return;s.push(U)}else{if(s.indexOf(U)<0)return;ri(s,U)}c(U),R=!0}}),R&&(this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(m),this.eventService.dispatchEvent({type:h,columns:s,column:1===s.length?s[0]:null,api:this.gridApi,columnApi:this.columnApi,source:m}))}},i.prototype.setRowGroupColumns=function(t,s){void 0===s&&(s="api"),this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(t,this.rowGroupColumns,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.setRowGroupActive.bind(this),s)},i.prototype.setRowGroupActive=function(t,s,l){t!==s.isRowGroupActive()&&(s.setRowGroupActive(t,l),!t&&!this.gridOptionsWrapper.isSuppressMakeColumnVisibleAfterUnGroup()&&s.setVisible(!0,l))},i.prototype.addRowGroupColumn=function(t,s){void 0===s&&(s="api"),t&&this.addRowGroupColumns([t],s)},i.prototype.addRowGroupColumns=function(t,s){void 0===s&&(s="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(t,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),$.EVENT_COLUMN_ROW_GROUP_CHANGED,s)},i.prototype.removeRowGroupColumns=function(t,s){void 0===s&&(s="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(t,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),$.EVENT_COLUMN_ROW_GROUP_CHANGED,s)},i.prototype.removeRowGroupColumn=function(t,s){void 0===s&&(s="api"),t&&this.removeRowGroupColumns([t],s)},i.prototype.addPivotColumns=function(t,s){void 0===s&&(s="api"),this.updatePrimaryColumnList(t,this.pivotColumns,!0,function(l){return l.setPivotActive(!0,s)},$.EVENT_COLUMN_PIVOT_CHANGED,s)},i.prototype.setPivotColumns=function(t,s){void 0===s&&(s="api"),this.setPrimaryColumnList(t,this.pivotColumns,$.EVENT_COLUMN_PIVOT_CHANGED,function(l,c){c.setPivotActive(l,s)},s)},i.prototype.addPivotColumn=function(t,s){void 0===s&&(s="api"),this.addPivotColumns([t],s)},i.prototype.removePivotColumns=function(t,s){void 0===s&&(s="api"),this.updatePrimaryColumnList(t,this.pivotColumns,!1,function(l){return l.setPivotActive(!1,s)},$.EVENT_COLUMN_PIVOT_CHANGED,s)},i.prototype.removePivotColumn=function(t,s){void 0===s&&(s="api"),this.removePivotColumns([t],s)},i.prototype.setPrimaryColumnList=function(t,s,l,c,h){var m=this;s.length=0,Fe(t)&&t.forEach(function(S){var R=m.getPrimaryColumn(S);R&&s.push(R)}),(this.primaryColumns||[]).forEach(function(S){var R=s.indexOf(S)>=0;c(R,S)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(h),this.fireColumnEvent(l,s,h)},i.prototype.setValueColumns=function(t,s){void 0===s&&(s="api"),this.setPrimaryColumnList(t,this.valueColumns,$.EVENT_COLUMN_VALUE_CHANGED,this.setValueActive.bind(this),s)},i.prototype.setValueActive=function(t,s,l){if(t!==s.isValueActive()&&(s.setValueActive(t,l),t&&!s.getAggFunc())){var c=this.aggFuncService.getDefaultAggFunc(s);s.setAggFunc(c)}},i.prototype.addValueColumns=function(t,s){void 0===s&&(s="api"),this.updatePrimaryColumnList(t,this.valueColumns,!0,this.setValueActive.bind(this,!0),$.EVENT_COLUMN_VALUE_CHANGED,s)},i.prototype.addValueColumn=function(t,s){void 0===s&&(s="api"),t&&this.addValueColumns([t],s)},i.prototype.removeValueColumn=function(t,s){void 0===s&&(s="api"),this.removeValueColumns([t],s)},i.prototype.removeValueColumns=function(t,s){void 0===s&&(s="api"),this.updatePrimaryColumnList(t,this.valueColumns,!1,this.setValueActive.bind(this,!1),$.EVENT_COLUMN_VALUE_CHANGED,s)},i.prototype.normaliseColumnWidth=function(t,s){var l=t.getMinWidth();Fe(l)&&s<l&&(s=l);var c=t.getMaxWidth();return Fe(c)&&t.isGreaterThanMax(s)&&(s=c),s},i.prototype.getPrimaryOrGridColumn=function(t){return this.getPrimaryColumn(t)||this.getGridColumn(t)},i.prototype.setColumnWidths=function(t,s,l,c){var h=this;void 0===c&&(c="api");var m=[];t.forEach(function(S){var R=h.getPrimaryOrGridColumn(S.key);if(R&&(m.push({width:S.newWidth,ratios:[1],columns:[R]}),"shift"===h.gridOptionsWrapper.getColResizeDefault()&&(s=!s),s)){var L=h.getDisplayedColAfter(R);if(!L)return;var U=R.getActualWidth()-S.newWidth,K=L.getActualWidth()+U;m.push({width:K,ratios:[1],columns:[L]})}}),0!==m.length&&this.resizeColumnSets(m,l,c)},i.prototype.checkMinAndMaxWidthsForSet=function(t){var l=t.width,c=0,h=0,m=!0;return t.columns.forEach(function(D){var L=D.getMinWidth();c+=L||0;var U=D.getMaxWidth();Fe(U)&&U>0?h+=U:m=!1}),l>=c&&(!m||l<=h)},i.prototype.resizeColumnSets=function(t,s,l){var c=this;if(!t||t.every(function(K){return c.checkMinAndMaxWidthsForSet(K)})){var S=[],R=[];t.forEach(function(K){var ee=K.width,ae=K.columns,Te=K.ratios,Ve={},We={};ae.forEach(function(Gt){return R.push(Gt)});for(var Pe=!0,Qe=0,ye=function(){if(++Qe>1e3)return console.error("AG Grid: infinite loop in resizeColumnSets"),"break";Pe=!1;var _n=[],Jn=0,er=ee;ae.forEach(function(cr,to){We[cr.getId()]?er-=Ve[cr.getId()]:(_n.push(cr),Jn+=Te[to])});var or=1/Jn;_n.forEach(function(cr,to){var jr;to===_n.length-1?jr=er:(jr=Math.round(Te[to]*ee*or),er-=jr);var hh=cr.getMinWidth(),Xd=cr.getMaxWidth();Fe(hh)&&jr<hh?(jr=hh,We[cr.getId()]=!0,Pe=!0):Fe(Xd)&&Xd>0&&jr>Xd&&(jr=Xd,We[cr.getId()]=!0,Pe=!0),Ve[cr.getId()]=jr})};Pe&&"break"!==ye(););ae.forEach(function(Gt){var _n=Ve[Gt.getId()];Gt.getActualWidth()!==_n&&(Gt.setActualWidth(_n,l),S.push(Gt))})});var D=S.length>0,L=this.refreshFlexedColumns({resizingCols:R,skipSetLeft:!0});D&&(this.setLeftValues(l),this.updateBodyWidths(),this.checkViewportColumns());var U=R.concat(L);(D||s)&&this.fireColumnResizedEvent(U,s,l,L)}else s&&this.fireColumnResizedEvent(t&&t.length>0?t[0].columns:null,s,l)},i.prototype.setColumnAggFunc=function(t,s,l){if(void 0===l&&(l="api"),t){var c=this.getPrimaryColumn(t);!c||(c.setAggFunc(s),this.fireColumnEvent($.EVENT_COLUMN_VALUE_CHANGED,[c],l))}},i.prototype.fireColumnEvent=function(t,s,l){this.eventService.dispatchEvent({type:t,columns:s,column:s&&1==s.length?s[0]:null,api:this.gridApi,columnApi:this.columnApi,source:l})},i.prototype.moveRowGroupColumn=function(t,s,l){void 0===l&&(l="api");var c=this.rowGroupColumns[t];this.rowGroupColumns.splice(t,1),this.rowGroupColumns.splice(s,0,c),this.eventService.dispatchEvent({type:$.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:this.rowGroupColumns,column:1===this.rowGroupColumns.length?this.rowGroupColumns[0]:null,api:this.gridApi,columnApi:this.columnApi,source:l})},i.prototype.moveColumns=function(t,s,l){if(void 0===l&&(l="api"),this.columnAnimationService.start(),s>this.gridColumns.length-t.length)return console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+s),void console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");var c=this.getGridColumns(t);!this.doesMovePassRules(c,s)||(Rr(this.gridColumns,c,s),this.updateDisplayedColumns(l),this.eventService.dispatchEvent({type:$.EVENT_COLUMN_MOVED,columns:c,column:1===c.length?c[0]:null,toIndex:s,api:this.gridApi,columnApi:this.columnApi,source:l}),this.columnAnimationService.finish())},i.prototype.doesMovePassRules=function(t,s){var l=this.gridColumns.slice();return Rr(l,t,s),!(!this.doesMovePassMarryChildren(l)||!this.doesMovePassLockedPositions(l))},i.prototype.sortColumnsLikeGridColumns=function(t){var s=this;!t||t.length<=1||t.filter(function(c){return s.gridColumns.indexOf(c)<0}).length>0||t.sort(function(c,h){return s.gridColumns.indexOf(c)-s.gridColumns.indexOf(h)})},i.prototype.doesMovePassLockedPositions=function(t){var s=!1,l=!0;return t.forEach(function(c){c.getColDef().lockPosition?s&&(l=!1):s=!0}),l},i.prototype.doesMovePassMarryChildren=function(t){var s=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(l){if(l instanceof Cr){var c=l,h=c.getColGroupDef();if(h&&h.marryChildren){var S=[];c.getLeafColumns().forEach(function(K){var ee=t.indexOf(K);S.push(ee)}),Math.max.apply(Math,S)-Math.min.apply(Math,S)>c.getLeafColumns().length-1&&(s=!1)}}}),s},i.prototype.moveColumn=function(t,s,l){void 0===l&&(l="api"),this.moveColumns([t],s,l)},i.prototype.moveColumnByIndex=function(t,s,l){void 0===l&&(l="api"),this.moveColumn(this.gridColumns[t],s,l)},i.prototype.getColumnDefs=function(){var t=this;if(this.primaryColumns){var s=this.primaryColumns.slice();return this.gridColsArePrimary?s.sort(function(l,c){return t.gridColumns.indexOf(l)-t.gridColumns.indexOf(c)}):this.lastPrimaryOrder&&s.sort(function(l,c){return t.lastPrimaryOrder.indexOf(l)-t.lastPrimaryOrder.indexOf(c)}),this.columnDefFactory.buildColumnDefs(s,this.rowGroupColumns,this.pivotColumns)}},i.prototype.getBodyContainerWidth=function(){return this.bodyWidth},i.prototype.getContainerWidth=function(t){switch(t){case fe.PINNED_LEFT:return this.leftWidth;case fe.PINNED_RIGHT:return this.rightWidth;default:return this.bodyWidth}},i.prototype.updateBodyWidths=function(){var t=this.getWidthOfColsInList(this.displayedColumnsCenter),s=this.getWidthOfColsInList(this.displayedColumnsLeft),l=this.getWidthOfColsInList(this.displayedColumnsRight);this.bodyWidthDirty=this.bodyWidth!==t,(this.bodyWidth!==t||this.leftWidth!==s||this.rightWidth!==l)&&(this.bodyWidth=t,this.leftWidth=s,this.rightWidth=l,this.eventService.dispatchEvent({type:$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},i.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},i.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},i.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},i.prototype.getDisplayedCenterColumns=function(){return this.displayedColumnsCenter},i.prototype.getDisplayedLeftColumns=function(){return this.displayedColumnsLeft},i.prototype.getDisplayedRightColumns=function(){return this.displayedColumnsRight},i.prototype.getDisplayedColumns=function(t){switch(t){case fe.PINNED_LEFT:return this.getDisplayedLeftColumns();case fe.PINNED_RIGHT:return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},i.prototype.getAllPrimaryColumns=function(){return this.primaryColumns?this.primaryColumns.slice():null},i.prototype.getSecondaryColumns=function(){return this.secondaryColumns?this.secondaryColumns.slice():null},i.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},i.prototype.getAllGridColumns=function(){return this.gridColumns},i.prototype.isEmpty=function(){return ni(this.gridColumns)},i.prototype.isRowGroupEmpty=function(){return ni(this.rowGroupColumns)},i.prototype.setColumnVisible=function(t,s,l){void 0===l&&(l="api"),this.setColumnsVisible([t],s,l)},i.prototype.setColumnsVisible=function(t,s,l){var c=this;void 0===s&&(s=!1),void 0===l&&(l="api"),this.columnAnimationService.start(),this.actionOnGridColumns(t,function(h){return h.isVisible()!==s&&(h.setVisible(s,l),!0)},l,function(){return{type:$.EVENT_COLUMN_VISIBLE,visible:s,column:null,columns:null,api:c.gridApi,columnApi:c.columnApi,source:l}}),this.columnAnimationService.finish()},i.prototype.setColumnPinned=function(t,s,l){void 0===l&&(l="api"),t&&this.setColumnsPinned([t],s,l)},i.prototype.setColumnsPinned=function(t,s,l){var h,c=this;void 0===l&&(l="api"),"print"!==this.gridOptionsWrapper.getDomLayout()?(this.columnAnimationService.start(),h=!0===s||s===fe.PINNED_LEFT?fe.PINNED_LEFT:s===fe.PINNED_RIGHT?fe.PINNED_RIGHT:null,this.actionOnGridColumns(t,function(m){return m.getPinned()!==h&&(m.setPinned(h),!0)},l,function(){return{type:$.EVENT_COLUMN_PINNED,pinned:h,column:null,columns:null,api:c.gridApi,columnApi:c.columnApi,source:l}}),this.columnAnimationService.finish()):console.warn("Changing the column pinning status is not allowed with domLayout='print'")},i.prototype.actionOnGridColumns=function(t,s,l,c){var h=this;if(!ni(t)){var m=[];if(t.forEach(function(R){var D=h.getGridColumn(R);D&&!1!==s(D)&&m.push(D)}),m.length&&(this.updateDisplayedColumns(l),Fe(c)&&c)){var S=c();S.columns=m,S.column=1===m.length?m[0]:null,this.eventService.dispatchEvent(S)}}},i.prototype.getDisplayedColBefore=function(t){var s=this.getAllDisplayedColumns(),l=s.indexOf(t);return l>0?s[l-1]:null},i.prototype.getDisplayedColAfter=function(t){var s=this.getAllDisplayedColumns(),l=s.indexOf(t);return l<s.length-1?s[l+1]:null},i.prototype.getDisplayedGroupAfter=function(t){return this.getDisplayedGroupAtDirection(t,"After")},i.prototype.getDisplayedGroupBefore=function(t){return this.getDisplayedGroupAtDirection(t,"Before")},i.prototype.getDisplayedGroupAtDirection=function(t,s){for(var l=t.getOriginalColumnGroup().getLevel()+t.getPaddingLevel(),c=t.getDisplayedLeafColumns(),h="After"===s?jn(c):c[0],m="getDisplayedCol"+s;;){var S=this[m](h);if(!S)return null;var R=this.getColumnGroupAtLevel(S,l);if(R!==t)return R}},i.prototype.getColumnGroupAtLevel=function(t,s){for(var l=t.getParent();!(l.getOriginalColumnGroup().getLevel()+l.getPaddingLevel()<=s);)l=l.getParent();return l},i.prototype.isPinningLeft=function(){return this.displayedColumnsLeft.length>0},i.prototype.isPinningRight=function(){return this.displayedColumnsRight.length>0},i.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var t=this.primaryColumns?this.primaryColumns.slice(0):[];return this.groupAutoColumns&&Fe(this.groupAutoColumns)&&this.groupAutoColumns.forEach(function(s){return t.push(s)}),this.secondaryColumnsPresent&&this.secondaryColumns&&this.secondaryColumns.forEach(function(s){return t.push(s)}),t},i.prototype.createStateItemFromColumn=function(t){var s=t.isRowGroupActive()?this.rowGroupColumns.indexOf(t):null,l=t.isPivotActive()?this.pivotColumns.indexOf(t):null,c=t.isValueActive()?t.getAggFunc():null,h=null!=t.getSort()?t.getSort():null,m=null!=t.getSortIndex()?t.getSortIndex():null,S=null!=t.getFlex()&&t.getFlex()>0?t.getFlex():null;return{colId:t.getColId(),width:t.getActualWidth(),hide:!t.isVisible(),pinned:t.getPinned(),sort:h,sortIndex:m,aggFunc:c,rowGroup:t.isRowGroupActive(),rowGroupIndex:s,pivot:t.isPivotActive(),pivotIndex:l,flex:S}},i.prototype.getColumnState=function(){if(we(this.primaryColumns)||!this.isAlive())return[];var s=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.pivotMode||this.orderColumnStateList(s),s},i.prototype.getPrimaryAndAutoGroupCols=function(){return this.groupAutoColumns?function(){for(var d=0,i=0,t=arguments.length;i<t;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<t;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s}(this.primaryColumns||[],this.groupAutoColumns):this.primaryColumns},i.prototype.orderColumnStateList=function(t){var s=Pa(this.gridColumns.map(function(l,c){return[l.getColId(),c]}));t.sort(function(l,c){return(s.has(l.colId)?s.get(l.colId):-1)-(s.has(c.colId)?s.get(c.colId):-1)})},i.prototype.resetColumnState=function(t){void 0===t&&(t="api");var s=this.getColumnsFromTree(this.primaryColumnTree),l=[],c=1e3,h=1e3,m=[];this.groupAutoColumns&&(m=m.concat(this.groupAutoColumns)),s&&(m=m.concat(s)),m.forEach(function(S){var R=function(_n,Jn){return null!=_n?_n:null!=Jn?Jn:null},D=S.getColDef(),L=R(D.sort,D.initialSort),U=R(D.sortIndex,D.initialSortIndex),K=R(D.hide,D.initialHide),ee=R(D.pinned,D.initialPinned),ae=R(D.width,D.initialWidth),Te=R(D.flex,D.initialFlex),Ve=R(D.rowGroupIndex,D.initialRowGroupIndex),We=R(D.rowGroup,D.initialRowGroup);null==Ve&&(null==We||0==We)&&(Ve=null,We=null);var Pe=R(D.pivotIndex,D.initialPivotIndex),Qe=R(D.pivot,D.initialPivot);null==Pe&&(null==Qe||0==Qe)&&(Pe=null,Qe=null);var ye=R(D.aggFunc,D.initialAggFunc),an={colId:S.getColId(),sort:L,sortIndex:U,hide:K,pinned:ee,width:ae,flex:Te,rowGroup:We,rowGroupIndex:Ve,pivot:Qe,pivotIndex:Pe,aggFunc:ye};we(Ve)&&We&&(an.rowGroupIndex=c++),we(Pe)&&Qe&&(an.pivotIndex=h++),l.push(an)}),this.applyColumnState({state:l,applyOrder:!0},t)},i.prototype.applyColumnState=function(t,s){var l=this;if(void 0===s&&(s="api"),ni(this.primaryColumns))return!1;if(t&&t.state&&!t.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;this.columnAnimationService.start();var c=this.compareColumnStatesAndRaiseEvents(s);this.autoGroupsNeedBuilding=!0;var h=this.primaryColumns.slice(),m=!0,S={},R={},D=[],L=this.rowGroupColumns.slice(),U=this.pivotColumns.slice();t.state&&t.state.forEach(function(Te){var We=Te.colId||"";if(Wv(We,fe.GROUP_AUTO_COLUMN_ID))D.push(Te);else{var Qe=l.getPrimaryColumn(We);Qe?(l.syncColumnWithStateItem(Qe,Te,t.defaultState,S,R,!1,s),ri(h,Qe)):m=!1}});var K=function(Ve){return l.syncColumnWithStateItem(Ve,null,t.defaultState,S,R,!1,s)};h.forEach(K);var ee=function(Ve,We,Pe,Qe){var ye=Ve[Pe.getId()],an=Ve[Qe.getId()],Gt=null!=ye,_n=null!=an;if(Gt&&_n)return ye-an;if(Gt)return-1;if(_n)return 1;var Jn=We.indexOf(Pe),er=We.indexOf(Qe),or=Jn>=0;return or&&er>=0?Jn-er:or?-1:1};this.rowGroupColumns.sort(ee.bind(this,S,L)),this.pivotColumns.sort(ee.bind(this,R,U)),this.updateGridColumns();var ae=this.groupAutoColumns?this.groupAutoColumns.slice():[];return D.forEach(function(Te){var Ve=l.getAutoColumn(Te.colId);ri(ae,Ve),l.syncColumnWithStateItem(Ve,Te,t.defaultState,null,null,!0,s)}),ae.forEach(K),this.applyOrderAfterApplyState(t),this.updateDisplayedColumns(s),this.dispatchEverythingChanged(s),c(),this.columnAnimationService.finish(),m},i.prototype.applyOrderAfterApplyState=function(t){if(this.gridColsArePrimary&&t.applyOrder&&t.state){var s=[],l={},c={};if(this.gridColumns.forEach(function(h){return c[h.getId()]=h}),t.state.forEach(function(h){if(h.colId&&!l[h.colId]){var m=c[h.colId];m&&(s.push(m),l[h.colId]=!0)}}),this.gridColumns.forEach(function(h){l[h.getColId()]||s.push(h)}),s=this.putFixedColumnsFirst(s),!this.doesMovePassMarryChildren(s))return void console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");this.gridColumns=s}},i.prototype.compareColumnStatesAndRaiseEvents=function(t){var s=this;if(!this.columnDefs)return function(){};var c={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},h=this.getColumnState(),m={};return h.forEach(function(S){m[S.colId]=S}),function(){if(!s.gridOptionsWrapper.isSuppressColumnStateEvents()){var S=s.getPrimaryAndAutoGroupCols(),R=function(Pe,Qe,ye,an){pr(Qe.map(an),ye.map(an))||s.eventService.dispatchEvent({type:Pe,columns:ye,column:1===ye.length?ye[0]:null,api:s.gridApi,columnApi:s.columnApi,source:t})},D=function(Pe){var Qe=[];return(S||[]).forEach(function(ye){var an=m[ye.getColId()];an&&Pe(an,ye)&&Qe.push(ye)}),Qe},L=function(Pe){return Pe.getColId()};R($.EVENT_COLUMN_ROW_GROUP_CHANGED,c.rowGroupColumns,s.rowGroupColumns,L),R($.EVENT_COLUMN_PIVOT_CHANGED,c.pivotColumns,s.pivotColumns,L),D(function(Pe,Qe){var ye=null!=Pe.aggFunc,an=ye!=Qe.isValueActive(),Gt=ye&&Pe.aggFunc!=Qe.getAggFunc();return an||Gt}).length>0&&s.fireColumnEvent($.EVENT_COLUMN_VALUE_CHANGED,s.valueColumns,t),s.fireColumnResizedEvent(D(function(Pe,Qe){return Pe.width!=Qe.getActualWidth()}),!0,t),s.raiseColumnPinnedEvent(D(function(Pe,Qe){return Pe.pinned!=Qe.getPinned()}),t),s.raiseColumnVisibleEvent(D(function(Pe,Qe){return Pe.hide==Qe.isVisible()}),t),D(function(Pe,Qe){return Pe.sort!=Qe.getSort()||Pe.sortIndex!=Qe.getSortIndex()}).length>0&&s.sortController.dispatchSortChangedEvents(),s.raiseColumnMovedEvent(h,t)}}},i.prototype.raiseColumnPinnedEvent=function(t,s){if(t.length){var l=1===t.length?t[0]:null,c=this.getCommonValue(t,function(m){return m.getPinned()});this.eventService.dispatchEvent({type:$.EVENT_COLUMN_PINNED,pinned:null!=c?c:null,columns:t,column:l,api:this.gridApi,columnApi:this.columnApi,source:s})}},i.prototype.getCommonValue=function(t,s){if(t&&0!=t.length){for(var l=s(t[0]),c=1;c<t.length;c++)if(l!==s(t[c]))return;return l}},i.prototype.raiseColumnVisibleEvent=function(t,s){if(t.length){var l=1===t.length?t[0]:null,c=this.getCommonValue(t,function(m){return m.isVisible()});this.eventService.dispatchEvent({type:$.EVENT_COLUMN_VISIBLE,visible:c,columns:t,column:l,api:this.gridApi,columnApi:this.columnApi,source:s})}},i.prototype.raiseColumnMovedEvent=function(t,s){var l=this,c=this.getColumnState(),h={};c.forEach(function(U){return h[U.colId]=U});var m={};t.forEach(function(U){h[U.colId]&&(m[U.colId]=!0)});var S=Br(t,function(U){return m[U.colId]}),R=Br(c,function(U){return m[U.colId]}),D=[];R.forEach(function(U,K){var ee=S&&S[K];if(ee&&ee.colId!==U.colId){var ae=l.getGridColumn(ee.colId);ae&&D.push(ae)}}),D.length&&this.eventService.dispatchEvent({type:$.EVENT_COLUMN_MOVED,columns:D,column:null,api:this.gridApi,columnApi:this.columnApi,source:s})},i.prototype.syncColumnWithStateItem=function(t,s,l,c,h,m,S){if(t){var R=function(er,or){var cr=s,to=l,ia={value1:void 0,value2:void 0},jr=!1;return cr&&(void 0!==cr[er]&&(ia.value1=cr[er],jr=!0),Fe(or)&&void 0!==cr[or]&&(ia.value2=cr[or],jr=!0)),!jr&&to&&(void 0!==to[er]&&(ia.value1=to[er]),Fe(or)&&void 0!==to[or]&&(ia.value2=to[or])),ia},D=R("hide").value1;void 0!==D&&t.setVisible(!D,S);var L=R("pinned").value1;void 0!==L&&t.setPinned(L);var U=this.columnUtils.calculateColMinWidth(t.getColDef()),K=R("flex").value1;if(void 0!==K&&t.setFlex(K),t.getFlex()<=0){var ae=R("width").value1;null!=ae&&null!=U&&ae>=U&&t.setActualWidth(ae,S)}var Te=R("sort").value1;void 0!==Te&&t.setSort(Te===fe.SORT_DESC||Te===fe.SORT_ASC?Te:void 0);var Ve=R("sortIndex").value1;if(void 0!==Ve&&t.setSortIndex(Ve),!m){var We=R("aggFunc").value1;void 0!==We&&("string"==typeof We?(t.setAggFunc(We),t.isValueActive()||(t.setValueActive(!0,S),this.valueColumns.push(t))):(Fe(We)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),t.isValueActive()&&(t.setValueActive(!1,S),ri(this.valueColumns,t))));var Pe=R("rowGroup","rowGroupIndex"),Qe=Pe.value1,ye=Pe.value2;(void 0!==Qe||void 0!==ye)&&("number"==typeof ye||Qe?(t.isRowGroupActive()||(t.setRowGroupActive(!0,S),this.rowGroupColumns.push(t)),c&&"number"==typeof ye&&(c[t.getId()]=ye)):t.isRowGroupActive()&&(t.setRowGroupActive(!1,S),ri(this.rowGroupColumns,t)));var an=R("pivot","pivotIndex"),Gt=an.value1,_n=an.value2;(void 0!==Gt||void 0!==_n)&&("number"==typeof _n||Gt?(t.isPivotActive()||(t.setPivotActive(!0,S),this.pivotColumns.push(t)),h&&"number"==typeof _n&&(h[t.getId()]=_n)):t.isPivotActive()&&(t.setPivotActive(!1,S),ri(this.pivotColumns,t)))}}},i.prototype.getGridColumns=function(t){return this.getColumns(t,this.getGridColumn.bind(this))},i.prototype.getColumns=function(t,s){var l=[];return t&&t.forEach(function(c){var h=s(c);h&&l.push(h)}),l},i.prototype.getColumnWithValidation=function(t){if(null==t)return null;var s=this.getGridColumn(t);return s||console.warn("AG Grid: could not find column "+t),s},i.prototype.getPrimaryColumn=function(t){return this.primaryColumns?this.getColumn(t,this.primaryColumns,this.primaryColumnsMap):null},i.prototype.getGridColumn=function(t){return this.getColumn(t,this.gridColumns,this.gridColumnsMap)},i.prototype.getColumn=function(t,s,l){if(!t)return null;if("string"==typeof t&&l[t])return l[t];for(var c=0;c<s.length;c++)if(this.columnsMatch(s[c],t))return s[c];return this.getAutoColumn(t)},i.prototype.getAutoColumn=function(t){var s=this;return this.groupAutoColumns&&Fe(this.groupAutoColumns)&&!we(this.groupAutoColumns)?Li(this.groupAutoColumns,function(l){return s.columnsMatch(l,t)}):null},i.prototype.columnsMatch=function(t,s){var l=t===s,c=t.getColDef()===s,h=t.getColId()==s;return l||c||h},i.prototype.getDisplayNameForColumn=function(t,s,l){if(void 0===l&&(l=!1),!t)return null;var c=this.getHeaderName(t.getColDef(),t,null,null,s);return l?this.wrapHeaderNameWithAggFunc(t,c):c},i.prototype.getDisplayNameForOriginalColumnGroup=function(t,s,l){var c=s?s.getColGroupDef():null;return c?this.getHeaderName(c,null,t,s,l):null},i.prototype.getDisplayNameForColumnGroup=function(t,s){return this.getDisplayNameForOriginalColumnGroup(t,t.getOriginalColumnGroup(),s)},i.prototype.getHeaderName=function(t,s,l,c,h){var m=t.headerValueGetter;if(m){var S={colDef:t,column:s,columnGroup:l,originalColumnGroup:c,location:h,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext()};return"function"==typeof m?m(S):"string"==typeof m?this.expressionService.evaluate(m,S):(console.warn("ag-grid: headerValueGetter must be a function or a string"),"")}return null!=t.headerName?t.headerName:t.field?Jr(t.field):""},i.prototype.wrapHeaderNameWithAggFunc=function(t,s){if(this.gridOptionsWrapper.isSuppressAggFuncInHeader())return s;var m,l=t.getColDef().pivotValueColumn,h=null;if(Fe(l))h=l?l.getAggFunc():null,m=!0;else{var S=t.isValueActive(),R=this.pivotMode||!this.isRowGroupEmpty();S&&R?(h=t.getAggFunc(),m=!0):m=!1}if(m){var D="string"==typeof h?h:"func";return this.gridOptionsWrapper.getLocaleTextFunc()(D,D)+"("+s+")"}return s},i.prototype.getColumnGroup=function(t,s){if(!t)return null;if(t instanceof ai)return t;var l=this.getAllDisplayedTrees(),c="number"==typeof s,h=null;return this.columnUtils.depthFirstAllColumnTreeSearch(l,function(m){if(m instanceof ai){var S=m;(c?t===S.getGroupId()&&s===S.getInstanceId():t===S.getGroupId())&&(h=S)}}),h},i.prototype.isReady=function(){return this.ready},i.prototype.extractValueColumns=function(t,s){this.valueColumns=this.extractColumns(s,this.valueColumns,function(l,c){return l.setValueActive(c,t)},function(){},function(){},function(l){var c=l.aggFunc;return null===c||""===c?null:void 0!==c?!!c:void 0},function(l){return null!=l.initialAggFunc&&""!=l.initialAggFunc}),this.valueColumns.forEach(function(l){var c=l.getColDef();null!=c.aggFunc&&""!=c.aggFunc?l.setAggFunc(c.aggFunc):l.getAggFunc()||l.setAggFunc(c.initialAggFunc)})},i.prototype.extractRowGroupColumns=function(t,s){this.rowGroupColumns=this.extractColumns(s,this.rowGroupColumns,function(l,c){return l.setRowGroupActive(c,t)},function(l){return l.rowGroupIndex},function(l){return l.initialRowGroupIndex},function(l){return l.rowGroup},function(l){return l.initialRowGroup})},i.prototype.extractColumns=function(t,s,l,c,h,m,S){void 0===t&&(t=[]),void 0===s&&(s=[]);var R=[],D=[];(this.primaryColumns||[]).forEach(function(K){var ee=t.indexOf(K)<0,ae=K.getColDef(),Te=so(m(ae)),Ve=so(S(ae)),We=N(c(ae)),Pe=N(h(ae));(void 0!==Te?Te:void 0!==We?null!==We&&We>=0:ee?void 0!==Ve?Ve:void 0!==Pe&&null!=Pe&&Pe>=0:s.indexOf(K)>=0)&&((ee?null!=We||null!=Pe:null!=We)?R.push(K):D.push(K))});var L=function(ee){var ae=c(ee.getColDef()),Te=h(ee.getColDef());return null!=ae?ae:Te};R.sort(function(K,ee){var ae=L(K),Te=L(ee);return ae===Te?0:ae<Te?-1:1});var U=[].concat(R);return s.forEach(function(K){D.indexOf(K)>=0&&U.push(K)}),D.forEach(function(K){U.indexOf(K)<0&&U.push(K)}),s.forEach(function(K){U.indexOf(K)<0&&l(K,!1)}),U.forEach(function(K){s.indexOf(K)<0&&l(K,!0)}),U},i.prototype.extractPivotColumns=function(t,s){this.pivotColumns=this.extractColumns(s,this.pivotColumns,function(l,c){return l.setPivotActive(c,t)},function(l){return l.pivotIndex},function(l){return l.initialPivotIndex},function(l){return l.pivot},function(l){return l.initialPivot})},i.prototype.resetColumnGroupState=function(t){void 0===t&&(t="api");var s=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,function(l){if(l instanceof Cr){var c=l.getColGroupDef(),h={groupId:l.getGroupId(),open:c?c.openByDefault:void 0};s.push(h)}}),this.setColumnGroupState(s,t)},i.prototype.getColumnGroupState=function(){var t=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(s){if(s instanceof Cr){var l=s;t.push({groupId:l.getGroupId(),open:l.isExpanded()})}}),t},i.prototype.setColumnGroupState=function(t,s){var l=this;void 0===s&&(s="api"),this.columnAnimationService.start();var c=[];t.forEach(function(h){var S=h.open,R=l.getOriginalColumnGroup(h.groupId);!R||R.isExpanded()!==S&&(l.logger.log("columnGroupOpened("+R.getGroupId()+","+S+")"),R.setExpanded(S),c.push(R))}),this.updateGroupsAndDisplayedColumns(s),this.setFirstRightAndLastLeftPinned(s),c.forEach(function(h){l.eventService.dispatchEvent({type:$.EVENT_COLUMN_GROUP_OPENED,columnGroup:h,api:l.gridApi,columnApi:l.columnApi})}),this.columnAnimationService.finish()},i.prototype.setColumnGroupOpened=function(t,s,l){var c;void 0===l&&(l="api"),c=t instanceof Cr?t.getId():t||"",this.setColumnGroupState([{groupId:c,open:s}],l)},i.prototype.getOriginalColumnGroup=function(t){if(t instanceof Cr)return t;"string"!=typeof t&&console.error("AG Grid: group key must be a string");var s=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(l){if(l instanceof Cr){var c=l;c.getId()===t&&(s=c)}}),s},i.prototype.calculateColumnsForDisplay=function(){var t=this;return this.gridColumns.filter(this.pivotMode&&!this.secondaryColumnsPresent?function(l){var c=t.groupAutoColumns&&Tn(t.groupAutoColumns,l),h=t.valueColumns&&Tn(t.valueColumns,l);return c||h}:function(l){return t.groupAutoColumns&&Tn(t.groupAutoColumns,l)||l.isVisible()})},i.prototype.checkColSpanActiveInCols=function(t){var s=!1;return t.forEach(function(l){Fe(l.getColDef().colSpan)&&(s=!0)}),s},i.prototype.calculateColumnsForGroupDisplay=function(){var t=this;this.groupDisplayColumns=[];var s=function(c){var h=c.getColDef();h&&Fe(h.showRowGroup)&&t.groupDisplayColumns.push(c)};this.gridColumns.forEach(s),this.groupAutoColumns&&this.groupAutoColumns.forEach(s)},i.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},i.prototype.updateDisplayedColumns=function(t){var s=this.calculateColumnsForDisplay();this.buildDisplayedTrees(s),this.calculateColumnsForGroupDisplay(),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t)},i.prototype.isSecondaryColumnsPresent=function(){return this.secondaryColumnsPresent},i.prototype.setSecondaryColumns=function(t,s){void 0===s&&(s="api");var l=t&&t.length>0;if(l||this.secondaryColumnsPresent){if(l){this.processSecondaryColumnDefinitions(t);var c=this.columnFactory.createColumnTree(t,!1);this.secondaryBalancedTree=c.columnTree,this.secondaryHeaderRowCount=c.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsPresent=!0}else this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsPresent=!1;this.updateGridColumns(),this.updateDisplayedColumns(s)}},i.prototype.processSecondaryColumnDefinitions=function(t){var s=this.gridOptionsWrapper.getProcessSecondaryColDefFunc(),l=this.gridOptionsWrapper.getProcessSecondaryColGroupDefFunc();(s||l)&&t&&function h(m){m.forEach(function(S){if(Fe(S.children)){var D=S;l&&l(D),h(D.children)}else s&&s(S)})}(t)},i.prototype.updateGridColumns=function(){var t=this;this.gridColsArePrimary&&(this.lastPrimaryOrder=this.gridColumns),this.secondaryColumns&&this.secondaryBalancedTree?(this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1):this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,this.orderGridColsLikeLastPrimary()),this.addAutoGroupToGridColumns(),this.gridColumns=this.putFixedColumnsFirst(this.gridColumns),this.setupQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(function(l){return t.gridColumnsMap[l.getId()]=l}),this.setAutoHeightActive(),this.eventService.dispatchEvent({type:$.EVENT_GRID_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.setAutoHeightActive=function(){if(this.autoHeightActive=this.gridColumns.filter(function(c){return c.getColDef().autoHeight}).length>0,this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;var t=this.rowModel.getType();t!==fe.ROW_MODEL_TYPE_CLIENT_SIDE&&t!==fe.ROW_MODEL_TYPE_SERVER_SIDE&&mn(function(){return console.warn("AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.")},"autoHeightActive.wrongRowModel")}},i.prototype.orderGridColsLikeLastPrimary=function(){if(!we(this.lastPrimaryOrder)){var t=Pa(this.lastPrimaryOrder.map(function(R,D){return[R,D]})),s=!0;if(this.gridColumns.forEach(function(R){t.has(R)&&(s=!1)}),!s){var l=Pa(this.gridColumns.map(function(R){return[R,!0]})),c=this.lastPrimaryOrder.filter(function(R){return l.has(R)}),h=Pa(c.map(function(R){return[R,!0]})),m=this.gridColumns.filter(function(R){return!h.has(R)}),S=c.slice();m.forEach(function(R){var D=R.getOriginalParent();if(D){for(var L=[];!L.length&&D;)D.getLeafColumns().forEach(function(ae){var Te=S.indexOf(ae)>=0,Ve=L.indexOf(ae)<0;Te&&Ve&&L.push(ae)}),D=D.getOriginalParent();if(L.length){var K=L.map(function(ae){return S.indexOf(ae)}),ee=Math.max.apply(Math,K);gi(S,R,ee+1)}else S.push(R)}else S.push(R)}),this.gridColumns=S}}},i.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},i.prototype.setupQuickFilterColumns=function(){this.groupAutoColumns?this.columnsForQuickFilter=(this.primaryColumns||[]).concat(this.groupAutoColumns):this.primaryColumns&&(this.columnsForQuickFilter=this.primaryColumns)},i.prototype.putFixedColumnsFirst=function(t){var s=t.filter(function(c){return c.getColDef().lockPosition}),l=t.filter(function(c){return!c.getColDef().lockPosition});return s.concat(l)},i.prototype.addAutoGroupToGridColumns=function(){if(this.createGroupAutoColumnsIfNeeded(),!we(this.groupAutoColumns)){this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;var t=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.gridBalancedTree=t.concat(this.gridBalancedTree)}},i.prototype.clearDisplayedAndViewportColumns=function(){this.displayedTreeLeft=[],this.displayedTreeRight=[],this.displayedTreeCentre=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[]},i.prototype.updateGroupsAndDisplayedColumns=function(t){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(t),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths(),this.eventService.dispatchEvent({type:$.EVENT_DISPLAYED_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.deriveDisplayedColumns=function(t){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(t),this.displayedAutoHeightCols=this.displayedColumns.filter(function(s){return s.getColDef().autoHeight})},i.prototype.isAutoRowHeightActive=function(){return this.autoHeightActive},i.prototype.wasAutoRowHeightEverActive=function(){return this.autoHeightActiveAtLeastOnce},i.prototype.joinDisplayedColumns=function(){this.displayedColumns=this.gridOptionsWrapper.isEnableRtl()?this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)},i.prototype.setLeftValues=function(t){this.setLeftValuesOfColumns(t),this.setLeftValuesOfGroups()},i.prototype.setLeftValuesOfColumns=function(t){var s=this;if(this.primaryColumns){var l=this.primaryColumns.slice(0),c=this.gridOptionsWrapper.isEnableRtl();[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(function(h){if(c){var m=s.getWidthOfColsInList(h);h.forEach(function(R){m-=R.getActualWidth(),R.setLeft(m,t)})}else{var S=0;h.forEach(function(R){R.setLeft(S,t),S+=R.getActualWidth()})}On(l,h)}),l.forEach(function(h){h.setLeft(null,t)})}},i.prototype.setLeftValuesOfGroups=function(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(function(t){t.forEach(function(s){s instanceof ai&&s.checkLeft()})})},i.prototype.derivedDisplayedColumnsFromDisplayedTree=function(t,s){s.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(t,function(l){l instanceof Pn&&s.push(l)})},i.prototype.extractViewportColumns=function(){this.viewportColumnsCenter=this.suppressColumnVirtualisation?this.displayedColumnsCenter:this.filterOutColumnsWithinViewport(),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)},i.prototype.getVirtualHeaderGroupRow=function(t,s){var l;switch(t){case fe.PINNED_LEFT:l=this.viewportRowLeft[s];break;case fe.PINNED_RIGHT:l=this.viewportRowRight[s];break;default:l=this.viewportRowCenter[s]}return we(l)&&(l=[]),l},i.prototype.extractViewportRows=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};var t={};this.viewportColumns.forEach(function(l){return t[l.getId()]=!0});var s=function l(c,h,m){for(var S=!1,R=0;R<c.length;R++){var D=c[R],L=!1;if(D instanceof Pn)L=!0===t[D.getId()];else{var K=D.getDisplayedChildren();K&&(L=l(K,h,m+1))}L&&(S=!0,h[m]||(h[m]=[]),h[m].push(D))}return S};s(this.displayedTreeLeft,this.viewportRowLeft,0),s(this.displayedTreeRight,this.viewportRowRight,0),s(this.displayedTreeCentre,this.viewportRowCenter,0)},i.prototype.extractViewport=function(){this.extractViewportColumns(),this.extractViewportRows()},i.prototype.filterOutColumnsWithinViewport=function(){return this.displayedColumnsCenter.filter(this.isColumnInViewport.bind(this))},i.prototype.refreshFlexedColumns=function(t){var s=this;void 0===t&&(t={});var l=t.source?t.source:"flex";if(null!=t.viewportWidth&&(this.flexViewportWidth=t.viewportWidth),!this.flexViewportWidth)return[];var c=-1;t.resizingCols&&t.resizingCols.forEach(function(Qe){var ye=s.displayedColumnsCenter.indexOf(Qe);c<ye&&(c=ye)});var h=function(ye){var an=s.displayedColumnsCenter.indexOf(ye)>c;return ye.getFlex()&&an},m=this.displayedColumnsCenter.filter(function(Qe){return!h(Qe)}),S=this.displayedColumnsCenter.filter(function(Qe){return h(Qe)}),R=[];if(!S.length)return[];var L,D=[];e:for(;;){var U=S.reduce(function(Qe,ye){return Qe+ye.getFlex()},0);L=this.flexViewportWidth-this.getWidthOfColsInList(m);for(var K=0;K<S.length;K++){var ee=S[K],ae=L*ee.getFlex()/U,Te=0,Ve=ee.getMinWidth(),We=ee.getMaxWidth();if(Fe(Ve)&&ae<Ve?Te=Ve:Fe(We)&&ae>We&&(Te=We),Te){ee.setActualWidth(Te,l),ri(S,ee),R.push(ee),m.push(ee);continue e}D[K]=Math.round(ae)}break}var Pe=L;return S.forEach(function(Qe,ye){Qe.setActualWidth(Math.min(D[ye],Pe),l),R.push(Qe),Pe-=D[ye]}),t.skipSetLeft||this.setLeftValues(l),t.updateBodyWidths&&this.updateBodyWidths(),t.fireResizedEvent&&this.fireColumnResizedEvent(R,!0,l,S),this.flexColsCalculatedAtLestOnce||(this.gridOptionsWrapper.isRowModelDefault()&&this.rowModel.resetRowHeights(),this.flexColsCalculatedAtLestOnce=!0),S},i.prototype.sizeColumnsToFit=function(t,s,l){void 0===s&&(s="sizeColumnsToFit");var c=this.getAllDisplayedColumns();if(!(t<=0)&&c.length){var h=[],m=[];c.forEach(function(Pe){!0===Pe.getColDef().suppressSizeToFit?m.push(Pe):h.push(Pe)});var S=h.slice(0),R=!1,D=function(Qe){ri(h,Qe),m.push(Qe)};for(h.forEach(function(Pe){return Pe.resetActualWidth(s)});!R;){R=!0;var L=t-this.getWidthOfColsInList(m);if(L<=0)h.forEach(function(Pe){Pe.setMinimum(s)});else for(var U=L/this.getWidthOfColsInList(h),K=L,ee=h.length-1;ee>=0;ee--){var ae=h[ee],Te=ae.getMinWidth(),Ve=ae.getMaxWidth(),We=Math.round(ae.getActualWidth()*U);Fe(Te)&&We<Te?(We=Te,D(ae),R=!1):Fe(Ve)&&ae.isGreaterThanMax(We)?(We=Ve,D(ae),R=!1):0===ee&&(We=K),ae.setActualWidth(We,s,!0),K-=We}}S.forEach(function(Pe){Pe.fireColumnWidthChangedEvent(s)}),this.setLeftValues(s),this.updateBodyWidths(),!l&&this.fireColumnResizedEvent(S,!0,s)}},i.prototype.buildDisplayedTrees=function(t){var s=[],l=[],c=[];t.forEach(function(m){switch(m.getPinned()){case"left":s.push(m);break;case"right":l.push(m);break;default:c.push(m)}});var h=new Bv;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(s,this.gridBalancedTree,h,fe.PINNED_LEFT,this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(l,this.gridBalancedTree,h,fe.PINNED_RIGHT,this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(c,this.gridBalancedTree,h,null,this.displayedTreeCentre),this.updateDisplayedMap()},i.prototype.updateDisplayedMap=function(){var t=this;this.displayedColumnsAndGroupsMap={};var s=function(c){t.displayedColumnsAndGroupsMap[c.getUniqueId()]=c};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,s),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,s),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,s)},i.prototype.isDisplayed=function(t){return this.displayedColumnsAndGroupsMap[t.getUniqueId()]===t},i.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var t=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(t,function(s){s instanceof ai&&s.calculateDisplayedColumns()})},i.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},i.prototype.createGroupAutoColumnsIfNeeded=function(){if(this.autoGroupsNeedBuilding){this.autoGroupsNeedBuilding=!1;var t=this.gridOptionsWrapper.isGroupUseEntireRow(this.pivotMode),s=this.pivotMode?this.gridOptionsWrapper.isPivotSuppressAutoColumn():this.gridOptionsWrapper.isGroupSuppressAutoColumn();if(!(this.rowGroupColumns.length>0||this.usingTreeData)||s||t)this.groupAutoColumns=null;else{var h=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);(!this.autoColsEqual(h,this.groupAutoColumns)||this.forceRecreateAutoGroups)&&(this.groupAutoColumns=h)}}},i.prototype.autoColsEqual=function(t,s){return pr(t,s,function(l,c){return l.getColId()===c.getColId()})},i.prototype.getWidthOfColsInList=function(t){return t.reduce(function(s,l){return s+l.getActualWidth()},0)},i.prototype.getGridBalancedTree=function(){return this.gridBalancedTree},i.prototype.hasFloatingFilters=function(){return!!this.gridColumns&&this.gridColumns.some(function(s){return s.getColDef().floatingFilter})},i.prototype.getFirstDisplayedColumn=function(){var t=this.gridOptionsWrapper.isEnableRtl(),s=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];t&&s.reverse();for(var l=0;l<s.length;l++){var c=this[s[l]]();if(c.length)return t?jn(c):c[0]}return null},Hr([H("expressionService")],i.prototype,"expressionService",void 0),Hr([H("columnFactory")],i.prototype,"columnFactory",void 0),Hr([H("displayedGroupCreator")],i.prototype,"displayedGroupCreator",void 0),Hr([H("autoWidthCalculator")],i.prototype,"autoWidthCalculator",void 0),Hr([H("columnUtils")],i.prototype,"columnUtils",void 0),Hr([H("columnAnimationService")],i.prototype,"columnAnimationService",void 0),Hr([H("autoGroupColService")],i.prototype,"autoGroupColService",void 0),Hr([Gn("aggFuncService")],i.prototype,"aggFuncService",void 0),Hr([Gn("valueCache")],i.prototype,"valueCache",void 0),Hr([Gn("animationFrameService")],i.prototype,"animationFrameService",void 0),Hr([H("rowModel")],i.prototype,"rowModel",void 0),Hr([H("columnApi")],i.prototype,"columnApi",void 0),Hr([H("gridApi")],i.prototype,"gridApi",void 0),Hr([H("sortController")],i.prototype,"sortController",void 0),Hr([H("columnDefFactory")],i.prototype,"columnDefFactory",void 0),Hr([et],i.prototype,"init",null),Hr([jb(0,ki("loggerFactory"))],i.prototype,"setBeans",null),Hr([vt("columnModel")],i)}(Ye);function zf(d,i){return Hv(d.toString(),i,"0")}function qb(d,i){for(var t=[],s=d;s<=i;s++)t.push(s);return t}function Ni(d){return""!==d&&!isNaN(parseFloat(d))&&isFinite(d)}function Kb(){return Number.MAX_SAFE_INTEGER||9007199254740991}function Kv(d){return"number"!=typeof d?"":d.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}var yM=Object.freeze({__proto__:null,padStartWidthZeros:zf,createArrayOfNumbers:qb,isNumeric:Ni,getMaxSafeInteger:Kb,cleanNumber:function(d){return"string"==typeof d&&(d=parseInt(d,10)),"number"==typeof d?Math.floor(d):null},decToHex:function(d,i){for(var t="",s=0;s<i;s++)t+=String.fromCharCode(255&d),d>>>=8;return t},formatNumberTwoDecimalPlacesAndCommas:function(d){return"number"!=typeof d?"":Kv(Math.round(100*d)/100)},formatNumberCommas:Kv,sum:function(d){return null==d?null:d.reduce(function(i,t){return i+t},0)}}),jf=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Yb=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return jf(i,d),i.prototype.calculateColMinWidth=function(t){return null!=t.minWidth?t.minWidth:this.gridOptionsWrapper.getMinColWidth()},i.prototype.calculateColMaxWidth=function(t){return null!=t.maxWidth?t.maxWidth:this.gridOptionsWrapper.getMaxColWidth()||Kb()},i.prototype.calculateColInitialWidth=function(t){var c,s=this.calculateColMinWidth(t),l=this.calculateColMaxWidth(t),h=N(t.width),m=N(t.initialWidth);return c=null!=h?h:null!=m?m:this.gridOptionsWrapper.getColWidth(),Math.max(Math.min(c,l),s)},i.prototype.getOriginalPathForColumn=function(t,s){var l=[],c=!1;return function m(S,R){for(var D=0;D<S.length;D++){if(c)return;var L=S[D];L instanceof Cr?(m(L.getChildren(),R+1),l[R]=L):L===t&&(c=!0)}}(s,0),c?l:null},i.prototype.depthFirstOriginalTreeSearch=function(t,s,l){var c=this;!s||s.forEach(function(h){h instanceof Cr&&c.depthFirstOriginalTreeSearch(h,h.getChildren(),l),l(h,t)})},i.prototype.depthFirstAllColumnTreeSearch=function(t,s){var l=this;!t||t.forEach(function(c){c instanceof ai&&l.depthFirstAllColumnTreeSearch(c.getChildren(),s),s(c)})},i.prototype.depthFirstDisplayedColumnTreeSearch=function(t,s){var l=this;!t||t.forEach(function(c){c instanceof ai&&l.depthFirstDisplayedColumnTreeSearch(c.getDisplayedChildren(),s),s(c)})},i=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c}([vt("columnUtils")],i),i}(Ye),$b=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ia=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return $b(i,d),i.prototype.createDisplayedGroups=function(t,s,l,c,h){var R,D,m=this,S=[],L=this.mapOldGroupsById(h);return t.forEach(function(U){for(var K=m.getOriginalPathForColumn(s,U),ee=[],ae=!D,Te=0;Te<K.length;Te++)if(ae||K[Te]!==D[Te]){var Ve=m.createColumnGroup(K[Te],l,L,c);ee[Te]=Ve,0==Te?S.push(Ve):ee[Te-1].addChild(Ve)}else ee[Te]=R[Te];0===ee.length?S.push(U):jn(ee).addChild(U),R=ee,D=K}),this.setupParentsIntoColumns(S,null),S},i.prototype.createColumnGroup=function(t,s,l,c){var h=t.getGroupId(),m=s.getInstanceIdForKey(h),R=l[ai.createUniqueId(h,m)];return R&&R.getOriginalColumnGroup()!==t&&(R=null),Fe(R)?R.reset():(R=new ai(t,h,m,c),this.context.createBean(R)),R},i.prototype.mapOldGroupsById=function(t){var s={};return t&&function c(h){h.forEach(function(m){if(m instanceof ai){var S=m;s[m.getUniqueId()]=S,c(S.getChildren())}})}(t),s},i.prototype.setupParentsIntoColumns=function(t,s){var l=this;t.forEach(function(c){if(c.setParent(s),c instanceof ai){var h=c;l.setupParentsIntoColumns(h.getChildren(),h)}})},i.prototype.getOriginalPathForColumn=function(t,s){var l=[],c=!1;return function m(S,R){for(var D=0;D<S.length;D++){if(c)return;var L=S[D];L instanceof Cr?(m(L.getChildren(),R+1),l[R]=L):L===s&&(c=!0)}}(t,0),c?l:(console.warn("could not get path"),null)},i=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c}([vt("displayedGroupCreator")],i),i}(Ye),ms=function(){function d(){}return d.STRING_PROPERTIES=["sortingOrder","rowClass","rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","quickFilterText","rowModelType","editType","domLayout","clipboardDeliminator","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","serverSideStoreType","groupDisplayType","treeDataDisplayType"],d.OBJECT_PROPERTIES=["components","frameworkComponents","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultExportParams","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","colResizeDefault","statusBar","sideBar","chartThemeOverrides","customChartThemes"],d.ARRAY_PROPERTIES=["alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes"],d.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","colWidth","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","minColWidth","maxColWidth","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","scrollbarWidth","batchUpdateWaitMillis","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"],d.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellSelection","suppressHorizontalScroll","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","angularCompileRows","angularCompileFilters","groupSuppressAutoColumn","groupSelectsChildren","groupIncludeFooter","groupIncludeTotalFooter","groupUseEntireRow","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","deprecatedEmbedFullWidthRows","suppressPaginationPanel","floatingFilter","groupHideOpenParents","groupMultiAutoColumn","pagination","stopEditingWhenGridLosesFocus","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","deltaRowDataMode","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDownAfterEdit","enterMovesDown","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressEnterpriseResetOnNewColumns","enableOldSetFilterModel","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","serverSideSortingAlwaysResets","suppressSetColumnStateEvents","suppressColumnStateEvents","enableCharts","deltaColumnMode","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","immutableData","immutableColumns","pivotSuppressAutoColumn","suppressExpandablePivotGroups","applyColumnDefOrder","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilteringAlwaysResets","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","reactUi"],d.ALL_PROPERTIES=function(){for(var d=0,i=0,t=arguments.length;i<t;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<t;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s}(d.ARRAY_PROPERTIES,d.OBJECT_PROPERTIES,d.STRING_PROPERTIES,d.NUMBER_PROPERTIES,d.FUNCTION_PROPERTIES=["localeTextFunc","groupRowInnerRenderer","groupRowInnerRendererFramework","groupRowRenderer","groupRowRendererFramework","isExternalFilterPresent","getRowHeight","doesExternalFilterPass","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","groupRowAggNodes","getRowNodeId","isFullWidthCell","fullWidthCellRenderer","fullWidthCellRendererFramework","processSecondaryColDef","processSecondaryColGroupDef","getBusinessKeyForNode","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","loadingCellRenderer","loadingCellRendererFramework","loadingOverlayComponent","loadingOverlayComponentFramework","noRowsOverlayComponent","noRowsOverlayComponentFramework","detailCellRenderer","detailCellRendererFramework","isRowMaster","isRowSelectable","postSort","processHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","suppressKeyboardEvent","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideStoreParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","defaultGroupSortComparator","defaultGroupOrderComparator","loadingCellRendererSelector"],d.BOOLEAN_PROPERTIES),d.FRAMEWORK_PROPERTIES=["__ob__","__v_skip","__metadata__","mappedColumnProperties","hasChildColumns","toColDef","createColDefFromGridColumn"],d}(),P_=function(){return P_=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},P_.apply(this,arguments)},Xb=function(){for(var d=0,i=0,t=arguments.length;i<t;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<t;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s},Ho=function(){function d(){}return d.getEventCallbacks=function(){return d.EVENT_CALLBACKS||(d.EVENT_CALLBACKS=d.EVENTS.map(function(i){return d.getCallbackForEvent(i)})),d.EVENT_CALLBACKS},d.copyAttributesToGridOptions=function(i,t,s){"object"!=typeof i&&(i={});var l=i,c=function(m){return void 0!==t[m]};return Xb(d.ARRAY_PROPERTIES,d.STRING_PROPERTIES,d.OBJECT_PROPERTIES,d.FUNCTION_PROPERTIES,d.getEventCallbacks()).filter(c).forEach(function(h){return l[h]=t[h]}),d.BOOLEAN_PROPERTIES.filter(c).forEach(function(h){return l[h]=d.toBoolean(t[h])}),d.NUMBER_PROPERTIES.filter(c).forEach(function(h){return l[h]=d.toNumber(t[h])}),i},d.getCallbackForEvent=function(i){return!i||i.length<2?i:"on"+i[0].toUpperCase()+i.substr(1)},d.processOnChange=function(i,t,s,l){if(i){var c=P_({},i),h=t,m=function(L){return c[L]};Xb(d.ARRAY_PROPERTIES,d.OBJECT_PROPERTIES,d.STRING_PROPERTIES,d.getEventCallbacks()).filter(m).forEach(function(D){return h[D]=c[D].currentValue}),d.BOOLEAN_PROPERTIES.filter(m).forEach(function(D){return h[D]=d.toBoolean(c[D].currentValue)}),d.NUMBER_PROPERTIES.filter(m).forEach(function(D){return h[D]=d.toNumber(c[D].currentValue)}),c.enableCellTextSelection&&(s.setEnableCellTextSelection(d.toBoolean(c.enableCellTextSelection.currentValue)),delete c.enableCellTextSelection),c.quickFilterText&&(s.setQuickFilter(c.quickFilterText.currentValue),delete c.quickFilterText),c.autoGroupColumnDef&&(s.setAutoGroupColumnDef(c.autoGroupColumnDef.currentValue,"gridOptionsChanged"),delete c.autoGroupColumnDef),c.columnDefs&&(s.setColumnDefs(c.columnDefs.currentValue,"gridOptionsChanged"),delete c.columnDefs),c.paginationPageSize&&(s.paginationSetPageSize(d.toNumber(c.paginationPageSize.currentValue)),delete c.paginationPageSize),c.pivotMode&&(l.setPivotMode(d.toBoolean(c.pivotMode.currentValue)),delete c.pivotMode),c.groupRemoveSingleChildren&&(s.setGroupRemoveSingleChildren(d.toBoolean(c.groupRemoveSingleChildren.currentValue)),delete c.groupRemoveSingleChildren),c.suppressRowDrag&&(s.setSuppressRowDrag(d.toBoolean(c.suppressRowDrag.currentValue)),delete c.suppressRowDrag),c.suppressMoveWhenRowDragging&&(s.setSuppressMoveWhenRowDragging(d.toBoolean(c.suppressMoveWhenRowDragging.currentValue)),delete c.suppressMoveWhenRowDragging),c.suppressRowClickSelection&&(s.setSuppressRowClickSelection(d.toBoolean(c.suppressRowClickSelection.currentValue)),delete c.suppressRowClickSelection),c.suppressClipboardPaste&&(s.setSuppressClipboardPaste(d.toBoolean(c.suppressClipboardPaste.currentValue)),delete c.suppressClipboardPaste),c.headerHeight&&(s.setHeaderHeight(d.toNumber(c.headerHeight.currentValue)),delete c.headerHeight);var S=s;Object.keys(c).forEach(function(D){var L="set"+D.charAt(0).toUpperCase()+D.substring(1);S[L]&&S[L](i[D].currentValue)});var R={type:$.EVENT_COMPONENT_STATE_CHANGED,api:t.api,columnApi:t.columnApi};Nn(i,function(D,L){R[D]=L}),s.dispatchEvent(R)}},d.toBoolean=function(i){return"boolean"==typeof i?i:"string"==typeof i&&("TRUE"===i.toUpperCase()||""==i)},d.toNumber=function(i){return"number"==typeof i?i:"string"==typeof i?Number(i):void 0},d.EVENTS=[],d.PUBLIC_EVENTS=[],d.EXCLUDED_INTERNAL_EVENTS=[],d.STRING_PROPERTIES=ms.STRING_PROPERTIES,d.OBJECT_PROPERTIES=ms.OBJECT_PROPERTIES,d.ARRAY_PROPERTIES=ms.ARRAY_PROPERTIES,d.NUMBER_PROPERTIES=ms.NUMBER_PROPERTIES,d.BOOLEAN_PROPERTIES=ms.BOOLEAN_PROPERTIES,d.FUNCTION_PROPERTIES=ms.FUNCTION_PROPERTIES,d.ALL_PROPERTIES=ms.ALL_PROPERTIES,d}();Ho.EVENTS=ge($),Ho.EXCLUDED_INTERNAL_EVENTS=[$.EVENT_SCROLLBAR_WIDTH_CHANGED,$.EVENT_CHECKBOX_CHANGED,$.EVENT_HEIGHT_SCALE_CHANGED,$.EVENT_BODY_HEIGHT_CHANGED,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,$.EVENT_SCROLL_VISIBILITY_CHANGED,$.EVENT_COLUMN_HOVER_CHANGED,$.EVENT_FLASH_CELLS,$.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,$.EVENT_DISPLAYED_ROWS_CHANGED,$.EVENT_LEFT_PINNED_WIDTH_CHANGED,$.EVENT_RIGHT_PINNED_WIDTH_CHANGED,$.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,$.EVENT_POPUP_TO_FRONT,$.EVENT_KEYBOARD_FOCUS,$.EVENT_MOUSE_FOCUS,$.EVENT_STORE_UPDATED,$.EVENT_COLUMN_PANEL_ITEM_DRAG_START,$.EVENT_COLUMN_PANEL_ITEM_DRAG_END,$.EVENT_FILL_START,$.EVENT_FILL_END],Ho.PUBLIC_EVENTS=Ho.EVENTS.filter(function(d){return!Tn(Ho.EXCLUDED_INTERNAL_EVENTS,d)});var wM=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Zb=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.componentsMappedByName={},t}return wM(i,d),i.prototype.setupComponents=function(t){var s=this;t&&t.forEach(function(l){return s.addComponent(l)})},i.prototype.addComponent=function(t){var l=t.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[l]=t.componentClass},i.prototype.getComponentClass=function(t){return this.componentsMappedByName[t]},i=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c}([vt("agStackComponentsRegistry")],i),i}(Ye),sr=function(){function d(){}return d.STRING_PROPERTIES=["headerName","columnGroupShow","headerClass","toolPanelClass","headerValueGetter","pivotKeys","groupId","colId","sort","initialSort","field","type","tooltipComponent","tooltipField","headerTooltip","cellClass","showRowGroup","template","templateUrl","filter","initialAggFunc","aggFunc","cellRenderer","cellEditor","pinned","initialPinned","chartDataType","cellEditorPopupPosition"],d.OBJECT_PROPERTIES=["headerGroupComponent","headerGroupComponentFramework","headerGroupComponentParams","cellStyle","cellRendererParams","cellEditorFramework","cellEditorParams","pinnedRowCellRendererFramework","pinnedRowCellRendererParams","filterFramework","filterParams","pivotValueColumn","headerComponent","headerComponentFramework","headerComponentParams","floatingFilterComponent","floatingFilterComponentParams","floatingFilterComponentFramework","tooltipComponent","tooltipComponentParams","tooltipComponentFramework","refData","columnsMenuParams"],d.ARRAY_PROPERTIES=["children","sortingOrder","allowedAggFuncs","menuTabs","pivotTotalColumnIds","cellClassRules","icons"],d.NUMBER_PROPERTIES=["sortedAt","sortIndex","initialSortIndex","flex","initialFlex","width","initialWidth","minWidth","maxWidth","rowGroupIndex","initialRowGroupIndex","pivotIndex","initialPivotIndex"],d.BOOLEAN_PROPERTIES=["suppressCellFlash","suppressColumnsToolPanel","suppressFiltersToolPanel","openByDefault","marryChildren","hide","initialHide","rowGroup","initialRowGroup","pivot","initialPivot","checkboxSelection","headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","suppressMenu","suppressMovable","lockPosition","lockVisible","lockPinned","unSortIcon","suppressSizeToFit","suppressAutoSize","enableRowGroup","enablePivot","enableValue","editable","suppressPaste","suppressNavigable","enableCellChangeFlash","rowDrag","dndSource","autoHeight","wrapText","sortable","resizable","singleClickEdit","floatingFilter","cellEditorPopup","suppressFillHandle"],d.ALL_PROPERTIES=function(){for(var d=0,i=0,t=arguments.length;i<t;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<t;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s}(d.ARRAY_PROPERTIES,d.OBJECT_PROPERTIES,d.STRING_PROPERTIES,d.NUMBER_PROPERTIES,d.FUNCTION_PROPERTIES=["dndSourceOnRowDrag","valueGetter","valueSetter","filterValueGetter","keyCreator","cellRenderer","cellRendererFramework","pinnedRowCellRenderer","valueFormatter","pinnedRowValueFormatter","valueParser","comparator","equals","pivotComparator","suppressKeyboardEvent","suppressHeaderKeyboardEvent","colSpan","rowSpan","getQuickFilterText","newValueHandler","onCellValueChanged","onCellClicked","onCellDoubleClicked","onCellContextMenu","rowDragText","tooltipValueGetter","tooltipComponent","tooltipComponentFramework","cellRendererSelector","cellEditorSelector"],d.BOOLEAN_PROPERTIES),d.FRAMEWORK_PROPERTIES=["__ob__","__v_skip","__metadata__","mappedColumnProperties","hasChildColumns","toColDef","createColDefFromGridColumn"],d}(),Zc=function(){function d(i,t,s,l){void 0===l&&(l=1),this.r=Math.min(1,Math.max(0,i||0)),this.g=Math.min(1,Math.max(0,t||0)),this.b=Math.min(1,Math.max(0,s||0)),this.a=Math.min(1,Math.max(0,l||0))}return d.fromString=function(i){if(i.indexOf("#")>=0)return d.fromHexString(i);var t=d.nameToHex[i];if(t)return d.fromHexString(t);if(i.indexOf("rgb")>=0)return d.fromRgbaString(i);throw new Error("Invalid color string: '"+i+"'")},d.parseHex=function(i){var t;switch((i=i.replace(/ /g,"").slice(1)).length){case 6:case 8:t=[];for(var s=0;s<i.length;s+=2)t.push(parseInt(""+i[s]+i[s+1],16));break;case 3:case 4:t=i.split("").map(function(l){return parseInt(l,16)}).map(function(l){return l+16*l})}if(t.length>=3&&t.every(function(l){return l>=0}))return 3===t.length&&t.push(255),t},d.fromHexString=function(i){var t=d.parseHex(i);if(t)return new d(t[0]/255,t[1]/255,t[2]/255,t[3]/255);throw new Error("Malformed hexadecimal color string: '"+i+"'")},d.stringToRgba=function(i){for(var t=[NaN,NaN],s=t[0],l=t[1],c=0;c<i.length;c++){var h=i[c];if(s||"("!==h){if(")"===h){l=c;break}}else s=c}var m=s&&l&&i.substring(s+1,l);if(m){var S=m.split(","),R=[];for(c=0;c<S.length;c++){var D=S[c],L=parseFloat(D);if(isNaN(L))return;D.indexOf("%")>=0?(L=Math.max(0,Math.min(100,L)),L/=100):3===c?L=Math.max(0,Math.min(1,L)):(L=Math.max(0,Math.min(255,L)),L/=255),R.push(L)}return R}},d.fromRgbaString=function(i){var t=d.stringToRgba(i);if(t){if(3===t.length)return new d(t[0],t[1],t[2]);if(4===t.length)return new d(t[0],t[1],t[2],t[3])}throw new Error("Malformed rgb/rgba color string: '"+i+"'")},d.fromArray=function(i){if(4===i.length)return new d(i[0],i[1],i[2],i[3]);if(3===i.length)return new d(i[0],i[1],i[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},d.fromHSB=function(i,t,s,l){void 0===l&&(l=1);var c=d.HSBtoRGB(i,t,s);return new d(c[0],c[1],c[2],l)},d.padHex=function(i){return 1===i.length?"0"+i:i},d.prototype.toHexString=function(){var i="#"+d.padHex(Math.round(255*this.r).toString(16))+d.padHex(Math.round(255*this.g).toString(16))+d.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(i+=d.padHex(Math.round(255*this.a).toString(16))),i},d.prototype.toRgbaString=function(i){void 0===i&&(i=3);var t=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],s=Math.pow(10,i);return 1!==this.a?(t.push(Math.round(this.a*s)/s),"rgba("+t.join(", ")+")"):"rgb("+t.join(", ")+")"},d.prototype.toString=function(){return 1===this.a?this.toHexString():this.toRgbaString()},d.prototype.toHSB=function(){return d.RGBtoHSB(this.r,this.g,this.b)},d.RGBtoHSB=function(i,t,s){var l=Math.min(i,t,s),c=Math.max(i,t,s),m=NaN;if(l!==c){var S=c-l,R=(c-i)/S,D=(c-t)/S,L=(c-s)/S;m=i===c?L-D:t===c?2+R-L:4+D-R,(m/=6)<0&&(m+=1)}return[360*m,0!==c?(c-l)/c:0,c]},d.HSBtoRGB=function(i,t,s){isNaN(i)&&(i=0),i=(i%360+360)%360/360;var l=0,c=0,h=0;if(0===t)l=c=h=s;else{var m=6*(i-Math.floor(i)),S=m-Math.floor(m),R=s*(1-t),D=s*(1-t*S),L=s*(1-t*(1-S));switch(m>>0){case 0:l=s,c=L,h=R;break;case 1:l=D,c=s,h=R;break;case 2:l=R,c=s,h=L;break;case 3:l=R,c=D,h=s;break;case 4:l=L,c=R,h=s;break;case 5:l=s,c=R,h=D}}return[l,c,h]},d.prototype.derive=function(i,t,s,l){var c=d.RGBtoHSB(this.r,this.g,this.b),h=c[2];0==h&&s>1&&(h=.05);var m=((c[0]+i)%360+360)%360,S=Math.max(Math.min(c[1]*t,1),0);h=Math.max(Math.min(h*s,1),0);var R=Math.max(Math.min(this.a*l,1),0),D=d.HSBtoRGB(m,S,h);return D.push(R),d.fromArray(D)},d.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},d.prototype.darker=function(){return this.derive(0,1,.7,1)},d.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),d}();var un,I_,Vo,Qc,qf,Yv,$v,Kf,SM=Object.freeze({__proto__:null,stringToArray:function(d,i){void 0===i&&(i=",");var t=[],s=function(K){return"\r"===K||"\n"===K},l=!1;if(""===d)return[[""]];for(var h,m,S,c=function(K,ee,ae){var Te=d[ae-1],Ve=d[ae],We=d[ae+1],Pe=function(){t[K]||(t[K]=[]),t[K][ee]||(t[K][ee]="")};if(Pe(),'"'===Ve){if(l)return'"'===We?(t[K][ee]+='"',ae++):l=!1,h=K,m=ee,S=ae,"continue";if(void 0===Te||Te===i||s(Te))return l=!0,h=K,m=ee,S=ae,"continue"}if(!l){if(Ve===i)return ee++,Pe(),h=K,m=ee,S=ae,"continue";if(s(Ve))return ee=0,K++,Pe(),"\r"===Ve&&"\n"===We&&ae++,h=K,m=ee,S=ae,"continue"}t[K][ee]+=Ve,h=K,m=ee,S=ae},R=0,D=0,L=0;L<d.length;L++)c(R,D,L),R=h,D=m,L=S;return t}});function Ki(){return void 0===I_&&(I_=!!document.documentMode),I_}function Il(){return void 0===Vo&&(Vo=!Ki()&&!!window.StyleMedia),Vo}function ed(){return void 0===un&&(un=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),un}function td(){if(void 0===Qc){var d=window;Qc=!!d.chrome&&(!!d.chrome.webstore||!!d.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Qc}function Qt(){if(void 0===qf){var d=window;qf=void 0!==d.InstallTrigger}return qf}function nu(){return void 0===Yv&&(Yv=(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream),Yv}function Yf(d){if(!d)return null;var i=d.tabIndex,t=d.getAttribute("tabIndex");return Ki()&&0===i&&null===t?!0==={a:!0,body:!0,button:!0,frame:!0,iframe:!0,img:!0,input:!0,isindex:!0,object:!0,select:!0,textarea:!0}[d.nodeName.toLowerCase()]?"0":null:-1!==i||null!==t&&(""!==t||Qt())?i.toString():null}function ys(){if(!document.body)return-1;var d=1e6,i=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,t=document.createElement("div");for(document.body.appendChild(t);;){var s=2*d;if(t.style.height=s+"px",s>i||t.clientHeight!==s)break;d=s}return document.body.removeChild(t),d}function Xv(){return null==Kf&&eE(),Kf}function eE(){var d=document.body,i=document.createElement("div");i.style.width=i.style.height="100px",i.style.opacity="0",i.style.overflow="scroll",i.style.msOverflowStyle="scrollbar",i.style.position="absolute",d.appendChild(i);var t=i.offsetWidth-i.clientWidth;0===t&&0===i.clientWidth&&(t=null),i.parentNode&&i.parentNode.removeChild(i),null!=t&&(Kf=t,$v=0===t)}function _s(){return null==$v&&eE(),$v}function tE(){return document.body?document.body.clientWidth:window.innerHeight?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:-1}function nE(){return document.body?document.body.clientHeight:window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:-1}var $f,La=Object.freeze({__proto__:null,isBrowserIE:Ki,isBrowserEdge:Il,isBrowserSafari:ed,isBrowserChrome:td,isBrowserFirefox:Qt,isIOSUserAgent:nu,getTabIndex:Yf,getMaxDivHeight:ys,getScrollbarWidth:Xv,isInvisibleScrollbar:_s,hasOverflowScrolling:function(){var d=["webkit","moz","o","ms"],i=document.createElement("div"),s=!1;document.getElementsByTagName("body")[0].appendChild(i),i.setAttribute("style",d.map(function(S){return"-"+S+"-overflow-scrolling: touch"}).concat("overflow-scrolling: touch").join(";"));var c=window.getComputedStyle(i);if("touch"===c.overflowScrolling&&(s=!0),!s)for(var h=0,m=d;h<m.length;h++)if("touch"===c[m[h]+"OverflowScrolling"]){s=!0;break}return i.parentNode&&i.parentNode.removeChild(i),s},getBodyWidth:tE,getBodyHeight:nE});function At(d,i){if(d&&i&&0!==i.length){if(i.indexOf(" ")>=0)return void i.split(" ").forEach(function(s){return At(d,s)});if(d.classList)d.classList.add(i);else if(d.className&&d.className.length>0){var t=d.className.split(" ");t.indexOf(i)<0&&(t.push(i),d.setAttribute("class",t.join(" ")))}else d.setAttribute("class",i);return d}}function _i(d,i){if(d&&i&&0!==i.length){if(i.indexOf(" ")>=0)return void i.split(" ").forEach(function(s){return _i(d,s)});if(d.classList)d.classList.remove(i);else if(d.className&&d.className.length>0){var t=d.className.split(" ").filter(function(s){return s!==i}).join(" ");d.setAttribute("class",t)}}}function kt(d,i,t){t?At(d,i):_i(d,i)}function Cs(d,i){if(d.classList)return d.classList.contains(i);if(d.className){var t=d.className===i,s=d.className.indexOf(" "+i+" ")>=0,l=0===d.className.indexOf(i+" "),c=d.className.lastIndexOf(" "+i)===d.className.length-i.length-1;return t||s||l||c}return!1}function rE(d){var i=Element.prototype.matches||Element.prototype.msMatchesSelector,t=i.call(d,fe.INPUT_SELECTOR),s=i.call(d,fe.FOCUSABLE_EXCLUDE),l=kl(d);return t&&!s&&l}function Xn(d,i){kt(d,"ag-hidden",!i)}function ir(d,i){kt(d,"ag-invisible",!i)}function ws(d,i){var t="disabled",s=i?function(l){return l.setAttribute(t,"")}:function(l){return l.removeAttribute(t)};s(d),ou(d.querySelectorAll("input"),function(l){return s(l)})}function Ll(d,i,t){for(var s=0;d;){if(Cs(d,i))return!0;if(d=d.parentElement,t&&++s>t)break}return!1}function Bu(d){var i=window.getComputedStyle(d),s=i.width,l=i.paddingTop,c=i.paddingRight,h=i.paddingBottom,m=i.paddingLeft,S=i.marginTop,R=i.marginRight,D=i.marginBottom,L=i.marginLeft,U=i.boxSizing;return{height:parseFloat(i.height),width:parseFloat(s),paddingTop:parseFloat(l),paddingRight:parseFloat(c),paddingBottom:parseFloat(h),paddingLeft:parseFloat(m),marginTop:parseFloat(S),marginRight:parseFloat(R),marginBottom:parseFloat(D),marginLeft:parseFloat(L),boxSizing:U}}function Fl(d){var i=Bu(d);return"border-box"===i.boxSizing?i.height-i.paddingTop-i.paddingBottom:i.height}function Wo(d){var i=Bu(d);return"border-box"===i.boxSizing?i.width-i.paddingLeft-i.paddingRight:i.width}function Hu(d){var i=Bu(d);return Math.ceil(d.offsetHeight+(i.marginBottom+i.marginTop))}function Xf(d){var i=Bu(d);return Math.ceil(d.offsetWidth+(i.marginLeft+i.marginRight))}function Er(){if("boolean"==typeof $f)return $f;var d=document.createElement("div");return d.style.direction="rtl",d.style.width="1px",d.style.height="1px",d.style.position="fixed",d.style.top="0px",d.style.overflow="hidden",d.dir="rtl",d.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(d),d.scrollLeft=1,$f=0===Math.floor(d.scrollLeft),document.body.removeChild(d),$f}function nd(d,i){var t=d.scrollLeft;return i&&(t=Math.abs(t),td()&&!Er()&&(t=d.scrollWidth-d.clientWidth-t)),t}function rd(d,i,t){t&&(Er()?i*=-1:(ed()||td())&&(i=d.scrollWidth-d.clientWidth-i)),d.scrollLeft=i}function co(d){for(;d&&d.firstChild;)d.removeChild(d.firstChild)}function Ci(d){d&&d.parentNode&&d.parentNode.removeChild(d)}function kl(d){return null!==d.offsetParent}function ca(d){var i=document.createElement("div");return i.innerHTML=(d||"").trim(),i.firstChild}function si(d){return d&&d.clientHeight?d.clientHeight:0}function Fa(d){return d&&d.clientWidth?d.clientWidth:0}function Ss(d,i,t){t&&t.nextSibling===i||(t?t.nextSibling?d.insertBefore(i,t.nextSibling):d.appendChild(i):d.firstChild&&d.firstChild!==i&&d.insertAdjacentElement("afterbegin",i))}function po(d,i){for(var t=0;t<i.length;t++){var s=i[t],l=d.children[t];l!==s&&d.insertBefore(s,l)}}function id(d,i,t){t?t.insertAdjacentElement("afterend",i):d.firstChild?d.insertAdjacentElement("afterbegin",i):d.appendChild(i)}function Vu(d,i){!i||Object.keys(i).forEach(function(t){var s=Vv(t);s&&(d.style[s]=i[t])})}function Nl(d){return d.clientWidth<d.scrollWidth}function ru(d){return d.clientHeight<d.scrollHeight}function Vr(d,i){"flex"===i?(d.style.removeProperty("width"),d.style.removeProperty("minWidth"),d.style.removeProperty("maxWidth"),d.style.flex="1 1 auto"):ka(d,i)}function ka(d,i){i=wn(i),d.style.width=i.toString(),d.style.maxWidth=i.toString(),d.style.minWidth=i.toString()}function lt(d,i){i=wn(i),d.style.height=i.toString(),d.style.maxHeight=i.toString(),d.style.minHeight=i.toString()}function wn(d){return"number"==typeof d?d+"px":d}function hr(d){return"function"==typeof Node?d instanceof Node:d&&"object"==typeof d&&"number"==typeof d.nodeType&&"string"==typeof d.nodeName}function ho(d){return"function"==typeof HTMLElement?d instanceof HTMLElement:d&&Ol(d)&&1===d.nodeType&&"string"==typeof d.nodeName}function Na(d){return hr(d)||ho(d)}function Zr(d){if(null==d)return[];var i=[];return ou(d,function(t){return i.push(t)}),i}function iu(d,i){if(d)for(var t=0;t<d.length;t++){var s=d[t];i(s.name,s.value)}}function bs(d,i,t){null==t?d.removeAttribute(i):d.setAttribute(i,t.toString())}function ou(d,i){if(null!=d)for(var t=0;t<d.length;t++)i(d[t])}var yn=Object.freeze({__proto__:null,addCssClass:At,removeCssClass:_i,addOrRemoveCssClass:kt,radioCssClass:function(d,i,t){for(var s=d.parentElement,l=s&&s.firstChild;l;)i&&kt(l,i,l===d),t&&kt(l,t,l!==d),l=l.nextSibling},containsClass:Cs,isFocusableFormField:rE,setDisplayed:Xn,setVisible:ir,setDisabled:ws,isElementChildOfClass:Ll,getElementSize:Bu,getInnerHeight:Fl,getInnerWidth:Wo,getAbsoluteHeight:Hu,getAbsoluteWidth:Xf,isRtlNegativeScroll:Er,getScrollLeft:nd,setScrollLeft:rd,clearElement:co,removeElement:function(d,i){Ci(d.querySelector(i))},removeFromParent:Ci,isVisible:kl,loadTemplate:ca,appendHtml:function(d,i){d.lastChild?d.insertAdjacentHTML("afterbegin",i):d.innerHTML=i},getElementAttribute:function(d,i){return d.attributes&&d.attributes[i]?d.attributes[i].value:null},offsetHeight:si,offsetWidth:Fa,ensureDomOrder:Ss,setDomChildOrder:po,insertWithDomOrder:id,prependDC:function(d,i){Fe(d.firstChild)?d.insertBefore(i,d.firstChild):d.appendChild(i)},addStylesToElement:Vu,isHorizontalScrollShowing:Nl,isVerticalScrollShowing:ru,setElementWidth:Vr,setFixedWidth:ka,setElementHeight:function(d,i){"flex"===i?(d.style.removeProperty("height"),d.style.removeProperty("minHeight"),d.style.removeProperty("maxHeight"),d.style.flex="1 1 auto"):lt(d,i)},setFixedHeight:lt,formatSize:wn,isNode:hr,isElement:ho,isNodeOrElement:Na,copyNodeList:Zr,iterateNamedNodeMap:iu,setCheckboxState:function(d,i){"boolean"==typeof i?(d.checked=i,d.indeterminate=!1):d.indeterminate=!0},addOrRemoveAttribute:bs,nodeListForEach:ou}),od=Object.freeze({__proto__:null,getNameOfClass:function(d){var t=d.toString(),s=/function (.{1,})\(/.exec(t);return s&&s.length>1?s[1]:""},findLineByLeastSquares:function(d){var i=d.length,t=0;if(i<=1)return d;for(var s=0;s<d.length;s++){var l=d[s],c=l.toString().split("e-");c.length>1?t=Math.max(t,parseInt(c[1],10)):Math.floor(l)!==l&&(t=Math.max(t,l.toString().split(".")[1].length))}for(var h=0,m=0,S=0,R=0,D=0,L=0;L<i;L++)h+=L,m+=D=d[L],R+=L*L,S+=L*D;var U=(i*S-h*m)/(i*R-h*h),K=m/i-U*h/i,ee=[];for(L=0;L<=i;L++)ee.push(parseFloat((L*U+K).toFixed(t)));return ee},cssStyleObjectToMarkup:function(d){if(!d)return"";var i=[];return Nn(d,function(t,s){var l=M_(t);i.push(l+": "+s+";")}),i.join(" ")},message:function(d){var i=document.createElement("div"),t=document.querySelector("#__ag__message");i.innerHTML=d,t||(t=ca('<div id="__ag__message" style="display: inline-block; position: absolute; top: 0px; left: 0px; color: white; background-color: black; z-index: 20; padding: 2px; border: 1px solid darkred; height: 200px; overflow-y: auto;"></div>'),document.body&&document.body.appendChild(t)),t.insertBefore(i,t.children[0])},bindCellRendererToHtmlElement:function(d,i){d.then(function(t){var s=t.getGui();null!=s&&("object"==typeof s?i.appendChild(s):i.innerHTML=s)})}});function Tr(d,i,t){d.setAttribute(ur(i),t.toString())}function Bi(d,i){d.removeAttribute(ur(i))}function ur(d){return"aria-"+d}function Yi(d,i){i?d.setAttribute("role",i):d.removeAttribute("role")}function F_(d){return d.isSortAscending()?"ascending":d.isSortDescending()?"descending":"none"}function zo(d){return parseInt(d.getAttribute("aria-posinset"),10)}function Ba(d,i){var t="label";i?Tr(d,t,i):Bi(d,t)}function Hl(d,i){var t="labelledby";i?Tr(d,t,i):Bi(d,t)}function go(d,i){var t="describedby";i?Tr(d,t,i):Bi(d,t)}function Zf(d,i){Tr(d,"disabled",i)}function Qf(d,i){Tr(d,"expanded",i)}function aE(d,i){Tr(d,"setsize",i)}function sE(d,i){Tr(d,"posinset",i)}function uE(d,i){Tr(d,"multiselectable",i)}function lE(d,i){Tr(d,"rowcount",i)}function k_(d,i){Tr(d,"rowindex",i)}function cE(d,i){Tr(d,"colcount",i)}function N_(d,i){Tr(d,"colindex",i)}function dE(d,i){Tr(d,"colspan",i)}function fE(d,i){Tr(d,"sort",i)}function pE(d){Bi(d,"sort")}function ad(d,i){var t="selected";i?Tr(d,t,i):Bi(d,t)}function hE(d,i){Tr(d,"checked",void 0===i?"mixed":i)}var bM=Object.freeze({__proto__:null,setAriaRole:Yi,getAriaSortState:F_,getAriaLevel:function(d){return parseInt(d.getAttribute("aria-level"),10)},getAriaPosInSet:zo,getAriaDescribedBy:function(d){return d.getAttribute("aria-describedby")||""},setAriaLabel:Ba,setAriaLabelledBy:Hl,setAriaDescribedBy:go,setAriaLevel:function(d,i){Tr(d,"level",i)},setAriaDisabled:Zf,setAriaExpanded:Qf,removeAriaExpanded:function(d){Bi(d,"expanded")},setAriaSetSize:aE,setAriaPosInSet:sE,setAriaMultiSelectable:uE,setAriaRowCount:lE,setAriaRowIndex:k_,setAriaColCount:cE,setAriaColIndex:N_,setAriaColSpan:dE,setAriaSort:fE,removeAriaSort:pE,setAriaSelected:ad,setAriaChecked:hE});function Wu(d,i,t){if(void 0===i&&(i=!0),void 0===t&&(t="-"),!d)return null;var s=[d.getFullYear(),d.getMonth()+1,d.getDate()].map(function(l){return zf(l,2)}).join(t);return i&&(s+=" "+[d.getHours(),d.getMinutes(),d.getSeconds()].map(function(l){return zf(l,2)}).join(":")),s}function Es(d){if(!d)return null;var i=d.split(" "),t=i[0],s=i[1];if(!t)return null;var l=t.split("-").map(function(K){return parseInt(K,10)});if(3!==l.filter(function(K){return!isNaN(K)}).length)return null;var c=l[0],h=l[1],m=l[2],S=new Date(c,h-1,m);if(S.getFullYear()!==c||S.getMonth()!==h-1||S.getDate()!==m)return null;if(!s||"00:00:00"===s)return S;var R=s.split(":").map(function(K){return parseInt(K,10)}),D=R[0],L=R[1],U=R[2];return D>=0&&D<24&&S.setHours(D),L>=0&&L<60&&S.setMinutes(L),U>=0&&U<60&&S.setSeconds(U),S}var eg=Object.freeze({__proto__:null,serialiseDate:Wu,parseDateTimeFromString:Es});function vE(d,i,t){var s={},l=d.filter(function(c){return!i.some(function(h){return h===c})});return l.length>0&&l.forEach(function(c){return s[c]=gE(c,t)}),s}function gE(d,i,t,s){var l=s?B_:au,c=i.map(function(h){return{value:h,relevance:l(d.toLowerCase(),h.toLocaleLowerCase())}});return c.sort(function(h,m){return m.relevance-h.relevance}),t&&(c=c.filter(function(h){return 0!==h.relevance})),c.map(function(h){return h.value})}function G_(d){var s,l,c,i=d.toLowerCase(),t=new Array(i.length-1);for(s=l=0,c=t.length;l<=c;s=l+=1)t[s]=i.slice(s,s+2);return t}function au(d,i){if(0===d.length&&0===i.length)return 0;var h,m,t=G_(d),s=G_(i),l=t.length+s.length,c=0;for(h=0,m=t.length;h<m;h++){var D,S=t[h],R=void 0;for(R=0,D=s.length;R<D;R++)S===s[R]&&c++}return c>0?2*c/l:0}function B_(d,i){for(var t=d.replace(/\s/g,""),s=i.replace(/\s/g,""),l=0,c=0,h=0;h<t.length;h++){var m=s.indexOf(t[h],c);-1!==m&&(l+=100-100*(c=m)/1e4*100)}return l}var jo=Object.freeze({__proto__:null,fuzzyCheckStrings:vE,fuzzySuggestions:gE,get_bigrams:G_,string_distances:au,string_weighted_distances:B_}),tg={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"};function qo(d,i,t){var s=ui(d,i,t);if(s&&s.className.indexOf("ag-icon")>-1)return s;var l=document.createElement("span");return l.appendChild(s),l}function ui(d,i,t,s){var l=null,c=t&&t.getColDef().icons;if(c&&(l=c[d]),i&&!l){var h=i.getIcons();h&&(l=h[d])}if(!l){var S=document.createElement("span"),R=tg[d];return R||(s?R=d:(console.warn("AG Grid: Did not find icon "+d),R="")),S.setAttribute("class","ag-icon ag-icon-"+R),S.setAttribute("unselectable","on"),Yi(S,"presentation"),S}var m=void 0;if("function"==typeof l)m=l();else{if("string"!=typeof l)throw new Error("icon from grid options needs to be a string or a function");m=l}return"string"==typeof m?ca(m):Na(m)?m:void console.warn("AG Grid: iconRenderer should return back a string or a dom object")}var H_=Object.freeze({__proto__:null,iconNameClassMap:tg,createIcon:qo,createIconNoSpan:ui});function sd(d,i){return(d.which||d.keyCode)===i}function W_(d){if(d.altKey||d.ctrlKey||d.metaKey)return!1;var i=1===d.key.length,t=function(d){return(Il()||Ki())&&"Del"===d.key&&46===d.charCode}(d);return i||t}function $i(d,i,t,s,l){var c=d.getSuppressKeyboardEventFunc(),h=s?s.getColDef().suppressKeyboardEvent:void 0;if(!c&&!h)return!1;var m={event:i,editing:l,column:s,api:d.getApi(),node:t,data:t.data,colDef:s.getColDef(),context:d.getContext(),columnApi:d.getColumnApi()};return!(!h||!h(m))||!!c&&c(m)}function ng(d,i,t,s){var l=s.getDefinition(),c=l&&l.suppressHeaderKeyboardEvent;return!!Fe(c)&&!!c({api:d.getApi(),columnApi:d.getColumnApi(),context:d.getContext(),colDef:l,column:s,headerRowIndex:t,event:i})}var rg=Object.freeze({__proto__:null,isKeyPressed:sd,isEventFromPrintableCharacter:W_,isUserSuppressingKeyboardEvent:$i,isUserSuppressingHeaderKeyboardEvent:ng});function z_(d,i,t){if(0===t)return!1;var s=Math.abs(d.clientX-i.clientX),l=Math.abs(d.clientY-i.clientY);return Math.max(s,l)<=t}var Dr=Object.freeze({__proto__:null,normalizeWheel:function(d){var l=0,c=0,h=0,m=0;return"detail"in d&&(c=d.detail),"wheelDelta"in d&&(c=-d.wheelDelta/120),"wheelDeltaY"in d&&(c=-d.wheelDeltaY/120),"wheelDeltaX"in d&&(l=-d.wheelDeltaX/120),"axis"in d&&d.axis===d.HORIZONTAL_AXIS&&(l=c,c=0),h=10*l,m=10*c,"deltaY"in d&&(m=d.deltaY),"deltaX"in d&&(h=d.deltaX),(h||m)&&d.deltaMode&&(1==d.deltaMode?(h*=40,m*=40):(h*=800,m*=800)),h&&!l&&(l=h<1?-1:1),m&&!c&&(c=m<1?-1:1),{spinX:l,spinY:c,pixelX:h,pixelY:m}},isLeftClick:function(d){return"buttons"in d?1==d.buttons:1==(d.which||d.button)},areEventsNear:z_}),Wr=Object.freeze({__proto__:null,sortRowNodesByOrder:function(d,i){if(d){for(var t=function(S,R){var D=i[S.id],L=i[R.id],U=void 0!==D,K=void 0!==L;return U&&K?D-L:U||K?U?1:-1:S.__objectId-R.__objectId},c=!1,h=0;h<d.length-1;h++)if(t(d[h],d[h+1])>0){c=!0;break}c&&d.sort(t)}},traverseNodesWithKey:function(d,i){var t=[];!function s(l){!l||l.forEach(function(c){if(c.group||c.hasChildren()){t.push(c.key);var h=t.join("|");i(c,h),s(c.childrenAfterGroup),t.pop()}})}(d)}});function og(d){var i=new Set;return d.forEach(function(t){return i.add(t)}),i}var EM=Object.freeze({__proto__:null,convertToSet:og}),vr=function(){return vr=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},vr.apply(this,arguments)},yt=vr(vr(vr(vr(vr(vr(vr(vr(vr(vr(vr(vr(vr(vr(vr(vr(vr(vr(vr(vr({},od),bM),ps),La),SM),eg),yn),Jc),y_),jo),Zs),H_),rg),zv),Dr),yM),vs),Wr),EM),Uf),xs=function(){function d(i,t){void 0===i&&(i=0),void 0===t&&(t=1),this.nextValue=i,this.step=t}return d.prototype.next=function(){var i=this.nextValue;return this.nextValue+=this.step,i},d.prototype.peek=function(){return this.nextValue},d.prototype.skip=function(i){this.nextValue+=i},d}();!function(d){d[d.IN_PROGRESS=0]="IN_PROGRESS",d[d.RESOLVED=1]="RESOLVED"}(Y.Ws0||(Y.Ws0={}));var Qr=function(){function d(i){var t=this;this.status=Y.Ws0.IN_PROGRESS,this.resolution=null,this.waiters=[],i(function(s){return t.onDone(s)},function(s){return t.onReject(s)})}return d.all=function(i){return new d(function(t){var s=i.length,l=new Array(s);Ut(i,function(c,h){c.then(function(m){l[h]=m,0==--s&&t(l)})})})},d.resolve=function(i){return void 0===i&&(i=null),new d(function(t){return t(i)})},d.prototype.then=function(i){var t=this;return new d(function(s){t.status===Y.Ws0.RESOLVED?s(i(t.resolution)):t.waiters.push(function(l){return s(i(l))})})},d.prototype.resolveNow=function(i,t){return this.status===Y.Ws0.RESOLVED?t(this.resolution):i},d.prototype.onDone=function(i){this.status=Y.Ws0.RESOLVED,this.resolution=i,Ut(this.waiters,function(t){return t(i)})},d.prototype.onReject=function(i){console.warn("TBI")},d}(),q_=(function(){function d(){this.timestamp=(new Date).getTime()}d.prototype.print=function(i){var t=(new Date).getTime()-this.timestamp;console.info(i+" = "+t),this.timestamp=(new Date).getTime()}}(),function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}()),ud=function(){return ud=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},ud.apply(this,arguments)},ld=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},ei=function(){return function(d){d[d.NOTHING=0]="NOTHING",d[d.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",d[d.SHOWING=2]="SHOWING"}(ei||(ei={})),ei}(),ep=function(d){function i(t){var s=d.call(this)||this;return s.DEFAULT_HIDE_TOOLTIP_TIMEOUT=1e4,s.SHOW_QUICK_TOOLTIP_DIFF=1e3,s.FADE_OUT_TOOLTIP_TIMEOUT=1e3,s.state=ei.NOTHING,s.tooltipInstanceCount=0,s.tooltipMouseTrack=!1,s.parentComp=t,s}return q_(i,d),i.prototype.postConstruct=function(){this.tooltipShowDelay=this.gridOptionsWrapper.getTooltipShowDelay()||2e3,this.tooltipMouseTrack=this.gridOptionsWrapper.isTooltipMouseTrack();var t=this.parentComp.getGui();this.addManagedListener(t,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(t,"mouseleave",this.onMouseLeave.bind(this)),this.addManagedListener(t,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(t,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(t,"keydown",this.onKeyDown.bind(this))},i.prototype.destroy=function(){this.setToDoNothing(),d.prototype.destroy.call(this)},i.prototype.onMouseEnter=function(t){if(!nu()&&this.state==ei.NOTHING){var s=this.isLastTooltipHiddenRecently()?200:this.tooltipShowDelay;this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),s),this.lastMouseEvent=t,this.state=ei.WAITING_TO_SHOW}},i.prototype.onMouseLeave=function(){this.setToDoNothing()},i.prototype.onKeyDown=function(){this.setToDoNothing()},i.prototype.setToDoNothing=function(){this.state===ei.SHOWING&&this.hideTooltip(),this.clearTimeouts(),this.state=ei.NOTHING},i.prototype.onMouseMove=function(t){this.lastMouseEvent=t,this.tooltipMouseTrack&&this.state===ei.SHOWING&&this.tooltipComp&&this.positionTooltipUnderLastMouseEvent()},i.prototype.onMouseDown=function(){this.setToDoNothing()},i.prototype.hideTooltip=function(){this.tooltipComp&&(this.destroyTooltipComp(),i.lastTooltipHideTime=(new Date).getTime()),this.state=ei.NOTHING},i.prototype.destroyTooltipComp=function(){var t=this;At(this.tooltipComp.getGui(),"ag-tooltip-hiding");var s=this.tooltipPopupDestroyFunc,l=this.tooltipComp;window.setTimeout(function(){s(),t.getContext().destroyBean(l)},this.FADE_OUT_TOOLTIP_TIMEOUT),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0},i.prototype.isLastTooltipHiddenRecently=function(){return(new Date).getTime()-i.lastTooltipHideTime<this.SHOW_QUICK_TOOLTIP_DIFF},i.prototype.showTooltip=function(){var t=ud({api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()},this.parentComp.getTooltipParams());if(Fe(t.value)){this.state=ei.SHOWING,this.tooltipInstanceCount++;var s=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(s)}else this.setToDoNothing()},i.prototype.newTooltipComponentCallback=function(t,s){if(this.state!==ei.SHOWING||this.tooltipInstanceCount!==t)this.getContext().destroyBean(s);else{var c=s.getGui();this.tooltipComp=s,Cs(c,"ag-tooltip")||At(c,"ag-tooltip-custom"),this.gridOptionsWrapper.isReactUi()&&At(c,"ag-tooltip-reactui");var h=this.gridOptionsWrapper.getLocaleTextFunc(),m=this.popupService.addPopup({eChild:c,ariaLabel:h("ariaLabelTooltip","Tooltip")});m&&(this.tooltipPopupDestroyFunc=m.hideFunc),this.positionTooltipUnderLastMouseEvent(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.DEFAULT_HIDE_TOOLTIP_TIMEOUT)}},i.prototype.positionTooltipUnderLastMouseEvent=function(){this.popupService.positionPopupUnderMouseEvent({type:"tooltip",mouseEvent:this.lastMouseEvent,ePopup:this.tooltipComp.getGui(),nudgeY:18})},i.prototype.clearTimeouts=function(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0),this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)},ld([H("popupService")],i.prototype,"popupService",void 0),ld([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),ld([H("columnApi")],i.prototype,"columnApi",void 0),ld([H("gridApi")],i.prototype,"gridApi",void 0),ld([et],i.prototype,"postConstruct",null),i}(Ye),ag=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),jt=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},xM=new xs,hn=function(d){function i(t){var s=d.call(this)||this;return s.displayed=!0,s.visible=!0,s.compId=xM.next(),s.cssClassStates={},t&&s.setTemplate(t),s}return ag(i,d),i.prototype.preConstructOnComponent=function(){this.usingBrowserTooltips=this.gridOptionsWrapper.isEnableBrowserTooltips()},i.prototype.getCompId=function(){return this.compId},i.prototype.getTooltipParams=function(){return{value:this.tooltipText,location:"UNKNOWN"}},i.prototype.setTooltip=function(t){var s=this;this.tooltipText!=t&&(this.tooltipText&&(s.usingBrowserTooltips?s.getGui().removeAttribute("title"):s.tooltipFeature=s.destroyBean(s.tooltipFeature)),null!=t&&(this.tooltipText=t,this.tooltipText&&(s.usingBrowserTooltips?s.getGui().setAttribute("title",s.tooltipText):s.tooltipFeature=s.createBean(new ep(s)))))},i.prototype.createChildComponentsFromTags=function(t,s){var l=this;Ut(Zr(t.childNodes),function(h){if(h instanceof HTMLElement){var m=l.createComponentFromElement(h,function(R){R.getGui()&&l.copyAttributesFromNode(h,R.getGui())},s);if(m){if(m.addItems&&h.children.length){l.createChildComponentsFromTags(h,s);var S=Array.prototype.slice.call(h.children);m.addItems(S)}l.swapComponentForNode(m,t,h)}else h.childNodes&&l.createChildComponentsFromTags(h,s)}})},i.prototype.createComponentFromElement=function(t,s,l){var c=t.nodeName,h=l?l[t.getAttribute("ref")]:void 0,m=this.agStackComponentsRegistry.getComponentClass(c);if(m){i.elementGettingCreated=t;var S=new m(h);return S.setParentComponent(this),this.createBean(S,null,s),S}return null},i.prototype.copyAttributesFromNode=function(t,s){iu(t.attributes,function(l,c){return s.setAttribute(l,c)})},i.prototype.swapComponentForNode=function(t,s,l){var c=t.getGui();s.replaceChild(c,l),s.insertBefore(document.createComment(l.nodeName),c),this.addDestroyFunc(this.destroyBean.bind(this,t)),this.swapInComponentForQuerySelectors(t,l)},i.prototype.swapInComponentForQuerySelectors=function(t,s){var l=this;this.iterateOverQuerySelectors(function(c){l[c.attributeName]===s&&(l[c.attributeName]=t)})},i.prototype.iterateOverQuerySelectors=function(t){for(var s=Object.getPrototypeOf(this);null!=s;){var l=s.__agComponentMetaData,c=$n(s.constructor);l&&l[c]&&l[c].querySelectors&&Ut(l[c].querySelectors,function(h){return t(h)}),s=Object.getPrototypeOf(s)}},i.prototype.setTemplate=function(t,s){var l=ca(t);this.setTemplateFromElement(l,s)},i.prototype.setTemplateFromElement=function(t,s){this.eGui=t,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),s)},i.prototype.createChildComponentsPreConstruct=function(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())},i.prototype.wireQuerySelectors=function(){var t=this;if(this.eGui){var s=this;this.iterateOverQuerySelectors(function(l){var c=function(R){return s[l.attributeName]=R};if(l.refSelector&&t.eGui.getAttribute("ref")===l.refSelector)c(t.eGui);else{var m=t.eGui.querySelector(l.querySelector);m&&c(m.__agComponent||m)}})}},i.prototype.getGui=function(){return this.eGui},i.prototype.getFocusableElement=function(){return this.eGui},i.prototype.setParentComponent=function(t){this.parentComponent=t},i.prototype.getParentComponent=function(){return this.parentComponent},i.prototype.setGui=function(t){this.eGui=t},i.prototype.queryForHtmlElement=function(t){return this.eGui.querySelector(t)},i.prototype.queryForHtmlInputElement=function(t){return this.eGui.querySelector(t)},i.prototype.appendChild=function(t,s){if(s||(s=this.eGui),null!=t)if(Na(t))s.appendChild(t);else{var l=t;s.appendChild(l.getGui()),this.addDestroyFunc(this.destroyBean.bind(this,l))}},i.prototype.isDisplayed=function(){return this.displayed},i.prototype.setVisible=function(t){t!==this.visible&&(this.visible=t,ir(this.eGui,t))},i.prototype.setDisplayed=function(t){t!==this.displayed&&(this.displayed=t,Xn(this.eGui,t),this.dispatchEvent({type:i.EVENT_DISPLAYED_CHANGED,visible:this.displayed}))},i.prototype.destroy=function(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),d.prototype.destroy.call(this)},i.prototype.addGuiEventListener=function(t,s){var l=this;this.eGui.addEventListener(t,s),this.addDestroyFunc(function(){return l.eGui.removeEventListener(t,s)})},i.prototype.addCssClass=function(t){!0!==this.cssClassStates[t]&&(At(this.eGui,t),this.cssClassStates[t]=!0)},i.prototype.removeCssClass=function(t){!1!==this.cssClassStates[t]&&(_i(this.eGui,t),this.cssClassStates[t]=!1)},i.prototype.addOrRemoveCssClass=function(t,s){this.cssClassStates[t]!==s&&(kt(this.eGui,t,s),this.cssClassStates[t]=s)},i.prototype.getAttribute=function(t){var s=this.eGui;return s?s.getAttribute(t):null},i.prototype.getRefElement=function(t){return this.queryForHtmlElement('[ref="'+t+'"]')},i.EVENT_DISPLAYED_CHANGED="displayedChanged",jt([H("agStackComponentsRegistry")],i.prototype,"agStackComponentsRegistry",void 0),jt([Pv],i.prototype,"preConstructOnComponent",null),jt([Pv],i.prototype,"createChildComponentsPreConstruct",null),i}(Ye);function He(d){return sg.bind(this,"[ref="+d+"]",d)}function sg(d,i,t,s,l){null!==d?"number"!=typeof l?function(d,i,t){var s=function(d,i){return d.__agComponentMetaData||(d.__agComponentMetaData={}),d.__agComponentMetaData[i]||(d.__agComponentMetaData[i]={}),d.__agComponentMetaData[i]}(d,$n(d.constructor));s[i]||(s[i]=[]),s[i].push(t)}(t,"querySelectors",{attributeName:s,querySelector:d,refSelector:i}):console.error("AG Grid: QuerySelector should be on an attribute"):console.error("AG Grid: QuerySelector selector should not be null")}var Ke=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Bn=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},lr=function(d){function i(){return d.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this}return Ke(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(t){this.params=t;var s=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),l=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(s+" "+l("ariaFilterInput","Filter Input"))},i.prototype.onParentModelChanged=function(t){var s=this;t?this.params.parentFilterInstance(function(l){if(l.getModelAsString){var c=l.getModelAsString(t);s.eFloatingFilterText.setValue(c)}}):this.eFloatingFilterText.setValue("")},Bn([He("eFloatingFilterText")],i.prototype,"eFloatingFilterText",void 0),Bn([H("columnModel")],i.prototype,"columnModel",void 0),i}(hn),Ur=function(){function d(i,t,s,l){var c=this;this.alive=!0,this.context=i,this.eParent=l,t.getDateCompDetails(s).newAgStackInstance().then(function(S){c.alive?(c.dateComp=S,S&&(l.appendChild(S.getGui()),S.afterGuiAttached&&S.afterGuiAttached(),c.tempValue&&S.setDate(c.tempValue),null!=c.disabled&&c.setDateCompDisabled(c.disabled))):i.destroyBean(S)})}return d.prototype.destroy=function(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)},d.prototype.getDate=function(){return this.dateComp?this.dateComp.getDate():this.tempValue},d.prototype.setDate=function(i){this.dateComp?this.dateComp.setDate(i):this.tempValue=i},d.prototype.setDisabled=function(i){this.dateComp?this.setDateCompDisabled(i):this.disabled=i},d.prototype.setDisplayed=function(i){Xn(this.eParent,i)},d.prototype.setInputPlaceholder=function(i){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(i)},d.prototype.setInputAriaLabel=function(i){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(i)},d.prototype.afterGuiAttached=function(i){this.dateComp&&"function"==typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(i)},d.prototype.setDateCompDisabled=function(i){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(i)},d}(),tp=function(){return tp=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},tp.apply(this,arguments)},Vl=function(){function d(){this.customFilterOptions={}}return d.prototype.init=function(i,t){this.filterOptions=i.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(i),this.checkForDeprecatedParams()},d.prototype.checkForDeprecatedParams=function(){yt.some(this.filterOptions,function(i){return"string"!=typeof i&&null!=i.test})&&console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, test() has been replaced with predicate()."),yt.some(this.filterOptions,function(i){return"string"!=typeof i&&null!=i.hideFilterInput})&&console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, useOfHideFilterInput has been replaced with numberOfInputs.")},d.prototype.getFilterOptions=function(){return this.filterOptions},d.prototype.mapCustomOptions=function(){var i=this;!this.filterOptions||this.filterOptions.forEach(function(t){if("string"!=typeof t){if(!nn([["displayKey"],["displayName"],["predicate","test"]],function(S){return!!$t(S,function(R){return null!=t[R]})||(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '"+S+"'"),!1)}))return void(i.filterOptions=yt.filter(i.filterOptions,function(m){return m===t})||[]);var c=t.test,h=tp({},t);null!=c&&null==t.predicate&&(h.predicate=function(m,S){return c(m[0],S)},delete h.test),h.hideFilterInput&&null==h.numberOfInputs&&(h.numberOfInputs=0,delete h.hideFilterInput),i.customFilterOptions[t.displayKey]=h}})},d.prototype.selectDefaultItem=function(i){if(i.defaultOption)this.defaultOption=i.defaultOption;else if(this.filterOptions.length>=1){var t=this.filterOptions[0];"string"==typeof t?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")},d.prototype.getDefaultOption=function(){return this.defaultOption},d.prototype.getCustomOption=function(i){return this.customFilterOptions[i]},d}(),Ha={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose One",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},Xe=function(){function d(){}return d.BACKSPACE=8,d.TAB=9,d.ENTER=13,d.SHIFT=16,d.ESCAPE=27,d.SPACE=32,d.LEFT=37,d.UP=38,d.RIGHT=39,d.DOWN=40,d.DELETE=46,d.A=65,d.C=67,d.V=86,d.D=68,d.Z=90,d.Y=89,d.F2=113,d.PAGE_UP=33,d.PAGE_DOWN=34,d.PAGE_HOME=36,d.PAGE_END=35,d}(),ug=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),K_=function(){return K_=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},K_.apply(this,arguments)},Y_=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Yo=function(d){function i(t,s){void 0===s&&(s={});var l=d.call(this)||this;return l.eFocusableElement=t,l.callbacks=s,l.callbacks=K_({shouldStopEventPropagation:function(){return!1},onTabKeyDown:function(h){if(!h.defaultPrevented){var m=l.focusService.findNextFocusableElement(l.eFocusableElement,!1,h.shiftKey);!m||(m.focus(),h.preventDefault())}}},s),l}return ug(i,d),i.prototype.postConstruct=function(){At(this.eFocusableElement,i.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)},i.prototype.addKeyDownListeners=function(t){var s=this;this.addManagedListener(t,"keydown",function(l){if(!l.defaultPrevented&&!Oa(l)){if(s.callbacks.shouldStopEventPropagation(l))return void lo(l);l.keyCode===Xe.TAB?s.callbacks.onTabKeyDown(l):s.callbacks.handleKeyDown&&s.callbacks.handleKeyDown(l)}})},i.FOCUS_MANAGED_CLASS="ag-focus-managed",Y_([H("focusService")],i.prototype,"focusService",void 0),Y_([et],i.prototype,"postConstruct",null),i}(Ye),np=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Hi=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},To=function(d){function i(t){var s=d.call(this)||this;return s.filterNameKey=t,s.applyActive=!1,s.hidePopup=null,s.appliedModel=null,s}return np(i,d),i.prototype.postConstruct=function(){this.resetTemplate(),this.createManagedBean(new Yo(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)}))},i.prototype.handleKeyDown=function(t){},i.prototype.getFilterTitle=function(){return this.translate(this.filterNameKey)},i.prototype.onFilterChanged=function(){console.warn("AG Grid: you should not call onFilterChanged() directly on the filter, please call\n        gridApi.onFilterChanged() instead. onFilterChanged is not part of the exposed filter interface (it was\n        a method that existed on an old version of the filters that was not intended for public use."),this.providedFilterParams.filterChangedCallback()},i.prototype.isFilterActive=function(){return!!this.appliedModel},i.prototype.resetTemplate=function(t){var s='\n            <div class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-'+this.getCssIdentifier()+'-body-wrapper">\n                    '+this.createBodyTemplate()+"\n                </div>\n            </div>";this.setTemplate(s,t)},i.prototype.isReadOnly=function(){return!!this.providedFilterParams.readOnly},i.prototype.init=function(t){var s=this;this.setParams(t),this.resetUiToDefaults(!0).then(function(){s.updateUiVisibility(),s.setupOnBtApplyDebounce()})},i.prototype.setParams=function(t){i.checkForDeprecatedParams(t),this.providedFilterParams=t,this.newRowsActionKeep="keep"===t.newRowsAction||"clear"!==t.newRowsAction&&[fe.ROW_MODEL_TYPE_SERVER_SIDE,fe.ROW_MODEL_TYPE_INFINITE].indexOf(this.rowModel.getType())>=0,this.applyActive=i.isUseApplyButton(t),this.createButtonPanel()},i.prototype.createButtonPanel=function(){var t=this,s=this.providedFilterParams.buttons;if(!(!s||s.length<1||this.isReadOnly())){var l=document.createElement("div");At(l,"ag-filter-apply-panel"),og(s).forEach(function(h){return function(m){var S,R;switch(m){case"apply":S=t.translate("applyFilter"),R=function(U){return t.onBtApply(!1,!1,U)};break;case"clear":S=t.translate("clearFilter"),R=function(){return t.onBtClear()};break;case"reset":S=t.translate("resetFilter"),R=function(){return t.onBtReset()};break;case"cancel":S=t.translate("cancelFilter"),R=function(U){t.onBtCancel(U)};break;default:return void console.warn("Unknown button type specified")}var D=ca('<button\n                    type="button"\n                    ref="'+m+'FilterButton"\n                    class="ag-standard-button ag-filter-apply-panel-button"\n                >'+S+"\n                </button>");l.appendChild(D),t.addManagedListener(D,"click",R)}(h)}),this.getGui().appendChild(l)}},i.checkForDeprecatedParams=function(t){var s=t.buttons||[];if(!(s.length>0)){var l=t.applyButton,c=t.resetButton;t.clearButton&&(console.warn("AG Grid: as of AG Grid v23.2, filterParams.clearButton is deprecated. Please use filterParams.buttons instead"),s.push("clear")),c&&(console.warn("AG Grid: as of AG Grid v23.2, filterParams.resetButton is deprecated. Please use filterParams.buttons instead"),s.push("reset")),l&&(console.warn("AG Grid: as of AG Grid v23.2, filterParams.applyButton is deprecated. Please use filterParams.buttons instead"),s.push("apply")),t.apply&&(console.warn("AG Grid: as of AG Grid v21, filterParams.apply is deprecated. Please use filterParams.buttons instead"),s.push("apply")),t.buttons=s}},i.prototype.getDefaultDebounceMs=function(){return 0},i.prototype.setupOnBtApplyDebounce=function(){var t=i.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs());this.onBtApplyDebounce=ku(this.onBtApply.bind(this),t)},i.prototype.getModel=function(){return this.appliedModel},i.prototype.setModel=function(t){var s=this;return(t?this.setModelIntoUi(t):this.resetUiToDefaults()).then(function(){s.updateUiVisibility(),s.applyModel()})},i.prototype.onBtCancel=function(t){var s=this,l=this.getModel(),c=function(){s.onUiChanged(!1,"prevent"),s.providedFilterParams.closeOnApply&&s.close(t)};null!=l?this.setModelIntoUi(l).then(c):this.resetUiToDefaults().then(c)},i.prototype.onBtClear=function(){var t=this;this.resetUiToDefaults().then(function(){return t.onUiChanged()})},i.prototype.onBtReset=function(){this.onBtClear(),this.onBtApply()},i.prototype.applyModel=function(){var t=this.getModelFromUi();if(!this.isModelValid(t))return!1;var s=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(s,t)},i.prototype.isModelValid=function(t){return!0},i.prototype.onBtApply=function(t,s,l){void 0===t&&(t=!1),void 0===s&&(s=!1),this.applyModel()&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:t,afterDataChange:s}),this.providedFilterParams.closeOnApply&&this.applyActive&&!t&&!s&&this.close(l)},i.prototype.onNewRowsLoaded=function(){var t=this;this.newRowsActionKeep||this.resetUiToDefaults().then(function(){return t.appliedModel=null})},i.prototype.close=function(t){if(this.hidePopup){var c,l=t&&t.key;("Enter"===l||"Space"===l)&&(c={keyboardEvent:t}),this.hidePopup(c),this.hidePopup=null}},i.prototype.isNewRowsActionKeep=function(){return this.newRowsActionKeep},i.prototype.onUiChanged=function(t,s){if(void 0===t&&(t=!1),this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly){var l=this.isModelValid(this.getModelFromUi());ws(this.getRefElement("applyFilterButton"),!l)}t&&!s||"immediately"===s?this.onBtApply(t):(!this.applyActive&&!s||"debounce"===s)&&this.onBtApplyDebounce()},i.prototype.afterGuiAttached=function(t){null!=t&&(this.hidePopup=t.hidePopup)},i.getDebounceMs=function(t,s){return i.isUseApplyButton(t)?(null!=t.debounceMs&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):null!=t.debounceMs?t.debounceMs:s},i.isUseApplyButton=function(t){return i.checkForDeprecatedParams(t),!!t.buttons&&t.buttons.indexOf("apply")>=0},i.prototype.destroy=function(){this.hidePopup=null,d.prototype.destroy.call(this)},i.prototype.translate=function(t){return this.gridOptionsWrapper.getLocaleTextFunc()(t,Ha[t])},i.prototype.getCellValue=function(t){return this.providedFilterParams.valueGetter(t)},Hi([H("rowModel")],i.prototype,"rowModel",void 0),Hi([et],i.prototype,"postConstruct",null),i}(hn),$_=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),da=function(d){function i(t,s){var l=d.call(this,s)||this;return l.labelSeparator="",l.labelAlignment="left",l.label="",l.config=t||{},l}return $_(i,d),i.prototype.postConstruct=function(){At(this.getGui(),"ag-labeled"),At(this.eLabel,"ag-label");var t=this.config,s=t.labelSeparator,l=t.label,c=t.labelWidth,h=t.labelAlignment;null!=s&&this.setLabelSeparator(s),null!=l&&this.setLabel(l),null!=c&&this.setLabelWidth(c),this.setLabelAlignment(h||this.labelAlignment),this.refreshLabel()},i.prototype.refreshLabel=function(){co(this.eLabel),"string"==typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(At(this.eLabel,"ag-hidden"),Yi(this.eLabel,"presentation")):(_i(this.eLabel,"ag-hidden"),Yi(this.eLabel,null))},i.prototype.setLabelSeparator=function(t){return this.labelSeparator===t||(this.labelSeparator=t,null!=this.label&&this.refreshLabel()),this},i.prototype.getLabelId=function(){return this.eLabel.id=this.eLabel.id||"ag-"+this.getCompId()+"-label",this.eLabel.id},i.prototype.getLabel=function(){return this.label},i.prototype.setLabel=function(t){return this.label===t||(this.label=t,this.refreshLabel()),this},i.prototype.setLabelAlignment=function(t){var s=this.getGui();return kt(s,"ag-label-align-left","left"===t),kt(s,"ag-label-align-right","right"===t),kt(s,"ag-label-align-top","top"===t),this},i.prototype.setLabelWidth=function(t){return null==this.label||Vr(this.eLabel,t),this},function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([et],i.prototype,"postConstruct",null),i}(hn),bE=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),fa=function(d){function i(t,s,l){var c=d.call(this,t,s)||this;return c.className=l,c.disabled=!1,c}return bE(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this),this.className&&At(this.getGui(),this.className)},i.prototype.onValueChange=function(t){var s=this;return this.addManagedListener(this,i.EVENT_CHANGED,function(){return t(s.getValue())}),this},i.prototype.getWidth=function(){return this.getGui().clientWidth},i.prototype.setWidth=function(t){return ka(this.getGui(),t),this},i.prototype.getPreviousValue=function(){return this.previousValue},i.prototype.getValue=function(){return this.value},i.prototype.setValue=function(t,s){return this.value===t||(this.previousValue=this.value,this.value=t,s||this.dispatchEvent({type:i.EVENT_CHANGED})),this},i.prototype.setDisabled=function(t){t=!!t;var s=this.getGui();return ws(s,t),kt(s,"ag-disabled",t),this.disabled=t,this},i.prototype.isDisabled=function(){return!!this.disabled},i.EVENT_CHANGED="valueChange",i}(da),EE=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),rp=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},ip=function(d){function i(t,s,l,c){var h=d.call(this,t,'<div class="ag-picker-field" role="presentation">\n                <div ref="eLabel"></div>\n                <div ref="eWrapper"\n                    class="ag-wrapper ag-picker-field-wrapper"\n                    tabIndex="-1"\n                    '+(c?'aria-haspopup="'+c+'"':"")+'\n                >\n                    <div ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',s)||this;return h.pickerIcon=l,h.isPickerDisplayed=!1,h.isDestroyingPicker=!1,h.skipClick=!1,h}return EE(i,d),i.prototype.postConstruct=function(){var t=this;d.prototype.postConstruct.call(this);var s=this.getCompId()+"-display";this.eDisplayField.setAttribute("id",s),go(this.eWrapper,s);var l=function(){t.skipClick?t.skipClick=!1:t.isDisabled()||(t.pickerComponent=t.showPicker())},c=this.getGui();if(this.addManagedListener(c,"mousedown",function(m){!t.skipClick&&t.pickerComponent&&t.pickerComponent.isAlive()&&kl(t.pickerComponent.getGui())&&c.contains(m.target)&&(t.skipClick=!0)}),this.addManagedListener(c,"keydown",function(m){switch(m.keyCode){case Xe.UP:case Xe.DOWN:case Xe.ENTER:case Xe.SPACE:l();case Xe.ESCAPE:t.isPickerDisplayed&&m.preventDefault()}}),this.addManagedListener(this.eWrapper,"click",l),this.addManagedListener(this.eLabel,"click",l),this.pickerIcon){var h=ui(this.pickerIcon,this.gridOptionsWrapper);h&&this.eIcon.appendChild(h)}},i.prototype.refreshLabel=function(){Fe(this.getLabel())?Hl(this.eWrapper,this.getLabelId()):this.eWrapper.removeAttribute("aria-labelledby"),d.prototype.refreshLabel.call(this)},i.prototype.setAriaLabel=function(t){return Ba(this.eWrapper,t),this},i.prototype.setInputWidth=function(t){return Vr(this.eWrapper,t),this},i.prototype.getFocusableElement=function(){return this.eWrapper},rp([He("eLabel")],i.prototype,"eLabel",void 0),rp([He("eWrapper")],i.prototype,"eWrapper",void 0),rp([He("eDisplayField")],i.prototype,"eDisplayField",void 0),rp([He("eIcon")],i.prototype,"eIcon",void 0),i}(fa),lg=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),op=function(d){function i(t){void 0===t&&(t="default");var s=d.call(this,'<div class="ag-list ag-'+t+'-list" role="listbox"></div>')||this;return s.cssIdentifier=t,s.options=[],s.itemEls=[],s}return lg(i,d),i.prototype.init=function(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))},i.prototype.handleKeyDown=function(t){var s=t.keyCode;switch(s){case Xe.ENTER:if(this.highlightedEl){var l=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(l)}else this.setValue(this.getValue());break;case Xe.DOWN:case Xe.UP:var c=s===Xe.DOWN,h=void 0;if(t.preventDefault(),this.highlightedEl){var S=this.itemEls.indexOf(this.highlightedEl)+(c?1:-1);S=Math.min(Math.max(S,0),this.itemEls.length-1),h=this.itemEls[S]}else h=this.itemEls[c?0:this.itemEls.length-1];this.highlightItem(h)}},i.prototype.addOptions=function(t){var s=this;return t.forEach(function(l){return s.addOption(l)}),this},i.prototype.addOption=function(t){var s=t.value,c=ua(t.text||s);return this.options.push({value:s,text:c}),this.renderOption(s,c),this},i.prototype.renderOption=function(t,s){var l=this,c=document.createElement("div");Yi(c,"option"),At(c,"ag-list-item"),At(c,"ag-"+this.cssIdentifier+"-list-item"),c.innerHTML="<span>"+s+"</span>",c.tabIndex=-1,this.itemEls.push(c),this.addManagedListener(c,"mouseover",function(){return l.highlightItem(c)}),this.addManagedListener(c,"mouseleave",function(){return l.clearHighlighted()}),this.addManagedListener(c,"click",function(){return l.setValue(t)}),this.getGui().appendChild(c)},i.prototype.setValue=function(t,s){if(this.value===t)return this.fireItemSelected(),this;if(null==t)return this.reset(),this;var l=rt(this.options,function(h){return h.value===t});if(-1!==l){var c=this.options[l];this.value=c.value,this.displayValue=null!=c.text?c.text:c.value,this.highlightItem(this.itemEls[l]),s||this.fireChangeEvent()}return this},i.prototype.setValueByIndex=function(t){return this.setValue(this.options[t].value)},i.prototype.getValue=function(){return this.value},i.prototype.getDisplayValue=function(){return this.displayValue},i.prototype.refreshHighlighted=function(){var t=this;this.clearHighlighted();var s=rt(this.options,function(l){return l.value===t.value});-1!==s&&this.highlightItem(this.itemEls[s])},i.prototype.reset=function(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()},i.prototype.highlightItem=function(t){!t.offsetParent||(this.clearHighlighted(),this.highlightedEl=t,At(this.highlightedEl,i.ACTIVE_CLASS),ad(this.highlightedEl,!0),this.highlightedEl.focus())},i.prototype.clearHighlighted=function(){!this.highlightedEl||!this.highlightedEl.offsetParent||(_i(this.highlightedEl,i.ACTIVE_CLASS),ad(this.highlightedEl,!1),this.highlightedEl=null)},i.prototype.fireChangeEvent=function(){this.dispatchEvent({type:fa.EVENT_CHANGED}),this.fireItemSelected()},i.prototype.fireItemSelected=function(){this.dispatchEvent({type:i.EVENT_ITEM_SELECTED})},i.EVENT_ITEM_SELECTED="selectedItem",i.ACTIVE_CLASS="ag-active-item",function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([et],i.prototype,"init",null),i}(hn),xE=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),cg=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Ul=function(d){function i(t){return d.call(this,t,"ag-select","smallDown","listbox")||this}return xE(i,d),i.prototype.init=function(){var t=this;this.listComponent=this.createBean(new op("select")),this.listComponent.setParentComponent(this),this.eWrapper.tabIndex=0,this.listComponent.addManagedListener(this.listComponent,op.EVENT_ITEM_SELECTED,function(){t.hideList&&t.hideList()}),this.listComponent.addManagedListener(this.listComponent,fa.EVENT_CHANGED,function(){t.setValue(t.listComponent.getValue(),!1,!0),t.hideList&&t.hideList()})},i.prototype.showPicker=function(){var t=this,s=this.listComponent.getGui(),l=this.addManagedListener(document.body,"wheel",function(S){!s.contains(S.target)&&t.hideList&&t.hideList()}),c=this.addManagedListener(s,"focusout",function(S){!s.contains(S.relatedTarget)&&t.hideList&&t.hideList()}),h=this.gridOptionsWrapper.getLocaleTextFunc(),m=this.popupService.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:function(){t.hideList=null,t.isPickerDisplayed=!1,c(),l(),t.isAlive()&&t.getFocusableElement().focus()},ariaLabel:h("ariaLabelSelectField","Select Field")});return m&&(this.hideList=m.hideFunc),this.isPickerDisplayed=!0,Vr(s,Xf(this.eWrapper)),s.style.maxHeight=Fl(this.popupService.getPopupParent())+"px",s.style.position="absolute",this.popupService.positionPopupUnderComponent({type:"ag-list",eventSource:this.eWrapper,ePopup:s,keepWithinBounds:!0}),this.listComponent.refreshHighlighted(),this.listComponent},i.prototype.addOptions=function(t){var s=this;return t.forEach(function(l){return s.addOption(l)}),this},i.prototype.addOption=function(t){return this.listComponent.addOption(t),this},i.prototype.setValue=function(t,s,l){return this.value===t?this:(l||this.listComponent.setValue(t,!0),this.listComponent.getValue()===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),d.prototype.setValue.call(this,t,s)))},i.prototype.destroy=function(){this.hideList&&this.hideList(),this.destroyBean(this.listComponent),d.prototype.destroy.call(this)},cg([H("popupService")],i.prototype,"popupService",void 0),cg([et],i.prototype,"init",null),i}(ip),J_=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),ap=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Va=function(d){function i(t,s,l,c){void 0===l&&(l="text"),void 0===c&&(c="input");var h=d.call(this,t,'\n            <div role="presentation">\n                <div ref="eLabel" class="ag-input-field-label"></div>\n                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <'+c+' ref="eInput" class="ag-input-field-input"></'+c+">\n                </div>\n            </div>",s)||this;return h.inputType=l,h.displayFieldTag=c,h}return J_(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this),this.setInputType(),At(this.eLabel,this.className+"-label"),At(this.eWrapper,this.className+"-input-wrapper"),At(this.eInput,this.className+"-input"),At(this.getGui(),"ag-input-field"),this.eInput.id=this.eInput.id||"ag-"+this.getCompId()+"-input";var t=this.config,s=t.width,l=t.value;null!=s&&this.setWidth(s),null!=l&&this.setValue(l),this.addInputListeners()},i.prototype.refreshLabel=function(){Fe(this.getLabel())?Hl(this.eInput,this.getLabelId()):this.eInput.removeAttribute("aria-labelledby"),d.prototype.refreshLabel.call(this)},i.prototype.addInputListeners=function(){var t=this;this.addManagedListener(this.eInput,"input",function(s){return t.setValue(s.target.value)})},i.prototype.setInputType=function(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)},i.prototype.getInputElement=function(){return this.eInput},i.prototype.setInputWidth=function(t){return Vr(this.eWrapper,t),this},i.prototype.setInputName=function(t){return this.getInputElement().setAttribute("name",t),this},i.prototype.getFocusableElement=function(){return this.eInput},i.prototype.setMaxLength=function(t){return this.eInput.maxLength=t,this},i.prototype.setInputPlaceholder=function(t){return bs(this.eInput,"placeholder",t),this},i.prototype.setInputAriaLabel=function(t){return Ba(this.eInput,t),this},i.prototype.setDisabled=function(t){return ws(this.eInput,t),d.prototype.setDisabled.call(this,t)},ap([He("eLabel")],i.prototype,"eLabel",void 0),ap([He("eWrapper")],i.prototype,"eWrapper",void 0),ap([He("eInput")],i.prototype,"eInput",void 0),i}(fa),Z_=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Wa=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},wi=function(){return function(d){d[d.One=0]="One",d[d.Two=1]="Two"}(wi||(wi={})),wi}(),Xi=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Z_(i,d),i.prototype.getNumberOfInputs=function(t){var s=this.optionsFactory.getCustomOption(t);if(s){var l=s.numberOfInputs;return null!=l?l:1}return t===i.EMPTY?0:t===i.IN_RANGE?2:1},i.prototype.onFloatingFilterChanged=function(t,s){this.setTypeFromFloatingFilter(t),this.setValueFromFloatingFilter(s),this.onUiChanged(!0)},i.prototype.setTypeFromFloatingFilter=function(t){this.eType1.setValue(t),this.eType2.setValue(this.optionsFactory.getDefaultOption()),(this.isDefaultOperator("AND")?this.eJoinOperatorAnd:this.eJoinOperatorOr).setValue(!0)},i.prototype.getModelFromUi=function(){return this.isConditionUiComplete(wi.One)?this.isAllowTwoConditions()&&this.isConditionUiComplete(wi.Two)?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:this.createCondition(wi.One),condition2:this.createCondition(wi.Two)}:this.createCondition(wi.One):null},i.prototype.getConditionTypes=function(){return[this.eType1.getValue(),this.eType2.getValue()]},i.prototype.getJoinOperator=function(){return!0===this.eJoinOperatorOr.getValue()?"OR":"AND"},i.prototype.areModelsEqual=function(t,s){if(!t&&!s)return!0;if(!t&&s||t&&!s)return!1;var m,l=!t.operator,c=!s.operator;if(!l&&c||l&&!c)return!1;if(l)m=this.areSimpleModelsEqual(t,s);else{var D=t,L=s;m=D.operator===L.operator&&this.areSimpleModelsEqual(D.condition1,L.condition1)&&this.areSimpleModelsEqual(D.condition2,L.condition2)}return m},i.prototype.setModelIntoUi=function(t){if(t.operator){var l=t,c="OR"===l.operator;this.eJoinOperatorAnd.setValue(!c),this.eJoinOperatorOr.setValue(c),this.eType1.setValue(l.condition1.type),this.eType2.setValue(l.condition2.type),this.setConditionIntoUi(l.condition1,wi.One),this.setConditionIntoUi(l.condition2,wi.Two)}else{var h=t;this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND")),this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR")),this.eType1.setValue(h.type),this.eType2.setValue(this.optionsFactory.getDefaultOption()),this.setConditionIntoUi(h,wi.One),this.setConditionIntoUi(null,wi.Two)}return Qr.resolve()},i.prototype.doesFilterPass=function(t){var s=this,l=this.getModel();if(null==l)return!0;var c=l.operator,h=[];return c?h.push(l.condition1,l.condition2):h.push(l),(c&&"OR"===c?$t:nn)(h,function(R){return s.individualConditionPasses(t,R)})},i.prototype.setParams=function(t){d.prototype.setParams.call(this,t),this.optionsFactory=new Vl,this.optionsFactory.init(t,this.getDefaultFilterOptions()),this.allowTwoConditions=!t.suppressAndOrCondition,this.alwaysShowBothConditions=!!t.alwaysShowBothConditions,this.defaultJoinOperator=this.getDefaultJoinOperator(t.defaultJoinOperator),this.putOptionsIntoDropdown(),this.addChangedListeners()},i.prototype.getDefaultJoinOperator=function(t){return Tn(["AND","OR"],t)?t:"AND"},i.prototype.putOptionsIntoDropdown=function(){var t=this,s=this.optionsFactory.getFilterOptions(),l=[this.eType1,this.eType2];Ut(s,function(c){var h="string"==typeof c?t.createBoilerplateListOption(c):t.createCustomListOption(c);Ut(l,function(m){return m.addOption(h)})}),Ut(l,function(c){return c.setDisabled(s.length<=1)})},i.prototype.createBoilerplateListOption=function(t){return{value:t,text:this.translate(t)}},i.prototype.createCustomListOption=function(t){var s=t.displayKey,l=this.optionsFactory.getCustomOption(t.displayKey);return{value:s,text:l?this.gridOptionsWrapper.getLocaleTextFunc()(l.displayKey,l.displayName):this.translate(s)}},i.prototype.isAllowTwoConditions=function(){return this.allowTwoConditions},i.prototype.createBodyTemplate=function(){return'\n            <ag-select class="ag-filter-select" ref="eOptions1"></ag-select>\n            '+this.createValueTemplate(wi.One)+'\n            <div class="ag-filter-condition" ref="eJoinOperatorPanel">\n               <ag-radio-button ref="eJoinOperatorAnd" class="ag-filter-condition-operator ag-filter-condition-operator-and"></ag-radio-button>\n               <ag-radio-button ref="eJoinOperatorOr" class="ag-filter-condition-operator ag-filter-condition-operator-or"></ag-radio-button>\n            </div>\n            <ag-select class="ag-filter-select" ref="eOptions2"></ag-select>\n            '+this.createValueTemplate(wi.Two)},i.prototype.getCssIdentifier=function(){return"simple-filter"},i.prototype.updateUiVisibility=function(){var t=this,l=[this.eCondition1Body,this.eCondition2Body];Ut([[this.eType1],[this.eType2,this.eJoinOperatorPanel,this.eJoinOperatorAnd,this.eJoinOperatorOr]],function(c,h){var m=t.isConditionVisible(h),S=t.isConditionDisabled(h);Ut(c,function(R){R instanceof Va||R instanceof Ul?(R.setDisabled(S),R.setDisplayed(m)):(ws(R,S),Xn(R,m))})}),Ut(l,function(c,h){Xn(c,t.isConditionBodyVisible(h))}),this.forEachInput(function(c,h,m,S){t.setElementDisplayed(c,h<S),t.setElementDisabled(c,t.isConditionDisabled(m))}),this.resetPlaceholder()},i.prototype.afterGuiAttached=function(t){if(d.prototype.afterGuiAttached.call(this,t),this.resetPlaceholder(),!t||!t.suppressFocus&&!this.isReadOnly()){var s=this.getInputs()[0][0];if(!s)return;s instanceof Va&&s.getInputElement().focus()}},i.prototype.resetPlaceholder=function(){var t=this,s=this.gridOptionsWrapper.getLocaleTextFunc();this.forEachInput(function(l,c,h,m){if(l instanceof Va){var S=0===c&&m>1?"inRangeStart":0===c?"filterOoo":"inRangeEnd",R=0===c&&m>1?s("ariaFilterFromValue","Filter from value"):0===c?s("ariaFilterValue","Filter Value"):s("ariaFilterToValue","Filter to Value");l.setInputPlaceholder(t.translate(S)),l.setInputAriaLabel(R)}})},i.prototype.setElementValue=function(t,s,l){t instanceof Va&&t.setValue(s?String(s):null,l)},i.prototype.setElementDisplayed=function(t,s){t instanceof hn&&Xn(t.getGui(),s)},i.prototype.setElementDisabled=function(t,s){t instanceof hn&&ws(t.getGui(),s)},i.prototype.attachElementOnChange=function(t,s){t instanceof Va&&t.onValueChange(s)},i.prototype.forEachInput=function(t){var s=this,l=this.getInputs();this.getConditionTypes().forEach(function(c,h){for(var m=s.getNumberOfInputs(c),S=0;S<l[h].length;S++){var R=l[h][S];null!=R&&t(R,S,h,m)}})},i.prototype.isConditionVisible=function(t){return 0===t||!!this.allowTwoConditions&&(this.isReadOnly()?this.isConditionUiComplete(t):!!this.alwaysShowBothConditions||this.isConditionUiComplete(t-1))},i.prototype.isConditionDisabled=function(t){return!(!this.isReadOnly()&&this.isConditionVisible(t))||0!==t&&!this.isConditionUiComplete(t-1)},i.prototype.isConditionBodyVisible=function(t){if(!this.isConditionVisible(t))return!1;var s=this.getConditionTypes()[t];return this.getNumberOfInputs(s)>0},i.prototype.isConditionUiComplete=function(t){return!(this.getConditionTypes()[t]===i.EMPTY||yt.some(this.getValues(t),function(l){return null==l}))},i.prototype.resetUiToDefaults=function(t){var s=this,c=this.gridOptionsWrapper.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator"),h="ag-simple-filter-and-or-"+this.getCompId(),m=this.optionsFactory.getDefaultOption();return this.eType1.setValue(m,t).setAriaLabel(c).setDisabled(this.isReadOnly()),this.eType2.setValue(this.optionsFactory.getDefaultOption(),t).setAriaLabel(c).setDisabled(this.isReadOnly()),this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND"),t).setName(h).setLabel(this.translate("andCondition")).setDisabled(this.isReadOnly()),this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR"),t).setName(h).setLabel(this.translate("orCondition")).setDisabled(this.isReadOnly()),this.forEachInput(function(S){s.setElementValue(S,null,t),s.setElementDisabled(S,s.isReadOnly())}),this.resetPlaceholder(),Qr.resolve()},i.prototype.setConditionIntoUi=function(t,s){var l=this,c=this.mapValuesFromModel(t);this.forEachInput(function(h,m,S,R){S===s&&l.setElementValue(h,c[m]?c[m]:null)})},i.prototype.setValueFromFloatingFilter=function(t){var s=this;this.forEachInput(function(l,c,h,m){s.setElementValue(l,0===c&&0===h?t:null)})},i.prototype.isDefaultOperator=function(t){return t===this.defaultJoinOperator},i.prototype.addChangedListeners=function(){var t=this;if(!this.isReadOnly()){var s=function(){return t.onUiChanged()};this.eType1.onValueChange(s),this.eType2.onValueChange(s),this.eJoinOperatorOr.onValueChange(s),this.eJoinOperatorAnd.onValueChange(s),this.forEachInput(function(l){t.attachElementOnChange(l,s)})}},i.prototype.individualConditionPasses=function(t,s){var l=this.getCellValue(t.node),c=this.mapValuesFromModel(s),h=this.optionsFactory.getCustomOption(s.type),m=this.evaluateCustomFilter(h,c,l);return null!=m?m:null==l?this.evaluateNullValue(s.type):this.evaluateNonNullValue(c,l,s)},i.prototype.evaluateCustomFilter=function(t,s,l){if(null!=t){var c=t.predicate;if(null!=c&&!yt.some(s,function(h){return null==h}))return c(s,l)}},i.EMPTY="empty",i.EQUALS="equals",i.NOT_EQUAL="notEqual",i.LESS_THAN="lessThan",i.LESS_THAN_OR_EQUAL="lessThanOrEqual",i.GREATER_THAN="greaterThan",i.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",i.IN_RANGE="inRange",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.STARTS_WITH="startsWith",i.ENDS_WITH="endsWith",Wa([He("eOptions1")],i.prototype,"eType1",void 0),Wa([He("eOptions2")],i.prototype,"eType2",void 0),Wa([He("eJoinOperatorPanel")],i.prototype,"eJoinOperatorPanel",void 0),Wa([He("eJoinOperatorAnd")],i.prototype,"eJoinOperatorAnd",void 0),Wa([He("eJoinOperatorOr")],i.prototype,"eJoinOperatorOr",void 0),Wa([He("eCondition1Body")],i.prototype,"eCondition1Body",void 0),Wa([He("eCondition2Body")],i.prototype,"eCondition2Body",void 0),i}(To),Ji=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ar=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Ji(i,d),i.prototype.setParams=function(t){d.prototype.setParams.call(this,t),this.scalarFilterParams=t,this.checkDeprecatedParams()},i.prototype.checkDeprecatedParams=function(){this.scalarFilterParams.nullComparator&&(console.warn("AG Grid: Since v21.0, the property filterParams.nullComparator is deprecated. Please use filterParams.includeBlanksInEquals, filterParams.includeBlanksInLessThan and filterParams.includeBlanksInGreaterThan instead."),this.scalarFilterParams.includeBlanksInEquals=this.scalarFilterParams.nullComparator.equals,this.scalarFilterParams.includeBlanksInLessThan=this.scalarFilterParams.nullComparator.lessThan,this.scalarFilterParams.includeBlanksInGreaterThan=this.scalarFilterParams.nullComparator.greaterThan)},i.prototype.evaluateNullValue=function(t){switch(t){case i.EQUALS:case i.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case i.GREATER_THAN:case i.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case i.LESS_THAN:case i.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case i.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0}return!1},i.prototype.evaluateNonNullValue=function(t,s,l){var c=this.comparator(),h=c(t[0],s);switch(l.type){case i.EQUALS:return 0===h;case i.NOT_EQUAL:return 0!==h;case i.GREATER_THAN:return h>0;case i.GREATER_THAN_OR_EQUAL:return h>=0;case i.LESS_THAN:return h<0;case i.LESS_THAN_OR_EQUAL:return h<=0;case i.IN_RANGE:var m=c(t[1],s);return this.scalarFilterParams.inRangeInclusive?h>=0&&m<=0:h>0&&m<0;default:return console.warn('AG Grid: Unexpected type of filter "'+l.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}},i}(Xi),Mr=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),sp=function(){return sp=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},sp.apply(this,arguments)},cd=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},dg=function(d){function i(){var t=d.call(this,"dateFilter")||this;return t.minValidYear=1e3,t.maxValidYear=1/0,t}return Mr(i,d),i.prototype.afterGuiAttached=function(t){d.prototype.afterGuiAttached.call(this,t),this.dateCondition1FromComp.afterGuiAttached(t)},i.prototype.mapValuesFromModel=function(t){var s=t||{},l=s.dateFrom,c=s.dateTo,h=s.type;return[l&&Es(l)||null,c&&Es(c)||null].slice(0,this.getNumberOfInputs(h))},i.prototype.comparator=function(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)},i.prototype.defaultComparator=function(t,s){return null==s||s<t?-1:s>t?1:0},i.prototype.setParams=function(t){d.prototype.setParams.call(this,t),this.dateFilterParams=t;var s=function(c,h){if(null!=t[c]){if(!isNaN(t[c]))return null==t[c]?h:Number(t[c]);console.warn("AG Grid: DateFilter "+c+" is not a number")}return h};this.minValidYear=s("minValidYear",1e3),this.maxValidYear=s("maxValidYear",1/0),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),this.createDateComponents()},i.prototype.createDateComponents=function(){var t=this,s=function(c){return new Ur(t.getContext(),t.userComponentFactory,{onDateChanged:function(){return t.onUiChanged()},filterParams:t.dateFilterParams},c)};this.dateCondition1FromComp=s(this.eCondition1PanelFrom),this.dateCondition1ToComp=s(this.eCondition1PanelTo),this.dateCondition2FromComp=s(this.eCondition2PanelFrom),this.dateCondition2ToComp=s(this.eCondition2PanelTo),this.addDestroyFunc(function(){t.forEachInput(function(l){return l.destroy()})})},i.prototype.setElementValue=function(t,s,l){t.setDate(s)},i.prototype.setElementDisplayed=function(t,s){t.setDisplayed(s)},i.prototype.setElementDisabled=function(t,s){t.setDisabled(s)},i.prototype.getDefaultFilterOptions=function(){return i.DEFAULT_FILTER_OPTIONS},i.prototype.createValueTemplate=function(t){var s=t===wi.One?"1":"2";return'\n            <div class="ag-filter-body" ref="eCondition'+s+'Body">\n                <div class="ag-filter-from ag-filter-date-from" ref="eCondition'+s+'PanelFrom"></div>\n                <div class="ag-filter-to ag-filter-date-to" ref="eCondition'+s+'PanelTo"></div>\n            </div>'},i.prototype.isConditionUiComplete=function(t){var s=this;if(!d.prototype.isConditionUiComplete.call(this,t))return!1;var c=!0;return this.forEachInput(function(h,m,S,R){S!==t||!c||m>=R||(c=c&&function(m){return null!=m&&m.getUTCFullYear()>=s.minValidYear&&m.getUTCFullYear()<=s.maxValidYear}(h.getDate()))}),c},i.prototype.areSimpleModelsEqual=function(t,s){return t.dateFrom===s.dateFrom&&t.dateTo===s.dateTo&&t.type===s.type},i.prototype.getFilterType=function(){return"date"},i.prototype.createCondition=function(t){var s=this.getConditionTypes()[t],l={},c=this.getValues(t);return c.length>0&&(l.dateFrom=Wu(c[0])),c.length>1&&(l.dateTo=Wu(c[1])),sp({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:s},l)},i.prototype.resetPlaceholder=function(){var t=this.gridOptionsWrapper.getLocaleTextFunc(),s=this.translate("dateFormatOoo"),l=t("ariaFilterValue","Filter Value");this.forEachInput(function(c){c.setInputPlaceholder(s),c.setInputAriaLabel(l)})},i.prototype.getInputs=function(){return[[this.dateCondition1FromComp,this.dateCondition1ToComp],[this.dateCondition2FromComp,this.dateCondition2ToComp]]},i.prototype.getValues=function(t){var s=[];return this.forEachInput(function(l,c,h,m){t===h&&c<m&&s.push(l.getDate())}),s},i.DEFAULT_FILTER_OPTIONS=[Ar.EQUALS,Ar.GREATER_THAN,Ar.LESS_THAN,Ar.NOT_EQUAL,Ar.IN_RANGE],cd([He("eCondition1PanelFrom")],i.prototype,"eCondition1PanelFrom",void 0),cd([He("eCondition1PanelTo")],i.prototype,"eCondition1PanelTo",void 0),cd([He("eCondition2PanelFrom")],i.prototype,"eCondition2PanelFrom",void 0),cd([He("eCondition2PanelTo")],i.prototype,"eCondition2PanelTo",void 0),cd([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),i}(Ar),RE=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),dd=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return RE(i,d),i.prototype.getDefaultDebounceMs=function(){return 0},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.getTextFromModel=function(t){if(!t)return null;if(null!=t.operator){var l=t,c=l||{},h=c.condition1,m=c.condition2,S=this.optionsFactory.getCustomOption(h.type),R=this.optionsFactory.getCustomOption(m.type);return[this.conditionToString(h,S),l.operator,this.conditionToString(m,R)].join(" ")}var D=t,L=this.optionsFactory.getCustomOption(D.type),U=L||{},K=U.displayKey,ee=U.displayName;return K&&ee&&0===U.numberOfInputs?(this.gridOptionsWrapper.getLocaleTextFunc()(K,ee),ee):this.conditionToString(D,L)},i.prototype.isEventFromFloatingFilter=function(t){return t&&t.afterFloatingFilter},i.prototype.getLastType=function(){return this.lastType},i.prototype.isReadOnly=function(){return this.readOnly},i.prototype.setLastTypeFromModel=function(t){t?this.lastType=(t.operator?t.condition1:t).type:this.lastType=this.optionsFactory.getDefaultOption()},i.prototype.canWeEditAfterModelFromParentFilter=function(t){return t?!t.operator&&this.isTypeEditable(t.type):this.isTypeEditable(this.lastType)},i.prototype.init=function(t){this.optionsFactory=new Vl,this.optionsFactory.init(t.filterParams,this.getDefaultFilterOptions()),this.lastType=this.optionsFactory.getDefaultOption(),this.readOnly=!!t.filterParams.readOnly;var s=this.isTypeEditable(this.lastType);this.setEditable(s)},i.prototype.doesFilterHaveSingleInput=function(t){var l=(this.optionsFactory.getCustomOption(t)||{}).numberOfInputs;return null==l||1==l},i.prototype.isTypeEditable=function(t){return!!t&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(t)&&t!==Xi.IN_RANGE&&t!==Xi.EMPTY},i}(hn),up=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),zl=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},fg=function(d){function i(){return d.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>\n                <div ref="eDateWrapper" style="display: flex;"></div>\n            </div>')||this}return up(i,d),i.prototype.getDefaultFilterOptions=function(){return dg.DEFAULT_FILTER_OPTIONS},i.prototype.conditionToString=function(t,s){var l=t.type,h=l==Xi.IN_RANGE||2===(s||{}).numberOfInputs,m=Es(t.dateFrom),S=Es(t.dateTo);return h?Wu(m,!1)+"-"+Wu(S,!1):null!=m?""+Wu(m,!1):""+l},i.prototype.init=function(t){d.prototype.init.call(this,t),this.params=t,this.createDateComponent();var s=this.gridOptionsWrapper.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(s("ariaDateFilterInput","Date Filter Input"))},i.prototype.setEditable=function(t){Xn(this.eDateWrapper,t),Xn(this.eReadOnlyText.getGui(),!t)},i.prototype.onParentModelChanged=function(t,s){if(!this.isEventFromFloatingFilter(s)){d.prototype.setLastTypeFromModel.call(this,t);var l=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(t);this.setEditable(l),l?(this.dateComp.setDate(t?Es(t.dateFrom):null),this.eReadOnlyText.setValue("")):(this.eReadOnlyText.setValue(this.getTextFromModel(t)),this.dateComp.setDate(null))}},i.prototype.onDateChanged=function(){var t=this,l=Wu(this.dateComp.getDate());this.params.parentFilterInstance(function(c){c&&c.onFloatingFilterChanged(t.getLastType(),Es(l))})},i.prototype.createDateComponent=function(){var t=this,s=To.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),l={onDateChanged:ku(this.onDateChanged.bind(this),s),filterParams:this.params.column.getColDef().filterParams};this.dateComp=new Ur(this.getContext(),this.userComponentFactory,l,this.eDateWrapper),this.addDestroyFunc(function(){return t.dateComp.destroy()})},zl([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),zl([He("eReadOnlyText")],i.prototype,"eReadOnlyText",void 0),zl([He("eDateWrapper")],i.prototype,"eDateWrapper",void 0),i}(dd),tC=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),su=function(d){function i(){return d.call(this,'\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>\n            </div>')||this}return tC(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(t){var s=this,l=this.eDateInput.getInputElement();this.shouldUseBrowserDatePicker(t)&&(Ki()?console.warn("ag-grid: browserDatePicker is specified to true, but it is not supported in IE 11; reverting to text date picker"):l.type="date"),this.addManagedListener(l,"mousedown",function(){s.eDateInput.isDisabled()||l.focus()}),this.addManagedListener(l,"input",function(S){S.target===document.activeElement&&(s.eDateInput.isDisabled()||t.onDateChanged())});var c=t.filterParams||{},h=c.minValidYear,m=c.maxValidYear;h&&(l.min=h+"-01-01"),m&&(l.max=m+"-12-31")},i.prototype.getDate=function(){return Es(this.eDateInput.getValue())},i.prototype.setDate=function(t){this.eDateInput.setValue(Wu(t,!1))},i.prototype.setInputPlaceholder=function(t){this.eDateInput.setInputPlaceholder(t)},i.prototype.setDisabled=function(t){this.eDateInput.setDisabled(t)},i.prototype.afterGuiAttached=function(t){(!t||!t.suppressFocus)&&this.eDateInput.getInputElement().focus()},i.prototype.shouldUseBrowserDatePicker=function(t){return t.filterParams&&null!=t.filterParams.browserDatePicker?t.filterParams.browserDatePicker:td()||Qt()},function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([He("eDateInput")],i.prototype,"eDateInput",void 0),i}(hn),fd=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),lp=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},pg=function(d){function i(){return d.call(this,"numberFilter")||this}return fd(i,d),i.prototype.mapValuesFromModel=function(t){var s=t||{};return[s.filter||null,s.filterTo||null].slice(0,this.getNumberOfInputs(s.type))},i.prototype.getDefaultDebounceMs=function(){return 500},i.prototype.comparator=function(){return function(t,s){return t===s?0:t<s?1:-1}},i.prototype.setParams=function(t){this.numberFilterParams=t;var s=this.getAllowedCharPattern();if(s){var l={allowedCharPattern:s};this.resetTemplate({eValueFrom1:l,eValueTo1:l,eValueFrom2:l,eValueTo2:l})}d.prototype.setParams.call(this,t)},i.prototype.getDefaultFilterOptions=function(){return i.DEFAULT_FILTER_OPTIONS},i.prototype.createValueTemplate=function(t){var s=t===wi.One?"1":"2",c=this.getAllowedCharPattern()?"ag-input-text-field":"ag-input-number-field";return'\n            <div class="ag-filter-body" ref="eCondition'+s+'Body" role="presentation">\n                <'+c+' class="ag-filter-from ag-filter-filter" ref="eValue-index0-'+s+'"></'+c+">\n                <"+c+' class="ag-filter-to ag-filter-filter" ref="eValue-index1-'+s+'"></'+c+">\n            </div>"},i.prototype.getValues=function(t){var s=this,l=[];return this.forEachInput(function(c,h,m,S){t===m&&h<S&&l.push(s.stringToFloat(c.getValue()))}),l},i.prototype.areSimpleModelsEqual=function(t,s){return t.filter===s.filter&&t.filterTo===s.filterTo&&t.type===s.type},i.prototype.getFilterType=function(){return"number"},i.prototype.stringToFloat=function(t){if("number"==typeof t)return t;var s=ze(t);return null!=s&&""===s.trim()&&(s=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(s):null==s||"-"===s.trim()?null:parseFloat(s)},i.prototype.createCondition=function(t){var s=this.getConditionTypes()[t],l={filterType:this.getFilterType(),type:s},c=this.getValues(t);return c.length>0&&(l.filter=c[0]),c.length>1&&(l.filterTo=c[1]),l},i.prototype.getInputs=function(){return[[this.eValueFrom1,this.eValueTo1],[this.eValueFrom2,this.eValueTo2]]},i.prototype.getAllowedCharPattern=function(){return(this.numberFilterParams||{}).allowedCharPattern||(td()||Il()?null:"\\d\\-\\.")},i.DEFAULT_FILTER_OPTIONS=[Ar.EQUALS,Ar.NOT_EQUAL,Ar.LESS_THAN,Ar.LESS_THAN_OR_EQUAL,Ar.GREATER_THAN,Ar.GREATER_THAN_OR_EQUAL,Ar.IN_RANGE],lp([He("eValue-index0-1")],i.prototype,"eValueFrom1",void 0),lp([He("eValue-index1-1")],i.prototype,"eValueTo1",void 0),lp([He("eValue-index0-2")],i.prototype,"eValueFrom2",void 0),lp([He("eValue-index1-2")],i.prototype,"eValueTo2",void 0),i}(Ar),pd=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),jl=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},cp=function(d){function i(){return d.call(this,"textFilter")||this}return pd(i,d),i.trimInput=function(t){var s=t&&t.trim();return""===s?t:s},i.prototype.getDefaultDebounceMs=function(){return 500},i.prototype.setParams=function(t){d.prototype.setParams.call(this,t),this.textFilterParams=t,this.comparator=this.textFilterParams.textCustomComparator||i.DEFAULT_COMPARATOR,this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?i.DEFAULT_FORMATTER:i.DEFAULT_LOWERCASE_FORMATTER)},i.prototype.createCondition=function(t){var s=this.getConditionTypes()[t],l={filterType:this.getFilterType(),type:s},c=this.getValues(t);return c.length>0&&(l.filter=c[0]),c.length>1&&(l.filterTo=c[1]),l},i.prototype.getFilterType=function(){return"text"},i.prototype.areSimpleModelsEqual=function(t,s){return t.filter===s.filter&&t.filterTo===s.filterTo&&t.type===s.type},i.prototype.getInputs=function(){return[[this.eValueFrom1,this.eValueTo1],[this.eValueFrom2,this.eValueTo2]]},i.prototype.getValues=function(t){var s=this,l=[];return this.forEachInput(function(c,h,m,S){if(t===m&&h<S){var R=ze(c.getValue()),D=(s.textFilterParams.trimInput?i.trimInput(R):R)||null;l.push(D),c.setValue(D,!0)}}),l},i.prototype.getDefaultFilterOptions=function(){return i.DEFAULT_FILTER_OPTIONS},i.prototype.createValueTemplate=function(t){var s=t===wi.One?"1":"2";return'\n            <div class="ag-filter-body" ref="eCondition'+s+'Body" role="presentation">\n                <ag-input-text-field class=".ag-filter-from ag-filter-filter" ref="eValue-index0-'+s+'"></ag-input-text-field>\n                <ag-input-text-field class="ag-filter-to ag-filter-filter" ref="eValue-index1-'+s+'"></ag-input-text-field>\n            </div>'},i.prototype.mapValuesFromModel=function(t){var s=t||{};return[s.filter||null,s.filterTo||null].slice(0,this.getNumberOfInputs(s.type))},i.prototype.evaluateNullValue=function(t){return t===Xi.NOT_EQUAL||t===Xi.NOT_CONTAINS},i.prototype.evaluateNonNullValue=function(t,s,l){var c=this,h=yt.map(t,function(S){return c.formatter(S)})||[],m=this.formatter(s);return yt.some(h,function(S){return c.comparator(l.type,m,S)})},i.DEFAULT_FILTER_OPTIONS=[Xi.CONTAINS,Xi.NOT_CONTAINS,Xi.EQUALS,Xi.NOT_EQUAL,Xi.STARTS_WITH,Xi.ENDS_WITH],i.DEFAULT_FORMATTER=function(t){return t},i.DEFAULT_LOWERCASE_FORMATTER=function(t){return null==t?null:t.toString().toLowerCase()},i.DEFAULT_COMPARATOR=function(t,s,l){switch(t){case i.CONTAINS:return s.indexOf(l)>=0;case i.NOT_CONTAINS:return s.indexOf(l)<0;case i.EQUALS:return s===l;case i.NOT_EQUAL:return s!=l;case i.STARTS_WITH:return 0===s.indexOf(l);case i.ENDS_WITH:var c=s.lastIndexOf(l);return c>=0&&c===s.length-l.length;default:return!1}},jl([He("eValue-index0-1")],i.prototype,"eValueFrom1",void 0),jl([He("eValue-index1-1")],i.prototype,"eValueTo1",void 0),jl([He("eValue-index0-2")],i.prototype,"eValueFrom2",void 0),jl([He("eValue-index1-2")],i.prototype,"eValueTo2",void 0),i}(Xi),DE=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),nC=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},AE=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return DE(i,d),i.prototype.postConstruct=function(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterInput"></ag-input-text-field>\n            </div>')},i.prototype.getDefaultDebounceMs=function(){return 500},i.prototype.onParentModelChanged=function(t,s){this.isEventFromFloatingFilter(s)||(this.setLastTypeFromModel(t),this.eFloatingFilterInput.setValue(this.getTextFromModel(t)),this.setEditable(this.canWeEditAfterModelFromParentFilter(t)))},i.prototype.init=function(t){if(d.prototype.init.call(this,t),this.params=t,this.applyActive=To.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){var s=To.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),l=ku(this.syncUpWithParentFilter.bind(this),s),c=this.eFloatingFilterInput.getGui();this.addManagedListener(c,"input",l),this.addManagedListener(c,"keypress",l),this.addManagedListener(c,"keydown",l)}var h=t.column.getDefinition();(this.isReadOnly()||h.filterParams&&h.filterParams.filterOptions&&1===h.filterParams.filterOptions.length&&"inRange"===h.filterParams.filterOptions[0])&&this.eFloatingFilterInput.setDisabled(!0);var m=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),S=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterInput.setInputAriaLabel(m+" "+S("ariaFilterInput","Filter Input"))},i.prototype.syncUpWithParentFilter=function(t){var s=this,l=sd(t,Xe.ENTER);if(!this.applyActive||l){var c=this.eFloatingFilterInput.getValue();this.params.filterParams.trimInput&&(c=cp.trimInput(c),this.eFloatingFilterInput.setValue(c,!0)),this.params.parentFilterInstance(function(h){h&&h.onFloatingFilterChanged(s.getLastType(),c||null)})}},i.prototype.conditionToString=function(t,s){return t.type==Xi.IN_RANGE||2===(s||{}).numberOfInputs?t.filter+"-"+t.filterTo:null!=t.filter?""+t.filter:""+t.type},i.prototype.setEditable=function(t){this.eFloatingFilterInput.setDisabled(!t)},nC([H("columnModel")],i.prototype,"columnModel",void 0),nC([He("eFloatingFilterInput")],i.prototype,"eFloatingFilterInput",void 0),nC([et],i.prototype,"postConstruct",null),i}(dd),dp=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),rC=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return dp(i,d),i.prototype.getDefaultFilterOptions=function(){return pg.DEFAULT_FILTER_OPTIONS},i}(AE),hg=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),hd=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return hg(i,d),i.prototype.getDefaultFilterOptions=function(){return cp.DEFAULT_FILTER_OPTIONS},i}(AE),Do=function(){function d(i,t){var s=this;void 0===t&&(t=!1),this.destroyFuncs=[],this.touching=!1,this.eventService=new tu,this.eElement=i,this.preventMouseClick=t;var l=this.onTouchStart.bind(this),c=this.onTouchMove.bind(this),h=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",l,{passive:!0}),this.eElement.addEventListener("touchmove",c,{passive:!0}),this.eElement.addEventListener("touchend",h,{passive:!1}),this.destroyFuncs.push(function(){s.eElement.removeEventListener("touchstart",l,{passive:!0}),s.eElement.removeEventListener("touchmove",c,{passive:!0}),s.eElement.removeEventListener("touchend",h,{passive:!1})})}return d.prototype.getActiveTouch=function(i){for(var t=0;t<i.length;t++)if(i[t].identifier===this.touchStart.identifier)return i[t];return null},d.prototype.addEventListener=function(i,t){this.eventService.addEventListener(i,t)},d.prototype.removeEventListener=function(i,t){this.eventService.removeEventListener(i,t)},d.prototype.onTouchStart=function(i){var t=this;if(!this.touching){this.touchStart=i.touches[0],this.touching=!0,this.moved=!1;var s=this.touchStart;window.setTimeout(function(){t.touching&&t.touchStart===s&&!t.moved&&(t.moved=!0,t.eventService.dispatchEvent({type:d.EVENT_LONG_TAP,touchStart:t.touchStart,touchEvent:i}))},500)}},d.prototype.onTouchMove=function(i){if(this.touching){var t=this.getActiveTouch(i.touches);t&&!z_(t,this.touchStart,4)&&(this.moved=!0)}},d.prototype.onTouchEnd=function(i){this.touching&&(this.moved||(this.eventService.dispatchEvent({type:d.EVENT_TAP,touchStart:this.touchStart}),this.checkForDoubleTap()),this.preventMouseClick&&i.preventDefault(),this.touching=!1)},d.prototype.checkForDoubleTap=function(){var i=(new Date).getTime();this.lastTapTime&&this.lastTapTime>0&&i-this.lastTapTime>d.DOUBLE_TAP_MILLIS?(this.eventService.dispatchEvent({type:d.EVENT_DOUBLE_TAP,touchStart:this.touchStart}),this.lastTapTime=null):this.lastTapTime=i},d.prototype.destroy=function(){this.destroyFuncs.forEach(function(i){return i()})},d.EVENT_TAP="tap",d.EVENT_DOUBLE_TAP="doubleTap",d.EVENT_LONG_TAP="longTap",d.DOUBLE_TAP_MILLIS=500,d}(),iC=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Zi=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},ME=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.lastMovingChanged=0,t}return iC(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.refresh=function(t){return this.params=t,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&this.workOutSort()==this.currentSort&&(this.setDisplayName(t),!0)},i.prototype.workOutTemplate=function(){var t=Pt(this.params.template,i.TEMPLATE);return t&&t.trim?t.trim():t},i.prototype.init=function(t){this.params=t,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(t.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(t)},i.prototype.setDisplayName=function(t){if(this.currentDisplayName!=t.displayName){this.currentDisplayName=t.displayName;var s=ua(this.currentDisplayName);this.eText&&(this.eText.innerHTML=s)}},i.prototype.setupIcons=function(t){this.addInIcon("sortAscending",this.eSortAsc,t),this.addInIcon("sortDescending",this.eSortDesc,t),this.addInIcon("sortUnSort",this.eSortNone,t),this.addInIcon("menu",this.eMenu,t),this.addInIcon("filter",this.eFilter,t)},i.prototype.addInIcon=function(t,s,l){if(null!=s){var c=ui(t,this.gridOptionsWrapper,l);c&&s.appendChild(c)}},i.prototype.setupTap=function(){var t=this,s=this.gridOptionsWrapper;if(!s.isSuppressTouch()){var l=new Do(this.getGui(),!0),c=s.isSuppressMenuHide(),h=c&&Fe(this.eMenu),m=h?new Do(this.eMenu,!0):l;this.params.enableMenu&&this.addManagedListener(m,Do[h?"EVENT_TAP":"EVENT_LONG_TAP"],function(U){s.getApi().showColumnMenuAfterMouseClick(t.params.column,U.touchStart)}),this.params.enableSorting&&this.addManagedListener(l,Do.EVENT_TAP,function(U){c&&t.eMenu.contains(U.touchStart.target)||t.sortController.progressSort(t.params.column,!1,"uiColumnSorted")}),this.addDestroyFunc(function(){return l.destroy()}),h&&this.addDestroyFunc(function(){return m.destroy()})}},i.prototype.workOutShowMenu=function(){var t=!this.gridOptionsWrapper.isSuppressMenuHide(),s=nu()&&t;return this.params.enableMenu&&!s},i.prototype.setMenu=function(){var t=this;if(this.eMenu){if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return void Ci(this.eMenu);var s=this.gridOptionsWrapper.isSuppressMenuHide();this.addManagedListener(this.eMenu,"click",function(){return t.showMenu(t.eMenu)}),kt(this.eMenu,"ag-header-menu-always-show",s)}},i.prototype.showMenu=function(t){t||(t=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,t,"columnMenu")},i.prototype.removeSortIcons=function(){Ci(this.eSortAsc),Ci(this.eSortDesc),Ci(this.eSortNone),Ci(this.eSortOrder)},i.prototype.workOutSort=function(){return this.params.enableSorting},i.prototype.setupSort=function(){var t=this;if(this.currentSort=this.params.enableSorting,this.currentSort){var s=this.gridOptionsWrapper.isMultiSortKeyCtrl();this.addManagedListener(this.params.column,Pn.EVENT_MOVING_CHANGED,function(){t.lastMovingChanged=(new Date).getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",function(l){var c=t.params.column.isMoving(),h=(new Date).getTime();c||h-t.lastMovingChanged<50||t.params.progressSort(s?l.ctrlKey||l.metaKey:l.shiftKey)}),this.addManagedListener(this.params.column,Pn.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.onSortChanged(),this.addManagedListener(this.eventService,$.EVENT_SORT_CHANGED,this.setMultiSortOrder.bind(this)),this.setMultiSortOrder()}else this.removeSortIcons()},i.prototype.onSortChanged=function(){if(kt(this.getGui(),"ag-header-cell-sorted-asc",this.params.column.isSortAscending()),kt(this.getGui(),"ag-header-cell-sorted-desc",this.params.column.isSortDescending()),kt(this.getGui(),"ag-header-cell-sorted-none",this.params.column.isSortNone()),this.eSortAsc&&kt(this.eSortAsc,"ag-hidden",!this.params.column.isSortAscending()),this.eSortDesc&&kt(this.eSortDesc,"ag-hidden",!this.params.column.isSortDescending()),this.eSortNone){var t=!this.params.column.getColDef().unSortIcon&&!this.gridOptionsWrapper.isUnSortIcon();kt(this.eSortNone,"ag-hidden",t||!this.params.column.isSortNone())}},i.prototype.setMultiSortOrder=function(){if(this.eSortOrder){var t=this.params.column,s=this.sortController.getColumnsWithSortingOrdered(),l=s.indexOf(t),c=s.length>1,h=t.isSorting()&&c;Xn(this.eSortOrder,h),l>=0?this.eSortOrder.innerHTML=(l+1).toString():co(this.eSortOrder)}},i.prototype.setupFilterIcon=function(){!this.eFilter||(this.addManagedListener(this.params.column,Pn.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},i.prototype.onFilterChanged=function(){var t=this.params.column.isFilterActive();kt(this.eFilter,"ag-hidden",!t)},i.TEMPLATE='<div class="ag-cell-label-container" role="presentation">\n            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n            <div ref="eLabel" class="ag-header-cell-label" role="presentation" unselectable="on">\n                <span ref="eText" class="ag-header-cell-text" unselectable="on"></span>\n                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                <span ref="eSortOrder" class="ag-header-icon ag-header-label-icon ag-sort-order" aria-hidden="true"></span>\n                <span ref="eSortAsc" class="ag-header-icon ag-header-label-icon ag-sort-ascending-icon" aria-hidden="true"></span>\n                <span ref="eSortDesc" class="ag-header-icon ag-header-label-icon ag-sort-descending-icon" aria-hidden="true"></span>\n                <span ref="eSortNone" class="ag-header-icon ag-header-label-icon ag-sort-none-icon" aria-hidden="true"></span>\n            </div>\n        </div>',Zi([H("sortController")],i.prototype,"sortController",void 0),Zi([H("menuFactory")],i.prototype,"menuFactory",void 0),Zi([He("eFilter")],i.prototype,"eFilter",void 0),Zi([He("eSortAsc")],i.prototype,"eSortAsc",void 0),Zi([He("eSortDesc")],i.prototype,"eSortDesc",void 0),Zi([He("eSortNone")],i.prototype,"eSortNone",void 0),Zi([He("eSortOrder")],i.prototype,"eSortOrder",void 0),Zi([He("eMenu")],i.prototype,"eMenu",void 0),Zi([He("eLabel")],i.prototype,"eLabel",void 0),Zi([He("eText")],i.prototype,"eText",void 0),i}(hn),ql=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),vd=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},fp=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return ql(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(t){this.params=t,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},i.prototype.checkWarnings=function(){this.params.template&&mn(function(){return console.warn("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")},"HeaderGroupComp.templateNotSupported")},i.prototype.setupExpandIcons=function(){var t=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var s=function(m){if(!Oa(m)){var S=!t.params.columnGroup.isExpanded();t.columnModel.setColumnGroupOpened(t.params.columnGroup.getOriginalColumnGroup(),S,"uiColumnExpanded")}};this.addTouchAndClickListeners(this.eCloseIcon,s),this.addTouchAndClickListeners(this.eOpenIcon,s);var l=function(m){lo(m)};this.addManagedListener(this.eCloseIcon,"dblclick",l),this.addManagedListener(this.eOpenIcon,"dblclick",l),this.addManagedListener(this.getGui(),"dblclick",s),this.updateIconVisibility();var c=this.params.columnGroup.getOriginalColumnGroup();this.addManagedListener(c,Cr.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(c,Cr.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},i.prototype.addTouchAndClickListeners=function(t,s){var l=new Do(t,!0);this.addManagedListener(l,Do.EVENT_TAP,s),this.addDestroyFunc(function(){return l.destroy()}),this.addManagedListener(t,"click",s)},i.prototype.updateIconVisibility=function(){if(this.params.columnGroup.isExpandable()){var s=this.params.columnGroup.isExpanded();Xn(this.eOpenIcon,s),Xn(this.eCloseIcon,!s)}else Xn(this.eOpenIcon,!1),Xn(this.eCloseIcon,!1)},i.prototype.addInIcon=function(t,s){var l=ui(t,this.gridOptionsWrapper,null);l&&this.getRefElement(s).appendChild(l)},i.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable())return Xn(this.eOpenIcon,!1),void Xn(this.eCloseIcon,!1)},i.prototype.setupLabel=function(){var t=this.params.displayName;if(Fe(t)){var s=ua(t);this.getRefElement("agLabel").innerHTML=s}},i.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">\n            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>',vd([H("columnModel")],i.prototype,"columnModel",void 0),vd([He("agOpened")],i.prototype,"eOpenIcon",void 0),vd([He("agClosed")],i.prototype,"eCloseIcon",void 0),i}(hn),OE=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Uu=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return OE(i,d),i.prototype.isPopup=function(){return!0},i.prototype.setParentComponent=function(t){At(t.getGui(),"ag-has-popup"),d.prototype.setParentComponent.call(this,t)},i.prototype.destroy=function(){var t=this.parentComponent;t&&t.isAlive()&&_i(t.getGui(),"ag-has-popup"),d.prototype.destroy.call(this)},i}(hn),oC=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),aC=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return oC(i,d),i.prototype.init=function(t){this.params=t,this.focusAfterAttached=t.cellStartedEdit,this.eTextArea.setMaxLength(t.maxLength||200).setCols(t.cols||60).setRows(t.rows||10),Fe(t.value)&&this.eTextArea.setValue(t.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this))},i.prototype.onKeyDown=function(t){var s=t.which||t.keyCode;(s===Xe.LEFT||s===Xe.UP||s===Xe.RIGHT||s===Xe.DOWN||t.shiftKey&&s===Xe.ENTER)&&t.stopPropagation()},i.prototype.afterGuiAttached=function(){var t=this.gridOptionsWrapper.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(t("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()},i.prototype.getValue=function(){return this.params.parseValue(this.eTextArea.getValue())},i.TEMPLATE='<div class="ag-large-text" tabindex="0">\n            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([He("eTextArea")],i.prototype,"eTextArea",void 0),i}(Uu),gd=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),pp=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},md=function(d){function i(){var t=d.call(this,'<div class="ag-cell-edit-wrapper"><ag-select class="ag-cell-editor" ref="eSelect"></ag-select></div>')||this;return t.startedByEnter=!1,t}return gd(i,d),i.prototype.init=function(t){var s=this;if(this.focusAfterAttached=t.cellStartedEdit,we(t.values))console.warn("AG Grid: no values found for select cellEditor");else{this.startedByEnter=t.keyPress===Xe.ENTER;var l=!1;t.values.forEach(function(c){var h={value:c},m=s.valueFormatterService.formatValue(t.column,null,null,c);h.text=null!=m?m:c,s.eSelect.addOption(h),l=l||t.value===c}),l?this.eSelect.setValue(t.value,!0):t.values.length&&this.eSelect.setValue(t.values[0],!0),this.gridOptionsWrapper.isFullRowEdit()||this.eSelect.onValueChange(function(){return t.stopEditing()})}},i.prototype.afterGuiAttached=function(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&this.eSelect.showPicker()},i.prototype.focusIn=function(){this.eSelect.getFocusableElement().focus()},i.prototype.getValue=function(){return this.eSelect.getValue()},i.prototype.isPopup=function(){return!1},pp([H("valueFormatterService")],i.prototype,"valueFormatterService",void 0),pp([He("eSelect")],i.prototype,"eSelect",void 0),i}(Uu),hp=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),yd=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return hp(i,d),i.prototype.isPopup=function(){return!0},i}(md),IE=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),_d=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return IE(i,d),i.prototype.init=function(t){this.params=t;var l,s=this.eInput;t.cellStartedEdit?(this.focusAfterAttached=!0,t.keyPress===Xe.BACKSPACE||t.keyPress===Xe.DELETE?l="":t.charPress?l=t.charPress:(l=this.getStartValue(t),t.keyPress!==Xe.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,l=this.getStartValue(t)),null!=l&&s.setValue(l,!0),this.addManagedListener(s.getGui(),"keydown",function(c){var h=c.keyCode;(h===Xe.PAGE_UP||h===Xe.PAGE_DOWN)&&c.preventDefault()})},i.prototype.afterGuiAttached=function(){var t=this.gridOptionsWrapper.getLocaleTextFunc(),s=this.eInput;if(s.setInputAriaLabel(t("ariaInputEditor","Input Editor")),this.focusAfterAttached){ed()||s.getFocusableElement().focus();var l=s.getInputElement();if(this.highlightAllOnFocus)l.select();else{var c=s.getValue(),h=Fe(c)&&c.length||0;h&&l.setSelectionRange(h,h)}}},i.prototype.focusIn=function(){var t=this.eInput,s=t.getFocusableElement(),l=t.getInputElement();s.focus(),l.select()},i.prototype.focusOut=function(){var t=this.eInput.getInputElement();Ki()&&t.setSelectionRange(0,0)},i.prototype.getValue=function(){return this.params.parseValue(this.eInput.getValue())},i.prototype.getStartValue=function(t){return t.useFormatter||t.column.getColDef().refData?t.formatValue(t.value):t.value},i.prototype.isPopup=function(){return!1},i.TEMPLATE='<div class="ag-cell-edit-wrapper"><ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field></div>',function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([He("eInput")],i.prototype,"eInput",void 0),i}(Uu),uC=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),vg=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return uC(i,d),i.prototype.isPopup=function(){return!0},i}(_d),LE=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),lC=function(d){function i(){var t=d.call(this,i.TEMPLATE)||this;return t.refreshCount=0,t}return LE(i,d),i.prototype.init=function(t){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(t)},i.prototype.showDelta=function(t,s){var l=Math.abs(s),c=t.formatValue(l),h=Fe(c)?c:l,m=s>=0;this.eDelta.innerHTML=m?"\u2191"+h:"\u2193"+h,kt(this.eDelta,"ag-value-change-delta-up",m),kt(this.eDelta,"ag-value-change-delta-down",!m)},i.prototype.setTimerToRemoveDelta=function(){var t=this;this.refreshCount++;var s=this.refreshCount;window.setTimeout(function(){s===t.refreshCount&&t.hideDeltaValue()},2e3)},i.prototype.hideDeltaValue=function(){_i(this.eValue,"ag-value-change-value-highlight"),co(this.eDelta)},i.prototype.refresh=function(t){var s=t.value;return s!==this.lastValue&&(Fe(t.valueFormatted)?this.eValue.innerHTML=t.valueFormatted:Fe(t.value)?this.eValue.innerHTML=s:co(this.eValue),!this.filterManager.isSuppressFlashingCellsBecauseFiltering())&&("number"==typeof s&&"number"==typeof this.lastValue&&this.showDelta(t,s-this.lastValue),this.lastValue&&At(this.eValue,"ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=s,!0)},i.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([H("filterManager")],i.prototype,"filterManager",void 0),i}(hn),cC=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),zu=function(d){function i(){var t=d.call(this,i.TEMPLATE)||this;return t.refreshCount=0,t.eCurrent=t.queryForHtmlElement(".ag-value-slide-current"),t}return cC(i,d),i.prototype.init=function(t){this.refresh(t)},i.prototype.addSlideAnimation=function(){var t=this;this.refreshCount++;var s=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=ca('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout(function(){s===t.refreshCount&&At(t.ePrevious,"ag-value-slide-out-end")},50),window.setTimeout(function(){s===t.refreshCount&&(t.getGui().removeChild(t.ePrevious),t.ePrevious=null)},3e3)},i.prototype.refresh=function(t){var s=t.value;return we(s)&&(s=""),s!==this.lastValue&&!this.filterManager.isSuppressFlashingCellsBecauseFiltering()&&(this.addSlideAnimation(),this.lastValue=s,Fe(t.valueFormatted)?this.eCurrent.innerHTML=t.valueFormatted:Fe(t.value)?this.eCurrent.innerHTML=s:co(this.eCurrent),!0)},i.TEMPLATE='<span>\n            <span class="ag-value-slide-current"></span>\n        </span>',function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([H("filterManager")],i.prototype,"filterManager",void 0),i}(hn);!function(d){d[d.Above=0]="Above",d[d.Below=1]="Below"}(Y.oh5||(Y.oh5={}));var ln=function(){function d(i){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=d.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.selected=!1,this.beans=i}return d.prototype.setData=function(i){this.setDataCommon(i,!1)},d.prototype.updateData=function(i){this.setDataCommon(i,!0)},d.prototype.setDataCommon=function(i,t){var s=this.data;this.data=i,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable();var l=this.createDataChangedEvent(i,s,t);this.dispatchLocalEvent(l)},d.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},d.prototype.createDataChangedEvent=function(i,t,s){return{type:d.EVENT_DATA_CHANGED,node:this,oldData:t,newData:i,update:s}},d.prototype.createLocalRowEvent=function(i){return{type:i,node:this}},d.prototype.getRowIndexString=function(){return this.rowPinned===fe.PINNED_TOP?"t-"+this.rowIndex:this.rowPinned===fe.PINNED_BOTTOM?"b-"+this.rowIndex:this.rowIndex.toString()},d.prototype.createDaemonNode=function(){var i=new d(this.beans);return i.id=this.id,i.data=this.data,i.daemon=!0,i.selected=this.selected,i.level=this.level,i},d.prototype.setDataAndId=function(i,t){var s=Fe(this.id)?this.createDaemonNode():null,l=this.data;this.data=i,this.updateDataOnDetailNode(),this.setId(t),this.beans.selectionService.syncInRowNode(this,s),this.checkRowSelectable();var c=this.createDataChangedEvent(i,l,!1);this.dispatchLocalEvent(c)},d.prototype.checkRowSelectable=function(){var i=this.beans.gridOptionsWrapper.getIsRowSelectableFunc();this.setRowSelectable(!i||i(this))},d.prototype.setRowSelectable=function(i){this.selectable!==i&&(this.selectable=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_SELECTABLE_CHANGED)))},d.prototype.setId=function(i){var t=this.beans.gridOptionsWrapper.getRowNodeIdFunc();t?this.data?(this.id=t(this.data),this.id&&"string"==typeof this.id&&Wv(this.id,d.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row ID's cannot start with "+d.ID_PREFIX_ROW_GROUP+", this is a reserved prefix for AG Grid's row grouping feature."),this.id&&"string"!=typeof this.id&&(this.id=""+this.id)):this.id=void 0:this.id=i},d.prototype.isPixelInRange=function(i){return!(!Fe(this.rowTop)||!Fe(this.rowHeight))&&i>=this.rowTop&&i<this.rowTop+this.rowHeight},d.prototype.setFirstChild=function(i){this.firstChild!==i&&(this.firstChild=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_FIRST_CHILD_CHANGED)))},d.prototype.setLastChild=function(i){this.lastChild!==i&&(this.lastChild=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_LAST_CHILD_CHANGED)))},d.prototype.setChildIndex=function(i){this.childIndex!==i&&(this.childIndex=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_CHILD_INDEX_CHANGED)))},d.prototype.setRowTop=function(i){this.oldRowTop=this.rowTop,this.rowTop!==i&&(this.rowTop=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_TOP_CHANGED)),this.setDisplayed(null!==i))},d.prototype.clearRowTopAndRowIndex=function(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)},d.prototype.setDisplayed=function(i){this.displayed!==i&&(this.displayed=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_DISPLAYED_CHANGED)))},d.prototype.setDragging=function(i){this.dragging!==i&&(this.dragging=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_DRAGGING_CHANGED)))},d.prototype.setHighlighted=function(i){i!==this.highlighted&&(this.highlighted=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_HIGHLIGHT_CHANGED)))},d.prototype.setAllChildrenCount=function(i){this.allChildrenCount!==i&&(this.allChildrenCount=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},d.prototype.setMaster=function(i){this.master!==i&&(this.master&&!i&&(this.expanded=!1),this.master=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_MASTER_CHANGED)))},d.prototype.setRowHeight=function(i,t){void 0===t&&(t=!1),this.rowHeight=i,this.rowHeightEstimated=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_HEIGHT_CHANGED))},d.prototype.setRowAutoHeight=function(i,t){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[t.getId()]=i,null!=i&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=ku(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())},d.prototype.checkAutoHeights=function(){var i=!1,t=!0,s=0,l=this.__autoHeights;if(null!=l&&(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(function(m){var S=l[m.getId()];null!=S?(t=!1,S>s&&(s=S)):i=!0}),!i&&((t||s<10)&&(s=this.beans.gridOptionsWrapper.getRowHeightForNode(this).height),s!=this.rowHeight))){this.setRowHeight(s);var h=this.beans.rowModel;h.onRowHeightChanged&&h.onRowHeightChanged()}},d.prototype.setRowIndex=function(i){this.rowIndex!==i&&(this.rowIndex=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_ROW_INDEX_CHANGED)))},d.prototype.setUiLevel=function(i){this.uiLevel!==i&&(this.uiLevel=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_UI_LEVEL_CHANGED)))},d.prototype.setExpanded=function(i){if(this.expanded!==i){this.expanded=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_EXPANDED_CHANGED));var t=ii({},this.createGlobalRowEvent($.EVENT_ROW_GROUP_OPENED),{expanded:i});this.beans.rowNodeEventThrottle.dispatchExpanded(t),this.beans.gridOptionsWrapper.isGroupIncludeFooter()&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}},d.prototype.createGlobalRowEvent=function(i){return{type:i,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi()}},d.prototype.dispatchLocalEvent=function(i){this.eventService&&this.eventService.dispatchEvent(i)},d.prototype.setDataValue=function(i,t,s){var l=this.beans.columnModel.getPrimaryColumn(i),c=this.beans.valueService.getValue(l,this);this.beans.valueService.setValue(this,l,t,s),this.dispatchCellChangedEvent(l,t,c)},d.prototype.setGroupValue=function(i,t){var s=this.beans.columnModel.getGridColumn(i);we(this.groupData)&&(this.groupData={});var l=s.getColId(),c=this.groupData[l];c!==t&&(this.groupData[l]=t,this.dispatchCellChangedEvent(s,t,c))},d.prototype.setAggData=function(i){var t=this,s=kf([this.aggData,i]),l=this.aggData;this.aggData=i,this.eventService&&s.forEach(function(c){var h=t.beans.columnModel.getGridColumn(c);t.dispatchCellChangedEvent(h,t.aggData?t.aggData[c]:void 0,l?l[c]:void 0)})},d.prototype.updateHasChildren=function(){var i=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;i!==this.__hasChildren&&(this.__hasChildren=!!i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_HAS_CHILDREN_CHANGED)))},d.prototype.hasChildren=function(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren},d.prototype.isEmptyRowGroupNode=function(){return this.group&&ni(this.childrenAfterGroup)},d.prototype.dispatchCellChangedEvent=function(i,t,s){this.dispatchLocalEvent({type:d.EVENT_CELL_CHANGED,node:this,column:i,newValue:t,oldValue:s})},d.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},d.prototype.isExpandable=function(){return!!(this.hasChildren()&&!this.footer||this.master)},d.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},d.prototype.depthFirstSearch=function(i){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(function(t){return t.depthFirstSearch(i)}),i(this)},d.prototype.calculateSelectedFromChildren=function(){var i=!1,t=!1,s=!1;if(this.childrenAfterGroup)for(var c=0;c<this.childrenAfterGroup.length;c++){var h=this.childrenAfterGroup[c];if(h.selectable)switch(h.isSelected()){case!0:i=!0;break;case!1:t=!0;break;default:s=!0}}this.selectThisNode(s?void 0:!(!i||t)||!(!i&&t)&&void 0)},d.prototype.setSelectedInitialValue=function(i){this.selected=i},d.prototype.setSelected=function(i,t,s){void 0===t&&(t=!1),void 0===s&&(s=!1),this.setSelectedParams({newValue:i,clearSelection:t,suppressFinishActions:s,rangeSelect:!1})},d.prototype.isRowPinned=function(){return this.rowPinned===fe.PINNED_TOP||this.rowPinned===fe.PINNED_BOTTOM},d.prototype.setSelectedParams=function(i){var t=this.beans.gridOptionsWrapper.isGroupSelectsChildren(),s=!0===i.newValue,l=!0===i.clearSelection,c=!0===i.suppressFinishActions,h=!0===i.rangeSelect,m=t&&!0===i.groupSelectsFiltered;if(void 0===this.id)return console.warn("AG Grid: cannot select node until id for node is known"),0;if(this.rowPinned)return console.warn("AG Grid: cannot select pinned rows"),0;if(this.footer)return this.sibling.setSelectedParams(i);if(h&&this.beans.selectionService.getLastSelectedNode()){var S=this.beans.selectionService.getLastSelectedNode()!==this,R=this.beans.gridOptionsWrapper.isRowSelectionMulti();if(S&&R){var D=this.doRowRangeSelection(i.newValue);return this.beans.selectionService.setLastSelectedNode(this),D}}var L=0;return m&&this.group||this.selectThisNode(s)&&L++,t&&this.group&&(L+=this.selectChildNodes(s,m)),c||(s&&(l||!this.beans.gridOptionsWrapper.isRowSelectionMulti())&&(L+=this.beans.selectionService.clearOtherNodes(this)),L>0&&(this.beans.selectionService.updateGroupsFromChildrenSelections(),this.beans.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.beans.gridApi,columnApi:this.beans.columnApi})),s&&this.beans.selectionService.setLastSelectedNode(this)),L},d.prototype.doRowRangeSelection=function(i){var t=this;void 0===i&&(i=!0);var s=this.beans.gridOptionsWrapper.isGroupSelectsChildren(),l=this.beans.selectionService.getLastSelectedNode(),c=this.beans.rowModel.getNodesInRangeForSelection(this,l),h=0;return c.forEach(function(S){S.group&&s||!1===i&&t===S||S.selectThisNode(i)&&h++}),this.beans.selectionService.updateGroupsFromChildrenSelections(),this.beans.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.beans.gridApi,columnApi:this.beans.columnApi}),h},d.prototype.isParentOfNode=function(i){for(var t=this.parent;t;){if(t===i)return!0;t=t.parent}return!1},d.prototype.selectThisNode=function(i){if(!this.selectable&&i||this.selected===i)return!1;this.selected=i,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(d.EVENT_ROW_SELECTED));var l=this.createGlobalRowEvent($.EVENT_ROW_SELECTED);return this.beans.eventService.dispatchEvent(l),!0},d.prototype.selectChildNodes=function(i,t){var s=t?this.childrenAfterFilter:this.childrenAfterGroup;if(we(s))return 0;for(var l=0,c=0;c<s.length;c++)l+=s[c].setSelectedParams({newValue:i,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:t});return l},d.prototype.addEventListener=function(i,t){this.eventService||(this.eventService=new tu),this.eventService.addEventListener(i,t)},d.prototype.removeEventListener=function(i,t){!this.eventService||(this.eventService.removeEventListener(i,t),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))},d.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(d.EVENT_MOUSE_ENTER))},d.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(d.EVENT_MOUSE_LEAVE))},d.prototype.getFirstChildOfFirstChild=function(i){for(var t=this,s=!0,l=!1,c=null;s&&!l;){var h=t.parent;Fe(h)&&t.firstChild?h.rowGroupColumn===i&&(l=!0,c=h):s=!1,t=h}return l?c:null},d.prototype.isFullWidthCell=function(){var i=this.beans.gridOptionsWrapper.getIsFullWidthCellFunc();return!!i&&i(this)},d.prototype.getRoute=function(){if(null!=this.key){for(var i=[],t=this;null!=t.key;)i.push(t.key),t=t.parent;return i.reverse()}},d.ID_PREFIX_ROW_GROUP="row-group-",d.ID_PREFIX_TOP_PINNED="t-",d.ID_PREFIX_BOTTOM_PINNED="b-",d.OBJECT_ID_SEQUENCE=0,d.EVENT_ROW_SELECTED="rowSelected",d.EVENT_DATA_CHANGED="dataChanged",d.EVENT_CELL_CHANGED="cellChanged",d.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",d.EVENT_MASTER_CHANGED="masterChanged",d.EVENT_MOUSE_ENTER="mouseEnter",d.EVENT_MOUSE_LEAVE="mouseLeave",d.EVENT_HEIGHT_CHANGED="heightChanged",d.EVENT_TOP_CHANGED="topChanged",d.EVENT_DISPLAYED_CHANGED="displayedChanged",d.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",d.EVENT_LAST_CHILD_CHANGED="lastChildChanged",d.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",d.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",d.EVENT_EXPANDED_CHANGED="expandedChanged",d.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",d.EVENT_SELECTABLE_CHANGED="selectableChanged",d.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",d.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",d.EVENT_DRAGGING_CHANGED="draggingChanged",d}(),gg=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Kl=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},uu=function(d){function i(){return d.call(this,'\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')||this}return gg(i,d),i.prototype.postConstruct=function(){this.eCheckbox.setPassive(!0)},i.prototype.getCheckboxId=function(){return this.eCheckbox.getInputElement().id},i.prototype.onDataChanged=function(){this.onSelectionChanged()},i.prototype.onSelectableChanged=function(){this.showOrHideSelect()},i.prototype.onSelectionChanged=function(){var t=this.gridOptionsWrapper.getLocaleTextFunc(),s=this.rowNode.isSelected(),l=void 0===s?t("ariaIndeterminate","indeterminate"):!0===s?t("ariaChecked","checked"):t("ariaUnchecked","unchecked"),c=t("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(s,!0),this.eCheckbox.setInputAriaLabel(c+" ("+l+")")},i.prototype.onCheckedClicked=function(t){var s=this.gridOptionsWrapper.isGroupSelectsFiltered();return this.rowNode.setSelectedParams({newValue:!1,rangeSelect:t.shiftKey,groupSelectsFiltered:s})},i.prototype.onUncheckedClicked=function(t){var s=this.gridOptionsWrapper.isGroupSelectsFiltered();return this.rowNode.setSelectedParams({newValue:!0,rangeSelect:t.shiftKey,groupSelectsFiltered:s})},i.prototype.init=function(t){var s=this;if(this.rowNode=t.rowNode,this.column=t.column,this.onSelectionChanged(),this.addGuiEventListener("click",function(m){return lo(m)}),this.addGuiEventListener("dblclick",function(m){return lo(m)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",function(m){var S=s.eCheckbox.getValue();void 0===s.eCheckbox.getPreviousValue()?0===s.onUncheckedClicked(m||{})&&s.onCheckedClicked(m):S?s.onCheckedClicked(m):s.onUncheckedClicked(m||{})}),this.addManagedListener(this.rowNode,ln.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsWrapper.getIsRowSelectableFunc()||this.checkboxCallbackExists()){var h=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,h),this.addManagedListener(this.rowNode,ln.EVENT_DATA_CHANGED,h),this.addManagedListener(this.rowNode,ln.EVENT_CELL_CHANGED,h),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")},i.prototype.showOrHideSelect=function(){var t=this.rowNode.selectable;t&&this.checkboxCallbackExists()&&(t=this.column.isCellCheckboxSelection(this.rowNode)),this.setVisible(t)},i.prototype.checkboxCallbackExists=function(){var t=this.column?this.column.getColDef():null;return!!t&&"function"==typeof t.checkboxSelection},Kl([He("eCheckbox")],i.prototype,"eCheckbox",void 0),Kl([et],i.prototype,"postConstruct",null),i}(hn),Yl=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),$o=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c};(function(d){d[d.ToolPanel=0]="ToolPanel",d[d.HeaderCell=1]="HeaderCell",d[d.RowDrag=2]="RowDrag",d[d.ChartPanel=3]="ChartPanel"})(Y.rvo||(Y.rvo={})),function(d){d[d.Up=0]="Up",d[d.Down=1]="Down"}(Y.HO_||(Y.HO_={})),function(d){d[d.Left=0]="Left",d[d.Right=1]="Right"}(Y.poj||(Y.poj={}));var Vi=function(d){function i(){var s=null!==d&&d.apply(this,arguments)||this;return s.dragSourceAndParamsList=[],s.dropTargets=[],s}var t;return Yl(i,d),t=i,i.prototype.init=function(){this.ePinnedIcon=qo("columnMovePin",this.gridOptionsWrapper,null),this.eHideIcon=qo("columnMoveHide",this.gridOptionsWrapper,null),this.eMoveIcon=qo("columnMoveMove",this.gridOptionsWrapper,null),this.eLeftIcon=qo("columnMoveLeft",this.gridOptionsWrapper,null),this.eRightIcon=qo("columnMoveRight",this.gridOptionsWrapper,null),this.eGroupIcon=qo("columnMoveGroup",this.gridOptionsWrapper,null),this.eAggregateIcon=qo("columnMoveValue",this.gridOptionsWrapper,null),this.ePivotIcon=qo("columnMovePivot",this.gridOptionsWrapper,null),this.eDropNotAllowedIcon=qo("dropNotAllowed",this.gridOptionsWrapper,null)},i.prototype.addDragSource=function(s,l){void 0===l&&(l=!1);var c={eElement:s.eElement,dragStartPixels:s.dragStartPixels,onDragStart:this.onDragStart.bind(this,s),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this)};this.dragSourceAndParamsList.push({params:c,dragSource:s}),this.dragService.addDragSource(c,l)},i.prototype.removeDragSource=function(s){var l=Li(this.dragSourceAndParamsList,function(c){return c.dragSource===s});l&&(this.dragService.removeDragSource(l.params),ri(this.dragSourceAndParamsList,l))},i.prototype.clearDragSourceParamsList=function(){var s=this;this.dragSourceAndParamsList.forEach(function(l){return s.dragService.removeDragSource(l.params)}),this.dragSourceAndParamsList.length=0},i.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},i.prototype.onDragStart=function(s,l){this.dragging=!0,this.dragSource=s,this.eventLastTime=l,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()},i.prototype.onDragStop=function(s){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var l=this.createDropTargetEvent(this.lastDropTarget,s,null,null,!1);this.lastDropTarget.onDragStop(l)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},i.prototype.onDragging=function(s,l){var c=this,h=this.getHorizontalDirection(s),m=this.getVerticalDirection(s);this.eventLastTime=s,this.positionGhost(s);var S=this.dropTargets.filter(function(U){return c.isMouseOnDropTarget(s,U)}),R=S.length,D=null;if(R>0&&(D=1===R?S[0]:S.reduce(function(U,K){if(!U)return K;var ee=U.getContainer(),ae=K.getContainer();return ee.contains(ae)?K:U})),D!==this.lastDropTarget)this.leaveLastTargetIfExists(s,h,m,l),this.enterDragTargetIfExists(D,s,h,m,l),this.lastDropTarget=D;else if(D&&D.onDragging){var L=this.createDropTargetEvent(D,s,h,m,l);D.onDragging(L)}},i.prototype.enterDragTargetIfExists=function(s,l,c,h,m){if(s){if(s.onDragEnter){var S=this.createDropTargetEvent(s,l,c,h,m);s.onDragEnter(S)}this.setGhostIcon(s.getIconName?s.getIconName():null)}},i.prototype.leaveLastTargetIfExists=function(s,l,c,h){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){var m=this.createDropTargetEvent(this.lastDropTarget,s,l,c,h);this.lastDropTarget.onDragLeave(m)}this.setGhostIcon(null)}},i.prototype.getAllContainersFromDropTarget=function(s){var l=s.getSecondaryContainers?s.getSecondaryContainers():null,c=[[s.getContainer()]];return l?c.concat(l):c},i.prototype.allContainersIntersect=function(s,l){for(var c=0,h=l;c<h.length;c++){var S=h[c].getBoundingClientRect();if(0===S.width||0===S.height)return!1;if(!(s.clientX>=S.left&&s.clientX<S.right&&s.clientY>=S.top&&s.clientY<S.bottom))return!1}return!0},i.prototype.isMouseOnDropTarget=function(s,l){for(var h=!1,m=0,S=this.getAllContainersFromDropTarget(l);m<S.length;m++)if(this.allContainersIntersect(s,S[m])){h=!0;break}return h&&l.isInterestedIn(this.dragSource.type)},i.prototype.addDropTarget=function(s){this.dropTargets.push(s)},i.prototype.removeDropTarget=function(s){this.dropTargets=this.dropTargets.filter(function(l){return l.getContainer()!==s.getContainer()})},i.prototype.hasExternalDropZones=function(){return this.dropTargets.some(function(s){return s.external})},i.prototype.findExternalZone=function(s){return Li(this.dropTargets.filter(function(c){return c.external}),function(c){return c.getContainer()===s.getContainer()})},i.prototype.getHorizontalDirection=function(s){var l=this.eventLastTime&&this.eventLastTime.clientX,c=s.clientX;return l===c?null:l>c?Y.poj.Left:Y.poj.Right},i.prototype.getVerticalDirection=function(s){var l=this.eventLastTime&&this.eventLastTime.clientY,c=s.clientY;return l===c?null:l>c?Y.HO_.Up:Y.HO_.Down},i.prototype.createDropTargetEvent=function(s,l,c,h,m){var S=s.getContainer(),R=S.getBoundingClientRect(),D=this;return{event:l,x:l.clientX-R.left,y:l.clientY-R.top,vDirection:h,hDirection:c,dragSource:D.dragSource,fromNudge:m,dragItem:D.dragItem,api:D.gridApi,columnApi:D.columnApi,dropZoneTarget:S}},i.prototype.positionGhost=function(s){var l=this.eGhost;if(l){var h=l.getBoundingClientRect().height,m=tE()-2,S=nE()-2,R=s.pageY-h/2,D=s.pageX-10,L=this.gridOptionsWrapper.getDocument(),U=window.pageYOffset||L.documentElement.scrollTop,K=window.pageXOffset||L.documentElement.scrollLeft;m>0&&D+l.clientWidth>m+K&&(D=m+K-l.clientWidth),D<0&&(D=0),S>0&&R+l.clientHeight>S+U&&(R=S+U-l.clientHeight),R<0&&(R=0),l.style.left=D+"px",l.style.top=R+"px"}},i.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},i.prototype.createGhost=function(){this.eGhost=ca(t.GHOST_TEMPLATE);var s=this.environment.getTheme().theme;s&&At(this.eGhost,s),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var l=this.eGhost.querySelector(".ag-dnd-ghost-label"),c=this.dragSource.dragItemName;eu(c)&&(c=c()),l.innerHTML=ua(c)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var h=this.gridOptionsWrapper.getDocument(),m=h.fullscreenElement||h.querySelector("body");this.eGhostParent=m,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")},i.prototype.setGhostIcon=function(s,l){void 0===l&&(l=!1),co(this.eGhostIcon);var c=null;switch(s||(s=this.dragSource.defaultIconName||t.ICON_NOT_ALLOWED),s){case t.ICON_PINNED:c=this.ePinnedIcon;break;case t.ICON_MOVE:c=this.eMoveIcon;break;case t.ICON_LEFT:c=this.eLeftIcon;break;case t.ICON_RIGHT:c=this.eRightIcon;break;case t.ICON_GROUP:c=this.eGroupIcon;break;case t.ICON_AGGREGATE:c=this.eAggregateIcon;break;case t.ICON_PIVOT:c=this.ePivotIcon;break;case t.ICON_NOT_ALLOWED:c=this.eDropNotAllowedIcon;break;case t.ICON_HIDE:c=this.eHideIcon}kt(this.eGhostIcon,"ag-shake-left-to-right",l),(c!==this.eHideIcon||!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns())&&c&&this.eGhostIcon.appendChild(c)},i.ICON_PINNED="pinned",i.ICON_MOVE="move",i.ICON_LEFT="left",i.ICON_RIGHT="right",i.ICON_GROUP="group",i.ICON_AGGREGATE="aggregate",i.ICON_PIVOT="pivot",i.ICON_NOT_ALLOWED="notAllowed",i.ICON_HIDE="hide",i.GHOST_TEMPLATE='<div class="ag-dnd-ghost ag-unselectable">\n            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n            <div class="ag-dnd-ghost-label"></div>\n        </div>',$o([H("dragService")],i.prototype,"dragService",void 0),$o([H("environment")],i.prototype,"environment",void 0),$o([H("columnApi")],i.prototype,"columnApi",void 0),$o([H("gridApi")],i.prototype,"gridApi",void 0),$o([et],i.prototype,"init",null),$o([Fi],i.prototype,"clearDragSourceParamsList",null),t=$o([vt("dragAndDropService")],i)}(Ye),$l=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ua=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Xl=function(d){function i(t,s,l,c,h,m){var S=d.call(this)||this;return S.cellValueFn=t,S.rowNode=s,S.column=l,S.customGui=c,S.dragStartPixels=h,S.suppressVisibilityChange=m,S.dragSource=null,S}return $l(i,d),i.prototype.isCustomGui=function(){return null!=this.customGui},i.prototype.postConstruct=function(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(ui("rowDrag",this.beans.gridOptionsWrapper,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){var t=this.beans.gridOptionsWrapper.isRowDragManaged()?new mg(this,this.beans,this.rowNode,this.column):new In(this,this.beans,this.rowNode,this.column);this.createManagedBean(t,this.beans.context)}},i.prototype.setDragElement=function(t,s){this.setTemplateFromElement(t),this.addDragSource(s)},i.prototype.getSelectedCount=function(){if(!this.beans.gridOptionsWrapper.isRowDragMultiRow())return 1;var s=this.beans.selectionService.getSelectedNodes();return-1!==s.indexOf(this.rowNode)?s.length:1},i.prototype.checkCompatibility=function(){var t=this.beans.gridOptionsWrapper.isRowDragManaged();this.beans.gridOptionsWrapper.isTreeData()&&t&&mn(function(){return console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true")},"RowDragComp.managedAndTreeData")},i.prototype.addDragSource=function(t){var s=this;void 0===t&&(t=4),this.dragSource&&this.removeDragSource();var l={rowNode:this.rowNode,columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()},c=this.column&&this.column.getColDef().rowDragText;this.dragSource={type:Y.rvo.RowDrag,eElement:this.getGui(),dragItemName:function(){var m=s.getSelectedCount();return c?c(l,m):1===m?s.cellValueFn():m+" rows"},getDragItem:function(){return l},dragStartPixels:t,dragSourceDomDataKey:this.beans.gridOptionsWrapper.getDomDataKey()},this.addMouseDownListenerIfNeeded(),this.beans.dragAndDropService.addDragSource(this.dragSource,!0)},i.prototype.addMouseDownListenerIfNeeded=function(){var t=this;this.customGui||!this.column||!this.gridOptionsWrapper.isEnableCellTextSelect()||this.addManagedListener(this.getGui(),"mousedown",function(s){s.preventDefault(),t.beans.focusService.setFocusedCell(t.rowNode.rowIndex,t.column,t.rowNode.rowPinned,!0)})},i.prototype.removeDragSource=function(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null},Ua([H("beans")],i.prototype,"beans",void 0),Ua([et],i.prototype,"postConstruct",null),Ua([Fi],i.prototype,"removeDragSource",null),i}(hn),fC=function(d){function i(t,s,l){var c=d.call(this)||this;return c.parent=t,c.rowNode=s,c.column=l,c}return $l(i,d),i.prototype.setDisplayedOrVisible=function(t){if(t)this.parent.setDisplayed(!1);else{var s=!0,l=!1;this.column&&(s=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),l=eu(this.column.getColDef().rowDrag)),l?(this.parent.setDisplayed(!0),this.parent.setVisible(s)):(this.parent.setDisplayed(s),this.parent.setVisible(!0))}},i}(Ye),In=function(d){function i(t,s,l,c){var h=d.call(this,t,l,c)||this;return h.beans=s,h}return $l(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()},i.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},i.prototype.workOutVisibility=function(){var t=this.beans.gridOptionsWrapper.isSuppressRowDrag();this.setDisplayedOrVisible(t)},Ua([et],i.prototype,"postConstruct",null),i}(fC),mg=function(d){function i(t,s,l,c){var h=d.call(this,t,l,c)||this;return h.beans=s,h}return $l(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.beans.eventService,$.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()},i.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},i.prototype.workOutVisibility=function(){var s=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),l=s&&s.shouldPreventRowMove(),c=this.beans.gridOptionsWrapper.isSuppressRowDrag(),h=this.beans.dragAndDropService.hasExternalDropZones();this.setDisplayedOrVisible(l&&!h||c)},Ua([et],i.prototype,"postConstruct",null),i}(fC),kE=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),gp=function(){return gp=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},gp.apply(this,arguments)},Jl=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},NE=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return kE(i,d),i.prototype.init=function(t,s,l,c,h,m,S){this.params=S,this.eGui=s,this.eCheckbox=l,this.eExpanded=c,this.eContracted=h,this.comp=t,this.compClass=m;var R=this.isTopLevelFooter(),D=this.isEmbeddedRowMismatch(),L=null==S.value,U=!1;if(this.gridOptionsWrapper.isGroupIncludeFooter()&&this.gridOptionsWrapper.isGroupHideOpenParents()){var K=S.node;K.footer&&(U=(S.colDef&&S.colDef.showRowGroup)!==(K.rowGroupColumn&&K.rowGroupColumn.getColId()))}this.cellIsBlank=!R&&(D||L||U),!this.cellIsBlank&&(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),this.addFullWidthRowDraggerIfNeeded(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent())},i.prototype.isTopLevelFooter=function(){if(!this.gridOptionsWrapper.isGroupIncludeTotalFooter()||null!=this.params.value||-1!=this.params.node.level)return!1;var t=this.params.colDef;if(null==t||!0===t.showRowGroup)return!0;var l=this.columnModel.getRowGroupColumns();return!l||0===l.length||l[0].getId()===t.showRowGroup},i.prototype.isEmbeddedRowMismatch=function(){if(!this.params.fullWidth||!this.gridOptionsWrapper.isEmbedFullWidthRows())return!1;var t=this.params.pinned===fe.PINNED_LEFT,s=this.params.pinned===fe.PINNED_RIGHT,l=!t&&!s;return this.gridOptionsWrapper.isEnableRtl()?this.columnModel.isPinningLeft()?!s:!l:this.columnModel.isPinningLeft()?!t:!l},i.prototype.findDisplayedGroupNode=function(){var t=this.params.column,s=this.params.node;if(this.showingValueForOpenedParent)for(var l=s.parent;null!=l;){if(l.rowGroupColumn&&t.isRowGroupDisplayed(l.rowGroupColumn.getId())){this.displayedGroupNode=l;break}l=l.parent}we(this.displayedGroupNode)&&(this.displayedGroupNode=s)},i.prototype.setupShowingValueForOpenedParent=function(){var t=this.params.node,s=this.params.column;if(this.gridOptionsWrapper.isGroupHideOpenParents())if(t.groupData){if(null!=t.rowGroupColumn){var c=t.rowGroupColumn.getId();if(s.isRowGroupDisplayed(c))return void(this.showingValueForOpenedParent=!1)}var m=null!=t.groupData[s.getId()];this.showingValueForOpenedParent=m}else this.showingValueForOpenedParent=!1;else this.showingValueForOpenedParent=!1},i.prototype.addValueElement=function(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())},i.prototype.addGroupValue=function(){var t=this.adjustParamsWithDetailsFromRelatedColumn(),s=this.getInnerCompDetails(t),l=t.valueFormatted;this.comp.setInnerRenderer(s,null!=l?l:t.value)},i.prototype.adjustParamsWithDetailsFromRelatedColumn=function(){var t=this.displayedGroupNode.rowGroupColumn,s=this.params.column;if(!t)return this.params;if(null!=s&&!s.isRowGroupDisplayed(t.getId()))return this.params;var h=this.params,m=this.params,L=this.valueFormatterService.formatValue(t,m.node,m.scope,m.value);return gp(gp({},h),{valueFormatted:L})},i.prototype.addFooterValue=function(){var t=this.params.footerValueGetter,s="";if(t){var l=hs(this.params);l.value=this.params.value,"function"==typeof t?s=t(l):"string"==typeof t?s=this.expressionService.evaluate(t,l):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else s="Total "+(null!=this.params.value?this.params.value:"");var c=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(c,s)},i.prototype.getInnerCompDetails=function(t){var s=this;if(t.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptions.groupRowRendererParams,t);var l=this.userComponentFactory.getInnerRendererDetails(t,t),c=function(L){return L&&L.componentClass==s.compClass};if(l&&!c(l))return l;var h=this.displayedGroupNode.rowGroupColumn,m=h?h.getColDef():void 0;if(m){var S=this.userComponentFactory.getCellRendererDetails(m,t);if(S&&!c(S))return S;if(c(S)&&m.cellRendererParams&&m.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(m.cellRendererParams,t)}},i.prototype.addChildCount=function(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,ln.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},i.prototype.updateChildCount=function(){var t=this.displayedGroupNode.allChildrenCount,s=this.isShowRowGroupForThisRow();this.comp.setChildCount(s&&null!=t&&t>=0?"("+t+")":"")},i.prototype.isShowRowGroupForThisRow=function(){if(this.gridOptionsWrapper.isTreeData())return!0;var t=this.displayedGroupNode.rowGroupColumn;if(!t)return!1;var s=this.params.column;return null==s||s.isRowGroupDisplayed(t.getId())},i.prototype.addExpandAndContract=function(){var t=this.params,s=ui("groupExpanded",this.gridOptionsWrapper,null),l=ui("groupContracted",this.gridOptionsWrapper,null);s&&this.eExpanded.appendChild(s),l&&this.eContracted.appendChild(l);var c=t.eGridCell;!this.gridOptionsWrapper.isEnableGroupEdit()&&this.isExpandable()&&!t.suppressDoubleClickExpand&&this.addManagedListener(c,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(c,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(t.node,ln.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();var h=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,ln.EVENT_ALL_CHILDREN_COUNT_CHANGED,h),this.addManagedListener(this.displayedGroupNode,ln.EVENT_MASTER_CHANGED,h),this.addManagedListener(this.displayedGroupNode,ln.EVENT_HAS_CHILDREN_CHANGED,h)},i.prototype.onExpandClicked=function(t){Oa(t)||(lo(t),this.onExpandOrContract())},i.prototype.onExpandOrContract=function(){var t=this.displayedGroupNode;t.setExpanded(!t.expanded)},i.prototype.isExpandable=function(){if(this.showingValueForOpenedParent)return!0;var t=this.displayedGroupNode,s=this.columnModel.isPivotMode()&&t.leafGroup;if(!t.isExpandable()||t.footer||s)return!1;var c=this.params.column;return null==c||"string"!=typeof c.getColDef().showRowGroup||this.isShowRowGroupForThisRow()},i.prototype.showExpandAndContractIcons=function(){var t=this,l=t.displayedGroupNode,c=t.columnModel,h=t.params.node,m=this.isExpandable();if(m){var S=!!this.showingValueForOpenedParent||h.expanded;this.comp.setExpandedDisplayed(S),this.comp.setContractedDisplayed(!S)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);var R=c.isPivotMode(),D=R&&l.leafGroup,L=m&&!D,U=h.footer&&-1===h.level;this.comp.addOrRemoveCssClass("ag-cell-expandable",L),this.comp.addOrRemoveCssClass("ag-row-group",L),R?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",D):U||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!L)},i.prototype.onRowNodeIsExpandableChanged=function(){this.showExpandAndContractIcons(),this.setIndent()},i.prototype.setupIndent=function(){this.params.suppressPadding||(this.addManagedListener(this.params.node,ln.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},i.prototype.setIndent=function(){if(!this.gridOptionsWrapper.isGroupHideOpenParents()){var t=this.params,s=t.node,l=!!t.colDef,c=this.gridOptionsWrapper.isTreeData(),m=!l||c||!0===t.colDef.showRowGroup?s.uiLevel:0;t.padding>=0&&mn(function(){return console.warn("AG Grid: cellRendererParams.padding no longer works, it was deprecated in since v14.2 and removed in v26, configuring padding for groupCellRenderer should be done with Sass variables and themes. Please see the AG Grid documentation page for Themes, in particular the property $row-group-indent-size.")},"groupCellRenderer->doDeprecatedWay"),this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+m,this.comp.addOrRemoveCssClass(this.indentClass,!0)}},i.prototype.addFullWidthRowDraggerIfNeeded=function(){var t=this;if(this.params.fullWidth&&this.params.rowDrag){var s=new Xl(function(){return t.params.value},this.params.node);this.createManagedBean(s,this.context),this.eGui.insertAdjacentElement("afterbegin",s.getGui())}},i.prototype.isUserWantsSelected=function(){var t=this.params.checkbox;return"function"==typeof t?t(this.params):!0===t},i.prototype.addCheckboxIfNeeded=function(){var t=this,s=this.displayedGroupNode,l=this.isUserWantsSelected()&&!s.footer&&!s.rowPinned&&!s.detail;if(l){var c=new uu;this.getContext().createBean(c),c.init({rowNode:s,column:this.params.column}),this.eCheckbox.appendChild(c.getGui()),this.addDestroyFunc(function(){return t.getContext().destroyBean(c)})}this.comp.setCheckboxVisible(l)},i.prototype.onKeyDown=function(t){sd(t,Xe.ENTER)&&!this.params.suppressEnterExpand&&(this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract())},i.prototype.onCellDblClicked=function(t){Oa(t)||Wf(this.eExpanded,t)||Wf(this.eContracted,t)||this.onExpandOrContract()},Jl([H("expressionService")],i.prototype,"expressionService",void 0),Jl([H("valueFormatterService")],i.prototype,"valueFormatterService",void 0),Jl([H("columnModel")],i.prototype,"columnModel",void 0),Jl([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Jl([H("gridOptions")],i.prototype,"gridOptions",void 0),i}(Ye),RM=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),wd=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},ju=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return RM(i,d),i.prototype.init=function(t){var s=this,l={setInnerRenderer:function(R,D){return s.setRenderDetails(R,D)},setChildCount:function(R){return s.eChildCount.innerHTML=R},addOrRemoveCssClass:function(R,D){return s.addOrRemoveCssClass(R,D)},setContractedDisplayed:function(R){return Xn(s.eContracted,R)},setExpandedDisplayed:function(R){return Xn(s.eExpanded,R)},setCheckboxVisible:function(R){return kt(s.eCheckbox,"ag-invisible",!R)}},c=this.createManagedBean(new NE),h=!t.colDef,m=this.getGui();c.init(l,m,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,t),h&&Yi(m,"gridcell")},i.prototype.setRenderDetails=function(t,s){var l=this;if(t){var c=t.newAgStackInstance();if(!c)return;c.then(function(h){if(h){var m=function(){return l.context.destroyBean(h)};l.isAlive()?(l.eValue.appendChild(h.getGui()),l.addDestroyFunc(m)):m()}})}else this.eValue.innerText=s},i.prototype.destroy=function(){this.getContext().destroyBean(this.innerCellRenderer),d.prototype.destroy.call(this)},i.prototype.refresh=function(){return!1},i.TEMPLATE='<span class="ag-cell-wrapper">\n            <span class="ag-group-expanded" ref="eExpanded"></span>\n            <span class="ag-group-contracted" ref="eContracted"></span>\n            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>\n            <span class="ag-group-value" ref="eValue"></span>\n            <span class="ag-group-child-count" ref="eChildCount"></span>\n        </span>',wd([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),wd([He("eExpanded")],i.prototype,"eExpanded",void 0),wd([He("eContracted")],i.prototype,"eContracted",void 0),wd([He("eCheckbox")],i.prototype,"eCheckbox",void 0),wd([He("eValue")],i.prototype,"eValue",void 0),wd([He("eChildCount")],i.prototype,"eChildCount",void 0),i}(hn),TM=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),zr=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},yg=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return TM(i,d),i.prototype.init=function(t){t.node.failedLoad?this.setupFailed():this.setupLoading()},i.prototype.setupFailed=function(){this.eLoadingText.innerText="ERR"},i.prototype.setupLoading=function(){var t=ui("groupLoading",this.gridOptionsWrapper,null);t&&this.eLoadingIcon.appendChild(t);var s=this.gridOptionsWrapper.getLocaleTextFunc();this.eLoadingText.innerText=s("loadingOoo","Loading")},i.prototype.refresh=function(t){return!1},i.TEMPLATE='<div class="ag-loading">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',zr([He("eLoadingIcon")],i.prototype,"eLoadingIcon",void 0),zr([He("eLoadingText")],i.prototype,"eLoadingText",void 0),i}(hn),Sd=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),DM=function(d){function i(){return d.call(this)||this}return Sd(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(t){var s=this.gridOptionsWrapper.getOverlayLoadingTemplate()?this.gridOptionsWrapper.getOverlayLoadingTemplate():i.DEFAULT_LOADING_OVERLAY_TEMPLATE,l=this.gridOptionsWrapper.getLocaleTextFunc(),c=s.replace("[LOADING...]",l("loadingOoo","Loading..."));this.setTemplate(c)},i.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',i}(hn),GE=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Xo=function(d){function i(){return d.call(this)||this}return GE(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(t){var s=this.gridOptionsWrapper.getOverlayNoRowsTemplate()?this.gridOptionsWrapper.getOverlayNoRowsTemplate():i.DEFAULT_NO_ROWS_TEMPLATE,l=this.gridOptionsWrapper.getLocaleTextFunc(),c=s.replace("[NO_ROWS_TO_SHOW]",l("noRowsToShow","No Rows To Show"));this.setTemplate(c)},i.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',i}(hn),za=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),pC=function(d){function i(){return d.call(this,'<div class="ag-tooltip"></div>')||this}return za(i,d),i.prototype.init=function(t){var s=t.value;this.getGui().innerHTML=ua(s)},i}(Uu),mp=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),qu=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},_g=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.agGridDefaults={agDateInput:su,agColumnHeader:ME,agColumnGroupHeader:fp,agTextColumnFloatingFilter:hd,agNumberColumnFloatingFilter:rC,agDateColumnFloatingFilter:fg,agReadOnlyFloatingFilter:lr,agAnimateShowChangeCellRenderer:lC,agAnimateSlideCellRenderer:zu,agGroupCellRenderer:ju,agGroupRowRenderer:ju,agLoadingCellRenderer:yg,agCellEditor:_d,agTextCellEditor:_d,agSelectCellEditor:md,agPopupTextCellEditor:vg,agPopupSelectCellEditor:yd,agLargeTextCellEditor:aC,agTextColumnFilter:cp,agNumberColumnFilter:pg,agDateColumnFilter:dg,agLoadingOverlay:DM,agNoRowsOverlay:Xo,agTooltipComponent:pC},t.agDeprecatedNames={set:{newComponentName:"agSetColumnFilter",propertyHolder:"filter"},text:{newComponentName:"agTextColumnFilter",propertyHolder:"filter"},number:{newComponentName:"agNumberColumnFilter",propertyHolder:"filter"},date:{newComponentName:"agDateColumnFilter",propertyHolder:"filter"},group:{newComponentName:"agGroupCellRenderer",propertyHolder:"cellRenderer"},animateShowChange:{newComponentName:"agAnimateShowChangeCellRenderer",propertyHolder:"cellRenderer"},animateSlide:{newComponentName:"agAnimateSlideCellRenderer",propertyHolder:"cellRenderer"},select:{newComponentName:"agSelectCellEditor",propertyHolder:"cellEditor"},largeText:{newComponentName:"agLargeTextCellEditor",propertyHolder:"cellEditor"},popupSelect:{newComponentName:"agPopupSelectCellEditor",propertyHolder:"cellEditor"},popupText:{newComponentName:"agPopupTextCellEditor",propertyHolder:"cellEditor"},richSelect:{newComponentName:"agRichSelectCellEditor",propertyHolder:"cellEditor"},headerComponent:{newComponentName:"agColumnHeader",propertyHolder:"headerComponent"}},t.jsComponents={},t.frameworkComponents={},t}return mp(i,d),i.prototype.init=function(){var t=this;null!=this.gridOptions.components&&Nn(this.gridOptions.components,function(s,l){return t.registerComponent(s,l)}),null!=this.gridOptions.frameworkComponents&&Nn(this.gridOptions.frameworkComponents,function(s,l){return t.registerFwComponent(s,l)})},i.prototype.registerDefaultComponent=function(t,s){var l=this.translateIfDeprecated(t);this.agGridDefaults[l]?console.error("Trying to overwrite a default component. You should call registerComponent"):this.agGridDefaults[l]=s},i.prototype.registerComponent=function(t,s){var l=this.translateIfDeprecated(t);this.frameworkComponents[l]?console.error("Trying to register a component that you have already registered for frameworks: "+l):this.jsComponents[l]=s},i.prototype.registerFwComponent=function(t,s){var l=this.translateIfDeprecated(t);this.jsComponents[l]?console.error("Trying to register a component that you have already registered for plain javascript: "+l):this.frameworkComponents[l]=s},i.prototype.retrieve=function(t){var s=this.translateIfDeprecated(t),l=this.frameworkComponents[s]||this.getFrameworkOverrides().frameworkComponent(s);if(l)return{componentFromFramework:!0,component:l};var c=this.jsComponents[s];if(c)return{componentFromFramework:!1,component:c};var h=this.agGridDefaults[s];return h?{componentFromFramework:!1,component:h}:(Object.keys(this.agGridDefaults).indexOf(s)<0&&console.warn("AG Grid: Looking for component ["+s+"] but it wasn't found."),null)},i.prototype.translateIfDeprecated=function(t){var s=this.agDeprecatedNames[t];return null!=s?(mn(function(){console.warn("ag-grid. Since v15.0 component names have been renamed to be namespaced. You should rename "+s.propertyHolder+":"+t+" to "+s.propertyHolder+":"+s.newComponentName)},"DEPRECATE_COMPONENT_"+t),s.newComponentName):t},qu([H("gridOptions")],i.prototype,"gridOptions",void 0),qu([et],i.prototype,"init",null),qu([vt("userComponentRegistry")],i)}(Ye),BE={propertyName:"dateComponent",isCellRenderer:function(){return!1}},HE={propertyName:"headerComponent",isCellRenderer:function(){return!1}},AM={propertyName:"headerGroupComponent",isCellRenderer:function(){return!1}},VE={propertyName:"cellRenderer",isCellRenderer:function(){return!0}},hC={propertyName:"cellEditor",isCellRenderer:function(){return!1}},mo={propertyName:"innerRenderer",isCellRenderer:function(){return!0}},Cg={propertyName:"loadingOverlayComponent",isCellRenderer:function(){return!1}},Zl={propertyName:"noRowsOverlayComponent",isCellRenderer:function(){return!1}},MM={propertyName:"tooltipComponent",isCellRenderer:function(){return!1}},vC={propertyName:"filter",isCellRenderer:function(){return!1}},WE={propertyName:"floatingFilterComponent",isCellRenderer:function(){return!1}},UE={propertyName:"toolPanel",isCellRenderer:function(){return!1}},zE={propertyName:"statusPanel",isCellRenderer:function(){return!1}},jE=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ql=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},wg=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return jE(i,d),i.prototype.getHeaderCompDetails=function(t,s){return this.getCompDetails(t,HE,"agColumnHeader",s)},i.prototype.getHeaderGroupCompDetails=function(t){var s=t.columnGroup.getColGroupDef();return this.getCompDetails(s,AM,"agColumnGroupHeader",t)},i.prototype.getFullWidthCellRendererDetails=function(t,s,l){return this.getCompDetails(this.gridOptions,{propertyName:s,isCellRenderer:function(){return!0}},l,t)},i.prototype.getInnerRendererDetails=function(t,s){return this.getCompDetails(t,mo,null,s)},i.prototype.getFullWidthGroupRowInnerCellRenderer=function(t,s){return this.getCompDetails(t,mo,null,s)},i.prototype.getCellRendererDetails=function(t,s){return this.getCompDetails(t,VE,null,s)},i.prototype.getCellEditorDetails=function(t,s){return this.getCompDetails(t,hC,"agCellEditor",s,!0)},i.prototype.getFilterDetails=function(t,s,l){return this.getCompDetails(t,vC,l,s,!0)},i.prototype.getDateCompDetails=function(t){return this.getCompDetails(this.gridOptions,BE,"agDateInput",t,!0)},i.prototype.getLoadingOverlayCompDetails=function(t){return this.getCompDetails(this.gridOptions,Cg,"agLoadingOverlay",t,!0)},i.prototype.getNoRowsOverlayCompDetails=function(t){return this.getCompDetails(this.gridOptions,Zl,"agNoRowsOverlay",t,!0)},i.prototype.getTooltipCompDetails=function(t){return this.getCompDetails(t.colDef,MM,"agTooltipComponent",t,!0)},i.prototype.getSetFilterCellRendererDetails=function(t,s){return this.getCompDetails(t,VE,null,s)},i.prototype.getFloatingFilterCompDetails=function(t,s,l){return this.getCompDetails(t,WE,l,s)},i.prototype.getToolPanelCompDetails=function(t,s){return this.getCompDetails(t,UE,null,s,!0)},i.prototype.getStatusPanelCompDetails=function(t,s){return this.getCompDetails(t,zE,null,s,!0)},i.prototype.getCompDetails=function(t,s,l,c,h){var m=this;void 0===h&&(h=!1);var R,D,L,S=s.propertyName;if(t){var U=t,K=U[S+"Selector"],ee=K?K(c):null;ee?(R=ee.component,D=ee.frameworkComponent,L=ee.params):(R=U[S],D=U[S+"Framework"]),!0===R&&(R=void 0)}var ae=function(an){var Gt=m.userComponentRegistry.retrieve(an);Gt?(R=Gt.componentFromFramework?void 0:Gt.component,D=Gt.componentFromFramework?Gt.component:void 0):(R=void 0,D=void 0)};if("string"==typeof R&&ae(R),null==R&&null==D&&null!=l&&ae(l),R&&!this.agComponentUtils.doesImplementIComponent(R)&&(R=this.agComponentUtils.adaptFunction(S,R)),R||D){var We=this.mergeParamsWithApplicationProvidedParams(t,S,c,L),Pe=null==R,Qe=R||D;return{componentFromFramework:Pe,componentClass:Qe,params:We,type:s,newAgStackInstance:function(an){return m.newAgStackInstance(Qe,Pe,We,s,an)}}}h&&console.error("Could not find component "+((t?t[S]:l)||l)+", did you forget to configure this component?")},i.prototype.newAgStackInstance=function(t,s,l,c,h){var S;if(s){var D=this.componentMetadataProvider.retrieve(c.propertyName);S=this.frameworkComponentWrapper.wrap(t,D.mandatoryMethodList,D.optionalMethodList,c,h)}else S=new t;var L=this.initComponent(S,l);return null==L?Qr.resolve(S):L.then(function(){return S})},i.prototype.mergeParamsWithApplicationProvidedParams=function(t,s,l,c){void 0===c&&(c=null);var h={};uo(h,l);var m=t?t[s+"Params"]:null;return null!=m&&("function"==typeof m?uo(h,m(l)):"object"==typeof m&&uo(h,m)),uo(h,c),h},i.prototype.initComponent=function(t,s){if(this.context.createBean(t),null!=t.init)return t.init(s)},Ql([H("gridOptions")],i.prototype,"gridOptions",void 0),Ql([H("agComponentUtils")],i.prototype,"agComponentUtils",void 0),Ql([H("componentMetadataProvider")],i.prototype,"componentMetadataProvider",void 0),Ql([H("userComponentRegistry")],i.prototype,"userComponentRegistry",void 0),Ql([Gn("frameworkComponentWrapper")],i.prototype,"frameworkComponentWrapper",void 0),Ql([vt("userComponentFactory")],i)}(Ye),yp=function(){function d(){}return d.parse=function(i){if(!i)return null;if(!0===i)return{toolPanels:[d.DEFAULT_COLUMN_COMP,d.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if("string"==typeof i)return d.parse([i]);if(Array.isArray(i)){var t=[];return i.forEach(function(l){var c=d.DEFAULT_BY_KEY[l];c?t.push(c):console.warn("ag-grid: the key "+l+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(d.DEFAULT_BY_KEY).join(","))}),0===t.length?null:{toolPanels:t,defaultToolPanel:t[0].id}}return{toolPanels:d.parseComponents(i.toolPanels),defaultToolPanel:i.defaultToolPanel,hiddenByDefault:i.hiddenByDefault,position:i.position}},d.parseComponents=function(i){var t=[];return i&&i.forEach(function(s){var l=null;if("string"==typeof s){var c=d.DEFAULT_BY_KEY[s];if(!c)return void console.warn("ag-grid: the key "+s+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(d.DEFAULT_BY_KEY).join(","));l=c}else l=s;t.push(l)}),t},d.DEFAULT_BY_KEY={columns:d.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"},filters:d.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"}},d}(),ja=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},gC=function(d,i){return function(t,s){i(t,s,d)}},Ku=function(){for(var d=0,i=0,t=arguments.length;i<t;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<t;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s};function Ie(d){return!0===d||"true"===d}function mC(d){return"number"==typeof d?d:"string"==typeof d?parseInt(d,10):void 0}function bg(d,i){var t=parseInt(d,10);return Ni(t)&&t>0?t:i}var gt=function(){function d(){this.propertyEventService=new tu,this.domDataKey="__AG_"+Math.random().toString(),this.destroyed=!1}var i;return i=d,d.prototype.agWire=function(t,s){this.gridOptions.api=t,this.gridOptions.columnApi=s,this.checkForDeprecated(),this.checkForViolations()},d.prototype.destroy=function(){this.gridOptions.api=null,this.gridOptions.columnApi=null,this.destroyed=!0},d.prototype.init=function(){var t=this;!0!==this.gridOptions.suppressPropertyNamesCheck&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties()),null!=this.gridOptions.sideBar&&(this.gridOptions.sideBar=yp.parse(this.gridOptions.sideBar));var s=this.useAsyncEvents();if(this.eventService.addGlobalListener(this.globalEventHandler.bind(this),s),this.isGroupSelectsChildren()&&this.isSuppressParentsInRowNodes()&&console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work"),this.isGroupSelectsChildren()&&(this.isRowSelectionMulti()||console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.isRowModelServerSide()&&console.warn("AG Grid: group selects children is NOT support for Server Side Row Model. This is because the rows are lazy loaded, so selecting a group is not possible asthe grid has no way of knowing what the children are.")),this.isGroupRemoveSingleChildren()&&this.isGroupHideOpenParents()&&console.warn("AG Grid: groupRemoveSingleChildren and groupHideOpenParents do not work with each other, you need to pick one. And don't ask us how to us these together on our support forum either you will get the same answer!"),this.isRowModelServerSide()){var l=function(m){return"AG Grid: '"+m+"' is not supported on the Server-Side Row Model"};Fe(this.gridOptions.groupDefaultExpanded)&&console.warn(l("groupDefaultExpanded")),Fe(this.gridOptions.groupDefaultExpanded)&&console.warn(l("groupIncludeFooter")),Fe(this.gridOptions.groupDefaultExpanded)&&console.warn(l("groupIncludeTotalFooter"))}this.isEnableRangeSelection()&&Kt.assertRegistered(Y.GXE.RangeSelectionModule,"enableRangeSelection"),!this.isEnableRangeSelection()&&(this.isEnableRangeHandle()||this.isEnableFillHandle())&&console.warn("AG Grid: 'enableRangeHandle' and 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");var c=function(m){t.gridOptions.icons&&t.gridOptions.icons[m]&&console.warn("gridOptions.icons."+m+" is no longer supported. For information on how to style checkboxes and radio buttons, see https://www.ag-grid.com/javascript-grid-icons/")};c("radioButtonOff"),c("radioButtonOn"),c("checkboxChecked"),c("checkboxUnchecked"),c("checkboxIndeterminate"),this.getScrollbarWidth()},d.prototype.checkColumnDefProperties=function(){var t=this;null!=this.gridOptions.columnDefs&&this.gridOptions.columnDefs.forEach(function(s){var l=Object.getOwnPropertyNames(s),c=Ku(sr.ALL_PROPERTIES,sr.FRAMEWORK_PROPERTIES);t.checkProperties(l,c,c,"colDef","https://www.ag-grid.com/javascript-grid-column-properties/")})},d.prototype.checkGridOptionsProperties=function(){var t=Object.getOwnPropertyNames(this.gridOptions),s=Ku(ms.ALL_PROPERTIES,ms.FRAMEWORK_PROPERTIES,ge($).map(function(c){return Ho.getCallbackForEvent(c)})),l=Ku(s,["api","columnApi"]);this.checkProperties(t,l,s,"gridOptions","https://www.ag-grid.com/javascript-grid-properties/")},d.prototype.checkProperties=function(t,s,l,c,h){var m=vE(t,s,l);Nn(m,function(S,R){console.warn("ag-grid: invalid "+c+" property '"+S+"' did you mean any of these: "+R.slice(0,8).join(", "))}),Object.keys(m).length>0&&console.warn("ag-grid: to see all the valid "+c+" properties please check: "+h)},d.prototype.getDomDataKey=function(){return this.domDataKey},d.prototype.getDomData=function(t,s){var l=t[this.getDomDataKey()];return l?l[s]:void 0},d.prototype.setDomData=function(t,s,l){var c=this.getDomDataKey(),h=t[c];we(h)&&(t[c]=h={}),h[s]=l},d.prototype.isRowSelection=function(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection},d.prototype.isSuppressRowDeselection=function(){return Ie(this.gridOptions.suppressRowDeselection)},d.prototype.isRowSelectionMulti=function(){return"multiple"===this.gridOptions.rowSelection},d.prototype.isRowMultiSelectWithClick=function(){return Ie(this.gridOptions.rowMultiSelectWithClick)},d.prototype.getContext=function(){return this.gridOptions.context},d.prototype.isPivotMode=function(){return Ie(this.gridOptions.pivotMode)},d.prototype.isSuppressExpandablePivotGroups=function(){return Ie(this.gridOptions.suppressExpandablePivotGroups)},d.prototype.getPivotColumnGroupTotals=function(){return this.gridOptions.pivotColumnGroupTotals},d.prototype.getPivotRowTotals=function(){return this.gridOptions.pivotRowTotals},d.prototype.isRowModelInfinite=function(){return this.gridOptions.rowModelType===fe.ROW_MODEL_TYPE_INFINITE},d.prototype.isRowModelViewport=function(){return this.gridOptions.rowModelType===fe.ROW_MODEL_TYPE_VIEWPORT},d.prototype.isRowModelServerSide=function(){return this.gridOptions.rowModelType===fe.ROW_MODEL_TYPE_SERVER_SIDE},d.prototype.isRowModelDefault=function(){return we(this.gridOptions.rowModelType)||this.gridOptions.rowModelType===fe.ROW_MODEL_TYPE_CLIENT_SIDE},d.prototype.isFullRowEdit=function(){return"fullRow"===this.gridOptions.editType},d.prototype.isSuppressFocusAfterRefresh=function(){return Ie(this.gridOptions.suppressFocusAfterRefresh)},d.prototype.isSuppressBrowserResizeObserver=function(){return Ie(this.gridOptions.suppressBrowserResizeObserver)},d.prototype.isSuppressMaintainUnsortedOrder=function(){return Ie(this.gridOptions.suppressMaintainUnsortedOrder)},d.prototype.isSuppressClearOnFillReduction=function(){return Ie(this.gridOptions.suppressClearOnFillReduction)},d.prototype.isShowToolPanel=function(){return Ie(this.gridOptions.sideBar&&Array.isArray(this.getSideBar().toolPanels))},d.prototype.getSideBar=function(){return this.gridOptions.sideBar},d.prototype.isSuppressTouch=function(){return Ie(this.gridOptions.suppressTouch)},d.prototype.isMaintainColumnOrder=function(){return Ie(this.gridOptions.maintainColumnOrder)},d.prototype.isSuppressRowTransform=function(){return Ie(this.gridOptions.suppressRowTransform)},d.prototype.isSuppressColumnStateEvents=function(){return Ie(this.gridOptions.suppressColumnStateEvents)},d.prototype.isAllowDragFromColumnsToolPanel=function(){return Ie(this.gridOptions.allowDragFromColumnsToolPanel)},d.prototype.useAsyncEvents=function(){return!Ie(this.gridOptions.suppressAsyncEvents)},d.prototype.isEnableCellChangeFlash=function(){return Ie(this.gridOptions.enableCellChangeFlash)},d.prototype.getCellFlashDelay=function(){return this.gridOptions.cellFlashDelay||500},d.prototype.getCellFadeDelay=function(){return this.gridOptions.cellFadeDelay||1e3},d.prototype.isGroupSelectsChildren=function(){var t=Ie(this.gridOptions.groupSelectsChildren);return t&&this.isTreeData()?(console.warn("AG Grid: groupSelectsChildren does not work with tree data"),!1):t},d.prototype.isSuppressRowHoverHighlight=function(){return Ie(this.gridOptions.suppressRowHoverHighlight)},d.prototype.isColumnHoverHighlight=function(){return Ie(this.gridOptions.columnHoverHighlight)},d.prototype.isGroupSelectsFiltered=function(){return Ie(this.gridOptions.groupSelectsFiltered)},d.prototype.isGroupHideOpenParents=function(){return Ie(this.gridOptions.groupHideOpenParents)},d.prototype.isGroupMaintainOrder=function(){return Ie(this.gridOptions.groupMaintainOrder)},d.prototype.getAutoGroupColumnDef=function(){return this.gridOptions.autoGroupColumnDef},d.prototype.isGroupMultiAutoColumn=function(){return this.gridOptions.groupDisplayType?this.matchesGroupDisplayType("multipleColumns",this.gridOptions.groupDisplayType):Ie(this.gridOptions.groupHideOpenParents)},d.prototype.isGroupUseEntireRow=function(t){return!t&&!!this.gridOptions.groupDisplayType&&this.matchesGroupDisplayType("groupRows",this.gridOptions.groupDisplayType)},d.prototype.isGroupSuppressAutoColumn=function(){return!(!this.gridOptions.groupDisplayType||!this.matchesGroupDisplayType("custom",this.gridOptions.groupDisplayType))||!!this.gridOptions.treeDataDisplayType&&this.matchesTreeDataDisplayType("custom",this.gridOptions.treeDataDisplayType)},d.prototype.isGroupRemoveSingleChildren=function(){return Ie(this.gridOptions.groupRemoveSingleChildren)},d.prototype.isGroupRemoveLowestSingleChildren=function(){return Ie(this.gridOptions.groupRemoveLowestSingleChildren)},d.prototype.isGroupIncludeFooter=function(){return Ie(this.gridOptions.groupIncludeFooter)},d.prototype.isGroupIncludeTotalFooter=function(){return Ie(this.gridOptions.groupIncludeTotalFooter)},d.prototype.isGroupSuppressBlankHeader=function(){return Ie(this.gridOptions.groupSuppressBlankHeader)},d.prototype.isSuppressRowClickSelection=function(){return Ie(this.gridOptions.suppressRowClickSelection)},d.prototype.isSuppressCellSelection=function(){return Ie(this.gridOptions.suppressCellSelection)},d.prototype.isSuppressMultiSort=function(){return Ie(this.gridOptions.suppressMultiSort)},d.prototype.isMultiSortKeyCtrl=function(){return"ctrl"===this.gridOptions.multiSortKey},d.prototype.isPivotSuppressAutoColumn=function(){return Ie(this.gridOptions.pivotSuppressAutoColumn)},d.prototype.isSuppressDragLeaveHidesColumns=function(){return Ie(this.gridOptions.suppressDragLeaveHidesColumns)},d.prototype.isSuppressScrollOnNewData=function(){return Ie(this.gridOptions.suppressScrollOnNewData)},d.prototype.isSuppressScrollWhenPopupsAreOpen=function(){return Ie(this.gridOptions.suppressScrollWhenPopupsAreOpen)},d.prototype.isRowDragEntireRow=function(){return Ie(this.gridOptions.rowDragEntireRow)},d.prototype.isSuppressRowDrag=function(){return Ie(this.gridOptions.suppressRowDrag)},d.prototype.isRowDragManaged=function(){return Ie(this.gridOptions.rowDragManaged)},d.prototype.isSuppressMoveWhenRowDragging=function(){return Ie(this.gridOptions.suppressMoveWhenRowDragging)},d.prototype.isRowDragMultiRow=function(){return Ie(this.gridOptions.rowDragMultiRow)},d.prototype.getDomLayout=function(){var t=this.gridOptions.domLayout||fe.DOM_LAYOUT_NORMAL;return-1===[fe.DOM_LAYOUT_PRINT,fe.DOM_LAYOUT_AUTO_HEIGHT,fe.DOM_LAYOUT_NORMAL].indexOf(t)?(mn(function(){return console.warn("AG Grid: "+t+" is not valid for DOM Layout, valid values are "+fe.DOM_LAYOUT_NORMAL+", "+fe.DOM_LAYOUT_AUTO_HEIGHT+" and "+fe.DOM_LAYOUT_PRINT)},"warn about dom layout values"),fe.DOM_LAYOUT_NORMAL):t},d.prototype.isSuppressHorizontalScroll=function(){return Ie(this.gridOptions.suppressHorizontalScroll)},d.prototype.isSuppressMaxRenderedRowRestriction=function(){return Ie(this.gridOptions.suppressMaxRenderedRowRestriction)},d.prototype.isExcludeChildrenWhenTreeDataFiltering=function(){return Ie(this.gridOptions.excludeChildrenWhenTreeDataFiltering)},d.prototype.isAlwaysShowHorizontalScroll=function(){return Ie(this.gridOptions.alwaysShowHorizontalScroll)},d.prototype.isAlwaysShowVerticalScroll=function(){return Ie(this.gridOptions.alwaysShowVerticalScroll)},d.prototype.isDebounceVerticalScrollbar=function(){return Ie(this.gridOptions.debounceVerticalScrollbar)},d.prototype.isSuppressLoadingOverlay=function(){return Ie(this.gridOptions.suppressLoadingOverlay)},d.prototype.isSuppressNoRowsOverlay=function(){return Ie(this.gridOptions.suppressNoRowsOverlay)},d.prototype.isSuppressFieldDotNotation=function(){return Ie(this.gridOptions.suppressFieldDotNotation)},d.prototype.getPinnedTopRowData=function(){return this.gridOptions.pinnedTopRowData},d.prototype.getPinnedBottomRowData=function(){return this.gridOptions.pinnedBottomRowData},d.prototype.isFunctionsPassive=function(){return Ie(this.gridOptions.functionsPassive)},d.prototype.isSuppressChangeDetection=function(){return Ie(this.gridOptions.suppressChangeDetection)},d.prototype.isSuppressAnimationFrame=function(){return Ie(this.gridOptions.suppressAnimationFrame)},d.prototype.getQuickFilterText=function(){return this.gridOptions.quickFilterText},d.prototype.isCacheQuickFilter=function(){return Ie(this.gridOptions.cacheQuickFilter)},d.prototype.isUnSortIcon=function(){return Ie(this.gridOptions.unSortIcon)},d.prototype.isSuppressMenuHide=function(){return Ie(this.gridOptions.suppressMenuHide)},d.prototype.isEnterMovesDownAfterEdit=function(){return Ie(this.gridOptions.enterMovesDownAfterEdit)},d.prototype.isEnterMovesDown=function(){return Ie(this.gridOptions.enterMovesDown)},d.prototype.isUndoRedoCellEditing=function(){return Ie(this.gridOptions.undoRedoCellEditing)},d.prototype.getUndoRedoCellEditingLimit=function(){return mC(this.gridOptions.undoRedoCellEditingLimit)},d.prototype.getRowStyle=function(){return this.gridOptions.rowStyle},d.prototype.getRowClass=function(){return this.gridOptions.rowClass},d.prototype.getRowStyleFunc=function(){return this.gridOptions.getRowStyle},d.prototype.getRowClassFunc=function(){return this.gridOptions.getRowClass},d.prototype.rowClassRules=function(){return this.gridOptions.rowClassRules},d.prototype.getServerSideStoreType=function(){return this.gridOptions.serverSideStoreType},d.prototype.getServerSideStoreParamsFunc=function(){return this.gridOptions.getServerSideStoreParams},d.prototype.getCreateChartContainerFunc=function(){return this.gridOptions.createChartContainer},d.prototype.getPopupParent=function(){return this.gridOptions.popupParent},d.prototype.getBlockLoadDebounceMillis=function(){return this.gridOptions.blockLoadDebounceMillis},d.prototype.getPostProcessPopupFunc=function(){return this.gridOptions.postProcessPopup},d.prototype.getPaginationNumberFormatterFunc=function(){return this.gridOptions.paginationNumberFormatter},d.prototype.getChildCountFunc=function(){return this.gridOptions.getChildCount},d.prototype.getIsApplyServerSideTransactionFunc=function(){return this.gridOptions.isApplyServerSideTransaction},d.prototype.getDefaultGroupOrderComparator=function(){return this.gridOptions.defaultGroupOrderComparator},d.prototype.getIsFullWidthCellFunc=function(){return this.gridOptions.isFullWidthCell},d.prototype.getFullWidthCellRendererParams=function(){return this.gridOptions.fullWidthCellRendererParams},d.prototype.isEmbedFullWidthRows=function(){return Ie(this.gridOptions.embedFullWidthRows)||Ie(this.gridOptions.deprecatedEmbedFullWidthRows)},d.prototype.isDetailRowAutoHeight=function(){return Ie(this.gridOptions.detailRowAutoHeight)},d.prototype.getSuppressKeyboardEventFunc=function(){return this.gridOptions.suppressKeyboardEvent},d.prototype.getBusinessKeyForNodeFunc=function(){return this.gridOptions.getBusinessKeyForNode},d.prototype.getApi=function(){return this.gridOptions.api},d.prototype.getColumnApi=function(){return this.gridOptions.columnApi},d.prototype.isImmutableData=function(){return Ie(this.gridOptions.immutableData)},d.prototype.isEnsureDomOrder=function(){return Ie(this.gridOptions.ensureDomOrder)},d.prototype.isEnableCharts=function(){return!!Ie(this.gridOptions.enableCharts)&&Kt.assertRegistered(Y.GXE.GridChartsModule,"enableCharts")},d.prototype.getColResizeDefault=function(){return this.gridOptions.colResizeDefault},d.prototype.isSingleClickEdit=function(){return Ie(this.gridOptions.singleClickEdit)},d.prototype.isSuppressClickEdit=function(){return Ie(this.gridOptions.suppressClickEdit)},d.prototype.isStopEditingWhenCellsLoseFocus=function(){return Ie(this.gridOptions.stopEditingWhenCellsLoseFocus)},d.prototype.getGroupDefaultExpanded=function(){return this.gridOptions.groupDefaultExpanded},d.prototype.getMaxConcurrentDatasourceRequests=function(){return this.gridOptions.maxConcurrentDatasourceRequests},d.prototype.getMaxBlocksInCache=function(){return this.gridOptions.maxBlocksInCache},d.prototype.getCacheOverflowSize=function(){return this.gridOptions.cacheOverflowSize},d.prototype.getPaginationPageSize=function(){return mC(this.gridOptions.paginationPageSize)},d.prototype.isPaginateChildRows=function(){return!(!this.isGroupRemoveSingleChildren()&&!this.isGroupRemoveLowestSingleChildren())||Ie(this.gridOptions.paginateChildRows)},d.prototype.getCacheBlockSize=function(){return bg(this.gridOptions.cacheBlockSize)},d.prototype.getInfiniteInitialRowCount=function(){return this.gridOptions.infiniteInitialRowCount},d.prototype.isPurgeClosedRowNodes=function(){return Ie(this.gridOptions.purgeClosedRowNodes)},d.prototype.isSuppressPaginationPanel=function(){return Ie(this.gridOptions.suppressPaginationPanel)},d.prototype.getRowData=function(){return this.gridOptions.rowData},d.prototype.isEnableRtl=function(){return Ie(this.gridOptions.enableRtl)},d.prototype.getRowGroupPanelShow=function(){return this.gridOptions.rowGroupPanelShow},d.prototype.getPivotPanelShow=function(){return this.gridOptions.pivotPanelShow},d.prototype.isAngularCompileRows=function(){return Ie(this.gridOptions.angularCompileRows)},d.prototype.isAngularCompileFilters=function(){return Ie(this.gridOptions.angularCompileFilters)},d.prototype.isDebug=function(){return Ie(this.gridOptions.debug)},d.prototype.getColumnDefs=function(){return this.gridOptions.columnDefs},d.prototype.getColumnTypes=function(){return this.gridOptions.columnTypes},d.prototype.getDatasource=function(){return this.gridOptions.datasource},d.prototype.getViewportDatasource=function(){return this.gridOptions.viewportDatasource},d.prototype.getServerSideDatasource=function(){return this.gridOptions.serverSideDatasource},d.prototype.isAccentedSort=function(){return Ie(this.gridOptions.accentedSort)},d.prototype.isEnableBrowserTooltips=function(){return Ie(this.gridOptions.enableBrowserTooltips)},d.prototype.isEnableCellExpressions=function(){return Ie(this.gridOptions.enableCellExpressions)},d.prototype.isEnableGroupEdit=function(){return Ie(this.gridOptions.enableGroupEdit)},d.prototype.isSuppressMiddleClickScrolls=function(){return Ie(this.gridOptions.suppressMiddleClickScrolls)},d.prototype.isPreventDefaultOnContextMenu=function(){return Ie(this.gridOptions.preventDefaultOnContextMenu)},d.prototype.isSuppressPreventDefaultOnMouseWheel=function(){return Ie(this.gridOptions.suppressPreventDefaultOnMouseWheel)},d.prototype.isSuppressColumnVirtualisation=function(){return Ie(this.gridOptions.suppressColumnVirtualisation)},d.prototype.isSuppressContextMenu=function(){return Ie(this.gridOptions.suppressContextMenu)},d.prototype.isAllowContextMenuWithControlKey=function(){return Ie(this.gridOptions.allowContextMenuWithControlKey)},d.prototype.isSuppressCopyRowsToClipboard=function(){return Ie(this.gridOptions.suppressCopyRowsToClipboard)},d.prototype.isCopyHeadersToClipboard=function(){return Ie(this.gridOptions.copyHeadersToClipboard)},d.prototype.isSuppressClipboardPaste=function(){return Ie(this.gridOptions.suppressClipboardPaste)},d.prototype.isSuppressLastEmptyLineOnPaste=function(){return Ie(this.gridOptions.suppressLastEmptyLineOnPaste)},d.prototype.isPagination=function(){return Ie(this.gridOptions.pagination)},d.prototype.isSuppressEnterpriseResetOnNewColumns=function(){return Ie(this.gridOptions.suppressEnterpriseResetOnNewColumns)},d.prototype.getProcessDataFromClipboardFunc=function(){return this.gridOptions.processDataFromClipboard},d.prototype.getAsyncTransactionWaitMillis=function(){return Fe(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:fe.BATCH_WAIT_MILLIS},d.prototype.isSuppressMovableColumns=function(){return Ie(this.gridOptions.suppressMovableColumns)},d.prototype.isAnimateRows=function(){return!this.isEnsureDomOrder()&&Ie(this.gridOptions.animateRows)},d.prototype.isSuppressColumnMoveAnimation=function(){return Ie(this.gridOptions.suppressColumnMoveAnimation)},d.prototype.isSuppressAggFuncInHeader=function(){return Ie(this.gridOptions.suppressAggFuncInHeader)},d.prototype.isSuppressAggAtRootLevel=function(){return Ie(this.gridOptions.suppressAggAtRootLevel)},d.prototype.isSuppressAggFilteredOnly=function(){return Ie(this.gridOptions.suppressAggFilteredOnly)},d.prototype.isShowOpenedGroup=function(){return Ie(this.gridOptions.showOpenedGroup)},d.prototype.isReactUi=function(){return Ie(this.gridOptions.reactUi)},d.prototype.isEnableRangeSelection=function(){return Kt.isRegistered(Y.GXE.RangeSelectionModule)&&Ie(this.gridOptions.enableRangeSelection)},d.prototype.isEnableRangeHandle=function(){return Ie(this.gridOptions.enableRangeHandle)},d.prototype.isEnableFillHandle=function(){return Ie(this.gridOptions.enableFillHandle)},d.prototype.getFillHandleDirection=function(){var t=this.gridOptions.fillHandleDirection;return t?"x"!==t&&"y"!==t&&"xy"!==t?(mn(function(){return console.warn("AG Grid: valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'.")},"warn invalid fill direction"),"xy"):t:"xy"},d.prototype.getFillOperation=function(){return this.gridOptions.fillOperation},d.prototype.isSuppressMultiRangeSelection=function(){return Ie(this.gridOptions.suppressMultiRangeSelection)},d.prototype.isPaginationAutoPageSize=function(){return Ie(this.gridOptions.paginationAutoPageSize)},d.prototype.isRememberGroupStateWhenNewData=function(){return Ie(this.gridOptions.rememberGroupStateWhenNewData)},d.prototype.getIcons=function(){return this.gridOptions.icons},d.prototype.getAggFuncs=function(){return this.gridOptions.aggFuncs},d.prototype.getSortingOrder=function(){return this.gridOptions.sortingOrder},d.prototype.getAlignedGrids=function(){return this.gridOptions.alignedGrids},d.prototype.isMasterDetail=function(){return!!Ie(this.gridOptions.masterDetail)&&Kt.assertRegistered(Y.GXE.MasterDetailModule,"masterDetail")},d.prototype.isKeepDetailRows=function(){return Ie(this.gridOptions.keepDetailRows)},d.prototype.getKeepDetailRowsCount=function(){var t=this.gridOptions.keepDetailRowsCount;return Fe(t)&&t>0?this.gridOptions.keepDetailRowsCount:10},d.prototype.getIsRowMasterFunc=function(){return this.gridOptions.isRowMaster},d.prototype.getIsRowSelectableFunc=function(){return this.gridOptions.isRowSelectable},d.prototype.getGroupRowRendererParams=function(){return this.gridOptions.groupRowRendererParams},d.prototype.getOverlayLoadingTemplate=function(){return this.gridOptions.overlayLoadingTemplate},d.prototype.getOverlayNoRowsTemplate=function(){return this.gridOptions.overlayNoRowsTemplate},d.prototype.isSuppressAutoSize=function(){return Ie(this.gridOptions.suppressAutoSize)},d.prototype.isEnableCellTextSelection=function(){return Ie(this.gridOptions.enableCellTextSelection)},d.prototype.isSuppressParentsInRowNodes=function(){return Ie(this.gridOptions.suppressParentsInRowNodes)},d.prototype.isSuppressClipboardApi=function(){return Ie(this.gridOptions.suppressClipboardApi)},d.prototype.isFunctionsReadOnly=function(){return Ie(this.gridOptions.functionsReadOnly)},d.prototype.isFloatingFilter=function(){return this.gridOptions.floatingFilter},d.prototype.isEnableCellTextSelect=function(){return Ie(this.gridOptions.enableCellTextSelection)},d.prototype.isEnableOldSetFilterModel=function(){return Ie(this.gridOptions.enableOldSetFilterModel)},d.prototype.getDefaultColDef=function(){return this.gridOptions.defaultColDef},d.prototype.getDefaultColGroupDef=function(){return this.gridOptions.defaultColGroupDef},d.prototype.getDefaultExportParams=function(t){return this.gridOptions.defaultExportParams?(console.warn("AG Grid: Since v25.2 `defaultExportParams`  has been replaced by `default"+O_(t)+"ExportParams`'"),this.gridOptions.defaultExportParams):"csv"===t&&this.gridOptions.defaultCsvExportParams?this.gridOptions.defaultCsvExportParams:"excel"===t&&this.gridOptions.defaultExcelExportParams?this.gridOptions.defaultExcelExportParams:void 0},d.prototype.isSuppressCsvExport=function(){return Ie(this.gridOptions.suppressCsvExport)},d.prototype.isAllowShowChangeAfterFilter=function(){return Ie(this.gridOptions.allowShowChangeAfterFilter)},d.prototype.isSuppressExcelExport=function(){return Ie(this.gridOptions.suppressExcelExport)},d.prototype.isSuppressMakeColumnVisibleAfterUnGroup=function(){return Ie(this.gridOptions.suppressMakeColumnVisibleAfterUnGroup)},d.prototype.getDataPathFunc=function(){return this.gridOptions.getDataPath},d.prototype.getIsServerSideGroupFunc=function(){return this.gridOptions.isServerSideGroup},d.prototype.getIsServerSideGroupOpenByDefaultFunc=function(){return this.gridOptions.isServerSideGroupOpenByDefault},d.prototype.getIsGroupOpenByDefaultFunc=function(){return this.gridOptions.isGroupOpenByDefault},d.prototype.getServerSideGroupKeyFunc=function(){return this.gridOptions.getServerSideGroupKey},d.prototype.getGroupRowAggNodesFunc=function(){return this.gridOptions.groupRowAggNodes},d.prototype.getContextMenuItemsFunc=function(){return this.gridOptions.getContextMenuItems},d.prototype.getMainMenuItemsFunc=function(){return this.gridOptions.getMainMenuItems},d.prototype.getRowNodeIdFunc=function(){return this.gridOptions.getRowNodeId},d.prototype.getNavigateToNextHeaderFunc=function(){return this.gridOptions.navigateToNextHeader},d.prototype.getTabToNextHeaderFunc=function(){return this.gridOptions.tabToNextHeader},d.prototype.getNavigateToNextCellFunc=function(){return this.gridOptions.navigateToNextCell},d.prototype.getTabToNextCellFunc=function(){return this.gridOptions.tabToNextCell},d.prototype.getGridTabIndex=function(){return(this.gridOptions.tabIndex||0).toString()},d.prototype.isTreeData=function(){return!!Ie(this.gridOptions.treeData)&&Kt.assertRegistered(Y.GXE.RowGroupingModule,"Tree Data")},d.prototype.isValueCache=function(){return Ie(this.gridOptions.valueCache)},d.prototype.isValueCacheNeverExpires=function(){return Ie(this.gridOptions.valueCacheNeverExpires)},d.prototype.isDeltaSort=function(){return Ie(this.gridOptions.deltaSort)},d.prototype.isAggregateOnlyChangedColumns=function(){return Ie(this.gridOptions.aggregateOnlyChangedColumns)},d.prototype.getProcessSecondaryColDefFunc=function(){return this.gridOptions.processSecondaryColDef},d.prototype.getProcessSecondaryColGroupDefFunc=function(){return this.gridOptions.processSecondaryColGroupDef},d.prototype.getSendToClipboardFunc=function(){return this.gridOptions.sendToClipboard},d.prototype.getProcessRowPostCreateFunc=function(){return this.gridOptions.processRowPostCreate},d.prototype.getProcessCellForClipboardFunc=function(){return this.gridOptions.processCellForClipboard},d.prototype.getProcessHeaderForClipboardFunc=function(){return this.gridOptions.processHeaderForClipboard},d.prototype.getProcessCellFromClipboardFunc=function(){return this.gridOptions.processCellFromClipboard},d.prototype.getViewportRowModelPageSize=function(){return bg(this.gridOptions.viewportRowModelPageSize,5)},d.prototype.getViewportRowModelBufferSize=function(){return function(d,i){return d>=0?d:5}(this.gridOptions.viewportRowModelBufferSize)},d.prototype.isServerSideSortingAlwaysResets=function(){return Ie(this.gridOptions.serverSideSortingAlwaysResets)},d.prototype.isServerSideFilteringAlwaysResets=function(){return Ie(this.gridOptions.serverSideFilteringAlwaysResets)},d.prototype.getPostSortFunc=function(){return this.gridOptions.postSort},d.prototype.getChartToolbarItemsFunc=function(){return this.gridOptions.getChartToolbarItems},d.prototype.getChartThemeOverrides=function(){return this.gridOptions.chartThemeOverrides},d.prototype.getCustomChartThemes=function(){return this.gridOptions.customChartThemes},d.prototype.getChartThemes=function(){return this.gridOptions.chartThemes||["ag-default","ag-material","ag-pastel","ag-vivid","ag-solar"]},d.prototype.getClipboardDeliminator=function(){return Fe(this.gridOptions.clipboardDeliminator)?this.gridOptions.clipboardDeliminator:"\t"},d.prototype.setProperty=function(t,s,l){void 0===l&&(l=!1);var c=this.gridOptions,h=c[t];(l||h!==s)&&(c[t]=s,this.propertyEventService.dispatchEvent({type:t,currentValue:s,previousValue:h}))},d.prototype.addEventListener=function(t,s){this.propertyEventService.addEventListener(t,s)},d.prototype.removeEventListener=function(t,s){this.propertyEventService.removeEventListener(t,s)},d.prototype.isSkipHeaderOnAutoSize=function(){return!!this.gridOptions.skipHeaderOnAutoSize},d.prototype.getAutoSizePadding=function(){var t=this.gridOptions.autoSizePadding;return null!=t&&t>=0?t:20},d.prototype.getHeaderHeight=function(){return"number"==typeof this.gridOptions.headerHeight?this.gridOptions.headerHeight:this.getFromTheme(25,"headerHeight")},d.prototype.getFloatingFiltersHeight=function(){return"number"==typeof this.gridOptions.floatingFiltersHeight?this.gridOptions.floatingFiltersHeight:this.getFromTheme(25,"headerHeight")},d.prototype.getGroupHeaderHeight=function(){return"number"==typeof this.gridOptions.groupHeaderHeight?this.gridOptions.groupHeaderHeight:this.getHeaderHeight()},d.prototype.getPivotHeaderHeight=function(){return"number"==typeof this.gridOptions.pivotHeaderHeight?this.gridOptions.pivotHeaderHeight:this.getHeaderHeight()},d.prototype.getPivotGroupHeaderHeight=function(){return"number"==typeof this.gridOptions.pivotGroupHeaderHeight?this.gridOptions.pivotGroupHeaderHeight:this.getGroupHeaderHeight()},d.prototype.isExternalFilterPresent=function(){return"function"==typeof this.gridOptions.isExternalFilterPresent&&this.gridOptions.isExternalFilterPresent()},d.prototype.doesExternalFilterPass=function(t){return"function"==typeof this.gridOptions.doesExternalFilterPass&&this.gridOptions.doesExternalFilterPass(t)},d.prototype.getTooltipShowDelay=function(){var t=this.gridOptions.tooltipShowDelay;return Fe(t)?(t<0&&console.warn("ag-grid: tooltipShowDelay should not be lower than 0"),Math.max(200,t)):null},d.prototype.isTooltipMouseTrack=function(){return Ie(this.gridOptions.tooltipMouseTrack)},d.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(){return Ie(this.gridOptions.suppressModelUpdateAfterUpdateTransaction)},d.prototype.getDocument=function(){var t=null;return this.gridOptions.getDocument&&Fe(this.gridOptions.getDocument)&&(t=this.gridOptions.getDocument()),t&&Fe(t)?t:document},d.prototype.getMinColWidth=function(){var t=this.gridOptions.minColWidth;if(Fe(t)&&t>i.MIN_COL_WIDTH)return this.gridOptions.minColWidth;var s=this.getFromTheme(null,"headerCellMinWidth");return Fe(s)?Math.max(s,i.MIN_COL_WIDTH):i.MIN_COL_WIDTH},d.prototype.getMaxColWidth=function(){return this.gridOptions.maxColWidth&&this.gridOptions.maxColWidth>i.MIN_COL_WIDTH?this.gridOptions.maxColWidth:null},d.prototype.getColWidth=function(){return"number"!=typeof this.gridOptions.colWidth||this.gridOptions.colWidth<i.MIN_COL_WIDTH?200:this.gridOptions.colWidth},d.prototype.getRowBuffer=function(){var t=this.gridOptions.rowBuffer;return"number"==typeof t?t<0&&(mn(function(){return console.warn("AG Grid: rowBuffer should not be negative")},"warn rowBuffer negative"),this.gridOptions.rowBuffer=t=0):t=fe.ROW_BUFFER_SIZE,t},d.prototype.getRowBufferInPixels=function(){return this.getRowBuffer()*this.getRowHeightAsNumber()},d.prototype.getScrollbarWidth=function(){if(null==this.scrollbarWidth){var s="number"==typeof this.gridOptions.scrollbarWidth&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:Xv();null!=s&&(this.scrollbarWidth=s,this.eventService.dispatchEvent({type:$.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth},d.prototype.checkForDeprecated=function(){var t=this.gridOptions;t.deprecatedEmbedFullWidthRows&&console.warn("AG Grid: since v21.2, deprecatedEmbedFullWidthRows has been replaced with embedFullWidthRows."),t.enableOldSetFilterModel&&console.warn("AG Grid: since v22.x, enableOldSetFilterModel is deprecated. Please move to the new Set Filter Model as the old one may not be supported in v23 onwards."),t.floatingFilter&&(console.warn("AG Grid: since v23.1, floatingFilter on the gridOptions is deprecated. Please use floatingFilter on the colDef instead."),t.defaultColDef||(t.defaultColDef={}),null==t.defaultColDef.floatingFilter&&(t.defaultColDef.floatingFilter=!0)),t.rowDeselection&&console.warn("AG Grid: since v24.x, rowDeselection is deprecated and the behaviour is true by default. Please use `suppressRowDeselection` to prevent rows from being deselected."),t.enableMultiRowDragging&&(t.rowDragMultiRow=!0,delete t.enableMultiRowDragging,console.warn("AG Grid: since v26.1, `enableMultiRowDragging` is deprecated. Please use `rowDragMultiRow`."));var s=function(m,S,R){null!=t[m]&&(console.warn("ag-grid: since version "+R+", '"+m+"' is deprecated / renamed, please use the new property name '"+S+"' instead."),null==t[S]&&(t[S]=t[m]))};if(s("batchUpdateWaitMillis","asyncTransactionWaitMillis","23.1.x"),s("deltaRowDataMode","immutableData","23.1.x"),(t.immutableColumns||t.deltaColumnMode)&&console.warn("AG Grid: since v24.0, immutableColumns and deltaColumnMode properties are gone. The grid now works like this as default. To keep column order maintained, set grid property applyColumnDefOrder=true"),s("suppressSetColumnStateEvents","suppressColumnStateEvents","24.0.x"),t.groupRowInnerRenderer||t.groupRowInnerRendererParams||t.groupRowInnerRendererFramework){console.warn("AG Grid: since v24.0, grid properties groupRowInnerRenderer, groupRowInnerRendererFramework and groupRowInnerRendererParams are no longer used."),console.warn("  Instead use the grid properties groupRowRendererParams.innerRenderer, groupRowRendererParams.innerRendererFramework and groupRowRendererParams.innerRendererParams."),console.warn("  For example instead of this:"),console.warn('    groupRowInnerRenderer: "myRenderer"'),console.warn("    groupRowInnerRendererParams: {x: a}"),console.warn("  Replace with this:"),console.warn("    groupRowRendererParams: {"),console.warn('      innerRenderer: "myRenderer",'),console.warn("      innerRendererParams: {x: a}"),console.warn("    }"),console.warn("  We have copied the properties over for you. However to stop this error message, please change your application code."),t.groupRowRendererParams||(t.groupRowRendererParams={});var l=t.groupRowRendererParams;t.groupRowInnerRenderer&&(l.innerRenderer=t.groupRowInnerRenderer),t.groupRowInnerRendererParams&&(l.innerRendererParams=t.groupRowInnerRendererParams),t.groupRowInnerRendererFramework&&(l.innerRendererFramework=t.groupRowInnerRendererFramework)}t.rememberGroupStateWhenNewData&&console.warn("AG Grid: since v24.0, grid property rememberGroupStateWhenNewData is deprecated. This feature was provided before Transaction Updates worked (which keep group state). Now that transaction updates are possible and they keep group state, this feature is no longer needed."),t.detailCellRendererParams&&t.detailCellRendererParams.autoHeight&&(console.warn("AG Grid: since v24.1, grid property detailCellRendererParams.autoHeight is replaced with grid property detailRowAutoHeight. This allows this feature to work when you provide a custom DetailCellRenderer"),t.detailRowAutoHeight=!0),t.suppressKeyboardEvent&&console.warn("AG Grid: since v24.1 suppressKeyboardEvent in the gridOptions has been deprecated and will be removed in\n                 future versions of AG Grid. If you need this to be set for every column use the defaultColDef property."),t.suppressEnterpriseResetOnNewColumns&&console.warn("AG Grid: since v25, grid property suppressEnterpriseResetOnNewColumns is deprecated. This was a temporary property to allow changing columns in Server Side Row Model without triggering a reload. Now that it is possible to dynamically change columns in the grid, this is no longer needed."),t.suppressColumnStateEvents&&console.warn('AG Grid: since v25, grid property suppressColumnStateEvents no longer works due to a refactor that we did. It should be possible to achieve similar using event.source, which would be "api" if the event was due to setting column state via the API'),t.defaultExportParams&&console.warn("AG Grid: since v25.2, the grid property `defaultExportParams` has been replaced by `defaultCsvExportParams` and `defaultExcelExportParams`."),t.stopEditingWhenGridLosesFocus&&(console.warn("AG Grid: since v25.2.2, the grid property `stopEditingWhenGridLosesFocus` has been replaced by `stopEditingWhenCellsLoseFocus`."),t.stopEditingWhenCellsLoseFocus=!0),t.applyColumnDefOrder&&console.warn("AG Grid: since v26.0, the grid property `applyColumnDefOrder` is no longer needed, as this is the default behaviour. To turn this behaviour off, set maintainColumnOrder=true"),t.groupMultiAutoColumn&&(console.warn("AG Grid: since v26.0, the grid property `groupMultiAutoColumn` has been replaced by `groupDisplayType = 'multipleColumns'`"),t.groupDisplayType="multipleColumns"),t.groupUseEntireRow&&(console.warn("AG Grid: since v26.0, the grid property `groupUseEntireRow` has been replaced by `groupDisplayType = 'groupRows'`"),t.groupDisplayType="groupRows"),t.groupSuppressAutoColumn&&(console.warn("AG Grid: since v26.0, the grid property `groupSuppressAutoColumn` has been replaced by `"+(t.treeData?"treeDataDisplayType":"groupDisplayType")+" = 'custom'`"),t.groupDisplayType="custom"),t.defaultGroupSortComparator&&(console.warn("AG Grid: since v26.0, the grid property `defaultGroupSortComparator` has been replaced by `defaultGroupOrderComparator`"),t.defaultGroupOrderComparator=t.defaultGroupSortComparator),t.colWidth&&console.warn("AG Grid: since v26.1, the grid property `colWidth` is deprecated and should be set via `defaultColDef.width`."),t.minColWidth&&console.warn("AG Grid: since v26.1, the grid property `minColWidth` is deprecated and should be set via `defaultColDef.minWidth`."),t.maxColWidth&&console.warn("AG Grid: since v26.1, the grid property `maxColWidth` is deprecated and should be set via `defaultColDef.maxWidth`.")},d.prototype.checkForViolations=function(){this.isTreeData()&&this.treeDataViolations()},d.prototype.treeDataViolations=function(){this.isRowModelDefault()&&we(this.getDataPathFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data."),this.isRowModelServerSide()&&(we(this.getIsServerSideGroupFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data."),we(this.getServerSideGroupKeyFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data."))},d.prototype.getLocaleTextFunc=function(){if(this.gridOptions.localeTextFunc)return this.gridOptions.localeTextFunc;var t=this.gridOptions.localeText;return function(s,l){return t&&t[s]?t[s]:l}},d.prototype.globalEventHandler=function(t,s){if(!this.destroyed){var l=Ho.getCallbackForEvent(t);"function"==typeof this.gridOptions[l]&&this.gridOptions[l](s)}},d.prototype.getRowHeightAsNumber=function(){return!this.gridOptions.rowHeight||we(this.gridOptions.rowHeight)?this.getDefaultRowHeight():this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:(console.warn("AG Grid row height must be a number if not using standard row model"),this.getDefaultRowHeight())},d.prototype.getRowHeightForNode=function(t,s,l){if(void 0===s&&(s=!1),null==l&&(l=this.getDefaultRowHeight()),"function"==typeof this.gridOptions.getRowHeight){if(s)return{height:this.getDefaultRowHeight(),estimated:!0};var h=this.gridOptions.getRowHeight({node:t,data:t.data,api:this.gridOptions.api,context:this.gridOptions.context});if(this.isNumeric(h))return 0===h&&mn(function(){return console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.")},"invalidRowHeight"),{height:Math.max(1,h),estimated:!1}}return t.detail&&this.isMasterDetail()?this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}:{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:l,estimated:!1}},d.prototype.isDynamicRowHeight=function(){return"function"==typeof this.gridOptions.getRowHeight},d.prototype.getListItemHeight=function(){return this.getFromTheme(20,"listItemHeight")},d.prototype.chartMenuPanelWidth=function(){return this.environment.chartMenuPanelWidth()},d.prototype.isNumeric=function(t){return!isNaN(t)&&"number"==typeof t&&isFinite(t)},d.prototype.getFromTheme=function(t,s){var l=this.environment.getTheme().theme;return l&&0===l.indexOf("ag-theme")?this.environment.getSassVariable(l,s):t},d.prototype.getDefaultRowHeight=function(){return this.getFromTheme(25,"rowHeight")},d.prototype.matchesGroupDisplayType=function(t,s){var l=["groupRows","multipleColumns","custom","singleColumn"];return l.indexOf(s)<0?(console.warn("AG Grid: '"+s+"' is not a valid groupDisplayType value - possible values are: '"+l.join("', '")+"'"),!1):s===t},d.prototype.matchesTreeDataDisplayType=function(t,s){var l=["auto","custom"];return l.indexOf(s)<0?(console.warn("AG Grid: '"+s+"' is not a valid treeDataDisplayType value - possible values are: '"+l.join("', '")+"'"),!1):s===t},d.MIN_COL_WIDTH=10,d.PROP_HEADER_HEIGHT="headerHeight",d.PROP_GROUP_REMOVE_SINGLE_CHILDREN="groupRemoveSingleChildren",d.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN="groupRemoveLowestSingleChildren",d.PROP_PIVOT_HEADER_HEIGHT="pivotHeaderHeight",d.PROP_SUPPRESS_CLIPBOARD_PASTE="suppressClipboardPaste",d.PROP_GROUP_HEADER_HEIGHT="groupHeaderHeight",d.PROP_PIVOT_GROUP_HEADER_HEIGHT="pivotGroupHeaderHeight",d.PROP_NAVIGATE_TO_NEXT_CELL="navigateToNextCell",d.PROP_TAB_TO_NEXT_CELL="tabToNextCell",d.PROP_NAVIGATE_TO_NEXT_HEADER="navigateToNextHeader",d.PROP_TAB_TO_NEXT_HEADER="tabToNextHeader",d.PROP_IS_EXTERNAL_FILTER_PRESENT="isExternalFilterPresent",d.PROP_DOES_EXTERNAL_FILTER_PASS="doesExternalFilterPass",d.PROP_FLOATING_FILTERS_HEIGHT="floatingFiltersHeight",d.PROP_SUPPRESS_ROW_CLICK_SELECTION="suppressRowClickSelection",d.PROP_SUPPRESS_ROW_DRAG="suppressRowDrag",d.PROP_SUPPRESS_MOVE_WHEN_ROW_DRAG="suppressMoveWhenRowDragging",d.PROP_GET_ROW_CLASS="getRowClass",d.PROP_GET_ROW_STYLE="getRowStyle",d.PROP_GET_ROW_HEIGHT="getRowHeight",d.PROP_POPUP_PARENT="popupParent",d.PROP_DOM_LAYOUT="domLayout",d.PROP_FILL_HANDLE_DIRECTION="fillHandleDirection",d.PROP_GROUP_ROW_AGG_NODES="groupRowAggNodes",d.PROP_GET_BUSINESS_KEY_FOR_NODE="getBusinessKeyForNode",d.PROP_GET_CHILD_COUNT="getChildCount",d.PROP_PROCESS_ROW_POST_CREATE="processRowPostCreate",d.PROP_GET_ROW_NODE_ID="getRowNodeId",d.PROP_IS_FULL_WIDTH_CELL="isFullWidthCell",d.PROP_IS_ROW_SELECTABLE="isRowSelectable",d.PROP_IS_ROW_MASTER="isRowMaster",d.PROP_POST_SORT="postSort",d.PROP_GET_DOCUMENT="getDocument",d.PROP_POST_PROCESS_POPUP="postProcessPopup",d.PROP_DEFAULT_GROUP_ORDER_COMPARATOR="defaultGroupOrderComparator",d.PROP_PAGINATION_NUMBER_FORMATTER="paginationNumberFormatter",d.PROP_GET_CONTEXT_MENU_ITEMS="getContextMenuItems",d.PROP_GET_MAIN_MENU_ITEMS="getMainMenuItems",d.PROP_PROCESS_CELL_FOR_CLIPBOARD="processCellForClipboard",d.PROP_PROCESS_CELL_FROM_CLIPBOARD="processCellFromClipboard",d.PROP_SEND_TO_CLIPBOARD="sendToClipboard",d.PROP_PROCESS_TO_SECONDARY_COLDEF="processSecondaryColDef",d.PROP_PROCESS_SECONDARY_COL_GROUP_DEF="processSecondaryColGroupDef",d.PROP_GET_CHART_TOOLBAR_ITEMS="getChartToolbarItems",d.PROP_GET_SERVER_SIDE_STORE_PARAMS="getServerSideStoreParams",d.PROP_IS_SERVER_SIDE_GROUPS_OPEN_BY_DEFAULT="isServerSideGroupOpenByDefault",d.PROP_IS_APPLY_SERVER_SIDE_TRANSACTION="isApplyServerSideTransaction",d.PROP_IS_SERVER_SIDE_GROUP="isServerSideGroup",d.PROP_GET_SERVER_SIDE_GROUP_KEY="getServerSideGroupKey",ja([H("gridOptions")],d.prototype,"gridOptions",void 0),ja([H("eventService")],d.prototype,"eventService",void 0),ja([H("environment")],d.prototype,"environment",void 0),ja([gC(0,ki("gridApi")),gC(1,ki("columnApi"))],d.prototype,"agWire",null),ja([Fi],d.prototype,"destroy",null),ja([et],d.prototype,"init",null),i=ja([vt("gridOptionsWrapper")],d)}(),Ot=function(){function d(i,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=i,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}return d.prototype.setInactive=function(){this.active=!1},d.prototype.isActive=function(){return this.active},d.prototype.depthFirstSearchChangedPath=function(i,t){if(i.children)for(var s=0;s<i.children.length;s++)this.depthFirstSearchChangedPath(i.children[s],t);t(i.rowNode)},d.prototype.depthFirstSearchEverything=function(i,t,s){if(i.childrenAfterGroup)for(var l=0;l<i.childrenAfterGroup.length;l++){var c=i.childrenAfterGroup[l];c.childrenAfterGroup?this.depthFirstSearchEverything(i.childrenAfterGroup[l],t,s):s&&t(c)}t(i)},d.prototype.forEachChangedNodeDepthFirst=function(i,t){void 0===t&&(t=!1),this.active?this.depthFirstSearchChangedPath(this.pathRoot,i):this.depthFirstSearchEverything(this.pathRoot.rowNode,i,t)},d.prototype.executeFromRootNode=function(i){i(this.pathRoot.rowNode)},d.prototype.createPathItems=function(i){for(var t=i,s=0;!this.mapToItems[t.id];)this.mapToItems[t.id]={rowNode:t,children:null},s++,t=t.parent;return s},d.prototype.populateColumnsMap=function(i,t){var s=this;if(this.keepingColumns&&t)for(var l=i;l;)this.nodeIdsToColumns[l.id]||(this.nodeIdsToColumns[l.id]={}),t.forEach(function(c){return s.nodeIdsToColumns[l.id][c.getId()]=!0}),l=l.parent},d.prototype.linkPathItems=function(i,t){for(var s=i,l=0;l<t;l++){var c=this.mapToItems[s.id],h=this.mapToItems[s.parent.id];h.children||(h.children=[]),h.children.push(c),s=s.parent}},d.prototype.addParentNode=function(i,t){if(i&&!i.isRowPinned()){var s=this.createPathItems(i);this.linkPathItems(i,s),this.populateColumnsMap(i,t)}},d.prototype.canSkip=function(i){return this.active&&!this.mapToItems[i.id]},d.prototype.getValueColumnsForNode=function(i,t){if(!this.keepingColumns)return t;var s=this.nodeIdsToColumns[i.id];return t.filter(function(c){return s[c.getId()]})},d.prototype.getNotValueColumnsForNode=function(i,t){if(!this.keepingColumns)return null;var s=this.nodeIdsToColumns[i.id];return t.filter(function(c){return!s[c.getId()]})},d}(),yC=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ed=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Eg=function(d,i){return function(t,s){i(t,s,d)}},ec=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return yC(i,d),i.prototype.setBeans=function(t){this.logger=t.create("selectionService"),this.reset(),this.gridOptionsWrapper.isRowModelDefault()&&this.addManagedListener(this.eventService,$.EVENT_ROW_DATA_CHANGED,this.reset.bind(this))},i.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.addManagedListener(this.eventService,$.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},i.prototype.setLastSelectedNode=function(t){this.lastSelectedNode=t},i.prototype.getLastSelectedNode=function(){return this.lastSelectedNode},i.prototype.getSelectedNodes=function(){var t=[];return Nn(this.selectedNodes,function(s,l){l&&t.push(l)}),t},i.prototype.getSelectedRows=function(){var t=[];return Nn(this.selectedNodes,function(s,l){l&&l.data&&t.push(l.data)}),t},i.prototype.removeGroupsFromSelection=function(){var t=this;Nn(this.selectedNodes,function(s,l){l&&l.group&&(t.selectedNodes[l.id]=void 0)})},i.prototype.updateGroupsFromChildrenSelections=function(t){if(this.gridOptionsWrapper.isGroupSelectsChildren()&&this.rowModel.getType()===fe.ROW_MODEL_TYPE_CLIENT_SIDE){var l=this.rowModel.getRootNode();t||(t=new Ot(!0,l)).setInactive(),t.forEachChangedNodeDepthFirst(function(c){c!==l&&c.calculateSelectedFromChildren()})}},i.prototype.getNodeForIdIfSelected=function(t){return this.selectedNodes[t]},i.prototype.clearOtherNodes=function(t){var s=this,l={},c=0;return Nn(this.selectedNodes,function(h,m){m&&m.id!==t.id&&(c+=s.selectedNodes[m.id].setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0}),s.groupSelectsChildren&&m.parent&&(l[m.parent.id]=m.parent))}),Nn(l,function(h,m){m.calculateSelectedFromChildren()}),c},i.prototype.onRowSelected=function(t){var s=t.node;this.groupSelectsChildren&&s.group||(this.selectedNodes[s.id]=s.isSelected()?s:void 0)},i.prototype.syncInRowNode=function(t,s){this.syncInOldRowNode(t,s),this.syncInNewRowNode(t)},i.prototype.syncInOldRowNode=function(t,s){Fe(s)&&t.id!==s.id&&s&&this.selectedNodes[s.id]==t&&(this.selectedNodes[s.id]=s)},i.prototype.syncInNewRowNode=function(t){Fe(this.selectedNodes[t.id])?(t.setSelectedInitialValue(!0),this.selectedNodes[t.id]=t):t.setSelectedInitialValue(!1)},i.prototype.reset=function(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null},i.prototype.getBestCostNodeSelection=function(){if(this.rowModel.getType()===fe.ROW_MODEL_TYPE_CLIENT_SIDE){var s=this.rowModel.getTopLevelNodes();if(null!==s){var l=[];return function c(h){for(var m=0,S=h.length;m<S;m++){var R=h[m];R.isSelected()?l.push(R):R.group&&R.children&&c(R.children)}}(s),l}console.warn("selectAll not available doing rowModel=virtual")}else console.warn("getBestCostNodeSelection is only available when using normal row model")},i.prototype.setRowModel=function(t){this.rowModel=t},i.prototype.isEmpty=function(){var t=0;return Nn(this.selectedNodes,function(s,l){l&&t++}),0===t},i.prototype.deselectAllRowNodes=function(t){void 0===t&&(t=!1);var s=function(S){return S.selectThisNode(!1)},l=this.rowModel.getType()===fe.ROW_MODEL_TYPE_CLIENT_SIDE;if(t){if(!l)return void console.error("AG Grid: selecting just filtered only works with In Memory Row Model");this.rowModel.forEachNodeAfterFilter(s)}else Nn(this.selectedNodes,function(m,S){S&&s(S)}),this.reset();l&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(),this.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.selectAllRowNodes=function(t){if(void 0===t&&(t=!1),this.rowModel.getType()!==fe.ROW_MODEL_TYPE_CLIENT_SIDE)throw new Error("selectAll only available with normal row model, ie not "+this.rowModel.getType());var s=this.rowModel,l=function(m){return m.selectThisNode(!0)};t?s.forEachNodeAfterFilter(l):s.forEachNode(l),this.rowModel.getType()===fe.ROW_MODEL_TYPE_CLIENT_SIDE&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(),this.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.selectNode=function(t,s){t&&t.setSelectedParams({newValue:!0,clearSelection:!s})},i.prototype.deselectIndex=function(t){var s=this.rowModel.getRow(t);this.deselectNode(s)},i.prototype.deselectNode=function(t){t&&t.setSelectedParams({newValue:!1,clearSelection:!1})},i.prototype.selectIndex=function(t,s){var l=this.rowModel.getRow(t);this.selectNode(l,s)},Ed([H("rowModel")],i.prototype,"rowModel",void 0),Ed([H("columnApi")],i.prototype,"columnApi",void 0),Ed([H("gridApi")],i.prototype,"gridApi",void 0),Ed([Eg(0,ki("loggerFactory"))],i.prototype,"setBeans",null),Ed([et],i.prototype,"init",null),Ed([vt("selectionService")],i)}(Ye),xg=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},_C=function(){function d(){}return d.prototype.sizeColumnsToFit=function(i){void 0===i&&console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)"),this.columnModel.sizeColumnsToFit(i,"api")},d.prototype.setColumnGroupOpened=function(i,t){this.columnModel.setColumnGroupOpened(i,t,"api")},d.prototype.getColumnGroup=function(i,t){return this.columnModel.getColumnGroup(i,t)},d.prototype.getOriginalColumnGroup=function(i){return this.columnModel.getOriginalColumnGroup(i)},d.prototype.getDisplayNameForColumn=function(i,t){return this.columnModel.getDisplayNameForColumn(i,t)||""},d.prototype.getDisplayNameForColumnGroup=function(i,t){return this.columnModel.getDisplayNameForColumnGroup(i,t)||""},d.prototype.getColumn=function(i){return this.columnModel.getPrimaryColumn(i)},d.prototype.applyColumnState=function(i){return this.columnModel.applyColumnState(i,"api")},d.prototype.getColumnState=function(){return this.columnModel.getColumnState()},d.prototype.resetColumnState=function(){this.columnModel.resetColumnState("api")},d.prototype.getColumnGroupState=function(){return this.columnModel.getColumnGroupState()},d.prototype.setColumnGroupState=function(i){this.columnModel.setColumnGroupState(i,"api")},d.prototype.resetColumnGroupState=function(){this.columnModel.resetColumnGroupState("api")},d.prototype.isPinning=function(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()},d.prototype.isPinningLeft=function(){return this.columnModel.isPinningLeft()},d.prototype.isPinningRight=function(){return this.columnModel.isPinningRight()},d.prototype.getDisplayedColAfter=function(i){return this.columnModel.getDisplayedColAfter(i)},d.prototype.getDisplayedColBefore=function(i){return this.columnModel.getDisplayedColBefore(i)},d.prototype.setColumnVisible=function(i,t){this.columnModel.setColumnVisible(i,t,"api")},d.prototype.setColumnsVisible=function(i,t){this.columnModel.setColumnsVisible(i,t,"api")},d.prototype.setColumnPinned=function(i,t){this.columnModel.setColumnPinned(i,t,"api")},d.prototype.setColumnsPinned=function(i,t){this.columnModel.setColumnsPinned(i,t,"api")},d.prototype.getAllColumns=function(){return this.columnModel.getAllPrimaryColumns()},d.prototype.getAllGridColumns=function(){return this.columnModel.getAllGridColumns()},d.prototype.getDisplayedLeftColumns=function(){return this.columnModel.getDisplayedLeftColumns()},d.prototype.getDisplayedCenterColumns=function(){return this.columnModel.getDisplayedCenterColumns()},d.prototype.getDisplayedRightColumns=function(){return this.columnModel.getDisplayedRightColumns()},d.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},d.prototype.getAllDisplayedVirtualColumns=function(){return this.columnModel.getViewportColumns()},d.prototype.moveColumn=function(i,t){"number"==typeof i?(console.warn("AG Grid: you are using moveColumn(fromIndex, toIndex) - moveColumn takes a column key and a destination index, not two indexes, to move with indexes use moveColumnByIndex(from,to) instead"),this.columnModel.moveColumnByIndex(i,t,"api")):this.columnModel.moveColumn(i,t,"api")},d.prototype.moveColumnByIndex=function(i,t){this.columnModel.moveColumnByIndex(i,t,"api")},d.prototype.moveColumns=function(i,t){this.columnModel.moveColumns(i,t,"api")},d.prototype.moveRowGroupColumn=function(i,t){this.columnModel.moveRowGroupColumn(i,t)},d.prototype.setColumnAggFunc=function(i,t){this.columnModel.setColumnAggFunc(i,t)},d.prototype.setColumnWidth=function(i,t,s,l){void 0===s&&(s=!0),this.columnModel.setColumnWidths([{key:i,newWidth:t}],!1,s,l)},d.prototype.setColumnWidths=function(i,t,s){void 0===t&&(t=!0),this.columnModel.setColumnWidths(i,!1,t,s)},d.prototype.setPivotMode=function(i){this.columnModel.setPivotMode(i)},d.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},d.prototype.getSecondaryPivotColumn=function(i,t){return this.columnModel.getSecondaryPivotColumn(i,t)},d.prototype.setValueColumns=function(i){this.columnModel.setValueColumns(i,"api")},d.prototype.getValueColumns=function(){return this.columnModel.getValueColumns()},d.prototype.removeValueColumn=function(i){this.columnModel.removeValueColumn(i,"api")},d.prototype.removeValueColumns=function(i){this.columnModel.removeValueColumns(i,"api")},d.prototype.addValueColumn=function(i){this.columnModel.addValueColumn(i,"api")},d.prototype.addValueColumns=function(i){this.columnModel.addValueColumns(i,"api")},d.prototype.setRowGroupColumns=function(i){this.columnModel.setRowGroupColumns(i,"api")},d.prototype.removeRowGroupColumn=function(i){this.columnModel.removeRowGroupColumn(i,"api")},d.prototype.removeRowGroupColumns=function(i){this.columnModel.removeRowGroupColumns(i,"api")},d.prototype.addRowGroupColumn=function(i){this.columnModel.addRowGroupColumn(i,"api")},d.prototype.addRowGroupColumns=function(i){this.columnModel.addRowGroupColumns(i,"api")},d.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},d.prototype.setPivotColumns=function(i){this.columnModel.setPivotColumns(i,"api")},d.prototype.removePivotColumn=function(i){this.columnModel.removePivotColumn(i,"api")},d.prototype.removePivotColumns=function(i){this.columnModel.removePivotColumns(i,"api")},d.prototype.addPivotColumn=function(i){this.columnModel.addPivotColumn(i,"api")},d.prototype.addPivotColumns=function(i){this.columnModel.addPivotColumns(i,"api")},d.prototype.getPivotColumns=function(){return this.columnModel.getPivotColumns()},d.prototype.getLeftDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeLeft()},d.prototype.getCenterDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeCentre()},d.prototype.getRightDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeRight()},d.prototype.getAllDisplayedColumnGroups=function(){return this.columnModel.getAllDisplayedTrees()},d.prototype.autoSizeColumn=function(i,t){return this.columnModel.autoSizeColumn(i,t,"api")},d.prototype.autoSizeColumns=function(i,t){return this.columnModel.autoSizeColumns(i,t,"api")},d.prototype.autoSizeAllColumns=function(i){this.columnModel.autoSizeAllColumns(i,"api")},d.prototype.setSecondaryColumns=function(i){this.columnModel.setSecondaryColumns(i,"api")},d.prototype.getSecondaryColumns=function(){return this.columnModel.getSecondaryColumns()},d.prototype.getPrimaryColumns=function(){return this.columnModel.getAllPrimaryColumns()},d.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(yt.removeAllReferences.bind(window,this,"Column API"),100)},d.prototype.columnGroupOpened=function(i,t){console.error("AG Grid: columnGroupOpened no longer exists, use setColumnGroupOpened"),this.setColumnGroupOpened(i,t)},d.prototype.hideColumns=function(i,t){console.error("AG Grid: hideColumns is deprecated, use setColumnsVisible"),this.columnModel.setColumnsVisible(i,!t,"api")},d.prototype.hideColumn=function(i,t){console.error("AG Grid: hideColumn is deprecated, use setColumnVisible"),this.columnModel.setColumnVisible(i,!t,"api")},d.prototype.setState=function(i){return console.error("AG Grid: setState is deprecated, use setColumnState"),this.setColumnState(i)},d.prototype.getState=function(){return console.error("AG Grid: getState is deprecated, use getColumnState"),this.getColumnState()},d.prototype.resetState=function(){console.error("AG Grid: resetState is deprecated, use resetColumnState"),this.resetColumnState()},d.prototype.getAggregationColumns=function(){return console.error("AG Grid: getAggregationColumns is deprecated, use getValueColumns"),this.columnModel.getValueColumns()},d.prototype.removeAggregationColumn=function(i){console.error("AG Grid: removeAggregationColumn is deprecated, use removeValueColumn"),this.columnModel.removeValueColumn(i,"api")},d.prototype.removeAggregationColumns=function(i){console.error("AG Grid: removeAggregationColumns is deprecated, use removeValueColumns"),this.columnModel.removeValueColumns(i,"api")},d.prototype.addAggregationColumn=function(i){console.error("AG Grid: addAggregationColumn is deprecated, use addValueColumn"),this.columnModel.addValueColumn(i,"api")},d.prototype.addAggregationColumns=function(i){console.error("AG Grid: addAggregationColumns is deprecated, use addValueColumns"),this.columnModel.addValueColumns(i,"api")},d.prototype.setColumnAggFunction=function(i,t){console.error("AG Grid: setColumnAggFunction is deprecated, use setColumnAggFunc"),this.columnModel.setColumnAggFunc(i,t,"api")},d.prototype.getDisplayNameForCol=function(i){return console.error("AG Grid: getDisplayNameForCol is deprecated, use getDisplayNameForColumn"),this.getDisplayNameForColumn(i,null)},d.prototype.setColumnState=function(i){return console.error("AG Grid: setColumnState is deprecated, use applyColumnState"),this.columnModel.applyColumnState({state:i,applyOrder:!0},"api")},xg([H("columnModel")],d.prototype,"columnModel",void 0),xg([Fi],d.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),xg([vt("columnApi")],d)}();(function(d){d[d.FILL=0]="FILL",d[d.RANGE=1]="RANGE"})(Y.Lm6||(Y.Lm6={})),function(d){d[d.VALUE=0]="VALUE",d[d.DIMENSION=1]="DIMENSION"}(Y.StC||(Y.StC={}));var xd="ag-cell-range-selected",SC=function(){function d(i,t){this.beans=i,this.cellCtrl=t}return d.prototype.setComp=function(i){this.cellComp=i,this.onRangeSelectionChanged()},d.prototype.onRangeSelectionChanged=function(){this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(xd,0!==this.rangeCount),this.cellComp.addOrRemoveCssClass(xd+"-1",1===this.rangeCount),this.cellComp.addOrRemoveCssClass(xd+"-2",2===this.rangeCount),this.cellComp.addOrRemoveCssClass(xd+"-3",3===this.rangeCount),this.cellComp.addOrRemoveCssClass(xd+"-4",this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),this.cellComp.setAriaSelected(this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle()},d.prototype.updateRangeBorders=function(){var i=this.getRangeBorders(),t=this.isSingleCell(),l=!t&&i.right,c=!t&&i.bottom,h=!t&&i.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",!t&&i.top),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",l),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",c),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",h)},d.prototype.isSingleCell=function(){var i=this.beans.rangeService;return 1===this.rangeCount&&i&&!i.isMoreThanOneCell()},d.prototype.getHasChartRange=function(){var i=this.beans.rangeService;if(!this.rangeCount||!i)return!1;var t=i.getCellRanges();return t.length>0&&t.every(function(s){return Tn([Y.StC.DIMENSION,Y.StC.VALUE],s.type)})},d.prototype.updateRangeBordersIfRangeCount=function(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())},d.prototype.getRangeBorders=function(){var L,U,i=this,t=this.beans.gridOptionsWrapper.isEnableRtl(),s=!1,l=!1,c=!1,h=!1,m=this.cellCtrl.getCellPosition().column,S=this.beans,R=S.rangeService,D=S.columnModel;t?(L=D.getDisplayedColAfter(m),U=D.getDisplayedColBefore(m)):(L=D.getDisplayedColBefore(m),U=D.getDisplayedColAfter(m));var K=R.getCellRanges().filter(function(We){return R.isCellInSpecificRange(i.cellCtrl.getCellPosition(),We)});L||(h=!0),U||(l=!0);for(var ee=0;ee<K.length&&!(s&&l&&c&&h);ee++){var ae=K[ee],Te=R.getRangeStartRow(ae),Ve=R.getRangeEndRow(ae);!s&&this.beans.rowPositionUtils.sameRow(Te,this.cellCtrl.getCellPosition())&&(s=!0),!c&&this.beans.rowPositionUtils.sameRow(Ve,this.cellCtrl.getCellPosition())&&(c=!0),!h&&L&&ae.columns.indexOf(L)<0&&(h=!0),!l&&U&&ae.columns.indexOf(U)<0&&(l=!0)}return{top:s,right:l,bottom:c,left:h}},d.prototype.refreshHandle=function(){if(this.beans.rangeService){var i=this.shouldHaveSelectionHandle();this.selectionHandle&&!i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),i&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}},d.prototype.shouldHaveSelectionHandle=function(){var i=this.beans,t=i.gridOptionsWrapper,s=i.rangeService,l=s.getCellRanges(),c=l.length;if(this.rangeCount<1||c<1)return!1;var h=jn(l),m=this.cellCtrl.getCellPosition(),S=t.isEnableFillHandle()&&!this.cellCtrl.isSuppressFillHandle(),R=t.isEnableRangeHandle(),D=1===c&&!this.cellCtrl.isEditing()&&(S||R);if(this.hasChartRange){var U=l[0].type===Y.StC.DIMENSION&&s.isCellInSpecificRange(m,l[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",U),D=h.type===Y.StC.VALUE}return D&&null!=h.endRow&&s.isContiguousRange(h)&&s.isBottomRightCell(h,m)},d.prototype.addSelectionHandle=function(){var i=this.beans,t=i.gridOptionsWrapper,l=jn(i.rangeService.getCellRanges()).type,h=t.isEnableFillHandle()&&we(l)?Y.Lm6.FILL:Y.Lm6.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==h&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(h)),this.selectionHandle.refresh(this.cellCtrl)},d.prototype.destroy=function(){this.beans.context.destroyBean(this.selectionHandle)},d}(),XE=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),JE=function(d){function i(t,s){var l=d.call(this)||this;return l.cellCtrl=t,l.beans=s,l.column=t.getColumn(),l.rowNode=t.getRowNode(),l.setupColSpan(),l.setupRowSpan(),l}return XE(i,d),i.prototype.setupRowSpan=function(){this.rowSpan=this.column.getRowSpan(this.rowNode)},i.prototype.setComp=function(t){this.cellComp=t,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()},i.prototype.onDisplayColumnsChanged=function(){var t=this.getColSpanningList();pr(this.colsSpanning,t)||(this.colsSpanning=t,this.onWidthChanged(),this.onLeftChanged())},i.prototype.setupColSpan=function(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))},i.prototype.onWidthChanged=function(){if(this.cellComp){var t=this.getCellWidth();this.cellComp.setWidth(t+"px")}},i.prototype.getCellWidth=function(){return this.colsSpanning?this.colsSpanning.reduce(function(t,s){return t+s.getActualWidth()},0):this.column.getActualWidth()},i.prototype.getColSpanningList=function(){var t=this.column.getColSpan(this.rowNode),s=[];if(1===t)s.push(this.column);else for(var l=this.column,c=this.column.getPinned(),h=0;l&&h<t&&(s.push(l),(l=this.beans.columnModel.getDisplayedColAfter(l))&&!we(l)&&c===l.getPinned());h++);return s},i.prototype.onLeftChanged=function(){if(this.cellComp){var t=this.modifyLeftForPrintLayout(this.getCellLeft());this.cellComp.setLeft(t+"px")}},i.prototype.getCellLeft=function(){return(this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?jn(this.colsSpanning):this.column).getLeft()},i.prototype.modifyLeftForPrintLayout=function(t){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()===fe.PINNED_LEFT)return t;var s=this.beans.columnModel.getDisplayedColumnsLeftWidth();return this.column.getPinned()===fe.PINNED_RIGHT?s+this.beans.columnModel.getBodyContainerWidth()+(t||0):s+(t||0)},i.prototype.applyRowSpan=function(){if(1!==this.rowSpan){var t=this.beans.gridOptionsWrapper.getRowHeightAsNumber();this.cellComp.setHeight(t*this.rowSpan+"px"),this.cellComp.setZIndex("1")}},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i}(Ye),nc=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Td=function(d){function i(t,s){var l=d.call(this)||this;return l.staticClasses=[],l.cellCtrl=t,l.beans=s,l.column=t.getColumn(),l.rowNode=t.getRowNode(),l}return nc(i,d),i.prototype.setComp=function(t,s){this.cellComp=t,this.scope=s,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()},i.prototype.applyCellClassRules=function(){var t=this,s=this.column.getColDef(),l={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:s,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext()};this.beans.stylingService.processClassRules(s.cellClassRules,l,function(c){return t.cellComp.addOrRemoveCssClass(c,!0)},function(c){return t.cellComp.addOrRemoveCssClass(c,!1)})},i.prototype.applyUserStyles=function(){var t=this.column.getColDef();if(t.cellStyle){var s;if("function"==typeof t.cellStyle){var l={column:this.column,value:this.cellCtrl.getValue(),colDef:t,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,$scope:this.scope,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()};s=(0,t.cellStyle)(l)}else s=t.cellStyle;this.cellComp.setUserStyles(s)}},i.prototype.applyClassesFromColDef=function(){var t=this,s=this.column.getColDef(),l={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:s,rowIndex:this.rowNode.rowIndex,$scope:this.scope,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()};this.staticClasses.length&&this.staticClasses.forEach(function(c){return t.cellComp.addOrRemoveCssClass(c,!1)}),this.staticClasses=this.beans.stylingService.getStaticCellClasses(s,l),this.staticClasses.length&&this.staticClasses.forEach(function(c){return t.cellComp.addOrRemoveCssClass(c,!0)})},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i}(Ye),ZE=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),bC=function(d){function i(t,s){var l=d.call(this)||this;return l.ctrl=t,l.beans=s,l}return ZE(i,d),i.prototype.setComp=function(t){this.comp=t,this.setupTooltip()},i.prototype.setupTooltip=function(){this.browserTooltips=this.beans.gridOptionsWrapper.isEnableBrowserTooltips(),this.updateTooltipText(),this.browserTooltips?this.comp.setTitle(null!=this.tooltipSanatised?this.tooltipSanatised:void 0):this.createTooltipFeatureIfNeeded()},i.prototype.updateTooltipText=function(){this.tooltip=this.ctrl.getTooltipValue(),this.tooltipSanatised=ua(this.tooltip)},i.prototype.createTooltipFeatureIfNeeded=function(){var t=this;null==this.genericTooltipFeature&&(this.genericTooltipFeature=this.createManagedBean(new ep({getTooltipParams:function(){return t.getTooltipParams()},getGui:function(){return t.ctrl.getGui()}}),this.beans.context))},i.prototype.refreshToolTip=function(){this.updateTooltipText(),this.browserTooltips&&this.comp.setTitle(null!=this.tooltipSanatised?this.tooltipSanatised:void 0)},i.prototype.getTooltipParams=function(){var t=this.ctrl,s=t.getColumn?t.getColumn():void 0,l=t.getColDef?t.getColDef():void 0,c=t.getRowNode?t.getRowNode():void 0;return{location:t.getLocation(),colDef:l,column:s,rowIndex:t.getRowIndex?t.getRowIndex():void 0,node:c,data:c?c.data:void 0,value:this.getTooltipText(),valueFormatted:t.getValueFormatted?t.getValueFormatted():void 0}},i.prototype.getTooltipText=function(){return this.tooltip},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i}(Ye),en=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Tg=function(){function d(){}return d.prototype.postConstruct=function(){this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail(),this.gridOptionsWrapper.isRowModelDefault()&&(this.clientSideRowModel=this.rowModel),this.gridOptionsWrapper.isRowModelServerSide()&&(this.serverSideRowModel=this.rowModel)},en([H("resizeObserverService")],d.prototype,"resizeObserverService",void 0),en([H("paginationProxy")],d.prototype,"paginationProxy",void 0),en([H("context")],d.prototype,"context",void 0),en([H("columnApi")],d.prototype,"columnApi",void 0),en([H("gridApi")],d.prototype,"gridApi",void 0),en([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),en([H("expressionService")],d.prototype,"expressionService",void 0),en([H("rowRenderer")],d.prototype,"rowRenderer",void 0),en([H("$compile")],d.prototype,"$compile",void 0),en([H("templateService")],d.prototype,"templateService",void 0),en([H("valueService")],d.prototype,"valueService",void 0),en([H("eventService")],d.prototype,"eventService",void 0),en([H("columnModel")],d.prototype,"columnModel",void 0),en([H("headerNavigationService")],d.prototype,"headerNavigationService",void 0),en([H("navigationService")],d.prototype,"navigationService",void 0),en([H("columnAnimationService")],d.prototype,"columnAnimationService",void 0),en([Gn("rangeService")],d.prototype,"rangeService",void 0),en([H("focusService")],d.prototype,"focusService",void 0),en([Gn("contextMenuFactory")],d.prototype,"contextMenuFactory",void 0),en([H("popupService")],d.prototype,"popupService",void 0),en([H("valueFormatterService")],d.prototype,"valueFormatterService",void 0),en([H("stylingService")],d.prototype,"stylingService",void 0),en([H("columnHoverService")],d.prototype,"columnHoverService",void 0),en([H("userComponentFactory")],d.prototype,"userComponentFactory",void 0),en([H("userComponentRegistry")],d.prototype,"userComponentRegistry",void 0),en([H("animationFrameService")],d.prototype,"animationFrameService",void 0),en([H("dragAndDropService")],d.prototype,"dragAndDropService",void 0),en([H("sortController")],d.prototype,"sortController",void 0),en([H("filterManager")],d.prototype,"filterManager",void 0),en([H("rowContainerHeightService")],d.prototype,"rowContainerHeightService",void 0),en([H("frameworkOverrides")],d.prototype,"frameworkOverrides",void 0),en([H("cellPositionUtils")],d.prototype,"cellPositionUtils",void 0),en([H("rowPositionUtils")],d.prototype,"rowPositionUtils",void 0),en([H("selectionService")],d.prototype,"selectionService",void 0),en([Gn("selectionHandleFactory")],d.prototype,"selectionHandleFactory",void 0),en([H("rowCssClassCalculator")],d.prototype,"rowCssClassCalculator",void 0),en([H("rowModel")],d.prototype,"rowModel",void 0),en([H("ctrlsService")],d.prototype,"ctrlsService",void 0),en([H("ctrlsFactory")],d.prototype,"ctrlsFactory",void 0),en([H("agStackComponentsRegistry")],d.prototype,"agStackComponentsRegistry",void 0),en([H("valueCache")],d.prototype,"valueCache",void 0),en([H("rowNodeEventThrottle")],d.prototype,"rowNodeEventThrottle",void 0),en([et],d.prototype,"postConstruct",null),en([vt("beans")],d)}(),OM=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),QE=function(d){function i(t,s,l){var c=d.call(this)||this;return c.cellCtrl=t,c.beans=s,c.column=l,c}return OM(i,d),i.prototype.onMouseEvent=function(t,s){if(!Oa(s))switch(t){case"click":this.onCellClicked(s);break;case"mousedown":case"touchstart":this.onMouseDown(s);break;case"dblclick":this.onCellDoubleClicked(s);break;case"mouseout":this.onMouseOut(s);break;case"mouseover":this.onMouseOver(s)}},i.prototype.onCellClicked=function(t){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(t),void t.preventDefault();var s=this.beans,l=s.eventService,c=s.gridOptionsWrapper,h=this.cellCtrl.createEvent(t,$.EVENT_CELL_CLICKED);l.dispatchEvent(h);var m=this.column.getColDef();m.onCellClicked&&window.setTimeout(function(){return m.onCellClicked(h)},0),(c.isSingleClickEdit()||m.singleClickEdit)&&!c.isSuppressClickEdit()&&this.cellCtrl.startRowOrCellEdit()},i.prototype.isDoubleClickOnIPad=function(){if(!nu()||Fv("dblclick"))return!1;var t=(new Date).getTime(),s=t-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=t,s},i.prototype.onCellDoubleClicked=function(t){var s=this.column.getColDef(),l=this.cellCtrl.createEvent(t,$.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(l),"function"==typeof s.onCellDoubleClicked&&window.setTimeout(function(){return s.onCellDoubleClicked(l)},0),!this.beans.gridOptionsWrapper.isSingleClickEdit()&&!this.beans.gridOptionsWrapper.isSuppressClickEdit()&&this.cellCtrl.startRowOrCellEdit()},i.prototype.onMouseDown=function(t){var s=t.ctrlKey,l=t.metaKey,c=t.shiftKey,h=t.target,m=this.beans,S=m.eventService,R=m.rangeService;if(!this.isRightClickInExistingRange(t)){var D=R&&0!=R.getCellRanges().length;if(!c||!D){var L=(Ki()||Il())&&!this.cellCtrl.isEditing()&&!rE(h);this.cellCtrl.focusCell(L)}if(c&&D&&t.preventDefault(),!this.containsWidget(h)){if(R){var U=this.cellCtrl.getCellPosition();c?R.extendLatestRangeToCell(U):R.setRangeToCell(U,s||l)}S.dispatchEvent(this.cellCtrl.createEvent(t,$.EVENT_CELL_MOUSE_DOWN))}}},i.prototype.isRightClickInExistingRange=function(t){var s=this.beans.rangeService;return!(!s||!s.isCellInAnyRange(this.cellCtrl.getCellPosition())||2!==t.button)},i.prototype.containsWidget=function(t){return Ll(t,"ag-selection-checkbox",3)},i.prototype.onMouseOut=function(t){if(!this.mouseStayingInsideCell(t)){var s=this.cellCtrl.createEvent(t,$.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(s),this.beans.columnHoverService.clearMouseOver()}},i.prototype.onMouseOver=function(t){if(!this.mouseStayingInsideCell(t)){var s=this.cellCtrl.createEvent(t,$.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(s),this.beans.columnHoverService.setMouseOver([this.column])}},i.prototype.mouseStayingInsideCell=function(t){if(!t.target||!t.relatedTarget)return!1;var s=this.cellCtrl.getGui(),l=s.contains(t.target),c=s.contains(t.relatedTarget);return l&&c},i.prototype.destroy=function(){},i}(Tg),ex=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),tx=function(d){function i(t,s,l,c,h,m){var S=d.call(this)||this;return S.cellCtrl=t,S.beans=s,S.column=l,S.rowNode=c,S.rowCtrl=m,S}return ex(i,d),i.prototype.setComp=function(t){this.eGui=t},i.prototype.onKeyDown=function(t){var s=t.which||t.keyCode;switch(s){case Xe.ENTER:this.onEnterKeyDown(t);break;case Xe.F2:this.onF2KeyDown();break;case Xe.ESCAPE:this.onEscapeKeyDown();break;case Xe.TAB:this.onTabKeyDown(t);break;case Xe.BACKSPACE:case Xe.DELETE:this.onBackspaceOrDeleteKeyPressed(s);break;case Xe.DOWN:case Xe.UP:case Xe.RIGHT:case Xe.LEFT:this.onNavigationKeyPressed(t,s)}},i.prototype.onNavigationKeyPressed=function(t,s){this.cellCtrl.isEditing()||(t.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(s):this.beans.navigationService.navigateToNextCell(t,s,this.cellCtrl.getCellPosition(),!0),t.preventDefault())},i.prototype.onShiftRangeSelect=function(t){if(this.beans.rangeService){var s=this.beans.rangeService.extendLatestRangeInDirection(t);s&&this.beans.navigationService.ensureCellVisible(s)}},i.prototype.onTabKeyDown=function(t){this.beans.navigationService.onTabKeyDown(this.cellCtrl,t)},i.prototype.onBackspaceOrDeleteKeyPressed=function(t){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(t)},i.prototype.onEnterKeyDown=function(t){this.cellCtrl.isEditing()||this.rowCtrl.isEditing()?this.cellCtrl.stopEditingAndFocus():this.beans.gridOptionsWrapper.isEnterMovesDown()?this.beans.navigationService.navigateToNextCell(null,Xe.DOWN,this.cellCtrl.getCellPosition(),!1):(this.cellCtrl.startRowOrCellEdit(Xe.ENTER),this.cellCtrl.isEditing()&&t.preventDefault())},i.prototype.onF2KeyDown=function(){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(Xe.F2)},i.prototype.onEscapeKeyDown=function(){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))},i.prototype.onKeyPress=function(t){if(Gu(t)===this.eGui&&!this.cellCtrl.isEditing()){var c=String.fromCharCode(t.charCode);" "===c?this.onSpaceKeyPressed(t):W_(t)&&(this.cellCtrl.startRowOrCellEdit(null,c),t.preventDefault())}},i.prototype.onSpaceKeyPressed=function(t){var s=this.beans.gridOptionsWrapper;if(!this.cellCtrl.isEditing()&&s.isRowSelection()){var l=this.rowNode.isSelected(),c=!l;if(c||!s.isSuppressRowDeselection()){var h=this.beans.gridOptionsWrapper.isGroupSelectsFiltered(),m=this.rowNode.setSelectedParams({newValue:c,rangeSelect:t.shiftKey,groupSelectsFiltered:h});void 0===l&&0===m&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:t.shiftKey,groupSelectsFiltered:h})}}t.preventDefault()},i.prototype.destroy=function(){},i}(Ye),wp=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),rc=function(d){function i(t,s,l,c){var h=d.call(this,'<div class="ag-drag-handle ag-row-drag" draggable="true"></div>')||this;return h.rowNode=t,h.column=s,h.beans=l,h.eCell=c,h}return wp(i,d),i.prototype.postConstruct=function(){this.getGui().appendChild(ui("rowDrag",this.beans.gridOptionsWrapper,null)),this.addGuiEventListener("mousedown",function(s){s.stopPropagation()}),this.addDragSource(),this.checkVisibility()},i.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},i.prototype.onDragStart=function(t){var s=this,l=this.column.getColDef().dndSourceOnRowDrag,c=Ki();c||t.dataTransfer.setDragImage(this.eCell,0,0),l?l({rowNode:this.rowNode,dragEvent:t}):function(){try{var S=JSON.stringify(s.rowNode.data);c?t.dataTransfer.setData("text",S):(t.dataTransfer.setData("application/json",S),t.dataTransfer.setData("text/plain",S))}catch(R){}}()},i.prototype.checkVisibility=function(){var t=this.column.isDndSource(this.rowNode);this.setDisplayed(t)},function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([et],i.prototype,"postConstruct",null),i}(hn),nx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Sp=function(){return Sp=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Sp.apply(this,arguments)},Mg="ag-cell-not-inline-editing",sx=0,Qi=function(d){function i(t,s,l,c){var h=d.call(this)||this;return h.suppressRefreshCell=!1,h.column=t,h.rowNode=s,h.beans=l,h.rowCtrl=c,h.instanceId=t.getId()+"-"+sx++,h.createCellPosition(),h.addFeatures(),h}return nx(i,d),i.prototype.addFeatures=function(){var t=this;this.cellPositionFeature=new JE(this,this.beans),this.addDestroyFunc(function(){return t.cellPositionFeature.destroy()}),this.cellCustomStyleFeature=new Td(this,this.beans),this.addDestroyFunc(function(){return t.cellCustomStyleFeature.destroy()}),this.cellMouseListenerFeature=new QE(this,this.beans,this.column),this.addDestroyFunc(function(){return t.cellMouseListenerFeature.destroy()}),this.cellKeyboardListenerFeature=new tx(this,this.beans,this.column,this.rowNode,this.scope,this.rowCtrl),this.addDestroyFunc(function(){return t.cellKeyboardListenerFeature.destroy()}),this.beans.rangeService&&this.beans.gridOptionsWrapper.isEnableRangeSelection()&&(this.cellRangeFeature=new SC(this.beans,this),this.addDestroyFunc(function(){return t.cellRangeFeature.destroy()})),this.addTooltipFeature()},i.prototype.addTooltipFeature=function(){var t=this;this.tooltipFeature=new bC({getColumn:function(){return t.column},getColDef:function(){return t.column.getColDef()},getRowIndex:function(){return t.cellPosition.rowIndex},getRowNode:function(){return t.rowNode},getGui:function(){return t.getGui()},getLocation:function(){return"cell"},getTooltipValue:function(){var h=t.column.getColDef(),m=t.rowNode.data;if(h.tooltipField&&Fe(m))return Nf(m,h.tooltipField,t.column.isTooltipFieldContainsDots());var S=h.tooltipValueGetter;return S?S({location:"cell",api:t.beans.gridOptionsWrapper.getApi(),columnApi:t.beans.gridOptionsWrapper.getColumnApi(),context:t.beans.gridOptionsWrapper.getContext(),colDef:t.column.getColDef(),column:t.column,rowIndex:t.cellPosition.rowIndex,node:t.rowNode,data:t.rowNode.data,value:t.value,valueFormatted:t.valueFormatted}):null},getValueFormatted:function(){return t.valueFormatted}},this.beans),this.addDestroyFunc(function(){return t.tooltipFeature.destroy()})},i.prototype.setComp=function(t,s,l,c,h){this.cellComp=t,this.gow=this.beans.gridOptionsWrapper,this.scope=s,this.eGui=l,this.printLayout=c,this.updateAndFormatValue(!0),this.addDomData(),this.onCellFocused(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAriaExpanded(),this.setupAutoHeight();var m=ua(this.column.getId()),S=this.beans.columnModel.getAriaColumnIndex(this.column);this.cellComp.setTabIndex(-1),this.cellComp.setRole("gridcell"),this.cellComp.setAriaColIndex(S),this.cellComp.setColId(m),this.cellComp.setUnselectable(this.beans.gridOptionsWrapper.isEnableCellTextSelection()?null:"on"),this.cellPositionFeature.setComp(t),this.cellCustomStyleFeature.setComp(t,s),this.tooltipFeature.setComp(t),this.cellKeyboardListenerFeature.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t),h&&this.isCellEditable()?this.startEditing():this.showValue()},i.prototype.setupAutoHeight=function(){var t=this;if(this.column.getColDef().autoHeight){var s=function h(m){var S=t.beans.gridOptionsWrapper.getDocument();S&&S.contains(t.eGui)||!(m<5)?t.rowNode.setRowAutoHeight(t.eGui.offsetHeight,t.column):t.beans.frameworkOverrides.setTimeout(function(){return h(m++)},0)},l=function(){return s(0)};l();var c=this.beans.resizeObserverService.observeResize(this.eGui,l);this.addDestroyFunc(function(){c(),t.rowNode.setRowAutoHeight(void 0,t.column)})}},i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.showValue=function(t){void 0===t&&(t=!1);var s=null!=this.valueFormatted?this.valueFormatted:this.value,l=this.createCellRendererParams(),c=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),l);this.cellComp.setRenderDetails(c,s,t),this.refreshHandle()},i.prototype.setupControlComps=function(){var t=this.column.getColDef();this.includeSelection=this.isIncludeControl(t.checkboxSelection),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource);var s=this.beans.gridOptionsWrapper.isEnableCellTextSelection()||1==this.column.getColDef().autoHeight;this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag),this.cellComp.setForceWrapper(s)},i.prototype.isIncludeControl=function(t){return!(null!=this.rowNode.rowPinned||"function"!=typeof t&&!0!==t)},i.prototype.setupAriaExpanded=function(){var t=this,s=this.column.getColDef();if(this.rowNode.isExpandable()){var l=s.showRowGroup,c=this.rowNode.rowGroupColumn,h=!0===l,m=c&&c.getColId()===l;if(h||m){var R=function(){t.cellComp.setAriaExpanded(!!t.rowNode.expanded)};this.addManagedListener(this.rowNode,ln.EVENT_EXPANDED_CHANGED,R),R()}}},i.prototype.refreshShouldDestroy=function(){var t=this.column.getColDef(),s=this.includeSelection!=this.isIncludeControl(t.checkboxSelection),l=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),c=this.includeDndSource!=this.isIncludeControl(t.dndSource);return s||l||c},i.prototype.startEditing=function(t,s,l){if(void 0===t&&(t=null),void 0===s&&(s=null),void 0===l&&(l=!1),this.isCellEditable()&&!this.editing){var c=this.createCellEditorParams(t,s,l),h=this.column.getColDef(),m=this.beans.userComponentFactory.getCellEditorDetails(h,c),S=!!h.cellEditorPopup,R=h.cellEditorPopupPosition;this.setEditing(!0,S),this.cellComp.setEditDetails(m,S,R);var D=this.createEvent(null,$.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(D)}},i.prototype.setEditing=function(t,s){void 0===s&&(s=!1),this.editing!==t&&(this.editing=t,this.editingInPopup=s,this.setInlineEditingClass())},i.prototype.stopRowOrCellEdit=function(t){void 0===t&&(t=!1),this.beans.gridOptionsWrapper.isFullRowEdit()?this.rowCtrl.stopRowEditing(t):this.stopEditing(t)},i.prototype.onPopupEditorClosed=function(){!this.isEditing()||this.stopEditingAndFocus()},i.prototype.takeValueFromCellEditor=function(t){var s={newValueExists:!1};if(t)return s;var l=this.cellComp.getCellEditor();return l?l.isCancelAfterEnd&&l.isCancelAfterEnd()?s:{newValue:l.getValue(),newValueExists:!0}:s},i.prototype.saveNewValue=function(t,s){s!==t&&(this.suppressRefreshCell=!0,this.rowNode.setDataValue(this.column,s),this.suppressRefreshCell=!1)},i.prototype.stopEditing=function(t){if(void 0===t&&(t=!1),this.editing){var s=this.takeValueFromCellEditor(t),l=s.newValue,c=s.newValueExists,h=this.getValueFromValueService();c&&this.saveNewValue(h,l),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(h,l)}},i.prototype.dispatchEditingStoppedEvent=function(t,s){var l=Sp(Sp({},this.createEvent(null,$.EVENT_CELL_EDITING_STOPPED)),{oldValue:t,newValue:s});this.beans.eventService.dispatchEvent(l)},i.prototype.setInlineEditingClass=function(){if(this.isAlive()){var t=this.editing&&!this.editingInPopup,s=this.editing&&this.editingInPopup;this.cellComp.addOrRemoveCssClass("ag-cell-inline-editing",t),this.cellComp.addOrRemoveCssClass(Mg,!t),this.cellComp.addOrRemoveCssClass("ag-cell-popup-editing",s),this.rowCtrl.setInlineEditingCss(this.editing)}},i.prototype.hackSayEditingInPopup=function(){this.editingInPopup||(this.editingInPopup=!0,this.setInlineEditingClass())},i.prototype.createCellEditorParams=function(t,s,l){var c={value:this.getValueFromValueService(),keyPress:t,charPress:s,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsWrapper.getApi(),cellStartedEdit:l,columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)};return this.scope&&(c.$scope=this.scope),c},i.prototype.createCellRendererParams=function(){var t=this,l={value:this.value,valueFormatted:this.valueFormatted,getValue:this.getValueFromValueService.bind(this),setValue:function(h){return t.beans.valueService.setValue(t.rowNode,t.column,h)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:function(h,m,S,R){return t.registerRowDragger(h,m,R)},addRowCompListener:function(h,m){console.warn("AG Grid: since AG Grid v26, params.addRowCompListener() is deprecated. If you need this functionality, please contact AG Grid support and advise why so that we can revert with an appropriate workaround, as we dont have any valid use cases for it. This method was originally provided as a work around to know when cells were destroyed in AG Grid before custom Cell Renderers could be provided."),t.rowCtrl.addEventListener(h,m)}};return this.scope&&(l.$scope=this.scope),l},i.prototype.parseValue=function(t){var s=this.column.getColDef(),l={node:this.rowNode,data:this.rowNode.data,oldValue:this.getValue(),newValue:t,colDef:s,column:this.column,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()},c=s.valueParser;return Fe(c)?this.beans.expressionService.evaluate(c,l):t},i.prototype.setFocusOutOnEditor=function(){if(this.editing){var t=this.cellComp.getCellEditor();t&&t.focusOut&&t.focusOut()}},i.prototype.setFocusInOnEditor=function(){if(this.editing){var t=this.cellComp.getCellEditor();t&&t.focusIn?t.focusIn():this.focusCell(!0)}},i.prototype.onCellChanged=function(t){t.column===this.column&&this.refreshCell({})},i.prototype.refreshCell=function(t){if(!this.suppressRefreshCell&&!this.editing){var s=this.column.getColDef(),l=null!=t&&!!t.newData,c=null!=t&&!!t.suppressFlash||!!s.suppressCellFlash,m=t&&t.forceRefresh||null==s.field&&null==s.valueGetter&&null==s.showRowGroup||l,S=this.updateAndFormatValue();if(m||S){this.showValue(l);var D=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!c&&!D&&(this.beans.gridOptionsWrapper.isEnableCellChangeFlash()||s.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature.applyUserStyles(),this.cellCustomStyleFeature.applyClassesFromColDef()}this.refreshToolTip(),this.cellCustomStyleFeature.applyCellClassRules()}},i.prototype.stopEditingAndFocus=function(t){void 0===t&&(t=!1),this.stopRowOrCellEdit(),this.focusCell(!0),t||this.navigateAfterEdit()},i.prototype.navigateAfterEdit=function(){this.beans.gridOptionsWrapper.isFullRowEdit()||this.beans.gridOptionsWrapper.isEnterMovesDownAfterEdit()&&this.beans.navigationService.navigateToNextCell(null,Xe.DOWN,this.getCellPosition(),!1)},i.prototype.flashCell=function(t){this.animateCell("data-changed",t&&t.flashDelay,t&&t.fadeDelay)},i.prototype.animateCell=function(t,s,l){var c=this,h="ag-cell-"+t,m="ag-cell-"+t+"-animation",S=this.beans.gridOptionsWrapper;s||(s=S.getCellFlashDelay()),Fe(l)||(l=S.getCellFadeDelay()),this.cellComp.addOrRemoveCssClass(h,!0),this.cellComp.addOrRemoveCssClass(m,!1),window.setTimeout(function(){c.cellComp.addOrRemoveCssClass(h,!1),c.cellComp.addOrRemoveCssClass(m,!0),c.cellComp.setTransition("background-color "+l+"ms"),window.setTimeout(function(){c.cellComp.addOrRemoveCssClass(m,!1),c.cellComp.setTransition("transition")},l)},s)},i.prototype.onFlashCells=function(t){var s=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[s]&&this.animateCell("highlight")},i.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},i.prototype.isSuppressFillHandle=function(){return this.column.isSuppressFillHandle()},i.prototype.formatValue=function(t){var s=this.callValueFormatter(t);return null!=s?s:t},i.prototype.callValueFormatter=function(t){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,this.scope,t)},i.prototype.updateAndFormatValue=function(t){void 0===t&&(t=!1);var s=this.value,l=this.valueFormatted;return this.value=this.getValueFromValueService(),this.valueFormatted=this.callValueFormatter(this.value),!!t||!this.valuesAreEqual(s,this.value)||this.valueFormatted!=l},i.prototype.valuesAreEqual=function(t,s){var l=this.column.getColDef();return l.equals?l.equals(t,s):t===s},i.prototype.getComp=function(){return this.cellComp},i.prototype.getValueFromValueService=function(){var t=this.rowNode.leafGroup&&this.beans.columnModel.isPivotMode(),s=this.rowNode.group&&this.rowNode.expanded&&!this.rowNode.footer&&!t,l=this.beans.gridOptionsWrapper.isGroupIncludeFooter(),c=this.beans.gridOptionsWrapper.isGroupSuppressBlankHeader();return this.beans.valueService.getValue(this.column,this.rowNode,!1,s&&l&&!c)},i.prototype.getValue=function(){return this.value},i.prototype.getValueFormatted=function(){return this.valueFormatted},i.prototype.addDomData=function(){var t=this,s=this.getGui();this.beans.gridOptionsWrapper.setDomData(s,i.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(function(){return t.beans.gridOptionsWrapper.setDomData(s,i.DOM_DATA_KEY_CELL_CTRL,null)})},i.prototype.createEvent=function(t,s){var l={type:s,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex};return this.scope&&(l.$scope=this.scope),l},i.prototype.onKeyPress=function(t){this.cellKeyboardListenerFeature.onKeyPress(t)},i.prototype.onKeyDown=function(t){this.cellKeyboardListenerFeature.onKeyDown(t)},i.prototype.onMouseEvent=function(t,s){this.cellMouseListenerFeature.onMouseEvent(t,s)},i.prototype.getGui=function(){return this.eGui},i.prototype.refreshToolTip=function(){this.tooltipFeature.refreshToolTip()},i.prototype.getColSpanningList=function(){return this.cellPositionFeature.getColSpanningList()},i.prototype.onLeftChanged=function(){this.cellPositionFeature.onLeftChanged(),this.refreshAriaIndex()},i.prototype.refreshAriaIndex=function(){var t=this.beans.columnModel.getAriaColumnIndex(this.column);this.cellComp.setAriaColIndex(t)},i.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},i.prototype.onWidthChanged=function(){return this.cellPositionFeature.onWidthChanged()},i.prototype.getColumn=function(){return this.column},i.prototype.getRowNode=function(){return this.rowNode},i.prototype.getBeans=function(){return this.beans},i.prototype.isPrintLayout=function(){return this.printLayout},i.prototype.appendChild=function(t){this.eGui.appendChild(t)},i.prototype.refreshHandle=function(){this.editing||this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()},i.prototype.getCellPosition=function(){return this.cellPosition},i.prototype.isEditing=function(){return this.editing},i.prototype.startRowOrCellEdit=function(t,s){this.beans.gridOptionsWrapper.isFullRowEdit()?this.rowCtrl.startRowEditing(t,s,this):this.startEditing(t,s,!0)},i.prototype.getRowCtrl=function(){return this.rowCtrl},i.prototype.getRowPosition=function(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}},i.prototype.updateRangeBordersIfRangeCount=function(){this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()},i.prototype.onRangeSelectionChanged=function(){this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},i.prototype.isRangeSelectionEnabled=function(){return null!=this.cellRangeFeature},i.prototype.focusCell=function(t){void 0===t&&(t=!1),this.beans.focusService.setFocusedCell(this.getCellPosition().rowIndex,this.column,this.rowNode.rowPinned,t)},i.prototype.onRowIndexChanged=function(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},i.prototype.onFirstRightPinnedChanged=function(){if(this.cellComp){var t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",t)}},i.prototype.onLastLeftPinnedChanged=function(){if(this.cellComp){var t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",t)}},i.prototype.onCellFocused=function(t){if(this.cellComp){var s=this.beans.focusService.isCellFocused(this.cellPosition);if(this.gow.isSuppressCellSelection()||this.cellComp.addOrRemoveCssClass("ag-cell-focus",s),s&&t&&t.forceBrowserFocus){var l=this.cellComp.getFocusableElement();l.focus(),(!document.activeElement||document.activeElement===document.body)&&l.focus()}var c=this.beans.gridOptionsWrapper.isFullRowEdit();!s&&!c&&this.editing&&this.stopRowOrCellEdit()}},i.prototype.createCellPosition=function(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,column:this.column}},i.prototype.applyStaticCssClasses=function(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass(Mg,!0);var t=1==this.column.getColDef().autoHeight;this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",t),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!t)},i.prototype.onColumnHover=function(){if(this.cellComp&&this.beans.gridOptionsWrapper.isColumnHoverHighlight()){var t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",t)}},i.prototype.onNewColumnsLoaded=function(){!this.cellComp||(this.setWrapText(),this.editing||this.refreshCell({forceRefresh:!0,suppressFlash:!0}))},i.prototype.setWrapText=function(){var t=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",t)},i.prototype.dispatchCellContextMenuEvent=function(t){var s=this.column.getColDef(),l=this.createEvent(t,$.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(l),s.onCellContextMenu&&window.setTimeout(function(){return s.onCellContextMenu(l)},0)},i.prototype.getCellRenderer=function(){return this.cellComp?this.cellComp.getCellRenderer():null},i.prototype.getCellEditor=function(){return this.cellComp?this.cellComp.getCellEditor():null},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.createSelectionCheckbox=function(){var t=new uu;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t},i.prototype.createDndSource=function(){var t=new rc(this.rowNode,this.column,this.beans,this.eGui);return this.beans.context.createBean(t),t},i.prototype.registerRowDragger=function(t,s,l){var c=this;if(this.customRowDragComp)this.customRowDragComp.setDragElement(t,s);else{var h=this.createRowDragComp(t,s,l);h&&(this.customRowDragComp=h,this.addDestroyFunc(function(){return c.beans.context.destroyBean(h)}))}},i.prototype.createRowDragComp=function(t,s,l){var c=this,h=this.beans.gridOptionsWrapper.isPagination(),m=this.beans.gridOptionsWrapper.isRowDragManaged(),S=this.beans.gridOptionsWrapper.isRowModelDefault();if(m){if(!S)return void mn(function(){return console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model")},"CellComp.addRowDragging");if(h)return void mn(function(){return console.warn("AG Grid: managed row dragging is not possible when doing pagination")},"CellComp.addRowDragging")}var R=new Xl(function(){return c.value},this.rowNode,this.column,t,s,l);return this.beans.context.createBean(R),R},i.DOM_DATA_KEY_CELL_CTRL="cellCtrl",i}(Ye),Yu=function(){return Yu=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Yu.apply(this,arguments)},ux=function(){function d(){}return d.createChildScopeOrNull=function(i,t,s){if(!s.isAngularCompileRows())return null;var c=t.$new();return c.data=Yu({},i.data),c.rowNode=i,c.context=s.getContext(),{scope:c,scopeDestroyFunc:function(){c.$destroy(),c.data=null,c.rowNode=null,c.context=null}}},d}(),IM=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Si=function(){return function(d){d.Normal="Normal",d.FullWidth="FullWidth",d.FullWidthLoading="FullWidthLoading",d.FullWidthGroup="FullWidthGroup",d.FullWidthDetail="FullWidthDetail"}(Si||(Si={})),Si}(),FM=Pa([[Si.FullWidthLoading,"agLoadingCellRenderer"],[Si.FullWidthGroup,"agGroupRowRenderer"],[Si.FullWidthDetail,"agDetailCellRenderer"]]),kM=Pa([[Si.FullWidth,"fullWidthCellRenderer"],[Si.FullWidthLoading,"loadingCellRenderer"],[Si.FullWidthGroup,"groupRowRenderer"],[Si.FullWidthDetail,"detailCellRenderer"]]),TC=0,lu=function(d){function i(t,s,l,c,h,m){var S=d.call(this)||this;return S.allRowGuis=[],S.active=!0,S.centerCellCtrls={list:[],map:{}},S.leftCellCtrls={list:[],map:{}},S.rightCellCtrls={list:[],map:{}},S.lastMouseDownOnDragger=!1,S.updateColumnListsPending=!1,S.parentScope=t,S.beans=l,S.rowNode=s,S.paginationPage=S.beans.paginationProxy.getCurrentPage(),S.useAnimationFrameForCreate=h,S.printLayout=m,S.instanceId=s.id+"-"+TC++,S.setAnimateFlags(c),S.rowFocused=S.beans.focusService.isRowFocused(S.rowNode.rowIndex,S.rowNode.rowPinned),S.setupAngular1Scope(),S.rowLevel=S.beans.rowCssClassCalculator.calculateRowLevel(S.rowNode),S.setRowType(),S.addListeners(),S.setInitialRowTop(),S}return IM(i,d),i.prototype.getBeans=function(){return this.beans},i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.setComp=function(t,s,l){var c={rowComp:t,element:s,pinned:l};this.allRowGuis.push(c),l===fe.PINNED_LEFT?this.leftGui=c:l===fe.PINNED_RIGHT?this.rightGui=c:this.isFullWidth()&&!this.beans.gridOptionsWrapper.isEmbedFullWidthRows()?this.fullWidthGui=c:this.centerGui=c,(null!=this.leftGui&&null!=this.rightGui&&null!=this.centerGui||null!=this.fullWidthGui)&&this.initialiseRowComps()},i.prototype.isCacheable=function(){return this.rowType===Si.FullWidthDetail&&this.beans.gridOptionsWrapper.isKeepDetailRows()},i.prototype.setCached=function(t){var s=t?"none":void 0;this.allRowGuis.forEach(function(l){return l.rowComp.setDisplay(s)})},i.prototype.initialiseRowComps=function(){var t=this,s=this.beans.gridOptionsWrapper;this.onRowHeightChanged(),this.updateRowIndexes(),this.setFocusedClasses(),this.setStylesFromGridOptions(),s.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(),this.updateColumnLists(!this.useAnimationFrameForCreate),this.slideRowIn&&m_(this.onTopChanged.bind(this)),this.fadeRowIn&&m_(function(){t.allRowGuis.forEach(function(m){return m.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)})});var l=this.getRowBusinessKey(),c=ua(this.rowNode.id),h=ua(l);this.allRowGuis.forEach(function(m){var S=m.rowComp;S.setRole("row"),t.getInitialRowClasses(m.pinned).forEach(function(D){return S.addOrRemoveCssClass(D,!0)}),t.rowNode.group&&S.setAriaExpanded(1==t.rowNode.expanded),null!=c&&S.setRowId(c),null!=h&&S.setRowBusinessKey(h),t.isFullWidth()&&S.setTabIndex(-1),s.setDomData(m.element,i.DOM_DATA_KEY_ROW_CTRL,t),t.addDestroyFunc(function(){return s.setDomData(m.element,i.DOM_DATA_KEY_ROW_CTRL,null)}),t.useAnimationFrameForCreate?t.beans.animationFrameService.createTask(t.addHoverFunctionality.bind(t,m.element),t.rowNode.rowIndex,"createTasksP2"):t.addHoverFunctionality(m.element),t.isFullWidth()&&t.setupFullWidth(m),s.isRowDragEntireRow()&&t.addRowDraggerToRow(m),t.beans.animationFrameService.addDestroyTask(function(){t.isAlive()&&m.rowComp.addOrRemoveCssClass("ag-after-created",!0)})}),this.executeProcessRowPostCreateFunc()},i.prototype.addRowDraggerToRow=function(t){if(this.beans.gridOptionsWrapper.isEnableRangeSelection())mn(function(){console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`")},"rowDragAndRangeSelectionEnabled");else{var l=new Xl(function(){return"1 row"},this.rowNode,void 0,t.element,void 0,!0);this.createManagedBean(l,this.beans.context)}},i.prototype.getFullWidthCellRendererType=function(){return kM.get(this.rowType)},i.prototype.getFullWidthCellRendererName=function(){return FM.get(this.rowType)},i.prototype.setupFullWidth=function(t){var s=this.createFullWidthParams(t.element,t.pinned),l=this.getFullWidthCellRendererType(),c=this.getFullWidthCellRendererName(),h=this.beans.userComponentFactory.getFullWidthCellRendererDetails(s,l,c);if(h)t.rowComp.showFullWidth(h);else{var m=Kt.isRegistered(Y.GXE.MasterDetailModule);"agDetailCellRenderer"!==c||m?console.error("AG Grid: fullWidthCellRenderer "+c+" not found"):console.warn("AG Grid: cell renderer agDetailCellRenderer (for master detail) not found. Did you forget to include the master detail module?")}},i.prototype.getScope=function(){return this.scope},i.prototype.isPrintLayout=function(){return this.printLayout},i.prototype.setupAngular1Scope=function(){var t=ux.createChildScopeOrNull(this.rowNode,this.parentScope,this.beans.gridOptionsWrapper);t&&(this.scope=t.scope,this.addDestroyFunc(t.scopeDestroyFunc))},i.prototype.getCellElement=function(t){var s=this.getCellCtrl(t);return s?s.getGui():null},i.prototype.executeProcessRowPostCreateFunc=function(){var t=this.beans.gridOptionsWrapper.getProcessRowPostCreateFunc();t&&t({eRow:this.centerGui?this.centerGui.element:void 0,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,api:this.beans.gridOptionsWrapper.getApi(),rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()})},i.prototype.setRowType=function(){var t=this.rowNode.stub,s=this.rowNode.isFullWidthCell(),l=this.beans.doingMasterDetail&&this.rowNode.detail,c=this.beans.columnModel.isPivotMode(),m=!!this.rowNode.group&&!this.rowNode.footer&&this.beans.gridOptionsWrapper.isGroupUseEntireRow(c);this.rowType=t?Si.FullWidthLoading:l?Si.FullWidthDetail:s?Si.FullWidth:m?Si.FullWidthGroup:Si.Normal},i.prototype.updateColumnLists=function(t){var s=this;if(void 0===t&&(t=!1),!this.isFullWidth()){if(t||this.beans.gridOptionsWrapper.isSuppressAnimationFrame()||this.printLayout)return void this.updateColumnListsImpl();this.updateColumnListsPending||(this.beans.animationFrameService.createTask(function(){!s.active||s.updateColumnListsImpl()},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}},i.prototype.createCellCtrls=function(t,s,l){var c=this;void 0===l&&(l=null);var h={list:[],map:{}},m=function(R,D){h.list.push(D),h.map[R]=D};return s.forEach(function(S){var R=S.getInstanceId(),D=t.map[R];D||(D=new Qi(S,c.rowNode,c.beans,c)),m(R,D)}),t.list.forEach(function(S){if(null==h.map[S.getColumn().getInstanceId()]){if(!c.isCellEligibleToBeRemoved(S,l))return void m(S.getColumn().getInstanceId(),S);S.destroy()}}),h},i.prototype.updateColumnListsImpl=function(){var t=this;this.updateColumnListsPending=!1;var s=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,s.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{var l=s.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,l);var c=s.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,c,fe.PINNED_LEFT);var h=s.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,h,fe.PINNED_RIGHT)}this.allRowGuis.forEach(function(m){m.rowComp.setCellCtrls((m.pinned===fe.PINNED_LEFT?t.leftCellCtrls:m.pinned===fe.PINNED_RIGHT?t.rightCellCtrls:t.centerCellCtrls).list)})},i.prototype.isCellEligibleToBeRemoved=function(t,s){var l=!0;if(t.getColumn().getPinned()!=s)return l;var m=t.isEditing(),S=this.beans.focusService.isCellFocused(t.getCellPosition());if(m||S){var D=t.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(D)>=0)&&l}return l},i.prototype.setAnimateFlags=function(t){if(t){var s=Fe(this.rowNode.oldRowTop);this.slideRowIn=s,this.fadeRowIn=!s}else this.slideRowIn=!1,this.fadeRowIn=!1},i.prototype.isEditing=function(){return this.editingRow},i.prototype.stopRowEditing=function(t){this.stopEditing(t)},i.prototype.isFullWidth=function(){return this.rowType!==Si.Normal},i.prototype.getRowType=function(){return this.rowType},i.prototype.refreshFullWidth=function(){var t=this,s=function(D,L){if(!D)return!0;var U=D.rowComp.getFullWidthCellRenderer();if(!U||!U.refresh)return!1;var K=t.createFullWidthParams(D.element,L);return U.refresh(K)},l=s(this.fullWidthGui,null),c=s(this.centerGui,null),h=s(this.leftGui,fe.PINNED_LEFT),m=s(this.rightGui,fe.PINNED_RIGHT);return l&&c&&h&&m},i.prototype.addListeners=function(){this.addManagedListener(this.rowNode,ln.EVENT_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_ROW_SELECTED,this.onRowSelected.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));var t=this.beans.eventService;this.addManagedListener(t,$.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(t,$.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(t,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(t,$.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(t,$.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(t,$.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(t,$.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(t,$.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addListenersForCellComps()},i.prototype.onColumnMoved=function(){this.updateColumnLists()},i.prototype.addListenersForCellComps=function(){var t=this;this.addManagedListener(this.rowNode,ln.EVENT_ROW_INDEX_CHANGED,function(){t.getAllCellCtrls().forEach(function(s){return s.onRowIndexChanged()})}),this.addManagedListener(this.rowNode,ln.EVENT_CELL_CHANGED,function(s){t.getAllCellCtrls().forEach(function(l){return l.onCellChanged(s)})})},i.prototype.onRowNodeDataChanged=function(t){this.getAllCellCtrls().forEach(function(s){return s.refreshCell({suppressFlash:!t.update,newData:!t.update})}),this.onRowSelected(),this.postProcessCss()},i.prototype.onRowNodeCellChanged=function(){this.postProcessCss()},i.prototype.postProcessCss=function(){this.setStylesFromGridOptions(),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},i.prototype.onRowNodeHighlightChanged=function(){var t=this.rowNode.highlighted;this.allRowGuis.forEach(function(s){var c=t===Y.oh5.Below;s.rowComp.addOrRemoveCssClass("ag-row-highlight-above",t===Y.oh5.Above),s.rowComp.addOrRemoveCssClass("ag-row-highlight-below",c)})},i.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()},i.prototype.postProcessRowDragging=function(){var t=this.rowNode.dragging;this.allRowGuis.forEach(function(s){return s.rowComp.addOrRemoveCssClass("ag-row-dragging",t)})},i.prototype.updateExpandedCss=function(){var t=this.rowNode.isExpandable(),s=1==this.rowNode.expanded;this.allRowGuis.forEach(function(l){l.rowComp.addOrRemoveCssClass("ag-row-group",t),l.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&s),l.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!s),l.rowComp.setAriaExpanded(t&&s)})},i.prototype.onDisplayedColumnsChanged=function(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()},i.prototype.onVirtualColumnsChanged=function(){this.updateColumnLists()},i.prototype.getRowPosition=function(){return{rowPinned:this.rowNode.rowPinned,rowIndex:this.rowNode.rowIndex}},i.prototype.onKeyboardNavigate=function(t){var s=Li(this.allRowGuis,function(R){return R.element.contains(t.target)});if((s?s.element:null)===t.target){var h=this.rowNode,m=this.beans.focusService.getFocusedCell();this.beans.navigationService.navigateToNextCell(t,t.keyCode,{rowIndex:h.rowIndex,rowPinned:h.rowPinned,column:m&&m.column},!0),t.preventDefault()}},i.prototype.onTabKeyDown=function(t){if(!t.defaultPrevented&&!Oa(t)){var s=Li(this.allRowGuis,function(m){return m.element.contains(t.target)}),l=s?s.element:null,c=l===t.target,h=null;c||(h=this.beans.focusService.findNextFocusableElement(l,!1,t.shiftKey)),(this.isFullWidth()&&c||!h)&&this.beans.navigationService.onTabKeyDown(this,t)}},i.prototype.onFullWidthRowFocused=function(t){var s=this.rowNode,l=this.isFullWidth()&&t.rowIndex===s.rowIndex&&t.rowPinned==s.rowPinned,c=this.fullWidthGui?this.fullWidthGui.element:this.centerGui.element;kt(c,"ag-full-width-focus",l),l&&c.focus({preventScroll:!0})},i.prototype.refreshCell=function(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),this.updateColumnLists()},i.prototype.removeCellCtrl=function(t,s){var l={list:[],map:{}};return t.list.forEach(function(c){c!==s&&(l.list.push(c),l.map[c.getInstanceId()]=c)}),l},i.prototype.onMouseEvent=function(t,s){switch(t){case"dblclick":this.onRowDblClick(s);break;case"click":this.onRowClick(s);break;case"touchstart":case"mousedown":this.onRowMouseDown(s)}},i.prototype.createRowEvent=function(t,s){return{type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),event:s}},i.prototype.createRowEventWithSource=function(t,s){var l=this.createRowEvent(t,s);return l.source=this,l},i.prototype.onRowDblClick=function(t){if(!Oa(t)){var s=this.createRowEventWithSource($.EVENT_ROW_DOUBLE_CLICKED,t);this.beans.eventService.dispatchEvent(s)}},i.prototype.onRowMouseDown=function(t){if(this.lastMouseDownOnDragger=Ll(t.target,"ag-row-drag",3),this.isFullWidth()){var s=this.rowNode;this.beans.focusService.setFocusedCell(s.rowIndex,this.beans.columnModel.getAllDisplayedColumns()[0],s.rowPinned,!0)}},i.prototype.onRowClick=function(t){if(!Oa(t)&&!this.lastMouseDownOnDragger){var l=this.createRowEventWithSource($.EVENT_ROW_CLICKED,t);this.beans.eventService.dispatchEvent(l);var c=t.ctrlKey||t.metaKey,h=t.shiftKey;if(!(this.beans.gridOptionsWrapper.isGroupSelectsChildren()&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.beans.gridOptionsWrapper.isRowSelection()||this.beans.gridOptionsWrapper.isSuppressRowClickSelection())){var S=this.beans.gridOptionsWrapper.isRowMultiSelectWithClick(),R=!this.beans.gridOptionsWrapper.isSuppressRowDeselection();this.rowNode.isSelected()?S?this.rowNode.setSelectedParams({newValue:!1}):c?R&&this.rowNode.setSelectedParams({newValue:!1}):this.rowNode.setSelectedParams({newValue:!h,clearSelection:!h,rangeSelect:h}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!S&&!c,rangeSelect:h})}}},i.prototype.setupDetailRowAutoHeight=function(t){var s=this;if(this.beans.gridOptionsWrapper.isDetailRowAutoHeight()){var l=function(){var m=t.clientHeight;null!=m&&m>0&&s.beans.frameworkOverrides.setTimeout(function(){s.rowNode.setRowHeight(m),s.beans.clientSideRowModel?s.beans.clientSideRowModel.onRowHeightChanged():s.beans.serverSideRowModel&&s.beans.serverSideRowModel.onRowHeightChanged()},0)},c=this.beans.resizeObserverService.observeResize(t,l);this.addDestroyFunc(c),l()}},i.prototype.createFullWidthParams=function(t,s){var l=this;return{fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,$scope:this.scope?this.scope:this.parentScope,$compile:this.beans.$compile,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),eGridCell:t,eParentOfValue:t,pinned:s,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:function(m,S,R,D){return l.addFullWidthRowDragging(m,S,R,D)}}},i.prototype.addFullWidthRowDragging=function(t,s,l,c){if(void 0===l&&(l=""),this.isFullWidth()){var h=new Xl(function(){return l},this.rowNode,void 0,t,s,c);this.createManagedBean(h,this.beans.context)}},i.prototype.onUiLevelChanged=function(){var t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){var s="ag-row-level-"+t,l="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(function(c){c.rowComp.addOrRemoveCssClass(s,!0),c.rowComp.addOrRemoveCssClass(l,!1)})}this.rowLevel=t},i.prototype.isFirstRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()},i.prototype.isLastRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()},i.prototype.onModelUpdated=function(){var t=this.isFirstRowOnPage(),s=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass("ag-row-first",t)})),this.lastRowOnPage!==s&&(this.lastRowOnPage=s,this.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass("ag-row-last",s)}))},i.prototype.stopEditing=function(t){if(void 0===t&&(t=!1),this.getAllCellCtrls().forEach(function(l){return l.stopEditing(t)}),this.editingRow){if(!t){var s=this.createRowEvent($.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(s)}this.setEditingRow(!1)}},i.prototype.setInlineEditingCss=function(t){this.allRowGuis.forEach(function(s){s.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),s.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})},i.prototype.setEditingRow=function(t){this.editingRow=t,this.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass("ag-row-editing",t)});var s=this.createRowEvent(t?$.EVENT_ROW_EDITING_STARTED:$.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(s)},i.prototype.startRowEditing=function(t,s,l){void 0===t&&(t=null),void 0===s&&(s=null),void 0===l&&(l=null),!this.editingRow&&(this.getAllCellCtrls().forEach(function(c){var h=c===l;h?c.startEditing(t,s,h):c.startEditing(null,null,h)}),this.setEditingRow(!0))},i.prototype.getAllCellCtrls=function(){var t=function(){for(var d=0,i=0,t=arguments.length;i<t;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<t;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s}(this.centerCellCtrls.list,this.leftCellCtrls.list,this.rightCellCtrls.list);return t},i.prototype.postProcessClassesFromGridOptions=function(){var t=this,s=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode,this.scope);!s||!s.length||s.forEach(function(l){t.allRowGuis.forEach(function(c){return c.rowComp.addOrRemoveCssClass(l,!0)})})},i.prototype.postProcessRowClassRules=function(){var t=this;this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,this.scope,function(s){t.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass(s,!0)})},function(s){t.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass(s,!1)})})},i.prototype.setStylesFromGridOptions=function(){var t=this.processStylesFromGridOptions();this.allRowGuis.forEach(function(s){return s.rowComp.setUserStyles(t)})},i.prototype.getRowBusinessKey=function(){var t=this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc();if("function"==typeof t)return t(this.rowNode)},i.prototype.getInitialRowClasses=function(t){var s={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeRowIn,rowIsEven:this.rowNode.rowIndex%2==0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),scope:this.scope,pinned:t};return this.beans.rowCssClassCalculator.getInitialRowClasses(s)},i.prototype.processStylesFromGridOptions=function(){var t=this.beans.gridOptionsWrapper.getRowStyle();if(!t||"function"!=typeof t){var l,s=this.beans.gridOptionsWrapper.getRowStyleFunc();return s&&(l=s({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,$scope:this.scope,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()})),ii({},t,l)}console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead")},i.prototype.onRowSelected=function(){var t=this,s=this.rowNode.isSelected();this.allRowGuis.forEach(function(l){l.rowComp.setAriaSelected(!!s||void 0),l.rowComp.addOrRemoveCssClass("ag-row-selected",s),l.rowComp.setAriaLabel(t.createAriaLabel())})},i.prototype.createAriaLabel=function(){var t=this.rowNode.isSelected();if(!t||!this.beans.gridOptionsWrapper.isSuppressRowDeselection())return this.beans.gridOptionsWrapper.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect","Press SPACE to "+(t?"deselect":"select")+" this row.")},i.prototype.isUseAnimationFrameForCreate=function(){return this.useAnimationFrameForCreate},i.prototype.addHoverFunctionality=function(t){var s=this;!this.active||(this.addManagedListener(t,"mouseenter",function(){return s.rowNode.onMouseEnter()}),this.addManagedListener(t,"mouseleave",function(){return s.rowNode.onMouseLeave()}),this.addManagedListener(this.rowNode,ln.EVENT_MOUSE_ENTER,function(){s.beans.gridOptionsWrapper.isSuppressRowHoverHighlight()||At(t,"ag-row-hover")}),this.addManagedListener(this.rowNode,ln.EVENT_MOUSE_LEAVE,function(){_i(t,"ag-row-hover")}))},i.prototype.roundRowTopToBounds=function(t){var l=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),c=this.applyPaginationOffset(l.top,!0)-100,h=this.applyPaginationOffset(l.bottom,!0)+100;return Math.min(Math.max(c,t),h)},i.prototype.getFrameworkOverrides=function(){return this.beans.frameworkOverrides},i.prototype.onRowHeightChanged=function(){if(Fe(this.rowNode.rowHeight)){var t=this.rowNode.rowHeight+"px";this.allRowGuis.forEach(function(s){return s.rowComp.setHeight(t)})}},i.prototype.addEventListener=function(t,s){("renderedRowRemoved"===t||"rowRemoved"===t)&&(t=$.EVENT_VIRTUAL_ROW_REMOVED,console.warn("AG Grid: Since version 11, event renderedRowRemoved is now called "+$.EVENT_VIRTUAL_ROW_REMOVED)),d.prototype.addEventListener.call(this,t,s)},i.prototype.removeEventListener=function(t,s){("renderedRowRemoved"===t||"rowRemoved"===t)&&(t=$.EVENT_VIRTUAL_ROW_REMOVED,console.warn("AG Grid: Since version 11, event renderedRowRemoved and rowRemoved is now called "+$.EVENT_VIRTUAL_ROW_REMOVED)),d.prototype.removeEventListener.call(this,t,s)},i.prototype.destroyFirstPass=function(){this.active=!1,this.setupRemoveAnimation();var t=this.createRowEvent($.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(t),this.beans.eventService.dispatchEvent(t),d.prototype.destroy.call(this)},i.prototype.setupRemoveAnimation=function(){if(null!=this.rowNode.rowTop){var s=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)})},i.prototype.destroySecondPass=function(){this.allRowGuis.length=0;var t=function(l){return l.list.forEach(function(c){return c.destroy()}),{list:[],map:{}}};this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)},i.prototype.setFocusedClasses=function(){var t=this;this.allRowGuis.forEach(function(s){s.rowComp.addOrRemoveCssClass("ag-row-focus",t.rowFocused),s.rowComp.addOrRemoveCssClass("ag-row-no-focus",!t.rowFocused)})},i.prototype.onCellFocusChanged=function(){var t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)},i.prototype.onPaginationChanged=function(){var t=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged())},i.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},i.prototype.onPaginationPixelOffsetChanged=function(){this.onTopChanged()},i.prototype.applyPaginationOffset=function(t,s){return void 0===s&&(s=!1),this.rowNode.isRowPinned()?t:t+this.beans.paginationProxy.getPixelOffset()*(s?1:-1)},i.prototype.setRowTop=function(t){if(!this.printLayout&&Fe(t)){var s=this.applyPaginationOffset(t),l=this.rowNode.isRowPinned()?s:this.beans.rowContainerHeightService.getRealPixelPosition(s);this.setRowTopStyle(l+"px")}},i.prototype.getInitialRowTop=function(){return this.initialTop},i.prototype.getInitialTransform=function(){return this.initialTransform},i.prototype.setInitialRowTop=function(){if(this.printLayout)return"";var t=this.slideRowIn?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,s=this.applyPaginationOffset(t),c=(this.rowNode.isRowPinned()?s:this.beans.rowContainerHeightService.getRealPixelPosition(s))+"px";this.beans.gridOptionsWrapper.isSuppressRowTransform()?this.initialTop=c:this.initialTransform="translateY("+c+")"},i.prototype.setRowTopStyle=function(t){var s=this.beans.gridOptionsWrapper.isSuppressRowTransform();this.allRowGuis.forEach(function(l){return s?l.rowComp.setTop(t):l.rowComp.setTransform("translateY("+t+")")})},i.prototype.getRowNode=function(){return this.rowNode},i.prototype.getCellCtrl=function(t){var s=null;return this.getAllCellCtrls().forEach(function(l){l.getColumn()==t&&(s=l)}),null!=s||this.getAllCellCtrls().forEach(function(l){l.getColSpanningList().indexOf(t)>=0&&(s=l)}),s},i.prototype.onRowIndexChanged=function(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes())},i.prototype.updateRowIndexes=function(){var t=this,s=this.rowNode.getRowIndexString(),l=this.beans.headerNavigationService.getHeaderRowCount(),c=this.rowNode.rowIndex%2==0;this.allRowGuis.forEach(function(h){h.rowComp.setRowIndex(s),h.rowComp.setAriaRowIndex(l+t.rowNode.rowIndex+1),h.rowComp.addOrRemoveCssClass("ag-row-even",c),h.rowComp.addOrRemoveCssClass("ag-row-odd",!c)})},i.prototype.getPinnedLeftRowElement=function(){return this.leftGui?this.leftGui.element:void 0},i.prototype.getPinnedRightRowElement=function(){return this.rightGui?this.rightGui.element:void 0},i.prototype.getBodyRowElement=function(){return this.centerGui?this.centerGui.element:void 0},i.prototype.getFullWidthRowElement=function(){return this.fullWidthGui?this.fullWidthGui.element:void 0},i.DOM_DATA_KEY_ROW_CTRL="renderedRow",i}(Ye),lx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ao=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},DC=function(){for(var d=0,i=0,t=arguments.length;i<t;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<t;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s},cx=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.destroyFuncsForColumnListeners=[],t.rowCtrlsByRowIndex={},t.zombieRowCtrls={},t.allRowCtrls=[],t.topRowCtrls=[],t.bottomRowCtrls=[],t.refreshInProgress=!1,t}return lx(i,d),i.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(){t.gridBodyCtrl=t.ctrlsService.getGridBodyCtrl(),t.initialise()})},i.prototype.initialise=function(){this.addManagedListener(this.eventService,$.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,$.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_BODY_SCROLL,this.redrawAfterScroll.bind(this)),this.addManagedListener(this.eventService,$.EVENT_BODY_HEIGHT_CHANGED,this.redrawAfterScroll.bind(this)),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,this.onDomLayoutChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_PRINT,this.embedFullWidthRows=this.printLayout||this.gridOptionsWrapper.isEmbedFullWidthRows(),this.redrawAfterModelUpdate()},i.prototype.initialiseCache=function(){if(this.gridOptionsWrapper.isKeepDetailRows()){var t=this.gridOptionsWrapper.getKeepDetailRowsCount();this.cachedRowCtrls=new dx(null!=t?t:3)}},i.prototype.getRowCtrls=function(){return this.allRowCtrls},i.prototype.updateAllRowCtrls=function(){var t=Ma(this.rowCtrlsByRowIndex);this.beans.gridOptionsWrapper.isEnsureDomOrder()&&t.sort(function(c,h){return c.getRowNode().rowIndex-h.getRowNode.rowIndex});var s=Ma(this.zombieRowCtrls),l=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];this.allRowCtrls=DC(t,s,l)},i.prototype.registerCellEventListeners=function(){var t=this;this.addManagedListener(this.eventService,$.EVENT_CELL_FOCUSED,function(l){t.getAllCellCtrls().forEach(function(c){return c.onCellFocused(l)}),t.getAllRowCtrls().forEach(function(c){c.isFullWidth()&&c.onFullWidthRowFocused(l)})}),this.addManagedListener(this.eventService,$.EVENT_FLASH_CELLS,function(l){t.getAllCellCtrls().forEach(function(c){return c.onFlashCells(l)})}),this.addManagedListener(this.eventService,$.EVENT_COLUMN_HOVER_CHANGED,function(){t.getAllCellCtrls().forEach(function(l){return l.onColumnHover()})}),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){t.printLayout&&t.getAllCellCtrls().forEach(function(l){return l.onLeftChanged()})}),this.gridOptionsWrapper.isEnableRangeSelection()&&(this.addManagedListener(this.eventService,$.EVENT_RANGE_SELECTION_CHANGED,function(){t.getAllCellCtrls().forEach(function(l){return l.onRangeSelectionChanged()})}),this.addManagedListener(this.eventService,$.EVENT_COLUMN_MOVED,function(){t.getAllCellCtrls().forEach(function(l){return l.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PINNED,function(){t.getAllCellCtrls().forEach(function(l){return l.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VISIBLE,function(){t.getAllCellCtrls().forEach(function(l){return l.updateRangeBordersIfRangeCount()})})),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,$.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))},i.prototype.removeGridColumnListeners=function(){this.destroyFuncsForColumnListeners.forEach(function(t){return t()}),this.destroyFuncsForColumnListeners.length=0},i.prototype.refreshListenersToColumnsForCellComps=function(){var t=this;this.removeGridColumnListeners();var s=this.columnModel.getAllGridColumns();!s||s.forEach(function(l){var c=function(L){t.getAllCellCtrls().forEach(function(U){U.getColumn()===l&&L(U)})},h=function(){c(function(L){return L.onLeftChanged()})},m=function(){c(function(L){return L.onWidthChanged()})},S=function(){c(function(L){return L.onFirstRightPinnedChanged()})},R=function(){c(function(L){return L.onLastLeftPinnedChanged()})};l.addEventListener(Pn.EVENT_LEFT_CHANGED,h),l.addEventListener(Pn.EVENT_WIDTH_CHANGED,m),l.addEventListener(Pn.EVENT_FIRST_RIGHT_PINNED_CHANGED,S),l.addEventListener(Pn.EVENT_LAST_LEFT_PINNED_CHANGED,R),t.destroyFuncsForColumnListeners.push(function(){l.removeEventListener(Pn.EVENT_LEFT_CHANGED,h),l.removeEventListener(Pn.EVENT_WIDTH_CHANGED,m),l.removeEventListener(Pn.EVENT_FIRST_RIGHT_PINNED_CHANGED,S),l.removeEventListener(Pn.EVENT_LAST_LEFT_PINNED_CHANGED,R)})})},i.prototype.onDomLayoutChanged=function(){var t=this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_PRINT,s=t||this.gridOptionsWrapper.isEmbedFullWidthRows(),l=s!==this.embedFullWidthRows||this.printLayout!==t;this.printLayout=t,this.embedFullWidthRows=s,l&&this.redrawAfterModelUpdate()},i.prototype.datasourceChanged=function(){this.firstRenderedRow=0,this.lastRenderedRow=-1;var t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t)},i.prototype.onPageLoaded=function(t){this.redrawAfterModelUpdate({recycleRows:t.keepRenderedRows,animate:t.animate,newData:t.newData,newPage:t.newPage,onlyBody:!0})},i.prototype.getAllCellsForColumn=function(t){var s=[];return this.getAllRowCtrls().forEach(function(l){var c=l.getCellElement(t);c&&s.push(c)}),s},i.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())},i.prototype.getTopRowCtrls=function(){return this.topRowCtrls},i.prototype.getBottomRowCtrls=function(){return this.bottomRowCtrls},i.prototype.refreshFloatingRows=function(t,s){var l=this;t.forEach(function(c){c.destroyFirstPass(),c.destroySecondPass()}),t.length=0,s&&s.forEach(function(c){var h=new lu(l.$scope,c,l.beans,!1,!1,l.printLayout);t.push(h)})},i.prototype.onPinnedRowDataChanged=function(){this.redrawAfterModelUpdate({recycleRows:!0})},i.prototype.getRenderedIndexesForRowNodes=function(t){var s=[];return we(t)||Nn(this.rowCtrlsByRowIndex,function(l,c){var h=c.getRowNode();t.indexOf(h)>=0&&s.push(l)}),s},i.prototype.redrawRows=function(t){var s=null!=t&&t.length>0;if(s){var l=this.getRenderedIndexesForRowNodes(t);this.removeRowCtrls(l)}this.redrawAfterModelUpdate({recycleRows:s})},i.prototype.getCellToRestoreFocusToAfterRefresh=function(t){var s=t.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==s)return null;var l=document.activeElement,c=this.gridOptionsWrapper.getDomData(l,Qi.DOM_DATA_KEY_CELL_CTRL),h=this.gridOptionsWrapper.getDomData(l,lu.DOM_DATA_KEY_ROW_CTRL);return c||h?s:null},i.prototype.redrawAfterModelUpdate=function(t){void 0===t&&(t={}),this.getLockOnRefresh();var s=this.getCellToRestoreFocusToAfterRefresh(t);this.updateContainerHeights(),this.scrollToTopIfNewData(t);var l=!this.printLayout&&!!t.recycleRows,c=t.animate&&this.gridOptionsWrapper.isAnimateRows(),h=l?this.recycleRows():null;l||this.removeAllRowComps();var S=function(){if(null==s||null==h)return!1;var D=!1;return Nn(h,function(L,U){var K=U.getRowNode();K.rowIndex==s.rowIndex&&K.rowPinned==s.rowPinned&&(D=!0)}),D}();this.redraw(h,c),t.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),S||this.restoreFocusedCell(s),this.releaseLockOnRefresh()},i.prototype.scrollToTopIfNewData=function(t){var s=t.newData||t.newPage,l=this.gridOptionsWrapper.isSuppressScrollOnNewData();s&&!l&&this.gridBodyCtrl.getScrollFeature().scrollToTop()},i.prototype.updateContainerHeights=function(){if(this.printLayout)this.rowContainerHeightService.setModelHeight(null);else{var t=this.paginationProxy.getCurrentPageHeight();0===t&&(t=1),this.rowContainerHeightService.setModelHeight(t)}},i.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.refreshView(), call setTimeout(function() { api.refreshView(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},i.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},i.prototype.restoreFocusedCell=function(t){t&&this.focusService.setFocusedCell(t.rowIndex,t.column,t.rowPinned,!0)},i.prototype.stopEditing=function(t){void 0===t&&(t=!1),this.getAllRowCtrls().forEach(function(s){s.stopEditing(t)})},i.prototype.onNewColumnsLoaded=function(){this.getAllCellCtrls().forEach(function(t){return t.onNewColumnsLoaded()})},i.prototype.getAllCellCtrls=function(){var t=[];return this.getAllRowCtrls().forEach(function(s){return t=t.concat(s.getAllCellCtrls())}),t},i.prototype.getAllRowCtrls=function(){var t=this,s=DC(this.topRowCtrls,this.bottomRowCtrls);return Object.keys(this.rowCtrlsByRowIndex).forEach(function(l){return s.push(t.rowCtrlsByRowIndex[l])}),s},i.prototype.addRenderedRowListener=function(t,s,l){var c=this.rowCtrlsByRowIndex[s];c&&c.addEventListener(t,l)},i.prototype.flashCells=function(t){void 0===t&&(t={});var s=t.flashDelay,l=t.fadeDelay;this.getCellCtrls(t.rowNodes,t.columns).forEach(function(c){return c.flashCell({flashDelay:s,fadeDelay:l})})},i.prototype.refreshCells=function(t){void 0===t&&(t={});var s={forceRefresh:t.force,newData:!1,suppressFlash:t.suppressFlash};this.getCellCtrls(t.rowNodes,t.columns).forEach(function(l){if(l.refreshShouldDestroy()){var c=l.getRowCtrl();c&&c.refreshCell(l)}else l.refreshCell(s)})},i.prototype.getCellRendererInstances=function(t){return this.getCellCtrls(t.rowNodes,t.columns).map(function(l){return l.getCellRenderer()}).filter(function(l){return null!=l})},i.prototype.getCellEditorInstances=function(t){var s=[];return this.getCellCtrls(t.rowNodes,t.columns).forEach(function(l){var c=l.getCellEditor();c&&s.push(c)}),s},i.prototype.getEditingCells=function(){var t=[];return this.getAllCellCtrls().forEach(function(s){if(s.isEditing()){var l=s.getCellPosition();t.push(l)}}),t},i.prototype.getCellCtrls=function(t,s){var c,m,l=this,h=[];Fe(t)&&(c={top:{},bottom:{},normal:{}},t.forEach(function(R){var D=R.id;R.rowPinned===fe.PINNED_TOP?c.top[D]=!0:R.rowPinned===fe.PINNED_BOTTOM?c.bottom[D]=!0:c.normal[D]=!0})),Fe(s)&&(m={},s.forEach(function(R){var D=l.columnModel.getGridColumn(R);Fe(D)&&(m[D.getId()]=!0)}));var S=function(D){var L=D.getRowNode(),U=L.id,K=L.rowPinned;if(Fe(c))if(K===fe.PINNED_BOTTOM){if(!c.bottom[U])return}else if(K===fe.PINNED_TOP){if(!c.top[U])return}else if(!c.normal[U])return;D.getAllCellCtrls().forEach(function(ee){var ae=ee.getColumn().getId();m&&!m[ae]||h.push(ee)})};return Nn(this.rowCtrlsByRowIndex,function(R,D){S(D)}),this.topRowCtrls&&this.topRowCtrls.forEach(S),this.bottomRowCtrls&&this.bottomRowCtrls.forEach(S),h},i.prototype.destroy=function(){this.removeAllRowComps(),d.prototype.destroy.call(this)},i.prototype.removeAllRowComps=function(){var t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t)},i.prototype.recycleRows=function(){var t=[];Nn(this.rowCtrlsByRowIndex,function(l,c){null==c.getRowNode().id&&t.push(l)}),this.removeRowCtrls(t);var s={};return Nn(this.rowCtrlsByRowIndex,function(l,c){var h=c.getRowNode();s[h.id]=c}),this.rowCtrlsByRowIndex={},s},i.prototype.removeRowCtrls=function(t){var s=this;t.forEach(function(l){var c=s.rowCtrlsByRowIndex[l];c&&(c.destroyFirstPass(),c.destroySecondPass()),delete s.rowCtrlsByRowIndex[l]})},i.prototype.redrawAfterScroll=function(){this.getLockOnRefresh(),this.redraw(null,!1,!0),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged()},i.prototype.removeRowCompsNotToDraw=function(t){var s={};t.forEach(function(h){return s[h]=!0});var c=Object.keys(this.rowCtrlsByRowIndex).filter(function(h){return!s[h]});this.removeRowCtrls(c)},i.prototype.calculateIndexesToDraw=function(t){var s=this,l=qb(this.firstRenderedRow,this.lastRenderedRow),c=function(m,S){var R=S.getRowNode().rowIndex;null!=R&&(R<s.firstRenderedRow||R>s.lastRenderedRow)&&s.doNotUnVirtualiseRow(S)&&l.push(R)};return Nn(this.rowCtrlsByRowIndex,c),Nn(t,c),l.sort(function(h,m){return h-m}),l},i.prototype.redraw=function(t,s,l){var c=this;void 0===s&&(s=!1),void 0===l&&(l=!1),this.rowContainerHeightService.updateOffset(),this.workOutFirstAndLastRowsToRender();var h=this.calculateIndexesToDraw(t);this.removeRowCompsNotToDraw(h),this.printLayout&&(s=!1),h.forEach(function(S){Fe(c.createOrUpdateRowCtrl(S,t,s,l))}),t&&(!l||this.gridOptionsWrapper.isSuppressAnimationFrame()||this.printLayout?this.destroyRowCtrls(t,s):this.beans.animationFrameService.addDestroyTask(function(){c.destroyRowCtrls(t,s),c.updateAllRowCtrls(),c.dispatchDisplayedRowsChanged()})),this.updateAllRowCtrls(),this.checkAngularCompile(),this.gridBodyCtrl.updateRowCount()},i.prototype.dispatchDisplayedRowsChanged=function(){this.eventService.dispatchEvent({type:$.EVENT_DISPLAYED_ROWS_CHANGED})},i.prototype.onDisplayedColumnsChanged=function(){var t=this.columnModel.isPinningLeft(),s=this.columnModel.isPinningRight();(this.pinningLeft!==t||s!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=s,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())},i.prototype.redrawFullWidthEmbeddedRows=function(){var t=[];Nn(this.rowCtrlsByRowIndex,function(s,l){if(l.isFullWidth()){var c=l.getRowNode().rowIndex;t.push(c.toString())}}),this.refreshFloatingRowComps(),this.removeRowCtrls(t),this.redrawAfterScroll()},i.prototype.refreshFullWidthRows=function(t){var s=[],l=!!t,c=l?{}:void 0;l&&c&&t.forEach(function(h){return c[h.id]=!0}),Nn(this.rowCtrlsByRowIndex,function(h,m){if(m.isFullWidth()){var S=m.getRowNode();if(l&&c&&!c[S.id]&&!c[S.level>0&&S.parent?S.parent.id:void 0])return;if(!m.refreshFullWidth()){var U=m.getRowNode().rowIndex;s.push(U.toString())}}}),this.removeRowCtrls(s),this.redrawAfterScroll()},i.prototype.createOrUpdateRowCtrl=function(t,s,l,c){var h,m=this.rowCtrlsByRowIndex[t];if(m||Fe(h=this.paginationProxy.getRow(t))&&Fe(s)&&s[h.id]&&h.alreadyRendered&&(m=s[h.id],s[h.id]=null),!m){if(h||(h=this.paginationProxy.getRow(t)),!Fe(h))return;m=this.createRowCon(h,l,c)}return h&&(h.alreadyRendered=!0),this.rowCtrlsByRowIndex[t]=m,m},i.prototype.destroyRowCtrls=function(t,s){var l=this,c=[];Nn(t,function(h,m){if(m){if(l.cachedRowCtrls&&m.isCacheable())return void l.cachedRowCtrls.addRow(m);m.destroyFirstPass(),s?(l.zombieRowCtrls[m.getInstanceId()]=m,c.push(function(){m.destroySecondPass(),delete l.zombieRowCtrls[m.getInstanceId()]})):m.destroySecondPass()}}),s&&(c.push(function(){l.updateAllRowCtrls(),l.dispatchDisplayedRowsChanged()}),Gf(c))},i.prototype.checkAngularCompile=function(){var t=this;this.gridOptionsWrapper.isAngularCompileRows()&&window.setTimeout(function(){t.$scope.$apply()},0)},i.prototype.workOutFirstAndLastRowsToRender=function(){var s,l,t=this;if(this.paginationProxy.isRowsToRender())if(this.printLayout)s=this.paginationProxy.getPageFirstRow(),l=this.paginationProxy.getPageLastRow();else{var c=this.gridOptionsWrapper.getRowBufferInPixels(),h=this.ctrlsService.getGridBodyCtrl(),m=!1,S=void 0,R=void 0;do{var D=this.paginationProxy.getPixelOffset(),L=this.paginationProxy.getCurrentPagePixelRange(),U=L.pageFirstPixel,K=L.pageLastPixel,ee=this.rowContainerHeightService.getDivStretchOffset(),ae=h.getScrollFeature().getVScrollPosition(),Ve=ae.bottom;S=Math.max(ae.top+D-c,U)+ee,R=Math.min(Ve+D+c,K)+ee,m=this.ensureAllRowsInRangeHaveHeightsCalculated(S,R)}while(m);var We=this.paginationProxy.getRowIndexAtPixel(S),Pe=this.paginationProxy.getRowIndexAtPixel(R),Qe=this.paginationProxy.getPageFirstRow(),ye=this.paginationProxy.getPageLastRow();We<Qe&&(We=Qe),Pe>ye&&(Pe=ye),s=We,l=Pe}else s=0,l=-1;var an=this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_NORMAL,Gt=this.gridOptionsWrapper.isSuppressMaxRenderedRowRestriction(),_n=Math.max(this.gridOptionsWrapper.getRowBuffer(),500);if(an&&!Gt&&l-s>_n&&(l=s+_n),(s!==this.firstRenderedRow||l!==this.lastRenderedRow)&&(this.firstRenderedRow=s,this.lastRenderedRow=l,this.eventService.dispatchEvent({type:$.EVENT_VIEWPORT_CHANGED,firstRow:s,lastRow:l,api:this.gridApi,columnApi:this.columnApi})),this.paginationProxy.isRowsToRender()){var cr={type:$.EVENT_FIRST_DATA_RENDERED,firstRow:s,lastRow:l,api:this.gridApi,columnApi:this.columnApi};window.setTimeout(function(){return t.eventService.dispatchEventOnce(cr)},50)}},i.prototype.ensureAllRowsInRangeHaveHeightsCalculated=function(t,s){var l=this.paginationProxy.ensureRowHeightsValid(t,s,-1,-1);return l&&this.updateContainerHeights(),l},i.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},i.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},i.prototype.doNotUnVirtualiseRow=function(t){var c=t.getRowNode(),h=this.focusService.isRowNodeFocused(c),m=t.isEditing();return!!(h||m||c.detail)&&!!this.paginationProxy.isRowPresent(c)},i.prototype.createRowCon=function(t,s,l){var c=this.cachedRowCtrls?this.cachedRowCtrls.getRow(t):null;if(c)return c;var h=this.gridOptionsWrapper.isSuppressAnimationFrame();return new lu(this.$scope,t,this.beans,s,l&&!h&&!this.printLayout,this.printLayout)},i.prototype.getRenderedNodes=function(){var t=this.rowCtrlsByRowIndex;return Object.keys(t).map(function(s){return t[s].getRowNode()})},i.prototype.getRowByPosition=function(t){var s;switch(t.rowPinned){case fe.PINNED_TOP:s=this.topRowCtrls[t.rowIndex];break;case fe.PINNED_BOTTOM:s=this.bottomRowCtrls[t.rowIndex];break;default:s=this.rowCtrlsByRowIndex[t.rowIndex]}return s},i.prototype.getRowNode=function(t){switch(t.rowPinned){case fe.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[t.rowIndex];case fe.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[t.rowIndex];default:return this.rowModel.getRow(t.rowIndex)}},i.prototype.isRangeInRenderedViewport=function(t,s){return!(null==t||null==s||s<this.firstRenderedRow||t>this.lastRenderedRow)},Ao([H("paginationProxy")],i.prototype,"paginationProxy",void 0),Ao([H("columnModel")],i.prototype,"columnModel",void 0),Ao([H("$scope")],i.prototype,"$scope",void 0),Ao([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Ao([H("rowModel")],i.prototype,"rowModel",void 0),Ao([H("focusService")],i.prototype,"focusService",void 0),Ao([H("columnApi")],i.prototype,"columnApi",void 0),Ao([H("gridApi")],i.prototype,"gridApi",void 0),Ao([H("beans")],i.prototype,"beans",void 0),Ao([H("rowContainerHeightService")],i.prototype,"rowContainerHeightService",void 0),Ao([Gn("ctrlsService")],i.prototype,"ctrlsService",void 0),Ao([et],i.prototype,"postConstruct",null),Ao([vt("rowRenderer")],i)}(Ye),dx=function(){function d(i){this.entriesMap={},this.entriesList=[],this.maxCount=i}return d.prototype.toString=function(){return this.entriesList.map(function(i){return i.getRowNode().data.name}).join(", ")},d.prototype.addRow=function(i){if(this.entriesMap[i.getRowNode().id]=i,this.entriesList.push(i),i.setCached(!0),this.entriesList.length>this.maxCount){var t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}},d.prototype.getRow=function(i){if(null==i||null==i.id)return null;var t=this.entriesMap[i.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=i?null:t):null},d.prototype.removeFromCache=function(i){var t=i.getRowNode().id;delete this.entriesMap[t],ri(this.entriesList,i)},d.prototype.getEntries=function(){return this.entriesList},d}(),Ep=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),xp=function(d){function i(t,s){var l=d.call(this,t)||this;return l.ctrl=s,l}return Ep(i,d),i.prototype.getCtrl=function(){return this.ctrl},i}(hn),Ka=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),$u=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},AC=function(d){function i(t){var s=d.call(this,i.TEMPLATE,t)||this;return s.headerCompVersion=0,s.column=t.getColumnGroupChild(),s.pinned=t.getPinned(),s}return Ka(i,d),i.prototype.postConstruct=function(){var t=this,s=this.getGui(),l=function(S,R,D){var L=D||s;null!=R&&""!=R?L.setAttribute(S,R):L.removeAttribute(S)};this.ctrl.setComp({setWidth:function(S){return s.style.width=S},addOrRemoveCssClass:function(S,R){return t.addOrRemoveCssClass(S,R)},setAriaSort:function(S){return S?fE(s,S):pE(s)},setColId:function(S){return l("col-id",S)},setTitle:function(S){return l("title",S)},setAriaDescribedBy:function(S){return go(s,S)},setUserCompDetails:function(S){return t.setUserCompDetails(S)},getUserCompInstance:function(){return t.headerComp}},this.getGui(),this.eResize);var h=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",h)},i.prototype.destroyHeaderComp=function(){this.headerComp&&(this.getGui().removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)},i.prototype.setUserCompDetails=function(t){var s=this;this.headerCompVersion++;var l=this.headerCompVersion;t.newAgStackInstance().then(function(c){return s.afterCompCreated(l,c)})},i.prototype.afterCompCreated=function(t,s){t==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=s,this.headerCompGui=s.getGui(),this.getGui().appendChild(this.headerCompGui),this.ctrl.setDragSource(this.headerCompGui)):this.destroyBean(s)},i.TEMPLATE='<div class="ag-header-cell" role="columnheader" unselectable="on" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',$u([He("eResize")],i.prototype,"eResize",void 0),$u([et],i.prototype,"postConstruct",null),$u([Fi],i.prototype,"destroyHeaderComp",null),i}(xp),MC=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Rp=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},fx=function(d){function i(t){return d.call(this,i.TEMPLATE,t)||this}return MC(i,d),i.prototype.postConstruct=function(){var t=this,s=this.getGui(),l=function(m,S){return null!=S?s.setAttribute(m,S):s.removeAttribute(m)};this.ctrl.setComp({addOrRemoveCssClass:function(m,S){return t.addOrRemoveCssClass(m,S)},addOrRemoveResizableCssClass:function(m,S){return kt(t.eResize,m,S)},setWidth:function(m){return s.style.width=m},setColId:function(m){return s.setAttribute("col-id",m)},setAriaExpanded:function(m){return l("aria-expanded",m)},setTitle:function(m){return l("title",m)},setUserCompDetails:function(m){return t.setUserCompDetails(m)}},s,this.eResize)},i.prototype.setUserCompDetails=function(t){var s=this;t.newAgStackInstance().then(function(l){return s.afterHeaderCompCreated(l)})},i.prototype.afterHeaderCompCreated=function(t){var s=this,l=function(){return s.destroyBean(t)};this.isAlive()?(this.getGui().appendChild(t.getGui()),this.addDestroyFunc(l),this.ctrl.setDragSource(t.getGui())):l()},i.TEMPLATE='<div class="ag-header-group-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',Rp([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Rp([He("eResize")],i.prototype,"eResize",void 0),Rp([et],i.prototype,"postConstruct",null),i}(xp),px=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Tp=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Dp=function(d){function i(t){return d.call(this,i.TEMPLATE,t)||this}return px(i,d),i.prototype.postConstruct=function(){var t=this,s=this.getGui();this.ctrl.setComp({addOrRemoveCssClass:function(h,m){return t.addOrRemoveCssClass(h,m)},addOrRemoveBodyCssClass:function(h,m){return kt(t.eFloatingFilterBody,h,m)},addOrRemoveButtonWrapperCssClass:function(h,m){return kt(t.eButtonWrapper,h,m)},setCompDetails:function(h){return t.setCompDetails(h)},getFloatingFilterComp:function(){return t.compPromise},setWidth:function(h){return s.style.width=h},setMenuIcon:function(h){return t.eButtonShowMainFilter.appendChild(h)}},s,this.eButtonShowMainFilter,this.eFloatingFilterBody)},i.prototype.setCompDetails=function(t){var s=this;this.compPromise=t.newAgStackInstance(),this.compPromise.then(function(l){return s.afterCompCreated(l)})},i.prototype.afterCompCreated=function(t){var s=this;!t||(this.addDestroyFunc(function(){return s.context.destroyBean(t)}),this.isAlive()&&(this.eFloatingFilterBody.appendChild(t.getGui()),t.afterGuiAttached&&t.afterGuiAttached()))},i.TEMPLATE='<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">\n            <div ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">\n                <button type="button" aria-label="Open Filter Menu" class="ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',Tp([He("eFloatingFilterBody")],i.prototype,"eFloatingFilterBody",void 0),Tp([He("eButtonWrapper")],i.prototype,"eButtonWrapper",void 0),Tp([He("eButtonShowMainFilter")],i.prototype,"eButtonShowMainFilter",void 0),Tp([et],i.prototype,"postConstruct",null),i}(xp),Og=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ap=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c};!function(d){d.COLUMN_GROUP="group",d.COLUMN="column",d.FLOATING_FILTER="filter"}(Y.A6C||(Y.A6C={}));var OC=function(d){function i(t){var s=d.call(this)||this;s.headerComps={};var l=t.getType()==Y.A6C.COLUMN_GROUP?"ag-header-row-column-group":t.getType()==Y.A6C.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";return s.setTemplate('<div class="ag-header-row '+l+'" role="row"></div>'),s.ctrl=t,s}return Og(i,d),i.prototype.init=function(){var t=this;this.ctrl.setComp({setTransform:function(c){return t.getGui().style.transform=c},setHeight:function(c){return t.getGui().style.height=c},setTop:function(c){return t.getGui().style.top=c},setHeaderCtrls:function(c){return t.setHeaderCtrls(c)},setWidth:function(c){return t.getGui().style.width=c},setAriaRowIndex:function(c){return k_(t.getGui(),c)}})},i.prototype.destroyHeaderCtrls=function(){this.setHeaderCtrls([])},i.prototype.setHeaderCtrls=function(t){var s=this;if(this.isAlive()){var l=this.headerComps;if(this.headerComps={},t.forEach(function(S){var R=S.getInstanceId(),D=l[R];delete l[R],null==D&&(D=s.createHeaderComp(S),s.getGui().appendChild(D.getGui())),s.headerComps[R]=D}),Nn(l,function(S,R){s.getGui().removeChild(R.getGui()),s.destroyBean(R)}),this.gridOptionsWrapper.isEnsureDomOrder()){var h=Ma(this.headerComps);h.sort(function(S,R){return S.getCtrl().getColumnGroupChild().getLeft()-R.getCtrl().getColumnGroupChild().getLeft()});var m=h.map(function(S){return S.getGui()});po(this.getGui(),m)}}},i.prototype.createHeaderComp=function(t){var s;switch(this.ctrl.getType()){case Y.A6C.COLUMN_GROUP:s=new fx(t);break;case Y.A6C.FLOATING_FILTER:s=new Dp(t);break;default:s=new AC(t)}return this.createBean(s),s.setParentComponent(this),s},Ap([et],i.prototype,"init",null),Ap([Fi],i.prototype,"destroyHeaderCtrls",null),i}(hn),hx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Xu=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c};!function(d){d[d.UP=0]="UP",d[d.DOWN=1]="DOWN",d[d.LEFT=2]="LEFT",d[d.RIGHT=3]="RIGHT"}(Y.Y8R||(Y.Y8R={}));var PC=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return hx(i,d),i.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(s){t.gridBodyCon=s.gridBodyCtrl})},i.prototype.getHeaderRowCount=function(){var t=this.ctrlsService.getHeaderRowContainerCtrl();return t?t.getRowCount():0},i.prototype.getHeaderRowType=function(t){var s=this.ctrlsService.getHeaderRowContainerCtrl();if(s)return s.getRowType(t)},i.prototype.navigateVertically=function(t,s,l){if(s||(s=this.focusService.getFocusedHeader()),!s)return!1;var c=s.headerRowIndex,h=s.column,m=this.getHeaderRowCount(),S=t===Y.Y8R.UP,R=S?c-1:c+1,D=null,L=!1;R<0&&(R=0,D=h,L=!0),R>=m&&(R=-1);var U=this.getHeaderRowType(c);if(!L){if(U===Y.A6C.COLUMN_GROUP){var K=h;D=S?h.getParent():K.getDisplayedChildren()[0]}else U===Y.A6C.FLOATING_FILTER?D=h:(K=h,D=S?K.getParent():K);if(!D)return!1}return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:R,column:D},allowUserOverride:!0,event:l})},i.prototype.navigateHorizontally=function(t,s,l){void 0===s&&(s=!1);var S,R,c=this.focusService.getFocusedHeader();return(S=t===Y.Y8R.LEFT!==this.gridOptionsWrapper.isEnableRtl()?this.headerPositionUtils.findHeader(c,R="Before"):this.headerPositionUtils.findHeader(c,R="After"))?this.focusService.focusHeaderPosition({headerPosition:S,direction:R,fromTab:s,allowUserOverride:!0,event:l}):!s||this.focusNextHeaderRow(c,R,l)},i.prototype.focusNextHeaderRow=function(t,s,l){var c=t.headerRowIndex,h=null;return"Before"===s?c>0&&(h=this.headerPositionUtils.findColAtEdgeForHeaderRow(c-1,"end")):h=this.headerPositionUtils.findColAtEdgeForHeaderRow(c+1,"start"),this.focusService.focusHeaderPosition({headerPosition:h,direction:s,fromTab:!0,allowUserOverride:!0,event:l})},i.prototype.scrollToColumn=function(t,s){if(void 0===s&&(s="After"),!t.getPinned()){var l;if(t instanceof ai){var c=t.getDisplayedLeafColumns();l="Before"===s?jn(c):c[0]}else l=t;this.gridBodyCon.getScrollFeature().ensureColumnVisible(l),this.gridBodyCon.getScrollFeature().horizontallyScrollHeaderCenterAndFloatingCenter(),this.animationFrameService.flushAllFrames()}},Xu([H("focusService")],i.prototype,"focusService",void 0),Xu([H("headerPositionUtils")],i.prototype,"headerPositionUtils",void 0),Xu([H("animationFrameService")],i.prototype,"animationFrameService",void 0),Xu([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Xu([et],i.prototype,"postConstruct",null),Xu([vt("headerNavigationService")],i)}(Ye),vx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Mp=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},IC=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return vx(i,d),i.prototype.setComp=function(t,s,l){this.comp=t,this.eGui=s,this.createManagedBean(new Yo(l,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)},i.prototype.setupHeaderHeight=function(){var t=this.setHeaderHeight.bind(this);t(),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_HEADER_HEIGHT,t),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_PIVOT_HEADER_HEIGHT,t),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_GROUP_HEADER_HEIGHT,t),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_PIVOT_GROUP_HEADER_HEIGHT,t),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_FLOATING_FILTERS_HEIGHT,t),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,t)},i.prototype.setHeaderHeight=function(){var m,S,R,s=this.columnModel,l=this.gridOptionsWrapper,c=0,h=s.getHeaderRowCount();s.isPivotMode()?(S=l.getPivotGroupHeaderHeight(),R=l.getPivotHeaderHeight()):(s.hasFloatingFilters()&&(h++,c=1),S=l.getGroupHeaderHeight(),R=l.getHeaderHeight());var U=h-(1+c);m=c*l.getFloatingFiltersHeight(),m+=U*S,this.comp.setHeightAndMinHeight((m+=R)+1+"px")},i.prototype.onPivotModeChanged=function(){var t=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",t),this.comp.addOrRemoveCssClass("ag-pivot-off",!t)},i.prototype.onTabKeyDown=function(t){var s=this.gridOptionsWrapper.isEnableRtl();(this.headerNavigationService.navigateHorizontally(t.shiftKey!==s?Y.Y8R.LEFT:Y.Y8R.RIGHT,!0,t)||this.focusService.focusNextGridCoreContainer(t.shiftKey))&&t.preventDefault()},i.prototype.handleKeyDown=function(t){var s=null;switch(t.keyCode){case Xe.LEFT:s=Y.Y8R.LEFT;case Xe.RIGHT:Fe(s)||(s=Y.Y8R.RIGHT),this.headerNavigationService.navigateHorizontally(s,!1,t);break;case Xe.UP:s=Y.Y8R.UP;case Xe.DOWN:Fe(s)||(s=Y.Y8R.DOWN),this.headerNavigationService.navigateVertically(s,null,t)&&t.preventDefault();break;default:return}},i.prototype.onFocusOut=function(t){var s=t.relatedTarget;!s&&this.eGui.contains(document.activeElement)||this.eGui.contains(s)||this.focusService.clearFocusedHeader()},Mp([H("headerNavigationService")],i.prototype,"headerNavigationService",void 0),Mp([H("focusService")],i.prototype,"focusService",void 0),Mp([H("columnModel")],i.prototype,"columnModel",void 0),Mp([H("ctrlsService")],i.prototype,"ctrlsService",void 0),i}(Ye),LC=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Dd=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Pg=function(d){function i(t){var s=d.call(this)||this;return s.callback=t,s}return LC(i,d),i.prototype.postConstruct=function(){var t=this.setWidth.bind(this);this.addManagedListener(this.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,t),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,t),this.setWidth()},i.prototype.setWidth=function(){var t=this.columnModel,s=this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_PRINT,l=t.getBodyContainerWidth(),c=t.getDisplayedColumnsLeftWidth(),h=t.getDisplayedColumnsRightWidth();this.callback(s?l+c+h:l)},Dd([H("columnModel")],i.prototype,"columnModel",void 0),Dd([et],i.prototype,"postConstruct",null),i}(Ye),Ju=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},FC=function(){function d(i,t){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.pinned=i,this.eContainer=t,this.centerContainer=!Fe(i)}return d.prototype.init=function(){var i=this;this.ctrlsService.whenReady(function(){i.gridBodyCon=i.ctrlsService.getGridBodyCtrl()})},d.prototype.getIconName=function(){return this.pinned?Vi.ICON_PINNED:Vi.ICON_MOVE},d.prototype.onDragEnter=function(i){var t=i.dragItem.columns;if(i.dragSource.type===Y.rvo.ToolPanel)this.setColumnsVisible(t,!0,"uiColumnDragged");else{var l=i.dragItem.visibleState,c=(t||[]).filter(function(h){return l[h.getId()]});this.setColumnsVisible(c,!0,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged"),this.onDragging(i,!0)},d.prototype.onDragLeave=function(i){if(!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()&&!i.fromNudge){var s=i.dragSource.getDragItem();this.setColumnsVisible(s.columns,!1,"uiColumnDragged")}this.ensureIntervalCleared()},d.prototype.setColumnsVisible=function(i,t,s){if(void 0===s&&(s="api"),i){var l=i.filter(function(c){return!c.getColDef().lockVisible});this.columnModel.setColumnsVisible(l,t,s)}},d.prototype.setColumnsPinned=function(i,t,s){if(void 0===s&&(s="api"),i){var l=i.filter(function(c){return!c.getColDef().lockPinned});this.columnModel.setColumnsPinned(l,t,s)}},d.prototype.onDragStop=function(){this.ensureIntervalCleared()},d.prototype.normaliseX=function(i){return this.gridOptionsWrapper.isEnableRtl()&&(i=this.eContainer.clientWidth-i),this.centerContainer&&(i+=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),i},d.prototype.checkCenterForScrolling=function(i){if(this.centerContainer){var t=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),s=t+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsWrapper.isEnableRtl()?(this.needToMoveRight=i<t+50,this.needToMoveLeft=i>s-50):(this.needToMoveLeft=i<t+50,this.needToMoveRight=i>s-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},d.prototype.onDragging=function(i,t){var s=this;if(void 0===t&&(t=!1),this.lastDraggingEvent=i,!we(i.hDirection)){var l=this.normaliseX(i.x);t||this.checkCenterForScrolling(l);var c=this.normaliseDirection(i.hDirection),h=i.dragSource.type,m=i.dragSource.getDragItem().columns;m=m.filter(function(S){return!S.getColDef().lockPinned||S.getPinned()==s.pinned}),this.attemptMoveColumns(h,m,c,l,t)}},d.prototype.normaliseDirection=function(i){if(!this.gridOptionsWrapper.isEnableRtl())return i;switch(i){case Y.poj.Left:return Y.poj.Right;case Y.poj.Right:return Y.poj.Left;default:console.error("AG Grid: Unknown direction "+i)}},d.prototype.calculateOldIndex=function(i){var t=this.columnModel.getAllGridColumns(),s=$c(i.map(function(S){return t.indexOf(S)})),l=s[0];return jn(s)-l!=s.length-1?null:l},d.prototype.attemptMoveColumns=function(i,t,s,l,c){var h=s===Y.poj.Left,m=s===Y.poj.Right,S=t.slice();this.columnModel.sortColumnsLikeGridColumns(S);var R=this.calculateValidMoves(S,m,l),D=this.calculateOldIndex(S);if(0!==R.length){var L=R[0],U=null!==D&&!c;if(i==Y.rvo.HeaderCell&&(U=null!==D),!U||!(h&&L>=D||m&&L<=D))for(var K=0;K<R.length;K++){var ee=R[K];if(this.columnModel.doesMovePassRules(S,ee))return void this.columnModel.moveColumns(S,ee,"uiColumnDragged")}}},d.prototype.calculateValidMoves=function(i,t,s){if(this.gridOptionsWrapper.isSuppressMovableColumns()||i.some(function(Gt){return Gt.getColDef().suppressMovable}))return[];var ae,c=this.columnModel.getDisplayedColumns(this.pinned),h=this.columnModel.getAllGridColumns(),m=c.filter(function(Gt){return Tn(i,Gt)}),S=c.filter(function(Gt){return!Tn(i,Gt)}),R=h.filter(function(Gt){return!Tn(i,Gt)}),D=0,L=s;if(t){var U=0;m.forEach(function(Gt){return U+=Gt.getActualWidth()}),L-=U}if(L>0){for(var K=0;K<S.length&&!((L-=S[K].getActualWidth())<0);K++)D++;t&&D++}D>0?ae=R.indexOf(S[D-1])+1:-1===(ae=R.indexOf(S[0]))&&(ae=0);var Ve=[ae],We=function(_n,Jn){return _n-Jn};if(t){for(var Pe=ae+1,Qe=h.length-1;Pe<=Qe;)Ve.push(Pe),Pe++;Ve.sort(We)}else{Qe=h.length-1;for(var ye=h[Pe=ae];Pe<=Qe&&this.isColumnHidden(c,ye);)Pe++,Ve.push(Pe),ye=h[Pe];for(Pe=ae-1;Pe>=0;)Ve.push(Pe),Pe--;Ve.sort(We).reverse()}return Ve},d.prototype.isColumnHidden=function(i,t){return i.indexOf(t)<0},d.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.setGhostIcon(this.needToMoveLeft?Vi.ICON_LEFT:Vi.ICON_RIGHT,!0))},d.prototype.ensureIntervalCleared=function(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(Vi.ICON_MOVE))},d.prototype.moveInterval=function(){var i;this.intervalCount++,(i=10+5*this.intervalCount)>100&&(i=100);var t=null,s=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=s.scrollHorizontally(-i):this.needToMoveRight&&(t=s.scrollHorizontally(i)),0!==t)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var c=this.lastDraggingEvent.dragItem.columns.filter(function(m){return!m.getColDef().lockPinned});c.length>0&&(this.dragAndDropService.setGhostIcon(Vi.ICON_PINNED),this.failedMoveAttempts>7)&&(this.setColumnsPinned(c,this.needToMoveLeft?fe.PINNED_LEFT:fe.PINNED_RIGHT,"uiColumnDragged"),this.dragAndDropService.nudge())}},Ju([H("columnModel")],d.prototype,"columnModel",void 0),Ju([H("dragAndDropService")],d.prototype,"dragAndDropService",void 0),Ju([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),Ju([H("ctrlsService")],d.prototype,"ctrlsService",void 0),Ju([et],d.prototype,"init",null),d}(),Lr=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},kC=function(){function d(i){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=i}return d.prototype.onDragEnter=function(i){var t=this;if(this.clearColumnsList(),!this.gridOptionsWrapper.isFunctionsReadOnly()){var s=i.dragItem.columns;!s||s.forEach(function(l){!l.isPrimary()||l.isAnyFunctionActive()||(l.isAllowValue()?t.columnsToAggregate.push(l):l.isAllowRowGroup()?t.columnsToGroup.push(l):l.isAllowPivot()&&t.columnsToPivot.push(l))})}},d.prototype.getIconName=function(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?Vi.ICON_PINNED:Vi.ICON_MOVE:null},d.prototype.onDragLeave=function(i){this.clearColumnsList()},d.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},d.prototype.onDragging=function(i){},d.prototype.onDragStop=function(i){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},Lr([H("columnModel")],d.prototype,"columnModel",void 0),Lr([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),d}(),gx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),li=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Ig=function(d){function i(t,s){var l=d.call(this)||this;return l.pinned=t,l.eContainer=s,l}return gx(i,d),i.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(s){switch(t.pinned){case fe.PINNED_LEFT:t.eSecondaryContainers=[[s.gridBodyCtrl.getBodyViewportElement(),s.leftRowContainerCtrl.getContainerElement()],[s.bottomLeftRowContainerCtrl.getContainerElement()],[s.topLeftRowContainerCtrl.getContainerElement()]];break;case fe.PINNED_RIGHT:t.eSecondaryContainers=[[s.gridBodyCtrl.getBodyViewportElement(),s.rightRowContainerCtrl.getContainerElement()],[s.bottomRightRowContainerCtrl.getContainerElement()],[s.topRightRowContainerCtrl.getContainerElement()]];break;default:t.eSecondaryContainers=[[s.gridBodyCtrl.getBodyViewportElement(),s.centerRowContainerCtrl.getViewportElement()],[s.bottomCenterRowContainerCtrl.getViewportElement()],[s.topCenterRowContainerCtrl.getViewportElement()]]}})},i.prototype.isInterestedIn=function(t){return t===Y.rvo.HeaderCell||t===Y.rvo.ToolPanel&&this.gridOptionsWrapper.isAllowDragFromColumnsToolPanel()},i.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},i.prototype.getContainer=function(){return this.eContainer},i.prototype.init=function(){this.moveColumnFeature=this.createManagedBean(new FC(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new kC(this.pinned)),this.dragAndDropService.addDropTarget(this)},i.prototype.getIconName=function(){return this.currentDropListener.getIconName()},i.prototype.isDropColumnInPivotMode=function(t){return this.columnModel.isPivotMode()&&t.dragSource.type===Y.rvo.ToolPanel},i.prototype.onDragEnter=function(t){this.currentDropListener=this.isDropColumnInPivotMode(t)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(t)},i.prototype.onDragLeave=function(t){this.currentDropListener.onDragLeave(t)},i.prototype.onDragging=function(t){this.currentDropListener.onDragging(t)},i.prototype.onDragStop=function(t){this.currentDropListener.onDragStop(t)},li([H("dragAndDropService")],i.prototype,"dragAndDropService",void 0),li([H("columnModel")],i.prototype,"columnModel",void 0),li([H("ctrlsService")],i.prototype,"ctrlsService",void 0),li([et],i.prototype,"postConstruct",null),li([et],i.prototype,"init",null),i}(Ye),mx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),_x=0,Ad=function(d){function i(t,s){var l=d.call(this)||this;return l.lastFocusEvent=null,l.columnGroupChild=t,l.parentRowCtrl=s,l.instanceId=t.getUniqueId()+"-"+_x++,l}return mx(i,d),i.prototype.shouldStopEventPropagation=function(t){var s=this.focusService.getFocusedHeader();return ng(this.gridOptionsWrapper,t,s.headerRowIndex,s.column)},i.prototype.setGui=function(t){this.eGui=t,this.addDomData()},i.prototype.addDomData=function(){var t=this,s=i.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsWrapper.setDomData(this.eGui,s,this),this.addDestroyFunc(function(){return t.gridOptionsWrapper.setDomData(t.eGui,s,null)})},i.prototype.focus=function(t){return!!this.eGui&&(this.lastFocusEvent=t||null,this.eGui.focus(),!0)},i.prototype.getRowIndex=function(){return this.parentRowCtrl.getRowIndex()},i.prototype.getParentRowCtrl=function(){return this.parentRowCtrl},i.prototype.getPinned=function(){return this.parentRowCtrl.getPinned()},i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.getColumnGroupChild=function(){return this.columnGroupChild},i.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([H("focusService")],i.prototype,"focusService",void 0),i}(Ye),NC=function(){function d(){}return d.getFloatingFilterType=function(i){return this.filterToFloatingFilterMapping[i]},d.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},d}(),NM=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),cu=function(d){function i(t,s,l,c){var h=d.call(this)||this;return h.columnOrGroup=t,h.eCell=s,h.ariaEl=h.eCell.querySelector("[role=columnheader]")||h.eCell,h.colsSpanning=c,h.beans=l,h}return NM(i,d),i.prototype.setColsSpanning=function(t){this.colsSpanning=t,this.onLeftChanged()},i.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?jn(this.colsSpanning):this.columnOrGroup},i.prototype.postConstruct=function(){this.addManagedListener(this.columnOrGroup,Pn.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,this.onLeftChanged.bind(this))},i.prototype.setLeftFirstTime=function(){var t=this.beans.gridOptionsWrapper.isSuppressColumnMoveAnimation(),s=Fe(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&s&&!t?this.animateInLeft():this.onLeftChanged()},i.prototype.animateInLeft=function(){var t=this,s=this.getColumnOrGroup(),l=s.getLeft(),c=s.getOldLeft(),h=this.modifyLeftForPrintLayout(s,c),m=this.modifyLeftForPrintLayout(s,l);this.setLeft(h),this.actualLeft=m,this.beans.columnAnimationService.executeNextVMTurn(function(){t.actualLeft===m&&t.setLeft(m)})},i.prototype.onLeftChanged=function(){var t=this.getColumnOrGroup(),s=t.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(t,s),this.setLeft(this.actualLeft)},i.prototype.modifyLeftForPrintLayout=function(t,s){if(this.beans.gridOptionsWrapper.getDomLayout()!==fe.DOM_LAYOUT_PRINT||t.getPinned()===fe.PINNED_LEFT)return s;var c=this.beans.columnModel.getDisplayedColumnsLeftWidth();return t.getPinned()===fe.PINNED_RIGHT?c+this.beans.columnModel.getBodyContainerWidth()+s:c+s},i.prototype.setLeft=function(t){var s;if(Fe(t)&&(this.eCell.style.left=t+"px"),this.columnOrGroup instanceof Pn)s=this.columnOrGroup;else{var c=this.columnOrGroup.getLeafColumns();if(!c.length)return;c.length>1&&dE(this.ariaEl,c.length),s=c[0]}var h=this.beans.columnModel.getAriaColumnIndex(s);N_(this.ariaEl,h)},function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([et],i.prototype,"postConstruct",null),i}(Ye),Jo=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Op=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Pp=function(d){function i(t,s){var l=d.call(this)||this;return l.columns=t,l.element=s,l}return Jo(i,d),i.prototype.postConstruct=function(){this.gridOptionsWrapper.isColumnHoverHighlight()&&this.addMouseHoverListeners()},i.prototype.addMouseHoverListeners=function(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))},i.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},i.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},Op([H("columnHoverService")],i.prototype,"columnHoverService",void 0),Op([et],i.prototype,"postConstruct",null),i}(Ye),GC=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Or=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},ic=function(d){function i(t,s){var l=d.call(this,t,s)||this;return l.column=t,l}return GC(i,d),i.prototype.setComp=function(t,s,l,c){d.prototype.setGui.call(this,s),this.comp=t,this.eButtonShowMainFilter=l,this.eFloatingFilterBody=c;var h=this.column.getColDef();this.active=!(!h.filter&&!h.filterFramework||!h.floatingFilter),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this))},i.prototype.setupUi=function(){if(this.comp.addOrRemoveButtonWrapperCssClass("ag-hidden",!this.active||this.suppressFilterButton),this.active){this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton);var t=ui("filter",this.gridOptionsWrapper,this.column);t&&this.eButtonShowMainFilter.appendChild(t)}},i.prototype.setupFocus=function(){this.createManagedBean(new Yo(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},i.prototype.onTabKeyDown=function(t){if(document.activeElement!==this.eGui){var c=this.focusService.findNextFocusableElement(this.eGui,null,t.shiftKey);c&&(t.preventDefault(),c.focus())}},i.prototype.handleKeyDown=function(t){var l=document.activeElement===this.eGui;switch(t.keyCode){case Xe.UP:case Xe.DOWN:l||t.preventDefault();case Xe.LEFT:case Xe.RIGHT:if(l)return;t.stopPropagation();case Xe.ENTER:l&&this.focusService.focusInto(this.eGui)&&t.preventDefault();break;case Xe.ESCAPE:l||this.eGui.focus()}},i.prototype.onFocusIn=function(t){if(!this.eGui.contains(t.relatedTarget)){var l=this.focusService.isKeyboardMode(),c=!!t.relatedTarget&&!Cs(t.relatedTarget,"ag-floating-filter"),h=!!t.relatedTarget&&Ll(t.relatedTarget,"ag-floating-filter");if(l&&c&&h&&t.target===this.eGui){var m=this.lastFocusEvent;if(m&&m&&m.keyCode===Xe.TAB){var R=this.beans.focusService.getFocusedHeader(),D=this.beans.columnModel.getDisplayedColAfter(this.column);this.focusService.focusInto(this.eGui,!!(l&&m.shiftKey&&R&&D===R.column))}}var K=this.getRowIndex();this.beans.focusService.setFocusedHeader(K,this.column)}},i.prototype.setupHover=function(){var t=this;this.createManagedBean(new Pp([this.column],this.eGui));var s=function(){if(t.gridOptionsWrapper.isColumnHoverHighlight()){var c=t.columnHoverService.isHovered(t.column);t.comp.addOrRemoveCssClass("ag-column-hover",c)}};this.addManagedListener(this.eventService,$.EVENT_COLUMN_HOVER_CHANGED,s),s()},i.prototype.setupLeft=function(){var t=new cu(this.column,this.eGui,this.beans);this.createManagedBean(t)},i.prototype.setupUserComp=function(){if(this.active){var t=this.column.getColDef(),s=this.filterManager.createFilterParams(this.column,t),l=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(t,"filter",s),c=i.getDefaultFloatingFilterType(t);null==c&&(c="agReadOnlyFloatingFilter");var h={api:this.gridApi,column:this.column,filterParams:l,currentParentModel:this.currentParentModel.bind(this),parentFilterInstance:this.parentFilterInstance.bind(this),showParentFilter:this.showParentFilter.bind(this),onFloatingFilterChanged:this.onFloatingFilterChanged.bind(this),suppressFilterButton:!1};this.suppressFilterButton=!!t.floatingFilterComponentParams&&!!t.floatingFilterComponentParams.suppressFilterButton;var m=this.userComponentFactory.getFloatingFilterCompDetails(t,h,c);m&&this.comp.setCompDetails(m)}},i.getDefaultFloatingFilterType=function(t){if(null==t)return null;var s=null;return"string"==typeof t.filter?s=NC.getFloatingFilterType(t.filter):t.filterFramework||!0===t.filter&&(s=Kt.isRegistered(Y.GXE.SetFilterModule)?"agSetColumnFloatingFilter":"agTextColumnFloatingFilter"),s},i.prototype.currentParentModel=function(){var t=this.getFilterComponent(!1);return t?t.resolveNow(null,function(s){return s&&s.getModel()}):null},i.prototype.getFilterComponent=function(t){return void 0===t&&(t=!0),this.filterManager.getFilterComponent(this.column,"NO_UI",t)},i.prototype.onFloatingFilterChanged=function(){console.warn("AG Grid: since version 21.x, how floating filters are implemented has changed. Instead of calling params.onFloatingFilterChanged(), get a reference to the main filter via params.parentFilterInstance() and then set a value on the parent filter directly.")},i.prototype.parentFilterInstance=function(t){var s=this,l=this.getFilterComponent();l&&l.then(function(c){var h=s.frameworkComponentWrapper?s.frameworkComponentWrapper.unwrap(c):c;t(h)})},i.prototype.showParentFilter=function(){this.menuFactory.showMenuAfterButtonClick(this.column,this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter,"floatingFilter","filterMenuTab",["filterMenuTab"])},i.prototype.setupSyncWithFilter=function(){var t=this;if(this.active){var s=function(c){var h=t.comp.getFloatingFilterComp();if(h){var m=t.currentParentModel();h.then(function(S){return S&&S.onParentModelChanged(m,c)})}};this.addManagedListener(this.column,Pn.EVENT_FILTER_CHANGED,s),this.filterManager.isFilterActive(this.column)&&s(null)}},i.prototype.setupWidth=function(){var t=this,s=function(){var c=t.column.getActualWidth()+"px";t.comp.setWidth(c)};this.addManagedListener(this.column,Pn.EVENT_WIDTH_CHANGED,s),s()},Or([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Or([H("filterManager")],i.prototype,"filterManager",void 0),Or([H("columnHoverService")],i.prototype,"columnHoverService",void 0),Or([H("gridApi")],i.prototype,"gridApi",void 0),Or([H("menuFactory")],i.prototype,"menuFactory",void 0),Or([H("beans")],i.prototype,"beans",void 0),Or([Gn("frameworkComponentWrapper")],i.prototype,"frameworkComponentWrapper",void 0),i}(Ad),Md=function(){function d(){}return d.getHeaderClassesFromColDef=function(i,t,s,l){return we(i)?[]:this.getColumnClassesFromCollDef(i.headerClass,i,t,s,l)},d.getToolPanelClassesFromColDef=function(i,t,s,l){return we(i)?[]:this.getColumnClassesFromCollDef(i.toolPanelClass,i,t,s,l)},d.getColumnClassesFromCollDef=function(i,t,s,l,c){return we(i)?[]:"string"==typeof(h="function"==typeof i?i({colDef:t,column:l,columnGroup:c,context:s.getContext(),api:s.getApi()}):i)?[h]:Array.isArray(h)?h:[];var h},d}(),Cx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Lg=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},BC=function(d){function i(t,s,l,c,h){var m=d.call(this)||this;return m.pinned=t,m.column=s,m.eResize=l,m.comp=c,m.ctrl=h,m}return Cx(i,d),i.prototype.postConstruct=function(){var c,h,t=this,s=this.column.getColDef(),l=[],S=function(){l.forEach(function(L){return L()}),l.length=0},R=function(){var L=t.column.isResizable(),U=!t.gridOptionsWrapper.isSuppressAutoSize()&&!s.suppressAutoSize;(L!==c||U!==h)&&(c=L,h=U,S(),function(){if(Xn(t.eResize,c),c){var L=t.horizontalResizeService.addResizeBar({eResizeBar:t.eResize,onResizeStart:t.onResizeStart.bind(t),onResizing:t.onResizing.bind(t,!1),onResizeEnd:t.onResizing.bind(t,!0)});if(l.push(L),h){var U=t.gridOptionsWrapper.isSkipHeaderOnAutoSize(),K=function(){t.columnModel.autoSizeColumn(t.column,U,"uiColumnResized")};t.eResize.addEventListener("dblclick",K);var ee=new Do(t.eResize);ee.addEventListener(Do.EVENT_DOUBLE_TAP,K),t.addDestroyFunc(function(){t.eResize.removeEventListener("dblclick",K),ee.removeEventListener(Do.EVENT_DOUBLE_TAP,K),ee.destroy()})}}}())};R(),this.addDestroyFunc(S),this.ctrl.addRefreshFunction(R)},i.prototype.onResizing=function(t,s){var l=this.normaliseResizeAmount(s);this.columnModel.setColumnWidths([{key:this.column,newWidth:this.resizeStartWidth+l}],this.resizeWithShiftKey,t,"uiColumnDragged"),t&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},i.prototype.onResizeStart=function(t){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=t,this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},i.prototype.normaliseResizeAmount=function(t){var s=t,l=this.pinned!==fe.PINNED_LEFT,c=this.pinned===fe.PINNED_RIGHT;return this.gridOptionsWrapper.isEnableRtl()?l&&(s*=-1):c&&(s*=-1),s},Lg([H("horizontalResizeService")],i.prototype,"horizontalResizeService",void 0),Lg([H("columnModel")],i.prototype,"columnModel",void 0),Lg([et],i.prototype,"postConstruct",null),i}(Ye),wx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Zu=function(d){function i(t,s,l){void 0===s&&(s="ag-checkbox"),void 0===l&&(l="checkbox");var c=d.call(this,t,s,l)||this;return c.labelAlignment="right",c.selected=!1,c.readOnly=!1,c.passive=!1,c}return wx(i,d),i.prototype.addInputListeners=function(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))},i.prototype.getNextValue=function(){return void 0===this.selected||!this.selected},i.prototype.setPassive=function(t){this.passive=t},i.prototype.isReadOnly=function(){return this.readOnly},i.prototype.setReadOnly=function(t){kt(this.eWrapper,"ag-disabled",t),this.eInput.disabled=t,this.readOnly=t},i.prototype.setDisabled=function(t){return kt(this.eWrapper,"ag-disabled",t),d.prototype.setDisabled.call(this,t)},i.prototype.toggle=function(){if(!this.eInput.disabled){var t=this.isSelected(),s=this.getNextValue();this.passive?this.dispatchChange(s,t):this.setValue(s)}},i.prototype.getValue=function(){return this.isSelected()},i.prototype.setValue=function(t,s){return this.refreshSelectedClass(t),this.setSelected(t,s),this},i.prototype.setName=function(t){return this.getInputElement().name=t,this},i.prototype.isSelected=function(){return this.selected},i.prototype.setSelected=function(t,s){this.isSelected()!==t&&(this.previousValue=this.isSelected(),t=this.selected="boolean"==typeof t?t:void 0,this.eInput.checked=t,this.eInput.indeterminate=void 0===t,s||this.dispatchChange(this.selected,this.previousValue))},i.prototype.dispatchChange=function(t,s,l){this.dispatchEvent({type:i.EVENT_CHANGED,selected:t,previousValue:s,event:l});var c=this.getInputElement();this.eventService.dispatchEvent({type:$.EVENT_CHECKBOX_CHANGED,id:c.id,name:c.name,selected:t,previousValue:s})},i.prototype.onCheckboxClick=function(t){if(!this.passive&&!this.eInput.disabled){var s=this.isSelected(),l=this.selected=t.target.checked;this.refreshSelectedClass(l),this.dispatchChange(l,s,t)}},i.prototype.refreshSelectedClass=function(t){kt(this.eWrapper,"ag-checked",!0===t),kt(this.eWrapper,"ag-indeterminate",null==t)},i}(Va),Sx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Od=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},bx=function(d){function i(t){var s=d.call(this)||this;s.cbSelectAllVisible=!1,s.processingEventFromCheckbox=!1,s.column=t;var l=t.getColDef();return s.filteredOnly=!!l&&!!l.headerCheckboxSelectionFilteredOnly,s}return Sx(i,d),i.prototype.onSpaceKeyPressed=function(t){var s=this.cbSelectAll;s.isDisplayed()&&!s.getGui().contains(document.activeElement)&&(t.preventDefault(),s.setValue(!s.getValue()))},i.prototype.getCheckboxGui=function(){return this.cbSelectAll.getGui()},i.prototype.setComp=function(t){this.comp=t,this.cbSelectAll=this.createManagedBean(new Zu),this.cbSelectAll.addCssClass("ag-header-select-all"),Yi(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,$.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,Zu.EVENT_CHANGED,this.onCbSelectAll.bind(this)),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()},i.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType(),this.updateStateOfCheckbox()),this.refreshHeaderAriaDescribedBy(this.cbSelectAllVisible)},i.prototype.refreshHeaderAriaDescribedBy=function(t){var s=t?this.cbSelectAll.getInputElement().id:void 0;this.comp.setAriaDescribedBy(s)},i.prototype.onModelChanged=function(){!this.cbSelectAllVisible||this.updateStateOfCheckbox()},i.prototype.onSelectionChanged=function(){!this.cbSelectAllVisible||this.updateStateOfCheckbox()},i.prototype.getNextCheckboxState=function(t){return(0!==t.selected||0!==t.notSelected)&&(t.selected>0&&t.notSelected>0?null:t.selected>0)},i.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var t=this.getSelectionCount(),s=this.getNextCheckboxState(t);this.cbSelectAll.setValue(s),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}},i.prototype.refreshSelectAllLabel=function(){var t=this.gridOptionsWrapper.getLocaleTextFunc(),l=this.cbSelectAll.getValue()?t("ariaChecked","checked"):t("ariaUnchecked","unchecked"),c=t("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAll.setInputAriaLabel(c+" ("+l+")")},i.prototype.getSelectionCount=function(){var t=this,s=0,l=0,c=function(m){t.gridOptionsWrapper.isGroupSelectsChildren()&&m.group||(m.isSelected()?s++:m.selectable&&l++)};return this.filteredOnly?this.gridApi.forEachNodeAfterFilter(c):this.gridApi.forEachNode(c),{notSelected:l,selected:s}},i.prototype.checkRightRowModelType=function(){var t=this.rowModel.getType();t===fe.ROW_MODEL_TYPE_CLIENT_SIDE||console.warn("AG Grid: selectAllCheckbox is only available if using normal row model, you are using "+t)},i.prototype.onCbSelectAll=function(){!this.processingEventFromCheckbox&&this.cbSelectAllVisible&&(this.cbSelectAll.getValue()?this.selectionService.selectAllRowNodes(this.filteredOnly):this.selectionService.deselectAllRowNodes(this.filteredOnly))},i.prototype.isCheckboxSelection=function(){var t=this.column.getColDef().headerCheckboxSelection;return"function"==typeof t&&(t=t({column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi})),!(!t||(this.gridOptionsWrapper.isRowModelServerSide()?(console.warn("headerCheckboxSelection is not supported for Server Side Row Model"),1):this.gridOptionsWrapper.isRowModelInfinite()?(console.warn("headerCheckboxSelection is not supported for Infinite Row Model"),1):this.gridOptionsWrapper.isRowModelViewport()&&(console.warn("headerCheckboxSelection is not supported for Viewport Row Model"),1)))},Od([H("gridApi")],i.prototype,"gridApi",void 0),Od([H("columnApi")],i.prototype,"columnApi",void 0),Od([H("rowModel")],i.prototype,"rowModel",void 0),Od([H("selectionService")],i.prototype,"selectionService",void 0),i}(Ye),Ex=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ya=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Ip=function(d){function i(t,s){var l=d.call(this,t,s)||this;return l.refreshFunctions=[],l.userHeaderClasses=new Set,l.column=t,l}return Ex(i,d),i.prototype.setComp=function(t,s,l){var c=this;d.prototype.setGui.call(this,s),this.comp=t,this.colDefVersion=this.columnModel.getColDefVersion(),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.addColumnHoverListener(),this.setupFilterCss(),this.setupColId(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.createManagedBean(new BC(this.getPinned(),this.column,l,t,this)),this.createManagedBean(new Pp([this.column],s)),this.createManagedBean(new cu(this.column,s,this.beans)),this.createManagedBean(new Yo(s,{shouldStopEventPropagation:function(m){return c.shouldStopEventPropagation(m)},onTabKeyDown:function(){return null},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this))},i.prototype.setupUserComp=function(){var t=this.lookupUserCompDetails();this.setCompDetails(t)},i.prototype.setCompDetails=function(t){this.userCompDetails=t,this.comp.setUserCompDetails(t)},i.prototype.lookupUserCompDetails=function(){var t=this.createParams(),s=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(s,t)},i.prototype.createParams=function(){var t=this,s=this.column.getColDef();return{column:this.column,displayName:this.displayName,enableSorting:s.sortable,enableMenu:this.menuEnabled,showColumnMenu:function(h){t.gridApi.showColumnMenuAfterButtonClick(t.column,h)},progressSort:function(h){t.sortController.progressSort(t.column,!!h,"uiColumnSorted")},setSort:function(h,m){t.sortController.setSortForColumn(t.column,h,!!m,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext(),eGridHeader:this.getGui()}},i.prototype.setupSelectAll=function(){this.selectAllFeature=this.createManagedBean(new bx(this.column)),this.selectAllFeature.setComp(this.comp)},i.prototype.getSelectAllGui=function(){return this.selectAllFeature.getCheckboxGui()},i.prototype.handleKeyDown=function(t){t.keyCode===Xe.SPACE&&this.selectAllFeature.onSpaceKeyPressed(t),t.keyCode===Xe.ENTER&&this.onEnterKeyPressed(t)},i.prototype.onEnterKeyPressed=function(t){var s=this.comp.getUserCompInstance();s&&(t.ctrlKey||t.metaKey?this.menuEnabled&&s.showMenu&&(t.preventDefault(),s.showMenu()):this.sortable&&this.sortController.progressSort(this.column,t.shiftKey,"uiColumnSorted"))},i.prototype.isMenuEnabled=function(){return this.menuEnabled},i.prototype.onFocusIn=function(t){if(!this.getGui().contains(t.relatedTarget)){var s=this.getRowIndex();this.focusService.setFocusedHeader(s,this.column)}this.setActiveHeader(!0)},i.prototype.onFocusOut=function(t){this.getGui().contains(t.relatedTarget)||this.setActiveHeader(!1)},i.prototype.setupTooltip=function(){var t=this,l=this.createManagedBean(new bC({getColumn:function(){return t.column},getColDef:function(){return t.column.getColDef()},getGui:function(){return t.eGui},getLocation:function(){return"header"},getTooltipValue:function(){return t.column.getColDef().headerTooltip}},this.beans));l.setComp(this.comp),this.refreshFunctions.push(function(){return l.refreshToolTip()})},i.prototype.setupClassesFromColDef=function(){var t=this,s=function(){var c=t.column.getColDef(),m=Md.getHeaderClassesFromColDef(c,t.gridOptionsWrapper,t.column,null),S=t.userHeaderClasses;t.userHeaderClasses=new Set(m),m.forEach(function(R){S.has(R)?S.delete(R):t.comp.addOrRemoveCssClass(R,!0)}),S.forEach(function(R){return t.comp.addOrRemoveCssClass(R,!1)})};this.refreshFunctions.push(s),s()},i.prototype.getGui=function(){return this.eGui},i.prototype.setDragSource=function(t){var s=this;this.dragSourceElement=t,this.removeDragSource(),t&&(!this.draggable||(this.moveDragSource={type:Y.rvo.HeaderCell,eElement:t,defaultIconName:Vi.ICON_HIDE,getDragItem:function(){return s.createDragItem()},dragItemName:this.displayName,onDragStarted:function(){return s.column.setMoving(!0,"uiColumnMoved")},onDragStopped:function(){return s.column.setMoving(!1,"uiColumnMoved")}},this.dragAndDropService.addDragSource(this.moveDragSource,!0)))},i.prototype.createDragItem=function(){var t={};return t[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:t}},i.prototype.removeDragSource=function(){this.moveDragSource&&(this.dragAndDropService.removeDragSource(this.moveDragSource),this.moveDragSource=void 0)},i.prototype.onNewColumnsLoaded=function(){var t=this.columnModel.getColDefVersion();t!=this.colDefVersion&&(this.colDefVersion=t,this.refresh())},i.prototype.updateState=function(){var t=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!t.suppressMenu,this.sortable=t.sortable,this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()},i.prototype.addRefreshFunction=function(t){this.refreshFunctions.push(t)},i.prototype.refresh=function(){this.updateState(),this.refreshHeaderComp(),this.refreshFunctions.forEach(function(t){return t()})},i.prototype.refreshHeaderComp=function(){var t=this.lookupUserCompDetails();null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==t.componentClass&&this.attemptHeaderCompRefresh(t.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)},i.prototype.attemptHeaderCompRefresh=function(t){var s=this.comp.getUserCompInstance();return!(!s||!s.refresh)&&s.refresh(t)},i.prototype.calculateDisplayName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)},i.prototype.checkDisplayName=function(){this.displayName!==this.calculateDisplayName()&&this.refresh()},i.prototype.workOutDraggable=function(){var t=this.column.getColDef();return!(this.gridOptionsWrapper.isSuppressMovableColumns()||t.suppressMovable||t.lockPosition)||!!t.enableRowGroup||!!t.enablePivot},i.prototype.onColumnRowGroupChanged=function(){this.checkDisplayName()},i.prototype.onColumnPivotChanged=function(){this.checkDisplayName()},i.prototype.onColumnValueChanged=function(){this.checkDisplayName()},i.prototype.setupWidth=function(){var t=this,s=function(){t.comp.setWidth(t.column.getActualWidth()+"px")};this.addManagedListener(this.column,Pn.EVENT_WIDTH_CHANGED,s),s()},i.prototype.setupMovingCss=function(){var t=this,s=function(){t.comp.addOrRemoveCssClass("ag-header-cell-moving",t.column.isMoving())};this.addManagedListener(this.column,Pn.EVENT_MOVING_CHANGED,s),s()},i.prototype.setupMenuClass=function(){var t=this,s=function(){t.comp.addOrRemoveCssClass("ag-column-menu-visible",t.column.isMenuVisible())};this.addManagedListener(this.column,Pn.EVENT_MENU_VISIBLE_CHANGED,s),s()},i.prototype.setupSortableClass=function(){var t=this,s=function(){t.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!t.sortable)},l=function(){t.comp.setAriaSort(t.sortable?F_(t.column):void 0)};s(),l(),this.addRefreshFunction(s),this.addRefreshFunction(l),this.addManagedListener(this.column,Pn.EVENT_SORT_CHANGED,l)},i.prototype.addColumnHoverListener=function(){var t=this,s=function(){if(t.gridOptionsWrapper.isColumnHoverHighlight()){var c=t.columnHoverService.isHovered(t.column);t.comp.addOrRemoveCssClass("ag-column-hover",c)}};this.addManagedListener(this.eventService,$.EVENT_COLUMN_HOVER_CHANGED,s),s()},i.prototype.setupFilterCss=function(){var t=this,s=function(){t.comp.addOrRemoveCssClass("ag-header-cell-filtered",t.column.isFilterActive())};this.addManagedListener(this.column,Pn.EVENT_FILTER_ACTIVE_CHANGED,s),s()},i.prototype.setupColId=function(){this.comp.setColId(this.column.getColId())},i.prototype.addActiveHeaderMouseListeners=function(){var t=this,s=function(c){return t.setActiveHeader("mouseenter"===c.type)};this.addManagedListener(this.getGui(),"mouseenter",s),this.addManagedListener(this.getGui(),"mouseleave",s)},i.prototype.setActiveHeader=function(t){this.comp.addOrRemoveCssClass("ag-header-active",t)},Ya([H("columnModel")],i.prototype,"columnModel",void 0),Ya([H("columnHoverService")],i.prototype,"columnHoverService",void 0),Ya([H("beans")],i.prototype,"beans",void 0),Ya([H("sortController")],i.prototype,"sortController",void 0),Ya([H("menuFactory")],i.prototype,"menuFactory",void 0),Ya([H("dragAndDropService")],i.prototype,"dragAndDropService",void 0),Ya([H("gridApi")],i.prototype,"gridApi",void 0),Ya([H("columnApi")],i.prototype,"columnApi",void 0),Ya([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Ya([Fi],i.prototype,"removeDragSource",null),i}(Ad),xx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Fg=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},BM=function(d){function i(t,s,l,c){var h=d.call(this)||this;return h.eResize=s,h.comp=t,h.pinned=l,h.columnGroup=c,h}return xx(i,d),i.prototype.postConstruct=function(){var t=this;if(this.columnGroup.isResizable()){var s=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(s),!this.gridOptionsWrapper.isSuppressAutoSize()){var l=this.gridOptionsWrapper.isSkipHeaderOnAutoSize();this.eResize.addEventListener("dblclick",function(c){var h=[];t.columnGroup.getDisplayedLeafColumns().forEach(function(m){m.getColDef().suppressAutoSize||h.push(m.getColId())}),h.length>0&&t.columnModel.autoSizeColumns(h,l,"uiColumnResized")})}}else this.comp.addOrRemoveResizableCssClass("ag-hidden",!0)},i.prototype.onResizeStart=function(t){var s=this,l=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=l.filter(function(m){return m.isResizable()}),this.resizeStartWidth=0,this.resizeCols.forEach(function(m){return s.resizeStartWidth+=m.getActualWidth()}),this.resizeRatios=[],this.resizeCols.forEach(function(m){return s.resizeRatios.push(m.getActualWidth()/s.resizeStartWidth)});var c=null;if(t&&(c=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),c){var h=c.getDisplayedLeafColumns();this.resizeTakeFromCols=h.filter(function(m){return m.isResizable()}),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach(function(m){return s.resizeTakeFromStartWidth+=m.getActualWidth()}),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach(function(m){return s.resizeTakeFromRatios.push(m.getActualWidth()/s.resizeTakeFromStartWidth)})}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null;this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},i.prototype.onResizing=function(t,s){var l=[],c=this.normaliseDragChange(s);l.push({columns:this.resizeCols,ratios:this.resizeRatios,width:this.resizeStartWidth+c}),this.resizeTakeFromCols&&l.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-c}),this.columnModel.resizeColumnSets(l,t,"uiColumnDragged"),t&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},i.prototype.normaliseDragChange=function(t){var s=t;return this.gridOptionsWrapper.isEnableRtl()?this.pinned!==fe.PINNED_LEFT&&(s*=-1):this.pinned===fe.PINNED_RIGHT&&(s*=-1),s},Fg([H("horizontalResizeService")],i.prototype,"horizontalResizeService",void 0),Fg([H("columnModel")],i.prototype,"columnModel",void 0),Fg([et],i.prototype,"postConstruct",null),i}(Ye),kg=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Tx=function(d){function i(t,s){var l=d.call(this)||this;return l.removeChildListenersFuncs=[],l.columnGroup=s,l.comp=t,l}return kg(i,d),i.prototype.postConstruct=function(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,ai.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))},i.prototype.addListenersToChildrenColumns=function(){var t=this;this.removeListenersOnChildrenColumns();var s=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(function(l){l.addEventListener(Pn.EVENT_WIDTH_CHANGED,s),l.addEventListener(Pn.EVENT_VISIBLE_CHANGED,s),t.removeChildListenersFuncs.push(function(){l.removeEventListener(Pn.EVENT_WIDTH_CHANGED,s),l.removeEventListener(Pn.EVENT_VISIBLE_CHANGED,s)})})},i.prototype.removeListenersOnChildrenColumns=function(){this.removeChildListenersFuncs.forEach(function(t){return t()}),this.removeChildListenersFuncs=[]},i.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},i.prototype.onWidthChanged=function(){this.comp.setWidth(this.columnGroup.getActualWidth()+"px")},function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([et],i.prototype,"postConstruct",null),i}(Ye),oc=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),ac=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},HC=function(d){function i(t,s){var l=d.call(this,t,s)||this;return l.columnGroup=t,l}return oc(i,d),i.prototype.setComp=function(t,s,l){d.prototype.setGui.call(this,s),this.comp=t,this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.columnGroup,"header"),this.addClasses(),this.addAttributes(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();var c=this.getParentRowCtrl().getPinned(),h=this.columnGroup.getOriginalColumnGroup().getLeafColumns();this.createManagedBean(new Pp(h,s)),this.createManagedBean(new cu(this.columnGroup,s,this.beans)),this.createManagedBean(new BM(t,l,c,this.columnGroup)),this.createManagedBean(new Tx(t,this.columnGroup)),this.createManagedBean(new Yo(s,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:function(){},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},i.prototype.setupUserComp=function(){var t=this,s=this.displayName,l={displayName:this.displayName,columnGroup:this.columnGroup,setExpanded:function(D){t.columnModel.setColumnGroupOpened(t.columnGroup.getOriginalColumnGroup(),D,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};if(!s){for(var c=this.columnGroup,h=c.getLeafColumns();c.getParent()&&c.getParent().getLeafColumns().length===h.length;)c=c.getParent();var m=c.getColGroupDef();m&&(s=m.headerName),s||(s=h?this.columnModel.getDisplayNameForColumn(h[0],"header",!0):"")}var S=this.userComponentFactory.getHeaderGroupCompDetails(l);this.comp.setUserCompDetails(S)},i.prototype.setupTooltip=function(){var t=this,s=this.columnGroup.getColGroupDef(),l={getColumn:function(){return t.columnGroup},getGui:function(){return t.eGui},getLocation:function(){return"headerGroup"},getTooltipValue:function(){return s&&s.headerTooltip}};s&&(l.getColDef=function(){return s}),this.createManagedBean(new bC(l,this.beans)).setComp(this.comp)},i.prototype.setupExpandable=function(){var t=this.columnGroup.getOriginalColumnGroup();this.refreshExpanded(),this.addManagedListener(t,Cr.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(t,Cr.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))},i.prototype.refreshExpanded=function(){var t=this.columnGroup;this.expandable=t.isExpandable();var s=t.isExpanded();this.comp.setAriaExpanded(this.expandable?s?"true":"false":void 0)},i.prototype.addAttributes=function(){this.comp.setColId(this.columnGroup.getUniqueId())},i.prototype.addClasses=function(){var t=this,s=this.columnGroup.getColGroupDef(),l=Md.getHeaderClassesFromColDef(s,this.gridOptionsWrapper,null,this.columnGroup);l.push(this.columnGroup.isPadding()?"ag-header-group-cell-no-group":"ag-header-group-cell-with-group"),l.forEach(function(c){return t.comp.addOrRemoveCssClass(c,!0)})},i.prototype.setupMovingCss=function(){var t=this,l=this.columnGroup.getOriginalColumnGroup().getLeafColumns(),c=function(){return t.comp.addOrRemoveCssClass("ag-header-cell-moving",t.columnGroup.isMoving())};l.forEach(function(h){t.addManagedListener(h,Pn.EVENT_MOVING_CHANGED,c)}),c()},i.prototype.onFocusIn=function(t){if(!this.eGui.contains(t.relatedTarget)){var s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.columnGroup)}},i.prototype.handleKeyDown=function(t){var s=document.activeElement;if(this.expandable&&s===this.eGui&&t.keyCode===Xe.ENTER){var c=this.columnGroup,h=!c.isExpanded();this.columnModel.setColumnGroupOpened(c.getOriginalColumnGroup(),h,"uiColumnExpanded")}},i.prototype.setDragSource=function(t){var s=this;if(!this.isSuppressMoving()){var l=this.columnGroup.getOriginalColumnGroup().getLeafColumns(),c={type:Y.rvo.HeaderCell,eElement:t,defaultIconName:Vi.ICON_HIDE,dragItemName:this.displayName,getDragItem:this.getDragItemForGroup.bind(this),onDragStarted:function(){return l.forEach(function(m){return m.setMoving(!0,"uiColumnDragged")})},onDragStopped:function(){return l.forEach(function(m){return m.setMoving(!1,"uiColumnDragged")})}};this.dragAndDropService.addDragSource(c,!0),this.addDestroyFunc(function(){return s.dragAndDropService.removeDragSource(c)})}},i.prototype.getDragItemForGroup=function(){var t=this.columnGroup.getOriginalColumnGroup().getLeafColumns(),s={};t.forEach(function(c){return s[c.getId()]=c.isVisible()});var l=[];return this.columnModel.getAllDisplayedColumns().forEach(function(c){t.indexOf(c)>=0&&(l.push(c),ri(t,c))}),t.forEach(function(c){return l.push(c)}),{columns:l,visibleState:s}},i.prototype.isSuppressMoving=function(){var t=!1;return this.columnGroup.getLeafColumns().forEach(function(l){(l.getColDef().suppressMovable||l.getColDef().lockPosition)&&(t=!0)}),t||this.gridOptionsWrapper.isSuppressMovableColumns()},ac([H("beans")],i.prototype,"beans",void 0),ac([H("columnModel")],i.prototype,"columnModel",void 0),ac([H("dragAndDropService")],i.prototype,"dragAndDropService",void 0),ac([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),ac([H("gridApi")],i.prototype,"gridApi",void 0),ac([H("columnApi")],i.prototype,"columnApi",void 0),i}(Ad),Dx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),VC=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Ax=0,Pd=function(d){function i(t,s,l){var c=d.call(this)||this;return c.instanceId=Ax++,c.headerCellCtrls={},c.rowIndex=t,c.pinned=s,c.type=l,c}return Dx(i,d),i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.setComp=function(t){this.comp=t,this.onRowHeightChanged(),this.onVirtualColumnsChanged(),this.setWidth(),this.addEventListeners(),ed()&&this.comp.setTransform("translateZ(0)"),t.setAriaRowIndex(this.rowIndex+1)},i.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,$.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_PIVOT_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_PIVOT_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_FLOATING_FILTERS_HEIGHT,this.onRowHeightChanged.bind(this))},i.prototype.getHtmlElementForColumnHeader=function(t){if(this.type==Y.A6C.COLUMN){var s=Li(this.headerCellCtrls,function(c){return c.getColumnGroupChild()==t});if(s)return s.getGui()}},i.prototype.onDisplayedColumnsChanged=function(){this.onVirtualColumnsChanged(),this.setWidth()},i.prototype.getType=function(){return this.type},i.prototype.onColumnResized=function(){this.setWidth()},i.prototype.setWidth=function(){var t=this.getWidthForRow();this.comp.setWidth(t+"px")},i.prototype.getWidthForRow=function(){return this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_PRINT?null!=this.pinned?0:this.columnModel.getContainerWidth(fe.PINNED_RIGHT)+this.columnModel.getContainerWidth(fe.PINNED_LEFT)+this.columnModel.getContainerWidth(null):this.columnModel.getContainerWidth(this.pinned)},i.prototype.onRowHeightChanged=function(){var c,h,t=this.columnModel.getHeaderRowCount(),s=[],l=0;this.columnModel.isPivotMode()?(c=this.gridOptionsWrapper.getPivotGroupHeaderHeight(),h=this.gridOptionsWrapper.getPivotHeaderHeight()):(this.columnModel.hasFloatingFilters()&&(t++,l=1),c=this.gridOptionsWrapper.getGroupHeaderHeight(),h=this.gridOptionsWrapper.getHeaderHeight());for(var S=t-(1+l),R=0;R<S;R++)s.push(c);for(s.push(h),R=0;R<l;R++)s.push(this.gridOptionsWrapper.getFloatingFiltersHeight());var D=0;for(R=0;R<this.rowIndex;R++)D+=s[R];this.comp.setTop(D+"px"),this.comp.setHeight(s[this.rowIndex]+"px")},i.prototype.getPinned=function(){return this.pinned},i.prototype.getRowIndex=function(){return this.rowIndex},i.prototype.onVirtualColumnsChanged=function(){var t=this,s=this.headerCellCtrls;this.headerCellCtrls={},this.getColumnsInViewport().forEach(function(m){if(!m.isEmptyGroup()){var S=m.getUniqueId(),R=s[S];if(delete s[S],R&&R.getColumnGroupChild()!=m&&(t.destroyBean(R),R=void 0),null==R)switch(t.type){case Y.A6C.FLOATING_FILTER:R=t.createBean(new ic(m,t));break;case Y.A6C.COLUMN_GROUP:R=t.createBean(new HC(m,t));break;default:R=t.createBean(new Ip(m,t))}t.headerCellCtrls[S]=R}}),Nn(s,function(m,S){var R=function(S){return!!t.focusService.isHeaderWrapperFocused(S)&&t.columnModel.isDisplayed(S.getColumnGroupChild())}(S);R?t.headerCellCtrls[m]=S:t.destroyBean(S)});var h=Ma(this.headerCellCtrls);this.comp.setHeaderCtrls(h)},i.prototype.getColumnsInViewport=function(){return this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_PRINT?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()},i.prototype.getColumnsInViewportPrintLayout=function(){var t=this;if(null!=this.pinned)return[];var s=[],l=this.getActualDepth();return[fe.PINNED_LEFT,null,fe.PINNED_RIGHT].forEach(function(c){var h=t.columnModel.getVirtualHeaderGroupRow(c,l);s=s.concat(h)}),s},i.prototype.getActualDepth=function(){return this.type==Y.A6C.FLOATING_FILTER?this.rowIndex-1:this.rowIndex},i.prototype.getColumnsInViewportNormalLayout=function(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())},i.prototype.focusHeader=function(t,s){var c=Li(Ma(this.headerCellCtrls),function(h){return h.getColumnGroupChild()==t});return!!c&&(c.focus(s),!0)},VC([H("columnModel")],i.prototype,"columnModel",void 0),VC([H("focusService")],i.prototype,"focusService",void 0),i}(Ye),Mx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Id=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},WC=function(d){function i(t){var s=d.call(this)||this;return s.groupsRowCtrls=[],s.pinned=t,s}return Mx(i,d),i.prototype.setComp=function(t,s){this.comp=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(s),this.addManagedListener(this.eventService,$.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()},i.prototype.setupDragAndDrop=function(t){var s=new Ig(this.pinned,t);this.createManagedBean(s)},i.prototype.refresh=function(t){var s=this;void 0===t&&(t=!1);var L,l=new xs,c=this.focusService.getFocusHeaderToUseAfterRefresh();(function(){var L=s.columnModel.getHeaderRowCount()-1;s.groupsRowCtrls=s.destroyBeans(s.groupsRowCtrls);for(var U=0;U<L;U++){var K=s.createBean(new Pd(l.next(),s.pinned,Y.A6C.COLUMN_GROUP));s.groupsRowCtrls.push(K)}})(),L=l.next(),(null==s.columnsRowCtrl||!t||s.columnsRowCtrl.getRowIndex()!==L)&&(s.destroyBean(s.columnsRowCtrl),s.columnsRowCtrl=s.createBean(new Pd(L,s.pinned,Y.A6C.COLUMN))),function(){var U=function(){s.filtersRowCtrl=s.destroyBean(s.filtersRowCtrl)};if(!s.columnModel.isPivotMode()&&s.columnModel.hasFloatingFilters()){var K=l.next();if(s.filtersRowCtrl){var ee=s.filtersRowCtrl.getRowIndex()!==K;(!t||ee)&&U()}s.filtersRowCtrl||(s.filtersRowCtrl=s.createBean(new Pd(K,s.pinned,Y.A6C.FLOATING_FILTER)))}else U()}();var R=this.getAllCtrls();this.comp.setCtrls(R),this.restoreFocusOnHeader(c)},i.prototype.restoreFocusOnHeader=function(t){null==t||t.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:t})},i.prototype.getAllCtrls=function(){var t=function(){for(var d=0,i=0,t=arguments.length;i<t;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<t;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s}(this.groupsRowCtrls,[this.columnsRowCtrl]);return this.filtersRowCtrl&&t.push(this.filtersRowCtrl),t},i.prototype.onGridColumnsChanged=function(){this.refresh(!0)},i.prototype.setupCenterWidth=function(){var t=this;null==this.pinned&&this.createManagedBean(new Pg(function(s){return t.comp.setCenterWidth(s+"px")}))},i.prototype.setHorizontalScroll=function(t){this.comp.setContainerTransform("translateX("+t+"px)")},i.prototype.setupPinnedWidth=function(){var t=this;if(null!=this.pinned){var s=this.pinned===fe.PINNED_LEFT,l=this.pinned===fe.PINNED_RIGHT,c=function(){var m=s?t.pinnedWidthService.getPinnedLeftWidth():t.pinnedWidthService.getPinnedRightWidth();if(null!=m){var S=0==m,R=t.gridOptionsWrapper.isEnableRtl(),D=t.gridOptionsWrapper.getScrollbarWidth(),L=t.scrollVisibleService.isVerticalScrollShowing()&&(R&&s||!R&&l);t.comp.setPinnedContainerWidth((L?m+D:m)+"px"),t.comp.addOrRemoveCssClass("ag-hidden",S)}};this.addManagedListener(this.eventService,$.EVENT_LEFT_PINNED_WIDTH_CHANGED,c),this.addManagedListener(this.eventService,$.EVENT_RIGHT_PINNED_WIDTH_CHANGED,c),this.addManagedListener(this.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,c),this.addManagedListener(this.eventService,$.EVENT_SCROLLBAR_WIDTH_CHANGED,c)}},i.prototype.getHtmlElementForColumnHeader=function(t){if(this.columnsRowCtrl)return this.columnsRowCtrl.getHtmlElementForColumnHeader(t)},i.prototype.getRowType=function(t){var l=this.getAllCtrls()[t];return l?l.getType():void 0},i.prototype.focusHeader=function(t,s,l){var h=this.getAllCtrls()[t];return!!h&&h.focusHeader(s,l)},i.prototype.getRowCount=function(){return this.getAllCtrls().length},Id([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Id([H("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),Id([H("pinnedWidthService")],i.prototype,"pinnedWidthService",void 0),Id([H("columnModel")],i.prototype,"columnModel",void 0),Id([H("focusService")],i.prototype,"focusService",void 0),i}(Ye),UC=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ng=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Lp=function(d){function i(t){var s=d.call(this)||this;return s.headerRowComps={},s.rowCompsList=[],s.pinned=t,s}return UC(i,d),i.prototype.init=function(){var t=this;this.selectAndSetTemplate();var s={addOrRemoveCssClass:function(h,m){return t.addOrRemoveCssClass(h,m)},setCtrls:function(h){return t.setCtrls(h)},setCenterWidth:function(h){return t.eCenterContainer.style.width=h},setContainerTransform:function(h){return t.eCenterContainer.style.transform=h},setPinnedContainerWidth:function(h){var m=t.getGui();m.style.width=h,m.style.maxWidth=h,m.style.minWidth=h}};this.createManagedBean(new WC(this.pinned)).setComp(s,this.getGui())},i.prototype.selectAndSetTemplate=function(){this.setTemplate(this.pinned==fe.PINNED_LEFT?i.PINNED_LEFT_TEMPLATE:this.pinned==fe.PINNED_RIGHT?i.PINNED_RIGHT_TEMPLATE:i.CENTER_TEMPLATE),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()},i.prototype.destroyRowComps=function(){this.setCtrls([])},i.prototype.destroyRowComp=function(t){this.destroyBean(t),this.eRowContainer.removeChild(t.getGui())},i.prototype.setCtrls=function(t){var c,s=this,l=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[],t.forEach(function(m){var S=m.getInstanceId(),R=l[S];delete l[S];var D=R||s.createBean(new OC(m));s.headerRowComps[S]=D,s.rowCompsList.push(D),function(S){var R=S.getGui();R.parentElement!=s.eRowContainer&&s.eRowContainer.appendChild(R),c&&Ss(s.eRowContainer,R,c),c=R}(D)}),Ma(l).forEach(function(m){return s.destroyRowComp(m)})},i.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"/>',i.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"/>',i.CENTER_TEMPLATE='<div class="ag-header-viewport" role="presentation">\n            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>\n        </div>',Ng([He("eCenterContainer")],i.prototype,"eCenterContainer",void 0),Ng([et],i.prototype,"init",null),Ng([Fi],i.prototype,"destroyRowComps",null),i}(hn),Px=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),pa=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return Px(i,d),i.prototype.postConstruct=function(){var t=this,s={addOrRemoveCssClass:function(m,S){return t.addOrRemoveCssClass(m,S)},setHeightAndMinHeight:function(m){t.getGui().style.height=m,t.getGui().style.minHeight=m}};this.createManagedBean(new IC).setComp(s,this.getGui(),this.getFocusableElement());var c=function(m){t.createManagedBean(m),t.appendChild(m)};c(new Lp(fe.PINNED_LEFT)),c(new Lp(null)),c(new Lp(fe.PINNED_RIGHT))},i.TEMPLATE='<div class="ag-header" role="presentation" unselectable="on"/>',function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([et],i.prototype,"postConstruct",null),i}(hn),HM=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Gg=function(){return Gg=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Gg.apply(this,arguments)},Zo=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Ix=function(d){function i(){var s=null!==d&&d.apply(this,arguments)||this;return s.allAdvancedFilters=new Map,s.activeAdvancedFilters=[],s.quickFilter=null,s.quickFilterParts=null,s.processingFilterChange=!1,s}var t;return HM(i,d),t=i,i.prototype.init=function(){this.addManagedListener(this.eventService,$.EVENT_ROW_DATA_CHANGED,this.onNewRowsLoaded.bind(this)),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.quickFilter=this.parseQuickFilter(this.gridOptionsWrapper.getQuickFilterText()),this.setQuickFilterParts(),this.allowShowChangeAfterFilter=this.gridOptionsWrapper.isAllowShowChangeAfterFilter()},i.prototype.setQuickFilterParts=function(){this.quickFilterParts=this.quickFilter?this.quickFilter.split(" "):null},i.prototype.setFilterModel=function(s){var l=this,c=[],h=this.getFilterModel();if(s){var m=og(Object.keys(s));this.allAdvancedFilters.forEach(function(S,R){c.push(l.setModelOnFilterWrapper(S.filterPromise,s[R])),m.delete(R)}),m.forEach(function(S){var R=l.columnModel.getPrimaryColumn(S);if(R)if(R.isFilterAllowed()){var D=l.getOrCreateFilterWrapper(R,"NO_UI");c.push(l.setModelOnFilterWrapper(D.filterPromise,s[S]))}else console.warn("AG-Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+S);else console.warn("AG-Grid: setFilterModel() - no column found for colId: "+S)})}else this.allAdvancedFilters.forEach(function(S){c.push(l.setModelOnFilterWrapper(S.filterPromise,null))});Qr.all(c).then(function(){var S=l.getFilterModel(),R=[];l.allAdvancedFilters.forEach(function(D,L){yt.jsonEquals(h?h[L]:null,S?S[L]:null)||R.push(D.column)}),R.length>0&&l.onFilterChanged({columns:R})})},i.prototype.setModelOnFilterWrapper=function(s,l){return new Qr(function(c){s.then(function(h){"function"!=typeof h.setModel&&(console.warn("Warning ag-grid - filter missing setModel method, which is needed for setFilterModel"),c()),(h.setModel(l)||Qr.resolve()).then(function(){return c()})})})},i.prototype.getFilterModel=function(){var s={};return this.allAdvancedFilters.forEach(function(l,c){var m=l.filterPromise.resolveNow(null,function(R){return R});if(null==m)return null;if("function"==typeof m.getModel){var S=m.getModel();Fe(S)&&(s[c]=S)}else console.warn("Warning ag-grid - filter API missing getModel method, which is needed for getFilterModel")}),s},i.prototype.isAdvancedFilterPresent=function(){return this.activeAdvancedFilters.length>0},i.prototype.updateActiveFilters=function(){var s=this;this.activeAdvancedFilters.length=0;var l=function(h){return!!h&&(h.isFilterActive?h.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1))};this.allAdvancedFilters.forEach(function(c){if(c.filterPromise.resolveNow(!1,l)){var h=c.filterPromise.resolveNow(null,function(m){return m});s.activeAdvancedFilters.push(h)}})},i.prototype.updateFilterFlagInColumns=function(s,l){this.allAdvancedFilters.forEach(function(c){var h=c.filterPromise.resolveNow(!1,function(m){return m.isFilterActive()});c.column.setFilterActive(h,s,l)})},i.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.isAdvancedFilterPresent()||this.gridOptionsWrapper.isExternalFilterPresent()},i.prototype.doAdvancedFiltersPass=function(s,l){for(var c=s.data,h=0;h<this.activeAdvancedFilters.length;h++){var m=this.activeAdvancedFilters[h];if(null!=m&&m!==l){if("function"!=typeof m.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!m.doesFilterPass({node:s,data:c}))return!1}}return!0},i.prototype.parseQuickFilter=function(s){return Fe(s)?this.gridOptionsWrapper.isRowModelDefault()?s.toUpperCase():(console.warn("ag-grid: quick filtering only works with the Client-Side Row Model"),null):null},i.prototype.setQuickFilter=function(s){var l=this.parseQuickFilter(s);this.quickFilter!==l&&(this.quickFilter=l,this.setQuickFilterParts(),this.onFilterChanged())},i.prototype.onFilterChanged=function(s){void 0===s&&(s={});var l=s.filterInstance,c=s.additionalEventAttributes,h=s.columns;this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",c),this.allAdvancedFilters.forEach(function(S){!S.filterPromise||S.filterPromise.then(function(R){R&&R!==l&&R.onAnyFilterChanged&&R.onAnyFilterChanged()})});var m={type:$.EVENT_FILTER_CHANGED,api:this.gridApi,columnApi:this.columnApi,columns:h||[]};c&&uo(m,c),this.processingFilterChange=!0,this.eventService.dispatchEvent(m),this.processingFilterChange=!1},i.prototype.isSuppressFlashingCellsBecauseFiltering=function(){return!this.allowShowChangeAfterFilter&&this.processingFilterChange},i.prototype.isQuickFilterPresent=function(){return null!==this.quickFilter},i.prototype.doesRowPassOtherFilters=function(s,l){return this.doesRowPassFilter({rowNode:l,filterInstanceToSkip:s})},i.prototype.doesRowPassQuickFilterNoCache=function(s,l){var c=this;return $t(this.columnModel.getAllColumnsForQuickFilter(),function(m){var S=c.getQuickFilterTextForColumn(m,s);return Fe(S)&&S.indexOf(l)>=0})},i.prototype.doesRowPassQuickFilterCache=function(s,l){return s.quickFilterAggregateText||this.aggregateRowForQuickFilter(s),s.quickFilterAggregateText.indexOf(l)>=0},i.prototype.doesRowPassQuickFilter=function(s){var l=this,c=this.gridOptionsWrapper.isCacheQuickFilter();return nn(this.quickFilterParts,function(h){return c?l.doesRowPassQuickFilterCache(s,h):l.doesRowPassQuickFilterNoCache(s,h)})},i.prototype.doesRowPassFilter=function(s){return!(this.isQuickFilterPresent()&&!this.doesRowPassQuickFilter(s.rowNode)||this.gridOptionsWrapper.isExternalFilterPresent()&&!this.gridOptionsWrapper.doesExternalFilterPass(s.rowNode)||this.isAdvancedFilterPresent()&&!this.doAdvancedFiltersPass(s.rowNode,s.filterInstanceToSkip))},i.prototype.getQuickFilterTextForColumn=function(s,l){var c=this.valueService.getValue(s,l,!0),h=s.getColDef();if(h.getQuickFilterText){var m={value:c,node:l,data:l.data,column:s,colDef:h,context:this.gridOptionsWrapper.getContext()};c=h.getQuickFilterText(m)}return Fe(c)?c.toString().toUpperCase():null},i.prototype.aggregateRowForQuickFilter=function(s){var l=this,c=[];Ut(this.columnModel.getAllColumnsForQuickFilter(),function(m){var S=l.getQuickFilterTextForColumn(m,s);Fe(S)&&c.push(S)}),s.quickFilterAggregateText=c.join(t.QUICK_FILTER_SEPARATOR)},i.prototype.onNewRowsLoaded=function(s){this.allAdvancedFilters.forEach(function(l){l.filterPromise.then(function(c){c.onNewRowsLoaded&&c.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(s),this.updateActiveFilters()},i.prototype.createValueGetter=function(s){var l=this;return function(c){return l.valueService.getValue(s,c,!0)}},i.prototype.getFilterComponent=function(s,l,c){if(void 0===c&&(c=!0),c)return this.getOrCreateFilterWrapper(s,l).filterPromise;var h=this.cachedFilter(s);return h?h.filterPromise:null},i.prototype.isFilterActive=function(s){var l=this.cachedFilter(s);return!!l&&l.filterPromise.resolveNow(!1,function(c){return c.isFilterActive()})},i.prototype.getOrCreateFilterWrapper=function(s,l){var c=this.cachedFilter(s);return c?"NO_UI"!==l&&this.putIntoGui(c,l):(c=this.createFilterWrapper(s,l),this.allAdvancedFilters.set(s.getColId(),c)),c},i.prototype.cachedFilter=function(s){return this.allAdvancedFilters.get(s.getColId())},i.prototype.createFilterInstance=function(s,l){var S,c=this,h=Kt.isRegistered(Y.GXE.SetFilterModule)?"agSetColumnFilter":"agTextColumnFilter",m=s.getColDef(),R=Gg(Gg({},this.createFilterParams(s,m,l)),{filterModifiedCallback:function(){c.eventService.dispatchEvent({type:$.EVENT_FILTER_MODIFIED,api:c.gridApi,columnApi:c.columnApi,column:s,filterInstance:S})},filterChangedCallback:function(K){return c.onFilterChanged({filterInstance:S,additionalEventAttributes:K,columns:[s]})},doesRowPassOtherFilter:function(K){return c.doesRowPassOtherFilters(S,K)}}),D=this.userComponentFactory.getFilterDetails(m,R,h);if(!D)return null;var L=D.newAgStackInstance();return L&&L.then(function(U){return S=U}),L},i.prototype.createFilterParams=function(s,l,c){void 0===c&&(c=null);var h={api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),column:s,colDef:hs(l),rowModel:this.rowModel,filterChangedCallback:function(){},filterModifiedCallback:function(){},valueGetter:this.createValueGetter(s),context:this.gridOptionsWrapper.getContext(),doesRowPassOtherFilter:function(){return!0}};return c&&(h.$scope=c),h},i.prototype.createFilterWrapper=function(s,l){var c={column:s,filterPromise:null,scope:null,compiledElement:null,guiPromise:Qr.resolve(null)};return c.scope=this.gridOptionsWrapper.isAngularCompileFilters()?this.$scope.$new():null,c.filterPromise=this.createFilterInstance(s,c.scope),c.filterPromise&&this.putIntoGui(c,l),c},i.prototype.putIntoGui=function(s,l){var c=this,h=document.createElement("div");h.className="ag-filter",s.guiPromise=new Qr(function(m){s.filterPromise.then(function(S){var R=S.getGui();if(Fe(R)||console.warn("getGui method from filter returned "+R+", it should be a DOM element or an HTML template string."),"string"==typeof R&&(R=ca(R)),h.appendChild(R),s.scope){var D=c.$compile(h)(s.scope);s.compiledElement=D,window.setTimeout(function(){return s.scope.$apply()},0)}m(h),c.eventService.dispatchEvent({type:$.EVENT_FILTER_OPENED,column:s.column,source:l,eGui:h,api:c.gridApi,columnApi:c.columnApi})})})},i.prototype.onNewColumnsLoaded=function(){var s=this,l=!1,c=[];this.allAdvancedFilters.forEach(function(h){!s.columnModel.getPrimaryColumn(h.column)&&(l=!0,c.push(h.column),s.disposeFilterWrapper(h,"filterDestroyed"))}),l&&this.onFilterChanged({columns:c})},i.prototype.destroyFilter=function(s,l){void 0===l&&(l="api");var c=this.allAdvancedFilters.get(s.getColId());c&&(this.disposeFilterWrapper(c,l),this.onFilterChanged({columns:[s]}))},i.prototype.disposeFilterWrapper=function(s,l){var c=this;s.filterPromise.then(function(h){(h.setModel(null)||Qr.resolve()).then(function(){c.getContext().destroyBean(h),s.column.setFilterActive(!1,l),s.scope&&(s.compiledElement&&s.compiledElement.remove(),s.scope.$destroy()),c.allAdvancedFilters.delete(s.column.getColId())})})},i.prototype.destroy=function(){var s=this;d.prototype.destroy.call(this),this.allAdvancedFilters.forEach(function(l){return s.disposeFilterWrapper(l,"filterDestroyed")})},i.QUICK_FILTER_SEPARATOR="\n",Zo([H("$compile")],i.prototype,"$compile",void 0),Zo([H("$scope")],i.prototype,"$scope",void 0),Zo([H("valueService")],i.prototype,"valueService",void 0),Zo([H("columnModel")],i.prototype,"columnModel",void 0),Zo([H("rowModel")],i.prototype,"rowModel",void 0),Zo([H("columnApi")],i.prototype,"columnApi",void 0),Zo([H("gridApi")],i.prototype,"gridApi",void 0),Zo([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Zo([et],i.prototype,"init",null),Zo([Fi],i.prototype,"destroy",null),t=Zo([vt("filterManager")],i)}(Ye),Mo=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Qu=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Fp=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.initialised=!1,t}return Mo(i,d),i.prototype.init=function(){this.cellExpressions=this.gridOptionsWrapper.isEnableCellExpressions(),this.initialised=!0},i.prototype.getValue=function(t,s,l,c){if(void 0===l&&(l=!1),void 0===c&&(c=!1),this.initialised||this.init(),s){var D,h=t.getColDef(),m=h.field,S=t.getId(),R=s.data,L=s.groupData&&void 0!==s.groupData[S],U=!c&&s.aggData&&void 0!==s.aggData[S];if(l&&h.filterValueGetter?D=this.executeFilterValueGetter(h.filterValueGetter,R,t,s):this.gridOptionsWrapper.isTreeData()&&U?D=s.aggData[S]:this.gridOptionsWrapper.isTreeData()&&h.valueGetter?D=this.executeValueGetter(h.valueGetter,R,t,s):this.gridOptionsWrapper.isTreeData()&&m&&R?D=Nf(R,m,t.isFieldContainsDots()):L?D=s.groupData[S]:U?D=s.aggData[S]:h.valueGetter?D=this.executeValueGetter(h.valueGetter,R,t,s):m&&R&&(D=Nf(R,m,t.isFieldContainsDots())),this.cellExpressions&&"string"==typeof D&&0===D.indexOf("=")){var K=D.substring(1);D=this.executeValueGetter(K,R,t,s)}if(null==D){var ee=this.getOpenedGroup(s,t);if(null!=ee)return ee}return D}},i.prototype.getOpenedGroup=function(t,s){if(this.gridOptionsWrapper.isShowOpenedGroup()&&s.getColDef().showRowGroup)for(var c=s.getColDef().showRowGroup,h=t.parent;null!=h;){if(h.rowGroupColumn&&(!0===c||c===h.rowGroupColumn.getId()))return h.key;h=h.parent}},i.prototype.setValue=function(t,s,l,c){var h=this.columnModel.getPrimaryColumn(s);if(t&&h){we(t.data)&&(t.data={});var m=h.getColDef(),S=m.field,R=m.newValueHandler,D=m.valueSetter;if(we(S)&&we(R)&&we(D))return void console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work");var U,L={node:t,data:t.data,oldValue:this.getValue(h,t),newValue:l,colDef:h.getColDef(),column:h,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};if(L.newValue=l,void 0===(U=R&&Fe(R)?R(L):Fe(D)?this.expressionService.evaluate(D,L):this.setValueUsingField(t.data,S,l,h.isFieldContainsDots()))&&(U=!0),U){t.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),L.newValue=this.getValue(h,t);var K=h.getColDef().onCellValueChanged;"function"==typeof K&&setTimeout(function(){return K(L)},0),this.eventService.dispatchEvent({type:$.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:L.column,api:L.api,columnApi:L.columnApi,colDef:L.colDef,context:L.context,data:t.data,node:t,oldValue:L.oldValue,newValue:L.newValue,value:L.newValue,source:c})}}},i.prototype.setValueUsingField=function(t,s,l,c){if(!s)return!1;if(c)for(var m=s.split("."),S=t;m.length>0&&S;){var R=m.shift();0===m.length?S[R]=l:S=S[R]}else t[s]=l;return!0},i.prototype.executeFilterValueGetter=function(t,s,l,c){var h={data:s,node:c,column:l,colDef:l.getColDef(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),getValue:this.getValueCallback.bind(this,c)};return this.expressionService.evaluate(t,h)},i.prototype.executeValueGetter=function(t,s,l,c){var h=l.getId(),m=this.valueCache.getValue(c,h);if(void 0!==m)return m;var S={data:s,node:c,column:l,colDef:l.getColDef(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),getValue:this.getValueCallback.bind(this,c)},R=this.expressionService.evaluate(t,S);return this.valueCache.setValue(c,h,R),R},i.prototype.getValueCallback=function(t,s){var l=this.columnModel.getPrimaryColumn(s);return l?this.getValue(l,t):null},i.prototype.getKeyForNode=function(t,s){var l=this.getValue(t,s),c=t.getColDef().keyCreator,h=l;return c&&(h=c({value:l,colDef:t.getColDef(),column:t,node:s,data:s.data,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()})),"string"==typeof h||null==h||"[object Object]"===(h=String(h))&&mn(function(){console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")},"getKeyForNode - warn about [object,object]"),h},Qu([H("expressionService")],i.prototype,"expressionService",void 0),Qu([H("columnModel")],i.prototype,"columnModel",void 0),Qu([H("valueCache")],i.prototype,"valueCache",void 0),Qu([et],i.prototype,"init",null),Qu([vt("valueService")],i)}(Ye),Lx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Bg=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c};!function(d){d.AUTO_HEIGHT="ag-layout-auto-height",d.NORMAL="ag-layout-normal",d.PRINT="ag-layout-print"}(Y.LBn||(Y.LBn={}));var el=function(d){function i(t){var s=d.call(this)||this;return s.view=t,s}return Lx(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()},i.prototype.updateLayoutClasses=function(){var t=this.gridOptionsWrapper.getDomLayout(),s={autoHeight:t===fe.DOM_LAYOUT_AUTO_HEIGHT,normal:t===fe.DOM_LAYOUT_NORMAL,print:t===fe.DOM_LAYOUT_PRINT};this.view.updateLayoutClasses(s.autoHeight?Y.LBn.AUTO_HEIGHT:s.print?Y.LBn.PRINT:Y.LBn.NORMAL,s)},Bg([H("gridOptionsWrapper")],i.prototype,"gridOptionsWrapper",void 0),Bg([et],i.prototype,"postConstruct",null),i}(Ye),zC=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),ha=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Hg=function(d){function i(t){var s=d.call(this)||this;return s.scrollLeft=-1,s.nextScrollTop=-1,s.scrollTop=-1,s.eBodyViewport=t,s.resetLastHorizontalScrollElementDebounced=ku(s.resetLastHorizontalScrollElement.bind(s),500),s}return zC(i,d),i.prototype.postConstruct=function(){var t=this;this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(function(s){t.centerRowContainerCon=s.centerRowContainerCtrl,t.onDisplayedColumnsWidthChanged(),t.addScrollListener()})},i.prototype.addScrollListener=function(){var t=this.ctrlsService.getFakeHScrollCtrl();this.addManagedListener(this.centerRowContainerCon.getViewportElement(),"scroll",this.onCenterViewportScroll.bind(this)),this.addManagedListener(t.getViewport(),"scroll",this.onFakeHorizontalScroll.bind(this));var s=this.gridOptionsWrapper.isDebounceVerticalScrollbar()?ku(this.onVerticalScroll.bind(this),100):this.onVerticalScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",s)},i.prototype.onDisplayedColumnsWidthChanged=function(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},i.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(t){void 0===t&&(t=this.centerRowContainerCon.getCenterViewportScrollLeft());var s=this.enableRtl?t:-t,l=this.ctrlsService.getTopCenterRowContainerCtrl(),c=this.ctrlsService.getBottomCenterRowContainerCtrl(),h=this.ctrlsService.getFakeHScrollCtrl();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(s),c.setContainerTranslateX(s),l.setContainerTranslateX(s),rd(this.lastHorizontalScrollElement===this.centerRowContainerCon.getViewportElement()?h.getViewport():this.centerRowContainerCon.getViewportElement(),Math.abs(t),this.enableRtl)},i.prototype.isControllingScroll=function(t){return this.lastHorizontalScrollElement?t===this.lastHorizontalScrollElement:(this.lastHorizontalScrollElement=t,!0)},i.prototype.onFakeHorizontalScroll=function(){var t=this.ctrlsService.getFakeHScrollCtrl().getViewport();!this.isControllingScroll(t)||this.onBodyHorizontalScroll(t)},i.prototype.onCenterViewportScroll=function(){var t=this.centerRowContainerCon.getViewportElement();!this.isControllingScroll(t)||this.onBodyHorizontalScroll(t)},i.prototype.onBodyHorizontalScroll=function(t){var s=this.centerRowContainerCon.getViewportElement();this.shouldBlockScrollUpdate("horizontal",s.scrollLeft,!0)||(this.doHorizontalScroll(Math.round(nd(t,this.enableRtl))),this.resetLastHorizontalScrollElementDebounced())},i.prototype.onVerticalScroll=function(){var t=this.eBodyViewport.scrollTop;this.shouldBlockScrollUpdate("vertical",t,!0)||(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,this.gridOptionsWrapper.isSuppressAnimationFrame()?(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()):this.animationFrameService.schedule())},i.prototype.resetLastHorizontalScrollElement=function(){this.lastHorizontalScrollElement=null},i.prototype.doHorizontalScroll=function(t){var l=nd(this.ctrlsService.getFakeHScrollCtrl().getViewport(),this.enableRtl);this.scrollLeft===t&&t===l||(this.scrollLeft=t,this.fireScrollEvent("horizontal"),this.horizontallyScrollHeaderCenterAndFloatingCenter(t),this.onHorizontalViewportChanged())},i.prototype.fireScrollEvent=function(t){var s=this,l={type:$.EVENT_BODY_SCROLL,api:this.gridApi,columnApi:this.columnApi,direction:t,left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(l),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(function(){var c=ii({},l,{type:$.EVENT_BODY_SCROLL_END});s.eventService.dispatchEvent(c)},100)},i.prototype.shouldBlockScrollUpdate=function(t,s,l){if(void 0===l&&(l=!1),l&&!nu())return!1;if("vertical"===t){var c=Fl(this.eBodyViewport);if(s<0||s+c>this.eBodyViewport.scrollHeight)return!0}if("horizontal"===t){var m=this.centerRowContainerCon.getCenterWidth(),S=this.centerRowContainerCon.getViewportElement().scrollWidth;if(this.enableRtl&&Er()){if(s>0)return!0}else if(s<0)return!0;if(Math.abs(s)+m>S)return!0}return!1},i.prototype.redrawRowsAfterScroll=function(){this.fireScrollEvent("vertical")},i.prototype.onHorizontalViewportChanged=function(){this.centerRowContainerCon.onHorizontalViewportChanged()},i.prototype.checkScrollLeft=function(){this.scrollLeft!==this.centerRowContainerCon.getCenterViewportScrollLeft()&&this.onBodyHorizontalScroll(this.centerRowContainerCon.getViewportElement())},i.prototype.executeAnimationFrameScroll=function(){var t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),t},i.prototype.setHorizontalScrollPosition=function(t){var l=this.centerRowContainerCon.getViewportElement().scrollWidth-this.centerRowContainerCon.getCenterWidth();this.shouldBlockScrollUpdate("horizontal",t)&&(t=this.enableRtl&&Er()?t>0?0:l:Math.min(Math.max(t,0),l)),rd(this.centerRowContainerCon.getViewportElement(),Math.abs(t),this.enableRtl),this.doHorizontalScroll(t)},i.prototype.setVerticalScrollPosition=function(t){this.eBodyViewport.scrollTop=t},i.prototype.getVScrollPosition=function(){return{top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight}},i.prototype.getHScrollPosition=function(){return this.centerRowContainerCon.getHScrollPosition()},i.prototype.isHorizontalScrollShowing=function(){return this.centerRowContainerCon.isHorizontalScrollShowing()},i.prototype.scrollHorizontally=function(t){var s=this.centerRowContainerCon.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(s+t),this.centerRowContainerCon.getViewportElement().scrollLeft-s},i.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},i.prototype.ensureNodeVisible=function(t,s){void 0===s&&(s=null);for(var l=this.rowModel.getRowCount(),c="function"==typeof t,h=-1,m=0;m<l;m++){var S=this.rowModel.getRow(m);if(c){if(t(S)){h=m;break}}else if(t===S||t===S.data){h=m;break}}h>=0&&this.ensureIndexVisible(h,s)},i.prototype.ensureIndexVisible=function(t,s){if(this.gridOptionsWrapper.getDomLayout()!==fe.DOM_LAYOUT_PRINT){var l=this.paginationProxy.getRowCount();if("number"!=typeof t||t<0||t>=l)return void console.warn("invalid row index for ensureIndexVisible: "+t);this.gridOptionsWrapper.isPagination()&&!this.gridOptionsWrapper.isSuppressPaginationPanel()||this.paginationProxy.goToPageWithIndex(t);var S,m=this.paginationProxy.getRow(t);do{var R=m.rowTop,D=m.rowHeight,L=this.paginationProxy.getPixelOffset(),U=m.rowTop-L,K=U+m.rowHeight,ee=this.getVScrollPosition(),ae=this.heightScaler.getDivStretchOffset(),Te=ee.top+ae,Ve=ee.bottom+ae,We=Ve-Te,Pe=this.heightScaler.getScrollPositionForPixel(U),Qe=this.heightScaler.getScrollPositionForPixel(K-We),ye=Math.min((Pe+Qe)/2,U),_n=null;"top"===s?_n=Pe:"bottom"===s?_n=Qe:"middle"===s?_n=ye:Te>U?_n=Pe:Ve<K&&(_n=Qe),null!==_n&&(this.eBodyViewport.scrollTop=_n,this.rowRenderer.redrawAfterScroll()),S=R!==m.rowTop||D!==m.rowHeight}while(S);this.animationFrameService.flushAllFrames()}},i.prototype.ensureColumnVisible=function(t){var s=this.columnModel.getGridColumn(t);if(s&&!s.isPinned()&&this.columnModel.isColumnDisplayed(s)){var R,D,l=s.getLeft(),c=l+s.getActualWidth(),h=this.centerRowContainerCon.getCenterWidth(),m=this.centerRowContainerCon.getCenterViewportScrollLeft(),S=this.columnModel.getBodyContainerWidth();this.enableRtl?(R=S-m-h,D=S-m):(R=m,D=h+m);var L=R>l,U=D<c,K=h<s.getActualWidth(),ee=L||K;(ee||U)&&this.centerRowContainerCon.setCenterViewportScrollLeft(this.enableRtl?ee?S-h-l:S-c:ee?l:c-h),this.centerRowContainerCon.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}},ha([H("ctrlsService")],i.prototype,"ctrlsService",void 0),ha([H("animationFrameService")],i.prototype,"animationFrameService",void 0),ha([H("columnApi")],i.prototype,"columnApi",void 0),ha([H("gridApi")],i.prototype,"gridApi",void 0),ha([H("paginationProxy")],i.prototype,"paginationProxy",void 0),ha([H("rowModel")],i.prototype,"rowModel",void 0),ha([H("rowContainerHeightService")],i.prototype,"heightScaler",void 0),ha([H("rowRenderer")],i.prototype,"rowRenderer",void 0),ha([H("columnModel")],i.prototype,"columnModel",void 0),ha([et],i.prototype,"postConstruct",null),i}(Ye),kp=function(){function d(i){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=i.scrollContainer,this.scrollHorizontally=-1!==i.scrollAxis.indexOf("x"),this.scrollVertically=-1!==i.scrollAxis.indexOf("y"),this.scrollByTick=null!=i.scrollByTick?i.scrollByTick:20,i.onScrollCallback&&(this.onScrollCallback=i.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=i.getVerticalPosition,this.setVerticalPosition=i.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=i.getHorizontalPosition,this.setHorizontalPosition=i.setHorizontalPosition),this.shouldSkipVerticalScroll=i.shouldSkipVerticalScroll||function(){return!1},this.shouldSkipHorizontalScroll=i.shouldSkipHorizontalScroll||function(){return!1}}return d.prototype.check=function(i,t){void 0===t&&(t=!1);var s=t||this.shouldSkipVerticalScroll();if(!s||!this.shouldSkipHorizontalScroll()){var l=this.scrollContainer.getBoundingClientRect(),c=this.scrollByTick;this.tickLeft=i.clientX<l.left+c,this.tickRight=i.clientX>l.right-c,this.tickUp=i.clientY<l.top+c&&!s,this.tickDown=i.clientY>l.bottom-c&&!s,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}},d.prototype.ensureTickingStarted=function(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)},d.prototype.doTick=function(){var i;if(this.tickCount++,i=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){var t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-i),this.tickDown&&this.setVerticalPosition(t+i)}if(this.scrollHorizontally){var s=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(s-i),this.tickRight&&this.setHorizontalPosition(s+i)}this.onScrollCallback&&this.onScrollCallback()},d.prototype.ensureCleared=function(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)},d}(),jC=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),qC=function(){return qC=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},qC.apply(this,arguments)},bi=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Np=function(){for(var d=0,i=0,t=arguments.length;i<t;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<t;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s},KC=function(d){function i(t){var s=d.call(this)||this;return s.isMultiRowDrag=!1,s.isGridSorted=!1,s.isGridFiltered=!1,s.isRowGroupActive=!1,s.eContainer=t,s}return jC(i,d),i.prototype.postConstruct=function(){var t=this;this.gridOptionsWrapper.isRowModelDefault()&&(this.clientSideRowModel=this.rowModel);var s=function(){t.onSortChanged(),t.onFilterChanged(),t.onRowGroupChanged()};this.addManagedListener(this.eventService,$.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_MODEL_UPDATED,function(){s()}),s(),this.ctrlsService.whenReady(function(){var l=t.ctrlsService.getGridBodyCtrl();t.autoScrollService=new kp({scrollContainer:l.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:function(){return l.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(h){return l.getScrollFeature().setVerticalScrollPosition(h)},onScrollCallback:function(){t.onDragging(t.lastDraggingEvent)}})})},i.prototype.onSortChanged=function(){this.isGridSorted=this.sortController.isSortActive()},i.prototype.onFilterChanged=function(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()},i.prototype.onRowGroupChanged=function(){var t=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!ni(t)},i.prototype.getContainer=function(){return this.eContainer},i.prototype.isInterestedIn=function(t){return t===Y.rvo.RowDrag},i.prototype.getIconName=function(){return this.gridOptionsWrapper.isRowDragManaged()&&this.shouldPreventRowMove()?Vi.ICON_NOT_ALLOWED:Vi.ICON_MOVE},i.prototype.shouldPreventRowMove=function(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive},i.prototype.getRowNodes=function(t){if(!this.isFromThisGrid(t))return t.dragItem.rowNodes||[];var s=this.gridOptionsWrapper.isRowDragMultiRow(),l=this.selectionService.getSelectedNodes(),c=t.dragItem.rowNode;return s&&-1!==l.indexOf(c)?(this.isMultiRowDrag=!0,Np(l)):(this.isMultiRowDrag=!1,[c])},i.prototype.onDragEnter=function(t){this.dispatchGridEvent($.EVENT_ROW_DRAG_ENTER,t),this.getRowNodes(t).forEach(function(s){s.setDragging(!0)}),this.onEnterOrDragging(t)},i.prototype.onDragging=function(t){this.onEnterOrDragging(t)},i.prototype.isFromThisGrid=function(t){return t.dragSource.dragSourceDomDataKey===this.gridOptionsWrapper.getDomDataKey()},i.prototype.isDropZoneWithinThisGrid=function(t){return!this.ctrlsService.getGridBodyCtrl().getGui().contains(t.dropZoneTarget)},i.prototype.onEnterOrDragging=function(t){this.dispatchGridEvent($.EVENT_ROW_DRAG_MOVE,t),this.lastDraggingEvent=t;var s=this.mouseEventService.getNormalisedPosition(t).y;this.gridOptionsWrapper.isRowDragManaged()&&this.doManagedDrag(t,s),this.autoScrollService.check(t.event)},i.prototype.doManagedDrag=function(t,s){var c,l=this,h=this.isFromThisGrid(t);h?(c=[t.dragItem.rowNode],this.isMultiRowDrag&&(c=Np(this.selectionService.getSelectedNodes()).sort(function(S,R){return l.getRowIndexNumber(S)-l.getRowIndexNumber(R)})),t.dragItem.rowNodes=c):c=t.dragItem.rowNodes,this.gridOptionsWrapper.isRowDragManaged()&&this.shouldPreventRowMove()||(this.gridOptionsWrapper.isSuppressMoveWhenRowDragging()||!h?this.isDropZoneWithinThisGrid(t)||this.clientSideRowModel.highlightRowAtPixel(c[0],s):this.moveRows(c,s))},i.prototype.getRowIndexNumber=function(t){return parseInt(jn(t.getRowIndexString().split("-")),10)},i.prototype.moveRowAndClearHighlight=function(t){var s=this,l=this.clientSideRowModel.getLastHighlightedRowNode(),c=l&&l.highlighted===Y.oh5.Below,h=this.mouseEventService.getNormalisedPosition(t).y,m=t.dragItem.rowNodes,S=c?1:0;if(this.isFromThisGrid(t))m.forEach(function(L){L.rowTop<h&&(S-=1)}),this.moveRows(m,h,S);else{var R=this.gridOptionsWrapper.getRowNodeIdFunc(),D=this.clientSideRowModel.getRowIndexAtPixel(h)+1;this.clientSideRowModel.getHighlightPosition(h)===Y.oh5.Above&&D--,this.clientSideRowModel.updateRowData({add:m.map(function(L){return L.data}).filter(function(L){return!s.clientSideRowModel.getRowNode(R?R(L):L.id)}),addIndex:D})}this.clearRowHighlight()},i.prototype.clearRowHighlight=function(){this.clientSideRowModel.highlightRowAtPixel(null)},i.prototype.moveRows=function(t,s,l){void 0===l&&(l=0),this.clientSideRowModel.ensureRowsAtPixel(t,s,l)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())},i.prototype.addRowDropZone=function(t){var s=this;if(t.getContainer())if(this.dragAndDropService.findExternalZone(t))console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");else{var l={getContainer:t.getContainer};t.fromGrid?(t.fromGrid=void 0,l=t):(t.onDragEnter&&(l.onDragEnter=function(c){t.onDragEnter(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_ENTER,c))}),t.onDragLeave&&(l.onDragLeave=function(c){t.onDragLeave(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_LEAVE,c))}),t.onDragging&&(l.onDragging=function(c){t.onDragging(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_MOVE,c))}),t.onDragStop&&(l.onDragStop=function(c){t.onDragStop(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_END,c))})),this.dragAndDropService.addDropTarget(qC({isInterestedIn:function(h){return h===Y.rvo.RowDrag},getIconName:function(){return Vi.ICON_MOVE},external:!0},l))}else mn(function(){return console.warn("AG Grid: addRowDropZone - A container target needs to be provided")},"add-drop-zone-empty-target")},i.prototype.getRowDropZone=function(t){var s=this,l=this.getContainer.bind(this),c=this.onDragEnter.bind(this),h=this.onDragLeave.bind(this),m=this.onDragging.bind(this),S=this.onDragStop.bind(this);return t?{getContainer:l,onDragEnter:t.onDragEnter?function(R){c(R),t.onDragEnter(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_ENTER,R))}:c,onDragLeave:t.onDragLeave?function(R){h(R),t.onDragLeave(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_LEAVE,R))}:h,onDragging:t.onDragging?function(R){m(R),t.onDragging(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_MOVE,R))}:m,onDragStop:t.onDragStop?function(R){S(R),t.onDragStop(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_END,R))}:S,fromGrid:!0}:{getContainer:l,onDragEnter:c,onDragLeave:h,onDragging:m,onDragStop:S,fromGrid:!0}},i.prototype.draggingToRowDragEvent=function(t,s){var m,S,l=this.mouseEventService.getNormalisedPosition(s).y,h=-1;switch(l>this.paginationProxy.getCurrentPageHeight()||(h=this.rowModel.getRowIndexAtPixel(l),m=this.rowModel.getRow(h)),s.vDirection){case Y.HO_.Down:S="down";break;case Y.HO_.Up:S="up";break;default:S=null}return{type:t,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),event:s.event,node:s.dragItem.rowNode,nodes:s.dragItem.rowNodes,overIndex:h,overNode:m,y:l,vDirection:S}},i.prototype.dispatchGridEvent=function(t,s){var l=this.draggingToRowDragEvent(t,s);this.eventService.dispatchEvent(l)},i.prototype.onDragLeave=function(t){this.dispatchGridEvent($.EVENT_ROW_DRAG_LEAVE,t),this.stopDragging(t),this.gridOptionsWrapper.isRowDragManaged()&&this.clearRowHighlight(),this.isFromThisGrid(t)&&(this.isMultiRowDrag=!1)},i.prototype.onDragStop=function(t){this.dispatchGridEvent($.EVENT_ROW_DRAG_END,t),this.stopDragging(t),this.gridOptionsWrapper.isRowDragManaged()&&(this.gridOptionsWrapper.isSuppressMoveWhenRowDragging()||!this.isFromThisGrid(t))&&!this.isDropZoneWithinThisGrid(t)&&this.moveRowAndClearHighlight(t)},i.prototype.stopDragging=function(t){this.autoScrollService.ensureCleared(),this.getRowNodes(t).forEach(function(s){s.setDragging(!1)})},bi([H("dragAndDropService")],i.prototype,"dragAndDropService",void 0),bi([H("rowModel")],i.prototype,"rowModel",void 0),bi([H("paginationProxy")],i.prototype,"paginationProxy",void 0),bi([H("columnModel")],i.prototype,"columnModel",void 0),bi([H("focusService")],i.prototype,"focusService",void 0),bi([H("sortController")],i.prototype,"sortController",void 0),bi([H("filterManager")],i.prototype,"filterManager",void 0),bi([H("selectionService")],i.prototype,"selectionService",void 0),bi([H("mouseEventService")],i.prototype,"mouseEventService",void 0),bi([H("ctrlsService")],i.prototype,"ctrlsService",void 0),bi([Gn("rangeService")],i.prototype,"rangeService",void 0),bi([et],i.prototype,"postConstruct",null),i}(Ye),Fx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),eo=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c};!function(d){d.ANIMATION_ON="ag-row-animation",d.ANIMATION_OFF="ag-row-no-animation"}(Y.SJN||(Y.SJN={}));var YC="ag-selectable",$C="ag-force-vertical-scroll",XC="ag-column-moving",JC=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.angularApplyTriggered=!1,t}return Fx(i,d),i.prototype.getScrollFeature=function(){return this.bodyScrollFeature},i.prototype.getBodyViewportElement=function(){return this.eBodyViewport},i.prototype.setComp=function(t,s,l,c,h){this.comp=t,this.eGridBody=s,this.eBodyViewport=l,this.eTop=c,this.eBottom=h,this.setCellTextSelection(this.gridOptionsWrapper.isEnableCellTextSelect()),this.createManagedBean(new el(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Hg(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.ctrlsService.registerGridBodyCtrl(this),this.addEventListeners(),this.addFocusListeners([c,l,h]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.$scope&&this.addAngularApplyCheck()},i.prototype.getComp=function(){return this.comp},i.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,$.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_PINNED_ROW_DATA_CHANGED,this.setFloatingHeights.bind(this))},i.prototype.addFocusListeners=function(t){var s=this;t.forEach(function(l){s.addManagedListener(l,"focusin",function(){At(l,"ag-has-focus")}),s.addManagedListener(l,"focusout",function(c){l.contains(c.relatedTarget)||_i(l,"ag-has-focus")})})},i.prototype.setColumnMovingCss=function(t){this.comp.setColumnMovingCss(t?XC:null,t)},i.prototype.setCellTextSelection=function(t){void 0===t&&(t=!1),this.comp.setCellSelectableCss(t?YC:null,t)},i.prototype.onScrollVisibilityChanged=function(){var t=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(t)},i.prototype.onGridColumnsChanged=function(){var t=this.columnModel.getAllGridColumns();this.comp.setColumnCount(t?t.length:0)},i.prototype.disableBrowserDragging=function(){this.addManagedListener(this.eGridBody,"dragstart",function(t){if(t.target instanceof HTMLImageElement)return t.preventDefault(),!1})},i.prototype.addStopEditingWhenGridLosesFocus=function(){var t=this;if(this.gridOptionsWrapper.isStopEditingWhenCellsLoseFocus()){var s=function(h){var m=h.relatedTarget;if(null!==Yf(m)){var S=l.some(function(D){return D.contains(m)})&&t.mouseEventService.isElementInThisGrid(m);if(!S){var R=t.popupService;S=R.getActivePopups().some(function(D){return D.contains(m)})||R.isElementWithinCustomPopup(m)}S||t.rowRenderer.stopEditing()}else t.rowRenderer.stopEditing()},l=[this.eBodyViewport,this.eBottom,this.eTop];l.forEach(function(c){return t.addManagedListener(c,"focusout",s)})}},i.prototype.updateRowCount=function(){var t=this.headerNavigationService.getHeaderRowCount(),s=this.paginationProxy.getType(),l=-1;s===fe.ROW_MODEL_TYPE_CLIENT_SIDE&&(l=0,this.paginationProxy.forEachNode(function(h){h.group||l++})),this.comp.setRowCount(-1===l?-1:t+l)},i.prototype.registerBodyViewportResizeListener=function(t){this.comp.registerBodyViewportResizeListener(t)},i.prototype.setVerticalScrollPaddingVisible=function(t){this.comp.setPinnedTopBottomOverflowY(t?"scroll":"hidden")},i.prototype.isVerticalScrollShowing=function(){var t=this.gridOptionsWrapper.isAlwaysShowVerticalScroll();return this.comp.setAlwaysVerticalScrollClass(t?$C:null,t),t||ru(this.eBodyViewport)},i.prototype.setupRowAnimationCssClass=function(){var t=this,s=function(){var c=t.gridOptionsWrapper.isAnimateRows()&&!t.rowContainerHeightService.isStretching();t.comp.setRowAnimationCssOnBodyViewport(c?Y.SJN.ANIMATION_ON:Y.SJN.ANIMATION_OFF,c)};s(),this.addManagedListener(this.eventService,$.EVENT_HEIGHT_SCALE_CHANGED,s)},i.prototype.getGridBodyElement=function(){return this.eGridBody},i.prototype.addBodyViewportListener=function(){var t=this;this.addManagedListener(this.eBodyViewport,"contextmenu",function(c){t.gridOptionsWrapper.isPreventDefaultOnContextMenu()&&c.preventDefault();var h=Gu(c);(h===t.eBodyViewport||h===t.ctrlsService.getCenterRowContainerCtrl().getViewportElement())&&t.contextMenuFactory&&t.contextMenuFactory.onContextMenu(c,null,null,null,null,t.eGridBody)}),this.addManagedListener(this.eBodyViewport,"wheel",this.onWheel.bind(this))},i.prototype.onWheel=function(t){!this.gridOptionsWrapper.isSuppressScrollWhenPopupsAreOpen()||this.popupService.hasAnchoredPopup()&&t.preventDefault()},i.prototype.getGui=function(){return this.eGridBody},i.prototype.scrollVertically=function(t){var s=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(s+t),this.eBodyViewport.scrollTop-s},i.prototype.addRowDragListener=function(){this.rowDragFeature=this.createManagedBean(new KC(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)},i.prototype.getRowDragFeature=function(){return this.rowDragFeature},i.prototype.setFloatingHeights=function(){var t=this.pinnedRowModel,s=t.getPinnedTopTotalHeight();s&&(s+=1);var l=t.getPinnedBottomTotalHeight();l&&(l+=1),this.comp.setTopHeight(s),this.comp.setBottomHeight(l),this.comp.setTopDisplay(s?"inherit":"none"),this.comp.setBottomDisplay(l?"inherit":"none")},i.prototype.sizeColumnsToFit=function(t){var s=this,c=this.isVerticalScrollShowing()&&!Ki()?this.gridOptionsWrapper.getScrollbarWidth():0,m=Wo(this.eBodyViewport)-c;m>0?this.columnModel.sizeColumnsToFit(m,"sizeColumnsToFit"):void 0===t?window.setTimeout(function(){s.sizeColumnsToFit(100)},0):100===t?window.setTimeout(function(){s.sizeColumnsToFit(500)},100):500===t?window.setTimeout(function(){s.sizeColumnsToFit(-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},i.prototype.addScrollEventListener=function(t){this.eBodyViewport.addEventListener("scroll",t)},i.prototype.removeScrollEventListener=function(t){this.eBodyViewport.removeEventListener("scroll",t)},i.prototype.requestAngularApply=function(){var t=this;this.angularApplyTriggered||(this.angularApplyTriggered=!0,window.setTimeout(function(){t.angularApplyTriggered=!1,t.$scope.$apply()},0))},i.prototype.addAngularApplyCheck=function(){var t=this;this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){return t.requestAngularApply()}),this.addManagedListener(this.eventService,$.EVENT_VIRTUAL_COLUMNS_CHANGED,function(){return t.requestAngularApply()})},eo([H("rowContainerHeightService")],i.prototype,"rowContainerHeightService",void 0),eo([H("ctrlsService")],i.prototype,"ctrlsService",void 0),eo([H("columnModel")],i.prototype,"columnModel",void 0),eo([H("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),eo([Gn("contextMenuFactory")],i.prototype,"contextMenuFactory",void 0),eo([H("headerNavigationService")],i.prototype,"headerNavigationService",void 0),eo([H("paginationProxy")],i.prototype,"paginationProxy",void 0),eo([H("dragAndDropService")],i.prototype,"dragAndDropService",void 0),eo([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),eo([H("rowRenderer")],i.prototype,"rowRenderer",void 0),eo([H("popupService")],i.prototype,"popupService",void 0),eo([H("mouseEventService")],i.prototype,"mouseEventService",void 0),eo([H("$scope")],i.prototype,"$scope",void 0),i}(Ye),kx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Oo=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},ZC=function(d){function i(t){var s=d.call(this)||this;return s.element=t,s}return kx(i,d),i.prototype.postConstruct=function(){this.addMouseListeners(),this.mockContextMenuForIPad(),this.addKeyboardEvents()},i.prototype.addKeyboardEvents=function(){var t=this;["keydown","keypress"].forEach(function(l){var c=t.processKeyboardEvent.bind(t,l);t.addManagedListener(t.element,l,c)})},i.prototype.addMouseListeners=function(){var t=this;["dblclick","contextmenu","mouseover","mouseout","click",Fv("touchstart")?"touchstart":"mousedown"].forEach(function(c){var h=t.processMouseEvent.bind(t,c);t.addManagedListener(t.element,c,h)})},i.prototype.processMouseEvent=function(t,s){if(this.mouseEventService.isEventFromThisGrid(s)&&!Oa(s)){var l=this.getRowForEvent(s),c=this.mouseEventService.getRenderedCellForEvent(s);"contextmenu"===t?this.handleContextMenuMouseEvent(s,null,l,c):(c&&c.onMouseEvent(t,s),l&&l.onMouseEvent(t,s))}},i.prototype.mockContextMenuForIPad=function(){var t=this;if(nu()){var s=new Do(this.element);this.addManagedListener(s,Do.EVENT_LONG_TAP,function(h){var m=t.getRowForEvent(h.touchEvent),S=t.mouseEventService.getRenderedCellForEvent(h.touchEvent);t.handleContextMenuMouseEvent(null,h.touchEvent,m,S)}),this.addDestroyFunc(function(){return s.destroy()})}},i.prototype.getRowForEvent=function(t){for(var s=Gu(t);s;){var l=this.gridOptionsWrapper.getDomData(s,lu.DOM_DATA_KEY_ROW_CTRL);if(l)return l;s=s.parentElement}return null},i.prototype.handleContextMenuMouseEvent=function(t,s,l,c){var h=l?l.getRowNode():null,m=c?c.getColumn():null,S=null;m&&(c.dispatchCellContextMenuEvent(t||s),S=this.valueService.getValue(m,h));var D=this.ctrlsService.getGridBodyCtrl(),L=c?c.getGui():D.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(t,s,h,m,S,L)},i.prototype.processKeyboardEvent=function(t,s){var l=Vf(this.gridOptionsWrapper,s,Qi.DOM_DATA_KEY_CELL_CTRL),c=Vf(this.gridOptionsWrapper,s,lu.DOM_DATA_KEY_ROW_CTRL);s.defaultPrevented||(l?this.processCellKeyboardEvent(l,t,s):c&&c.isFullWidth()&&this.processFullWidthRowKeyboardEvent(c,t,s))},i.prototype.processCellKeyboardEvent=function(t,s,l){var c=t.getRowNode(),h=t.getColumn(),m=t.isEditing();if(!$i(this.gridOptionsWrapper,l,c,h,m))switch(s){case"keydown":!m&&this.navigationService.handlePageScrollingKey(l)||t.onKeyDown(l),this.doGridOperations(l,t.isEditing());break;case"keypress":t.onKeyPress(l)}if("keydown"===s){var D=t.createEvent(l,$.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(D)}if("keypress"===s){var L=t.createEvent(l,$.EVENT_CELL_KEY_PRESS);this.eventService.dispatchEvent(L)}},i.prototype.processFullWidthRowKeyboardEvent=function(t,s,l){var c=t.getRowNode(),h=this.focusService.getFocusedCell();if(!$i(this.gridOptionsWrapper,l,c,h&&h.column,!1)&&"keydown"===s)switch(l.keyCode){case Xe.UP:case Xe.DOWN:t.onKeyboardNavigate(l);break;case Xe.TAB:t.onTabKeyDown(l)}if("keydown"===s){var D=t.createRowEvent($.EVENT_CELL_KEY_DOWN,l);this.eventService.dispatchEvent(D)}if("keypress"===s){var L=t.createRowEvent($.EVENT_CELL_KEY_PRESS,l);this.eventService.dispatchEvent(L)}},i.prototype.doGridOperations=function(t,s){if((t.ctrlKey||t.metaKey)&&!s&&this.mouseEventService.isEventFromThisGrid(t))switch(t.which){case Xe.A:return this.onCtrlAndA(t);case Xe.C:return this.onCtrlAndC(t);case Xe.V:return this.onCtrlAndV();case Xe.D:return this.onCtrlAndD(t);case Xe.Z:return t.shiftKey?this.undoRedoService.redo():this.undoRedoService.undo();case Xe.Y:return this.undoRedoService.redo()}},i.prototype.onCtrlAndA=function(t){var s=this,l=s.pinnedRowModel,h=s.rangeService,m=fe.PINNED_BOTTOM,S=fe.PINNED_TOP;if(h&&s.paginationProxy.isRowsToRender()){var R=[l.isEmpty(S),l.isEmpty(m)],U=R[0]?null:S,K=void 0,ee=void 0;R[1]?(K=null,ee=this.paginationProxy.getRowCount()-1):(K=m,ee=l.getPinnedBottomRowData().length-1);var ae=this.columnModel.getAllDisplayedColumns();if(ni(ae))return;h.setCellRange({rowStartIndex:0,rowStartPinned:U,rowEndIndex:ee,rowEndPinned:K,columnStart:ae[0],columnEnd:jn(ae)})}t.preventDefault()},i.prototype.onCtrlAndC=function(t){!this.clipboardService||this.gridOptionsWrapper.isEnableCellTextSelection()||(this.clipboardService.copyToClipboard(),t.preventDefault())},i.prototype.onCtrlAndV=function(){Kt.isRegistered(Y.GXE.ClipboardModule)&&!this.gridOptionsWrapper.isSuppressClipboardPaste()&&this.clipboardService.pasteFromClipboard()},i.prototype.onCtrlAndD=function(t){Kt.isRegistered(Y.GXE.ClipboardModule)&&!this.gridOptionsWrapper.isSuppressClipboardPaste()&&this.clipboardService.copyRangeDown(),t.preventDefault()},Oo([H("mouseEventService")],i.prototype,"mouseEventService",void 0),Oo([H("valueService")],i.prototype,"valueService",void 0),Oo([Gn("contextMenuFactory")],i.prototype,"contextMenuFactory",void 0),Oo([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Oo([H("navigationService")],i.prototype,"navigationService",void 0),Oo([H("focusService")],i.prototype,"focusService",void 0),Oo([H("undoRedoService")],i.prototype,"undoRedoService",void 0),Oo([H("columnModel")],i.prototype,"columnModel",void 0),Oo([H("paginationProxy")],i.prototype,"paginationProxy",void 0),Oo([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Oo([Gn("rangeService")],i.prototype,"rangeService",void 0),Oo([Gn("clipboardService")],i.prototype,"clipboardService",void 0),Oo([et],i.prototype,"postConstruct",null),i}(Ye),Vg=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),tl=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Wg=function(d){function i(t){var s=d.call(this)||this;return s.centerContainerCon=t,s}return Vg(i,d),i.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(){t.gridBodyCon=t.ctrlsService.getGridBodyCtrl(),t.listenForResize()}),this.addManagedListener(this.eventService,$.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this))},i.prototype.listenForResize=function(){var t=this.onCenterViewportResized.bind(this);this.centerContainerCon.registerViewportResizeListener(t),this.gridBodyCon.registerBodyViewportResizeListener(t)},i.prototype.onScrollbarWidthChanged=function(){this.checkViewportAndScrolls()},i.prototype.onCenterViewportResized=function(){if(this.centerContainerCon.isViewportVisible()){this.checkViewportAndScrolls();var t=this.centerContainerCon.getCenterWidth();t!==this.centerWidth&&(this.centerWidth=t,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0},i.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCon.getScrollFeature().checkScrollLeft()},i.prototype.getBodyHeight=function(){return this.bodyHeight},i.prototype.checkBodyHeight=function(){var s=Fl(this.gridBodyCon.getBodyViewportElement());this.bodyHeight!==s&&(this.bodyHeight=s,this.eventService.dispatchEvent({type:$.EVENT_BODY_HEIGHT_CHANGED,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.updateScrollVisibleService=function(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)},i.prototype.updateScrollVisibleServiceImpl=function(){var t={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCon.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(t),this.gridBodyCon.setVerticalScrollPaddingVisible(t.verticalScrollShowing)},i.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsWrapper.isAlwaysShowHorizontalScroll()||this.centerContainerCon.isViewportHScrollShowing()},i.prototype.onHorizontalViewportChanged=function(){var t=this.centerContainerCon.getCenterWidth(),s=this.centerContainerCon.getViewportScrollLeft();this.columnModel.setViewportPosition(t,s)},tl([H("ctrlsService")],i.prototype,"ctrlsService",void 0),tl([H("columnModel")],i.prototype,"columnModel",void 0),tl([H("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),tl([H("columnApi")],i.prototype,"columnApi",void 0),tl([H("gridApi")],i.prototype,"gridApi",void 0),tl([et],i.prototype,"postConstruct",null),i}(Ye),Nx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),QC=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},ew=function(d){function i(t){var s=d.call(this)||this;return s.element=t,s}return Nx(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))},i.prototype.onPinnedLeftWidthChanged=function(){var t=this.pinnedWidthService.getPinnedLeftWidth(),s=t>0;Xn(this.element,s),s&&ka(this.element,t)},QC([H("pinnedWidthService")],i.prototype,"pinnedWidthService",void 0),QC([et],i.prototype,"postConstruct",null),i}(Ye),tw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),du=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},nw=function(d){function i(t){var s=d.call(this)||this;return s.element=t,s}return tw(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))},i.prototype.onPinnedRightWidthChanged=function(){var t=this.pinnedWidthService.getPinnedRightWidth(),s=t>0;Xn(this.element,s),s&&ka(this.element,t)},du([H("pinnedWidthService")],i.prototype,"pinnedWidthService",void 0),du([et],i.prototype,"postConstruct",null),i}(Ye),rw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),iw=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Gp=function(d){function i(t,s){var l=d.call(this)||this;return l.eContainer=t,l.eWrapper=s,l}return rw(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))},i.prototype.onHeightChanged=function(){var t=this.maxDivHeightScaler.getUiContainerHeight(),s=null!=t?t+"px":"";this.eContainer.style.height=s,this.eWrapper&&(this.eWrapper.style.height=s)},iw([H("rowContainerHeightService")],i.prototype,"maxDivHeightScaler",void 0),iw([et],i.prototype,"postConstruct",null),i}(Ye),Gx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Bp=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},ow=function(d){function i(t){var s=d.call(this)||this;return s.eContainer=t,s}return Gx(i,d),i.prototype.postConstruct=function(){var t=this;if(this.gridOptionsWrapper.isEnableRangeSelection()&&!we(this.rangeService)){var s={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)};this.dragService.addDragSource(s),this.addDestroyFunc(function(){return t.dragService.removeDragSource(s)})}},Bp([Gn("rangeService")],i.prototype,"rangeService",void 0),Bp([H("dragService")],i.prototype,"dragService",void 0),Bp([et],i.prototype,"postConstruct",null),i}(Ye),aw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Rs=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c};!function(d){d.LEFT="left",d.RIGHT="right",d.CENTER="center",d.FULL_WIDTH="fullWidth",d.TOP_LEFT="topLeft",d.TOP_RIGHT="topRight",d.TOP_CENTER="topCenter",d.TOP_FULL_WITH="topFullWidth",d.BOTTOM_LEFT="bottomLeft",d.BOTTOM_RIGHT="bottomRight",d.BOTTOM_CENTER="bottomCenter",d.BOTTOM_FULL_WITH="bottomFullWidth"}(Y.hA6||(Y.hA6={}));var Hp=Pa([[Y.hA6.CENTER,"ag-center-cols-container"],[Y.hA6.LEFT,"ag-pinned-left-cols-container"],[Y.hA6.RIGHT,"ag-pinned-right-cols-container"],[Y.hA6.FULL_WIDTH,"ag-full-width-container"],[Y.hA6.TOP_CENTER,"ag-floating-top-container"],[Y.hA6.TOP_LEFT,"ag-pinned-left-floating-top"],[Y.hA6.TOP_RIGHT,"ag-pinned-right-floating-top"],[Y.hA6.TOP_FULL_WITH,"ag-floating-top-full-width-container"],[Y.hA6.BOTTOM_CENTER,"ag-floating-bottom-container"],[Y.hA6.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[Y.hA6.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[Y.hA6.BOTTOM_FULL_WITH,"ag-floating-bottom-full-width-container"]]),Vp=Pa([[Y.hA6.CENTER,"ag-center-cols-viewport"],[Y.hA6.TOP_CENTER,"ag-floating-top-viewport"],[Y.hA6.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),uw=Pa([[Y.hA6.CENTER,"ag-center-cols-clipper"]]),uc=function(d){function i(t){var s=d.call(this)||this;return s.name=t,s}return aw(i,d),i.getRowContainerCssClasses=function(t){return{container:Hp.get(t),viewport:Vp.get(t),wrapper:uw.get(t)}},i.getPinned=function(t){switch(t){case Y.hA6.BOTTOM_LEFT:case Y.hA6.TOP_LEFT:case Y.hA6.LEFT:return fe.PINNED_LEFT;case Y.hA6.BOTTOM_RIGHT:case Y.hA6.TOP_RIGHT:case Y.hA6.RIGHT:return fe.PINNED_RIGHT;default:return null}},i.prototype.postConstruct=function(){var t=this;this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.embedFullWidthRows=this.gridOptionsWrapper.isEmbedFullWidthRows(),this.addManagedListener(this.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_ROWS_CHANGED,this.onDisplayedRowsChanged.bind(this)),this.forContainers([Y.hA6.CENTER],function(){return t.viewportSizeFeature=t.createManagedBean(new Wg(t))}),this.registerWithCtrlsService()},i.prototype.registerWithCtrlsService=function(){switch(this.name){case Y.hA6.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case Y.hA6.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case Y.hA6.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case Y.hA6.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case Y.hA6.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case Y.hA6.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case Y.hA6.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case Y.hA6.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case Y.hA6.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this)}},i.prototype.forContainers=function(t,s){t.indexOf(this.name)>=0&&s()},i.prototype.getContainerElement=function(){return this.eContainer},i.prototype.getViewportSizeFeature=function(){return this.viewportSizeFeature},i.prototype.setComp=function(t,s,l,c){var h=this;this.comp=t,this.eContainer=s,this.eViewport=l,this.eWrapper=c,this.createManagedBean(new ZC(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();var D=function(){for(var d=0,i=0,t=arguments.length;i<t;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<t;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s}([Y.hA6.TOP_CENTER,Y.hA6.TOP_LEFT,Y.hA6.TOP_RIGHT],[Y.hA6.BOTTOM_CENTER,Y.hA6.BOTTOM_LEFT,Y.hA6.BOTTOM_RIGHT],[Y.hA6.CENTER,Y.hA6.LEFT,Y.hA6.RIGHT]),L=[Y.hA6.CENTER,Y.hA6.LEFT,Y.hA6.RIGHT,Y.hA6.FULL_WIDTH],U=[Y.hA6.CENTER,Y.hA6.TOP_CENTER,Y.hA6.BOTTOM_CENTER],ee=[Y.hA6.RIGHT,Y.hA6.BOTTOM_RIGHT,Y.hA6.TOP_RIGHT];this.forContainers([Y.hA6.LEFT,Y.hA6.BOTTOM_LEFT,Y.hA6.TOP_LEFT],function(){return h.createManagedBean(new ew(h.eContainer))}),this.forContainers(ee,function(){return h.createManagedBean(new nw(h.eContainer))}),this.forContainers(L,function(){return h.createManagedBean(new Gp(h.eContainer,h.eWrapper))}),this.forContainers(D,function(){return h.createManagedBean(new ow(h.eContainer))}),this.forContainers(U,function(){return h.createManagedBean(new Pg(function(ae){return h.comp.setContainerWidth(ae+"px")}))})},i.prototype.listenOnDomOrder=function(){var t=this,s=function(){return t.comp.setDomOrder(t.gridOptionsWrapper.isEnsureDomOrder())};this.addManagedListener(this.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,s),s()},i.prototype.stopHScrollOnPinnedRows=function(){var t=this;this.forContainers([Y.hA6.TOP_CENTER,Y.hA6.BOTTOM_CENTER],function(){t.addManagedListener(t.eViewport,"scroll",function(){return t.eViewport.scrollLeft=0})})},i.prototype.onDisplayedColumnsChanged=function(){var t=this;this.forContainers([Y.hA6.CENTER],function(){return t.onHorizontalViewportChanged()})},i.prototype.onDisplayedColumnsWidthChanged=function(){var t=this;this.forContainers([Y.hA6.CENTER],function(){return t.onHorizontalViewportChanged()})},i.prototype.onScrollVisibilityChanged=function(){if(this.name===Y.hA6.CENTER){var s=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gridOptionsWrapper.getScrollbarWidth()||0;this.comp.setViewportHeight(0==s?"100%":"calc(100% + "+s+"px)")}},i.prototype.addPreventScrollWhileDragging=function(){var t=this,s=function(c){t.dragService.isDragging()&&c.cancelable&&c.preventDefault()};this.eContainer.addEventListener("touchmove",s,{passive:!1}),this.addDestroyFunc(function(){return t.eContainer.removeEventListener("touchmove",s)})},i.prototype.onHorizontalViewportChanged=function(){var t=this.getCenterWidth(),s=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(t,s)},i.prototype.getCenterWidth=function(){return Wo(this.eViewport)},i.prototype.getCenterViewportScrollLeft=function(){return nd(this.eViewport,this.enableRtl)},i.prototype.registerViewportResizeListener=function(t){var s=this.resizeObserverService.observeResize(this.eViewport,t);this.addDestroyFunc(function(){return s()})},i.prototype.isViewportVisible=function(){return kl(this.eViewport)},i.prototype.isViewportHScrollShowing=function(){return Nl(this.eViewport)},i.prototype.getViewportScrollLeft=function(){return nd(this.eViewport,this.enableRtl)},i.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsWrapper.isAlwaysShowHorizontalScroll()||Nl(this.eViewport)},i.prototype.getViewportElement=function(){return this.eViewport},i.prototype.setContainerTranslateX=function(t){this.eContainer.style.transform="translateX("+t+"px)"},i.prototype.getHScrollPosition=function(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}},i.prototype.setCenterViewportScrollLeft=function(t){rd(this.eViewport,t,this.enableRtl)},i.prototype.onDisplayedRowsChanged=function(){var t=this,s=this.name===Y.hA6.TOP_FULL_WITH||this.name===Y.hA6.BOTTOM_FULL_WITH||this.name===Y.hA6.FULL_WIDTH,h=this.getRowCtrls().filter(function(S){var R=S.isFullWidth(),D=t.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_PRINT,L=t.embedFullWidthRows||D;return s?!L&&R:L||!R});this.comp.setRowCtrls(h)},i.prototype.getRowCtrls=function(){switch(this.name){case Y.hA6.TOP_CENTER:case Y.hA6.TOP_LEFT:case Y.hA6.TOP_RIGHT:case Y.hA6.TOP_FULL_WITH:return this.rowRenderer.getTopRowCtrls();case Y.hA6.BOTTOM_CENTER:case Y.hA6.BOTTOM_LEFT:case Y.hA6.BOTTOM_RIGHT:case Y.hA6.BOTTOM_FULL_WITH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getRowCtrls()}},Rs([H("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),Rs([H("dragService")],i.prototype,"dragService",void 0),Rs([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Rs([H("columnModel")],i.prototype,"columnModel",void 0),Rs([H("resizeObserverService")],i.prototype,"resizeObserverService",void 0),Rs([H("rowRenderer")],i.prototype,"rowRenderer",void 0),Rs([et],i.prototype,"postConstruct",null),i}(Ye),lw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ts=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Ld='<div class="ag-root ag-unselectable" role="grid" unselectable="on">\n        <ag-header-root ref="gridHeader" unselectable="on"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation" unselectable="on">\n            <ag-row-container ref="topLeftContainer" name="'+Y.hA6.TOP_LEFT+'"></ag-row-container>\n            <ag-row-container ref="topCenterContainer" name="'+Y.hA6.TOP_CENTER+'"></ag-row-container>\n            <ag-row-container ref="topRightContainer" name="'+Y.hA6.TOP_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="topFullWidthContainer" name="'+Y.hA6.TOP_FULL_WITH+'"></ag-row-container>\n        </div>\n        <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n            <ag-row-container ref="leftContainer" name="'+Y.hA6.LEFT+'"></ag-row-container>\n            <ag-row-container ref="centerContainer" name="'+Y.hA6.CENTER+'"></ag-row-container>\n            <ag-row-container ref="rightContainer" name="'+Y.hA6.RIGHT+'"></ag-row-container>\n            <ag-row-container ref="fullWidthContainer" name="'+Y.hA6.FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation" unselectable="on">\n            <ag-row-container ref="bottomLeftContainer" name="'+Y.hA6.BOTTOM_LEFT+'"></ag-row-container>\n            <ag-row-container ref="bottomCenterContainer" name="'+Y.hA6.BOTTOM_CENTER+'"></ag-row-container>\n            <ag-row-container ref="bottomRightContainer" name="'+Y.hA6.BOTTOM_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="bottomFullWidthContainer" name="'+Y.hA6.BOTTOM_FULL_WITH+'"></ag-row-container>\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>',cw=function(d){function i(){return d.call(this,Ld)||this}return lw(i,d),i.prototype.init=function(){var t=this,s=function(h,m){var S=h+"px";m.style.minHeight=S,m.style.height=S},l={setRowAnimationCssOnBodyViewport:function(h,m){return t.setRowAnimationCssOnBodyViewport(h,m)},setColumnCount:function(h){return cE(t.getGui(),h)},setRowCount:function(h){return lE(t.getGui(),h)},setTopHeight:function(h){return s(h,t.eTop)},setBottomHeight:function(h){return s(h,t.eBottom)},setTopDisplay:function(h){return t.eTop.style.display=h},setBottomDisplay:function(h){return t.eBottom.style.display=h},setColumnMovingCss:function(h,m){return t.addOrRemoveCssClass(XC,m)},updateLayoutClasses:function(h,m){kt(t.eBodyViewport,Y.LBn.AUTO_HEIGHT,m.autoHeight),kt(t.eBodyViewport,Y.LBn.NORMAL,m.normal),kt(t.eBodyViewport,Y.LBn.PRINT,m.print),t.addOrRemoveCssClass(Y.LBn.AUTO_HEIGHT,m.autoHeight),t.addOrRemoveCssClass(Y.LBn.NORMAL,m.normal),t.addOrRemoveCssClass(Y.LBn.PRINT,m.print)},setAlwaysVerticalScrollClass:function(h,m){return kt(t.eBodyViewport,$C,m)},registerBodyViewportResizeListener:function(h){var m=t.resizeObserverService.observeResize(t.eBodyViewport,h);t.addDestroyFunc(function(){return m()})},setPinnedTopBottomOverflowY:function(h){return t.eTop.style.overflowY=t.eBottom.style.overflowY=h},setCellSelectableCss:function(h,m){[t.eTop,t.eBodyViewport,t.eBottom].forEach(function(S){return kt(S,YC,m)})}};this.ctrl=this.createManagedBean(new JC),this.ctrl.setComp(l,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom),(this.rangeService||this.gridOptionsWrapper.isRowSelectionMulti())&&uE(this.getGui(),!0)},i.prototype.setRowAnimationCssOnBodyViewport=function(t,s){kt(this.eBodyViewport,Y.SJN.ANIMATION_ON,s),kt(this.eBodyViewport,Y.SJN.ANIMATION_OFF,!s)},i.prototype.getFloatingTopBottom=function(){return[this.eTop,this.eBottom]},Ts([H("resizeObserverService")],i.prototype,"resizeObserverService",void 0),Ts([Gn("rangeService")],i.prototype,"rangeService",void 0),Ts([He("eBodyViewport")],i.prototype,"eBodyViewport",void 0),Ts([He("eTop")],i.prototype,"eTop",void 0),Ts([He("eBottom")],i.prototype,"eBottom",void 0),Ts([He("gridHeader")],i.prototype,"headerRootComp",void 0),Ts([et],i.prototype,"init",null),i}(hn);!function(d){d[d.SINGLE_SHEET=0]="SINGLE_SHEET",d[d.MULTI_SHEET=1]="MULTI_SHEET"}(Y.nPL||(Y.nPL={})),function(d){d.EVERYTHING="group",d.FILTER="filter",d.SORT="sort",d.MAP="map",d.AGGREGATE="aggregate",d.PIVOT="pivot",d.NOTHING="nothing"}(Y.j_r||(Y.j_r={}));var Dn=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},dw=function(){function d(){this.detailGridInfoMap={},this.destroyCalled=!1}return d.prototype.registerOverlayWrapperComp=function(i){this.overlayWrapperComp=i},d.prototype.registerSideBarComp=function(i){this.sideBarComp=i},d.prototype.init=function(){var i=this;switch(this.rowModel.getType()){case fe.ROW_MODEL_TYPE_CLIENT_SIDE:this.clientSideRowModel=this.rowModel;break;case fe.ROW_MODEL_TYPE_INFINITE:this.infiniteRowModel=this.rowModel;break;case fe.ROW_MODEL_TYPE_SERVER_SIDE:this.serverSideRowModel=this.rowModel}this.ctrlsService.whenReady(function(){i.gridBodyCon=i.ctrlsService.getGridBodyCtrl()})},d.prototype.__getAlignedGridService=function(){return this.alignedGridsService},d.prototype.addDetailGridInfo=function(i,t){this.detailGridInfoMap[i]=t},d.prototype.removeDetailGridInfo=function(i){this.detailGridInfoMap[i]=void 0},d.prototype.getDetailGridInfo=function(i){return this.detailGridInfoMap[i]},d.prototype.forEachDetailGridInfo=function(i){var t=0;Nn(this.detailGridInfoMap,function(s,l){Fe(l)&&(i(l,t),t++)})},d.prototype.getDataAsCsv=function(i){if(Kt.assertRegistered(Y.GXE.CsvExportModule,"api.getDataAsCsv"))return this.csvCreator.getDataAsCsv(i)},d.prototype.exportDataAsCsv=function(i){Kt.assertRegistered(Y.GXE.CsvExportModule,"api.exportDataAsCSv")&&this.csvCreator.exportDataAsCsv(i)},d.prototype.getDataAsExcel=function(i){if(Kt.assertRegistered(Y.GXE.ExcelExportModule,"api.getDataAsExcel"))return this.excelCreator.getFactoryMode(i&&i.exportMode||"xlsx")===Y.nPL.MULTI_SHEET?void console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling `api.getMultipleSheetAsExcel()` or `api.exportMultipleSheetsAsExcel()`"):this.excelCreator.getDataAsExcel(i)},d.prototype.exportDataAsExcel=function(i){if(Kt.assertRegistered(Y.GXE.ExcelExportModule,"api.exportDataAsExcel")){if(this.excelCreator.getFactoryMode(i&&i.exportMode||"xlsx")===Y.nPL.MULTI_SHEET)return void console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling `api.getMultipleSheetAsExcel()` or `api.exportMultipleSheetsAsExcel()`");this.excelCreator.exportDataAsExcel(i)}},d.prototype.getSheetDataForExcel=function(i){if(Kt.assertRegistered(Y.GXE.ExcelExportModule,"api.getSheetDataForExcel"))return this.excelCreator.setFactoryMode(Y.nPL.MULTI_SHEET,i&&i.exportMode||"xlsx"),this.excelCreator.getSheetDataForExcel(i)},d.prototype.getMultipleSheetsAsExcel=function(i){if(Kt.assertRegistered(Y.GXE.ExcelExportModule,"api.getMultipleSheetsAsExcel"))return this.excelCreator.getMultipleSheetsAsExcel(i)},d.prototype.exportMultipleSheetsAsExcel=function(i){if(Kt.assertRegistered(Y.GXE.ExcelExportModule,"api.exportMultipleSheetsAsExcel"))return this.excelCreator.exportMultipleSheetsAsExcel(i)},d.prototype.setEnterpriseDatasource=function(i){console.warn("ag-grid: since version 18.x, api.setEnterpriseDatasource() should be replaced with api.setServerSideDatasource()"),this.setServerSideDatasource(i)},d.prototype.setGridAriaProperty=function(i,t){if(i){var s=this.ctrlsService.getGridBodyCtrl().getGui(),l="aria-"+i;null===t?s.removeAttribute(l):s.setAttribute(l,t)}},d.prototype.setServerSideDatasource=function(i){this.serverSideRowModel?this.serverSideRowModel.setDatasource(i):console.warn("AG Grid: you can only use an enterprise datasource when gridOptions.rowModelType is '"+fe.ROW_MODEL_TYPE_SERVER_SIDE+"'")},d.prototype.setDatasource=function(i){this.gridOptionsWrapper.isRowModelInfinite()?this.rowModel.setDatasource(i):console.warn("AG Grid: you can only use a datasource when gridOptions.rowModelType is '"+fe.ROW_MODEL_TYPE_INFINITE+"'")},d.prototype.setViewportDatasource=function(i){this.gridOptionsWrapper.isRowModelViewport()?this.rowModel.setViewportDatasource(i):console.warn("AG Grid: you can only use a viewport datasource when gridOptions.rowModelType is '"+fe.ROW_MODEL_TYPE_VIEWPORT+"'")},d.prototype.setRowData=function(i){if(this.gridOptionsWrapper.isRowModelDefault())if(this.gridOptionsWrapper.isImmutableData()){var t=this.immutableService.createTransactionForRowData(i);if(!t)return;var c=this.clientSideRowModel.updateRowData(t[0],t[1]);c&&this.rowRenderer.refreshFullWidthRows(c.update)}else this.selectionService.reset(),this.clientSideRowModel.setRowData(i);else console.warn("cannot call setRowData unless using normal row model")},d.prototype.setFloatingTopRowData=function(i){console.warn("AG Grid: since v12, api.setFloatingTopRowData() is now api.setPinnedTopRowData()"),this.setPinnedTopRowData(i)},d.prototype.setFloatingBottomRowData=function(i){console.warn("AG Grid: since v12, api.setFloatingBottomRowData() is now api.setPinnedBottomRowData()"),this.setPinnedBottomRowData(i)},d.prototype.getFloatingTopRowCount=function(){return console.warn("AG Grid: since v12, api.getFloatingTopRowCount() is now api.getPinnedTopRowCount()"),this.getPinnedTopRowCount()},d.prototype.getFloatingBottomRowCount=function(){return console.warn("AG Grid: since v12, api.getFloatingBottomRowCount() is now api.getPinnedBottomRowCount()"),this.getPinnedBottomRowCount()},d.prototype.getFloatingTopRow=function(i){return console.warn("AG Grid: since v12, api.getFloatingTopRow() is now api.getPinnedTopRow()"),this.getPinnedTopRow(i)},d.prototype.getFloatingBottomRow=function(i){return console.warn("AG Grid: since v12, api.getFloatingBottomRow() is now api.getPinnedBottomRow()"),this.getPinnedBottomRow(i)},d.prototype.setPinnedTopRowData=function(i){this.pinnedRowModel.setPinnedTopRowData(i)},d.prototype.setPinnedBottomRowData=function(i){this.pinnedRowModel.setPinnedBottomRowData(i)},d.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},d.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},d.prototype.getPinnedTopRow=function(i){return this.pinnedRowModel.getPinnedTopRow(i)},d.prototype.getPinnedBottomRow=function(i){return this.pinnedRowModel.getPinnedBottomRow(i)},d.prototype.setColumnDefs=function(i,t){void 0===t&&(t="api"),this.columnModel.setColumnDefs(i,t)},d.prototype.setAutoGroupColumnDef=function(i,t){this.gridOptionsWrapper.setProperty("autoGroupColumnDef",i,!0)},d.prototype.expireValueCache=function(){this.valueCache.expire()},d.prototype.getVerticalPixelRange=function(){return this.gridBodyCon.getScrollFeature().getVScrollPosition()},d.prototype.getHorizontalPixelRange=function(){return this.gridBodyCon.getScrollFeature().getHScrollPosition()},d.prototype.setAlwaysShowHorizontalScroll=function(i){this.gridOptionsWrapper.setProperty("alwaysShowHorizontalScroll",i)},d.prototype.setAlwaysShowVerticalScroll=function(i){this.gridOptionsWrapper.setProperty("alwaysShowVerticalScroll",i)},d.prototype.refreshToolPanel=function(){!this.sideBarComp||this.sideBarComp.refresh()},d.prototype.refreshCells=function(i){void 0===i&&(i={}),Array.isArray(i)?console.warn("since AG Grid v11.1, refreshCells() now takes parameters, please see the documentation."):this.rowRenderer.refreshCells(i)},d.prototype.flashCells=function(i){void 0===i&&(i={}),this.rowRenderer.flashCells(i)},d.prototype.redrawRows=function(i){void 0===i&&(i={}),this.rowRenderer.redrawRows(i?i.rowNodes:void 0)},d.prototype.refreshView=function(){console.warn("AG Grid: since v11.1, refreshView() is deprecated, please call refreshCells() or redrawRows() instead"),this.redrawRows()},d.prototype.refreshRows=function(i){console.warn("since AG Grid v11.1, refreshRows() is deprecated, please use refreshCells({rowNodes: rows}) or redrawRows({rowNodes: rows}) instead"),this.refreshCells({rowNodes:i})},d.prototype.rowDataChanged=function(i){console.warn("AG Grid: rowDataChanged is deprecated, either call refreshView() to refresh everything, or call rowNode.setRowData(newData) to set value on a particular node"),this.redrawRows()},d.prototype.softRefreshView=function(){console.error("AG Grid: since v16, softRefreshView() is no longer supported. Please check the documentation on how to refresh.")},d.prototype.refreshGroupRows=function(){console.warn("AG Grid: since v11.1, refreshGroupRows() is no longer supported, call refreshCells() instead. Because refreshCells() now does dirty checking, it will only refresh cells that have changed, so it should not be necessary to only refresh the group rows."),this.refreshCells()},d.prototype.setFunctionsReadOnly=function(i){this.gridOptionsWrapper.setProperty("functionsReadOnly",i)},d.prototype.refreshHeader=function(){this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(i){return i.refresh()})},d.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},d.prototype.isAdvancedFilterPresent=function(){return console.warn("AG Grid: isAdvancedFilterPresent() is deprecated, please use isColumnFilterPresent()"),this.isColumnFilterPresent()},d.prototype.isColumnFilterPresent=function(){return this.filterManager.isAdvancedFilterPresent()},d.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},d.prototype.getModel=function(){return this.rowModel},d.prototype.setRowNodeExpanded=function(i,t){i&&i.setExpanded(t)},d.prototype.onGroupExpandedOrCollapsed=function(i){we(this.clientSideRowModel)&&console.warn("AG Grid: cannot call onGroupExpandedOrCollapsed unless using normal row model"),Fe(i)&&console.warn("AG Grid: api.onGroupExpandedOrCollapsed - refreshFromIndex parameter is no longer used, the grid will refresh all rows"),this.clientSideRowModel.refreshModel({step:Y.j_r.MAP})},d.prototype.refreshInMemoryRowModel=function(i){console.warn("ag-grid: since version 18.x, api.refreshInMemoryRowModel() should be replaced with api.refreshClientSideRowModel()"),this.refreshClientSideRowModel(i)},d.prototype.refreshClientSideRowModel=function(i){we(this.clientSideRowModel)&&console.warn("cannot call refreshClientSideRowModel unless using normal row model");var t=Y.j_r.EVERYTHING,s={group:Y.j_r.EVERYTHING,filter:Y.j_r.FILTER,map:Y.j_r.MAP,aggregate:Y.j_r.AGGREGATE,sort:Y.j_r.SORT,pivot:Y.j_r.PIVOT};Fe(i)&&(t=s[i]),we(t)?console.error("AG Grid: invalid step "+i+", available steps are "+Object.keys(s).join(", ")):this.clientSideRowModel.refreshModel({step:t,keepRenderedRows:!0,animate:!0,keepEditingRows:!0})},d.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},d.prototype.flushAllAnimationFrames=function(){this.animationFrameService.flushAllFrames()},d.prototype.getRowNode=function(i){return this.rowModel.getRowNode(i)},d.prototype.getSizesForCurrentTheme=function(){return{rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),headerHeight:this.gridOptionsWrapper.getHeaderHeight()}},d.prototype.expandAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!0):this.serverSideRowModel?this.serverSideRowModel.expandAll(!0):console.warn("AG Grid: expandAll only works with Client Side Row Model and Server Side Row Model")},d.prototype.collapseAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!1):this.serverSideRowModel?this.serverSideRowModel.expandAll(!1):console.warn("AG Grid: collapseAll only works with Client Side Row Model and Server Side Row Model")},d.prototype.getToolPanelInstance=function(i){if(this.sideBarComp){var t=this.sideBarComp.getToolPanelInstance(i);return this.frameworkComponentWrapper?this.frameworkComponentWrapper.unwrap(t):t}console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise")},d.prototype.addVirtualRowListener=function(i,t,s){"string"!=typeof i&&console.warn("AG Grid: addVirtualRowListener is deprecated, please use addRenderedRowListener."),this.addRenderedRowListener(i,t,s)},d.prototype.addRenderedRowListener=function(i,t,s){"virtualRowSelected"===i&&console.warn("AG Grid: event virtualRowSelected is deprecated, to register for individual row\n                selection events, add a listener directly to the row node."),this.rowRenderer.addRenderedRowListener(i,t,s)},d.prototype.setQuickFilter=function(i){this.filterManager.setQuickFilter(i)},d.prototype.selectIndex=function(i,t,s){console.warn("AG Grid: do not use api for selection, call node.setSelected(value) instead"),s&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionService.selectIndex(i,t)},d.prototype.deselectIndex=function(i,t){void 0===t&&(t=!1),console.warn("AG Grid: do not use api for selection, call node.setSelected(value) instead"),t&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionService.deselectIndex(i)},d.prototype.selectNode=function(i,t,s){void 0===t&&(t=!1),void 0===s&&(s=!1),console.warn("AG Grid: API for selection is deprecated, call node.setSelected(value) instead"),s&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),i.setSelectedParams({newValue:!0,clearSelection:!t})},d.prototype.deselectNode=function(i,t){void 0===t&&(t=!1),console.warn("AG Grid: API for selection is deprecated, call node.setSelected(value) instead"),t&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),i.setSelectedParams({newValue:!1})},d.prototype.selectAll=function(){this.selectionService.selectAllRowNodes()},d.prototype.deselectAll=function(){this.selectionService.deselectAllRowNodes()},d.prototype.selectAllFiltered=function(){this.selectionService.selectAllRowNodes(!0)},d.prototype.deselectAllFiltered=function(){this.selectionService.deselectAllRowNodes(!0)},d.prototype.recomputeAggregates=function(){we(this.clientSideRowModel)&&console.warn("cannot call recomputeAggregates unless using normal row model"),console.warn("recomputeAggregates is deprecated, please call api.refreshClientSideRowModel('aggregate') instead"),this.clientSideRowModel.refreshModel({step:Y.j_r.AGGREGATE})},d.prototype.sizeColumnsToFit=function(){this.gridBodyCon.sizeColumnsToFit()},d.prototype.showLoadingOverlay=function(){this.overlayWrapperComp.showLoadingOverlay()},d.prototype.showNoRowsOverlay=function(){this.overlayWrapperComp.showNoRowsOverlay()},d.prototype.hideOverlay=function(){this.overlayWrapperComp.hideOverlay()},d.prototype.isNodeSelected=function(i){return console.warn("AG Grid: no need to call api.isNodeSelected(), just call node.isSelected() instead"),i.isSelected()},d.prototype.getSelectedNodesById=function(){return console.error("AG Grid: since version 3.4, getSelectedNodesById no longer exists, use getSelectedNodes() instead"),null},d.prototype.getSelectedNodes=function(){return this.selectionService.getSelectedNodes()},d.prototype.getSelectedRows=function(){return this.selectionService.getSelectedRows()},d.prototype.getBestCostNodeSelection=function(){return this.selectionService.getBestCostNodeSelection()},d.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},d.prototype.ensureColIndexVisible=function(i){console.warn("AG Grid: ensureColIndexVisible(index) no longer supported, use ensureColumnVisible(colKey) instead.")},d.prototype.ensureColumnVisible=function(i){this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)},d.prototype.ensureIndexVisible=function(i,t){this.gridBodyCon.getScrollFeature().ensureIndexVisible(i,t)},d.prototype.ensureNodeVisible=function(i,t){void 0===t&&(t=null),this.gridBodyCon.getScrollFeature().ensureNodeVisible(i,t)},d.prototype.forEachLeafNode=function(i){we(this.clientSideRowModel)&&console.warn("cannot call forEachNode unless using normal row model"),this.clientSideRowModel.forEachLeafNode(i)},d.prototype.forEachNode=function(i){this.rowModel.forEachNode(i)},d.prototype.forEachNodeAfterFilter=function(i){we(this.clientSideRowModel)&&console.warn("cannot call forEachNodeAfterFilter unless using normal row model"),this.clientSideRowModel.forEachNodeAfterFilter(i)},d.prototype.forEachNodeAfterFilterAndSort=function(i){we(this.clientSideRowModel)&&console.warn("cannot call forEachNodeAfterFilterAndSort unless using normal row model"),this.clientSideRowModel.forEachNodeAfterFilterAndSort(i)},d.prototype.getFilterApiForColDef=function(i){return console.warn("ag-grid API method getFilterApiForColDef deprecated, use getFilterInstance instead"),this.getFilterInstance(i)},d.prototype.getFilterInstance=function(i,t){var s=this,l=this.columnModel.getPrimaryColumn(i);if(l){var c=this.filterManager.getFilterComponent(l,"NO_UI"),h=c&&c.resolveNow(null,function(S){return S}),m=this.frameworkComponentWrapper?this.frameworkComponentWrapper.unwrap(h):h;return t&&(m?setTimeout(t,0,m):c&&c.then(function(S){var R=s.frameworkComponentWrapper?s.frameworkComponentWrapper.unwrap(S):S;t(R)})),m}},d.prototype.getFilterApi=function(i){return console.warn("AG Grid: getFilterApi is deprecated, use getFilterInstance instead"),this.getFilterInstance(i)},d.prototype.destroyFilter=function(i){var t=this.columnModel.getPrimaryColumn(i);if(t)return this.filterManager.destroyFilter(t,"filterDestroyed")},d.prototype.getStatusPanel=function(i){if(this.statusBarService){var t=this.statusBarService.getStatusPanel(i);return this.frameworkComponentWrapper?this.frameworkComponentWrapper.unwrap(t):t}},d.prototype.getColumnDef=function(i){var t=this.columnModel.getPrimaryColumn(i);return t?t.getColDef():null},d.prototype.getColumnDefs=function(){return this.columnModel.getColumnDefs()},d.prototype.onFilterChanged=function(){this.filterManager.onFilterChanged()},d.prototype.onSortChanged=function(){this.sortController.onSortChanged()},d.prototype.setSortModel=function(i,t){console.warn("AG Grid: as of version 24.0.0, setSortModel() is deprecated, sort information is now part of Column State. Please use columnApi.applyColumnState() instead.");var s=[];i&&i.forEach(function(l,c){s.push({colId:l.colId,sort:l.sort,sortIndex:c})}),this.columnModel.applyColumnState({state:s,defaultState:{sort:null}})},d.prototype.getSortModel=function(){console.warn("AG Grid: as of version 24.0.0, getSortModel() is deprecated, sort information is now part of Column State. Please use columnApi.getColumnState() instead.");var t=this.columnModel.getColumnState().filter(function(c){return null!=c.sort}),s={};t.forEach(function(c){s[c.colId]=c.sortIndex});var l=t.map(function(c){return{colId:c.colId,sort:c.sort}});return l.sort(function(c,h){return s[c.colId]-s[h.colId]}),l},d.prototype.setFilterModel=function(i){this.filterManager.setFilterModel(i)},d.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},d.prototype.getFocusedCell=function(){return this.focusService.getFocusedCell()},d.prototype.clearFocusedCell=function(){return this.focusService.clearFocusedCell()},d.prototype.setFocusedCell=function(i,t,s){this.focusService.setFocusedCell(i,t,s,!0)},d.prototype.setSuppressRowDrag=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_SUPPRESS_ROW_DRAG,i)},d.prototype.setSuppressMoveWhenRowDragging=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_SUPPRESS_MOVE_WHEN_ROW_DRAG,i)},d.prototype.setSuppressRowClickSelection=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_SUPPRESS_ROW_CLICK_SELECTION,i)},d.prototype.addRowDropZone=function(i){this.gridBodyCon.getRowDragFeature().addRowDropZone(i)},d.prototype.removeRowDropZone=function(i){var t=this.dragAndDropService.findExternalZone(i);t&&this.dragAndDropService.removeDropTarget(t)},d.prototype.getRowDropZoneParams=function(i){return this.gridBodyCon.getRowDragFeature().getRowDropZone(i)},d.prototype.setHeaderHeight=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_HEADER_HEIGHT,i)},d.prototype.setDomLayout=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_DOM_LAYOUT,i)},d.prototype.setEnableCellTextSelection=function(i){this.gridBodyCon.setCellTextSelection(i)},d.prototype.setFillHandleDirection=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_FILL_HANDLE_DIRECTION,i)},d.prototype.setGroupHeaderHeight=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GROUP_HEADER_HEIGHT,i)},d.prototype.setFloatingFiltersHeight=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_FLOATING_FILTERS_HEIGHT,i)},d.prototype.setPivotGroupHeaderHeight=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PIVOT_GROUP_HEADER_HEIGHT,i)},d.prototype.setIsExternalFilterPresent=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_IS_EXTERNAL_FILTER_PRESENT,i)},d.prototype.setDoesExternalFilterPass=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_DOES_EXTERNAL_FILTER_PASS,i)},d.prototype.setNavigateToNextCell=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_NAVIGATE_TO_NEXT_CELL,i)},d.prototype.setTabToNextCell=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_TAB_TO_NEXT_CELL,i)},d.prototype.setTabToNextHeader=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_TAB_TO_NEXT_HEADER,i)},d.prototype.setNavigateToNextHeader=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_NAVIGATE_TO_NEXT_HEADER,i)},d.prototype.setGroupRowAggNodes=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GROUP_ROW_AGG_NODES,i)},d.prototype.setGetBusinessKeyForNode=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_BUSINESS_KEY_FOR_NODE,i)},d.prototype.setGetChildCount=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_CHILD_COUNT,i)},d.prototype.setProcessRowPostCreate=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PROCESS_ROW_POST_CREATE,i)},d.prototype.setGetRowNodeId=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_ROW_NODE_ID,i)},d.prototype.setGetRowClass=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_ROW_CLASS,i)},d.prototype.setIsFullWidthCell=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_IS_FULL_WIDTH_CELL,i)},d.prototype.setIsRowSelectable=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_IS_ROW_SELECTABLE,i)},d.prototype.setIsRowMaster=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_IS_ROW_MASTER,i)},d.prototype.setPostSort=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_POST_SORT,i)},d.prototype.setGetDocument=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_DOCUMENT,i)},d.prototype.setGetContextMenuItems=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_CONTEXT_MENU_ITEMS,i)},d.prototype.setGetMainMenuItems=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_MAIN_MENU_ITEMS,i)},d.prototype.setProcessCellForClipboard=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PROCESS_CELL_FOR_CLIPBOARD,i)},d.prototype.setSendToClipboard=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_SEND_TO_CLIPBOARD,i)},d.prototype.setProcessCellFromClipboard=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PROCESS_CELL_FROM_CLIPBOARD,i)},d.prototype.setProcessSecondaryColDef=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PROCESS_TO_SECONDARY_COLDEF,i)},d.prototype.setProcessSecondaryColGroupDef=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PROCESS_SECONDARY_COL_GROUP_DEF,i)},d.prototype.setPostProcessPopup=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_POST_PROCESS_POPUP,i)},d.prototype.setDefaultGroupOrderComparator=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_DEFAULT_GROUP_ORDER_COMPARATOR,i)},d.prototype.setGetChartToolbarItems=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_CHART_TOOLBAR_ITEMS,i)},d.prototype.setPaginationNumberFormatter=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PAGINATION_NUMBER_FORMATTER,i)},d.prototype.setGetServerSideStoreParams=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_SERVER_SIDE_STORE_PARAMS,i)},d.prototype.setIsServerSideGroupOpenByDefault=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_IS_SERVER_SIDE_GROUPS_OPEN_BY_DEFAULT,i)},d.prototype.setIsApplyServerSideTransaction=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_IS_APPLY_SERVER_SIDE_TRANSACTION,i)},d.prototype.setIsServerSideGroup=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_IS_SERVER_SIDE_GROUP,i)},d.prototype.setGetServerSideGroupKey=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_SERVER_SIDE_GROUP_KEY,i)},d.prototype.setGetRowStyle=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_ROW_STYLE,i)},d.prototype.setGetRowHeight=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_ROW_HEIGHT,i)},d.prototype.setPivotHeaderHeight=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PIVOT_HEADER_HEIGHT,i)},d.prototype.isSideBarVisible=function(){return!!this.sideBarComp&&this.sideBarComp.isDisplayed()},d.prototype.setSideBarVisible=function(i){this.sideBarComp?this.sideBarComp.setDisplayed(i):i&&console.warn("AG Grid: sideBar is not loaded")},d.prototype.setSideBarPosition=function(i){this.sideBarComp?this.sideBarComp.setSideBarPosition(i):console.warn("AG Grid: sideBar is not loaded")},d.prototype.openToolPanel=function(i){this.sideBarComp?this.sideBarComp.openToolPanel(i):console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise")},d.prototype.closeToolPanel=function(){this.sideBarComp?this.sideBarComp.close():console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise")},d.prototype.getOpenedToolPanel=function(){return this.sideBarComp?this.sideBarComp.openedItem():null},d.prototype.getSideBar=function(){return this.gridOptionsWrapper.getSideBar()},d.prototype.setSideBar=function(i){this.gridOptionsWrapper.setProperty("sideBar",yp.parse(i))},d.prototype.setSuppressClipboardPaste=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_SUPPRESS_CLIPBOARD_PASTE,i)},d.prototype.isToolPanelShowing=function(){return this.sideBarComp.isToolPanelShowing()},d.prototype.doLayout=function(){mn(function(){return console.warn("AG Grid - since version 25.1, doLayout was taken out, as it's not needed. The grid responds to grid size changes automatically")},"doLayoutDeprecated")},d.prototype.resetRowHeights=function(){Fe(this.clientSideRowModel)&&this.clientSideRowModel.resetRowHeights()},d.prototype.setGroupRemoveSingleChildren=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GROUP_REMOVE_SINGLE_CHILDREN,i)},d.prototype.setGroupRemoveLowestSingleChildren=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,i)},d.prototype.onRowHeightChanged=function(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()},d.prototype.getValue=function(i,t){var s=this.columnModel.getPrimaryColumn(i);return we(s)&&(s=this.columnModel.getGridColumn(i)),we(s)?null:this.valueService.getValue(s,t)},d.prototype.addEventListener=function(i,t){var s=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addEventListener(i,t,s)},d.prototype.addGlobalListener=function(i){var t=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addGlobalListener(i,t)},d.prototype.removeEventListener=function(i,t){var s=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeEventListener(i,t,s)},d.prototype.removeGlobalListener=function(i){var t=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeGlobalListener(i,t)},d.prototype.dispatchEvent=function(i){this.eventService.dispatchEvent(i)},d.prototype.destroy=function(){if(!this.destroyCalled){this.destroyCalled=!0;var i=this.ctrlsService.getGridCtrl();i&&i.destroyGridUi(),this.context.destroy()}},d.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(p_.bind(window,this,"Grid API"),100)},d.prototype.warnIfDestroyed=function(i){return this.destroyCalled&&console.warn("AG Grid: Grid API method "+i+" was called on a grid that was destroyed."),this.destroyCalled},d.prototype.resetQuickFilter=function(){this.warnIfDestroyed("resetQuickFilter")||this.rowModel.forEachNode(function(i){return i.quickFilterAggregateText=null})},d.prototype.getRangeSelections=function(){return console.warn("AG Grid: in v20.1.x, api.getRangeSelections() is gone, please use getCellRanges() instead.\n        We had to change how cell selections works a small bit to allow charting to integrate. The return type of\n        getCellRanges() is a bit different, please check the AG Grid documentation."),null},d.prototype.getCellRanges=function(){return this.rangeService?this.rangeService.getCellRanges():(console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),null)},d.prototype.camelCaseToHumanReadable=function(i){return Jr(i)},d.prototype.addRangeSelection=function(i){console.warn("AG Grid: As of version 21.x, range selection changed slightly to allow charting integration. Please call api.addCellRange() instead of api.addRangeSelection()")},d.prototype.addCellRange=function(i){this.rangeService||console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),this.rangeService.addCellRange(i)},d.prototype.clearRangeSelection=function(){this.rangeService||console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),this.rangeService.removeAllCellRanges()},d.prototype.undoCellEditing=function(){this.undoRedoService.undo()},d.prototype.redoCellEditing=function(){this.undoRedoService.redo()},d.prototype.getCurrentUndoSize=function(){return this.undoRedoService.getCurrentUndoStackSize()},d.prototype.getCurrentRedoSize=function(){return this.undoRedoService.getCurrentRedoStackSize()},d.prototype.getChartModels=function(){if(Kt.assertRegistered(Y.GXE.RangeSelectionModule,"api.getChartModels")&&Kt.assertRegistered(Y.GXE.GridChartsModule,"api.getChartModels"))return this.chartService.getChartModels()},d.prototype.getChartRef=function(i){if(Kt.assertRegistered(Y.GXE.RangeSelectionModule,"api.getChartRef")&&Kt.assertRegistered(Y.GXE.GridChartsModule,"api.getChartRef"))return this.chartService.getChartRef(i)},d.prototype.getChartImageDataURL=function(i){if(Kt.assertRegistered(Y.GXE.RangeSelectionModule,"api.getChartImageDataURL")&&Kt.assertRegistered(Y.GXE.GridChartsModule,"api.getChartImageDataURL"))return this.chartService.getChartImageDataURL(i)},d.prototype.createRangeChart=function(i){if(Kt.assertRegistered(Y.GXE.RangeSelectionModule,"api.createRangeChart")&&Kt.assertRegistered(Y.GXE.GridChartsModule,"api.createRangeChart"))return this.chartService.createRangeChart(i)},d.prototype.createCrossFilterChart=function(i){if(Kt.assertRegistered(Y.GXE.RangeSelectionModule,"api.createCrossFilterChart")&&Kt.assertRegistered(Y.GXE.GridChartsModule,"api.createCrossFilterChart"))return this.chartService.createCrossFilterChart(i)},d.prototype.restoreChart=function(i,t){if(Kt.assertRegistered(Y.GXE.RangeSelectionModule,"api.restoreChart")&&Kt.assertRegistered(Y.GXE.GridChartsModule,"api.restoreChart"))return this.chartService.restoreChart(i,t)},d.prototype.createPivotChart=function(i){if(Kt.assertRegistered(Y.GXE.RangeSelectionModule,"api.createPivotChart")&&Kt.assertRegistered(Y.GXE.GridChartsModule,"api.createPivotChart"))return this.chartService.createPivotChart(i)},d.prototype.copySelectedRowsToClipboard=function(i,t){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copySelectedRowsToClipboard(i,t)},d.prototype.copySelectedRangeToClipboard=function(i){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copySelectedRangeToClipboard(i)},d.prototype.copySelectedRangeDown=function(){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copyRangeDown()},d.prototype.showColumnMenuAfterButtonClick=function(i,t){var s=this.columnModel.getGridColumn(i);this.menuFactory.showMenuAfterButtonClick(s,t,"columnMenu")},d.prototype.showColumnMenuAfterMouseClick=function(i,t){var s=this.columnModel.getGridColumn(i);s||(s=this.columnModel.getPrimaryColumn(i)),s?this.menuFactory.showMenuAfterMouseEvent(s,t):console.error("AG Grid: column '"+i+"' not found")},d.prototype.hidePopupMenu=function(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()},d.prototype.setPopupParent=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_POPUP_PARENT,i)},d.prototype.tabToNextCell=function(){return this.navigationService.tabToNextCell(!1)},d.prototype.tabToPreviousCell=function(){return this.navigationService.tabToNextCell(!0)},d.prototype.getCellRendererInstances=function(i){return void 0===i&&(i={}),this.rowRenderer.getCellRendererInstances(i)},d.prototype.getCellEditorInstances=function(i){return void 0===i&&(i={}),this.rowRenderer.getCellEditorInstances(i)},d.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},d.prototype.stopEditing=function(i){void 0===i&&(i=!1),this.rowRenderer.stopEditing(i)},d.prototype.startEditingCell=function(i){var t=this.columnModel.getGridColumn(i.colKey);if(t){var s={rowIndex:i.rowIndex,rowPinned:i.rowPinned||null,column:t};null==i.rowPinned&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(i.rowIndex);var c=this.navigationService.getCellByPosition(s);!c||c.startRowOrCellEdit(i.keyPress,i.charPress)}else console.warn("AG Grid: no column found for "+i.colKey)},d.prototype.addAggFunc=function(i,t){this.aggFuncService&&this.aggFuncService.addAggFunc(i,t)},d.prototype.addAggFuncs=function(i){this.aggFuncService&&this.aggFuncService.addAggFuncs(i)},d.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},d.prototype.applyServerSideTransaction=function(i){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransaction(i);console.warn("AG Grid: Cannot apply Server Side Transaction if not using the Server Side Row Model.")},d.prototype.applyServerSideTransactionAsync=function(i,t){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransactionAsync(i,t);console.warn("AG Grid: Cannot apply Server Side Transaction if not using the Server Side Row Model.")},d.prototype.retryServerSideLoads=function(){this.serverSideRowModel?this.serverSideRowModel.retryLoads():console.warn("AG Grid: API retryServerSideLoads() can only be used when using Server-Side Row Model.")},d.prototype.flushServerSideAsyncTransactions=function(){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.flushAsyncTransactions();console.warn("AG Grid: Cannot flush Server Side Transaction if not using the Server Side Row Model.")},d.prototype.applyTransaction=function(i){if(this.clientSideRowModel){var t=this.clientSideRowModel.updateRowData(i);return this.rowRenderer.refreshFullWidthRows(t.update),this.gridOptionsWrapper.isSuppressChangeDetection()||this.rowRenderer.refreshCells(),t}console.error("AG Grid: updateRowData() only works with ClientSideRowModel. Working with InfiniteRowModel was deprecated in v23.1 and removed in v24.1")},d.prototype.updateRowData=function(i){return mn(function(){return console.warn("AG Grid: as of v23.1, grid API updateRowData(transaction) is now called applyTransaction(transaction). updateRowData is deprecated and will be removed in a future major release.")},"updateRowData deprecated"),this.applyTransaction(i)},d.prototype.applyTransactionAsync=function(i,t){this.clientSideRowModel?this.clientSideRowModel.batchUpdateRowData(i,t):console.error("AG Grid: api.applyTransactionAsync() only works with ClientSideRowModel.")},d.prototype.flushAsyncTransactions=function(){this.clientSideRowModel?this.clientSideRowModel.flushAsyncTransactions():console.error("AG Grid: api.applyTransactionAsync() only works with ClientSideRowModel.")},d.prototype.batchUpdateRowData=function(i,t){mn(function(){return console.warn("AG Grid: as of v23.1, grid API batchUpdateRowData(transaction, callback) is now called applyTransactionAsync(transaction, callback). batchUpdateRowData is deprecated and will be removed in a future major release.")},"batchUpdateRowData deprecated"),this.applyTransactionAsync(i,t)},d.prototype.insertItemsAtIndex=function(i,t,s){console.warn("AG Grid: insertItemsAtIndex() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:t,addIndex:i,update:null,remove:null})},d.prototype.removeItems=function(i,t){console.warn("AG Grid: removeItems() is deprecated, use updateRowData(transaction) instead.");var s=i.map(function(l){return l.data});this.updateRowData({add:null,addIndex:null,update:null,remove:s})},d.prototype.addItems=function(i,t){console.warn("AG Grid: addItems() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:i,addIndex:null,update:null,remove:null})},d.prototype.refreshVirtualPageCache=function(){console.warn("AG Grid: refreshVirtualPageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},d.prototype.refreshInfinitePageCache=function(){console.warn("AG Grid: refreshInfinitePageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},d.prototype.refreshInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():console.warn("AG Grid: api.refreshInfiniteCache is only available when rowModelType='infinite'.")},d.prototype.purgeVirtualPageCache=function(){console.warn("AG Grid: purgeVirtualPageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfinitePageCache()},d.prototype.purgeInfinitePageCache=function(){console.warn("AG Grid: purgeInfinitePageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfiniteCache()},d.prototype.purgeInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():console.warn("AG Grid: api.purgeInfiniteCache is only available when rowModelType='infinite'.")},d.prototype.purgeEnterpriseCache=function(i){console.warn("ag-grid: since version 18.x, api.purgeEnterpriseCache() should be replaced with api.purgeServerSideCache()"),this.purgeServerSideCache(i)},d.prototype.purgeServerSideCache=function(i){void 0===i&&(i=[]),this.serverSideRowModel?(console.warn("AG Grid: since v25.0, api.purgeServerSideCache is deprecated. Please use api.refreshServerSideStore({purge: true}) instead."),this.refreshServerSideStore({route:i,purge:!0})):console.warn("AG Grid: api.purgeServerSideCache is only available when rowModelType='serverSide'.")},d.prototype.refreshServerSideStore=function(i){this.serverSideRowModel?this.serverSideRowModel.refreshStore(i):console.warn("AG Grid: api.refreshServerSideStore is only available when rowModelType='serverSide'.")},d.prototype.getServerSideStoreState=function(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(console.warn("AG Grid: api.getServerSideStoreState is only available when rowModelType='serverSide'."),[])},d.prototype.getVirtualRowCount=function(){return console.warn("AG Grid: getVirtualRowCount() is now called getInfiniteRowCount(), please call getInfiniteRowCount() instead"),this.getInfiniteRowCount()},d.prototype.getInfiniteRowCount=function(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();console.warn("AG Grid: api.getVirtualRowCount is only available when rowModelType='virtual'.")},d.prototype.isMaxRowFound=function(){return console.warn("AG Grid: api.isLastRowIndexKnown is deprecated, please use api.isLastRowIndexKnown()"),this.isLastRowIndexKnown()},d.prototype.isLastRowIndexKnown=function(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();console.warn("AG Grid: api.isMaxRowFound is only available when rowModelType='virtual'.")},d.prototype.setVirtualRowCount=function(i,t){console.warn("AG Grid: setVirtualRowCount() is now called setInfiniteRowCount(), please call setInfiniteRowCount() instead"),this.setRowCount(i,t)},d.prototype.setInfiniteRowCount=function(i,t){console.warn("AG Grid: setInfiniteRowCount() is now called setRowCount(), please call setRowCount() instead"),this.setRowCount(i,t)},d.prototype.setRowCount=function(i,t){this.infiniteRowModel?this.infiniteRowModel.setRowCount(i,t):console.warn("AG Grid: api.setRowCount is only available for Infinite Row Model.")},d.prototype.getVirtualPageState=function(){return console.warn("AG Grid: getVirtualPageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},d.prototype.getInfinitePageState=function(){return console.warn("AG Grid: getInfinitePageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},d.prototype.getCacheBlockState=function(){return this.rowNodeBlockLoader.getBlockState()},d.prototype.checkGridSize=function(){console.warn("in AG Grid v25.2.0, checkGridSize() was removed, as it was legacy and didn't do anything uesful.")},d.prototype.getFirstRenderedRow=function(){return console.warn("in AG Grid v12, getFirstRenderedRow() was renamed to getFirstDisplayedRow()"),this.getFirstDisplayedRow()},d.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},d.prototype.getLastRenderedRow=function(){return console.warn("in AG Grid v12, getLastRenderedRow() was renamed to getLastDisplayedRow()"),this.getLastDisplayedRow()},d.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},d.prototype.getDisplayedRowAtIndex=function(i){return this.rowModel.getRow(i)},d.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},d.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},d.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},d.prototype.paginationSetPageSize=function(i){this.gridOptionsWrapper.setProperty("paginationPageSize",i)},d.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},d.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},d.prototype.paginationGetRowCount=function(){return this.paginationProxy.getMasterRowCount()},d.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},d.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},d.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},d.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},d.prototype.paginationGoToPage=function(i){this.paginationProxy.goToPage(i)},Dn([Gn("immutableService")],d.prototype,"immutableService",void 0),Dn([Gn("csvCreator")],d.prototype,"csvCreator",void 0),Dn([Gn("excelCreator")],d.prototype,"excelCreator",void 0),Dn([H("rowRenderer")],d.prototype,"rowRenderer",void 0),Dn([H("navigationService")],d.prototype,"navigationService",void 0),Dn([H("filterManager")],d.prototype,"filterManager",void 0),Dn([H("columnModel")],d.prototype,"columnModel",void 0),Dn([H("selectionService")],d.prototype,"selectionService",void 0),Dn([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),Dn([H("valueService")],d.prototype,"valueService",void 0),Dn([H("alignedGridsService")],d.prototype,"alignedGridsService",void 0),Dn([H("eventService")],d.prototype,"eventService",void 0),Dn([H("pinnedRowModel")],d.prototype,"pinnedRowModel",void 0),Dn([H("context")],d.prototype,"context",void 0),Dn([H("rowModel")],d.prototype,"rowModel",void 0),Dn([H("sortController")],d.prototype,"sortController",void 0),Dn([H("paginationProxy")],d.prototype,"paginationProxy",void 0),Dn([H("focusService")],d.prototype,"focusService",void 0),Dn([H("dragAndDropService")],d.prototype,"dragAndDropService",void 0),Dn([Gn("rangeService")],d.prototype,"rangeService",void 0),Dn([Gn("clipboardService")],d.prototype,"clipboardService",void 0),Dn([Gn("aggFuncService")],d.prototype,"aggFuncService",void 0),Dn([H("menuFactory")],d.prototype,"menuFactory",void 0),Dn([Gn("contextMenuFactory")],d.prototype,"contextMenuFactory",void 0),Dn([H("valueCache")],d.prototype,"valueCache",void 0),Dn([H("animationFrameService")],d.prototype,"animationFrameService",void 0),Dn([Gn("statusBarService")],d.prototype,"statusBarService",void 0),Dn([Gn("chartService")],d.prototype,"chartService",void 0),Dn([Gn("undoRedoService")],d.prototype,"undoRedoService",void 0),Dn([Gn("rowNodeBlockLoader")],d.prototype,"rowNodeBlockLoader",void 0),Dn([Gn("ssrmTransactionManager")],d.prototype,"serverSideTransactionManager",void 0),Dn([H("ctrlsService")],d.prototype,"ctrlsService",void 0),Dn([Gn("frameworkComponentWrapper")],d.prototype,"frameworkComponentWrapper",void 0),Dn([et],d.prototype,"init",null),Dn([Fi],d.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),Dn([vt("gridApi")],d)}(),Bx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ug=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},zg=function(d,i){return function(t,s){i(t,s,d)}},jg=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.expressionToFunctionCache={},t}return Bx(i,d),i.prototype.setBeans=function(t){this.logger=t.create("ExpressionService")},i.prototype.evaluate=function(t,s){return"function"==typeof t?t(s):"string"==typeof t?this.evaluateExpression(t,s):void console.error("AG Grid: value should be either a string or a function",t)},i.prototype.evaluateExpression=function(t,s){try{return this.createExpressionFunction(t)(s.value,s.context,s.oldValue,s.newValue,s.value,s.node,s.data,s.colDef,s.rowIndex,s.api,s.columnApi,s.getValue,s.column,s.columnGroup)}catch(h){return console.log("Processing of the expression failed"),console.log("Expression = "+t),console.log("Params =",s),console.log("Exception = "+h),null}},i.prototype.createExpressionFunction=function(t){if(this.expressionToFunctionCache[t])return this.expressionToFunctionCache[t];var s=this.createFunctionBody(t),l=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",s);return this.expressionToFunctionCache[t]=l,l},i.prototype.createFunctionBody=function(t){return t.indexOf("return")>=0?t:"return "+t+";"},Ug([zg(0,ki("loggerFactory"))],i.prototype,"setBeans",null),Ug([vt("expressionService")],i)}(Ye),VM=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),qg=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},fw=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.templateCache={},t.waitingCallbacks={},t}return VM(i,d),i.prototype.getTemplate=function(t,s){var l=this.templateCache[t];if(l)return l;var c=this.waitingCallbacks[t],h=this;if(!c){this.waitingCallbacks[t]=c=[];var m=new XMLHttpRequest;m.onload=function(){h.handleHttpResult(this,t)},m.open("GET",t),m.send()}return s&&c.push(s),null},i.prototype.handleHttpResult=function(t,s){if(200===t.status&&null!==t.response){this.templateCache[s]=t.response||t.responseText;for(var l=this.waitingCallbacks[s],c=0;c<l.length;c++)(0,l[c])();if(this.$scope){var m=this;window.setTimeout(function(){m.$scope.$apply()},0)}}else console.warn("Unable to get template error "+t.status+" - "+s)},qg([H("$scope")],i.prototype,"$scope",void 0),qg([vt("templateService")],i)}(Ye),pw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),va=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Wi=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}var t;return pw(i,d),t=i,i.addKeyboardModeEvents=function(s,l){var c=t.instancesMonitored.get(s);c&&c.length>0?-1===c.indexOf(l)&&c.push(l):(t.instancesMonitored.set(s,[l]),s.addEventListener("keydown",t.toggleKeyboardMode),s.addEventListener("mousedown",t.toggleKeyboardMode))},i.removeKeyboardModeEvents=function(s,l){var c=t.instancesMonitored.get(s),h=[];c&&c.length&&(h=function(){for(var d=0,i=0,t=arguments.length;i<t;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<t;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s}(c).filter(function(m){return m!==l}),t.instancesMonitored.set(s,h)),0===h.length&&(s.removeEventListener("keydown",t.toggleKeyboardMode),s.removeEventListener("mousedown",t.toggleKeyboardMode))},i.toggleKeyboardMode=function(s){var l=t.keyboardModeActive,c="keydown"===s.type;if(!(c&&(s.ctrlKey||s.metaKey||s.altKey)||l&&c||!l&&!c)){t.keyboardModeActive=c;var h=s.target.ownerDocument;if(h){var m=t.instancesMonitored.get(h);m&&m.forEach(function(S){S.dispatchEvent({type:c?$.EVENT_KEYBOARD_FOCUS:$.EVENT_MOUSE_FOCUS})})}}},i.prototype.init=function(){var s=this,l=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_MODE_CHANGED,l),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_GROUP_OPENED,l),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,l),this.ctrlsService.whenReady(function(c){s.gridCtrl=c.gridCtrl;var h=s.gridOptionsWrapper.getDocument();t.addKeyboardModeEvents(h,s.gridCtrl),s.addDestroyFunc(function(){return s.unregisterGridCompController(s.gridCtrl)})})},i.prototype.unregisterGridCompController=function(s){var l=this.gridOptionsWrapper.getDocument();t.removeKeyboardModeEvents(l,s)},i.prototype.onColumnEverythingChanged=function(){if(this.focusedCellPosition){var s=this.focusedCellPosition.column,l=this.columnModel.getGridColumn(s.getId());s!==l&&this.clearFocusedCell()}},i.prototype.isKeyboardMode=function(){return t.keyboardModeActive},i.prototype.getFocusCellToUseAfterRefresh=function(){return this.gridOptionsWrapper.isSuppressFocusAfterRefresh()||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(document.activeElement,lu.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition},i.prototype.getFocusHeaderToUseAfterRefresh=function(){return this.gridOptionsWrapper.isSuppressFocusAfterRefresh()||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(document.activeElement,Ad.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition},i.prototype.isDomDataMissingInHierarchy=function(s,l){for(var c=s;c;){if(this.gridOptionsWrapper.getDomData(c,l))return!1;c=c.parentNode}return!0},i.prototype.clearFocusedCell=function(){this.focusedCellPosition=null,this.onCellFocused(!1)},i.prototype.getFocusedCell=function(){return this.focusedCellPosition},i.prototype.setFocusedCell=function(s,l,c,h){void 0===h&&(h=!1);var m=this.columnModel.getGridColumn(l);m?(this.focusedCellPosition=m?{rowIndex:s,rowPinned:ze(c),column:m}:null,this.onCellFocused(h)):this.focusedCellPosition=null},i.prototype.isCellFocused=function(s){return null!=this.focusedCellPosition&&this.focusedCellPosition.column===s.column&&this.isRowFocused(s.rowIndex,s.rowPinned)},i.prototype.isRowNodeFocused=function(s){return this.isRowFocused(s.rowIndex,s.rowPinned)},i.prototype.isHeaderWrapperFocused=function(s){if(null==this.focusedHeaderPosition)return!1;var l=s.getColumnGroupChild(),c=s.getRowIndex(),h=s.getPinned(),m=this.focusedHeaderPosition,S=m.column;return l===S&&c===m.headerRowIndex&&h==S.getPinned()},i.prototype.clearFocusedHeader=function(){this.focusedHeaderPosition=null},i.prototype.getFocusedHeader=function(){return this.focusedHeaderPosition},i.prototype.setFocusedHeader=function(s,l){this.focusedHeaderPosition={headerRowIndex:s,column:l}},i.prototype.focusHeaderPosition=function(s){var l=s.direction,c=s.fromTab,m=s.event,S=s.headerPosition;if(s.allowUserOverride){var U,R=this.gridOptionsWrapper,D=this.getFocusedHeader(),L=this.headerNavigationService.getHeaderRowCount();c?(U=R.getTabToNextHeaderFunc())&&(S=U({backwards:"Before"===l,previousHeaderPosition:D,nextHeaderPosition:S,headerRowCount:L,api:R.getApi(),columnApi:R.getColumnApi()})):(U=R.getNavigateToNextHeaderFunc())&&m&&(S=U({key:m.key,previousHeaderPosition:D,nextHeaderPosition:S,headerRowCount:L,event:m,api:R.getApi(),columnApi:R.getColumnApi()}))}return!!S&&(-1===S.headerRowIndex?this.focusGridView(S.column):(this.headerNavigationService.scrollToColumn(S.column,l),this.ctrlsService.getHeaderRowContainerCtrl(S.column.getPinned()).focusHeader(S.headerRowIndex,S.column,m)))},i.prototype.isAnyCellFocused=function(){return!!this.focusedCellPosition},i.prototype.isRowFocused=function(s,l){return null!=this.focusedCellPosition&&this.focusedCellPosition.rowIndex===s&&this.focusedCellPosition.rowPinned===ze(l)},i.prototype.findFocusableElements=function(s,l,c){void 0===c&&(c=!1);var m=fe.FOCUSABLE_EXCLUDE;l&&(m+=", "+l),c&&(m+=', [tabindex="-1"]');var K,S=Array.prototype.slice.apply(s.querySelectorAll(fe.FOCUSABLE_SELECTOR)),R=Array.prototype.slice.apply(s.querySelectorAll(m));return R.length?(K=R,S.filter(function(ee){return-1===K.indexOf(ee)})):S},i.prototype.focusInto=function(s,l,c){void 0===l&&(l=!1),void 0===c&&(c=!1);var h=this.findFocusableElements(s,null,c),m=l?jn(h):h[0];return!!m&&(m.focus(),!0)},i.prototype.findNextFocusableElement=function(s,l,c){var h=this.findFocusableElements(s,l?':not([tabindex="-1"])':null),S=(l?rt(h,function(R){return R.contains(document.activeElement)}):h.indexOf(document.activeElement))+(c?-1:1);return S<0||S>=h.length?null:h[S]},i.prototype.isFocusUnderManagedComponent=function(s){var l=s.querySelectorAll("."+Yo.FOCUS_MANAGED_CLASS);if(!l.length)return!1;for(var c=0;c<l.length;c++)if(l[c].contains(document.activeElement))return!0;return!1},i.prototype.findTabbableParent=function(s,l){void 0===l&&(l=5);for(var c=0;s&&null===Yf(s)&&++c<=l;)s=s.parentElement;return null===Yf(s)?null:s},i.prototype.onCellFocused=function(s){var l={type:$.EVENT_CELL_FOCUSED,forceBrowserFocus:s,rowIndex:null,column:null,floating:null,api:this.gridApi,columnApi:this.columnApi,rowPinned:null,isFullWidthCell:!1};if(this.focusedCellPosition){var c=l.rowIndex=this.focusedCellPosition.rowIndex,h=l.rowPinned=this.focusedCellPosition.rowPinned;l.column=this.focusedCellPosition.column;var m=this.rowRenderer.getRowByPosition({rowIndex:c,rowPinned:h});m&&(l.isFullWidthCell=m.isFullWidth())}this.eventService.dispatchEvent(l)},i.prototype.focusGridView=function(s,l){var c=l?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!c)return!1;var h=c.rowIndex,m=c.rowPinned,S=this.getFocusedHeader();return!s&&S&&(s=S.column),!(null==h||!s)&&(this.navigationService.ensureCellVisible({rowIndex:h,column:s,rowPinned:m}),this.setFocusedCell(h,s,ze(m),!0),this.rangeService&&this.rangeService.setRangeToCell({rowIndex:h,rowPinned:m,column:s}),!0)},i.prototype.focusNextGridCoreContainer=function(s){return!!this.gridCtrl.focusNextInnerContainer(s)||(s||this.gridCtrl.forceFocusOutOfContainer(),!1)},i.AG_KEYBOARD_FOCUS="ag-keyboard-focus",i.keyboardModeActive=!1,i.instancesMonitored=new Map,va([H("columnModel")],i.prototype,"columnModel",void 0),va([H("headerNavigationService")],i.prototype,"headerNavigationService",void 0),va([H("columnApi")],i.prototype,"columnApi",void 0),va([H("gridApi")],i.prototype,"gridApi",void 0),va([H("rowRenderer")],i.prototype,"rowRenderer",void 0),va([H("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),va([Gn("rangeService")],i.prototype,"rangeService",void 0),va([H("navigationService")],i.prototype,"navigationService",void 0),va([H("ctrlsService")],i.prototype,"ctrlsService",void 0),va([et],i.prototype,"init",null),t=va([vt("focusService")],i)}(Ye),Vx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),lc=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Ds=function(){return function(d){d[d.vertical=0]="vertical",d[d.horizontal=1]="horizontal"}(Ds||(Ds={})),Ds}(),Wx=0,hw=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.popupList=[],t}return Vx(i,d),i.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(s){t.gridCtrl=s.gridCtrl,t.addManagedListener(t.gridCtrl,$.EVENT_KEYBOARD_FOCUS,function(){Ut(t.popupList,function(l){return At(l.element,Wi.AG_KEYBOARD_FOCUS)})}),t.addManagedListener(t.gridCtrl,$.EVENT_MOUSE_FOCUS,function(){Ut(t.popupList,function(l){return _i(l.element,Wi.AG_KEYBOARD_FOCUS)})})})},i.prototype.getPopupParent=function(){return this.gridOptionsWrapper.getPopupParent()||this.gridCtrl.getGui()},i.prototype.positionPopupForMenu=function(t){var s=t.eventSource.getBoundingClientRect(),l=this.getParentRect(),c=this.keepXYWithinBounds(t.ePopup,s.top-l.top,Ds.vertical),h=t.ePopup.clientWidth>0?t.ePopup.clientWidth:200;t.ePopup.style.minWidth=h+"px";var R,S=l.right-l.left-h;function D(){return s.right-l.left-2}function L(){return s.left-l.left-h}this.gridOptionsWrapper.isEnableRtl()?((R=L())<0&&(R=D()),R>S&&(R=0)):((R=D())>S&&(R=L()),R<0&&(R=0)),t.ePopup.style.left=R+"px",t.ePopup.style.top=c+"px"},i.prototype.positionPopupUnderMouseEvent=function(t){var s=t.ePopup,l=t.nudgeX,c=t.nudgeY,h=this.calculatePointerAlign(t.mouseEvent);this.positionPopup({ePopup:s,x:h.x,y:h.y,nudgeX:l,nudgeY:c,keepWithinBounds:!0}),this.callPostProcessPopup(t.type,t.ePopup,null,t.mouseEvent,t.column,t.rowNode)},i.prototype.calculatePointerAlign=function(t){var s=this.getParentRect();return{x:t.clientX-s.left,y:t.clientY-s.top}},i.prototype.positionPopupUnderComponent=function(t){var s=t.eventSource.getBoundingClientRect(),l=t.alignSide||"left",c=this.getParentRect(),h=s.left-c.left;"right"===l&&(h-=t.ePopup.offsetWidth-s.width),this.positionPopup({ePopup:t.ePopup,nudgeX:t.nudgeX,nudgeY:t.nudgeY,x:h,y:s.top-c.top+s.height,keepWithinBounds:t.keepWithinBounds}),this.callPostProcessPopup(t.type,t.ePopup,t.eventSource,null,t.column,t.rowNode)},i.prototype.positionPopupOverComponent=function(t){var s=t.eventSource.getBoundingClientRect(),l=this.getParentRect();this.positionPopup({ePopup:t.ePopup,nudgeX:t.nudgeX,nudgeY:t.nudgeY,x:s.left-l.left,y:s.top-l.top,keepWithinBounds:t.keepWithinBounds}),this.callPostProcessPopup(t.type,t.ePopup,t.eventSource,null,t.column,t.rowNode)},i.prototype.callPostProcessPopup=function(t,s,l,c,h,m){var S=this.gridOptionsWrapper.getPostProcessPopupFunc();S&&S({column:h,rowNode:m,ePopup:s,type:t,eventSource:l,mouseEvent:c})},i.prototype.positionPopup=function(t){var s=t.ePopup,c=t.nudgeX,h=t.nudgeY,m=t.x,S=t.y;c&&(m+=c),h&&(S+=h),t.keepWithinBounds&&(m=this.keepXYWithinBounds(s,m,Ds.horizontal),S=this.keepXYWithinBounds(s,S,Ds.vertical)),s.style.left=m+"px",s.style.top=S+"px"},i.prototype.getActivePopups=function(){return this.popupList.map(function(t){return t.element})},i.prototype.getPopupList=function(){return this.popupList},i.prototype.getParentRect=function(){var t=this.gridOptionsWrapper.getDocument(),s=this.getPopupParent();s===t.body&&(s=t.documentElement);var l=getComputedStyle(s),c=s.getBoundingClientRect();return{top:c.top+parseFloat(l.borderTopWidth)||0,left:c.left+parseFloat(l.borderLeftWidth)||0,right:c.right+parseFloat(l.borderRightWidth)||0,bottom:c.bottom+parseFloat(l.borderBottomWidth)||0}},i.prototype.keepXYWithinBounds=function(t,s,l){var c=l===Ds.vertical,h=c?"clientHeight":"clientWidth",m=c?"top":"left",S=c?"offsetHeight":"offsetWidth",R=c?"scrollTop":"scrollLeft",D=this.gridOptionsWrapper.getDocument(),L=D.documentElement,U=this.getPopupParent(),K=U.getBoundingClientRect(),ee=D.documentElement.getBoundingClientRect(),ae=U===D.body,Te=t[S],We=ae?(c?Hu:Xf)(L)+L[R]:U[h];ae&&(We-=Math.abs(ee[m]-K[m]));var Pe=We-Te;return Math.min(Math.max(s,0),Math.abs(Pe))},i.prototype.keepPopupPositionedRelativeTo=function(t){var s=this,l=this.getPopupParent(),c=l.getBoundingClientRect(),h=t.element.getBoundingClientRect(),m=c.top-h.top,S=c.left-h.left,R=m,D=S,L=t.ePopup.style.top,U=parseInt(L.substring(0,L.length-1),10),K=t.ePopup.style.left,ee=parseInt(K.substring(0,K.length-1),10);return new Qr(function(ae){s.getFrameworkOverrides().setInterval(function(){var Te=l.getBoundingClientRect(),Ve=t.element.getBoundingClientRect();if(0==Ve.top&&0==Ve.left&&0==Ve.height&&0==Ve.width)t.hidePopup();else{var Pe=Te.top-Ve.top;if(Pe!=R){var Qe=s.keepXYWithinBounds(t.ePopup,U+m-Pe,Ds.vertical);t.ePopup.style.top=Qe+"px"}R=Pe;var ye=Te.left-Ve.left;if(ye!=D){var an=s.keepXYWithinBounds(t.ePopup,ee+S-ye,Ds.horizontal);t.ePopup.style.left=an+"px"}D=ye}},200).then(function(Te){ae(function(){null!=Te&&window.clearInterval(Te)})})})},i.prototype.addPopup=function(t){var s=this,l=t.modal,c=t.eChild,h=t.closeOnEsc,m=t.closedCallback,S=t.click,R=t.alwaysOnTop,D=t.afterGuiAttached,L=t.positionCallback,U=t.anchorToElement,K=t.ariaLabel,ee=this.gridOptionsWrapper.getDocument(),ae=new Qr(function(er){return er(function(){})});if(!ee)return console.warn("ag-grid: could not find the document, document is empty"),{hideFunc:function(){},stopAnchoringPromise:ae};var Te=rt(this.popupList,function(er){return er.element===c});if(-1!==Te){var Ve=this.popupList[Te];return{hideFunc:Ve.hideFunc,stopAnchoringPromise:Ve.stopAnchoringPromise}}var We=this.getPopupParent();null==c.style.top&&(c.style.top="0px"),null==c.style.left&&(c.style.left="0px");var Pe=document.createElement("div"),Qe=this.environment.getTheme().theme;Qe&&At(Pe,Qe),At(Pe,"ag-popup"),At(c,this.gridOptionsWrapper.isEnableRtl()?"ag-rtl":"ag-ltr"),At(c,"ag-popup-child"),Yi(c,"dialog"),Ba(c,K),this.focusService.isKeyboardMode()&&At(c,Wi.AG_KEYBOARD_FOCUS),Pe.appendChild(c),We.appendChild(Pe),R?this.setAlwaysOnTop(Pe,!0):this.bringPopupToFront(Pe);var ye=!1,an=function(or){Pe.contains(document.activeElement)&&(or.which||or.keyCode)===Xe.ESCAPE&&Jn({keyboardEvent:or})},Gt=function(or){return Jn({mouseEvent:or})},_n=function(or){return Jn({touchEvent:or})},Jn=function(or){void 0===or&&(or={});var cr=or.mouseEvent,to=or.touchEvent,ia=or.keyboardEvent;s.isEventFromCurrentPopup({mouseEvent:cr,touchEvent:to},c)||s.isEventSameChainAsOriginalEvent({originalMouseEvent:S,mouseEvent:cr,touchEvent:to})||ye||(ye=!0,We.removeChild(Pe),ee.removeEventListener("keydown",an),ee.removeEventListener("mousedown",Gt),ee.removeEventListener("touchstart",_n),ee.removeEventListener("contextmenu",Gt),s.eventService.removeEventListener($.EVENT_DRAG_STARTED,Gt),m&&m(cr||to||ia),s.popupList=s.popupList.filter(function(jr){return jr.element!==c}),ae&&ae.then(function(jr){return jr&&jr()}))};return D&&D({hidePopup:Jn}),window.setTimeout(function(){h&&ee.addEventListener("keydown",an),l&&(ee.addEventListener("mousedown",Gt),s.eventService.addEventListener($.EVENT_DRAG_STARTED,Gt),ee.addEventListener("touchstart",_n),ee.addEventListener("contextmenu",Gt))},0),L&&L(),U&&(ae=this.keepPopupPositionedRelativeTo({element:U,ePopup:c,hidePopup:Jn})),this.popupList.push({element:c,wrapper:Pe,hideFunc:Jn,stopAnchoringPromise:ae,instanceId:Wx++,isAnchored:!!U}),{hideFunc:Jn,stopAnchoringPromise:ae}},i.prototype.hasAnchoredPopup=function(){return $t(this.popupList,function(t){return t.isAnchored})},i.prototype.isEventFromCurrentPopup=function(t,s){var h=t.mouseEvent||t.touchEvent;if(!h)return!1;var m=rt(this.popupList,function(D){return D.element===s});if(-1===m)return!1;for(var S=m;S<this.popupList.length;S++)if(Wf(this.popupList[S].element,h))return!0;return this.isElementWithinCustomPopup(h.target)},i.prototype.isElementWithinCustomPopup=function(t){for(;t&&t!==document.body;){if(t.classList.contains("ag-custom-component-popup")||null===t.parentElement)return!0;t=t.parentElement}return!1},i.prototype.isEventSameChainAsOriginalEvent=function(t){var s=t.originalMouseEvent,l=t.mouseEvent,c=t.touchEvent,h=null;if(l?h=l:c&&(h=c.touches[0]),h&&s){var S=l?l.screenY:0,R=Math.abs(s.screenX-(l?l.screenX:0))<5,D=Math.abs(s.screenY-S)<5;if(R&&D)return!0}return!1},i.prototype.getWrapper=function(t){for(;!Cs(t,"ag-popup")&&t.parentElement;)t=t.parentElement;return Cs(t,"ag-popup")?t:null},i.prototype.setAlwaysOnTop=function(t,s){var l=this.getWrapper(t);!l||(kt(l,"ag-always-on-top",!!s),s&&this.bringPopupToFront(l))},i.prototype.bringPopupToFront=function(t){var s=this.getPopupParent(),l=Array.prototype.slice.call(s.querySelectorAll(".ag-popup")),c=l.length,h=Array.prototype.slice.call(s.querySelectorAll(".ag-popup.ag-always-on-top")),m=h.length,S=this.getWrapper(t);if(S&&!(c<=1)&&s.contains(t)){var R=l.indexOf(S);m?Cs(S,"ag-always-on-top")?R!==c-1&&jn(h).insertAdjacentElement("afterend",S):R!==c-m-1&&h[0].insertAdjacentElement("beforebegin",S):R!==c-1&&jn(l).insertAdjacentElement("afterend",S);var L={type:"popupToFront",api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),eWrapper:S};this.eventService.dispatchEvent(L)}},lc([H("environment")],i.prototype,"environment",void 0),lc([H("focusService")],i.prototype,"focusService",void 0),lc([H("ctrlsService")],i.prototype,"ctrlsService",void 0),lc([et],i.prototype,"postConstruct",null),lc([vt("popupService")],i)}(Ye),Ux=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Kg=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},zx=function(d,i){return function(t,s){i(t,s,d)}},vw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Ux(i,d),i.prototype.setBeans=function(t){this.logging=t.isDebug()},i.prototype.create=function(t){return new Wp(t,this.isLogging.bind(this))},i.prototype.isLogging=function(){return this.logging},Kg([zx(0,ki("gridOptionsWrapper"))],i.prototype,"setBeans",null),Kg([vt("loggerFactory")],i)}(Ye),Wp=function(){function d(i,t){this.name=i,this.isLoggingFunc=t}return d.prototype.isLogging=function(){return this.isLoggingFunc()},d.prototype.log=function(i){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+i)},d}(),on=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),J=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Yg=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return on(i,d),i.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(s){t.centerRowContainerCon=s.centerRowContainerCtrl})},i.prototype.getPreferredWidthForColumn=function(t,s){var l=this.getHeaderCellForColumn(t);if(!l)return-1;var c=document.createElement("span");c.style.position="fixed";var h=this.centerRowContainerCon.getContainerElement();h.appendChild(c),this.putRowCellsIntoDummyContainer(t,c),s||this.cloneItemIntoDummy(l,c);var m=c.offsetWidth;return h.removeChild(c),m+this.gridOptionsWrapper.getAutoSizePadding()},i.prototype.getHeaderCellForColumn=function(t){var s=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(l){var c=l.getHtmlElementForColumnHeader(t);null!=c&&(s=c)}),s},i.prototype.putRowCellsIntoDummyContainer=function(t,s){var l=this;this.rowRenderer.getAllCellsForColumn(t).forEach(function(h){return l.cloneItemIntoDummy(h,s)})},i.prototype.cloneItemIntoDummy=function(t,s){var l=t.cloneNode(!0);l.style.width="",l.style.position="static",l.style.left="";var c=document.createElement("div");Cs(l,"ag-header-cell")?(At(c,"ag-header"),At(c,"ag-header-row"),c.style.position="static"):At(c,"ag-row");for(var h=t.parentElement;h;){if(h.classList.contains("ag-header-row")||h.classList.contains("ag-row")){for(var m=0;m<h.classList.length;m++){var S=h.classList[m];"ag-row-position-absolute"!=S&&At(c,S)}break}h=h.parentElement}c.style.display="table-row",c.appendChild(l),s.appendChild(c)},J([H("rowRenderer")],i.prototype,"rowRenderer",void 0),J([H("ctrlsService")],i.prototype,"ctrlsService",void 0),J([H("rowCssClassCalculator")],i.prototype,"rowCssClassCalculator",void 0),J([et],i.prototype,"postConstruct",null),J([vt("autoWidthCalculator")],i)}(Ye),gw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),cc=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Qo=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return gw(i,d),i.prototype.addResizeBar=function(t){var s=this,l={dragStartPixels:t.dragStartPixels||0,eElement:t.eResizeBar,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this,t),onDragging:this.onDragging.bind(this,t)};return this.dragService.addDragSource(l,!0),function(){return s.dragService.removeDragSource(l)}},i.prototype.onDragStart=function(t,s){this.dragStartX=s.clientX,this.setResizeIcons();var l=s instanceof MouseEvent&&!0===s.shiftKey;t.onResizeStart(l)},i.prototype.setResizeIcons=function(){var t=this.ctrlsService.getGridCtrl();t.setResizeCursor(!0),t.disableUserSelect(!0)},i.prototype.onDragStop=function(t,s){t.onResizeEnd(this.resizeAmount),this.resetIcons()},i.prototype.resetIcons=function(){var t=this.ctrlsService.getGridCtrl();t.setResizeCursor(!1),t.disableUserSelect(!1)},i.prototype.onDragging=function(t,s){this.resizeAmount=s.clientX-this.dragStartX,t.onResizing(this.resizeAmount)},cc([H("dragService")],i.prototype,"dragService",void 0),cc([H("ctrlsService")],i.prototype,"ctrlsService",void 0),cc([vt("horizontalResizeService")],i)}(Ye),mw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),fu=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Up=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return mw(i,d),i.prototype.postConstruct=function(){this.ctrlsService.registerGridCtrl(this)},i.prototype.setComp=function(t,s,l){var c=this;this.view=t,this.eGridHostDiv=s,this.eGui=l,this.mouseEventService.stampTopLevelGridCompWithGridInstance(s),this.createManagedBean(new el(this.view)),this.addRtlSupport(),this.addManagedListener(this,$.EVENT_KEYBOARD_FOCUS,function(){c.view.addOrRemoveKeyboardFocusClass(!0)}),this.addManagedListener(this,$.EVENT_MOUSE_FOCUS,function(){c.view.addOrRemoveKeyboardFocusClass(!1)});var h=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(function(){return h()})},i.prototype.showDropZones=function(){return Kt.isRegistered(Y.GXE.RowGroupingModule)},i.prototype.showSideBar=function(){return Kt.isRegistered(Y.GXE.SideBarModule)},i.prototype.showStatusBar=function(){return Kt.isRegistered(Y.GXE.StatusBarModule)},i.prototype.showWatermark=function(){return Kt.isRegistered(Y.GXE.EnterpriseCoreModule)},i.prototype.onGridSizeChanged=function(){this.eventService.dispatchEvent({type:$.EVENT_GRID_SIZE_CHANGED,api:this.gridApi,columnApi:this.columnApi,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})},i.prototype.addRtlSupport=function(){var t=this.gridOptionsWrapper.isEnableRtl()?"ag-rtl":"ag-ltr";this.view.setRtlClass(t)},i.prototype.destroyGridUi=function(){this.view.destroyGridUi()},i.prototype.getGui=function(){return this.eGui},i.prototype.setResizeCursor=function(t){this.view.setCursor(t?"ew-resize":null)},i.prototype.disableUserSelect=function(t){this.view.setUserSelect(t?"none":null)},i.prototype.focusNextInnerContainer=function(t){var s=this.view.getFocusableContainers(),c=rt(s,function(h){return h.contains(document.activeElement)})+(t?-1:1);return!(c<0||c>=s.length)&&(0===c?this.focusGridHeader():this.focusService.focusInto(s[c]))},i.prototype.focusInnerElement=function(t){var s=this.view.getFocusableContainers();if(t){if(s.length>1)return this.focusService.focusInto(jn(s),!0);var l=jn(this.columnModel.getAllDisplayedColumns());if(this.focusService.focusGridView(l,!0))return!0}return this.focusGridHeader()},i.prototype.focusGridHeader=function(){var t=this.columnModel.getAllDisplayedColumns()[0];return!!t&&(t.getParent()&&(t=this.columnModel.getColumnGroupAtLevel(t,0)),this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:t}}),!0)},i.prototype.forceFocusOutOfContainer=function(t){void 0===t&&(t=!1),this.view.forceFocusOutOfContainer(t)},fu([H("columnApi")],i.prototype,"columnApi",void 0),fu([H("gridApi")],i.prototype,"gridApi",void 0),fu([H("focusService")],i.prototype,"focusService",void 0),fu([H("resizeObserverService")],i.prototype,"resizeObserverService",void 0),fu([H("columnModel")],i.prototype,"columnModel",void 0),fu([H("ctrlsService")],i.prototype,"ctrlsService",void 0),fu([H("mouseEventService")],i.prototype,"mouseEventService",void 0),fu([et],i.prototype,"postConstruct",null),i}(Ye),As=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),zp=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},$g=function(d){function i(t){var s=d.call(this)||this;s.skipTabGuardFocus=!1;var c=t.eTopGuard,h=t.eBottomGuard,m=t.focusInnerElement,S=t.onFocusIn,R=t.onFocusOut,D=t.shouldStopEventPropagation,L=t.onTabKeyDown,U=t.handleKeyDown,K=t.eFocusableElement;return s.comp=t.comp,s.eTopGuard=c,s.eBottomGuard=h,s.providedFocusInnerElement=m,s.eFocusableElement=K,s.providedFocusIn=S,s.providedFocusOut=R,s.providedShouldStopEventPropagation=D,s.providedOnTabKeyDown=L,s.providedHandleKeyDown=U,s}return As(i,d),i.prototype.postConstruct=function(){var t=this;this.createManagedBean(new Yo(this.eFocusableElement,{shouldStopEventPropagation:function(){return t.shouldStopEventPropagation()},onTabKeyDown:function(l){return t.onTabKeyDown(l)},handleKeyDown:function(l){return t.handleKeyDown(l)},onFocusIn:function(l){return t.onFocusIn(l)},onFocusOut:function(l){return t.onFocusOut(l)}})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(function(s){return t.addManagedListener(s,"focus",t.onFocus.bind(t))})},i.prototype.handleKeyDown=function(t){this.providedHandleKeyDown&&this.providedHandleKeyDown(t)},i.prototype.tabGuardsAreActive=function(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")},i.prototype.shouldStopEventPropagation=function(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()},i.prototype.activateTabGuards=function(){this.comp.setTabIndex(this.getGridTabIndex())},i.prototype.deactivateTabGuards=function(){this.comp.setTabIndex()},i.prototype.onFocus=function(t){if(this.skipTabGuardFocus)this.skipTabGuardFocus=!1;else{var s=t.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(s):this.focusInnerElement(s)}},i.prototype.onFocusIn=function(t){this.providedFocusIn&&this.providedFocusIn(t)||this.deactivateTabGuards()},i.prototype.onFocusOut=function(t){this.providedFocusOut&&this.providedFocusOut(t)||this.eFocusableElement.contains(t.relatedTarget)||this.activateTabGuards()},i.prototype.onTabKeyDown=function(t){var s=this;if(this.providedOnTabKeyDown)this.providedOnTabKeyDown(t);else if(!t.defaultPrevented){var l=this.tabGuardsAreActive();l&&this.deactivateTabGuards();var c=this.getNextFocusableElement(t.shiftKey);l&&setTimeout(function(){return s.activateTabGuards()},0),c&&(c.focus(),t.preventDefault())}},i.prototype.getGridTabIndex=function(){return this.gridOptionsWrapper.getGridTabIndex()},i.prototype.focusInnerElement=function(t){void 0===t&&(t=!1);var s=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(s.splice(0,1),s.splice(s.length-1,1)),s.length&&s[t?s.length-1:0].focus()},i.prototype.getNextFocusableElement=function(t){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,t)},i.prototype.forceFocusOutOfContainer=function(t){void 0===t&&(t=!1);var s=t?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,s.focus()},zp([H("focusService")],i.prototype,"focusService",void 0),zp([et],i.prototype,"postConstruct",null),i}(Ye),Xg=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),yw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Xg(i,d),i.prototype.initialiseTabGuard=function(t){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();var s=[this.eTopGuard,this.eBottomGuard],l={setTabIndex:function(h){s.forEach(function(m){return null!=h?m.setAttribute("tabIndex",h):m.removeAttribute("tabIndex")})}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new $g({comp:l,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:t.onFocusIn,onFocusOut:t.onFocusOut,focusInnerElement:t.focusInnerElement,handleKeyDown:t.handleKeyDown,onTabKeyDown:t.onTabKeyDown,shouldStopEventPropagation:t.shouldStopEventPropagation}))},i.prototype.createTabGuard=function(t){var s=document.createElement("div");return s.classList.add("ag-tab-guard"),s.classList.add("ag-tab-guard-"+t),Yi(s,"presentation"),s},i.prototype.addTabGuards=function(t,s){this.eFocusableElement.insertAdjacentElement("afterbegin",t),this.eFocusableElement.insertAdjacentElement("beforeend",s)},i.prototype.removeAllChildrenExceptTabGuards=function(){var t=[this.eTopGuard,this.eBottomGuard];co(this.getFocusableElement()),this.addTabGuards.apply(this,t)},i.prototype.forceFocusOutOfContainer=function(t){void 0===t&&(t=!1),this.tabGuardCtrl.forceFocusOutOfContainer(t)},i.prototype.appendChild=function(t,s){Na(t)||(t=t.getGui());var l=this.eBottomGuard;l?l.insertAdjacentElement("beforebegin",t):d.prototype.appendChild.call(this,t,s)},i}(hn),_w=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),jp=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Fd=function(d){function i(t){var s=d.call(this,void 0)||this;return s.eGridDiv=t,s}return _w(i,d),i.prototype.postConstruct=function(){var t=this;this.logger=this.loggerFactory.create("GridComp");var s={destroyGridUi:function(){return t.destroyBean(t)},setRtlClass:function(h){return At(t.getGui(),h)},addOrRemoveKeyboardFocusClass:function(h){return t.addOrRemoveCssClass(Wi.AG_KEYBOARD_FOCUS,h)},forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:function(h){t.getGui().style.userSelect=null!=h?h:"",t.getGui().style.webkitUserSelect=null!=h?h:""},setCursor:function(h){t.getGui().style.cursor=null!=h?h:""}};this.ctrl=this.createManagedBean(new Up);var l=this.createTemplate();this.setTemplate(l),this.ctrl.setComp(s,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:function(){},focusInnerElement:function(h){return t.ctrl.focusInnerElement(h)}})},i.prototype.insertGridIntoDom=function(){var t=this,s=this.getGui();this.eGridDiv.appendChild(s),this.addDestroyFunc(function(){t.eGridDiv.removeChild(s),t.logger.log("Grid removed from DOM")})},i.prototype.updateLayoutClasses=function(t,s){kt(this.eRootWrapperBody,Y.LBn.AUTO_HEIGHT,s.autoHeight),kt(this.eRootWrapperBody,Y.LBn.NORMAL,s.normal),kt(this.eRootWrapperBody,Y.LBn.PRINT,s.print),this.addOrRemoveCssClass(Y.LBn.AUTO_HEIGHT,s.autoHeight),this.addOrRemoveCssClass(Y.LBn.NORMAL,s.normal),this.addOrRemoveCssClass(Y.LBn.PRINT,s.print)},i.prototype.createTemplate=function(){return'<div class="ag-root-wrapper">\n                '+(this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"")+'\n                <div class="ag-root-wrapper-body" ref="rootWrapperBody">\n                    <ag-grid-body ref="gridBody"></ag-grid-body>\n                    '+(this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"")+"\n                </div>\n                "+(this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"")+"\n                <ag-pagination></ag-pagination>\n                "+(this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"")+"\n            </div>"},i.prototype.getFocusableElement=function(){return this.eRootWrapperBody},i.prototype.getFocusableContainers=function(){var t=[this.gridBodyComp.getGui()];return this.sideBarComp&&t.push(this.sideBarComp.getGui()),t.filter(function(s){return kl(s)})},jp([H("loggerFactory")],i.prototype,"loggerFactory",void 0),jp([He("gridBody")],i.prototype,"gridBodyComp",void 0),jp([He("sideBar")],i.prototype,"sideBarComp",void 0),jp([He("rootWrapperBody")],i.prototype,"eRootWrapperBody",void 0),jp([et],i.prototype,"postConstruct",null),i}(yw),qp=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),pu=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Kp=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.dragEndFunctions=[],t.dragSources=[],t}return qp(i,d),i.prototype.init=function(){this.logger=this.loggerFactory.create("DragService")},i.prototype.removeAllListeners=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},i.prototype.removeListener=function(t){var s=t.dragSource.eElement;s.removeEventListener("mousedown",t.mouseDownListener),t.touchEnabled&&s.removeEventListener("touchstart",t.touchStartListener,{passive:!0})},i.prototype.removeDragSource=function(t){var s=Li(this.dragSources,function(l){return l.dragSource===t});!s||(this.removeListener(s),ri(this.dragSources,s))},i.prototype.isDragging=function(){return this.dragging},i.prototype.addDragSource=function(t,s){var l=this;void 0===s&&(s=!1);var c=this.onMouseDown.bind(this,t);t.eElement.addEventListener("mousedown",c);var h=null,m=this.gridOptionsWrapper.isSuppressTouch();s&&!m&&t.eElement.addEventListener("touchstart",h=function(R){R.preventDefault(),l.onTouchStart(t,R)},{passive:!0}),this.dragSources.push({dragSource:t,mouseDownListener:c,touchStartListener:h,touchEnabled:s})},i.prototype.onTouchStart=function(t,s){var l=this;this.currentDragParams=t,this.dragging=!1;var c=s.touches[0];this.touchLastTime=c,this.touchStart=c;var m=function(U){return l.onTouchUp(U,t.eElement)},R=t.eElement,D=[{target:document,type:"touchmove",listener:function(U){U.cancelable&&U.preventDefault()},options:{passive:!1}},{target:R,type:"touchmove",listener:function(U){return l.onTouchMove(U,t.eElement)},options:{passive:!0}},{target:R,type:"touchend",listener:m,options:{passive:!0}},{target:R,type:"touchcancel",listener:m,options:{passive:!0}}];this.addTemporaryEvents(D),0===t.dragStartPixels&&this.onCommonMove(c,this.touchStart,t.eElement)},i.prototype.onMouseDown=function(t,s){var l=this,c=s;if(!(t.skipMouseEvent&&t.skipMouseEvent(s)||c._alreadyProcessedByDragService||(c._alreadyProcessedByDragService=!0,0!==s.button))){this.currentDragParams=t,this.dragging=!1,this.mouseStartEvent=s;var h=this.gridOptionsWrapper.getDocument();this.addTemporaryEvents([{target:h,type:"mousemove",listener:function(K){return l.onMouseMove(K,t.eElement)}},{target:h,type:"mouseup",listener:function(K){return l.onMouseUp(K,t.eElement)}},{target:h,type:"contextmenu",listener:function(K){return K.preventDefault()}}]),0===t.dragStartPixels&&this.onMouseMove(s,t.eElement)}},i.prototype.addTemporaryEvents=function(t){t.forEach(function(s){s.target.addEventListener(s.type,s.listener,s.options)}),this.dragEndFunctions.push(function(){t.forEach(function(s){s.target.removeEventListener(s.type,s.listener,s.options)})})},i.prototype.isEventNearStartEvent=function(t,s){var l=this.currentDragParams.dragStartPixels;return z_(t,s,Fe(l)?l:4)},i.prototype.getFirstActiveTouch=function(t){for(var s=0;s<t.length;s++)if(t[s].identifier===this.touchStart.identifier)return t[s];return null},i.prototype.onCommonMove=function(t,s,l){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(t,s))return;this.dragging=!0,this.eventService.dispatchEvent({type:$.EVENT_DRAG_STARTED,api:this.gridApi,columnApi:this.columnApi,target:l}),this.currentDragParams.onDragStart(s),this.currentDragParams.onDragging(s)}this.currentDragParams.onDragging(t)},i.prototype.onTouchMove=function(t,s){var l=this.getFirstActiveTouch(t.touches);!l||this.onCommonMove(l,this.touchStart,s)},i.prototype.onMouseMove=function(t,s){this.onCommonMove(t,this.mouseStartEvent,s)},i.prototype.onTouchUp=function(t,s){var l=this.getFirstActiveTouch(t.changedTouches);l||(l=this.touchLastTime),this.onUpCommon(l,s)},i.prototype.onMouseUp=function(t,s){this.onUpCommon(t,s)},i.prototype.onUpCommon=function(t,s){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(t),this.eventService.dispatchEvent({type:$.EVENT_DRAG_STOPPED,api:this.gridApi,columnApi:this.columnApi,target:s})),this.mouseStartEvent=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(function(c){return c()}),this.dragEndFunctions.length=0},pu([H("loggerFactory")],i.prototype,"loggerFactory",void 0),pu([H("columnApi")],i.prototype,"columnApi",void 0),pu([H("gridApi")],i.prototype,"gridApi",void 0),pu([et],i.prototype,"init",null),pu([Fi],i.prototype,"removeAllListeners",null),pu([vt("dragService")],i)}(Ye),Jg=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Zg=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Cw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}var t;return Jg(i,d),t=i,i.prototype.progressSort=function(s,l,c){void 0===c&&(c="api");var h=this.getNextSortDirection(s);this.setSortForColumn(s,h,l,c)},i.prototype.setSortForColumn=function(s,l,c,h){void 0===h&&(h="api"),l!==fe.SORT_ASC&&l!==fe.SORT_DESC&&(l=null),s.setSort(l,h),c&&!this.gridOptionsWrapper.isSuppressMultiSort()||this.clearSortBarThisColumn(s,h),this.updateSortIndex(s),this.dispatchSortChangedEvents()},i.prototype.updateSortIndex=function(s){var l=this.getColumnsWithSortingOrdered(),c=0;l.forEach(function(m){m!==s&&(m.setSortIndex(c),c++)}),s.getSort()&&s.setSortIndex(c),this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(m){return null==m.getSort()}).forEach(function(m){return m.setSortIndex()})},i.prototype.onSortChanged=function(){this.dispatchSortChangedEvents()},i.prototype.isSortActive=function(){var l=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(c){return!!c.getSort()});return l&&l.length>0},i.prototype.dispatchSortChangedEvents=function(){this.eventService.dispatchEvent({type:$.EVENT_SORT_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.clearSortBarThisColumn=function(s,l){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(c){c!==s&&c.setSort(void 0,l)})},i.prototype.getNextSortDirection=function(s){var l;if(l=s.getColDef().sortingOrder?s.getColDef().sortingOrder:this.gridOptionsWrapper.getSortingOrder()?this.gridOptionsWrapper.getSortingOrder():t.DEFAULT_SORTING_ORDER,!Array.isArray(l)||l.length<=0)return console.warn("ag-grid: sortingOrder must be an array with at least one element, currently it's "+l),null;var S,c=l.indexOf(s.getSort());return t.DEFAULT_SORTING_ORDER.indexOf(S=c<0||c==l.length-1?l[0]:l[c+1])<0?(console.warn("ag-grid: invalid sort type "+S),null):S},i.prototype.getColumnsWithSortingOrdered=function(){var s=this.columnModel.getPrimaryAndSecondaryAndAutoColumns(),l=s.filter(function(h){return!!h.getSort()}),c={};return s.forEach(function(h,m){return c[h.getId()]=m}),l.sort(function(h,m){var S=h.getSortIndex(),R=m.getSortIndex();return null!=S&&null!=R?S-R:null==S&&null==R?c[h.getId()]>c[m.getId()]?1:-1:null==R?-1:1}),l},i.prototype.getSortModel=function(){return this.getColumnsWithSortingOrdered().map(function(s){return{sort:s.getSort(),colId:s.getId()}})},i.prototype.getSortOptions=function(){return this.getColumnsWithSortingOrdered().map(function(s){return{sort:s.getSort(),column:s}})},i.DEFAULT_SORTING_ORDER=[fe.SORT_ASC,fe.SORT_DESC,null],Zg([H("columnModel")],i.prototype,"columnModel",void 0),Zg([H("columnApi")],i.prototype,"columnApi",void 0),Zg([H("gridApi")],i.prototype,"gridApi",void 0),t=Zg([vt("sortController")],i)}(Ye),jx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),ww=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Sw=function(d){function i(){var s=null!==d&&d.apply(this,arguments)||this;return s.gridInstanceId=t.gridInstanceSequence.next(),s}var t;return jx(i,d),t=i,i.prototype.stampTopLevelGridCompWithGridInstance=function(s){s[t.GRID_DOM_KEY]=this.gridInstanceId},i.prototype.getRenderedCellForEvent=function(s){return Vf(this.gridOptionsWrapper,s,Qi.DOM_DATA_KEY_CELL_CTRL)},i.prototype.isEventFromThisGrid=function(s){return this.isElementInThisGrid(s.target)},i.prototype.isElementInThisGrid=function(s){for(var l=s;l;){var c=l[t.GRID_DOM_KEY];if(Fe(c))return c===this.gridInstanceId;l=l.parentElement}return!1},i.prototype.getCellPositionForEvent=function(s){var l=this.getRenderedCellForEvent(s);return l?l.getCellPosition():null},i.prototype.getNormalisedPosition=function(s){var h,m,l=this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_NORMAL;if(null!=s.clientX||null!=s.clientY?(h=s.clientX,m=s.clientY):(h=s.x,m=s.y),l){var S=this.ctrlsService.getGridBodyCtrl(),R=S.getScrollFeature().getVScrollPosition();h+=S.getScrollFeature().getHScrollPosition().left,m+=R.top}return{x:h,y:m}},i.gridInstanceSequence=new xs,i.GRID_DOM_KEY="__ag_grid_instance",ww([H("ctrlsService")],i.prototype,"ctrlsService",void 0),t=ww([vt("mouseEventService")],i)}(Ye),bw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Yp=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Ew=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return bw(i,d),i.prototype.getNextCellToFocus=function(t,s){for(var l=s,c=!1;!c;){switch(t){case Xe.UP:l=this.getCellAbove(l);break;case Xe.DOWN:l=this.getCellBelow(l);break;case Xe.RIGHT:l=this.gridOptionsWrapper.isEnableRtl()?this.getCellToLeft(l):this.getCellToRight(l);break;case Xe.LEFT:l=this.gridOptionsWrapper.isEnableRtl()?this.getCellToRight(l):this.getCellToLeft(l);break;default:l=null,console.warn("AG Grid: unknown key for navigation "+t)}c=!l||this.isCellGoodToFocusOn(l)}return l},i.prototype.isCellGoodToFocusOn=function(t){var l,s=t.column;switch(t.rowPinned){case fe.PINNED_TOP:l=this.pinnedRowModel.getPinnedTopRow(t.rowIndex);break;case fe.PINNED_BOTTOM:l=this.pinnedRowModel.getPinnedBottomRow(t.rowIndex);break;default:l=this.rowModel.getRow(t.rowIndex)}return!!l&&!s.isSuppressNavigable(l)},i.prototype.getCellToLeft=function(t){if(!t)return null;var s=this.columnModel.getDisplayedColBefore(t.column);return s?{rowIndex:t.rowIndex,column:s,rowPinned:t.rowPinned}:null},i.prototype.getCellToRight=function(t){if(!t)return null;var s=this.columnModel.getDisplayedColAfter(t.column);return s?{rowIndex:t.rowIndex,column:s,rowPinned:t.rowPinned}:null},i.prototype.getRowBelow=function(t){var s=t.rowIndex,l=t.rowPinned;if(this.isLastRowInContainer(t))switch(l){case fe.PINNED_BOTTOM:return null;case fe.PINNED_TOP:return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender(fe.PINNED_BOTTOM)?{rowIndex:0,rowPinned:fe.PINNED_BOTTOM}:null;default:return this.pinnedRowModel.isRowsToRender(fe.PINNED_BOTTOM)?{rowIndex:0,rowPinned:fe.PINNED_BOTTOM}:null}return{rowIndex:s+1,rowPinned:l}},i.prototype.getCellBelow=function(t){if(!t)return null;var s=this.getRowBelow(t);return s?{rowIndex:s.rowIndex,column:t.column,rowPinned:s.rowPinned}:null},i.prototype.isLastRowInContainer=function(t){var s=t.rowPinned,l=t.rowIndex;return s===fe.PINNED_TOP?this.pinnedRowModel.getPinnedTopRowData().length-1<=l:s===fe.PINNED_BOTTOM?this.pinnedRowModel.getPinnedBottomRowData().length-1<=l:this.paginationProxy.getPageLastRow()<=l},i.prototype.getRowAbove=function(t){var s=t.rowIndex,l=t.rowPinned;return(l?0===s:s===this.paginationProxy.getPageFirstRow())?l===fe.PINNED_TOP?null:l&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender(fe.PINNED_TOP)?this.getLastFloatingTopRow():null:{rowIndex:s-1,rowPinned:l}},i.prototype.getCellAbove=function(t){if(!t)return null;var s=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});return s?{rowIndex:s.rowIndex,column:t.column,rowPinned:s.rowPinned}:null},i.prototype.getLastBodyCell=function(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}},i.prototype.getLastFloatingTopRow=function(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:fe.PINNED_TOP}},i.prototype.getNextTabbedCell=function(t,s){return s?this.getNextTabbedCellBackwards(t):this.getNextTabbedCellForwards(t)},i.prototype.getNextTabbedCellForwards=function(t){var s=this.columnModel.getAllDisplayedColumns(),l=t.rowIndex,c=t.rowPinned,h=this.columnModel.getDisplayedColAfter(t.column);if(!h){h=s[0];var m=this.getRowBelow(t);if(we(m)||!m.rowPinned&&!this.paginationProxy.isRowInPage(m))return null;l=m?m.rowIndex:null,c=m?m.rowPinned:null}return{rowIndex:l,column:h,rowPinned:c}},i.prototype.getNextTabbedCellBackwards=function(t){var s=this.columnModel.getAllDisplayedColumns(),l=t.rowIndex,c=t.rowPinned,h=this.columnModel.getDisplayedColBefore(t.column);if(!h){h=jn(s);var m=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});if(we(m)||!m.rowPinned&&!this.paginationProxy.isRowInPage(m))return null;l=m?m.rowIndex:null,c=m?m.rowPinned:null}return{rowIndex:l,column:h,rowPinned:c}},Yp([H("columnModel")],i.prototype,"columnModel",void 0),Yp([H("rowModel")],i.prototype,"rowModel",void 0),Yp([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Yp([H("paginationProxy")],i.prototype,"paginationProxy",void 0),Yp([vt("cellNavigationService")],i)}(Ye),WM=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Qg=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},em=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return WM(i,d),i.prototype.formatValue=function(t,s,l,c,h,m){void 0===m&&(m=!0);var R,S=null,D=t.getColDef();if(h?R=h:m&&(R=s&&s.rowPinned&&D.pinnedRowValueFormatter?D.pinnedRowValueFormatter:D.valueFormatter),R){var L={value:c,node:s,data:s?s.data:null,colDef:D,column:t,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};L.$scope=l,S=this.expressionService.evaluate(R,L)}else if(D.refData)return D.refData[c]||"";return null==S&&Array.isArray(c)&&(S=c.join(", ")),S},Qg([H("expressionService")],i.prototype,"expressionService",void 0),Qg([vt("valueFormatterService")],i)}(Ye),qx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),$p=function(d){function i(t){return d.call(this,t,"ag-radio-button","radio")||this}return qx(i,d),i.prototype.isSelected=function(){return this.eInput.checked},i.prototype.toggle=function(){this.eInput.disabled||this.isSelected()||this.setValue(!0)},i.prototype.addInputListeners=function(){d.prototype.addInputListeners.call(this),this.addManagedListener(this.eventService,$.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))},i.prototype.onChange=function(t){t.selected&&t.name&&this.eInput.name&&this.eInput.name===t.name&&t.id&&this.eInput.id!==t.id&&this.setValue(!1,!0)},i}(Zu),UM=["mouseover","mouseout","mouseenter","mouseleave"],Kx=function(){function d(){this.isOutsideAngular=function(i){return Tn(UM,i)}}return d.prototype.setTimeout=function(i,t){window.setTimeout(i,t)},d.prototype.setInterval=function(i,t){return new Qr(function(s){s(window.setInterval(i,t))})},d.prototype.addEventListener=function(i,t,s,l){i.addEventListener(t,s,l)},d.prototype.dispatchEvent=function(i,t,s){t()},d.prototype.frameworkComponent=function(i){return null},d}(),zM=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Xp=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Yx=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return zM(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))},i.prototype.onDisplayedColumnsChanged=function(){this.update()},i.prototype.onDisplayedColumnsWidthChanged=function(){this.update()},i.prototype.update=function(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)},i.prototype.updateImpl=function(){var t=this.ctrlsService.getCenterRowContainerCtrl();if(t){var s={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(s)}},i.prototype.setScrollsVisible=function(t){this.horizontalScrollShowing===t.horizontalScrollShowing&&this.verticalScrollShowing===t.verticalScrollShowing||(this.horizontalScrollShowing=t.horizontalScrollShowing,this.verticalScrollShowing=t.verticalScrollShowing,this.eventService.dispatchEvent({type:$.EVENT_SCROLL_VISIBILITY_CHANGED,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.isHorizontalScrollShowing=function(){return this.horizontalScrollShowing},i.prototype.isVerticalScrollShowing=function(){return this.verticalScrollShowing},Xp([H("columnApi")],i.prototype,"columnApi",void 0),Xp([H("gridApi")],i.prototype,"gridApi",void 0),Xp([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Xp([et],i.prototype,"postConstruct",null),Xp([vt("scrollVisibleService")],i)}(Ye),jM=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),$x=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Xx=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return jM(i,d),i.prototype.processAllCellClasses=function(t,s,l,c){this.processClassRules(t.cellClassRules,s,l,c),this.processStaticCellClasses(t,s,l)},i.prototype.processClassRules=function(t,s,l,c){if(null!=t)for(var h=Object.keys(t),m={},S={},R=function(K){var Te,ee=h[K],ae=t[ee];"string"==typeof ae?Te=D.expressionService.evaluate(ae,s):"function"==typeof ae&&(Te=ae(s)),ee.split(" ").forEach(function(Ve){null==Ve||""==Ve.trim()||(Te?m[Ve]=!0:S[Ve]=!0)}),c&&Object.keys(S).forEach(c),Object.keys(m).forEach(l)},D=this,L=0;L<h.length;L++)R(L)},i.prototype.getStaticCellClasses=function(t,s){var c,l=t.cellClass;return l?("string"==typeof(c="function"==typeof l?(0,t.cellClass)(s):l)&&(c=[c]),c):[]},i.prototype.processStaticCellClasses=function(t,s,l){this.getStaticCellClasses(t,s).forEach(function(h){l(h)})},$x([H("expressionService")],i.prototype,"expressionService",void 0),$x([vt("stylingService")],i)}(Ye),qM=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),xw=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},hu=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return qM(i,d),i.prototype.setMouseOver=function(t){this.selectedColumns=t,this.eventService.dispatchEvent({type:$.EVENT_COLUMN_HOVER_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.clearMouseOver=function(){this.selectedColumns=null,this.eventService.dispatchEvent({type:$.EVENT_COLUMN_HOVER_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.isHovered=function(t){return!!this.selectedColumns&&this.selectedColumns.indexOf(t)>=0},xw([H("columnApi")],i.prototype,"columnApi",void 0),xw([H("gridApi")],i.prototype,"gridApi",void 0),xw([vt("columnHoverService")],i)}(Ye),tm=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),nm=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Rw=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.executeNextFuncs=[],t.executeLaterFuncs=[],t.active=!1,t.animationThreadCount=0,t}return tm(i,d),i.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(s){return t.gridBodyCtrl=s.gridBodyCtrl})},i.prototype.isActive=function(){return this.active},i.prototype.start=function(){this.active||this.gridOptionsWrapper.isSuppressColumnMoveAnimation()||this.gridOptionsWrapper.isEnableRtl()||(this.ensureAnimationCssClassPresent(),this.active=!0)},i.prototype.finish=function(){!this.active||(this.flush(),this.active=!1)},i.prototype.executeNextVMTurn=function(t){this.active?this.executeNextFuncs.push(t):t()},i.prototype.executeLaterVMTurn=function(t){this.active?this.executeLaterFuncs.push(t):t()},i.prototype.ensureAnimationCssClassPresent=function(){var t=this;this.animationThreadCount++;var s=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(function(){t.animationThreadCount===s&&t.gridBodyCtrl.setColumnMovingCss(!1)})},i.prototype.flush=function(){var t=this.executeNextFuncs;this.executeNextFuncs=[];var s=this.executeLaterFuncs;this.executeLaterFuncs=[],(0!==t.length||0!==s.length)&&(window.setTimeout(function(){return t.forEach(function(l){return l()})},0),window.setTimeout(function(){return s.forEach(function(l){return l()})},300))},nm([H("ctrlsService")],i.prototype,"ctrlsService",void 0),nm([et],i.prototype,"postConstruct",null),nm([vt("columnAnimationService")],i)}(Ye),rm=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Jp=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},im=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}var t;return rm(i,d),t=i,i.prototype.createAutoGroupColumns=function(s){var l=this,c=[],h=this.gridOptionsWrapper.isTreeData(),m=this.gridOptionsWrapper.isGroupMultiAutoColumn();return h&&m&&(console.warn("AG Grid: you cannot mix groupMultiAutoColumn with treeData, only one column can be used to display groups when doing tree data"),m=!1),m?s.forEach(function(S,R){c.push(l.createOneAutoGroupColumn(S,R))}):c.push(this.createOneAutoGroupColumn()),c},i.prototype.createOneAutoGroupColumn=function(s,l){var h,c=this.generateDefaultColDef(s);h=s?fe.GROUP_AUTO_COLUMN_ID+"-"+s.getId():t.GROUP_AUTO_COLUMN_BUNDLE_ID,uo(c,this.gridOptionsWrapper.getAutoGroupColumnDef()),(c=this.columnFactory.mergeColDefs(c)).colId=h,this.gridOptionsWrapper.isTreeData()||we(c.field)&&we(c.valueGetter)&&we(c.filterValueGetter)&&(c.filter=!1),l&&l>0&&(c.headerCheckboxSelection=!1);var R=new Pn(c,null,h,!0);return this.context.createBean(R),R},i.prototype.generateDefaultColDef=function(s){var l=this.gridOptionsWrapper.getAutoGroupColumnDef(),h={headerName:this.gridOptionsWrapper.getLocaleTextFunc()("group","Group")};if(l&&(l.cellRenderer||l.cellRendererFramework||l.cellRendererSelector)||(h.cellRenderer="agGroupCellRenderer"),s){var S=s.getColDef();ii(h,{headerName:this.columnModel.getDisplayNameForColumn(s,"header"),headerValueGetter:S.headerValueGetter}),S.cellRenderer&&ii(h,{cellRendererParams:{innerRenderer:S.cellRenderer,innerRendererParams:S.cellRendererParams}}),h.showRowGroup=s.getColId()}else h.showRowGroup=!0;return h},i.GROUP_AUTO_COLUMN_BUNDLE_ID=fe.GROUP_AUTO_COLUMN_ID,Jp([H("columnModel")],i.prototype,"columnModel",void 0),Jp([H("columnFactory")],i.prototype,"columnFactory",void 0),t=Jp([vt("autoGroupColService")],i)}(Ye),Jx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),ea=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},om=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.currentPage=0,t.topDisplayedRowIndex=0,t.bottomDisplayedRowIndex=0,t.pixelOffset=0,t.masterRowCount=0,t}return Jx(i,d),i.prototype.postConstruct=function(){this.active=this.gridOptionsWrapper.isPagination(),this.paginateChildRows=this.gridOptionsWrapper.isPaginateChildRows(),this.addManagedListener(this.eventService,$.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(this.gridOptionsWrapper,"paginationPageSize",this.onPaginationPageSizeChanged.bind(this)),this.onModelUpdated()},i.prototype.ensureRowHeightsValid=function(t,s,l,c){var h=this.rowModel.ensureRowHeightsValid(t,s,this.getPageFirstRow(),this.getPageLastRow());return h&&this.calculatePages(),h},i.prototype.onModelUpdated=function(t){this.calculatePages(),this.eventService.dispatchEvent({type:$.EVENT_PAGINATION_CHANGED,animate:!!t&&t.animate,newData:!!t&&t.newData,newPage:!!t&&t.newPage,keepRenderedRows:!!t&&t.keepRenderedRows,api:this.gridApi,columnApi:this.columnApi})},i.prototype.onPaginationPageSizeChanged=function(){this.calculatePages(),this.eventService.dispatchEvent({type:$.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,keepRenderedRows:!0,api:this.gridApi,columnApi:this.columnApi})},i.prototype.goToPage=function(t){this.active&&this.currentPage!==t&&(this.currentPage=t,this.onModelUpdated({type:$.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.getPixelOffset=function(){return this.pixelOffset},i.prototype.getRow=function(t){return this.rowModel.getRow(t)},i.prototype.getRowNode=function(t){return this.rowModel.getRowNode(t)},i.prototype.getRowIndexAtPixel=function(t){return this.rowModel.getRowIndexAtPixel(t)},i.prototype.getCurrentPageHeight=function(){return we(this.topRowBounds)||we(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)},i.prototype.getCurrentPagePixelRange=function(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}},i.prototype.isRowPresent=function(t){return!!this.rowModel.isRowPresent(t)&&t.rowIndex>=this.topDisplayedRowIndex&&t.rowIndex<=this.bottomDisplayedRowIndex},i.prototype.isEmpty=function(){return this.rowModel.isEmpty()},i.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},i.prototype.getNodesInRangeForSelection=function(t,s){return this.rowModel.getNodesInRangeForSelection(t,s)},i.prototype.forEachNode=function(t){return this.rowModel.forEachNode(t)},i.prototype.getType=function(){return this.rowModel.getType()},i.prototype.getRowBounds=function(t){var s=this.rowModel.getRowBounds(t);return s.rowIndex=t,s},i.prototype.getPageFirstRow=function(){return this.topRowBounds?this.topRowBounds.rowIndex:-1},i.prototype.getPageLastRow=function(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1},i.prototype.getRowCount=function(){return this.rowModel.getRowCount()},i.prototype.getPageForIndex=function(t){return Math.floor(t/this.pageSize)},i.prototype.goToPageWithIndex=function(t){if(this.active){var s=this.getPageForIndex(t);this.goToPage(s)}},i.prototype.isRowInPage=function(t){return!this.active||this.getPageForIndex(t.rowIndex)===this.currentPage},i.prototype.isLastPageFound=function(){return this.rowModel.isLastRowIndexKnown()},i.prototype.getCurrentPage=function(){return this.currentPage},i.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},i.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},i.prototype.goToFirstPage=function(){this.goToPage(0)},i.prototype.goToLastPage=function(){var t=this.rowModel.getRowCount(),s=Math.floor(t/this.pageSize);this.goToPage(s)},i.prototype.getPageSize=function(){return this.pageSize},i.prototype.getTotalPages=function(){return this.totalPages},i.prototype.setPageSize=function(){this.pageSize=this.gridOptionsWrapper.getPaginationPageSize(),(null==this.pageSize||this.pageSize<1)&&(this.pageSize=100)},i.prototype.calculatePages=function(){this.active?(this.setPageSize(),this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly()):this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(Fe(this.topRowBounds)?this.topRowBounds.rowTop:0)},i.prototype.setPixelOffset=function(t){this.pixelOffset!==t&&(this.pixelOffset=t,this.eventService.dispatchEvent({type:$.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))},i.prototype.setZeroRows=function(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0},i.prototype.calculatePagesMasterRowsOnly=function(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)this.setZeroRows();else{var t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!Ni(this.currentPage)||this.currentPage<0)&&(this.currentPage=0);var l=this.pageSize*(this.currentPage+1)-1;if(l>t&&(l=t),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(this.pageSize*this.currentPage),l===t)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{var c=this.rowModel.getTopLevelRowDisplayedIndex(l+1);this.bottomDisplayedRowIndex=c-1}}},i.prototype.getMasterRowCount=function(){return this.masterRowCount},i.prototype.calculatePagesAllRows=function(){if(this.masterRowCount=this.rowModel.getRowCount(),0!==this.masterRowCount){var t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!Ni(this.currentPage)||this.currentPage<0)&&(this.currentPage=0),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>t&&(this.bottomDisplayedRowIndex=t)}else this.setZeroRows()},i.prototype.calculatedPagesNotActive=function(){this.pageSize=this.rowModel.getRowCount(),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1},ea([H("rowModel")],i.prototype,"rowModel",void 0),ea([H("columnApi")],i.prototype,"columnApi",void 0),ea([H("gridApi")],i.prototype,"gridApi",void 0),ea([et],i.prototype,"postConstruct",null),ea([vt("paginationProxy")],i)}(Ye),Zx=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),kd=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Qx=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Zx(i,d),i.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(s){t.centerRowContainerCon=s.centerRowContainerCtrl,t.addManagedListener(t.eventService,$.EVENT_BODY_HEIGHT_CHANGED,t.onBodyHeightChanged.bind(t)),t.addManagedListener(t.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,t.onScrollVisibilityChanged.bind(t)),t.checkPageSize()})},i.prototype.notActive=function(){return!this.gridOptionsWrapper.isPaginationAutoPageSize()},i.prototype.onScrollVisibilityChanged=function(){this.checkPageSize()},i.prototype.onBodyHeightChanged=function(){this.checkPageSize()},i.prototype.checkPageSize=function(){if(!this.notActive()){var t=this.gridOptionsWrapper.getRowHeightAsNumber(),s=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(s>0){var l=Math.floor(s/t);this.gridOptionsWrapper.setProperty("paginationPageSize",l)}}},kd([H("ctrlsService")],i.prototype,"ctrlsService",void 0),kd([et],i.prototype,"postConstruct",null),kd([vt("paginationAutoPageSizeService")],i)}(Ye),Tw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Dw=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Aw=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.cacheVersion=0,t}return Tw(i,d),i.prototype.init=function(){this.active=this.gridOptionsWrapper.isValueCache(),this.neverExpires=this.gridOptionsWrapper.isValueCacheNeverExpires()},i.prototype.onDataChanged=function(){this.neverExpires||this.expire()},i.prototype.expire=function(){this.cacheVersion++},i.prototype.setValue=function(t,s,l){this.active&&(t.__cacheVersion!==this.cacheVersion&&(t.__cacheVersion=this.cacheVersion,t.__cacheData={}),t.__cacheData[s]=l)},i.prototype.getValue=function(t,s){if(this.active&&t.__cacheVersion===this.cacheVersion)return t.__cacheData[s]},Dw([et],i.prototype,"init",null),Dw([vt("valueCache")],i)}(Ye),Nd=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ms=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},am=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Nd(i,d),i.prototype.init=function(){this.rowModel.getType()===fe.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,$.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},i.prototype.onCellValueChanged=function(t){t.source!==fe.SOURCE_PASTE&&this.doChangeDetection(t.node,t.column)},i.prototype.doChangeDetection=function(t,s){if(!this.gridOptionsWrapper.isSuppressChangeDetection()){if(this.clientSideRowModel&&!t.isRowPinned()){var l=this.gridOptionsWrapper.isAggregateOnlyChangedColumns(),c=new Ot(l,this.clientSideRowModel.getRootNode());c.addParentNode(t.parent,[s]),this.clientSideRowModel.doAggregate(c)}this.rowRenderer.refreshCells()}},Ms([H("rowModel")],i.prototype,"rowModel",void 0),Ms([H("rowRenderer")],i.prototype,"rowRenderer",void 0),Ms([et],i.prototype,"init",null),Ms([vt("changeDetectionService")],i)}(Ye),dc=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Os=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},fc=function(d,i){return function(t,s){i(t,s,d)}},Mw=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.consuming=!1,t}return dc(i,d),i.prototype.setBeans=function(t){this.logger=t.create("AlignedGridsService")},i.prototype.init=function(){this.addManagedListener(this.eventService,$.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},i.prototype.fireEvent=function(t){if(!this.consuming){var s=this.gridOptionsWrapper.getAlignedGrids();s&&s.forEach(function(l){if(l.api){var c=l.api.__getAlignedGridService();t(c)}})}},i.prototype.onEvent=function(t){this.consuming=!0,t(),this.consuming=!1},i.prototype.fireColumnEvent=function(t){this.fireEvent(function(s){s.onColumnEvent(t)})},i.prototype.fireScrollEvent=function(t){"horizontal"===t.direction&&this.fireEvent(function(s){s.onScrollEvent(t)})},i.prototype.onScrollEvent=function(t){var s=this;this.onEvent(function(){s.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(t.left)})},i.prototype.getMasterColumns=function(t){var s=[];return t.columns?t.columns.forEach(function(l){s.push(l)}):t.column&&s.push(t.column),s},i.prototype.getColumnIds=function(t){var s=[];return t.columns?t.columns.forEach(function(l){s.push(l.getColId())}):t.column&&s.push(t.column.getColId()),s},i.prototype.onColumnEvent=function(t){var s=this;this.onEvent(function(){switch(t.type){case $.EVENT_COLUMN_MOVED:case $.EVENT_COLUMN_VISIBLE:case $.EVENT_COLUMN_PINNED:case $.EVENT_COLUMN_RESIZED:s.processColumnEvent(t);break;case $.EVENT_COLUMN_GROUP_OPENED:s.processGroupOpenedEvent(t);break;case $.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}})},i.prototype.processGroupOpenedEvent=function(t){var s=t.columnGroup,l=null;if(s){var c=s.getGroupId();l=this.columnModel.getOriginalColumnGroup(c)}s&&!l||(this.logger.log("onColumnEvent-> processing "+t+" expanded = "+s.isExpanded()),this.columnModel.setColumnGroupOpened(l,s.isExpanded(),"alignedGridChanged"))},i.prototype.processColumnEvent=function(t){var s=this,l=t.column,c=null;if(l&&(c=this.columnModel.getPrimaryColumn(l.getColId())),!l||c){var h=this.getMasterColumns(t);switch(t.type){case $.EVENT_COLUMN_MOVED:var m=t,R=t.columnApi.getColumnState().map(function(Te){return{colId:Te.colId}});this.columnModel.applyColumnState({state:R,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+t.type+" toIndex = "+m.toIndex);break;case $.EVENT_COLUMN_VISIBLE:var D=t;R=t.columnApi.getColumnState().map(function(We){return{colId:We.colId,hide:We.hide}}),this.columnModel.applyColumnState({state:R},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+t.type+" visible = "+D.visible);break;case $.EVENT_COLUMN_PINNED:var L=t;R=t.columnApi.getColumnState().map(function(We){return{colId:We.colId,pinned:We.pinned}}),this.columnModel.applyColumnState({state:R},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+t.type+" pinned = "+L.pinned);break;case $.EVENT_COLUMN_RESIZED:var U=t;h.forEach(function(Te){s.logger.log("onColumnEvent-> processing "+t.type+" actualWidth = "+Te.getActualWidth());var Ve=[{key:Te.getColId(),newWidth:Te.getActualWidth()}];s.columnModel.setColumnWidths(Ve,!1,U.finished,"alignedGridChanged")})}var ee=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing(),ae=this.gridOptionsWrapper.getAlignedGrids();ae&&ae.forEach(function(Te){Te.api&&Te.api.setAlwaysShowVerticalScroll(ee)})}},Os([H("columnModel")],i.prototype,"columnModel",void 0),Os([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Os([fc(0,ki("loggerFactory"))],i.prototype,"setBeans",null),Os([et],i.prototype,"init",null),Os([vt("alignedGridsService")],i)}(Ye),Ow=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),sm=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},um=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Ow(i,d),i.prototype.adaptFunction=function(t,s){var l=this.componentMetadataProvider.retrieve(t);return l&&l.functionAdapter?l.functionAdapter(s):null},i.prototype.adaptCellRendererFunction=function(t){return function(){function l(){}return l.prototype.refresh=function(c){return!1},l.prototype.getGui=function(){var c=t(this.params),h=typeof c;return"string"===h||"number"===h||"boolean"===h?ca("<span>"+c+"</span>"):null==c?ca("<span></span>"):c},l.prototype.init=function(c){this.params=c},l}()},i.prototype.doesImplementIComponent=function(t){return!!t&&t.prototype&&"getGui"in t.prototype},sm([H("componentMetadataProvider")],i.prototype,"componentMetadataProvider",void 0),sm([vt("agComponentUtils")],i)}(Ye),lm=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Zp=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Qp=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return lm(i,d),i.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},pinnedRowCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}},i.prototype.retrieve=function(t){return this.componentMetaData[t]},Zp([H("agComponentUtils")],i.prototype,"agComponentUtils",void 0),Zp([et],i.prototype,"postConstruct",null),Zp([vt("componentMetadataProvider")],i)}(Ye),eR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),cm=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Lw={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:20,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:56,headerCellMinWidth:48,listItemHeight:32,rowHeight:48,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:32,headerCellMinWidth:24,listItemHeight:24,rowHeight:28,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:48,headerCellMinWidth:36,listItemHeight:24,rowHeight:42,chartMenuPanelWidth:240}},Fw={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},Gd={},yo=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return eR(i,d),i.prototype.getSassVariable=function(t,s){var l="ag-theme-"+(t.match("material")?"material":t.match("balham")?"balham":t.match("alpine")?"alpine":"custom"),c=Lw[l][s],h=0;Gd[t]||(Gd[t]={});var m=Gd[t][s];if(null!=m)return m;if(Fw[s]){var S=Fw[s],R=document.createElement("div");At(R,t),R.style.position="absolute";var D=S.reduce(function(U,K){var ee=document.createElement("div");return ee.style.position="static",At(ee,K),U.appendChild(ee),ee},R);if(document.body){document.body.appendChild(R);var L=-1!==s.toLowerCase().indexOf("height")?"height":"width";h=parseInt(window.getComputedStyle(D)[L],10),document.body.removeChild(R)}}return Gd[t][s]=h||c,Gd[t][s]},i.prototype.isThemeDark=function(){var t=this.getTheme().theme;return!!t&&t.indexOf("dark")>=0},i.prototype.chartMenuPanelWidth=function(){var t=this.getTheme().themeFamily;return this.getSassVariable(t,"chartMenuPanelWidth")},i.prototype.getTheme=function(){for(var t=/\bag-(material|(?:theme-([\w\-]*)))\b/,s=this.eGridDiv,l=null;s&&!(l=t.exec(s.className));)s=s.parentElement||void 0;if(!l)return{};var c=l[0];if(void 0===l[2]){var m=c.replace("ag-","ag-theme-");mn(function(){return console.warn("AG Grid: As of v19 old theme are no longer provided. Please replace "+c+" with "+m+".")},"using-old-theme")}return{theme:c,el:s,themeFamily:c.replace(/-dark$/,"")}},cm([H("eGridDiv")],i.prototype,"eGridDiv",void 0),cm([vt("environment")],i)}(Ye),tR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),fm=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},nR=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.createTasksP1={list:[],sorted:!1},t.createTasksP2={list:[],sorted:!1},t.destroyTasks=[],t.ticking=!1,t.scrollGoingDown=!0,t.lastScrollTop=0,t.taskCount=0,t.cancelledTasks=new Set,t}return tR(i,d),i.prototype.setScrollTop=function(t){this.scrollGoingDown=t>this.lastScrollTop,this.lastScrollTop=t},i.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsWrapper.isSuppressAnimationFrame()},i.prototype.isOn=function(){return this.useAnimationFrame},i.prototype.verifyAnimationFrameOn=function(t){!1===this.useAnimationFrame&&console.warn("AG Grid: AnimationFrameService."+t+" called but animation frames are off")},i.prototype.createTask=function(t,s,l){this.verifyAnimationFrameOn(l);var c={task:t,index:s,createOrder:++this.taskCount};this.addTaskToList(this[l],c),this.schedule()},i.prototype.cancelTask=function(t){this.cancelledTasks.add(t)},i.prototype.addTaskToList=function(t,s){t.list.push(s),t.sorted=!1},i.prototype.sortTaskList=function(t){if(!t.sorted){var s=this.scrollGoingDown?1:-1;t.list.sort(function(l,c){return l.index!==c.index?s*(c.index-l.index):c.createOrder-l.createOrder}),t.sorted=!0}},i.prototype.addDestroyTask=function(t){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(t),this.schedule()},i.prototype.executeFrame=function(t){this.verifyAnimationFrameOn("executeFrame");for(var s=this.createTasksP1,l=s.list,c=this.createTasksP2,h=c.list,m=this.destroyTasks,S=(new Date).getTime(),R=(new Date).getTime()-S,D=t<=0,L=this.ctrlsService.getGridBodyCtrl();D||R<t;){if(!L.getScrollFeature().executeAnimationFrameScroll()){var K=void 0;if(l.length)this.sortTaskList(s),K=l.pop().task;else if(h.length)this.sortTaskList(c),K=h.pop().task;else{if(!m.length){this.cancelledTasks.clear();break}K=m.pop()}this.cancelledTasks.has(K)||K()}R=(new Date).getTime()-S}l.length||h.length||m.length?this.requestFrame():this.stopTicking()},i.prototype.stopTicking=function(){this.ticking=!1},i.prototype.flushAllFrames=function(){!this.useAnimationFrame||this.executeFrame(-1)},i.prototype.schedule=function(){!this.useAnimationFrame||this.ticking||(this.ticking=!0,this.requestFrame())},i.prototype.requestFrame=function(){var t=this.executeFrame.bind(this,60);window.requestAnimationFrame?window.requestAnimationFrame(t):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(t):window.setTimeout(t,0)},i.prototype.isQueueEmpty=function(){return!this.ticking},i.prototype.debounce=function(t){var s=this,l=!1;return function(){s.isOn()?l||(l=!0,s.addDestroyTask(function(){l=!1,t()})):s.getFrameworkOverrides().setTimeout(t,0)}},fm([H("ctrlsService")],i.prototype,"ctrlsService",void 0),fm([et],i.prototype,"init",null),fm([vt("animationFrameService")],i)}(Ye),KM=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Bd=function(){return Bd=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Bd.apply(this,arguments)},Po=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},kw=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.timeLastPageEventProcessed=0,t}return KM(i,d),i.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(s){t.gridBodyCon=s.gridBodyCtrl})},i.prototype.handlePageScrollingKey=function(t){var s=t.which||t.keyCode,l=t.altKey,c=t.ctrlKey||t.metaKey,h=this.mouseEventService.getCellPositionForEvent(t);if(!h)return!1;var m=!1;switch(s){case Xe.PAGE_HOME:case Xe.PAGE_END:!c&&!l&&(this.onHomeOrEndKey(s),m=!0);break;case Xe.LEFT:case Xe.RIGHT:c&&!l&&(this.onCtrlLeftOrRight(s,h),m=!0);break;case Xe.UP:case Xe.DOWN:c&&!l&&(this.onCtrlUpOrDown(s,h),m=!0);break;case Xe.PAGE_DOWN:!c&&!l&&(this.onPageDown(h),m=!0);break;case Xe.PAGE_UP:!c&&!l&&(this.onPageUp(h),m=!0)}return m&&t.preventDefault(),m},i.prototype.isTimeSinceLastPageEventToRecent=function(){return(new Date).getTime()-this.timeLastPageEventProcessed<100},i.prototype.setTimeLastPageEventProcessed=function(){this.timeLastPageEventProcessed=(new Date).getTime()},i.prototype.navigateTo=function(t){var s=t.scrollIndex,l=t.scrollType,c=t.scrollColumn,h=t.focusIndex,m=t.focusColumn;Fe(c)&&!c.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(c),Fe(s)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(s,l),this.animationFrameService.flushAllFrames(),this.focusService.setFocusedCell(h,m,null,!0),this.rangeService&&this.rangeService.setRangeToCell({rowIndex:h,rowPinned:null,column:m})},i.prototype.onPageDown=function(t){if(!this.isTimeSinceLastPageEventToRecent()){var l=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),c=this.gridOptionsWrapper.getScrollbarWidth(),h=l.bottom-l.top;this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(h-=c);var m=this.paginationProxy.getPixelOffset(),D=this.paginationProxy.getRowIndexAtPixel(l.top+h+m),L=this.paginationProxy.getRow(t.rowIndex).rowTop,K=this.paginationProxy.getRowIndexAtPixel(L+h-m+m),ee=this.paginationProxy.getPageLastRow();K>ee&&(K=ee),D>ee&&(D=ee),this.navigateTo({scrollIndex:D,scrollType:"top",scrollColumn:null,focusIndex:K,focusColumn:t.column}),this.setTimeLastPageEventProcessed()}},i.prototype.onPageUp=function(t){if(!this.isTimeSinceLastPageEventToRecent()){var l=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),c=this.gridOptionsWrapper.getScrollbarWidth(),h=l.bottom-l.top;this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(h-=c);var m=this.paginationProxy.getPixelOffset(),D=this.paginationProxy.getRowIndexAtPixel(l.top+m),L=this.paginationProxy.getRow(t.rowIndex),K=this.paginationProxy.getRowIndexAtPixel(L.rowTop+L.rowHeight-h-m+m),ee=this.paginationProxy.getPageFirstRow();K<ee&&(K=ee),D<ee&&(D=ee),this.navigateTo({scrollIndex:D,scrollType:"bottom",scrollColumn:null,focusIndex:K,focusColumn:t.column}),this.setTimeLastPageEventProcessed()}},i.prototype.getIndexToFocus=function(t,s){var l=t;if(s){var c=this.paginationProxy.getRow(t);c&&c.stub&&(l-=1)}return l},i.prototype.onCtrlUpOrDown=function(t,s){var l=t===Xe.UP,c=l?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:c,scrollType:null,scrollColumn:s.column,focusIndex:this.getIndexToFocus(c,!l),focusColumn:s.column})},i.prototype.onCtrlLeftOrRight=function(t,s){var l=t===Xe.LEFT,c=this.columnModel.getAllDisplayedColumns(),m=l!==this.gridOptionsWrapper.isEnableRtl()?c[0]:jn(c);this.navigateTo({scrollIndex:s.rowIndex,scrollType:null,scrollColumn:m,focusIndex:s.rowIndex,focusColumn:m})},i.prototype.onHomeOrEndKey=function(t){var s=t===Xe.PAGE_HOME,l=this.columnModel.getAllDisplayedColumns(),c=s?l[0]:jn(l),h=s?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:h,scrollType:null,scrollColumn:c,focusIndex:this.getIndexToFocus(h,!s),focusColumn:c})},i.prototype.onTabKeyDown=function(t,s){var l=s.shiftKey;if(this.tabToNextCellCommon(t,l))s.preventDefault();else if(l){var h=t.getRowPosition(),m=h.rowIndex;if(h.rowPinned?0===m:m===this.paginationProxy.getPageFirstRow()){s.preventDefault();var D=this.headerNavigationService.getHeaderRowCount()-1,L=jn(this.columnModel.getAllDisplayedColumns());this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:D,column:L},event:s})}}else t instanceof Qi&&t.focusCell(!0),this.focusService.focusNextGridCoreContainer(!1)&&s.preventDefault()},i.prototype.tabToNextCell=function(t){var s=this.focusService.getFocusedCell();if(!s)return!1;var l=this.getCellByPosition(s);return!!(l||(l=this.rowRenderer.getRowByPosition(s),l&&l.isFullWidth()))&&this.tabToNextCellCommon(l,t)},i.prototype.tabToNextCellCommon=function(t,s){var l=t.isEditing();if(!l&&t instanceof Qi){var h=t.getRowCtrl();h&&(l=h.isEditing())}return(l?this.gridOptionsWrapper.isFullRowEdit()?this.moveToNextEditingRow(t,s):this.moveToNextEditingCell(t,s):this.moveToNextCellNotEditing(t,s))||!!this.focusService.getFocusedHeader()},i.prototype.moveToNextEditingCell=function(t,s){var l=t.getCellPosition();t.stopEditing();var c=this.findNextCellToFocusOn(l,s,!0);return null!=c&&(c.startEditing(null,null,!0),c.focusCell(!1),!0)},i.prototype.moveToNextEditingRow=function(t,s){var l=t.getCellPosition(),c=this.findNextCellToFocusOn(l,s,!0);if(null==c)return!1;var h=c.getCellPosition(),m=this.isCellEditable(l),S=this.isCellEditable(h),R=h&&l.rowIndex===h.rowIndex&&l.rowPinned===h.rowPinned;return m&&t.setFocusOutOnEditor(),R||(t.getRowCtrl().stopEditing(),c.getRowCtrl().startRowEditing()),S?(c.setFocusInOnEditor(),c.focusCell()):c.focusCell(!0),!0},i.prototype.moveToNextCellNotEditing=function(t,s){var c,l=this.columnModel.getAllDisplayedColumns();c=t instanceof lu?Bd(Bd({},t.getRowPosition()),{column:s?l[0]:jn(l)}):t.getCellPosition();var h=this.findNextCellToFocusOn(c,s,!1);if(h instanceof Qi)h.focusCell(!0);else if(h)return this.tryToFocusFullWidthRow(h.getRowPosition(),s);return Fe(h)},i.prototype.findNextCellToFocusOn=function(t,s,l){for(var c=t;;){s||(c=this.getLastCellOfColSpan(c)),c=this.cellNavigationService.getNextTabbedCell(c,s);var h=this.gridOptionsWrapper.getTabToNextCellFunc();if(Fe(h)){var S=h({backwards:s,editing:l,previousCellPosition:t,nextCellPosition:c||null,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()});Fe(S)?(S.floating&&(mn(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),S.rowPinned=S.floating),c={rowIndex:S.rowIndex,column:S.column,rowPinned:S.rowPinned}):c=null}if(!c)return null;if(c.rowIndex<0){var R=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:R+c.rowIndex,column:c.column}}),null}var D=this.gridOptionsWrapper.isFullRowEdit();if(!l||D||this.isCellEditable(c)){this.ensureCellVisible(c);var U=this.getCellByPosition(c);if(!U){var K=this.rowRenderer.getRowByPosition(c);if(!K||!K.isFullWidth())continue;return K}if(!U.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(c),U}}},i.prototype.isCellEditable=function(t){var s=this.lookupRowNodeForCell(t);return!!s&&t.column.isCellEditable(s)},i.prototype.getCellByPosition=function(t){var s=this.rowRenderer.getRowByPosition(t);return s?s.getCellCtrl(t.column):null},i.prototype.lookupRowNodeForCell=function(t){return t.rowPinned===fe.PINNED_TOP?this.pinnedRowModel.getPinnedTopRow(t.rowIndex):t.rowPinned===fe.PINNED_BOTTOM?this.pinnedRowModel.getPinnedBottomRow(t.rowIndex):this.paginationProxy.getRow(t.rowIndex)},i.prototype.navigateToNextCell=function(t,s,l,c){for(var h=l,m=!1;h&&(h===l||!this.isValidNavigateCell(h));)this.gridOptionsWrapper.isEnableRtl()?s===Xe.LEFT&&(h=this.getLastCellOfColSpan(h)):s===Xe.RIGHT&&(h=this.getLastCellOfColSpan(h)),m=we(h=this.cellNavigationService.getNextCellToFocus(s,h));if(m&&t&&t.keyCode===Xe.UP&&(h={rowIndex:-1,rowPinned:null,column:l.column}),c){var S=this.gridOptionsWrapper.getNavigateToNextCellFunc();if(Fe(S)){var D=S({key:s,previousCellPosition:l,nextCellPosition:h||null,event:t,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()});Fe(D)?(D.floating&&(mn(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),D.rowPinned=D.floating),h={rowPinned:D.rowPinned,rowIndex:D.rowIndex,column:D.column}):h=null}}if(h){if(h.rowIndex<0){var L=this.headerNavigationService.getHeaderRowCount();return void this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:L+h.rowIndex,column:l.column},event:t||void 0})}var U=this.getNormalisedPosition(h);U?this.focusPosition(U):this.tryToFocusFullWidthRow(h)}},i.prototype.getNormalisedPosition=function(t){this.ensureCellVisible(t);var s=this.getCellByPosition(t);return s?(t=s.getCellPosition(),this.ensureCellVisible(t),t):null},i.prototype.tryToFocusFullWidthRow=function(t,s){void 0===s&&(s=!1);var l=this.columnModel.getAllDisplayedColumns(),c=this.rowRenderer.getRowByPosition(t);if(!c||!c.isFullWidth())return!1;var h={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column||(s?jn(l):l[0])};return this.focusPosition(h),!0},i.prototype.focusPosition=function(t){this.focusService.setFocusedCell(t.rowIndex,t.column,t.rowPinned,!0),this.rangeService&&this.rangeService.setRangeToCell(t)},i.prototype.isValidNavigateCell=function(t){return!!this.rowPositionUtils.getRowNode(t)},i.prototype.getLastCellOfColSpan=function(t){var s=this.getCellByPosition(t);if(!s)return t;var l=s.getColSpanningList();return 1===l.length?t:{rowIndex:t.rowIndex,column:jn(l),rowPinned:t.rowPinned}},i.prototype.ensureCellVisible=function(t){we(t.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t.rowIndex),t.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(t.column),this.gridBodyCon.getScrollFeature().horizontallyScrollHeaderCenterAndFloatingCenter(),this.animationFrameService.flushAllFrames()},Po([H("mouseEventService")],i.prototype,"mouseEventService",void 0),Po([H("paginationProxy")],i.prototype,"paginationProxy",void 0),Po([H("focusService")],i.prototype,"focusService",void 0),Po([H("animationFrameService")],i.prototype,"animationFrameService",void 0),Po([Gn("rangeService")],i.prototype,"rangeService",void 0),Po([H("columnModel")],i.prototype,"columnModel",void 0),Po([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Po([H("rowRenderer")],i.prototype,"rowRenderer",void 0),Po([H("headerNavigationService")],i.prototype,"headerNavigationService",void 0),Po([H("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),Po([H("cellNavigationService")],i.prototype,"cellNavigationService",void 0),Po([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Po([et],i.prototype,"postConstruct",null),Po([vt("navigationService")],i)}(Ye),pm=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Hd=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},rR=function(d,i){return function(t,s){i(t,s,d)}},iR=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.scrollY=0,t.uiBodyHeight=0,t}return pm(i,d),i.prototype.agWire=function(t){this.logger=t.create("RowContainerHeightService")},i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=ys(),this.logger.log("maxDivHeight = "+this.maxDivHeight)},i.prototype.isStretching=function(){return this.stretching},i.prototype.getDivStretchOffset=function(){return this.divStretchOffset},i.prototype.updateOffset=function(){if(this.stretching){var s=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,l=this.getUiBodyHeight();(s!==this.scrollY||l!==this.uiBodyHeight)&&(this.scrollY=s,this.uiBodyHeight=l,this.calculateOffset())}},i.prototype.calculateOffset=function(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var t=this.scrollY/this.maxScrollY,s=t*this.pixelsToShave;this.logger.log("Div Stretch Offset = "+s+" ("+this.pixelsToShave+" * "+t+")"),this.setDivStretchOffset(s)},i.prototype.setUiContainerHeight=function(t){t!==this.uiContainerHeight&&(this.uiContainerHeight=t,this.eventService.dispatchEvent({type:$.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))},i.prototype.clearOffset=function(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)},i.prototype.setDivStretchOffset=function(t){var s="number"==typeof t?Math.floor(t):null;this.divStretchOffset!==s&&(this.divStretchOffset=s,this.eventService.dispatchEvent({type:$.EVENT_HEIGHT_SCALE_CHANGED}))},i.prototype.setModelHeight=function(t){this.modelHeight=t,this.stretching=null!=t&&this.maxDivHeight>0&&t>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()},i.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},i.prototype.getRealPixelPosition=function(t){return t-this.divStretchOffset},i.prototype.getUiBodyHeight=function(){var s=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return s.bottom-s.top},i.prototype.getScrollPositionForPixel=function(t){if(this.pixelsToShave<=0)return t;var s=this.modelHeight-this.getUiBodyHeight();return this.maxScrollY*(t/s)},Hd([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Hd([rR(0,ki("loggerFactory"))],i.prototype,"agWire",null),Hd([et],i.prototype,"postConstruct",null),Hd([vt("rowContainerHeightService")],i)}(Ye),oR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),hm=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Nw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return oR(i,d),i.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.isRowSelectableFunc=this.gridOptionsWrapper.getIsRowSelectableFunc()},i.prototype.updateSelectableAfterGrouping=function(t){this.isRowSelectableFunc&&this.recurseDown(t.childrenAfterGroup,function(c){return c.childrenAfterGroup})},i.prototype.updateSelectableAfterFiltering=function(t){this.isRowSelectableFunc&&this.recurseDown(t.childrenAfterGroup,function(c){return c.childrenAfterFilter})},i.prototype.recurseDown=function(t,s){var l=this;!t||t.forEach(function(c){var h;c.group&&(c.hasChildren()&&l.recurseDown(s(c),s),h=l.groupSelectsChildren?Fe(Li(s(c),"selectable",!0)):!!l.isRowSelectableFunc&&l.isRowSelectableFunc(c),c.setRowSelectable(h))})},hm([et],i.prototype,"init",null),hm([vt("selectableService")],i)}(Ye),Gw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),ta=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},aR=function(d){function i(){var t=d.call(this)||this;return t.previousAndFirstButtonsDisabled=!1,t.nextButtonDisabled=!1,t.lastButtonDisabled=!1,t}return Gw(i,d),i.prototype.postConstruct=function(){var t=this,s=this.gridOptionsWrapper.isEnableRtl();this.setTemplate(this.getTemplate()),this.btFirst.insertAdjacentElement("afterbegin",ui(s?"last":"first",this.gridOptionsWrapper)),this.btPrevious.insertAdjacentElement("afterbegin",ui(s?"next":"previous",this.gridOptionsWrapper)),this.btNext.insertAdjacentElement("afterbegin",ui(s?"previous":"next",this.gridOptionsWrapper)),this.btLast.insertAdjacentElement("afterbegin",ui(s?"first":"last",this.gridOptionsWrapper)),this.gridOptionsWrapper.isPagination()&&!this.gridOptionsWrapper.isSuppressPaginationPanel()?(this.addManagedListener(this.eventService,$.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(function(h){var m=h.el,S=h.fn;t.addManagedListener(m,"click",S),t.addManagedListener(m,"keydown",function(R){(R.keyCode===Xe.ENTER||R.keyCode===Xe.SPACE)&&(R.preventDefault(),S())})}),this.onPaginationChanged()):this.setDisplayed(!1)},i.prototype.onPaginationChanged=function(){this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels()},i.prototype.onBtFirst=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()},i.prototype.setCurrentPageLabel=function(){var t=this.paginationProxy.getTotalPages()>0,s=this.paginationProxy.getCurrentPage();this.lbCurrent.innerHTML=this.formatNumber(t?s+1:0)},i.prototype.formatNumber=function(t){var s=this.gridOptionsWrapper.getPaginationNumberFormatterFunc();return s?s({value:t}):Kv(t)},i.prototype.getTemplate=function(){var t=this.gridOptionsWrapper.getLocaleTextFunc(),s=t("page","Page"),l=t("to","to"),c=t("of","of"),h=t("firstPage","First Page"),m=t("previousPage","Previous Page"),S=t("nextPage","Next Page"),R=t("lastPage","Last Page"),D=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'+D+'">\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-'+D+'-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+D+'-to">'+l+'</span>\n                    <span id="ag-'+D+'-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+D+'-of">'+c+'</span>\n                    <span id="ag-'+D+'-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div ref="btFirst" class="ag-paging-button" role="button" aria-label="'+h+'" tabindex="0"></div>\n                    <div ref="btPrevious" class="ag-paging-button" role="button" aria-label="'+m+'" tabindex="0"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-'+D+'-start-page">'+s+'</span>\n                        <span id="ag-'+D+'-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-'+D+'-of-page">'+c+'</span>\n                        <span id="ag-'+D+'-of-page-number" ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div ref="btNext" class="ag-paging-button" role="button" aria-label="'+S+'" tabindex="0"></div>\n                    <div ref="btLast" class="ag-paging-button" role="button" aria-label="'+R+'" tabindex="0"></div>\n                </span>\n            </div>'},i.prototype.onBtNext=function(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()},i.prototype.onBtPrevious=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()},i.prototype.onBtLast=function(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()},i.prototype.enableOrDisableButtons=function(){var t=this.paginationProxy.getCurrentPage(),s=this.paginationProxy.isLastPageFound(),l=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=0===t,kt(this.btFirst,"ag-disabled",this.previousAndFirstButtonsDisabled),Zf(this.btFirst,this.previousAndFirstButtonsDisabled),kt(this.btPrevious,"ag-disabled",this.previousAndFirstButtonsDisabled),Zf(this.btPrevious,this.previousAndFirstButtonsDisabled);var c=this.isZeroPagesToDisplay();this.nextButtonDisabled=s&&t===l-1||c,kt(this.btNext,"ag-disabled",this.nextButtonDisabled),Zf(this.btNext,this.nextButtonDisabled),this.lastButtonDisabled=!s||c||t===l-1,kt(this.btLast,"ag-disabled",this.lastButtonDisabled),Zf(this.btLast,this.lastButtonDisabled)},i.prototype.updateRowLabels=function(){var h,m,t=this.paginationProxy.getCurrentPage(),s=this.paginationProxy.getPageSize(),l=this.paginationProxy.isLastPageFound(),c=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;this.isZeroPagesToDisplay()?h=m=0:(m=(h=s*t+1)+s-1,l&&m>c&&(m=c)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(h),this.lbLastRowOnPage.innerHTML=this.rowNodeBlockLoader.isLoading()?"?":this.formatNumber(m)},i.prototype.isZeroPagesToDisplay=function(){var t=this.paginationProxy.isLastPageFound(),s=this.paginationProxy.getTotalPages();return t&&0===s},i.prototype.setTotalLabels=function(){var t=this.paginationProxy.isLastPageFound(),s=this.paginationProxy.getTotalPages(),l=t?this.paginationProxy.getMasterRowCount():null;if(1===l){var c=this.paginationProxy.getRow(0);if(c&&c.group&&!c.groupData&&!c.aggData)return void this.setTotalLabelsToZero()}if(t)this.lbTotal.innerHTML=this.formatNumber(s),this.lbRecordCount.innerHTML=this.formatNumber(l);else{var m=this.gridOptionsWrapper.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=m,this.lbRecordCount.innerHTML=m}},i.prototype.setTotalLabelsToZero=function(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)},ta([H("paginationProxy")],i.prototype,"paginationProxy",void 0),ta([H("rowNodeBlockLoader")],i.prototype,"rowNodeBlockLoader",void 0),ta([He("btFirst")],i.prototype,"btFirst",void 0),ta([He("btPrevious")],i.prototype,"btPrevious",void 0),ta([He("btNext")],i.prototype,"btNext",void 0),ta([He("btLast")],i.prototype,"btLast",void 0),ta([He("lbRecordCount")],i.prototype,"lbRecordCount",void 0),ta([He("lbFirstRowOnPage")],i.prototype,"lbFirstRowOnPage",void 0),ta([He("lbLastRowOnPage")],i.prototype,"lbLastRowOnPage",void 0),ta([He("lbCurrent")],i.prototype,"lbCurrent",void 0),ta([He("lbTotal")],i.prototype,"lbTotal",void 0),ta([et],i.prototype,"postConstruct",null),i}(hn),Bw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),ga=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.polyfillFunctions=[],t}return Bw(i,d),i.prototype.observeResize=function(t,s){var L,l=this,c=ku(s,50),S=this.gridOptionsWrapper.isSuppressBrowserResizeObserver();return window.ResizeObserver&&!S?((L=new window.ResizeObserver(c)).observe(t),function(){return L.disconnect()}):function(){var L=Fa(t),U=si(t),K=!0;return function ae(){if(K){var Te=Fa(t),Ve=si(t);(Te!==L||Ve!==U)&&(L=Te,U=Ve,s()),l.doNextPolyfillTurn(ae)}}(),function(){return K=!1}}()},i.prototype.doNextPolyfillTurn=function(t){this.polyfillFunctions.push(t),this.schedulePolyfill()},i.prototype.schedulePolyfill=function(){var t=this;this.polyfillScheduled||(this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout(function(){var c=t.polyfillFunctions;t.polyfillScheduled=!1,t.polyfillFunctions=[],c.forEach(function(h){return h()})},50))},i=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c}([vt("resizeObserverService")],i),i}(Ye),vm=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),pc=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},nl=function(){return function(d){d[d.Loading=0]="Loading",d[d.NoRows=1]="NoRows"}(nl||(nl={})),nl}(),YM=function(d){function i(){var t=d.call(this,i.TEMPLATE)||this;return t.inProgress=!1,t.destroyRequested=!1,t}return vm(i,d),i.prototype.updateLayoutClasses=function(t,s){kt(this.eOverlayWrapper,Y.LBn.AUTO_HEIGHT,s.autoHeight),kt(this.eOverlayWrapper,Y.LBn.NORMAL,s.normal),kt(this.eOverlayWrapper,Y.LBn.PRINT,s.print)},i.prototype.postConstruct=function(){this.createManagedBean(new el(this)),this.setDisplayed(!1),this.addManagedListener(this.eventService,$.EVENT_ROW_DATA_CHANGED,this.onRowDataChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_ROW_DATA_UPDATED,this.onRowDataChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.gridOptionsWrapper.isRowModelDefault()&&!this.gridOptionsWrapper.getRowData()&&this.showLoadingOverlay(),this.gridApi.registerOverlayWrapperComp(this)},i.prototype.setWrapperTypeClass=function(t){kt(this.eOverlayWrapper,"ag-overlay-loading-wrapper",t===nl.Loading),kt(this.eOverlayWrapper,"ag-overlay-no-rows-wrapper",t===nl.NoRows)},i.prototype.showLoadingOverlay=function(){if(!this.gridOptionsWrapper.isSuppressLoadingOverlay()){var t={api:this.gridOptionsWrapper.getApi()},l=this.userComponentFactory.getLoadingOverlayCompDetails(t).newAgStackInstance();this.showOverlay(l,nl.Loading)}},i.prototype.showNoRowsOverlay=function(){if(!this.gridOptionsWrapper.isSuppressNoRowsOverlay()){var t={api:this.gridOptionsWrapper.getApi()},l=this.userComponentFactory.getNoRowsOverlayCompDetails(t).newAgStackInstance();this.showOverlay(l,nl.NoRows)}},i.prototype.showOverlay=function(t,s){var l=this;this.inProgress||(this.setWrapperTypeClass(s),this.destroyActiveOverlay(),this.inProgress=!0,t&&t.then(function(c){l.inProgress=!1,l.eOverlayWrapper.appendChild(c.getGui()),l.activeOverlay=c,l.destroyRequested&&(l.destroyRequested=!1,l.destroyActiveOverlay())}),this.setDisplayed(!0))},i.prototype.destroyActiveOverlay=function(){this.inProgress?this.destroyRequested=!0:!this.activeOverlay||(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),co(this.eOverlayWrapper))},i.prototype.hideOverlay=function(){this.destroyActiveOverlay(),this.setDisplayed(!1)},i.prototype.destroy=function(){this.destroyActiveOverlay(),d.prototype.destroy.call(this)},i.prototype.showOrHideOverlay=function(){var t=this.paginationProxy.isEmpty(),s=this.gridOptionsWrapper.isSuppressNoRowsOverlay();t&&!s?this.showNoRowsOverlay():this.hideOverlay()},i.prototype.onRowDataChanged=function(){this.showOrHideOverlay()},i.prototype.onNewColumnsLoaded=function(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&this.hideOverlay()},i.TEMPLATE='\n        <div class="ag-overlay" aria-hidden="true">\n            <div class="ag-overlay-panel">\n                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>\n            </div>\n        </div>',pc([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),pc([H("paginationProxy")],i.prototype,"paginationProxy",void 0),pc([H("gridApi")],i.prototype,"gridApi",void 0),pc([H("columnModel")],i.prototype,"columnModel",void 0),pc([He("eOverlayWrapper")],i.prototype,"eOverlayWrapper",void 0),pc([et],i.prototype,"postConstruct",null),i}(hn),Ww=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),vu=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Uw=function(d){function i(t){void 0===t&&(t={});var s=d.call(this,i.getTemplate(t))||this;s.suppressEnabledCheckbox=!0,s.suppressOpenCloseIcons=!1;var c=t.enabled,h=t.items,m=t.suppressEnabledCheckbox,S=t.suppressOpenCloseIcons;return s.title=t.title,s.cssIdentifier=t.cssIdentifier||"default",s.enabled=null==c||c,s.items=h||[],s.alignItems=t.alignItems||"center",null!=m&&(s.suppressEnabledCheckbox=m),null!=S&&(s.suppressOpenCloseIcons=S),s}return Ww(i,d),i.getTemplate=function(t){var s=t.cssIdentifier||"default";return'<div class="ag-group ag-'+s+'-group" role="presentation">\n            <div class="ag-group-title-bar ag-'+s+'-group-title-bar ag-unselectable" ref="eTitleBar" role="button">\n                <span class="ag-group-title-bar-icon ag-'+s+'-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>\n                <span class="ag-group-title-bar-icon ag-'+s+'-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>\n                <span ref="eTitle" class="ag-group-title ag-'+s+'-group-title"></span>\n            </div>\n            <div ref="eToolbar" class="ag-group-toolbar ag-'+s+'-group-toolbar">\n                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>\n            </div>\n            <div ref="eContainer" class="ag-group-container ag-group-container-'+(t.direction||"vertical")+" ag-"+s+'-group-container"></div>\n        </div>'},i.prototype.postConstruct=function(){if(this.items.length){var t=this.items;this.items=[],this.addItems(t)}var s=this.gridOptionsWrapper.getLocaleTextFunc();this.cbGroupEnabled.setLabel(s("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()},i.prototype.setupExpandContract=function(){var t=this;this.eGroupClosedIcon.appendChild(qo("columnSelectClosed",this.gridOptionsWrapper,null)),this.eGroupOpenedIcon.appendChild(qo("columnSelectOpen",this.gridOptionsWrapper,null)),this.addManagedListener(this.eTitleBar,"click",function(){return t.toggleGroupExpand()}),this.addManagedListener(this.eTitleBar,"keydown",function(s){switch(s.keyCode){case Xe.ENTER:case Xe.SPACE:s.preventDefault(),t.toggleGroupExpand();break;case Xe.RIGHT:case Xe.LEFT:s.preventDefault(),t.toggleGroupExpand(s.keyCode===Xe.RIGHT)}})},i.prototype.refreshAriaStatus=function(){this.suppressOpenCloseIcons||Qf(this.eTitleBar,this.expanded)},i.prototype.refreshChildDisplay=function(){var t=!this.suppressOpenCloseIcons;Xn(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),Xn(this.eGroupOpenedIcon,t&&this.expanded),Xn(this.eGroupClosedIcon,t&&!this.expanded)},i.prototype.isExpanded=function(){return this.expanded},i.prototype.setAlignItems=function(t){var s=this.getGui();return this.alignItems!==t&&_i(s,"ag-group-item-alignment-"+this.alignItems),this.alignItems=t,At(s,"ag-group-item-alignment-"+this.alignItems),this},i.prototype.toggleGroupExpand=function(t){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),Xn(this.eContainer,!0),this):(this.expanded===(t=null!=t?t:!this.expanded)||(this.expanded=t,this.refreshAriaStatus(),this.refreshChildDisplay(),Xn(this.eContainer,t),this.dispatchEvent({type:this.expanded?i.EVENT_EXPANDED:i.EVENT_COLLAPSED})),this)},i.prototype.addItems=function(t){var s=this;t.forEach(function(l){return s.addItem(l)})},i.prototype.addItem=function(t){var s=this.eContainer,l=t instanceof hn?t.getGui():t;At(l,"ag-group-item"),At(l,"ag-"+this.cssIdentifier+"-group-item"),s.appendChild(l),this.items.push(l)},i.prototype.hideItem=function(t,s){kt(this.items[s],"ag-hidden",t)},i.prototype.setTitle=function(t){return this.eTitle.innerText=t,this},i.prototype.addCssClassToTitleBar=function(t){At(this.eTitleBar,t)},i.prototype.setEnabled=function(t,s){return this.enabled=t,this.refreshDisabledStyles(),this.toggleGroupExpand(t),s||this.cbGroupEnabled.setValue(t),this},i.prototype.isEnabled=function(){return this.enabled},i.prototype.onEnableChange=function(t){var s=this;return this.cbGroupEnabled.onValueChange(function(l){s.setEnabled(l,!0),t(l)}),this},i.prototype.hideEnabledCheckbox=function(t){return this.suppressEnabledCheckbox=t,this.refreshChildDisplay(),this.refreshDisabledStyles(),this},i.prototype.hideOpenCloseIcons=function(t){return this.suppressOpenCloseIcons=t,t&&this.toggleGroupExpand(!0),this},i.prototype.refreshDisabledStyles=function(){kt(this.getGui(),"ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(At(this.eTitleBar,"ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(_i(this.eTitleBar,"ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),kt(this.eContainer,"ag-disabled-group-container",!this.enabled)},i.EVENT_EXPANDED="expanded",i.EVENT_COLLAPSED="collapsed",vu([He("eTitleBar")],i.prototype,"eTitleBar",void 0),vu([He("eGroupOpenedIcon")],i.prototype,"eGroupOpenedIcon",void 0),vu([He("eGroupClosedIcon")],i.prototype,"eGroupClosedIcon",void 0),vu([He("eToolbar")],i.prototype,"eToolbar",void 0),vu([He("cbGroupEnabled")],i.prototype,"cbGroupEnabled",void 0),vu([He("eTitle")],i.prototype,"eTitle",void 0),vu([He("eContainer")],i.prototype,"eContainer",void 0),vu([et],i.prototype,"postConstruct",null),i}(hn),sR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),th=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Vd=function(d){function i(t,s){var l=d.call(this)||this;return l.element=t,l.dragStartPosition={x:0,y:0},l.position={x:0,y:0},l.lastSize={width:-1,height:-1},l.positioned=!1,l.resizersAdded=!1,l.resizeListeners=[],l.boundaryEl=null,l.isResizing=!1,l.isMoving=!1,l.resizable={},l.movable=!1,l.currentResizer=null,l.config=ii({},{popup:!1},s),l}return sR(i,d),i.prototype.center=function(){var t=this.offsetParent,s=t.clientHeight,c=t.clientWidth/2-this.getWidth()/2,h=s/2-this.getHeight()/2;this.offsetElement(c,h)},i.prototype.initialisePosition=function(){var t=this.config,s=t.centered,l=t.forcePopupParentAsOffsetParent,c=t.minWidth,h=t.width,m=t.minHeight,S=t.height,R=t.x,D=t.y;this.offsetParent||this.setOffsetParent();var L=0,U=0,K=!!this.element.offsetParent;if(K){var ee=this.findBoundaryElement(),ae=window.getComputedStyle(ee);if(null!=ae.minWidth){var Te=ee.offsetWidth-this.element.offsetWidth;U=parseInt(ae.minWidth,10)-Te}if(null!=ae.minHeight){var Ve=ee.offsetHeight-this.element.offsetHeight;L=parseInt(ae.minHeight,10)-Ve}}if(this.minHeight=m||L,this.minWidth=c||U,h&&this.setWidth(h),S&&this.setHeight(S),(!h||!S)&&this.refreshSize(),s)this.center();else if(R||D)this.offsetElement(R,D);else if(K&&l&&this.boundaryEl){var We=parseFloat(this.boundaryEl.style.top),Pe=parseFloat(this.boundaryEl.style.left);this.offsetElement(isNaN(Pe)?0:Pe,isNaN(We)?0:We)}this.positioned=!!this.offsetParent},i.prototype.isPositioned=function(){return this.positioned},i.prototype.getPosition=function(){return this.position},i.prototype.setMovable=function(t,s){if(this.config.popup&&t!==this.movable){this.movable=t;var l=this.moveElementDragListener||{eElement:s,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};t?(this.dragService.addDragSource(l),this.moveElementDragListener=l):(this.dragService.removeDragSource(l),this.moveElementDragListener=void 0)}},i.prototype.setResizable=function(t){var s=this;if(this.clearResizeListeners(),t?this.addResizers():this.removeResizers(),"boolean"==typeof t){if(!1===t)return;t={topLeft:t,top:t,topRight:t,right:t,bottomRight:t,bottom:t,bottomLeft:t,left:t}}Object.keys(t).forEach(function(l){var h=!!t[l],m=s.getResizerElement(l),S={dragStartPixels:0,eElement:m,onDragStart:function(D){return s.onResizeStart(D,l)},onDragging:s.onResize.bind(s),onDragStop:function(D){return s.onResizeEnd(D,l)}};(!!s.resizable[l]!==h||!s.isAlive()&&!h)&&(h?(s.dragService.addDragSource(S),s.resizeListeners.push(S),m.style.pointerEvents="all"):m.style.pointerEvents="none")})},i.prototype.removeSizeFromEl=function(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")},i.prototype.restoreLastSize=function(){this.element.style.flex="0 0 auto";var t=this.lastSize,s=t.height,l=t.width;-1!==l&&(this.element.style.width=l+"px"),-1!==s&&(this.element.style.height=s+"px")},i.prototype.getHeight=function(){return this.element.offsetHeight},i.prototype.setHeight=function(t){var s=this.config.popup,l=this.element,c=!1;if("string"==typeof t&&-1!==t.indexOf("%"))lt(l,t),t=Hu(l),c=!0;else if(this.positioned){var h=this.element.getBoundingClientRect(),m=this.offsetParent.getBoundingClientRect();t=Math.max(this.minHeight,t);var S=this.offsetParent.clientHeight,R=s?this.position.y:h.top;S&&t+R>S+(s?0:m.top)&&(t=S-R)}this.getHeight()!==t&&(c?(l.style.maxHeight="unset",l.style.minHeight="unset"):s?lt(l,t):(l.style.height=t+"px",l.style.flex="0 0 auto",this.lastSize.height="number"==typeof t?t:parseFloat(t)))},i.prototype.getWidth=function(){return this.element.offsetWidth},i.prototype.setWidth=function(t){var s=this.element,l=this.config.popup,c=!1;if("string"==typeof t&&-1!==t.indexOf("%"))ka(s,t),t=Xf(s),c=!0;else if(this.positioned){t=Math.max(this.minWidth,t);var h=this.offsetParent.clientWidth,m=l?this.position.x:this.element.getBoundingClientRect().left;h&&t+m>h&&(t=h-m)}this.getWidth()!==t&&(c?(s.style.maxWidth="unset",s.style.minWidth="unset"):this.config.popup?ka(s,t):(s.style.width=t+"px",s.style.flex=" unset",this.lastSize.width="number"==typeof t?t:parseFloat(t)))},i.prototype.offsetElement=function(t,s){void 0===t&&(t=0),void 0===s&&(s=0);var l=this.config.forcePopupParentAsOffsetParent?this.boundaryEl:this.element;this.popupService.positionPopup({ePopup:l,x:t,y:s,keepWithinBounds:!0}),this.setPosition(parseFloat(l.style.left),parseFloat(l.style.top))},i.prototype.setPosition=function(t,s){this.position.x=t,this.position.y=s},i.prototype.updateDragStartPosition=function(t,s){this.dragStartPosition={x:t,y:s}},i.prototype.calculateMouseMovement=function(t){var s=t.e,c=t.isTop,m=t.topBuffer,S=s.clientX-this.dragStartPosition.x,R=s.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(s,!!t.isLeft,!!t.anywhereWithin,S)?0:S,movementY:this.shouldSkipY(s,!!c,m,R)?0:R}},i.prototype.shouldSkipX=function(t,s,l,c){var h=this.element.getBoundingClientRect(),m=this.offsetParent.getBoundingClientRect(),S=this.boundaryEl.getBoundingClientRect(),R=this.config.popup?this.position.x:h.left,D=R<=0&&m.left>=t.clientX||m.right<=t.clientX&&m.right<=S.right;return!!D||(s?c<0&&t.clientX>R+m.left||c>0&&t.clientX<R+m.left:l?c<0&&t.clientX>S.right||c>0&&t.clientX<R+m.left:c<0&&t.clientX>S.right||c>0&&t.clientX<S.right)},i.prototype.shouldSkipY=function(t,s,l,c){void 0===l&&(l=0);var h=this.element.getBoundingClientRect(),m=this.offsetParent.getBoundingClientRect(),S=this.boundaryEl.getBoundingClientRect(),R=this.config.popup?this.position.y:h.top,D=R<=0&&m.top>=t.clientY||m.bottom<=t.clientY&&m.bottom<=S.bottom;return!!D||(s?c<0&&t.clientY>R+m.top+l||c>0&&t.clientY<R+m.top:c<0&&t.clientY>S.bottom||c>0&&t.clientY<S.bottom)},i.prototype.createResizeMap=function(){var t=this.element;this.resizerMap={topLeft:{element:t.querySelector("[ref=eTopLeftResizer]")},top:{element:t.querySelector("[ref=eTopResizer]")},topRight:{element:t.querySelector("[ref=eTopRightResizer]")},right:{element:t.querySelector("[ref=eRightResizer]")},bottomRight:{element:t.querySelector("[ref=eBottomRightResizer]")},bottom:{element:t.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:t.querySelector("[ref=eBottomLeftResizer]")},left:{element:t.querySelector("[ref=eLeftResizer]")}}},i.prototype.addResizers=function(){if(!this.resizersAdded){var t=this.element;if(t){var l=(new DOMParser).parseFromString('<div class="ag-resizer-wrapper">\n        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>',"text/html").body;t.appendChild(l.firstChild),this.createResizeMap(),this.resizersAdded=!0}}},i.prototype.removeResizers=function(){this.resizerMap=void 0;var t=this.element.querySelector(".ag-resizer-wrapper");t&&this.element.removeChild(t),this.resizersAdded=!1},i.prototype.getResizerElement=function(t){return this.resizerMap[t].element},i.prototype.onResizeStart=function(t,s){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!s.match(/top/i),isRight:!!s.match(/right/i),isBottom:!!s.match(/bottom/i),isLeft:!!s.match(/left/i)},At(this.element,"ag-resizing"),At(this.resizerMap[s].element,"ag-active");var l=this.config;!l.popup&&!l.forcePopupParentAsOffsetParent&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(t.clientX,t.clientY)},i.prototype.getSiblings=function(){var s=this.element.parentElement;return s?Array.prototype.slice.call(s.children).filter(function(l){return!Cs(l,"ag-hidden")}):null},i.prototype.getMinSizeOfSiblings=function(){for(var t=this.getSiblings()||[],s=0,l=0,c=0;c<t.length;c++){var h=t[c];if(h!==this.element){var S=this.minHeight||0,R=this.minWidth||0;if(h.style.flex&&"0 0 auto"!==h.style.flex){var D=window.getComputedStyle(h);D.minHeight&&(S=parseInt(D.minHeight,10)),D.minWidth&&(R=parseInt(D.minWidth,10))}else S=h.offsetHeight,R=h.offsetWidth;s+=S,l+=R}}return{height:s,width:l}},i.prototype.applySizeToSiblings=function(t){var s=null,l=this.getSiblings();if(l){for(var c=0;c<l.length;c++){var h=l[c];h!==s&&(t?h.style.height=h.offsetHeight+"px":h.style.width=h.offsetWidth+"px",h.style.flex="0 0 auto",h===this.element&&(s=l[c+1]))}s&&(s.style.removeProperty("height"),s.style.removeProperty("min-height"),s.style.removeProperty("max-height"),s.style.flex="1 1 auto")}},i.prototype.onResize=function(t){if(this.isResizing&&this.currentResizer){var s=this.config,l=s.popup,c=s.forcePopupParentAsOffsetParent,h=this.currentResizer,m=h.isTop,D=h.isLeft,L=h.isRight||D,U=h.isBottom||m,K=this.calculateMouseMovement({e:t,isLeft:D,isTop:m}),ee=K.movementX,ae=K.movementY,Te=this.position.x,Ve=this.position.y,We=0,Pe=0;if(L&&ee){var Qe=D?-1:1,ye=this.getWidth(),an=ye+ee*Qe,Gt=!1;D&&(Te+(We=ye-an)<=0||an<=this.minWidth)&&(Gt=!0,We=0),Gt||this.setWidth(an)}if(U&&ae){Qe=m?-1:1;var _n=this.getHeight(),Jn=_n+ae*Qe,er=!1;m?(Ve+(Pe=_n-Jn)<=0||Jn<=this.minHeight)&&(er=!0,Pe=0):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&_n<Jn&&this.getMinSizeOfSiblings().height+Jn>this.element.parentElement.offsetHeight&&(er=!0),er||this.setHeight(Jn)}this.updateDragStartPosition(t.clientX,t.clientY),((l||c)&&We||Pe)&&this.offsetElement(Te+We,Ve+Pe)}},i.prototype.onResizeEnd=function(t,s){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;var l={type:"resize",api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()};_i(this.element,"ag-resizing"),_i(this.resizerMap[s].element,"ag-active"),this.dispatchEvent(l)},i.prototype.refreshSize=function(){var t=this.element;this.config.popup&&(this.config.width||this.setWidth(t.offsetWidth),this.config.height||this.setHeight(t.offsetHeight))},i.prototype.onMoveStart=function(t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,At(this.element,"ag-moving"),this.updateDragStartPosition(t.clientX,t.clientY)},i.prototype.onMove=function(t){if(this.isMoving){var h,s=this.position,l=s.x,c=s.y;this.config.calculateTopBuffer&&(h=this.config.calculateTopBuffer());var m=this.calculateMouseMovement({e:t,isTop:!0,anywhereWithin:!0,topBuffer:h});this.offsetElement(l+m.movementX,c+m.movementY),this.updateDragStartPosition(t.clientX,t.clientY)}},i.prototype.onMoveEnd=function(){this.isMoving=!1,this.boundaryEl=null,_i(this.element,"ag-moving")},i.prototype.setOffsetParent=function(){this.offsetParent=this.config.forcePopupParentAsOffsetParent?this.popupService.getPopupParent():this.element.offsetParent},i.prototype.findBoundaryElement=function(){for(var t=this.element;t;){if("static"!==window.getComputedStyle(t).position)return t;t=t.parentElement}return this.element},i.prototype.clearResizeListeners=function(){for(;this.resizeListeners.length;){var t=this.resizeListeners.pop();this.dragService.removeDragSource(t)}},i.prototype.destroy=function(){d.prototype.destroy.call(this),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.clearResizeListeners(),this.removeResizers()},th([H("popupService")],i.prototype,"popupService",void 0),th([H("dragService")],i.prototype,"dragService",void 0),i}(Ye),gm=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Wd=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Ud=function(d){function i(t){var s=d.call(this,i.getTemplate(t))||this;return s.closable=!0,s.config=t,s}return gm(i,d),i.getTemplate=function(t){var s=t&&t.cssIdentifier||"default";return'<div class="ag-panel ag-'+s+'-panel" tabindex="-1">\n            <div ref="eTitleBar" class="ag-panel-title-bar ag-'+s+'-panel-title-bar ag-unselectable">\n                <span ref="eTitle" class="ag-panel-title-bar-title ag-'+s+'-panel-title-bar-title"></span>\n                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-'+s+'-panel-title-bar-buttons"></div>\n            </div>\n            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-'+s+'-panel-content-wrapper"></div>\n        </div>'},i.prototype.postConstruct=function(){var t=this,s=this.config,l=s.component,c=s.closable,h=s.hideTitleBar,m=s.title,S=s.minWidth,R=void 0===S?250:S,D=s.width,L=s.minHeight,U=void 0===L?250:L,K=s.height,ee=s.centered,ae=s.popup,Te=s.x,Ve=s.y;this.positionableFeature=new Vd(this.getGui(),{minWidth:R,width:D,minHeight:U,height:K,centered:ee,x:Te,y:Ve,popup:ae,calculateTopBuffer:function(){return t.positionableFeature.getHeight()-t.getBodyHeight()}}),this.createManagedBean(this.positionableFeature);var We=this.getGui();l&&this.setBodyComponent(l),h?At(this.eTitleBar,"ag-hidden"):(m&&this.setTitle(m),this.setClosable(null!=c?c:this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",function(Pe){if(We.contains(Pe.relatedTarget)||We.contains(document.activeElement)||t.eTitleBarButtons.contains(Pe.target))Pe.preventDefault();else{var Qe=t.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");Qe&&Qe.focus()}}),(!ae||!this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")},i.prototype.renderComponent=function(){var t=this,s=this.getGui();s.focus(),this.close=function(){s.parentElement.removeChild(s),t.destroy()}},i.prototype.getHeight=function(){return this.positionableFeature.getHeight()},i.prototype.setHeight=function(t){this.positionableFeature.setHeight(t)},i.prototype.getWidth=function(){return this.positionableFeature.getWidth()},i.prototype.setWidth=function(t){this.positionableFeature.setWidth(t)},i.prototype.setClosable=function(t){if(t!==this.closable&&(this.closable=t),t){var s=this.closeButtonComp=new hn(i.CLOSE_BTN_TEMPLATE);this.getContext().createBean(s),(l=s.getGui()).appendChild(At(ui("close",this.gridOptionsWrapper),"ag-panel-title-bar-button-icon")),this.addTitleBarButton(s),s.addManagedListener(l,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){var l;(l=this.closeButtonComp.getGui()).parentElement.removeChild(l),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}},i.prototype.setBodyComponent=function(t){t.setParentComponent(this),this.eContentWrapper.appendChild(t.getGui())},i.prototype.addTitleBarButton=function(t,s){var l=this.eTitleBarButtons,c=l.children,h=c.length;null==s&&(s=h),s=Math.max(0,Math.min(s,h));var m=t.getGui();At(m,"ag-panel-title-bar-button"),0===s?l.insertAdjacentElement("afterbegin",m):s===h?l.insertAdjacentElement("beforeend",m):c[s-1].insertAdjacentElement("afterend",m),t.setParentComponent(this)},i.prototype.getBodyHeight=function(){return Fl(this.eContentWrapper)},i.prototype.getBodyWidth=function(){return Wo(this.eContentWrapper)},i.prototype.setTitle=function(t){this.eTitle.innerText=t},i.prototype.onBtClose=function(){this.close()},i.prototype.destroy=function(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));var t=this.getGui();t&&t.offsetParent&&this.close(),d.prototype.destroy.call(this)},i.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',Wd([He("eContentWrapper")],i.prototype,"eContentWrapper",void 0),Wd([He("eTitleBar")],i.prototype,"eTitleBar",void 0),Wd([He("eTitleBarButtons")],i.prototype,"eTitleBarButtons",void 0),Wd([He("eTitle")],i.prototype,"eTitle",void 0),Wd([et],i.prototype,"postConstruct",null),i}(hn),mm=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),zd=function(){return zd=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},zd.apply(this,arguments)},ym=function(d){function i(t){var s=d.call(this,zd(zd({},t),{popup:!0}))||this;return s.isMaximizable=!1,s.isMaximized=!1,s.maximizeListeners=[],s.resizeListenerDestroy=null,s.lastPosition={x:0,y:0,width:0,height:0},s}return mm(i,d),i.prototype.postConstruct=function(){var t=this,s=this.getGui(),l=this.config,c=l.movable,h=l.resizable,m=l.maximizable;At(s,"ag-dialog"),d.prototype.postConstruct.call(this),this.addManagedListener(s,"focusin",function(S){s.contains(S.relatedTarget)||t.popupService.bringPopupToFront(s)}),c&&this.setMovable(c),m&&this.setMaximizable(m),h&&this.setResizable(h)},i.prototype.renderComponent=function(){var t=this.getGui(),s=this.config,l=s.alwaysOnTop,c=s.modal,h=s.title,m=this.gridOptionsWrapper.getLocaleTextFunc(),S=this.popupService.addPopup({modal:c,eChild:t,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop:l,ariaLabel:h||m("ariaLabelDialog","Dialog")});S&&(this.close=S.hideFunc)},i.prototype.toggleMaximize=function(){var t=this.positionableFeature.getPosition();if(this.isMaximized){var s=this.lastPosition,l=s.x,c=s.y,m=s.height;this.setWidth(s.width),this.setHeight(m),this.positionableFeature.offsetElement(l,c)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=t.x,this.lastPosition.y=t.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},i.prototype.refreshMaximizeIcon=function(){Xn(this.maximizeIcon,!this.isMaximized),Xn(this.minimizeIcon,this.isMaximized)},i.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(function(t){return t()}),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},i.prototype.destroy=function(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),d.prototype.destroy.call(this)},i.prototype.setResizable=function(t){this.positionableFeature.setResizable(t)},i.prototype.setMovable=function(t){this.positionableFeature.setMovable(t,this.eTitleBar)},i.prototype.setMaximizable=function(t){var s=this;if(!t)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));var l=this.eTitleBar;if(l&&t!==this.isMaximizable){var c=this.maximizeButtonComp=this.createBean(new hn('<div class="ag-dialog-button"></span>')),h=c.getGui();h.appendChild(this.maximizeIcon=ui("maximize",this.gridOptionsWrapper)),At(this.maximizeIcon,"ag-panel-title-bar-button-icon"),h.appendChild(this.minimizeIcon=ui("minimize",this.gridOptionsWrapper)),At(this.minimizeIcon,"ag-panel-title-bar-button-icon"),At(this.minimizeIcon,"ag-hidden"),c.addManagedListener(h,"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(c,0),this.maximizeListeners.push(this.addManagedListener(l,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",function(){s.isMaximized=!1,s.refreshMaximizeIcon()})}},function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([H("popupService")],i.prototype,"popupService",void 0),i}(Ud),_m=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),jw=function(d){function i(t,s,l){return void 0===s&&(s="ag-text-field"),void 0===l&&(l="text"),d.call(this,t,s,l)||this}return _m(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this),this.config.allowedCharPattern&&this.preventDisallowedCharacters()},i.prototype.setValue=function(t,s){var l=d.prototype.setValue.call(this,t,s);return this.eInput.value!==t&&(this.eInput.value=Fe(t)?t:""),l},i.prototype.preventDisallowedCharacters=function(){var t=new RegExp("["+this.config.allowedCharPattern+"]");this.addManagedListener(this.eInput,"keypress",function(c){c.key&&!t.test(c.key)&&c.preventDefault()}),this.addManagedListener(this.eInput,"paste",function(l){$t(l.clipboardData.getData("text"),function(h){return!t.test(h)})&&l.preventDefault()})},i}(Va),cR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Cm=function(d){function i(t){return d.call(this,t,"ag-text-area",null,"textarea")||this}return cR(i,d),i.prototype.setValue=function(t,s){var l=d.prototype.setValue.call(this,t,s);return this.eInput.value=t,l},i.prototype.setCols=function(t){return this.eInput.cols=t,this},i.prototype.setRows=function(t){return this.eInput.rows=t,this},i}(Va),qw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),jd=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},wm=function(d){function i(t){var s=d.call(this,t,i.TEMPLATE)||this;return s.labelAlignment="top",s}return qw(i,d),i.prototype.init=function(){At(this.eSlider.getGui(),"ag-slider-field")},i.prototype.onValueChange=function(t){var s=this,l=fa.EVENT_CHANGED;return this.addManagedListener(this.eText,l,function(){var c=parseFloat(s.eText.getValue());s.eSlider.setValue(c.toString(),!0),t(c||0)}),this.addManagedListener(this.eSlider,l,function(){var c=s.eSlider.getValue();s.eText.setValue(c,!0),t(parseFloat(c))}),this},i.prototype.setSliderWidth=function(t){return this.eSlider.setWidth(t),this},i.prototype.setTextFieldWidth=function(t){return this.eText.setWidth(t),this},i.prototype.setMinValue=function(t){return this.eSlider.setMinValue(t),this.eText.setMin(t),this},i.prototype.setMaxValue=function(t){return this.eSlider.setMaxValue(t),this.eText.setMax(t),this},i.prototype.getValue=function(){return this.eText.getValue()},i.prototype.setValue=function(t){return this.getValue()===t||(this.eText.setValue(t,!0),this.eSlider.setValue(t,!0),this.dispatchEvent({type:fa.EVENT_CHANGED})),this},i.prototype.setStep=function(t){return this.eSlider.setStep(t),this.eText.setStep(t),this},i.TEMPLATE='<div class="ag-slider">\n            <label ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range ref="eSlider"></ag-input-range>\n                <ag-input-number-field ref="eText"></ag-input-number-field>\n            </div>\n        </div>',jd([He("eLabel")],i.prototype,"eLabel",void 0),jd([He("eSlider")],i.prototype,"eSlider",void 0),jd([He("eText")],i.prototype,"eText",void 0),jd([et],i.prototype,"init",null),i}(da),Kw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ei=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},nh=function(d){function i(t){var s=d.call(this,i.TEMPLATE)||this;return s.H=1,s.S=1,s.B=1,s.A=1,s.isSpectrumDragging=!1,s.isSpectrumHueDragging=!1,s.isSpectrumAlphaDragging=!1,s.colorChanged=!1,s.picker=t.picker,s}return Kw(i,d),i.prototype.postConstruct=function(){var t=this.getGui();this.initRecentColors(),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(t,"mousemove",this.onSpectrumDraggerMove.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(t,"mousemove",this.onSpectrumHueMove.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addManagedListener(t,"mousemove",this.onSpectrumAlphaMove.bind(this)),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this))},i.prototype.refreshSpectrumRect=function(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()},i.prototype.refreshHueRect=function(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()},i.prototype.refreshAlphaRect=function(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()},i.prototype.onSpectrumDraggerDown=function(t){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(t)},i.prototype.onSpectrumDraggerMove=function(t){this.isSpectrumDragging&&this.moveDragger(t)},i.prototype.onSpectrumHueDown=function(t){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(t)},i.prototype.onSpectrumHueMove=function(t){this.isSpectrumHueDragging&&this.moveHueSlider(t)},i.prototype.onSpectrumAlphaDown=function(t){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(t)},i.prototype.onSpectrumAlphaMove=function(t){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(t)},i.prototype.onMouseUp=function(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1},i.prototype.moveDragger=function(t){var s=this.spectrumValRect;if(s){var l=t.clientX-s.left,c=t.clientY-s.top;l=Math.max(l,0),l=Math.min(l,s.width),c=Math.max(c,0),c=Math.min(c,s.height),this.setSpectrumValue(l/s.width,1-c/s.height)}},i.prototype.moveHueSlider=function(t){var s=this.spectrumHueRect;if(s){var l=this.spectrumHueSlider,c=l.getBoundingClientRect(),h=t.clientX-s.left;h=Math.max(h,0),h=Math.min(h,s.width),this.H=1-h/s.width,l.style.left=h+c.width/2+"px",this.update()}},i.prototype.moveAlphaSlider=function(t){var s=this.spectrumAlphaRect;if(s){var l=this.spectrumAlphaSlider,c=l.getBoundingClientRect(),h=t.clientX-s.left;h=Math.max(h,0),h=Math.min(h,s.width),this.A=h/s.width,l.style.left=h+c.width/2+"px",this.update()}},i.prototype.update=function(){var t=Zc.fromHSB(360*this.H,this.S,this.B,this.A),s=Zc.fromHSB(360*this.H,1,1),l=t.toRgbaString(),c=this.picker;Zc.fromString(c.getValue()).toRgbaString()!==l&&(this.colorChanged=!0),c.setValue(l),this.spectrumColor.style.backgroundColor=s.toRgbaString(),this.spectrumDragger.style.backgroundColor=l},i.prototype.setSpectrumValue=function(t,s){var l=this.spectrumValRect||this.refreshSpectrumRect();if(l){var c=this.spectrumDragger,h=c.getBoundingClientRect();t=Math.max(0,t),t=Math.min(1,t),s=Math.max(0,s),s=Math.min(1,s),this.S=t,this.B=s,c.style.left=t*l.width-h.width/2+"px",c.style.top=(1-s)*l.height-h.height/2+"px",this.update()}},i.prototype.initRecentColors=function(){var s=i.recentColors.map(function(l,c){return'<div class="ag-recent-color" id='+c+' style="background-color: '+l+'; width: 15px; height: 15px;" recent-color="'+l+'"></div>'});this.recentColors.innerHTML=s.join("")},i.prototype.setValue=function(t){var s=Zc.fromString(t),l=s.toHSB(),c=l[0],h=l[1],m=l[2];this.H=(isNaN(c)?0:c)/360,this.A=s.a;var S=this.spectrumHueRect||this.refreshHueRect(),R=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=(this.H-1)*-S.width+"px",this.spectrumAlphaSlider.style.left=this.A*R.width+"px",this.setSpectrumValue(h,m)},i.prototype.onRecentColorClick=function(t){var s=t.target;if(Fe(s.id)){var l=parseInt(s.id,10);this.setValue(i.recentColors[l]),this.destroy()}},i.prototype.addRecentColor=function(){var s=Zc.fromHSB(360*this.H,this.S,this.B,this.A).toRgbaString(),l=i.recentColors;!this.colorChanged||l[0]===s||(l=l.filter(function(c){return c!=s}),(l=[s].concat(l)).length>i.maxRecentColors&&(l=l.slice(0,i.maxRecentColors)),i.recentColors=l)},i.prototype.destroy=function(){this.addRecentColor(),d.prototype.destroy.call(this)},i.maxRecentColors=8,i.recentColors=[],i.TEMPLATE='<div class="ag-color-panel">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>',Ei([He("spectrumColor")],i.prototype,"spectrumColor",void 0),Ei([He("spectrumVal")],i.prototype,"spectrumVal",void 0),Ei([He("spectrumDragger")],i.prototype,"spectrumDragger",void 0),Ei([He("spectrumHue")],i.prototype,"spectrumHue",void 0),Ei([He("spectrumHueSlider")],i.prototype,"spectrumHueSlider",void 0),Ei([He("spectrumAlpha")],i.prototype,"spectrumAlpha",void 0),Ei([He("spectrumAlphaSlider")],i.prototype,"spectrumAlphaSlider",void 0),Ei([He("recentColors")],i.prototype,"recentColors",void 0),Ei([et],i.prototype,"postConstruct",null),i}(hn),dR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Yw=function(d){function i(t){var s=d.call(this,t,"ag-color-picker","colorPicker")||this;return t&&t.color&&(s.value=t.color),s}return dR(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this),this.value&&this.setValue(this.value)},i.prototype.showPicker=function(){var t=this,s=this.getGui().getBoundingClientRect(),l=this.createBean(new ym({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:s.right-190,y:s.top-250}));this.isPickerDisplayed=!0,At(l.getGui(),"ag-color-dialog");var c=this.createBean(new nh({picker:this}));return c.addDestroyFunc(function(){l.isAlive()&&t.destroyBean(l)}),l.setParentComponent(this),l.setBodyComponent(c),c.setValue(this.getValue()),l.addDestroyFunc(function(){t.isDestroyingPicker?t.isDestroyingPicker=!1:(t.isDestroyingPicker=!0,c.isAlive()&&t.destroyBean(c)),t.isAlive()&&t.getFocusableElement().focus(),t.isPickerDisplayed=!1}),l},i.prototype.setValue=function(t){return this.value===t?this:(this.eDisplayField.style.backgroundColor=t,d.prototype.setValue.call(this,t))},i.prototype.getValue=function(){return this.value},i}(ip),$M=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),rh=function(d){function i(t){return d.call(this,t,"ag-number-field","number")||this}return $M(i,d),i.prototype.postConstruct=function(){var t=this;d.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"blur",function(){var s=parseFloat(t.eInput.value),l=isNaN(s)?"":t.normalizeValue(s.toString());t.value!==l&&t.setValue(l)})},i.prototype.normalizeValue=function(t){if(""===t)return"";this.precision&&(t=this.adjustPrecision(t));var s=parseFloat(t);return null!=this.min&&s<this.min?t=this.min.toString():null!=this.max&&s>this.max&&(t=this.max.toString()),t},i.prototype.adjustPrecision=function(t){if(this.precision){var s=parseFloat(t).toFixed(this.precision);t=parseFloat(s).toString()}return t},i.prototype.setMin=function(t){return this.min===t||(this.min=t,bs(this.eInput,"min",t)),this},i.prototype.setMax=function(t){return this.max===t||(this.max=t,bs(this.eInput,"max",t)),this},i.prototype.setPrecision=function(t){return this.precision=t,this},i.prototype.setStep=function(t){return this.step===t||(this.step=t,bs(this.eInput,"step",t)),this},i.prototype.setValue=function(t,s){return(t=this.adjustPrecision(t))!=this.normalizeValue(t)?this:d.prototype.setValue.call(this,t,s)},i}(jw),$w=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),ih=function(d){function i(t){return d.call(this,t,"ag-range-field","range")||this}return $w(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this);var t=this.config,s=t.min,l=t.max,c=t.step;null!=s&&this.setMinValue(s),null!=l&&this.setMaxValue(l),this.setStep(c||1)},i.prototype.addInputListeners=function(){var t=this,s=Ki();this.addManagedListener(this.eInput,s?"change":"input",function(c){t.setValue(c.target.value)})},i.prototype.setMinValue=function(t){return this.min=t,this.eInput.setAttribute("min",t.toString()),this},i.prototype.setMaxValue=function(t){return this.max=t,this.eInput.setAttribute("max",t.toString()),this},i.prototype.setStep=function(t){return this.eInput.setAttribute("step",t.toString()),this},i.prototype.setValue=function(t,s){null!=this.min&&(t=Math.max(parseFloat(t),this.min).toString()),null!=this.max&&(t=Math.min(parseFloat(t),this.max).toString());var l=d.prototype.setValue.call(this,t,s);return this.eInput.value=t,l},i}(Va),qd=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Kd=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},oh=function(d){function i(t){var s=d.call(this,t,i.TEMPLATE)||this;return s.radius=0,s.offsetX=0,s.offsetY=0,s}return qd(i,d),i.prototype.postConstruct=function(){var t=this;d.prototype.postConstruct.call(this),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:function(l){t.parentCircleRect=t.eParentCircle.getBoundingClientRect()},onDragging:function(l){return t.calculateAngleDrag(l)},onDragStop:function(){}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(""+this.degrees).onValueChange(function(s){(null==s||""===s)&&(s="0"),s=t.eAngleValue.normalizeValue(s);var l=parseFloat(s);l>180&&(l-=360),t.setValue(l)}),this.updateNumberInput(),Fe(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,fa.EVENT_CHANGED,function(){t.eAngleValue.getInputElement().contains(document.activeElement)||t.updateNumberInput()})},i.prototype.updateNumberInput=function(){var t=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(t.toString())},i.prototype.positionChildCircle=function(t){var s=this.parentCircleRect||{width:24,height:24},l=this.eChildCircle,h=s.height/2;l.style.left=s.width/2+8*Math.cos(t)+"px",l.style.top=h+8*Math.sin(t)+"px"},i.prototype.calculatePolar=function(){var t=this.offsetX,s=this.offsetY,l=Math.atan2(s,t);this.degrees=this.toDegrees(l),this.radius=Math.sqrt(t*t+s*s),this.positionChildCircle(l)},i.prototype.calculateCartesian=function(){var t=this.toRadians(this.getValue()),s=this.getRadius();this.setOffsetX(Math.cos(t)*s).setOffsetY(Math.sin(t)*s)},i.prototype.setOffsetX=function(t){return this.offsetX!==t&&(this.offsetX=t,this.calculatePolar()),this},i.prototype.setOffsetY=function(t){return this.offsetY!==t&&(this.offsetY=t,this.calculatePolar()),this},i.prototype.calculateAngleDrag=function(t){var s=this.parentCircleRect,D=Math.atan2(t.clientY-s.top-s.height/2,t.clientX-s.left-s.width/2);this.setValue(D,!0)},i.prototype.toDegrees=function(t){return t/Math.PI*180},i.prototype.toRadians=function(t){return t/180*Math.PI},i.prototype.normalizeNegativeValue=function(t){return t<0?360+t:t},i.prototype.normalizeAngle180=function(t){return(t%=2*Math.PI)<-Math.PI?t+=2*Math.PI:t>=Math.PI&&(t-=2*Math.PI),t},i.prototype.getRadius=function(){return this.radius},i.prototype.setRadius=function(t){return this.radius===t||(this.radius=t,this.calculateCartesian()),this},i.prototype.onValueChange=function(t){var s=this;return this.addManagedListener(this,fa.EVENT_CHANGED,function(){t(s.degrees)}),this},i.prototype.getValue=function(t){return t?this.toRadians(this.degrees):this.degrees},i.prototype.setValue=function(t,s){var l;return l=s?t:this.normalizeAngle180(this.toRadians(t)),t=this.toDegrees(l),this.degrees!==t&&(this.degrees=Math.floor(t),this.calculateCartesian(),this.positionChildCircle(l),this.dispatchEvent({type:fa.EVENT_CHANGED})),this},i.prototype.setWidth=function(t){return ka(this.getGui(),t),this},i.prototype.destroy=function(){this.dragService.removeDragSource(this.dragListener),d.prototype.destroy.call(this)},i.TEMPLATE='<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>',Kd([He("eLabel")],i.prototype,"eLabel",void 0),Kd([He("eParentCircle")],i.prototype,"eParentCircle",void 0),Kd([He("eChildCircle")],i.prototype,"eChildCircle",void 0),Kd([He("eAngleValue")],i.prototype,"eAngleValue",void 0),Kd([H("dragService")],i.prototype,"dragService",void 0),i}(da),Xw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Sm=function(d){function i(t){return d.call(this,t,"ag-toggle-button")||this}return Xw(i,d),i.prototype.setValue=function(t,s){return d.prototype.setValue.call(this,t,s),kt(this.getGui(),"ag-selected",this.getValue()),this},i}(Zu),Jw=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),ah=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},sh=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Jw(i,d),i.prototype.getFirstRow=function(){var s,t=0;return this.pinnedRowModel.getPinnedTopRowCount()?s=fe.PINNED_TOP:this.rowModel.getRowCount()?(s=null,t=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(s=fe.PINNED_BOTTOM),void 0===s?null:{rowIndex:t,rowPinned:s}},i.prototype.getLastRow=function(){var t,s=null,l=this.pinnedRowModel.getPinnedBottomRowCount(),c=this.pinnedRowModel.getPinnedTopRowCount();return l?(s=fe.PINNED_BOTTOM,t=l-1):this.rowModel.getRowCount()?(s=null,t=this.paginationProxy.getPageLastRow()):c&&(s=fe.PINNED_TOP,t=c-1),void 0===t?null:{rowIndex:t,rowPinned:s}},i.prototype.getRowNode=function(t){switch(t.rowPinned){case fe.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[t.rowIndex];case fe.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[t.rowIndex];default:return this.rowModel.getRow(t.rowIndex)}},i.prototype.sameRow=function(t,s){return!t&&!s||!(t&&!s||!t&&s)&&t.rowIndex===s.rowIndex&&t.rowPinned==s.rowPinned},i.prototype.before=function(t,s){switch(t.rowPinned){case fe.PINNED_TOP:if(s.rowPinned!==fe.PINNED_TOP)return!0;break;case fe.PINNED_BOTTOM:if(s.rowPinned!==fe.PINNED_BOTTOM)return!1;break;default:if(Fe(s.rowPinned))return s.rowPinned!==fe.PINNED_TOP}return t.rowIndex<s.rowIndex},ah([H("rowModel")],i.prototype,"rowModel",void 0),ah([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),ah([H("paginationProxy")],i.prototype,"paginationProxy",void 0),ah([vt("rowPositionUtils")],i)}(Ye),fR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),bm=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return fR(i,d),i.prototype.createId=function(t){return this.createIdFromValues(t.rowIndex,t.column,t.rowPinned)},i.prototype.createIdFromValues=function(t,s,l){return t+"."+(null==l?"null":l)+"."+s.getId()},i.prototype.equals=function(t,s){return t.column===s.column&&t.rowPinned===s.rowPinned&&t.rowIndex===s.rowIndex},i=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c}([vt("cellPositionUtils")],i),i}(Ye),hc=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),vc=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Zw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return hc(i,d),i.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsWrapper.getPinnedTopRowData()),this.setPinnedBottomRowData(this.gridOptionsWrapper.getPinnedBottomRowData())},i.prototype.isEmpty=function(t){return ni(t===fe.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows)},i.prototype.isRowsToRender=function(t){return!this.isEmpty(t)},i.prototype.getRowAtPixel=function(t,s){var l=s===fe.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows;if(ni(l))return 0;for(var c=0;c<l.length;c++){var h=l[c];if(h.rowTop+h.rowHeight-1>=t)return c}return l.length-1},i.prototype.setPinnedTopRowData=function(t){this.pinnedTopRows=this.createNodesFromData(t,!0),this.eventService.dispatchEvent({type:$.EVENT_PINNED_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.setPinnedBottomRowData=function(t){this.pinnedBottomRows=this.createNodesFromData(t,!1),this.eventService.dispatchEvent({type:$.EVENT_PINNED_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.createNodesFromData=function(t,s){var l=this,c=[];if(t){var h=0;t.forEach(function(m,S){var R=new ln(l.beans);R.data=m,R.id=(s?ln.ID_PREFIX_TOP_PINNED:ln.ID_PREFIX_BOTTOM_PINNED)+S,R.rowPinned=s?fe.PINNED_TOP:fe.PINNED_BOTTOM,R.setRowTop(h),R.setRowHeight(l.gridOptionsWrapper.getRowHeightForNode(R).height),R.setRowIndex(S),h+=R.rowHeight,c.push(R)})}return c},i.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},i.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},i.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},i.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},i.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},i.prototype.getPinnedTopRow=function(t){return this.pinnedTopRows[t]},i.prototype.getPinnedBottomRow=function(t){return this.pinnedBottomRows[t]},i.prototype.forEachPinnedTopRow=function(t){ni(this.pinnedTopRows)||this.pinnedTopRows.forEach(t)},i.prototype.forEachPinnedBottomRow=function(t){ni(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(t)},i.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},i.prototype.getTotalHeight=function(t){if(!t||0===t.length)return 0;var s=jn(t);return s.rowTop+s.rowHeight},vc([H("columnApi")],i.prototype,"columnApi",void 0),vc([H("gridApi")],i.prototype,"gridApi",void 0),vc([H("beans")],i.prototype,"beans",void 0),vc([et],i.prototype,"init",null),vc([vt("pinnedRowModel")],i)}(Ye),hR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ps=function(i){this.cellValueChanges=i},Em=function(d){function i(t,s,l){var c=d.call(this,t)||this;return c.initialRange=s,c.finalRange=l,c}return hR(i,d),i}(Ps),Qw=function(){function d(i){this.actionStack=[],this.maxStackSize=i||d.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}return d.prototype.pop=function(){return this.actionStack.pop()},d.prototype.push=function(i){!(i.cellValueChanges&&i.cellValueChanges.length>0)||(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(i))},d.prototype.clear=function(){this.actionStack=[]},d.prototype.getCurrentStackSize=function(){return this.actionStack.length},d.DEFAULT_STACK_SIZE=10,d}(),vR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),gu=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Ui=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.cellValueChanges=[],t.activeCellEdit=null,t.activeRowEdit=null,t.isPasting=!1,t.isFilling=!1,t.onCellValueChanged=function(s){var l={column:s.column,rowIndex:s.rowIndex,rowPinned:s.rowPinned},c=null!==t.activeCellEdit&&t.cellPositionUtils.equals(t.activeCellEdit,l),h=null!==t.activeRowEdit&&t.rowPositionUtils.sameRow(t.activeRowEdit,l);if(c||h||t.isPasting||t.isFilling){var L=s.oldValue,U=s.value,K={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:s.column.getColId(),newValue:U,oldValue:L};t.cellValueChanges.push(K)}},t.clearStacks=function(){t.undoStack.clear(),t.redoStack.clear()},t}return vR(i,d),i.prototype.init=function(){if(this.gridOptionsWrapper.isUndoRedoCellEditing()){var t=this.gridOptionsWrapper.getUndoRedoCellEditingLimit();t<=0||(this.undoStack=new Qw(t),this.redoStack=new Qw(t),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addManagedListener(this.eventService,$.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,$.EVENT_MODEL_UPDATED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_ROW_DRAG_END,this.clearStacks))}},i.prototype.getCurrentUndoStackSize=function(){return this.undoStack?this.undoStack.getCurrentStackSize():0},i.prototype.getCurrentRedoStackSize=function(){return this.redoStack?this.redoStack.getCurrentStackSize():0},i.prototype.undo=function(){if(this.undoStack){var t=this.undoStack.pop();!t||!t.cellValueChanges||(this.processAction(t,function(s){return s.oldValue}),t instanceof Em?this.processRangeAndCellFocus(t.cellValueChanges,t.initialRange):this.processRangeAndCellFocus(t.cellValueChanges),this.redoStack.push(t))}},i.prototype.redo=function(){if(this.redoStack){var t=this.redoStack.pop();!t||!t.cellValueChanges||(this.processAction(t,function(s){return s.newValue}),t instanceof Em?this.processRangeAndCellFocus(t.cellValueChanges,t.finalRange):this.processRangeAndCellFocus(t.cellValueChanges),this.undoStack.push(t))}},i.prototype.processAction=function(t,s){var l=this;t.cellValueChanges.forEach(function(c){var S=c.columnId,D=l.getRowNode({rowIndex:c.rowIndex,rowPinned:c.rowPinned});!D.displayed||D.setDataValue(S,s(c))})},i.prototype.processRangeAndCellFocus=function(t,s){var l;if(s){var c=s.startRow,h=s.endRow;return l={rowPinned:c.rowPinned,rowIndex:c.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(l),void this.gridApi.addCellRange({rowStartIndex:c.rowIndex,rowStartPinned:c.rowPinned,rowEndIndex:h.rowIndex,rowEndPinned:h.rowPinned,columnStart:s.startColumn,columns:s.columns})}var S=t[0],U=this.getRowNode({rowIndex:S.rowIndex,rowPinned:S.rowPinned});this.setLastFocusedCell(l={rowPinned:S.rowPinned,rowIndex:U.rowIndex,columnId:S.columnId})},i.prototype.setLastFocusedCell=function(t){var s=t.rowIndex,l=t.columnId,c=t.rowPinned;this.gridApi.ensureIndexVisible(s),this.gridApi.ensureColumnVisible(l),Kt.isRegistered(Y.GXE.RangeSelectionModule)&&this.gridApi.clearRangeSelection(),this.focusService.setFocusedCell(s,l,c,!0)},i.prototype.addRowEditingListeners=function(){var t=this;this.addManagedListener(this.eventService,$.EVENT_ROW_EDITING_STARTED,function(s){t.activeRowEdit={rowIndex:s.rowIndex,rowPinned:s.rowPinned}}),this.addManagedListener(this.eventService,$.EVENT_ROW_EDITING_STOPPED,function(){var s=new Ps(t.cellValueChanges);t.pushActionsToUndoStack(s),t.activeRowEdit=null})},i.prototype.addCellEditingListeners=function(){var t=this;this.addManagedListener(this.eventService,$.EVENT_CELL_EDITING_STARTED,function(s){t.activeCellEdit={column:s.column,rowIndex:s.rowIndex,rowPinned:s.rowPinned}}),this.addManagedListener(this.eventService,$.EVENT_CELL_EDITING_STOPPED,function(){if(t.activeCellEdit=null,!t.activeRowEdit&&!t.isPasting&&!t.isFilling){var l=new Ps(t.cellValueChanges);t.pushActionsToUndoStack(l)}})},i.prototype.addPasteListeners=function(){var t=this;this.addManagedListener(this.eventService,$.EVENT_PASTE_START,function(){t.isPasting=!0}),this.addManagedListener(this.eventService,$.EVENT_PASTE_END,function(){var s=new Ps(t.cellValueChanges);t.pushActionsToUndoStack(s),t.isPasting=!1})},i.prototype.addFillListeners=function(){var t=this;this.addManagedListener(this.eventService,$.EVENT_FILL_START,function(){t.isFilling=!0}),this.addManagedListener(this.eventService,$.EVENT_FILL_END,function(s){var l=new Em(t.cellValueChanges,s.initialRange,s.finalRange);t.pushActionsToUndoStack(l),t.isFilling=!1})},i.prototype.pushActionsToUndoStack=function(t){this.undoStack.push(t),this.cellValueChanges=[],this.redoStack.clear()},i.prototype.getRowNode=function(t){switch(t.rowPinned){case fe.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[t.rowIndex];case fe.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[t.rowIndex];default:return this.rowModel.getRow(t.rowIndex)}},gu([H("focusService")],i.prototype,"focusService",void 0),gu([H("gridApi")],i.prototype,"gridApi",void 0),gu([H("rowModel")],i.prototype,"rowModel",void 0),gu([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),gu([H("cellPositionUtils")],i.prototype,"cellPositionUtils",void 0),gu([H("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),gu([et],i.prototype,"init",null),gu([vt("undoRedoService")],i)}(Ye),gR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),xm=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},e0=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return gR(i,d),i.prototype.findHeader=function(t,s){var l;if(l=t.column instanceof ai?this.columnModel["getDisplayedGroup"+s](t.column):this.columnModel["getDisplayedCol"+s](t.column))return{column:l,headerRowIndex:t.headerRowIndex}},i.prototype.findColAtEdgeForHeaderRow=function(t,s){var l=this.columnModel.getAllDisplayedColumns(),c=l["start"===s?0:l.length-1];if(c){var m=this.ctrlsService.getHeaderRowContainerCtrl(c.getPinned()).getRowType(t);return console.log("level="+t+" type = "+m),m==Y.A6C.COLUMN_GROUP?{headerRowIndex:t,column:this.columnModel.getColumnGroupAtLevel(c,t)}:{headerRowIndex:null==m?-1:t,column:c}}},xm([H("columnModel")],i.prototype,"columnModel",void 0),xm([H("ctrlsService")],i.prototype,"ctrlsService",void 0),xm([vt("headerPositionUtils")],i)}(Ye),mR=function(){function d(){}return d.prototype.buildColumnDefs=function(i,t,s){var l=this,c=[],h={};return i.forEach(function(m){for(var R=!0,D=l.createDefFromColumn(m,t,s),L=m.getOriginalParent();L;){var U=null;if(L.isPadding())L=L.getOriginalParent();else{var K=h[L.getGroupId()];if(K){K.children.push(D),R=!1;break}(U=l.createDefFromGroup(L))&&(U.children=[D],h[U.groupId]=U,D=U,L=L.getOriginalParent())}}R&&c.push(D)}),c},d.prototype.createDefFromGroup=function(i){var t=If(i.getColGroupDef(),["children"]);return t&&(t.groupId=i.getGroupId()),t},d.prototype.createDefFromColumn=function(i,t,s){var l=If(i.getColDef());return l.colId=i.getColId(),l.width=i.getActualWidth(),l.rowGroup=i.isRowGroupActive(),l.rowGroupIndex=i.isRowGroupActive()?t.indexOf(i):null,l.pivot=i.isPivotActive(),l.pivotIndex=i.isPivotActive()?s.indexOf(i):null,l.aggFunc=i.isValueActive()?i.getAggFunc():null,l.hide=!i.isVisible()||void 0,l.pinned=i.isPinned()?i.getPinned():null,l.sort=i.getSort()?i.getSort():null,l.sortIndex=null!=i.getSortIndex()?i.getSortIndex():null,l},d=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c}([vt("columnDefFactory")],d),d}(),n0=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},yR=function(){function d(){}return d.prototype.getInitialRowClasses=function(i){var t=[];return Fe(i.extraCssClass)&&t.push(i.extraCssClass),t.push("ag-row"),t.push(i.rowFocused?"ag-row-focus":"ag-row-no-focus"),i.fadeRowIn&&t.push("ag-opacity-zero"),t.push(i.rowIsEven?"ag-row-even":"ag-row-odd"),i.rowNode.isRowPinned()&&t.push("ag-row-pinned"),i.rowNode.isSelected()&&t.push("ag-row-selected"),i.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+i.rowLevel),i.rowNode.stub&&t.push("ag-row-loading"),i.fullWidthRow&&t.push("ag-full-width-row"),i.expandable&&(t.push("ag-row-group"),t.push(i.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),i.rowNode.dragging&&t.push("ag-row-dragging"),ht(t,this.processClassesFromGridOptions(i.rowNode,i.scope)),ht(t,this.preProcessRowClassRules(i.rowNode,i.scope)),t.push(i.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),i.firstRowOnPage&&t.push("ag-row-first"),i.lastRowOnPage&&t.push("ag-row-last"),i.fullWidthRow&&(i.pinned===fe.PINNED_LEFT&&t.push("ag-cell-last-left-pinned"),i.pinned===fe.PINNED_RIGHT&&t.push("ag-cell-first-right-pinned")),t},d.prototype.processClassesFromGridOptions=function(i,t){var s=[],l=function(D){"string"==typeof D?s.push(D):Array.isArray(D)&&D.forEach(function(L){return s.push(L)})},c=this.gridOptionsWrapper.getRowClass();if(c){if("function"==typeof c)return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];l(c)}var h=this.gridOptionsWrapper.getRowClassFunc();return h&&l(h({data:i.data,node:i,rowIndex:i.rowIndex,$scope:t,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()})),s},d.prototype.preProcessRowClassRules=function(i,t){var s=[];return this.processRowClassRules(i,t,function(l){s.push(l)},function(l){}),s},d.prototype.processRowClassRules=function(i,t,s,l){var c={data:i.data,node:i,rowIndex:i.rowIndex,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),$scope:t,context:this.gridOptionsWrapper.getContext()};this.stylingService.processClassRules(this.gridOptionsWrapper.rowClassRules(),c,s,l)},d.prototype.calculateRowLevel=function(i){return i.group?i.level:i.parent?i.parent.level+1:0},n0([H("stylingService")],d.prototype,"stylingService",void 0),n0([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),n0([vt("rowCssClassCalculator")],d)}(),_R=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Rm=function(d){function i(t){var s=d.call(this)||this;return s.state=i.STATE_WAITING_TO_LOAD,s.version=0,s.id=t,s}return _R(i,d),i.prototype.getId=function(){return this.id},i.prototype.load=function(){this.state=i.STATE_LOADING,this.loadFromDatasource()},i.prototype.getVersion=function(){return this.version},i.prototype.setStateWaitingToLoad=function(){this.version++,this.state=i.STATE_WAITING_TO_LOAD},i.prototype.getState=function(){return this.state},i.prototype.pageLoadFailed=function(t){this.isRequestMostRecentAndLive(t)&&(this.state=i.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)},i.prototype.success=function(t,s){this.successCommon(t,s)},i.prototype.pageLoaded=function(t,s,l){this.successCommon(t,{rowData:s,rowCount:l})},i.prototype.isRequestMostRecentAndLive=function(t){var s=t===this.version,l=this.isAlive();return s&&l},i.prototype.successCommon=function(t,s){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(t)&&(this.state=i.STATE_LOADED,this.processServerResult(s))},i.prototype.dispatchLoadCompleted=function(t){void 0===t&&(t=!0),this.dispatchEvent({type:i.EVENT_LOAD_COMPLETE,success:t,block:this})},i.EVENT_LOAD_COMPLETE="loadComplete",i.STATE_WAITING_TO_LOAD="needsLoading",i.STATE_LOADING="loading",i.STATE_LOADED="loaded",i.STATE_FAILED="failed",i}(Ye),r0=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),o0=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},CR=function(d,i){return function(t,s){i(t,s,d)}},a0=function(d){function i(){var s=null!==d&&d.apply(this,arguments)||this;return s.activeBlockLoadsCount=0,s.blocks=[],s.active=!0,s}var t;return r0(i,d),t=i,i.prototype.postConstruct=function(){this.maxConcurrentRequests=this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();var s=this.gridOptionsWrapper.getBlockLoadDebounceMillis();s&&s>0&&(this.checkBlockToLoadDebounce=yt.debounce(this.performCheckBlocksToLoad.bind(this),s))},i.prototype.setBeans=function(s){this.logger=s.create("RowNodeBlockLoader")},i.prototype.addBlock=function(s){this.blocks.push(s),s.addEventListener(Rm.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()},i.prototype.removeBlock=function(s){yt.removeFromArray(this.blocks,s)},i.prototype.destroy=function(){d.prototype.destroy.call(this),this.active=!1},i.prototype.loadComplete=function(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),0==this.activeBlockLoadsCount&&this.dispatchEvent({type:t.BLOCK_LOADER_FINISHED_EVENT})},i.prototype.checkBlockToLoad=function(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()},i.prototype.performCheckBlocksToLoad=function(){if(this.active){if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void this.logger.log("checkBlockToLoad: max loads exceeded");var s=null;this.blocks.forEach(function(l){l.getState()===Rm.STATE_WAITING_TO_LOAD&&(s=l)}),s&&(s.load(),this.activeBlockLoadsCount++,this.printCacheStatus())}},i.prototype.getBlockState=function(){var s={};return this.blocks.forEach(function(l){var c=l.getBlockStateJson();s[c.id]=c.state}),s},i.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+", blocks = "+JSON.stringify(this.getBlockState()))},i.prototype.isLoading=function(){return this.activeBlockLoadsCount>0},i.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",o0([et],i.prototype,"postConstruct",null),o0([CR(0,ki("loggerFactory"))],i.prototype,"setBeans",null),t=o0([vt("rowNodeBlockLoader")],i)}(Ye),uh=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},wR=function(){function d(){}return d.prototype.doFullSort=function(i,t){var l=i.map(function(h,m){return{currentPos:m,rowNode:h}});return l.sort(this.compareRowNodes.bind(this,t)),l.map(function(c){return c.rowNode})},d.prototype.compareRowNodes=function(i,t,s){for(var l=t.rowNode,c=s.rowNode,h=0,m=i.length;h<m;h++){var U,S=i[h],R=S.sort===fe.SORT_DESC,D=this.getValue(l,S.column),L=this.getValue(c,S.column),K=this.getComparator(S,l);if(U=K?K(D,L,l,c,R):yt.defaultComparator(D,L,this.gridOptionsWrapper.isAccentedSort()),!isNaN(U)&&0!==U)return S.sort===fe.SORT_ASC?U:-1*U}return t.currentPos-s.currentPos},d.prototype.getComparator=function(i,t){var s=i.column,l=s.getColDef().comparator;if(null!=l)return l;if(t.rowGroupColumn)return t.rowGroupColumn.getColDef().comparator;if(s.getColDef().showRowGroup){var c=!t.group&&s.getColDef().field;if(c){var h=this.columnModel.getPrimaryColumn(c);if(h)return h.getColDef().comparator}}},d.prototype.getValue=function(i,t){return this.valueService.getValue(t,i,!1,!1)},uh([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),uh([H("valueService")],d.prototype,"valueService",void 0),uh([H("columnModel")],d.prototype,"columnModel",void 0),uh([vt("rowNodeSorter")],d)}(),XM=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),s0=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.ready=!1,t.readyCallbacks=[],t}return XM(i,d),i.prototype.checkReady=function(){if(this.ready=null!=this.gridCtrl&&null!=this.gridBodyCtrl&&null!=this.centerRowContainerCtrl&&null!=this.leftRowContainerCtrl&&null!=this.rightRowContainerCtrl&&null!=this.bottomCenterRowContainerCtrl&&null!=this.bottomLeftRowContainerCtrl&&null!=this.bottomRightRowContainerCtrl&&null!=this.topCenterRowContainerCtrl&&null!=this.topLeftRowContainerCtrl&&null!=this.topRightRowContainerCtrl&&null!=this.centerHeaderRowContainerCtrl&&null!=this.leftHeaderRowContainerCtrl&&null!=this.rightHeaderRowContainerCtrl&&null!=this.fakeHScrollCtrl&&null!=this.gridHeaderCtrl,this.ready){var t=this.createReadyParams();this.readyCallbacks.forEach(function(s){return s(t)}),this.readyCallbacks.length=0}},i.prototype.whenReady=function(t){this.ready?t(this.createReadyParams()):this.readyCallbacks.push(t)},i.prototype.createReadyParams=function(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollCtrl:this.fakeHScrollCtrl,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}},i.prototype.registerFakeHScrollCtrl=function(t){this.fakeHScrollCtrl=t,this.checkReady()},i.prototype.registerGridHeaderCtrl=function(t){this.gridHeaderCtrl=t,this.checkReady()},i.prototype.registerCenterRowContainerCtrl=function(t){this.centerRowContainerCtrl=t,this.checkReady()},i.prototype.registerLeftRowContainerCtrl=function(t){this.leftRowContainerCtrl=t,this.checkReady()},i.prototype.registerRightRowContainerCtrl=function(t){this.rightRowContainerCtrl=t,this.checkReady()},i.prototype.registerTopCenterRowContainerCtrl=function(t){this.topCenterRowContainerCtrl=t,this.checkReady()},i.prototype.registerTopLeftRowContainerCon=function(t){this.topLeftRowContainerCtrl=t,this.checkReady()},i.prototype.registerTopRightRowContainerCtrl=function(t){this.topRightRowContainerCtrl=t,this.checkReady()},i.prototype.registerBottomCenterRowContainerCtrl=function(t){this.bottomCenterRowContainerCtrl=t,this.checkReady()},i.prototype.registerBottomLeftRowContainerCtrl=function(t){this.bottomLeftRowContainerCtrl=t,this.checkReady()},i.prototype.registerBottomRightRowContainerCtrl=function(t){this.bottomRightRowContainerCtrl=t,this.checkReady()},i.prototype.registerHeaderContainer=function(t,s){switch(s){case fe.PINNED_LEFT:this.leftHeaderRowContainerCtrl=t;break;case fe.PINNED_RIGHT:this.rightHeaderRowContainerCtrl=t;break;default:this.centerHeaderRowContainerCtrl=t}this.checkReady()},i.prototype.registerGridBodyCtrl=function(t){this.gridBodyCtrl=t,this.checkReady()},i.prototype.registerGridCtrl=function(t){this.gridCtrl=t,this.checkReady()},i.prototype.getFakeHScrollCtrl=function(){return this.fakeHScrollCtrl},i.prototype.getGridHeaderCtrl=function(){return this.gridHeaderCtrl},i.prototype.getGridCtrl=function(){return this.gridCtrl},i.prototype.getCenterRowContainerCtrl=function(){return this.centerRowContainerCtrl},i.prototype.getTopCenterRowContainerCtrl=function(){return this.topCenterRowContainerCtrl},i.prototype.getBottomCenterRowContainerCtrl=function(){return this.bottomCenterRowContainerCtrl},i.prototype.getGridBodyCtrl=function(){return this.gridBodyCtrl},i.prototype.getHeaderRowContainerCtrls=function(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]},i.prototype.getHeaderRowContainerCtrl=function(t){switch(t){case fe.PINNED_LEFT:return this.leftHeaderRowContainerCtrl;case fe.PINNED_RIGHT:return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}},i=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c}([vt("ctrlsService")],i),i}(Ye),u0=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),JM=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.registry={},t}return u0(i,d),i.prototype.register=function(t){this.registry[t.controllerName]=t.controllerClass},i.prototype.getInstance=function(t){var s=this.registry[t];if(null!=s)return new s},i=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c}([vt("ctrlsFactory")],i),i}(Ye),ma=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Dm=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},ZM=function(d){function i(){return d.call(this)||this}return ma(i,d),i.prototype.setComp=function(t,s,l,c){this.view=t,this.eViewport=l,this.eContainer=c,this.eGui=s,this.addManagedListener(this.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged();var h=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,h),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,h),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,h),this.setFakeHScrollSpacerWidths(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()),this.ctrlsService.registerFakeHScrollCtrl(this)},i.prototype.addActiveListenerToggles=function(){var t=this;["mouseenter","mousedown","touchstart"].forEach(function(c){return t.addManagedListener(t.eGui,c,function(){return t.view.addOrRemoveCssClass("ag-scrollbar-active",!0)})}),["mouseleave","mouseup","touchend"].forEach(function(c){return t.addManagedListener(t.eGui,c,function(){return t.view.addOrRemoveCssClass("ag-scrollbar-active",!1)})})},i.prototype.postConstruct=function(){this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.invisibleScrollbar=_s()},i.prototype.onScrollVisibilityChanged=function(){this.setScrollVisible(),this.setFakeHScrollSpacerWidths()},i.prototype.hideAndShowInvisibleScrollAsNeeded=function(){var t=this;this.addManagedListener(this.eventService,$.EVENT_BODY_SCROLL,function(s){"horizontal"===s.direction&&t.view.addOrRemoveCssClass("ag-scrollbar-scrolling",!0)}),this.addManagedListener(this.eventService,$.EVENT_BODY_SCROLL_END,function(){return t.view.addOrRemoveCssClass("ag-scrollbar-scrolling",!1)})},i.prototype.setFakeHScrollSpacerWidths=function(){var t=this.scrollVisibleService.isVerticalScrollShowing(),s=this.columnModel.getDisplayedColumnsRightWidth(),l=!this.enableRtl&&t,c=this.gridOptionsWrapper.getScrollbarWidth();l&&(s+=c),this.view.setRightSpacerFixedWidth(s),this.view.includeRightSpacerScrollerCss("ag-scroller-corner",s<=c);var h=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&t&&(h+=c),this.view.setLeftSpacerFixedWidth(h),this.view.includeLeftSpacerScrollerCss("ag-scroller-corner",h<=c)},i.prototype.setScrollVisible=function(){var t=this.scrollVisibleService.isHorizontalScrollShowing(),s=this.invisibleScrollbar,l=this.gridOptionsWrapper.isSuppressHorizontalScroll(),c=t&&this.gridOptionsWrapper.getScrollbarWidth()||0,m=l?0:0===c&&s?15:c,S=Ki()&&t;this.view.addOrRemoveCssClass("ag-scrollbar-invisible",s),this.view.setHeight(m),this.view.setViewportHeight(m+(S?1:0)),this.view.setContainerHeight(m)},i.prototype.getViewport=function(){return this.eViewport},i.prototype.getContainer=function(){return this.eContainer},Dm([H("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),Dm([H("columnModel")],i.prototype,"columnModel",void 0),Dm([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Dm([et],i.prototype,"postConstruct",null),i}(Ye),c0=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),gc=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},d0=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return c0(i,d),i.prototype.postConstruct=function(){var t=this,s={addOrRemoveCssClass:function(h,m){return t.addOrRemoveCssClass(h,m)},setHeight:function(h){return lt(t.getGui(),h)},setContainerHeight:function(h){return lt(t.eContainer,h)},setViewportHeight:function(h){return lt(t.eViewport,h)},setRightSpacerFixedWidth:function(h){return ka(t.eRightSpacer,h)},setLeftSpacerFixedWidth:function(h){return ka(t.eLeftSpacer,h)},includeLeftSpacerScrollerCss:function(h,m){return kt(t.eLeftSpacer,h,m)},includeRightSpacerScrollerCss:function(h,m){return kt(t.eRightSpacer,h,m)}};this.createManagedBean(new ZM).setComp(s,this.getGui(),this.eViewport,this.eContainer),this.createManagedBean(new Pg(function(c){return t.eContainer.style.width=c+"px"}))},i.TEMPLATE='<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>\n        </div>',gc([He("eLeftSpacer")],i.prototype,"eLeftSpacer",void 0),gc([He("eRightSpacer")],i.prototype,"eRightSpacer",void 0),gc([He("eViewport")],i.prototype,"eViewport",void 0),gc([He("eContainer")],i.prototype,"eContainer",void 0),gc([et],i.prototype,"postConstruct",null),i}(hn),SR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),f0=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},p0=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return SR(i,d),i.prototype.postConstruct=function(){var t=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,t),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,t)},i.prototype.checkContainerWidths=function(){var t=this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_PRINT,s=t?0:this.columnModel.getDisplayedColumnsLeftWidth(),l=t?0:this.columnModel.getDisplayedColumnsRightWidth();s!=this.leftWidth&&(this.leftWidth=s,this.eventService.dispatchEvent({type:$.EVENT_LEFT_PINNED_WIDTH_CHANGED})),l!=this.rightWidth&&(this.rightWidth=l,this.eventService.dispatchEvent({type:$.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))},i.prototype.getPinnedRightWidth=function(){return this.rightWidth},i.prototype.getPinnedLeftWidth=function(){return this.leftWidth},f0([H("columnModel")],i.prototype,"columnModel",void 0),f0([et],i.prototype,"postConstruct",null),f0([vt("pinnedWidthService")],i)}(Ye),h0=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),lh=function(d){function i(t){var s=d.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return s.params=t,s}return h0(i,d),i.prototype.postConstruct=function(){this.gridOptionsWrapper.setDomData(this.getGui(),i.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()},i.prototype.addKeyDownListener=function(){var t=this,s=this.getGui(),l=this.params;this.addManagedListener(s,"keydown",function(m){$i(t.gridOptionsWrapper,m,l.node,l.column,!0)||l.onKeyDown(m)})},i.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);l>3&&c&&Object.defineProperty(i,t,c)}([et],i.prototype,"postConstruct",null),i}(Uu),ER=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Am=function(){return Am=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Am.apply(this,arguments)},v0=function(d){function i(t,s,l,c,h,m,S){var R=d.call(this)||this;R.scope=null,R.rendererVersion=0,R.editorVersion=0,R.scope=t,R.beans=s,R.column=l.getColumn(),R.rowNode=l.getRowNode(),R.rowCtrl=l.getRowCtrl(),R.autoHeightCell=c,R.eRow=m,R.setTemplate('<div comp-id="'+R.getCompId()+'"/>');var D=R.getGui(),L=D.style;R.eCellValue=D;var U=function(ae,Te,Ve){var We=Ve||D;null!=Te&&""!=Te?We.setAttribute(ae,Te):We.removeAttribute(ae)},K={addOrRemoveCssClass:function(ae,Te){return R.addOrRemoveCssClass(ae,Te)},setUserStyles:function(ae){return Vu(D,ae)},setAriaSelected:function(ae){return ad(D,ae)},setAriaExpanded:function(ae){return Qf(D,ae)},getFocusableElement:function(){return R.getFocusableElement()},setLeft:function(ae){return L.left=ae},setWidth:function(ae){return L.width=ae},setAriaColIndex:function(ae){return N_(R.getGui(),ae)},setHeight:function(ae){return L.height=ae},setZIndex:function(ae){return L.zIndex=ae},setTabIndex:function(ae){return U("tabindex",ae.toString())},setRole:function(ae){return Yi(D,ae)},setColId:function(ae){return U("col-id",ae)},setTitle:function(ae){return U("title",ae)},setUnselectable:function(ae){return U("unselectable",ae,R.eCellValue)},setTransition:function(ae){return L.transition=ae||""},setIncludeSelection:function(ae){return R.includeSelection=ae},setIncludeRowDrag:function(ae){return R.includeRowDrag=ae},setIncludeDndSource:function(ae){return R.includeDndSource=ae},setForceWrapper:function(ae){return R.forceWrapper=ae},setRenderDetails:function(ae,Te,Ve){return R.setRenderDetails(ae,Te,Ve)},setEditDetails:function(ae,Te,Ve){return R.setEditDetails(ae,Te,Ve)},getCellEditor:function(){return R.cellEditor||null},getCellRenderer:function(){return R.cellRenderer||null},getParentOfValue:function(){return R.eCellValue}};return R.cellCtrl=l,l.setComp(K,R.scope,R.getGui(),h,S),R}return ER(i,d),i.prototype.setRenderDetails=function(t,s,l){if(!this.cellEditor||this.cellEditorPopupWrapper){this.firstRender=null==this.firstRender;var h=this.isUsingAngular1Template(),m=this.setupControlsWrapper();t?!l&&!m&&this.refreshCellRenderer(t)||(this.destroyRenderer(),this.createCellRendererInstance(t)):(this.destroyRenderer(),h?this.insertValueUsingAngular1Template():this.insertValueWithoutCellRenderer(s))}},i.prototype.setEditDetails=function(t,s,l){t?this.createCellEditorInstance(t,s,l):this.destroyEditor()},i.prototype.removeControlsWrapper=function(){this.eCellValue=this.getGui(),this.eCellWrapper=null,this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)},i.prototype.setupControlsWrapper=function(){var t=this.includeRowDrag||this.includeDndSource||this.includeSelection||this.forceWrapper;return this.addOrRemoveCssClass("ag-cell-value",!t),t&&!this.eCellWrapper?(this.addControlsWrapper(),!0):!(t||!this.eCellWrapper||(this.removeControlsWrapper(),0))},i.prototype.addControlsWrapper=function(){this.getGui().innerHTML='<div ref="eCellWrapper" class="ag-cell-wrapper" role="presentation">\n                <span ref="eCellValue" class="ag-cell-value" role="presentation"></span>\n            </div>',this.eCellValue=this.getRefElement("eCellValue"),this.eCellWrapper=this.getRefElement("eCellWrapper"),this.forceWrapper||this.eCellValue.setAttribute("unselectable","on");var s=this.eCellValue.id="cell-"+this.getCompId(),l=[];this.includeRowDrag&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue),l.push(this.checkboxSelectionComp.getCheckboxId())),l.push(s),go(this.getGui(),l.join(" "))},i.prototype.createCellEditorInstance=function(t,s,l){var c=this,h=this.editorVersion,m=t.newAgStackInstance();if(m){var S=t.params;m.then(function(D){return c.afterCellEditorCreated(h,D,S,s,l)}),we(this.cellEditor)&&S.cellStartedEdit&&this.cellCtrl.focusCell(!0)}},i.prototype.insertValueWithoutCellRenderer=function(t){var s=null!=t?ua(t):null;null!=s?this.eCellValue.innerHTML=s:co(this.eCellValue)},i.prototype.insertValueUsingAngular1Template=function(){var h,t=this,s=this.column.getColDef(),l=s.template,c=s.templateUrl;null!=l?h=l:null!=c&&(h=this.beans.templateService.getTemplate(c,function(){return t.cellCtrl.refreshCell({forceRefresh:!0})})),null!=h&&(this.eCellValue.innerHTML=h,this.updateAngular1ScopeAndCompile())},i.prototype.destroyEditorAndRenderer=function(){this.destroyRenderer(),this.destroyEditor()},i.prototype.destroyRenderer=function(){this.cellRenderer=this.beans.context.destroyBean(this.cellRenderer),Ci(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++},i.prototype.destroyEditor=function(){var t=this.beans.context;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=t.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=t.destroyBean(this.cellEditorPopupWrapper),Ci(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++},i.prototype.refreshCellRenderer=function(t){if(null==this.cellRenderer||null==this.cellRenderer.refresh||this.cellRendererClass!==t.componentClass)return!1;var s=this.cellRenderer.refresh(t.params);return!0===s||void 0===s},i.prototype.createCellRendererInstance=function(t){var s=this,l=this.beans.gridOptionsWrapper.isAngularCompileRows(),c=this.beans.gridOptionsWrapper.isSuppressAnimationFrame(),m=this.rendererVersion,S=t.componentClass,R=function(){if(s.rendererVersion===m&&s.isAlive()){var U=t.newAgStackInstance(),K=s.afterCellRendererCreated.bind(s,m,S);U&&U.then(K)}};l||c||this.autoHeightCell||!this.firstRender?R():this.beans.animationFrameService.createTask(R,this.rowNode.rowIndex,"createTasksP2")},i.prototype.isUsingAngular1Template=function(){var t=this.column.getColDef();return null!=t.template||null!=t.templateUrl},i.prototype.getCtrl=function(){return this.cellCtrl},i.prototype.getRowCtrl=function(){return this.rowCtrl},i.prototype.getCellRenderer=function(){return this.cellRenderer},i.prototype.getCellEditor=function(){return this.cellEditor},i.prototype.afterCellRendererCreated=function(t,s,l){this.isAlive()&&t===this.rendererVersion?(this.cellRenderer=l,this.cellRendererClass=s,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui&&(co(this.eCellValue),this.eCellValue.appendChild(this.cellRendererGui),this.updateAngular1ScopeAndCompile())):this.beans.context.destroyBean(l)},i.prototype.afterCellEditorCreated=function(t,s,l,c,h){if(t!==this.editorVersion)this.beans.context.destroyBean(s);else{if(s.isCancelBeforeStart&&s.isCancelBeforeStart())return this.beans.context.destroyBean(s),void this.cellCtrl.stopEditing();if(!s.getGui)return console.warn("AG Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method"),void this.beans.context.destroyBean(s);this.cellEditor=s,this.cellEditorGui=s.getGui(),c||void 0!==s.isPopup&&s.isPopup()?(c||this.cellCtrl.hackSayEditingInPopup(),this.addPopupCellEditor(l,h)):this.addInCellEditor(),s.afterGuiAttached&&s.afterGuiAttached()}},i.prototype.addInCellEditor=function(){var t=this.getGui();t.contains(document.activeElement)&&t.focus(),this.destroyRenderer(),this.removeControlsWrapper(),this.clearCellElement(),this.cellEditorGui&&t.appendChild(this.cellEditorGui)},i.prototype.addPopupCellEditor=function(t,s){var l=this;this.beans.gridOptionsWrapper.isFullRowEdit()&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var c=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new lh(t));var h=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&h.appendChild(this.cellEditorGui);var m=this.beans.popupService,S=this.beans.gridOptionsWrapper.isStopEditingWhenCellsLoseFocus(),D=(null!=s||c.getPopupPosition&&c.getPopupPosition(),{column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),ePopup:h,keepWithinBounds:!0}),L="under"===s?m.positionPopupUnderComponent.bind(m,D):m.positionPopupOverComponent.bind(m,D),U=this.beans.gridOptionsWrapper.getLocaleTextFunc(),K=m.addPopup({modal:S,eChild:h,closeOnEsc:!0,closedCallback:function(){l.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:L,ariaLabel:U("ariaLabelCellEditor","Cell Editor")});K&&(this.hideEditorPopup=K.hideFunc)},i.prototype.detach=function(){this.eRow.removeChild(this.getGui())},i.prototype.destroy=function(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControlsWrapper(),this.angularCompiledElement&&(this.angularCompiledElement.remove(),this.angularCompiledElement=void 0),d.prototype.destroy.call(this)},i.prototype.clearCellElement=function(){var t=this.getGui();t.contains(document.activeElement)&&!Ki()&&t.focus({preventScroll:!0}),co(t)},i.prototype.updateAngular1ScopeAndCompile=function(){this.beans.gridOptionsWrapper.isAngularCompileRows()&&this.scope&&(this.scope.data=Am({},this.rowNode.data),this.angularCompiledElement&&this.angularCompiledElement.remove(),this.angularCompiledElement=this.beans.$compile(this.eCellValue.children)(this.scope),this.beans.ctrlsService.getGridBodyCtrl().requestAngularApply())},i}(hn),xR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),RR=function(d){function i(t,s,l){var c=d.call(this)||this;c.cellComps={},c.beans=s,c.rowCtrl=t,c.setTemplate('<div comp-id="'+c.getCompId()+'" style="'+c.getInitialStyle()+'"/>');var h=c.getGui(),m=h.style;return t.setComp({setDisplay:function(D){null==D?m.removeProperty("display"):m.setProperty("display","none")},setDomOrder:function(D){return c.domOrder=D},setCellCtrls:function(D){return c.setCellCtrls(D)},showFullWidth:function(D){return c.showFullWidth(D)},getFullWidthCellRenderer:function(){return c.getFullWidthCellRenderer()},addOrRemoveCssClass:function(D,L){return c.addOrRemoveCssClass(D,L)},setAriaExpanded:function(D){return Qf(h,D)},setUserStyles:function(D){return Vu(h,D)},setAriaSelected:function(D){return ad(h,D)},setAriaLabel:function(D){Ba(h,null==D?"":D)},setHeight:function(D){return m.height=D},setTop:function(D){return m.top=D},setTransform:function(D){return m.transform=D},setRowIndex:function(D){return h.setAttribute("row-index",D)},setRole:function(D){return Yi(h,D)},setAriaRowIndex:function(D){return k_(c.getGui(),D)},setRowId:function(D){return h.setAttribute("row-id",D)},setRowBusinessKey:function(D){return h.setAttribute("row-business-key",D)},setTabIndex:function(D){return h.setAttribute("tabindex",D.toString())}},c.getGui(),l),c}return xR(i,d),i.prototype.getInitialStyle=function(){var t=this.rowCtrl.getInitialTransform(),s=this.rowCtrl.getInitialRowTop();return t?"transform: "+t:"top: "+s},i.prototype.showFullWidth=function(t){var s=this,c=t.newAgStackInstance(this.rowCtrl.getFullWidthCellRendererType());!c||c.then(function(m){if(s.isAlive()){var S=m.getGui();s.getGui().appendChild(S),s.rowCtrl.getRowType()===Si.FullWidthDetail&&s.rowCtrl.setupDetailRowAutoHeight(S),s.setFullWidthRowComp(m)}else s.beans.context.destroyBean(m)})},i.prototype.setCellCtrls=function(t){var s=this,l=ii({},this.cellComps);t.forEach(function(h){var m=h.getInstanceId();null==s.cellComps[m]?s.newCellComp(h):l[m]=null});var c=Ma(l).filter(function(h){return null!=h});this.destroyCells(c),this.ensureDomOrder(t)},i.prototype.ensureDomOrder=function(t){var s=this;if(this.domOrder){var l=[];t.forEach(function(c){var h=s.cellComps[c.getInstanceId()];h&&l.push(h.getGui())}),po(this.getGui(),l)}},i.prototype.newCellComp=function(t){var s=new v0(this.rowCtrl.getScope(),this.beans,t,!1,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[t.getInstanceId()]=s,this.getGui().appendChild(s.getGui())},i.prototype.destroy=function(){d.prototype.destroy.call(this),this.destroyAllCells()},i.prototype.destroyAllCells=function(){var t=Ma(this.cellComps).filter(function(s){return null!=s});this.destroyCells(t)},i.prototype.setFullWidthRowComp=function(t){var s=this;this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=t,this.addDestroyFunc(function(){s.fullWidthCellRenderer=s.beans.context.destroyBean(s.fullWidthCellRenderer)})},i.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},i.prototype.destroyCells=function(t){var s=this;t.forEach(function(l){if(l){var c=l.getCtrl().getInstanceId();s.cellComps[c]===l&&(l.detach(),l.destroy(),s.cellComps[c]=null)}})},i}(hn),TR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),mc=function(){return mc=Object.assign||function(d){for(var i,t=1,s=arguments.length;t<s;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},mc.apply(this,arguments)},ya=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},yc=function(d){function i(){var t=d.call(this,function(){var d=hn.elementGettingCreated.getAttribute("name"),i=uc.getRowContainerCssClasses(d);return d===Y.hA6.CENTER?'<div class="'+i.wrapper+'" ref="eWrapper" role="presentation" unselectable="on">\n                <div class="'+i.viewport+'" ref="eViewport" role="presentation">\n                    <div class="'+i.container+'" ref="eContainer" role="rowgroup" unselectable="on"></div>\n                </div>\n            </div>':d===Y.hA6.TOP_CENTER||d===Y.hA6.BOTTOM_CENTER?'<div class="'+i.viewport+'" ref="eViewport" role="presentation" unselectable="on">\n                <div class="'+i.container+'" ref="eContainer" role="presentation" unselectable="on"></div>\n            </div>':'<div class="'+i.container+'" ref="eContainer" role="presentation" unselectable="on"></div>'}())||this;return t.rowComps={},t.name=hn.elementGettingCreated.getAttribute("name"),t}return TR(i,d),i.prototype.postConstruct=function(){var t=this,s={setViewportHeight:function(h){return t.eViewport.style.height=h},setRowCtrls:function(h){return t.setRowCtrls(h)},setDomOrder:function(h){t.domOrder=h},setContainerWidth:function(h){return t.eContainer.style.width=h}};this.createManagedBean(new uc(this.name)).setComp(s,this.eContainer,this.eViewport,this.eWrapper)},i.prototype.preDestroy=function(){this.setRowCtrls([])},i.prototype.setRowCtrls=function(t){var s=this,l=mc({},this.rowComps);this.rowComps={},this.lastPlacedElement=null,t.forEach(function(m){var S=m.getInstanceId(),R=l[S];if(R)s.rowComps[S]=R,delete l[S],s.ensureDomOrder(R.getGui());else{var D=s.newRowComp(m);s.rowComps[S]=D,s.appendRow(D.getGui())}}),Ma(l).forEach(function(h){s.eContainer.removeChild(h.getGui()),h.destroy()})},i.prototype.appendRow=function(t){this.domOrder?id(this.eContainer,t,this.lastPlacedElement):this.eContainer.appendChild(t),this.lastPlacedElement=t},i.prototype.ensureDomOrder=function(t){this.domOrder&&(Ss(this.eContainer,t,this.lastPlacedElement),this.lastPlacedElement=t)},i.prototype.newRowComp=function(t){var s=uc.getPinned(this.name);return new RR(t,this.beans,s)},ya([H("beans")],i.prototype,"beans",void 0),ya([He("eViewport")],i.prototype,"eViewport",void 0),ya([He("eContainer")],i.prototype,"eContainer",void 0),ya([He("eWrapper")],i.prototype,"eWrapper",void 0),ya([et],i.prototype,"postConstruct",null),ya([Fi],i.prototype,"preDestroy",null),i}(hn),AR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),ch=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Mm=function(d){function i(){var t=null!==d&&d.apply(this,arguments)||this;return t.events=[],t}return AR(i,d),i.prototype.postConstruct=function(){this.rowModel.getType()==fe.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel)},i.prototype.dispatchExpanded=function(t){var s=this;this.events.push(t),null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(function(){s.clientSideRowModel&&s.clientSideRowModel.onRowGroupOpened(),s.events.forEach(function(l){return s.eventService.dispatchEvent(l)}),s.events=[]})),this.dispatchExpandedDebounced()},ch([H("animationFrameService")],i.prototype,"animationFrameService",void 0),ch([H("rowModel")],i.prototype,"rowModel",void 0),ch([et],i.prototype,"postConstruct",null),ch([vt("rowNodeEventThrottle")],i)}(Ye),$a=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Is=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},xi=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return $a(i,d),i.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},i.prototype.showMenuAfterMouseEvent=function(t,s){var l=this;this.showPopup(t,function(c){l.popupService.positionPopupUnderMouseEvent({column:t,type:"columnMenu",mouseEvent:s,ePopup:c})},s.target)},i.prototype.showMenuAfterButtonClick=function(t,s,l){var c=this;this.showPopup(t,function(h){c.popupService.positionPopupUnderComponent({type:l,eventSource:s,ePopup:h,keepWithinBounds:!0,column:t})},s)},i.prototype.showPopup=function(t,s,l){var c=this,h=this.filterManager.getOrCreateFilterWrapper(t,"COLUMN_MENU"),m=document.createElement("div");Yi(m,"presentation"),At(m,"ag-menu"),this.tabListener=this.addManagedListener(m,"keydown",function(K){return c.trapFocusWithin(K,m)}),h.guiPromise.then(function(K){return m.appendChild(K)});var S,R=l||this.ctrlsService.getGridBodyCtrl().getGui(),L=this.gridOptionsWrapper.getLocaleTextFunc(),U=this.popupService.addPopup({modal:!0,eChild:m,closeOnEsc:!0,closedCallback:function(ee){t.setMenuVisible(!1,"contextMenu");var ae=ee instanceof KeyboardEvent;if(c.tabListener&&(c.tabListener=c.tabListener()),ae&&l&&kl(l)){var Te=c.focusService.findTabbableParent(l);Te&&Te.focus()}},positionCallback:function(){return s(m)},anchorToElement:R,ariaLabel:L("ariaLabelColumnMenu","Column Menu")});U&&(this.hidePopup=S=U.hideFunc),h.filterPromise.then(function(K){s(m),K.afterGuiAttached&&K.afterGuiAttached({container:"columnMenu",hidePopup:S})}),t.setMenuVisible(!0,"contextMenu")},i.prototype.trapFocusWithin=function(t,s){t.keyCode!==Xe.TAB||t.defaultPrevented||this.focusService.findNextFocusableElement(s,!1,t.shiftKey)||(t.preventDefault(),this.focusService.focusInto(s,t.shiftKey))},i.prototype.isMenuEnabled=function(t){return t.isFilterAllowed()},Is([H("filterManager")],i.prototype,"filterManager",void 0),Is([H("popupService")],i.prototype,"popupService",void 0),Is([H("focusService")],i.prototype,"focusService",void 0),Is([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Is([vt("menuFactory")],i)}(Ye),Ls=function(){function d(i,t,s){t?(this.gridOptions=t,(new Yd).create(i,t,function(l){var c=new Fd(i);l.createBean(c)},s)):console.error("AG Grid: no gridOptions provided to the grid")}return d.prototype.destroy=function(){this.gridOptions&&this.gridOptions.api&&this.gridOptions.api.destroy()},d}(),Yd=function(){function d(){}return d.prototype.create=function(i,t,s,l){var c=this,h=!!t.debug,m=this.getRegisteredModules(l),S=this.createBeansList(t.rowModelType,m),R=this.createProvidedBeans(i,t,l);if(S){var D={providedBeanInstances:R,beanClasses:S,debug:h},L=new Wp("AG Grid",function(){return t.debug}),U=new Wp("Context",function(){return D.debug}),K=new Hb(D,U),ee=K.getBean("beans");this.registerModuleUserComponents(ee,m),this.registerStackComponents(ee,m),this.registerControllers(ee,m),s(K),ee.ctrlsService.whenReady(function(){c.setColumnsAndData(ee),c.dispatchGridReadyEvent(ee,t);var ae=Kt.isRegistered(Y.GXE.EnterpriseCoreModule);L.log("initialised successfully, enterprise = "+ae)})}},d.prototype.registerControllers=function(i,t){t.forEach(function(s){s.controllers&&s.controllers.forEach(function(l){return i.ctrlsFactory.register(l)})})},d.prototype.registerStackComponents=function(i,t){var s=this.createAgStackComponentsList(t);i.agStackComponentsRegistry.setupComponents(s)},d.prototype.getRegisteredModules=function(i){var t=i?i.modules:null,s=Kt.getRegisteredModules(),l=[],c={};function h(m,S){var D;c[(D=S).moduleName]||(c[D.moduleName]=!0,l.push(D),Kt.register(D,m)),S.dependantModules&&S.dependantModules.forEach(h.bind(null,m))}return t&&t.forEach(h.bind(null,!0)),s&&s.forEach(h.bind(null,!Kt.isPackageBased())),l},d.prototype.registerModuleUserComponents=function(i,t){this.extractModuleEntity(t,function(l){return l.userComponents?l.userComponents:[]}).forEach(function(l){i.userComponentRegistry.registerDefaultComponent(l.componentName,l.componentClass)})},d.prototype.createProvidedBeans=function(i,t,s){var l=s?s.frameworkOverrides:null;we(l)&&(l=new Kx);var c={gridOptions:t,eGridDiv:i,$scope:s?s.$scope:null,$compile:s?s.$compile:null,globalEventListener:s?s.globalEventListener:null,frameworkOverrides:l};return s&&s.providedBeanInstances&&ii(c,s.providedBeanInstances),c},d.prototype.createAgStackComponentsList=function(i){var t=[{componentName:"AgCheckbox",componentClass:Zu},{componentName:"AgRadioButton",componentClass:$p},{componentName:"AgToggleButton",componentClass:Sm},{componentName:"AgInputTextField",componentClass:jw},{componentName:"AgInputTextArea",componentClass:Cm},{componentName:"AgInputNumberField",componentClass:rh},{componentName:"AgInputRange",componentClass:ih},{componentName:"AgSelect",componentClass:Ul},{componentName:"AgSlider",componentClass:wm},{componentName:"AgAngleSelect",componentClass:oh},{componentName:"AgColorPicker",componentClass:Yw},{componentName:"AgGridBody",componentClass:cw},{componentName:"AgHeaderRoot",componentClass:pa},{componentName:"AgPagination",componentClass:aR},{componentName:"AgOverlayWrapper",componentClass:YM},{componentName:"AgGroupComponent",componentClass:Uw},{componentName:"AgPanel",componentClass:Ud},{componentName:"AgDialog",componentClass:ym},{componentName:"AgRowContainer",componentClass:yc},{componentName:"AgFakeHorizontalScroll",componentClass:d0}],s=this.extractModuleEntity(i,function(l){return l.agStackComponents?l.agStackComponents:[]});return t.concat(s)},d.prototype.createBeansList=function(i,t){var s=this.getRowModelClass(i,t);if(s){var l=[s,Tg,sh,bm,e0,Qx,dw,_g,um,Qp,ga,wg,iR,Qo,Zw,Kp,Ia,tu,gt,hw,ec,Ix,pn,PC,om,cx,jg,R_,fw,Mw,kw,Aw,Fp,vw,Yb,Yg,xi,Vi,_C,Wi,Sw,yo,Ew,em,Xx,Yx,Cw,hu,Rw,Nw,im,am,nR,Ui,Zb,mR,yR,a0,wR,s0,p0,Mm,JM],c=this.extractModuleEntity(t,function(m){return m.beans?m.beans:[]});l.push.apply(l,c);var h=[];return l.forEach(function(m){h.indexOf(m)<0&&h.push(m)}),h}},d.prototype.extractModuleEntity=function(i,t){return[].concat.apply([],i.map(t))},d.prototype.setColumnsAndData=function(i){var t=i.gridOptionsWrapper.getColumnDefs();i.columnModel.setColumnDefs(t||[],"gridInitializing"),i.rowModel.start()},d.prototype.dispatchGridReadyEvent=function(i,t){i.eventService.dispatchEvent({type:$.EVENT_GRID_READY,api:t.api,columnApi:t.columnApi})},d.prototype.getRowModelClass=function(i,t){i||(i=fe.ROW_MODEL_TYPE_CLIENT_SIDE);var s={};t.forEach(function(c){Nn(c.rowModels,function(h,m){s[h]=m})});var l=s[i];if(Fe(l))return l;i===fe.ROW_MODEL_TYPE_INFINITE&&console.error('AG Grid: Row Model "Infinite" not found. Please ensure the '+Y.GXE.InfiniteRowModelModule+" is registered.';"),console.error("AG Grid: could not find matching row model for rowModelType "+i),i===fe.ROW_MODEL_TYPE_VIEWPORT&&console.error('AG Grid: Row Model "Viewport" not found. Please ensure the AG Grid Enterprise Module '+Y.GXE.ViewportRowModelModule+" is registered.';"),i===fe.ROW_MODEL_TYPE_SERVER_SIDE&&console.error('AG Grid: Row Model "Server Side" not found. Please ensure the AG Grid Enterprise Module '+Y.GXE.ServerSideRowModelModule+" is registered.';"),i===fe.ROW_MODEL_TYPE_CLIENT_SIDE&&console.error('AG Grid: Row Model "Client Side" not found. Please ensure the '+Y.GXE.ClientSideRowModelModule+" is registered.';")},d}();var wc=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Fs=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c};!function(d){function i(t){var s=d.call(this,i.getTemplate(t.cssClass))||this;return s.items=[],s.params=t,t.items&&t.items.forEach(function(l){return s.addItem(l)}),s}wc(i,d),i.prototype.postConstruct=function(){this.createManagedBean(new Yo(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},i.getTemplate=function(t){return'<div class="ag-tabs '+t+'">\n            <div ref="eHeader" role="tablist" class="ag-tabs-header '+(t?t+"-header":"")+'"></div>\n            <div ref="eBody" role="presentation" class="ag-tabs-body '+(t?t+"-body":"")+'"></div>\n        </div>'},i.prototype.handleKeyDown=function(t){switch(t.keyCode){case Xe.RIGHT:case Xe.LEFT:if(!this.eHeader.contains(document.activeElement))return;var s=this.items.indexOf(this.activeItem),l=t.keyCode===Xe.RIGHT?Math.min(s+1,this.items.length-1):Math.max(s-1,0);if(s===l)return;t.preventDefault();var c=this.items[l];this.showItemWrapper(c),c.eHeaderButton.focus();break;case Xe.UP:case Xe.DOWN:t.stopPropagation()}},i.prototype.onTabKeyDown=function(t){if(!t.defaultPrevented){var s=this,l=s.focusService,c=s.eHeader,h=s.eBody,m=s.activeItem,S=document.activeElement;if(t.preventDefault(),c.contains(S))l.focusInto(h,t.shiftKey);else if(l.isFocusUnderManagedComponent(h))m.eHeaderButton.focus();else{var R=l.findNextFocusableElement(h,!1,t.shiftKey);R?R.focus():m.eHeaderButton.focus()}}},i.prototype.setAfterAttachedParams=function(t){this.afterAttachedParams=t},i.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},i.prototype.addItem=function(t){var s=document.createElement("span");Yi(s,"tab"),s.setAttribute("tabIndex","-1"),s.appendChild(t.title),At(s,"ag-tab"),this.eHeader.appendChild(s),Ba(s,t.titleLabel);var l={tabbedItem:t,eHeaderButton:s};this.items.push(l),s.addEventListener("click",this.showItemWrapper.bind(this,l))},i.prototype.showItem=function(t){var s=Li(this.items,function(l){return l.tabbedItem===t});s&&this.showItemWrapper(s)},i.prototype.showItemWrapper=function(t){var s=this;this.params.onItemClicked&&this.params.onItemClicked({item:t.tabbedItem}),this.activeItem!==t?(co(this.eBody),t.tabbedItem.bodyPromise.then(function(l){s.eBody.appendChild(l);var c=!s.focusService.isKeyboardMode();s.focusService.focusInto(s.eBody,!1,c),t.tabbedItem.afterAttachedCallback&&t.tabbedItem.afterAttachedCallback(s.afterAttachedParams)}),this.activeItem&&_i(this.activeItem.eHeaderButton,"ag-tab-selected"),At(t.eHeaderButton,"ag-tab-selected"),this.activeItem=t):Bb(this.params.onActiveItemClicked)},Fs([H("focusService")],i.prototype,"focusService",void 0),Fs([He("eHeader")],i.prototype,"eHeader",void 0),Fs([He("eBody")],i.prototype,"eBody",void 0),Fs([et],i.prototype,"postConstruct",null)}(hn);!function(d){d.Applied="Applied",d.StoreNotFound="StoreNotFound",d.StoreLoading="StoreLoading",d.StoreWaitingToLoad="StoreWaitingToLoad",d.StoreLoadingFailed="StoreLoadingFailed",d.StoreWrongType="StoreWrongType",d.Cancelled="Cancelled"}(Y.Qk6||(Y.Qk6={}));var Ec=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),ks=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},y0=(function(d){function i(t,s,l){void 0===t&&(t="default"),void 0===s&&(s="listbox");var c=d.call(this,i.getTemplate(t))||this;return c.cssIdentifier=t,c.ariaRole=s,c.listName=l,c.renderedRows=new Map,c.rowHeight=20,c.isDestroyed=!1,c}Ec(i,d),i.prototype.postConstruct=function(){var t=this;this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:function(l){return t.onFocusIn(l)},onFocusOut:function(l){return t.onFocusOut(l)},focusInnerElement:function(l){return t.focusInnerElement(l)},onTabKeyDown:function(l){return t.onTabKeyDown(l)},handleKeyDown:function(l){return t.handleKeyDown(l)}}),this.setAriaProperties()},i.prototype.setAriaProperties=function(){var s=this.gridOptionsWrapper.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),l=this.eContainer;Yi(l,this.ariaRole),Ba(l,s)},i.prototype.addResizeObserver=function(){var t=this.drawVirtualRows.bind(this),s=this.resizeObserverService.observeResize(this.getGui(),t);this.addDestroyFunc(s)},i.prototype.focusInnerElement=function(t){this.focusRow(t?this.model.getRowCount()-1:0)},i.prototype.onFocusIn=function(t){var s=t.target;return Cs(s,"ag-virtual-list-item")&&(this.lastFocusedRowIndex=zo(s)-1),!1},i.prototype.onFocusOut=function(t){return this.getFocusableElement().contains(t.relatedTarget)||(this.lastFocusedRowIndex=null),!1},i.prototype.handleKeyDown=function(t){switch(t.keyCode){case Xe.UP:case Xe.DOWN:this.navigate(t.keyCode===Xe.UP)&&t.preventDefault()}},i.prototype.onTabKeyDown=function(t){this.navigate(t.shiftKey)?t.preventDefault():this.focusService.focusInto(this.getGui(),!t.shiftKey)},i.prototype.navigate=function(t){if(null==this.lastFocusedRowIndex)return!1;var s=this.lastFocusedRowIndex+(t?-1:1);return!(s<0||s>=this.model.getRowCount()||(this.focusRow(s),0))},i.prototype.getLastFocusedRow=function(){return this.lastFocusedRowIndex},i.prototype.focusRow=function(t){var s=this;this.ensureIndexVisible(t),window.setTimeout(function(){var l=s.renderedRows.get(t);l&&l.eDiv.focus()},10)},i.prototype.getComponentAt=function(t){var s=this.renderedRows.get(t);return s&&s.rowComponent},i.getTemplate=function(t){return'\n            <div class="ag-virtual-list-viewport ag-'+t+'-virtual-list-viewport" role="presentation">\n                <div class="ag-virtual-list-container ag-'+t+'-virtual-list-container" ref="eContainer"></div>\n            </div>'},i.prototype.getItemHeight=function(){return this.gridOptionsWrapper.getListItemHeight()},i.prototype.ensureIndexVisible=function(t){var s=this.model.getRowCount();if("number"!=typeof t||t<0||t>=s)console.warn("invalid row index for ensureIndexVisible: "+t);else{var l=t*this.rowHeight,c=l+this.rowHeight,h=this.getGui(),m=h.scrollTop,S=h.offsetHeight,L=m+S<c;m>l?h.scrollTop=l:L&&(h.scrollTop=c-S)}},i.prototype.setComponentCreator=function(t){this.componentCreator=t},i.prototype.getRowHeight=function(){return this.rowHeight},i.prototype.getScrollTop=function(){return this.getGui().scrollTop},i.prototype.setRowHeight=function(t){this.rowHeight=t,this.refresh()},i.prototype.refresh=function(){var t=this;if(null!=this.model&&!this.isDestroyed){var s=this.model.getRowCount();this.eContainer.style.height=s*this.rowHeight+"px",Nb(function(){return t.eContainer.clientHeight>=s*t.rowHeight},function(){t.isDestroyed||(t.clearVirtualRows(),t.drawVirtualRows())})}},i.prototype.clearVirtualRows=function(){var t=this;this.renderedRows.forEach(function(s,l){return t.removeRow(l)})},i.prototype.drawVirtualRows=function(){var t=this.getGui(),s=t.scrollTop,l=s+t.offsetHeight,c=Math.floor(s/this.rowHeight),h=Math.floor(l/this.rowHeight);this.ensureRowsRendered(c,h)},i.prototype.ensureRowsRendered=function(t,s){var l=this;this.renderedRows.forEach(function(h,m){(m<t||m>s)&&m!==l.lastFocusedRowIndex&&l.removeRow(m)});for(var c=t;c<=s;c++)this.renderedRows.has(c)||c<this.model.getRowCount()&&this.insertRow(c)},i.prototype.insertRow=function(t){var s=this,l=this.model.getRow(t),c=document.createElement("div");if(At(c,"ag-virtual-list-item"),At(c,"ag-"+this.cssIdentifier+"-virtual-list-item"),Yi(c,"tree"===this.ariaRole?"treeitem":"option"),aE(c,this.model.getRowCount()),sE(c,t+1),c.setAttribute("tabindex","-1"),"function"==typeof this.model.isRowSelected){var h=this.model.isRowSelected(t);ad(c,!!h),hE(c,h)}c.style.height=this.rowHeight+"px",c.style.top=this.rowHeight*t+"px";var m=this.componentCreator(l,c);m.addGuiEventListener("focusin",function(){return s.lastFocusedRowIndex=t}),c.appendChild(m.getGui()),this.renderedRows.has(t-1)?this.renderedRows.get(t-1).eDiv.insertAdjacentElement("afterend",c):this.renderedRows.has(t+1)?this.renderedRows.get(t+1).eDiv.insertAdjacentElement("beforebegin",c):this.eContainer.appendChild(c),this.renderedRows.set(t,{rowComponent:m,eDiv:c})},i.prototype.removeRow=function(t){var s=this.renderedRows.get(t);this.eContainer.removeChild(s.eDiv),this.destroyBean(s.rowComponent),this.renderedRows.delete(t)},i.prototype.addScrollListener=function(){var t=this;this.addGuiEventListener("scroll",function(){return t.drawVirtualRows()})},i.prototype.setModel=function(t){this.model=t},i.prototype.destroy=function(){this.isDestroyed||(this.clearVirtualRows(),this.isDestroyed=!0,d.prototype.destroy.call(this))},ks([H("resizeObserverService")],i.prototype,"resizeObserverService",void 0),ks([H("focusService")],i.prototype,"focusService",void 0),ks([He("eContainer")],i.prototype,"eContainer",void 0),ks([et],i.prototype,"postConstruct",null)}(yw),function(){function d(){}return d.prototype.wrap=function(i,t,s,l,c){var h=this;void 0===s&&(s=[]);var m=this.createWrapper(i,l,c);return t.forEach(function(S){h.createMethod(m,S,!0)}),s.forEach(function(S){h.createMethod(m,S,!1)}),m},d.prototype.unwrap=function(i){return i},d.prototype.createMethod=function(i,t,s){i.addMethod(t,this.createMethodProxy(i,t,s))},d.prototype.createMethodProxy=function(i,t,s){return function(){return i.hasMethod(t)?i.callMethod(t,arguments):(s&&console.warn("AG Grid: Framework component is missing the method "+t+"()"),null)}},d}());!function(d){d.Column="column",d.GroupedColumn="groupedColumn",d.StackedColumn="stackedColumn",d.NormalizedColumn="normalizedColumn",d.Bar="bar",d.GroupedBar="groupedBar",d.StackedBar="stackedBar",d.NormalizedBar="normalizedBar",d.Line="line",d.Scatter="scatter",d.Bubble="bubble",d.Pie="pie",d.Doughnut="doughnut",d.Area="area",d.StackedArea="stackedArea",d.NormalizedArea="normalizedArea",d.Histogram="histogram"}(Y.oXM||(Y.oXM={}));var il="undefined"==typeof global?{}:global;il.HTMLElement="undefined"==typeof HTMLElement?{}:HTMLElement,il.HTMLButtonElement="undefined"==typeof HTMLButtonElement?{}:HTMLButtonElement,il.HTMLSelectElement="undefined"==typeof HTMLSelectElement?{}:HTMLSelectElement,il.HTMLInputElement="undefined"==typeof HTMLInputElement?{}:HTMLInputElement,il.Node="undefined"==typeof Node?{}:Node,il.MouseEvent="undefined"==typeof MouseEvent?{}:MouseEvent;var Pm=function(){for(var d=0,i=0,t=arguments.length;i<t;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<t;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s},_0=function(){function d(i,t,s,l,c,h,m,S){this.nextId=0,this.allNodesMap={},this.rootNode=i,this.gridOptionsWrapper=t,this.eventService=s,this.columnModel=l,this.gridApi=c,this.columnApi=h,this.beans=S,this.selectionService=m,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=d.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}return d.prototype.postConstruct=function(){this.suppressParentsInRowNodes=this.gridOptionsWrapper.isSuppressParentsInRowNodes(),this.isRowMasterFunc=this.gridOptionsWrapper.getIsRowMasterFunc(),this.doingTreeData=this.gridOptionsWrapper.isTreeData(),this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail()},d.prototype.getCopyOfNodesMap=function(){return yt.cloneObject(this.allNodesMap)},d.prototype.getRowNode=function(i){return this.allNodesMap[i]},d.prototype.setRowData=function(i){var t=this;if("string"!=typeof i){var s=this.rootNode,l=this.rootNode.sibling;s.childrenAfterFilter=null,s.childrenAfterGroup=null,s.childrenAfterSort=null,s.childrenMapped=null,s.updateHasChildren(),this.nextId=0,this.allNodesMap={},i?s.allLeafChildren=i.map(function(c){return t.createNode(c,t.rootNode,d.TOP_LEVEL)}):(s.allLeafChildren=[],s.childrenAfterGroup=[]),l&&(l.childrenAfterFilter=s.childrenAfterFilter,l.childrenAfterGroup=s.childrenAfterGroup,l.childrenAfterSort=s.childrenAfterSort,l.childrenMapped=s.childrenMapped,l.allLeafChildren=s.allLeafChildren)}else console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first")},d.prototype.updateRowData=function(i,t){var s={remove:[],update:[],add:[]},l=[];return this.executeRemove(i,s,l),this.executeUpdate(i,s,l),this.executeAdd(i,s),this.updateSelection(l),t&&yt.sortRowNodesByOrder(this.rootNode.allLeafChildren,t),s},d.prototype.updateSelection=function(i){var t=i.length>0;t&&i.forEach(function(l){l.setSelected(!1,!1,!0)}),this.selectionService.updateGroupsFromChildrenSelections(),t&&this.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi})},d.prototype.executeAdd=function(i,t){var s=this,l=i.add,c=i.addIndex;if(!yt.missingOrEmpty(l)){var h=l.map(function(L){return s.createNode(L,s.rootNode,d.TOP_LEVEL)});if("number"==typeof c&&c>=0){var S=this.rootNode.allLeafChildren,R=S.slice(0,c),D=S.slice(c,S.length);this.rootNode.allLeafChildren=Pm(R,h,D)}else this.rootNode.allLeafChildren=Pm(this.rootNode.allLeafChildren,h);this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),t.add=h}},d.prototype.executeRemove=function(i,t,s){var l=this,c=i.remove;if(!yt.missingOrEmpty(c)){var h={};c.forEach(function(m){var S=l.lookupRowNode(m);!S||(S.isSelected()&&s.push(S),S.clearRowTopAndRowIndex(),h[S.id]=!0,delete l.allNodesMap[S.id],t.remove.push(S))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(function(m){return!h[m.id]}),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},d.prototype.executeUpdate=function(i,t,s){var l=this,c=i.update;yt.missingOrEmpty(c)||c.forEach(function(h){var m=l.lookupRowNode(h);!m||(m.updateData(h),!m.selectable&&m.isSelected()&&s.push(m),l.setMasterForRow(m,h,d.TOP_LEVEL,!1),t.update.push(m))})},d.prototype.lookupRowNode=function(i){var s,t=this.gridOptionsWrapper.getRowNodeIdFunc();if(yt.exists(t)){var l=t(i);if(!(s=this.allNodesMap[l]))return console.error("AG Grid: could not find row id="+l+", data item was not found for this id"),null}else if(!(s=yt.find(this.rootNode.allLeafChildren,function(c){return c.data===i})))return console.error("AG Grid: could not find data item as object was not found",i),console.error("Consider using getRowNodeId to help the Grid find matching row data"),null;return s},d.prototype.createNode=function(i,t,s){var l=new ln(this.beans);return l.group=!1,this.setMasterForRow(l,i,s,!0),t&&!this.suppressParentsInRowNodes&&(l.parent=t),l.level=s,l.setDataAndId(i,this.nextId.toString()),this.allNodesMap[l.id]&&console.warn("ag-grid: duplicate node id '"+l.id+"' detected from getRowNodeId callback, this could cause issues in your grid."),this.allNodesMap[l.id]=l,this.nextId++,l},d.prototype.setMasterForRow=function(i,t,s,l){if(this.doingTreeData)i.setMaster(!1),l&&(i.expanded=!1);else if(i.setMaster(!!this.doingMasterDetail&&(!this.isRowMasterFunc||this.isRowMasterFunc(t))),l){var c=this.columnModel.getRowGroupColumns();i.expanded=!!i.master&&this.isExpanded(s+(c?c.length:0))}},d.prototype.isExpanded=function(i){var t=this.gridOptionsWrapper.getGroupDefaultExpanded();return-1===t||i<t},d.TOP_LEVEL=0,d.ROOT_NODE_ID="ROOT_NODE_ID",d}(),C0=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ri=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},ra=function(){return function(d){d[d.Normal=0]="Normal",d[d.AfterFilter=1]="AfterFilter",d[d.AfterFilterAndSort=2]="AfterFilterAndSort",d[d.PivotNodes=3]="PivotNodes"}(ra||(ra={})),ra}(),MR=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return C0(i,d),i.prototype.init=function(){var t=this.refreshModel.bind(this,{step:Y.j_r.EVERYTHING}),s=this.refreshModel.bind(this,{step:Y.j_r.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:!0});this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,s),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:Y.j_r.PIVOT})),this.addManagedListener(this.eventService,$.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_MODE_CHANGED,t);var l=this.refreshModel.bind(this,{step:Y.j_r.MAP,keepRenderedRows:!0,animate:!0});this.addManagedListener(this.gridOptionsWrapper,gt.PROP_GROUP_REMOVE_SINGLE_CHILDREN,l),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,l),this.rootNode=new ln(this.beans),this.nodeManager=new _0(this.rootNode,this.gridOptionsWrapper,this.eventService,this.columnModel,this.gridApi,this.columnApi,this.selectionService,this.beans)},i.prototype.start=function(){var t=this.gridOptionsWrapper.getRowData();t&&this.setRowData(t)},i.prototype.ensureRowHeightsValid=function(t,s,l,c){var h,m=!1;do{h=!1;for(var S=this.getRowIndexAtPixel(t),R=this.getRowIndexAtPixel(s),D=Math.max(S,l),L=Math.min(R,c),U=D;U<=L;U++){var K=this.getRow(U);if(K.rowHeightEstimated){var ee=this.gridOptionsWrapper.getRowHeightForNode(K);K.setRowHeight(ee.height),h=!0,m=!0}}h&&this.setRowTopAndRowIndex()}while(h);return m},i.prototype.setRowTopAndRowIndex=function(){for(var t=this.gridOptionsWrapper.getDefaultRowHeight(),s=0,l=new Set,c=this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_NORMAL,h=0;h<this.rowsToDisplay.length;h++){var m=this.rowsToDisplay[h];if(null!=m.id&&l.add(m.id),null==m.rowHeight){var S=this.gridOptionsWrapper.getRowHeightForNode(m,c,t);m.setRowHeight(S.height,S.estimated)}m.setRowTop(s),m.setRowIndex(h),s+=m.rowHeight}return l},i.prototype.clearRowTopAndRowIndex=function(t,s){var l=t.isActive(),c=function(S){S&&null!=S.id&&!s.has(S.id)&&S.clearRowTopAndRowIndex()};!function m(S){c(S),c(S.detailNode),c(S.sibling),S.hasChildren()&&S.childrenAfterGroup&&(l&&-1!=S.level&&!S.expanded||S.childrenAfterGroup.forEach(m))}(this.rootNode)},i.prototype.ensureRowsAtPixel=function(t,s,l){var c=this;void 0===l&&(l=0);var h=this.getRowIndexAtPixel(s);return this.getRow(h)!==t[0]&&(t.forEach(function(S){yt.removeFromArray(c.rootNode.allLeafChildren,S)}),t.forEach(function(S,R){yt.insertIntoArray(c.rootNode.allLeafChildren,S,Math.max(h+l,0)+R)}),this.refreshModel({step:Y.j_r.EVERYTHING,keepRenderedRows:!0,animate:!0,keepEditingRows:!0}),!0)},i.prototype.highlightRowAtPixel=function(t,s){var l=null!=s?this.getRowIndexAtPixel(s):null,c=null!=l?this.getRow(l):null;if(c&&t&&c!==t&&null!=s){var h=this.getHighlightPosition(s,c);this.lastHighlightedRow&&this.lastHighlightedRow!==c&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),c.setHighlighted(h),this.lastHighlightedRow=c}else this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)},i.prototype.getHighlightPosition=function(t,s){if(!s){var l=this.getRowIndexAtPixel(t);if(!(s=this.getRow(l||0)))return Y.oh5.Below}return t-s.rowTop<s.rowHeight/2?Y.oh5.Above:Y.oh5.Below},i.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},i.prototype.isLastRowIndexKnown=function(){return!0},i.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},i.prototype.getTopLevelRowCount=function(){return this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode?1:this.rootNode.childrenAfterFilter?this.rootNode.childrenAfterFilter.length:0},i.prototype.getTopLevelRowDisplayedIndex=function(t){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return t;var l=this.rootNode.childrenAfterSort[t];if(this.gridOptionsWrapper.isGroupHideOpenParents())for(;l.expanded&&l.childrenAfterSort&&l.childrenAfterSort.length>0;)l=l.childrenAfterSort[0];return l.rowIndex},i.prototype.getRowBounds=function(t){if(yt.missing(this.rowsToDisplay))return null;var s=this.rowsToDisplay[t];return s?{rowTop:s.rowTop,rowHeight:s.rowHeight}:null},i.prototype.onRowGroupOpened=function(){var t=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:Y.j_r.MAP,keepRenderedRows:!0,animate:t})},i.prototype.onFilterChanged=function(t){if(!t.afterDataChange){var s=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:Y.j_r.FILTER,keepRenderedRows:!0,animate:s})}},i.prototype.onSortChanged=function(){var t=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:Y.j_r.SORT,keepRenderedRows:!0,animate:t,keepEditingRows:!0})},i.prototype.getType=function(){return fe.ROW_MODEL_TYPE_CLIENT_SIDE},i.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:Y.j_r.PIVOT}):this.refreshModel({step:Y.j_r.AGGREGATE})},i.prototype.createChangePath=function(t){var s=yt.missingOrEmpty(t),l=new Ot(!1,this.rootNode);return(s||this.gridOptionsWrapper.isTreeData())&&l.setInactive(),l},i.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(t){if(!this.gridOptionsWrapper.isSuppressModelUpdateAfterUpdateTransaction()||null==t.rowNodeTransactions)return!1;var s=yt.filter(t.rowNodeTransactions,function(c){return null!=c.add&&c.add.length>0||null!=c.remove&&c.remove.length>0});return null==s||0==s.length},i.prototype.refreshModel=function(t){var s=this;if(!this.isSuppressModelUpdateAfterUpdateTransaction(t)){var l=this.createChangePath(t.rowNodeTransactions);switch(t.step){case Y.j_r.EVERYTHING:this.doRowGrouping(t.groupState,t.rowNodeTransactions,t.rowNodeOrder,l,!!t.afterColumnsChanged);case Y.j_r.FILTER:this.doFilter(l);case Y.j_r.PIVOT:this.doPivot(l);case Y.j_r.AGGREGATE:this.doAggregate(l);case Y.j_r.SORT:this.doSort(t.rowNodeTransactions,l);case Y.j_r.MAP:this.doRowsToDisplay()}var c=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(l,c),this.eventService.dispatchEvent({type:$.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1}),this.$scope&&window.setTimeout(function(){s.$scope.$apply()},0)}},i.prototype.isEmpty=function(){var t=yt.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return yt.missing(this.rootNode)||t||!this.columnModel.isReady()},i.prototype.isRowsToRender=function(){return yt.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},i.prototype.getNodesInRangeForSelection=function(t,s){var h,l=!s,c=!1,m=[],S=this.gridOptionsWrapper.isGroupSelectsChildren();return this.forEachNodeAfterFilterAndSort(function(R){var D=l&&!c;if(l||(R===s||R===t)&&(l=!0),!R.group||!S){var U=l&&!c,K=R.isParentOfNode(h);(U||K)&&m.push(R)}D&&(R===s||R===t)&&(c=!0,h=R===s?s:t)}),m},i.prototype.setDatasource=function(t){console.error("AG Grid: should never call setDatasource on clientSideRowController")},i.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},i.prototype.getRootNode=function(){return this.rootNode},i.prototype.getRow=function(t){return this.rowsToDisplay[t]},i.prototype.isRowPresent=function(t){return this.rowsToDisplay.indexOf(t)>=0},i.prototype.getRowIndexAtPixel=function(t){if(this.isEmpty())return-1;var s=0,l=this.rowsToDisplay.length-1;if(t<=0)return 0;if(yt.last(this.rowsToDisplay).rowTop<=t)return this.rowsToDisplay.length-1;for(;;){var h=Math.floor((s+l)/2),m=this.rowsToDisplay[h];if(this.isRowInPixel(m,t))return h;m.rowTop<t?s=h+1:m.rowTop>t&&(l=h-1)}},i.prototype.isRowInPixel=function(t,s){return t.rowTop<=s&&t.rowTop+t.rowHeight>s},i.prototype.forEachLeafNode=function(t){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(s,l){return t(s,l)})},i.prototype.forEachNode=function(t){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterGroup,t,ra.Normal,0)},i.prototype.forEachNodeAfterFilter=function(t){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterFilter,t,ra.AfterFilter,0)},i.prototype.forEachNodeAfterFilterAndSort=function(t){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterSort,t,ra.AfterFilterAndSort,0)},i.prototype.forEachPivotNode=function(t){this.recursivelyWalkNodesAndCallback([this.rootNode],t,ra.PivotNodes,0)},i.prototype.recursivelyWalkNodesAndCallback=function(t,s,l,c){if(!t)return c;for(var h=0;h<t.length;h++){var m=t[h];if(s(m,c++),m.hasChildren()){var S=null;switch(l){case ra.Normal:S=m.childrenAfterGroup;break;case ra.AfterFilter:S=m.childrenAfterFilter;break;case ra.AfterFilterAndSort:S=m.childrenAfterSort;break;case ra.PivotNodes:S=m.leafGroup?null:m.childrenAfterSort}S&&(c=this.recursivelyWalkNodesAndCallback(S,s,l,c))}}return c},i.prototype.doAggregate=function(t){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:t})},i.prototype.expandOrCollapseAll=function(t){var s=this.gridOptionsWrapper.isTreeData();this.rootNode&&function l(m){!m||m.forEach(function(S){(s?yt.exists(S.childrenAfterGroup):S.group)&&(S.expanded=t,l(S.childrenAfterGroup))})}(this.rootNode.childrenAfterGroup),this.refreshModel({step:Y.j_r.MAP}),this.eventService.dispatchEvent({api:this.gridApi,columnApi:this.columnApi,type:$.EVENT_EXPAND_COLLAPSE_ALL,source:t?"expandAll":"collapseAll"})},i.prototype.doSort=function(t,s){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,changedPath:s})},i.prototype.doRowGrouping=function(t,s,l,c,h){this.groupStage?(s?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:s,rowNodeOrder:l,changedPath:c}):(this.groupStage.execute({rowNode:this.rootNode,changedPath:c,afterColumnsChanged:h}),this.restoreGroupState(t)),this.gridOptionsWrapper.isGroupSelectsChildren()&&this.selectionService.updateGroupsFromChildrenSelections(c)):(this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren())},i.prototype.restoreGroupState=function(t){!t||yt.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(s,l){"boolean"==typeof t[l]&&(s.expanded=t[l])})},i.prototype.doFilter=function(t){this.filterStage.execute({rowNode:this.rootNode,changedPath:t})},i.prototype.doPivot=function(t){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:t})},i.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsWrapper.isRememberGroupStateWhenNewData())return null;var t={};return yt.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(s,l){return t[l]=s.expanded}),t},i.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},i.prototype.getRowNode=function(t){if("string"==typeof t&&0==t.indexOf(ln.ID_PREFIX_ROW_GROUP)){var l=void 0;return this.forEachNode(function(c){c.id===t&&(l=c)}),l}return this.nodeManager.getRowNode(t)},i.prototype.setRowData=function(t){var s=this.getGroupState();this.nodeManager.setRowData(t),this.eventService.dispatchEvent({type:$.EVENT_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi}),this.refreshModel({step:Y.j_r.EVERYTHING,groupState:s,newData:!0})},i.prototype.batchUpdateRowData=function(t,s){var l=this;if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];var c=this.gridOptionsWrapper.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(function(){l.executeBatchUpdateRowData()},c)}this.rowDataTransactionBatch.push({rowDataTransaction:t,callback:s})},i.prototype.flushAsyncTransactions=function(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},i.prototype.executeBatchUpdateRowData=function(){var t=this;this.valueCache.onDataChanged();var s=[],l=[],c=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(function(m){var S=t.nodeManager.updateRowData(m.rowDataTransaction,void 0);l.push(S),m.callback&&s.push(m.callback.bind(null,S)),"number"==typeof m.rowDataTransaction.addIndex&&(c=!0)}),this.commonUpdateRowData(l,void 0,c),s.length>0&&window.setTimeout(function(){s.forEach(function(m){return m()})},0),l.length>0){var h={api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),type:$.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:l};this.eventService.dispatchEvent(h)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},i.prototype.updateRowData=function(t,s){this.valueCache.onDataChanged();var l=this.nodeManager.updateRowData(t,s);return this.commonUpdateRowData([l],s,"number"==typeof t.addIndex),l},i.prototype.createRowNodeOrder=function(){if(!this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder()){var s={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var l=0;l<this.rootNode.allLeafChildren.length;l++)s[this.rootNode.allLeafChildren[l].id]=l;return s}},i.prototype.commonUpdateRowData=function(t,s,l){l&&(s=this.createRowNodeOrder()),this.refreshModel({step:Y.j_r.EVERYTHING,rowNodeTransactions:t,rowNodeOrder:s,keepRenderedRows:!0,animate:!0,keepEditingRows:!0}),this.eventService.dispatchEvent({type:$.EVENT_ROW_DATA_UPDATED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},i.prototype.onRowHeightChanged=function(){this.refreshModel({step:Y.j_r.MAP,keepRenderedRows:!0,keepEditingRows:!0})},i.prototype.resetRowHeights=function(){var t=!1;this.forEachNode(function(s){s.setRowHeight(s.rowHeight,!0);var l=s.detailNode;l&&l.setRowHeight(l.rowHeight,!0),t=!0}),t&&this.onRowHeightChanged()},Ri([H("columnModel")],i.prototype,"columnModel",void 0),Ri([H("$scope")],i.prototype,"$scope",void 0),Ri([H("selectionService")],i.prototype,"selectionService",void 0),Ri([H("valueCache")],i.prototype,"valueCache",void 0),Ri([H("columnApi")],i.prototype,"columnApi",void 0),Ri([H("gridApi")],i.prototype,"gridApi",void 0),Ri([H("animationFrameService")],i.prototype,"animationFrameService",void 0),Ri([H("beans")],i.prototype,"beans",void 0),Ri([H("filterStage")],i.prototype,"filterStage",void 0),Ri([H("sortStage")],i.prototype,"sortStage",void 0),Ri([H("flattenStage")],i.prototype,"flattenStage",void 0),Ri([Gn("groupStage")],i.prototype,"groupStage",void 0),Ri([Gn("aggregationStage")],i.prototype,"aggregationStage",void 0),Ri([Gn("pivotStage")],i.prototype,"pivotStage",void 0),Ri([et],i.prototype,"init",null),Ri([vt("rowModel")],i)}(Ye),Ge=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Im=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},OR=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Ge(i,d),i.prototype.execute=function(t){var s=t.rowNode;this.filterService.filter(t.changedPath),this.selectableService.updateSelectableAfterFiltering(s)},Im([H("selectableService")],i.prototype,"selectableService",void 0),Im([H("filterService")],i.prototype,"filterService",void 0),Im([vt("filterStage")],i)}(Ye),w0=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),dh=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},PR=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return w0(i,d),i.prototype.execute=function(t){var s=this.sortController.getSortOptions(),l=yt.exists(s)&&s.length>0,c=l&&yt.exists(t.rowNodeTransactions)&&this.gridOptionsWrapper.isDeltaSort(),h=c?this.calculateDirtyNodes(t.rowNodeTransactions):null,m=yt.missingOrEmpty(this.columnModel.getValueColumns()),S=yt.some(s,function(R){return!!R.column.getColDef().showRowGroup});this.sortService.sort(s,l,c,h,t.changedPath,m,S)},i.prototype.calculateDirtyNodes=function(t){var s={},l=function(h){h&&h.forEach(function(m){return s[m.id]=!0})};return t&&t.forEach(function(c){l(c.add),l(c.update),l(c.remove)}),s},dh([H("sortService")],i.prototype,"sortService",void 0),dh([H("sortController")],i.prototype,"sortController",void 0),dh([H("columnModel")],i.prototype,"columnModel",void 0),dh([vt("sortStage")],i)}(Ye),S0=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Lm=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},b0=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return S0(i,d),i.prototype.execute=function(t){var s=t.rowNode,l=[],c={value:0},h=this.columnModel.isPivotMode(),m=h&&s.leafGroup;return this.recursivelyAddToRowsToDisplay(m?[s]:s.childrenAfterSort,l,c,h,0),!m&&l.length>0&&this.gridOptionsWrapper.isGroupIncludeTotalFooter()&&(this.ensureFooterNodeExists(s),this.addRowNodeToRowsToDisplay(s.sibling,l,c,0)),l},i.prototype.recursivelyAddToRowsToDisplay=function(t,s,l,c,h){if(!yt.missingOrEmpty(t))for(var m=this.gridOptionsWrapper.isGroupHideOpenParents(),S=this.gridOptionsWrapper.isGroupRemoveSingleChildren(),R=!S&&this.gridOptionsWrapper.isGroupRemoveLowestSingleChildren(),D=0;D<t.length;D++){var L=t[D],U=L.hasChildren(),ee=S&&U&&1===L.childrenAfterGroup.length,ae=R&&U&&L.leafGroup&&1===L.childrenAfterGroup.length;if(!(c&&!U||m&&L.expanded&&(!c||!L.leafGroup)||ee||ae)&&this.addRowNodeToRowsToDisplay(L,s,l,h),!c||!L.leafGroup)if(U){var Pe=ee||ae;(L.expanded||Pe)&&(this.recursivelyAddToRowsToDisplay(L.childrenAfterSort,s,l,c,Pe?h:h+1),this.gridOptionsWrapper.isGroupIncludeFooter()&&(this.ensureFooterNodeExists(L),this.addRowNodeToRowsToDisplay(L.sibling,s,l,h)))}else if(L.master&&L.expanded){var ye=this.createDetailNode(L);this.addRowNodeToRowsToDisplay(ye,s,l,h)}}},i.prototype.addRowNodeToRowsToDisplay=function(t,s,l,c){var h=this.gridOptionsWrapper.isGroupMultiAutoColumn();s.push(t),t.setUiLevel(h?0:c)},i.prototype.ensureFooterNodeExists=function(t){if(!yt.exists(t.sibling)){var s=new ln(this.beans);Object.keys(t).forEach(function(l){s[l]=t[l]}),s.footer=!0,s.setRowTop(null),s.setRowIndex(null),s.oldRowTop=null,yt.exists(s.id)&&(s.id="rowGroupFooter_"+s.id),s.sibling=t,t.sibling=s}},i.prototype.createDetailNode=function(t){if(yt.exists(t.detailNode))return t.detailNode;var s=new ln(this.beans);return s.detail=!0,s.selectable=!1,s.parent=t,yt.exists(t.id)&&(s.id="detail_"+t.id),s.data=t.data,s.level=t.level+1,t.detailNode=s,s},Lm([H("columnModel")],i.prototype,"columnModel",void 0),Lm([H("beans")],i.prototype,"beans",void 0),Lm([vt("flattenStage")],i)}(Ye),IR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),fh=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},QM=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return IR(i,d),i.prototype.init=function(){this.postSortFunc=this.gridOptionsWrapper.getPostSortFunc()},i.prototype.sort=function(t,s,l,c,h,m,S){var R=this,D=this.gridOptionsWrapper.isGroupMaintainOrder(),L=yt.some(this.columnModel.getAllGridColumns(),function(K){return K.isRowGroupActive()});h&&h.forEachChangedNodeDepthFirst(function(ee){R.pullDownGroupDataForHideOpenParents(ee.childrenAfterFilter,!0),ee.childrenAfterSort=s?D&&L&&!ee.leafGroup&&!S?ee.childrenAfterFilter.slice(0):l?R.doDeltaSort(ee,t,c,h,m):R.rowNodeSorter.doFullSort(ee.childrenAfterFilter,t):ee.childrenAfterFilter.slice(0),ee.sibling&&(ee.sibling.childrenAfterSort=ee.childrenAfterSort),R.updateChildIndexes(ee),R.postSortFunc&&R.postSortFunc(ee.childrenAfterSort)}),this.updateGroupDataForHideOpenParents(h)},i.prototype.mapNodeToSortedNode=function(t,s){return{currentPos:s,rowNode:t}},i.prototype.doDeltaSort=function(t,s,l,c,h){var m=t.childrenAfterSort.filter(function(L){var U=!l[L.id],K=h||c&&c.canSkip(L);return U&&K}).map(this.mapNodeToSortedNode.bind(this)),S={};m.forEach(function(L){return S[L.rowNode.id]=L.rowNode});var R=t.childrenAfterFilter.filter(function(L){return!S[L.id]}).map(this.mapNodeToSortedNode.bind(this));return R.sort(this.rowNodeSorter.compareRowNodes.bind(this,s)),(0===R.length?m:0===m.length?R:this.mergeSortedArrays(s,m,R)).map(function(L){return L.rowNode})},i.prototype.mergeSortedArrays=function(t,s,l){for(var c=[],h=0,m=0;h<s.length&&m<l.length;){var S=this.rowNodeSorter.compareRowNodes(t,s[h],l[m]);c.push(S<0?s[h++]:l[m++])}for(;h<s.length;)c.push(s[h++]);for(;m<l.length;)c.push(l[m++]);return c},i.prototype.updateChildIndexes=function(t){if(!yt.missing(t.childrenAfterSort))for(var s=t.childrenAfterSort,l=0;l<s.length;l++){var c=s[l],m=l===t.childrenAfterSort.length-1;c.setFirstChild(0===l),c.setLastChild(m),c.setChildIndex(l)}},i.prototype.updateGroupDataForHideOpenParents=function(t){var s=this;if(this.gridOptionsWrapper.isGroupHideOpenParents()){if(this.gridOptionsWrapper.isTreeData())return yt.doOnce(function(){return console.warn("AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).")},"sortService.hideOpenParentsWithTreeData"),!1;var c=function h(m){s.pullDownGroupDataForHideOpenParents(m.childrenAfterSort,!1),m.childrenAfterSort.forEach(function(S){S.hasChildren()&&h(S)})};t&&t.executeFromRootNode(function(h){return c(h)})}},i.prototype.pullDownGroupDataForHideOpenParents=function(t,s){var l=this;!this.gridOptionsWrapper.isGroupHideOpenParents()||yt.missing(t)||t.forEach(function(c){l.columnModel.getGroupDisplayColumns().forEach(function(m){var S=m.getColDef().showRowGroup;if("string"==typeof S){var D=l.columnModel.getPrimaryColumn(S);if(D!==c.rowGroupColumn)if(s)c.setGroupValue(m.getId(),void 0);else{var U=c.getFirstChildOfFirstChild(D);U&&c.setGroupValue(m.getId(),U.key)}}else console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup")})})},fh([H("columnModel")],i.prototype,"columnModel",void 0),fh([H("rowNodeSorter")],i.prototype,"rowNodeSorter",void 0),fh([et],i.prototype,"init",null),fh([vt("sortService")],i)}(Ye),LR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),$d=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Fm=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return LR(i,d),i.prototype.postConstruct=function(){this.doingTreeData=this.gridOptionsWrapper.isTreeData()},i.prototype.filter=function(t){var s=this.filterManager.isAnyFilterPresent();this.filterNodes(s,t)},i.prototype.filterNodes=function(t,s){var l=this,c=function(D,L){D.hasChildren()?(D.childrenAfterFilter=t&&!L?D.childrenAfterGroup.filter(function(U){var K=U.childrenAfterFilter&&U.childrenAfterFilter.length>0,ee=U.data&&l.filterManager.doesRowPassFilter({rowNode:U});return K||ee}):D.childrenAfterGroup,l.setAllChildrenCount(D)):(D.childrenAfterFilter=D.childrenAfterGroup,D.setAllChildrenCount(null)),D.sibling&&(D.sibling.childrenAfterFilter=D.childrenAfterFilter)};if(this.doingTreeDataFiltering()){var h=function R(D,L){if(D.childrenAfterGroup)for(var U=0;U<D.childrenAfterGroup.length;U++){var K=D.childrenAfterGroup[U],ee=L||l.filterManager.doesRowPassFilter({rowNode:K});K.childrenAfterGroup?R(D.childrenAfterGroup[U],ee):c(K,ee)}c(D,L)};s.executeFromRootNode(function(D){return h(D,!1)})}else s.forEachChangedNodeDepthFirst(function(D){return c(D,!1)},!0)},i.prototype.setAllChildrenCountTreeData=function(t){var s=0;t.childrenAfterFilter.forEach(function(l){s++,s+=l.allChildrenCount}),t.setAllChildrenCount(s)},i.prototype.setAllChildrenCountGridGrouping=function(t){var s=0;t.childrenAfterFilter.forEach(function(l){l.group?s+=l.allChildrenCount:s++}),t.setAllChildrenCount(s)},i.prototype.setAllChildrenCount=function(t){this.doingTreeData?this.setAllChildrenCountTreeData(t):this.setAllChildrenCountGridGrouping(t)},i.prototype.doingTreeDataFiltering=function(){return this.gridOptionsWrapper.isTreeData()&&!this.gridOptionsWrapper.isExcludeChildrenWhenTreeDataFiltering()},$d([H("filterManager")],i.prototype,"filterManager",void 0),$d([et],i.prototype,"postConstruct",null),$d([vt("filterService")],i)}(Ye),FR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),E0=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},eO=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return FR(i,d),i.prototype.postConstruct=function(){this.rowModel.getType()===fe.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel)},i.prototype.createTransactionForRowData=function(t){if(yt.missing(this.clientSideRowModel))console.error("AG Grid: ImmutableService only works with ClientSideRowModel");else{var s=this.gridOptionsWrapper.getRowNodeIdFunc();if(s&&!yt.missing(s)){var l={remove:[],update:[],add:[]},c=this.clientSideRowModel.getCopyOfNodesMap(),m=this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder()?null:{};return yt.exists(t)&&t.forEach(function(S,R){var D=s(S),L=c[D];m&&(m[D]=R),L?(L.data!==S&&l.update.push(S),c[D]=void 0):l.add.push(S)}),yt.iterateObject(c,function(S,R){R&&l.remove.push(R.data)}),[l,m]}console.error("AG Grid: ImmutableService requires getRowNodeId() callback to be implemented, your row data need IDs!")}},E0([H("rowModel")],i.prototype,"rowModel",void 0),E0([et],i.prototype,"postConstruct",null),E0([vt("immutableService")],i)}(Ye),tO={moduleName:Y.GXE.ClientSideRowModelModule,beans:[OR,PR,b0,QM,Fm,eO],rowModels:{clientSide:MR}},kR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),ph=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},NR=function(d){function i(t,s,l){var c=d.call(this,t)||this;return c.parentCache=s,c.params=l,c.startRow=t*l.blockSize,c.endRow=c.startRow+l.blockSize,c}return kR(i,d),i.prototype.postConstruct=function(){this.createRowNodes()},i.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},i.prototype.setDataAndId=function(t,s,l){!t.id&&t.alreadyRendered&&(t.alreadyRendered=!1),yt.exists(s)?t.setDataAndId(s,l.toString()):t.setDataAndId(void 0,void 0)},i.prototype.loadFromDatasource=function(){var t=this,s=this.createLoadParams();yt.missing(this.params.datasource.getRows)?console.warn("AG Grid: datasource is missing getRows method"):window.setTimeout(function(){t.params.datasource.getRows(s)},0)},i.prototype.processServerFail=function(){},i.prototype.createLoadParams=function(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsWrapper.getContext()}},i.prototype.forEachNode=function(t,s,l){var c=this;this.rowNodes.forEach(function(h,m){c.startRow+m<l&&t(h,s.next())})},i.prototype.getLastAccessed=function(){return this.lastAccessed},i.prototype.getRow=function(t,s){return void 0===s&&(s=!1),s||(this.lastAccessed=this.params.lastAccessedSequence.next()),this.rowNodes[t-this.startRow]},i.prototype.getStartRow=function(){return this.startRow},i.prototype.getEndRow=function(){return this.endRow},i.prototype.createRowNodes=function(){this.rowNodes=[];for(var t=0;t<this.params.blockSize;t++){var s=this.startRow+t,l=new ln(this.beans);l.setRowHeight(this.params.rowHeight),l.uiLevel=0,l.setRowIndex(s),l.setRowTop(this.params.rowHeight*s),this.rowNodes.push(l)}},i.prototype.processServerResult=function(t){var s=this;this.rowNodes.forEach(function(c,h){s.setDataAndId(c,t.rowData?t.rowData[h]:void 0,s.startRow+h)}),this.parentCache.pageLoaded(this,null!=t.rowCount&&t.rowCount>=0?t.rowCount:void 0)},i.prototype.destroyRowNodes=function(){this.rowNodes.forEach(function(t){t.clearRowTopAndRowIndex()})},ph([H("beans")],i.prototype,"beans",void 0),ph([et],i.prototype,"postConstruct",null),ph([Fi],i.prototype,"destroyRowNodes",null),i}(Rm),GR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),Ns=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},BR=function(d,i){return function(t,s){i(t,s,d)}},x0=function(d){function i(t){var s=d.call(this)||this;return s.lastRowIndexKnown=!1,s.blocks={},s.blockCount=0,s.rowCount=t.initialRowCount,s.params=t,s}return GR(i,d),i.prototype.setBeans=function(t){this.logger=t.create("InfiniteCache")},i.prototype.getRow=function(t,s){void 0===s&&(s=!1);var l=Math.floor(t/this.params.blockSize),c=this.blocks[l];if(!c){if(s)return;c=this.createBlock(l)}return c.getRow(t)},i.prototype.createBlock=function(t){var s=this.createBean(new NR(t,this,this.params));return this.blocks[s.getId()]=s,this.blockCount++,this.purgeBlocksIfNeeded(s),this.params.rowNodeBlockLoader.addBlock(s),s},i.prototype.refreshCache=function(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach(function(s){return s.setStateWaitingToLoad()}),this.params.rowNodeBlockLoader.checkBlockToLoad())},i.prototype.destroyAllBlocks=function(){var t=this;this.getBlocksInOrder().forEach(function(s){return t.destroyBlock(s)})},i.prototype.getRowCount=function(){return this.rowCount},i.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},i.prototype.pageLoaded=function(t,s){!this.isAlive()||(this.logger.log("onPageLoaded: page = "+t.getId()+", lastRow = "+s),this.checkRowCount(t,s),this.onCacheUpdated())},i.prototype.purgeBlocksIfNeeded=function(t){var s=this,l=this.getBlocksInOrder().filter(function(R){return R!=t});l.sort(function(D,L){return L.getLastAccessed()-D.getLastAccessed()});var h=this.params.maxBlocksInCache>0,m=h?this.params.maxBlocksInCache-1:null,S=i.MAX_EMPTY_BLOCKS_TO_KEEP-1;l.forEach(function(R,D){if(R.getState()===NR.STATE_WAITING_TO_LOAD&&D>=S||h&&D>=m){if(s.isBlockCurrentlyDisplayed(R)||s.isBlockFocused(R))return;s.removeBlockFromCache(R)}})},i.prototype.isBlockFocused=function(t){var s=this.focusService.getFocusCellToUseAfterRefresh();if(!s||null!=s.rowPinned)return!1;var l=t.getStartRow(),c=t.getEndRow();return s.rowIndex>=l&&s.rowIndex<c},i.prototype.isBlockCurrentlyDisplayed=function(t){var s=t.getStartRow(),l=t.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(s,l)},i.prototype.removeBlockFromCache=function(t){!t||this.destroyBlock(t)},i.prototype.checkRowCount=function(t,s){if("number"==typeof s&&s>=0)this.rowCount=s,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var c=(t.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<c&&(this.rowCount=c)}},i.prototype.setRowCount=function(t,s){this.rowCount=t,yt.exists(s)&&(this.lastRowIndexKnown=s),this.lastRowIndexKnown||this.rowCount%this.params.blockSize==0&&this.rowCount++,this.onCacheUpdated()},i.prototype.forEachNodeDeep=function(t){var s=this,l=new xs;this.getBlocksInOrder().forEach(function(c){return c.forEachNode(t,l,s.rowCount)})},i.prototype.getBlocksInOrder=function(){return yt.getAllValuesInObject(this.blocks).sort(function(c,h){return c.getId()-h.getId()})},i.prototype.destroyBlock=function(t){delete this.blocks[t.getId()],this.destroyBean(t),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(t)},i.prototype.onCacheUpdated=function(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:$.EVENT_STORE_UPDATED}))},i.prototype.destroyAllBlocksPastVirtualRowCount=function(){var t=this,s=[];this.getBlocksInOrder().forEach(function(l){l.getId()*t.params.blockSize>=t.rowCount&&s.push(l)}),s.length>0&&s.forEach(function(l){return t.destroyBlock(l)})},i.prototype.purgeCache=function(){var t=this;this.getBlocksInOrder().forEach(function(s){return t.removeBlockFromCache(s)}),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},i.prototype.getRowNodesInRange=function(t,s){var l=this,c=[],h=-1,m=!1,S=new xs;yt.missing(t)&&(m=!0);var R=!1;return this.getBlocksInOrder().forEach(function(L){if(!R){if(m&&h+1!==L.getId())return void(R=!0);h=L.getId(),L.forEachNode(function(U){var K=U===t||U===s;(m||K)&&c.push(U),K&&(m=!m)},S,l.rowCount)}}),R||m?[]:c},i.MAX_EMPTY_BLOCKS_TO_KEEP=2,Ns([H("rowRenderer")],i.prototype,"rowRenderer",void 0),Ns([H("focusService")],i.prototype,"focusService",void 0),Ns([BR(0,ki("loggerFactory"))],i.prototype,"setBeans",null),Ns([Fi],i.prototype,"destroyAllBlocks",null),i}(Ye),HR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),_a=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},R0=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return HR(i,d),i.prototype.getRowBounds=function(t){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*t}},i.prototype.ensureRowHeightsValid=function(t,s,l,c){return!1},i.prototype.init=function(){var t=this;!this.gridOptionsWrapper.isRowModelInfinite()||(this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(function(){return t.destroyCache()}),this.verifyProps())},i.prototype.verifyProps=function(){null!=this.gridOptionsWrapper.getDefaultGroupOrderComparator()&&yt.doOnce(function(){return console.warn("AG Grid: defaultGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.")},"IRM.DefaultGroupOrderComparator")},i.prototype.start=function(){this.setDatasource(this.gridOptionsWrapper.getDatasource())},i.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},i.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,$.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,$.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this))},i.prototype.onFilterChanged=function(){this.reset()},i.prototype.onSortChanged=function(){this.reset()},i.prototype.onColumnEverything=function(){(!this.cacheParams||this.isSortModelDifferent())&&this.reset()},i.prototype.isSortModelDifferent=function(){return!yt.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},i.prototype.getType=function(){return fe.ROW_MODEL_TYPE_INFINITE},i.prototype.setDatasource=function(t){this.destroyDatasource(),this.datasource=t,t&&this.reset()},i.prototype.isEmpty=function(){return!this.infiniteCache},i.prototype.isRowsToRender=function(){return!!this.infiniteCache},i.prototype.getNodesInRangeForSelection=function(t,s){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(t,s):[]},i.prototype.reset=function(){if(this.datasource){yt.exists(this.gridOptionsWrapper.getRowNodeIdFunc())||this.selectionService.reset(),this.resetCache();var s=this.createModelUpdatedEvent();this.eventService.dispatchEvent(s)}},i.prototype.createModelUpdatedEvent=function(){return{type:$.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,newPage:!1,newData:!1,keepRenderedRows:!0,animate:!1}},i.prototype.resetCache=function(){this.destroyCache();var t=this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,maxConcurrentRequests:this.defaultIfInvalid(t,2),initialRowCount:this.defaultIfInvalid(this.gridOptionsWrapper.getInfiniteInitialRowCount(),1),maxBlocksInCache:this.gridOptionsWrapper.getMaxBlocksInCache(),rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),overflowSize:this.defaultIfInvalid(this.gridOptionsWrapper.getCacheOverflowSize(),1),blockSize:this.defaultIfInvalid(this.gridOptionsWrapper.getCacheBlockSize(),100),lastAccessedSequence:new xs},this.infiniteCache=this.createBean(new x0(this.cacheParams))},i.prototype.defaultIfInvalid=function(t,s){return t>0?t:s},i.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},i.prototype.onCacheUpdated=function(){var t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)},i.prototype.getRow=function(t){if(this.infiniteCache&&!(t>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(t)},i.prototype.getRowNode=function(t){var s=void 0;return this.forEachNode(function(l){l.id===t&&(s=l)}),s},i.prototype.forEachNode=function(t){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(t)},i.prototype.getTopLevelRowCount=function(){return this.getRowCount()},i.prototype.getTopLevelRowDisplayedIndex=function(t){return t},i.prototype.getRowIndexAtPixel=function(t){if(0!==this.rowHeight){var s=Math.floor(t/this.rowHeight),l=this.getRowCount()-1;return s>l?l:s}return 0},i.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},i.prototype.isRowPresent=function(t){return!!this.getRowNode(t.id)},i.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},i.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},i.prototype.isLastRowIndexKnown=function(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()},i.prototype.setRowCount=function(t,s){this.infiniteCache&&this.infiniteCache.setRowCount(t,s)},_a([H("filterManager")],i.prototype,"filterManager",void 0),_a([H("sortController")],i.prototype,"sortController",void 0),_a([H("selectionService")],i.prototype,"selectionService",void 0),_a([H("gridApi")],i.prototype,"gridApi",void 0),_a([H("columnApi")],i.prototype,"columnApi",void 0),_a([H("rowRenderer")],i.prototype,"rowRenderer",void 0),_a([H("rowNodeBlockLoader")],i.prototype,"rowNodeBlockLoader",void 0),_a([et],i.prototype,"init",null),_a([Fi],i.prototype,"destroyDatasource",null),_a([vt("rowModel")],i)}(Ye),VR={moduleName:Y.GXE.InfiniteRowModelModule,rowModels:{infinite:R0}},km=function(){function d(){}return d.prototype.setBeans=function(i){this.beans=i},d.prototype.getFileName=function(i){var t=this.getDefaultFileExtension();return(null==i||!i.length)&&(i=this.getDefaultFileName()),-1===i.indexOf(".")?i+"."+t:i},d.prototype.getMergedParamsAndData=function(i){var t=this.mergeDefaultParams(i);return{mergedParams:t,data:this.beans.gridSerializer.serialize(this.createSerializingSession(t),t)}},d.prototype.mergeDefaultParams=function(i){var t=this.getDefaultExportParams(),s={};return yt.assign(s,t),yt.assign(s,i),s},d}(),T0=function(){function d(i){this.groupColumns=[];var s=i.valueService,l=i.gridOptionsWrapper,c=i.processCellCallback,h=i.processHeaderCallback,m=i.processGroupHeaderCallback,S=i.processRowGroupCallback;this.columnModel=i.columnModel,this.valueService=s,this.gridOptionsWrapper=l,this.processCellCallback=c,this.processHeaderCallback=h,this.processGroupHeaderCallback=m,this.processRowGroupCallback=S}return d.prototype.prepare=function(i){this.groupColumns=yt.filter(i,function(t){return!!t.getColDef().showRowGroup})},d.prototype.extractHeaderValue=function(i){var t=this.getHeaderName(this.processHeaderCallback,i);return null!=t?t:""},d.prototype.extractRowCellValue=function(i,t,s,l,c){var S,h=this.gridOptionsWrapper.isGroupMultiAutoColumn()?c.rowGroupIndex:0;S=c&&c.group&&(t===h&&-1!==this.groupColumns.indexOf(i)||0===t&&this.gridOptionsWrapper.isGroupUseEntireRow(this.columnModel.isPivotMode()))?this.createValueForGroupNode(c):this.valueService.getValue(i,c);var R=this.processCell(s,c,i,S,this.processCellCallback,l);return null!=R?R:""},d.prototype.getHeaderName=function(i,t){return i?i({column:t,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}):this.columnModel.getDisplayNameForColumn(t,"csv",!0)},d.prototype.createValueForGroupNode=function(i){if(this.processRowGroupCallback)return this.processRowGroupCallback({node:i,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()});var t=[i.key];if(!this.gridOptionsWrapper.isGroupMultiAutoColumn())for(;i.parent;)t.push((i=i.parent).key);return t.reverse().join(" -> ")},d.prototype.processCell=function(i,t,s,l,c,h){return c?c({accumulatedRowIndex:i,column:s,node:t,value:l,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),type:h}):null!=l?l:""},d}(),D0=function(){function d(){}return d.download=function(i,t){var s=document.defaultView||window;if(s)if(s.navigator.msSaveOrOpenBlob)s.navigator.msSaveOrOpenBlob(t,i);else{var l=document.createElement("a"),c=s.URL.createObjectURL(t);l.setAttribute("href",c),l.setAttribute("download",i),l.style.display="none",document.body.appendChild(l),l.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:s})),document.body.removeChild(l),s.setTimeout(function(){s.URL.revokeObjectURL(c)},0)}else console.warn("AG Grid: There is no `window` associated with the current `document`")},d}(),WR=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),zR=function(d){function i(t){var s=d.call(this,t)||this;s.isFirstLine=!0,s.result="";var c=t.columnSeparator;return s.suppressQuotes=t.suppressQuotes,s.columnSeparator=c,s}return WR(i,d),i.prototype.addCustomContent=function(t){var s=this;!t||("string"==typeof t?(/^\s*\n/.test(t)||this.beginNewLine(),t=t.replace(/\r?\n/g,"\r\n"),this.result+=t):t.forEach(function(l){s.beginNewLine(),l.forEach(function(c,h){0!==h&&(s.result+=s.columnSeparator),s.result+=s.putInQuotes(c.data.value||""),c.mergeAcross&&s.appendEmptyCells(c.mergeAcross)})}))},i.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},i.prototype.onNewHeaderGroupingRowColumn=function(t,s,l){0!=s&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(l)},i.prototype.appendEmptyCells=function(t){for(var s=1;s<=t;s++)this.result+=this.columnSeparator+this.putInQuotes("")},i.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},i.prototype.onNewHeaderRowColumn=function(t,s){0!=s&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(t))},i.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},i.prototype.onNewBodyRowColumn=function(t,s,l){0!=s&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractRowCellValue(t,s,s,fe.EXPORT_TYPE_CSV,l))},i.prototype.putInQuotes=function(t){return this.suppressQuotes?t:null==t?'""':("string"==typeof t?s=t:"function"==typeof t.toString?s=t.toString():(console.warn("unknown value type during csv conversion"),s=""),'"'+s.replace(/"/g,'""')+'"');var s},i.prototype.parse=function(){return this.result},i.prototype.beginNewLine=function(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1},i}(T0),A0=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),xc=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c},Nm=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return A0(i,d),i.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})},i.prototype.getDefaultExportParams=function(){return this.gridOptionsWrapper.getDefaultExportParams("csv")},i.prototype.export=function(t){if(this.isExportSuppressed())return console.warn("ag-grid: Export cancelled. Export is not allowed as per your configuration."),"";var s=this.getMergedParamsAndData(t),l=s.mergedParams,c=s.data,h=new Blob(["\ufeff",c],{type:window.navigator.msSaveOrOpenBlob?this.getMimeType():"octet/stream"});return D0.download(this.getFileName(l.fileName),h),c},i.prototype.exportDataAsCsv=function(t){return this.export(t)},i.prototype.getDataAsCsv=function(t){return this.getMergedParamsAndData(t).data},i.prototype.getMimeType=function(){return"text/csv;charset=utf-8;"},i.prototype.getDefaultFileName=function(){return"export.csv"},i.prototype.getDefaultFileExtension=function(){return"csv"},i.prototype.createSerializingSession=function(t){var s=this;return new zR({columnModel:s.columnModel,valueService:s.valueService,gridOptionsWrapper:s.gridOptionsWrapper,processCellCallback:t.processCellCallback||void 0,processHeaderCallback:t.processHeaderCallback||void 0,processGroupHeaderCallback:t.processGroupHeaderCallback||void 0,processRowGroupCallback:t.processRowGroupCallback||void 0,suppressQuotes:t.suppressQuotes||!1,columnSeparator:t.columnSeparator||","})},i.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressCsvExport()},xc([H("columnModel")],i.prototype,"columnModel",void 0),xc([H("valueService")],i.prototype,"valueService",void 0),xc([H("gridSerializer")],i.prototype,"gridSerializer",void 0),xc([H("gridOptionsWrapper")],i.prototype,"gridOptionsWrapper",void 0),xc([et],i.prototype,"postConstruct",null),xc([vt("csvCreator")],i)}(km),M0=function(){var d=function(t,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(t,s)};return function(i,t){function s(){this.constructor=i}d(i,t),i.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),mu=function(d,i,t,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,t,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,t,c):h(i,t))||c);return l>3&&c&&Object.defineProperty(i,t,c),c};!function(d){d[d.HEADER_GROUPING=0]="HEADER_GROUPING",d[d.HEADER=1]="HEADER",d[d.BODY=2]="BODY"}(Y.aCu||(Y.aCu={}));var jR=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return M0(i,d),i.prototype.serialize=function(t,s){void 0===s&&(s={});var l=this.getColumnsToExport(s.allColumns,s.columnKeys);return yt.compose(this.prepareSession(l),this.prependContent(s),this.exportColumnGroups(s,l),this.exportHeaders(s,l),this.processPinnedTopRows(s,l),this.processRows(s,l),this.processPinnedBottomRows(s,l),this.appendContent(s))(t).parse()},i.prototype.processRow=function(t,s,l,c){var h=s.shouldRowBeSkipped||function(){return!1},m=this.gridOptionsWrapper,S=m.getContext(),R=m.getApi(),D=m.getColumnApi(),L=m.isGroupRemoveSingleChildren(),U=m.isGroupHideOpenParents(),K=m.isGroupRemoveLowestSingleChildren(),ee=this.columnModel.isPivotMode()?c.leafGroup:!c.group,Ve=1===c.allChildrenCount&&(L||K&&c.leafGroup);if((s.skipGroups||s.skipRowGroups)&&s.skipGroups&&yt.doOnce(function(){return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.")},"gridSerializer-skipGroups"),!(!ee&&(s.skipRowGroups||Ve||U)||s.onlySelected&&!c.isSelected()||s.skipPinnedTop&&"top"===c.rowPinned||s.skipPinnedBottom&&"bottom"===c.rowPinned)&&(-1!==c.level||c.leafGroup)&&!h({node:c,api:R,context:S})){var Qe=t.onNewBodyRow();if(l.forEach(function(an,Gt){Qe.onColumn(an,Gt,c)}),s.getCustomContentBelowRow){var ye=s.getCustomContentBelowRow({node:c,api:R,columnApi:D,context:S});ye&&t.addCustomContent(ye)}}},i.prototype.appendContent=function(t){return function(s){var l=t.customFooter||t.appendContent;return l&&(t.customFooter&&yt.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.")},"gridSerializer-customFooter"),s.addCustomContent(l)),s}},i.prototype.prependContent=function(t){return function(s){var l=t.customHeader||t.prependContent;return l&&(t.customHeader&&yt.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.")},"gridSerializer-customHeader"),s.addCustomContent(l)),s}},i.prototype.prepareSession=function(t){return function(s){return s.prepare(t),s}},i.prototype.exportColumnGroups=function(t,s){var l=this;return function(c){if(t.skipColumnGroupHeaders)t.columnGroups&&yt.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.")},"gridSerializer-columnGroups");else{var h=new Bv,m=l.displayedGroupCreator.createDisplayedGroups(s,l.columnModel.getGridBalancedTree(),h,null);l.recursivelyAddHeaderGroups(m,c,t.processGroupHeaderCallback)}return c}},i.prototype.exportHeaders=function(t,s){return function(l){if(t.skipHeader||t.skipColumnHeaders)t.skipHeader&&yt.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.")},"gridSerializer-skipHeader");else{var c=l.onNewHeaderRow();s.forEach(function(h,m){c.onColumn(h,m,void 0)})}return l}},i.prototype.processPinnedTopRows=function(t,s){var l=this;return function(c){var h=l.processRow.bind(l,c,t,s);return l.pinnedRowModel.forEachPinnedTopRow(h),c}},i.prototype.processRows=function(t,s){var l=this;return function(c){var h=l.rowModel,m=h.getType(),S=m===fe.ROW_MODEL_TYPE_CLIENT_SIDE,R=m===fe.ROW_MODEL_TYPE_SERVER_SIDE,D=!S&&t.onlySelected,L=l.processRow.bind(l,c,t,s);return l.columnModel.isPivotMode()?S?h.forEachPivotNode(L):h.forEachNode(L):t.onlySelectedAllPages||D?l.selectionService.getSelectedNodes().forEach(L):S||R?h.forEachNodeAfterFilterAndSort(L):h.forEachNode(L),c}},i.prototype.processPinnedBottomRows=function(t,s){var l=this;return function(c){var h=l.processRow.bind(l,c,t,s);return l.pinnedRowModel.forEachPinnedBottomRow(h),c}},i.prototype.getColumnsToExport=function(t,s){void 0===t&&(t=!1);var l=this.columnModel.isPivotMode();return s&&s.length?this.columnModel.getGridColumns(s):t&&!l?(this.gridOptionsWrapper.isTreeData()?this.columnModel.getGridColumns([fe.GROUP_AUTO_COLUMN_ID]):[]).concat(this.columnModel.getAllPrimaryColumns()||[]):this.columnModel.getAllDisplayedColumns()},i.prototype.recursivelyAddHeaderGroups=function(t,s,l){var c=[];t.forEach(function(h){!h.getChildren||h.getChildren().forEach(function(S){return c.push(S)})}),t.length>0&&t[0]instanceof ai&&this.doAddHeaderHeader(s,t,l),c&&c.length>0&&this.recursivelyAddHeaderGroups(c,s,l)},i.prototype.doAddHeaderHeader=function(t,s,l){var c=this,h=t.onNewHeaderGroupingRow(),m=0;s.forEach(function(S){var D,R=S;D=l?l({columnGroup:R,api:c.gridOptionsWrapper.getApi(),columnApi:c.gridOptionsWrapper.getColumnApi(),context:c.gridOptionsWrapper.getContext()}):c.columnModel.getDisplayNameForColumnGroup(R,"header"),h.onColumn(D||"",m++,R.getLeafColumns().length-1)})},mu([H("displayedGroupCreator")],i.prototype,"displayedGroupCreator",void 0),mu([H("columnModel")],i.prototype,"columnModel",void 0),mu([H("rowModel")],i.prototype,"rowModel",void 0),mu([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),mu([H("selectionService")],i.prototype,"selectionService",void 0),mu([vt("gridSerializer")],i)}(Ye),qR={moduleName:Y.GXE.CsvExportModule,beans:[Nm,jR]},st=(function(){function d(){}d.createHeader=function(i){void 0===i&&(i={});var l=["version"];return i.version||(i.version="1.0"),i.encoding&&l.push("encoding"),i.standalone&&l.push("standalone"),"<?xml "+l.map(function(h){return h+'="'+i[h]+'"'}).join(" ")+" ?>"},d.createXml=function(i,t){var s=this,l="";i.properties&&(i.properties.prefixedAttributes&&i.properties.prefixedAttributes.forEach(function(h){Object.keys(h.map).forEach(function(m){l+=s.returnAttributeIfPopulated(h.prefix+m,h.map[m],t)})}),i.properties.rawMap&&Object.keys(i.properties.rawMap).forEach(function(h){l+=s.returnAttributeIfPopulated(h,i.properties.rawMap[h],t)}));var c="<"+i.name+l;return i.children||null!=i.textNode?null!=i.textNode?c+">"+i.textNode+"</"+i.name+">\r\n":(c+=">\r\n",i.children&&i.children.forEach(function(h){c+=s.createXml(h,t)}),c+"</"+i.name+">\r\n"):c+"/>\r\n"},d.returnAttributeIfPopulated=function(i,t,s){if(!t&&""!==t&&0!==t)return"";var l=t;return"boolean"==typeof t&&s&&(l=s(t))," "+i+'="'+l+'"'}}(),new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]));!function(){function d(){}d.addFolders=function(i){i.forEach(this.addFolder.bind(this))},d.addFolder=function(i){this.folders.push({path:i,created:new Date,isBase64:!1})},d.addFile=function(i,t,s){void 0===s&&(s=!1),this.files.push({path:i,created:new Date,content:t,isBase64:s})},d.getContent=function(i){void 0===i&&(i="application/zip");var t=this.buildFileStream(),s=this.buildUint8Array(t);return this.clearStream(),new Blob([s],{type:i})},d.clearStream=function(){this.folders=[],this.files=[]},d.buildFileStream=function(i){void 0===i&&(i="");for(var t=this.folders.concat(this.files),s=t.length,l="",c=0,h=0,m=0,S=t;m<S.length;m++){var D=this.getHeader(S[m],c),L=D.fileHeader,U=D.folderHeader,K=D.content;c+=L.length+K.length,h+=U.length,i+=L+K,l+=U}return i+l+this.buildFolderEnd(s,h,c)},d.getHeader=function(i,t){var s=i.content,l=i.path,c=i.created,h=i.isBase64,S=yt.decToHex,R=(0,yt.utf8_encode)(l),D=R!==l,L=this.convertTime(c),U=this.convertDate(c),K="";if(D){var ee=S(1,1)+S(this.getFromCrc32Table(R),4)+R;K="up"+S(ee.length,2)+ee}var ae=s?this.getConvertedContent(s,h):{size:0,content:""},Te=ae.size,Ve=ae.content,We="\n\0"+(D?"\0\b":"\0\0")+"\0\0"+S(L,2)+S(U,2)+S(Te?this.getFromCrc32Table(Ve):0,4)+S(Te,4)+S(Te,4)+S(R.length,2)+S(K.length,2);return{fileHeader:"PK\x03\x04"+We+R+K,folderHeader:"PK\x01\x02\x14\0"+We+"\0\0\0\0\0\0"+(s?"\0\0\0\0":"\x10\0\0\0")+S(t,4)+R+K,content:Ve||""}},d.getConvertedContent=function(i,t){return void 0===t&&(t=!1),t&&(i=i.split(";base64,")[1]),{size:(i=t?atob(i):i).length,content:i}},d.buildFolderEnd=function(i,t,s){var l=yt.decToHex;return"PK\x05\x06\0\0\0\0"+l(i,2)+l(i,2)+l(t,4)+l(s,4)+"\0\0"},d.buildUint8Array=function(i){for(var t=new Uint8Array(i.length),s=0;s<t.length;s++)t[s]=i.charCodeAt(s);return t},d.getFromCrc32Table=function(i){if(!i.length)return 0;for(var t=i.length,s=new Uint8Array(t),l=0;l<t;l++)s[l]=i.charCodeAt(l);var c=-1;for(l=0;l<t;l++)c=c>>>8^st[255&(c^s[l])];return-1^c},d.convertTime=function(i){var t=i.getHours();return t<<=6,t|=i.getMinutes(),(t<<=5)|i.getSeconds()/2},d.convertDate=function(i){var t=i.getFullYear()-1980;return t<<=4,t|=i.getMonth()+1,(t<<=5)|i.getDate()},d.folders=[],d.files=[]}();Kt.register(tO,!1),Kt.register(VR,!1),Kt.register(qR,!1),Y.j_S=Qr,Y.Nk3=y0,Y.plv=Ho,Y.rjZ=Ls,Y.vA3=Kx},854:function(Dl){var Y=function(pe){"use strict";var we,ze=Object.prototype,Fe=ze.hasOwnProperty,ni="function"==typeof Symbol?Symbol:{},j=ni.iterator||"@@iterator",N=ni.asyncIterator||"@@asyncIterator",so=ni.toStringTag||"@@toStringTag";function ve(ht,Ze,rt){return Object.defineProperty(ht,Ze,{value:rt,enumerable:!0,configurable:!0,writable:!0}),ht[Ze]}try{ve({},"")}catch(ht){ve=function(rt,Ft,nn){return rt[Ft]=nn}}function Yc(ht,Ze,rt,Ft){var $t=Object.create((Ze&&Ze.prototype instanceof Pt?Ze:Pt).prototype),Ut=new Rr(Ft||[]);return $t._invoke=function(ht,Ze,rt){var Ft=Yn;return function($t,Ut){if(Ft===ge)throw new Error("Generator is already running");if(Ft===Zs){if("throw"===$t)throw Ut;return Ml()}for(rt.method=$t,rt.arg=Ut;;){var $r=rt.delegate;if($r){var mi=On($r,rt);if(mi){if(mi===vi)continue;return mi}}if("next"===rt.method)rt.sent=rt._sent=rt.arg;else if("throw"===rt.method){if(Ft===Yn)throw Ft=Zs,rt.arg;rt.dispatchException(rt.arg)}else"return"===rt.method&&rt.abrupt("return",rt.arg);Ft=ge;var Br=Js(ht,Ze,rt);if("normal"===Br.type){if(Ft=rt.done?Zs:Li,Br.arg===vi)continue;return{value:Br.arg,done:rt.done}}"throw"===Br.type&&(Ft=Zs,rt.method="throw",rt.arg=Br.arg)}}}(ht,rt,Ut),$t}function Js(ht,Ze,rt){try{return{type:"normal",arg:ht.call(Ze,rt)}}catch(Ft){return{type:"throw",arg:Ft}}}pe.wrap=Yc;var Yn="suspendedStart",Li="suspendedYield",ge="executing",Zs="completed",vi={};function Pt(){}function Lu(){}function ds(){}var jn={};ve(jn,j,function(){return this});var pr=Object.getPrototypeOf,Rn=pr&&pr(pr(Tn([])));Rn&&Rn!==ze&&Fe.call(Rn,j)&&(jn=Rn);var fs=ds.prototype=Pt.prototype=Object.create(jn);function $c(ht){["next","throw","return"].forEach(function(Ze){ve(ht,Ze,function(rt){return this._invoke(Ze,rt)})})}function Al(ht,Ze){function rt($t,Ut,$r,mi){var Br=Js(ht[$t],ht,Ut);if("throw"!==Br.type){var Qs=Br.arg,Fu=Qs.value;return Fu&&"object"==typeof Fu&&Fe.call(Fu,"__await")?Ze.resolve(Fu.__await).then(function(ps){rt("next",ps,$r,mi)},function(ps){rt("throw",ps,$r,mi)}):Ze.resolve(Fu).then(function(ps){Qs.value=ps,$r(Qs)},function(ps){return rt("throw",ps,$r,mi)})}mi(Br.arg)}var Ft;this._invoke=function($t,Ut){function $r(){return new Ze(function(mi,Br){rt($t,Ut,mi,Br)})}return Ft=Ft?Ft.then($r,$r):$r()}}function On(ht,Ze){var rt=ht.iterator[Ze.method];if(rt===we){if(Ze.delegate=null,"throw"===Ze.method){if(ht.iterator.return&&(Ze.method="return",Ze.arg=we,On(ht,Ze),"throw"===Ze.method))return vi;Ze.method="throw",Ze.arg=new TypeError("The iterator does not provide a 'throw' method")}return vi}var Ft=Js(rt,ht.iterator,Ze.arg);if("throw"===Ft.type)return Ze.method="throw",Ze.arg=Ft.arg,Ze.delegate=null,vi;var nn=Ft.arg;return nn?nn.done?(Ze[ht.resultName]=nn.value,Ze.next=ht.nextLoc,"return"!==Ze.method&&(Ze.method="next",Ze.arg=we),Ze.delegate=null,vi):nn:(Ze.method="throw",Ze.arg=new TypeError("iterator result is not an object"),Ze.delegate=null,vi)}function gi(ht){var Ze={tryLoc:ht[0]};1 in ht&&(Ze.catchLoc=ht[1]),2 in ht&&(Ze.finallyLoc=ht[2],Ze.afterLoc=ht[3]),this.tryEntries.push(Ze)}function Xc(ht){var Ze=ht.completion||{};Ze.type="normal",delete Ze.arg,ht.completion=Ze}function Rr(ht){this.tryEntries=[{tryLoc:"root"}],ht.forEach(gi,this),this.reset(!0)}function Tn(ht){if(ht){var Ze=ht[j];if(Ze)return Ze.call(ht);if("function"==typeof ht.next)return ht;if(!isNaN(ht.length)){var rt=-1,Ft=function nn(){for(;++rt<ht.length;)if(Fe.call(ht,rt))return nn.value=ht[rt],nn.done=!1,nn;return nn.value=we,nn.done=!0,nn};return Ft.next=Ft}}return{next:Ml}}function Ml(){return{value:we,done:!0}}return Lu.prototype=ds,ve(fs,"constructor",ds),ve(ds,"constructor",Lu),Lu.displayName=ve(ds,so,"GeneratorFunction"),pe.isGeneratorFunction=function(ht){var Ze="function"==typeof ht&&ht.constructor;return!!Ze&&(Ze===Lu||"GeneratorFunction"===(Ze.displayName||Ze.name))},pe.mark=function(ht){return Object.setPrototypeOf?Object.setPrototypeOf(ht,ds):(ht.__proto__=ds,ve(ht,so,"GeneratorFunction")),ht.prototype=Object.create(fs),ht},pe.awrap=function(ht){return{__await:ht}},$c(Al.prototype),ve(Al.prototype,N,function(){return this}),pe.AsyncIterator=Al,pe.async=function(ht,Ze,rt,Ft,nn){void 0===nn&&(nn=Promise);var $t=new Al(Yc(ht,Ze,rt,Ft),nn);return pe.isGeneratorFunction(Ze)?$t:$t.next().then(function(Ut){return Ut.done?Ut.value:$t.next()})},$c(fs),ve(fs,so,"Generator"),ve(fs,j,function(){return this}),ve(fs,"toString",function(){return"[object Generator]"}),pe.keys=function(ht){var Ze=[];for(var rt in ht)Ze.push(rt);return Ze.reverse(),function Ft(){for(;Ze.length;){var nn=Ze.pop();if(nn in ht)return Ft.value=nn,Ft.done=!1,Ft}return Ft.done=!0,Ft}},pe.values=Tn,Rr.prototype={constructor:Rr,reset:function(Ze){if(this.prev=0,this.next=0,this.sent=this._sent=we,this.done=!1,this.delegate=null,this.method="next",this.arg=we,this.tryEntries.forEach(Xc),!Ze)for(var rt in this)"t"===rt.charAt(0)&&Fe.call(this,rt)&&!isNaN(+rt.slice(1))&&(this[rt]=we)},stop:function(){this.done=!0;var rt=this.tryEntries[0].completion;if("throw"===rt.type)throw rt.arg;return this.rval},dispatchException:function(Ze){if(this.done)throw Ze;var rt=this;function Ft(Br,Qs){return Ut.type="throw",Ut.arg=Ze,rt.next=Br,Qs&&(rt.method="next",rt.arg=we),!!Qs}for(var nn=this.tryEntries.length-1;nn>=0;--nn){var $t=this.tryEntries[nn],Ut=$t.completion;if("root"===$t.tryLoc)return Ft("end");if($t.tryLoc<=this.prev){var $r=Fe.call($t,"catchLoc"),mi=Fe.call($t,"finallyLoc");if($r&&mi){if(this.prev<$t.catchLoc)return Ft($t.catchLoc,!0);if(this.prev<$t.finallyLoc)return Ft($t.finallyLoc)}else if($r){if(this.prev<$t.catchLoc)return Ft($t.catchLoc,!0)}else{if(!mi)throw new Error("try statement without catch or finally");if(this.prev<$t.finallyLoc)return Ft($t.finallyLoc)}}}},abrupt:function(Ze,rt){for(var Ft=this.tryEntries.length-1;Ft>=0;--Ft){var nn=this.tryEntries[Ft];if(nn.tryLoc<=this.prev&&Fe.call(nn,"finallyLoc")&&this.prev<nn.finallyLoc){var $t=nn;break}}$t&&("break"===Ze||"continue"===Ze)&&$t.tryLoc<=rt&&rt<=$t.finallyLoc&&($t=null);var Ut=$t?$t.completion:{};return Ut.type=Ze,Ut.arg=rt,$t?(this.method="next",this.next=$t.finallyLoc,vi):this.complete(Ut)},complete:function(Ze,rt){if("throw"===Ze.type)throw Ze.arg;return"break"===Ze.type||"continue"===Ze.type?this.next=Ze.arg:"return"===Ze.type?(this.rval=this.arg=Ze.arg,this.method="return",this.next="end"):"normal"===Ze.type&&rt&&(this.next=rt),vi},finish:function(Ze){for(var rt=this.tryEntries.length-1;rt>=0;--rt){var Ft=this.tryEntries[rt];if(Ft.finallyLoc===Ze)return this.complete(Ft.completion,Ft.afterLoc),Xc(Ft),vi}},catch:function(Ze){for(var rt=this.tryEntries.length-1;rt>=0;--rt){var Ft=this.tryEntries[rt];if(Ft.tryLoc===Ze){var nn=Ft.completion;if("throw"===nn.type){var $t=nn.arg;Xc(Ft)}return $t}}throw new Error("illegal catch attempt")},delegateYield:function(Ze,rt,Ft){return this.delegate={iterator:Tn(Ze),resultName:rt,nextLoc:Ft},"next"===this.method&&(this.arg=we),vi}},pe}(Dl.exports);try{regeneratorRuntime=Y}catch(pe){"object"==typeof globalThis?globalThis.regeneratorRuntime=Y:Function("r","regeneratorRuntime = r")(Y)}},757:function(Dl,Y,pe){Dl.exports=pe(854)}},function(Dl){Dl(Dl.s=30)}]);