(self.webpackChunkkujata_webapp=self.webpackChunkkujata_webapp||[]).push([[179],{735:function(wl,Y,pe){"use strict";function Ue(n){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}function Fe(n,a){for(;!Object.prototype.hasOwnProperty.call(n,a)&&null!==(n=Ue(n)););return n}function Ce(){return Ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,t,r){var o=Fe(a,t);if(o){var u=Object.getOwnPropertyDescriptor(o,t);return u.get?u.get.call(arguments.length<3?a:r):u.value}},Ce.apply(this,arguments)}function ni(n,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function j(n,a,t){return a&&ni(n.prototype,a),t&&ni(n,t),n}function k(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function oo(n,a){return(oo=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r})(n,a)}function ve(n,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),a&&oo(n,a)}function Vc(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Ys(n){return(Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Kn(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Li(n,a){if(a&&("object"===Ys(a)||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return Kn(n)}function me(n){var a=Vc();return function(){var o,r=Ue(n);if(a){var u=Ue(this).constructor;o=Reflect.construct(r,arguments,u)}else o=r.apply(this,arguments);return Li(this,o)}}function $s(n,a){(null==a||a>n.length)&&(a=n.length);for(var t=0,r=new Array(a);t<a;t++)r[t]=n[t];return r}function hi(n,a){if(n){if("string"==typeof n)return $s(n,a);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $s(n,a)}}function Ot(n,a){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=hi(n))||a&&n&&"number"==typeof n.length){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(g){throw g},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p,u=!0,f=!1;return{s:function(){t=t.call(n)},n:function(){var g=t.next();return u=g.done,g},e:function(g){f=!0,p=g},f:function(){try{!u&&null!=t.return&&t.return()}finally{if(f)throw p}}}}function Ar(n,a){return function(n){if(Array.isArray(n))return n}(n)||function(n,a){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var f,p,r=[],o=!0,u=!1;try{for(t=t.call(n);!(o=(f=t.next()).done)&&(r.push(f.value),!a||r.length!==a);o=!0);}catch(v){u=!0,p=v}finally{try{!o&&null!=t.return&&t.return()}finally{if(u)throw p}}return r}}(n,a)||hi(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bn(n,a,t){return a in n?Object.defineProperty(n,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[a]=t,n}function An(n){return function(n){if(Array.isArray(n))return $s(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||hi(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vi(n,a,t){return(vi=Vc()?Reflect.construct:function(o,u,f){var p=[null];p.push.apply(p,u);var g=new(Function.bind.apply(o,p));return f&&oo(g,f.prototype),g}).apply(null,arguments)}function Sr(n){var a="function"==typeof Map?new Map:void 0;return Sr=function(r){if(null===r||!function(n){return-1!==Function.toString.call(n).indexOf("[native code]")}(r))return r;if("function"!=typeof r)throw new TypeError("Super expression must either be null or a function");if(void 0!==a){if(a.has(r))return a.get(r);a.set(r,o)}function o(){return vi(r,arguments,Ue(this).constructor)}return o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),oo(o,r)},Sr(n)}function xn(n){return"function"==typeof n}function El(n){var t=n(function(o){Error.call(o),o.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ht=El(function(n){return function(t){n(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map(function(r,o){return"".concat(o+1,") ").concat(r.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t}});function Je(n,a){if(n){var t=n.indexOf(a);0<=t&&n.splice(t,1)}}var n,nt=function(){function n(a){k(this,n),this.initialTeardown=a,this.closed=!1,this._parentage=null,this._teardowns=null}return j(n,[{key:"unsubscribe",value:function(){var t;if(!this.closed){this.closed=!0;var r=this._parentage;if(r)if(this._parentage=null,Array.isArray(r)){var u,o=Ot(r);try{for(o.s();!(u=o.n()).done;)u.value.remove(this)}catch(C){o.e(C)}finally{o.f()}}else r.remove(this);var p=this.initialTeardown;if(xn(p))try{p()}catch(C){t=C instanceof ht?C.errors:[C]}var v=this._teardowns;if(v){this._teardowns=null;var y,g=Ot(v);try{for(g.s();!(y=g.n()).done;){var _=y.value;try{$t(_)}catch(C){t=null!=t?t:[],C instanceof ht?t=[].concat(An(t),An(C.errors)):t.push(C)}}}catch(C){g.e(C)}finally{g.f()}}if(t)throw new ht(t)}}},{key:"add",value:function(t){var r;if(t&&t!==this)if(this.closed)$t(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(t)}}},{key:"_hasParent",value:function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)}},{key:"_addParent",value:function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t}},{key:"_removeParent",value:function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&Je(r,t)}},{key:"remove",value:function(t){var r=this._teardowns;r&&Je(r,t),t instanceof n&&t._removeParent(this)}}]),n}();nt.EMPTY=((n=new nt).closed=!0,n);var Lt=nt.EMPTY;function nn(n){return n instanceof nt||n&&"closed"in n&&xn(n.remove)&&xn(n.add)&&xn(n.unsubscribe)}function $t(n){xn(n)?n():n.unsubscribe()}var Yr={setTimeout:function(n){function a(){return n.apply(this,arguments)}return a.toString=function(){return n.toString()},a}(function(){var n=Yr.delegate;return((null==n?void 0:n.setTimeout)||setTimeout).apply(void 0,arguments)}),clearTimeout:function(n){function a(t){return n.apply(this,arguments)}return a.toString=function(){return n.toString()},a}(function(n){var a=Yr.delegate;return((null==a?void 0:a.clearTimeout)||clearTimeout)(n)}),delegate:void 0};function gi(n){Yr.setTimeout(function(){throw n})}function Gr(){}var Xs=Fn("C",void 0,void 0);function Fn(n,a,t){return{kind:n,value:a,error:t}}function Tf(n){n()}var Af=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this)).isStopped=!1,r?(o.destination=r,nn(r)&&r.add(Kn(o))):o.destination=Ta,o}return j(t,[{key:"next",value:function(o){this.isStopped?Of(function(n){return Fn("N",n,void 0)}(o),this):this._next(o)}},{key:"error",value:function(o){this.isStopped?Of(function(n){return Fn("E",void 0,n)}(o),this):(this.isStopped=!0,this._error(o))}},{key:"complete",value:function(){this.isStopped?Of(Xs,this):(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,Ce(Ue(t.prototype),"unsubscribe",this).call(this),this.destination=null)}},{key:"_next",value:function(o){this.destination.next(o)}},{key:"_error",value:function(o){try{this.destination.error(o)}finally{this.unsubscribe()}}},{key:"_complete",value:function(){try{this.destination.complete()}finally{this.unsubscribe()}}}],[{key:"create",value:function(o,u,f){return new Mf(o,u,f)}}]),t}(nt),Mf=function(n){ve(t,n);var a=me(t);function t(r,o,u){var f,p;if(k(this,t),f=a.call(this),xn(r))p=r;else if(r){var v;p=r.next,o=r.error,u=r.complete,Kn(f),v=r,p=null==p?void 0:p.bind(v),o=null==o?void 0:o.bind(v),u=null==u?void 0:u.bind(v)}return f.destination={next:p?Rv(p,Kn(f)):Gr,error:Rv(null!=o?o:Tv,Kn(f)),complete:u?Rv(u,Kn(f)):Gr},f}return t}(Af);function Rv(n,a){return function(){try{n.apply(void 0,arguments)}catch(t){gi(t)}}}function Tv(n){throw n}function Of(n,a){var t=null;t&&Yr.setTimeout(function(){return t(n,a)})}var Ta={closed:!0,next:Gr,error:Tv,complete:Gr},ao="function"==typeof Symbol&&Symbol.observable||"@@observable";function ii(n){return n}function u_(n){return 0===n.length?ii:1===n.length?n[0]:function(t){return n.reduce(function(r,o){return o(r)},t)}}var Cr=function(){var n=function(){function a(t){k(this,a),t&&(this._subscribe=t)}return j(a,[{key:"lift",value:function(r){var o=new a;return o.source=this,o.operator=r,o}},{key:"subscribe",value:function(r,o,u){var f=this,p=function(n){return n&&n instanceof Af||function(n){return n&&xn(n.next)&&xn(n.error)&&xn(n.complete)}(n)&&nn(n)}(r)?r:new Mf(r,o,u);return Tf(function(){var v=f.operator,g=f.source;p.add(v?v.call(p,g):g?f._subscribe(p):f._trySubscribe(p))}),p}},{key:"_trySubscribe",value:function(r){try{return this._subscribe(r)}catch(o){r.error(o)}}},{key:"forEach",value:function(r,o){var u=this;return new(o=Dv(o))(function(f,p){var v;v=u.subscribe(function(g){try{r(g)}catch(y){p(y),null==v||v.unsubscribe()}},p,f)})}},{key:"_subscribe",value:function(r){var o;return null===(o=this.source)||void 0===o?void 0:o.subscribe(r)}},{key:ao,value:function(){return this}},{key:"pipe",value:function(){for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return u_(o)(this)}},{key:"toPromise",value:function(r){var o=this;return new(r=Dv(r))(function(u,f){var p;o.subscribe(function(v){return p=v},function(v){return f(v)},function(){return u(p)})})}}]),a}();return n.create=function(a){return new n(a)},n}();function Dv(n){var a;return null!==(a=null!=n?n:undefined)&&void 0!==a?a:Promise}var bl=El(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ds=function(){var n=function(a){ve(r,a);var t=me(r);function r(){var o;return k(this,r),(o=t.call(this)).closed=!1,o.observers=[],o.isStopped=!1,o.hasError=!1,o.thrownError=null,o}return j(r,[{key:"lift",value:function(u){var f=new c_(this,this);return f.operator=u,f}},{key:"_throwIfClosed",value:function(){if(this.closed)throw new bl}},{key:"next",value:function(u){var f=this;Tf(function(){if(f._throwIfClosed(),!f.isStopped){var g,v=Ot(f.observers.slice());try{for(v.s();!(g=v.n()).done;)g.value.next(u)}catch(_){v.e(_)}finally{v.f()}}})}},{key:"error",value:function(u){var f=this;Tf(function(){if(f._throwIfClosed(),!f.isStopped){f.hasError=f.isStopped=!0,f.thrownError=u;for(var p=f.observers;p.length;)p.shift().error(u)}})}},{key:"complete",value:function(){var u=this;Tf(function(){if(u._throwIfClosed(),!u.isStopped){u.isStopped=!0;for(var f=u.observers;f.length;)f.shift().complete()}})}},{key:"unsubscribe",value:function(){this.isStopped=this.closed=!0,this.observers=null}},{key:"observed",get:function(){var u;return(null===(u=this.observers)||void 0===u?void 0:u.length)>0}},{key:"_trySubscribe",value:function(u){return this._throwIfClosed(),Ce(Ue(r.prototype),"_trySubscribe",this).call(this,u)}},{key:"_subscribe",value:function(u){return this._throwIfClosed(),this._checkFinalizedStatuses(u),this._innerSubscribe(u)}},{key:"_innerSubscribe",value:function(u){var v=this.observers;return this.hasError||this.isStopped?Lt:(v.push(u),new nt(function(){return Je(v,u)}))}},{key:"_checkFinalizedStatuses",value:function(u){var v=this.isStopped;this.hasError?u.error(this.thrownError):v&&u.complete()}},{key:"asObservable",value:function(){var u=new Cr;return u.source=this,u}}]),r}(Cr);return n.create=function(a,t){return new c_(a,t)},n}(),c_=function(n){ve(t,n);var a=me(t);function t(r,o){var u;return k(this,t),(u=a.call(this)).destination=r,u.source=o,u}return j(t,[{key:"next",value:function(o){var u,f;null===(f=null===(u=this.destination)||void 0===u?void 0:u.next)||void 0===f||f.call(u,o)}},{key:"error",value:function(o){var u,f;null===(f=null===(u=this.destination)||void 0===u?void 0:u.error)||void 0===f||f.call(u,o)}},{key:"complete",value:function(){var o,u;null===(u=null===(o=this.destination)||void 0===o?void 0:o.complete)||void 0===u||u.call(o)}},{key:"_subscribe",value:function(o){var u,f;return null!==(f=null===(u=this.source)||void 0===u?void 0:u.subscribe(o))&&void 0!==f?f:Lt}}]),t}(ds);function d_(n){return xn(null==n?void 0:n.lift)}function oi(n){return function(a){if(d_(a))return a.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var vn=function(n){ve(t,n);var a=me(t);function t(r,o,u,f,p){var v,g,y,_;return k(this,t),(_=a.call(this,r)).onFinalize=p,_._next=o?function(C){try{o(C)}catch(S){r.error(S)}}:Ce((v=Kn(_),Ue(t.prototype)),"_next",v),_._error=f?function(C){try{f(C)}catch(S){r.error(S)}finally{this.unsubscribe()}}:Ce((g=Kn(_),Ue(t.prototype)),"_error",g),_._complete=u?function(){try{u()}catch(C){r.error(C)}finally{this.unsubscribe()}}:Ce((y=Kn(_),Ue(t.prototype)),"_complete",y),_}return j(t,[{key:"unsubscribe",value:function(){var o,u=this.closed;Ce(Ue(t.prototype),"unsubscribe",this).call(this),!u&&(null===(o=this.onFinalize)||void 0===o||o.call(this))}}]),t}(Af);function Yn(n,a){return oi(function(t,r){var o=0;t.subscribe(new vn(r,function(u){r.next(n.call(a,u,o++))}))})}var mi=pe(757),xl=pe.n(mi);function H(n){return this instanceof H?(this.v=n,this):new H(n)}function Nn(n,a,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=t.apply(n,a||[]),u=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(C){r[C]&&(o[C]=function(S){return new Promise(function(x,b){u.push([C,S,x,b])>1||p(C,S)})})}function p(C,S){try{!function(C){C.value instanceof H?Promise.resolve(C.value.v).then(g,y):_(u[0][2],C)}(r[C](S))}catch(x){_(u[0][3],x)}}function g(C){p("next",C)}function y(C){p("throw",C)}function _(C,S){C(S),u.shift(),u.length&&p(u[0][0],u[0][1])}}function Ni(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,a=n[Symbol.asyncIterator];return a?a.call(n):(n=function(n){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&n[a],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(u){t[u]=n[u]&&function(f){return new Promise(function(p,v){!function(u,f,p,v){Promise.resolve(v).then(function(g){u({value:g,done:p})},f)}(p,v,(f=n[u](f)).done,f.value)})}}}var Ou=function(a){return a&&"number"==typeof a.length&&"function"!=typeof a};function m_(n){return xn(null==n?void 0:n.then)}function Mn(n){return xn(n[ao])}function y_(n){return Symbol.asyncIterator&&xn(null==n?void 0:n[Symbol.asyncIterator])}function ai(n){return new TypeError("You provided ".concat(null!==n&&"object"==typeof n?"an invalid object":"'".concat(n,"'")," where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable."))}var __="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Ov(n){return xn(null==n?void 0:n[__])}function C_(n){return Nn(this,arguments,xl().mark(function a(){var t,r,o;return xl().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:t=n.getReader(),p.prev=1;case 2:return p.next=5,H(t.read());case 5:if(o=(r=p.sent).value,!r.done){p.next=12;break}return p.next=11,H(void 0);case 11:return p.abrupt("return",p.sent);case 12:return p.next=14,H(o);case 14:return p.next=16,p.sent;case 16:p.next=2;break;case 18:return p.prev=18,t.releaseLock(),p.finish(18);case 21:case"end":return p.stop()}},a,null,[[1,,18,21]])}))}function Ff(n){return xn(null==n?void 0:n.getReader)}function so(n){if(n instanceof Cr)return n;if(null!=n){if(Mn(n))return function(n){return new Cr(function(a){var t=n[ao]();if(xn(t.subscribe))return t.subscribe(a);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ou(n))return function(n){return new Cr(function(a){for(var t=0;t<n.length&&!a.closed;t++)a.next(n[t]);a.complete()})}(n);if(m_(n))return function(n){return new Cr(function(a){n.then(function(t){a.closed||(a.next(t),a.complete())},function(t){return a.error(t)}).then(null,gi)})}(n);if(y_(n))return Pu(n);if(Ov(n))return function(n){return new Cr(function(a){var r,t=Ot(n);try{for(t.s();!(r=t.n()).done;)if(a.next(r.value),a.closed)return}catch(u){t.e(u)}finally{t.f()}a.complete()})}(n);if(Ff(n))return function(n){return Pu(C_(n))}(n)}throw ai(n)}function Pu(n){return new Cr(function(a){(function(n,a){var t,r,o,u;return function(n,a,t,r){return new(t||(t=Promise))(function(u,f){function p(y){try{g(r.next(y))}catch(_){f(_)}}function v(y){try{g(r.throw(y))}catch(_){f(_)}}function g(y){y.done?u(y.value):function(u){return u instanceof t?u:new t(function(f){f(u)})}(y.value).then(p,v)}g((r=r.apply(n,a||[])).next())})}(this,void 0,void 0,xl().mark(function f(){return xl().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:g.prev=0,t=Ni(n);case 2:return g.next=4,t.next();case 4:if((r=g.sent).done){g.next=12;break}if(a.next(r.value),!a.closed){g.next=10;break}return g.abrupt("return");case 10:g.next=2;break;case 12:g.next=17;break;case 14:g.prev=14,g.t0=g.catch(0),o={error:g.t0};case 17:if(g.prev=17,g.prev=18,!r||r.done||!(u=t.return)){g.next=22;break}return g.next=22,u.call(t);case 22:if(g.prev=22,!o){g.next=25;break}throw o.error;case 25:return g.finish(22);case 26:return g.finish(17);case 27:a.complete();case 28:case"end":return g.stop()}},f,null,[[0,14,17,27],[18,,22,26]])}))})(n,a).catch(function(t){return a.error(t)})})}function fs(n,a,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=a.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(u),!o)return u}function Iv(n,a,t,r,o,u,f,p){var v=[],g=0,y=0,_=!1,C=function(){_&&!v.length&&!g&&a.complete()},S=function(E){return g<r?x(E):v.push(E)},x=function b(E){u&&a.next(E),g++;var D=!1;so(t(E,y++)).subscribe(new vn(a,function(A){null==o||o(A),u?S(A):a.next(A)},function(){D=!0},void 0,function(){if(D)try{g--;for(var A=function(){var O=v.shift();f?fs(a,f,function(){return b(O)}):b(O)};v.length&&g<r;)A();C()}catch(M){a.error(M)}}))};return n.subscribe(new vn(a,S,function(){_=!0,C()})),function(){null==p||p()}}function $r(n,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return xn(a)?$r(function(r,o){return Yn(function(u,f){return a(r,u,o,f)})(so(n(r,o)))},t):("number"==typeof a&&(t=a),oi(function(r,o){return Iv(r,o,n,t)}))}function zc(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;return $r(ii,n)}var So=new Cr(function(n){return n.complete()});function Fv(n){return n[n.length-1]}function S_(n){return xn(Fv(n))?n.pop():void 0}function $(n){return function(n){return n&&xn(n.schedule)}(Fv(n))?n.pop():void 0}function Nv(n,a){return"number"==typeof Fv(n)?n.pop():a}function E_(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return oi(function(t,r){t.subscribe(new vn(r,function(o){return fs(r,n,function(){return r.next(o)},a)},function(){return fs(r,n,function(){return r.complete()},a)},function(o){return fs(r,n,function(){return r.error(o)},a)}))})}function b_(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return oi(function(t,r){r.add(n.schedule(function(){return t.subscribe(r)},a))})}function Gv(n,a){if(!n)throw new Error("Iterable cannot be null");return new Cr(function(t){fs(t,a,function(){var r=n[Symbol.asyncIterator]();fs(t,a,function(){r.next().then(function(o){o.done?t.complete():t.next(o.value)})},0,!0)})})}function Xr(n,a){return a?function(n,a){if(null!=n){if(Mn(n))return function(n,a){return so(n).pipe(b_(a),E_(a))}(n,a);if(Ou(n))return function(n,a){return new Cr(function(t){var r=0;return a.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,a);if(m_(n))return function(n,a){return so(n).pipe(b_(a),E_(a))}(n,a);if(y_(n))return Gv(n,a);if(Ov(n))return function(n,a){return new Cr(function(t){var r;return fs(t,a,function(){r=n[__](),fs(t,a,function(){var o,u;try{var f=r.next();o=f.value,u=f.done}catch(p){return void t.error(p)}u?t.complete():t.next(o)},0,!0)}),function(){return xn(null==r?void 0:r.return)&&r.return()}})}(n,a);if(Ff(n))return function(n,a){return Gv(C_(n),a)}(n,a)}throw ai(n)}(n,a):so(n)}function Gf(n){return n<=0?function(){return So}:oi(function(a,t){var r=0;a.subscribe(new vn(t,function(o){++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Hv(n,a){if(!0===a)return n(),null;if(!1===a)return null;for(var t=arguments.length,r=new Array(t>2?t-2:0),o=2;o<t;o++)r[o-2]=arguments[o];return a.apply(void 0,r).pipe(Gf(1)).subscribe(function(){return n()})}function ar(n){for(var a in n)if(n[a]===ar)return a;throw Error("Could not find renamed property on target object.")}function Bn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Bn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return"".concat(n.overriddenName);if(n.name)return"".concat(n.name);var a=n.toString();if(null==a)return""+a;var t=a.indexOf("\n");return-1===t?a:a.substring(0,t)}function Br(n,a){return null==n||""===n?null===a?"":a:null==a||""===a?n:n+" "+a}var kE=ar({__forward_ref__:ar});function Wv(n){return n.__forward_ref__=Wv,n.toString=function(){return Bn(this())},n}function fn(n){return Bf(n)?n():n}function Bf(n){return"function"==typeof n&&n.hasOwnProperty(kE)&&n.__forward_ref__===Wv}var ki=function(n){ve(t,n);var a=me(t);function t(r,o){var u;return k(this,t),(u=a.call(this,function(n,a){var t=n?"NG0".concat(n,": "):"";return"".concat(t).concat(a)}(r,o))).code=r,u}return t}(Sr(Error));function rn(n){return"string"==typeof n?n:null==n?"":String(n)}function ji(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():rn(n)}function Hf(n,a){var t=a?" in ".concat(a):"";throw new ki("201","No provider for ".concat(ji(n)," found").concat(t))}function bo(n,a){null==n&&function(n,a,t,r){throw new Error("ASSERTION ERROR: ".concat(n)+(null==r?"":" [Expected=> ".concat(t," ").concat(r," ").concat(a," <=Actual]")))}(a,n,null,"!=")}function un(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Vo(n){return{providers:n.providers||[],imports:n.imports||[]}}function qc(n){return Vf(n,qi)||Vf(n,Kc)}function Vf(n,a){return n.hasOwnProperty(a)?n[a]:null}function Wf(n){return n&&(n.hasOwnProperty(Tl)||n.hasOwnProperty(Yc))?n[Tl]:null}var Zs,qi=ar({"\u0275prov":ar}),Tl=ar({"\u0275inj":ar}),Kc=ar({ngInjectableDef:ar}),Yc=ar({ngInjectorDef:ar}),Qt=function(){return(Qt=Qt||{})[Qt.Default=0]="Default",Qt[Qt.Host=1]="Host",Qt[Qt.Self=2]="Self",Qt[Qt.SkipSelf=4]="SkipSelf",Qt[Qt.Optional=8]="Optional",Qt}();function Uf(){return Zs}function hs(n){var a=Zs;return Zs=n,a}function Kv(n,a,t){var r=qc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Qt.Optional?null:void 0!==a?a:void Hf(Bn(n),"Injector")}function vs(n){return{toString:n}.toString()}var aa=function(){return(aa=aa||{})[aa.OnPush=0]="OnPush",aa[aa.Default=1]="Default",aa}(),Oa=function(){return function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"}(Oa||(Oa={})),Oa}(),zf="undefined"!=typeof globalThis&&globalThis,Dt="undefined"!=typeof window&&window,yi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ft="undefined"!=typeof global&&global,rr=zf||Ft||Dt||yi,$n={},ir=[],ms=ar({"\u0275cmp":ar}),Dl=ar({"\u0275dir":ar}),Iu=ar({"\u0275pipe":ar}),Al=ar({"\u0275mod":ar}),Wo=ar({"\u0275fac":ar}),Lu=ar({__NG_ELEMENT_ID__:ar}),jf=0;function Mr(n){return vs(function(){var t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===aa.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||ir,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Oa.Emulated,id:"c",styles:n.styles||ir,_:null,setInput:null,schemas:n.schemas||null,tView:null},o=n.directives,u=n.features,f=n.pipes;return r.id+=jf++,r.inputs=sa(n.inputs,t),r.outputs=sa(n.outputs),u&&u.forEach(function(p){return p(r)}),r.directiveDefs=o?function(){return("function"==typeof o?o():o).map(Xc)}:null,r.pipeDefs=f?function(){return("function"==typeof f?f():f).map(uo)}:null,r})}function Xc(n){return si(n)||function(n){return n[Dl]||null}(n)}function uo(n){return function(n){return n[Iu]||null}(n)}var M_={};function _i(n){return vs(function(){var a={type:n.type,bootstrap:n.bootstrap||ir,declarations:n.declarations||ir,imports:n.imports||ir,exports:n.exports||ir,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(M_[n.id]=n.type),a})}function sa(n,a){if(null==n)return $n;var t={};for(var r in n)if(n.hasOwnProperty(r)){var o=n[r],u=o;Array.isArray(o)&&(u=o[1],o=o[0]),t[o]=r,a&&(a[o]=u)}return t}var Gi=Mr;function lo(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function si(n){return n[ms]||null}function co(n,a){var t=n[Al]||null;if(!t&&!0===a)throw new Error("Type ".concat(Bn(n)," does not have '\u0275mod' property."));return t}function Fa(n){return Array.isArray(n)&&"object"==typeof n[1]}function zo(n){return Array.isArray(n)&&!0===n[1]}function Xv(n){return 0!=(8&n.flags)}function Na(n){return 2==(2&n.flags)}function Ll(n){return 1==(1&n.flags)}function ho(n){return null!==n.template}function XE(n){return 0!=(512&n[2])}function nu(n,a){return n.hasOwnProperty(Wo)?n[Wo]:null}var F_=function(){function n(a,t,r){k(this,n),this.previousValue=a,this.currentValue=t,this.firstChange=r}return j(n,[{key:"isFirstChange",value:function(){return this.firstChange}}]),n}();function ua(){return Zv}function Zv(n){return n.type.prototype.ngOnChanges&&(n.setInput=ui),jo}function jo(){var n=k_(this),a=null==n?void 0:n.current;if(a){var t=n.previous;if(t===$n)n.previous=a;else for(var r in a)t[r]=a[r];n.current=null,this.ngOnChanges(a)}}function ui(n,a,t,r){var o=k_(n)||function(n,a){return n[N_]=a}(n,{previous:$n,current:null}),u=o.current||(o.current={}),f=o.previous,p=this.declaredInputs[t],v=f[p];u[p]=new F_(v&&v.currentValue,a,f===$n),n[r]=a}ua.ngInherit=!0;var N_="__ngSimpleChanges__";function k_(n){return n[N_]||null}var Qv="http://www.w3.org/2000/svg",eg=void 0;function br(n){return!!n.listen}var V_={createRenderer:function(a,t){return void 0!==eg?eg:"undefined"!=typeof document?document:void 0}};function Vr(n){for(;Array.isArray(n);)n=n[0];return n}function pr(n,a){return Vr(a[n])}function qo(n,a){return Vr(a[n.index])}function ws(n,a){return n.data[a]}function xo(n,a){var t=a[n];return Fa(t)?t:t[0]}function W_(n){return 4==(4&n[2])}function td(n){return 128==(128&n[2])}function Qr(n,a){return null==a?null:n[a]}function $f(n){n[18]=0}function rg(n,a){n[5]+=a;for(var t=n,r=n[3];null!==r&&(1===a&&1===t[5]||-1===a&&0===t[5]);)r[5]+=a,t=r,r=r[3]}var zt={lFrame:tp(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ig(){return zt.bindingsEnabled}function qe(){return zt.lFrame.lView}function kn(){return zt.lFrame.tView}function Pr(n){return zt.lFrame.contextLView=n,n[8]}function Wr(){for(var n=Xf();null!==n&&64===n.type;)n=n.parent;return n}function Xf(){return zt.lFrame.currentTNode}function ka(n,a){var t=zt.lFrame;t.currentTNode=n,t.isParent=a}function $e(){return zt.lFrame.isParent}function og(){zt.lFrame.isParent=!1}function Ko(){return zt.isInCheckNoChangesMode}function Jf(n){zt.isInCheckNoChangesMode=n}function Hi(){var n=zt.lFrame,a=n.bindingRootIndex;return-1===a&&(a=n.bindingRootIndex=n.tView.bindingStartIndex),a}function Ro(){return zt.lFrame.bindingIndex}function Nl(){return zt.lFrame.bindingIndex++}function la(n){var a=zt.lFrame,t=a.bindingIndex;return a.bindingIndex=a.bindingIndex+n,t}function gb(n,a){var t=zt.lFrame;t.bindingIndex=t.bindingRootIndex=n,Qf(a)}function Qf(n){zt.lFrame.currentDirectiveIndex=n}function q_(){return zt.lFrame.currentQueryIndex}function ep(n){zt.lFrame.currentQueryIndex=n}function mb(n){var a=n[1];return 2===a.type?a.declTNode:1===a.type?n[6]:null}function sg(n,a,t){if(t&Qt.SkipSelf){for(var r=a,o=n;!(null!==(r=r.parent)||t&Qt.Host||null===(r=mb(o))||(o=o[15],10&r.type)););if(null===r)return!1;a=r,n=o}var u=zt.lFrame=K_();return u.currentTNode=a,u.lView=n,!0}function kl(n){var a=K_(),t=n[1];zt.lFrame=a,a.currentTNode=t.firstChild,a.lView=n,a.tView=t,a.contextLView=n,a.bindingIndex=t.bindingStartIndex,a.inI18n=!1}function K_(){var n=zt.lFrame,a=null===n?null:n.child;return null===a?tp(n):a}function tp(n){var a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=a),a}function Ga(){var n=zt.lFrame;return zt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Y_=Ga;function Ba(){var n=Ga();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ci(n){var a=zt.lFrame.contextLView=function(n,a){for(;n>0;)a=a[15],n--;return a}(n,zt.lFrame.contextLView);return a[8]}function Xi(){return zt.lFrame.selectedIndex}function xr(n){zt.lFrame.selectedIndex=n}function Rr(){var n=zt.lFrame;return ws(n.tView,n.selectedIndex)}function id(n,a){for(var t=a.directiveStart,r=a.directiveEnd;t<r;t++){var u=n.data[t].type.prototype,f=u.ngAfterContentInit,p=u.ngAfterContentChecked,v=u.ngAfterViewInit,g=u.ngAfterViewChecked,y=u.ngOnDestroy;f&&(n.contentHooks||(n.contentHooks=[])).push(-t,f),p&&((n.contentHooks||(n.contentHooks=[])).push(t,p),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,p)),v&&(n.viewHooks||(n.viewHooks=[])).push(-t,v),g&&((n.viewHooks||(n.viewHooks=[])).push(t,g),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,g)),null!=y&&(n.destroyHooks||(n.destroyHooks=[])).push(t,y)}}function rp(n,a,t){J_(n,a,3,t)}function Gl(n,a,t,r){(3&n[2])===t&&J_(n,a,t,r)}function lg(n,a){var t=n[2];(3&t)===a&&(t&=2047,n[2]=t+=1)}function J_(n,a,t,r){for(var u=null!=r?r:-1,f=a.length-1,p=0,v=void 0!==r?65535&n[18]:0;v<f;v++)if("number"==typeof a[v+1]){if(p=a[v],null!=r&&p>=r)break}else a[v]<0&&(n[18]+=65536),(p<u||-1==u)&&(_b(n,t,a,v),n[18]=(4294901760&n[18])+v+2),v++}function _b(n,a,t,r){var o=t[r]<0,u=t[r+1],p=n[o?-t[r]:t[r]];if(o){if(n[2]>>11<n[18]>>16&&(3&n[2])===a){n[2]+=2048;try{u.call(p)}finally{}}}else try{u.call(p)}finally{}}var od=function n(a,t,r){k(this,n),this.factory=a,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r};function ap(n,a,t){for(var r=br(n),o=0;o<t.length;){var u=t[o];if("number"==typeof u){if(0!==u)break;o++;var f=t[o++],p=t[o++],v=t[o++];r?n.setAttribute(a,p,v,f):a.setAttributeNS(f,p,v)}else{var g=u,y=t[++o];dg(g)?r&&n.setProperty(a,g,y):r?n.setAttribute(a,g,y):a.setAttribute(g,y),o++}}return o}function Q_(n){return 3===n||4===n||6===n}function dg(n){return 64===n.charCodeAt(0)}function sd(n,a){if(null!==a&&0!==a.length)if(null===n||0===n.length)n=a.slice();else for(var t=-1,r=0;r<a.length;r++){var o=a[r];"number"==typeof o?t=o:0===t||To(n,t,o,null,-1===t||2===t?a[++r]:null)}return n}function To(n,a,t,r,o){var u=0,f=n.length;if(-1===a)f=-1;else for(;u<n.length;){var p=n[u++];if("number"==typeof p){if(p===a){f=-1;break}if(p>a){f=u-1;break}}}for(;u<n.length;){var v=n[u];if("number"==typeof v)break;if(v===t){if(null===r)return void(null!==o&&(n[u+1]=o));if(r===n[u+1])return void(n[u+2]=o)}u++,null!==r&&u++,null!==o&&u++}-1!==f&&(n.splice(f,0,a),u=f+1),n.splice(u++,0,t),null!==r&&n.splice(u++,0,r),null!==o&&n.splice(u++,0,o)}function eC(n){return-1!==n}function Ji(n){return 32767&n}function Hl(n,a){for(var t=function(n){return n>>16}(n),r=a;t>0;)r=r[15],t--;return r}var ud=!0;function sp(n){var a=ud;return ud=n,a}var bb=0;function ld(n,a){var t=cd(n,a);if(-1!==t)return t;var r=a[1];r.firstCreatePass&&(n.injectorIndex=a.length,up(r.data,n),up(a,null),up(r.blueprint,null));var o=lp(n,a),u=n.injectorIndex;if(eC(o))for(var f=Ji(o),p=Hl(o,a),v=p[1].data,g=0;g<8;g++)a[u+g]=p[f+g]|v[f+g];return a[u+8]=o,u}function up(n,a){n.push(0,0,0,0,0,0,0,0,a)}function cd(n,a){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===a[n.injectorIndex+8]?-1:n.injectorIndex}function lp(n,a){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;for(var t=0,r=null,o=a;null!==o;){var u=o[1],f=u.type;if(null===(r=2===f?u.declTNode:1===f?o[6]:null))return-1;if(t++,o=o[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function dd(n,a,t){!function(n,a,t){var r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Lu)&&(r=t[Lu]),null==r&&(r=t[Lu]=bb++);var o=255&r;a.data[n+(o>>5)]|=1<<o}(n,a,t)}function rC(n,a,t){if(t&Qt.Optional)return n;Hf(a,"NodeInjector")}function fd(n,a,t,r){if(t&Qt.Optional&&void 0===r&&(r=null),0==(t&(Qt.Self|Qt.Host))){var o=n[9],u=hs(void 0);try{return o?o.get(a,r,t&Qt.Optional):Kv(a,r,t&Qt.Optional)}finally{hs(u)}}return rC(r,a,t)}function iC(n,a,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qt.Default,o=arguments.length>4?arguments[4]:void 0;if(null!==n){var u=oC(t);if("function"==typeof u){if(!sg(a,n,r))return r&Qt.Host?rC(o,t,r):fd(a,t,r,o);try{var f=u(r);if(null!=f||r&Qt.Optional)return f;Hf(t)}finally{Y_()}}else if("number"==typeof u){var p=null,v=cd(n,a),g=-1,y=r&Qt.Host?a[16][6]:null;for((-1===v||r&Qt.SkipSelf)&&(-1!==(g=-1===v?lp(n,a):a[v+8])&&sC(r,!1)?(p=a[1],v=Ji(g),a=Hl(g,a)):v=-1);-1!==v;){var _=a[1];if(aC(u,v,_.data)){var C=Tb(v,a,t,p,r,y);if(C!==fg)return C}-1!==(g=a[v+8])&&sC(r,a[1].data[v+8]===y)&&aC(u,v,a)?(p=_,v=Ji(g),a=Hl(g,a)):v=-1}}}return fd(a,t,r,o)}var fg={};function Rb(){return new Gu(Wr(),qe())}function Tb(n,a,t,r,o,u){var f=a[1],p=f.data[n+8],y=cp(p,f,t,null==r?Na(p)&&ud:r!=f&&0!=(3&p.type),o&Qt.Host&&u===p);return null!==y?pd(a,f,y,p):fg}function cp(n,a,t,r,o){for(var u=n.providerIndexes,f=a.data,p=1048575&u,v=n.directiveStart,y=u>>20,C=o?p+y:n.directiveEnd,S=r?p:p+y;S<C;S++){var x=f[S];if(S<v&&t===x||S>=v&&x.type===t)return S}if(o){var b=f[v];if(b&&ho(b)&&b.type===t)return v}return null}function pd(n,a,t,r){var o=n[t],u=a.data;if(function(n){return n instanceof od}(o)){var f=o;f.resolving&&function(n,a){throw new ki("200","Circular dependency in DI detected for ".concat(n).concat(""))}(ji(u[t]));var p=sp(f.canSeeViewProviders);f.resolving=!0;var v=f.injectImpl?hs(f.injectImpl):null;sg(n,r,Qt.Default);try{o=n[t]=f.factory(void 0,u,n,r),a.firstCreatePass&&t>=r.directiveStart&&function(n,a,t){var r=a.type.prototype,u=r.ngOnInit,f=r.ngDoCheck;if(r.ngOnChanges){var p=Zv(a);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,p),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,p)}u&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,u),f&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,f),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,f))}(t,u[t],a)}finally{null!==v&&hs(v),sp(p),f.resolving=!1,Y_()}}return o}function oC(n){if("string"==typeof n)return n.charCodeAt(0)||0;var a=n.hasOwnProperty(Lu)?n[Lu]:void 0;return"number"==typeof a?a>=0?255&a:Rb:a}function aC(n,a,t){return!!(t[a+(n>>5)]&1<<n)}function sC(n,a){return!(n&Qt.Self||n&Qt.Host&&a)}var Gu=function(){function n(a,t){k(this,n),this._tNode=a,this._lView=t}return j(n,[{key:"get",value:function(t,r,o){return iC(this._tNode,this._lView,t,o,r)}}]),n}();function pg(n){return Bf(n)?function(){var a=pg(fn(n));return a&&a()}:nu(n)}function Vl(n){return function(n,a){if("class"===a)return n.classes;if("style"===a)return n.styles;var t=n.attrs;if(t)for(var r=t.length,o=0;o<r;){var u=t[o];if(Q_(u))break;if(0===u)o+=2;else if("number"==typeof u)for(o++;o<r&&"string"==typeof t[o];)o++;else{if(u===a)return t[o+1];o+=2}}return null}(Wr(),n)}var Wl="__parameters__",Yo="__prop__metadata__";function Ul(n){return function(){if(n){var t=n.apply(void 0,arguments);for(var r in t)this[r]=t[r]}}}function Ha(n,a,t){return vs(function(){var r=Ul(a);function o(){for(var u=arguments.length,f=new Array(u),p=0;p<u;p++)f[p]=arguments[p];if(this instanceof o)return r.apply(this,f),this;var v=vi(o,f);return g.annotation=v,g;function g(y,_,C){for(var S=y.hasOwnProperty(Wl)?y[Wl]:Object.defineProperty(y,Wl,{value:[]})[Wl];S.length<=C;)S.push(null);return(S[C]=S[C]||[]).push(v),y}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}function zl(n,a,t,r){return vs(function(){var o=Ul(a);function u(){for(var f=arguments.length,p=new Array(f),v=0;v<f;v++)p[v]=arguments[v];if(this instanceof u)return o.apply(this,p),this;var g=vi(u,p);function y(_,C){var S=_.constructor,x=S.hasOwnProperty(Yo)?S[Yo]:Object.defineProperty(S,Yo,{value:{}})[Yo];x[C]=x.hasOwnProperty(C)&&x[C]||[],x[C].unshift(g),r&&r.apply(void 0,[_,C].concat(p))}return y}return t&&(u.prototype=Object.create(t.prototype)),u.prototype.ngMetadataName=n,u.annotationCls=u,u})}var On=function(){function n(a,t){k(this,n),this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=un({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}return j(n,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),n}(),hg=new On("AnalyzeForEntryComponents"),dp=function n(){k(this,n)},jl=zl("ContentChildren",function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:n,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0},a)},dp);function $o(n,a){void 0===a&&(a=n);for(var t=0;t<n.length;t++){var r=n[t];Array.isArray(r)?(a===n&&(a=n.slice(0,t)),$o(r,a)):a!==n&&a.push(r)}return a}function Va(n,a){n.forEach(function(t){return Array.isArray(t)?Va(t,a):a(t)})}function lC(n,a,t){a>=n.length?n.push(t):n.splice(a,0,t)}function fp(n,a){return a>=n.length-1?n.pop():n.splice(a,1)[0]}function vo(n,a,t){var r=ql(n,a);return r>=0?n[1|r]=t:function(n,a,t,r){var o=n.length;if(o==a)n.push(t,r);else if(1===o)n.push(r,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>a;)n[o]=n[o-2],o--;n[a]=t,n[a+1]=r}}(n,r=~r,a,t),r}function mg(n,a){var t=ql(n,a);if(t>=0)return n[1|t]}function ql(n,a){return function(n,a,t){for(var r=0,o=n.length>>t;o!==r;){var u=r+(o-r>>1),f=n[u<<t];if(a===f)return u<<t;f>a?o=u:r=u+1}return~(o<<t)}(n,a,1)}var Vu={},_g="__NG_DI_FLAG__",hp="ngTempTokenPath",Bb=/\n/gm,Ie="__source",pC=ar({provide:String,useValue:ar}),gd=void 0;function Cg(n){var a=gd;return gd=n,a}function gt(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt.Default;if(void 0===gd)throw new Error("inject() must be called from an injection context");return null===gd?Kv(n,void 0,a):gd.get(n,a&Qt.Optional?null:void 0,a)}function Mt(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt.Default;return(Uf()||gt)(fn(n),a)}function wg(n){for(var a=[],t=0;t<n.length;t++){var r=fn(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var o=void 0,u=Qt.Default,f=0;f<r.length;f++){var p=r[f],v=Sg(p);"number"==typeof v?-1===v?o=p.token:u|=v:o=p}a.push(Mt(o,u))}else a.push(Mt(r))}return a}function Yl(n,a){return n[_g]=a,n.prototype[_g]=a,n}function Sg(n){return n[_g]}function vC(n,a,t,r){var o=n[hp];throw a[Ie]&&o.unshift(a[Ie]),n.message=function(n,a,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;var o=Bn(a);if(Array.isArray(a))o=a.map(Bn).join(" -> ");else if("object"==typeof a){var u=[];for(var f in a)if(a.hasOwnProperty(f)){var p=a[f];u.push(f+":"+("string"==typeof p?JSON.stringify(p):Bn(p)))}o="{".concat(u.join(", "),"}")}return"".concat(t).concat(r?"("+r+")":"","[").concat(o,"]: ").concat(n.replace(Bb,"\n  "))}("\n"+n.message,o,t,r),n.ngTokenPath=o,n[hp]=null,n}var _d=Yl(Ha("Inject",function(n){return{token:n}}),-1),Ua=Yl(Ha("Optional"),8),$l=Yl(Ha("SkipSelf"),4),Tg=function(){function n(a){k(this,n),this.changingThisBreaksApplicationSecurity=a}return j(n,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see https://g.co/ng/security#xss)"}}]),n}();function Zi(n){return n instanceof Tg?n.changingThisBreaksApplicationSecurity:n}var bC=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,rx=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Ir=function(){return(Ir=Ir||{})[Ir.NONE=0]="NONE",Ir[Ir.HTML=1]="HTML",Ir[Ir.STYLE=2]="STYLE",Ir[Ir.SCRIPT=3]="SCRIPT",Ir[Ir.URL=4]="URL",Ir[Ir.RESOURCE_URL=5]="RESOURCE_URL",Ir}();function Si(n){var a=function(){var n=qe();return n&&n[12]}();return a?a.sanitize(Ir.URL,n)||"":function(n,a){var t=function(n){return n instanceof Tg&&n.getTypeName()||null}(n);if(null!=t&&t!==a){if("ResourceURL"===t&&"URL"===a)return!0;throw new Error("Required a safe ".concat(a,", got a ").concat(t," (see https://g.co/ng/security#xss)"))}return t===a}(n,"URL")?Zi(n):function(n){return(n=String(n)).match(bC)||n.match(rx)?n:"unsafe:"+n}(rn(n))}var LC="__ngContext__";function Tr(n,a){n[LC]=a}function Ed(n){var a=function(n){return n[LC]||null}(n);return a?Array.isArray(a)?a:a.lView:null}function Ig(n){return n.ngOriginalError}function _x(n){for(var a=arguments.length,t=new Array(a>1?a-1:0),r=1;r<a;r++)t[r-1]=arguments[r];n.error.apply(n,t)}var Ql=function(){function n(){k(this,n),this._console=console}return j(n,[{key:"handleError",value:function(t){var r=this._findOriginalError(t),o=function(n){return n&&n.ngErrorLogger||_x}(t);o(this._console,"ERROR",t),r&&o(this._console,"ORIGINAL ERROR",r)}},{key:"_findOriginalError",value:function(t){for(var r=t&&Ig(t);r&&Ig(r);)r=Ig(r);return r||null}}]),n}(),BC=function(){return("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(rr)}();function da(n){return n instanceof Function?n():n}var Ao=function(){return(Ao=Ao||{})[Ao.Important=1]="Important",Ao[Ao.DashCase=2]="DashCase",Ao}();function Mp(n,a){return undefined(n,a)}function Yu(n){var a=n[3];return zo(a)?a[3]:a}function kg(n){return VC(n[13])}function Op(n){return VC(n[4])}function VC(n){for(;null!==n&&!zo(n);)n=n[4];return n}function Ei(n,a,t,r,o){if(null!=r){var u,f=!1;zo(r)?u=r:Fa(r)&&(f=!0,r=r[0]);var p=Vr(r);0===n&&null!==t?null==o?ZC(a,t,p):su(a,t,p,o||null,!0):1===n&&null!==t?su(a,t,p,o||null,!0):2===n?function(n,a,t){var r=Ip(n,a);r&&function(n,a,t,r){br(n)?n.removeChild(a,t,r):a.removeChild(t)}(n,r,a,t)}(a,p,f):3===n&&a.destroyNode(p),null!=u&&function(n,a,t,r,o){var u=t[7];u!==Vr(t)&&Ei(a,n,r,u,o);for(var p=10;p<t.length;p++){var v=t[p];Td(v[1],v,n,a,r,u)}}(a,n,u,t,o)}}function Pp(n,a){return br(n)?n.createText(a):n.createTextNode(a)}function Qi(n,a,t){return br(n)?n.createElement(a,t):null===t?n.createElement(a):n.createElementNS(t,a)}function YC(n,a){var t=n[9],r=t.indexOf(a),o=a[3];1024&a[2]&&(a[2]&=-1025,rg(o,-1)),t.splice(r,1)}function Gg(n,a){if(!(n.length<=10)){var t=10+a,r=n[t];if(r){var o=r[17];null!==o&&o!==n&&YC(o,r),a>0&&(n[t-1][4]=r[4]);var u=fp(n,10+a);!function(n,a){Td(n,a,a[11],2,null,null),a[0]=null,a[6]=null}(r[1],r);var f=u[19];null!==f&&f.detachView(u[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function $u(n,a){if(!(256&a[2])){var t=a[11];br(t)&&t.destroyNode&&Td(n,a,t,3,null,null),function(n){var a=n[13];if(!a)return Bg(n[1],n);for(;a;){var t=null;if(Fa(a))t=a[13];else{var r=a[10];r&&(t=r)}if(!t){for(;a&&!a[4]&&a!==n;)Fa(a)&&Bg(a[1],a),a=a[3];null===a&&(a=n),Fa(a)&&Bg(a[1],a),t=a&&a[4]}a=t}}(a)}}function Bg(n,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function(n,a){var t;if(null!=n&&null!=(t=n.destroyHooks))for(var r=0;r<t.length;r+=2){var o=a[t[r]];if(!(o instanceof od)){var u=t[r+1];if(Array.isArray(u))for(var f=0;f<u.length;f+=2){var p=o[u[f]],v=u[f+1];try{v.call(p)}finally{}}else try{u.call(o)}finally{}}}}(n,a),function(n,a){var t=n.cleanup,r=a[7],o=-1;if(null!==t)for(var u=0;u<t.length-1;u+=2)if("string"==typeof t[u]){var f=t[u+1],p="function"==typeof f?f(a):Vr(a[f]),v=r[o=t[u+2]],g=t[u+3];"boolean"==typeof g?p.removeEventListener(t[u],v,g):g>=0?r[o=g]():r[o=-g].unsubscribe(),u+=2}else{var y=r[o=t[u+1]];t[u].call(y)}if(null!==r){for(var _=o+1;_<r.length;_++)(0,r[_])();a[7]=null}}(n,a),1===a[1].type&&br(a[11])&&a[11].destroy();var t=a[17];if(null!==t&&zo(a[3])){t!==a[3]&&YC(t,a);var r=a[19];null!==r&&r.detachView(n)}}}function XC(n,a,t){return function(n,a,t){for(var r=a;null!==r&&40&r.type;)r=(a=r).parent;if(null===r)return t[0];if(2&r.flags){var o=n.data[r.directiveStart].encapsulation;if(o===Oa.None||o===Oa.Emulated)return null}return qo(r,t)}(n,a.parent,t)}function su(n,a,t,r,o){br(n)?n.insertBefore(a,t,r,o):a.insertBefore(t,r,o)}function ZC(n,a,t){br(n)?n.appendChild(a,t):a.appendChild(t)}function QC(n,a,t,r,o){null!==r?su(n,a,t,r,o):ZC(n,a,t)}function Ip(n,a){return br(n)?n.parentNode(a):a.parentNode}var nw=function(n,a,t){return 40&n.type?qo(n,t):null};function Fp(n,a,t,r){var o=XC(n,r,a),u=a[11],p=function(n,a,t){return nw(n,a,t)}(r.parent||a[6],r,a);if(null!=o)if(Array.isArray(t))for(var v=0;v<t.length;v++)QC(u,o,t[v],p,!1);else QC(u,o,t,p,!1)}function Np(n,a){if(null!==a){var t=a.type;if(3&t)return qo(a,n);if(4&t)return nc(-1,n[a.index]);if(8&t){var r=a.child;if(null!==r)return Np(n,r);var o=n[a.index];return zo(o)?nc(-1,o):Vr(o)}if(32&t)return Mp(a,n)()||Vr(n[a.index]);var p=iw(n,a);return null!==p?Array.isArray(p)?p[0]:Np(Yu(n[16]),p):Np(n,a.next)}return null}function iw(n,a){return null!==a?n[16][6].projection[a.projection]:null}function nc(n,a){var t=10+n+1;if(t<a.length){var r=a[t],o=r[1].firstChild;if(null!==o)return Np(r,o)}return a[7]}function Es(n,a,t,r,o,u,f){for(;null!=t;){var p=r[t.index],v=t.type;if(f&&0===a&&(p&&Tr(Vr(p),r),t.flags|=4),64!=(64&t.flags))if(8&v)Es(n,a,t.child,r,o,u,!1),Ei(a,n,o,p,u);else if(32&v){for(var g=Mp(t,r),y=void 0;y=g();)Ei(a,n,o,y,u);Ei(a,n,o,p,u)}else 16&v?Rn(n,a,r,t,o,u):Ei(a,n,o,p,u);t=f?t.projectionNext:t.next}}function Td(n,a,t,r,o,u){Es(t,r,n.firstChild,a,o,u,!1)}function Rn(n,a,t,r,o,u){var f=t[16],v=f[6].projection[r.projection];if(Array.isArray(v))for(var g=0;g<v.length;g++)Ei(a,n,o,v[g],u);else Es(n,a,v,f[3],o,u,!0)}function Hg(n,a,t){br(n)?n.setAttribute(a,"style",t):a.style.cssText=t}function Vg(n,a,t){br(n)?""===t?n.removeAttribute(a,"class"):n.setAttribute(a,"class",t):a.className=t}function Wg(n,a,t){for(var r=n.length;;){var o=n.indexOf(a,t);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){var u=a.length;if(o+u===r||n.charCodeAt(o+u)<=32)return o}t=o+1}}var Ug="ng-template";function uw(n,a,t){for(var r=0;r<n.length;){var o=n[r++];if(t&&"class"===o){if(-1!==Wg((o=n[r]).toLowerCase(),a,0))return!0}else if(1===o){for(;r<n.length&&"string"==typeof(o=n[r++]);)if(o.toLowerCase()===a)return!0;return!1}}return!1}function lw(n){return 4===n.type&&n.value!==Ug}function pa(n,a,t){return a===(4!==n.type||t?n.value:Ug)}function Px(n,a,t){for(var r=4,o=n.attrs||[],u=function(n){for(var a=0;a<n.length;a++)if(Q_(n[a]))return a;return n.length}(o),f=!1,p=0;p<a.length;p++){var v=a[p];if("number"!=typeof v){if(!f)if(4&r){if(r=2|1&r,""!==v&&!pa(n,v,t)||""===v&&1===a.length){if(Wi(r))return!1;f=!0}}else{var g=8&r?v:a[++p];if(8&r&&null!==n.attrs){if(!uw(n.attrs,g,t)){if(Wi(r))return!1;f=!0}continue}var _=Ix(8&r?"class":v,o,lw(n),t);if(-1===_){if(Wi(r))return!1;f=!0;continue}if(""!==g){var C;C=_>u?"":o[_+1].toLowerCase();var S=8&r?C:null;if(S&&-1!==Wg(S,g,0)||2&r&&g!==C){if(Wi(r))return!1;f=!0}}}}else{if(!f&&!Wi(r)&&!Wi(v))return!1;if(f&&Wi(v))continue;f=!1,r=v|1&r}}return Wi(r)||f}function Wi(n){return 0==(1&n)}function Ix(n,a,t,r){if(null===a)return-1;var o=0;if(r||!t){for(var u=!1;o<a.length;){var f=a[o];if(f===n)return o;if(3===f||6===f)u=!0;else{if(1===f||2===f){for(var p=a[++o];"string"==typeof p;)p=a[++o];continue}if(4===f)break;if(0===f){o+=4;continue}}o+=u?1:2}return-1}return function(n,a){var t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){var r=n[t];if("number"==typeof r)return-1;if(r===a)return t;t++}return-1}(a,n)}function rc(n,a){for(var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<a.length;r++)if(Px(n,a[r],t))return!0;return!1}function zg(n,a){return n?":not("+a.trim()+")":a}function Nx(n){for(var a=n[0],t=1,r=2,o="",u=!1;t<n.length;){var f=n[t];if("string"==typeof f)if(2&r){var p=n[++t];o+="["+f+(p.length>0?'="'+p+'"':"")+"]"}else 8&r?o+="."+f:4&r&&(o+=" "+f);else""!==o&&!Wi(f)&&(a+=zg(u,o),o=""),r=f,u=u||!Wi(r);t++}return""!==o&&(a+=zg(u,o)),a}var on={};function ae(n){jg(kn(),qe(),Xi()+n,Ko())}function jg(n,a,t,r){if(!r)if(3==(3&a[2])){var u=n.preOrderCheckHooks;null!==u&&rp(a,u,t)}else{var f=n.preOrderHooks;null!==f&&Gl(a,f,0,t)}xr(t)}function ic(n,a){return n<<17|a<<2}function Zo(n){return n>>17&32767}function Gp(n){return 2|n}function xs(n){return(131068&n)>>2}function Bp(n,a){return-131069&n|a<<2}function Kg(n){return 1|n}function Ew(n,a){var t=n.contentQueries;if(null!==t)for(var r=0;r<t.length;r+=2){var u=t[r+1];if(-1!==u){var f=n.data[u];ep(t[r]),f.contentQueries(2,a[u],u)}}}function Md(n,a,t,r,o,u,f,p,v,g){var y=a.blueprint.slice();return y[0]=o,y[2]=140|r,$f(y),y[3]=y[15]=n,y[8]=t,y[10]=f||n&&n[10],y[11]=p||n&&n[11],y[12]=v||n&&n[12]||null,y[9]=g||n&&n[9]||null,y[6]=u,y[16]=2==a.type?n[16]:y,y}function Rs(n,a,t,r,o){var u=n.data[a];if(null===u)u=function(n,a,t,r,o){var u=Xf(),f=$e(),v=n.data[a]=function(n,a,t,r,o,u){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:u,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,f?u:u&&u.parent,t,a,r,o);return null===n.firstChild&&(n.firstChild=v),null!==u&&(f?null==u.child&&null!==v.parent&&(u.child=v):null===u.next&&(u.next=v)),v}(n,a,t,r,o),zt.lFrame.inI18n&&(u.flags|=64);else if(64&u.type){u.type=t,u.value=r,u.attrs=o;var f=function(){var n=zt.lFrame,a=n.currentTNode;return n.isParent?a:a.parent}();u.injectorIndex=null===f?-1:f.injectorIndex}return ka(u,!0),u}function oc(n,a,t,r){if(0===t)return-1;for(var o=a.length,u=0;u<t;u++)a.push(r),n.blueprint.push(r),n.data.push(null);return o}function Ts(n,a,t){kl(a);try{var r=n.viewQuery;null!==r&&gm(1,r,t);var o=n.template;null!==o&&Tw(n,a,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Ew(n,a),n.staticViewQueries&&gm(2,n.viewQuery,t);var u=n.components;null!==u&&function(n,a){for(var t=0;t<a.length;t++)Hw(n,a[t])}(a,u)}catch(f){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),f}finally{a[2]&=-5,Ba()}}function ac(n,a,t,r){var o=a[2];if(256!=(256&o)){kl(a);var u=Ko();try{$f(a),function(n){zt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Tw(n,a,t,2,r);var f=3==(3&o);if(!u)if(f){var p=n.preOrderCheckHooks;null!==p&&rp(a,p,null)}else{var v=n.preOrderHooks;null!==v&&Gl(a,v,0,null),lg(a,0)}if(function(n){for(var a=kg(n);null!==a;a=Op(a))if(a[2])for(var t=a[9],r=0;r<t.length;r++){var o=t[r];0==(1024&o[2])&&rg(o[3],1),o[2]|=1024}}(a),function(n){for(var a=kg(n);null!==a;a=Op(a))for(var t=10;t<a.length;t++){var r=a[t],o=r[1];td(r)&&ac(o,r,o.template,r[8])}}(a),null!==n.contentQueries&&Ew(n,a),!u)if(f){var g=n.contentCheckHooks;null!==g&&rp(a,g)}else{var y=n.contentHooks;null!==y&&Gl(a,y,1),lg(a,1)}!function(n,a){var t=n.hostBindingOpCodes;if(null!==t)try{for(var r=0;r<t.length;r++){var o=t[r];if(o<0)xr(~o);else{var u=o,f=t[++r],p=t[++r];gb(f,u),p(2,a[u])}}}finally{xr(-1)}}(n,a);var _=n.components;null!==_&&function(n,a){for(var t=0;t<a.length;t++)Qx(n,a[t])}(a,_);var C=n.viewQuery;if(null!==C&&gm(2,C,r),!u)if(f){var S=n.viewCheckHooks;null!==S&&rp(a,S)}else{var x=n.viewHooks;null!==x&&Gl(a,x,2),lg(a,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),u||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,rg(a[3],-1))}finally{Ba()}}}function Rw(n,a,t,r){var o=a[10],u=!Ko(),f=W_(a);try{u&&!f&&o.begin&&o.begin(),f&&Ts(n,a,r),ac(n,a,t,r)}finally{u&&!f&&o.end&&o.end()}}function Tw(n,a,t,r,o){var u=Xi(),f=2&r;try{xr(-1),f&&a.length>20&&jg(n,a,20,Ko()),t(r,o)}finally{xr(u)}}function im(n,a,t){if(Xv(a))for(var o=a.directiveEnd,u=a.directiveStart;u<o;u++){var f=n.data[u];f.contentQueries&&f.contentQueries(1,t[u],u)}}function om(n,a,t){!ig()||(function(n,a,t,r){var o=t.directiveStart,u=t.directiveEnd;n.firstCreatePass||ld(t,a),Tr(r,a);for(var f=t.initialInputs,p=o;p<u;p++){var v=n.data[p],g=ho(v);g&&kw(a,t,v);var y=pd(a,n,p,t);Tr(y,a),null!==f&&sc(0,p-o,y,v,0,f),g&&(xo(t.index,a)[8]=y)}}(n,a,t,qo(t,a)),128==(128&t.flags)&&function(n,a,t){var r=t.directiveStart,o=t.directiveEnd,f=t.index,p=zt.lFrame.currentDirectiveIndex;try{xr(f);for(var v=r;v<o;v++){var g=n.data[v],y=a[v];Qf(v),(null!==g.hostBindings||0!==g.hostVars||null!==g.hostAttrs)&&dm(g,y)}}finally{xr(-1),Qf(p)}}(n,a,t))}function am(n,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qo,r=a.localNames;if(null!==r)for(var o=a.index+1,u=0;u<r.length;u+=2){var f=r[u+1],p=-1===f?t(a,n):n[f];n[o++]=p}}function Kp(n){var a=n.tView;return null===a||a.incompleteFirstPass?n.tView=Yp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):a}function Yp(n,a,t,r,o,u,f,p,v,g){var y=20+r,_=y+o,C=function(n,a){for(var t=[],r=0;r<a;r++)t.push(r<n?null:on);return t}(y,_),S="function"==typeof g?g():g;return C[1]={type:n,blueprint:C,template:t,queries:null,viewQuery:p,declTNode:a,data:C.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof u?u():u,pipeRegistry:"function"==typeof f?f():f,firstChild:null,schemas:v,consts:S,incompleteFirstPass:!1}}function $p(n,a,t,r){var o=mm(a);null===t?o.push(r):(o.push(t),n.firstCreatePass&&Ww(n).push(r,o.length-1))}function Mw(n,a,t){for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(a,o):t[r]=[a,o]}return t}function go(n,a,t,r,o,u,f,p){var y,v=qo(a,t),g=a.inputs;!p&&null!=g&&(y=g[r])?(Uw(n,t,y,r,o),Na(a)&&function(n,a){var t=xo(a,n);16&t[2]||(t[2]|=64)}(t,a.index)):3&a.type&&(r=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),o=null!=f?f(o,a.value||"",r):o,br(u)?u.setProperty(v,r,o):dg(r)||(v.setProperty?v.setProperty(r,o):v[r]=o))}function cm(n,a,t,r){var o=!1;if(ig()){var u=function(n,a,t){var r=n.directiveRegistry,o=null;if(r)for(var u=0;u<r.length;u++){var f=r[u];rc(t,f.selectors,!1)&&(o||(o=[]),dd(ld(t,a),n,f.type),ho(f)?(Lw(n,t),o.unshift(f)):o.push(f))}return o}(n,a,t),f=null===r?null:{"":-1};if(null!==u){o=!0,Fw(t,n.data.length,u.length);for(var p=0;p<u.length;p++){var v=u[p];v.providersResolver&&v.providersResolver(v)}for(var g=!1,y=!1,_=oc(n,a,u.length,null),C=0;C<u.length;C++){var S=u[C];t.mergedAttrs=sd(t.mergedAttrs,S.hostAttrs),Nw(n,t,a,_,S),Zx(_,S,f),null!==S.contentQueries&&(t.flags|=8),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(t.flags|=128);var x=S.type.prototype;!g&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),g=!0),!y&&(x.ngOnChanges||x.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),y=!0),_++}!function(n,a){for(var r=a.directiveEnd,o=n.data,u=a.attrs,f=[],p=null,v=null,g=a.directiveStart;g<r;g++){var y=o[g],_=y.inputs,C=null===u||lw(a)?null:Xu(_,u);f.push(C),p=Mw(_,g,p),v=Mw(y.outputs,g,v)}null!==p&&(p.hasOwnProperty("class")&&(a.flags|=16),p.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=f,a.inputs=p,a.outputs=v}(n,t)}f&&function(n,a,t){if(a)for(var r=n.localNames=[],o=0;o<a.length;o+=2){var u=t[a[o+1]];if(null==u)throw new ki("301","Export of name '".concat(a[o+1],"' not found!"));r.push(a[o],u)}}(t,r,f)}return t.mergedAttrs=sd(t.mergedAttrs,t.attrs),o}function Id(n,a,t,r,o,u){var f=u.hostBindings;if(f){var p=n.hostBindingOpCodes;null===p&&(p=n.hostBindingOpCodes=[]);var v=~a.index;(function(n){for(var a=n.length;a>0;){var t=n[--a];if("number"==typeof t&&t<0)return t}return 0})(p)!=v&&p.push(v),p.push(r,o,f)}}function dm(n,a){null!==n.hostBindings&&n.hostBindings(1,a)}function Lw(n,a){a.flags|=2,(n.components||(n.components=[])).push(a.index)}function Zx(n,a,t){if(t){if(a.exportAs)for(var r=0;r<a.exportAs.length;r++)t[a.exportAs[r]]=n;ho(a)&&(t[""]=n)}}function Fw(n,a,t){n.flags|=1,n.directiveStart=a,n.directiveEnd=a+t,n.providerIndexes=a}function Nw(n,a,t,r,o){n.data[r]=o;var u=o.factory||(o.factory=nu(o.type)),f=new od(u,ho(o),null);n.blueprint[r]=f,t[r]=f,Id(n,a,0,r,oc(n,t,o.hostVars,on),o)}function kw(n,a,t){var r=qo(a,n),o=Kp(t),u=n[10],f=Ld(n,Md(n,o,null,t.onPush?64:16,r,a,u,u.createRenderer(r,t),null,null));n[a.index]=f}function ha(n,a,t,r,o,u){var f=qo(n,a);!function(n,a,t,r,o,u,f){if(null==u)br(n)?n.removeAttribute(a,o,t):a.removeAttribute(o);else{var p=null==f?rn(u):f(u,r||"",o);br(n)?n.setAttribute(a,o,p,t):t?a.setAttributeNS(t,o,p):a.setAttribute(o,p)}}(a[11],f,u,n.value,t,r,o)}function sc(n,a,t,r,o,u){var f=u[a];if(null!==f)for(var p=r.setInput,v=0;v<f.length;){var g=f[v++],y=f[v++],_=f[v++];null!==p?r.setInput(t,_,g,y):t[y]=_}}function Xu(n,a){for(var t=null,r=0;r<a.length;){var o=a[r];if(0!==o)if(5!==o){if("number"==typeof o)break;n.hasOwnProperty(o)&&(null===t&&(t=[]),t.push(o,n[o],a[r+1])),r+=2}else r+=2;else r+=4}return t}function Gw(n,a,t,r){return new Array(n,!0,!1,a,null,0,r,t,null,null)}function Qx(n,a){var t=xo(a,n);if(td(t)){var r=t[1];80&t[2]?ac(r,t,r.template,t[8]):t[5]>0&&Xp(t)}}function Xp(n){for(var a=kg(n);null!==a;a=Op(a))for(var t=10;t<a.length;t++){var r=a[t];if(1024&r[2]){var o=r[1];ac(o,r,o.template,r[8])}else r[5]>0&&Xp(r)}var f=n[1].components;if(null!==f)for(var p=0;p<f.length;p++){var v=xo(f[p],n);td(v)&&v[5]>0&&Xp(v)}}function Hw(n,a){var t=xo(a,n),r=t[1];(function(n,a){for(var t=a.length;t<n.blueprint.length;t++)a.push(n.blueprint[t])})(r,t),Ts(r,t,t[8])}function Ld(n,a){return n[13]?n[14][4]=a:n[13]=a,n[14]=a,a}function pm(n){for(;n;){n[2]|=64;var a=Yu(n);if(XE(n)&&!a)return n;n=a}return null}function hm(n,a,t){var r=a[10];r.begin&&r.begin();try{ac(n,a,n.template,t)}catch(o){throw ym(a,o),o}finally{r.end&&r.end()}}function kd(n){!function(n){for(var a=0;a<n.components.length;a++){var t=n.components[a],r=Ed(t),o=r[1];Rw(o,r,o.template,t)}}(n[8])}function gm(n,a,t){ep(0),a(n,t)}var nR=function(){return Promise.resolve(null)}();function mm(n){return n[7]||(n[7]=[])}function Ww(n){return n.cleanup||(n.cleanup=[])}function ym(n,a){var t=n[9],r=t?t.get(Ql,null):null;r&&r.handleError(a)}function Uw(n,a,t,r,o){for(var u=0;u<t.length;){var f=t[u++],p=t[u++],v=a[f],g=n.data[f];null!==g.setInput?g.setInput(v,o,r,p):v[p]=o}}function bi(n,a,t){var r=pr(a,n);!function(n,a,t){br(n)?n.setValue(a,t):a.textContent=t}(n[11],r,t)}function Jp(n,a,t){var r=t?n.styles:null,o=t?n.classes:null,u=0;if(null!==a)for(var f=0;f<a.length;f++){var p=a[f];"number"==typeof p?u=p:1==u?o=Br(o,p):2==u&&(r=Br(r,p+": "+a[++f]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}var Zp=new On("INJECTOR",-1),jw=function(){function n(){k(this,n)}return j(n,[{key:"get",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vu;if(r===Vu){var o=new Error("NullInjectorError: No provider for ".concat(Bn(t),"!"));throw o.name="NullInjectorError",o}return r}}]),n}(),Qp=new On("Set Injector scope."),Bd={},Hd={},eh=void 0;function qw(){return void 0===eh&&(eh=new jw),eh}function _m(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,o=Kw(n,a,t,r);return o._resolveInjectorDefTypes(),o}function Kw(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new th(n,t,a||qw(),r)}var th=function(){function n(a,t,r){var o=this,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;k(this,n),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var f=[];t&&Va(t,function(v){return o.processProvider(v,a,t)}),Va([a],function(v){return o.processInjectorType(v,[],f)}),this.records.set(Zp,uc(void 0,this));var p=this.records.get(Qp);this.scope=null!=p?p.value:null,this.source=u||("object"==typeof a?null:Bn(a))}return j(n,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(t){return t.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vu,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qt.Default;this.assertNotDestroyed();var u=Cg(this),f=hs(void 0);try{if(!(o&Qt.SkipSelf)){var p=this.records.get(t);if(void 0===p){var v=fu(t)&&qc(t);p=v&&this.injectableDefInScope(v)?uc(nh(t),Bd):null,this.records.set(t,p)}if(null!=p)return this.hydrate(t,p)}var g=o&Qt.Self?qw():this.parent;return g.get(t,r=o&Qt.Optional&&r===Vu?null:r)}catch(_){if("NullInjectorError"===_.name){var y=_[hp]=_[hp]||[];if(y.unshift(Bn(t)),u)throw _;return vC(_,t,"R3InjectorError",this.source)}throw _}finally{hs(f),Cg(u)}}},{key:"_resolveInjectorDefTypes",value:function(){var t=this;this.injectorDefTypes.forEach(function(r){return t.get(r)})}},{key:"toString",value:function(){var t=[];return this.records.forEach(function(o,u){return t.push(Bn(u))}),"R3Injector[".concat(t.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(t,r,o){var u=this;if(!(t=fn(t)))return!1;var f=Wf(t),p=null==f&&t.ngModule||void 0,v=void 0===p?t:p,_=-1!==o.indexOf(v);if(void 0!==p&&(f=Wf(p)),null==f)return!1;if(null!=f.imports&&!_){var C;o.push(v);try{Va(f.imports,function(A){u.processInjectorType(A,r,o)&&(void 0===C&&(C=[]),C.push(A))})}finally{}if(void 0!==C)for(var S=function(M){var O=C[M],I=O.ngModule,B=O.providers;Va(B,function(z){return u.processProvider(z,I,B||ir)})},x=0;x<C.length;x++)S(x)}this.injectorDefTypes.add(v);var b=nu(v)||function(){return new v};this.records.set(v,uc(b,Bd));var E=f.providers;if(null!=E&&!_){var D=t;Va(E,function(A){return u.processProvider(A,D,E)})}return void 0!==p&&void 0!==t.providers}},{key:"processProvider",value:function(t,r,o){var u=Ds(t=fn(t))?t:fn(t&&t.provide),f=function(n,a,t){return lc(n)?uc(void 0,n.useValue):uc(Cm(n),Bd)}(t);if(Ds(t)||!0!==t.multi)this.records.get(u);else{var p=this.records.get(u);p||((p=uc(void 0,Bd,!0)).factory=function(){return wg(p.multi)},this.records.set(u,p)),u=t,p.multi.push(t)}this.records.set(u,f)}},{key:"hydrate",value:function(t,r){return r.value===Bd&&(r.value=Hd,r.value=r.factory()),"object"==typeof r.value&&r.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(r.value)&&this.onDestroy.add(r.value),r.value}},{key:"injectableDefInScope",value:function(t){if(!t.providedIn)return!1;var r=fn(t.providedIn);return"string"==typeof r?"any"===r||r===this.scope:this.injectorDefTypes.has(r)}}]),n}();function nh(n){var a=qc(n),t=null!==a?a.factory:nu(n);if(null!==t)return t;if(n instanceof On)throw new Error("Token ".concat(Bn(n)," is missing a \u0275prov definition."));if(n instanceof Function)return function(n){var a=n.length;if(a>0){var t=function(n,a){for(var t=[],r=0;r<n;r++)t.push(a);return t}(a,"?");throw new Error("Can't resolve all parameters for ".concat(Bn(n),": (").concat(t.join(", "),")."))}var r=function(n){var a=n&&(n[qi]||n[Kc]);if(a){var t=function(n){if(n.hasOwnProperty("name"))return n.name;var a=(""+n).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(n);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(t,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in a future version of Angular. Please add @Injectable() to the "'.concat(t,'" class.')),a}return null}(n);return null!==r?function(){return r.factory(n)}:function(){return new n}}(n);throw new Error("unreachable")}function Cm(n,a,t){var r=void 0;if(Ds(n)){var o=fn(n);return nu(o)||nh(o)}if(lc(n))r=function(){return fn(n.useValue)};else if(function(n){return!(!n||!n.useFactory)}(n))r=function(){return n.useFactory.apply(n,An(wg(n.deps||[])))};else if(function(n){return!(!n||!n.useExisting)}(n))r=function(){return Mt(fn(n.useExisting))};else{var u=fn(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return nu(u)||nh(u);r=function(){return vi(u,An(wg(n.deps)))}}return r}function uc(n,a){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:n,value:a,multi:t?[]:void 0}}function lc(n){return null!==n&&"object"==typeof n&&pC in n}function Ds(n){return"function"==typeof n}function fu(n){return"function"==typeof n||"object"==typeof n&&n instanceof On}var Ui=function(){var n=function(){function a(){k(this,a)}return j(a,null,[{key:"create",value:function(r,o){var u;if(Array.isArray(r))return _m({name:""},o,r,"");var f=null!==(u=r.name)&&void 0!==u?u:"";return _m({name:f},r.parent,r.providers,f)}}]),a}();return n.THROW_IF_NOT_FOUND=Vu,n.NULL=new jw,n.\u0275prov=un({token:n,providedIn:"any",factory:function(){return Mt(Zp)}}),n.__NG_ELEMENT_ID__=-1,n}();function hR(n,a){id(Ed(n)[1],Wr())}var dc=null;function ga(){if(!dc){var n=rr.Symbol;if(n&&n.iterator)dc=n.iterator;else for(var a=Object.getOwnPropertyNames(Map.prototype),t=0;t<a.length;++t){var r=a[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(dc=r)}}return dc}function fc(n){return!!Tm(n)&&(Array.isArray(n)||!(n instanceof Map)&&ga()in n)}function Tm(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function qa(n,a,t){return n[a]=t}function xi(n,a,t){return!Object.is(n[a],t)&&(n[a]=t,!0)}function Ms(n,a,t,r){var o=xi(n,a,t);return xi(n,a+1,r)||o}function ta(n,a,t,r,o,u){var f=Ms(n,a,t,r);return Ms(n,a+2,o,u)||f}function Dm(n,a,t,r){var o=qe();return xi(o,Nl(),a)&&(kn(),ha(Rr(),o,n,a,t,r)),Dm}function pc(n,a,t,r){return xi(n,Nl(),t)?a+rn(t)+r:on}function vc(n,a,t,r,o,u,f,p){var g=function(n,a,t,r,o){var u=Ms(n,a,t,r);return xi(n,a+2,o)||u}(n,Ro(),t,o,f);return la(3),g?a+rn(t)+r+rn(o)+u+rn(f)+p:on}function it(n,a,t,r,o,u,f,p){var v=qe(),g=kn(),y=n+20,_=g.firstCreatePass?function(n,a,t,r,o,u,f,p,v){var g=a.consts,y=Rs(a,n,4,f||null,Qr(g,p));cm(a,t,y,Qr(g,v)),id(a,y);var _=y.tViews=Yp(2,y,r,o,u,a.directiveRegistry,a.pipeRegistry,null,a.schemas,g);return null!==a.queries&&(a.queries.template(a,y),_.queries=a.queries.embeddedTView(y)),y}(y,g,v,a,t,r,o,u,f):g.data[y];ka(_,!1);var C=v[11].createComment("");Fp(g,v,C,_),Tr(C,v),Ld(v,v[y]=Gw(C,v,C,_)),Ll(_)&&om(g,v,_),null!=f&&am(v,_,p)}function lt(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt.Default,t=qe();if(null===t)return Mt(n,a);var r=Wr();return iC(r,t,fn(n),a)}function Nm(){throw new Error("invalid")}function d(n,a,t){var r=qe();return xi(r,Nl(),a)&&go(kn(),Rr(),r,n,a,r[11],t,!1),d}function i(n,a,t,r,o){var f=o?"class":"style";Uw(n,t,a.inputs[f],f,r)}function s(n,a,t,r){var o=qe(),u=kn(),f=20+n,p=o[11],v=o[f]=Qi(p,a,zt.lFrame.currentNamespace),g=u.firstCreatePass?function(n,a,t,r,o,u,f){var p=a.consts,g=Rs(a,n,2,o,Qr(p,u));return cm(a,t,g,Qr(p,f)),null!==g.attrs&&Jp(g,g.attrs,!1),null!==g.mergedAttrs&&Jp(g,g.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,g),g}(f,u,o,0,a,t,r):u.data[f];ka(g,!0);var y=g.mergedAttrs;null!==y&&ap(p,v,y);var _=g.classes;null!==_&&Vg(p,v,_);var C=g.styles;null!==C&&Hg(p,v,C),64!=(64&g.flags)&&Fp(u,o,v,g),0===zt.lFrame.elementDepthCount&&Tr(v,o),zt.lFrame.elementDepthCount++,Ll(g)&&(om(u,o,g),im(u,g,o)),null!==r&&am(o,g)}function l(){var n=Wr();$e()?og():ka(n=n.parent,!1);var a=n;zt.lFrame.elementDepthCount--;var t=kn();t.firstCreatePass&&(id(t,n),Xv(n)&&t.queries.elementEnd(n)),null!=a.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(a)&&i(t,a,qe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(a)&&i(t,a,qe(),a.stylesWithoutHost,!1)}function c(n,a,t,r){s(n,a,t,r),l()}function w(n,a,t){var r=qe(),o=kn(),u=n+20,f=o.firstCreatePass?function(n,a,t,r,o){var u=a.consts,f=Qr(u,r),p=Rs(a,n,8,"ng-container",f);return null!==f&&Jp(p,f,!0),cm(a,t,p,Qr(u,o)),null!==a.queries&&a.queries.elementStart(a,p),p}(u,o,r,a,t):o.data[u];ka(f,!0);var p=r[u]=r[11].createComment("");Fp(o,r,p,f),Tr(p,r),Ll(f)&&(om(o,r,f),im(o,f,r)),null!=t&&am(r,f)}function R(){var n=Wr(),a=kn();$e()?og():ka(n=n.parent,!1),a.firstCreatePass&&(id(a,n),Xv(n)&&a.queries.elementEnd(n))}function L(){return qe()}function U(n){return!!n&&"function"==typeof n.then}function K(n){return!!n&&"function"==typeof n.subscribe}var Q=K;function oe(n,a,t,r){var o=qe(),u=kn(),f=Wr();return function(n,a,t,r,o,u,f,p){var v=Ll(r),y=n.firstCreatePass&&Ww(n),_=a[8],C=mm(a),S=!0;if(3&r.type||p){var x=qo(r,a),b=p?p(x):x,E=C.length,D=p?function(ee){return p(Vr(ee[r.index]))}:r.index;if(br(t)){var A=null;if(!p&&v&&(A=function(n,a,t,r){var o=n.cleanup;if(null!=o)for(var u=0;u<o.length-1;u+=2){var f=o[u];if(f===t&&o[u+1]===r){var p=a[7],v=o[u+2];return p.length>v?p[v]:null}"string"==typeof f&&(u+=2)}return null}(n,a,o,r.index)),null!==A)(A.__ngLastListenerFn__||A).__ngNextListenerFn__=u,A.__ngLastListenerFn__=u,S=!1;else{u=Ze(r,a,_,u,!1);var O=t.listen(b,o,u);C.push(u,O),y&&y.push(o,D,E,E+1)}}else u=Ze(r,a,_,u,!0),b.addEventListener(o,u,f),C.push(u),y&&y.push(o,D,E,f)}else u=Ze(r,a,_,u,!1);var B,I=r.outputs;if(S&&null!==I&&(B=I[o])){var z=B.length;if(z)for(var P=0;P<z;P+=2){var ce=a[B[P]][B[P+1]].subscribe(u),G=C.length;C.push(u,ce),y&&y.push(o,r.index,G,-(G+1))}}}(u,o,o[11],f,n,a,!!t,r),oe}function Pe(n,a,t,r){try{return!1!==t(r)}catch(o){return ym(n,o),!1}}function Ze(n,a,t,r,o){return function u(f){if(f===Function)return r;var p=2&n.flags?xo(n.index,a):a;0==(32&a[2])&&pm(p);for(var v=Pe(a,0,r,f),g=u.__ngNextListenerFn__;g;)v=Pe(a,0,g,f)&&v,g=g.__ngNextListenerFn__;return o&&!1===v&&(f.preventDefault(),f.returnValue=!1),v}}function Re(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Ci(n)}function er(n,a,t,r,o){var u=qe(),f=pc(u,a,t,r);return f!==on&&go(kn(),Rr(),u,n,f,u[11],o,!1),er}function tO(n,a,t,r,o){for(var u=n[t+1],f=null===a,p=r?Zo(u):xs(u),v=!1;0!==p&&(!1===v||f);){var y=n[p+1];$k(n[p],a)&&(v=!0,n[p+1]=r?Kg(y):Gp(y)),p=r?Zo(y):xs(y)}v&&(n[t+1]=r?Gp(u):Kg(u))}function $k(n,a){return null===n||null==a||(Array.isArray(n)?n[1]:n)===a||!(!Array.isArray(n)||"string"!=typeof a)&&ql(n,a)>=0}function dh(n,a,t){return Ls(n,a,t,!1),dh}function BR(n,a){return Ls(n,a,null,!0),BR}function Ls(n,a,t,r){var o=qe(),u=kn(),f=la(2);u.firstUpdatePass&&function(n,a,t,r){var o=n.data;if(null===o[t+1]){var u=o[Xi()],f=function(n,a){return a>=n.expandoStartIndex}(n,t);(function(n,a){return 0!=(n.flags&(a?16:32))})(u,r)&&null===a&&!f&&(a=!1),a=function(n,a,t,r){var o=function(n){var a=zt.lFrame.currentDirectiveIndex;return-1===a?null:n[a]}(n),u=r?a.residualClasses:a.residualStyles;if(null===o)0===(r?a.classBindings:a.styleBindings)&&(t=km(t=HR(null,n,a,t,r),a.attrs,r),u=null);else{var p=a.directiveStylingLast;if(-1===p||n[p]!==o)if(t=HR(o,n,a,t,r),null===u){var g=function(n,a,t){var r=t?a.classBindings:a.styleBindings;if(0!==xs(r))return n[Zo(r)]}(n,a,r);void 0!==g&&Array.isArray(g)&&function(n,a,t,r){n[Zo(t?a.classBindings:a.styleBindings)]=r}(n,a,r,g=km(g=HR(null,n,a,g[1],r),a.attrs,r))}else u=function(n,a,t){for(var r=void 0,o=a.directiveEnd,u=1+a.directiveStylingLast;u<o;u++)r=km(r,n[u].hostAttrs,t);return km(r,a.attrs,t)}(n,a,r)}return void 0!==u&&(r?a.residualClasses=u:a.residualStyles=u),t}(o,u,a,r),function(n,a,t,r,o,u){var f=u?a.classBindings:a.styleBindings,p=Zo(f),v=xs(f);n[r]=t;var y,g=!1;if(Array.isArray(t)?(null===(y=t[1])||ql(t,y)>0)&&(g=!0):y=t,o)if(0!==v){var S=Zo(n[p+1]);n[r+1]=ic(S,p),0!==S&&(n[S+1]=Bp(n[S+1],r)),n[p+1]=function(n,a){return 131071&n|a<<17}(n[p+1],r)}else n[r+1]=ic(p,0),0!==p&&(n[p+1]=Bp(n[p+1],r)),p=r;else n[r+1]=ic(v,0),0===p?p=r:n[v+1]=Bp(n[v+1],r),v=r;g&&(n[r+1]=Gp(n[r+1])),tO(n,y,r,!0),tO(n,y,r,!1),function(n,a,t,r,o){var u=o?n.residualClasses:n.residualStyles;null!=u&&"string"==typeof a&&ql(u,a)>=0&&(t[r+1]=Kg(t[r+1]))}(a,y,n,r,u),f=ic(p,v),u?a.classBindings=f:a.styleBindings=f}(o,u,a,t,f,r)}}(u,n,f,r),a!==on&&xi(o,f,a)&&function(n,a,t,r,o,u,f,p){if(3&a.type){var v=n.data,g=v[p+1];T0(function(n){return 1==(1&n)}(g)?fO(v,a,t,o,xs(g),f):void 0)||(T0(u)||function(n){return 2==(2&n)}(g)&&(u=fO(v,null,t,o,p,f)),function(n,a,t,r,o){var u=br(n);if(a)o?u?n.addClass(t,r):t.classList.add(r):u?n.removeClass(t,r):t.classList.remove(r);else{var f=-1===r.indexOf("-")?void 0:Ao.DashCase;if(null==o)u?n.removeStyle(t,r,f):t.style.removeProperty(r);else{var p="string"==typeof o&&o.endsWith("!important");p&&(o=o.slice(0,-10),f|=Ao.Important),u?n.setStyle(t,r,o,f):t.style.setProperty(r,o,p?"important":"")}}}(r,f,pr(Xi(),t),o,u))}}(u,u.data[Xi()],o,o[11],n,o[f+1]=function(n,a){return null==n||("string"==typeof a?n+=a:"object"==typeof n&&(n=Bn(Zi(n)))),n}(a,t),r,f)}function HR(n,a,t,r,o){var u=null,f=t.directiveEnd,p=t.directiveStylingLast;for(-1===p?p=t.directiveStart:p++;p<f&&(r=km(r,(u=a[p]).hostAttrs,o),u!==n);)p++;return null!==n&&(t.directiveStylingLast=p),r}function km(n,a,t){var r=t?1:2,o=-1;if(null!==a)for(var u=0;u<a.length;u++){var f=a[u];"number"==typeof f?o=f:o===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),vo(n,f,!!t||a[++u]))}return void 0===n?null:n}function fO(n,a,t,r,o,u){for(var f=null===a,p=void 0;o>0;){var v=n[o],g=Array.isArray(v),y=g?v[1]:v,_=null===y,C=t[o+1];C===on&&(C=_?ir:void 0);var S=_?mg(C,r):y===r?C:void 0;if(g&&!T0(S)&&(S=mg(v,r)),T0(S)&&(p=S,f))return p;var x=n[o+1];o=f?Zo(x):xs(x)}if(null!==a){var b=u?a.residualClasses:a.residualStyles;null!=b&&(p=mg(b,r))}return p}function T0(n){return void 0!==n}function le(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=qe(),r=kn(),o=n+20,u=r.firstCreatePass?Rs(r,o,1,a,null):r.data[o],f=t[o]=Pp(t[11],a);Fp(r,t,f,u),ka(u,!1)}function Hn(n){return Nt("",n,""),Hn}function Nt(n,a,t){var r=qe(),o=pc(r,n,a,t);return o!==on&&bi(r,Xi(),o),Nt}function mo(n,a,t,r,o){var u=qe(),f=function(n,a,t,r,o,u){var p=Ms(n,Ro(),t,o);return la(2),p?a+rn(t)+r+rn(o)+u:on}(u,n,a,t,r,o);return f!==on&&bi(u,Xi(),f),mo}function zd(n,a,t,r,o,u,f){var p=qe(),v=vc(p,n,a,t,r,o,u,f);return v!==on&&bi(p,Xi(),v),zd}function VR(n,a,t,r,o,u,f,p,v,g,y,_,C){var S=qe(),x=function(n,a,t,r,o,u,f,p,v,g,y,_,C,S){var x=Ro(),b=ta(n,x,t,o,f,v);return b=Ms(n,x+4,y,C)||b,la(6),b?a+rn(t)+r+rn(o)+u+rn(f)+p+rn(v)+g+rn(y)+_+rn(C)+S:on}(S,n,a,t,r,o,u,f,p,v,g,y,_,C);return x!==on&&bi(S,Xi(),x),VR}var jd=void 0,MG=["en",[["a","p"],["AM","PM"],jd],[["AM","PM"],jd,jd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jd,"{1} 'at' {0}",jd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){var t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}],fh={};function OO(n){return n in fh||(fh[n]=rr.ng&&rr.ng.common&&rr.ng.common.locales&&rr.ng.common.locales[n]),fh[n]}var mt=function(){return(mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt}(),D0="en-US";function R2(n,a,t){var r=kn();if(r.firstCreatePass){var o=ho(n);zR(t,r.data,r.blueprint,o,!0),zR(a,r.data,r.blueprint,o,!1)}}function zR(n,a,t,r,o){if(n=fn(n),Array.isArray(n))for(var u=0;u<n.length;u++)zR(n[u],a,t,r,o);else{var f=kn(),p=qe(),v=Ds(n)?n:fn(n.provide),g=Cm(n),y=Wr(),_=1048575&y.providerIndexes,C=y.directiveStart,S=y.providerIndexes>>20;if(Ds(n)||!n.multi){var x=new od(g,o,lt),b=qR(v,a,o?_:_+S,C);-1===b?(dd(ld(y,p),f,v),jR(f,n,a.length),a.push(v),y.directiveStart++,y.directiveEnd++,o&&(y.providerIndexes+=1048576),t.push(x),p.push(x)):(t[b]=x,p[b]=x)}else{var E=qR(v,a,_+S,C),D=qR(v,a,_,_+S),M=D>=0&&t[D];if(o&&!M||!o&&!(E>=0&&t[E])){dd(ld(y,p),f,v);var O=function(n,a,t,r,o){var u=new od(n,t,lt);return u.multi=[],u.index=a,u.componentProviders=0,nP(u,o,r&&!t),u}(o?D2:T2,t.length,o,r,g);!o&&M&&(t[D].providerFactory=O),jR(f,n,a.length,0),a.push(v),y.directiveStart++,y.directiveEnd++,o&&(y.providerIndexes+=1048576),t.push(O),p.push(O)}else jR(f,n,E>-1?E:D,nP(t[o?D:E],g,!o&&r));!o&&r&&M&&t[D].componentProviders++}}}function jR(n,a,t,r){var o=Ds(a),u=function(n){return!!n.useClass}(a);if(o||u){var v=(u?fn(a.useClass):a).prototype.ngOnDestroy;if(v){var g=n.destroyHooks||(n.destroyHooks=[]);if(!o&&a.multi){var y=g.indexOf(t);-1===y?g.push(t,[r,v]):g[y+1].push(r,v)}else g.push(t,v)}}}function nP(n,a,t){return t&&n.componentProviders++,n.multi.push(a)-1}function qR(n,a,t,r){for(var o=t;o<r;o++)if(a[o]===n)return o;return-1}function T2(n,a,t,r){return KR(this.multi,[])}function D2(n,a,t,r){var u,o=this.multi;if(this.providerFactory){var f=this.providerFactory.componentProviders,p=pd(t,t[1],this.providerFactory.index,r);KR(o,u=p.slice(0,f));for(var v=f;v<p.length;v++)u.push(p[v])}else KR(o,u=[]);return u}function KR(n,a){for(var t=0;t<n.length;t++)a.push((0,n[t])());return a}function rP(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(t){t.providersResolver=function(r,o){return R2(r,o?o(n):n,a)}}}var M2=function n(){k(this,n)},iP=function n(){k(this,n)},P2=function(){function n(){k(this,n)}return j(n,[{key:"resolveComponentFactory",value:function(t){throw function(n){var a=Error("No component factory found for ".concat(Bn(n),". Did you add it to @NgModule.entryComponents?"));return a.ngComponent=n,a}(t)}}]),n}(),Cc=function(){var n=function a(){k(this,a)};return n.NULL=new P2,n}();function I2(){return hh(Wr(),qe())}function hh(n,a){return new gu(qo(n,a))}var gu=function(){var n=function a(t){k(this,a),this.nativeElement=t};return n.__NG_ELEMENT_ID__=I2,n}();function L2(n){return n instanceof gu?n.nativeElement:n}var aP=function n(){k(this,n)},I0=function(){var n=function a(){k(this,a)};return n.__NG_ELEMENT_ID__=function(){return function(){var n=qe(),t=xo(Wr().index,n);return function(n){return n[11]}(Fa(t)?t:n)}()},n}(),k2=function(){var n=function a(){k(this,a)};return n.\u0275prov=un({token:n,providedIn:"root",factory:function(){return null}}),n}(),L0=function n(a){k(this,n),this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")},G2=new L0("13.1.0"),YR={};function F0(n,a,t,r){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==t;){var u=a[t.index];if(null!==u&&r.push(Vr(u)),zo(u))for(var f=10;f<u.length;f++){var p=u[f],v=p[1].firstChild;null!==v&&F0(p[1],p,v,r)}var g=t.type;if(8&g)F0(n,a,t.child,r);else if(32&g)for(var y=Mp(t,a),_=void 0;_=y();)r.push(_);else if(16&g){var C=iw(a,t);if(Array.isArray(C))r.push.apply(r,An(C));else{var S=Yu(a[16]);F0(S[1],S,C,r,!0)}}t=o?t.projectionNext:t.next}return r}var Wm=function(){function n(a,t){k(this,n),this._lView=a,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}return j(n,[{key:"rootNodes",get:function(){var t=this._lView,r=t[1];return F0(r,t,r.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(t){this._lView[8]=t}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var t=this._lView[3];if(zo(t)){var r=t[8],o=r?r.indexOf(this):-1;o>-1&&(Gg(t,o),fp(r,o))}this._attachedToViewContainer=!1}$u(this._lView[1],this._lView)}},{key:"onDestroy",value:function(t){$p(this._lView[1],this._lView,null,t)}},{key:"markForCheck",value:function(){pm(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){hm(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(n,a,t){Jf(!0);try{hm(n,a,t)}finally{Jf(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){this._appRef=null,function(n,a){Td(n,a,a[11],2,null,null)}(this._lView[1],this._lView)}},{key:"attachToAppRef",value:function(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}]),n}(),B2=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this,r))._view=r,o}return j(t,[{key:"detectChanges",value:function(){kd(this._view)}},{key:"checkNoChanges",value:function(){!function(n){Jf(!0);try{kd(n)}finally{Jf(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),t}(Wm),sP=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this)).ngModule=r,o}return j(t,[{key:"resolveComponentFactory",value:function(o){var u=si(o);return new $R(u,this.ngModule)}}]),t}(Cc);function uP(n){var a=[];for(var t in n)n.hasOwnProperty(t)&&a.push({propName:n[t],templateName:t});return a}var V2=new On("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return BC}}),$R=function(n){ve(t,n);var a=me(t);function t(r,o){var u;return k(this,t),(u=a.call(this)).componentDef=r,u.ngModule=o,u.componentType=r.type,u.selector=function(n){return n.map(Nx).join(",")}(r.selectors),u.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],u.isBoundToModule=!!o,u}return j(t,[{key:"inputs",get:function(){return uP(this.componentDef.inputs)}},{key:"outputs",get:function(){return uP(this.componentDef.outputs)}},{key:"create",value:function(o,u,f,p){var A,M,v=(p=p||this.ngModule)?function(n,a){return{get:function(r,o,u){var f=n.get(r,YR,u);return f!==YR||o===YR?f:a.get(r,o,u)}}}(o,p.injector):o,g=v.get(aP,V_),y=v.get(k2,null),_=g.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",S=f?function(n,a,t){if(br(n))return n.selectRootElement(a,t===Oa.ShadowDom);var o="string"==typeof a?n.querySelector(a):a;return o.textContent="",o}(_,f,this.componentDef.encapsulation):Qi(g.createRenderer(null,this.componentDef),C,function(n){var a=n.toLowerCase();return"svg"===a?Qv:"math"===a?"http://www.w3.org/1998/MathML/":null}(C)),x=this.componentDef.onPush?576:528,b=function(n,a){return{components:[],scheduler:n||BC,clean:nR,playerHandler:a||null,flags:0}}(),E=Yp(0,null,null,1,0,null,null,null,null,null),D=Md(null,E,b,x,null,null,g,_,y,v);kl(D);try{var O=function(n,a,t,r,o,u){var f=t[1];t[20]=n;var v=Rs(f,20,2,"#host",null),g=v.mergedAttrs=a.hostAttrs;null!==g&&(Jp(v,g,!0),null!==n&&(ap(o,n,g),null!==v.classes&&Vg(o,n,v.classes),null!==v.styles&&Hg(o,n,v.styles)));var y=r.createRenderer(n,a),_=Md(t,Kp(a),null,a.onPush?64:16,t[20],v,r,y,u||null,null);return f.firstCreatePass&&(dd(ld(v,t),f,a.type),Lw(f,v),Fw(v,t.length,1)),Ld(t,_),t[20]=_}(S,this.componentDef,D,g,_);if(S)if(f)ap(_,S,["ng-version",G2.full]);else{var I=function(n){for(var a=[],t=[],r=1,o=2;r<n.length;){var u=n[r];if("string"==typeof u)2===o?""!==u&&a.push(u,n[++r]):8===o&&t.push(u);else{if(!Wi(o))break;o=u}r++}return{attrs:a,classes:t}}(this.componentDef.selectors[0]),B=I.attrs,z=I.classes;B&&ap(_,S,B),z&&z.length>0&&Vg(_,S,z.join(" "))}if(M=ws(E,20),void 0!==u)for(var P=M.projection=[],W=0;W<this.ngContentSelectors.length;W++){var X=u[W];P.push(null!=X?Array.from(X):null)}A=function(n,a,t,r,o){var u=t[1],f=function(n,a,t){var r=Wr();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Nw(n,r,a,oc(n,a,1,null),t));var u=pd(a,n,r.directiveStart,r);Tr(u,a);var f=qo(r,a);return f&&Tr(f,a),u}(u,t,a);if(r.components.push(f),n[8]=f,o&&o.forEach(function(y){return y(f,a)}),a.contentQueries){var p=Wr();a.contentQueries(1,f,p.directiveStart)}var v=Wr();return!u.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(xr(v.index),Id(t[1],v,0,v.directiveStart,v.directiveEnd,a),dm(a,f)),f}(O,this.componentDef,D,b,[hR]),Ts(E,D,null)}finally{Ba()}return new z2(this.componentType,A,hh(M,D),D,M)}}]),t}(iP),z2=function(n){ve(t,n);var a=me(t);function t(r,o,u,f,p){var v;return k(this,t),(v=a.call(this)).location=u,v._rootLView=f,v._tNode=p,v.instance=o,v.hostView=v.changeDetectorRef=new B2(f),v.componentType=r,v}return j(t,[{key:"injector",get:function(){return new Gu(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(o){this.hostView.onDestroy(o)}}]),t}(M2),Qu=function n(){k(this,n)},lP=function n(){k(this,n)},vh=new Map;var fP=function(n){ve(t,n);var a=me(t);function t(r,o){var u;k(this,t),(u=a.call(this))._parent=o,u._bootstrapComponents=[],u.injector=Kn(u),u.destroyCbs=[],u.componentFactoryResolver=new sP(Kn(u));var f=co(r);return u._bootstrapComponents=da(f.bootstrap),u._r3Injector=Kw(r,o,[{provide:Qu,useValue:Kn(u)},{provide:Cc,useValue:u.componentFactoryResolver}],Bn(r)),u._r3Injector._resolveInjectorDefTypes(),u.instance=u.get(r),u}return j(t,[{key:"get",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ui.THROW_IF_NOT_FOUND,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qt.Default;return o===Ui||o===Qu||o===Zp?this:this._r3Injector.get(o,u,f)}},{key:"destroy",value:function(){var o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(function(u){return u()}),this.destroyCbs=null}},{key:"onDestroy",value:function(o){this.destroyCbs.push(o)}}]),t}(Qu),XR=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this)).moduleType=r,null!==co(r)&&function(n){var a=new Set;!function t(r){var o=co(r,!0),u=o.id;null!==u&&(function(n,a,t){if(a&&a!==t)throw new Error("Duplicate module registered for ".concat(n," - ").concat(Bn(a)," vs ").concat(Bn(a.name)))}(u,vh.get(u),r),vh.set(u,r));var g,v=Ot(da(o.imports));try{for(v.s();!(g=v.n()).done;){var y=g.value;a.has(y)||(a.add(y),t(y))}}catch(_){v.e(_)}finally{v.f()}}(n)}(r),o}return j(t,[{key:"create",value:function(o){return new fP(this.moduleType,o)}}]),t}(lP);function gh(n,a,t,r){return hP(qe(),Hi(),n,a,t,r)}function pP(n,a,t,r,o,u,f){return function(n,a,t,r,o,u,f,p,v){var g=a+t;return ta(n,g,o,u,f,p)?qa(n,g+4,v?r.call(v,o,u,f,p):r(o,u,f,p)):Um(n,g+4)}(qe(),Hi(),n,a,t,r,o,u,f)}function Um(n,a){var t=n[a];return t===on?void 0:t}function hP(n,a,t,r,o,u){var f=a+t;return xi(n,f,o)?qa(n,f+1,u?r.call(u,o):r(o)):Um(n,f+1)}function N0(n,a){var r,t=kn(),o=n+20;t.firstCreatePass?(r=function(n,a){if(a)for(var t=a.length-1;t>=0;t--){var r=a[t];if(n===r.name)return r}}(a,t.pipeRegistry),t.data[o]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(o,r.onDestroy)):r=t.data[o];var u=r.factory||(r.factory=nu(r.type)),f=hs(lt);try{var p=sp(!1),v=u();return sp(p),function(n,a,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),a[t]=r}(t,qe(),o,v),v}finally{hs(f)}}function k0(n,a,t){var r=n+20,o=qe(),u=function(n,a){return n[a]}(o,r);return function(n,a){return n[1].data[a].pure}(o,r)?hP(o,Hi(),a,u.transform,t,u):u.transform(t)}var a3=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return k(this,t),(r=a.call(this)).__isAsync=o,r}return j(t,[{key:"emit",value:function(o){Ce(Ue(t.prototype),"next",this).call(this,o)}},{key:"subscribe",value:function(o,u,f){var p,v,g,y=o,_=u||function(){return null},C=f;if(o&&"object"==typeof o){var S=o;y=null===(p=S.next)||void 0===p?void 0:p.bind(S),_=null===(v=S.error)||void 0===v?void 0:v.bind(S),C=null===(g=S.complete)||void 0===g?void 0:g.bind(S)}this.__isAsync&&(_=JR(_),y&&(y=JR(y)),C&&(C=JR(C)));var x=Ce(Ue(t.prototype),"subscribe",this).call(this,{next:y,error:_,complete:C});return o instanceof nt&&o.add(x),x}}]),t}(ds);function JR(n){return function(a){setTimeout(n,void 0,a)}}var Ee=a3;function s3(){return this._results[ga()]()}var ZR=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];k(this,n),this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var t=ga(),r=n.prototype;r[t]||(r[t]=s3)}return j(n,[{key:"changes",get:function(){return this._changes||(this._changes=new Ee)}},{key:"get",value:function(t){return this._results[t]}},{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,r){return this._results.reduce(t,r)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t,r){var o=this;o.dirty=!1;var u=$o(t);(this._changesDetected=!function(n,a,t){if(n.length!==a.length)return!1;for(var r=0;r<n.length;r++){var o=n[r],u=a[r];if(t&&(o=t(o),u=t(u)),u!==o)return!1}return!0}(o._results,u,r))&&(o._results=u,o.length=u.length,o.last=u[this.length-1],o.first=u[0])}},{key:"notifyOnChanges",value:function(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),n}();Symbol;var el=function(){var n=function a(){k(this,a)};return n.__NG_ELEMENT_ID__=c3,n}(),l3=function(n){ve(t,n);var a=me(t);function t(r,o,u){var f;return k(this,t),(f=a.call(this))._declarationLView=r,f._declarationTContainer=o,f.elementRef=u,f}return j(t,[{key:"createEmbeddedView",value:function(o){var u=this._declarationTContainer.tViews,f=Md(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);f[17]=this._declarationLView[this._declarationTContainer.index];var v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(u)),Ts(u,f,o),new Wm(f)}}]),t}(el);function c3(){return G0(Wr(),qe())}function G0(n,a){return 4&n.type?new l3(a,n,hh(n,a)):null}var ya=function(){var n=function a(){k(this,a)};return n.__NG_ELEMENT_ID__=d3,n}();function d3(){return wP(Wr(),qe())}var _P=function(n){ve(t,n);var a=me(t);function t(r,o,u){var f;return k(this,t),(f=a.call(this))._lContainer=r,f._hostTNode=o,f._hostLView=u,f}return j(t,[{key:"element",get:function(){return hh(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new Gu(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var o=lp(this._hostTNode,this._hostLView);if(eC(o)){var u=Hl(o,this._hostLView),f=Ji(o);return new Gu(u[1].data[f+8],u)}return new Gu(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(o){var u=CP(this._lContainer);return null!==u&&u[o]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(o,u,f){var p=o.createEmbeddedView(u||{});return this.insert(p,f),p}},{key:"createComponent",value:function(o,u,f,p,v){var y,g=o&&!function(n){return"function"==typeof n}(o);if(g)y=u;else{var _=u||{};y=_.index,f=_.injector,p=_.projectableNodes,v=_.ngModuleRef}var C=g?o:new $R(si(o)),S=f||this.parentInjector;if(!v&&null==C.ngModule&&S){var x=S.get(Qu,null);x&&(v=x)}var b=C.create(S,p,void 0,v);return this.insert(b.hostView,y),b}},{key:"insert",value:function(o,u){var f=o._lView,p=f[1];if(function(n){return zo(n[3])}(f)){var v=this.indexOf(o);if(-1!==v)this.detach(v);else{var g=f[3],y=new _P(g,g[6],g[3]);y.detach(y.indexOf(o))}}var _=this._adjustIndex(u),C=this._lContainer;!function(n,a,t,r){var o=10+r,u=t.length;r>0&&(t[o-1][4]=a),r<u-10?(a[4]=t[o],lC(t,10+r,a)):(t.push(a),a[4]=null),a[3]=t;var f=a[17];null!==f&&t!==f&&function(n,a){var t=n[9];a[16]!==a[3][3][16]&&(n[2]=!0),null===t?n[9]=[a]:t.push(a)}(f,a);var p=a[19];null!==p&&p.insertView(n),a[2]|=128}(p,f,C,_);var S=nc(_,C),x=f[11],b=Ip(x,C[7]);return null!==b&&function(n,a,t,r,o,u){r[0]=o,r[6]=a,Td(n,r,t,1,o,u)}(p,C[6],x,f,b,S),o.attachToViewContainerRef(),lC(QR(C),_,o),o}},{key:"move",value:function(o,u){return this.insert(o,u)}},{key:"indexOf",value:function(o){var u=CP(this._lContainer);return null!==u?u.indexOf(o):-1}},{key:"remove",value:function(o){var u=this._adjustIndex(o,-1),f=Gg(this._lContainer,u);f&&(fp(QR(this._lContainer),u),$u(f[1],f))}},{key:"detach",value:function(o){var u=this._adjustIndex(o,-1),f=Gg(this._lContainer,u);return f&&null!=fp(QR(this._lContainer),u)?new Wm(f):null}},{key:"_adjustIndex",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==o?this.length+u:o}}]),t}(ya);function CP(n){return n[8]}function QR(n){return n[8]||(n[8]=[])}function wP(n,a){var t,r=a[n.index];if(zo(r))t=r;else{var o;if(8&n.type)o=Vr(r);else{var u=a[11];o=u.createComment("");var f=qo(n,a);su(u,Ip(u,f),o,function(n,a){return br(n)?n.nextSibling(a):a.nextSibling}(u,f),!1)}a[n.index]=t=Gw(r,a,o,n),Ld(a,t)}return new _P(t,n,a)}var v3=function(){function n(a){k(this,n),this.queryList=a,this.matches=null}return j(n,[{key:"clone",value:function(){return new n(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),n}(),g3=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];k(this,n),this.queries=a}return j(n,[{key:"createEmbeddedView",value:function(t){var r=t.queries;if(null!==r){for(var o=null!==t.contentQueries?t.contentQueries[0]:r.length,u=[],f=0;f<o;f++){var p=r.getByIndex(f);u.push(this.queries[p.indexInDeclarationView].clone())}return new n(u)}return null}},{key:"insertView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"detachView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"dirtyQueriesWithMatches",value:function(t){for(var r=0;r<this.queries.length;r++)null!==RP(t,r).matches&&this.queries[r].setDirty()}}]),n}(),SP=function n(a,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;k(this,n),this.predicate=a,this.flags=t,this.read=r},m3=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];k(this,n),this.queries=a}return j(n,[{key:"elementStart",value:function(t,r){for(var o=0;o<this.queries.length;o++)this.queries[o].elementStart(t,r)}},{key:"elementEnd",value:function(t){for(var r=0;r<this.queries.length;r++)this.queries[r].elementEnd(t)}},{key:"embeddedTView",value:function(t){for(var r=null,o=0;o<this.length;o++){var u=null!==r?r.length:0,f=this.getByIndex(o).embeddedTView(t,u);f&&(f.indexInDeclarationView=o,null!==r?r.push(f):r=[f])}return null!==r?new n(r):null}},{key:"template",value:function(t,r){for(var o=0;o<this.queries.length;o++)this.queries[o].template(t,r)}},{key:"getByIndex",value:function(t){return this.queries[t]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(t){this.queries.push(t)}}]),n}(),y3=function(){function n(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;k(this,n),this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}return j(n,[{key:"elementStart",value:function(t,r){this.isApplyingToNode(r)&&this.matchTNode(t,r)}},{key:"elementEnd",value:function(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(t,r){this.elementStart(t,r)}},{key:"embeddedTView",value:function(t,r){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,r),new n(this.metadata)):null}},{key:"isApplyingToNode",value:function(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var r=this._declarationNodeIndex,o=t.parent;null!==o&&8&o.type&&o.index!==r;)o=o.parent;return r===(null!==o?o.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(t,r){var o=this.metadata.predicate;if(Array.isArray(o))for(var u=0;u<o.length;u++){var f=o[u];this.matchTNodeWithReadOption(t,r,_3(r,f)),this.matchTNodeWithReadOption(t,r,cp(r,t,f,!1,!1))}else o===el?4&r.type&&this.matchTNodeWithReadOption(t,r,-1):this.matchTNodeWithReadOption(t,r,cp(r,t,o,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(t,r,o){if(null!==o){var u=this.metadata.read;if(null!==u)if(u===gu||u===ya||u===el&&4&r.type)this.addMatch(r.index,-2);else{var f=cp(r,t,u,!1,!1);null!==f&&this.addMatch(r.index,f)}else this.addMatch(r.index,o)}}},{key:"addMatch",value:function(t,r){null===this.matches?this.matches=[t,r]:this.matches.push(t,r)}}]),n}();function _3(n,a){var t=n.localNames;if(null!==t)for(var r=0;r<t.length;r+=2)if(t[r]===a)return t[r+1];return null}function w3(n,a,t,r){return-1===t?function(n,a){return 11&n.type?hh(n,a):4&n.type?G0(n,a):null}(a,n):-2===t?function(n,a,t){return t===gu?hh(a,n):t===el?G0(a,n):t===ya?wP(a,n):void 0}(n,a,r):pd(n,n[1],t,a)}function EP(n,a,t,r){var o=a[19].queries[r];if(null===o.matches){for(var u=n.data,f=t.matches,p=[],v=0;v<f.length;v+=2){var g=f[v];p.push(g<0?null:w3(a,u[g],f[v+1],t.metadata.read))}o.matches=p}return o.matches}function eT(n,a,t,r){var o=n.queries.getByIndex(t),u=o.matches;if(null!==u)for(var f=EP(n,a,o,t),p=0;p<u.length;p+=2){var v=u[p];if(v>0)r.push(f[p/2]);else{for(var g=u[p+1],y=a[-v],_=10;_<y.length;_++){var C=y[_];C[17]===C[3]&&eT(C[1],C,g,r)}if(null!==y[9])for(var S=y[9],x=0;x<S.length;x++){var b=S[x];eT(b[1],b,g,r)}}}return r}function jm(n){var a=qe(),t=kn(),r=q_();ep(r+1);var o=RP(t,r);if(n.dirty&&W_(a)===(2==(2&o.metadata.flags))){if(null===o.matches)n.reset([]);else{var u=o.crossesNgTemplate?eT(t,a,r,[]):EP(t,a,o,r);n.reset(u,L2),n.notifyOnChanges()}return!0}return!1}function qm(n,a,t,r){var o=kn();if(o.firstCreatePass){var u=Wr();(function(n,a,t){null===n.queries&&(n.queries=new m3),n.queries.track(new y3(a,t))})(o,new SP(a,t,r),u.index),function(n,a){var t=n.contentQueries||(n.contentQueries=[]);a!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,a)}(o,n),2==(2&t)&&(o.staticContentQueries=!0)}!function(n,a,t){var r=new ZR(4==(4&t));$p(n,a,r,r.destroy),null===a[19]&&(a[19]=new g3),a[19].queries.push(new v3(r))}(o,qe(),t)}function Km(){return function(n,a){return n[19].queries[a].queryList}(qe(),q_())}function RP(n,a){return n.queries.getByIndex(a)}var V=zl("Input",function(n){return{bindingPropertyName:n}}),_t=zl("Output",function(n){return{bindingPropertyName:n}});function V0(){}var W0=new On("Application Initializer"),yh=function(){var n=function(){function a(t){var r=this;k(this,a),this.appInits=t,this.resolve=V0,this.reject=V0,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(o,u){r.resolve=o,r.reject=u})}return j(a,[{key:"runInitializers",value:function(){var r=this;if(!this.initialized){var o=[],u=function(){r.done=!0,r.resolve()};if(this.appInits)for(var f=function(g){var y=r.appInits[g]();if(U(y))o.push(y);else if(Q(y)){var _=new Promise(function(C,S){y.subscribe({complete:C,error:S})});o.push(_)}},p=0;p<this.appInits.length;p++)f(p);Promise.all(o).then(function(){u()}).catch(function(v){r.reject(v)}),0===o.length&&u(),this.initialized=!0}}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(W0,8))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),$m=new On("AppId"),z3={provide:$m,useFactory:function(){return"".concat(aT()).concat(aT()).concat(aT())},deps:[]};function aT(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var UP=new On("Platform Initializer"),U0=new On("Platform ID"),zP=new On("appBootstrapListener"),jP=function(){var n=function(){function a(){k(this,a)}return j(a,[{key:"log",value:function(r){console.log(r)}},{key:"warn",value:function(r){console.warn(r)}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),wc=new On("LocaleId"),qP=new On("DefaultCurrencyCode"),j3=function n(a,t){k(this,n),this.ngModuleFactory=a,this.componentFactories=t},z0=function(){var n=function(){function a(){k(this,a)}return j(a,[{key:"compileModuleSync",value:function(r){return new XR(r)}},{key:"compileModuleAsync",value:function(r){return Promise.resolve(this.compileModuleSync(r))}},{key:"compileModuleAndAllComponentsSync",value:function(r){var o=this.compileModuleSync(r),f=da(co(r).declarations).reduce(function(p,v){var g=si(v);return g&&p.push(new $R(g)),p},[]);return new j3(o,f)}},{key:"compileModuleAndAllComponentsAsync",value:function(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}},{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(r){}},{key:"getModuleId",value:function(r){}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),K3=function(){return Promise.resolve(0)}();function sT(n){"undefined"==typeof Zone?K3.then(function(){n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}var Di=function(){function n(a){var t=a.enableLongStackTrace,r=void 0!==t&&t,o=a.shouldCoalesceEventChangeDetection,u=void 0!==o&&o,f=a.shouldCoalesceRunChangeDetection,p=void 0!==f&&f;if(k(this,n),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ee(!1),this.onMicrotaskEmpty=new Ee(!1),this.onStable=new Ee(!1),this.onError=new Ee(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();var v=this;v._nesting=0,v._outer=v._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(v._inner=v._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(v._inner=v._inner.fork(Zone.longStackTraceZoneSpec)),v.shouldCoalesceEventChangeDetection=!p&&u,v.shouldCoalesceRunChangeDetection=p,v.lastRequestAnimationFrameId=-1,v.nativeRequestAnimationFrame=function(){var n=rr.requestAnimationFrame,a=rr.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&a){var t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);var r=a[Zone.__symbol__("OriginalDelegate")];r&&(a=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function(n){var a=function(){!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(rr,function(){n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){n.lastRequestAnimationFrameId=-1,lT(n),n.isCheckStableRunning=!0,uT(n),n.isCheckStableRunning=!1},void 0,function(){},function(){})),n.fakeTopEventTask.invoke()}),lT(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(r,o,u,f,p,v){try{return KP(n),r.invokeTask(u,f,p,v)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&a(),YP(n)}},onInvoke:function(r,o,u,f,p,v,g){try{return KP(n),r.invoke(u,f,p,v,g)}finally{n.shouldCoalesceRunChangeDetection&&a(),YP(n)}},onHasTask:function(r,o,u,f){r.hasTask(u,f),o===u&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,lT(n),uT(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:function(r,o,u,f){return r.handleError(u,f),n.runOutsideAngular(function(){return n.onError.emit(f)}),!1}})}(v)}return j(n,[{key:"run",value:function(t,r,o){return this._inner.run(t,r,o)}},{key:"runTask",value:function(t,r,o,u){var f=this._inner,p=f.scheduleEventTask("NgZoneEvent: "+u,t,$3,V0,V0);try{return f.runTask(p,r,o)}finally{f.cancelTask(p)}}},{key:"runGuarded",value:function(t,r,o){return this._inner.runGuarded(t,r,o)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!n.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(n.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),n}(),$3={};function uT(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(function(){return n.onStable.emit(null)})}finally{n.isStable=!0}}}function lT(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function KP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function YP(n){n._nesting--,uT(n)}var Ns,Z3=function(){function n(){k(this,n),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ee,this.onMicrotaskEmpty=new Ee,this.onStable=new Ee,this.onError=new Ee}return j(n,[{key:"run",value:function(t,r,o){return t.apply(r,o)}},{key:"runGuarded",value:function(t,r,o){return t.apply(r,o)}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t,r,o,u){return t.apply(r,o)}}]),n}(),cT=function(){var n=function(){function a(t){var r=this;k(this,a),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){r.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return j(a,[{key:"_watchAngularEvents",value:function(){var r=this;this._ngZone.onUnstable.subscribe({next:function(){r._didWork=!0,r._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){r._ngZone.onStable.subscribe({next:function(){Di.assertNotInAngularZone(),sT(function(){r._isZoneStable=!0,r._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var r=this;if(this.isStable())sT(function(){for(;0!==r._callbacks.length;){var u=r._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(r._didWork)}r._didWork=!1});else{var o=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(u){return!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(r){return{source:r.source,creationLocation:r.creationLocation,data:r.data}}):[]}},{key:"addCallback",value:function(r,o,u){var f=this,p=-1;o&&o>0&&(p=setTimeout(function(){f._callbacks=f._callbacks.filter(function(v){return v.timeoutId!==p}),r(f._didWork,f.getPendingTasks())},o)),this._callbacks.push({doneCb:r,timeoutId:p,updateCb:u})}},{key:"whenStable",value:function(r,o,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,u),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(r,o,u){return[]}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(Di))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),$P=function(){var n=function(){function a(){k(this,a),this._applications=new Map,dT.addToWindow(this)}return j(a,[{key:"registerApplication",value:function(r,o){this._applications.set(r,o)}},{key:"unregisterApplication",value:function(r){this._applications.delete(r)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(r){return this._applications.get(r)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(r){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return dT.findTestabilityInTree(this,r,o)}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),Q3=function(){function n(){k(this,n)}return j(n,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,r,o){return null}}]),n}(),dT=new Q3;function tB(n,a,t){var r=new XR(t);return Promise.resolve(r)}var XP=new On("AllowMultipleToken"),JP=function n(a,t){k(this,n),this.name=a,this.token=t};function iB(n){if(Ns&&!Ns.destroyed&&!Ns.injector.get(XP,!1))throw new ki("400","");Ns=n.get(e1);var t=n.get(UP,null);return t&&t.forEach(function(r){return r()}),Ns}function ZP(n,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(a),o=new On(r);return function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],f=QP();if(!f||f.injector.get(XP,!1))if(n)n(t.concat(u).concat({provide:o,useValue:!0}));else{var p=t.concat(u).concat({provide:o,useValue:!0},{provide:Qp,useValue:"platform"});iB(Ui.create({providers:p,name:r}))}return oB()}}function oB(n){var a=QP();if(!a)throw new ki("401","");return a}function QP(){return Ns&&!Ns.destroyed?Ns:null}var e1=function(){var n=function(){function a(t){k(this,a),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return j(a,[{key:"bootstrapModuleFactory",value:function(r,o){var u=this,g=function(n,a){return"noop"===n?new Z3:("zone.js"===n?void 0:n)||new Di({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)})}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),y=[{provide:Di,useValue:g}];return g.run(function(){var _=Ui.create({providers:y,parent:u.injector,name:r.moduleType.name}),C=r.create(_),S=C.injector.get(Ql,null);if(!S)throw new ki("402","");return g.runOutsideAngular(function(){var b=g.onError.subscribe({next:function(D){S.handleError(D)}});C.onDestroy(function(){fT(u._modules,C),b.unsubscribe()})}),function(n,a,t){try{var r=((b=C.injector.get(yh)).runInitializers(),b.donePromise.then(function(){return function(n){bo(n,"Expected localeId to be defined"),"string"==typeof n&&n.toLowerCase().replace(/_/g,"-")}(C.injector.get(wc,D0)||D0),u._moduleDoBootstrap(C),C}));return U(r)?r.catch(function(o){throw a.runOutsideAngular(function(){return n.handleError(o)}),o}):r}catch(o){throw a.runOutsideAngular(function(){return n.handleError(o)}),o}var b}(S,g)})}},{key:"bootstrapModule",value:function(r){var o=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],f=t1({},u);return tB(0,0,r).then(function(p){return o.bootstrapModuleFactory(p,f)})}},{key:"_moduleDoBootstrap",value:function(r){var o=r.injector.get(Xm);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(function(f){return o.bootstrap(f)});else{if(!r.instance.ngDoBootstrap)throw new ki("403","");r.instance.ngDoBootstrap(o)}this._modules.push(r)}},{key:"onDestroy",value:function(r){this._destroyListeners.push(r)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new ki("404","");this._modules.slice().forEach(function(o){return o.destroy()}),this._destroyListeners.forEach(function(o){return o()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(Ui))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}();function t1(n,a){return Array.isArray(a)?a.reduce(t1,n):Object.assign(Object.assign({},n),a)}var Xm=function(){var n=function(){function a(t,r,o,u,f){var p=this;k(this,a),this._zone=t,this._injector=r,this._exceptionHandler=o,this._componentFactoryResolver=u,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){p._zone.run(function(){p.tick()})}});var v=new Cr(function(y){p._stable=p._zone.isStable&&!p._zone.hasPendingMacrotasks&&!p._zone.hasPendingMicrotasks,p._zone.runOutsideAngular(function(){y.next(p._stable),y.complete()})}),g=new Cr(function(y){var _;p._zone.runOutsideAngular(function(){_=p._zone.onStable.subscribe(function(){Di.assertNotInAngularZone(),sT(function(){!p._stable&&!p._zone.hasPendingMacrotasks&&!p._zone.hasPendingMicrotasks&&(p._stable=!0,y.next(!0))})})});var C=p._zone.onUnstable.subscribe(function(){Di.assertInAngularZone(),p._stable&&(p._stable=!1,p._zone.runOutsideAngular(function(){y.next(!1)}))});return function(){_.unsubscribe(),C.unsubscribe()}});this.isStable=function(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];var r=$(a),o=Nv(a,1/0),u=a;return u.length?1===u.length?so(u[0]):zc(o)(Xr(u,r)):So}(v,g.pipe(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.connector,t=void 0===a?function(){return new ds}:a,r=n.resetOnError,o=void 0===r||r,u=n.resetOnComplete,f=void 0===u||u,p=n.resetOnRefCountZero,v=void 0===p||p;return function(g){var y=null,_=null,C=null,S=0,x=!1,b=!1,E=function(){null==_||_.unsubscribe(),_=null},D=function(){E(),y=C=null,x=b=!1},A=function(){var O=y;D(),null==O||O.unsubscribe()};return oi(function(M,O){S++,!b&&!x&&E();var I=C=null!=C?C:t();O.add(function(){0==--S&&!b&&!x&&(_=Hv(A,v))}),I.subscribe(O),y||(y=new Mf({next:function(z){return I.next(z)},error:function(z){b=!0,E(),_=Hv(D,o,z),I.error(z)},complete:function(){x=!0,E(),_=Hv(D,f),I.complete()}}),Xr(M).subscribe(y))})(g)}}()))}return j(a,[{key:"bootstrap",value:function(r,o){var p,u=this;if(!this._initStatus.done)throw new ki("405","");p=r instanceof iP?r:this._componentFactoryResolver.resolveComponentFactory(r),this.componentTypes.push(p.componentType);var v=function(n){return n.isBoundToModule}(p)?void 0:this._injector.get(Qu),y=p.create(Ui.NULL,[],o||p.selector,v),_=y.location.nativeElement,C=y.injector.get(cT,null),S=C&&y.injector.get($P);return C&&S&&S.registerApplication(_,C),y.onDestroy(function(){u.detachView(y.hostView),fT(u.components,y),S&&S.unregisterApplication(_)}),this._loadComponent(y),y}},{key:"tick",value:function(){var r=this;if(this._runningTick)throw new ki("101","");try{this._runningTick=!0;var f,u=Ot(this._views);try{for(u.s();!(f=u.n()).done;)f.value.detectChanges()}catch(_){u.e(_)}finally{u.f()}}catch(_){this._zone.runOutsideAngular(function(){return r._exceptionHandler.handleError(_)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(r){var o=r;this._views.push(o),o.attachToAppRef(this)}},{key:"detachView",value:function(r){var o=r;fT(this._views,o),o.detachFromAppRef()}},{key:"_loadComponent",value:function(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(zP,[]).concat(this._bootstrapListeners).forEach(function(u){return u(r)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(r){return r.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(Di),Mt(Ui),Mt(Ql),Mt(Cc),Mt(yh))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}();function fT(n,a){var t=n.indexOf(a);t>-1&&n.splice(t,1)}var j0=function(){var n=function a(){k(this,a)};return n.__NG_ELEMENT_ID__=cB,n}();function cB(n){return function(n,a,t){if(Na(n)&&!t){var r=xo(n.index,a);return new Wm(r,r)}return 47&n.type?new Wm(a[16],a):null}(Wr(),qe(),16==(16&n))}var u1=function(){function n(){k(this,n)}return j(n,[{key:"supports",value:function(t){return fc(t)}},{key:"create",value:function(t){return new vB(t)}}]),n}(),hB=function(a,t){return t},vB=function(){function n(a){k(this,n),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||hB}return j(n,[{key:"forEachItem",value:function(t){var r;for(r=this._itHead;null!==r;r=r._next)t(r)}},{key:"forEachOperation",value:function(t){for(var r=this._itHead,o=this._removalsHead,u=0,f=null;r||o;){var p=!o||r&&r.currentIndex<c1(o,u,f)?r:o,v=c1(p,u,f),g=p.currentIndex;if(p===o)u--,o=o._nextRemoved;else if(r=r._next,null==p.previousIndex)u++;else{f||(f=[]);var y=v-u,_=g-u;if(y!=_){for(var C=0;C<y;C++){var S=C<f.length?f[C]:f[C]=0,x=S+C;_<=x&&x<y&&(f[C]=S+1)}f[p.previousIndex]=_-y}}v!==g&&t(p,v,g)}}},{key:"forEachPreviousItem",value:function(t){var r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)t(r)}},{key:"forEachAddedItem",value:function(t){var r;for(r=this._additionsHead;null!==r;r=r._nextAdded)t(r)}},{key:"forEachMovedItem",value:function(t){var r;for(r=this._movesHead;null!==r;r=r._nextMoved)t(r)}},{key:"forEachRemovedItem",value:function(t){var r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)t(r)}},{key:"forEachIdentityChange",value:function(t){var r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)t(r)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!fc(t))throw new Error("Error trying to diff '".concat(Bn(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var r=this;this._reset();var f,p,v,o=this._itHead,u=!1;if(Array.isArray(t)){this.length=t.length;for(var g=0;g<this.length;g++)v=this._trackByFn(g,p=t[g]),null!==o&&Object.is(o.trackById,v)?(u&&(o=this._verifyReinsertion(o,p,v,g)),Object.is(o.item,p)||this._addIdentityChange(o,p)):(o=this._mismatch(o,p,v,g),u=!0),o=o._next}else f=0,function(n,a){if(Array.isArray(n))for(var t=0;t<n.length;t++)a(n[t]);else for(var o,r=n[ga()]();!(o=r.next()).done;)a(o.value)}(t,function(y){v=r._trackByFn(f,y),null!==o&&Object.is(o.trackById,v)?(u&&(o=r._verifyReinsertion(o,y,v,f)),Object.is(o.item,y)||r._addIdentityChange(o,y)):(o=r._mismatch(o,y,v,f),u=!0),o=o._next,f++}),this.length=f;return this._truncate(o),this.collection=t,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,r,o,u){var f;return null===t?f=this._itTail:(f=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._reinsertAfter(t,f,u)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(o,u))?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._moveAfter(t,f,u)):t=this._addAfter(new gB(r,o),f,u),t}},{key:"_verifyReinsertion",value:function(t,r,o,u){var f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?t=this._reinsertAfter(f,t._prev,u):t.currentIndex!=u&&(t.currentIndex=u,this._addToMoves(t,u)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var r=t._next;this._addToRemovals(this._unlink(t)),t=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,r,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var u=t._prevRemoved,f=t._nextRemoved;return null===u?this._removalsHead=f:u._nextRemoved=f,null===f?this._removalsTail=u:f._prevRemoved=u,this._insertAfter(t,r,o),this._addToMoves(t,o),t}},{key:"_moveAfter",value:function(t,r,o){return this._unlink(t),this._insertAfter(t,r,o),this._addToMoves(t,o),t}},{key:"_addAfter",value:function(t,r,o){return this._insertAfter(t,r,o),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,r,o){var u=null===r?this._itHead:r._next;return t._next=u,t._prev=r,null===u?this._itTail=t:u._prev=t,null===r?this._itHead=t:r._next=t,null===this._linkedRecords&&(this._linkedRecords=new l1),this._linkedRecords.put(t),t.currentIndex=o,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var r=t._prev,o=t._next;return null===r?this._itHead=o:r._next=o,null===o?this._itTail=r:o._prev=r,t}},{key:"_addToMoves",value:function(t,r){return t.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new l1),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,r){return t.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}]),n}(),gB=function n(a,t){k(this,n),this.item=a,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},mB=function(){function n(){k(this,n),this._head=null,this._tail=null}return j(n,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,r){var o;for(o=this._head;null!==o;o=o._nextDup)if((null===r||r<=o.currentIndex)&&Object.is(o.trackById,t))return o;return null}},{key:"remove",value:function(t){var r=t._prevDup,o=t._nextDup;return null===r?this._head=o:r._nextDup=o,null===o?this._tail=r:o._prevDup=r,null===this._head}}]),n}(),l1=function(){function n(){k(this,n),this.map=new Map}return j(n,[{key:"put",value:function(t){var r=t.trackById,o=this.map.get(r);o||(o=new mB,this.map.set(r,o)),o.add(t)}},{key:"get",value:function(t,r){var u=this.map.get(t);return u?u.get(t,r):null}},{key:"remove",value:function(t){var r=t.trackById;return this.map.get(r).remove(t)&&this.map.delete(r),t}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),n}();function c1(n,a,t){var r=n.previousIndex;if(null===r)return r;var o=0;return t&&r<t.length&&(o=t[r]),r+a+o}var d1=function(){function n(){k(this,n)}return j(n,[{key:"supports",value:function(t){return t instanceof Map||Tm(t)}},{key:"create",value:function(){return new yB}}]),n}(),yB=function(){function n(){k(this,n),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return j(n,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(t){var r;for(r=this._mapHead;null!==r;r=r._next)t(r)}},{key:"forEachPreviousItem",value:function(t){var r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)t(r)}},{key:"forEachChangedItem",value:function(t){var r;for(r=this._changesHead;null!==r;r=r._nextChanged)t(r)}},{key:"forEachAddedItem",value:function(t){var r;for(r=this._additionsHead;null!==r;r=r._nextAdded)t(r)}},{key:"forEachRemovedItem",value:function(t){var r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)t(r)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||Tm(t)))throw new Error("Error trying to diff '".concat(Bn(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var r=this;this._reset();var o=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(f,p){if(o&&o.key===p)r._maybeAddToChanges(o,f),r._appendAfter=o,o=o._next;else{var v=r._getOrCreateRecordForKey(p,f);o=r._insertBeforeOrAppend(o,v)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(var u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,r){if(t){var o=t._prev;return r._next=t,r._prev=o,t._prev=r,o&&(o._next=r),t===this._mapHead&&(this._mapHead=r),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}},{key:"_getOrCreateRecordForKey",value:function(t,r){if(this._records.has(t)){var o=this._records.get(t);this._maybeAddToChanges(o,r);var u=o._prev,f=o._next;return u&&(u._next=f),f&&(f._prev=u),o._next=null,o._prev=null,o}var p=new _B(t);return this._records.set(t,p),p.currentValue=r,this._addToAdditions(p),p}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,r){Object.is(r,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=r,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,r){t instanceof Map?t.forEach(r):Object.keys(t).forEach(function(o){return r(t[o],o)})}}]),n}(),_B=function n(a){k(this,n),this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null};function f1(){return new Jm([new u1])}var Jm=function(){var n=function(){function a(t){k(this,a),this.factories=t}return j(a,[{key:"find",value:function(r){var o=this.factories.find(function(u){return u.supports(r)});if(null!=o)return o;throw new Error("Cannot find a differ supporting object '".concat(r,"' of type '").concat(function(n){return n.name||typeof n}(r),"'"))}}],[{key:"create",value:function(r,o){if(null!=o){var u=o.factories.slice();r=r.concat(u)}return new a(r)}},{key:"extend",value:function(r){return{provide:a,useFactory:function(u){return a.create(r,u||f1())},deps:[[a,new $l,new Ua]]}}}]),a}();return n.\u0275prov=un({token:n,providedIn:"root",factory:f1}),n}();function p1(){return new _h([new d1])}var _h=function(){var n=function(){function a(t){k(this,a),this.factories=t}return j(a,[{key:"find",value:function(r){var o=this.factories.find(function(u){return u.supports(r)});if(o)return o;throw new Error("Cannot find a differ supporting object '".concat(r,"'"))}}],[{key:"create",value:function(r,o){if(o){var u=o.factories.slice();r=r.concat(u)}return new a(r)}},{key:"extend",value:function(r){return{provide:a,useFactory:function(u){return a.create(r,u||p1())},deps:[[a,new $l,new Ua]]}}}]),a}();return n.\u0275prov=un({token:n,providedIn:"root",factory:p1}),n}(),wB=[new d1],EB=new Jm([new u1]),bB=new _h(wB),RB=ZP(null,"core",[{provide:U0,useValue:"unknown"},{provide:e1,deps:[Ui]},{provide:$P,deps:[]},{provide:jP,deps:[]}]),OB=[{provide:Xm,useClass:Xm,deps:[Di,Ui,Ql,Cc,yh]},{provide:V2,deps:[Di],useFactory:function(n){var a=[];return n.onStable.subscribe(function(){for(;a.length;)a.pop()()}),function(t){a.push(t)}}},{provide:yh,useClass:yh,deps:[[new Ua,W0]]},{provide:z0,useClass:z0,deps:[]},z3,{provide:Jm,useFactory:function(){return EB},deps:[]},{provide:_h,useFactory:function(){return bB},deps:[]},{provide:wc,useFactory:function(n){return n||"undefined"!=typeof $localize&&$localize.locale||D0},deps:[[new _d(wc),new Ua,new $l]]},{provide:qP,useValue:"USD"}],IB=function(){var n=function a(t){k(this,a)};return n.\u0275fac=function(t){return new(t||n)(Mt(Xm))},n.\u0275mod=_i({type:n}),n.\u0275inj=Vo({providers:OB}),n}(),q0=null;function Sc(){return q0}var NB=function n(){k(this,n)},_a=new On("DocumentToken"),Kd=function(){var n=function(){function a(){k(this,a)}return j(a,[{key:"historyGo",value:function(r){throw new Error("Not implemented")}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=un({token:n,factory:function(){return Mt(h1)},providedIn:"platform"}),n}(),GB=new On("Location Initialized"),h1=function(){var n=function(a){ve(r,a);var t=me(r);function r(o){var u;return k(this,r),(u=t.call(this))._doc=o,u._init(),u}return j(r,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return Sc().getBaseHref(this._doc)}},{key:"onPopState",value:function(u){var f=Sc().getGlobalEventTarget(this._doc,"window");return f.addEventListener("popstate",u,!1),function(){return f.removeEventListener("popstate",u)}}},{key:"onHashChange",value:function(u){var f=Sc().getGlobalEventTarget(this._doc,"window");return f.addEventListener("hashchange",u,!1),function(){return f.removeEventListener("hashchange",u)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(u){this.location.pathname=u}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(u,f,p){v1()?this._history.pushState(u,f,p):this.location.hash=p}},{key:"replaceState",value:function(u,f,p){v1()?this._history.replaceState(u,f,p):this.location.hash=p}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(u)}},{key:"getState",value:function(){return this._history.state}}]),r}(Kd);return n.\u0275fac=function(t){return new(t||n)(Mt(_a))},n.\u0275prov=un({token:n,factory:function(){return new h1(Mt(_a))},providedIn:"platform"}),n}();function v1(){return!!window.history.pushState}function yT(n,a){if(0==n.length)return a;if(0==a.length)return n;var t=0;return n.endsWith("/")&&t++,a.startsWith("/")&&t++,2==t?n+a.substring(1):1==t?n+a:n+"/"+a}function g1(n){var a=n.match(/#|\?|$/),t=a&&a.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function tl(n){return n&&"?"!==n[0]?"?"+n:n}var Ch=function(){var n=function(){function a(){k(this,a)}return j(a,[{key:"historyGo",value:function(r){throw new Error("Not implemented")}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=un({token:n,factory:function(){return a=Mt(_a).location,new m1(Mt(Kd),a&&a.origin||"");var a},providedIn:"root"}),n}(),_T=new On("appBaseHref"),m1=function(){var n=function(a){ve(r,a);var t=me(r);function r(o,u){var f;if(k(this,r),(f=t.call(this))._platformLocation=o,f._removeListenerFns=[],null==u&&(u=f._platformLocation.getBaseHrefFromDOM()),null==u)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return f._baseHref=u,f}return j(r,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(u){this._removeListenerFns.push(this._platformLocation.onPopState(u),this._platformLocation.onHashChange(u))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(u){return yT(this._baseHref,u)}},{key:"path",value:function(){var u=arguments.length>0&&void 0!==arguments[0]&&arguments[0],f=this._platformLocation.pathname+tl(this._platformLocation.search),p=this._platformLocation.hash;return p&&u?"".concat(f).concat(p):f}},{key:"pushState",value:function(u,f,p,v){var g=this.prepareExternalUrl(p+tl(v));this._platformLocation.pushState(u,f,g)}},{key:"replaceState",value:function(u,f,p,v){var g=this.prepareExternalUrl(p+tl(v));this._platformLocation.replaceState(u,f,g)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var f,p,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(p=(f=this._platformLocation).historyGo)||void 0===p||p.call(f,u)}}]),r}(Ch);return n.\u0275fac=function(t){return new(t||n)(Mt(Kd),Mt(_T,8))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),VB=function(){var n=function(a){ve(r,a);var t=me(r);function r(o,u){var f;return k(this,r),(f=t.call(this))._platformLocation=o,f._baseHref="",f._removeListenerFns=[],null!=u&&(f._baseHref=u),f}return j(r,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(u){this._removeListenerFns.push(this._platformLocation.onPopState(u),this._platformLocation.onHashChange(u))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var f=this._platformLocation.hash;return null==f&&(f="#"),f.length>0?f.substring(1):f}},{key:"prepareExternalUrl",value:function(u){var f=yT(this._baseHref,u);return f.length>0?"#"+f:f}},{key:"pushState",value:function(u,f,p,v){var g=this.prepareExternalUrl(p+tl(v));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.pushState(u,f,g)}},{key:"replaceState",value:function(u,f,p,v){var g=this.prepareExternalUrl(p+tl(v));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.replaceState(u,f,g)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var f,p,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(p=(f=this._platformLocation).historyGo)||void 0===p||p.call(f,u)}}]),r}(Ch);return n.\u0275fac=function(t){return new(t||n)(Mt(Kd),Mt(_T,8))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),CT=function(){var n=function(){function a(t,r){var o=this;k(this,a),this._subject=new Ee,this._urlChangeListeners=[],this._platformStrategy=t;var u=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=g1(y1(u)),this._platformStrategy.onPopState(function(f){o._subject.emit({url:o.path(!0),pop:!0,state:f.state,type:f.type})})}return j(a,[{key:"path",value:function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(r))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(r+tl(o))}},{key:"normalize",value:function(r){return a.stripTrailingSlash(function(n,a){return n&&a.startsWith(n)?a.substring(n.length):a}(this._baseHref,y1(r)))}},{key:"prepareExternalUrl",value:function(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}},{key:"go",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(u,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+tl(o)),u)}},{key:"replaceState",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(u,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+tl(o)),u)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var o,u,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(u=(o=this._platformStrategy).historyGo)||void 0===u||u.call(o,r)}},{key:"onUrlChange",value:function(r){var o=this;this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(u){o._notifyUrlChangeListeners(u.url,u.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(u){return u(r,o)})}},{key:"subscribe",value:function(r,o,u){return this._subject.subscribe({next:r,error:o,complete:u})}}]),a}();return n.normalizeQueryParams=tl,n.joinWithSlash=yT,n.stripTrailingSlash=g1,n.\u0275fac=function(t){return new(t||n)(Mt(Ch),Mt(Kd))},n.\u0275prov=un({token:n,factory:function(){return new CT(Mt(Ch),Mt(Kd))},providedIn:"root"}),n}();function y1(n){return n.replace(/\/index.html$/,"")}var li=function(){return(li=li||{})[li.Zero=0]="Zero",li[li.One=1]="One",li[li.Two=2]="Two",li[li.Few=3]="Few",li[li.Many=4]="Many",li[li.Other=5]="Other",li}(),XB=function(n){return function(n){var a=function(n){return n.toLowerCase().replace(/_/g,"-")}(n),t=OO(a);if(t)return t;var r=a.split("-")[0];if(t=OO(r))return t;if("en"===r)return MG;throw new Error('Missing locale data for the locale "'.concat(n,'".'))}(n)[mt.PluralCase]},nS=function n(){k(this,n)},xH=function(){var n=function(a){ve(r,a);var t=me(r);function r(o){var u;return k(this,r),(u=t.call(this)).locale=o,u}return j(r,[{key:"getPluralCategory",value:function(u,f){switch(XB(f||this.locale)(u)){case li.Zero:return"zero";case li.One:return"one";case li.Two:return"two";case li.Few:return"few";case li.Many:return"many";default:return"other"}}}]),r}(nS);return n.\u0275fac=function(t){return new(t||n)(Mt(wc))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}();function T1(n,a){a=encodeURIComponent(a);var r,t=Ot(n.split(";"));try{for(t.s();!(r=t.n()).done;){var o=r.value,u=o.indexOf("="),p=Ar(-1==u?[o,""]:[o.slice(0,u),o.slice(u+1)],2),g=p[1];if(p[0].trim()===a)return decodeURIComponent(g)}}catch(y){t.e(y)}finally{t.f()}return null}var DH=function(){function n(a,t,r,o){k(this,n),this.$implicit=a,this.ngForOf=t,this.index=r,this.count=o}return j(n,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),n}(),rl=function(){var n=function(){function a(t,r,o){k(this,a),this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return j(a,[{key:"ngForOf",set:function(r){this._ngForOf=r,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(r){this._trackByFn=r}},{key:"ngForTemplate",set:function(r){r&&(this._template=r)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var r=this._ngForOf;!this._differ&&r&&(this._differ=this._differs.find(r).create(this.ngForTrackBy))}if(this._differ){var o=this._differ.diff(this._ngForOf);o&&this._applyChanges(o)}}},{key:"_applyChanges",value:function(r){var o=this,u=this._viewContainer;r.forEachOperation(function(y,_,C){if(null==y.previousIndex)u.createEmbeddedView(o._template,new DH(y.item,o._ngForOf,-1,-1),null===C?void 0:C);else if(null==C)u.remove(null===_?void 0:_);else if(null!==_){var S=u.get(_);u.move(S,C),D1(S,y)}});for(var f=0,p=u.length;f<p;f++){var g=u.get(f).context;g.index=f,g.count=p,g.ngForOf=this._ngForOf}r.forEachIdentityChange(function(y){D1(u.get(y.currentIndex),y)})}}],[{key:"ngTemplateContextGuard",value:function(r,o){return!0}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(ya),lt(el),lt(Jm))},n.\u0275dir=Gi({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n}();function D1(n,a){n.context.$implicit=a.item}var $a=function(){var n=function(){function a(t,r){k(this,a),this._viewContainer=t,this._context=new AH,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}return j(a,[{key:"ngIf",set:function(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}},{key:"ngIfThen",set:function(r){A1("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(r){A1("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(r,o){return!0}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(ya),lt(el))},n.\u0275dir=Gi({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n}(),AH=function n(){k(this,n),this.$implicit=null,this.ngIf=null};function A1(n,a){if(a&&!a.createEmbeddedView)throw new Error("".concat(n," must be a TemplateRef, but received '").concat(Bn(a),"'."))}function Gs(n,a){return Error("InvalidPipeArgument: '".concat(a,"' for pipe '").concat(Bn(n),"'"))}var FH=function(){function n(){k(this,n)}return j(n,[{key:"createSubscription",value:function(t,r){return t.subscribe({next:r,error:function(u){throw u}})}},{key:"dispose",value:function(t){t.unsubscribe()}},{key:"onDestroy",value:function(t){t.unsubscribe()}}]),n}(),NH=function(){function n(){k(this,n)}return j(n,[{key:"createSubscription",value:function(t,r){return t.then(r,function(o){throw o})}},{key:"dispose",value:function(t){}},{key:"onDestroy",value:function(t){}}]),n}(),kH=new NH,GH=new FH,OT=function(){var n=function(){function a(t){k(this,a),this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}return j(a,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(r){return this._obj?r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue:(r&&this._subscribe(r),this._latestValue)}},{key:"_subscribe",value:function(r){var o=this;this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,function(u){return o._updateLatestValue(r,u)})}},{key:"_selectStrategy",value:function(r){if(U(r))return kH;if(K(r))return GH;throw Gs(a,r)}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(r,o){r===this._obj&&(this._latestValue=o,this._ref.markForCheck())}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(j0,16))},n.\u0275pipe=lo({name:"async",type:n,pure:!1}),n}(),HH=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,O1=function(){var n=function(){function a(){k(this,a)}return j(a,[{key:"transform",value:function(r){if(null==r)return null;if("string"!=typeof r)throw Gs(a,r);return r.replace(HH,function(o){return o[0].toUpperCase()+o.substr(1).toLowerCase()})}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=lo({name:"titlecase",type:n,pure:!0}),n}(),eV=function(){var n=function a(){k(this,a)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_i({type:n}),n.\u0275inj=Vo({providers:[{provide:nS,useClass:xH}]}),n}(),iV=function(){var n=function a(){k(this,a)};return n.\u0275prov=un({token:n,providedIn:"root",factory:function(){return new oV(Mt(_a),window)}}),n}(),oV=function(){function n(a,t){k(this,n),this.document=a,this.window=t,this.offset=function(){return[0,0]}}return j(n,[{key:"setOffset",value:function(t){this.offset=Array.isArray(t)?function(){return t}:t}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}},{key:"scrollToAnchor",value:function(t){if(this.supportsScrolling()){var r=function(n,a){var t=n.getElementById(a)||n.getElementsByName(a)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow))for(var r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;o;){var u=o.shadowRoot;if(u){var f=u.getElementById(a)||u.querySelector('[name="'.concat(a,'"]'));if(f)return f}o=r.nextNode()}return null}(this.document,t);r&&(this.scrollToElement(r),this.attemptFocus(r))}}},{key:"setHistoryScrollRestoration",value:function(t){if(this.supportScrollRestoration()){var r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=t)}}},{key:"scrollToElement",value:function(t){var r=t.getBoundingClientRect(),o=r.left+this.window.pageXOffset,u=r.top+this.window.pageYOffset,f=this.offset();this.window.scrollTo(o-f[0],u-f[1])}},{key:"attemptFocus",value:function(t){return t.focus(),this.document.activeElement===t}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var t=L1(this.window.history)||L1(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(r){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}]),n}();function L1(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}var rS,LT=function n(){k(this,n)},sV=function(n){ve(t,n);var a=me(t);function t(){var r;return k(this,t),(r=a.apply(this,arguments)).supportsDOMEvents=!0,r}return t}(NB),uV=function(n){ve(t,n);var a=me(t);function t(){return k(this,t),a.apply(this,arguments)}return j(t,[{key:"onAndCancel",value:function(o,u,f){return o.addEventListener(u,f,!1),function(){o.removeEventListener(u,f,!1)}}},{key:"dispatchEvent",value:function(o,u){o.dispatchEvent(u)}},{key:"remove",value:function(o){o.parentNode&&o.parentNode.removeChild(o)}},{key:"createElement",value:function(o,u){return(u=u||this.getDefaultDocument()).createElement(o)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(o){return o.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(o){return o instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(o,u){return"window"===u?window:"document"===u?o:"body"===u?o.body:null}},{key:"getBaseHref",value:function(o){var u=(ey=ey||document.querySelector("base"))?ey.getAttribute("href"):null;return null==u?null:function(n){(rS=rS||document.createElement("a")).setAttribute("href",n);var a=rS.pathname;return"/"===a.charAt(0)?a:"/".concat(a)}(u)}},{key:"resetBaseElement",value:function(){ey=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(o){return T1(document.cookie,o)}}],[{key:"makeCurrent",value:function(){!function(n){q0||(q0=n)}(new t)}}]),t}(sV),ey=null,F1=new On("TRANSITION_ID"),fV=[{provide:W0,useFactory:function(n,a,t){return function(){t.get(yh).donePromise.then(function(){for(var r=Sc(),o=a.querySelectorAll('style[ng-transition="'.concat(n,'"]')),u=0;u<o.length;u++)r.remove(o[u])})}},deps:[F1,_a,Ui],multi:!0}],pV=function(){function n(){k(this,n)}return j(n,[{key:"addToWindow",value:function(t){rr.getAngularTestability=function(o){var u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],f=t.findTestabilityInTree(o,u);if(null==f)throw new Error("Could not find testability for element.");return f},rr.getAllAngularTestabilities=function(){return t.getAllTestabilities()},rr.getAllAngularRootElements=function(){return t.getAllRootElements()},rr.frameworkStabilizers||(rr.frameworkStabilizers=[]),rr.frameworkStabilizers.push(function(u){var f=rr.getAllAngularTestabilities(),p=f.length,v=!1,g=function(_){v=v||_,0==--p&&u(v)};f.forEach(function(y){y.whenStable(g)})})}},{key:"findTestabilityInTree",value:function(t,r,o){if(null==r)return null;var u=t.getTestability(r);return null!=u?u:o?Sc().isShadowRoot(r)?this.findTestabilityInTree(t,r.host,!0):this.findTestabilityInTree(t,r.parentElement,!0):null}}],[{key:"init",value:function(){!function(n){dT=n}(new n)}}]),n}(),hV=function(){var n=function(){function a(){k(this,a)}return j(a,[{key:"build",value:function(){return new XMLHttpRequest}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),iS=new On("EventManagerPlugins"),oS=function(){var n=function(){function a(t,r){var o=this;k(this,a),this._zone=r,this._eventNameToPlugin=new Map,t.forEach(function(u){return u.manager=o}),this._plugins=t.slice().reverse()}return j(a,[{key:"addEventListener",value:function(r,o,u){return this._findPluginFor(o).addEventListener(r,o,u)}},{key:"addGlobalEventListener",value:function(r,o,u){return this._findPluginFor(o).addGlobalEventListener(r,o,u)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(r){var o=this._eventNameToPlugin.get(r);if(o)return o;for(var u=this._plugins,f=0;f<u.length;f++){var p=u[f];if(p.supports(r))return this._eventNameToPlugin.set(r,p),p}throw new Error("No event manager plugin found for event ".concat(r))}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(iS),Mt(Di))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),N1=function(){function n(a){k(this,n),this._doc=a}return j(n,[{key:"addGlobalEventListener",value:function(t,r,o){var u=Sc().getGlobalEventTarget(this._doc,t);if(!u)throw new Error("Unsupported event target ".concat(u," for event ").concat(r));return this.addEventListener(u,r,o)}}]),n}(),k1=function(){var n=function(){function a(){k(this,a),this._stylesSet=new Set}return j(a,[{key:"addStyles",value:function(r){var o=this,u=new Set;r.forEach(function(f){o._stylesSet.has(f)||(o._stylesSet.add(f),u.add(f))}),this.onStylesAdded(u)}},{key:"onStylesAdded",value:function(r){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),ty=function(){var n=function(a){ve(r,a);var t=me(r);function r(o){var u;return k(this,r),(u=t.call(this))._doc=o,u._hostNodes=new Map,u._hostNodes.set(o.head,[]),u}return j(r,[{key:"_addStylesToHost",value:function(u,f,p){var v=this;u.forEach(function(g){var y=v._doc.createElement("style");y.textContent=g,p.push(f.appendChild(y))})}},{key:"addHost",value:function(u){var f=[];this._addStylesToHost(this._stylesSet,u,f),this._hostNodes.set(u,f)}},{key:"removeHost",value:function(u){var f=this._hostNodes.get(u);f&&f.forEach(G1),this._hostNodes.delete(u)}},{key:"onStylesAdded",value:function(u){var f=this;this._hostNodes.forEach(function(p,v){f._addStylesToHost(u,v,p)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(u){return u.forEach(G1)})}}]),r}(k1);return n.\u0275fac=function(t){return new(t||n)(Mt(_a))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}();function G1(n){Sc().remove(n)}var FT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},NT=/%COMP%/g,vV="_nghost-".concat("%COMP%"),gV="_ngcontent-".concat("%COMP%");function aS(n,a,t){for(var r=0;r<a.length;r++){var o=a[r];Array.isArray(o)?aS(n,o,t):(o=o.replace(NT,n),t.push(o))}return t}function V1(n){return function(a){if("__ngUnwrap__"===a)return n;!1===n(a)&&(a.preventDefault(),a.returnValue=!1)}}var kT=function(){var n=function(){function a(t,r,o){k(this,a),this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new GT(t)}return j(a,[{key:"createRenderer",value:function(r,o){if(!r||!o)return this.defaultRenderer;switch(o.encapsulation){case Oa.Emulated:var u=this.rendererByCompId.get(o.id);return u||(u=new CV(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,u)),u.applyToHost(r),u;case 1:case Oa.ShadowDom:return new wV(this.eventManager,this.sharedStylesHost,r,o);default:if(!this.rendererByCompId.has(o.id)){var f=aS(o.id,o.styles,[]);this.sharedStylesHost.addStyles(f),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(oS),Mt(ty),Mt($m))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),GT=function(){function n(a){k(this,n),this.eventManager=a,this.data=Object.create(null),this.destroyNode=null}return j(n,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,r){return r?document.createElementNS(FT[r]||r,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,r){t.appendChild(r)}},{key:"insertBefore",value:function(t,r,o){t&&t.insertBefore(r,o)}},{key:"removeChild",value:function(t,r){t&&t.removeChild(r)}},{key:"selectRootElement",value:function(t,r){var o="string"==typeof t?document.querySelector(t):t;if(!o)throw new Error('The selector "'.concat(t,'" did not match any elements'));return r||(o.textContent=""),o}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,r,o,u){if(u){r=u+":"+r;var f=FT[u];f?t.setAttributeNS(f,r,o):t.setAttribute(r,o)}else t.setAttribute(r,o)}},{key:"removeAttribute",value:function(t,r,o){if(o){var u=FT[o];u?t.removeAttributeNS(u,r):t.removeAttribute("".concat(o,":").concat(r))}else t.removeAttribute(r)}},{key:"addClass",value:function(t,r){t.classList.add(r)}},{key:"removeClass",value:function(t,r){t.classList.remove(r)}},{key:"setStyle",value:function(t,r,o,u){u&(Ao.DashCase|Ao.Important)?t.style.setProperty(r,o,u&Ao.Important?"important":""):t.style[r]=o}},{key:"removeStyle",value:function(t,r,o){o&Ao.DashCase?t.style.removeProperty(r):t.style[r]=""}},{key:"setProperty",value:function(t,r,o){t[r]=o}},{key:"setValue",value:function(t,r){t.nodeValue=r}},{key:"listen",value:function(t,r,o){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,r,V1(o)):this.eventManager.addEventListener(t,r,V1(o))}}]),n}(),CV=function(n){ve(t,n);var a=me(t);function t(r,o,u,f){var p;k(this,t),(p=a.call(this,r)).component=u;var v=aS(f+"-"+u.id,u.styles,[]);return o.addStyles(v),p.contentAttr=function(n){return gV.replace(NT,n)}(f+"-"+u.id),p.hostAttr=function(n){return vV.replace(NT,n)}(f+"-"+u.id),p}return j(t,[{key:"applyToHost",value:function(o){Ce(Ue(t.prototype),"setAttribute",this).call(this,o,this.hostAttr,"")}},{key:"createElement",value:function(o,u){var f=Ce(Ue(t.prototype),"createElement",this).call(this,o,u);return Ce(Ue(t.prototype),"setAttribute",this).call(this,f,this.contentAttr,""),f}}]),t}(GT),wV=function(n){ve(t,n);var a=me(t);function t(r,o,u,f){var p;k(this,t),(p=a.call(this,r)).sharedStylesHost=o,p.hostEl=u,p.shadowRoot=u.attachShadow({mode:"open"}),p.sharedStylesHost.addHost(p.shadowRoot);for(var v=aS(f.id,f.styles,[]),g=0;g<v.length;g++){var y=document.createElement("style");y.textContent=v[g],p.shadowRoot.appendChild(y)}return p}return j(t,[{key:"nodeOrShadowRoot",value:function(o){return o===this.hostEl?this.shadowRoot:o}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(o,u){return Ce(Ue(t.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(o),u)}},{key:"insertBefore",value:function(o,u,f){return Ce(Ue(t.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(o),u,f)}},{key:"removeChild",value:function(o,u){return Ce(Ue(t.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(o),u)}},{key:"parentNode",value:function(o){return this.nodeOrShadowRoot(Ce(Ue(t.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(o)))}}]),t}(GT),SV=function(){var n=function(a){ve(r,a);var t=me(r);function r(o){return k(this,r),t.call(this,o)}return j(r,[{key:"supports",value:function(u){return!0}},{key:"addEventListener",value:function(u,f,p){var v=this;return u.addEventListener(f,p,!1),function(){return v.removeEventListener(u,f,p)}}},{key:"removeEventListener",value:function(u,f,p){return u.removeEventListener(f,p)}}]),r}(N1);return n.\u0275fac=function(t){return new(t||n)(Mt(_a))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),U1=["alt","control","meta","shift"],bV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z1={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xV={alt:function(a){return a.altKey},control:function(a){return a.ctrlKey},meta:function(a){return a.metaKey},shift:function(a){return a.shiftKey}},RV=function(){var n=function(a){ve(r,a);var t=me(r);function r(o){return k(this,r),t.call(this,o)}return j(r,[{key:"supports",value:function(u){return null!=r.parseEventName(u)}},{key:"addEventListener",value:function(u,f,p){var v=r.parseEventName(f),g=r.eventCallback(v.fullKey,p,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Sc().onAndCancel(u,v.domEventName,g)})}}],[{key:"parseEventName",value:function(u){var f=u.toLowerCase().split("."),p=f.shift();if(0===f.length||"keydown"!==p&&"keyup"!==p)return null;var v=r._normalizeKey(f.pop()),g="";if(U1.forEach(function(_){var C=f.indexOf(_);C>-1&&(f.splice(C,1),g+=_+".")}),g+=v,0!=f.length||0===v.length)return null;var y={};return y.domEventName=p,y.fullKey=g,y}},{key:"getEventFullKey",value:function(u){var f="",p=function(n){var a=n.key;if(null==a){if(null==(a=n.keyIdentifier))return"Unidentified";a.startsWith("U+")&&(a=String.fromCharCode(parseInt(a.substring(2),16)),3===n.location&&z1.hasOwnProperty(a)&&(a=z1[a]))}return bV[a]||a}(u);return" "===(p=p.toLowerCase())?p="space":"."===p&&(p="dot"),U1.forEach(function(v){v!=p&&(0,xV[v])(u)&&(f+=v+".")}),f+=p}},{key:"eventCallback",value:function(u,f,p){return function(v){r.getEventFullKey(v)===u&&p.runGuarded(function(){return f(v)})}}},{key:"_normalizeKey",value:function(u){return"esc"===u?"escape":u}}]),r}(N1);return n.\u0275fac=function(t){return new(t||n)(Mt(_a))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),OV=[{provide:U0,useValue:"browser"},{provide:UP,useValue:function(){uV.makeCurrent(),pV.init()},multi:!0},{provide:_a,useFactory:function(){return function(n){eg=n}(document),document},deps:[]}],PV=ZP(RB,"browser",OV),IV=[{provide:Qp,useValue:"root"},{provide:Ql,useFactory:function(){return new Ql},deps:[]},{provide:iS,useClass:SV,multi:!0,deps:[_a,Di,U0]},{provide:iS,useClass:RV,multi:!0,deps:[_a]},{provide:kT,useClass:kT,deps:[oS,ty,$m]},{provide:aP,useExisting:kT},{provide:k1,useExisting:ty},{provide:ty,useClass:ty,deps:[_a]},{provide:cT,useClass:cT,deps:[Di]},{provide:oS,useClass:oS,deps:[iS,Di]},{provide:LT,useClass:hV,deps:[]}],LV=function(){var n=function(){function a(t){if(k(this,a),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return j(a,null,[{key:"withServerTransition",value:function(r){return{ngModule:a,providers:[{provide:$m,useValue:r.appId},{provide:F1,useExisting:$m},fV]}}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(n,12))},n.\u0275mod=_i({type:n}),n.\u0275inj=Vo({providers:IV,imports:[eV,IB]}),n}();function sn(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];var r=$(a);return Xr(a,r)}function wh(n,a){return xn(a)?$r(n,a,1):$r(n,1)}function Yd(n,a){return oi(function(t,r){var o=0;t.subscribe(new vn(r,function(u){return n.call(a,u,o++)&&r.next(u)}))})}"undefined"!=typeof window&&window;var K1=function n(){k(this,n)},Y1=function n(){k(this,n)},ny=function(){function n(a){var t=this;k(this,n),this.normalizedNames=new Map,this.lazyUpdate=null,a?this.lazyInit="string"==typeof a?function(){t.headers=new Map,a.split("\n").forEach(function(r){var o=r.indexOf(":");if(o>0){var u=r.slice(0,o),f=u.toLowerCase(),p=r.slice(o+1).trim();t.maybeSetNormalizedName(u,f),t.headers.has(f)?t.headers.get(f).push(p):t.headers.set(f,[p])}})}:function(){t.headers=new Map,Object.keys(a).forEach(function(r){var o=a[r],u=r.toLowerCase();"string"==typeof o&&(o=[o]),o.length>0&&(t.headers.set(u,o),t.maybeSetNormalizedName(r,u))})}:this.headers=new Map}return j(n,[{key:"has",value:function(t){return this.init(),this.headers.has(t.toLowerCase())}},{key:"get",value:function(t){this.init();var r=this.headers.get(t.toLowerCase());return r&&r.length>0?r[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(t){return this.init(),this.headers.get(t.toLowerCase())||null}},{key:"append",value:function(t,r){return this.clone({name:t,value:r,op:"a"})}},{key:"set",value:function(t,r){return this.clone({name:t,value:r,op:"s"})}},{key:"delete",value:function(t,r){return this.clone({name:t,value:r,op:"d"})}},{key:"maybeSetNormalizedName",value:function(t,r){this.normalizedNames.has(r)||this.normalizedNames.set(r,t)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(r){return t.applyUpdate(r)}),this.lazyUpdate=null))}},{key:"copyFrom",value:function(t){var r=this;t.init(),Array.from(t.headers.keys()).forEach(function(o){r.headers.set(o,t.headers.get(o)),r.normalizedNames.set(o,t.normalizedNames.get(o))})}},{key:"clone",value:function(t){var r=new n;return r.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,r.lazyUpdate=(this.lazyUpdate||[]).concat([t]),r}},{key:"applyUpdate",value:function(t){var r=t.name.toLowerCase();switch(t.op){case"a":case"s":var o=t.value;if("string"==typeof o&&(o=[o]),0===o.length)return;this.maybeSetNormalizedName(t.name,r);var u=("a"===t.op?this.headers.get(r):void 0)||[];u.push.apply(u,An(o)),this.headers.set(r,u);break;case"d":var f=t.value;if(f){var p=this.headers.get(r);if(!p)return;0===(p=p.filter(function(v){return-1===f.indexOf(v)})).length?(this.headers.delete(r),this.normalizedNames.delete(r)):this.headers.set(r,p)}else this.headers.delete(r),this.normalizedNames.delete(r)}}},{key:"forEach",value:function(t){var r=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(o){return t(r.normalizedNames.get(o),r.headers.get(o))})}}]),n}(),UV=function(){function n(){k(this,n)}return j(n,[{key:"encodeKey",value:function(t){return $1(t)}},{key:"encodeValue",value:function(t){return $1(t)}},{key:"decodeKey",value:function(t){return decodeURIComponent(t)}},{key:"decodeValue",value:function(t){return decodeURIComponent(t)}}]),n}();function zV(n,a){var t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(function(o){var u=o.indexOf("="),p=Ar(-1==u?[a.decodeKey(o),""]:[a.decodeKey(o.slice(0,u)),a.decodeValue(o.slice(u+1))],2),v=p[0],g=p[1],y=t.get(v)||[];y.push(g),t.set(v,y)}),t}var jV=/%(\d[a-f0-9])/gi,qV={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function $1(n){return encodeURIComponent(n).replace(jV,function(a,t){var r;return null!==(r=qV[t])&&void 0!==r?r:a})}function X1(n){return"".concat(n)}var Sh=function(){function n(){var a=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(k(this,n),this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new UV,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=zV(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(function(r){var o=t.fromObject[r];a.map.set(r,Array.isArray(o)?o:[o])})):this.map=null}return j(n,[{key:"has",value:function(t){return this.init(),this.map.has(t)}},{key:"get",value:function(t){this.init();var r=this.map.get(t);return r?r[0]:null}},{key:"getAll",value:function(t){return this.init(),this.map.get(t)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(t,r){return this.clone({param:t,value:r,op:"a"})}},{key:"appendAll",value:function(t){var r=[];return Object.keys(t).forEach(function(o){var u=t[o];Array.isArray(u)?u.forEach(function(f){r.push({param:o,value:f,op:"a"})}):r.push({param:o,value:u,op:"a"})}),this.clone(r)}},{key:"set",value:function(t,r){return this.clone({param:t,value:r,op:"s"})}},{key:"delete",value:function(t,r){return this.clone({param:t,value:r,op:"d"})}},{key:"toString",value:function(){var t=this;return this.init(),this.keys().map(function(r){var o=t.encoder.encodeKey(r);return t.map.get(r).map(function(u){return o+"="+t.encoder.encodeValue(u)}).join("&")}).filter(function(r){return""!==r}).join("&")}},{key:"clone",value:function(t){var r=new n({encoder:this.encoder});return r.cloneFrom=this.cloneFrom||this,r.updates=(this.updates||[]).concat(t),r}},{key:"init",value:function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(r){return t.map.set(r,t.cloneFrom.map.get(r))}),this.updates.forEach(function(r){switch(r.op){case"a":case"s":var o=("a"===r.op?t.map.get(r.param):void 0)||[];o.push(X1(r.value)),t.map.set(r.param,o);break;case"d":if(void 0===r.value){t.map.delete(r.param);break}var u=t.map.get(r.param)||[],f=u.indexOf(X1(r.value));-1!==f&&u.splice(f,1),u.length>0?t.map.set(r.param,u):t.map.delete(r.param)}}),this.cloneFrom=this.updates=null)}}]),n}(),KV=function(){function n(){k(this,n),this.map=new Map}return j(n,[{key:"set",value:function(t,r){return this.map.set(t,r),this}},{key:"get",value:function(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}},{key:"delete",value:function(t){return this.map.delete(t),this}},{key:"has",value:function(t){return this.map.has(t)}},{key:"keys",value:function(){return this.map.keys()}}]),n}();function J1(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Z1(n){return"undefined"!=typeof Blob&&n instanceof Blob}function Q1(n){return"undefined"!=typeof FormData&&n instanceof FormData}var HT=function(){function n(a,t,r,o){var u;if(k(this,n),this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=a.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,u=o):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new ny),this.context||(this.context=new KV),this.params){var f=this.params.toString();if(0===f.length)this.urlWithParams=t;else{var p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+f}}else this.params=new Sh,this.urlWithParams=t}return j(n,[{key:"serializeBody",value:function(){return null===this.body?null:J1(this.body)||Z1(this.body)||Q1(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Sh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||Q1(this.body)?null:Z1(this.body)?this.body.type||null:J1(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Sh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}},{key:"clone",value:function(){var r,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.method||this.method,u=t.url||this.url,f=t.responseType||this.responseType,p=void 0!==t.body?t.body:this.body,v=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,g=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,y=t.headers||this.headers,_=t.params||this.params,C=null!==(r=t.context)&&void 0!==r?r:this.context;return void 0!==t.setHeaders&&(y=Object.keys(t.setHeaders).reduce(function(S,x){return S.set(x,t.setHeaders[x])},y)),t.setParams&&(_=Object.keys(t.setParams).reduce(function(S,x){return S.set(x,t.setParams[x])},_)),new n(o,u,p,{params:_,headers:y,context:C,reportProgress:g,responseType:f,withCredentials:v})}}]),n}(),di=function(){return(di=di||{})[di.Sent=0]="Sent",di[di.UploadProgress=1]="UploadProgress",di[di.ResponseHeader=2]="ResponseHeader",di[di.DownloadProgress=3]="DownloadProgress",di[di.Response=4]="Response",di[di.User=5]="User",di}(),VT=function n(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";k(this,n),this.headers=a.headers||new ny,this.status=void 0!==a.status?a.status:t,this.statusText=a.statusText||r,this.url=a.url||null,this.ok=this.status>=200&&this.status<300},XV=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,t),(r=a.call(this,o)).type=di.ResponseHeader,r}return j(t,[{key:"clone",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t({headers:o.headers||this.headers,status:void 0!==o.status?o.status:this.status,statusText:o.statusText||this.statusText,url:o.url||this.url||void 0})}}]),t}(VT),eI=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(this,t),(r=a.call(this,o)).type=di.Response,r.body=void 0!==o.body?o.body:null,r}return j(t,[{key:"clone",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t({body:void 0!==o.body?o.body:this.body,headers:o.headers||this.headers,status:void 0!==o.status?o.status:this.status,statusText:o.statusText||this.statusText,url:o.url||this.url||void 0})}}]),t}(VT),tI=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this,r,0,"Unknown Error")).name="HttpErrorResponse",o.ok=!1,o.message=o.status>=200&&o.status<300?"Http failure during parsing for ".concat(r.url||"(unknown url)"):"Http failure response for ".concat(r.url||"(unknown url)",": ").concat(r.status," ").concat(r.statusText),o.error=r.error||null,o}return t}(VT);function WT(n,a){return{body:a,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}var Bs=function(){var n=function(){function a(t){k(this,a),this.handler=t}return j(a,[{key:"request",value:function(r,o){var p,u=this,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r instanceof HT)p=r;else{var v=void 0;v=f.headers instanceof ny?f.headers:new ny(f.headers);var g=void 0;f.params&&(g=f.params instanceof Sh?f.params:new Sh({fromObject:f.params})),p=new HT(r,o,void 0!==f.body?f.body:null,{headers:v,context:f.context,params:g,reportProgress:f.reportProgress,responseType:f.responseType||"json",withCredentials:f.withCredentials})}var y=sn(p).pipe(wh(function(C){return u.handler.handle(C)}));if(r instanceof HT||"events"===f.observe)return y;var _=y.pipe(Yd(function(C){return C instanceof eI}));switch(f.observe||"body"){case"body":switch(p.responseType){case"arraybuffer":return _.pipe(Yn(function(C){if(null!==C.body&&!(C.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return C.body}));case"blob":return _.pipe(Yn(function(C){if(null!==C.body&&!(C.body instanceof Blob))throw new Error("Response is not a Blob.");return C.body}));case"text":return _.pipe(Yn(function(C){if(null!==C.body&&"string"!=typeof C.body)throw new Error("Response is not a string.");return C.body}));default:return _.pipe(Yn(function(C){return C.body}))}case"response":return _;default:throw new Error("Unreachable: unhandled observe type ".concat(f.observe,"}"))}}},{key:"delete",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",r,o)}},{key:"get",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",r,o)}},{key:"head",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",r,o)}},{key:"jsonp",value:function(r,o){return this.request("JSONP",r,{params:(new Sh).append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",r,o)}},{key:"patch",value:function(r,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",r,WT(u,o))}},{key:"post",value:function(r,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",r,WT(u,o))}},{key:"put",value:function(r,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",r,WT(u,o))}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(K1))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),nI=function(){function n(a,t){k(this,n),this.next=a,this.interceptor=t}return j(n,[{key:"handle",value:function(t){return this.interceptor.intercept(t,this.next)}}]),n}(),rI=new On("HTTP_INTERCEPTORS"),JV=function(){var n=function(){function a(){k(this,a)}return j(a,[{key:"intercept",value:function(r,o){return o.handle(r)}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),ZV=/^\)\]\}',?\n/,iI=function(){var n=function(){function a(t){k(this,a),this.xhrFactory=t}return j(a,[{key:"handle",value:function(r){var o=this;if("JSONP"===r.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Cr(function(u){var f=o.xhrFactory.build();if(f.open(r.method,r.urlWithParams),r.withCredentials&&(f.withCredentials=!0),r.headers.forEach(function(D,A){return f.setRequestHeader(D,A.join(","))}),r.headers.has("Accept")||f.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){var p=r.detectContentTypeHeader();null!==p&&f.setRequestHeader("Content-Type",p)}if(r.responseType){var v=r.responseType.toLowerCase();f.responseType="json"!==v?v:"text"}var g=r.serializeBody(),y=null,_=function(){if(null!==y)return y;var A=1223===f.status?204:f.status,M=f.statusText||"OK",O=new ny(f.getAllResponseHeaders()),I=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(f)||r.url;return y=new XV({headers:O,status:A,statusText:M,url:I})},C=function(){var A=_(),M=A.headers,O=A.status,I=A.statusText,B=A.url,z=null;204!==O&&(z=void 0===f.response?f.responseText:f.response),0===O&&(O=z?200:0);var P=O>=200&&O<300;if("json"===r.responseType&&"string"==typeof z){var W=z;z=z.replace(ZV,"");try{z=""!==z?JSON.parse(z):null}catch(X){z=W,P&&(P=!1,z={error:X,text:z})}}P?(u.next(new eI({body:z,headers:M,status:O,statusText:I,url:B||void 0})),u.complete()):u.error(new tI({error:z,headers:M,status:O,statusText:I,url:B||void 0}))},S=function(A){var M=_(),I=new tI({error:A,status:f.status||0,statusText:f.statusText||"Unknown Error",url:M.url||void 0});u.error(I)},x=!1,b=function(A){x||(u.next(_()),x=!0);var M={type:di.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(M.total=A.total),"text"===r.responseType&&!!f.responseText&&(M.partialText=f.responseText),u.next(M)},E=function(A){var M={type:di.UploadProgress,loaded:A.loaded};A.lengthComputable&&(M.total=A.total),u.next(M)};return f.addEventListener("load",C),f.addEventListener("error",S),f.addEventListener("timeout",S),f.addEventListener("abort",S),r.reportProgress&&(f.addEventListener("progress",b),null!==g&&f.upload&&f.upload.addEventListener("progress",E)),f.send(g),u.next({type:di.Sent}),function(){f.removeEventListener("error",S),f.removeEventListener("abort",S),f.removeEventListener("load",C),f.removeEventListener("timeout",S),r.reportProgress&&(f.removeEventListener("progress",b),null!==g&&f.upload&&f.upload.removeEventListener("progress",E)),f.readyState!==f.DONE&&f.abort()}})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(LT))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),UT=new On("XSRF_COOKIE_NAME"),zT=new On("XSRF_HEADER_NAME"),oI=function n(){k(this,n)},eW=function(){var n=function(){function a(t,r,o){k(this,a),this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return j(a,[{key:"getToken",value:function(){if("server"===this.platform)return null;var r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=T1(r,this.cookieName),this.lastCookieString=r),this.lastToken}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(_a),Mt(U0),Mt(UT))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),jT=function(){var n=function(){function a(t,r){k(this,a),this.tokenService=t,this.headerName=r}return j(a,[{key:"intercept",value:function(r,o){var u=r.url.toLowerCase();if("GET"===r.method||"HEAD"===r.method||u.startsWith("http://")||u.startsWith("https://"))return o.handle(r);var f=this.tokenService.getToken();return null!==f&&!r.headers.has(this.headerName)&&(r=r.clone({headers:r.headers.set(this.headerName,f)})),o.handle(r)}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(oI),Mt(zT))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),tW=function(){var n=function(){function a(t,r){k(this,a),this.backend=t,this.injector=r,this.chain=null}return j(a,[{key:"handle",value:function(r){if(null===this.chain){var o=this.injector.get(rI,[]);this.chain=o.reduceRight(function(u,f){return new nI(u,f)},this.backend)}return this.chain.handle(r)}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(Y1),Mt(Ui))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),nW=function(){var n=function(){function a(){k(this,a)}return j(a,null,[{key:"disable",value:function(){return{ngModule:a,providers:[{provide:jT,useClass:JV}]}}},{key:"withOptions",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:a,providers:[r.cookieName?{provide:UT,useValue:r.cookieName}:[],r.headerName?{provide:zT,useValue:r.headerName}:[]]}}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_i({type:n}),n.\u0275inj=Vo({providers:[jT,{provide:rI,useExisting:jT,multi:!0},{provide:oI,useClass:eW},{provide:UT,useValue:"XSRF-TOKEN"},{provide:zT,useValue:"X-XSRF-TOKEN"}]}),n}(),rW=function(){var n=function a(){k(this,a)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_i({type:n}),n.\u0275inj=Vo({providers:[Bs,{provide:K1,useClass:tW},iI,{provide:Y1,useExisting:iI}],imports:[[nW.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n}(),Hs=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this))._value=r,o}return j(t,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(o){var u=Ce(Ue(t.prototype),"_subscribe",this).call(this,o);return!u.closed&&o.next(this._value),u}},{key:"getValue",value:function(){var f=this._value;if(this.hasError)throw this.thrownError;return this._throwIfClosed(),f}},{key:"next",value:function(o){Ce(Ue(t.prototype),"next",this).call(this,this._value=o)}}]),t}(ds),iW=Array.isArray,oW=Object.getPrototypeOf,aW=Object.prototype,sW=Object.keys;function uW(n){if(1===n.length){var a=n[0];if(iW(a))return{args:a,keys:null};if(function(n){return n&&"object"==typeof n&&oW(n)===aW}(a)){var t=sW(a);return{args:t.map(function(r){return a[r]}),keys:t}}}return{args:n,keys:null}}var cW=Array.isArray;function fW(n){return Yn(function(a){return function(n,a){return cW(a)?n.apply(void 0,An(a)):n(a)}(n,a)})}function pW(n,a){return n.reduce(function(t,r,o){return t[r]=a[o],t},{})}function vW(n,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ii;return function(r){aI(a,function(){for(var o=n.length,u=new Array(o),f=o,p=o,v=function(_){aI(a,function(){var C=Xr(n[_],a),S=!1;C.subscribe(new vn(r,function(x){u[_]=x,S||(S=!0,p--),p||r.next(t(u.slice()))},function(){--f||r.complete()}))},r)},g=0;g<o;g++)v(g)},r)}}function aI(n,a,t){n?fs(t,n,a):a()}var sS=El(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function gW(){return zc(1)}function qT(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];return gW()(Xr(a,$(a)))}function sI(n){return new Cr(function(a){so(n()).subscribe(a)})}function uI(){return oi(function(n,a){var t=null;n._refCount++;var r=new vn(a,void 0,void 0,void 0,function(){if(!n||n._refCount<=0||0<--n._refCount)t=null;else{var o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),a.unsubscribe()}});n.subscribe(r),r.closed||(t=n.connect())})}var mW=function(n){ve(t,n);var a=me(t);function t(r,o){var u;return k(this,t),(u=a.call(this)).source=r,u.subjectFactory=o,u._subject=null,u._refCount=0,u._connection=null,d_(r)&&(u.lift=r.lift),u}return j(t,[{key:"_subscribe",value:function(o){return this.getSubject().subscribe(o)}},{key:"getSubject",value:function(){var o=this._subject;return(!o||o.isStopped)&&(this._subject=this.subjectFactory()),this._subject}},{key:"_teardown",value:function(){this._refCount=0;var o=this._connection;this._subject=this._connection=null,null==o||o.unsubscribe()}},{key:"connect",value:function(){var o=this,u=this._connection;if(!u){u=this._connection=new nt;var f=this.getSubject();u.add(this.source.subscribe(new vn(f,void 0,function(){o._teardown(),f.complete()},function(p){o._teardown(),f.error(p)},function(){return o._teardown()}))),u.closed&&(this._connection=null,u=nt.EMPTY)}return u}},{key:"refCount",value:function(){return uI()(this)}}]),t}(Cr);function $d(n,a){return oi(function(t,r){var o=null,u=0,f=!1,p=function(){return f&&!o&&r.complete()};t.subscribe(new vn(r,function(v){null==o||o.unsubscribe();var g=0,y=u++;so(n(v,y)).subscribe(o=new vn(r,function(_){return r.next(a?a(v,_,y,g++):_)},function(){o=null,p()}))},function(){f=!0,p()}))})}function _W(n,a,t,r,o){return function(u,f){var p=t,v=a,g=0;u.subscribe(new vn(f,function(y){var _=g++;v=p?n(v,y,_):(p=!0,y),r&&f.next(v)},o&&function(){p&&f.next(v),f.complete()}))}}function lI(n,a){return oi(_W(n,a,arguments.length>=2,!0))}function Ec(n){return oi(function(a,t){var u,r=null,o=!1;r=a.subscribe(new vn(t,void 0,void 0,function(f){u=so(n(f,Ec(n)(a))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function KT(n){return n<=0?function(){return So}:oi(function(a,t){var r=[];a.subscribe(new vn(t,function(o){r.push(o),n<r.length&&r.shift()},function(){var u,o=Ot(r);try{for(o.s();!(u=o.n()).done;)t.next(u.value)}catch(p){o.e(p)}finally{o.f()}t.complete()},void 0,function(){r=null}))})}function cI(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:CW;return oi(function(a,t){var r=!1;a.subscribe(new vn(t,function(o){r=!0,t.next(o)},function(){return r?t.complete():t.error(n())}))})}function CW(){return new sS}function dI(n){return oi(function(a,t){var r=!1;a.subscribe(new vn(t,function(o){r=!0,t.next(o)},function(){r||t.next(n),t.complete()}))})}function Eh(n,a){var t=arguments.length>=2;return function(r){return r.pipe(n?Yd(function(o,u){return n(o,u,r)}):ii,Gf(1),t?dI(a):cI(function(){return new sS}))}}function Ca(n,a,t){var r=xn(n)||a||t?{next:n,error:a,complete:t}:n;return r?oi(function(o,u){var f;null===(f=r.subscribe)||void 0===f||f.call(r);var p=!0;o.subscribe(new vn(u,function(v){var g;null===(g=r.next)||void 0===g||g.call(r,v),u.next(v)},function(){var v;p=!1,null===(v=r.complete)||void 0===v||v.call(r),u.complete()},function(v){var g;p=!1,null===(g=r.error)||void 0===g||g.call(r,v),u.error(v)},function(){var v,g;p&&(null===(v=r.unsubscribe)||void 0===v||v.call(r)),null===(g=r.finalize)||void 0===g||g.call(r)}))}):ii}var il=function n(a,t){k(this,n),this.id=a,this.url=t},YT=function(n){ve(t,n);var a=me(t);function t(r,o){var u,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return k(this,t),(u=a.call(this,r,o)).navigationTrigger=f,u.restoredState=p,u}return j(t,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),t}(il),ry=function(n){ve(t,n);var a=me(t);function t(r,o,u){var f;return k(this,t),(f=a.call(this,r,o)).urlAfterRedirects=u,f}return j(t,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),t}(il),fI=function(n){ve(t,n);var a=me(t);function t(r,o,u){var f;return k(this,t),(f=a.call(this,r,o)).reason=u,f}return j(t,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),t}(il),EW=function(n){ve(t,n);var a=me(t);function t(r,o,u){var f;return k(this,t),(f=a.call(this,r,o)).error=u,f}return j(t,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),t}(il),bW=function(n){ve(t,n);var a=me(t);function t(r,o,u,f){var p;return k(this,t),(p=a.call(this,r,o)).urlAfterRedirects=u,p.state=f,p}return j(t,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(il),xW=function(n){ve(t,n);var a=me(t);function t(r,o,u,f){var p;return k(this,t),(p=a.call(this,r,o)).urlAfterRedirects=u,p.state=f,p}return j(t,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(il),RW=function(n){ve(t,n);var a=me(t);function t(r,o,u,f,p){var v;return k(this,t),(v=a.call(this,r,o)).urlAfterRedirects=u,v.state=f,v.shouldActivate=p,v}return j(t,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),t}(il),TW=function(n){ve(t,n);var a=me(t);function t(r,o,u,f){var p;return k(this,t),(p=a.call(this,r,o)).urlAfterRedirects=u,p.state=f,p}return j(t,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(il),DW=function(n){ve(t,n);var a=me(t);function t(r,o,u,f){var p;return k(this,t),(p=a.call(this,r,o)).urlAfterRedirects=u,p.state=f,p}return j(t,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(il),pI=function(){function n(a){k(this,n),this.route=a}return j(n,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),n}(),hI=function(){function n(a){k(this,n),this.route=a}return j(n,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),n}(),AW=function(){function n(a){k(this,n),this.snapshot=a}return j(n,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),n}(),MW=function(){function n(a){k(this,n),this.snapshot=a}return j(n,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),n}(),OW=function(){function n(a){k(this,n),this.snapshot=a}return j(n,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),n}(),PW=function(){function n(a){k(this,n),this.snapshot=a}return j(n,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),n}(),vI=function(){function n(a,t,r){k(this,n),this.routerEvent=a,this.position=t,this.anchor=r}return j(n,[{key:"toString",value:function(){var t=this.position?"".concat(this.position[0],", ").concat(this.position[1]):null;return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(t,"')")}}]),n}(),Pn="primary",IW=function(){function n(a){k(this,n),this.params=a||{}}return j(n,[{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.params,t)}},{key:"get",value:function(t){if(this.has(t)){var r=this.params[t];return Array.isArray(r)?r[0]:r}return null}},{key:"getAll",value:function(t){if(this.has(t)){var r=this.params[t];return Array.isArray(r)?r:[r]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),n}();function bh(n){return new IW(n)}var gI="ngNavigationCancelingError";function $T(n){var a=Error("NavigationCancelingError: "+n);return a[gI]=!0,a}function FW(n,a,t){var r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(a.hasChildren()||r.length<n.length))return null;for(var o={},u=0;u<r.length;u++){var f=r[u],p=n[u];if(f.startsWith(":"))o[f.substring(1)]=p;else if(f!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function mu(n,a){var t=n?Object.keys(n):void 0,r=a?Object.keys(a):void 0;if(!t||!r||t.length!=r.length)return!1;for(var o,u=0;u<t.length;u++)if(!mI(n[o=t[u]],a[o]))return!1;return!0}function mI(n,a){if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length)return!1;var t=An(n).sort(),r=An(a).sort();return t.every(function(o,u){return r[u]===o})}return n===a}function yI(n){return Array.prototype.concat.apply([],n)}function _I(n){return n.length>0?n[n.length-1]:null}function to(n,a){for(var t in n)n.hasOwnProperty(t)&&a(n[t],t)}function yu(n){return Q(n)?n:U(n)?Xr(Promise.resolve(n)):sn(n)}var GW={exact:function SI(n,a,t){if(!Jd(n.segments,a.segments)||!uS(n.segments,a.segments,t)||n.numberOfChildren!==a.numberOfChildren)return!1;for(var r in a.children)if(!n.children[r]||!SI(n.children[r],a.children[r],t))return!1;return!0},subset:EI},CI={exact:function(n,a){return mu(n,a)},subset:function(n,a){return Object.keys(a).length<=Object.keys(n).length&&Object.keys(a).every(function(t){return mI(n[t],a[t])})},ignored:function(){return!0}};function wI(n,a,t){return GW[t.paths](n.root,a.root,t.matrixParams)&&CI[t.queryParams](n.queryParams,a.queryParams)&&!("exact"===t.fragment&&n.fragment!==a.fragment)}function EI(n,a,t){return bI(n,a,a.segments,t)}function bI(n,a,t,r){if(n.segments.length>t.length){var o=n.segments.slice(0,t.length);return!(!Jd(o,t)||a.hasChildren()||!uS(o,t,r))}if(n.segments.length===t.length){if(!Jd(n.segments,t)||!uS(n.segments,t,r))return!1;for(var u in a.children)if(!n.children[u]||!EI(n.children[u],a.children[u],r))return!1;return!0}var f=t.slice(0,n.segments.length),p=t.slice(n.segments.length);return!!(Jd(n.segments,f)&&uS(n.segments,f,r)&&n.children[Pn])&&bI(n.children[Pn],a,p,r)}function uS(n,a,t){return a.every(function(r,o){return CI[t](n[o].parameters,r.parameters)})}var Xd=function(){function n(a,t,r){k(this,n),this.root=a,this.queryParams=t,this.fragment=r}return j(n,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=bh(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return UW.serialize(this)}}]),n}(),Vn=function(){function n(a,t){var r=this;k(this,n),this.segments=a,this.children=t,this.parent=null,to(t,function(o,u){return o.parent=r})}return j(n,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return lS(this)}}]),n}(),iy=function(){function n(a,t){k(this,n),this.path=a,this.parameters=t}return j(n,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=bh(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return AI(this)}}]),n}();function Jd(n,a){return n.length===a.length&&n.every(function(t,r){return t.path===a[r].path})}var xI=function n(){k(this,n)},RI=function(){function n(){k(this,n)}return j(n,[{key:"parse",value:function(t){var r=new ZW(t);return new Xd(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}},{key:"serialize",value:function(t){var r="/".concat(oy(t.root,!0)),o=function(n){var a=Object.keys(n).map(function(t){var r=n[t];return Array.isArray(r)?r.map(function(o){return"".concat(cS(t),"=").concat(cS(o))}).join("&"):"".concat(cS(t),"=").concat(cS(r))}).filter(function(t){return!!t});return a.length?"?".concat(a.join("&")):""}(t.queryParams),u="string"==typeof t.fragment?"#".concat(function(n){return encodeURI(n)}(t.fragment)):"";return"".concat(r).concat(o).concat(u)}}]),n}(),UW=new RI;function lS(n){return n.segments.map(function(a){return AI(a)}).join("/")}function oy(n,a){if(!n.hasChildren())return lS(n);if(a){var t=n.children[Pn]?oy(n.children[Pn],!1):"",r=[];return to(n.children,function(u,f){f!==Pn&&r.push("".concat(f,":").concat(oy(u,!1)))}),r.length>0?"".concat(t,"(").concat(r.join("//"),")"):t}var o=function(n,a){var t=[];return to(n.children,function(r,o){o===Pn&&(t=t.concat(a(r,o)))}),to(n.children,function(r,o){o!==Pn&&(t=t.concat(a(r,o)))}),t}(n,function(u,f){return f===Pn?[oy(n.children[Pn],!1)]:["".concat(f,":").concat(oy(u,!1))]});return 1===Object.keys(n.children).length&&null!=n.children[Pn]?"".concat(lS(n),"/").concat(o[0]):"".concat(lS(n),"/(").concat(o.join("//"),")")}function TI(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cS(n){return TI(n).replace(/%3B/gi,";")}function XT(n){return TI(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dS(n){return decodeURIComponent(n)}function DI(n){return dS(n.replace(/\+/g,"%20"))}function AI(n){return"".concat(XT(n.path)).concat(function(n){return Object.keys(n).map(function(a){return";".concat(XT(a),"=").concat(XT(n[a]))}).join("")}(n.parameters))}var KW=/^[^\/()?;=#]+/;function fS(n){var a=n.match(KW);return a?a[0]:""}var YW=/^[^=?&#]+/,XW=/^[^&#]+/,ZW=function(){function n(a){k(this,n),this.url=a,this.remaining=a}return j(n,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vn([],{}):new Vn([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));var o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(t.length>0||Object.keys(r).length>0)&&(o[Pn]=new Vn(t,r)),o}},{key:"parseSegment",value:function(){var t=fS(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new iy(dS(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var r=fS(this.remaining);if(r){this.capture(r);var o="";if(this.consumeOptional("=")){var u=fS(this.remaining);u&&this.capture(o=u)}t[dS(r)]=dS(o)}}},{key:"parseQueryParam",value:function(t){var r=function(n){var a=n.match(YW);return a?a[0]:""}(this.remaining);if(r){this.capture(r);var o="";if(this.consumeOptional("=")){var u=function(n){var a=n.match(XW);return a?a[0]:""}(this.remaining);u&&this.capture(o=u)}var f=DI(r),p=DI(o);if(t.hasOwnProperty(f)){var v=t[f];Array.isArray(v)||(t[f]=v=[v]),v.push(p)}else t[f]=p}}},{key:"parseParens",value:function(t){var r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var o=fS(this.remaining),u=this.remaining[o.length];if("/"!==u&&")"!==u&&";"!==u)throw new Error("Cannot parse url '".concat(this.url,"'"));var f=void 0;o.indexOf(":")>-1?(f=o.substr(0,o.indexOf(":")),this.capture(f),this.capture(":")):t&&(f=Pn);var p=this.parseChildren();r[f]=1===Object.keys(p).length?p[Pn]:new Vn([],p),this.consumeOptional("//")}return r}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),n}(),MI=function(){function n(a){k(this,n),this._root=a}return j(n,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(t){var r=this.pathFromRoot(t);return r.length>1?r[r.length-2]:null}},{key:"children",value:function(t){var r=JT(t,this._root);return r?r.children.map(function(o){return o.value}):[]}},{key:"firstChild",value:function(t){var r=JT(t,this._root);return r&&r.children.length>0?r.children[0].value:null}},{key:"siblings",value:function(t){var r=ZT(t,this._root);return r.length<2?[]:r[r.length-2].children.map(function(u){return u.value}).filter(function(u){return u!==t})}},{key:"pathFromRoot",value:function(t){return ZT(t,this._root).map(function(r){return r.value})}}]),n}();function JT(n,a){if(n===a.value)return a;var r,t=Ot(a.children);try{for(t.s();!(r=t.n()).done;){var u=JT(n,r.value);if(u)return u}}catch(f){t.e(f)}finally{t.f()}return null}function ZT(n,a){if(n===a.value)return[a];var r,t=Ot(a.children);try{for(t.s();!(r=t.n()).done;){var u=ZT(n,r.value);if(u.length)return u.unshift(a),u}}catch(f){t.e(f)}finally{t.f()}return[]}var ol=function(){function n(a,t){k(this,n),this.value=a,this.children=t}return j(n,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),n}();function xh(n){var a={};return n&&n.children.forEach(function(t){return a[t.value.outlet]=t}),a}var OI=function(n){ve(t,n);var a=me(t);function t(r,o){var u;return k(this,t),(u=a.call(this,r)).snapshot=o,QT(Kn(u),r),u}return j(t,[{key:"toString",value:function(){return this.snapshot.toString()}}]),t}(MI);function PI(n,a){var t=function(n,a){var f=new pS([],{},{},"",{},Pn,a,null,n.root,-1,{});return new LI("",new ol(f,[]))}(n,a),r=new Hs([new iy("",{})]),o=new Hs({}),u=new Hs({}),f=new Hs({}),p=new Hs(""),v=new _u(r,o,f,p,u,Pn,a,t.root);return v.snapshot=t.root,new OI(new ol(v,[]),t)}var _u=function(){function n(a,t,r,o,u,f,p,v){k(this,n),this.url=a,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=f,this.component=p,this._futureSnapshot=v}return j(n,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Yn(function(t){return bh(t)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Yn(function(t){return bh(t)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),n}();function II(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",t=n.pathFromRoot,r=0;if("always"!==a)for(r=t.length-1;r>=1;){var o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return eU(t.slice(r))}function eU(n){return n.reduce(function(a,t){return{params:Object.assign(Object.assign({},a.params),t.params),data:Object.assign(Object.assign({},a.data),t.data),resolve:Object.assign(Object.assign({},a.resolve),t._resolvedData)}},{params:{},data:{},resolve:{}})}var pS=function(){function n(a,t,r,o,u,f,p,v,g,y,_){k(this,n),this.url=a,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=f,this.component=p,this.routeConfig=v,this._urlSegment=g,this._lastPathIndex=y,this._resolve=_}return j(n,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=bh(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=bh(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){var t=this.url.map(function(o){return o.toString()}).join("/"),r=this.routeConfig?this.routeConfig.path:"";return"Route(url:'".concat(t,"', path:'").concat(r,"')")}}]),n}(),LI=function(n){ve(t,n);var a=me(t);function t(r,o){var u;return k(this,t),(u=a.call(this,o)).url=r,QT(Kn(u),o),u}return j(t,[{key:"toString",value:function(){return FI(this._root)}}]),t}(MI);function QT(n,a){a.value._routerState=n,a.children.forEach(function(t){return QT(n,t)})}function FI(n){var a=n.children.length>0?" { ".concat(n.children.map(FI).join(", ")," } "):"";return"".concat(n.value).concat(a)}function eD(n){if(n.snapshot){var a=n.snapshot,t=n._futureSnapshot;n.snapshot=t,mu(a.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),a.fragment!==t.fragment&&n.fragment.next(t.fragment),mu(a.params,t.params)||n.params.next(t.params),function(n,a){if(n.length!==a.length)return!1;for(var t=0;t<n.length;++t)if(!mu(n[t],a[t]))return!1;return!0}(a.url,t.url)||n.url.next(t.url),mu(a.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function tD(n,a){var t=mu(n.params,a.params)&&function(n,a){return Jd(n,a)&&n.every(function(t,r){return mu(t.parameters,a[r].parameters)})}(n.url,a.url);return t&&!(!n.parent!=!a.parent)&&(!n.parent||tD(n.parent,a.parent))}function ay(n,a,t){if(t&&n.shouldReuseRoute(a.value,t.value.snapshot)){var r=t.value;r._futureSnapshot=a.value;var o=function(n,a,t){return a.children.map(function(r){var u,o=Ot(t.children);try{for(o.s();!(u=o.n()).done;){var f=u.value;if(n.shouldReuseRoute(r.value,f.value.snapshot))return ay(n,r,f)}}catch(p){o.e(p)}finally{o.f()}return ay(n,r)})}(n,a,t);return new ol(r,o)}if(n.shouldAttach(a.value)){var u=n.retrieve(a.value);if(null!==u){var f=u.route;return f.value._futureSnapshot=a.value,f.children=a.children.map(function(g){return ay(n,g)}),f}}var p=function(n){return new _u(new Hs(n.url),new Hs(n.params),new Hs(n.queryParams),new Hs(n.fragment),new Hs(n.data),n.outlet,n.component,n)}(a.value),v=a.children.map(function(g){return ay(n,g)});return new ol(p,v)}function iU(n,a,t,r,o){if(0===t.length)return nD(a.root,a.root,a,r,o);var u=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new kI(!0,0,n);var a=0,t=!1,r=n.reduce(function(o,u,f){if("object"==typeof u&&null!=u){if(u.outlets){var p={};return to(u.outlets,function(v,g){p[g]="string"==typeof v?v.split("/"):v}),[].concat(An(o),[{outlets:p}])}if(u.segmentPath)return[].concat(An(o),[u.segmentPath])}return"string"!=typeof u?[].concat(An(o),[u]):0===f?(u.split("/").forEach(function(v,g){0==g&&"."===v||(0==g&&""===v?t=!0:".."===v?a++:""!=v&&o.push(v))}),o):[].concat(An(o),[u])},[]);return new kI(t,a,r)}(t);if(u.toRoot())return nD(a.root,new Vn([],{}),a,r,o);var f=function(n,a,t){if(n.isAbsolute)return new rD(a.root,!0,0);if(-1===t.snapshot._lastPathIndex){var r=t.snapshot._urlSegment;return new rD(r,r===a.root,0)}var u=hS(n.commands[0])?0:1;return function(n,a,t){for(var r=n,o=a,u=t;u>o;){if(u-=o,!(r=r.parent))throw new Error("Invalid number of '../'");o=r.segments.length}return new rD(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+u,n.numberOfDoubleDots)}(u,a,n),p=f.processChildren?vS(f.segmentGroup,f.index,u.commands):GI(f.segmentGroup,f.index,u.commands);return nD(f.segmentGroup,p,a,r,o)}function hS(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function sy(n){return"object"==typeof n&&null!=n&&n.outlets}function nD(n,a,t,r,o){var u={};return r&&to(r,function(f,p){u[p]=Array.isArray(f)?f.map(function(v){return"".concat(v)}):"".concat(f)}),new Xd(t.root===n?a:NI(t.root,n,a),u,o)}function NI(n,a,t){var r={};return to(n.children,function(o,u){r[u]=o===a?t:NI(o,a,t)}),new Vn(n.segments,r)}var kI=function(){function n(a,t,r){if(k(this,n),this.isAbsolute=a,this.numberOfDoubleDots=t,this.commands=r,a&&r.length>0&&hS(r[0]))throw new Error("Root segment cannot have matrix parameters");var o=r.find(sy);if(o&&o!==_I(r))throw new Error("{outlets:{}} has to be the last command")}return j(n,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),n}(),rD=function n(a,t,r){k(this,n),this.segmentGroup=a,this.processChildren=t,this.index=r};function GI(n,a,t){if(n||(n=new Vn([],{})),0===n.segments.length&&n.hasChildren())return vS(n,a,t);var r=function(n,a,t){for(var r=0,o=a,u={match:!1,pathIndex:0,commandIndex:0};o<n.segments.length;){if(r>=t.length)return u;var f=n.segments[o],p=t[r];if(sy(p))break;var v="".concat(p),g=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&g&&"object"==typeof g&&void 0===g.outlets){if(!HI(v,g,f))return u;r+=2}else{if(!HI(v,{},f))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,a,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){var u=new Vn(n.segments.slice(0,r.pathIndex),{});return u.children[Pn]=new Vn(n.segments.slice(r.pathIndex),n.children),vS(u,0,o)}return r.match&&0===o.length?new Vn(n.segments,{}):r.match&&!n.hasChildren()?iD(n,a,t):r.match?vS(n,0,o):iD(n,a,t)}function vS(n,a,t){if(0===t.length)return new Vn(n.segments,{});var r=function(n){return sy(n[0])?n[0].outlets:bn({},Pn,n)}(t),o={};return to(r,function(u,f){"string"==typeof u&&(u=[u]),null!==u&&(o[f]=GI(n.children[f],a,u))}),to(n.children,function(u,f){void 0===r[f]&&(o[f]=u)}),new Vn(n.segments,o)}function iD(n,a,t){for(var r=n.segments.slice(0,a),o=0;o<t.length;){var u=t[o];if(sy(u)){var f=cU(u.outlets);return new Vn(r,f)}if(0===o&&hS(t[0]))r.push(new iy(n.segments[a].path,BI(t[0]))),o++;else{var v=sy(u)?u.outlets[Pn]:"".concat(u),g=o<t.length-1?t[o+1]:null;v&&g&&hS(g)?(r.push(new iy(v,BI(g))),o+=2):(r.push(new iy(v,{})),o++)}}return new Vn(r,{})}function cU(n){var a={};return to(n,function(t,r){"string"==typeof t&&(t=[t]),null!==t&&(a[r]=iD(new Vn([],{}),0,t))}),a}function BI(n){var a={};return to(n,function(t,r){return a[r]="".concat(t)}),a}function HI(n,a,t){return n==t.path&&mu(a,t.parameters)}var fU=function(){function n(a,t,r,o){k(this,n),this.routeReuseStrategy=a,this.futureState=t,this.currState=r,this.forwardEvent=o}return j(n,[{key:"activate",value:function(t){var r=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,o,t),eD(this.futureState.root),this.activateChildRoutes(r,o,t)}},{key:"deactivateChildRoutes",value:function(t,r,o){var u=this,f=xh(r);t.children.forEach(function(p){var v=p.value.outlet;u.deactivateRoutes(p,f[v],o),delete f[v]}),to(f,function(p,v){u.deactivateRouteAndItsChildren(p,o)})}},{key:"deactivateRoutes",value:function(t,r,o){var u=t.value,f=r?r.value:null;if(u===f)if(u.component){var p=o.getContext(u.outlet);p&&this.deactivateChildRoutes(t,r,p.children)}else this.deactivateChildRoutes(t,r,o);else f&&this.deactivateRouteAndItsChildren(r,o)}},{key:"deactivateRouteAndItsChildren",value:function(t,r){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,r):this.deactivateRouteAndOutlet(t,r)}},{key:"detachAndStoreRouteSubtree",value:function(t,r){for(var o=r.getContext(t.value.outlet),u=o&&t.value.component?o.children:r,f=xh(t),p=0,v=Object.keys(f);p<v.length;p++)this.deactivateRouteAndItsChildren(f[v[p]],u);if(o&&o.outlet){var y=o.outlet.detach(),_=o.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:y,route:t,contexts:_})}}},{key:"deactivateRouteAndOutlet",value:function(t,r){for(var o=r.getContext(t.value.outlet),u=o&&t.value.component?o.children:r,f=xh(t),p=0,v=Object.keys(f);p<v.length;p++)this.deactivateRouteAndItsChildren(f[v[p]],u);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}},{key:"activateChildRoutes",value:function(t,r,o){var u=this,f=xh(r);t.children.forEach(function(p){u.activateRoutes(p,f[p.value.outlet],o),u.forwardEvent(new PW(p.value.snapshot))}),t.children.length&&this.forwardEvent(new MW(t.value.snapshot))}},{key:"activateRoutes",value:function(t,r,o){var u=t.value,f=r?r.value:null;if(eD(u),u===f)if(u.component){var p=o.getOrCreateContext(u.outlet);this.activateChildRoutes(t,r,p.children)}else this.activateChildRoutes(t,r,o);else if(u.component){var v=o.getOrCreateContext(u.outlet);if(this.routeReuseStrategy.shouldAttach(u.snapshot)){var g=this.routeReuseStrategy.retrieve(u.snapshot);this.routeReuseStrategy.store(u.snapshot,null),v.children.onOutletReAttached(g.contexts),v.attachRef=g.componentRef,v.route=g.route.value,v.outlet&&v.outlet.attach(g.componentRef,g.route.value),eD(g.route.value),this.activateChildRoutes(t,null,v.children)}else{var y=function(n){for(var a=n.parent;a;a=a.parent){var t=a.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(u.snapshot),_=y?y.module.componentFactoryResolver:null;v.attachRef=null,v.route=u,v.resolver=_,v.outlet&&v.outlet.activateWith(u,_),this.activateChildRoutes(t,null,v.children)}}else this.activateChildRoutes(t,null,o)}}]),n}(),oD=function n(a,t){k(this,n),this.routes=a,this.module=t};function bc(n){return"function"==typeof n}function Zd(n){return n instanceof Xd}var uy=Symbol("INITIAL_VALUE");function ly(){return $d(function(n){return function(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];var r=$(a),o=S_(a),u=uW(a),f=u.args,p=u.keys;if(0===f.length)return Xr([],r);var v=new Cr(vW(f,r,p?function(g){return pW(p,g)}:ii));return o?v.pipe(fW(o)):v}(n.map(function(a){return a.pipe(Gf(1),function(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];var r=$(a);return oi(function(o,u){(r?qT(a,o,r):qT(a,o)).subscribe(u)})}(uy))})).pipe(lI(function(a,t){var r=!1;return t.reduce(function(o,u,f){return o!==uy?o:(u===uy&&(r=!0),r||!1!==u&&f!==t.length-1&&!Zd(u)?o:u)},a)},uy),Yd(function(a){return a!==uy}),Yn(function(a){return Zd(a)?a:!0===a}),Gf(1))})}var _U=function n(){k(this,n),this.outlet=null,this.route=null,this.resolver=null,this.children=new cy,this.attachRef=null},cy=function(){function n(){k(this,n),this.contexts=new Map}return j(n,[{key:"onChildOutletCreated",value:function(t,r){var o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}},{key:"onChildOutletDestroyed",value:function(t){var r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var r=this.getContext(t);return r||(r=new _U,this.contexts.set(t,r)),r}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),n}(),aD=function(){var n=function(){function a(t,r,o,u,f){k(this,a),this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ee,this.deactivateEvents=new Ee,this.attachEvents=new Ee,this.detachEvents=new Ee,this.name=u||Pn,t.onChildOutletCreated(this.name,this)}return j(a,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}},{key:"attach",value:function(r,o){this.activated=r,this._activatedRoute=o,this.location.insert(r.hostView),this.attachEvents.emit(r.instance)}},{key:"deactivate",value:function(){if(this.activated){var r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}},{key:"activateWith",value:function(r,o){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;var p=(o=o||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),v=this.parentContexts.getOrCreateContext(this.name).children,g=new CU(r,v,this.location.injector);this.activated=this.location.createComponent(p,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(cy),lt(ya),lt(Cc),Vl("name"),lt(j0))},n.\u0275dir=Gi({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n}(),CU=function(){function n(a,t,r){k(this,n),this.route=a,this.childContexts=t,this.parent=r}return j(n,[{key:"get",value:function(t,r){return t===_u?this.route:t===cy?this.childContexts:this.parent.get(t,r)}}]),n}(),VI=function(){var n=function a(){k(this,a)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Mr({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c(0,"router-outlet")},directives:[aD],encapsulation:2}),n}();function WI(n){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=0;t<n.length;t++){var r=n[t],o=SU(a,r);wU(r,o)}}function wU(n,a){n.children&&WI(n.children,a)}function SU(n,a){return a?n||a.path?n&&!a.path?"".concat(n,"/"):!n&&a.path?a.path:"".concat(n,"/").concat(a.path):"":n}function sD(n){var a=n.children&&n.children.map(sD),t=a?Object.assign(Object.assign({},n),{children:a}):Object.assign({},n);return!t.component&&(a||t.loadChildren)&&t.outlet&&t.outlet!==Pn&&(t.component=VI),t}function Xa(n){return n.outlet||Pn}function UI(n,a){var t=n.filter(function(r){return Xa(r)===a});return t.push.apply(t,An(n.filter(function(r){return Xa(r)!==a}))),t}var zI={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function gS(n,a,t){var r;if(""===a.path)return"full"===a.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},zI):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var u=(a.matcher||FW)(t,n,a);if(!u)return Object.assign({},zI);var f={};to(u.posParams,function(v,g){f[g]=v.path});var p=u.consumed.length>0?Object.assign(Object.assign({},f),u.consumed[u.consumed.length-1].parameters):f;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function mS(n,a,t,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(t.length>0&&xU(n,t,r)){var u=new Vn(a,bU(n,a,r,new Vn(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=a.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&RU(n,t,r)){var f=new Vn(n.segments,EU(n,a,t,r,n.children,o));return f._sourceSegment=n,f._segmentIndexShift=a.length,{segmentGroup:f,slicedSegments:t}}var p=new Vn(n.segments,n.children);return p._sourceSegment=n,p._segmentIndexShift=a.length,{segmentGroup:p,slicedSegments:t}}function EU(n,a,t,r,o,u){var v,f={},p=Ot(r);try{for(p.s();!(v=p.n()).done;){var g=v.value;if(yS(n,t,g)&&!o[Xa(g)]){var y=new Vn([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:a.length,f[Xa(g)]=y}}}catch(_){p.e(_)}finally{p.f()}return Object.assign(Object.assign({},o),f)}function bU(n,a,t,r){var o={};o[Pn]=r,r._sourceSegment=n,r._segmentIndexShift=a.length;var f,u=Ot(t);try{for(u.s();!(f=u.n()).done;){var p=f.value;if(""===p.path&&Xa(p)!==Pn){var v=new Vn([],{});v._sourceSegment=n,v._segmentIndexShift=a.length,o[Xa(p)]=v}}}catch(g){u.e(g)}finally{u.f()}return o}function xU(n,a,t){return t.some(function(r){return yS(n,a,r)&&Xa(r)!==Pn})}function RU(n,a,t){return t.some(function(r){return yS(n,a,r)})}function yS(n,a,t){return(!(n.hasChildren()||a.length>0)||"full"!==t.pathMatch)&&""===t.path}function jI(n,a,t,r){return!!(Xa(n)===r||r!==Pn&&yS(a,t,n))&&("**"===n.path||gS(a,n,t).matched)}function qI(n,a,t){return 0===a.length&&!n.children[t]}var dy=function n(a){k(this,n),this.segmentGroup=a||null},KI=function n(a){k(this,n),this.urlTree=a};function _S(n){return new Cr(function(a){return a.error(new dy(n))})}function YI(n){return new Cr(function(a){return a.error(new KI(n))})}function TU(n){return new Cr(function(a){return a.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(n,"'")))})}var MU=function(){function n(a,t,r,o,u){k(this,n),this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=a.get(Qu)}return j(n,[{key:"apply",value:function(){var t=this,r=mS(this.urlTree.root,[],[],this.config).segmentGroup,o=new Vn(r.segments,r.children);return this.expandSegmentGroup(this.ngModule,this.config,o,Pn).pipe(Yn(function(p){return t.createUrlTree(uD(p),t.urlTree.queryParams,t.urlTree.fragment)})).pipe(Ec(function(p){if(p instanceof KI)return t.allowRedirects=!1,t.match(p.urlTree);throw p instanceof dy?t.noMatchError(p):p}))}},{key:"match",value:function(t){var r=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,Pn).pipe(Yn(function(f){return r.createUrlTree(uD(f),t.queryParams,t.fragment)})).pipe(Ec(function(f){throw f instanceof dy?r.noMatchError(f):f}))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,r,o){var u=t.segments.length>0?new Vn([],bn({},Pn,t)):t;return new Xd(u,r,o)}},{key:"expandSegmentGroup",value:function(t,r,o,u){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(t,r,o).pipe(Yn(function(f){return new Vn([],f)})):this.expandSegment(t,o,r,o.segments,u,!0)}},{key:"expandChildren",value:function(t,r,o){for(var u=this,f=[],p=0,v=Object.keys(o.children);p<v.length;p++){var g=v[p];"primary"===g?f.unshift(g):f.push(g)}return Xr(f).pipe(wh(function(y){var _=o.children[y],C=UI(r,y);return u.expandSegmentGroup(t,C,_,y).pipe(Yn(function(S){return{segment:S,outlet:y}}))}),lI(function(y,_){return y[_.outlet]=_.segment,y},{}),function(n,a){var t=arguments.length>=2;return function(r){return r.pipe(n?Yd(function(o,u){return n(o,u,r)}):ii,KT(1),t?dI(a):cI(function(){return new sS}))}}())}},{key:"expandSegment",value:function(t,r,o,u,f,p){var v=this;return Xr(o).pipe(wh(function(g){return v.expandSegmentAgainstRoute(t,r,o,g,u,f,p).pipe(Ec(function(_){if(_ instanceof dy)return sn(null);throw _}))}),Eh(function(g){return!!g}),Ec(function(g,y){if(g instanceof sS||"EmptyError"===g.name){if(qI(r,u,f))return sn(new Vn([],{}));throw new dy(r)}throw g}))}},{key:"expandSegmentAgainstRoute",value:function(t,r,o,u,f,p,v){return jI(u,r,f,p)?void 0===u.redirectTo?this.matchSegmentAgainstRoute(t,r,u,f,p):v&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,r,o,u,f,p):_S(r):_S(r)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,r,o,u,f,p){return"**"===u.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,o,u,p):this.expandRegularSegmentAgainstRouteUsingRedirect(t,r,o,u,f,p)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,r,o,u){var f=this,p=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?YI(p):this.lineralizeSegments(o,p).pipe($r(function(v){var g=new Vn(v,{});return f.expandSegment(t,g,r,v,u,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,r,o,u,f,p){var v=this,g=gS(r,u,f),_=g.consumedSegments,C=g.lastChild,S=g.positionalParamSegments;if(!g.matched)return _S(r);var x=this.applyRedirectCommands(_,u.redirectTo,S);return u.redirectTo.startsWith("/")?YI(x):this.lineralizeSegments(u,x).pipe($r(function(b){return v.expandSegment(t,r,o,b.concat(f.slice(C)),p,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(t,r,o,u,f){var p=this;if("**"===o.path)return o.loadChildren?(o._loadedConfig?sn(o._loadedConfig):this.configLoader.load(t.injector,o)).pipe(Yn(function(b){return o._loadedConfig=b,new Vn(u,{})})):sn(new Vn(u,{}));var g=gS(r,o,u),_=g.consumedSegments,C=g.lastChild;if(!g.matched)return _S(r);var S=u.slice(C);return this.getChildConfig(t,o,u).pipe($r(function(b){var E=b.module,D=b.routes,A=mS(r,_,S,D),M=A.segmentGroup,O=A.slicedSegments,I=new Vn(M.segments,M.children);if(0===O.length&&I.hasChildren())return p.expandChildren(E,D,I).pipe(Yn(function(W){return new Vn(_,W)}));if(0===D.length&&0===O.length)return sn(new Vn(_,{}));var z=Xa(o)===f;return p.expandSegment(E,I,D,O,z?Pn:f,!0).pipe(Yn(function(W){return new Vn(_.concat(W.segments),W.children)}))}))}},{key:"getChildConfig",value:function(t,r,o){var u=this;return r.children?sn(new oD(r.children,t)):r.loadChildren?void 0!==r._loadedConfig?sn(r._loadedConfig):this.runCanLoadGuards(t.injector,r,o).pipe($r(function(f){return f?u.configLoader.load(t.injector,r).pipe(Yn(function(p){return r._loadedConfig=p,p})):function(n){return new Cr(function(a){return a.error($T("Cannot load children because the guard of the route \"path: '".concat(n.path,"'\" returned false")))})}(r)})):sn(new oD([],t))}},{key:"runCanLoadGuards",value:function(t,r,o){var u=this,f=r.canLoad;if(!f||0===f.length)return sn(!0);var p=f.map(function(v){var y,g=t.get(v);if(function(n){return n&&bc(n.canLoad)}(g))y=g.canLoad(r,o);else{if(!bc(g))throw new Error("Invalid CanLoad guard");y=g(r,o)}return yu(y)});return sn(p).pipe(ly(),Ca(function(v){if(Zd(v)){var g=$T('Redirecting to "'.concat(u.urlSerializer.serialize(v),'"'));throw g.url=v,g}}),Yn(function(v){return!0===v}))}},{key:"lineralizeSegments",value:function(t,r){for(var o=[],u=r.root;;){if(o=o.concat(u.segments),0===u.numberOfChildren)return sn(o);if(u.numberOfChildren>1||!u.children[Pn])return TU(t.redirectTo);u=u.children[Pn]}}},{key:"applyRedirectCommands",value:function(t,r,o){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),t,o)}},{key:"applyRedirectCreatreUrlTree",value:function(t,r,o,u){var f=this.createSegmentGroup(t,r.root,o,u);return new Xd(f,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}},{key:"createQueryParams",value:function(t,r){var o={};return to(t,function(u,f){if("string"==typeof u&&u.startsWith(":")){var v=u.substring(1);o[f]=r[v]}else o[f]=u}),o}},{key:"createSegmentGroup",value:function(t,r,o,u){var f=this,p=this.createSegments(t,r.segments,o,u),v={};return to(r.children,function(g,y){v[y]=f.createSegmentGroup(t,g,o,u)}),new Vn(p,v)}},{key:"createSegments",value:function(t,r,o,u){var f=this;return r.map(function(p){return p.path.startsWith(":")?f.findPosParam(t,p,u):f.findOrReturn(p,o)})}},{key:"findPosParam",value:function(t,r,o){var u=o[r.path.substring(1)];if(!u)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(r.path,"'."));return u}},{key:"findOrReturn",value:function(t,r){var f,o=0,u=Ot(r);try{for(u.s();!(f=u.n()).done;){var p=f.value;if(p.path===t.path)return r.splice(o),p;o++}}catch(v){u.e(v)}finally{u.f()}return t}}]),n}();function uD(n){for(var a={},t=0,r=Object.keys(n.children);t<r.length;t++){var o=r[t],f=uD(n.children[o]);(f.segments.length>0||f.hasChildren())&&(a[o]=f)}return function(n){if(1===n.numberOfChildren&&n.children[Pn]){var a=n.children[Pn];return new Vn(n.segments.concat(a.segments),a.children)}return n}(new Vn(n.segments,a))}var $I=function n(a){k(this,n),this.path=a,this.route=this.path[this.path.length-1]},CS=function n(a,t){k(this,n),this.component=a,this.route=t};function IU(n,a,t){var r=n._root;return fy(r,a?a._root:null,t,[r.value])}function wS(n,a,t){var r=function(n){if(!n)return null;for(var a=n.parent;a;a=a.parent){var t=a.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(a);return(r?r.module.injector:t).get(n)}function fy(n,a,t,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},u=xh(a);return n.children.forEach(function(f){NU(f,u[f.value.outlet],t,r.concat([f.value]),o),delete u[f.value.outlet]}),to(u,function(f,p){return py(f,t.getContext(p),o)}),o}function NU(n,a,t,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},u=n.value,f=a?a.value:null,p=t?t.getContext(n.value.outlet):null;if(f&&u.routeConfig===f.routeConfig){var v=kU(f,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new $I(r)):(u.data=f.data,u._resolvedData=f._resolvedData),fy(n,a,u.component?p?p.children:null:t,r,o),v&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new CS(p.outlet.component,f))}else f&&py(a,p,o),o.canActivateChecks.push(new $I(r)),fy(n,null,u.component?p?p.children:null:t,r,o);return o}function kU(n,a,t){if("function"==typeof t)return t(n,a);switch(t){case"pathParamsChange":return!Jd(n.url,a.url);case"pathParamsOrQueryParamsChange":return!Jd(n.url,a.url)||!mu(n.queryParams,a.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tD(n,a)||!mu(n.queryParams,a.queryParams);default:return!tD(n,a)}}function py(n,a,t){var r=xh(n),o=n.value;to(r,function(u,f){py(u,o.component?a?a.children.getContext(f):null:a,t)}),t.canDeactivateChecks.push(new CS(o.component&&a&&a.outlet&&a.outlet.isActivated?a.outlet.component:null,o))}var qU=function n(){k(this,n)};function XI(n){return new Cr(function(a){return a.error(n)})}var YU=function(){function n(a,t,r,o,u,f){k(this,n),this.rootComponentType=a,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=f}return j(n,[{key:"recognize",value:function(){var t=mS(this.urlTree.root,[],[],this.config.filter(function(p){return void 0===p.redirectTo}),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,t,Pn);if(null===r)return null;var o=new pS([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pn,this.rootComponentType,null,this.urlTree.root,-1,{}),u=new ol(o,r),f=new LI(this.url,u);return this.inheritParamsAndData(f._root),f}},{key:"inheritParamsAndData",value:function(t){var r=this,o=t.value,u=II(o,this.paramsInheritanceStrategy);o.params=Object.freeze(u.params),o.data=Object.freeze(u.data),t.children.forEach(function(f){return r.inheritParamsAndData(f)})}},{key:"processSegmentGroup",value:function(t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,r):this.processSegment(t,r,r.segments,o)}},{key:"processChildren",value:function(t,r){for(var o=[],u=0,f=Object.keys(r.children);u<f.length;u++){var p=f[u],v=r.children[p],g=UI(t,p),y=this.processSegmentGroup(g,v,p);if(null===y)return null;o.push.apply(o,An(y))}var _=JI(o);return function(n){n.sort(function(a,t){return a.value.outlet===Pn?-1:t.value.outlet===Pn?1:a.value.outlet.localeCompare(t.value.outlet)})}(_),_}},{key:"processSegment",value:function(t,r,o,u){var p,f=Ot(t);try{for(f.s();!(p=f.n()).done;){var g=this.processSegmentAgainstRoute(p.value,r,o,u);if(null!==g)return g}}catch(y){f.e(y)}finally{f.f()}return qI(r,o,u)?[]:null}},{key:"processSegmentAgainstRoute",value:function(t,r,o,u){if(t.redirectTo||!jI(t,r,o,u))return null;var f,p=[],v=[];if("**"===t.path){var g=o.length>0?_I(o).parameters:{};f=new pS(o,g,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,eL(t),Xa(t),t.component,t,ZI(r),QI(r)+o.length,tL(t))}else{var y=gS(r,t,o);if(!y.matched)return null;p=y.consumedSegments,v=o.slice(y.lastChild),f=new pS(p,y.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,eL(t),Xa(t),t.component,t,ZI(r),QI(r)+p.length,tL(t))}var _=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),C=mS(r,p,v,_.filter(function(A){return void 0===A.redirectTo}),this.relativeLinkResolution),S=C.segmentGroup,x=C.slicedSegments;if(0===x.length&&S.hasChildren()){var b=this.processChildren(_,S);return null===b?null:[new ol(f,b)]}if(0===_.length&&0===x.length)return[new ol(f,[])];var E=Xa(t)===u,D=this.processSegment(_,S,x,E?Pn:u);return null===D?null:[new ol(f,D)]}}]),n}();function JI(n){var o,a=[],t=new Set,r=Ot(n);try{var u=function(){var C=o.value;if(!function(n){var a=n.value.routeConfig;return a&&""===a.path&&void 0===a.redirectTo}(C))return a.push(C),"continue";var x,S=a.find(function(b){return C.value.routeConfig===b.value.routeConfig});void 0!==S?((x=S.children).push.apply(x,An(C.children)),t.add(S)):a.push(C)};for(r.s();!(o=r.n()).done;)u()}catch(_){r.e(_)}finally{r.f()}var v,p=Ot(t);try{for(p.s();!(v=p.n()).done;){var g=v.value,y=JI(g.children);a.push(new ol(g.value,y))}}catch(_){p.e(_)}finally{p.f()}return a.filter(function(_){return!t.has(_)})}function ZI(n){for(var a=n;a._sourceSegment;)a=a._sourceSegment;return a}function QI(n){for(var a=n,t=a._segmentIndexShift?a._segmentIndexShift:0;a._sourceSegment;)t+=(a=a._sourceSegment)._segmentIndexShift?a._segmentIndexShift:0;return t-1}function eL(n){return n.data||{}}function tL(n){return n.resolve||{}}function lD(n){return $d(function(a){var t=n(a);return t?Xr(t).pipe(Yn(function(){return a})):sn(a)})}var iz=function(){function n(){k(this,n)}return j(n,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,r){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,r){return t.routeConfig===r.routeConfig}}]),n}(),oz=function(n){ve(t,n);var a=me(t);function t(){return k(this,t),a.apply(this,arguments)}return t}(iz),cD=new On("ROUTES"),nL=function(){function n(a,t,r,o){k(this,n),this.injector=a,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}return j(n,[{key:"load",value:function(t,r){var o=this;if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);var f=this.loadModuleFactory(r.loadChildren).pipe(Yn(function(p){o.onLoadEndListener&&o.onLoadEndListener(r);var v=p.create(t);return new oD(yI(v.injector.get(cD,void 0,Qt.Self|Qt.Optional)).map(sD),v)}),Ec(function(p){throw r._loader$=void 0,p}));return r._loader$=new mW(f,function(){return new ds}).pipe(uI()),r._loader$}},{key:"loadModuleFactory",value:function(t){var r=this;return yu(t()).pipe($r(function(o){return o instanceof lP?sn(o):Xr(r.compiler.compileModuleAsync(o))}))}}]),n}(),sz=function(){function n(){k(this,n)}return j(n,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,r){return t}}]),n}();function uz(n){throw n}function lz(n,a,t){return a.parse("/")}function rL(n,a){return sn(null)}var cz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Lo=function(){var n=function(){function a(t,r,o,u,f,p,v){var g=this;k(this,a),this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ds,this.errorHandler=uz,this.malformedUriErrorHandler=lz,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:rL,afterPreactivation:rL},this.urlHandlingStrategy=new sz,this.routeReuseStrategy=new oz,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(Qu),this.console=f.get(jP);var C=f.get(Di);this.isNgZoneEnabled=C instanceof Di&&Di.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=new Xd(new Vn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new nL(f,p,function(x){return g.triggerEvent(new pI(x))},function(x){return g.triggerEvent(new hI(x))}),this.routerState=PI(this.currentUrlTree,this.rootComponentType),this.transitions=new Hs({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return j(a,[{key:"browserPageId",get:function(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}},{key:"setupNavigations",value:function(r){var o=this,u=this.events;return r.pipe(Yd(function(f){return 0!==f.id}),Yn(function(f){return Object.assign(Object.assign({},f),{extractedUrl:o.urlHandlingStrategy.extract(f.rawUrl)})}),$d(function(f){var p=!1,v=!1;return sn(f).pipe(Ca(function(g){o.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:o.lastSuccessfulNavigation?Object.assign(Object.assign({},o.lastSuccessfulNavigation),{previousNavigation:null}):null}}),$d(function(g){var y=o.browserUrlTree.toString(),_=!o.navigated||g.extractedUrl.toString()!==y||y!==o.currentUrlTree.toString();if(("reload"===o.onSameUrlNavigation||_)&&o.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return SS(g.source)&&(o.browserUrlTree=g.extractedUrl),sn(g).pipe($d(function(I){var B=o.transitions.getValue();return u.next(new YT(I.id,o.serializeUrl(I.extractedUrl),I.source,I.restoredState)),B!==o.transitions.getValue()?So:Promise.resolve(I)}),function(n,a,t,r){return $d(function(o){return function(n,a,t,r,o){return new MU(n,a,t,r,o).apply()}(n,a,t,o.extractedUrl,r).pipe(Yn(function(u){return Object.assign(Object.assign({},o),{urlAfterRedirects:u})}))})}(o.ngModule.injector,o.configLoader,o.urlSerializer,o.config),Ca(function(I){o.currentNavigation=Object.assign(Object.assign({},o.currentNavigation),{finalUrl:I.urlAfterRedirects})}),function(n,a,t,r,o){return $r(function(u){return function(n,a,t,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var f=new YU(n,a,t,r,o,u).recognize();return null===f?XI(new qU):sn(f)}catch(p){return XI(p)}}(n,a,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe(Yn(function(f){return Object.assign(Object.assign({},u),{targetSnapshot:f})}))})}(o.rootComponentType,o.config,function(I){return o.serializeUrl(I)},o.paramsInheritanceStrategy,o.relativeLinkResolution),Ca(function(I){if("eager"===o.urlUpdateStrategy){if(!I.extras.skipLocationChange){var B=o.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);o.setBrowserUrl(B,I)}o.browserUrlTree=I.urlAfterRedirects}var z=new bW(I.id,o.serializeUrl(I.extractedUrl),o.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);u.next(z)}));if(_&&o.rawUrlTree&&o.urlHandlingStrategy.shouldProcessUrl(o.rawUrlTree)){var b=g.extractedUrl,E=g.source,D=g.restoredState,A=g.extras,M=new YT(g.id,o.serializeUrl(b),E,D);u.next(M);var O=PI(b,o.rootComponentType).snapshot;return sn(Object.assign(Object.assign({},g),{targetSnapshot:O,urlAfterRedirects:b,extras:Object.assign(Object.assign({},A),{skipLocationChange:!1,replaceUrl:!1})}))}return o.rawUrlTree=g.rawUrl,g.resolve(null),So}),lD(function(g){var x=g.extras;return o.hooks.beforePreactivation(g.targetSnapshot,{navigationId:g.id,appliedUrlTree:g.extractedUrl,rawUrlTree:g.rawUrl,skipLocationChange:!!x.skipLocationChange,replaceUrl:!!x.replaceUrl})}),Ca(function(g){var y=new xW(g.id,o.serializeUrl(g.extractedUrl),o.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);o.triggerEvent(y)}),Yn(function(g){return Object.assign(Object.assign({},g),{guards:IU(g.targetSnapshot,g.currentSnapshot,o.rootContexts)})}),function(n,a){return $r(function(t){var r=t.targetSnapshot,o=t.currentSnapshot,u=t.guards,f=u.canActivateChecks,p=u.canDeactivateChecks;return 0===p.length&&0===f.length?sn(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,a,t,r){return Xr(n).pipe($r(function(o){return function(n,a,t,r,o){var u=a&&a.routeConfig?a.routeConfig.canDeactivate:null;if(!u||0===u.length)return sn(!0);var f=u.map(function(p){var g,v=wS(p,a,o);if(function(n){return n&&bc(n.canDeactivate)}(v))g=yu(v.canDeactivate(n,a,t,r));else{if(!bc(v))throw new Error("Invalid CanDeactivate guard");g=yu(v(n,a,t,r))}return g.pipe(Eh())});return sn(f).pipe(ly())}(o.component,o.route,t,a,r)}),Eh(function(o){return!0!==o},!0))}(p,r,o,n).pipe($r(function(v){return v&&function(n){return"boolean"==typeof n}(v)?function(n,a,t,r){return Xr(a).pipe(wh(function(o){return qT(function(n,a){return null!==n&&a&&a(new AW(n)),sn(!0)}(o.route.parent,r),function(n,a){return null!==n&&a&&a(new OW(n)),sn(!0)}(o.route,r),function(n,a,t){var r=a[a.length-1],o=a.slice(0,a.length-1).reverse().map(function(f){return function(n){var a=n.routeConfig?n.routeConfig.canActivateChild:null;return a&&0!==a.length?{node:n,guards:a}:null}(f)}).filter(function(f){return null!==f}),u=o.map(function(f){return sI(function(){var p=f.guards.map(function(v){var y,g=wS(v,f.node,t);if(function(n){return n&&bc(n.canActivateChild)}(g))y=yu(g.canActivateChild(r,n));else{if(!bc(g))throw new Error("Invalid CanActivateChild guard");y=yu(g(r,n))}return y.pipe(Eh())});return sn(p).pipe(ly())})});return sn(u).pipe(ly())}(n,o.path,t),function(n,a,t){var r=a.routeConfig?a.routeConfig.canActivate:null;if(!r||0===r.length)return sn(!0);var o=r.map(function(u){return sI(function(){var p,f=wS(u,a,t);if(function(n){return n&&bc(n.canActivate)}(f))p=yu(f.canActivate(a,n));else{if(!bc(f))throw new Error("Invalid CanActivate guard");p=yu(f(a,n))}return p.pipe(Eh())})});return sn(o).pipe(ly())}(n,o.route,t))}),Eh(function(o){return!0!==o},!0))}(r,f,n,a):sn(v)}),Yn(function(v){return Object.assign(Object.assign({},t),{guardsResult:v})}))})}(o.ngModule.injector,function(g){return o.triggerEvent(g)}),Ca(function(g){if(Zd(g.guardsResult)){var y=$T('Redirecting to "'.concat(o.serializeUrl(g.guardsResult),'"'));throw y.url=g.guardsResult,y}var _=new RW(g.id,o.serializeUrl(g.extractedUrl),o.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);o.triggerEvent(_)}),Yd(function(g){return!!g.guardsResult||(o.restoreHistory(g),o.cancelNavigationTransition(g,""),!1)}),lD(function(g){if(g.guards.canActivateChecks.length)return sn(g).pipe(Ca(function(y){var _=new TW(y.id,o.serializeUrl(y.extractedUrl),o.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);o.triggerEvent(_)}),$d(function(y){var _=!1;return sn(y).pipe(function(n,a){return $r(function(t){var r=t.targetSnapshot,o=t.guards.canActivateChecks;if(!o.length)return sn(t);var u=0;return Xr(o).pipe(wh(function(f){return function(n,a,t,r){return function(n,a,t,r){var o=Object.keys(n);if(0===o.length)return sn({});var u={};return Xr(o).pipe($r(function(f){return function(n,a,t,r){var o=wS(n,a,r);return yu(o.resolve?o.resolve(a,t):o(a,t))}(n[f],a,t,r).pipe(Ca(function(p){u[f]=p}))}),KT(1),$r(function(){return Object.keys(u).length===o.length?sn(u):So}))}(n._resolve,n,a,r).pipe(Yn(function(u){return n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),II(n,t).resolve),null}))}(f.route,r,n,a)}),Ca(function(){return u++}),KT(1),$r(function(f){return u===o.length?sn(t):So}))})}(o.paramsInheritanceStrategy,o.ngModule.injector),Ca({next:function(){return _=!0},complete:function(){_||(o.restoreHistory(y),o.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),Ca(function(y){var _=new DW(y.id,o.serializeUrl(y.extractedUrl),o.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);o.triggerEvent(_)}))}),lD(function(g){var x=g.extras;return o.hooks.afterPreactivation(g.targetSnapshot,{navigationId:g.id,appliedUrlTree:g.extractedUrl,rawUrlTree:g.rawUrl,skipLocationChange:!!x.skipLocationChange,replaceUrl:!!x.replaceUrl})}),Yn(function(g){var y=function(n,a,t){var r=ay(n,a._root,t?t._root:void 0);return new OI(r,a)}(o.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:y})}),Ca(function(g){o.currentUrlTree=g.urlAfterRedirects,o.rawUrlTree=o.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),o.routerState=g.targetRouterState,"deferred"===o.urlUpdateStrategy&&(g.extras.skipLocationChange||o.setBrowserUrl(o.rawUrlTree,g),o.browserUrlTree=g.urlAfterRedirects)}),function(a,t,r){return Yn(function(o){return new fU(t,o.targetRouterState,o.currentRouterState,r).activate(a),o})}(o.rootContexts,o.routeReuseStrategy,function(g){return o.triggerEvent(g)}),Ca({next:function(){p=!0},complete:function(){p=!0}}),function(n){return oi(function(a,t){try{a.subscribe(t)}finally{t.add(n)}})}(function(){var g;if(!p&&!v){var y="Navigation ID ".concat(f.id," is not equal to the current navigation id ").concat(o.navigationId);o.cancelNavigationTransition(f,y)}(null===(g=o.currentNavigation)||void 0===g?void 0:g.id)===f.id&&(o.currentNavigation=null)}),Ec(function(g){if(v=!0,function(n){return n&&n[gI]}(g)){var y=Zd(g.url);y||(o.navigated=!0,o.restoreHistory(f,!0));var _=new fI(f.id,o.serializeUrl(f.extractedUrl),g.message);u.next(_),y?setTimeout(function(){var S=o.urlHandlingStrategy.merge(g.url,o.rawUrlTree),x={skipLocationChange:f.extras.skipLocationChange,replaceUrl:"eager"===o.urlUpdateStrategy||SS(f.source)};o.scheduleNavigation(S,"imperative",null,x,{resolve:f.resolve,reject:f.reject,promise:f.promise})},0):f.resolve(!1)}else{o.restoreHistory(f,!0);var C=new EW(f.id,o.serializeUrl(f.extractedUrl),g);u.next(C);try{f.resolve(o.errorHandler(g))}catch(S){f.reject(S)}}return So}))}))}},{key:"resetRootComponentType",value:function(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}},{key:"setTransition",value:function(r){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),r))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var r=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(o){var u="popstate"===o.type?"popstate":"hashchange";"popstate"===u&&setTimeout(function(){var f,p={replaceUrl:!0},v=(null===(f=o.state)||void 0===f?void 0:f.navigationId)?o.state:null;if(v){var g=Object.assign({},v);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(p.state=g)}var y=r.parseUrl(o.url);r.scheduleNavigation(y,u,v,p)},0)}))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(r){this.events.next(r)}},{key:"resetConfig",value:function(r){WI(r),this.config=r.map(sD),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=o.relativeTo,f=o.queryParams,p=o.fragment,v=o.queryParamsHandling,g=o.preserveFragment,y=u||this.routerState.root,_=g?this.currentUrlTree.fragment:p,C=null;switch(v){case"merge":C=Object.assign(Object.assign({},this.currentUrlTree.queryParams),f);break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=f||null}return null!==C&&(C=this.removeEmptyProps(C)),iU(y,this.currentUrlTree,r,C,null!=_?_:null)}},{key:"navigateByUrl",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},u=Zd(r)?r:this.parseUrl(r),f=this.urlHandlingStrategy.merge(u,this.rawUrlTree);return this.scheduleNavigation(f,"imperative",null,o)}},{key:"navigate",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return fz(r),this.navigateByUrl(this.createUrlTree(r,o),o)}},{key:"serializeUrl",value:function(r){return this.urlSerializer.serialize(r)}},{key:"parseUrl",value:function(r){var o;try{o=this.urlSerializer.parse(r)}catch(u){o=this.malformedUriErrorHandler(u,this.urlSerializer,r)}return o}},{key:"isActive",value:function(r,o){var u;if(u=!0===o?Object.assign({},cz):!1===o?Object.assign({},dz):o,Zd(r))return wI(this.currentUrlTree,r,u);var f=this.parseUrl(r);return wI(this.currentUrlTree,f,u)}},{key:"removeEmptyProps",value:function(r){return Object.keys(r).reduce(function(o,u){var f=r[u];return null!=f&&(o[u]=f),o},{})}},{key:"processNavigations",value:function(){var r=this;this.navigations.subscribe(function(o){r.navigated=!0,r.lastSuccessfulId=o.id,r.currentPageId=o.targetPageId,r.events.next(new ry(o.id,r.serializeUrl(o.extractedUrl),r.serializeUrl(r.currentUrlTree))),r.lastSuccessfulNavigation=r.currentNavigation,o.resolve(!0)},function(o){r.console.warn("Unhandled Navigation Error: ".concat(o))})}},{key:"scheduleNavigation",value:function(r,o,u,f,p){var v,g,y;if(this.disposed)return Promise.resolve(!1);var E,D,A,_=this.transitions.value,C=SS(o)&&_&&!SS(_.source),S=_.rawUrl.toString()===r.toString(),x=_.id===(null===(v=this.currentNavigation)||void 0===v?void 0:v.id);if(C&&S&&x)return Promise.resolve(!0);p?(E=p.resolve,D=p.reject,A=p.promise):A=new Promise(function(B,z){E=B,D=z});var O,M=++this.navigationId;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(u=this.location.getState()),O=u&&u.\u0275routerPageId?u.\u0275routerPageId:f.replaceUrl||f.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):O=0,this.setTransition({id:M,targetPageId:O,source:o,restoredState:u,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:f,resolve:E,reject:D,promise:A,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),A.catch(function(B){return Promise.reject(B)})}},{key:"setBrowserUrl",value:function(r,o){var u=this.urlSerializer.serialize(r),f=Object.assign(Object.assign({},o.extras.state),this.generateNgRouterState(o.id,o.targetPageId));this.location.isCurrentPathEqualTo(u)||o.extras.replaceUrl?this.location.replaceState(u,"",f):this.location.go(u,"",f)}},{key:"restoreHistory",value:function(r){var u,f,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("computed"===this.canceledNavigationResolution){var p=this.currentPageId-r.targetPageId,v="popstate"===r.source||"eager"===this.urlUpdateStrategy||this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl);v&&0!==p?this.location.historyGo(p):this.currentUrlTree===(null===(f=this.currentNavigation)||void 0===f?void 0:f.finalUrl)&&0===p&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(r),this.resetUrlToCurrentUrlTree())}},{key:"resetState",value:function(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(r,o){var u=new fI(r.id,this.serializeUrl(r.extractedUrl),o);this.triggerEvent(u),r.resolve(!1)}},{key:"generateNgRouterState",value:function(r,o){return"computed"===this.canceledNavigationResolution?{navigationId:r,"\u0275routerPageId":o}:{navigationId:r}}}]),a}();return n.\u0275fac=function(t){Nm()},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}();function fz(n){for(var a=0;a<n.length;a++){var t=n[a];if(null==t)throw new Error("The requested path contains ".concat(t," segment at index ").concat(a))}}function SS(n){return"imperative"!==n}var dD=function(){var n=function(){function a(t,r,o,u,f){k(this,a),this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=f,this.commands=null,this.onChanges=new ds,this.setTabIndexIfNotOnNativeEl("0")}return j(a,[{key:"setTabIndexIfNotOnNativeEl",value:function(r){if(null==this.tabIndexAttribute){var o=this.renderer,u=this.el.nativeElement;null!==r?o.setAttribute(u,"tabindex",r):o.removeAttribute(u,"tabindex")}}},{key:"ngOnChanges",value:function(r){this.onChanges.next(this)}},{key:"routerLink",set:function(r){null!=r?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}},{key:"onClick",value:function(){if(null===this.urlTree)return!0;var r={skipLocationChange:Rh(this.skipLocationChange),replaceUrl:Rh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!0}},{key:"urlTree",get:function(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Rh(this.preserveFragment)})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(Lo),lt(_u),Vl("tabindex"),lt(I0),lt(gu))},n.\u0275dir=Gi({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&oe("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[ua]}),n}(),Vs=function(){var n=function(){function a(t,r,o){var u=this;k(this,a),this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new ds,this.subscription=t.events.subscribe(function(f){f instanceof ry&&u.updateTargetUrlAndHref()})}return j(a,[{key:"routerLink",set:function(r){this.commands=null!=r?Array.isArray(r)?r:[r]:null}},{key:"ngOnChanges",value:function(r){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(r,o,u,f,p){if(0!==r||o||u||f||p||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;var v={skipLocationChange:Rh(this.skipLocationChange),replaceUrl:Rh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,v),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}},{key:"urlTree",get:function(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Rh(this.preserveFragment)})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(Lo),lt(_u),lt(Ch))},n.\u0275dir=Gi({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&oe("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&Dm("target",r.target)("href",r.href,Si)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[ua]}),n}();function Rh(n){return""===n||!!n}var iL=function(){var n=function(){function a(t,r,o,u,f,p){var v=this;k(this,a),this.router=t,this.element=r,this.renderer=o,this.cdr=u,this.link=f,this.linkWithHref=p,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ee,this.routerEventsSubscription=t.events.subscribe(function(g){g instanceof ry&&v.update()})}return j(a,[{key:"ngAfterContentInit",value:function(){var r=this;sn(this.links.changes,this.linksWithHrefs.changes,sn(null)).pipe(zc()).subscribe(function(o){r.update(),r.subscribeToEachLinkOnChanges()})}},{key:"subscribeToEachLinkOnChanges",value:function(){var o,r=this;null===(o=this.linkInputChangesSubscription)||void 0===o||o.unsubscribe();var u=[].concat(An(this.links.toArray()),An(this.linksWithHrefs.toArray()),[this.link,this.linkWithHref]).filter(function(f){return!!f}).map(function(f){return f.onChanges});this.linkInputChangesSubscription=Xr(u).pipe(zc()).subscribe(function(f){r.isActive!==r.isLinkActive(r.router)(f)&&r.update()})}},{key:"routerLinkActive",set:function(r){var o=Array.isArray(r)?r:r.split(" ");this.classes=o.filter(function(u){return!!u})}},{key:"ngOnChanges",value:function(r){this.update()}},{key:"ngOnDestroy",value:function(){var r;this.routerEventsSubscription.unsubscribe(),null===(r=this.linkInputChangesSubscription)||void 0===r||r.unsubscribe()}},{key:"update",value:function(){var r=this;!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(function(){var o=r.hasActiveLinks();r.isActive!==o&&(r.isActive=o,r.cdr.markForCheck(),r.classes.forEach(function(u){o?r.renderer.addClass(r.element.nativeElement,u):r.renderer.removeClass(r.element.nativeElement,u)}),r.isActiveChange.emit(o))})}},{key:"isLinkActive",value:function(r){var o=function(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return function(u){return!!u.urlTree&&r.isActive(u.urlTree,o)}}},{key:"hasActiveLinks",value:function(){var r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.linkWithHref&&r(this.linkWithHref)||this.links.some(r)||this.linksWithHrefs.some(r)}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(Lo),lt(gu),lt(I0),lt(j0),lt(dD,8),lt(Vs,8))},n.\u0275dir=Gi({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){var u;1&t&&(qm(o,dD,5),qm(o,Vs,5)),2&t&&(jm(u=Km())&&(r.links=u),jm(u=Km())&&(r.linksWithHrefs=u))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ua]}),n}(),oL=function n(){k(this,n)},hz=function(){function n(){k(this,n)}return j(n,[{key:"preload",value:function(t,r){return r().pipe(Ec(function(){return sn(null)}))}}]),n}(),aL=function(){function n(){k(this,n)}return j(n,[{key:"preload",value:function(t,r){return sn(null)}}]),n}(),sL=function(){var n=function(){function a(t,r,o,u){k(this,a),this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new nL(o,r,function(g){return t.triggerEvent(new pI(g))},function(g){return t.triggerEvent(new hI(g))})}return j(a,[{key:"setUpPreloading",value:function(){var r=this;this.subscription=this.router.events.pipe(Yd(function(o){return o instanceof ry}),wh(function(){return r.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var r=this.injector.get(Qu);return this.processRoutes(r,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(r,o){var p,u=[],f=Ot(o);try{for(f.s();!(p=f.n()).done;){var v=p.value;if(v.loadChildren&&!v.canLoad&&v._loadedConfig){var g=v._loadedConfig;u.push(this.processRoutes(g.module,g.routes))}else v.loadChildren&&!v.canLoad?u.push(this.preloadConfig(r,v)):v.children&&u.push(this.processRoutes(r,v.children))}}catch(y){f.e(y)}finally{f.f()}return Xr(u).pipe(zc(),Yn(function(y){}))}},{key:"preloadConfig",value:function(r,o){var u=this;return this.preloadingStrategy.preload(o,function(){return(o._loadedConfig?sn(o._loadedConfig):u.loader.load(r.injector,o)).pipe($r(function(p){return o._loadedConfig=p,u.processRoutes(p.module,p.routes)}))})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(Lo),Mt(z0),Mt(Ui),Mt(oL))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),fD=function(){var n=function(){function a(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};k(this,a),this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}return j(a,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var r=this;return this.router.events.subscribe(function(o){o instanceof YT?(r.store[r.lastId]=r.viewportScroller.getScrollPosition(),r.lastSource=o.navigationTrigger,r.restoredId=o.restoredState?o.restoredState.navigationId:0):o instanceof ry&&(r.lastId=o.id,r.scheduleScrollEvent(o,r.router.parseUrl(o.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var r=this;return this.router.events.subscribe(function(o){o instanceof vI&&(o.position?"top"===r.options.scrollPositionRestoration?r.viewportScroller.scrollToPosition([0,0]):"enabled"===r.options.scrollPositionRestoration&&r.viewportScroller.scrollToPosition(o.position):o.anchor&&"enabled"===r.options.anchorScrolling?r.viewportScroller.scrollToAnchor(o.anchor):"disabled"!==r.options.scrollPositionRestoration&&r.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(r,o){this.router.triggerEvent(new vI(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),a}();return n.\u0275fac=function(t){Nm()},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}(),Qd=new On("ROUTER_CONFIGURATION"),uL=new On("ROUTER_FORROOT_GUARD"),vz=[CT,{provide:xI,useClass:RI},{provide:Lo,useFactory:function(n,a,t,r,o,u){var f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},p=arguments.length>7?arguments[7]:void 0,v=arguments.length>8?arguments[8]:void 0,g=new Lo(null,n,a,t,r,o,yI(u));return p&&(g.urlHandlingStrategy=p),v&&(g.routeReuseStrategy=v),Sz(f,g),f.enableTracing&&g.events.subscribe(function(y){var _,C;null===(_=console.group)||void 0===_||_.call(console,"Router Event: ".concat(y.constructor.name)),console.log(y.toString()),console.log(y),null===(C=console.groupEnd)||void 0===C||C.call(console)}),g},deps:[xI,cy,CT,Ui,z0,cD,Qd,[function n(){k(this,n)},new Ua],[function n(){k(this,n)},new Ua]]},cy,{provide:_u,useFactory:function(n){return n.routerState.root},deps:[Lo]},sL,aL,hz,{provide:Qd,useValue:{enableTracing:!1}}];function gz(){return new JP("Router",Lo)}var mz=function(){var n=function(){function a(t,r){k(this,a)}return j(a,null,[{key:"forRoot",value:function(r,o){return{ngModule:a,providers:[vz,lL(r),{provide:uL,useFactory:Cz,deps:[[Lo,new Ua,new $l]]},{provide:Qd,useValue:o||{}},{provide:Ch,useFactory:_z,deps:[Kd,[new _d(_T),new Ua],Qd]},{provide:fD,useFactory:yz,deps:[Lo,iV,Qd]},{provide:oL,useExisting:o&&o.preloadingStrategy?o.preloadingStrategy:aL},{provide:JP,multi:!0,useFactory:gz},[pD,{provide:W0,multi:!0,useFactory:bz,deps:[pD]},{provide:cL,useFactory:xz,deps:[pD]},{provide:zP,multi:!0,useExisting:cL}]]}}},{key:"forChild",value:function(r){return{ngModule:a,providers:[lL(r)]}}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(uL,8),Mt(Lo,8))},n.\u0275mod=_i({type:n}),n.\u0275inj=Vo({}),n}();function yz(n,a,t){return t.scrollOffset&&a.setOffset(t.scrollOffset),new fD(n,a,t)}function _z(n,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.useHash?new VB(n,a):new m1(n,a)}function Cz(n){return"guarded"}function lL(n){return[{provide:hg,multi:!0,useValue:n},{provide:cD,multi:!0,useValue:n}]}function Sz(n,a){n.errorHandler&&(a.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(a.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(a.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(a.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(a.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(a.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(a.canceledNavigationResolution=n.canceledNavigationResolution)}var pD=function(){var n=function(){function a(t){k(this,a),this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ds}return j(a,[{key:"appInitializer",value:function(){var r=this;return this.injector.get(GB,Promise.resolve(null)).then(function(){if(r.destroyed)return Promise.resolve(!0);var u=null,f=new Promise(function(g){return u=g}),p=r.injector.get(Lo),v=r.injector.get(Qd);return"disabled"===v.initialNavigation?(p.setUpLocationChangeListener(),u(!0)):"enabled"===v.initialNavigation||"enabledBlocking"===v.initialNavigation?(p.hooks.afterPreactivation=function(){return r.initNavigation?sn(null):(r.initNavigation=!0,u(!0),r.resultOfPreactivationDone)},p.initialNavigation()):u(!0),f})}},{key:"bootstrapListener",value:function(r){var o=this.injector.get(Qd),u=this.injector.get(sL),f=this.injector.get(fD),p=this.injector.get(Lo),v=this.injector.get(Xm);r===v.components[0]&&(("enabledNonBlocking"===o.initialNavigation||void 0===o.initialNavigation)&&p.initialNavigation(),u.setUpPreloading(),f.init(),p.resetRootComponentType(v.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"ngOnDestroy",value:function(){this.destroyed=!0}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(Ui))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n}();function bz(n){return n.appInitializer.bind(n)}function xz(n){return n.bootstrapListener.bind(n)}var cL=new On("Router Initializer");function F(n,a,t,r){var f,o=arguments.length,u=o<3?a:null===r?r=Object.getOwnPropertyDescriptor(a,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,a,t,r);else for(var p=n.length-1;p>=0;p--)(f=n[p])&&(u=(o<3?f(u):o>3?f(a,t,u):f(a,t))||u);return o>3&&u&&Object.defineProperty(a,t,u),u}function N(n,a){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,a)}var vD,ef=pe(564),Me=vD=function(){function n(){k(this,n)}return j(n,[{key:"hasChildColumns",value:function(){return!(!(this.childColumns&&this.childColumns.length>0)||1===this.childColumns.length&&this.childColumns.first===this)}},{key:"toColDef",value:function(){var t=this.createColDefFromGridColumn(this);return this.hasChildColumns()&&(t.children=this.getChildColDefs(this.childColumns)),t}},{key:"getChildColDefs",value:function(t){return t.filter(function(r){return!r.hasChildColumns()}).map(function(r){return r.toColDef()})}},{key:"createColDefFromGridColumn",value:function(t){var o=function(n,a){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&a.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]])}return t}(t,["childColumns"]);return o}}]),n}();Me.\u0275fac=function(a){return new(a||Me)},Me.\u0275cmp=Mr({type:Me,selectors:[["ag-grid-column"]],contentQueries:function(a,t,r){var o;1&a&&qm(r,vD,4),2&a&&jm(o=Km())&&(t.childColumns=o)},inputs:{filterFramework:"filterFramework",filterParams:"filterParams",floatingFilterComponent:"floatingFilterComponent",floatingFilterComponentParams:"floatingFilterComponentParams",floatingFilterComponentFramework:"floatingFilterComponentFramework",filter:"filter",headerName:"headerName",headerValueGetter:"headerValueGetter",headerTooltip:"headerTooltip",headerClass:"headerClass",suppressHeaderKeyboardEvent:"suppressHeaderKeyboardEvent",columnGroupShow:"columnGroupShow",toolPanelClass:"toolPanelClass",suppressColumnsToolPanel:"suppressColumnsToolPanel",suppressFiltersToolPanel:"suppressFiltersToolPanel",tooltipComponent:"tooltipComponent",tooltipComponentFramework:"tooltipComponentFramework",tooltipComponentParams:"tooltipComponentParams",children:"children",groupId:"groupId",openByDefault:"openByDefault",marryChildren:"marryChildren",headerGroupComponent:"headerGroupComponent",headerGroupComponentFramework:"headerGroupComponentFramework",headerGroupComponentParams:"headerGroupComponentParams",colId:"colId",field:"field",type:"type",valueGetter:"valueGetter",valueFormatter:"valueFormatter",refData:"refData",keyCreator:"keyCreator",equals:"equals",tooltipField:"tooltipField",tooltipValueGetter:"tooltipValueGetter",checkboxSelection:"checkboxSelection",icons:"icons",suppressNavigable:"suppressNavigable",suppressKeyboardEvent:"suppressKeyboardEvent",suppressPaste:"suppressPaste",suppressFillHandle:"suppressFillHandle",hide:"hide",initialHide:"initialHide",lockVisible:"lockVisible",lockPosition:"lockPosition",suppressMovable:"suppressMovable",editable:"editable",valueSetter:"valueSetter",valueParser:"valueParser",cellEditor:"cellEditor",cellEditorFramework:"cellEditorFramework",cellEditorParams:"cellEditorParams",cellEditorSelector:"cellEditorSelector",singleClickEdit:"singleClickEdit",newValueHandler:"newValueHandler",cellEditorPopup:"cellEditorPopup",cellEditorPopupPosition:"cellEditorPopupPosition",onCellValueChanged:"onCellValueChanged",onCellClicked:"onCellClicked",onCellDoubleClicked:"onCellDoubleClicked",onCellContextMenu:"onCellContextMenu",getQuickFilterText:"getQuickFilterText",filterValueGetter:"filterValueGetter",floatingFilter:"floatingFilter",headerComponent:"headerComponent",headerComponentFramework:"headerComponentFramework",headerComponentParams:"headerComponentParams",menuTabs:"menuTabs",columnsMenuParams:"columnsMenuParams",suppressMenu:"suppressMenu",headerCheckboxSelection:"headerCheckboxSelection",headerCheckboxSelectionFilteredOnly:"headerCheckboxSelectionFilteredOnly",chartDataType:"chartDataType",pinned:"pinned",initialPinned:"initialPinned",lockPinned:"lockPinned",pinnedRowCellRenderer:"pinnedRowCellRenderer",pinnedRowCellRendererFramework:"pinnedRowCellRendererFramework",pinnedRowCellRendererParams:"pinnedRowCellRendererParams",pinnedRowValueFormatter:"pinnedRowValueFormatter",pivot:"pivot",initialPivot:"initialPivot",pivotIndex:"pivotIndex",initialPivotIndex:"initialPivotIndex",pivotComparator:"pivotComparator",enablePivot:"enablePivot",cellStyle:"cellStyle",cellClass:"cellClass",cellClassRules:"cellClassRules",cellRenderer:"cellRenderer",cellRendererFramework:"cellRendererFramework",cellRendererParams:"cellRendererParams",cellRendererSelector:"cellRendererSelector",autoHeight:"autoHeight",wrapText:"wrapText",enableCellChangeFlash:"enableCellChangeFlash",suppressCellFlash:"suppressCellFlash",rowDrag:"rowDrag",rowDragText:"rowDragText",dndSource:"dndSource",dndSourceOnRowDrag:"dndSourceOnRowDrag",rowGroup:"rowGroup",initialRowGroup:"initialRowGroup",rowGroupIndex:"rowGroupIndex",initialRowGroupIndex:"initialRowGroupIndex",enableRowGroup:"enableRowGroup",enableValue:"enableValue",aggFunc:"aggFunc",initialAggFunc:"initialAggFunc",allowedAggFuncs:"allowedAggFuncs",showRowGroup:"showRowGroup",sortable:"sortable",sort:"sort",initialSort:"initialSort",sortIndex:"sortIndex",initialSortIndex:"initialSortIndex",sortingOrder:"sortingOrder",comparator:"comparator",unSortIcon:"unSortIcon",sortedAt:"sortedAt",colSpan:"colSpan",rowSpan:"rowSpan",width:"width",initialWidth:"initialWidth",minWidth:"minWidth",maxWidth:"maxWidth",flex:"flex",initialFlex:"initialFlex",resizable:"resizable",suppressSizeToFit:"suppressSizeToFit",suppressAutoSize:"suppressAutoSize"},decls:0,vars:0,template:function(a,t){},encapsulation:2}),F([jl(vD),N("design:type",ZR)],Me.prototype,"childColumns",void 0),F([V(),N("design:type",Object)],Me.prototype,"filterFramework",void 0),F([V(),N("design:type",Object)],Me.prototype,"filterParams",void 0),F([V(),N("design:type",Object)],Me.prototype,"floatingFilterComponent",void 0),F([V(),N("design:type",Object)],Me.prototype,"floatingFilterComponentParams",void 0),F([V(),N("design:type",Object)],Me.prototype,"floatingFilterComponentFramework",void 0),F([V(),N("design:type",Object)],Me.prototype,"filter",void 0),F([V(),N("design:type",String)],Me.prototype,"headerName",void 0),F([V(),N("design:type",Object)],Me.prototype,"headerValueGetter",void 0),F([V(),N("design:type",String)],Me.prototype,"headerTooltip",void 0),F([V(),N("design:type",Object)],Me.prototype,"headerClass",void 0),F([V(),N("design:type",Function)],Me.prototype,"suppressHeaderKeyboardEvent",void 0),F([V(),N("design:type",String)],Me.prototype,"columnGroupShow",void 0),F([V(),N("design:type",Object)],Me.prototype,"toolPanelClass",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"suppressColumnsToolPanel",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"suppressFiltersToolPanel",void 0),F([V(),N("design:type",Object)],Me.prototype,"tooltipComponent",void 0),F([V(),N("design:type",Object)],Me.prototype,"tooltipComponentFramework",void 0),F([V(),N("design:type",Object)],Me.prototype,"tooltipComponentParams",void 0),F([V(),N("design:type",Array)],Me.prototype,"children",void 0),F([V(),N("design:type",String)],Me.prototype,"groupId",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"openByDefault",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"marryChildren",void 0),F([V(),N("design:type",Object)],Me.prototype,"headerGroupComponent",void 0),F([V(),N("design:type",Object)],Me.prototype,"headerGroupComponentFramework",void 0),F([V(),N("design:type",Object)],Me.prototype,"headerGroupComponentParams",void 0),F([V(),N("design:type",String)],Me.prototype,"colId",void 0),F([V(),N("design:type",String)],Me.prototype,"field",void 0),F([V(),N("design:type",Object)],Me.prototype,"type",void 0),F([V(),N("design:type",Object)],Me.prototype,"valueGetter",void 0),F([V(),N("design:type",Object)],Me.prototype,"valueFormatter",void 0),F([V(),N("design:type",Object)],Me.prototype,"refData",void 0),F([V(),N("design:type",Function)],Me.prototype,"keyCreator",void 0),F([V(),N("design:type",Function)],Me.prototype,"equals",void 0),F([V(),N("design:type",String)],Me.prototype,"tooltipField",void 0),F([V(),N("design:type",Function)],Me.prototype,"tooltipValueGetter",void 0),F([V(),N("design:type",Object)],Me.prototype,"checkboxSelection",void 0),F([V(),N("design:type",Object)],Me.prototype,"icons",void 0),F([V(),N("design:type",Object)],Me.prototype,"suppressNavigable",void 0),F([V(),N("design:type",Function)],Me.prototype,"suppressKeyboardEvent",void 0),F([V(),N("design:type",Object)],Me.prototype,"suppressPaste",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"suppressFillHandle",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"hide",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"initialHide",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"lockVisible",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"lockPosition",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"suppressMovable",void 0),F([V(),N("design:type",Object)],Me.prototype,"editable",void 0),F([V(),N("design:type",Object)],Me.prototype,"valueSetter",void 0),F([V(),N("design:type",Object)],Me.prototype,"valueParser",void 0),F([V(),N("design:type",Object)],Me.prototype,"cellEditor",void 0),F([V(),N("design:type",Object)],Me.prototype,"cellEditorFramework",void 0),F([V(),N("design:type",Object)],Me.prototype,"cellEditorParams",void 0),F([V(),N("design:type",Function)],Me.prototype,"cellEditorSelector",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"singleClickEdit",void 0),F([V(),N("design:type",Function)],Me.prototype,"newValueHandler",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"cellEditorPopup",void 0),F([V(),N("design:type",String)],Me.prototype,"cellEditorPopupPosition",void 0),F([V(),N("design:type",Function)],Me.prototype,"onCellValueChanged",void 0),F([V(),N("design:type",Function)],Me.prototype,"onCellClicked",void 0),F([V(),N("design:type",Function)],Me.prototype,"onCellDoubleClicked",void 0),F([V(),N("design:type",Function)],Me.prototype,"onCellContextMenu",void 0),F([V(),N("design:type",Function)],Me.prototype,"getQuickFilterText",void 0),F([V(),N("design:type",Object)],Me.prototype,"filterValueGetter",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"floatingFilter",void 0),F([V(),N("design:type",Object)],Me.prototype,"headerComponent",void 0),F([V(),N("design:type",Object)],Me.prototype,"headerComponentFramework",void 0),F([V(),N("design:type",Object)],Me.prototype,"headerComponentParams",void 0),F([V(),N("design:type",Array)],Me.prototype,"menuTabs",void 0),F([V(),N("design:type",Object)],Me.prototype,"columnsMenuParams",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"suppressMenu",void 0),F([V(),N("design:type",Object)],Me.prototype,"headerCheckboxSelection",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"headerCheckboxSelectionFilteredOnly",void 0),F([V(),N("design:type",String)],Me.prototype,"chartDataType",void 0),F([V(),N("design:type",Object)],Me.prototype,"pinned",void 0),F([V(),N("design:type",Object)],Me.prototype,"initialPinned",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"lockPinned",void 0),F([V(),N("design:type",Object)],Me.prototype,"pinnedRowCellRenderer",void 0),F([V(),N("design:type",Object)],Me.prototype,"pinnedRowCellRendererFramework",void 0),F([V(),N("design:type",Object)],Me.prototype,"pinnedRowCellRendererParams",void 0),F([V(),N("design:type",Object)],Me.prototype,"pinnedRowValueFormatter",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"pivot",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"initialPivot",void 0),F([V(),N("design:type",Number)],Me.prototype,"pivotIndex",void 0),F([V(),N("design:type",Number)],Me.prototype,"initialPivotIndex",void 0),F([V(),N("design:type",Function)],Me.prototype,"pivotComparator",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"enablePivot",void 0),F([V(),N("design:type",Object)],Me.prototype,"cellStyle",void 0),F([V(),N("design:type",Object)],Me.prototype,"cellClass",void 0),F([V(),N("design:type",Object)],Me.prototype,"cellClassRules",void 0),F([V(),N("design:type",Object)],Me.prototype,"cellRenderer",void 0),F([V(),N("design:type",Object)],Me.prototype,"cellRendererFramework",void 0),F([V(),N("design:type",Object)],Me.prototype,"cellRendererParams",void 0),F([V(),N("design:type",Function)],Me.prototype,"cellRendererSelector",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"autoHeight",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"wrapText",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"enableCellChangeFlash",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"suppressCellFlash",void 0),F([V(),N("design:type",Object)],Me.prototype,"rowDrag",void 0),F([V(),N("design:type",Function)],Me.prototype,"rowDragText",void 0),F([V(),N("design:type",Object)],Me.prototype,"dndSource",void 0),F([V(),N("design:type",Function)],Me.prototype,"dndSourceOnRowDrag",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"rowGroup",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"initialRowGroup",void 0),F([V(),N("design:type",Number)],Me.prototype,"rowGroupIndex",void 0),F([V(),N("design:type",Number)],Me.prototype,"initialRowGroupIndex",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"enableRowGroup",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"enableValue",void 0),F([V(),N("design:type",Object)],Me.prototype,"aggFunc",void 0),F([V(),N("design:type",Object)],Me.prototype,"initialAggFunc",void 0),F([V(),N("design:type",Array)],Me.prototype,"allowedAggFuncs",void 0),F([V(),N("design:type",Object)],Me.prototype,"showRowGroup",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"sortable",void 0),F([V(),N("design:type",String)],Me.prototype,"sort",void 0),F([V(),N("design:type",String)],Me.prototype,"initialSort",void 0),F([V(),N("design:type",Number)],Me.prototype,"sortIndex",void 0),F([V(),N("design:type",Number)],Me.prototype,"initialSortIndex",void 0),F([V(),N("design:type",Array)],Me.prototype,"sortingOrder",void 0),F([V(),N("design:type",Function)],Me.prototype,"comparator",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"unSortIcon",void 0),F([V(),N("design:type",Number)],Me.prototype,"sortedAt",void 0),F([V(),N("design:type",Function)],Me.prototype,"colSpan",void 0),F([V(),N("design:type",Function)],Me.prototype,"rowSpan",void 0),F([V(),N("design:type",Number)],Me.prototype,"width",void 0),F([V(),N("design:type",Number)],Me.prototype,"initialWidth",void 0),F([V(),N("design:type",Number)],Me.prototype,"minWidth",void 0),F([V(),N("design:type",Number)],Me.prototype,"maxWidth",void 0),F([V(),N("design:type",Number)],Me.prototype,"flex",void 0),F([V(),N("design:type",Number)],Me.prototype,"initialFlex",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"resizable",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"suppressSizeToFit",void 0),F([V(),N("design:type",Boolean)],Me.prototype,"suppressAutoSize",void 0);var yD,gD=function(){var n=function(a){ve(r,a);var t=me(r);function r(o){var u;return k(this,r),(u=t.call(this))._ngZone=o,u}return j(r,[{key:"setEmitterUsedCallback",value:function(u){this.isEmitterUsed=u}},{key:"setTimeout",value:function(u,f){this._ngZone?this._ngZone.runOutsideAngular(function(){window.setTimeout(function(){u()},f)}):window.setTimeout(function(){u()},f)}},{key:"setInterval",value:function(u,f){var p=this;return new ef.j_S(function(v){p._ngZone?p._ngZone.runOutsideAngular(function(){v(window.setInterval(function(){u()},f))}):v(window.setInterval(function(){u()},f))})}},{key:"addEventListener",value:function(u,f,p,v){this.isOutsideAngular(f)&&this._ngZone?this._ngZone.runOutsideAngular(function(){u.addEventListener(f,p,v)}):u.addEventListener(f,p,v)}},{key:"dispatchEvent",value:function(u,f){var p=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isOutsideAngular(u)?this._ngZone?this._ngZone.runOutsideAngular(f):f():(this.isEmitterUsed(u)||p)&&(!Di.isInAngularZone()&&this._ngZone?this._ngZone.run(f):f())}}]),r}(ef.vA3);return n.\u0275fac=function(t){return new(t||n)(Mt(Di))},n.\u0275prov=un({token:n,factory:function(t){return n.\u0275fac(t)}}),n=F([N("design:paramtypes",[Di])],n)}(),mD=function(){var n=function(a){ve(r,a);var t=me(r);function r(){return k(this,r),t.apply(this,arguments)}return j(r,[{key:"setViewContainerRef",value:function(u){this.viewContainerRef=u}},{key:"setComponentFactoryResolver",value:function(u){this.componentFactoryResolver=u}},{key:"createWrapper",value:function(u){var f=this,p=function(g){ve(_,g);var y=me(_);function _(){return k(this,_),y.apply(this,arguments)}return j(_,[{key:"init",value:function(S){Ce(Ue(_.prototype),"init",this).call(this,S),this._componentRef.changeDetectorRef.detectChanges()}},{key:"createComponent",value:function(){return f.createComponent(u)}},{key:"hasMethod",value:function(S){return null!=v.getFrameworkComponentInstance()[S]}},{key:"callMethod",value:function(S,x){var b=this.getFrameworkComponentInstance();return v.getFrameworkComponentInstance()[S].apply(b,x)}},{key:"addMethod",value:function(S,x){v[S]=x}}]),_}(Az),v=new p;return v}},{key:"createComponent",value:function(u){var f=this.componentFactoryResolver.resolveComponentFactory(u);return this.viewContainerRef.createComponent(f)}}]),r}(ef.Nk3);return n.\u0275fac=function(){var a;return function(r){return(a||(a=function(n){return vs(function(){for(var a=n.prototype.constructor,t=a[Wo]||pg(a),r=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;o&&o!==r;){var u=o[Wo]||pg(o);if(u&&u!==t)return u;o=Object.getPrototypeOf(o)}return function(f){return new f}})}(n)))(r||n)}}(),n.\u0275prov=un({token:n,factory:function(t){return n.\u0275fac(t)}}),n}(),Az=function(){function n(){k(this,n)}return j(n,[{key:"init",value:function(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,this._agAwareComponent.agInit(this._params)}},{key:"getGui",value:function(){return this._eGui}},{key:"destroy",value:function(){this._frameworkComponentInstance&&"function"==typeof this._frameworkComponentInstance.destroy&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}},{key:"getFrameworkComponentInstance",value:function(){return this._frameworkComponentInstance}}]),n}(),pL=function(){var n=function(){function a(t,r,o,u,f){k(this,a),this.viewContainerRef=r,this.angularFrameworkOverrides=o,this.frameworkComponentWrapper=u,this.componentFactoryResolver=f,this._initialised=!1,this._destroyed=!1,this._fullyReady=ef.j_S.resolve(!0),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipShowDelay=void 0,this.tooltipMouseTrack=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.clipboardDeliminator=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.deltaColumnMode=void 0,this.applyColumnDefOrder=void 0,this.immutableColumns=void 0,this.suppressSetColumnStateEvents=void 0,this.suppressColumnStateEvents=void 0,this.colWidth=void 0,this.minColWidth=void 0,this.maxColWidth=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.components=void 0,this.frameworkComponents=void 0,this.reactUi=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterMovesDown=void 0,this.enterMovesDownAfterEdit=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.stopEditingWhenGridLosesFocus=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.defaultExportParams=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.floatingFilter=void 0,this.enableOldSetFilterModel=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererFramework=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererFramework=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressParentsInRowNodes=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentFramework=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentFramework=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.suppressAggAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDelay=void 0,this.cellFadeDelay=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererFramework=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.deprecatedEmbedFullWidthRows=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererFramework=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.groupRowInnerRenderer=void 0,this.groupRowInnerRendererFramework=void 0,this.groupMultiAutoColumn=void 0,this.groupUseEntireRow=void 0,this.groupSuppressAutoColumn=void 0,this.rememberGroupStateWhenNewData=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.immutableData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.deltaRowDataMode=void 0,this.batchUpdateWaitMillis=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideStoreType=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortingAlwaysResets=void 0,this.serverSideFilteringAlwaysResets=void 0,this.suppressEnterpriseResetOnNewColumns=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellSelection=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.angularCompileRows=void 0,this.angularCompileFilters=void 0,this.functionsPassive=void 0,this.enableGroupEdit=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.suppressKeyboardEvent=void 0,this.localeTextFunc=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.groupRowAggNodes=void 0,this.isGroupOpenByDefault=void 0,this.defaultGroupOrderComparator=void 0,this.processSecondaryColDef=void 0,this.processSecondaryColGroupDef=void 0,this.getDataPath=void 0,this.defaultGroupSortComparator=void 0,this.getChildCount=void 0,this.getServerSideStoreParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowNodeId=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSort=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthCell=void 0,this.toolPanelVisibleChanged=new Ee,this.pasteStart=new Ee,this.pasteEnd=new Ee,this.columnVisible=new Ee,this.columnPinned=new Ee,this.columnResized=new Ee,this.columnMoved=new Ee,this.columnValueChanged=new Ee,this.columnPivotModeChanged=new Ee,this.columnPivotChanged=new Ee,this.columnGroupOpened=new Ee,this.newColumnsLoaded=new Ee,this.gridColumnsChanged=new Ee,this.displayedColumnsChanged=new Ee,this.virtualColumnsChanged=new Ee,this.columnEverythingChanged=new Ee,this.componentStateChanged=new Ee,this.cellValueChanged=new Ee,this.rowValueChanged=new Ee,this.cellEditingStarted=new Ee,this.cellEditingStopped=new Ee,this.rowEditingStarted=new Ee,this.rowEditingStopped=new Ee,this.filterOpened=new Ee,this.filterChanged=new Ee,this.filterModified=new Ee,this.chartCreated=new Ee,this.chartRangeSelectionChanged=new Ee,this.chartOptionsChanged=new Ee,this.chartDestroyed=new Ee,this.cellKeyDown=new Ee,this.cellKeyPress=new Ee,this.gridReady=new Ee,this.firstDataRendered=new Ee,this.gridSizeChanged=new Ee,this.modelUpdated=new Ee,this.virtualRowRemoved=new Ee,this.viewportChanged=new Ee,this.bodyScroll=new Ee,this.bodyScrollEnd=new Ee,this.dragStarted=new Ee,this.dragStopped=new Ee,this.paginationChanged=new Ee,this.rowDragEnter=new Ee,this.rowDragMove=new Ee,this.rowDragLeave=new Ee,this.rowDragEnd=new Ee,this.columnRowGroupChanged=new Ee,this.rowGroupOpened=new Ee,this.expandOrCollapseAll=new Ee,this.pinnedRowDataChanged=new Ee,this.rowDataChanged=new Ee,this.rowDataUpdated=new Ee,this.asyncTransactionsFlushed=new Ee,this.cellClicked=new Ee,this.cellDoubleClicked=new Ee,this.cellFocused=new Ee,this.cellMouseOver=new Ee,this.cellMouseOut=new Ee,this.cellMouseDown=new Ee,this.rowClicked=new Ee,this.rowDoubleClicked=new Ee,this.rowSelected=new Ee,this.selectionChanged=new Ee,this.cellContextMenu=new Ee,this.rangeSelectionChanged=new Ee,this.sortChanged=new Ee,this.columnRowGroupChangeRequest=new Ee,this.columnPivotChangeRequest=new Ee,this.columnValueChangeRequest=new Ee,this.columnAggFuncChangeRequest=new Ee,this._nativeElement=t.nativeElement}return j(a,[{key:"ngAfterViewInit",value:function(){this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef),this.frameworkComponentWrapper.setComponentFactoryResolver(this.componentFactoryResolver),this.angularFrameworkOverrides.setEmitterUsedCallback(this.isEmitterUsed.bind(this)),this.gridOptions=ef.plv.copyAttributesToGridOptions(this.gridOptions,this,!0),this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]},this.columns&&this.columns.length>0&&(this.gridOptions.columnDefs=this.columns.map(function(r){return r.toColDef()})),new ef.rjZ(this._nativeElement,this.gridOptions,this.gridParams),this.gridOptions.api&&(this.api=this.gridOptions.api),this.gridOptions.columnApi&&(this.columnApi=this.gridOptions.columnApi),this._initialised=!0,this._fullyReady.resolveNow(null,function(r){return r})}},{key:"ngOnChanges",value:function(r){this._initialised&&ef.plv.processOnChange(r,this.gridOptions,this.api,this.columnApi)}},{key:"ngOnDestroy",value:function(){this._initialised&&(this._destroyed=!0,this.api&&this.api.destroy())}},{key:"isEmitterUsed",value:function(r){var o=this[r],u=!!o&&o.observers&&o.observers.length>0,f="on".concat(r.charAt(0).toUpperCase()).concat(r.substring(1));return u||!!this.gridOptions&&!!this.gridOptions[f]}},{key:"globalEventListener",value:function(r,o){if(!this._destroyed){var u=this[r];u&&this.isEmitterUsed(r)&&("gridReady"===r?this._fullyReady.then(function(f){u.emit(o)}):u.emit(o))}}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(gu),lt(ya),lt(gD),lt(mD),lt(Cc))},n.\u0275cmp=Mr({type:n,selectors:[["ag-grid-angular"]],contentQueries:function(t,r,o){var u;1&t&&qm(o,Me,4),2&t&&jm(u=Km())&&(r.columns=u)},inputs:{statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipShowDelay:"tooltipShowDelay",tooltipMouseTrack:"tooltipMouseTrack",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",clipboardDeliminator:"clipboardDeliminator",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",deltaColumnMode:"deltaColumnMode",applyColumnDefOrder:"applyColumnDefOrder",immutableColumns:"immutableColumns",suppressSetColumnStateEvents:"suppressSetColumnStateEvents",suppressColumnStateEvents:"suppressColumnStateEvents",colWidth:"colWidth",minColWidth:"minColWidth",maxColWidth:"maxColWidth",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",components:"components",frameworkComponents:"frameworkComponents",reactUi:"reactUi",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterMovesDown:"enterMovesDown",enterMovesDownAfterEdit:"enterMovesDownAfterEdit",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",stopEditingWhenGridLosesFocus:"stopEditingWhenGridLosesFocus",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",defaultExportParams:"defaultExportParams",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",floatingFilter:"floatingFilter",enableOldSetFilterModel:"enableOldSetFilterModel",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererFramework:"loadingCellRendererFramework",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererFramework:"detailCellRendererFramework",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressParentsInRowNodes:"suppressParentsInRowNodes",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentFramework:"loadingOverlayComponentFramework",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentFramework:"noRowsOverlayComponentFramework",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",suppressAggAtRootLevel:"suppressAggAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDelay:"cellFlashDelay",cellFadeDelay:"cellFadeDelay",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererFramework:"fullWidthCellRendererFramework",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",deprecatedEmbedFullWidthRows:"deprecatedEmbedFullWidthRows",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererFramework:"groupRowRendererFramework",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",groupRowInnerRenderer:"groupRowInnerRenderer",groupRowInnerRendererFramework:"groupRowInnerRendererFramework",groupMultiAutoColumn:"groupMultiAutoColumn",groupUseEntireRow:"groupUseEntireRow",groupSuppressAutoColumn:"groupSuppressAutoColumn",rememberGroupStateWhenNewData:"rememberGroupStateWhenNewData",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",immutableData:"immutableData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",deltaRowDataMode:"deltaRowDataMode",batchUpdateWaitMillis:"batchUpdateWaitMillis",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideStoreType:"serverSideStoreType",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortingAlwaysResets:"serverSideSortingAlwaysResets",serverSideFilteringAlwaysResets:"serverSideFilteringAlwaysResets",suppressEnterpriseResetOnNewColumns:"suppressEnterpriseResetOnNewColumns",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellSelection:"suppressCellSelection",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",angularCompileRows:"angularCompileRows",angularCompileFilters:"angularCompileFilters",functionsPassive:"functionsPassive",enableGroupEdit:"enableGroupEdit",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",suppressKeyboardEvent:"suppressKeyboardEvent",localeTextFunc:"localeTextFunc",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",groupRowAggNodes:"groupRowAggNodes",isGroupOpenByDefault:"isGroupOpenByDefault",defaultGroupOrderComparator:"defaultGroupOrderComparator",processSecondaryColDef:"processSecondaryColDef",processSecondaryColGroupDef:"processSecondaryColGroupDef",getDataPath:"getDataPath",defaultGroupSortComparator:"defaultGroupSortComparator",getChildCount:"getChildCount",getServerSideStoreParams:"getServerSideStoreParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowNodeId:"getRowNodeId",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSort:"postSort",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthCell:"isFullWidthCell",gridOptions:"gridOptions",modules:"modules"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",cellKeyPress:"cellKeyPress",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataChanged:"rowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",sortChanged:"sortChanged",columnRowGroupChangeRequest:"columnRowGroupChangeRequest",columnPivotChangeRequest:"columnPivotChangeRequest",columnValueChangeRequest:"columnValueChangeRequest",columnAggFuncChangeRequest:"columnAggFuncChangeRequest"},features:[rP([gD,mD]),ua],decls:0,vars:0,template:function(t,r){},encapsulation:2}),F([jl(Me),N("design:type",ZR)],n.prototype,"columns",void 0),F([V(),N("design:type",Object)],n.prototype,"gridOptions",void 0),F([V(),N("design:type",Array)],n.prototype,"modules",void 0),F([V(),N("design:type",Object)],n.prototype,"statusBar",void 0),F([V(),N("design:type",Object)],n.prototype,"sideBar",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressContextMenu",void 0),F([V(),N("design:type",Boolean)],n.prototype,"preventDefaultOnContextMenu",void 0),F([V(),N("design:type",Boolean)],n.prototype,"allowContextMenuWithControlKey",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMenuHide",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableBrowserTooltips",void 0),F([V(),N("design:type",Number)],n.prototype,"tooltipShowDelay",void 0),F([V(),N("design:type",Boolean)],n.prototype,"tooltipMouseTrack",void 0),F([V(),N("design:type",HTMLElement)],n.prototype,"popupParent",void 0),F([V(),N("design:type",Boolean)],n.prototype,"copyHeadersToClipboard",void 0),F([V(),N("design:type",String)],n.prototype,"clipboardDeliminator",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressCopyRowsToClipboard",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressLastEmptyLineOnPaste",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressClipboardPaste",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressClipboardApi",void 0),F([V(),N("design:type",Array)],n.prototype,"columnDefs",void 0),F([V(),N("design:type",Object)],n.prototype,"defaultColDef",void 0),F([V(),N("design:type",Object)],n.prototype,"defaultColGroupDef",void 0),F([V(),N("design:type",Object)],n.prototype,"columnTypes",void 0),F([V(),N("design:type",Boolean)],n.prototype,"maintainColumnOrder",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressFieldDotNotation",void 0),F([V(),N("design:type",Boolean)],n.prototype,"deltaColumnMode",void 0),F([V(),N("design:type",Boolean)],n.prototype,"applyColumnDefOrder",void 0),F([V(),N("design:type",Boolean)],n.prototype,"immutableColumns",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressSetColumnStateEvents",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressColumnStateEvents",void 0),F([V(),N("design:type",Number)],n.prototype,"colWidth",void 0),F([V(),N("design:type",Number)],n.prototype,"minColWidth",void 0),F([V(),N("design:type",Number)],n.prototype,"maxColWidth",void 0),F([V(),N("design:type",Number)],n.prototype,"headerHeight",void 0),F([V(),N("design:type",Number)],n.prototype,"groupHeaderHeight",void 0),F([V(),N("design:type",Number)],n.prototype,"floatingFiltersHeight",void 0),F([V(),N("design:type",Number)],n.prototype,"pivotHeaderHeight",void 0),F([V(),N("design:type",Number)],n.prototype,"pivotGroupHeaderHeight",void 0),F([V(),N("design:type",Boolean)],n.prototype,"allowDragFromColumnsToolPanel",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMovableColumns",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressColumnMoveAnimation",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressDragLeaveHidesColumns",void 0),F([V(),N("design:type",String)],n.prototype,"colResizeDefault",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressAutoSize",void 0),F([V(),N("design:type",Number)],n.prototype,"autoSizePadding",void 0),F([V(),N("design:type",Boolean)],n.prototype,"skipHeaderOnAutoSize",void 0),F([V(),N("design:type",Object)],n.prototype,"components",void 0),F([V(),N("design:type",Object)],n.prototype,"frameworkComponents",void 0),F([V(),N("design:type",Boolean)],n.prototype,"reactUi",void 0),F([V(),N("design:type",String)],n.prototype,"editType",void 0),F([V(),N("design:type",Boolean)],n.prototype,"singleClickEdit",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressClickEdit",void 0),F([V(),N("design:type",Boolean)],n.prototype,"stopEditingWhenCellsLoseFocus",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enterMovesDown",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enterMovesDownAfterEdit",void 0),F([V(),N("design:type",Boolean)],n.prototype,"undoRedoCellEditing",void 0),F([V(),N("design:type",Number)],n.prototype,"undoRedoCellEditingLimit",void 0),F([V(),N("design:type",Boolean)],n.prototype,"stopEditingWhenGridLosesFocus",void 0),F([V(),N("design:type",Object)],n.prototype,"defaultCsvExportParams",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressCsvExport",void 0),F([V(),N("design:type",Object)],n.prototype,"defaultExcelExportParams",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressExcelExport",void 0),F([V(),N("design:type",Array)],n.prototype,"excelStyles",void 0),F([V(),N("design:type",Object)],n.prototype,"defaultExportParams",void 0),F([V(),N("design:type",String)],n.prototype,"quickFilterText",void 0),F([V(),N("design:type",Boolean)],n.prototype,"cacheQuickFilter",void 0),F([V(),N("design:type",Boolean)],n.prototype,"excludeChildrenWhenTreeDataFiltering",void 0),F([V(),N("design:type",Boolean)],n.prototype,"floatingFilter",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableOldSetFilterModel",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableCharts",void 0),F([V(),N("design:type",Array)],n.prototype,"chartThemes",void 0),F([V(),N("design:type",Object)],n.prototype,"customChartThemes",void 0),F([V(),N("design:type",Object)],n.prototype,"chartThemeOverrides",void 0),F([V(),N("design:type",Object)],n.prototype,"loadingCellRenderer",void 0),F([V(),N("design:type",Object)],n.prototype,"loadingCellRendererFramework",void 0),F([V(),N("design:type",Object)],n.prototype,"loadingCellRendererParams",void 0),F([V(),N("design:type",Function)],n.prototype,"loadingCellRendererSelector",void 0),F([V(),N("design:type",Object)],n.prototype,"localeText",void 0),F([V(),N("design:type",Boolean)],n.prototype,"masterDetail",void 0),F([V(),N("design:type",Boolean)],n.prototype,"keepDetailRows",void 0),F([V(),N("design:type",Number)],n.prototype,"keepDetailRowsCount",void 0),F([V(),N("design:type",Object)],n.prototype,"detailCellRenderer",void 0),F([V(),N("design:type",Object)],n.prototype,"detailCellRendererFramework",void 0),F([V(),N("design:type",Object)],n.prototype,"detailCellRendererParams",void 0),F([V(),N("design:type",Number)],n.prototype,"detailRowHeight",void 0),F([V(),N("design:type",Boolean)],n.prototype,"detailRowAutoHeight",void 0),F([V(),N("design:type",Object)],n.prototype,"context",void 0),F([V(),N("design:type",Array)],n.prototype,"alignedGrids",void 0),F([V(),N("design:type",Number)],n.prototype,"tabIndex",void 0),F([V(),N("design:type",Number)],n.prototype,"rowBuffer",void 0),F([V(),N("design:type",Boolean)],n.prototype,"valueCache",void 0),F([V(),N("design:type",Boolean)],n.prototype,"valueCacheNeverExpires",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableCellExpressions",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressParentsInRowNodes",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressTouch",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressFocusAfterRefresh",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressAsyncEvents",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressBrowserResizeObserver",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressPropertyNamesCheck",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressChangeDetection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"debug",void 0),F([V(),N("design:type",String)],n.prototype,"overlayLoadingTemplate",void 0),F([V(),N("design:type",Object)],n.prototype,"loadingOverlayComponent",void 0),F([V(),N("design:type",Object)],n.prototype,"loadingOverlayComponentFramework",void 0),F([V(),N("design:type",Object)],n.prototype,"loadingOverlayComponentParams",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressLoadingOverlay",void 0),F([V(),N("design:type",String)],n.prototype,"overlayNoRowsTemplate",void 0),F([V(),N("design:type",Object)],n.prototype,"noRowsOverlayComponent",void 0),F([V(),N("design:type",Object)],n.prototype,"noRowsOverlayComponentFramework",void 0),F([V(),N("design:type",Object)],n.prototype,"noRowsOverlayComponentParams",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressNoRowsOverlay",void 0),F([V(),N("design:type",Boolean)],n.prototype,"pagination",void 0),F([V(),N("design:type",Number)],n.prototype,"paginationPageSize",void 0),F([V(),N("design:type",Boolean)],n.prototype,"paginationAutoPageSize",void 0),F([V(),N("design:type",Boolean)],n.prototype,"paginateChildRows",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressPaginationPanel",void 0),F([V(),N("design:type",Boolean)],n.prototype,"pivotMode",void 0),F([V(),N("design:type",String)],n.prototype,"pivotPanelShow",void 0),F([V(),N("design:type",String)],n.prototype,"pivotColumnGroupTotals",void 0),F([V(),N("design:type",String)],n.prototype,"pivotRowTotals",void 0),F([V(),N("design:type",Boolean)],n.prototype,"pivotSuppressAutoColumn",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressExpandablePivotGroups",void 0),F([V(),N("design:type",Boolean)],n.prototype,"functionsReadOnly",void 0),F([V(),N("design:type",Object)],n.prototype,"aggFuncs",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressAggFuncInHeader",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressAggAtRootLevel",void 0),F([V(),N("design:type",Boolean)],n.prototype,"aggregateOnlyChangedColumns",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressAggFilteredOnly",void 0),F([V(),N("design:type",Boolean)],n.prototype,"animateRows",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableCellChangeFlash",void 0),F([V(),N("design:type",Number)],n.prototype,"cellFlashDelay",void 0),F([V(),N("design:type",Number)],n.prototype,"cellFadeDelay",void 0),F([V(),N("design:type",String)],n.prototype,"domLayout",void 0),F([V(),N("design:type",Boolean)],n.prototype,"ensureDomOrder",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableRtl",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressColumnVirtualisation",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMaxRenderedRowRestriction",void 0),F([V(),N("design:type",Boolean)],n.prototype,"rowDragManaged",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressRowDrag",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMoveWhenRowDragging",void 0),F([V(),N("design:type",Boolean)],n.prototype,"rowDragEntireRow",void 0),F([V(),N("design:type",Boolean)],n.prototype,"rowDragMultiRow",void 0),F([V(),N("design:type",Object)],n.prototype,"fullWidthCellRenderer",void 0),F([V(),N("design:type",Object)],n.prototype,"fullWidthCellRendererFramework",void 0),F([V(),N("design:type",Object)],n.prototype,"fullWidthCellRendererParams",void 0),F([V(),N("design:type",Boolean)],n.prototype,"embedFullWidthRows",void 0),F([V(),N("design:type",Boolean)],n.prototype,"deprecatedEmbedFullWidthRows",void 0),F([V(),N("design:type",String)],n.prototype,"groupDisplayType",void 0),F([V(),N("design:type",Number)],n.prototype,"groupDefaultExpanded",void 0),F([V(),N("design:type",Object)],n.prototype,"autoGroupColumnDef",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupMaintainOrder",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupSelectsChildren",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupIncludeFooter",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupIncludeTotalFooter",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupSuppressBlankHeader",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupSelectsFiltered",void 0),F([V(),N("design:type",Boolean)],n.prototype,"showOpenedGroup",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupRemoveSingleChildren",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupRemoveLowestSingleChildren",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupHideOpenParents",void 0),F([V(),N("design:type",String)],n.prototype,"rowGroupPanelShow",void 0),F([V(),N("design:type",Object)],n.prototype,"groupRowRenderer",void 0),F([V(),N("design:type",Object)],n.prototype,"groupRowRendererFramework",void 0),F([V(),N("design:type",Object)],n.prototype,"groupRowRendererParams",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMakeColumnVisibleAfterUnGroup",void 0),F([V(),N("design:type",Boolean)],n.prototype,"treeData",void 0),F([V(),N("design:type",Object)],n.prototype,"groupRowInnerRenderer",void 0),F([V(),N("design:type",Object)],n.prototype,"groupRowInnerRendererFramework",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupMultiAutoColumn",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupUseEntireRow",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupSuppressAutoColumn",void 0),F([V(),N("design:type",Boolean)],n.prototype,"rememberGroupStateWhenNewData",void 0),F([V(),N("design:type",Array)],n.prototype,"pinnedTopRowData",void 0),F([V(),N("design:type",Array)],n.prototype,"pinnedBottomRowData",void 0),F([V(),N("design:type",String)],n.prototype,"rowModelType",void 0),F([V(),N("design:type",Array)],n.prototype,"rowData",void 0),F([V(),N("design:type",Boolean)],n.prototype,"immutableData",void 0),F([V(),N("design:type",Number)],n.prototype,"asyncTransactionWaitMillis",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressModelUpdateAfterUpdateTransaction",void 0),F([V(),N("design:type",Boolean)],n.prototype,"deltaRowDataMode",void 0),F([V(),N("design:type",Number)],n.prototype,"batchUpdateWaitMillis",void 0),F([V(),N("design:type",Object)],n.prototype,"datasource",void 0),F([V(),N("design:type",Number)],n.prototype,"cacheOverflowSize",void 0),F([V(),N("design:type",Number)],n.prototype,"infiniteInitialRowCount",void 0),F([V(),N("design:type",String)],n.prototype,"serverSideStoreType",void 0),F([V(),N("design:type",Number)],n.prototype,"cacheBlockSize",void 0),F([V(),N("design:type",Number)],n.prototype,"maxBlocksInCache",void 0),F([V(),N("design:type",Number)],n.prototype,"maxConcurrentDatasourceRequests",void 0),F([V(),N("design:type",Number)],n.prototype,"blockLoadDebounceMillis",void 0),F([V(),N("design:type",Boolean)],n.prototype,"purgeClosedRowNodes",void 0),F([V(),N("design:type",Object)],n.prototype,"serverSideDatasource",void 0),F([V(),N("design:type",Boolean)],n.prototype,"serverSideSortingAlwaysResets",void 0),F([V(),N("design:type",Boolean)],n.prototype,"serverSideFilteringAlwaysResets",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressEnterpriseResetOnNewColumns",void 0),F([V(),N("design:type",Object)],n.prototype,"viewportDatasource",void 0),F([V(),N("design:type",Number)],n.prototype,"viewportRowModelPageSize",void 0),F([V(),N("design:type",Number)],n.prototype,"viewportRowModelBufferSize",void 0),F([V(),N("design:type",Boolean)],n.prototype,"alwaysShowHorizontalScroll",void 0),F([V(),N("design:type",Boolean)],n.prototype,"alwaysShowVerticalScroll",void 0),F([V(),N("design:type",Boolean)],n.prototype,"debounceVerticalScrollbar",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressHorizontalScroll",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressScrollOnNewData",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressScrollWhenPopupsAreOpen",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressAnimationFrame",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMiddleClickScrolls",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressPreventDefaultOnMouseWheel",void 0),F([V(),N("design:type",Number)],n.prototype,"scrollbarWidth",void 0),F([V(),N("design:type",String)],n.prototype,"rowSelection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"rowMultiSelectWithClick",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressRowDeselection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressRowClickSelection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressCellSelection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMultiRangeSelection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableCellTextSelection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableRangeSelection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableRangeHandle",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableFillHandle",void 0),F([V(),N("design:type",String)],n.prototype,"fillHandleDirection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressClearOnFillReduction",void 0),F([V(),N("design:type",Array)],n.prototype,"sortingOrder",void 0),F([V(),N("design:type",Boolean)],n.prototype,"accentedSort",void 0),F([V(),N("design:type",Boolean)],n.prototype,"unSortIcon",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMultiSort",void 0),F([V(),N("design:type",String)],n.prototype,"multiSortKey",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMaintainUnsortedOrder",void 0),F([V(),N("design:type",Object)],n.prototype,"icons",void 0),F([V(),N("design:type",Number)],n.prototype,"rowHeight",void 0),F([V(),N("design:type",Object)],n.prototype,"rowStyle",void 0),F([V(),N("design:type",Object)],n.prototype,"rowClass",void 0),F([V(),N("design:type",Object)],n.prototype,"rowClassRules",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressRowHoverHighlight",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressRowTransform",void 0),F([V(),N("design:type",Boolean)],n.prototype,"columnHoverHighlight",void 0),F([V(),N("design:type",Boolean)],n.prototype,"deltaSort",void 0),F([V(),N("design:type",String)],n.prototype,"treeDataDisplayType",void 0),F([V(),N("design:type",Boolean)],n.prototype,"angularCompileRows",void 0),F([V(),N("design:type",Boolean)],n.prototype,"angularCompileFilters",void 0),F([V(),N("design:type",Boolean)],n.prototype,"functionsPassive",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableGroupEdit",void 0),F([V(),N("design:type",Function)],n.prototype,"getContextMenuItems",void 0),F([V(),N("design:type",Function)],n.prototype,"getMainMenuItems",void 0),F([V(),N("design:type",Function)],n.prototype,"postProcessPopup",void 0),F([V(),N("design:type",Function)],n.prototype,"processCellForClipboard",void 0),F([V(),N("design:type",Function)],n.prototype,"processHeaderForClipboard",void 0),F([V(),N("design:type",Function)],n.prototype,"processCellFromClipboard",void 0),F([V(),N("design:type",Function)],n.prototype,"sendToClipboard",void 0),F([V(),N("design:type",Function)],n.prototype,"processDataFromClipboard",void 0),F([V(),N("design:type",Function)],n.prototype,"isExternalFilterPresent",void 0),F([V(),N("design:type",Function)],n.prototype,"doesExternalFilterPass",void 0),F([V(),N("design:type",Function)],n.prototype,"getChartToolbarItems",void 0),F([V(),N("design:type",Function)],n.prototype,"createChartContainer",void 0),F([V(),N("design:type",Function)],n.prototype,"navigateToNextHeader",void 0),F([V(),N("design:type",Function)],n.prototype,"tabToNextHeader",void 0),F([V(),N("design:type",Function)],n.prototype,"navigateToNextCell",void 0),F([V(),N("design:type",Function)],n.prototype,"tabToNextCell",void 0),F([V(),N("design:type",Function)],n.prototype,"suppressKeyboardEvent",void 0),F([V(),N("design:type",Function)],n.prototype,"localeTextFunc",void 0),F([V(),N("design:type",Function)],n.prototype,"getDocument",void 0),F([V(),N("design:type",Function)],n.prototype,"paginationNumberFormatter",void 0),F([V(),N("design:type",Function)],n.prototype,"groupRowAggNodes",void 0),F([V(),N("design:type",Function)],n.prototype,"isGroupOpenByDefault",void 0),F([V(),N("design:type",Function)],n.prototype,"defaultGroupOrderComparator",void 0),F([V(),N("design:type",Function)],n.prototype,"processSecondaryColDef",void 0),F([V(),N("design:type",Function)],n.prototype,"processSecondaryColGroupDef",void 0),F([V(),N("design:type",Function)],n.prototype,"getDataPath",void 0),F([V(),N("design:type",Function)],n.prototype,"defaultGroupSortComparator",void 0),F([V(),N("design:type",Function)],n.prototype,"getChildCount",void 0),F([V(),N("design:type",Function)],n.prototype,"getServerSideStoreParams",void 0),F([V(),N("design:type",Function)],n.prototype,"isServerSideGroupOpenByDefault",void 0),F([V(),N("design:type",Function)],n.prototype,"isApplyServerSideTransaction",void 0),F([V(),N("design:type",Function)],n.prototype,"isServerSideGroup",void 0),F([V(),N("design:type",Function)],n.prototype,"getServerSideGroupKey",void 0),F([V(),N("design:type",Function)],n.prototype,"getBusinessKeyForNode",void 0),F([V(),N("design:type",Function)],n.prototype,"getRowNodeId",void 0),F([V(),N("design:type",Function)],n.prototype,"processRowPostCreate",void 0),F([V(),N("design:type",Function)],n.prototype,"isRowSelectable",void 0),F([V(),N("design:type",Function)],n.prototype,"isRowMaster",void 0),F([V(),N("design:type",Function)],n.prototype,"fillOperation",void 0),F([V(),N("design:type",Function)],n.prototype,"postSort",void 0),F([V(),N("design:type",Function)],n.prototype,"getRowStyle",void 0),F([V(),N("design:type",Function)],n.prototype,"getRowClass",void 0),F([V(),N("design:type",Function)],n.prototype,"getRowHeight",void 0),F([V(),N("design:type",Function)],n.prototype,"isFullWidthCell",void 0),F([_t(),N("design:type",Ee)],n.prototype,"toolPanelVisibleChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"pasteStart",void 0),F([_t(),N("design:type",Ee)],n.prototype,"pasteEnd",void 0),F([_t(),N("design:type",Ee)],n.prototype,"columnVisible",void 0),F([_t(),N("design:type",Ee)],n.prototype,"columnPinned",void 0),F([_t(),N("design:type",Ee)],n.prototype,"columnResized",void 0),F([_t(),N("design:type",Ee)],n.prototype,"columnMoved",void 0),F([_t(),N("design:type",Ee)],n.prototype,"columnValueChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"columnPivotModeChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"columnPivotChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"columnGroupOpened",void 0),F([_t(),N("design:type",Ee)],n.prototype,"newColumnsLoaded",void 0),F([_t(),N("design:type",Ee)],n.prototype,"gridColumnsChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"displayedColumnsChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"virtualColumnsChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"columnEverythingChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"componentStateChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"cellValueChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"rowValueChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"cellEditingStarted",void 0),F([_t(),N("design:type",Ee)],n.prototype,"cellEditingStopped",void 0),F([_t(),N("design:type",Ee)],n.prototype,"rowEditingStarted",void 0),F([_t(),N("design:type",Ee)],n.prototype,"rowEditingStopped",void 0),F([_t(),N("design:type",Ee)],n.prototype,"filterOpened",void 0),F([_t(),N("design:type",Ee)],n.prototype,"filterChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"filterModified",void 0),F([_t(),N("design:type",Ee)],n.prototype,"chartCreated",void 0),F([_t(),N("design:type",Ee)],n.prototype,"chartRangeSelectionChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"chartOptionsChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"chartDestroyed",void 0),F([_t(),N("design:type",Ee)],n.prototype,"cellKeyDown",void 0),F([_t(),N("design:type",Ee)],n.prototype,"cellKeyPress",void 0),F([_t(),N("design:type",Ee)],n.prototype,"gridReady",void 0),F([_t(),N("design:type",Ee)],n.prototype,"firstDataRendered",void 0),F([_t(),N("design:type",Ee)],n.prototype,"gridSizeChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"modelUpdated",void 0),F([_t(),N("design:type",Ee)],n.prototype,"virtualRowRemoved",void 0),F([_t(),N("design:type",Ee)],n.prototype,"viewportChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"bodyScroll",void 0),F([_t(),N("design:type",Ee)],n.prototype,"bodyScrollEnd",void 0),F([_t(),N("design:type",Ee)],n.prototype,"dragStarted",void 0),F([_t(),N("design:type",Ee)],n.prototype,"dragStopped",void 0),F([_t(),N("design:type",Ee)],n.prototype,"paginationChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"rowDragEnter",void 0),F([_t(),N("design:type",Ee)],n.prototype,"rowDragMove",void 0),F([_t(),N("design:type",Ee)],n.prototype,"rowDragLeave",void 0),F([_t(),N("design:type",Ee)],n.prototype,"rowDragEnd",void 0),F([_t(),N("design:type",Ee)],n.prototype,"columnRowGroupChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"rowGroupOpened",void 0),F([_t(),N("design:type",Ee)],n.prototype,"expandOrCollapseAll",void 0),F([_t(),N("design:type",Ee)],n.prototype,"pinnedRowDataChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"rowDataChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"rowDataUpdated",void 0),F([_t(),N("design:type",Ee)],n.prototype,"asyncTransactionsFlushed",void 0),F([_t(),N("design:type",Ee)],n.prototype,"cellClicked",void 0),F([_t(),N("design:type",Ee)],n.prototype,"cellDoubleClicked",void 0),F([_t(),N("design:type",Ee)],n.prototype,"cellFocused",void 0),F([_t(),N("design:type",Ee)],n.prototype,"cellMouseOver",void 0),F([_t(),N("design:type",Ee)],n.prototype,"cellMouseOut",void 0),F([_t(),N("design:type",Ee)],n.prototype,"cellMouseDown",void 0),F([_t(),N("design:type",Ee)],n.prototype,"rowClicked",void 0),F([_t(),N("design:type",Ee)],n.prototype,"rowDoubleClicked",void 0),F([_t(),N("design:type",Ee)],n.prototype,"rowSelected",void 0),F([_t(),N("design:type",Ee)],n.prototype,"selectionChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"cellContextMenu",void 0),F([_t(),N("design:type",Ee)],n.prototype,"rangeSelectionChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"sortChanged",void 0),F([_t(),N("design:type",Ee)],n.prototype,"columnRowGroupChangeRequest",void 0),F([_t(),N("design:type",Ee)],n.prototype,"columnPivotChangeRequest",void 0),F([_t(),N("design:type",Ee)],n.prototype,"columnValueChangeRequest",void 0),F([_t(),N("design:type",Ee)],n.prototype,"columnAggFuncChangeRequest",void 0),n=F([N("design:paramtypes",[gu,ya,gD,mD,Cc])],n)}(),Th=yD=function(){function n(){k(this,n)}return j(n,null,[{key:"withComponents",value:function(t){return{ngModule:yD,providers:[{provide:hg,useValue:t,multi:!0}]}}},{key:"forRoot",value:function(t){return{ngModule:yD,providers:[{provide:hg,useValue:t,multi:!0}]}}}]),n}();Th.\u0275fac=function(a){return new(a||Th)},Th.\u0275mod=_i({type:Th}),Th.\u0275inj=Vo({imports:[[]]});var Mz=function(){var n=function(){function a(){k(this,a)}return j(a,[{key:"ngOnInit",value:function(){}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Mr({type:n,selectors:[["app-root"]],decls:20,vars:0,consts:[[1,"kujata-menu"],[1,"kujata-menu-item"],["routerLink","/field-scenes","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/field-op-codes","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/field-models","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/battle-models","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/world-map","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/sounds","routerLinkActive","active",1,"kujata-menu-item-text"]],template:function(t,r){1&t&&(s(0,"div",0),s(1,"div",1),s(2,"a",2),le(3,"Fields"),l(),l(),s(4,"div",1),s(5,"a",3),le(6,"Field Op Codes"),l(),l(),s(7,"div",1),s(8,"a",4),le(9,"Field Models"),l(),l(),s(10,"div",1),s(11,"a",5),le(12,"Battle Models"),l(),l(),s(13,"div",1),s(14,"a",6),le(15,"World Map"),l(),l(),s(16,"div",1),s(17,"a",7),le(18,"Sounds"),l(),l(),l(),c(19,"router-outlet"))},directives:[Vs,iL,aD],styles:[".kujata-menu[_ngcontent-%COMP%]{background-color:silver;margin-bottom:4px;padding:4px;display:flex;flex-flow:row wrap;align-items:flex-start;align-content:flex-start;font-size:10pt}.kujata-menu-item[_ngcontent-%COMP%]{background-color:#fff;margin-right:4px;padding:4px}.kujata-menu-item-text[_ngcontent-%COMP%]{color:#404040;font-weight:700}"]}),n}(),Wn={production:!0,KUJATA_DATA_BASE_URL:"https://kujata-data-dg.netlify.app/"};function Oz(n,a){1&n&&c(0,"img",12),2&n&&d("src",Re(5).environment.KUJATA_DATA_BASE_URL+"/metadata/world-map/wm0.png",Si)}function Pz(n,a){1&n&&c(0,"img",12),2&n&&d("src","https://makou-reactor-bg-images.netlify.app/"+Re().$implicit+".png",Si)}function Iz(n,a){if(1&n&&(s(0,"a",8),s(1,"div",9),le(2),l(),s(3,"div",10),le(4),l(),it(5,Oz,1,1,"img",11),it(6,Pz,1,1,"img",11),l()),2&n){var t=a.$implicit,r=Re(4);d("routerLink","/scene-details/"+t),ae(2),Hn(t),ae(2),Hn(r.getMenuName(t)),ae(1),d("ngIf",t.startsWith("wm")),ae(1),d("ngIf",!t.startsWith("wm"))}}function Lz(n,a){if(1&n&&(s(0,"div",6),it(1,Iz,7,5,"a",7),l()),2&n){var t=Re().$implicit;ae(1),d("ngForOf",t.fieldNames)}}function Fz(n,a){if(1&n&&(s(0,"div",3),s(1,"div",4),le(2),l(),it(3,Lz,2,1,"div",5),l()),2&n){var t=a.$implicit;ae(2),Hn(t.name),ae(1),d("ngIf","Missing"!=t.name)}}function Nz(n,a){if(1&n&&(w(0),it(1,Fz,4,2,"div",2),R()),2&n){var t=Re();ae(1),d("ngForOf",t.chapters)}}var bS,hL=function(){var n=function(){function a(t){k(this,a),this.http=t,this.environment=Wn,this.fetchStatus="NONE",this.sceneGraph=null,this.fieldIdToFieldMetadataMap=null,this.fieldNameToFieldMetadataMap=null,this.GRID_X=150,this.GRID_Y=75}return j(a,[{key:"createFieldNameToIdMap",value:function(r){this.fieldNameToIdMap={};for(var o=0;o<r.length;o++){var u=r[o];u&&u.length>0&&(this.fieldNameToIdMap[u]=o)}}},{key:"fieldNameToId",value:function(r){return this.fieldNameToIdMap[r]||-1}},{key:"fieldNameToMetadata",value:function(r){return this.fieldNameToFieldMetadataMap[r]}},{key:"getFieldMenuName",value:function(r){return""!==r.mapName?r.mapName:r.fieldName}},{key:"getMenuName",value:function(r){var o=this.fieldNameToMetadata(r);return this.getFieldMenuName(o)}},{key:"ngOnInit",value:function(){var r=this,o=Wn.KUJATA_DATA_BASE_URL+"/data/field/flevel.lgp/maplist.json";this.http.get(o).subscribe(function(u){r.mapList=u,r.createFieldNameToIdMap(u),r.http.get(o=Wn.KUJATA_DATA_BASE_URL+"/metadata/scene-graph.json").subscribe(function(f){r.sceneGraph=f,r.fieldIdToFieldMetadataMap={},r.fieldNameToFieldMetadataMap={};var v,p=Ot(r.sceneGraph.nodes);try{for(p.s();!(v=p.n()).done;){var g=v.value;r.fieldIdToFieldMetadataMap[g.id]=g,r.fieldNameToFieldMetadataMap[g.fieldName]=g}}catch(y){p.e(y)}finally{p.f()}console.log("this.fieldNameToFieldMetadataMap:",r.fieldNameToFieldMetadataMap),r.http.get(o=Wn.KUJATA_DATA_BASE_URL+"/metadata/chapters.json").subscribe(function(y){r.chapters=y;for(var _={},C=65;C<r.mapList.length;C++){var S=r.mapList[C];S&&S.length>0&&(_[S]=!0)}var b,x=Ot(r.chapters);try{for(x.s();!(b=x.n()).done;){var A,D=Ot(b.value.fieldNames);try{for(D.s();!(A=D.n()).done;)_[A.value]=void 0}catch(P){D.e(P)}finally{D.f()}}}catch(P){x.e(P)}finally{x.f()}for(var O=r.chapters[r.chapters.length-3],I=0,B=Object.keys(_);I<B.length;I++){var z=B[I];null!=_[z]&&O.fieldNames.push(z)}})})},function(u){r.fetchStatus="ERROR"})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(Bs))},n.\u0275cmp=Mr({type:n,selectors:[["field-scenes"]],decls:2,vars:1,consts:[[2,"background-color","#c0c0c0","padding","4px"],[4,"ngIf"],["class","chapter-container",4,"ngFor","ngForOf"],[1,"chapter-container"],[1,"chapter-name"],["class","field-cards-container",4,"ngIf"],[1,"field-cards-container"],["class","field-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"field-card",3,"routerLink"],[1,"field-name"],[1,"field-menu-name"],["class","field-image",3,"src",4,"ngIf"],[1,"field-image",3,"src"]],template:function(t,r){1&t&&(s(0,"div",0),it(1,Nz,2,1,"ng-container",1),l()),2&t&&(ae(1),d("ngIf",r.chapters))},directives:[$a,rl,Vs],styles:[".chapter-container[_ngcontent-%COMP%]{background-color:#e0e0e0;margin-bottom:4px;padding:4px}.field-cards-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:flex-start;align-content:flex-start;font-size:10pt}.field-card[_ngcontent-%COMP%]{width:150px;height:180px;background-color:#f0f0f0;margin:4px 4px 0 0;text-align:center}.field-card[_ngcontent-%COMP%]:hover{background-color:#fff;text-decoration:none}.field-name[_ngcontent-%COMP%]{color:#404040;font-weight:700}.field-menu-name[_ngcontent-%COMP%]{color:gray;font-weight:700}.field-image[_ngcontent-%COMP%]{max-width:120px;max-height:120px;width:auto;height:auto}"]}),n}();function vL(n,a,t,r,o,u,f){try{var p=n[u](f),v=p.value}catch(g){return void t(g)}p.done?a(v):Promise.resolve(v).then(r,o)}var _D="148",rf=1e3,wa=1001,Mi=1003,Fo=1006,Tc=1008,of=1009,af=1014,Dc=1015,yy=1016,Ih=1020,Za=1023,sf=1026,Lh=1027,bD=33776,xD=33777,RD=33778,TD=33779,TL=35840,DL=35841,AL=35842,ML=35843,OL=37492,PL=37496,IL=37808,LL=37809,FL=37810,NL=37811,kL=37812,GL=37813,BL=37814,HL=37815,VL=37816,WL=37817,UL=37818,zL=37819,jL=37820,qL=37821,KL=36492,_y=2300,Fh=2301,Nh=2400,kh=2401,uf=3e3,Jn=3001,Cu="srgb",Cy="srgb-linear",PD=35044,sl=function(){function n(){k(this,n)}return j(n,[{key:"addEventListener",value:function(t,r){void 0===this._listeners&&(this._listeners={});var o=this._listeners;void 0===o[t]&&(o[t]=[]),-1===o[t].indexOf(r)&&o[t].push(r)}},{key:"hasEventListener",value:function(t,r){if(void 0===this._listeners)return!1;var o=this._listeners;return void 0!==o[t]&&-1!==o[t].indexOf(r)}},{key:"removeEventListener",value:function(t,r){if(void 0!==this._listeners){var u=this._listeners[t];if(void 0!==u){var f=u.indexOf(r);-1!==f&&u.splice(f,1)}}}},{key:"dispatchEvent",value:function(t){if(void 0!==this._listeners){var o=this._listeners[t.type];if(void 0!==o){t.target=this;for(var u=o.slice(0),f=0,p=u.length;f<p;f++)u[f].call(this,t);t.target=null}}}}]),n}(),yo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],ZL=1234567,Gh=Math.PI/180,wy=180/Math.PI;function Qa(){var n=4294967295*Math.random()|0,a=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(yo[255&n]+yo[n>>8&255]+yo[n>>16&255]+yo[n>>24&255]+"-"+yo[255&a]+yo[a>>8&255]+"-"+yo[a>>16&15|64]+yo[a>>24&255]+"-"+yo[63&t|128]+yo[t>>8&255]+"-"+yo[t>>16&255]+yo[t>>24&255]+yo[255&r]+yo[r>>8&255]+yo[r>>16&255]+yo[r>>24&255]).toLowerCase()}function fi(n,a,t){return Math.max(a,Math.min(t,n))}function LD(n,a){return(n%a+a)%a}function Sy(n,a,t){return(1-t)*n+t*a}function FD(n){return 0==(n&n-1)&&0!==n}function QL(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function MS(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function ul(n,a){switch(a.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function hr(n,a){switch(a.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}var Kj=Object.freeze({__proto__:null,DEG2RAD:Gh,RAD2DEG:wy,generateUUID:Qa,clamp:fi,euclideanModulo:LD,mapLinear:function(n,a,t,r,o){return r+(n-a)*(o-r)/(t-a)},inverseLerp:function(n,a,t){return n!==a?(t-n)/(a-n):0},lerp:Sy,damp:function(n,a,t,r){return Sy(n,a,1-Math.exp(-t*r))},pingpong:function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return a-Math.abs(LD(n,2*a)-a)},smoothstep:function(n,a,t){return n<=a?0:n>=t?1:(n=(n-a)/(t-a))*n*(3-2*n)},smootherstep:function(n,a,t){return n<=a?0:n>=t?1:(n=(n-a)/(t-a))*n*n*(n*(6*n-15)+10)},randInt:function(n,a){return n+Math.floor(Math.random()*(a-n+1))},randFloat:function(n,a){return n+Math.random()*(a-n)},randFloatSpread:function(n){return n*(.5-Math.random())},seededRandom:function(n){void 0!==n&&(ZL=n);var a=ZL+=1831565813;return a=Math.imul(a^a>>>15,1|a),(((a^=a+Math.imul(a^a>>>7,61|a))^a>>>14)>>>0)/4294967296},degToRad:function(n){return n*Gh},radToDeg:function(n){return n*wy},isPowerOfTwo:FD,ceilPowerOfTwo:QL,floorPowerOfTwo:MS,setQuaternionFromProperEuler:function(n,a,t,r,o){var u=Math.cos,f=Math.sin,p=u(t/2),v=f(t/2),g=u((a+r)/2),y=f((a+r)/2),_=u((a-r)/2),C=f((a-r)/2),S=u((r-a)/2),x=f((r-a)/2);switch(o){case"XYX":n.set(p*y,v*_,v*C,p*g);break;case"YZY":n.set(v*C,p*y,v*_,p*g);break;case"ZXZ":n.set(v*_,v*C,p*y,p*g);break;case"XZX":n.set(p*y,v*x,v*S,p*g);break;case"YXY":n.set(v*S,p*y,v*x,p*g);break;case"ZYZ":n.set(v*x,v*S,p*y,p*g);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}},normalize:hr,denormalize:ul}),Ye=function(n){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;k(this,a),a.prototype.isVector2=!0,this.x=t,this.y=r}return j(a,[{key:"width",get:function(){return this.x},set:function(r){this.x=r}},{key:"height",get:function(){return this.y},set:function(r){this.y=r}},{key:"set",value:function(r,o){return this.x=r,this.y=o,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setComponent",value:function(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this}},{key:"add",value:function(r){return this.x+=r.x,this.y+=r.y,this}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this}},{key:"addVectors",value:function(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this}},{key:"addScaledVector",value:function(r,o){return this.x+=r.x*o,this.y+=r.y*o,this}},{key:"sub",value:function(r){return this.x-=r.x,this.y-=r.y,this}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this}},{key:"subVectors",value:function(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this}},{key:"multiply",value:function(r){return this.x*=r.x,this.y*=r.y,this}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this}},{key:"divide",value:function(r){return this.x/=r.x,this.y/=r.y,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"applyMatrix3",value:function(r){var o=this.x,u=this.y,f=r.elements;return this.x=f[0]*o+f[3]*u+f[6],this.y=f[1]*o+f[4]*u+f[7],this}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this}},{key:"clamp",value:function(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this}},{key:"clampScalar",value:function(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this}},{key:"clampLength",value:function(r,o){var u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(r,Math.min(o,u)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y}},{key:"cross",value:function(r){return this.x*r.y-this.y*r.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(r){return Math.sqrt(this.distanceToSquared(r))}},{key:"distanceToSquared",value:function(r){var o=this.x-r.x,u=this.y-r.y;return o*o+u*u}},{key:"manhattanDistanceTo",value:function(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this}},{key:"lerpVectors",value:function(r,o,u){return this.x=r.x+(o.x-r.x)*u,this.y=r.y+(o.y-r.y)*u,this}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y}},{key:"fromArray",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[o],this.y=r[o+1],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[o]=this.x,r[o+1]=this.y,r}},{key:"fromBufferAttribute",value:function(r,o){return this.x=r.getX(o),this.y=r.getY(o),this}},{key:"rotateAround",value:function(r,o){var u=Math.cos(o),f=Math.sin(o),p=this.x-r.x,v=this.y-r.y;return this.x=p*u-v*f+r.x,this.y=p*f+v*u+r.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:mi.mark(function t(){return mi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.x;case 2:return o.next=4,this.y;case 4:case"end":return o.stop()}},t,this)})}]),a}(),Ws=function(){function n(){k(this,n),n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return j(n,[{key:"set",value:function(t,r,o,u,f,p,v,g,y){var _=this.elements;return _[0]=t,_[1]=u,_[2]=v,_[3]=r,_[4]=f,_[5]=g,_[6]=o,_[7]=p,_[8]=y,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(t){var r=this.elements,o=t.elements;return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],this}},{key:"extractBasis",value:function(t,r,o){return t.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),o.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(t){var r=t.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,r){var o=t.elements,u=r.elements,f=this.elements,p=o[0],v=o[3],g=o[6],y=o[1],_=o[4],C=o[7],S=o[2],x=o[5],b=o[8],E=u[0],D=u[3],A=u[6],M=u[1],O=u[4],I=u[7],B=u[2],z=u[5],P=u[8];return f[0]=p*E+v*M+g*B,f[3]=p*D+v*O+g*z,f[6]=p*A+v*I+g*P,f[1]=y*E+_*M+C*B,f[4]=y*D+_*O+C*z,f[7]=y*A+_*I+C*P,f[2]=S*E+x*M+b*B,f[5]=S*D+x*O+b*z,f[8]=S*A+x*I+b*P,this}},{key:"multiplyScalar",value:function(t){var r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this}},{key:"determinant",value:function(){var t=this.elements,r=t[0],o=t[1],u=t[2],f=t[3],p=t[4],v=t[5],g=t[6],y=t[7],_=t[8];return r*p*_-r*v*y-o*f*_+o*v*g+u*f*y-u*p*g}},{key:"invert",value:function(){var t=this.elements,r=t[0],o=t[1],u=t[2],f=t[3],p=t[4],v=t[5],g=t[6],y=t[7],_=t[8],C=_*p-v*y,S=v*g-_*f,x=y*f-p*g,b=r*C+o*S+u*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0);var E=1/b;return t[0]=C*E,t[1]=(u*y-_*o)*E,t[2]=(v*o-u*p)*E,t[3]=S*E,t[4]=(_*r-u*g)*E,t[5]=(u*f-v*r)*E,t[6]=x*E,t[7]=(o*g-y*r)*E,t[8]=(p*r-o*f)*E,this}},{key:"transpose",value:function(){var t,r=this.elements;return t=r[1],r[1]=r[3],r[3]=t,t=r[2],r[2]=r[6],r[6]=t,t=r[5],r[5]=r[7],r[7]=t,this}},{key:"getNormalMatrix",value:function(t){return this.setFromMatrix4(t).invert().transpose()}},{key:"transposeIntoArray",value:function(t){var r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this}},{key:"setUvTransform",value:function(t,r,o,u,f,p,v){var g=Math.cos(f),y=Math.sin(f);return this.set(o*g,o*y,-o*(g*p+y*v)+p+t,-u*y,u*g,-u*(-y*p+g*v)+v+r,0,0,1),this}},{key:"scale",value:function(t,r){return this.premultiply(ND.makeScale(t,r)),this}},{key:"rotate",value:function(t){return this.premultiply(ND.makeRotation(-t)),this}},{key:"translate",value:function(t,r){return this.premultiply(ND.makeTranslation(t,r)),this}},{key:"makeTranslation",value:function(t,r){return this.set(1,0,t,0,1,r,0,0,1),this}},{key:"makeRotation",value:function(t){var r=Math.cos(t),o=Math.sin(t);return this.set(r,-o,0,o,r,0,0,0,1),this}},{key:"makeScale",value:function(t,r){return this.set(t,0,0,0,r,0,0,0,1),this}},{key:"equals",value:function(t){for(var r=this.elements,o=t.elements,u=0;u<9;u++)if(r[u]!==o[u])return!1;return!0}},{key:"fromArray",value:function(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=0;o<9;o++)this.elements[o]=t[o+r];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.elements;return t[r]=o[0],t[r+1]=o[1],t[r+2]=o[2],t[r+3]=o[3],t[r+4]=o[4],t[r+5]=o[5],t[r+6]=o[6],t[r+7]=o[7],t[r+8]=o[8],t}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),n}(),ND=new Ws;function eF(n){for(var a=n.length-1;a>=0;--a)if(n[a]>=65535)return!0;return!1}function Ey(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function lf(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function OS(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;var kD=(bn(bS={},Cu,bn({},Cy,lf)),bn(bS,Cy,bn({},Cu,OS)),bS),No={legacyMode:!0,get workingColorSpace(){return Cy},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(a,t,r){if(this.legacyMode||t===r||!t||!r)return a;if(kD[t]&&void 0!==kD[t][r]){var o=kD[t][r];return a.r=o(a.r),a.g=o(a.g),a.b=o(a.b),a}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(a,t){return this.convert(a,this.workingColorSpace,t)},toWorkingColorSpace:function(a,t){return this.convert(a,t,this.workingColorSpace)}},tF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Oi={r:0,g:0,b:0},Us={h:0,s:0,l:0},PS={h:0,s:0,l:0};function GD(n,a,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(a-n)*t:t<.5?a:t<2/3?n+6*(a-n)*(2/3-t):n}function IS(n,a){return a.r=n.r,a.g=n.g,a.b=n.b,a}var Bh,Yt=function(){var n=function(a){function t(r,o,u){return k(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===o&&void 0===u?this.set(r):this.setRGB(r,o,u)}return j(t,[{key:"set",value:function(o){return o&&o.isColor?this.copy(o):"number"==typeof o?this.setHex(o):"string"==typeof o&&this.setStyle(o),this}},{key:"setScalar",value:function(o){return this.r=o,this.g=o,this.b=o,this}},{key:"setHex",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cu;return o=Math.floor(o),this.r=(o>>16&255)/255,this.g=(o>>8&255)/255,this.b=(255&o)/255,No.toWorkingColorSpace(this,u),this}},{key:"setRGB",value:function(o,u,f){var p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:No.workingColorSpace;return this.r=o,this.g=u,this.b=f,No.toWorkingColorSpace(this,p),this}},{key:"setHSL",value:function(o,u,f){var p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:No.workingColorSpace;if(o=LD(o,1),u=fi(u,0,1),f=fi(f,0,1),0===u)this.r=this.g=this.b=f;else{var v=f<=.5?f*(1+u):f+u-f*u,g=2*f-v;this.r=GD(g,v,o+1/3),this.g=GD(g,v,o),this.b=GD(g,v,o-1/3)}return No.toWorkingColorSpace(this,p),this}},{key:"setStyle",value:function(o){var p,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cu;function f(E){void 0!==E&&parseFloat(E)<1&&console.warn("THREE.Color: Alpha component of "+o+" will be ignored.")}if(p=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(o)){var v,g=p[1],y=p[2];switch(g){case"rgb":case"rgba":if(v=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y))return this.r=Math.min(255,parseInt(v[1],10))/255,this.g=Math.min(255,parseInt(v[2],10))/255,this.b=Math.min(255,parseInt(v[3],10))/255,No.toWorkingColorSpace(this,u),f(v[4]),this;if(v=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y))return this.r=Math.min(100,parseInt(v[1],10))/100,this.g=Math.min(100,parseInt(v[2],10))/100,this.b=Math.min(100,parseInt(v[3],10))/100,No.toWorkingColorSpace(this,u),f(v[4]),this;break;case"hsl":case"hsla":if(v=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y)){var _=parseFloat(v[1])/360,C=parseFloat(v[2])/100,S=parseFloat(v[3])/100;return f(v[4]),this.setHSL(_,C,S,u)}}}else if(p=/^\#([A-Fa-f\d]+)$/.exec(o)){var x=p[1],b=x.length;if(3===b)return this.r=parseInt(x.charAt(0)+x.charAt(0),16)/255,this.g=parseInt(x.charAt(1)+x.charAt(1),16)/255,this.b=parseInt(x.charAt(2)+x.charAt(2),16)/255,No.toWorkingColorSpace(this,u),this;if(6===b)return this.r=parseInt(x.charAt(0)+x.charAt(1),16)/255,this.g=parseInt(x.charAt(2)+x.charAt(3),16)/255,this.b=parseInt(x.charAt(4)+x.charAt(5),16)/255,No.toWorkingColorSpace(this,u),this}return o&&o.length>0?this.setColorName(o,u):this}},{key:"setColorName",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cu,f=tF[o.toLowerCase()];return void 0!==f?this.setHex(f,u):console.warn("THREE.Color: Unknown color "+o),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(o){return this.r=o.r,this.g=o.g,this.b=o.b,this}},{key:"copySRGBToLinear",value:function(o){return this.r=lf(o.r),this.g=lf(o.g),this.b=lf(o.b),this}},{key:"copyLinearToSRGB",value:function(o){return this.r=OS(o.r),this.g=OS(o.g),this.b=OS(o.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cu;return No.fromWorkingColorSpace(IS(this,Oi),o),fi(255*Oi.r,0,255)<<16^fi(255*Oi.g,0,255)<<8^fi(255*Oi.b,0,255)<<0}},{key:"getHexString",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cu;return("000000"+this.getHex(o).toString(16)).slice(-6)}},{key:"getHSL",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:No.workingColorSpace;No.fromWorkingColorSpace(IS(this,Oi),u);var _,C,f=Oi.r,p=Oi.g,v=Oi.b,g=Math.max(f,p,v),y=Math.min(f,p,v),S=(y+g)/2;if(y===g)_=0,C=0;else{var x=g-y;switch(C=S<=.5?x/(g+y):x/(2-g-y),g){case f:_=(p-v)/x+(p<v?6:0);break;case p:_=(v-f)/x+2;break;case v:_=(f-p)/x+4}_/=6}return o.h=_,o.s=C,o.l=S,o}},{key:"getRGB",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:No.workingColorSpace;return No.fromWorkingColorSpace(IS(this,Oi),u),o.r=Oi.r,o.g=Oi.g,o.b=Oi.b,o}},{key:"getStyle",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cu;return No.fromWorkingColorSpace(IS(this,Oi),o),o!==Cu?"color(".concat(o," ").concat(Oi.r," ").concat(Oi.g," ").concat(Oi.b,")"):"rgb(".concat(255*Oi.r|0,",").concat(255*Oi.g|0,",").concat(255*Oi.b|0,")")}},{key:"offsetHSL",value:function(o,u,f){return this.getHSL(Us),Us.h+=o,Us.s+=u,Us.l+=f,this.setHSL(Us.h,Us.s,Us.l),this}},{key:"add",value:function(o){return this.r+=o.r,this.g+=o.g,this.b+=o.b,this}},{key:"addColors",value:function(o,u){return this.r=o.r+u.r,this.g=o.g+u.g,this.b=o.b+u.b,this}},{key:"addScalar",value:function(o){return this.r+=o,this.g+=o,this.b+=o,this}},{key:"sub",value:function(o){return this.r=Math.max(0,this.r-o.r),this.g=Math.max(0,this.g-o.g),this.b=Math.max(0,this.b-o.b),this}},{key:"multiply",value:function(o){return this.r*=o.r,this.g*=o.g,this.b*=o.b,this}},{key:"multiplyScalar",value:function(o){return this.r*=o,this.g*=o,this.b*=o,this}},{key:"lerp",value:function(o,u){return this.r+=(o.r-this.r)*u,this.g+=(o.g-this.g)*u,this.b+=(o.b-this.b)*u,this}},{key:"lerpColors",value:function(o,u,f){return this.r=o.r+(u.r-o.r)*f,this.g=o.g+(u.g-o.g)*f,this.b=o.b+(u.b-o.b)*f,this}},{key:"lerpHSL",value:function(o,u){this.getHSL(Us),o.getHSL(PS);var f=Sy(Us.h,PS.h,u),p=Sy(Us.s,PS.s,u),v=Sy(Us.l,PS.l,u);return this.setHSL(f,p,v),this}},{key:"equals",value:function(o){return o.r===this.r&&o.g===this.g&&o.b===this.b}},{key:"fromArray",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=o[u],this.g=o[u+1],this.b=o[u+2],this}},{key:"toArray",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o[u]=this.r,o[u+1]=this.g,o[u+2]=this.b,o}},{key:"fromBufferAttribute",value:function(o,u){return this.r=o.getX(u),this.g=o.getY(u),this.b=o.getZ(u),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:mi.mark(function r(){return mi.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.r;case 2:return u.next=4,this.g;case 4:return u.next=6,this.b;case 6:case"end":return u.stop()}},r,this)})}]),t}();return n.NAMES=tF,n}(),nF=function(){function n(){k(this,n)}return j(n,null,[{key:"getDataURL",value:function(t){if(/^data:/i.test(t.src)||"undefined"==typeof HTMLCanvasElement)return t.src;var r;if(t instanceof HTMLCanvasElement)r=t;else{void 0===Bh&&(Bh=Ey("canvas")),Bh.width=t.width,Bh.height=t.height;var o=Bh.getContext("2d");t instanceof ImageData?o.putImageData(t,0,0):o.drawImage(t,0,0,t.width,t.height),r=Bh}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var r=Ey("canvas");r.width=t.width,r.height=t.height;var o=r.getContext("2d");o.drawImage(t,0,0,t.width,t.height);for(var u=o.getImageData(0,0,t.width,t.height),f=u.data,p=0;p<f.length;p++)f[p]=255*lf(f[p]/255);return o.putImageData(u,0,0),r}if(t.data){for(var v=t.data.slice(0),g=0;g<v.length;g++)v[g]=v instanceof Uint8Array||v instanceof Uint8ClampedArray?Math.floor(255*lf(v[g]/255)):lf(v[g]);return{data:v,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}]),n}(),rF=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;k(this,n),this.isSource=!0,this.uuid=Qa(),this.data=a,this.version=0}return j(n,[{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"toJSON",value:function(t){var r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.images[this.uuid])return t.images[this.uuid];var o={uuid:this.uuid,url:""},u=this.data;if(null!==u){var f;if(Array.isArray(u)){f=[];for(var p=0,v=u.length;p<v;p++)f.push(BD(u[p].isDataTexture?u[p].image:u[p]))}else f=BD(u);o.url=f}return r||(t.images[this.uuid]=o),o}}]),n}();function BD(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?nF.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var $j=0,wu=function(){var n=function(a){ve(r,a);var t=me(r);function r(){var o,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.DEFAULT_IMAGE,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.DEFAULT_MAPPING,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wa,v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wa,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Fo,y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Tc,_=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Za,C=arguments.length>7&&void 0!==arguments[7]?arguments[7]:of,S=arguments.length>8&&void 0!==arguments[8]?arguments[8]:r.DEFAULT_ANISOTROPY,x=arguments.length>9&&void 0!==arguments[9]?arguments[9]:uf;return k(this,r),(o=t.call(this)).isTexture=!0,Object.defineProperty(Kn(o),"id",{value:$j++}),o.uuid=Qa(),o.name="",o.source=new rF(u),o.mipmaps=[],o.mapping=f,o.wrapS=p,o.wrapT=v,o.magFilter=g,o.minFilter=y,o.anisotropy=S,o.format=_,o.internalFormat=null,o.type=C,o.offset=new Ye(0,0),o.repeat=new Ye(1,1),o.center=new Ye(0,0),o.rotation=0,o.matrixAutoUpdate=!0,o.matrix=new Ws,o.generateMipmaps=!0,o.premultiplyAlpha=!1,o.flipY=!0,o.unpackAlignment=4,o.encoding=x,o.userData={},o.version=0,o.onUpdate=null,o.isRenderTargetTexture=!1,o.needsPMREMUpdate=!1,o}return j(r,[{key:"image",get:function(){return this.source.data},set:function(u){this.source.data=u}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(u){return this.name=u.name,this.source=u.source,this.mipmaps=u.mipmaps.slice(0),this.mapping=u.mapping,this.wrapS=u.wrapS,this.wrapT=u.wrapT,this.magFilter=u.magFilter,this.minFilter=u.minFilter,this.anisotropy=u.anisotropy,this.format=u.format,this.internalFormat=u.internalFormat,this.type=u.type,this.offset.copy(u.offset),this.repeat.copy(u.repeat),this.center.copy(u.center),this.rotation=u.rotation,this.matrixAutoUpdate=u.matrixAutoUpdate,this.matrix.copy(u.matrix),this.generateMipmaps=u.generateMipmaps,this.premultiplyAlpha=u.premultiplyAlpha,this.flipY=u.flipY,this.unpackAlignment=u.unpackAlignment,this.encoding=u.encoding,this.userData=JSON.parse(JSON.stringify(u.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(u){var f=void 0===u||"string"==typeof u;if(!f&&void 0!==u.textures[this.uuid])return u.textures[this.uuid];var p={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(u).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(p.userData=this.userData),f||(u.textures[this.uuid]=p),p}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(u){if(300!==this.mapping)return u;if(u.applyMatrix3(this.matrix),u.x<0||u.x>1)switch(this.wrapS){case rf:u.x=u.x-Math.floor(u.x);break;case wa:u.x=u.x<0?0:1;break;case 1002:u.x=1===Math.abs(Math.floor(u.x)%2)?Math.ceil(u.x)-u.x:u.x-Math.floor(u.x)}if(u.y<0||u.y>1)switch(this.wrapT){case rf:u.y=u.y-Math.floor(u.y);break;case wa:u.y=u.y<0?0:1;break;case 1002:u.y=1===Math.abs(Math.floor(u.y)%2)?Math.ceil(u.y)-u.y:u.y-Math.floor(u.y)}return this.flipY&&(u.y=1-u.y),u}},{key:"needsUpdate",set:function(u){!0===u&&(this.version++,this.source.needsUpdate=!0)}}]),r}(sl);return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n}(),wr=function(n){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;k(this,a),a.prototype.isVector4=!0,this.x=t,this.y=r,this.z=o,this.w=u}return j(a,[{key:"width",get:function(){return this.z},set:function(r){this.z=r}},{key:"height",get:function(){return this.w},set:function(r){this.w=r}},{key:"set",value:function(r,o,u,f){return this.x=r,this.y=o,this.z=u,this.w=f,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this.z=r,this.w=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setZ",value:function(r){return this.z=r,this}},{key:"setW",value:function(r){return this.w=r,this}},{key:"setComponent",value:function(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=void 0!==r.w?r.w:1,this}},{key:"add",value:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this}},{key:"addVectors",value:function(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this.z=r.z+o.z,this.w=r.w+o.w,this}},{key:"addScaledVector",value:function(r,o){return this.x+=r.x*o,this.y+=r.y*o,this.z+=r.z*o,this.w+=r.w*o,this}},{key:"sub",value:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this}},{key:"subVectors",value:function(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this.z=r.z-o.z,this.w=r.w-o.w,this}},{key:"multiply",value:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this.w*=r.w,this}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this}},{key:"applyMatrix4",value:function(r){var o=this.x,u=this.y,f=this.z,p=this.w,v=r.elements;return this.x=v[0]*o+v[4]*u+v[8]*f+v[12]*p,this.y=v[1]*o+v[5]*u+v[9]*f+v[13]*p,this.z=v[2]*o+v[6]*u+v[10]*f+v[14]*p,this.w=v[3]*o+v[7]*u+v[11]*f+v[15]*p,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"setAxisAngleFromQuaternion",value:function(r){this.w=2*Math.acos(r.w);var o=Math.sqrt(1-r.w*r.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=r.x/o,this.y=r.y/o,this.z=r.z/o),this}},{key:"setAxisAngleFromRotationMatrix",value:function(r){var o,u,f,p,v=.01,g=.1,y=r.elements,_=y[0],C=y[4],S=y[8],x=y[1],b=y[5],E=y[9],D=y[2],A=y[6],M=y[10];if(Math.abs(C-x)<v&&Math.abs(S-D)<v&&Math.abs(E-A)<v){if(Math.abs(C+x)<g&&Math.abs(S+D)<g&&Math.abs(E+A)<g&&Math.abs(_+b+M-3)<g)return this.set(1,0,0,0),this;o=Math.PI;var O=(_+1)/2,I=(b+1)/2,B=(M+1)/2,z=(C+x)/4,P=(S+D)/4,W=(E+A)/4;return O>I&&O>B?O<v?(u=0,f=.707106781,p=.707106781):(f=z/(u=Math.sqrt(O)),p=P/u):I>B?I<v?(u=.707106781,f=0,p=.707106781):(u=z/(f=Math.sqrt(I)),p=W/f):B<v?(u=.707106781,f=.707106781,p=0):(u=P/(p=Math.sqrt(B)),f=W/p),this.set(u,f,p,o),this}var X=Math.sqrt((A-E)*(A-E)+(S-D)*(S-D)+(x-C)*(x-C));return Math.abs(X)<.001&&(X=1),this.x=(A-E)/X,this.y=(S-D)/X,this.z=(x-C)/X,this.w=Math.acos((_+b+M-1)/2),this}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this.w=Math.min(this.w,r.w),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this.w=Math.max(this.w,r.w),this}},{key:"clamp",value:function(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this.z=Math.max(r.z,Math.min(o.z,this.z)),this.w=Math.max(r.w,Math.min(o.w,this.w)),this}},{key:"clampScalar",value:function(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this.z=Math.max(r,Math.min(o,this.z)),this.w=Math.max(r,Math.min(o,this.w)),this}},{key:"clampLength",value:function(r,o){var u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(r,Math.min(o,u)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this.z+=(r.z-this.z)*o,this.w+=(r.w-this.w)*o,this}},{key:"lerpVectors",value:function(r,o,u){return this.x=r.x+(o.x-r.x)*u,this.y=r.y+(o.y-r.y)*u,this.z=r.z+(o.z-r.z)*u,this.w=r.w+(o.w-r.w)*u,this}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w}},{key:"fromArray",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[o],this.y=r[o+1],this.z=r[o+2],this.w=r[o+3],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[o]=this.x,r[o+1]=this.y,r[o+2]=this.z,r[o+3]=this.w,r}},{key:"fromBufferAttribute",value:function(r,o){return this.x=r.getX(o),this.y=r.getY(o),this.z=r.getZ(o),this.w=r.getW(o),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:mi.mark(function t(){return mi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.x;case 2:return o.next=4,this.y;case 4:return o.next=6,this.z;case 6:return o.next=8,this.w;case 8:case"end":return o.stop()}},t,this)})}]),a}(),cf=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};k(this,t),(r=a.call(this)).isWebGLRenderTarget=!0,r.width=o,r.height=u,r.depth=1,r.scissor=new wr(0,0,o,u),r.scissorTest=!1,r.viewport=new wr(0,0,o,u);var p={width:o,height:u,depth:1};return r.texture=new wu(p,f.mapping,f.wrapS,f.wrapT,f.magFilter,f.minFilter,f.format,f.type,f.anisotropy,f.encoding),r.texture.isRenderTargetTexture=!0,r.texture.flipY=!1,r.texture.generateMipmaps=void 0!==f.generateMipmaps&&f.generateMipmaps,r.texture.internalFormat=void 0!==f.internalFormat?f.internalFormat:null,r.texture.minFilter=void 0!==f.minFilter?f.minFilter:Fo,r.depthBuffer=void 0===f.depthBuffer||f.depthBuffer,r.stencilBuffer=void 0!==f.stencilBuffer&&f.stencilBuffer,r.depthTexture=void 0!==f.depthTexture?f.depthTexture:null,r.samples=void 0!==f.samples?f.samples:0,r}return j(t,[{key:"setSize",value:function(o,u){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(this.width!==o||this.height!==u||this.depth!==f)&&(this.width=o,this.height=u,this.depth=f,this.texture.image.width=o,this.texture.image.height=u,this.texture.image.depth=f,this.dispose()),this.viewport.set(0,0,o,u),this.scissor.set(0,0,o,u)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(o){this.width=o.width,this.height=o.height,this.depth=o.depth,this.viewport.copy(o.viewport),this.texture=o.texture.clone(),this.texture.isRenderTargetTexture=!0;var u=Object.assign({},o.texture.image);return this.texture.source=new rF(u),this.depthBuffer=o.depthBuffer,this.stencilBuffer=o.stencilBuffer,null!==o.depthTexture&&(this.depthTexture=o.depthTexture.clone()),this.samples=o.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),t}(sl),iF=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return k(this,t),(r=a.call(this,null)).isDataArrayTexture=!0,r.image={data:o,width:u,height:f,depth:p},r.magFilter=Mi,r.minFilter=Mi,r.wrapR=wa,r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r}return t}(wu),Xj=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return k(this,t),(r=a.call(this,null)).isData3DTexture=!0,r.image={data:o,width:u,height:f,depth:p},r.magFilter=Mi,r.minFilter=Mi,r.wrapR=wa,r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r}return t}(wu),no=function(n){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;k(this,a),this.isQuaternion=!0,this._x=t,this._y=r,this._z=o,this._w=u}return j(a,[{key:"x",get:function(){return this._x},set:function(r){this._x=r,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(r){this._y=r,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(r){this._z=r,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(r){this._w=r,this._onChangeCallback()}},{key:"set",value:function(r,o,u,f){return this._x=r,this._y=o,this._z=u,this._w=f,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(r){return this._x=r.x,this._y=r.y,this._z=r.z,this._w=r.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(r,o){var u=r._x,f=r._y,p=r._z,v=r._order,g=Math.cos,y=Math.sin,_=g(u/2),C=g(f/2),S=g(p/2),x=y(u/2),b=y(f/2),E=y(p/2);switch(v){case"XYZ":this._x=x*C*S+_*b*E,this._y=_*b*S-x*C*E,this._z=_*C*E+x*b*S,this._w=_*C*S-x*b*E;break;case"YXZ":this._x=x*C*S+_*b*E,this._y=_*b*S-x*C*E,this._z=_*C*E-x*b*S,this._w=_*C*S+x*b*E;break;case"ZXY":this._x=x*C*S-_*b*E,this._y=_*b*S+x*C*E,this._z=_*C*E+x*b*S,this._w=_*C*S-x*b*E;break;case"ZYX":this._x=x*C*S-_*b*E,this._y=_*b*S+x*C*E,this._z=_*C*E-x*b*S,this._w=_*C*S+x*b*E;break;case"YZX":this._x=x*C*S+_*b*E,this._y=_*b*S+x*C*E,this._z=_*C*E-x*b*S,this._w=_*C*S-x*b*E;break;case"XZY":this._x=x*C*S-_*b*E,this._y=_*b*S-x*C*E,this._z=_*C*E+x*b*S,this._w=_*C*S+x*b*E;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+v)}return!1!==o&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(r,o){var u=o/2,f=Math.sin(u);return this._x=r.x*f,this._y=r.y*f,this._z=r.z*f,this._w=Math.cos(u),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(r){var o=r.elements,u=o[0],f=o[4],p=o[8],v=o[1],g=o[5],y=o[9],_=o[2],C=o[6],S=o[10],x=u+g+S;if(x>0){var b=.5/Math.sqrt(x+1);this._w=.25/b,this._x=(C-y)*b,this._y=(p-_)*b,this._z=(v-f)*b}else if(u>g&&u>S){var E=2*Math.sqrt(1+u-g-S);this._w=(C-y)/E,this._x=.25*E,this._y=(f+v)/E,this._z=(p+_)/E}else if(g>S){var D=2*Math.sqrt(1+g-u-S);this._w=(p-_)/D,this._x=(f+v)/D,this._y=.25*D,this._z=(y+C)/D}else{var A=2*Math.sqrt(1+S-u-g);this._w=(v-f)/A,this._x=(p+_)/A,this._y=(y+C)/A,this._z=.25*A}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(r,o){var u=r.dot(o)+1;return u<Number.EPSILON?(u=0,Math.abs(r.x)>Math.abs(r.z)?(this._x=-r.y,this._y=r.x,this._z=0,this._w=u):(this._x=0,this._y=-r.z,this._z=r.y,this._w=u)):(this._x=r.y*o.z-r.z*o.y,this._y=r.z*o.x-r.x*o.z,this._z=r.x*o.y-r.y*o.x,this._w=u),this.normalize()}},{key:"angleTo",value:function(r){return 2*Math.acos(Math.abs(fi(this.dot(r),-1,1)))}},{key:"rotateTowards",value:function(r,o){var u=this.angleTo(r);if(0===u)return this;var f=Math.min(1,o/u);return this.slerp(r,f),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var r=this.length();return 0===r?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(r=1/r),this._y=this._y*r,this._z=this._z*r,this._w=this._w*r),this._onChangeCallback(),this}},{key:"multiply",value:function(r){return this.multiplyQuaternions(this,r)}},{key:"premultiply",value:function(r){return this.multiplyQuaternions(r,this)}},{key:"multiplyQuaternions",value:function(r,o){var u=r._x,f=r._y,p=r._z,v=r._w,g=o._x,y=o._y,_=o._z,C=o._w;return this._x=u*C+v*g+f*_-p*y,this._y=f*C+v*y+p*g-u*_,this._z=p*C+v*_+u*y-f*g,this._w=v*C-u*g-f*y-p*_,this._onChangeCallback(),this}},{key:"slerp",value:function(r,o){if(0===o)return this;if(1===o)return this.copy(r);var u=this._x,f=this._y,p=this._z,v=this._w,g=v*r._w+u*r._x+f*r._y+p*r._z;if(g<0?(this._w=-r._w,this._x=-r._x,this._y=-r._y,this._z=-r._z,g=-g):this.copy(r),g>=1)return this._w=v,this._x=u,this._y=f,this._z=p,this;var y=1-g*g;if(y<=Number.EPSILON){var _=1-o;return this._w=_*v+o*this._w,this._x=_*u+o*this._x,this._y=_*f+o*this._y,this._z=_*p+o*this._z,this.normalize(),this._onChangeCallback(),this}var C=Math.sqrt(y),S=Math.atan2(C,g),x=Math.sin((1-o)*S)/C,b=Math.sin(o*S)/C;return this._w=v*x+this._w*b,this._x=u*x+this._x*b,this._y=f*x+this._y*b,this._z=p*x+this._z*b,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(r,o,u){return this.copy(r).slerp(o,u)}},{key:"random",value:function(){var r=Math.random(),o=Math.sqrt(1-r),u=Math.sqrt(r),f=2*Math.PI*Math.random(),p=2*Math.PI*Math.random();return this.set(o*Math.cos(f),u*Math.sin(p),u*Math.cos(p),o*Math.sin(f))}},{key:"equals",value:function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w}},{key:"fromArray",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=r[o],this._y=r[o+1],this._z=r[o+2],this._w=r[o+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[o]=this._x,r[o+1]=this._y,r[o+2]=this._z,r[o+3]=this._w,r}},{key:"fromBufferAttribute",value:function(r,o){return this._x=r.getX(o),this._y=r.getY(o),this._z=r.getZ(o),this._w=r.getW(o),this}},{key:"_onChange",value:function(r){return this._onChangeCallback=r,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:mi.mark(function t(){return mi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this._x;case 2:return o.next=4,this._y;case 4:return o.next=6,this._z;case 6:return o.next=8,this._w;case 8:case"end":return o.stop()}},t,this)})}],[{key:"slerpFlat",value:function(r,o,u,f,p,v,g){var y=u[f+0],_=u[f+1],C=u[f+2],S=u[f+3],x=p[v+0],b=p[v+1],E=p[v+2],D=p[v+3];if(0===g)return r[o+0]=y,r[o+1]=_,r[o+2]=C,void(r[o+3]=S);if(1===g)return r[o+0]=x,r[o+1]=b,r[o+2]=E,void(r[o+3]=D);if(S!==D||y!==x||_!==b||C!==E){var A=1-g,M=y*x+_*b+C*E+S*D,O=M>=0?1:-1,I=1-M*M;if(I>Number.EPSILON){var B=Math.sqrt(I),z=Math.atan2(B,M*O);A=Math.sin(A*z)/B,g=Math.sin(g*z)/B}var P=g*O;if(y=y*A+x*P,_=_*A+b*P,C=C*A+E*P,S=S*A+D*P,A===1-g){var W=1/Math.sqrt(y*y+_*_+C*C+S*S);y*=W,_*=W,C*=W,S*=W}}r[o]=y,r[o+1]=_,r[o+2]=C,r[o+3]=S}},{key:"multiplyQuaternionsFlat",value:function(r,o,u,f,p,v){var g=u[f],y=u[f+1],_=u[f+2],C=u[f+3],S=p[v],x=p[v+1],b=p[v+2],E=p[v+3];return r[o]=g*E+C*S+y*b-_*x,r[o+1]=y*E+C*x+_*S-g*b,r[o+2]=_*E+C*b+g*x-y*S,r[o+3]=C*E-g*S-y*x-_*b,r}}]),a}(),J=function(n){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;k(this,a),a.prototype.isVector3=!0,this.x=t,this.y=r,this.z=o}return j(a,[{key:"set",value:function(r,o,u){return void 0===u&&(u=this.z),this.x=r,this.y=o,this.z=u,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this.z=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setZ",value:function(r){return this.z=r,this}},{key:"setComponent",value:function(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this}},{key:"add",value:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z,this}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this.z+=r,this}},{key:"addVectors",value:function(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this.z=r.z+o.z,this}},{key:"addScaledVector",value:function(r,o){return this.x+=r.x*o,this.y+=r.y*o,this.z+=r.z*o,this}},{key:"sub",value:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z,this}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this.z-=r,this}},{key:"subVectors",value:function(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this.z=r.z-o.z,this}},{key:"multiply",value:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this.z*=r,this}},{key:"multiplyVectors",value:function(r,o){return this.x=r.x*o.x,this.y=r.y*o.y,this.z=r.z*o.z,this}},{key:"applyEuler",value:function(r){return this.applyQuaternion(oF.setFromEuler(r))}},{key:"applyAxisAngle",value:function(r,o){return this.applyQuaternion(oF.setFromAxisAngle(r,o))}},{key:"applyMatrix3",value:function(r){var o=this.x,u=this.y,f=this.z,p=r.elements;return this.x=p[0]*o+p[3]*u+p[6]*f,this.y=p[1]*o+p[4]*u+p[7]*f,this.z=p[2]*o+p[5]*u+p[8]*f,this}},{key:"applyNormalMatrix",value:function(r){return this.applyMatrix3(r).normalize()}},{key:"applyMatrix4",value:function(r){var o=this.x,u=this.y,f=this.z,p=r.elements,v=1/(p[3]*o+p[7]*u+p[11]*f+p[15]);return this.x=(p[0]*o+p[4]*u+p[8]*f+p[12])*v,this.y=(p[1]*o+p[5]*u+p[9]*f+p[13])*v,this.z=(p[2]*o+p[6]*u+p[10]*f+p[14])*v,this}},{key:"applyQuaternion",value:function(r){var o=this.x,u=this.y,f=this.z,p=r.x,v=r.y,g=r.z,y=r.w,_=y*o+v*f-g*u,C=y*u+g*o-p*f,S=y*f+p*u-v*o,x=-p*o-v*u-g*f;return this.x=_*y+x*-p+C*-g-S*-v,this.y=C*y+x*-v+S*-p-_*-g,this.z=S*y+x*-g+_*-v-C*-p,this}},{key:"project",value:function(r){return this.applyMatrix4(r.matrixWorldInverse).applyMatrix4(r.projectionMatrix)}},{key:"unproject",value:function(r){return this.applyMatrix4(r.projectionMatrixInverse).applyMatrix4(r.matrixWorld)}},{key:"transformDirection",value:function(r){var o=this.x,u=this.y,f=this.z,p=r.elements;return this.x=p[0]*o+p[4]*u+p[8]*f,this.y=p[1]*o+p[5]*u+p[9]*f,this.z=p[2]*o+p[6]*u+p[10]*f,this.normalize()}},{key:"divide",value:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this}},{key:"clamp",value:function(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this.z=Math.max(r.z,Math.min(o.z,this.z)),this}},{key:"clampScalar",value:function(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this.z=Math.max(r,Math.min(o,this.z)),this}},{key:"clampLength",value:function(r,o){var u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(r,Math.min(o,u)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y+this.z*r.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this.z+=(r.z-this.z)*o,this}},{key:"lerpVectors",value:function(r,o,u){return this.x=r.x+(o.x-r.x)*u,this.y=r.y+(o.y-r.y)*u,this.z=r.z+(o.z-r.z)*u,this}},{key:"cross",value:function(r){return this.crossVectors(this,r)}},{key:"crossVectors",value:function(r,o){var u=r.x,f=r.y,p=r.z,v=o.x,g=o.y,y=o.z;return this.x=f*y-p*g,this.y=p*v-u*y,this.z=u*g-f*v,this}},{key:"projectOnVector",value:function(r){var o=r.lengthSq();if(0===o)return this.set(0,0,0);var u=r.dot(this)/o;return this.copy(r).multiplyScalar(u)}},{key:"projectOnPlane",value:function(r){return HD.copy(this).projectOnVector(r),this.sub(HD)}},{key:"reflect",value:function(r){return this.sub(HD.copy(r).multiplyScalar(2*this.dot(r)))}},{key:"angleTo",value:function(r){var o=Math.sqrt(this.lengthSq()*r.lengthSq());if(0===o)return Math.PI/2;var u=this.dot(r)/o;return Math.acos(fi(u,-1,1))}},{key:"distanceTo",value:function(r){return Math.sqrt(this.distanceToSquared(r))}},{key:"distanceToSquared",value:function(r){var o=this.x-r.x,u=this.y-r.y,f=this.z-r.z;return o*o+u*u+f*f}},{key:"manhattanDistanceTo",value:function(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)+Math.abs(this.z-r.z)}},{key:"setFromSpherical",value:function(r){return this.setFromSphericalCoords(r.radius,r.phi,r.theta)}},{key:"setFromSphericalCoords",value:function(r,o,u){var f=Math.sin(o)*r;return this.x=f*Math.sin(u),this.y=Math.cos(o)*r,this.z=f*Math.cos(u),this}},{key:"setFromCylindrical",value:function(r){return this.setFromCylindricalCoords(r.radius,r.theta,r.y)}},{key:"setFromCylindricalCoords",value:function(r,o,u){return this.x=r*Math.sin(o),this.y=u,this.z=r*Math.cos(o),this}},{key:"setFromMatrixPosition",value:function(r){var o=r.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this}},{key:"setFromMatrixScale",value:function(r){var o=this.setFromMatrixColumn(r,0).length(),u=this.setFromMatrixColumn(r,1).length(),f=this.setFromMatrixColumn(r,2).length();return this.x=o,this.y=u,this.z=f,this}},{key:"setFromMatrixColumn",value:function(r,o){return this.fromArray(r.elements,4*o)}},{key:"setFromMatrix3Column",value:function(r,o){return this.fromArray(r.elements,3*o)}},{key:"setFromEuler",value:function(r){return this.x=r._x,this.y=r._y,this.z=r._z,this}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z}},{key:"fromArray",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[o],this.y=r[o+1],this.z=r[o+2],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[o]=this.x,r[o+1]=this.y,r[o+2]=this.z,r}},{key:"fromBufferAttribute",value:function(r,o){return this.x=r.getX(o),this.y=r.getY(o),this.z=r.getZ(o),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var r=2*(Math.random()-.5),o=Math.random()*Math.PI*2,u=Math.sqrt(1-Math.pow(r,2));return this.x=u*Math.cos(o),this.y=u*Math.sin(o),this.z=r,this}},{key:Symbol.iterator,value:mi.mark(function t(){return mi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.x;case 2:return o.next=4,this.y;case 4:return o.next=6,this.z;case 6:case"end":return o.stop()}},t,this)})}]),a}(),HD=new J,oF=new no,ll=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new J(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new J(-1/0,-1/0,-1/0);k(this,n),this.isBox3=!0,this.min=a,this.max=t}return j(n,[{key:"set",value:function(t,r){return this.min.copy(t),this.max.copy(r),this}},{key:"setFromArray",value:function(t){for(var r=1/0,o=1/0,u=1/0,f=-1/0,p=-1/0,v=-1/0,g=0,y=t.length;g<y;g+=3){var _=t[g],C=t[g+1],S=t[g+2];_<r&&(r=_),C<o&&(o=C),S<u&&(u=S),_>f&&(f=_),C>p&&(p=C),S>v&&(v=S)}return this.min.set(r,o,u),this.max.set(f,p,v),this}},{key:"setFromBufferAttribute",value:function(t){for(var r=1/0,o=1/0,u=1/0,f=-1/0,p=-1/0,v=-1/0,g=0,y=t.count;g<y;g++){var _=t.getX(g),C=t.getY(g),S=t.getZ(g);_<r&&(r=_),C<o&&(o=C),S<u&&(u=S),_>f&&(f=_),C>p&&(p=C),S>v&&(v=S)}return this.min.set(r,o,u),this.max.set(f,p,v),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var r=0,o=t.length;r<o;r++)this.expandByPoint(t[r]);return this}},{key:"setFromCenterAndSize",value:function(t,r){var o=df.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(o),this.max.copy(t).add(o),this}},{key:"setFromObject",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(t,r)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"expandByObject",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.updateWorldMatrix(!1,!1);var o=t.geometry;if(void 0!==o)if(r&&null!=o.attributes&&void 0!==o.attributes.position)for(var u=o.attributes.position,f=0,p=u.count;f<p;f++)df.fromBufferAttribute(u,f).applyMatrix4(t.matrixWorld),this.expandByPoint(df);else null===o.boundingBox&&o.computeBoundingBox(),VD.copy(o.boundingBox),VD.applyMatrix4(t.matrixWorld),this.union(VD);for(var v=t.children,g=0,y=v.length;g<y;g++)this.expandByObject(v[g],r);return this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}},{key:"getParameter",value:function(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}},{key:"intersectsSphere",value:function(t){return this.clampPoint(t.center,df),df.distanceToSquared(t.center)<=t.radius*t.radius}},{key:"intersectsPlane",value:function(t){var r,o;return t.normal.x>0?(r=t.normal.x*this.min.x,o=t.normal.x*this.max.x):(r=t.normal.x*this.max.x,o=t.normal.x*this.min.x),t.normal.y>0?(r+=t.normal.y*this.min.y,o+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,o+=t.normal.y*this.min.y),t.normal.z>0?(r+=t.normal.z*this.min.z,o+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,o+=t.normal.z*this.min.z),r<=-t.constant&&o>=-t.constant}},{key:"intersectsTriangle",value:function(t){if(this.isEmpty())return!1;this.getCenter(by),LS.subVectors(this.max,by),Hh.subVectors(t.a,by),Vh.subVectors(t.b,by),Wh.subVectors(t.c,by),Ac.subVectors(Vh,Hh),Mc.subVectors(Wh,Vh),ff.subVectors(Hh,Wh);var r=[0,-Ac.z,Ac.y,0,-Mc.z,Mc.y,0,-ff.z,ff.y,Ac.z,0,-Ac.x,Mc.z,0,-Mc.x,ff.z,0,-ff.x,-Ac.y,Ac.x,0,-Mc.y,Mc.x,0,-ff.y,ff.x,0];return!(!WD(r,Hh,Vh,Wh,LS)||(r=[1,0,0,0,1,0,0,0,1],!WD(r,Hh,Vh,Wh,LS)))&&(FS.crossVectors(Ac,Mc),WD(r=[FS.x,FS.y,FS.z],Hh,Vh,Wh,LS))}},{key:"clampPoint",value:function(t,r){return r.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return df.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"getBoundingSphere",value:function(t){return this.getCenter(t.center),t.radius=.5*this.getSize(df).length(),t}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"applyMatrix4",value:function(t){return this.isEmpty()||(cl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),cl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),cl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),cl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),cl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),cl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),cl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),cl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(cl)),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),n}(),cl=[new J,new J,new J,new J,new J,new J,new J,new J],df=new J,VD=new ll,Hh=new J,Vh=new J,Wh=new J,Ac=new J,Mc=new J,ff=new J,by=new J,LS=new J,FS=new J,pf=new J;function WD(n,a,t,r,o){for(var u=0,f=n.length-3;u<=f;u+=3){pf.fromArray(n,u);var p=o.x*Math.abs(pf.x)+o.y*Math.abs(pf.y)+o.z*Math.abs(pf.z),v=a.dot(pf),g=t.dot(pf),y=r.dot(pf);if(Math.max(-Math.max(v,g,y),Math.min(v,g,y))>p)return!1}return!0}var Jj=new ll,xy=new J,UD=new J,Uh=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new J,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;k(this,n),this.center=a,this.radius=t}return j(n,[{key:"set",value:function(t,r){return this.center.copy(t),this.radius=r,this}},{key:"setFromPoints",value:function(t,r){var o=this.center;void 0!==r?o.copy(r):Jj.setFromPoints(t).getCenter(o);for(var u=0,f=0,p=t.length;f<p;f++)u=Math.max(u,o.distanceToSquared(t[f]));return this.radius=Math.sqrt(u),this}},{key:"copy",value:function(t){return this.center.copy(t.center),this.radius=t.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(t){return t.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(t){var r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r}},{key:"intersectsBox",value:function(t){return t.intersectsSphere(this)}},{key:"intersectsPlane",value:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(t,r){var o=this.center.distanceToSquared(t);return r.copy(t),o>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}},{key:"getBoundingBox",value:function(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}},{key:"applyMatrix4",value:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}},{key:"translate",value:function(t){return this.center.add(t),this}},{key:"expandByPoint",value:function(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;xy.subVectors(t,this.center);var r=xy.lengthSq();if(r>this.radius*this.radius){var o=Math.sqrt(r),u=.5*(o-this.radius);this.center.addScaledVector(xy,u/o),this.radius+=u}return this}},{key:"union",value:function(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(UD.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(xy.copy(t.center).add(UD)),this.expandByPoint(xy.copy(t.center).sub(UD))),this)}},{key:"equals",value:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(),dl=new J,zD=new J,NS=new J,Oc=new J,jD=new J,kS=new J,qD=new J,GS=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new J,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new J(0,0,-1);k(this,n),this.origin=a,this.direction=t}return j(n,[{key:"set",value:function(t,r){return this.origin.copy(t),this.direction.copy(r),this}},{key:"copy",value:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}},{key:"at",value:function(t,r){return r.copy(this.direction).multiplyScalar(t).add(this.origin)}},{key:"lookAt",value:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this}},{key:"recast",value:function(t){return this.origin.copy(this.at(t,dl)),this}},{key:"closestPointToPoint",value:function(t,r){r.subVectors(t,this.origin);var o=r.dot(this.direction);return o<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(o).add(this.origin)}},{key:"distanceToPoint",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:"distanceSqToPoint",value:function(t){var r=dl.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(dl.copy(this.direction).multiplyScalar(r).add(this.origin),dl.distanceToSquared(t))}},{key:"distanceSqToSegment",value:function(t,r,o,u){zD.copy(t).add(r).multiplyScalar(.5),NS.copy(r).sub(t).normalize(),Oc.copy(this.origin).sub(zD);var C,S,x,b,f=.5*t.distanceTo(r),p=-this.direction.dot(NS),v=Oc.dot(this.direction),g=-Oc.dot(NS),y=Oc.lengthSq(),_=Math.abs(1-p*p);if(_>0)if(S=p*v-g,b=f*_,(C=p*g-v)>=0)if(S>=-b)if(S<=b){var E=1/_;x=(C*=E)*(C+p*(S*=E)+2*v)+S*(p*C+S+2*g)+y}else S=f,x=-(C=Math.max(0,-(p*S+v)))*C+S*(S+2*g)+y;else S=-f,x=-(C=Math.max(0,-(p*S+v)))*C+S*(S+2*g)+y;else S<=-b?x=-(C=Math.max(0,-(-p*f+v)))*C+(S=C>0?-f:Math.min(Math.max(-f,-g),f))*(S+2*g)+y:S<=b?(C=0,x=(S=Math.min(Math.max(-f,-g),f))*(S+2*g)+y):x=-(C=Math.max(0,-(p*f+v)))*C+(S=C>0?f:Math.min(Math.max(-f,-g),f))*(S+2*g)+y;else S=p>0?-f:f,x=-(C=Math.max(0,-(p*S+v)))*C+S*(S+2*g)+y;return o&&o.copy(this.direction).multiplyScalar(C).add(this.origin),u&&u.copy(NS).multiplyScalar(S).add(zD),x}},{key:"intersectSphere",value:function(t,r){dl.subVectors(t.center,this.origin);var o=dl.dot(this.direction),u=dl.dot(dl)-o*o,f=t.radius*t.radius;if(u>f)return null;var p=Math.sqrt(f-u),v=o-p,g=o+p;return v<0&&g<0?null:this.at(v<0?g:v,r)}},{key:"intersectsSphere",value:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}},{key:"distanceToPlane",value:function(t){var r=t.normal.dot(this.direction);if(0===r)return 0===t.distanceToPoint(this.origin)?0:null;var o=-(this.origin.dot(t.normal)+t.constant)/r;return o>=0?o:null}},{key:"intersectPlane",value:function(t,r){var o=this.distanceToPlane(t);return null===o?null:this.at(o,r)}},{key:"intersectsPlane",value:function(t){var r=t.distanceToPoint(this.origin);return 0===r||t.normal.dot(this.direction)*r<0}},{key:"intersectBox",value:function(t,r){var o,u,f,p,v,g,y=1/this.direction.x,_=1/this.direction.y,C=1/this.direction.z,S=this.origin;return y>=0?(o=(t.min.x-S.x)*y,u=(t.max.x-S.x)*y):(o=(t.max.x-S.x)*y,u=(t.min.x-S.x)*y),_>=0?(f=(t.min.y-S.y)*_,p=(t.max.y-S.y)*_):(f=(t.max.y-S.y)*_,p=(t.min.y-S.y)*_),o>p||f>u||((f>o||isNaN(o))&&(o=f),(p<u||isNaN(u))&&(u=p),C>=0?(v=(t.min.z-S.z)*C,g=(t.max.z-S.z)*C):(v=(t.max.z-S.z)*C,g=(t.min.z-S.z)*C),o>g||v>u)||((v>o||o!=o)&&(o=v),(g<u||u!=u)&&(u=g),u<0)?null:this.at(o>=0?o:u,r)}},{key:"intersectsBox",value:function(t){return null!==this.intersectBox(t,dl)}},{key:"intersectTriangle",value:function(t,r,o,u,f){jD.subVectors(r,t),kS.subVectors(o,t),qD.crossVectors(jD,kS);var v,p=this.direction.dot(qD);if(p>0){if(u)return null;v=1}else{if(!(p<0))return null;v=-1,p=-p}Oc.subVectors(this.origin,t);var g=v*this.direction.dot(kS.crossVectors(Oc,kS));if(g<0)return null;var y=v*this.direction.dot(jD.cross(Oc));if(y<0||g+y>p)return null;var _=-v*Oc.dot(qD);return _<0?null:this.at(_/p,f)}},{key:"applyMatrix4",value:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}},{key:"equals",value:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(),Sn=function(){function n(){k(this,n),n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return j(n,[{key:"set",value:function(t,r,o,u,f,p,v,g,y,_,C,S,x,b,E,D){var A=this.elements;return A[0]=t,A[4]=r,A[8]=o,A[12]=u,A[1]=f,A[5]=p,A[9]=v,A[13]=g,A[2]=y,A[6]=_,A[10]=C,A[14]=S,A[3]=x,A[7]=b,A[11]=E,A[15]=D,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new n).fromArray(this.elements)}},{key:"copy",value:function(t){var r=this.elements,o=t.elements;return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],this}},{key:"copyPosition",value:function(t){var r=this.elements,o=t.elements;return r[12]=o[12],r[13]=o[13],r[14]=o[14],this}},{key:"setFromMatrix3",value:function(t){var r=t.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(t,r,o){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),o.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(t,r,o){return this.set(t.x,r.x,o.x,0,t.y,r.y,o.y,0,t.z,r.z,o.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(t){var r=this.elements,o=t.elements,u=1/zh.setFromMatrixColumn(t,0).length(),f=1/zh.setFromMatrixColumn(t,1).length(),p=1/zh.setFromMatrixColumn(t,2).length();return r[0]=o[0]*u,r[1]=o[1]*u,r[2]=o[2]*u,r[3]=0,r[4]=o[4]*f,r[5]=o[5]*f,r[6]=o[6]*f,r[7]=0,r[8]=o[8]*p,r[9]=o[9]*p,r[10]=o[10]*p,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){var r=this.elements,o=t.x,u=t.y,f=t.z,p=Math.cos(o),v=Math.sin(o),g=Math.cos(u),y=Math.sin(u),_=Math.cos(f),C=Math.sin(f);if("XYZ"===t.order){var S=p*_,x=p*C,b=v*_,E=v*C;r[0]=g*_,r[4]=-g*C,r[8]=y,r[1]=x+b*y,r[5]=S-E*y,r[9]=-v*g,r[2]=E-S*y,r[6]=b+x*y,r[10]=p*g}else if("YXZ"===t.order){var D=g*_,A=g*C,M=y*_,O=y*C;r[0]=D+O*v,r[4]=M*v-A,r[8]=p*y,r[1]=p*C,r[5]=p*_,r[9]=-v,r[2]=A*v-M,r[6]=O+D*v,r[10]=p*g}else if("ZXY"===t.order){var I=g*_,B=g*C,z=y*_,P=y*C;r[0]=I-P*v,r[4]=-p*C,r[8]=z+B*v,r[1]=B+z*v,r[5]=p*_,r[9]=P-I*v,r[2]=-p*y,r[6]=v,r[10]=p*g}else if("ZYX"===t.order){var W=p*_,X=p*C,ne=v*_,de=v*C;r[0]=g*_,r[4]=ne*y-X,r[8]=W*y+de,r[1]=g*C,r[5]=de*y+W,r[9]=X*y-ne,r[2]=-y,r[6]=v*g,r[10]=p*g}else if("YZX"===t.order){var ce=p*g,G=p*y,ee=v*g,ie=v*y;r[0]=g*_,r[4]=ie-ce*C,r[8]=ee*C+G,r[1]=C,r[5]=p*_,r[9]=-v*_,r[2]=-y*_,r[6]=G*C+ee,r[10]=ce-ie*C}else if("XZY"===t.order){var ue=p*g,se=p*y,ye=v*g,xe=v*y;r[0]=g*_,r[4]=-C,r[8]=y*_,r[1]=ue*C+xe,r[5]=p*_,r[9]=se*C-ye,r[2]=ye*C-se,r[6]=v*_,r[10]=xe*C+ue}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(t){return this.compose(Zj,t,Qj)}},{key:"lookAt",value:function(t,r,o){var u=this.elements;return Sa.subVectors(t,r),0===Sa.lengthSq()&&(Sa.z=1),Sa.normalize(),Pc.crossVectors(o,Sa),0===Pc.lengthSq()&&(1===Math.abs(o.z)?Sa.x+=1e-4:Sa.z+=1e-4,Sa.normalize(),Pc.crossVectors(o,Sa)),Pc.normalize(),BS.crossVectors(Sa,Pc),u[0]=Pc.x,u[4]=BS.x,u[8]=Sa.x,u[1]=Pc.y,u[5]=BS.y,u[9]=Sa.y,u[2]=Pc.z,u[6]=BS.z,u[10]=Sa.z,this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,r){var o=t.elements,u=r.elements,f=this.elements,p=o[0],v=o[4],g=o[8],y=o[12],_=o[1],C=o[5],S=o[9],x=o[13],b=o[2],E=o[6],D=o[10],A=o[14],M=o[3],O=o[7],I=o[11],B=o[15],z=u[0],P=u[4],W=u[8],X=u[12],ne=u[1],de=u[5],ce=u[9],G=u[13],ee=u[2],ie=u[6],ue=u[10],se=u[14],ye=u[3],xe=u[7],we=u[11],_e=u[15];return f[0]=p*z+v*ne+g*ee+y*ye,f[4]=p*P+v*de+g*ie+y*xe,f[8]=p*W+v*ce+g*ue+y*we,f[12]=p*X+v*G+g*se+y*_e,f[1]=_*z+C*ne+S*ee+x*ye,f[5]=_*P+C*de+S*ie+x*xe,f[9]=_*W+C*ce+S*ue+x*we,f[13]=_*X+C*G+S*se+x*_e,f[2]=b*z+E*ne+D*ee+A*ye,f[6]=b*P+E*de+D*ie+A*xe,f[10]=b*W+E*ce+D*ue+A*we,f[14]=b*X+E*G+D*se+A*_e,f[3]=M*z+O*ne+I*ee+B*ye,f[7]=M*P+O*de+I*ie+B*xe,f[11]=M*W+O*ce+I*ue+B*we,f[15]=M*X+O*G+I*se+B*_e,this}},{key:"multiplyScalar",value:function(t){var r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this}},{key:"determinant",value:function(){var t=this.elements,r=t[0],o=t[4],u=t[8],f=t[12],p=t[1],v=t[5],g=t[9],y=t[13],_=t[2],C=t[6],S=t[10],x=t[14];return t[3]*(+f*g*C-u*y*C-f*v*S+o*y*S+u*v*x-o*g*x)+t[7]*(+r*g*x-r*y*S+f*p*S-u*p*x+u*y*_-f*g*_)+t[11]*(+r*y*C-r*v*x-f*p*C+o*p*x+f*v*_-o*y*_)+t[15]*(-u*v*_-r*g*C+r*v*S+u*p*C-o*p*S+o*g*_)}},{key:"transpose",value:function(){var r,t=this.elements;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this}},{key:"setPosition",value:function(t,r,o){var u=this.elements;return t.isVector3?(u[12]=t.x,u[13]=t.y,u[14]=t.z):(u[12]=t,u[13]=r,u[14]=o),this}},{key:"invert",value:function(){var t=this.elements,r=t[0],o=t[1],u=t[2],f=t[3],p=t[4],v=t[5],g=t[6],y=t[7],_=t[8],C=t[9],S=t[10],x=t[11],b=t[12],E=t[13],D=t[14],A=t[15],M=C*D*y-E*S*y+E*g*x-v*D*x-C*g*A+v*S*A,O=b*S*y-_*D*y-b*g*x+p*D*x+_*g*A-p*S*A,I=_*E*y-b*C*y+b*v*x-p*E*x-_*v*A+p*C*A,B=b*C*g-_*E*g-b*v*S+p*E*S+_*v*D-p*C*D,z=r*M+o*O+u*I+f*B;if(0===z)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var P=1/z;return t[0]=M*P,t[1]=(E*S*f-C*D*f-E*u*x+o*D*x+C*u*A-o*S*A)*P,t[2]=(v*D*f-E*g*f+E*u*y-o*D*y-v*u*A+o*g*A)*P,t[3]=(C*g*f-v*S*f-C*u*y+o*S*y+v*u*x-o*g*x)*P,t[4]=O*P,t[5]=(_*D*f-b*S*f+b*u*x-r*D*x-_*u*A+r*S*A)*P,t[6]=(b*g*f-p*D*f-b*u*y+r*D*y+p*u*A-r*g*A)*P,t[7]=(p*S*f-_*g*f+_*u*y-r*S*y-p*u*x+r*g*x)*P,t[8]=I*P,t[9]=(b*C*f-_*E*f-b*o*x+r*E*x+_*o*A-r*C*A)*P,t[10]=(p*E*f-b*v*f+b*o*y-r*E*y-p*o*A+r*v*A)*P,t[11]=(_*v*f-p*C*f-_*o*y+r*C*y+p*o*x-r*v*x)*P,t[12]=B*P,t[13]=(_*E*u-b*C*u+b*o*S-r*E*S-_*o*D+r*C*D)*P,t[14]=(b*v*u-p*E*u-b*o*g+r*E*g+p*o*D-r*v*D)*P,t[15]=(p*C*u-_*v*u+_*o*g-r*C*g-p*o*S+r*v*S)*P,this}},{key:"scale",value:function(t){var r=this.elements,o=t.x,u=t.y,f=t.z;return r[0]*=o,r[4]*=u,r[8]*=f,r[1]*=o,r[5]*=u,r[9]*=f,r[2]*=o,r[6]*=u,r[10]*=f,r[3]*=o,r[7]*=u,r[11]*=f,this}},{key:"getMaxScaleOnAxis",value:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}},{key:"makeTranslation",value:function(t,r,o){return this.set(1,0,0,t,0,1,0,r,0,0,1,o,0,0,0,1),this}},{key:"makeRotationX",value:function(t){var r=Math.cos(t),o=Math.sin(t);return this.set(1,0,0,0,0,r,-o,0,0,o,r,0,0,0,0,1),this}},{key:"makeRotationY",value:function(t){var r=Math.cos(t),o=Math.sin(t);return this.set(r,0,o,0,0,1,0,0,-o,0,r,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(t){var r=Math.cos(t),o=Math.sin(t);return this.set(r,-o,0,0,o,r,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(t,r){var o=Math.cos(r),u=Math.sin(r),f=1-o,p=t.x,v=t.y,g=t.z,y=f*p,_=f*v;return this.set(y*p+o,y*v-u*g,y*g+u*v,0,y*v+u*g,_*v+o,_*g-u*p,0,y*g-u*v,_*g+u*p,f*g*g+o,0,0,0,0,1),this}},{key:"makeScale",value:function(t,r,o){return this.set(t,0,0,0,0,r,0,0,0,0,o,0,0,0,0,1),this}},{key:"makeShear",value:function(t,r,o,u,f,p){return this.set(1,o,f,0,t,1,p,0,r,u,1,0,0,0,0,1),this}},{key:"compose",value:function(t,r,o){var u=this.elements,f=r._x,p=r._y,v=r._z,g=r._w,y=f+f,_=p+p,C=v+v,S=f*y,x=f*_,b=f*C,E=p*_,D=p*C,A=v*C,M=g*y,O=g*_,I=g*C,B=o.x,z=o.y,P=o.z;return u[0]=(1-(E+A))*B,u[1]=(x+I)*B,u[2]=(b-O)*B,u[3]=0,u[4]=(x-I)*z,u[5]=(1-(S+A))*z,u[6]=(D+M)*z,u[7]=0,u[8]=(b+O)*P,u[9]=(D-M)*P,u[10]=(1-(S+E))*P,u[11]=0,u[12]=t.x,u[13]=t.y,u[14]=t.z,u[15]=1,this}},{key:"decompose",value:function(t,r,o){var u=this.elements,f=zh.set(u[0],u[1],u[2]).length(),p=zh.set(u[4],u[5],u[6]).length(),v=zh.set(u[8],u[9],u[10]).length();this.determinant()<0&&(f=-f),t.x=u[12],t.y=u[13],t.z=u[14],zs.copy(this);var y=1/f,_=1/p,C=1/v;return zs.elements[0]*=y,zs.elements[1]*=y,zs.elements[2]*=y,zs.elements[4]*=_,zs.elements[5]*=_,zs.elements[6]*=_,zs.elements[8]*=C,zs.elements[9]*=C,zs.elements[10]*=C,r.setFromRotationMatrix(zs),o.x=f,o.y=p,o.z=v,this}},{key:"makePerspective",value:function(t,r,o,u,f,p){var v=this.elements,y=2*f/(o-u),_=(r+t)/(r-t),C=(o+u)/(o-u),S=-(p+f)/(p-f),x=-2*p*f/(p-f);return v[0]=2*f/(r-t),v[4]=0,v[8]=_,v[12]=0,v[1]=0,v[5]=y,v[9]=C,v[13]=0,v[2]=0,v[6]=0,v[10]=S,v[14]=x,v[3]=0,v[7]=0,v[11]=-1,v[15]=0,this}},{key:"makeOrthographic",value:function(t,r,o,u,f,p){var v=this.elements,g=1/(r-t),y=1/(o-u),_=1/(p-f),C=(r+t)*g,S=(o+u)*y,x=(p+f)*_;return v[0]=2*g,v[4]=0,v[8]=0,v[12]=-C,v[1]=0,v[5]=2*y,v[9]=0,v[13]=-S,v[2]=0,v[6]=0,v[10]=-2*_,v[14]=-x,v[3]=0,v[7]=0,v[11]=0,v[15]=1,this}},{key:"equals",value:function(t){for(var r=this.elements,o=t.elements,u=0;u<16;u++)if(r[u]!==o[u])return!1;return!0}},{key:"fromArray",value:function(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=0;o<16;o++)this.elements[o]=t[o+r];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.elements;return t[r]=o[0],t[r+1]=o[1],t[r+2]=o[2],t[r+3]=o[3],t[r+4]=o[4],t[r+5]=o[5],t[r+6]=o[6],t[r+7]=o[7],t[r+8]=o[8],t[r+9]=o[9],t[r+10]=o[10],t[r+11]=o[11],t[r+12]=o[12],t[r+13]=o[13],t[r+14]=o[14],t[r+15]=o[15],t}}]),n}(),zh=new J,zs=new Sn,Zj=new J(0,0,0),Qj=new J(1,1,1),Pc=new J,BS=new J,Sa=new J,aF=new Sn,sF=new no,uF=function(){var n=function(a){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;k(this,t),this.isEuler=!0,this._x=r,this._y=o,this._z=u,this._order=f}return j(t,[{key:"x",get:function(){return this._x},set:function(o){this._x=o,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(o){this._y=o,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(o){this._z=o,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(o){this._order=o,this._onChangeCallback()}},{key:"set",value:function(o,u,f){var p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=o,this._y=u,this._z=f,this._order=p,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(o){return this._x=o._x,this._y=o._y,this._z=o._z,this._order=o._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,f=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],p=o.elements,v=p[0],g=p[4],y=p[8],_=p[1],C=p[5],S=p[9],x=p[2],b=p[6],E=p[10];switch(u){case"XYZ":this._y=Math.asin(fi(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(-S,E),this._z=Math.atan2(-g,v)):(this._x=Math.atan2(b,C),this._z=0);break;case"YXZ":this._x=Math.asin(-fi(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(y,E),this._z=Math.atan2(_,C)):(this._y=Math.atan2(-x,v),this._z=0);break;case"ZXY":this._x=Math.asin(fi(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-x,E),this._z=Math.atan2(-g,C)):(this._y=0,this._z=Math.atan2(_,v));break;case"ZYX":this._y=Math.asin(-fi(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(b,E),this._z=Math.atan2(_,v)):(this._x=0,this._z=Math.atan2(-g,C));break;case"YZX":this._z=Math.asin(fi(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(-S,C),this._y=Math.atan2(-x,v)):(this._x=0,this._y=Math.atan2(y,E));break;case"XZY":this._z=Math.asin(-fi(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(b,C),this._y=Math.atan2(y,v)):(this._x=Math.atan2(-S,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+u)}return this._order=u,!0===f&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(o,u,f){return aF.makeRotationFromQuaternion(o),this.setFromRotationMatrix(aF,u,f)}},{key:"setFromVector3",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(o.x,o.y,o.z,u)}},{key:"reorder",value:function(o){return sF.setFromEuler(this),this.setFromQuaternion(sF,o)}},{key:"equals",value:function(o){return o._x===this._x&&o._y===this._y&&o._z===this._z&&o._order===this._order}},{key:"fromArray",value:function(o){return this._x=o[0],this._y=o[1],this._z=o[2],void 0!==o[3]&&(this._order=o[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o[u]=this._x,o[u+1]=this._y,o[u+2]=this._z,o[u+3]=this._order,o}},{key:"_onChange",value:function(o){return this._onChangeCallback=o,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:mi.mark(function r(){return mi.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this._x;case 2:return u.next=4,this._y;case 4:return u.next=6,this._z;case 6:return u.next=8,this._order;case 8:case"end":return u.stop()}},r,this)})},{key:"toVector3",value:function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}]),t}();return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n}(),KD=function(){function n(){k(this,n),this.mask=1}return j(n,[{key:"set",value:function(t){this.mask=(1<<t|0)>>>0}},{key:"enable",value:function(t){this.mask|=1<<t|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(t){this.mask^=1<<t|0}},{key:"disable",value:function(t){this.mask&=~(1<<t|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(t){return 0!=(this.mask&t.mask)}},{key:"isEnabled",value:function(t){return 0!=(this.mask&(1<<t|0))}}]),n}(),e4=0,lF=new J,jh=new no,fl=new Sn,HS=new J,Ry=new J,t4=new J,n4=new no,cF=new J(1,0,0),dF=new J(0,1,0),fF=new J(0,0,1),r4={type:"added"},pF={type:"removed"},_o=function(){var n=function(a){ve(r,a);var t=me(r);function r(){var o;k(this,r),(o=t.call(this)).isObject3D=!0,Object.defineProperty(Kn(o),"id",{value:e4++}),o.uuid=Qa(),o.name="",o.type="Object3D",o.parent=null,o.children=[],o.up=r.DefaultUp.clone();var u=new J,f=new uF,p=new no,v=new J(1,1,1);return f._onChange(function(){p.setFromEuler(f,!1)}),p._onChange(function(){f.setFromQuaternion(p,void 0,!1)}),Object.defineProperties(Kn(o),{position:{configurable:!0,enumerable:!0,value:u},rotation:{configurable:!0,enumerable:!0,value:f},quaternion:{configurable:!0,enumerable:!0,value:p},scale:{configurable:!0,enumerable:!0,value:v},modelViewMatrix:{value:new Sn},normalMatrix:{value:new Ws}}),o.matrix=new Sn,o.matrixWorld=new Sn,o.matrixAutoUpdate=r.DefaultMatrixAutoUpdate,o.matrixWorldNeedsUpdate=!1,o.matrixWorldAutoUpdate=r.DefaultMatrixWorldAutoUpdate,o.layers=new KD,o.visible=!0,o.castShadow=!1,o.receiveShadow=!1,o.frustumCulled=!0,o.renderOrder=0,o.animations=[],o.userData={},o}return j(r,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(u){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(u),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(u){return this.quaternion.premultiply(u),this}},{key:"setRotationFromAxisAngle",value:function(u,f){this.quaternion.setFromAxisAngle(u,f)}},{key:"setRotationFromEuler",value:function(u){this.quaternion.setFromEuler(u,!0)}},{key:"setRotationFromMatrix",value:function(u){this.quaternion.setFromRotationMatrix(u)}},{key:"setRotationFromQuaternion",value:function(u){this.quaternion.copy(u)}},{key:"rotateOnAxis",value:function(u,f){return jh.setFromAxisAngle(u,f),this.quaternion.multiply(jh),this}},{key:"rotateOnWorldAxis",value:function(u,f){return jh.setFromAxisAngle(u,f),this.quaternion.premultiply(jh),this}},{key:"rotateX",value:function(u){return this.rotateOnAxis(cF,u)}},{key:"rotateY",value:function(u){return this.rotateOnAxis(dF,u)}},{key:"rotateZ",value:function(u){return this.rotateOnAxis(fF,u)}},{key:"translateOnAxis",value:function(u,f){return lF.copy(u).applyQuaternion(this.quaternion),this.position.add(lF.multiplyScalar(f)),this}},{key:"translateX",value:function(u){return this.translateOnAxis(cF,u)}},{key:"translateY",value:function(u){return this.translateOnAxis(dF,u)}},{key:"translateZ",value:function(u){return this.translateOnAxis(fF,u)}},{key:"localToWorld",value:function(u){return this.updateWorldMatrix(!0,!1),u.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(u){return this.updateWorldMatrix(!0,!1),u.applyMatrix4(fl.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(u,f,p){u.isVector3?HS.copy(u):HS.set(u,f,p);var v=this.parent;this.updateWorldMatrix(!0,!1),Ry.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fl.lookAt(Ry,HS,this.up):fl.lookAt(HS,Ry,this.up),this.quaternion.setFromRotationMatrix(fl),v&&(fl.extractRotation(v.matrixWorld),jh.setFromRotationMatrix(fl),this.quaternion.premultiply(jh.invert()))}},{key:"add",value:function(u){if(arguments.length>1){for(var f=0;f<arguments.length;f++)this.add(arguments[f]);return this}return u===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",u),this):(u&&u.isObject3D?(null!==u.parent&&u.parent.remove(u),u.parent=this,this.children.push(u),u.dispatchEvent(r4)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",u),this)}},{key:"remove",value:function(u){if(arguments.length>1){for(var f=0;f<arguments.length;f++)this.remove(arguments[f]);return this}var p=this.children.indexOf(u);return-1!==p&&(u.parent=null,this.children.splice(p,1),u.dispatchEvent(pF)),this}},{key:"removeFromParent",value:function(){var u=this.parent;return null!==u&&u.remove(this),this}},{key:"clear",value:function(){for(var u=0;u<this.children.length;u++){var f=this.children[u];f.parent=null,f.dispatchEvent(pF)}return this.children.length=0,this}},{key:"attach",value:function(u){return this.updateWorldMatrix(!0,!1),fl.copy(this.matrixWorld).invert(),null!==u.parent&&(u.parent.updateWorldMatrix(!0,!1),fl.multiply(u.parent.matrixWorld)),u.applyMatrix4(fl),this.add(u),u.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(u){return this.getObjectByProperty("id",u)}},{key:"getObjectByName",value:function(u){return this.getObjectByProperty("name",u)}},{key:"getObjectByProperty",value:function(u,f){if(this[u]===f)return this;for(var p=0,v=this.children.length;p<v;p++){var y=this.children[p].getObjectByProperty(u,f);if(void 0!==y)return y}}},{key:"getObjectsByProperty",value:function(u,f){var p=[];this[u]===f&&p.push(this);for(var v=0,g=this.children.length;v<g;v++){var y=this.children[v].getObjectsByProperty(u,f);y.length>0&&(p=p.concat(y))}return p}},{key:"getWorldPosition",value:function(u){return this.updateWorldMatrix(!0,!1),u.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(u){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ry,u,t4),u}},{key:"getWorldScale",value:function(u){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ry,n4,u),u}},{key:"getWorldDirection",value:function(u){this.updateWorldMatrix(!0,!1);var f=this.matrixWorld.elements;return u.set(f[8],f[9],f[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(u){u(this);for(var f=this.children,p=0,v=f.length;p<v;p++)f[p].traverse(u)}},{key:"traverseVisible",value:function(u){if(!1!==this.visible){u(this);for(var f=this.children,p=0,v=f.length;p<v;p++)f[p].traverseVisible(u)}}},{key:"traverseAncestors",value:function(u){var f=this.parent;null!==f&&(u(f),f.traverseAncestors(u))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(u){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||u)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,u=!0);for(var f=this.children,p=0,v=f.length;p<v;p++){var g=f[p];(!0===g.matrixWorldAutoUpdate||!0===u)&&g.updateMatrixWorld(u)}}},{key:"updateWorldMatrix",value:function(u,f){var p=this.parent;if(!0===u&&null!==p&&!0===p.matrixWorldAutoUpdate&&p.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===f)for(var v=this.children,g=0,y=v.length;g<y;g++){var _=v[g];!0===_.matrixWorldAutoUpdate&&_.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(u){var f=void 0===u||"string"==typeof u,p={};f&&(u={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},p.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var v={};function g(G,ee){return void 0===G[ee.uuid]&&(G[ee.uuid]=ee.toJSON(u)),ee.uuid}if(v.uuid=this.uuid,v.type=this.type,""!==this.name&&(v.name=this.name),!0===this.castShadow&&(v.castShadow=!0),!0===this.receiveShadow&&(v.receiveShadow=!0),!1===this.visible&&(v.visible=!1),!1===this.frustumCulled&&(v.frustumCulled=!1),0!==this.renderOrder&&(v.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(v.userData=this.userData),v.layers=this.layers.mask,v.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(v.matrixAutoUpdate=!1),this.isInstancedMesh&&(v.type="InstancedMesh",v.count=this.count,v.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(v.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?v.background=this.background.toJSON():this.background.isTexture&&(v.background=this.background.toJSON(u).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(v.environment=this.environment.toJSON(u).uuid);else if(this.isMesh||this.isLine||this.isPoints){v.geometry=g(u.geometries,this.geometry);var y=this.geometry.parameters;if(void 0!==y&&void 0!==y.shapes){var _=y.shapes;if(Array.isArray(_))for(var C=0,S=_.length;C<S;C++)g(u.shapes,_[C]);else g(u.shapes,_)}}if(this.isSkinnedMesh&&(v.bindMode=this.bindMode,v.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(g(u.skeletons,this.skeleton),v.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var b=[],E=0,D=this.material.length;E<D;E++)b.push(g(u.materials,this.material[E]));v.material=b}else v.material=g(u.materials,this.material);if(this.children.length>0){v.children=[];for(var A=0;A<this.children.length;A++)v.children.push(this.children[A].toJSON(u).object)}if(this.animations.length>0){v.animations=[];for(var M=0;M<this.animations.length;M++)v.animations.push(g(u.animations,this.animations[M]))}if(f){var I=ce(u.geometries),B=ce(u.materials),z=ce(u.textures),P=ce(u.images),W=ce(u.shapes),X=ce(u.skeletons),ne=ce(u.animations),de=ce(u.nodes);I.length>0&&(p.geometries=I),B.length>0&&(p.materials=B),z.length>0&&(p.textures=z),P.length>0&&(p.images=P),W.length>0&&(p.shapes=W),X.length>0&&(p.skeletons=X),ne.length>0&&(p.animations=ne),de.length>0&&(p.nodes=de)}return p.object=v,p;function ce(G){var ee=[];for(var ie in G){var ue=G[ie];delete ue.metadata,ee.push(ue)}return ee}}},{key:"clone",value:function(u){return(new this.constructor).copy(this,u)}},{key:"copy",value:function(u){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=u.name,this.up.copy(u.up),this.position.copy(u.position),this.rotation.order=u.rotation.order,this.quaternion.copy(u.quaternion),this.scale.copy(u.scale),this.matrix.copy(u.matrix),this.matrixWorld.copy(u.matrixWorld),this.matrixAutoUpdate=u.matrixAutoUpdate,this.matrixWorldNeedsUpdate=u.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=u.matrixWorldAutoUpdate,this.layers.mask=u.layers.mask,this.visible=u.visible,this.castShadow=u.castShadow,this.receiveShadow=u.receiveShadow,this.frustumCulled=u.frustumCulled,this.renderOrder=u.renderOrder,this.userData=JSON.parse(JSON.stringify(u.userData)),!0===f)for(var p=0;p<u.children.length;p++){var v=u.children[p];this.add(v.clone())}return this}}]),r}(sl);return n.DefaultUp=new J(0,1,0),n.DefaultMatrixAutoUpdate=!0,n.DefaultMatrixWorldAutoUpdate=!0,n}(),js=new J,pl=new J,YD=new J,hl=new J,qh=new J,Kh=new J,hF=new J,$D=new J,XD=new J,JD=new J,VS=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new J,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new J,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new J;k(this,n),this.a=a,this.b=t,this.c=r}return j(n,[{key:"set",value:function(t,r,o){return this.a.copy(t),this.b.copy(r),this.c.copy(o),this}},{key:"setFromPointsAndIndices",value:function(t,r,o,u){return this.a.copy(t[r]),this.b.copy(t[o]),this.c.copy(t[u]),this}},{key:"setFromAttributeAndIndices",value:function(t,r,o,u){return this.a.fromBufferAttribute(t,r),this.b.fromBufferAttribute(t,o),this.c.fromBufferAttribute(t,u),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}},{key:"getArea",value:function(){return js.subVectors(this.c,this.b),pl.subVectors(this.a,this.b),.5*js.cross(pl).length()}},{key:"getMidpoint",value:function(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return n.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,r){return n.getBarycoord(t,this.a,this.b,this.c,r)}},{key:"getUV",value:function(t,r,o,u,f){return n.getUV(t,this.a,this.b,this.c,r,o,u,f)}},{key:"containsPoint",value:function(t){return n.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return n.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(t){return t.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(t,r){var p,v,o=this.a,u=this.b,f=this.c;qh.subVectors(u,o),Kh.subVectors(f,o),$D.subVectors(t,o);var g=qh.dot($D),y=Kh.dot($D);if(g<=0&&y<=0)return r.copy(o);XD.subVectors(t,u);var _=qh.dot(XD),C=Kh.dot(XD);if(_>=0&&C<=_)return r.copy(u);var S=g*C-_*y;if(S<=0&&g>=0&&_<=0)return p=g/(g-_),r.copy(o).addScaledVector(qh,p);JD.subVectors(t,f);var x=qh.dot(JD),b=Kh.dot(JD);if(b>=0&&x<=b)return r.copy(f);var E=x*y-g*b;if(E<=0&&y>=0&&b<=0)return v=y/(y-b),r.copy(o).addScaledVector(Kh,v);var D=_*b-x*C;if(D<=0&&C-_>=0&&x-b>=0)return hF.subVectors(f,u),v=(C-_)/(C-_+(x-b)),r.copy(u).addScaledVector(hF,v);var A=1/(D+E+S);return p=E*A,v=S*A,r.copy(o).addScaledVector(qh,p).addScaledVector(Kh,v)}},{key:"equals",value:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}],[{key:"getNormal",value:function(t,r,o,u){u.subVectors(o,r),js.subVectors(t,r),u.cross(js);var f=u.lengthSq();return f>0?u.multiplyScalar(1/Math.sqrt(f)):u.set(0,0,0)}},{key:"getBarycoord",value:function(t,r,o,u,f){js.subVectors(u,r),pl.subVectors(o,r),YD.subVectors(t,r);var p=js.dot(js),v=js.dot(pl),g=js.dot(YD),y=pl.dot(pl),_=pl.dot(YD),C=p*y-v*v;if(0===C)return f.set(-2,-1,-1);var S=1/C,x=(y*g-v*_)*S,b=(p*_-v*g)*S;return f.set(1-x-b,b,x)}},{key:"containsPoint",value:function(t,r,o,u){return this.getBarycoord(t,r,o,u,hl),hl.x>=0&&hl.y>=0&&hl.x+hl.y<=1}},{key:"getUV",value:function(t,r,o,u,f,p,v,g){return this.getBarycoord(t,r,o,u,hl),g.set(0,0),g.addScaledVector(f,hl.x),g.addScaledVector(p,hl.y),g.addScaledVector(v,hl.z),g}},{key:"isFrontFacing",value:function(t,r,o,u){return js.subVectors(o,r),pl.subVectors(t,r),js.cross(pl).dot(u)<0}}]),n}(),i4=0,qs=function(n){ve(t,n);var a=me(t);function t(){var r;return k(this,t),(r=a.call(this)).isMaterial=!0,Object.defineProperty(Kn(r),"id",{value:i4++}),r.uuid=Qa(),r.name="",r.type="Material",r.blending=1,r.side=0,r.vertexColors=!1,r.opacity=1,r.transparent=!1,r.blendSrc=204,r.blendDst=205,r.blendEquation=100,r.blendSrcAlpha=null,r.blendDstAlpha=null,r.blendEquationAlpha=null,r.depthFunc=3,r.depthTest=!0,r.depthWrite=!0,r.stencilWriteMask=255,r.stencilFunc=519,r.stencilRef=0,r.stencilFuncMask=255,r.stencilFail=7680,r.stencilZFail=7680,r.stencilZPass=7680,r.stencilWrite=!1,r.clippingPlanes=null,r.clipIntersection=!1,r.clipShadows=!1,r.shadowSide=null,r.colorWrite=!0,r.precision=null,r.polygonOffset=!1,r.polygonOffsetFactor=0,r.polygonOffsetUnits=0,r.dithering=!1,r.alphaToCoverage=!1,r.premultipliedAlpha=!1,r.visible=!0,r.toneMapped=!0,r.userData={},r.version=0,r._alphaTest=0,r}return j(t,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(o){this._alphaTest>0!=o>0&&this.version++,this._alphaTest=o}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(o){if(void 0!==o)for(var u in o){var f=o[u];if(void 0!==f){var p=this[u];void 0!==p?p&&p.isColor?p.set(f):p&&p.isVector3&&f&&f.isVector3?p.copy(f):this[u]=f:console.warn("THREE."+this.type+": '"+u+"' is not a property of this material.")}else console.warn("THREE.Material: '"+u+"' parameter is undefined.")}}},{key:"toJSON",value:function(o){var u=void 0===o||"string"==typeof o;u&&(o={textures:{},images:{}});var f={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function p(y){var _=[];for(var C in y){var S=y[C];delete S.metadata,_.push(S)}return _}if(f.uuid=this.uuid,f.type=this.type,""!==this.name&&(f.name=this.name),this.color&&this.color.isColor&&(f.color=this.color.getHex()),void 0!==this.roughness&&(f.roughness=this.roughness),void 0!==this.metalness&&(f.metalness=this.metalness),void 0!==this.sheen&&(f.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(f.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(f.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(f.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(f.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(f.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(f.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(f.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(f.shininess=this.shininess),void 0!==this.clearcoat&&(f.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(f.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(f.clearcoatMap=this.clearcoatMap.toJSON(o).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(f.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(o).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(f.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(o).uuid,f.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(f.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(f.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(f.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(f.iridescenceMap=this.iridescenceMap.toJSON(o).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(f.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(o).uuid),this.map&&this.map.isTexture&&(f.map=this.map.toJSON(o).uuid),this.matcap&&this.matcap.isTexture&&(f.matcap=this.matcap.toJSON(o).uuid),this.alphaMap&&this.alphaMap.isTexture&&(f.alphaMap=this.alphaMap.toJSON(o).uuid),this.lightMap&&this.lightMap.isTexture&&(f.lightMap=this.lightMap.toJSON(o).uuid,f.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(f.aoMap=this.aoMap.toJSON(o).uuid,f.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(f.bumpMap=this.bumpMap.toJSON(o).uuid,f.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(f.normalMap=this.normalMap.toJSON(o).uuid,f.normalMapType=this.normalMapType,f.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(f.displacementMap=this.displacementMap.toJSON(o).uuid,f.displacementScale=this.displacementScale,f.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(f.roughnessMap=this.roughnessMap.toJSON(o).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(f.metalnessMap=this.metalnessMap.toJSON(o).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(f.emissiveMap=this.emissiveMap.toJSON(o).uuid),this.specularMap&&this.specularMap.isTexture&&(f.specularMap=this.specularMap.toJSON(o).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(f.specularIntensityMap=this.specularIntensityMap.toJSON(o).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(f.specularColorMap=this.specularColorMap.toJSON(o).uuid),this.envMap&&this.envMap.isTexture&&(f.envMap=this.envMap.toJSON(o).uuid,void 0!==this.combine&&(f.combine=this.combine)),void 0!==this.envMapIntensity&&(f.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(f.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(f.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(f.gradientMap=this.gradientMap.toJSON(o).uuid),void 0!==this.transmission&&(f.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(f.transmissionMap=this.transmissionMap.toJSON(o).uuid),void 0!==this.thickness&&(f.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(f.thicknessMap=this.thicknessMap.toJSON(o).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(f.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(f.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(f.size=this.size),null!==this.shadowSide&&(f.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(f.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(f.blending=this.blending),0!==this.side&&(f.side=this.side),this.vertexColors&&(f.vertexColors=!0),this.opacity<1&&(f.opacity=this.opacity),!0===this.transparent&&(f.transparent=this.transparent),f.depthFunc=this.depthFunc,f.depthTest=this.depthTest,f.depthWrite=this.depthWrite,f.colorWrite=this.colorWrite,f.stencilWrite=this.stencilWrite,f.stencilWriteMask=this.stencilWriteMask,f.stencilFunc=this.stencilFunc,f.stencilRef=this.stencilRef,f.stencilFuncMask=this.stencilFuncMask,f.stencilFail=this.stencilFail,f.stencilZFail=this.stencilZFail,f.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(f.rotation=this.rotation),!0===this.polygonOffset&&(f.polygonOffset=!0),0!==this.polygonOffsetFactor&&(f.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(f.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(f.linewidth=this.linewidth),void 0!==this.dashSize&&(f.dashSize=this.dashSize),void 0!==this.gapSize&&(f.gapSize=this.gapSize),void 0!==this.scale&&(f.scale=this.scale),!0===this.dithering&&(f.dithering=!0),this.alphaTest>0&&(f.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(f.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(f.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(f.wireframe=this.wireframe),this.wireframeLinewidth>1&&(f.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(f.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(f.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(f.flatShading=this.flatShading),!1===this.visible&&(f.visible=!1),!1===this.toneMapped&&(f.toneMapped=!1),!1===this.fog&&(f.fog=!1),Object.keys(this.userData).length>0&&(f.userData=this.userData),u){var v=p(o.textures),g=p(o.images);v.length>0&&(f.textures=v),g.length>0&&(f.images=g)}return f}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(o){this.name=o.name,this.blending=o.blending,this.side=o.side,this.vertexColors=o.vertexColors,this.opacity=o.opacity,this.transparent=o.transparent,this.blendSrc=o.blendSrc,this.blendDst=o.blendDst,this.blendEquation=o.blendEquation,this.blendSrcAlpha=o.blendSrcAlpha,this.blendDstAlpha=o.blendDstAlpha,this.blendEquationAlpha=o.blendEquationAlpha,this.depthFunc=o.depthFunc,this.depthTest=o.depthTest,this.depthWrite=o.depthWrite,this.stencilWriteMask=o.stencilWriteMask,this.stencilFunc=o.stencilFunc,this.stencilRef=o.stencilRef,this.stencilFuncMask=o.stencilFuncMask,this.stencilFail=o.stencilFail,this.stencilZFail=o.stencilZFail,this.stencilZPass=o.stencilZPass,this.stencilWrite=o.stencilWrite;var u=o.clippingPlanes,f=null;if(null!==u){var p=u.length;f=new Array(p);for(var v=0;v!==p;++v)f[v]=u[v].clone()}return this.clippingPlanes=f,this.clipIntersection=o.clipIntersection,this.clipShadows=o.clipShadows,this.shadowSide=o.shadowSide,this.colorWrite=o.colorWrite,this.precision=o.precision,this.polygonOffset=o.polygonOffset,this.polygonOffsetFactor=o.polygonOffsetFactor,this.polygonOffsetUnits=o.polygonOffsetUnits,this.dithering=o.dithering,this.alphaTest=o.alphaTest,this.alphaToCoverage=o.alphaToCoverage,this.premultipliedAlpha=o.premultipliedAlpha,this.visible=o.visible,this.toneMapped=o.toneMapped,this.userData=JSON.parse(JSON.stringify(o.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(o){!0===o&&this.version++}}]),t}(sl),es=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this)).isMeshBasicMaterial=!0,o.type="MeshBasicMaterial",o.color=new Yt(16777215),o.map=null,o.lightMap=null,o.lightMapIntensity=1,o.aoMap=null,o.aoMapIntensity=1,o.specularMap=null,o.alphaMap=null,o.envMap=null,o.combine=0,o.reflectivity=1,o.refractionRatio=.98,o.wireframe=!1,o.wireframeLinewidth=1,o.wireframeLinecap="round",o.wireframeLinejoin="round",o.fog=!0,o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return Ce(Ue(t.prototype),"copy",this).call(this,o),this.color.copy(o.color),this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.fog=o.fog,this}}]),t}(qs),pi=new J,WS=new Ye,ko=function(){function n(a,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(k(this,n),Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=a,this.itemSize=t,this.count=void 0!==a?a.length/t:0,this.normalized=r,this.usage=PD,this.updateRange={offset:0,count:-1},this.version=0}return j(n,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}},{key:"copyAt",value:function(t,r,o){t*=this.itemSize,o*=r.itemSize;for(var u=0,f=this.itemSize;u<f;u++)this.array[t+u]=r.array[o+u];return this}},{key:"copyArray",value:function(t){return this.array.set(t),this}},{key:"applyMatrix3",value:function(t){if(2===this.itemSize)for(var r=0,o=this.count;r<o;r++)WS.fromBufferAttribute(this,r),WS.applyMatrix3(t),this.setXY(r,WS.x,WS.y);else if(3===this.itemSize)for(var u=0,f=this.count;u<f;u++)pi.fromBufferAttribute(this,u),pi.applyMatrix3(t),this.setXYZ(u,pi.x,pi.y,pi.z);return this}},{key:"applyMatrix4",value:function(t){for(var r=0,o=this.count;r<o;r++)pi.fromBufferAttribute(this,r),pi.applyMatrix4(t),this.setXYZ(r,pi.x,pi.y,pi.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var r=0,o=this.count;r<o;r++)pi.fromBufferAttribute(this,r),pi.applyNormalMatrix(t),this.setXYZ(r,pi.x,pi.y,pi.z);return this}},{key:"transformDirection",value:function(t){for(var r=0,o=this.count;r<o;r++)pi.fromBufferAttribute(this,r),pi.transformDirection(t),this.setXYZ(r,pi.x,pi.y,pi.z);return this}},{key:"set",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,r),this}},{key:"getX",value:function(t){var r=this.array[t*this.itemSize];return this.normalized&&(r=ul(r,this.array)),r}},{key:"setX",value:function(t,r){return this.normalized&&(r=hr(r,this.array)),this.array[t*this.itemSize]=r,this}},{key:"getY",value:function(t){var r=this.array[t*this.itemSize+1];return this.normalized&&(r=ul(r,this.array)),r}},{key:"setY",value:function(t,r){return this.normalized&&(r=hr(r,this.array)),this.array[t*this.itemSize+1]=r,this}},{key:"getZ",value:function(t){var r=this.array[t*this.itemSize+2];return this.normalized&&(r=ul(r,this.array)),r}},{key:"setZ",value:function(t,r){return this.normalized&&(r=hr(r,this.array)),this.array[t*this.itemSize+2]=r,this}},{key:"getW",value:function(t){var r=this.array[t*this.itemSize+3];return this.normalized&&(r=ul(r,this.array)),r}},{key:"setW",value:function(t,r){return this.normalized&&(r=hr(r,this.array)),this.array[t*this.itemSize+3]=r,this}},{key:"setXY",value:function(t,r,o){return t*=this.itemSize,this.normalized&&(r=hr(r,this.array),o=hr(o,this.array)),this.array[t+0]=r,this.array[t+1]=o,this}},{key:"setXYZ",value:function(t,r,o,u){return t*=this.itemSize,this.normalized&&(r=hr(r,this.array),o=hr(o,this.array),u=hr(u,this.array)),this.array[t+0]=r,this.array[t+1]=o,this.array[t+2]=u,this}},{key:"setXYZW",value:function(t,r,o,u,f){return t*=this.itemSize,this.normalized&&(r=hr(r,this.array),o=hr(o,this.array),u=hr(u,this.array),f=hr(f,this.array)),this.array[t+0]=r,this.array[t+1]=o,this.array[t+2]=u,this.array[t+3]=f,this}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==PD&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}]),n}(),vF=function(n){ve(t,n);var a=me(t);function t(r,o,u){return k(this,t),a.call(this,new Uint16Array(r),o,u)}return t}(ko),gF=function(n){ve(t,n);var a=me(t);function t(r,o,u){return k(this,t),a.call(this,new Uint32Array(r),o,u)}return t}(ko),cn=function(n){ve(t,n);var a=me(t);function t(r,o,u){return k(this,t),a.call(this,new Float32Array(r),o,u)}return t}(ko),o4=0,ts=new Sn,ZD=new _o,Yh=new J,Ea=new ll,Ty=new ll,zi=new J,Dr=function(n){ve(t,n);var a=me(t);function t(){var r;return k(this,t),(r=a.call(this)).isBufferGeometry=!0,Object.defineProperty(Kn(r),"id",{value:o4++}),r.uuid=Qa(),r.name="",r.type="BufferGeometry",r.index=null,r.attributes={},r.morphAttributes={},r.morphTargetsRelative=!1,r.groups=[],r.boundingBox=null,r.boundingSphere=null,r.drawRange={start:0,count:1/0},r.userData={},r}return j(t,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(o){return this.index=Array.isArray(o)?new(eF(o)?gF:vF)(o,1):o,this}},{key:"getAttribute",value:function(o){return this.attributes[o]}},{key:"setAttribute",value:function(o,u){return this.attributes[o]=u,this}},{key:"deleteAttribute",value:function(o){return delete this.attributes[o],this}},{key:"hasAttribute",value:function(o){return void 0!==this.attributes[o]}},{key:"addGroup",value:function(o,u){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:o,count:u,materialIndex:f})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(o,u){this.drawRange.start=o,this.drawRange.count=u}},{key:"applyMatrix4",value:function(o){var u=this.attributes.position;void 0!==u&&(u.applyMatrix4(o),u.needsUpdate=!0);var f=this.attributes.normal;if(void 0!==f){var p=(new Ws).getNormalMatrix(o);f.applyNormalMatrix(p),f.needsUpdate=!0}var v=this.attributes.tangent;return void 0!==v&&(v.transformDirection(o),v.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(o){return ts.makeRotationFromQuaternion(o),this.applyMatrix4(ts),this}},{key:"rotateX",value:function(o){return ts.makeRotationX(o),this.applyMatrix4(ts),this}},{key:"rotateY",value:function(o){return ts.makeRotationY(o),this.applyMatrix4(ts),this}},{key:"rotateZ",value:function(o){return ts.makeRotationZ(o),this.applyMatrix4(ts),this}},{key:"translate",value:function(o,u,f){return ts.makeTranslation(o,u,f),this.applyMatrix4(ts),this}},{key:"scale",value:function(o,u,f){return ts.makeScale(o,u,f),this.applyMatrix4(ts),this}},{key:"lookAt",value:function(o){return ZD.lookAt(o),ZD.updateMatrix(),this.applyMatrix4(ZD.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Yh).negate(),this.translate(Yh.x,Yh.y,Yh.z),this}},{key:"setFromPoints",value:function(o){for(var u=[],f=0,p=o.length;f<p;f++){var v=o[f];u.push(v.x,v.y,v.z||0)}return this.setAttribute("position",new cn(u,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new ll);var o=this.attributes.position,u=this.morphAttributes.position;if(o&&o.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));if(void 0!==o){if(this.boundingBox.setFromBufferAttribute(o),u)for(var f=0,p=u.length;f<p;f++)Ea.setFromBufferAttribute(u[f]),this.morphTargetsRelative?(zi.addVectors(this.boundingBox.min,Ea.min),this.boundingBox.expandByPoint(zi),zi.addVectors(this.boundingBox.max,Ea.max),this.boundingBox.expandByPoint(zi)):(this.boundingBox.expandByPoint(Ea.min),this.boundingBox.expandByPoint(Ea.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Uh);var o=this.attributes.position,u=this.morphAttributes.position;if(o&&o.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new J,1/0);if(o){var f=this.boundingSphere.center;if(Ea.setFromBufferAttribute(o),u)for(var p=0,v=u.length;p<v;p++)Ty.setFromBufferAttribute(u[p]),this.morphTargetsRelative?(zi.addVectors(Ea.min,Ty.min),Ea.expandByPoint(zi),zi.addVectors(Ea.max,Ty.max),Ea.expandByPoint(zi)):(Ea.expandByPoint(Ty.min),Ea.expandByPoint(Ty.max));Ea.getCenter(f);for(var y=0,_=0,C=o.count;_<C;_++)zi.fromBufferAttribute(o,_),y=Math.max(y,f.distanceToSquared(zi));if(u)for(var S=0,x=u.length;S<x;S++)for(var b=u[S],E=this.morphTargetsRelative,D=0,A=b.count;D<A;D++)zi.fromBufferAttribute(b,D),E&&(Yh.fromBufferAttribute(o,D),zi.add(Yh)),y=Math.max(y,f.distanceToSquared(zi));this.boundingSphere.radius=Math.sqrt(y),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var o=this.index,u=this.attributes;if(null!==o&&void 0!==u.position&&void 0!==u.normal&&void 0!==u.uv){var f=o.array,p=u.position.array,v=u.normal.array,g=u.uv.array,y=p.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ko(new Float32Array(4*y),4));for(var _=this.getAttribute("tangent").array,C=[],S=[],x=0;x<y;x++)C[x]=new J,S[x]=new J;var b=new J,E=new J,D=new J,A=new Ye,M=new Ye,O=new Ye,I=new J,B=new J,P=this.groups;0===P.length&&(P=[{start:0,count:f.length}]);for(var W=0,X=P.length;W<X;++W)for(var ne=P[W],de=ne.start,G=de,ee=de+ne.count;G<ee;G+=3)z(f[G+0],f[G+1],f[G+2]);for(var ie=new J,ue=new J,se=new J,ye=new J,we=0,_e=P.length;we<_e;++we)for(var Ge=P[we],be=Ge.start,ge=be,Xe=be+Ge.count;ge<Xe;ge+=3)xe(f[ge+0]),xe(f[ge+1]),xe(f[ge+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function z(ke,je,We){b.fromArray(p,3*ke),E.fromArray(p,3*je),D.fromArray(p,3*We),A.fromArray(g,2*ke),M.fromArray(g,2*je),O.fromArray(g,2*We),E.sub(b),D.sub(b),M.sub(A),O.sub(A);var ze=1/(M.x*O.y-O.x*M.y);!isFinite(ze)||(I.copy(E).multiplyScalar(O.y).addScaledVector(D,-M.y).multiplyScalar(ze),B.copy(D).multiplyScalar(M.x).addScaledVector(E,-O.x).multiplyScalar(ze),C[ke].add(I),C[je].add(I),C[We].add(I),S[ke].add(B),S[je].add(B),S[We].add(B))}function xe(ke){se.fromArray(v,3*ke),ye.copy(se);var je=C[ke];ie.copy(je),ie.sub(se.multiplyScalar(se.dot(je))).normalize(),ue.crossVectors(ye,je);var ze=ue.dot(S[ke])<0?-1:1;_[4*ke]=ie.x,_[4*ke+1]=ie.y,_[4*ke+2]=ie.z,_[4*ke+3]=ze}}},{key:"computeVertexNormals",value:function(){var o=this.index,u=this.getAttribute("position");if(void 0!==u){var f=this.getAttribute("normal");if(void 0===f)f=new ko(new Float32Array(3*u.count),3),this.setAttribute("normal",f);else for(var p=0,v=f.count;p<v;p++)f.setXYZ(p,0,0,0);var g=new J,y=new J,_=new J,C=new J,S=new J,x=new J,b=new J,E=new J;if(o)for(var D=0,A=o.count;D<A;D+=3){var M=o.getX(D+0),O=o.getX(D+1),I=o.getX(D+2);g.fromBufferAttribute(u,M),y.fromBufferAttribute(u,O),_.fromBufferAttribute(u,I),b.subVectors(_,y),E.subVectors(g,y),b.cross(E),C.fromBufferAttribute(f,M),S.fromBufferAttribute(f,O),x.fromBufferAttribute(f,I),C.add(b),S.add(b),x.add(b),f.setXYZ(M,C.x,C.y,C.z),f.setXYZ(O,S.x,S.y,S.z),f.setXYZ(I,x.x,x.y,x.z)}else for(var B=0,z=u.count;B<z;B+=3)g.fromBufferAttribute(u,B+0),y.fromBufferAttribute(u,B+1),_.fromBufferAttribute(u,B+2),b.subVectors(_,y),E.subVectors(g,y),b.cross(E),f.setXYZ(B+0,b.x,b.y,b.z),f.setXYZ(B+1,b.x,b.y,b.z),f.setXYZ(B+2,b.x,b.y,b.z);this.normalizeNormals(),f.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var o=this.attributes.normal,u=0,f=o.count;u<f;u++)zi.fromBufferAttribute(o,u),zi.normalize(),o.setXYZ(u,zi.x,zi.y,zi.z)}},{key:"toNonIndexed",value:function(){function o(z,P){for(var W=z.array,X=z.itemSize,ne=z.normalized,de=new W.constructor(P.length*X),ce=0,G=0,ee=0,ie=P.length;ee<ie;ee++){ce=z.isInterleavedBufferAttribute?P[ee]*z.data.stride+z.offset:P[ee]*X;for(var ue=0;ue<X;ue++)de[G++]=W[ce++]}return new ko(de,X,ne)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var u=new t,f=this.index.array,p=this.attributes;for(var v in p){var y=o(p[v],f);u.setAttribute(v,y)}var _=this.morphAttributes;for(var C in _){for(var S=[],x=_[C],b=0,E=x.length;b<E;b++){var A=o(x[b],f);S.push(A)}u.morphAttributes[C]=S}u.morphTargetsRelative=this.morphTargetsRelative;for(var M=this.groups,O=0,I=M.length;O<I;O++){var B=M[O];u.addGroup(B.start,B.count,B.materialIndex)}return u}},{key:"toJSON",value:function(){var o={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),Object.keys(this.userData).length>0&&(o.userData=this.userData),void 0!==this.parameters){var u=this.parameters;for(var f in u)void 0!==u[f]&&(o[f]=u[f]);return o}o.data={attributes:{}};var p=this.index;null!==p&&(o.data.index={type:p.array.constructor.name,array:Array.prototype.slice.call(p.array)});var v=this.attributes;for(var g in v)o.data.attributes[g]=v[g].toJSON(o.data);var _={},C=!1;for(var S in this.morphAttributes){for(var x=this.morphAttributes[S],b=[],E=0,D=x.length;E<D;E++)b.push(x[E].toJSON(o.data));b.length>0&&(_[S]=b,C=!0)}C&&(o.data.morphAttributes=_,o.data.morphTargetsRelative=this.morphTargetsRelative);var M=this.groups;M.length>0&&(o.data.groups=JSON.parse(JSON.stringify(M)));var O=this.boundingSphere;return null!==O&&(o.data.boundingSphere={center:O.center.toArray(),radius:O.radius}),o}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(o){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var u={};this.name=o.name;var f=o.index;null!==f&&this.setIndex(f.clone(u));var p=o.attributes;for(var v in p)this.setAttribute(v,p[v].clone(u));var y=o.morphAttributes;for(var _ in y){for(var C=[],S=y[_],x=0,b=S.length;x<b;x++)C.push(S[x].clone(u));this.morphAttributes[_]=C}this.morphTargetsRelative=o.morphTargetsRelative;for(var E=o.groups,D=0,A=E.length;D<A;D++){var M=E[D];this.addGroup(M.start,M.count,M.materialIndex)}var O=o.boundingBox;null!==O&&(this.boundingBox=O.clone());var I=o.boundingSphere;return null!==I&&(this.boundingSphere=I.clone()),this.drawRange.start=o.drawRange.start,this.drawRange.count=o.drawRange.count,this.userData=o.userData,void 0!==o.parameters&&(this.parameters=Object.assign({},o.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),t}(sl),mF=new Sn,$h=new GS,QD=new Uh,Dy=new J,Ay=new J,My=new J,eA=new J,US=new J,zS=new Ye,jS=new Ye,qS=new Ye,tA=new J,KS=new J,Fr=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dr,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new es;return k(this,t),(r=a.call(this)).isMesh=!0,r.type="Mesh",r.geometry=o,r.material=u,r.updateMorphTargets(),r}return j(t,[{key:"copy",value:function(o,u){return Ce(Ue(t.prototype),"copy",this).call(this,o,u),void 0!==o.morphTargetInfluences&&(this.morphTargetInfluences=o.morphTargetInfluences.slice()),void 0!==o.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},o.morphTargetDictionary)),this.material=o.material,this.geometry=o.geometry,this}},{key:"updateMorphTargets",value:function(){var u=this.geometry.morphAttributes,f=Object.keys(u);if(f.length>0){var p=u[f[0]];if(void 0!==p){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var v=0,g=p.length;v<g;v++){var y=p[v].name||String(v);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=v}}}}},{key:"getVertexPosition",value:function(o,u){var f=this.geometry,v=f.morphAttributes.position,g=f.morphTargetsRelative;u.fromBufferAttribute(f.attributes.position,o);var y=this.morphTargetInfluences;if(v&&y){US.set(0,0,0);for(var _=0,C=v.length;_<C;_++){var S=y[_];0!==S&&(eA.fromBufferAttribute(v[_],o),US.addScaledVector(g?eA:eA.sub(u),S))}u.add(US)}return this.isSkinnedMesh&&this.boneTransform(o,u),u}},{key:"raycast",value:function(o,u){var f=this.geometry,p=this.material,v=this.matrixWorld;if(void 0!==p&&(null===f.boundingSphere&&f.computeBoundingSphere(),QD.copy(f.boundingSphere),QD.applyMatrix4(v),!1!==o.ray.intersectsSphere(QD)&&(mF.copy(v).invert(),$h.copy(o.ray).applyMatrix4(mF),null===f.boundingBox||!1!==$h.intersectsBox(f.boundingBox)))){var g,y=f.index,_=f.attributes.position,C=f.attributes.uv,S=f.attributes.uv2,x=f.groups,b=f.drawRange;if(null!==y)if(Array.isArray(p))for(var E=0,D=x.length;E<D;E++)for(var A=x[E],M=p[A.materialIndex],B=Math.max(A.start,b.start),z=Math.min(y.count,Math.min(A.start+A.count,b.start+b.count));B<z;B+=3){var P=y.getX(B),W=y.getX(B+1),X=y.getX(B+2);(g=YS(this,M,o,$h,C,S,P,W,X))&&(g.faceIndex=Math.floor(B/3),g.face.materialIndex=A.materialIndex,u.push(g))}else for(var ce=Math.max(0,b.start),G=Math.min(y.count,b.start+b.count);ce<G;ce+=3){var ee=y.getX(ce),ie=y.getX(ce+1),ue=y.getX(ce+2);(g=YS(this,p,o,$h,C,S,ee,ie,ue))&&(g.faceIndex=Math.floor(ce/3),u.push(g))}else if(void 0!==_)if(Array.isArray(p))for(var se=0,ye=x.length;se<ye;se++)for(var xe=x[se],we=p[xe.materialIndex],be=Math.max(xe.start,b.start),Ae=Math.min(_.count,Math.min(xe.start+xe.count,b.start+b.count));be<Ae;be+=3)(g=YS(this,we,o,$h,C,S,be,be+1,be+2))&&(g.faceIndex=Math.floor(be/3),g.face.materialIndex=xe.materialIndex,u.push(g));else for(var ze=Math.max(0,b.start),ot=Math.min(_.count,b.start+b.count);ze<ot;ze+=3)(g=YS(this,p,o,$h,C,S,ze,ze+1,ze+2))&&(g.faceIndex=Math.floor(ze/3),u.push(g))}}}]),t}(_o);function YS(n,a,t,r,o,u,f,p,v){n.getVertexPosition(f,Dy),n.getVertexPosition(p,Ay),n.getVertexPosition(v,My);var g=function(n,a,t,r,o,u,f,p){if(null===(1===a.side?r.intersectTriangle(f,u,o,!0,p):r.intersectTriangle(o,u,f,0===a.side,p)))return null;KS.copy(p),KS.applyMatrix4(n.matrixWorld);var g=t.ray.origin.distanceTo(KS);return g<t.near||g>t.far?null:{distance:g,point:KS.clone(),object:n}}(n,a,t,r,Dy,Ay,My,tA);if(g){o&&(zS.fromBufferAttribute(o,f),jS.fromBufferAttribute(o,p),qS.fromBufferAttribute(o,v),g.uv=VS.getUV(tA,Dy,Ay,My,zS,jS,qS,new Ye)),u&&(zS.fromBufferAttribute(u,f),jS.fromBufferAttribute(u,p),qS.fromBufferAttribute(u,v),g.uv2=VS.getUV(tA,Dy,Ay,My,zS,jS,qS,new Ye));var y={a:f,b:p,c:v,normal:new J,materialIndex:0};VS.getNormal(Dy,Ay,My,y.normal),g.face=y}return g}var Oy=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;k(this,t),(r=a.call(this)).type="BoxGeometry",r.parameters={width:o,height:u,depth:f,widthSegments:p,heightSegments:v,depthSegments:g};var y=Kn(r);p=Math.floor(p),v=Math.floor(v),g=Math.floor(g);var _=[],C=[],S=[],x=[],b=0,E=0;function D(A,M,O,I,B,z,P,W,X,ne,de){for(var ce=z/X,G=P/ne,ee=z/2,ie=P/2,ue=W/2,se=X+1,ye=ne+1,xe=0,we=0,_e=new J,Ge=0;Ge<ye;Ge++)for(var be=Ge*G-ie,Ae=0;Ae<se;Ae++)_e[A]=(Ae*ce-ee)*I,_e[M]=be*B,_e[O]=ue,C.push(_e.x,_e.y,_e.z),_e[A]=0,_e[M]=0,_e[O]=W>0?1:-1,S.push(_e.x,_e.y,_e.z),x.push(Ae/X),x.push(1-Ge/ne),xe+=1;for(var Xe=0;Xe<ne;Xe++)for(var ke=0;ke<X;ke++){var We=b+ke+se*(Xe+1),ze=b+(ke+1)+se*(Xe+1),ot=b+(ke+1)+se*Xe;_.push(b+ke+se*Xe,We,ot),_.push(We,ze,ot),we+=6}y.addGroup(E,we,de),E+=we,b+=xe}return D("z","y","x",-1,-1,f,u,o,g,v,0),D("z","y","x",1,-1,f,u,-o,g,v,1),D("x","z","y",1,1,o,f,u,p,g,2),D("x","z","y",1,-1,o,f,-u,p,g,3),D("x","y","z",1,-1,o,u,f,p,v,4),D("x","y","z",-1,-1,o,u,-f,p,v,5),r.setIndex(_),r.setAttribute("position",new cn(C,3)),r.setAttribute("normal",new cn(S,3)),r.setAttribute("uv",new cn(x,2)),r}return j(t,null,[{key:"fromJSON",value:function(o){return new t(o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments)}}]),t}(Dr);function Xh(n){var a={};for(var t in n)for(var r in a[t]={},n[t]){var o=n[t][r];a[t][r]=o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.clone():Array.isArray(o)?o.slice():o}return a}function Go(n){for(var a={},t=0;t<n.length;t++){var r=Xh(n[t]);for(var o in r)a[o]=r[o]}return a}function yF(n){return null===n.getRenderTarget()&&n.outputEncoding===Jn?Cu:Cy}var u4={clone:Xh,merge:Go},hf=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this)).isShaderMaterial=!0,o.type="ShaderMaterial",o.defines={},o.uniforms={},o.uniformsGroups=[],o.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",o.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",o.linewidth=1,o.wireframe=!1,o.wireframeLinewidth=1,o.fog=!1,o.lights=!1,o.clipping=!1,o.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},o.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},o.index0AttributeName=void 0,o.uniformsNeedUpdate=!1,o.glslVersion=null,void 0!==r&&o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return Ce(Ue(t.prototype),"copy",this).call(this,o),this.fragmentShader=o.fragmentShader,this.vertexShader=o.vertexShader,this.uniforms=Xh(o.uniforms),this.uniformsGroups=function(n){for(var a=[],t=0;t<n.length;t++)a.push(n[t].clone());return a}(o.uniformsGroups),this.defines=Object.assign({},o.defines),this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.fog=o.fog,this.lights=o.lights,this.clipping=o.clipping,this.extensions=Object.assign({},o.extensions),this.glslVersion=o.glslVersion,this}},{key:"toJSON",value:function(o){var u=Ce(Ue(t.prototype),"toJSON",this).call(this,o);for(var f in u.glslVersion=this.glslVersion,u.uniforms={},this.uniforms){var v=this.uniforms[f].value;u.uniforms[f]=v&&v.isTexture?{type:"t",value:v.toJSON(o).uuid}:v&&v.isColor?{type:"c",value:v.getHex()}:v&&v.isVector2?{type:"v2",value:v.toArray()}:v&&v.isVector3?{type:"v3",value:v.toArray()}:v&&v.isVector4?{type:"v4",value:v.toArray()}:v&&v.isMatrix3?{type:"m3",value:v.toArray()}:v&&v.isMatrix4?{type:"m4",value:v.toArray()}:{value:v}}Object.keys(this.defines).length>0&&(u.defines=this.defines),u.vertexShader=this.vertexShader,u.fragmentShader=this.fragmentShader;var g={};for(var y in this.extensions)!0===this.extensions[y]&&(g[y]=!0);return Object.keys(g).length>0&&(u.extensions=g),u}}]),t}(qs),nA=function(n){ve(t,n);var a=me(t);function t(){var r;return k(this,t),(r=a.call(this)).isCamera=!0,r.type="Camera",r.matrixWorldInverse=new Sn,r.projectionMatrix=new Sn,r.projectionMatrixInverse=new Sn,r}return j(t,[{key:"copy",value:function(o,u){return Ce(Ue(t.prototype),"copy",this).call(this,o,u),this.matrixWorldInverse.copy(o.matrixWorldInverse),this.projectionMatrix.copy(o.projectionMatrix),this.projectionMatrixInverse.copy(o.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(o){this.updateWorldMatrix(!0,!1);var u=this.matrixWorld.elements;return o.set(-u[8],-u[9],-u[10]).normalize()}},{key:"updateMatrixWorld",value:function(o){Ce(Ue(t.prototype),"updateMatrixWorld",this).call(this,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(o,u){Ce(Ue(t.prototype),"updateWorldMatrix",this).call(this,o,u),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(_o),ti=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return k(this,t),(r=a.call(this)).isPerspectiveCamera=!0,r.type="PerspectiveCamera",r.fov=o,r.zoom=1,r.near=f,r.far=p,r.focus=10,r.aspect=u,r.view=null,r.filmGauge=35,r.filmOffset=0,r.updateProjectionMatrix(),r}return j(t,[{key:"copy",value:function(o,u){return Ce(Ue(t.prototype),"copy",this).call(this,o,u),this.fov=o.fov,this.zoom=o.zoom,this.near=o.near,this.far=o.far,this.focus=o.focus,this.aspect=o.aspect,this.view=null===o.view?null:Object.assign({},o.view),this.filmGauge=o.filmGauge,this.filmOffset=o.filmOffset,this}},{key:"setFocalLength",value:function(o){var u=.5*this.getFilmHeight()/o;this.fov=2*wy*Math.atan(u),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var o=Math.tan(.5*Gh*this.fov);return.5*this.getFilmHeight()/o}},{key:"getEffectiveFOV",value:function(){return 2*wy*Math.atan(Math.tan(.5*Gh*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(o,u,f,p,v,g){this.aspect=o/u,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=u,this.view.offsetX=f,this.view.offsetY=p,this.view.width=v,this.view.height=g,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var o=this.near,u=o*Math.tan(.5*Gh*this.fov)/this.zoom,f=2*u,p=this.aspect*f,v=-.5*p,g=this.view;if(null!==this.view&&this.view.enabled){var y=g.fullWidth,_=g.fullHeight;v+=g.offsetX*p/y,u-=g.offsetY*f/_,p*=g.width/y,f*=g.height/_}var C=this.filmOffset;0!==C&&(v+=o*C/this.getFilmWidth()),this.projectionMatrix.makePerspective(v,v+p,u,u-f,o,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(o){var u=Ce(Ue(t.prototype),"toJSON",this).call(this,o);return u.object.fov=this.fov,u.object.zoom=this.zoom,u.object.near=this.near,u.object.far=this.far,u.object.focus=this.focus,u.object.aspect=this.aspect,null!==this.view&&(u.object.view=Object.assign({},this.view)),u.object.filmGauge=this.filmGauge,u.object.filmOffset=this.filmOffset,u}}]),t}(nA),d4=function(n){ve(t,n);var a=me(t);function t(r,o,u){var f;k(this,t),(f=a.call(this)).type="CubeCamera",f.renderTarget=u;var p=new ti(-90,1,r,o);p.layers=f.layers,p.up.set(0,1,0),p.lookAt(1,0,0),f.add(p);var v=new ti(-90,1,r,o);v.layers=f.layers,v.up.set(0,1,0),v.lookAt(-1,0,0),f.add(v);var g=new ti(-90,1,r,o);g.layers=f.layers,g.up.set(0,0,-1),g.lookAt(0,1,0),f.add(g);var y=new ti(-90,1,r,o);y.layers=f.layers,y.up.set(0,0,1),y.lookAt(0,-1,0),f.add(y);var _=new ti(-90,1,r,o);_.layers=f.layers,_.up.set(0,1,0),_.lookAt(0,0,1),f.add(_);var C=new ti(-90,1,r,o);return C.layers=f.layers,C.up.set(0,1,0),C.lookAt(0,0,-1),f.add(C),f}return j(t,[{key:"update",value:function(o,u){null===this.parent&&this.updateMatrixWorld();var f=this.renderTarget,p=Ar(this.children,6),v=p[0],g=p[1],y=p[2],_=p[3],C=p[4],S=p[5],x=o.getRenderTarget(),b=o.toneMapping,E=o.xr.enabled;o.toneMapping=0,o.xr.enabled=!1;var D=f.texture.generateMipmaps;f.texture.generateMipmaps=!1,o.setRenderTarget(f,0),o.render(u,v),o.setRenderTarget(f,1),o.render(u,g),o.setRenderTarget(f,2),o.render(u,y),o.setRenderTarget(f,3),o.render(u,_),o.setRenderTarget(f,4),o.render(u,C),f.texture.generateMipmaps=D,o.setRenderTarget(f,5),o.render(u,S),o.setRenderTarget(x),o.toneMapping=b,o.xr.enabled=E,f.texture.needsPMREMUpdate=!0}}]),t}(_o),_F=function(n){ve(t,n);var a=me(t);function t(r,o,u,f,p,v,g,y,_,C){var S;return k(this,t),(S=a.call(this,r=void 0!==r?r:[],o=void 0!==o?o:301,u,f,p,v,g,y,_,C)).isCubeTexture=!0,S.flipY=!1,S}return j(t,[{key:"images",get:function(){return this.image},set:function(o){this.image=o}}]),t}(wu),f4=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};k(this,t),(r=a.call(this,o,o,u)).isWebGLCubeRenderTarget=!0;var f={width:o,height:o,depth:1},p=[f,f,f,f,f,f];return r.texture=new _F(p,u.mapping,u.wrapS,u.wrapT,u.magFilter,u.minFilter,u.format,u.type,u.anisotropy,u.encoding),r.texture.isRenderTargetTexture=!0,r.texture.generateMipmaps=void 0!==u.generateMipmaps&&u.generateMipmaps,r.texture.minFilter=void 0!==u.minFilter?u.minFilter:Fo,r}return j(t,[{key:"fromEquirectangularTexture",value:function(o,u){this.texture.type=u.type,this.texture.encoding=u.encoding,this.texture.generateMipmaps=u.generateMipmaps,this.texture.minFilter=u.minFilter,this.texture.magFilter=u.magFilter;var p=new Oy(5,5,5),v=new hf({name:"CubemapFromEquirect",uniforms:Xh({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});v.uniforms.tEquirect.value=u;var g=new Fr(p,v),y=u.minFilter;return u.minFilter===Tc&&(u.minFilter=Fo),new d4(1,10,this).update(o,g),u.minFilter=y,g.geometry.dispose(),g.material.dispose(),this}},{key:"clear",value:function(o,u,f,p){for(var v=o.getRenderTarget(),g=0;g<6;g++)o.setRenderTarget(this,g),o.clear(u,f,p);o.setRenderTarget(v)}}]),t}(cf),rA=new J,p4=new J,h4=new Ws,vf=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new J(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;k(this,n),this.isPlane=!0,this.normal=a,this.constant=t}return j(n,[{key:"set",value:function(t,r){return this.normal.copy(t),this.constant=r,this}},{key:"setComponents",value:function(t,r,o,u){return this.normal.set(t,r,o),this.constant=u,this}},{key:"setFromNormalAndCoplanarPoint",value:function(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(t,r,o){var u=rA.subVectors(o,r).cross(p4.subVectors(t,r)).normalize();return this.setFromNormalAndCoplanarPoint(u,t),this}},{key:"copy",value:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this}},{key:"normalize",value:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(t){return this.normal.dot(t)+this.constant}},{key:"distanceToSphere",value:function(t){return this.distanceToPoint(t.center)-t.radius}},{key:"projectPoint",value:function(t,r){return r.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}},{key:"intersectLine",value:function(t,r){var o=t.delta(rA),u=this.normal.dot(o);if(0===u)return 0===this.distanceToPoint(t.start)?r.copy(t.start):null;var f=-(t.start.dot(this.normal)+this.constant)/u;return f<0||f>1?null:r.copy(o).multiplyScalar(f).add(t.start)}},{key:"intersectsLine",value:function(t){var r=this.distanceToPoint(t.start),o=this.distanceToPoint(t.end);return r<0&&o>0||o<0&&r>0}},{key:"intersectsBox",value:function(t){return t.intersectsPlane(this)}},{key:"intersectsSphere",value:function(t){return t.intersectsPlane(this)}},{key:"coplanarPoint",value:function(t){return t.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(t,r){var o=r||h4.getNormalMatrix(t),u=this.coplanarPoint(rA).applyMatrix4(t),f=this.normal.applyMatrix3(o).normalize();return this.constant=-u.dot(f),this}},{key:"translate",value:function(t){return this.constant-=t.dot(this.normal),this}},{key:"equals",value:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(),Qh=new Uh,$S=new J,iA=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vf,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vf,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new vf,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new vf,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new vf,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new vf;k(this,n),this.planes=[a,t,r,o,u,f]}return j(n,[{key:"set",value:function(t,r,o,u,f,p){var v=this.planes;return v[0].copy(t),v[1].copy(r),v[2].copy(o),v[3].copy(u),v[4].copy(f),v[5].copy(p),this}},{key:"copy",value:function(t){for(var r=this.planes,o=0;o<6;o++)r[o].copy(t.planes[o]);return this}},{key:"setFromProjectionMatrix",value:function(t){var r=this.planes,o=t.elements,u=o[0],f=o[1],p=o[2],v=o[3],g=o[4],y=o[5],_=o[6],C=o[7],S=o[8],x=o[9],b=o[10],E=o[11],D=o[12],A=o[13],M=o[14],O=o[15];return r[0].setComponents(v-u,C-g,E-S,O-D).normalize(),r[1].setComponents(v+u,C+g,E+S,O+D).normalize(),r[2].setComponents(v+f,C+y,E+x,O+A).normalize(),r[3].setComponents(v-f,C-y,E-x,O-A).normalize(),r[4].setComponents(v-p,C-_,E-b,O-M).normalize(),r[5].setComponents(v+p,C+_,E+b,O+M).normalize(),this}},{key:"intersectsObject",value:function(t){var r=t.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),Qh.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Qh)}},{key:"intersectsSprite",value:function(t){return Qh.center.set(0,0,0),Qh.radius=.7071067811865476,Qh.applyMatrix4(t.matrixWorld),this.intersectsSphere(Qh)}},{key:"intersectsSphere",value:function(t){for(var r=this.planes,o=t.center,u=-t.radius,f=0;f<6;f++)if(r[f].distanceToPoint(o)<u)return!1;return!0}},{key:"intersectsBox",value:function(t){for(var r=this.planes,o=0;o<6;o++){var u=r[o];if($S.x=u.normal.x>0?t.max.x:t.min.x,$S.y=u.normal.y>0?t.max.y:t.min.y,$S.z=u.normal.z>0?t.max.z:t.min.z,u.distanceToPoint($S)<0)return!1}return!0}},{key:"containsPoint",value:function(t){for(var r=this.planes,o=0;o<6;o++)if(r[o].distanceToPoint(t)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}();function CF(){var n=null,a=!1,t=null,r=null;function o(u,f){t(u,f),r=n.requestAnimationFrame(o)}return{start:function(){!0!==a&&null!==t&&(r=n.requestAnimationFrame(o),a=!0)},stop:function(){n.cancelAnimationFrame(r),a=!1},setAnimationLoop:function(f){t=f},setContext:function(f){n=f}}}function v4(n,a){var t=a.isWebGL2,r=new WeakMap;return{get:function(g){return g.isInterleavedBufferAttribute&&(g=g.data),r.get(g)},remove:function(g){g.isInterleavedBufferAttribute&&(g=g.data);var y=r.get(g);y&&(n.deleteBuffer(y.buffer),r.delete(g))},update:function(g,y){if(g.isGLBufferAttribute){var _=r.get(g);(!_||_.version<g.version)&&r.set(g,{buffer:g.buffer,type:g.type,bytesPerElement:g.elementSize,version:g.version})}else{g.isInterleavedBufferAttribute&&(g=g.data);var C=r.get(g);void 0===C?r.set(g,function(g,y){var x,_=g.array,C=g.usage,S=n.createBuffer();if(n.bindBuffer(y,S),n.bufferData(y,_,C),g.onUploadCallback(),_ instanceof Float32Array)x=5126;else if(_ instanceof Uint16Array)if(g.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");x=5131}else x=5123;else if(_ instanceof Int16Array)x=5122;else if(_ instanceof Uint32Array)x=5125;else if(_ instanceof Int32Array)x=5124;else if(_ instanceof Int8Array)x=5120;else if(_ instanceof Uint8Array)x=5121;else{if(!(_ instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_);x=5121}return{buffer:S,type:x,bytesPerElement:_.BYTES_PER_ELEMENT,version:g.version}}(g,y)):C.version<g.version&&(function(g,y,_){var C=y.array,S=y.updateRange;n.bindBuffer(_,g),-1===S.count?n.bufferSubData(_,0,C):(t?n.bufferSubData(_,S.offset*C.BYTES_PER_ELEMENT,C,S.offset,S.count):n.bufferSubData(_,S.offset*C.BYTES_PER_ELEMENT,C.subarray(S.offset,S.offset+S.count)),S.count=-1),y.onUploadCallback()}(C.buffer,g,y),C.version=g.version)}}}}var oA=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;k(this,t),(r=a.call(this)).type="PlaneGeometry",r.parameters={width:o,height:u,widthSegments:f,heightSegments:p};for(var v=o/2,g=u/2,y=Math.floor(f),_=Math.floor(p),C=y+1,S=_+1,x=o/y,b=u/_,E=[],D=[],A=[],M=[],O=0;O<S;O++)for(var I=O*b-g,B=0;B<C;B++){var z=B*x-v;D.push(z,-I,0),A.push(0,0,1),M.push(B/y),M.push(1-O/_)}for(var P=0;P<_;P++)for(var W=0;W<y;W++){var X=W+C*P,ne=W+C*(P+1),de=W+1+C*(P+1),ce=W+1+C*P;E.push(X,ne,ce),E.push(ne,de,ce)}return r.setIndex(E),r.setAttribute("position",new cn(D,3)),r.setAttribute("normal",new cn(A,3)),r.setAttribute("uv",new cn(M,2)),r}return j(t,null,[{key:"fromJSON",value:function(o){return new t(o.width,o.height,o.widthSegments,o.heightSegments)}}]),t}(Dr),Tn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ct={common:{diffuse:{value:new Yt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ws},uv2Transform:{value:new Ws},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Yt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Yt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ws}},sprite:{diffuse:{value:new Yt(16777215)},opacity:{value:1},center:{value:new Ye(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ws}}},Su={basic:{uniforms:Go([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.fog]),vertexShader:Tn.meshbasic_vert,fragmentShader:Tn.meshbasic_frag},lambert:{uniforms:Go([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new Yt(0)}}]),vertexShader:Tn.meshlambert_vert,fragmentShader:Tn.meshlambert_frag},phong:{uniforms:Go([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new Yt(0)},specular:{value:new Yt(1118481)},shininess:{value:30}}]),vertexShader:Tn.meshphong_vert,fragmentShader:Tn.meshphong_frag},standard:{uniforms:Go([ct.common,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.roughnessmap,ct.metalnessmap,ct.fog,ct.lights,{emissive:{value:new Yt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tn.meshphysical_vert,fragmentShader:Tn.meshphysical_frag},toon:{uniforms:Go([ct.common,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.gradientmap,ct.fog,ct.lights,{emissive:{value:new Yt(0)}}]),vertexShader:Tn.meshtoon_vert,fragmentShader:Tn.meshtoon_frag},matcap:{uniforms:Go([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,{matcap:{value:null}}]),vertexShader:Tn.meshmatcap_vert,fragmentShader:Tn.meshmatcap_frag},points:{uniforms:Go([ct.points,ct.fog]),vertexShader:Tn.points_vert,fragmentShader:Tn.points_frag},dashed:{uniforms:Go([ct.common,ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tn.linedashed_vert,fragmentShader:Tn.linedashed_frag},depth:{uniforms:Go([ct.common,ct.displacementmap]),vertexShader:Tn.depth_vert,fragmentShader:Tn.depth_frag},normal:{uniforms:Go([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,{opacity:{value:1}}]),vertexShader:Tn.meshnormal_vert,fragmentShader:Tn.meshnormal_frag},sprite:{uniforms:Go([ct.sprite,ct.fog]),vertexShader:Tn.sprite_vert,fragmentShader:Tn.sprite_frag},background:{uniforms:{uvTransform:{value:new Ws},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Tn.background_vert,fragmentShader:Tn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Tn.backgroundCube_vert,fragmentShader:Tn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Tn.cube_vert,fragmentShader:Tn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tn.equirect_vert,fragmentShader:Tn.equirect_frag},distanceRGBA:{uniforms:Go([ct.common,ct.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tn.distanceRGBA_vert,fragmentShader:Tn.distanceRGBA_frag},shadow:{uniforms:Go([ct.lights,ct.fog,{color:{value:new Yt(0)},opacity:{value:1}}]),vertexShader:Tn.shadow_vert,fragmentShader:Tn.shadow_frag}};Su.physical={uniforms:Go([Su.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ye(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Yt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Yt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Yt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Tn.meshphysical_vert,fragmentShader:Tn.meshphysical_frag};var XS={r:0,b:0,g:0};function Y6(n,a,t,r,o,u,f){var g,y,p=new Yt(0),v=!0===u?0:1,_=null,C=0,S=null;function b(E,D){E.getRGB(XS,yF(n)),r.buffers.color.setClear(XS.r,XS.g,XS.b,D,f)}return{getClearColor:function(){return p},setClearColor:function(D){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;p.set(D),b(p,v=A)},getClearAlpha:function(){return v},setClearAlpha:function(D){b(p,v=D)},render:function(E,D){var A=!1,M=!0===D.isScene?D.background:null;M&&M.isTexture&&(M=(D.backgroundBlurriness>0?t:a).get(M));var I=n.xr,B=I.getSession&&I.getSession();B&&"additive"===B.environmentBlendMode&&(M=null),null===M?b(p,v):M&&M.isColor&&(b(M,1),A=!0),(n.autoClear||A)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),M&&(M.isCubeTexture||306===M.mapping)?(void 0===y&&((y=new Fr(new Oy(1,1,1),new hf({name:"BackgroundCubeMaterial",uniforms:Xh(Su.backgroundCube.uniforms),vertexShader:Su.backgroundCube.vertexShader,fragmentShader:Su.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),y.geometry.deleteAttribute("uv"),y.onBeforeRender=function(z,P,W){this.matrixWorld.copyPosition(W.matrixWorld)},Object.defineProperty(y.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(y)),y.material.uniforms.envMap.value=M,y.material.uniforms.flipEnvMap.value=M.isCubeTexture&&!1===M.isRenderTargetTexture?-1:1,y.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,y.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,y.material.toneMapped=M.encoding!==Jn,(_!==M||C!==M.version||S!==n.toneMapping)&&(y.material.needsUpdate=!0,_=M,C=M.version,S=n.toneMapping),y.layers.enableAll(),E.unshift(y,y.geometry,y.material,0,0,null)):M&&M.isTexture&&(void 0===g&&((g=new Fr(new oA(2,2),new hf({name:"BackgroundMaterial",uniforms:Xh(Su.background.uniforms),vertexShader:Su.background.vertexShader,fragmentShader:Su.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(g.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(g)),g.material.uniforms.t2D.value=M,g.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,g.material.toneMapped=M.encoding!==Jn,!0===M.matrixAutoUpdate&&M.updateMatrix(),g.material.uniforms.uvTransform.value.copy(M.matrix),(_!==M||C!==M.version||S!==n.toneMapping)&&(g.material.needsUpdate=!0,_=M,C=M.version,S=n.toneMapping),g.layers.enableAll(),E.unshift(g,g.geometry,g.material,0,0,null))}}}function $6(n,a,t,r){var o=n.getParameter(34921),u=r.isWebGL2?null:a.get("OES_vertex_array_object"),f=r.isWebGL2||null!==u,p={},v=E(null),g=v,y=!1;function S(G){return r.isWebGL2?n.bindVertexArray(G):u.bindVertexArrayOES(G)}function x(G){return r.isWebGL2?n.deleteVertexArray(G):u.deleteVertexArrayOES(G)}function E(G){for(var ee=[],ie=[],ue=[],se=0;se<o;se++)ee[se]=0,ie[se]=0,ue[se]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ee,enabledAttributes:ie,attributeDivisors:ue,object:G,attributes:{},index:null}}function M(){for(var G=g.newAttributes,ee=0,ie=G.length;ee<ie;ee++)G[ee]=0}function O(G){I(G,0)}function I(G,ee){var ue=g.enabledAttributes,se=g.attributeDivisors;g.newAttributes[G]=1,0===ue[G]&&(n.enableVertexAttribArray(G),ue[G]=1),se[G]!==ee&&((r.isWebGL2?n:a.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,ee),se[G]=ee)}function B(){for(var G=g.newAttributes,ee=g.enabledAttributes,ie=0,ue=ee.length;ie<ue;ie++)ee[ie]!==G[ie]&&(n.disableVertexAttribArray(ie),ee[ie]=0)}function z(G,ee,ie,ue,se,ye){!0!==r.isWebGL2||5124!==ie&&5125!==ie?n.vertexAttribPointer(G,ee,ie,ue,se,ye):n.vertexAttribIPointer(G,ee,ie,se,ye)}function de(){ce(),y=!0,g!==v&&S((g=v).object)}function ce(){v.geometry=null,v.program=null,v.wireframe=!1}return{setup:function(G,ee,ie,ue,se){var ye=!1;if(f){var xe=function(G,ee,ie){var ue=!0===ie.wireframe,se=p[G.id];void 0===se&&(p[G.id]=se={});var ye=se[ee.id];void 0===ye&&(se[ee.id]=ye={});var xe=ye[ue];return void 0===xe&&(xe=E(r.isWebGL2?n.createVertexArray():u.createVertexArrayOES()),ye[ue]=xe),xe}(ue,ie,ee);g!==xe&&S((g=xe).object),ye=function(G,ee,ie,ue){var se=g.attributes,ye=ee.attributes,xe=0,we=ie.getAttributes();for(var _e in we)if(we[_e].location>=0){var be=se[_e],Ae=ye[_e];if(void 0===Ae&&("instanceMatrix"===_e&&G.instanceMatrix&&(Ae=G.instanceMatrix),"instanceColor"===_e&&G.instanceColor&&(Ae=G.instanceColor)),void 0===be||be.attribute!==Ae||Ae&&be.data!==Ae.data)return!0;xe++}return g.attributesNum!==xe||g.index!==ue}(G,ue,ie,se),ye&&function(G,ee,ie,ue){var se={},ye=ee.attributes,xe=0,we=ie.getAttributes();for(var _e in we)if(we[_e].location>=0){var be=ye[_e];void 0===be&&("instanceMatrix"===_e&&G.instanceMatrix&&(be=G.instanceMatrix),"instanceColor"===_e&&G.instanceColor&&(be=G.instanceColor));var Ae={};Ae.attribute=be,be&&be.data&&(Ae.data=be.data),se[_e]=Ae,xe++}g.attributes=se,g.attributesNum=xe,g.index=ue}(G,ue,ie,se)}else{var we=!0===ee.wireframe;(g.geometry!==ue.id||g.program!==ie.id||g.wireframe!==we)&&(g.geometry=ue.id,g.program=ie.id,g.wireframe=we,ye=!0)}null!==se&&t.update(se,34963),(ye||y)&&(y=!1,function(G,ee,ie,ue){if(!1!==r.isWebGL2||!G.isInstancedMesh&&!ue.isInstancedBufferGeometry||null!==a.get("ANGLE_instanced_arrays")){M();var se=ue.attributes,ye=ie.getAttributes(),xe=ee.defaultAttributeValues;for(var we in ye){var _e=ye[we];if(_e.location>=0){var Ge=se[we];if(void 0===Ge&&("instanceMatrix"===we&&G.instanceMatrix&&(Ge=G.instanceMatrix),"instanceColor"===we&&G.instanceColor&&(Ge=G.instanceColor)),void 0!==Ge){var be=Ge.normalized,Ae=Ge.itemSize,ge=t.get(Ge);if(void 0===ge)continue;var Xe=ge.buffer,ke=ge.type,je=ge.bytesPerElement;if(Ge.isInterleavedBufferAttribute){var We=Ge.data,ze=We.stride,ot=Ge.offset;if(We.isInstancedInterleavedBuffer){for(var Vt=0;Vt<_e.locationSize;Vt++)I(_e.location+Vt,We.meshPerAttribute);!0!==G.isInstancedMesh&&void 0===ue._maxInstanceCount&&(ue._maxInstanceCount=We.meshPerAttribute*We.count)}else for(var et=0;et<_e.locationSize;et++)O(_e.location+et);n.bindBuffer(34962,Xe);for(var Pt=0;Pt<_e.locationSize;Pt++)z(_e.location+Pt,Ae/_e.locationSize,ke,be,ze*je,(ot+Ae/_e.locationSize*Pt)*je)}else{if(Ge.isInstancedBufferAttribute){for(var En=0;En<_e.locationSize;En++)I(_e.location+En,Ge.meshPerAttribute);!0!==G.isInstancedMesh&&void 0===ue._maxInstanceCount&&(ue._maxInstanceCount=Ge.meshPerAttribute*Ge.count)}else for(var Cn=0;Cn<_e.locationSize;Cn++)O(_e.location+Cn);n.bindBuffer(34962,Xe);for(var xt=0;xt<_e.locationSize;xt++)z(_e.location+xt,Ae/_e.locationSize,ke,be,Ae*je,Ae/_e.locationSize*xt*je)}}else if(void 0!==xe){var hn=xe[we];if(void 0!==hn)switch(hn.length){case 2:n.vertexAttrib2fv(_e.location,hn);break;case 3:n.vertexAttrib3fv(_e.location,hn);break;case 4:n.vertexAttrib4fv(_e.location,hn);break;default:n.vertexAttrib1fv(_e.location,hn)}}}}B()}}(G,ee,ie,ue),null!==se&&n.bindBuffer(34963,t.get(se).buffer))},reset:de,resetDefaultState:ce,dispose:function(){for(var G in de(),p){var ee=p[G];for(var ie in ee){var ue=ee[ie];for(var se in ue)x(ue[se].object),delete ue[se];delete ee[ie]}delete p[G]}},releaseStatesOfGeometry:function(G){if(void 0!==p[G.id]){var ee=p[G.id];for(var ie in ee){var ue=ee[ie];for(var se in ue)x(ue[se].object),delete ue[se];delete ee[ie]}delete p[G.id]}},releaseStatesOfProgram:function(G){for(var ee in p){var ie=p[ee];if(void 0!==ie[G.id]){var ue=ie[G.id];for(var se in ue)x(ue[se].object),delete ue[se];delete ie[G.id]}}},initAttributes:M,enableAttribute:O,disableUnusedAttributes:B}}function X6(n,a,t,r){var u,o=r.isWebGL2;this.setMode=function(g){u=g},this.render=function(g,y){n.drawArrays(u,g,y),t.update(y,u,1)},this.renderInstances=function(g,y,_){if(0!==_){var C,S;if(o)C=n,S="drawArraysInstanced";else if(S="drawArraysInstancedANGLE",null===(C=a.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");C[S](u,g,y,_),t.update(y,u,_)}}}function J6(n,a,t){var r;function u(z){if("highp"===z){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";z="mediump"}return"mediump"===z&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var f="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&n instanceof WebGL2ComputeRenderingContext,p=void 0!==t.precision?t.precision:"highp",v=u(p);v!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",v,"instead."),p=v);var g=f||a.has("WEBGL_draw_buffers"),y=!0===t.logarithmicDepthBuffer,_=n.getParameter(34930),C=n.getParameter(35660),S=n.getParameter(3379),x=n.getParameter(34076),b=n.getParameter(34921),E=n.getParameter(36347),D=n.getParameter(36348),A=n.getParameter(36349),M=C>0,O=f||a.has("OES_texture_float");return{isWebGL2:f,drawBuffers:g,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===a.has("EXT_texture_filter_anisotropic")){var z=a.get("EXT_texture_filter_anisotropic");r=n.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:u,precision:p,logarithmicDepthBuffer:y,maxTextures:_,maxVertexTextures:C,maxTextureSize:S,maxCubemapSize:x,maxAttributes:b,maxVertexUniforms:E,maxVaryings:D,maxFragmentUniforms:A,vertexTextures:M,floatFragmentTextures:O,floatVertexTextures:M&&O,maxSamples:f?n.getParameter(36183):0}}function Z6(n){var a=this,t=null,r=0,o=!1,u=!1,f=new vf,p=new Ws,v={value:null,needsUpdate:!1};function g(){v.value!==t&&(v.value=t,v.needsUpdate=r>0),a.numPlanes=r,a.numIntersection=0}function y(_,C,S,x){var b=null!==_?_.length:0,E=null;if(0!==b){if(E=v.value,!0!==x||null===E){var D=S+4*b,A=C.matrixWorldInverse;p.getNormalMatrix(A),(null===E||E.length<D)&&(E=new Float32Array(D));for(var M=0,O=S;M!==b;++M,O+=4)f.copy(_[M]).applyMatrix4(A,p),f.normal.toArray(E,O),E[O+3]=f.constant}v.value=E,v.needsUpdate=!0}return a.numPlanes=b,a.numIntersection=0,E}this.uniform=v,this.numPlanes=0,this.numIntersection=0,this.init=function(_,C,S){var x=0!==_.length||C||0!==r||o;return o=C,t=y(_,S,0),r=_.length,x},this.beginShadows=function(){u=!0,y(null)},this.endShadows=function(){u=!1,g()},this.setState=function(_,C,S){var x=_.clippingPlanes,b=_.clipIntersection,E=_.clipShadows,D=n.get(_);if(!o||null===x||0===x.length||u&&!E)u?y(null):g();else{var A=u?0:r,M=4*A,O=D.clippingState||null;v.value=O,O=y(x,C,M,S);for(var I=0;I!==M;++I)O[I]=t[I];D.clippingState=O,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=A}}}function Q6(n){var a=new WeakMap;function t(f,p){return 303===p?f.mapping=301:304===p&&(f.mapping=302),f}function o(f){var p=f.target;p.removeEventListener("dispose",o);var v=a.get(p);void 0!==v&&(a.delete(p),v.dispose())}return{get:function(f){if(f&&f.isTexture&&!1===f.isRenderTargetTexture){var p=f.mapping;if(303===p||304===p){if(a.has(f))return t(a.get(f).texture,f.mapping);var g=f.image;if(g&&g.height>0){var y=new f4(g.height/2);return y.fromEquirectangularTexture(n,f),a.set(f,y),f.addEventListener("dispose",o),t(y.texture,f.mapping)}return null}}return f},dispose:function(){a=new WeakMap}}}var aA=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return k(this,t),(r=a.call(this)).isOrthographicCamera=!0,r.type="OrthographicCamera",r.zoom=1,r.view=null,r.left=o,r.right=u,r.top=f,r.bottom=p,r.near=v,r.far=g,r.updateProjectionMatrix(),r}return j(t,[{key:"copy",value:function(o,u){return Ce(Ue(t.prototype),"copy",this).call(this,o,u),this.left=o.left,this.right=o.right,this.top=o.top,this.bottom=o.bottom,this.near=o.near,this.far=o.far,this.zoom=o.zoom,this.view=null===o.view?null:Object.assign({},o.view),this}},{key:"setViewOffset",value:function(o,u,f,p,v,g){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=u,this.view.offsetX=f,this.view.offsetY=p,this.view.width=v,this.view.height=g,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var o=(this.right-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),f=(this.right+this.left)/2,p=(this.top+this.bottom)/2,v=f-o,g=f+o,y=p+u,_=p-u;if(null!==this.view&&this.view.enabled){var C=(this.right-this.left)/this.view.fullWidth/this.zoom,S=(this.top-this.bottom)/this.view.fullHeight/this.zoom;g=(v+=C*this.view.offsetX)+C*this.view.width,_=(y-=S*this.view.offsetY)-S*this.view.height}this.projectionMatrix.makeOrthographic(v,g,y,_,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(o){var u=Ce(Ue(t.prototype),"toJSON",this).call(this,o);return u.object.zoom=this.zoom,u.object.left=this.left,u.object.right=this.right,u.object.top=this.top,u.object.bottom=this.bottom,u.object.near=this.near,u.object.far=this.far,null!==this.view&&(u.object.view=Object.assign({},this.view)),u}}]),t}(nA),wF=[.125,.215,.35,.446,.526,.582],sA=new aA,SF=new Yt,uA=null,mf=(1+Math.sqrt(5))/2,tv=1/mf,EF=[new J(1,1,1),new J(-1,1,1),new J(1,1,-1),new J(-1,1,-1),new J(0,mf,tv),new J(0,mf,-tv),new J(tv,0,mf),new J(-tv,0,mf),new J(mf,tv,0),new J(-mf,tv,0)],bF=function(){function n(a){k(this,n),this._renderer=a,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return j(n,[{key:"fromScene",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;uA=this._renderer.getRenderTarget(),this._setSize(256);var f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(t,o,u,f),r>0&&this._blur(f,0,0,r),this._applyPMREM(f),this._cleanup(f),f}},{key:"fromEquirectangular",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,r)}},{key:"fromCubemap",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,r)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=TF(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=RF(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}},{key:"_cleanup",value:function(t){this._renderer.setRenderTarget(uA),t.scissorTest=!1,JS(t,0,0,t.width,t.height)}},{key:"_fromTexture",value:function(t,r){this._setSize(301===t.mapping||302===t.mapping?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),uA=this._renderer.getRenderTarget();var o=r||this._allocateTargets();return this._textureToCubeUV(t,o),this._applyPMREM(o),this._cleanup(o),o}},{key:"_allocateTargets",value:function(){var t=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,o={magFilter:Fo,minFilter:Fo,generateMipmaps:!1,type:yy,format:Za,encoding:uf,depthBuffer:!1},u=xF(t,r,o);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=xF(t,r,o);var f=this._lodMax,p=function(n){for(var a=[],t=[],r=[],o=n,u=n-4+1+wF.length,f=0;f<u;f++){var p=Math.pow(2,o);t.push(p);var v=1/p;f>n-4?v=wF[f-n+4-1]:0===f&&(v=0),r.push(v);for(var g=1/(p-2),y=-g,_=1+g,C=[y,y,_,y,_,_,y,y,_,_,y,_],A=new Float32Array(108),M=new Float32Array(72),O=new Float32Array(36),I=0;I<6;I++){var B=I%3*2/3-1,z=I>2?0:-1;A.set([B,z,0,B+2/3,z,0,B+2/3,z+1,0,B,z,0,B+2/3,z+1,0,B,z+1,0],18*I),M.set(C,12*I),O.set([I,I,I,I,I,I],6*I)}var X=new Dr;X.setAttribute("position",new ko(A,3)),X.setAttribute("uv",new ko(M,2)),X.setAttribute("faceIndex",new ko(O,1)),a.push(X),o>4&&o--}return{lodPlanes:a,sizeLods:t,sigmas:r}}(f);this._sizeLods=p.sizeLods,this._lodPlanes=p.lodPlanes,this._sigmas=p.sigmas,this._blurMaterial=function(n,a,t){var r=new Float32Array(20),o=new J(0,1,0);return new hf({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/a,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:"".concat(n,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(f,t,r)}return u}},{key:"_compileMaterial",value:function(t){var r=new Fr(this._lodPlanes[0],t);this._renderer.compile(r,sA)}},{key:"_sceneToCubeUV",value:function(t,r,o,u){var v=new ti(90,1,r,o),g=[1,-1,1,1,1,1],y=[1,1,1,-1,-1,-1],_=this._renderer,C=_.autoClear,S=_.toneMapping;_.getClearColor(SF),_.toneMapping=0,_.autoClear=!1;var x=new es({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),b=new Fr(new Oy,x),E=!1,D=t.background;D?D.isColor&&(x.color.copy(D),t.background=null,E=!0):(x.color.copy(SF),E=!0);for(var A=0;A<6;A++){var M=A%3;0===M?(v.up.set(0,g[A],0),v.lookAt(y[A],0,0)):1===M?(v.up.set(0,0,g[A]),v.lookAt(0,y[A],0)):(v.up.set(0,g[A],0),v.lookAt(0,0,y[A]));var O=this._cubeSize;JS(u,M*O,A>2?O:0,O,O),_.setRenderTarget(u),E&&_.render(b,v),_.render(t,v)}b.geometry.dispose(),b.material.dispose(),_.toneMapping=S,_.autoClear=C,t.background=D}},{key:"_textureToCubeUV",value:function(t,r){var o=this._renderer,u=301===t.mapping||302===t.mapping;u?(null===this._cubemapMaterial&&(this._cubemapMaterial=TF()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=RF());var f=u?this._cubemapMaterial:this._equirectMaterial,p=new Fr(this._lodPlanes[0],f);f.uniforms.envMap.value=t;var g=this._cubeSize;JS(r,0,0,3*g,2*g),o.setRenderTarget(r),o.render(p,sA)}},{key:"_applyPMREM",value:function(t){var r=this._renderer,o=r.autoClear;r.autoClear=!1;for(var u=1;u<this._lodPlanes.length;u++){var f=Math.sqrt(this._sigmas[u]*this._sigmas[u]-this._sigmas[u-1]*this._sigmas[u-1]);this._blur(t,u-1,u,f,EF[(u-1)%EF.length])}r.autoClear=o}},{key:"_blur",value:function(t,r,o,u,f){var p=this._pingPongRenderTarget;this._halfBlur(t,p,r,o,u,"latitudinal",f),this._halfBlur(p,t,o,o,u,"longitudinal",f)}},{key:"_halfBlur",value:function(t,r,o,u,f,p,v){var g=this._renderer,y=this._blurMaterial;"latitudinal"!==p&&"longitudinal"!==p&&console.error("blur direction must be either latitudinal or longitudinal!");var C=new Fr(this._lodPlanes[u],y),S=y.uniforms,x=this._sizeLods[o]-1,b=isFinite(f)?Math.PI/(2*x):2*Math.PI/39,E=f/b,D=isFinite(f)?1+Math.floor(3*E):20;D>20&&console.warn("sigmaRadians, ".concat(f,", is too large and will clip, as it requested ").concat(D," samples when the maximum is set to ").concat(20));for(var A=[],M=0,O=0;O<20;++O){var I=O/E,B=Math.exp(-I*I/2);A.push(B),0===O?M+=B:O<D&&(M+=2*B)}for(var z=0;z<A.length;z++)A[z]=A[z]/M;S.envMap.value=t.texture,S.samples.value=D,S.weights.value=A,S.latitudinal.value="latitudinal"===p,v&&(S.poleAxis.value=v);var P=this._lodMax;S.dTheta.value=b,S.mipInt.value=P-o;var W=this._sizeLods[u];JS(r,3*W*(u>P-4?u-P+4:0),4*(this._cubeSize-W),3*W,2*W),g.setRenderTarget(r),g.render(C,sA)}}]),n}();function xF(n,a,t){var r=new cf(n,a,t);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function JS(n,a,t,r,o){n.viewport.set(a,t,r,o),n.scissor.set(a,t,r,o)}function RF(){return new hf({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function TF(){return new hf({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function n8(n){var a=new WeakMap,t=null;function u(p){var v=p.target;v.removeEventListener("dispose",u);var g=a.get(v);void 0!==g&&(a.delete(v),g.dispose())}return{get:function(p){if(p&&p.isTexture){var v=p.mapping,g=303===v||304===v,y=301===v||302===v;if(g||y){if(p.isRenderTargetTexture&&!0===p.needsPMREMUpdate){p.needsPMREMUpdate=!1;var _=a.get(p);return null===t&&(t=new bF(n)),_=g?t.fromEquirectangular(p,_):t.fromCubemap(p,_),a.set(p,_),_.texture}if(a.has(p))return a.get(p).texture;var C=p.image;if(g&&C&&C.height>0||y&&C&&function(p){for(var v=0,y=0;y<6;y++)void 0!==p[y]&&v++;return 6===v}(C)){null===t&&(t=new bF(n));var S=g?t.fromEquirectangular(p):t.fromCubemap(p);return a.set(p,S),p.addEventListener("dispose",u),S.texture}return null}}return p},dispose:function(){a=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function r8(n){var a={};function t(r){if(void 0!==a[r])return a[r];var o;switch(r){case"WEBGL_depth_texture":o=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=n.getExtension(r)}return a[r]=o,o}return{has:function(o){return null!==t(o)},init:function(o){o.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(o){var u=t(o);return null===u&&console.warn("THREE.WebGLRenderer: "+o+" extension not supported."),u}}}function i8(n,a,t,r){var o={},u=new WeakMap;function f(_){var C=_.target;for(var S in null!==C.index&&a.remove(C.index),C.attributes)a.remove(C.attributes[S]);C.removeEventListener("dispose",f),delete o[C.id];var x=u.get(C);x&&(a.remove(x),u.delete(C)),r.releaseStatesOfGeometry(C),!0===C.isInstancedBufferGeometry&&delete C._maxInstanceCount,t.memory.geometries--}function g(_){var C=[],S=_.index,x=_.attributes.position,b=0;if(null!==S){var E=S.array;b=S.version;for(var D=0,A=E.length;D<A;D+=3){var M=E[D+0],O=E[D+1],I=E[D+2];C.push(M,O,O,I,I,M)}}else{b=x.version;for(var z=0,P=x.array.length/3-1;z<P;z+=3){var W=z+0,X=z+1,ne=z+2;C.push(W,X,X,ne,ne,W)}}var de=new(eF(C)?gF:vF)(C,1);de.version=b;var ce=u.get(_);ce&&a.remove(ce),u.set(_,de)}return{get:function(_,C){return!0===o[C.id]||(C.addEventListener("dispose",f),o[C.id]=!0,t.memory.geometries++),C},update:function(_){var C=_.attributes;for(var S in C)a.update(C[S],34962);var x=_.morphAttributes;for(var b in x)for(var E=x[b],D=0,A=E.length;D<A;D++)a.update(E[D],34962)},getWireframeAttribute:function(_){var C=u.get(_);if(C){var S=_.index;null!==S&&C.version<S.version&&g(_)}else g(_);return u.get(_)}}}function o8(n,a,t,r){var u,p,v,o=r.isWebGL2;this.setMode=function(C){u=C},this.setIndex=function(C){p=C.type,v=C.bytesPerElement},this.render=function(C,S){n.drawElements(u,S,p,C*v),t.update(S,u,1)},this.renderInstances=function(C,S,x){if(0!==x){var b,E;if(o)b=n,E="drawElementsInstanced";else if(E="drawElementsInstancedANGLE",null===(b=a.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");b[E](u,S,p,C*v,x),t.update(S,u,x)}}}function a8(n){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(u,f,p){switch(t.calls++,f){case 4:t.triangles+=p*(u/3);break;case 1:t.lines+=p*(u/2);break;case 3:t.lines+=p*(u-1);break;case 2:t.lines+=p*u;break;case 0:t.points+=p*u;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",f)}}}}function s8(n,a){return n[0]-a[0]}function u8(n,a){return Math.abs(a[1])-Math.abs(n[1])}function l8(n,a,t){for(var r={},o=new Float32Array(8),u=new WeakMap,f=new wr,p=[],v=0;v<8;v++)p[v]=[v,0];return{update:function(y,_,C,S){var x=y.morphTargetInfluences;if(!0===a.isWebGL2){var b=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,E=void 0!==b?b.length:0,D=u.get(_);if(void 0===D||D.count!==E){void 0!==D&&D.texture.dispose();var M=void 0!==_.morphAttributes.position,O=void 0!==_.morphAttributes.normal,I=void 0!==_.morphAttributes.color,B=_.morphAttributes.position||[],z=_.morphAttributes.normal||[],P=_.morphAttributes.color||[],W=0;!0===M&&(W=1),!0===O&&(W=2),!0===I&&(W=3);var X=_.attributes.position.count*W,ne=1;X>a.maxTextureSize&&(ne=Math.ceil(X/a.maxTextureSize),X=a.maxTextureSize);var de=new Float32Array(X*ne*4*E),ce=new iF(de,X,ne,E);ce.type=Dc,ce.needsUpdate=!0;for(var G=4*W,ee=0;ee<E;ee++)for(var ie=B[ee],ue=z[ee],se=P[ee],ye=X*ne*4*ee,xe=0;xe<ie.count;xe++){var we=xe*G;!0===M&&(f.fromBufferAttribute(ie,xe),de[ye+we+0]=f.x,de[ye+we+1]=f.y,de[ye+we+2]=f.z,de[ye+we+3]=0),!0===O&&(f.fromBufferAttribute(ue,xe),de[ye+we+4]=f.x,de[ye+we+5]=f.y,de[ye+we+6]=f.z,de[ye+we+7]=0),!0===I&&(f.fromBufferAttribute(se,xe),de[ye+we+8]=f.x,de[ye+we+9]=f.y,de[ye+we+10]=f.z,de[ye+we+11]=4===se.itemSize?f.w:1)}D={count:E,texture:ce,size:new Ye(X,ne)},u.set(_,D),_.addEventListener("dispose",function hn(){ce.dispose(),u.delete(_),_.removeEventListener("dispose",hn)})}for(var _e=0,Ge=0;Ge<x.length;Ge++)_e+=x[Ge];var be=_.morphTargetsRelative?1:1-_e;S.getUniforms().setValue(n,"morphTargetBaseInfluence",be),S.getUniforms().setValue(n,"morphTargetInfluences",x),S.getUniforms().setValue(n,"morphTargetsTexture",D.texture,t),S.getUniforms().setValue(n,"morphTargetsTextureSize",D.size)}else{var Ae=void 0===x?0:x.length,ge=r[_.id];if(void 0===ge||ge.length!==Ae){ge=[];for(var Xe=0;Xe<Ae;Xe++)ge[Xe]=[Xe,0];r[_.id]=ge}for(var ke=0;ke<Ae;ke++){var je=ge[ke];je[0]=ke,je[1]=x[ke]}ge.sort(u8);for(var We=0;We<8;We++)We<Ae&&ge[We][1]?(p[We][0]=ge[We][0],p[We][1]=ge[We][1]):(p[We][0]=Number.MAX_SAFE_INTEGER,p[We][1]=0);p.sort(s8);for(var ze=_.morphAttributes.position,ot=_.morphAttributes.normal,Vt=0,et=0;et<8;et++){var Pt=p[et],En=Pt[0],Cn=Pt[1];En!==Number.MAX_SAFE_INTEGER&&Cn?(ze&&_.getAttribute("morphTarget"+et)!==ze[En]&&_.setAttribute("morphTarget"+et,ze[En]),ot&&_.getAttribute("morphNormal"+et)!==ot[En]&&_.setAttribute("morphNormal"+et,ot[En]),o[et]=Cn,Vt+=Cn):(ze&&!0===_.hasAttribute("morphTarget"+et)&&_.deleteAttribute("morphTarget"+et),ot&&!0===_.hasAttribute("morphNormal"+et)&&_.deleteAttribute("morphNormal"+et),o[et]=0)}var xt=_.morphTargetsRelative?1:1-Vt;S.getUniforms().setValue(n,"morphTargetBaseInfluence",xt),S.getUniforms().setValue(n,"morphTargetInfluences",o)}}}}function c8(n,a,t,r){var o=new WeakMap;function p(v){var g=v.target;g.removeEventListener("dispose",p),t.remove(g.instanceMatrix),null!==g.instanceColor&&t.remove(g.instanceColor)}return{update:function(v){var g=r.render.frame,_=a.get(v,v.geometry);return o.get(_)!==g&&(a.update(_),o.set(_,g)),v.isInstancedMesh&&(!1===v.hasEventListener("dispose",p)&&v.addEventListener("dispose",p),t.update(v.instanceMatrix,34962),null!==v.instanceColor&&t.update(v.instanceColor,34962)),_},dispose:function(){o=new WeakMap}}}var DF=new wu,AF=new iF,MF=new Xj,OF=new _F,PF=[],IF=[],LF=new Float32Array(16),FF=new Float32Array(9),NF=new Float32Array(4);function nv(n,a,t){var r=n[0];if(r<=0||r>0)return n;var o=a*t,u=PF[o];if(void 0===u&&(u=new Float32Array(o),PF[o]=u),0!==a){r.toArray(u,0);for(var f=1,p=0;f!==a;++f)n[f].toArray(u,p+=t)}return u}function Pi(n,a){if(n.length!==a.length)return!1;for(var t=0,r=n.length;t<r;t++)if(n[t]!==a[t])return!1;return!0}function Ii(n,a){for(var t=0,r=a.length;t<r;t++)n[t]=a[t]}function ZS(n,a){var t=IF[a];void 0===t&&(t=new Int32Array(a),IF[a]=t);for(var r=0;r!==a;++r)t[r]=n.allocateTextureUnit();return t}function d8(n,a){var t=this.cache;t[0]!==a&&(n.uniform1f(this.addr,a),t[0]=a)}function f8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y)&&(n.uniform2f(this.addr,a.x,a.y),t[0]=a.x,t[1]=a.y);else{if(Pi(t,a))return;n.uniform2fv(this.addr,a),Ii(t,a)}}function p8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y||t[2]!==a.z)&&(n.uniform3f(this.addr,a.x,a.y,a.z),t[0]=a.x,t[1]=a.y,t[2]=a.z);else if(void 0!==a.r)(t[0]!==a.r||t[1]!==a.g||t[2]!==a.b)&&(n.uniform3f(this.addr,a.r,a.g,a.b),t[0]=a.r,t[1]=a.g,t[2]=a.b);else{if(Pi(t,a))return;n.uniform3fv(this.addr,a),Ii(t,a)}}function h8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y||t[2]!==a.z||t[3]!==a.w)&&(n.uniform4f(this.addr,a.x,a.y,a.z,a.w),t[0]=a.x,t[1]=a.y,t[2]=a.z,t[3]=a.w);else{if(Pi(t,a))return;n.uniform4fv(this.addr,a),Ii(t,a)}}function v8(n,a){var t=this.cache,r=a.elements;if(void 0===r){if(Pi(t,a))return;n.uniformMatrix2fv(this.addr,!1,a),Ii(t,a)}else{if(Pi(t,r))return;NF.set(r),n.uniformMatrix2fv(this.addr,!1,NF),Ii(t,r)}}function g8(n,a){var t=this.cache,r=a.elements;if(void 0===r){if(Pi(t,a))return;n.uniformMatrix3fv(this.addr,!1,a),Ii(t,a)}else{if(Pi(t,r))return;FF.set(r),n.uniformMatrix3fv(this.addr,!1,FF),Ii(t,r)}}function m8(n,a){var t=this.cache,r=a.elements;if(void 0===r){if(Pi(t,a))return;n.uniformMatrix4fv(this.addr,!1,a),Ii(t,a)}else{if(Pi(t,r))return;LF.set(r),n.uniformMatrix4fv(this.addr,!1,LF),Ii(t,r)}}function y8(n,a){var t=this.cache;t[0]!==a&&(n.uniform1i(this.addr,a),t[0]=a)}function _8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y)&&(n.uniform2i(this.addr,a.x,a.y),t[0]=a.x,t[1]=a.y);else{if(Pi(t,a))return;n.uniform2iv(this.addr,a),Ii(t,a)}}function C8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y||t[2]!==a.z)&&(n.uniform3i(this.addr,a.x,a.y,a.z),t[0]=a.x,t[1]=a.y,t[2]=a.z);else{if(Pi(t,a))return;n.uniform3iv(this.addr,a),Ii(t,a)}}function w8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y||t[2]!==a.z||t[3]!==a.w)&&(n.uniform4i(this.addr,a.x,a.y,a.z,a.w),t[0]=a.x,t[1]=a.y,t[2]=a.z,t[3]=a.w);else{if(Pi(t,a))return;n.uniform4iv(this.addr,a),Ii(t,a)}}function S8(n,a){var t=this.cache;t[0]!==a&&(n.uniform1ui(this.addr,a),t[0]=a)}function E8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y)&&(n.uniform2ui(this.addr,a.x,a.y),t[0]=a.x,t[1]=a.y);else{if(Pi(t,a))return;n.uniform2uiv(this.addr,a),Ii(t,a)}}function b8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y||t[2]!==a.z)&&(n.uniform3ui(this.addr,a.x,a.y,a.z),t[0]=a.x,t[1]=a.y,t[2]=a.z);else{if(Pi(t,a))return;n.uniform3uiv(this.addr,a),Ii(t,a)}}function x8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y||t[2]!==a.z||t[3]!==a.w)&&(n.uniform4ui(this.addr,a.x,a.y,a.z,a.w),t[0]=a.x,t[1]=a.y,t[2]=a.z,t[3]=a.w);else{if(Pi(t,a))return;n.uniform4uiv(this.addr,a),Ii(t,a)}}function R8(n,a,t){var r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(n.uniform1i(this.addr,o),r[0]=o),t.setTexture2D(a||DF,o)}function T8(n,a,t){var r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(n.uniform1i(this.addr,o),r[0]=o),t.setTexture3D(a||MF,o)}function D8(n,a,t){var r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(n.uniform1i(this.addr,o),r[0]=o),t.setTextureCube(a||OF,o)}function A8(n,a,t){var r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(n.uniform1i(this.addr,o),r[0]=o),t.setTexture2DArray(a||AF,o)}function O8(n,a){n.uniform1fv(this.addr,a)}function P8(n,a){var t=nv(a,this.size,2);n.uniform2fv(this.addr,t)}function I8(n,a){var t=nv(a,this.size,3);n.uniform3fv(this.addr,t)}function L8(n,a){var t=nv(a,this.size,4);n.uniform4fv(this.addr,t)}function F8(n,a){var t=nv(a,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function N8(n,a){var t=nv(a,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function k8(n,a){var t=nv(a,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function G8(n,a){n.uniform1iv(this.addr,a)}function B8(n,a){n.uniform2iv(this.addr,a)}function H8(n,a){n.uniform3iv(this.addr,a)}function V8(n,a){n.uniform4iv(this.addr,a)}function W8(n,a){n.uniform1uiv(this.addr,a)}function U8(n,a){n.uniform2uiv(this.addr,a)}function z8(n,a){n.uniform3uiv(this.addr,a)}function j8(n,a){n.uniform4uiv(this.addr,a)}function q8(n,a,t){var r=this.cache,o=a.length,u=ZS(t,o);Pi(r,u)||(n.uniform1iv(this.addr,u),Ii(r,u));for(var f=0;f!==o;++f)t.setTexture2D(a[f]||DF,u[f])}function K8(n,a,t){var r=this.cache,o=a.length,u=ZS(t,o);Pi(r,u)||(n.uniform1iv(this.addr,u),Ii(r,u));for(var f=0;f!==o;++f)t.setTexture3D(a[f]||MF,u[f])}function Y8(n,a,t){var r=this.cache,o=a.length,u=ZS(t,o);Pi(r,u)||(n.uniform1iv(this.addr,u),Ii(r,u));for(var f=0;f!==o;++f)t.setTextureCube(a[f]||OF,u[f])}function $8(n,a,t){var r=this.cache,o=a.length,u=ZS(t,o);Pi(r,u)||(n.uniform1iv(this.addr,u),Ii(r,u));for(var f=0;f!==o;++f)t.setTexture2DArray(a[f]||AF,u[f])}var J8=function n(a,t,r){k(this,n),this.id=a,this.addr=r,this.cache=[],this.setValue=function(n){switch(n){case 5126:return d8;case 35664:return f8;case 35665:return p8;case 35666:return h8;case 35674:return v8;case 35675:return g8;case 35676:return m8;case 5124:case 35670:return y8;case 35667:case 35671:return _8;case 35668:case 35672:return C8;case 35669:case 35673:return w8;case 5125:return S8;case 36294:return E8;case 36295:return b8;case 36296:return x8;case 35678:case 36198:case 36298:case 36306:case 35682:return R8;case 35679:case 36299:case 36307:return T8;case 35680:case 36300:case 36308:case 36293:return D8;case 36289:case 36303:case 36311:case 36292:return A8}}(t.type)},Z8=function n(a,t,r){k(this,n),this.id=a,this.addr=r,this.cache=[],this.size=t.size,this.setValue=function(n){switch(n){case 5126:return O8;case 35664:return P8;case 35665:return I8;case 35666:return L8;case 35674:return F8;case 35675:return N8;case 35676:return k8;case 5124:case 35670:return G8;case 35667:case 35671:return B8;case 35668:case 35672:return H8;case 35669:case 35673:return V8;case 5125:return W8;case 36294:return U8;case 36295:return z8;case 36296:return j8;case 35678:case 36198:case 36298:case 36306:case 35682:return q8;case 35679:case 36299:case 36307:return K8;case 35680:case 36300:case 36308:case 36293:return Y8;case 36289:case 36303:case 36311:case 36292:return $8}}(t.type)},Q8=function(){function n(a){k(this,n),this.id=a,this.seq=[],this.map={}}return j(n,[{key:"setValue",value:function(t,r,o){for(var u=this.seq,f=0,p=u.length;f!==p;++f){var v=u[f];v.setValue(t,r[v.id],o)}}}]),n}(),cA=/(\w+)(\])?(\[|\.)?/g;function kF(n,a){n.seq.push(a),n.map[a.id]=a}function e9(n,a,t){var r=n.name,o=r.length;for(cA.lastIndex=0;;){var u=cA.exec(r),p=u[1],g=u[3];if("]"===u[2]&&(p|=0),void 0===g||"["===g&&cA.lastIndex+2===o){kF(t,void 0===g?new J8(p,n,a):new Z8(p,n,a));break}var _=t.map[p];void 0===_&&kF(t,_=new Q8(p)),t=_}}var QS=function(){function n(a,t){k(this,n),this.seq=[],this.map={};for(var r=a.getProgramParameter(t,35718),o=0;o<r;++o){var u=a.getActiveUniform(t,o);e9(u,a.getUniformLocation(t,u.name),this)}}return j(n,[{key:"setValue",value:function(t,r,o,u){var f=this.map[r];void 0!==f&&f.setValue(t,o,u)}},{key:"setOptional",value:function(t,r,o){var u=r[o];void 0!==u&&this.setValue(t,o,u)}}],[{key:"upload",value:function(t,r,o,u){for(var f=0,p=r.length;f!==p;++f){var v=r[f],g=o[v.id];!1!==g.needsUpdate&&v.setValue(t,g.value,u)}}},{key:"seqWithValue",value:function(t,r){for(var o=[],u=0,f=t.length;u!==f;++u){var p=t[u];p.id in r&&o.push(p)}return o}}]),n}();function GF(n,a,t){var r=n.createShader(a);return n.shaderSource(r,t),n.compileShader(r),r}var t9=0;function BF(n,a,t){var r=n.getShaderParameter(a,35713),o=n.getShaderInfoLog(a).trim();if(r&&""===o)return"";var u=/ERROR: 0:(\d+)/.exec(o);if(u){var f=parseInt(u[1]);return t.toUpperCase()+"\n\n"+o+"\n\n"+function(n,a){for(var t=n.split("\n"),r=[],o=Math.max(a-6,0),u=Math.min(a+6,t.length),f=o;f<u;f++){var p=f+1;r.push("".concat(p===a?">":" "," ").concat(p,": ").concat(t[f]))}return r.join("\n")}(n.getShaderSource(a),f)}return o}function i9(n,a){var t=function(n){switch(n){case uf:return["Linear","( value )"];case Jn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(a);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function o9(n,a){var t;switch(a){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",a),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Py(n){return""!==n}function HF(n,a){var t=a.numSpotLightShadows+a.numSpotLightMaps-a.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,a.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,a.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,a.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,a.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,a.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,a.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,a.numPointLightShadows)}function VF(n,a){return n.replace(/NUM_CLIPPING_PLANES/g,a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,a.numClippingPlanes-a.numClipIntersection)}var l9=/^[ \t]*#include +<([\w\d./]+)>/gm;function dA(n){return n.replace(l9,c9)}function c9(n,a){var t=Tn[a];if(void 0===t)throw new Error("Can not resolve #include <"+a+">");return dA(t)}var d9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function WF(n){return n.replace(d9,f9)}function f9(n,a,t,r){for(var o="",u=parseInt(a);u<parseInt(t);u++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+u+" ]").replace(/UNROLLED_LOOP_INDEX/g,u);return o}function UF(n){var a="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?a+="\n#define HIGH_PRECISION":"mediump"===n.precision?a+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(a+="\n#define LOW_PRECISION"),a}function y9(n,a,t,r){var E,D,o=n.getContext(),u=t.defines,f=t.vertexShader,p=t.fragmentShader,v=function(n){var a="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?a="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?a="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(a="SHADOWMAP_TYPE_VSM"),a}(t),g=function(n){var a="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:a="ENVMAP_TYPE_CUBE";break;case 306:a="ENVMAP_TYPE_CUBE_UV"}return a}(t),y=function(n){var a="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(a="ENVMAP_MODE_REFRACTION"),a}(t),_=function(n){var a="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:a="ENVMAP_BLENDING_MULTIPLY";break;case 1:a="ENVMAP_BLENDING_MIX";break;case 2:a="ENVMAP_BLENDING_ADD"}return a}(t),C=function(n){var a=n.envMapCubeUVHeight;if(null===a)return null;var t=Math.log2(a)-2,r=1/a;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}(t),S=t.isWebGL2?"":function(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Py).join("\n")}(t),x=function(n){var a=[];for(var t in n){var r=n[t];!1!==r&&a.push("#define "+t+" "+r)}return a.join("\n")}(u),b=o.createProgram(),A=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?((E=[x].filter(Py).join("\n")).length>0&&(E+="\n"),(D=[S,x].filter(Py).join("\n")).length>0&&(D+="\n")):(E=[UF(t),"#define SHADER_NAME "+t.shaderName,x,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+y:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+v:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Py).join("\n"),D=[S,UF(t),"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.envMap?"#define "+y:"",t.envMap?"#define "+_:"",C?"#define CUBEUV_TEXEL_WIDTH "+C.texelWidth:"",C?"#define CUBEUV_TEXEL_HEIGHT "+C.texelHeight:"",C?"#define CUBEUV_MAX_MIP "+C.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+v:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Tn.tonemapping_pars_fragment:"",0!==t.toneMapping?o9("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Tn.encodings_pars_fragment,i9("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Py).join("\n")),f=VF(f=HF(f=dA(f),t),t),p=VF(p=HF(p=dA(p),t),t),f=WF(f),p=WF(p),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(A="#version 300 es\n",E=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+E,D=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+D);var G,ee,O=A+D+p,I=GF(o,35633,A+E+f),B=GF(o,35632,O);if(o.attachShader(b,I),o.attachShader(b,B),void 0!==t.index0AttributeName?o.bindAttribLocation(b,0,t.index0AttributeName):!0===t.morphTargets&&o.bindAttribLocation(b,0,"position"),o.linkProgram(b),n.debug.checkShaderErrors){var z=o.getProgramInfoLog(b).trim(),P=o.getShaderInfoLog(I).trim(),W=o.getShaderInfoLog(B).trim(),X=!0,ne=!0;if(!1===o.getProgramParameter(b,35714)){X=!1;var de=BF(o,I,"vertex"),ce=BF(o,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(b,35715)+"\n\nProgram Info Log: "+z+"\n"+de+"\n"+ce)}else""!==z?console.warn("THREE.WebGLProgram: Program Info Log:",z):(""===P||""===W)&&(ne=!1);ne&&(this.diagnostics={runnable:X,programLog:z,vertexShader:{log:P,prefix:E},fragmentShader:{log:W,prefix:D}})}return o.deleteShader(I),o.deleteShader(B),this.getUniforms=function(){return void 0===G&&(G=new QS(o,b)),G},this.getAttributes=function(){return void 0===ee&&(ee=function(n,a){for(var t={},r=n.getProgramParameter(a,35721),o=0;o<r;o++){var u=n.getActiveAttrib(a,o),f=u.name,p=1;35674===u.type&&(p=2),35675===u.type&&(p=3),35676===u.type&&(p=4),t[f]={type:u.type,location:n.getAttribLocation(a,f),locationSize:p}}return t}(o,b)),ee},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(b),this.program=void 0},this.name=t.shaderName,this.id=t9++,this.cacheKey=a,this.usedTimes=1,this.program=b,this.vertexShader=I,this.fragmentShader=B,this}var _9=0,C9=function(){function n(){k(this,n),this.shaderCache=new Map,this.materialCache=new Map}return j(n,[{key:"update",value:function(t){var o=t.fragmentShader,u=this._getShaderStage(t.vertexShader),f=this._getShaderStage(o),p=this._getShaderCacheForMaterial(t);return!1===p.has(u)&&(p.add(u),u.usedTimes++),!1===p.has(f)&&(p.add(f),f.usedTimes++),this}},{key:"remove",value:function(t){var u,o=Ot(this.materialCache.get(t));try{for(o.s();!(u=o.n()).done;){var f=u.value;f.usedTimes--,0===f.usedTimes&&this.shaderCache.delete(f.code)}}catch(p){o.e(p)}finally{o.f()}return this.materialCache.delete(t),this}},{key:"getVertexShaderID",value:function(t){return this._getShaderStage(t.vertexShader).id}},{key:"getFragmentShaderID",value:function(t){return this._getShaderStage(t.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(t){var r=this.materialCache,o=r.get(t);return void 0===o&&r.set(t,o=new Set),o}},{key:"_getShaderStage",value:function(t){var r=this.shaderCache,o=r.get(t);return void 0===o&&(o=new w9(t),r.set(t,o)),o}}]),n}(),w9=function n(a){k(this,n),this.id=_9++,this.code=a,this.usedTimes=0};function S9(n,a,t,r,o,u,f){var p=new KD,v=new C9,g=[],y=o.isWebGL2,_=o.logarithmicDepthBuffer,C=o.vertexTextures,S=o.precision,x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(P,W,X,ne,de){var ce=ne.fog,G=de.geometry,ie=(P.isMeshStandardMaterial?t:a).get(P.envMap||(P.isMeshStandardMaterial?ne.environment:null)),ue=ie&&306===ie.mapping?ie.image.height:null,se=x[P.type];null!==P.precision&&(S=o.getMaxPrecision(P.precision))!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",S,"instead.");var _e,Ge,be,Ae,ye=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,xe=void 0!==ye?ye.length:0,we=0;if(void 0!==G.morphAttributes.position&&(we=1),void 0!==G.morphAttributes.normal&&(we=2),void 0!==G.morphAttributes.color&&(we=3),se){var ge=Su[se];_e=ge.vertexShader,Ge=ge.fragmentShader}else _e=P.vertexShader,Ge=P.fragmentShader,v.update(P),be=v.getVertexShaderID(P),Ae=v.getFragmentShaderID(P);var Xe=n.getRenderTarget(),je=P.clearcoat>0,We=P.iridescence>0;return{isWebGL2:y,shaderID:se,shaderName:P.type,vertexShader:_e,fragmentShader:Ge,defines:P.defines,customVertexShaderID:be,customFragmentShaderID:Ae,isRawShaderMaterial:!0===P.isRawShaderMaterial,glslVersion:P.glslVersion,precision:S,instancing:!0===de.isInstancedMesh,instancingColor:!0===de.isInstancedMesh&&null!==de.instanceColor,supportsVertexTextures:C,outputEncoding:null===Xe?n.outputEncoding:!0===Xe.isXRRenderTarget?Xe.texture.encoding:uf,map:!!P.map,matcap:!!P.matcap,envMap:!!ie,envMapMode:ie&&ie.mapping,envMapCubeUVHeight:ue,lightMap:!!P.lightMap,aoMap:!!P.aoMap,emissiveMap:!!P.emissiveMap,bumpMap:!!P.bumpMap,normalMap:!!P.normalMap,objectSpaceNormalMap:1===P.normalMapType,tangentSpaceNormalMap:0===P.normalMapType,decodeVideoTexture:!!P.map&&!0===P.map.isVideoTexture&&P.map.encoding===Jn,clearcoat:je,clearcoatMap:je&&!!P.clearcoatMap,clearcoatRoughnessMap:je&&!!P.clearcoatRoughnessMap,clearcoatNormalMap:je&&!!P.clearcoatNormalMap,iridescence:We,iridescenceMap:We&&!!P.iridescenceMap,iridescenceThicknessMap:We&&!!P.iridescenceThicknessMap,displacementMap:!!P.displacementMap,roughnessMap:!!P.roughnessMap,metalnessMap:!!P.metalnessMap,specularMap:!!P.specularMap,specularIntensityMap:!!P.specularIntensityMap,specularColorMap:!!P.specularColorMap,opaque:!1===P.transparent&&1===P.blending,alphaMap:!!P.alphaMap,alphaTest:P.alphaTest>0,gradientMap:!!P.gradientMap,sheen:P.sheen>0,sheenColorMap:!!P.sheenColorMap,sheenRoughnessMap:!!P.sheenRoughnessMap,transmission:P.transmission>0,transmissionMap:!!P.transmissionMap,thicknessMap:!!P.thicknessMap,combine:P.combine,vertexTangents:!!P.normalMap&&!!G.attributes.tangent,vertexColors:P.vertexColors,vertexAlphas:!0===P.vertexColors&&!!G.attributes.color&&4===G.attributes.color.itemSize,vertexUvs:!!(P.map||P.bumpMap||P.normalMap||P.specularMap||P.alphaMap||P.emissiveMap||P.roughnessMap||P.metalnessMap||P.clearcoatMap||P.clearcoatRoughnessMap||P.clearcoatNormalMap||P.iridescenceMap||P.iridescenceThicknessMap||P.displacementMap||P.transmissionMap||P.thicknessMap||P.specularIntensityMap||P.specularColorMap||P.sheenColorMap||P.sheenRoughnessMap),uvsVertexOnly:!(P.map||P.bumpMap||P.normalMap||P.specularMap||P.alphaMap||P.emissiveMap||P.roughnessMap||P.metalnessMap||P.clearcoatNormalMap||P.iridescenceMap||P.iridescenceThicknessMap||P.transmission>0||P.transmissionMap||P.thicknessMap||P.specularIntensityMap||P.specularColorMap||P.sheen>0||P.sheenColorMap||P.sheenRoughnessMap||!P.displacementMap),fog:!!ce,useFog:!0===P.fog,fogExp2:ce&&ce.isFogExp2,flatShading:!!P.flatShading,sizeAttenuation:P.sizeAttenuation,logarithmicDepthBuffer:_,skinning:!0===de.isSkinnedMesh,morphTargets:void 0!==G.morphAttributes.position,morphNormals:void 0!==G.morphAttributes.normal,morphColors:void 0!==G.morphAttributes.color,morphTargetsCount:xe,morphTextureStride:we,numDirLights:W.directional.length,numPointLights:W.point.length,numSpotLights:W.spot.length,numSpotLightMaps:W.spotLightMap.length,numRectAreaLights:W.rectArea.length,numHemiLights:W.hemi.length,numDirLightShadows:W.directionalShadowMap.length,numPointLightShadows:W.pointShadowMap.length,numSpotLightShadows:W.spotShadowMap.length,numSpotLightShadowsWithMaps:W.numSpotLightShadowsWithMaps,numClippingPlanes:f.numPlanes,numClipIntersection:f.numIntersection,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&X.length>0,shadowMapType:n.shadowMap.type,toneMapping:P.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:P.premultipliedAlpha,doubleSided:2===P.side,flipSided:1===P.side,useDepthPacking:!!P.depthPacking,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionDerivatives:P.extensions&&P.extensions.derivatives,extensionFragDepth:P.extensions&&P.extensions.fragDepth,extensionDrawBuffers:P.extensions&&P.extensions.drawBuffers,extensionShaderTextureLOD:P.extensions&&P.extensions.shaderTextureLOD,rendererExtensionFragDepth:y||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:y||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:y||r.has("EXT_shader_texture_lod"),customProgramCacheKey:P.customProgramCacheKey()}},getProgramCacheKey:function(P){var W=[];if(P.shaderID?W.push(P.shaderID):(W.push(P.customVertexShaderID),W.push(P.customFragmentShaderID)),void 0!==P.defines)for(var X in P.defines)W.push(X),W.push(P.defines[X]);return!1===P.isRawShaderMaterial&&(function(P,W){P.push(W.precision),P.push(W.outputEncoding),P.push(W.envMapMode),P.push(W.envMapCubeUVHeight),P.push(W.combine),P.push(W.vertexUvs),P.push(W.fogExp2),P.push(W.sizeAttenuation),P.push(W.morphTargetsCount),P.push(W.morphAttributeCount),P.push(W.numDirLights),P.push(W.numPointLights),P.push(W.numSpotLights),P.push(W.numSpotLightMaps),P.push(W.numHemiLights),P.push(W.numRectAreaLights),P.push(W.numDirLightShadows),P.push(W.numPointLightShadows),P.push(W.numSpotLightShadows),P.push(W.numSpotLightShadowsWithMaps),P.push(W.shadowMapType),P.push(W.toneMapping),P.push(W.numClippingPlanes),P.push(W.numClipIntersection),P.push(W.depthPacking)}(W,P),function(P,W){p.disableAll(),W.isWebGL2&&p.enable(0),W.supportsVertexTextures&&p.enable(1),W.instancing&&p.enable(2),W.instancingColor&&p.enable(3),W.map&&p.enable(4),W.matcap&&p.enable(5),W.envMap&&p.enable(6),W.lightMap&&p.enable(7),W.aoMap&&p.enable(8),W.emissiveMap&&p.enable(9),W.bumpMap&&p.enable(10),W.normalMap&&p.enable(11),W.objectSpaceNormalMap&&p.enable(12),W.tangentSpaceNormalMap&&p.enable(13),W.clearcoat&&p.enable(14),W.clearcoatMap&&p.enable(15),W.clearcoatRoughnessMap&&p.enable(16),W.clearcoatNormalMap&&p.enable(17),W.iridescence&&p.enable(18),W.iridescenceMap&&p.enable(19),W.iridescenceThicknessMap&&p.enable(20),W.displacementMap&&p.enable(21),W.specularMap&&p.enable(22),W.roughnessMap&&p.enable(23),W.metalnessMap&&p.enable(24),W.gradientMap&&p.enable(25),W.alphaMap&&p.enable(26),W.alphaTest&&p.enable(27),W.vertexColors&&p.enable(28),W.vertexAlphas&&p.enable(29),W.vertexUvs&&p.enable(30),W.vertexTangents&&p.enable(31),W.uvsVertexOnly&&p.enable(32),P.push(p.mask),p.disableAll(),W.fog&&p.enable(0),W.useFog&&p.enable(1),W.flatShading&&p.enable(2),W.logarithmicDepthBuffer&&p.enable(3),W.skinning&&p.enable(4),W.morphTargets&&p.enable(5),W.morphNormals&&p.enable(6),W.morphColors&&p.enable(7),W.premultipliedAlpha&&p.enable(8),W.shadowMapEnabled&&p.enable(9),W.physicallyCorrectLights&&p.enable(10),W.doubleSided&&p.enable(11),W.flipSided&&p.enable(12),W.useDepthPacking&&p.enable(13),W.dithering&&p.enable(14),W.specularIntensityMap&&p.enable(15),W.specularColorMap&&p.enable(16),W.transmission&&p.enable(17),W.transmissionMap&&p.enable(18),W.thicknessMap&&p.enable(19),W.sheen&&p.enable(20),W.sheenColorMap&&p.enable(21),W.sheenRoughnessMap&&p.enable(22),W.decodeVideoTexture&&p.enable(23),W.opaque&&p.enable(24),P.push(p.mask)}(W,P),W.push(n.outputEncoding)),W.push(P.customProgramCacheKey),W.join()},getUniforms:function(P){var W=x[P.type];return W?u4.clone(Su[W].uniforms):P.uniforms},acquireProgram:function(P,W){for(var X,ne=0,de=g.length;ne<de;ne++){var ce=g[ne];if(ce.cacheKey===W){++(X=ce).usedTimes;break}}return void 0===X&&(X=new y9(n,W,P,u),g.push(X)),X},releaseProgram:function(P){if(0==--P.usedTimes){var W=g.indexOf(P);g[W]=g[g.length-1],g.pop(),P.destroy()}},releaseShaderCache:function(P){v.remove(P)},programs:g,dispose:function(){v.dispose()}}}function E9(){var n=new WeakMap;return{get:function(u){var f=n.get(u);return void 0===f&&n.set(u,f={}),f},remove:function(u){n.delete(u)},update:function(u,f,p){n.get(u)[f]=p},dispose:function(){n=new WeakMap}}}function b9(n,a){return n.groupOrder!==a.groupOrder?n.groupOrder-a.groupOrder:n.renderOrder!==a.renderOrder?n.renderOrder-a.renderOrder:n.material.id!==a.material.id?n.material.id-a.material.id:n.z!==a.z?n.z-a.z:n.id-a.id}function zF(n,a){return n.groupOrder!==a.groupOrder?n.groupOrder-a.groupOrder:n.renderOrder!==a.renderOrder?n.renderOrder-a.renderOrder:n.z!==a.z?a.z-n.z:n.id-a.id}function jF(){var n=[],a=0,t=[],r=[],o=[];function f(_,C,S,x,b,E){var D=n[a];return void 0===D?n[a]=D={id:_.id,object:_,geometry:C,material:S,groupOrder:x,renderOrder:_.renderOrder,z:b,group:E}:(D.id=_.id,D.object=_,D.geometry=C,D.material=S,D.groupOrder=x,D.renderOrder=_.renderOrder,D.z=b,D.group=E),a++,D}return{opaque:t,transmissive:r,transparent:o,init:function(){a=0,t.length=0,r.length=0,o.length=0},push:function(_,C,S,x,b,E){var D=f(_,C,S,x,b,E);S.transmission>0?r.push(D):!0===S.transparent?o.push(D):t.push(D)},unshift:function(_,C,S,x,b,E){var D=f(_,C,S,x,b,E);S.transmission>0?r.unshift(D):!0===S.transparent?o.unshift(D):t.unshift(D)},finish:function(){for(var _=a,C=n.length;_<C;_++){var S=n[_];if(null===S.id)break;S.id=null,S.object=null,S.geometry=null,S.material=null,S.group=null}},sort:function(_,C){t.length>1&&t.sort(_||b9),r.length>1&&r.sort(C||zF),o.length>1&&o.sort(C||zF)}}}function x9(){var n=new WeakMap;return{get:function(r,o){var f,u=n.get(r);return void 0===u?(f=new jF,n.set(r,[f])):o>=u.length?(f=new jF,u.push(f)):f=u[o],f},dispose:function(){n=new WeakMap}}}function R9(){var n={};return{get:function(t){if(void 0!==n[t.id])return n[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new J,color:new Yt};break;case"SpotLight":r={position:new J,direction:new J,color:new Yt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new J,color:new Yt,distance:0,decay:0};break;case"HemisphereLight":r={direction:new J,skyColor:new Yt,groundColor:new Yt};break;case"RectAreaLight":r={color:new Yt,position:new J,halfWidth:new J,halfHeight:new J}}return n[t.id]=r,r}}}var D9=0;function A9(n,a){return(a.castShadow?2:0)-(n.castShadow?2:0)+(a.map?1:0)-(n.map?1:0)}function M9(n,a){for(var t=new R9,r=function(){var n={};return{get:function(t){if(void 0!==n[t.id])return n[t.id];var r;switch(t.type){case"DirectionalLight":case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye,shadowCameraNear:1,shadowCameraFar:1e3}}return n[t.id]=r,r}}}(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},u=0;u<9;u++)o.probe.push(new J);var f=new J,p=new Sn,v=new Sn;return{setup:function(_,C){for(var S=0,x=0,b=0,E=0;E<9;E++)o.probe[E].set(0,0,0);var D=0,A=0,M=0,O=0,I=0,B=0,z=0,P=0,W=0,X=0;_.sort(A9);for(var ne=!0!==C?Math.PI:1,de=0,ce=_.length;de<ce;de++){var G=_[de],ee=G.color,ie=G.intensity,ue=G.distance,se=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)S+=ee.r*ie*ne,x+=ee.g*ie*ne,b+=ee.b*ie*ne;else if(G.isLightProbe)for(var ye=0;ye<9;ye++)o.probe[ye].addScaledVector(G.sh.coefficients[ye],ie);else if(G.isDirectionalLight){var xe=t.get(G);if(xe.color.copy(G.color).multiplyScalar(G.intensity*ne),G.castShadow){var we=G.shadow,_e=r.get(G);_e.shadowBias=we.bias,_e.shadowNormalBias=we.normalBias,_e.shadowRadius=we.radius,_e.shadowMapSize=we.mapSize,o.directionalShadow[D]=_e,o.directionalShadowMap[D]=se,o.directionalShadowMatrix[D]=G.shadow.matrix,B++}o.directional[D]=xe,D++}else if(G.isSpotLight){var Ge=t.get(G);Ge.position.setFromMatrixPosition(G.matrixWorld),Ge.color.copy(ee).multiplyScalar(ie*ne),Ge.distance=ue,Ge.coneCos=Math.cos(G.angle),Ge.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),Ge.decay=G.decay,o.spot[M]=Ge;var be=G.shadow;if(G.map&&(o.spotLightMap[W]=G.map,W++,be.updateMatrices(G),G.castShadow&&X++),o.spotLightMatrix[M]=be.matrix,G.castShadow){var Ae=r.get(G);Ae.shadowBias=be.bias,Ae.shadowNormalBias=be.normalBias,Ae.shadowRadius=be.radius,Ae.shadowMapSize=be.mapSize,o.spotShadow[M]=Ae,o.spotShadowMap[M]=se,P++}M++}else if(G.isRectAreaLight){var ge=t.get(G);ge.color.copy(ee).multiplyScalar(ie),ge.halfWidth.set(.5*G.width,0,0),ge.halfHeight.set(0,.5*G.height,0),o.rectArea[O]=ge,O++}else if(G.isPointLight){var Xe=t.get(G);if(Xe.color.copy(G.color).multiplyScalar(G.intensity*ne),Xe.distance=G.distance,Xe.decay=G.decay,G.castShadow){var ke=G.shadow,je=r.get(G);je.shadowBias=ke.bias,je.shadowNormalBias=ke.normalBias,je.shadowRadius=ke.radius,je.shadowMapSize=ke.mapSize,je.shadowCameraNear=ke.camera.near,je.shadowCameraFar=ke.camera.far,o.pointShadow[A]=je,o.pointShadowMap[A]=se,o.pointShadowMatrix[A]=G.shadow.matrix,z++}o.point[A]=Xe,A++}else if(G.isHemisphereLight){var We=t.get(G);We.skyColor.copy(G.color).multiplyScalar(ie*ne),We.groundColor.copy(G.groundColor).multiplyScalar(ie*ne),o.hemi[I]=We,I++}}O>0&&(a.isWebGL2||!0===n.has("OES_texture_float_linear")?(o.rectAreaLTC1=ct.LTC_FLOAT_1,o.rectAreaLTC2=ct.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=ct.LTC_HALF_1,o.rectAreaLTC2=ct.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=S,o.ambient[1]=x,o.ambient[2]=b;var ze=o.hash;(ze.directionalLength!==D||ze.pointLength!==A||ze.spotLength!==M||ze.rectAreaLength!==O||ze.hemiLength!==I||ze.numDirectionalShadows!==B||ze.numPointShadows!==z||ze.numSpotShadows!==P||ze.numSpotMaps!==W)&&(o.directional.length=D,o.spot.length=M,o.rectArea.length=O,o.point.length=A,o.hemi.length=I,o.directionalShadow.length=B,o.directionalShadowMap.length=B,o.pointShadow.length=z,o.pointShadowMap.length=z,o.spotShadow.length=P,o.spotShadowMap.length=P,o.directionalShadowMatrix.length=B,o.pointShadowMatrix.length=z,o.spotLightMatrix.length=P+W-X,o.spotLightMap.length=W,o.numSpotLightShadowsWithMaps=X,ze.directionalLength=D,ze.pointLength=A,ze.spotLength=M,ze.rectAreaLength=O,ze.hemiLength=I,ze.numDirectionalShadows=B,ze.numPointShadows=z,ze.numSpotShadows=P,ze.numSpotMaps=W,o.version=D9++)},setupView:function(_,C){for(var S=0,x=0,b=0,E=0,D=0,A=C.matrixWorldInverse,M=0,O=_.length;M<O;M++){var I=_[M];if(I.isDirectionalLight){var B=o.directional[S];B.direction.setFromMatrixPosition(I.matrixWorld),f.setFromMatrixPosition(I.target.matrixWorld),B.direction.sub(f),B.direction.transformDirection(A),S++}else if(I.isSpotLight){var z=o.spot[b];z.position.setFromMatrixPosition(I.matrixWorld),z.position.applyMatrix4(A),z.direction.setFromMatrixPosition(I.matrixWorld),f.setFromMatrixPosition(I.target.matrixWorld),z.direction.sub(f),z.direction.transformDirection(A),b++}else if(I.isRectAreaLight){var P=o.rectArea[E];P.position.setFromMatrixPosition(I.matrixWorld),P.position.applyMatrix4(A),v.identity(),p.copy(I.matrixWorld),p.premultiply(A),v.extractRotation(p),P.halfWidth.set(.5*I.width,0,0),P.halfHeight.set(0,.5*I.height,0),P.halfWidth.applyMatrix4(v),P.halfHeight.applyMatrix4(v),E++}else if(I.isPointLight){var W=o.point[x];W.position.setFromMatrixPosition(I.matrixWorld),W.position.applyMatrix4(A),x++}else if(I.isHemisphereLight){var X=o.hemi[D];X.direction.setFromMatrixPosition(I.matrixWorld),X.direction.transformDirection(A),D++}}},state:o}}function qF(n,a){var t=new M9(n,a),r=[],o=[];return{init:function(){r.length=0,o.length=0},state:{lightsArray:r,shadowsArray:o,lights:t},setupLights:function(_){t.setup(r,_)},setupLightsView:function(_){t.setupView(r,_)},pushLight:function(_){r.push(_)},pushShadow:function(_){o.push(_)}}}function O9(n,a){var t=new WeakMap;return{get:function(u){var v,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,p=t.get(u);return void 0===p?(v=new qF(n,a),t.set(u,[v])):f>=p.length?(v=new qF(n,a),p.push(v)):v=p[f],v},dispose:function(){t=new WeakMap}}}var P9=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this)).isMeshDepthMaterial=!0,o.type="MeshDepthMaterial",o.depthPacking=3200,o.map=null,o.alphaMap=null,o.displacementMap=null,o.displacementScale=1,o.displacementBias=0,o.wireframe=!1,o.wireframeLinewidth=1,o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return Ce(Ue(t.prototype),"copy",this).call(this,o),this.depthPacking=o.depthPacking,this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this}}]),t}(qs),I9=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this)).isMeshDistanceMaterial=!0,o.type="MeshDistanceMaterial",o.referencePosition=new J,o.nearDistance=1,o.farDistance=1e3,o.map=null,o.alphaMap=null,o.displacementMap=null,o.displacementScale=1,o.displacementBias=0,o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return Ce(Ue(t.prototype),"copy",this).call(this,o),this.referencePosition.copy(o.referencePosition),this.nearDistance=o.nearDistance,this.farDistance=o.farDistance,this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this}}]),t}(qs);function N9(n,a,t){var r=new iA,o=new Ye,u=new Ye,f=new wr,p=new P9({depthPacking:3201}),v=new I9,g={},y=t.maxTextureSize,_={0:1,1:0,2:2},C=new hf({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ye},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),S=C.clone();S.defines.HORIZONTAL_PASS=1;var x=new Dr;x.setAttribute("position",new ko(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var b=new Fr(x,C),E=this;function D(O,I){var B=a.update(b);C.defines.VSM_SAMPLES!==O.blurSamples&&(C.defines.VSM_SAMPLES=O.blurSamples,S.defines.VSM_SAMPLES=O.blurSamples,C.needsUpdate=!0,S.needsUpdate=!0),null===O.mapPass&&(O.mapPass=new cf(o.x,o.y)),C.uniforms.shadow_pass.value=O.map.texture,C.uniforms.resolution.value=O.mapSize,C.uniforms.radius.value=O.radius,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(I,null,B,C,b,null),S.uniforms.shadow_pass.value=O.mapPass.texture,S.uniforms.resolution.value=O.mapSize,S.uniforms.radius.value=O.radius,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(I,null,B,S,b,null)}function A(O,I,B,z,P,W){var X=null,ne=!0===B.isPointLight?O.customDistanceMaterial:O.customDepthMaterial;if(void 0!==ne)X=ne;else if(X=!0===B.isPointLight?v:p,n.localClippingEnabled&&!0===I.clipShadows&&Array.isArray(I.clippingPlanes)&&0!==I.clippingPlanes.length||I.displacementMap&&0!==I.displacementScale||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){var de=X.uuid,ce=I.uuid,G=g[de];void 0===G&&(g[de]=G={});var ee=G[ce];void 0===ee&&(ee=X.clone(),G[ce]=ee),X=ee}return X.visible=I.visible,X.wireframe=I.wireframe,X.side=3===W?null!==I.shadowSide?I.shadowSide:I.side:null!==I.shadowSide?I.shadowSide:_[I.side],X.alphaMap=I.alphaMap,X.alphaTest=I.alphaTest,X.map=I.map,X.clipShadows=I.clipShadows,X.clippingPlanes=I.clippingPlanes,X.clipIntersection=I.clipIntersection,X.displacementMap=I.displacementMap,X.displacementScale=I.displacementScale,X.displacementBias=I.displacementBias,X.wireframeLinewidth=I.wireframeLinewidth,X.linewidth=I.linewidth,!0===B.isPointLight&&!0===X.isMeshDistanceMaterial&&(X.referencePosition.setFromMatrixPosition(B.matrixWorld),X.nearDistance=z,X.farDistance=P),X}function M(O,I,B,z,P){if(!1!==O.visible){if(O.layers.test(I.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&3===P)&&(!O.frustumCulled||r.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,O.matrixWorld);var X=a.update(O),ne=O.material;if(Array.isArray(ne))for(var de=X.groups,ce=0,G=de.length;ce<G;ce++){var ee=de[ce],ie=ne[ee.materialIndex];if(ie&&ie.visible){var ue=A(O,ie,z,B.near,B.far,P);n.renderBufferDirect(B,null,X,ue,O,ee)}}else if(ne.visible){var se=A(O,ne,z,B.near,B.far,P);n.renderBufferDirect(B,null,X,se,O,null)}}for(var ye=O.children,xe=0,we=ye.length;xe<we;xe++)M(ye[xe],I,B,z,P)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(O,I,B){if(!1!==E.enabled&&(!1!==E.autoUpdate||!1!==E.needsUpdate)&&0!==O.length){var z=n.getRenderTarget(),P=n.getActiveCubeFace(),W=n.getActiveMipmapLevel(),X=n.state;X.setBlending(0),X.buffers.color.setClear(1,1,1,1),X.buffers.depth.setTest(!0),X.setScissorTest(!1);for(var ne=0,de=O.length;ne<de;ne++){var ce=O[ne],G=ce.shadow;if(void 0!==G){if(!1!==G.autoUpdate||!1!==G.needsUpdate){o.copy(G.mapSize);var ee=G.getFrameExtents();o.multiply(ee),u.copy(G.mapSize),(o.x>y||o.y>y)&&(o.x>y&&(u.x=Math.floor(y/ee.x),o.x=u.x*ee.x,G.mapSize.x=u.x),o.y>y&&(u.y=Math.floor(y/ee.y),o.y=u.y*ee.y,G.mapSize.y=u.y)),null===G.map&&(G.map=new cf(o.x,o.y,3!==this.type?{minFilter:Mi,magFilter:Mi}:{}),G.map.texture.name=ce.name+".shadowMap",G.camera.updateProjectionMatrix()),n.setRenderTarget(G.map),n.clear();for(var ue=G.getViewportCount(),se=0;se<ue;se++){var ye=G.getViewport(se);f.set(u.x*ye.x,u.y*ye.y,u.x*ye.z,u.y*ye.w),X.viewport(f),G.updateMatrices(ce,se),r=G.getFrustum(),M(I,B,G.camera,ce,this.type)}!0!==G.isPointLightShadow&&3===this.type&&D(G,B),G.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",ce,"has no shadow.")}E.needsUpdate=!1,n.setRenderTarget(z,P,W)}}}function k9(n,a,t){var r,o,u=t.isWebGL2,g=new function(){var he=!1,wt=new wr,at=null,St=new wr(0,0,0,0);return{setMask:function(bt){at!==bt&&!he&&(n.colorMask(bt,bt,bt,bt),at=bt)},setLocked:function(bt){he=bt},setClear:function(bt,cr,Zn,_r,qr){!0===qr&&(bt*=_r,cr*=_r,Zn*=_r),wt.set(bt,cr,Zn,_r),!1===St.equals(wt)&&(n.clearColor(bt,cr,Zn,_r),St.copy(wt))},reset:function(){he=!1,at=null,St.set(-1,0,0,0)}}},y=new function(){var he=!1,wt=null,at=null,St=null;return{setTest:function(bt){bt?je(2929):We(2929)},setMask:function(bt){wt!==bt&&!he&&(n.depthMask(bt),wt=bt)},setFunc:function(bt){if(at!==bt){switch(bt){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}at=bt}},setLocked:function(bt){he=bt},setClear:function(bt){St!==bt&&(n.clearDepth(bt),St=bt)},reset:function(){he=!1,wt=null,at=null,St=null}}},_=new function(){var he=!1,wt=null,at=null,St=null,Et=null,bt=null,cr=null,Zn=null,_r=null;return{setTest:function(nr){he||(nr?je(2960):We(2960))},setMask:function(nr){wt!==nr&&!he&&(n.stencilMask(nr),wt=nr)},setFunc:function(nr,is,os){(at!==nr||St!==is||Et!==os)&&(n.stencilFunc(nr,is,os),at=nr,St=is,Et=os)},setOp:function(nr,is,os){(bt!==nr||cr!==is||Zn!==os)&&(n.stencilOp(nr,is,os),bt=nr,cr=is,Zn=os)},setLocked:function(nr){he=nr},setClear:function(nr){_r!==nr&&(n.clearStencil(nr),_r=nr)},reset:function(){he=!1,wt=null,at=null,St=null,Et=null,bt=null,cr=null,Zn=null,_r=null}}},C=new WeakMap,S=new WeakMap,x={},b={},E=new WeakMap,D=[],A=null,M=!1,O=null,I=null,B=null,z=null,P=null,W=null,X=null,ne=!1,de=null,ce=null,G=null,ee=null,ie=null,ue=n.getParameter(35661),se=!1,ye=0,xe=n.getParameter(7938);-1!==xe.indexOf("WebGL")?(ye=parseFloat(/^WebGL (\d)/.exec(xe)[1]),se=ye>=1):-1!==xe.indexOf("OpenGL ES")&&(ye=parseFloat(/^OpenGL ES (\d)/.exec(xe)[1]),se=ye>=2);var we=null,_e={},Ge=n.getParameter(3088),be=n.getParameter(2978),Ae=(new wr).fromArray(Ge),ge=(new wr).fromArray(be);function Xe(he,wt,at){var St=new Uint8Array(4),Et=n.createTexture();n.bindTexture(he,Et),n.texParameteri(he,10241,9728),n.texParameteri(he,10240,9728);for(var bt=0;bt<at;bt++)n.texImage2D(wt+bt,0,6408,1,1,0,6408,5121,St);return Et}var ke={};function je(he){!0!==x[he]&&(n.enable(he),x[he]=!0)}function We(he){!1!==x[he]&&(n.disable(he),x[he]=!1)}ke[3553]=Xe(3553,3553,1),ke[34067]=Xe(34067,34069,6),g.setClear(0,0,0,1),y.setClear(1),_.setClear(0),je(2929),y.setFunc(3),hn(!1),Un(1),je(2884),Cn(0);var et=(bn(r={},100,32774),bn(r,101,32778),bn(r,102,32779),r);if(u)et[103]=32775,et[104]=32776;else{var Pt=a.get("EXT_blend_minmax");null!==Pt&&(et[103]=Pt.MIN_EXT,et[104]=Pt.MAX_EXT)}var En=(bn(o={},200,0),bn(o,201,1),bn(o,202,768),bn(o,204,770),bn(o,210,776),bn(o,208,774),bn(o,206,772),bn(o,203,769),bn(o,205,771),bn(o,209,775),bn(o,207,773),o);function Cn(he,wt,at,St,Et,bt,cr,Zn){if(0!==he){if(!1===M&&(je(3042),M=!0),5===he)Et=Et||wt,bt=bt||at,cr=cr||St,(wt!==I||Et!==P)&&(n.blendEquationSeparate(et[wt],et[Et]),I=wt,P=Et),(at!==B||St!==z||bt!==W||cr!==X)&&(n.blendFuncSeparate(En[at],En[St],En[bt],En[cr]),B=at,z=St,W=bt,X=cr),O=he,ne=!1;else if(he!==O||Zn!==ne){if((100!==I||100!==P)&&(n.blendEquation(32774),I=100,P=100),Zn)switch(he){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",he)}else switch(he){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",he)}B=null,z=null,W=null,X=null,O=he,ne=Zn}}else!0===M&&(We(3042),M=!1)}function hn(he){de!==he&&(n.frontFace(he?2304:2305),de=he)}function Un(he){0!==he?(je(2884),he!==ce&&n.cullFace(1===he?1029:2===he?1028:1032)):We(2884),ce=he}function vr(he,wt,at){he?(je(32823),(ee!==wt||ie!==at)&&(n.polygonOffset(wt,at),ee=wt,ie=at)):We(32823)}return{buffers:{color:g,depth:y,stencil:_},enable:je,disable:We,bindFramebuffer:function(he,wt){return b[he]!==wt&&(n.bindFramebuffer(he,wt),b[he]=wt,u&&(36009===he&&(b[36160]=wt),36160===he&&(b[36009]=wt)),!0)},drawBuffers:function(he,wt){var at=D,St=!1;if(he)if(void 0===(at=E.get(wt))&&E.set(wt,at=[]),he.isWebGLMultipleRenderTargets){var Et=he.texture;if(at.length!==Et.length||36064!==at[0]){for(var bt=0,cr=Et.length;bt<cr;bt++)at[bt]=36064+bt;at.length=Et.length,St=!0}}else 36064!==at[0]&&(at[0]=36064,St=!0);else 1029!==at[0]&&(at[0]=1029,St=!0);St&&(t.isWebGL2?n.drawBuffers(at):a.get("WEBGL_draw_buffers").drawBuffersWEBGL(at))},useProgram:function(he){return A!==he&&(n.useProgram(he),A=he,!0)},setBlending:Cn,setMaterial:function(he,wt){2===he.side?We(2884):je(2884);var at=1===he.side;wt&&(at=!at),hn(at),1===he.blending&&!1===he.transparent?Cn(0):Cn(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.premultipliedAlpha),y.setFunc(he.depthFunc),y.setTest(he.depthTest),y.setMask(he.depthWrite),g.setMask(he.colorWrite);var St=he.stencilWrite;_.setTest(St),St&&(_.setMask(he.stencilWriteMask),_.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),_.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),vr(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),!0===he.alphaToCoverage?je(32926):We(32926)},setFlipSided:hn,setCullFace:Un,setLineWidth:function(he){he!==G&&(se&&n.lineWidth(he),G=he)},setPolygonOffset:vr,setScissorTest:function(he){he?je(3089):We(3089)},activeTexture:function(he){void 0===he&&(he=33984+ue-1),we!==he&&(n.activeTexture(he),we=he)},bindTexture:function(he,wt,at){void 0===at&&(at=null===we?33984+ue-1:we);var St=_e[at];void 0===St&&(_e[at]=St={type:void 0,texture:void 0}),(St.type!==he||St.texture!==wt)&&(we!==at&&(n.activeTexture(at),we=at),n.bindTexture(he,wt||ke[he]),St.type=he,St.texture=wt)},unbindTexture:function(){var he=_e[we];void 0!==he&&void 0!==he.type&&(n.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)},compressedTexImage2D:function(){try{n.compressedTexImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},compressedTexImage3D:function(){try{n.compressedTexImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texImage2D:function(){try{n.texImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texImage3D:function(){try{n.texImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},updateUBOMapping:function(he,wt){var at=S.get(wt);void 0===at&&(at=new WeakMap,S.set(wt,at));var St=at.get(he);void 0===St&&(St=n.getUniformBlockIndex(wt,he.name),at.set(he,St))},uniformBlockBinding:function(he,wt){var St=S.get(wt).get(he);C.get(wt)!==St&&(n.uniformBlockBinding(wt,St,he.__bindingPointIndex),C.set(wt,St))},texStorage2D:function(){try{n.texStorage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texStorage3D:function(){try{n.texStorage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texSubImage2D:function(){try{n.texSubImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},texSubImage3D:function(){try{n.texSubImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},compressedTexSubImage2D:function(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},compressedTexSubImage3D:function(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(he){console.error("THREE.WebGLState:",he)}},scissor:function(he){!1===Ae.equals(he)&&(n.scissor(he.x,he.y,he.z,he.w),Ae.copy(he))},viewport:function(he){!1===ge.equals(he)&&(n.viewport(he.x,he.y,he.z,he.w),ge.copy(he))},reset:function(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===u&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),x={},we=null,_e={},b={},E=new WeakMap,D=[],A=null,M=!1,O=null,I=null,B=null,z=null,P=null,W=null,X=null,ne=!1,de=null,ce=null,G=null,ee=null,ie=null,Ae.set(0,0,n.canvas.width,n.canvas.height),ge.set(0,0,n.canvas.width,n.canvas.height),g.reset(),y.reset(),_.reset()}}}function G9(n,a,t,r,o,u,f){var p,v,D,g=o.isWebGL2,y=o.maxTextures,_=o.maxCubemapSize,C=o.maxTextureSize,S=o.maxSamples,x=a.has("WEBGL_multisampled_render_to_texture")?a.get("WEBGL_multisampled_render_to_texture"):null,b="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),E=new WeakMap,A=new WeakMap,M=!1;try{M="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(re){}function O(re,q){return M?new OffscreenCanvas(re,q):Ey("canvas")}function I(re,q,Oe,tt){var dt=1;if((re.width>tt||re.height>tt)&&(dt=tt/Math.max(re.width,re.height)),dt<1||!0===q){if("undefined"!=typeof HTMLImageElement&&re instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&re instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&re instanceof ImageBitmap){var ft=q?MS:Math.floor,Ht=ft(dt*re.width),kt=ft(dt*re.height);void 0===D&&(D=O(Ht,kt));var te=Oe?O(Ht,kt):D;return te.width=Ht,te.height=kt,te.getContext("2d").drawImage(re,0,0,Ht,kt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+re.width+"x"+re.height+") to ("+Ht+"x"+kt+")."),te}return"data"in re&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+re.width+"x"+re.height+")."),re}return re}function B(re){return FD(re.width)&&FD(re.height)}function P(re,q){return re.generateMipmaps&&q&&re.minFilter!==Mi&&re.minFilter!==Fo}function W(re){n.generateMipmap(re)}function X(re,q,Oe,tt){var dt=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===g)return q;if(null!==re){if(void 0!==n[re])return n[re];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+re+"'")}var ft=q;return 6403===q&&(5126===Oe&&(ft=33326),5131===Oe&&(ft=33325),5121===Oe&&(ft=33321)),33319===q&&(5126===Oe&&(ft=33328),5131===Oe&&(ft=33327),5121===Oe&&(ft=33323)),6408===q&&(5126===Oe&&(ft=34836),5131===Oe&&(ft=34842),5121===Oe&&(ft=tt===Jn&&!1===dt?35907:32856),32819===Oe&&(ft=32854),32820===Oe&&(ft=32855)),(33325===ft||33326===ft||33327===ft||33328===ft||34842===ft||34836===ft)&&a.get("EXT_color_buffer_float"),ft}function ne(re,q,Oe){return!0===P(re,Oe)||re.isFramebufferTexture&&re.minFilter!==Mi&&re.minFilter!==Fo?Math.log2(Math.max(q.width,q.height))+1:void 0!==re.mipmaps&&re.mipmaps.length>0?re.mipmaps.length:re.isCompressedTexture&&Array.isArray(re.image)?q.mipmaps.length:1}function de(re){return re===Mi||1004===re||1005===re?9728:9729}function ce(re){var q=re.target;q.removeEventListener("dispose",ce),function(re){var q=r.get(re);if(void 0!==q.__webglInit){var Oe=re.source,tt=A.get(Oe);if(tt){var dt=tt[q.__cacheKey];dt.usedTimes--,0===dt.usedTimes&&ie(re),0===Object.keys(tt).length&&A.delete(Oe)}r.remove(re)}}(q),q.isVideoTexture&&E.delete(q)}function G(re){var q=re.target;q.removeEventListener("dispose",G),function(re){var q=re.texture,Oe=r.get(re),tt=r.get(q);if(void 0!==tt.__webglTexture&&(n.deleteTexture(tt.__webglTexture),f.memory.textures--),re.depthTexture&&re.depthTexture.dispose(),re.isWebGLCubeRenderTarget)for(var dt=0;dt<6;dt++)n.deleteFramebuffer(Oe.__webglFramebuffer[dt]),Oe.__webglDepthbuffer&&n.deleteRenderbuffer(Oe.__webglDepthbuffer[dt]);else{if(n.deleteFramebuffer(Oe.__webglFramebuffer),Oe.__webglDepthbuffer&&n.deleteRenderbuffer(Oe.__webglDepthbuffer),Oe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Oe.__webglMultisampledFramebuffer),Oe.__webglColorRenderbuffer)for(var ft=0;ft<Oe.__webglColorRenderbuffer.length;ft++)Oe.__webglColorRenderbuffer[ft]&&n.deleteRenderbuffer(Oe.__webglColorRenderbuffer[ft]);Oe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Oe.__webglDepthRenderbuffer)}if(re.isWebGLMultipleRenderTargets)for(var Ht=0,kt=q.length;Ht<kt;Ht++){var te=r.get(q[Ht]);te.__webglTexture&&(n.deleteTexture(te.__webglTexture),f.memory.textures--),r.remove(q[Ht])}r.remove(q),r.remove(re)}(q)}function ie(re){var q=r.get(re);n.deleteTexture(q.__webglTexture),delete A.get(re.source)[q.__cacheKey],f.memory.textures--}var se=0;function _e(re,q){var Oe=r.get(re);if(re.isVideoTexture&&function(re){var q=f.render.frame;E.get(re)!==q&&(E.set(re,q),re.update())}(re),!1===re.isRenderTargetTexture&&re.version>0&&Oe.__version!==re.version){var tt=re.image;if(null===tt)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==tt.complete)return void We(Oe,re,q);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(3553,Oe.__webglTexture,33984+q)}var ge=(bn(p={},rf,10497),bn(p,wa,33071),bn(p,1002,33648),p),Xe=(bn(v={},Mi,9728),bn(v,1004,9984),bn(v,1005,9986),bn(v,Fo,9729),bn(v,1007,9985),bn(v,Tc,9987),v);function ke(re,q,Oe){if(Oe?(n.texParameteri(re,10242,ge[q.wrapS]),n.texParameteri(re,10243,ge[q.wrapT]),(32879===re||35866===re)&&n.texParameteri(re,32882,ge[q.wrapR]),n.texParameteri(re,10240,Xe[q.magFilter]),n.texParameteri(re,10241,Xe[q.minFilter])):(n.texParameteri(re,10242,33071),n.texParameteri(re,10243,33071),(32879===re||35866===re)&&n.texParameteri(re,32882,33071),(q.wrapS!==wa||q.wrapT!==wa)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(re,10240,de(q.magFilter)),n.texParameteri(re,10241,de(q.minFilter)),q.minFilter!==Mi&&q.minFilter!==Fo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===a.has("EXT_texture_filter_anisotropic")){var tt=a.get("EXT_texture_filter_anisotropic");if(q.magFilter===Mi||1005!==q.minFilter&&q.minFilter!==Tc||q.type===Dc&&!1===a.has("OES_texture_float_linear")||!1===g&&q.type===yy&&!1===a.has("OES_texture_half_float_linear"))return;(q.anisotropy>1||r.get(q).__currentAnisotropy)&&(n.texParameterf(re,tt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,o.getMaxAnisotropy())),r.get(q).__currentAnisotropy=q.anisotropy)}}function je(re,q){var Oe=!1;void 0===re.__webglInit&&(re.__webglInit=!0,q.addEventListener("dispose",ce));var tt=q.source,dt=A.get(tt);void 0===dt&&A.set(tt,dt={});var ft=function(re){var q=[];return q.push(re.wrapS),q.push(re.wrapT),q.push(re.wrapR||0),q.push(re.magFilter),q.push(re.minFilter),q.push(re.anisotropy),q.push(re.internalFormat),q.push(re.format),q.push(re.type),q.push(re.generateMipmaps),q.push(re.premultiplyAlpha),q.push(re.flipY),q.push(re.unpackAlignment),q.push(re.encoding),q.join()}(q);if(ft!==re.__cacheKey){void 0===dt[ft]&&(dt[ft]={texture:n.createTexture(),usedTimes:0},f.memory.textures++,Oe=!0),dt[ft].usedTimes++;var Ht=dt[re.__cacheKey];void 0!==Ht&&(dt[re.__cacheKey].usedTimes--,0===Ht.usedTimes&&ie(q)),re.__cacheKey=ft,re.__webglTexture=dt[ft].texture}return Oe}function We(re,q,Oe){var tt=3553;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(tt=35866),q.isData3DTexture&&(tt=32879);var dt=je(re,q),ft=q.source;t.bindTexture(tt,re.__webglTexture,33984+Oe);var Ht=r.get(ft);if(ft.version!==Ht.__version||!0===dt){t.activeTexture(33984+Oe),n.pixelStorei(37440,q.flipY),n.pixelStorei(37441,q.premultiplyAlpha),n.pixelStorei(3317,q.unpackAlignment),n.pixelStorei(37443,0);var kt=function(re){return!g&&(re.wrapS!==wa||re.wrapT!==wa||re.minFilter!==Mi&&re.minFilter!==Fo)}(q)&&!1===B(q.image),te=I(q.image,kt,!1,C),rt=B(te=gr(q,te))||g,At=u.convert(q.format,q.encoding),Ct=u.convert(q.type),pt=X(q.internalFormat,At,Ct,q.encoding,q.isVideoTexture);ke(tt,q,rt);var st,Xt=q.mipmaps,In=g&&!0!==q.isVideoTexture,jn=void 0===Ht.__version||!0===dt,qn=ne(q,te,rt);if(q.isDepthTexture)pt=6402,g?pt=q.type===Dc?36012:q.type===af?33190:q.type===Ih?35056:33189:q.type===Dc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),q.format===sf&&6402===pt&&1012!==q.type&&q.type!==af&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),q.type=af,Ct=u.convert(q.type)),q.format===Lh&&6402===pt&&(pt=34041,q.type!==Ih&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),q.type=Ih,Ct=u.convert(q.type))),jn&&(In?t.texStorage2D(3553,1,pt,te.width,te.height):t.texImage2D(3553,0,pt,te.width,te.height,0,At,Ct,null));else if(q.isDataTexture)if(Xt.length>0&&rt){In&&jn&&t.texStorage2D(3553,qn,pt,Xt[0].width,Xt[0].height);for(var he=0,wt=Xt.length;he<wt;he++)st=Xt[he],In?t.texSubImage2D(3553,he,0,0,st.width,st.height,At,Ct,st.data):t.texImage2D(3553,he,pt,st.width,st.height,0,At,Ct,st.data);q.generateMipmaps=!1}else In?(jn&&t.texStorage2D(3553,qn,pt,te.width,te.height),t.texSubImage2D(3553,0,0,0,te.width,te.height,At,Ct,te.data)):t.texImage2D(3553,0,pt,te.width,te.height,0,At,Ct,te.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){In&&jn&&t.texStorage3D(35866,qn,pt,Xt[0].width,Xt[0].height,te.depth);for(var at=0,St=Xt.length;at<St;at++)st=Xt[at],q.format!==Za?null!==At?In?t.compressedTexSubImage3D(35866,at,0,0,0,st.width,st.height,te.depth,At,st.data,0,0):t.compressedTexImage3D(35866,at,pt,st.width,st.height,te.depth,0,st.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):In?t.texSubImage3D(35866,at,0,0,0,st.width,st.height,te.depth,At,Ct,st.data):t.texImage3D(35866,at,pt,st.width,st.height,te.depth,0,At,Ct,st.data)}else{In&&jn&&t.texStorage2D(3553,qn,pt,Xt[0].width,Xt[0].height);for(var Et=0,bt=Xt.length;Et<bt;Et++)st=Xt[Et],q.format!==Za?null!==At?In?t.compressedTexSubImage2D(3553,Et,0,0,st.width,st.height,At,st.data):t.compressedTexImage2D(3553,Et,pt,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):In?t.texSubImage2D(3553,Et,0,0,st.width,st.height,At,Ct,st.data):t.texImage2D(3553,Et,pt,st.width,st.height,0,At,Ct,st.data)}else if(q.isDataArrayTexture)In?(jn&&t.texStorage3D(35866,qn,pt,te.width,te.height,te.depth),t.texSubImage3D(35866,0,0,0,0,te.width,te.height,te.depth,At,Ct,te.data)):t.texImage3D(35866,0,pt,te.width,te.height,te.depth,0,At,Ct,te.data);else if(q.isData3DTexture)In?(jn&&t.texStorage3D(32879,qn,pt,te.width,te.height,te.depth),t.texSubImage3D(32879,0,0,0,0,te.width,te.height,te.depth,At,Ct,te.data)):t.texImage3D(32879,0,pt,te.width,te.height,te.depth,0,At,Ct,te.data);else if(q.isFramebufferTexture){if(jn)if(In)t.texStorage2D(3553,qn,pt,te.width,te.height);else for(var cr=te.width,Zn=te.height,_r=0;_r<qn;_r++)t.texImage2D(3553,_r,pt,cr,Zn,0,At,Ct,null),cr>>=1,Zn>>=1}else if(Xt.length>0&&rt){In&&jn&&t.texStorage2D(3553,qn,pt,Xt[0].width,Xt[0].height);for(var qr=0,nr=Xt.length;qr<nr;qr++)st=Xt[qr],In?t.texSubImage2D(3553,qr,0,0,At,Ct,st):t.texImage2D(3553,qr,pt,At,Ct,st);q.generateMipmaps=!1}else In?(jn&&t.texStorage2D(3553,qn,pt,te.width,te.height),t.texSubImage2D(3553,0,0,0,At,Ct,te)):t.texImage2D(3553,0,pt,At,Ct,te);P(q,rt)&&W(tt),Ht.__version=ft.version,q.onUpdate&&q.onUpdate(q)}re.__version=q.version}function ot(re,q,Oe,tt,dt){var ft=u.convert(Oe.format,Oe.encoding),Ht=u.convert(Oe.type),kt=X(Oe.internalFormat,ft,Ht,Oe.encoding);r.get(q).__hasExternalTextures||(32879===dt||35866===dt?t.texImage3D(dt,0,kt,q.width,q.height,q.depth,0,ft,Ht,null):t.texImage2D(dt,0,kt,q.width,q.height,0,ft,Ht,null)),t.bindFramebuffer(36160,re),jt(q)?x.framebufferTexture2DMultisampleEXT(36160,tt,dt,r.get(Oe).__webglTexture,0,Un(q)):(3553===dt||dt>=34069&&dt<=34074)&&n.framebufferTexture2D(36160,tt,dt,r.get(Oe).__webglTexture,0),t.bindFramebuffer(36160,null)}function Vt(re,q,Oe){if(n.bindRenderbuffer(36161,re),q.depthBuffer&&!q.stencilBuffer){var tt=33189;if(Oe||jt(q)){var dt=q.depthTexture;dt&&dt.isDepthTexture&&(dt.type===Dc?tt=36012:dt.type===af&&(tt=33190));var ft=Un(q);jt(q)?x.renderbufferStorageMultisampleEXT(36161,ft,tt,q.width,q.height):n.renderbufferStorageMultisample(36161,ft,tt,q.width,q.height)}else n.renderbufferStorage(36161,tt,q.width,q.height);n.framebufferRenderbuffer(36160,36096,36161,re)}else if(q.depthBuffer&&q.stencilBuffer){var Ht=Un(q);Oe&&!1===jt(q)?n.renderbufferStorageMultisample(36161,Ht,35056,q.width,q.height):jt(q)?x.renderbufferStorageMultisampleEXT(36161,Ht,35056,q.width,q.height):n.renderbufferStorage(36161,34041,q.width,q.height),n.framebufferRenderbuffer(36160,33306,36161,re)}else for(var kt=!0===q.isWebGLMultipleRenderTargets?q.texture:[q.texture],te=0;te<kt.length;te++){var rt=kt[te],At=u.convert(rt.format,rt.encoding),Ct=u.convert(rt.type),pt=X(rt.internalFormat,At,Ct,rt.encoding),st=Un(q);Oe&&!1===jt(q)?n.renderbufferStorageMultisample(36161,st,pt,q.width,q.height):jt(q)?x.renderbufferStorageMultisampleEXT(36161,st,pt,q.width,q.height):n.renderbufferStorage(36161,pt,q.width,q.height)}n.bindRenderbuffer(36161,null)}function Pt(re){var q=r.get(re),Oe=!0===re.isWebGLCubeRenderTarget;if(re.depthTexture&&!q.__autoAllocateDepthBuffer){if(Oe)throw new Error("target.depthTexture not supported in Cube render targets");!function(re,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,re),!q.depthTexture||!q.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(q.depthTexture).__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),_e(q.depthTexture,0);var tt=r.get(q.depthTexture).__webglTexture,dt=Un(q);if(q.depthTexture.format===sf)jt(q)?x.framebufferTexture2DMultisampleEXT(36160,36096,3553,tt,0,dt):n.framebufferTexture2D(36160,36096,3553,tt,0);else{if(q.depthTexture.format!==Lh)throw new Error("Unknown depthTexture format");jt(q)?x.framebufferTexture2DMultisampleEXT(36160,33306,3553,tt,0,dt):n.framebufferTexture2D(36160,33306,3553,tt,0)}}(q.__webglFramebuffer,re)}else if(Oe){q.__webglDepthbuffer=[];for(var tt=0;tt<6;tt++)t.bindFramebuffer(36160,q.__webglFramebuffer[tt]),q.__webglDepthbuffer[tt]=n.createRenderbuffer(),Vt(q.__webglDepthbuffer[tt],re,!1)}else t.bindFramebuffer(36160,q.__webglFramebuffer),q.__webglDepthbuffer=n.createRenderbuffer(),Vt(q.__webglDepthbuffer,re,!1);t.bindFramebuffer(36160,null)}function Un(re){return Math.min(S,re.samples)}function jt(re){var q=r.get(re);return g&&re.samples>0&&!0===a.has("WEBGL_multisampled_render_to_texture")&&!1!==q.__useRenderToTexture}function gr(re,q){var Oe=re.encoding,tt=re.format,dt=re.type;return!0===re.isCompressedTexture||!0===re.isVideoTexture||1035===re.format||Oe!==uf&&(Oe===Jn?!1===g?!0===a.has("EXT_sRGB")&&tt===Za?(re.format=1035,re.minFilter=Fo,re.generateMipmaps=!1):q=nF.sRGBToLinear(q):(tt!==Za||dt!==of)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Oe)),q}this.allocateTextureUnit=function(){var re=se;return re>=y&&console.warn("THREE.WebGLTextures: Trying to use "+re+" texture units while this GPU supports only "+y),se+=1,re},this.resetTextureUnits=function(){se=0},this.setTexture2D=_e,this.setTexture2DArray=function(re,q){var Oe=r.get(re);re.version>0&&Oe.__version!==re.version?We(Oe,re,q):t.bindTexture(35866,Oe.__webglTexture,33984+q)},this.setTexture3D=function(re,q){var Oe=r.get(re);re.version>0&&Oe.__version!==re.version?We(Oe,re,q):t.bindTexture(32879,Oe.__webglTexture,33984+q)},this.setTextureCube=function(re,q){var Oe=r.get(re);re.version>0&&Oe.__version!==re.version?function(re,q,Oe){if(6===q.image.length){var tt=je(re,q),dt=q.source;t.bindTexture(34067,re.__webglTexture,33984+Oe);var ft=r.get(dt);if(dt.version!==ft.__version||!0===tt){t.activeTexture(33984+Oe),n.pixelStorei(37440,q.flipY),n.pixelStorei(37441,q.premultiplyAlpha),n.pixelStorei(3317,q.unpackAlignment),n.pixelStorei(37443,0);for(var Ht=q.isCompressedTexture||q.image[0].isCompressedTexture,kt=q.image[0]&&q.image[0].isDataTexture,te=[],rt=0;rt<6;rt++)te[rt]=Ht||kt?kt?q.image[rt].image:q.image[rt]:I(q.image[rt],!1,!0,_),te[rt]=gr(q,te[rt]);var he,At=te[0],Ct=B(At)||g,pt=u.convert(q.format,q.encoding),st=u.convert(q.type),Xt=X(q.internalFormat,pt,st,q.encoding),In=g&&!0!==q.isVideoTexture,jn=void 0===ft.__version||!0===tt,qn=ne(q,At,Ct);if(ke(34067,q,Ct),Ht){In&&jn&&t.texStorage2D(34067,qn,Xt,At.width,At.height);for(var wt=0;wt<6;wt++){he=te[wt].mipmaps;for(var at=0;at<he.length;at++){var St=he[at];q.format!==Za?null!==pt?In?t.compressedTexSubImage2D(34069+wt,at,0,0,St.width,St.height,pt,St.data):t.compressedTexImage2D(34069+wt,at,Xt,St.width,St.height,0,St.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):In?t.texSubImage2D(34069+wt,at,0,0,St.width,St.height,pt,st,St.data):t.texImage2D(34069+wt,at,Xt,St.width,St.height,0,pt,st,St.data)}}}else{he=q.mipmaps,In&&jn&&(he.length>0&&qn++,t.texStorage2D(34067,qn,Xt,te[0].width,te[0].height));for(var Et=0;Et<6;Et++)if(kt){In?t.texSubImage2D(34069+Et,0,0,0,te[Et].width,te[Et].height,pt,st,te[Et].data):t.texImage2D(34069+Et,0,Xt,te[Et].width,te[Et].height,0,pt,st,te[Et].data);for(var bt=0;bt<he.length;bt++){var Zn=he[bt].image[Et].image;In?t.texSubImage2D(34069+Et,bt+1,0,0,Zn.width,Zn.height,pt,st,Zn.data):t.texImage2D(34069+Et,bt+1,Xt,Zn.width,Zn.height,0,pt,st,Zn.data)}}else{In?t.texSubImage2D(34069+Et,0,0,0,pt,st,te[Et]):t.texImage2D(34069+Et,0,Xt,pt,st,te[Et]);for(var _r=0;_r<he.length;_r++){var qr=he[_r];In?t.texSubImage2D(34069+Et,_r+1,0,0,pt,st,qr.image[Et]):t.texImage2D(34069+Et,_r+1,Xt,pt,st,qr.image[Et])}}}P(q,Ct)&&W(34067),ft.__version=dt.version,q.onUpdate&&q.onUpdate(q)}re.__version=q.version}}(Oe,re,q):t.bindTexture(34067,Oe.__webglTexture,33984+q)},this.rebindTextures=function(re,q,Oe){var tt=r.get(re);void 0!==q&&ot(tt.__webglFramebuffer,re,re.texture,36064,3553),void 0!==Oe&&Pt(re)},this.setupRenderTarget=function(re){var q=re.texture,Oe=r.get(re),tt=r.get(q);re.addEventListener("dispose",G),!0!==re.isWebGLMultipleRenderTargets&&(void 0===tt.__webglTexture&&(tt.__webglTexture=n.createTexture()),tt.__version=q.version,f.memory.textures++);var dt=!0===re.isWebGLCubeRenderTarget,ft=!0===re.isWebGLMultipleRenderTargets,Ht=B(re)||g;if(dt){Oe.__webglFramebuffer=[];for(var kt=0;kt<6;kt++)Oe.__webglFramebuffer[kt]=n.createFramebuffer()}else{if(Oe.__webglFramebuffer=n.createFramebuffer(),ft)if(o.drawBuffers)for(var te=re.texture,rt=0,At=te.length;rt<At;rt++){var Ct=r.get(te[rt]);void 0===Ct.__webglTexture&&(Ct.__webglTexture=n.createTexture(),f.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(g&&re.samples>0&&!1===jt(re)){var pt=ft?q:[q];Oe.__webglMultisampledFramebuffer=n.createFramebuffer(),Oe.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Oe.__webglMultisampledFramebuffer);for(var st=0;st<pt.length;st++){var Xt=pt[st];Oe.__webglColorRenderbuffer[st]=n.createRenderbuffer(),n.bindRenderbuffer(36161,Oe.__webglColorRenderbuffer[st]);var In=u.convert(Xt.format,Xt.encoding),jn=u.convert(Xt.type),qn=X(Xt.internalFormat,In,jn,Xt.encoding,!0===re.isXRRenderTarget),he=Un(re);n.renderbufferStorageMultisample(36161,he,qn,re.width,re.height),n.framebufferRenderbuffer(36160,36064+st,36161,Oe.__webglColorRenderbuffer[st])}n.bindRenderbuffer(36161,null),re.depthBuffer&&(Oe.__webglDepthRenderbuffer=n.createRenderbuffer(),Vt(Oe.__webglDepthRenderbuffer,re,!0)),t.bindFramebuffer(36160,null)}}if(dt){t.bindTexture(34067,tt.__webglTexture),ke(34067,q,Ht);for(var wt=0;wt<6;wt++)ot(Oe.__webglFramebuffer[wt],re,q,36064,34069+wt);P(q,Ht)&&W(34067),t.unbindTexture()}else if(ft){for(var at=re.texture,St=0,Et=at.length;St<Et;St++){var bt=at[St],cr=r.get(bt);t.bindTexture(3553,cr.__webglTexture),ke(3553,bt,Ht),ot(Oe.__webglFramebuffer,re,bt,36064+St,3553),P(bt,Ht)&&W(3553)}t.unbindTexture()}else{var Zn=3553;(re.isWebGL3DRenderTarget||re.isWebGLArrayRenderTarget)&&(g?Zn=re.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Zn,tt.__webglTexture),ke(Zn,q,Ht),ot(Oe.__webglFramebuffer,re,q,36064,Zn),P(q,Ht)&&W(Zn),t.unbindTexture()}re.depthBuffer&&Pt(re)},this.updateRenderTargetMipmap=function(re){for(var q=B(re)||g,Oe=!0===re.isWebGLMultipleRenderTargets?re.texture:[re.texture],tt=0,dt=Oe.length;tt<dt;tt++){var ft=Oe[tt];if(P(ft,q)){var Ht=re.isWebGLCubeRenderTarget?34067:3553,kt=r.get(ft).__webglTexture;t.bindTexture(Ht,kt),W(Ht),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function(re){if(g&&re.samples>0&&!1===jt(re)){var q=re.isWebGLMultipleRenderTargets?re.texture:[re.texture],Oe=re.width,tt=re.height,dt=16384,ft=[],Ht=re.stencilBuffer?33306:36096,kt=r.get(re),te=!0===re.isWebGLMultipleRenderTargets;if(te)for(var rt=0;rt<q.length;rt++)t.bindFramebuffer(36160,kt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+rt,36161,null),t.bindFramebuffer(36160,kt.__webglFramebuffer),n.framebufferTexture2D(36009,36064+rt,3553,null,0);t.bindFramebuffer(36008,kt.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,kt.__webglFramebuffer);for(var At=0;At<q.length;At++){ft.push(36064+At),re.depthBuffer&&ft.push(Ht);var Ct=void 0!==kt.__ignoreDepthValues&&kt.__ignoreDepthValues;if(!1===Ct&&(re.depthBuffer&&(dt|=256),re.stencilBuffer&&(dt|=1024)),te&&n.framebufferRenderbuffer(36008,36064,36161,kt.__webglColorRenderbuffer[At]),!0===Ct&&(n.invalidateFramebuffer(36008,[Ht]),n.invalidateFramebuffer(36009,[Ht])),te){var pt=r.get(q[At]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,pt,0)}n.blitFramebuffer(0,0,Oe,tt,0,0,Oe,tt,dt,9728),b&&n.invalidateFramebuffer(36008,ft)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),te)for(var st=0;st<q.length;st++){t.bindFramebuffer(36160,kt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+st,36161,kt.__webglColorRenderbuffer[st]);var Xt=r.get(q[st]).__webglTexture;t.bindFramebuffer(36160,kt.__webglFramebuffer),n.framebufferTexture2D(36009,36064+st,3553,Xt,0)}t.bindFramebuffer(36009,kt.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Pt,this.setupFrameBufferTexture=ot,this.useMultisampledRTT=jt}function B9(n,a,t){var r=t.isWebGL2;return{convert:function(u){var p,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(u===of)return 5121;if(1017===u)return 32819;if(1018===u)return 32820;if(1010===u)return 5120;if(1011===u)return 5122;if(1012===u)return 5123;if(1013===u)return 5124;if(u===af)return 5125;if(u===Dc)return 5126;if(u===yy)return r?5131:null!==(p=a.get("OES_texture_half_float"))?p.HALF_FLOAT_OES:null;if(1021===u)return 6406;if(u===Za)return 6408;if(1024===u)return 6409;if(1025===u)return 6410;if(u===sf)return 6402;if(u===Lh)return 34041;if(1022===u)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===u)return null!==(p=a.get("EXT_sRGB"))?p.SRGB_ALPHA_EXT:null;if(1028===u)return 6403;if(1029===u)return 36244;if(1030===u)return 33319;if(1031===u)return 33320;if(1033===u)return 36249;if(u===bD||u===xD||u===RD||u===TD)if(f===Jn){if(null===(p=a.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(u===bD)return p.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(u===xD)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(u===RD)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(u===TD)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(p=a.get("WEBGL_compressed_texture_s3tc")))return null;if(u===bD)return p.COMPRESSED_RGB_S3TC_DXT1_EXT;if(u===xD)return p.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(u===RD)return p.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(u===TD)return p.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(u===TL||u===DL||u===AL||u===ML){if(null===(p=a.get("WEBGL_compressed_texture_pvrtc")))return null;if(u===TL)return p.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(u===DL)return p.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(u===AL)return p.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(u===ML)return p.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===u)return null!==(p=a.get("WEBGL_compressed_texture_etc1"))?p.COMPRESSED_RGB_ETC1_WEBGL:null;if(u===OL||u===PL){if(null===(p=a.get("WEBGL_compressed_texture_etc")))return null;if(u===OL)return f===Jn?p.COMPRESSED_SRGB8_ETC2:p.COMPRESSED_RGB8_ETC2;if(u===PL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:p.COMPRESSED_RGBA8_ETC2_EAC}if(u===IL||u===LL||u===FL||u===NL||u===kL||u===GL||u===BL||u===HL||u===VL||u===WL||u===UL||u===zL||u===jL||u===qL){if(null===(p=a.get("WEBGL_compressed_texture_astc")))return null;if(u===IL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:p.COMPRESSED_RGBA_ASTC_4x4_KHR;if(u===LL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:p.COMPRESSED_RGBA_ASTC_5x4_KHR;if(u===FL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:p.COMPRESSED_RGBA_ASTC_5x5_KHR;if(u===NL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:p.COMPRESSED_RGBA_ASTC_6x5_KHR;if(u===kL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:p.COMPRESSED_RGBA_ASTC_6x6_KHR;if(u===GL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:p.COMPRESSED_RGBA_ASTC_8x5_KHR;if(u===BL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:p.COMPRESSED_RGBA_ASTC_8x6_KHR;if(u===HL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:p.COMPRESSED_RGBA_ASTC_8x8_KHR;if(u===VL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:p.COMPRESSED_RGBA_ASTC_10x5_KHR;if(u===WL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:p.COMPRESSED_RGBA_ASTC_10x6_KHR;if(u===UL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:p.COMPRESSED_RGBA_ASTC_10x8_KHR;if(u===zL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:p.COMPRESSED_RGBA_ASTC_10x10_KHR;if(u===jL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:p.COMPRESSED_RGBA_ASTC_12x10_KHR;if(u===qL)return f===Jn?p.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:p.COMPRESSED_RGBA_ASTC_12x12_KHR}if(u===KL){if(null===(p=a.get("EXT_texture_compression_bptc")))return null;if(u===KL)return f===Jn?p.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:p.COMPRESSED_RGBA_BPTC_UNORM_EXT}return u===Ih?r?34042:null!==(p=a.get("WEBGL_depth_texture"))?p.UNSIGNED_INT_24_8_WEBGL:null:void 0!==n[u]?n[u]:null}}}var H9=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return k(this,t),(r=a.call(this)).isArrayCamera=!0,r.cameras=o,r}return t}(ti),Ic=function(n){ve(t,n);var a=me(t);function t(){var r;return k(this,t),(r=a.call(this)).isGroup=!0,r.type="Group",r}return t}(_o),V9={type:"move"},fA=function(){function n(){k(this,n),this._targetRay=null,this._grip=null,this._hand=null}return j(n,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new Ic,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new Ic,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new Ic,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}},{key:"dispatchEvent",value:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}},{key:"connect",value:function(t){if(t&&t.hand){var r=this._hand;if(r){var u,o=Ot(t.hand.values());try{for(o.s();!(u=o.n()).done;)this._getHandJoint(r,u.value)}catch(p){o.e(p)}finally{o.f()}}}return this.dispatchEvent({type:"connected",data:t}),this}},{key:"disconnect",value:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(t,r,o){var u=null,f=null,p=null,v=this._targetRay,g=this._grip,y=this._hand;if(t&&"visible-blurred"!==r.session.visibilityState){if(y&&t.hand){p=!0;var C,_=Ot(t.hand.values());try{for(_.s();!(C=_.n()).done;){var S=C.value,x=r.getJointPose(S,o),b=this._getHandJoint(y,S);null!==x&&(b.matrix.fromArray(x.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.jointRadius=x.radius),b.visible=null!==x}}catch(I){_.e(I)}finally{_.f()}var A=y.joints["index-finger-tip"].position.distanceTo(y.joints["thumb-tip"].position);y.inputState.pinching&&A>.025?(y.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!y.inputState.pinching&&A<=.015&&(y.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==g&&t.gripSpace&&null!==(f=r.getPose(t.gripSpace,o))&&(g.matrix.fromArray(f.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),f.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(f.linearVelocity)):g.hasLinearVelocity=!1,f.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(f.angularVelocity)):g.hasAngularVelocity=!1);null!==v&&(null===(u=r.getPose(t.targetRaySpace,o))&&null!==f&&(u=f),null!==u&&(v.matrix.fromArray(u.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),u.linearVelocity?(v.hasLinearVelocity=!0,v.linearVelocity.copy(u.linearVelocity)):v.hasLinearVelocity=!1,u.angularVelocity?(v.hasAngularVelocity=!0,v.angularVelocity.copy(u.angularVelocity)):v.hasAngularVelocity=!1,this.dispatchEvent(V9)))}return null!==v&&(v.visible=null!==u),null!==g&&(g.visible=null!==f),null!==y&&(y.visible=null!==p),this}},{key:"_getHandJoint",value:function(t,r){if(void 0===t.joints[r.jointName]){var o=new Ic;o.matrixAutoUpdate=!1,o.visible=!1,t.joints[r.jointName]=o,t.add(o)}return t.joints[r.jointName]}}]),n}(),W9=function(n){ve(t,n);var a=me(t);function t(r,o,u,f,p,v,g,y,_,C){var S;if(k(this,t),(C=void 0!==C?C:sf)!==sf&&C!==Lh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===u&&C===sf&&(u=af),void 0===u&&C===Lh&&(u=Ih),(S=a.call(this,null,f,p,v,g,y,C,u,_)).isDepthTexture=!0,S.image={width:r,height:o},S.magFilter=void 0!==g?g:Mi,S.minFilter=void 0!==y?y:Mi,S.flipY=!1,S.generateMipmaps=!1,S}return t}(wu),U9=function(n){ve(t,n);var a=me(t);function t(r,o){var u;k(this,t);var f=Kn(u=a.call(this)),p=null,v=1,g=null,y="local-floor",_=null,C=null,S=null,x=null,b=null,E=null,D=o.getContextAttributes(),A=null,M=null,O=[],I=[],B=new Set,z=new Map,P=new ti;P.layers.enable(1),P.viewport=new wr;var W=new ti;W.layers.enable(2),W.viewport=new wr;var X=[P,W],ne=new H9;ne.layers.enable(1),ne.layers.enable(2);var de=null,ce=null;function G(be){var Ae=I.indexOf(be.inputSource);if(-1!==Ae){var ge=O[Ae];void 0!==ge&&ge.dispatchEvent({type:be.type,data:be.inputSource})}}function ee(){p.removeEventListener("select",G),p.removeEventListener("selectstart",G),p.removeEventListener("selectend",G),p.removeEventListener("squeeze",G),p.removeEventListener("squeezestart",G),p.removeEventListener("squeezeend",G),p.removeEventListener("end",ee),p.removeEventListener("inputsourceschange",ie);for(var be=0;be<O.length;be++){var Ae=I[be];null!==Ae&&(I[be]=null,O[be].disconnect(Ae))}de=null,ce=null,r.setRenderTarget(A),b=null,x=null,S=null,p=null,M=null,Ge.stop(),f.isPresenting=!1,f.dispatchEvent({type:"sessionend"})}function ie(be){for(var Ae=0;Ae<be.removed.length;Ae++){var ge=be.removed[Ae],Xe=I.indexOf(ge);Xe>=0&&(I[Xe]=null,O[Xe].disconnect(ge))}for(var ke=0;ke<be.added.length;ke++){var je=be.added[ke],We=I.indexOf(je);if(-1===We){for(var ze=0;ze<O.length;ze++){if(ze>=I.length){I.push(je),We=ze;break}if(null===I[ze]){I[ze]=je,We=ze;break}}if(-1===We)break}var ot=O[We];ot&&ot.connect(je)}}u.cameraAutoUpdate=!0,u.enabled=!1,u.isPresenting=!1,u.getController=function(be){var Ae=O[be];return void 0===Ae&&(Ae=new fA,O[be]=Ae),Ae.getTargetRaySpace()},u.getControllerGrip=function(be){var Ae=O[be];return void 0===Ae&&(Ae=new fA,O[be]=Ae),Ae.getGripSpace()},u.getHand=function(be){var Ae=O[be];return void 0===Ae&&(Ae=new fA,O[be]=Ae),Ae.getHandSpace()},u.setFramebufferScaleFactor=function(be){v=be,!0===f.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},u.setReferenceSpaceType=function(be){y=be,!0===f.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},u.getReferenceSpace=function(){return _||g},u.setReferenceSpace=function(be){_=be},u.getBaseLayer=function(){return null!==x?x:b},u.getBinding=function(){return S},u.getFrame=function(){return E},u.getSession=function(){return p},u.setSession=function(){var be=function(n){return function(){var a=this,t=arguments;return new Promise(function(r,o){var u=n.apply(a,t);function f(v){vL(u,r,o,f,p,"next",v)}function p(v){vL(u,r,o,f,p,"throw",v)}f(void 0)})}}(mi.mark(function Ae(ge){var ke,je,We,ze;return mi.wrap(function(et){for(;;)switch(et.prev=et.next){case 0:if(null===(p=ge)){et.next=25;break}if(A=r.getRenderTarget(),p.addEventListener("select",G),p.addEventListener("selectstart",G),p.addEventListener("selectend",G),p.addEventListener("squeeze",G),p.addEventListener("squeezestart",G),p.addEventListener("squeezeend",G),p.addEventListener("end",ee),p.addEventListener("inputsourceschange",ie),!0===D.xrCompatible){et.next=14;break}return et.next=14,o.makeXRCompatible();case 14:return void 0===p.renderState.layers||!1===r.capabilities.isWebGL2?(b=new XRWebGLLayer(p,o,{antialias:void 0!==p.renderState.layers||D.antialias,alpha:D.alpha,depth:D.depth,stencil:D.stencil,framebufferScaleFactor:v}),p.updateRenderState({baseLayer:b}),M=new cf(b.framebufferWidth,b.framebufferHeight,{format:Za,type:of,encoding:r.outputEncoding,stencilBuffer:D.stencil})):(ke=null,je=null,We=null,D.depth&&(We=D.stencil?35056:33190,ke=D.stencil?Lh:sf,je=D.stencil?Ih:af),ze={colorFormat:32856,depthFormat:We,scaleFactor:v},S=new XRWebGLBinding(p,o),x=S.createProjectionLayer(ze),p.updateRenderState({layers:[x]}),M=new cf(x.textureWidth,x.textureHeight,{format:Za,type:of,depthTexture:new W9(x.textureWidth,x.textureHeight,je,void 0,void 0,void 0,void 0,void 0,void 0,ke),stencilBuffer:D.stencil,encoding:r.outputEncoding,samples:D.antialias?4:0}),r.properties.get(M).__ignoreDepthValues=x.ignoreDepthValues),M.isXRRenderTarget=!0,this.setFoveation(1),_=null,et.next=20,p.requestReferenceSpace(y);case 20:g=et.sent,Ge.setContext(p),Ge.start(),f.isPresenting=!0,f.dispatchEvent({type:"sessionstart"});case 25:case"end":return et.stop()}},Ae,this)}));return function(Ae){return be.apply(this,arguments)}}();var ue=new J,se=new J;function xe(be,Ae){null===Ae?be.matrixWorld.copy(be.matrix):be.matrixWorld.multiplyMatrices(Ae.matrixWorld,be.matrix),be.matrixWorldInverse.copy(be.matrixWorld).invert()}u.updateCamera=function(be){if(null!==p){ne.near=W.near=P.near=be.near,ne.far=W.far=P.far=be.far,(de!==ne.near||ce!==ne.far)&&(p.updateRenderState({depthNear:ne.near,depthFar:ne.far}),de=ne.near,ce=ne.far);var Ae=be.parent,ge=ne.cameras;xe(ne,Ae);for(var Xe=0;Xe<ge.length;Xe++)xe(ge[Xe],Ae);ne.matrixWorld.decompose(ne.position,ne.quaternion,ne.scale),be.matrix.copy(ne.matrix),be.matrix.decompose(be.position,be.quaternion,be.scale);for(var ke=be.children,je=0,We=ke.length;je<We;je++)ke[je].updateMatrixWorld(!0);2===ge.length?function(be,Ae,ge){ue.setFromMatrixPosition(Ae.matrixWorld),se.setFromMatrixPosition(ge.matrixWorld);var Xe=ue.distanceTo(se),ke=Ae.projectionMatrix.elements,je=ge.projectionMatrix.elements,We=ke[14]/(ke[10]-1),ze=ke[14]/(ke[10]+1),ot=(ke[9]+1)/ke[5],Vt=(ke[9]-1)/ke[5],et=(ke[8]-1)/ke[0],Pt=(je[8]+1)/je[0],En=We*et,Cn=We*Pt,xt=Xe/(-et+Pt),hn=xt*-et;Ae.matrixWorld.decompose(be.position,be.quaternion,be.scale),be.translateX(hn),be.translateZ(xt),be.matrixWorld.compose(be.position,be.quaternion,be.scale),be.matrixWorldInverse.copy(be.matrixWorld).invert();var Un=We+xt,jt=ze+xt;be.projectionMatrix.makePerspective(En-hn,Cn+(Xe-hn),ot*ze/jt*Un,Vt*ze/jt*Un,Un,jt)}(ne,P,W):ne.projectionMatrix.copy(P.projectionMatrix)}},u.getCamera=function(){return ne},u.getFoveation=function(){return null!==x?x.fixedFoveation:null!==b?b.fixedFoveation:void 0},u.setFoveation=function(be){null!==x&&(x.fixedFoveation=be),null!==b&&void 0!==b.fixedFoveation&&(b.fixedFoveation=be)},u.getPlanes=function(){return B};var we=null,Ge=new CF;return Ge.setAnimationLoop(function(be,Ae){if(C=Ae.getViewerPose(_||g),E=Ae,null!==C){var ge=C.views;null!==b&&(r.setRenderTargetFramebuffer(M,b.framebuffer),r.setRenderTarget(M));var Xe=!1;ge.length!==ne.cameras.length&&(ne.cameras.length=0,Xe=!0);for(var ke=0;ke<ge.length;ke++){var je=ge[ke],We=null;if(null!==b)We=b.getViewport(je);else{var ze=S.getViewSubImage(x,je);We=ze.viewport,0===ke&&(r.setRenderTargetTextures(M,ze.colorTexture,x.ignoreDepthValues?void 0:ze.depthStencilTexture),r.setRenderTarget(M))}var ot=X[ke];void 0===ot&&((ot=new ti).layers.enable(ke),ot.viewport=new wr,X[ke]=ot),ot.matrix.fromArray(je.transform.matrix),ot.projectionMatrix.fromArray(je.projectionMatrix),ot.viewport.set(We.x,We.y,We.width,We.height),0===ke&&ne.matrix.copy(ot.matrix),!0===Xe&&ne.cameras.push(ot)}}for(var Vt=0;Vt<O.length;Vt++){var et=I[Vt],Pt=O[Vt];null!==et&&void 0!==Pt&&Pt.update(et,Ae,_||g)}if(we&&we(be,Ae),Ae.detectedPlanes){f.dispatchEvent({type:"planesdetected",data:Ae.detectedPlanes});var xt,En=null,Cn=Ot(B);try{for(Cn.s();!(xt=Cn.n()).done;){var hn=xt.value;Ae.detectedPlanes.has(hn)||(null===En&&(En=[]),En.push(hn))}}catch(tt){Cn.e(tt)}finally{Cn.f()}if(null!==En){var jt,Un=Ot(En);try{for(Un.s();!(jt=Un.n()).done;){var vr=jt.value;B.delete(vr),z.delete(vr),f.dispatchEvent({type:"planeremoved",data:vr})}}catch(tt){Un.e(tt)}finally{Un.f()}}var re,gr=Ot(Ae.detectedPlanes);try{for(gr.s();!(re=gr.n()).done;){var q=re.value;if(B.has(q)){var Oe=z.get(q);q.lastChangedTime>Oe&&(z.set(q,q.lastChangedTime),f.dispatchEvent({type:"planechanged",data:q}))}else B.add(q),z.set(q,Ae.lastChangedTime),f.dispatchEvent({type:"planeadded",data:q})}}catch(tt){gr.e(tt)}finally{gr.f()}}E=null}),u.setAnimationLoop=function(be){we=be},u.dispose=function(){},u}return t}(sl);function z9(n,a){function o(b,E){b.opacity.value=E.opacity,E.color&&b.diffuse.value.copy(E.color),E.emissive&&b.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(b.map.value=E.map),E.alphaMap&&(b.alphaMap.value=E.alphaMap),E.bumpMap&&(b.bumpMap.value=E.bumpMap,b.bumpScale.value=E.bumpScale,1===E.side&&(b.bumpScale.value*=-1)),E.displacementMap&&(b.displacementMap.value=E.displacementMap,b.displacementScale.value=E.displacementScale,b.displacementBias.value=E.displacementBias),E.emissiveMap&&(b.emissiveMap.value=E.emissiveMap),E.normalMap&&(b.normalMap.value=E.normalMap,b.normalScale.value.copy(E.normalScale),1===E.side&&b.normalScale.value.negate()),E.specularMap&&(b.specularMap.value=E.specularMap),E.alphaTest>0&&(b.alphaTest.value=E.alphaTest);var M,O,D=a.get(E).envMap;if(D&&(b.envMap.value=D,b.flipEnvMap.value=D.isCubeTexture&&!1===D.isRenderTargetTexture?-1:1,b.reflectivity.value=E.reflectivity,b.ior.value=E.ior,b.refractionRatio.value=E.refractionRatio),E.lightMap){b.lightMap.value=E.lightMap;var A=!0!==n.physicallyCorrectLights?Math.PI:1;b.lightMapIntensity.value=E.lightMapIntensity*A}E.aoMap&&(b.aoMap.value=E.aoMap,b.aoMapIntensity.value=E.aoMapIntensity),E.map?M=E.map:E.specularMap?M=E.specularMap:E.displacementMap?M=E.displacementMap:E.normalMap?M=E.normalMap:E.bumpMap?M=E.bumpMap:E.roughnessMap?M=E.roughnessMap:E.metalnessMap?M=E.metalnessMap:E.alphaMap?M=E.alphaMap:E.emissiveMap?M=E.emissiveMap:E.clearcoatMap?M=E.clearcoatMap:E.clearcoatNormalMap?M=E.clearcoatNormalMap:E.clearcoatRoughnessMap?M=E.clearcoatRoughnessMap:E.iridescenceMap?M=E.iridescenceMap:E.iridescenceThicknessMap?M=E.iridescenceThicknessMap:E.specularIntensityMap?M=E.specularIntensityMap:E.specularColorMap?M=E.specularColorMap:E.transmissionMap?M=E.transmissionMap:E.thicknessMap?M=E.thicknessMap:E.sheenColorMap?M=E.sheenColorMap:E.sheenRoughnessMap&&(M=E.sheenRoughnessMap),void 0!==M&&(M.isWebGLRenderTarget&&(M=M.texture),!0===M.matrixAutoUpdate&&M.updateMatrix(),b.uvTransform.value.copy(M.matrix)),E.aoMap?O=E.aoMap:E.lightMap&&(O=E.lightMap),void 0!==O&&(O.isWebGLRenderTarget&&(O=O.texture),!0===O.matrixAutoUpdate&&O.updateMatrix(),b.uv2Transform.value.copy(O.matrix))}return{refreshFogUniforms:function(b,E){E.color.getRGB(b.fogColor.value,yF(n)),E.isFog?(b.fogNear.value=E.near,b.fogFar.value=E.far):E.isFogExp2&&(b.fogDensity.value=E.density)},refreshMaterialUniforms:function(b,E,D,A,M){E.isMeshBasicMaterial||E.isMeshLambertMaterial?o(b,E):E.isMeshToonMaterial?(o(b,E),function(b,E){E.gradientMap&&(b.gradientMap.value=E.gradientMap)}(b,E)):E.isMeshPhongMaterial?(o(b,E),function(b,E){b.specular.value.copy(E.specular),b.shininess.value=Math.max(E.shininess,1e-4)}(b,E)):E.isMeshStandardMaterial?(o(b,E),function(b,E){b.roughness.value=E.roughness,b.metalness.value=E.metalness,E.roughnessMap&&(b.roughnessMap.value=E.roughnessMap),E.metalnessMap&&(b.metalnessMap.value=E.metalnessMap),a.get(E).envMap&&(b.envMapIntensity.value=E.envMapIntensity)}(b,E),E.isMeshPhysicalMaterial&&function(b,E,D){b.ior.value=E.ior,E.sheen>0&&(b.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),b.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(b.sheenColorMap.value=E.sheenColorMap),E.sheenRoughnessMap&&(b.sheenRoughnessMap.value=E.sheenRoughnessMap)),E.clearcoat>0&&(b.clearcoat.value=E.clearcoat,b.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(b.clearcoatMap.value=E.clearcoatMap),E.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap),E.clearcoatNormalMap&&(b.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),b.clearcoatNormalMap.value=E.clearcoatNormalMap,1===E.side&&b.clearcoatNormalScale.value.negate())),E.iridescence>0&&(b.iridescence.value=E.iridescence,b.iridescenceIOR.value=E.iridescenceIOR,b.iridescenceThicknessMinimum.value=E.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=E.iridescenceThicknessRange[1],E.iridescenceMap&&(b.iridescenceMap.value=E.iridescenceMap),E.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=E.iridescenceThicknessMap)),E.transmission>0&&(b.transmission.value=E.transmission,b.transmissionSamplerMap.value=D.texture,b.transmissionSamplerSize.value.set(D.width,D.height),E.transmissionMap&&(b.transmissionMap.value=E.transmissionMap),b.thickness.value=E.thickness,E.thicknessMap&&(b.thicknessMap.value=E.thicknessMap),b.attenuationDistance.value=E.attenuationDistance,b.attenuationColor.value.copy(E.attenuationColor)),b.specularIntensity.value=E.specularIntensity,b.specularColor.value.copy(E.specularColor),E.specularIntensityMap&&(b.specularIntensityMap.value=E.specularIntensityMap),E.specularColorMap&&(b.specularColorMap.value=E.specularColorMap)}(b,E,M)):E.isMeshMatcapMaterial?(o(b,E),function(b,E){E.matcap&&(b.matcap.value=E.matcap)}(b,E)):E.isMeshDepthMaterial?o(b,E):E.isMeshDistanceMaterial?(o(b,E),function(b,E){b.referencePosition.value.copy(E.referencePosition),b.nearDistance.value=E.nearDistance,b.farDistance.value=E.farDistance}(b,E)):E.isMeshNormalMaterial?o(b,E):E.isLineBasicMaterial?(function(b,E){b.diffuse.value.copy(E.color),b.opacity.value=E.opacity}(b,E),E.isLineDashedMaterial&&function(b,E){b.dashSize.value=E.dashSize,b.totalSize.value=E.dashSize+E.gapSize,b.scale.value=E.scale}(b,E)):E.isPointsMaterial?function(b,E,D,A){var M;b.diffuse.value.copy(E.color),b.opacity.value=E.opacity,b.size.value=E.size*D,b.scale.value=.5*A,E.map&&(b.map.value=E.map),E.alphaMap&&(b.alphaMap.value=E.alphaMap),E.alphaTest>0&&(b.alphaTest.value=E.alphaTest),E.map?M=E.map:E.alphaMap&&(M=E.alphaMap),void 0!==M&&(!0===M.matrixAutoUpdate&&M.updateMatrix(),b.uvTransform.value.copy(M.matrix))}(b,E,D,A):E.isSpriteMaterial?function(b,E){var D;b.diffuse.value.copy(E.color),b.opacity.value=E.opacity,b.rotation.value=E.rotation,E.map&&(b.map.value=E.map),E.alphaMap&&(b.alphaMap.value=E.alphaMap),E.alphaTest>0&&(b.alphaTest.value=E.alphaTest),E.map?D=E.map:E.alphaMap&&(D=E.alphaMap),void 0!==D&&(!0===D.matrixAutoUpdate&&D.updateMatrix(),b.uvTransform.value.copy(D.matrix))}(b,E):E.isShadowMaterial?(b.color.value.copy(E.color),b.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}}}function j9(n,a,t,r){var o={},u={},f=[],p=t.isWebGL2?n.getParameter(35375):0;function S(A,M,O){var I=A.value;if(void 0===O[M]){if("number"==typeof I)O[M]=I;else{for(var B=Array.isArray(I)?I:[I],z=[],P=0;P<B.length;P++)z.push(B[P].clone());O[M]=z}return!0}if("number"==typeof I){if(O[M]!==I)return O[M]=I,!0}else for(var W=Array.isArray(O[M])?O[M]:[O[M]],X=Array.isArray(I)?I:[I],ne=0;ne<W.length;ne++){var de=W[ne];if(!1===de.equals(X[ne]))return de.copy(X[ne]),!0}return!1}function b(A){var M={boundary:0,storage:0};return"number"==typeof A?(M.boundary=4,M.storage=4):A.isVector2?(M.boundary=8,M.storage=8):A.isVector3||A.isColor?(M.boundary=16,M.storage=12):A.isVector4?(M.boundary=16,M.storage=16):A.isMatrix3?(M.boundary=48,M.storage=48):A.isMatrix4?(M.boundary=64,M.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),M}function E(A){var M=A.target;M.removeEventListener("dispose",E);var O=f.indexOf(M.__bindingPointIndex);f.splice(O,1),n.deleteBuffer(o[M.id]),delete o[M.id],delete u[M.id]}return{bind:function(A,M){r.uniformBlockBinding(A,M.program)},update:function(A,M){var O=o[A.id];void 0===O&&(function(A){for(var M=A.uniforms,O=0,B=0,z=0,P=M.length;z<P;z++){for(var W=M[z],X={boundary:0,storage:0},ne=Array.isArray(W.value)?W.value:[W.value],de=0,ce=ne.length;de<ce;de++){var ee=b(ne[de]);X.boundary+=ee.boundary,X.storage+=ee.storage}W.__data=new Float32Array(X.storage/Float32Array.BYTES_PER_ELEMENT),W.__offset=O,z>0&&0!=(B=O%16)&&16-B-X.boundary<0&&(W.__offset=O+=16-B),O+=X.storage}(B=O%16)>0&&(O+=16-B),A.__size=O,A.__cache={}}(A),O=function(A){var M=function(){for(var A=0;A<p;A++)if(-1===f.indexOf(A))return f.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();A.__bindingPointIndex=M;var O=n.createBuffer(),I=A.__size,B=A.usage;return n.bindBuffer(35345,O),n.bufferData(35345,I,B),n.bindBuffer(35345,null),n.bindBufferBase(35345,M,O),O}(A),o[A.id]=O,A.addEventListener("dispose",E)),r.updateUBOMapping(A,M.program);var B=a.render.frame;u[A.id]!==B&&(function(A){var O=A.uniforms,I=A.__cache;n.bindBuffer(35345,o[A.id]);for(var B=0,z=O.length;B<z;B++){var P=O[B];if(!0===S(P,B,I)){for(var W=P.__offset,X=Array.isArray(P.value)?P.value:[P.value],ne=0,de=0;de<X.length;de++){var ce=X[de],G=b(ce);"number"==typeof ce?(P.__data[0]=ce,n.bufferSubData(35345,W+ne,P.__data)):ce.isMatrix3?(P.__data[0]=ce.elements[0],P.__data[1]=ce.elements[1],P.__data[2]=ce.elements[2],P.__data[3]=ce.elements[0],P.__data[4]=ce.elements[3],P.__data[5]=ce.elements[4],P.__data[6]=ce.elements[5],P.__data[7]=ce.elements[0],P.__data[8]=ce.elements[6],P.__data[9]=ce.elements[7],P.__data[10]=ce.elements[8],P.__data[11]=ce.elements[0]):(ce.toArray(P.__data,ne),ne+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,W,P.__data)}}n.bindBuffer(35345,null)}(A),u[A.id]=B)},dispose:function(){for(var A in o)n.deleteBuffer(o[A]);f=[],o={},u={}}}}function q9(){var n=Ey("canvas");return n.style.display="block",n}function Lc(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var y,a=void 0!==n.canvas?n.canvas:q9(),t=void 0!==n.context?n.context:null,r=void 0===n.depth||n.depth,o=void 0===n.stencil||n.stencil,u=void 0!==n.antialias&&n.antialias,f=void 0===n.premultipliedAlpha||n.premultipliedAlpha,p=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,v=void 0!==n.powerPreference?n.powerPreference:"default",g=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;y=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;var _=null,C=null,S=[],x=[];this.domElement=a,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=uf,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var b=this,E=!1,D=0,A=0,M=null,O=-1,I=null,B=new wr,z=new wr,P=null,W=a.width,X=a.height,ne=1,de=null,ce=null,G=new wr(0,0,W,X),ee=new wr(0,0,W,X),ie=!1,ue=new iA,se=!1,ye=!1,xe=null,we=new Sn,_e=new Ye,Ge=new J,be={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ae(){return null===M?ne:1}var We,ze,ot,Vt,et,Pt,En,Cn,xt,hn,Un,jt,vr,gr,re,q,Oe,tt,dt,ft,Ht,kt,te,rt,ge=t;function Xe(Z,De){for(var Ne=0;Ne<Z.length;Ne++){var Le=a.getContext(Z[Ne],De);if(null!==Le)return Le}return null}try{var ke={alpha:!0,depth:r,stencil:o,antialias:u,premultipliedAlpha:f,preserveDrawingBuffer:p,powerPreference:v,failIfMajorPerformanceCaveat:g};if("setAttribute"in a&&a.setAttribute("data-engine","three.js r".concat(_D)),a.addEventListener("webglcontextlost",pt,!1),a.addEventListener("webglcontextrestored",st,!1),a.addEventListener("webglcontextcreationerror",Xt,!1),null===ge){var je=["webgl2","webgl","experimental-webgl"];if(!0===b.isWebGL1Renderer&&je.shift(),null===(ge=Xe(je,ke)))throw Xe(je)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ge.getShaderPrecisionFormat&&(ge.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Z){throw console.error("THREE.WebGLRenderer: "+Z.message),Z}function At(){We=new r8(ge),ze=new J6(ge,We,n),We.init(ze),kt=new B9(ge,We,ze),ot=new k9(ge,We,ze),Vt=new a8,et=new E9,Pt=new G9(ge,We,ot,et,ze,kt,Vt),En=new Q6(b),Cn=new n8(b),xt=new v4(ge,ze),te=new $6(ge,We,xt,ze),hn=new i8(ge,xt,Vt,te),Un=new c8(ge,hn,xt,Vt),dt=new l8(ge,ze,Pt),q=new Z6(et),jt=new S9(b,En,Cn,We,ze,te,q),vr=new z9(b,et),gr=new x9,re=new O9(We,ze),tt=new Y6(b,En,Cn,ot,Un,y,f),Oe=new N9(b,Un,ze),rt=new j9(ge,Vt,ze,ot),ft=new X6(ge,We,Vt,ze),Ht=new o8(ge,We,Vt,ze),Vt.programs=jt.programs,b.capabilities=ze,b.extensions=We,b.properties=et,b.renderLists=gr,b.shadowMap=Oe,b.state=ot,b.info=Vt}At();var Ct=new U9(b,ge);function pt(Z){Z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function st(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;var Z=Vt.autoReset,De=Oe.enabled,Ne=Oe.autoUpdate,Se=Oe.needsUpdate,Le=Oe.type;At(),Vt.autoReset=Z,Oe.enabled=De,Oe.autoUpdate=Ne,Oe.needsUpdate=Se,Oe.type=Le}function Xt(Z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Z.statusMessage)}function In(Z){var De=Z.target;De.removeEventListener("dispose",In),jn(De)}function jn(Z){qn(Z),et.remove(Z)}function qn(Z){var De=et.get(Z).programs;void 0!==De&&(De.forEach(function(Ne){jt.releaseProgram(Ne)}),Z.isShaderMaterial&&jt.releaseShaderCache(Z))}this.xr=Ct,this.getContext=function(){return ge},this.getContextAttributes=function(){return ge.getContextAttributes()},this.forceContextLoss=function(){var Z=We.get("WEBGL_lose_context");Z&&Z.loseContext()},this.forceContextRestore=function(){var Z=We.get("WEBGL_lose_context");Z&&Z.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(Z){void 0!==Z&&(ne=Z,this.setSize(W,X,!1))},this.getSize=function(Z){return Z.set(W,X)},this.setSize=function(Z,De,Ne){Ct.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=Z,X=De,a.width=Math.floor(Z*ne),a.height=Math.floor(De*ne),!1!==Ne&&(a.style.width=Z+"px",a.style.height=De+"px"),this.setViewport(0,0,Z,De))},this.getDrawingBufferSize=function(Z){return Z.set(W*ne,X*ne).floor()},this.setDrawingBufferSize=function(Z,De,Ne){W=Z,X=De,ne=Ne,a.width=Math.floor(Z*Ne),a.height=Math.floor(De*Ne),this.setViewport(0,0,Z,De)},this.getCurrentViewport=function(Z){return Z.copy(B)},this.getViewport=function(Z){return Z.copy(G)},this.setViewport=function(Z,De,Ne,Se){Z.isVector4?G.set(Z.x,Z.y,Z.z,Z.w):G.set(Z,De,Ne,Se),ot.viewport(B.copy(G).multiplyScalar(ne).floor())},this.getScissor=function(Z){return Z.copy(ee)},this.setScissor=function(Z,De,Ne,Se){Z.isVector4?ee.set(Z.x,Z.y,Z.z,Z.w):ee.set(Z,De,Ne,Se),ot.scissor(z.copy(ee).multiplyScalar(ne).floor())},this.getScissorTest=function(){return ie},this.setScissorTest=function(Z){ot.setScissorTest(ie=Z)},this.setOpaqueSort=function(Z){de=Z},this.setTransparentSort=function(Z){ce=Z},this.getClearColor=function(Z){return Z.copy(tt.getClearColor())},this.setClearColor=function(){tt.setClearColor.apply(tt,arguments)},this.getClearAlpha=function(){return tt.getClearAlpha()},this.setClearAlpha=function(){tt.setClearAlpha.apply(tt,arguments)},this.clear=function(){var Z=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],De=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Ne=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],Se=0;Z&&(Se|=16384),De&&(Se|=256),Ne&&(Se|=1024),ge.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){a.removeEventListener("webglcontextlost",pt,!1),a.removeEventListener("webglcontextrestored",st,!1),a.removeEventListener("webglcontextcreationerror",Xt,!1),gr.dispose(),re.dispose(),et.dispose(),En.dispose(),Cn.dispose(),Un.dispose(),te.dispose(),rt.dispose(),jt.dispose(),Ct.dispose(),Ct.removeEventListener("sessionstart",at),Ct.removeEventListener("sessionend",St),xe&&(xe.dispose(),xe=null),Et.stop()},this.renderBufferDirect=function(Z,De,Ne,Se,Le,Bt){null===De&&(De=be);var Ln=Le.isMesh&&Le.matrixWorld.determinant()<0,dn=os(Z,De,Ne,Se,Le);ot.setMaterial(Se,Ln);var yn=Ne.index,It=1;!0===Se.wireframe&&(yn=hn.getWireframeAttribute(Ne),It=2);var Rt=Ne.drawRange,Tt=Ne.attributes.position,tn=Rt.start*It,Jt=(Rt.start+Rt.count)*It;null!==Bt&&(tn=Math.max(tn,Bt.start*It),Jt=Math.min(Jt,(Bt.start+Bt.count)*It)),null!==yn?(tn=Math.max(tn,0),Jt=Math.min(Jt,yn.count)):null!=Tt&&(tn=Math.max(tn,0),Jt=Math.min(Jt,Tt.count));var Qn=Jt-tn;if(!(Qn<0||Qn===1/0)){te.setup(Le,Se,dn,Ne,yn);var dr,Dn=ft;if(null!==yn&&(dr=xt.get(yn),(Dn=Ht).setIndex(dr)),Le.isMesh)!0===Se.wireframe?(ot.setLineWidth(Se.wireframeLinewidth*Ae()),Dn.setMode(1)):Dn.setMode(4);else if(Le.isLine){var Zt=Se.linewidth;void 0===Zt&&(Zt=1),ot.setLineWidth(Zt*Ae()),Dn.setMode(Le.isLineSegments?1:Le.isLineLoop?2:3)}else Le.isPoints?Dn.setMode(0):Le.isSprite&&Dn.setMode(4);if(Le.isInstancedMesh)Dn.renderInstances(tn,Qn,Le.count);else if(Ne.isInstancedBufferGeometry){var Ra=Math.min(Ne.instanceCount,void 0!==Ne._maxInstanceCount?Ne._maxInstanceCount:1/0);Dn.renderInstances(tn,Qn,Ra)}else Dn.render(tn,Qn)}},this.compile=function(Z,De){function Ne(Se,Le,Bt){!0===Se.transparent&&3===Se.side?(Se.side=1,Se.needsUpdate=!0,nr(Se,Le,Bt),Se.side=0,Se.needsUpdate=!0,nr(Se,Le,Bt),Se.side=3):nr(Se,Le,Bt)}(C=re.get(Z)).init(),x.push(C),Z.traverseVisible(function(Se){Se.isLight&&Se.layers.test(De.layers)&&(C.pushLight(Se),Se.castShadow&&C.pushShadow(Se))}),C.setupLights(b.physicallyCorrectLights),Z.traverse(function(Se){var Le=Se.material;if(Le)if(Array.isArray(Le))for(var Bt=0;Bt<Le.length;Bt++)Ne(Le[Bt],Z,Se);else Ne(Le,Z,Se)}),x.pop(),C=null};var he=null;function wt(Z){he&&he(Z)}function at(){Et.stop()}function St(){Et.start()}var Et=new CF;function bt(Z,De,Ne,Se){if(!1!==Z.visible){if(Z.layers.test(De.layers))if(Z.isGroup)Ne=Z.renderOrder;else if(Z.isLOD)!0===Z.autoUpdate&&Z.update(De);else if(Z.isLight)C.pushLight(Z),Z.castShadow&&C.pushShadow(Z);else if(Z.isSprite){if(!Z.frustumCulled||ue.intersectsSprite(Z)){Se&&Ge.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(we);var Bt=Un.update(Z),Ln=Z.material;Ln.visible&&_.push(Z,Bt,Ln,Ne,Ge.z,null)}}else if((Z.isMesh||Z.isLine||Z.isPoints)&&(Z.isSkinnedMesh&&Z.skeleton.frame!==Vt.render.frame&&(Z.skeleton.update(),Z.skeleton.frame=Vt.render.frame),!Z.frustumCulled||ue.intersectsObject(Z))){Se&&Ge.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(we);var dn=Un.update(Z),yn=Z.material;if(Array.isArray(yn))for(var It=dn.groups,Rt=0,Tt=It.length;Rt<Tt;Rt++){var tn=It[Rt],Jt=yn[tn.materialIndex];Jt&&Jt.visible&&_.push(Z,dn,Jt,Ne,Ge.z,tn)}else yn.visible&&_.push(Z,dn,yn,Ne,Ge.z,null)}for(var Qn=Z.children,dr=0,Dn=Qn.length;dr<Dn;dr++)bt(Qn[dr],De,Ne,Se)}}function cr(Z,De,Ne,Se){var Le=Z.opaque,Bt=Z.transmissive,Ln=Z.transparent;C.setupLightsView(Ne),Bt.length>0&&Zn(Le,De,Ne),Se&&ot.viewport(B.copy(Se)),Le.length>0&&_r(Le,De,Ne),Bt.length>0&&_r(Bt,De,Ne),Ln.length>0&&_r(Ln,De,Ne),ot.buffers.depth.setTest(!0),ot.buffers.depth.setMask(!0),ot.buffers.color.setMask(!0),ot.setPolygonOffset(!1)}function Zn(Z,De,Ne){var Se=ze.isWebGL2;null===xe&&(xe=new cf(1,1,{generateMipmaps:!0,type:We.has("EXT_color_buffer_half_float")?yy:of,minFilter:Tc,samples:Se&&!0===u?4:0})),b.getDrawingBufferSize(_e),Se?xe.setSize(_e.x,_e.y):xe.setSize(MS(_e.x),MS(_e.y));var Le=b.getRenderTarget();b.setRenderTarget(xe),b.clear();var Bt=b.toneMapping;b.toneMapping=0,_r(Z,De,Ne),b.toneMapping=Bt,Pt.updateMultisampleRenderTarget(xe),Pt.updateRenderTargetMipmap(xe),b.setRenderTarget(Le)}function _r(Z,De,Ne){for(var Se=!0===De.isScene?De.overrideMaterial:null,Le=0,Bt=Z.length;Le<Bt;Le++){var Ln=Z[Le],dn=Ln.object,yn=Ln.geometry,It=null===Se?Ln.material:Se,Rt=Ln.group;dn.layers.test(Ne.layers)&&qr(dn,De,Ne,yn,It,Rt)}}function qr(Z,De,Ne,Se,Le,Bt){Z.onBeforeRender(b,De,Ne,Se,Le,Bt),Z.modelViewMatrix.multiplyMatrices(Ne.matrixWorldInverse,Z.matrixWorld),Z.normalMatrix.getNormalMatrix(Z.modelViewMatrix),Le.onBeforeRender(b,De,Ne,Se,Z,Bt),!0===Le.transparent&&3===Le.side?(Le.side=1,Le.needsUpdate=!0,b.renderBufferDirect(Ne,De,Se,Le,Z,Bt),Le.side=0,Le.needsUpdate=!0,b.renderBufferDirect(Ne,De,Se,Le,Z,Bt),Le.side=3):b.renderBufferDirect(Ne,De,Se,Le,Z,Bt),Z.onAfterRender(b,De,Ne,Se,Le,Bt)}function nr(Z,De,Ne){!0!==De.isScene&&(De=be);var Se=et.get(Z),Le=C.state.lights,Ln=Le.state.version,dn=jt.getParameters(Z,Le.state,C.state.shadowsArray,De,Ne),yn=jt.getProgramCacheKey(dn),It=Se.programs;Se.environment=Z.isMeshStandardMaterial?De.environment:null,Se.fog=De.fog,Se.envMap=(Z.isMeshStandardMaterial?Cn:En).get(Z.envMap||Se.environment),void 0===It&&(Z.addEventListener("dispose",In),Se.programs=It=new Map);var Rt=It.get(yn);if(void 0!==Rt){if(Se.currentProgram===Rt&&Se.lightsStateVersion===Ln)return is(Z,dn),Rt}else dn.uniforms=jt.getUniforms(Z),Z.onBuild(Ne,dn,b),Z.onBeforeCompile(dn,b),Rt=jt.acquireProgram(dn,yn),It.set(yn,Rt),Se.uniforms=dn.uniforms;var Tt=Se.uniforms;(!Z.isShaderMaterial&&!Z.isRawShaderMaterial||!0===Z.clipping)&&(Tt.clippingPlanes=q.uniform),is(Z,dn),Se.needsLights=dM(Z),Se.lightsStateVersion=Ln,Se.needsLights&&(Tt.ambientLightColor.value=Le.state.ambient,Tt.lightProbe.value=Le.state.probe,Tt.directionalLights.value=Le.state.directional,Tt.directionalLightShadows.value=Le.state.directionalShadow,Tt.spotLights.value=Le.state.spot,Tt.spotLightShadows.value=Le.state.spotShadow,Tt.rectAreaLights.value=Le.state.rectArea,Tt.ltc_1.value=Le.state.rectAreaLTC1,Tt.ltc_2.value=Le.state.rectAreaLTC2,Tt.pointLights.value=Le.state.point,Tt.pointLightShadows.value=Le.state.pointShadow,Tt.hemisphereLights.value=Le.state.hemi,Tt.directionalShadowMap.value=Le.state.directionalShadowMap,Tt.directionalShadowMatrix.value=Le.state.directionalShadowMatrix,Tt.spotShadowMap.value=Le.state.spotShadowMap,Tt.spotLightMatrix.value=Le.state.spotLightMatrix,Tt.spotLightMap.value=Le.state.spotLightMap,Tt.pointShadowMap.value=Le.state.pointShadowMap,Tt.pointShadowMatrix.value=Le.state.pointShadowMatrix);var tn=Rt.getUniforms(),Jt=QS.seqWithValue(tn.seq,Tt);return Se.currentProgram=Rt,Se.uniformsList=Jt,Rt}function is(Z,De){var Ne=et.get(Z);Ne.outputEncoding=De.outputEncoding,Ne.instancing=De.instancing,Ne.skinning=De.skinning,Ne.morphTargets=De.morphTargets,Ne.morphNormals=De.morphNormals,Ne.morphColors=De.morphColors,Ne.morphTargetsCount=De.morphTargetsCount,Ne.numClippingPlanes=De.numClippingPlanes,Ne.numIntersection=De.numClipIntersection,Ne.vertexAlphas=De.vertexAlphas,Ne.vertexTangents=De.vertexTangents,Ne.toneMapping=De.toneMapping}function os(Z,De,Ne,Se,Le){!0!==De.isScene&&(De=be),Pt.resetTextureUnits();var Bt=De.fog,dn=null===M?b.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:uf,yn=(Se.isMeshStandardMaterial?Cn:En).get(Se.envMap||(Se.isMeshStandardMaterial?De.environment:null)),It=!0===Se.vertexColors&&!!Ne.attributes.color&&4===Ne.attributes.color.itemSize,Rt=!!Se.normalMap&&!!Ne.attributes.tangent,Tt=!!Ne.morphAttributes.position,tn=!!Ne.morphAttributes.normal,Jt=!!Ne.morphAttributes.color,Qn=Se.toneMapped?b.toneMapping:0,dr=Ne.morphAttributes.position||Ne.morphAttributes.normal||Ne.morphAttributes.color,Dn=void 0!==dr?dr.length:0,Zt=et.get(Se),ro=C.state.lights;!0!==se||!0!==ye&&Z===I||q.setState(Se,Z,Z===I&&Se.id===O);var Kr=!1;Se.version===Zt.__version?(Zt.needsLights&&Zt.lightsStateVersion!==ro.state.version||Zt.outputEncoding!==dn||Le.isInstancedMesh&&!1===Zt.instancing||!Le.isInstancedMesh&&!0===Zt.instancing||Le.isSkinnedMesh&&!1===Zt.skinning||!Le.isSkinnedMesh&&!0===Zt.skinning||Zt.envMap!==yn||!0===Se.fog&&Zt.fog!==Bt||void 0!==Zt.numClippingPlanes&&(Zt.numClippingPlanes!==q.numPlanes||Zt.numIntersection!==q.numIntersection)||Zt.vertexAlphas!==It||Zt.vertexTangents!==Rt||Zt.morphTargets!==Tt||Zt.morphNormals!==tn||Zt.morphColors!==Jt||Zt.toneMapping!==Qn||!0===ze.isWebGL2&&Zt.morphTargetsCount!==Dn)&&(Kr=!0):(Kr=!0,Zt.__version=Se.version);var as=Zt.currentProgram;!0===Kr&&(as=nr(Se,De,Le));var a_=!1,Gc=!1,xv=!1,io=as.getUniforms(),Cl=Zt.uniforms;if(ot.useProgram(as.program)&&(a_=!0,Gc=!0,xv=!0),Se.id!==O&&(O=Se.id,Gc=!0),a_||I!==Z){if(io.setValue(ge,"projectionMatrix",Z.projectionMatrix),ze.logarithmicDepthBuffer&&io.setValue(ge,"logDepthBufFC",2/(Math.log(Z.far+1)/Math.LN2)),I!==Z&&(I=Z,Gc=!0,xv=!0),Se.isShaderMaterial||Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshStandardMaterial||Se.envMap){var s_=io.map.cameraPosition;void 0!==s_&&s_.setValue(ge,Ge.setFromMatrixPosition(Z.matrixWorld))}(Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshLambertMaterial||Se.isMeshBasicMaterial||Se.isMeshStandardMaterial||Se.isShaderMaterial)&&io.setValue(ge,"isOrthographic",!0===Z.isOrthographicCamera),(Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshLambertMaterial||Se.isMeshBasicMaterial||Se.isMeshStandardMaterial||Se.isShaderMaterial||Se.isShadowMaterial||Le.isSkinnedMesh)&&io.setValue(ge,"viewMatrix",Z.matrixWorldInverse)}if(Le.isSkinnedMesh){io.setOptional(ge,Le,"bindMatrix"),io.setOptional(ge,Le,"bindMatrixInverse");var Bc=Le.skeleton;Bc&&(ze.floatVertexTextures?(null===Bc.boneTexture&&Bc.computeBoneTexture(),io.setValue(ge,"boneTexture",Bc.boneTexture,Pt),io.setValue(ge,"boneTextureSize",Bc.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var Hc=Ne.morphAttributes;if((void 0!==Hc.position||void 0!==Hc.normal||void 0!==Hc.color&&!0===ze.isWebGL2)&&dt.update(Le,Ne,Se,as),(Gc||Zt.receiveShadow!==Le.receiveShadow)&&(Zt.receiveShadow=Le.receiveShadow,io.setValue(ge,"receiveShadow",Le.receiveShadow)),Se.isMeshGouraudMaterial&&null!==Se.envMap&&(Cl.envMap.value=yn,Cl.flipEnvMap.value=yn.isCubeTexture&&!1===yn.isRenderTargetTexture?-1:1),Gc&&(io.setValue(ge,"toneMappingExposure",b.toneMappingExposure),Zt.needsLights&&bv(Cl,xv),Bt&&!0===Se.fog&&vr.refreshFogUniforms(Cl,Bt),vr.refreshMaterialUniforms(Cl,Se,ne,X,xe),QS.upload(ge,Zt.uniformsList,Cl,Pt)),Se.isShaderMaterial&&!0===Se.uniformsNeedUpdate&&(QS.upload(ge,Zt.uniformsList,Cl,Pt),Se.uniformsNeedUpdate=!1),Se.isSpriteMaterial&&io.setValue(ge,"center",Le.center),io.setValue(ge,"modelViewMatrix",Le.modelViewMatrix),io.setValue(ge,"normalMatrix",Le.normalMatrix),io.setValue(ge,"modelMatrix",Le.matrixWorld),Se.isShaderMaterial||Se.isRawShaderMaterial)for(var jk=Se.uniformsGroups,fM=0,IZ=jk.length;fM<IZ;fM++)if(ze.isWebGL2){var qk=jk[fM];rt.update(qk,as),rt.bind(qk,as)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return as}function bv(Z,De){Z.ambientLightColor.needsUpdate=De,Z.lightProbe.needsUpdate=De,Z.directionalLights.needsUpdate=De,Z.directionalLightShadows.needsUpdate=De,Z.pointLights.needsUpdate=De,Z.pointLightShadows.needsUpdate=De,Z.spotLights.needsUpdate=De,Z.spotLightShadows.needsUpdate=De,Z.rectAreaLights.needsUpdate=De,Z.hemisphereLights.needsUpdate=De}function dM(Z){return Z.isMeshLambertMaterial||Z.isMeshToonMaterial||Z.isMeshPhongMaterial||Z.isMeshStandardMaterial||Z.isShadowMaterial||Z.isShaderMaterial&&!0===Z.lights}Et.setAnimationLoop(wt),"undefined"!=typeof self&&Et.setContext(self),this.setAnimationLoop=function(Z){he=Z,Ct.setAnimationLoop(Z),null===Z?Et.stop():Et.start()},Ct.addEventListener("sessionstart",at),Ct.addEventListener("sessionend",St),this.render=function(Z,De){if(void 0===De||!0===De.isCamera){if(!0!==E){if(!0===Z.matrixWorldAutoUpdate&&Z.updateMatrixWorld(),null===De.parent&&!0===De.matrixWorldAutoUpdate&&De.updateMatrixWorld(),!0===Ct.enabled&&!0===Ct.isPresenting&&(!0===Ct.cameraAutoUpdate&&Ct.updateCamera(De),De=Ct.getCamera()),!0===Z.isScene&&Z.onBeforeRender(b,Z,De,M),(C=re.get(Z,x.length)).init(),x.push(C),we.multiplyMatrices(De.projectionMatrix,De.matrixWorldInverse),ue.setFromProjectionMatrix(we),se=q.init(this.clippingPlanes,ye=this.localClippingEnabled,De),(_=gr.get(Z,S.length)).init(),S.push(_),bt(Z,De,0,b.sortObjects),_.finish(),!0===b.sortObjects&&_.sort(de,ce),!0===se&&q.beginShadows(),Oe.render(C.state.shadowsArray,Z,De),!0===se&&q.endShadows(),!0===this.info.autoReset&&this.info.reset(),tt.render(_,Z),C.setupLights(b.physicallyCorrectLights),De.isArrayCamera)for(var Se=De.cameras,Le=0,Bt=Se.length;Le<Bt;Le++){var Ln=Se[Le];cr(_,Z,Ln,Ln.viewport)}else cr(_,Z,De);null!==M&&(Pt.updateMultisampleRenderTarget(M),Pt.updateRenderTargetMipmap(M)),!0===Z.isScene&&Z.onAfterRender(b,Z,De),te.resetDefaultState(),O=-1,I=null,x.pop(),C=x.length>0?x[x.length-1]:null,S.pop(),_=S.length>0?S[S.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(Z,De,Ne){et.get(Z.texture).__webglTexture=De,et.get(Z.depthTexture).__webglTexture=Ne;var Se=et.get(Z);Se.__hasExternalTextures=!0,Se.__hasExternalTextures&&(Se.__autoAllocateDepthBuffer=void 0===Ne,Se.__autoAllocateDepthBuffer||!0===We.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Se.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Z,De){var Ne=et.get(Z);Ne.__webglFramebuffer=De,Ne.__useDefaultFramebuffer=void 0===De},this.setRenderTarget=function(Z){var De=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Ne=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;M=Z,D=De,A=Ne;var Se=!0,Le=null,Bt=!1,Ln=!1;if(Z){var dn=et.get(Z);void 0!==dn.__useDefaultFramebuffer?(ot.bindFramebuffer(36160,null),Se=!1):void 0===dn.__webglFramebuffer?Pt.setupRenderTarget(Z):dn.__hasExternalTextures&&Pt.rebindTextures(Z,et.get(Z.texture).__webglTexture,et.get(Z.depthTexture).__webglTexture);var yn=Z.texture;(yn.isData3DTexture||yn.isDataArrayTexture||yn.isCompressedArrayTexture)&&(Ln=!0);var It=et.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget?(Le=It[De],Bt=!0):Le=ze.isWebGL2&&Z.samples>0&&!1===Pt.useMultisampledRTT(Z)?et.get(Z).__webglMultisampledFramebuffer:It,B.copy(Z.viewport),z.copy(Z.scissor),P=Z.scissorTest}else B.copy(G).multiplyScalar(ne).floor(),z.copy(ee).multiplyScalar(ne).floor(),P=ie;var Rt=ot.bindFramebuffer(36160,Le);if(Rt&&ze.drawBuffers&&Se&&ot.drawBuffers(Z,Le),ot.viewport(B),ot.scissor(z),ot.setScissorTest(P),Bt){var Tt=et.get(Z.texture);ge.framebufferTexture2D(36160,36064,34069+De,Tt.__webglTexture,Ne)}else if(Ln){var tn=et.get(Z.texture),Jt=De||0;ge.framebufferTextureLayer(36160,36064,tn.__webglTexture,Ne||0,Jt)}O=-1},this.readRenderTargetPixels=function(Z,De,Ne,Se,Le,Bt,Ln){if(Z&&Z.isWebGLRenderTarget){var dn=et.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&void 0!==Ln&&(dn=dn[Ln]),dn){ot.bindFramebuffer(36160,dn);try{var yn=Z.texture,It=yn.format,Rt=yn.type;if(It!==Za&&kt.convert(It)!==ge.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var Tt=Rt===yy&&(We.has("EXT_color_buffer_half_float")||ze.isWebGL2&&We.has("EXT_color_buffer_float"));if(!(Rt===of||kt.convert(Rt)===ge.getParameter(35738)||Rt===Dc&&(ze.isWebGL2||We.has("OES_texture_float")||We.has("WEBGL_color_buffer_float"))||Tt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");De>=0&&De<=Z.width-Se&&Ne>=0&&Ne<=Z.height-Le&&ge.readPixels(De,Ne,Se,Le,kt.convert(It),kt.convert(Rt),Bt)}finally{var tn=null!==M?et.get(M).__webglFramebuffer:null;ot.bindFramebuffer(36160,tn)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(Z,De){var Ne=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Se=Math.pow(2,-Ne),Le=Math.floor(De.image.width*Se),Bt=Math.floor(De.image.height*Se);Pt.setTexture2D(De,0),ge.copyTexSubImage2D(3553,Ne,0,0,Z.x,Z.y,Le,Bt),ot.unbindTexture()},this.copyTextureToTexture=function(Z,De,Ne){var Se=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,Le=De.image.width,Bt=De.image.height,Ln=kt.convert(Ne.format),dn=kt.convert(Ne.type);Pt.setTexture2D(Ne,0),ge.pixelStorei(37440,Ne.flipY),ge.pixelStorei(37441,Ne.premultiplyAlpha),ge.pixelStorei(3317,Ne.unpackAlignment),De.isDataTexture?ge.texSubImage2D(3553,Se,Z.x,Z.y,Le,Bt,Ln,dn,De.image.data):De.isCompressedTexture?ge.compressedTexSubImage2D(3553,Se,Z.x,Z.y,De.mipmaps[0].width,De.mipmaps[0].height,Ln,De.mipmaps[0].data):ge.texSubImage2D(3553,Se,Z.x,Z.y,Ln,dn,De.image),0===Se&&Ne.generateMipmaps&&ge.generateMipmap(3553),ot.unbindTexture()},this.copyTextureToTexture3D=function(Z,De,Ne,Se){var Le=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(b.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var Rt,Bt=Z.max.x-Z.min.x+1,Ln=Z.max.y-Z.min.y+1,dn=Z.max.z-Z.min.z+1,yn=kt.convert(Se.format),It=kt.convert(Se.type);if(Se.isData3DTexture)Pt.setTexture3D(Se,0),Rt=32879;else{if(!Se.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Pt.setTexture2DArray(Se,0),Rt=35866}ge.pixelStorei(37440,Se.flipY),ge.pixelStorei(37441,Se.premultiplyAlpha),ge.pixelStorei(3317,Se.unpackAlignment);var Tt=ge.getParameter(3314),tn=ge.getParameter(32878),Jt=ge.getParameter(3316),Qn=ge.getParameter(3315),dr=ge.getParameter(32877),Dn=Ne.isCompressedTexture?Ne.mipmaps[0]:Ne.image;ge.pixelStorei(3314,Dn.width),ge.pixelStorei(32878,Dn.height),ge.pixelStorei(3316,Z.min.x),ge.pixelStorei(3315,Z.min.y),ge.pixelStorei(32877,Z.min.z),Ne.isDataTexture||Ne.isData3DTexture?ge.texSubImage3D(Rt,Le,De.x,De.y,De.z,Bt,Ln,dn,yn,It,Dn.data):Ne.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ge.compressedTexSubImage3D(Rt,Le,De.x,De.y,De.z,Bt,Ln,dn,yn,Dn.data)):ge.texSubImage3D(Rt,Le,De.x,De.y,De.z,Bt,Ln,dn,yn,It,Dn),ge.pixelStorei(3314,Tt),ge.pixelStorei(32878,tn),ge.pixelStorei(3316,Jt),ge.pixelStorei(3315,Qn),ge.pixelStorei(32877,dr),0===Le&&Se.generateMipmaps&&ge.generateMipmap(Rt),ot.unbindTexture()}},this.initTexture=function(Z){Z.isCubeTexture?Pt.setTextureCube(Z,0):Z.isData3DTexture?Pt.setTexture3D(Z,0):Z.isDataArrayTexture||Z.isCompressedArrayTexture?Pt.setTexture2DArray(Z,0):Pt.setTexture2D(Z,0),ot.unbindTexture()},this.resetState=function(){D=0,A=0,M=null,ot.reset(),te.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var K9=function(n){ve(t,n);var a=me(t);function t(){return k(this,t),a.apply(this,arguments)}return t}(Lc);K9.prototype.isWebGL1Renderer=!0;var yf=function(n){ve(t,n);var a=me(t);function t(){var r;return k(this,t),(r=a.call(this)).isScene=!0,r.type="Scene",r.background=null,r.environment=null,r.fog=null,r.backgroundBlurriness=0,r.backgroundIntensity=1,r.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:Kn(r)})),r}return j(t,[{key:"copy",value:function(o,u){return Ce(Ue(t.prototype),"copy",this).call(this,o,u),null!==o.background&&(this.background=o.background.clone()),null!==o.environment&&(this.environment=o.environment.clone()),null!==o.fog&&(this.fog=o.fog.clone()),this.backgroundBlurriness=o.backgroundBlurriness,this.backgroundIntensity=o.backgroundIntensity,null!==o.overrideMaterial&&(this.overrideMaterial=o.overrideMaterial.clone()),this.matrixAutoUpdate=o.matrixAutoUpdate,this}},{key:"toJSON",value:function(o){var u=Ce(Ue(t.prototype),"toJSON",this).call(this,o);return null!==this.fog&&(u.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(u.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(u.backgroundIntensity=this.backgroundIntensity),u}},{key:"autoUpdate",get:function(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function(o){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=o}}]),t}(_o),Y9=function(){function n(a,t){k(this,n),this.isInterleavedBuffer=!0,this.array=a,this.stride=t,this.count=void 0!==a?a.length/t:0,this.usage=PD,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Qa()}return j(n,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}},{key:"copyAt",value:function(t,r,o){t*=this.stride,o*=r.stride;for(var u=0,f=this.stride;u<f;u++)this.array[t+u]=r.array[o+u];return this}},{key:"set",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,r),this}},{key:"clone",value:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Qa()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var r=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),o=new this.constructor(r,this.stride);return o.setUsage(this.usage),o}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"toJSON",value:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Qa()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),n}(),Bo=new J,$9=function(){function n(a,t,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];k(this,n),this.isInterleavedBufferAttribute=!0,this.name="",this.data=a,this.itemSize=t,this.offset=r,this.normalized=o}return j(n,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(t){this.data.needsUpdate=t}},{key:"applyMatrix4",value:function(t){for(var r=0,o=this.data.count;r<o;r++)Bo.fromBufferAttribute(this,r),Bo.applyMatrix4(t),this.setXYZ(r,Bo.x,Bo.y,Bo.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var r=0,o=this.count;r<o;r++)Bo.fromBufferAttribute(this,r),Bo.applyNormalMatrix(t),this.setXYZ(r,Bo.x,Bo.y,Bo.z);return this}},{key:"transformDirection",value:function(t){for(var r=0,o=this.count;r<o;r++)Bo.fromBufferAttribute(this,r),Bo.transformDirection(t),this.setXYZ(r,Bo.x,Bo.y,Bo.z);return this}},{key:"setX",value:function(t,r){return this.normalized&&(r=hr(r,this.array)),this.data.array[t*this.data.stride+this.offset]=r,this}},{key:"setY",value:function(t,r){return this.normalized&&(r=hr(r,this.array)),this.data.array[t*this.data.stride+this.offset+1]=r,this}},{key:"setZ",value:function(t,r){return this.normalized&&(r=hr(r,this.array)),this.data.array[t*this.data.stride+this.offset+2]=r,this}},{key:"setW",value:function(t,r){return this.normalized&&(r=hr(r,this.array)),this.data.array[t*this.data.stride+this.offset+3]=r,this}},{key:"getX",value:function(t){var r=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(r=ul(r,this.array)),r}},{key:"getY",value:function(t){var r=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(r=ul(r,this.array)),r}},{key:"getZ",value:function(t){var r=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(r=ul(r,this.array)),r}},{key:"getW",value:function(t){var r=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(r=ul(r,this.array)),r}},{key:"setXY",value:function(t,r,o){return t=t*this.data.stride+this.offset,this.normalized&&(r=hr(r,this.array),o=hr(o,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=o,this}},{key:"setXYZ",value:function(t,r,o,u){return t=t*this.data.stride+this.offset,this.normalized&&(r=hr(r,this.array),o=hr(o,this.array),u=hr(u,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=o,this.data.array[t+2]=u,this}},{key:"setXYZW",value:function(t,r,o,u,f){return t=t*this.data.stride+this.offset,this.normalized&&(r=hr(r,this.array),o=hr(o,this.array),u=hr(u,this.array),f=hr(f,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=o,this.data.array[t+2]=u,this.data.array[t+3]=f,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var r=[],o=0;o<this.count;o++)for(var u=o*this.data.stride+this.offset,f=0;f<this.itemSize;f++)r.push(this.data.array[u+f]);return new ko(new this.array.constructor(r),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new n(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var r=[],o=0;o<this.count;o++)for(var u=o*this.data.stride+this.offset,f=0;f<this.itemSize;f++)r.push(this.data.array[u+f]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),n}(),KF=new J,YF=new wr,$F=new wr,J9=new J,XF=new Sn,Z9=function(n){ve(t,n);var a=me(t);function t(r,o){var u;return k(this,t),(u=a.call(this,r,o)).isSkinnedMesh=!0,u.type="SkinnedMesh",u.bindMode="attached",u.bindMatrix=new Sn,u.bindMatrixInverse=new Sn,u}return j(t,[{key:"copy",value:function(o,u){return Ce(Ue(t.prototype),"copy",this).call(this,o,u),this.bindMode=o.bindMode,this.bindMatrix.copy(o.bindMatrix),this.bindMatrixInverse.copy(o.bindMatrixInverse),this.skeleton=o.skeleton,this}},{key:"bind",value:function(o,u){this.skeleton=o,void 0===u&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),u=this.matrixWorld),this.bindMatrix.copy(u),this.bindMatrixInverse.copy(u).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var o=new wr,u=this.geometry.attributes.skinWeight,f=0,p=u.count;f<p;f++){o.fromBufferAttribute(u,f);var v=1/o.manhattanLength();v!==1/0?o.multiplyScalar(v):o.set(1,0,0,0),u.setXYZW(f,o.x,o.y,o.z,o.w)}}},{key:"updateMatrixWorld",value:function(o){Ce(Ue(t.prototype),"updateMatrixWorld",this).call(this,o),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(o,u){var f=this.skeleton,p=this.geometry;YF.fromBufferAttribute(p.attributes.skinIndex,o),$F.fromBufferAttribute(p.attributes.skinWeight,o),KF.copy(u).applyMatrix4(this.bindMatrix),u.set(0,0,0);for(var v=0;v<4;v++){var g=$F.getComponent(v);if(0!==g){var y=YF.getComponent(v);XF.multiplyMatrices(f.bones[y].matrixWorld,f.boneInverses[y]),u.addScaledVector(J9.copy(KF).applyMatrix4(XF),g)}}return u.applyMatrix4(this.bindMatrixInverse)}}]),t}(Fr),JF=function(n){ve(t,n);var a=me(t);function t(){var r;return k(this,t),(r=a.call(this)).isBone=!0,r.type="Bone",r}return t}(_o),Q9=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,p=arguments.length>3?arguments[3]:void 0,v=arguments.length>4?arguments[4]:void 0,g=arguments.length>5?arguments[5]:void 0,y=arguments.length>6?arguments[6]:void 0,_=arguments.length>7?arguments[7]:void 0,C=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Mi,S=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Mi,x=arguments.length>10?arguments[10]:void 0,b=arguments.length>11?arguments[11]:void 0;return k(this,t),(r=a.call(this,null,g,y,_,C,S,p,v,x,b)).isDataTexture=!0,r.image={data:o,width:u,height:f},r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r}return t}(wu),ZF=new Sn,e7=new Sn,t7=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];k(this,n),this.uuid=Qa(),this.bones=a.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return j(n,[{key:"init",value:function(){var t=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===r.length)this.calculateInverses();else if(t.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var o=0,u=this.bones.length;o<u;o++)this.boneInverses.push(new Sn)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var t=0,r=this.bones.length;t<r;t++){var o=new Sn;this.bones[t]&&o.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(o)}}},{key:"pose",value:function(){for(var t=0,r=this.bones.length;t<r;t++){var o=this.bones[t];o&&o.matrixWorld.copy(this.boneInverses[t]).invert()}for(var u=0,f=this.bones.length;u<f;u++){var p=this.bones[u];p&&(p.parent&&p.parent.isBone?(p.matrix.copy(p.parent.matrixWorld).invert(),p.matrix.multiply(p.matrixWorld)):p.matrix.copy(p.matrixWorld),p.matrix.decompose(p.position,p.quaternion,p.scale))}}},{key:"update",value:function(){for(var t=this.bones,r=this.boneInverses,o=this.boneMatrices,u=this.boneTexture,f=0,p=t.length;f<p;f++)ZF.multiplyMatrices(t[f]?t[f].matrixWorld:e7,r[f]),ZF.toArray(o,16*f);null!==u&&(u.needsUpdate=!0)}},{key:"clone",value:function(){return new n(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var t=Math.sqrt(4*this.bones.length);t=QL(t),t=Math.max(t,4);var r=new Float32Array(t*t*4);r.set(this.boneMatrices);var o=new Q9(r,t,t,Za,Dc);return o.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=o,this.boneTextureSize=t,this}},{key:"getBoneByName",value:function(t){for(var r=0,o=this.bones.length;r<o;r++){var u=this.bones[r];if(u.name===t)return u}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(t,r){this.uuid=t.uuid;for(var o=0,u=t.bones.length;o<u;o++){var f=t.bones[o],p=r[f];void 0===p&&(console.warn("THREE.Skeleton: No bone found with UUID:",f),p=new JF),this.bones.push(p),this.boneInverses.push((new Sn).fromArray(t.boneInverses[o]))}return this.init(),this}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;for(var r=this.bones,o=this.boneInverses,u=0,f=r.length;u<f;u++)t.bones.push(r[u].uuid),t.boneInverses.push(o[u].toArray());return t}}]),n}(),QF=function(n){ve(t,n);var a=me(t);function t(r,o,u){var f,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return k(this,t),(f=a.call(this,r,o,u)).isInstancedBufferAttribute=!0,f.meshPerAttribute=p,f}return j(t,[{key:"copy",value:function(o){return Ce(Ue(t.prototype),"copy",this).call(this,o),this.meshPerAttribute=o.meshPerAttribute,this}},{key:"toJSON",value:function(){var o=Ce(Ue(t.prototype),"toJSON",this).call(this);return o.meshPerAttribute=this.meshPerAttribute,o.isInstancedBufferAttribute=!0,o}}]),t}(ko),eN=new Sn,tN=new Sn,eE=[],n7=new Sn,Ly=new Fr,r7=function(n){ve(t,n);var a=me(t);function t(r,o,u){var f;k(this,t),(f=a.call(this,r,o)).isInstancedMesh=!0,f.instanceMatrix=new QF(new Float32Array(16*u),16),f.instanceColor=null,f.count=u,f.frustumCulled=!1;for(var p=0;p<u;p++)f.setMatrixAt(p,n7);return f}return j(t,[{key:"copy",value:function(o,u){return Ce(Ue(t.prototype),"copy",this).call(this,o,u),this.instanceMatrix.copy(o.instanceMatrix),null!==o.instanceColor&&(this.instanceColor=o.instanceColor.clone()),this.count=o.count,this}},{key:"getColorAt",value:function(o,u){u.fromArray(this.instanceColor.array,3*o)}},{key:"getMatrixAt",value:function(o,u){u.fromArray(this.instanceMatrix.array,16*o)}},{key:"raycast",value:function(o,u){var f=this.matrixWorld,p=this.count;if(Ly.geometry=this.geometry,Ly.material=this.material,void 0!==Ly.material)for(var v=0;v<p;v++){this.getMatrixAt(v,eN),tN.multiplyMatrices(f,eN),Ly.matrixWorld=tN,Ly.raycast(o,eE);for(var g=0,y=eE.length;g<y;g++){var _=eE[g];_.instanceId=v,_.object=this,u.push(_)}eE.length=0}}},{key:"setColorAt",value:function(o,u){null===this.instanceColor&&(this.instanceColor=new QF(new Float32Array(3*this.instanceMatrix.count),3)),u.toArray(this.instanceColor.array,3*o)}},{key:"setMatrixAt",value:function(o,u){u.toArray(this.instanceMatrix.array,16*o)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),t}(Fr),iv=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this)).isLineBasicMaterial=!0,o.type="LineBasicMaterial",o.color=new Yt(16777215),o.linewidth=1,o.linecap="round",o.linejoin="round",o.fog=!0,o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return Ce(Ue(t.prototype),"copy",this).call(this,o),this.color.copy(o.color),this.linewidth=o.linewidth,this.linecap=o.linecap,this.linejoin=o.linejoin,this.fog=o.fog,this}}]),t}(qs),nN=new J,rN=new J,iN=new Sn,pA=new GS,tE=new Uh,Fy=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dr,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iv;return k(this,t),(r=a.call(this)).isLine=!0,r.type="Line",r.geometry=o,r.material=u,r.updateMorphTargets(),r}return j(t,[{key:"copy",value:function(o,u){return Ce(Ue(t.prototype),"copy",this).call(this,o,u),this.material=o.material,this.geometry=o.geometry,this}},{key:"computeLineDistances",value:function(){var o=this.geometry;if(null===o.index){for(var u=o.attributes.position,f=[0],p=1,v=u.count;p<v;p++)nN.fromBufferAttribute(u,p-1),rN.fromBufferAttribute(u,p),f[p]=f[p-1],f[p]+=nN.distanceTo(rN);o.setAttribute("lineDistance",new cn(f,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(o,u){var f=this.geometry,p=this.matrixWorld,v=o.params.Line.threshold,g=f.drawRange;if(null===f.boundingSphere&&f.computeBoundingSphere(),tE.copy(f.boundingSphere),tE.applyMatrix4(p),tE.radius+=v,!1!==o.ray.intersectsSphere(tE)){iN.copy(p).invert(),pA.copy(o.ray).applyMatrix4(iN);var y=v/((this.scale.x+this.scale.y+this.scale.z)/3),_=y*y,C=new J,S=new J,x=new J,b=new J,E=this.isLineSegments?2:1,D=f.index,M=f.attributes.position;if(null!==D)for(var B=Math.max(0,g.start),z=Math.min(D.count,g.start+g.count)-1;B<z;B+=E){var P=D.getX(B),W=D.getX(B+1);if(C.fromBufferAttribute(M,P),S.fromBufferAttribute(M,W),!(pA.distanceSqToSegment(C,S,b,x)>_)){b.applyMatrix4(this.matrixWorld);var ne=o.ray.origin.distanceTo(b);ne<o.near||ne>o.far||u.push({distance:ne,point:x.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this})}}else for(var G=Math.max(0,g.start),ee=Math.min(M.count,g.start+g.count)-1;G<ee;G+=E)if(C.fromBufferAttribute(M,G),S.fromBufferAttribute(M,G+1),!(pA.distanceSqToSegment(C,S,b,x)>_)){b.applyMatrix4(this.matrixWorld);var ue=o.ray.origin.distanceTo(b);ue<o.near||ue>o.far||u.push({distance:ue,point:x.clone().applyMatrix4(this.matrixWorld),index:G,face:null,faceIndex:null,object:this})}}}},{key:"updateMorphTargets",value:function(){var u=this.geometry.morphAttributes,f=Object.keys(u);if(f.length>0){var p=u[f[0]];if(void 0!==p){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var v=0,g=p.length;v<g;v++){var y=p[v].name||String(v);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=v}}}}}]),t}(_o),oN=new J,aN=new J,hA=function(n){ve(t,n);var a=me(t);function t(r,o){var u;return k(this,t),(u=a.call(this,r,o)).isLineSegments=!0,u.type="LineSegments",u}return j(t,[{key:"computeLineDistances",value:function(){var o=this.geometry;if(null===o.index){for(var u=o.attributes.position,f=[],p=0,v=u.count;p<v;p+=2)oN.fromBufferAttribute(u,p),aN.fromBufferAttribute(u,p+1),f[p]=0===p?0:f[p-1],f[p+1]=f[p]+oN.distanceTo(aN);o.setAttribute("lineDistance",new cn(f,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),t}(Fy),i7=function(n){ve(t,n);var a=me(t);function t(r,o){var u;return k(this,t),(u=a.call(this,r,o)).isLineLoop=!0,u.type="LineLoop",u}return t}(Fy),sN=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this)).isPointsMaterial=!0,o.type="PointsMaterial",o.color=new Yt(16777215),o.map=null,o.alphaMap=null,o.size=1,o.sizeAttenuation=!0,o.fog=!0,o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return Ce(Ue(t.prototype),"copy",this).call(this,o),this.color.copy(o.color),this.map=o.map,this.alphaMap=o.alphaMap,this.size=o.size,this.sizeAttenuation=o.sizeAttenuation,this.fog=o.fog,this}}]),t}(qs),uN=new Sn,vA=new GS,nE=new Uh,rE=new J,o7=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Dr,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sN;return k(this,t),(r=a.call(this)).isPoints=!0,r.type="Points",r.geometry=o,r.material=u,r.updateMorphTargets(),r}return j(t,[{key:"copy",value:function(o,u){return Ce(Ue(t.prototype),"copy",this).call(this,o,u),this.material=o.material,this.geometry=o.geometry,this}},{key:"raycast",value:function(o,u){var f=this.geometry,p=this.matrixWorld,v=o.params.Points.threshold,g=f.drawRange;if(null===f.boundingSphere&&f.computeBoundingSphere(),nE.copy(f.boundingSphere),nE.applyMatrix4(p),nE.radius+=v,!1!==o.ray.intersectsSphere(nE)){uN.copy(p).invert(),vA.copy(o.ray).applyMatrix4(uN);var y=v/((this.scale.x+this.scale.y+this.scale.z)/3),_=y*y,C=f.index,x=f.attributes.position;if(null!==C)for(var D=Math.max(0,g.start),A=Math.min(C.count,g.start+g.count);D<A;D++){var M=C.getX(D);rE.fromBufferAttribute(x,M),lN(rE,M,_,p,o,u,this)}else for(var B=Math.max(0,g.start),z=Math.min(x.count,g.start+g.count);B<z;B++)rE.fromBufferAttribute(x,B),lN(rE,B,_,p,o,u,this)}}},{key:"updateMorphTargets",value:function(){var u=this.geometry.morphAttributes,f=Object.keys(u);if(f.length>0){var p=u[f[0]];if(void 0!==p){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var v=0,g=p.length;v<g;v++){var y=p[v].name||String(v);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=v}}}}}]),t}(_o);function lN(n,a,t,r,o,u,f){var p=vA.distanceSqToPoint(n);if(p<t){var v=new J;vA.closestPointToPoint(n,v),v.applyMatrix4(r);var g=o.ray.origin.distanceTo(v);if(g<o.near||g>o.far)return;u.push({distance:g,distanceToRay:Math.sqrt(p),point:v,index:a,face:null,object:f})}}var bA=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;k(this,t),(r=a.call(this)).type="CircleGeometry",r.parameters={radius:o,segments:u,thetaStart:f,thetaLength:p},u=Math.max(3,u);var v=[],g=[],y=[],_=[],C=new J,S=new Ye;g.push(0,0,0),y.push(0,0,1),_.push(.5,.5);for(var x=0,b=3;x<=u;x++,b+=3){var E=f+x/u*p;C.x=o*Math.cos(E),C.y=o*Math.sin(E),g.push(C.x,C.y,C.z),y.push(0,0,1),S.x=(g[b]/o+1)/2,S.y=(g[b+1]/o+1)/2,_.push(S.x,S.y)}for(var D=1;D<=u;D++)v.push(D,D+1,0);return r.setIndex(v),r.setAttribute("position",new cn(g,3)),r.setAttribute("normal",new cn(y,3)),r.setAttribute("uv",new cn(_,2)),r}return j(t,null,[{key:"fromJSON",value:function(o){return new t(o.radius,o.segments,o.thetaStart,o.thetaLength)}}]),t}(Dr),bN=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(k(this,t),(r=a.call(this)).type="WireframeGeometry",r.parameters={geometry:o},null!==o){var u=[],f=new Set,p=new J,v=new J;if(null!==o.index){var g=o.attributes.position,y=o.index,_=o.groups;0===_.length&&(_=[{start:0,count:y.count,materialIndex:0}]);for(var C=0,S=_.length;C<S;++C)for(var x=_[C],b=x.start,E=x.count,D=b,A=b+E;D<A;D+=3)for(var M=0;M<3;M++){var O=y.getX(D+M),I=y.getX(D+(M+1)%3);p.fromBufferAttribute(g,O),v.fromBufferAttribute(g,I),!0===xN(p,v,f)&&(u.push(p.x,p.y,p.z),u.push(v.x,v.y,v.z))}}else for(var B=o.attributes.position,z=0,P=B.count/3;z<P;z++)for(var W=0;W<3;W++){var X=3*z+W,ne=3*z+(W+1)%3;p.fromBufferAttribute(B,X),v.fromBufferAttribute(B,ne),!0===xN(p,v,f)&&(u.push(p.x,p.y,p.z),u.push(v.x,v.y,v.z))}r.setAttribute("position",new cn(u,3))}return r}return t}(Dr);function xN(n,a,t){var r="".concat(n.x,",").concat(n.y,",").concat(n.z,"-").concat(a.x,",").concat(a.y,",").concat(a.z),o="".concat(a.x,",").concat(a.y,",").concat(a.z,"-").concat(n.x,",").concat(n.y,",").concat(n.z);return!0!==t.has(r)&&!0!==t.has(o)&&(t.add(r),t.add(o),!0)}var DA=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this)).isMeshStandardMaterial=!0,o.defines={STANDARD:""},o.type="MeshStandardMaterial",o.color=new Yt(16777215),o.roughness=1,o.metalness=0,o.map=null,o.lightMap=null,o.lightMapIntensity=1,o.aoMap=null,o.aoMapIntensity=1,o.emissive=new Yt(0),o.emissiveIntensity=1,o.emissiveMap=null,o.bumpMap=null,o.bumpScale=1,o.normalMap=null,o.normalMapType=0,o.normalScale=new Ye(1,1),o.displacementMap=null,o.displacementScale=1,o.displacementBias=0,o.roughnessMap=null,o.metalnessMap=null,o.alphaMap=null,o.envMap=null,o.envMapIntensity=1,o.wireframe=!1,o.wireframeLinewidth=1,o.wireframeLinecap="round",o.wireframeLinejoin="round",o.flatShading=!1,o.fog=!0,o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return Ce(Ue(t.prototype),"copy",this).call(this,o),this.defines={STANDARD:""},this.color.copy(o.color),this.roughness=o.roughness,this.metalness=o.metalness,this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.roughnessMap=o.roughnessMap,this.metalnessMap=o.metalnessMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.envMapIntensity=o.envMapIntensity,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.flatShading=o.flatShading,this.fog=o.fog,this}}]),t}(qs),Cf=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this)).isMeshPhysicalMaterial=!0,o.defines={STANDARD:"",PHYSICAL:""},o.type="MeshPhysicalMaterial",o.clearcoatMap=null,o.clearcoatRoughness=0,o.clearcoatRoughnessMap=null,o.clearcoatNormalScale=new Ye(1,1),o.clearcoatNormalMap=null,o.ior=1.5,Object.defineProperty(Kn(o),"reflectivity",{get:function(){return fi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(f){this.ior=(1+.4*f)/(1-.4*f)}}),o.iridescenceMap=null,o.iridescenceIOR=1.3,o.iridescenceThicknessRange=[100,400],o.iridescenceThicknessMap=null,o.sheenColor=new Yt(0),o.sheenColorMap=null,o.sheenRoughness=1,o.sheenRoughnessMap=null,o.transmissionMap=null,o.thickness=0,o.thicknessMap=null,o.attenuationDistance=1/0,o.attenuationColor=new Yt(1,1,1),o.specularIntensity=1,o.specularIntensityMap=null,o.specularColor=new Yt(1,1,1),o.specularColorMap=null,o._sheen=0,o._clearcoat=0,o._iridescence=0,o._transmission=0,o.setValues(r),o}return j(t,[{key:"sheen",get:function(){return this._sheen},set:function(o){this._sheen>0!=o>0&&this.version++,this._sheen=o}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(o){this._clearcoat>0!=o>0&&this.version++,this._clearcoat=o}},{key:"iridescence",get:function(){return this._iridescence},set:function(o){this._iridescence>0!=o>0&&this.version++,this._iridescence=o}},{key:"transmission",get:function(){return this._transmission},set:function(o){this._transmission>0!=o>0&&this.version++,this._transmission=o}},{key:"copy",value:function(o){return Ce(Ue(t.prototype),"copy",this).call(this,o),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=o.clearcoat,this.clearcoatMap=o.clearcoatMap,this.clearcoatRoughness=o.clearcoatRoughness,this.clearcoatRoughnessMap=o.clearcoatRoughnessMap,this.clearcoatNormalMap=o.clearcoatNormalMap,this.clearcoatNormalScale.copy(o.clearcoatNormalScale),this.ior=o.ior,this.iridescence=o.iridescence,this.iridescenceMap=o.iridescenceMap,this.iridescenceIOR=o.iridescenceIOR,this.iridescenceThicknessRange=An(o.iridescenceThicknessRange),this.iridescenceThicknessMap=o.iridescenceThicknessMap,this.sheen=o.sheen,this.sheenColor.copy(o.sheenColor),this.sheenColorMap=o.sheenColorMap,this.sheenRoughness=o.sheenRoughness,this.sheenRoughnessMap=o.sheenRoughnessMap,this.transmission=o.transmission,this.transmissionMap=o.transmissionMap,this.thickness=o.thickness,this.thicknessMap=o.thicknessMap,this.attenuationDistance=o.attenuationDistance,this.attenuationColor.copy(o.attenuationColor),this.specularIntensity=o.specularIntensity,this.specularIntensityMap=o.specularIntensityMap,this.specularColor.copy(o.specularColor),this.specularColorMap=o.specularColorMap,this}}]),t}(DA),uv=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this)).isMeshLambertMaterial=!0,o.type="MeshLambertMaterial",o.color=new Yt(16777215),o.map=null,o.lightMap=null,o.lightMapIntensity=1,o.aoMap=null,o.aoMapIntensity=1,o.emissive=new Yt(0),o.emissiveIntensity=1,o.emissiveMap=null,o.bumpMap=null,o.bumpScale=1,o.normalMap=null,o.normalMapType=0,o.normalScale=new Ye(1,1),o.displacementMap=null,o.displacementScale=1,o.displacementBias=0,o.specularMap=null,o.alphaMap=null,o.envMap=null,o.combine=0,o.reflectivity=1,o.refractionRatio=.98,o.wireframe=!1,o.wireframeLinewidth=1,o.wireframeLinecap="round",o.wireframeLinejoin="round",o.flatShading=!1,o.fog=!0,o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return Ce(Ue(t.prototype),"copy",this).call(this,o),this.color.copy(o.color),this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.flatShading=o.flatShading,this.fog=o.fog,this}}]),t}(qs);function ns(n,a,t){return AA(n)?new n.constructor(n.subarray(a,void 0!==t?t:n.length)):n.slice(a,t)}function wf(n,a,t){return!n||!t&&n.constructor===a?n:"number"==typeof a.BYTES_PER_ELEMENT?new a(n):Array.prototype.slice.call(n)}function AA(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function RN(n){for(var t=n.length,r=new Array(t),o=0;o!==t;++o)r[o]=o;return r.sort(function(u,f){return n[u]-n[f]}),r}function MA(n,a,t){for(var r=n.length,o=new n.constructor(r),u=0,f=0;f!==r;++u)for(var p=t[u]*a,v=0;v!==a;++v)o[f++]=n[p+v];return o}function OA(n,a,t,r){for(var o=1,u=n[0];void 0!==u&&void 0===u[r];)u=n[o++];if(void 0!==u){var f=u[r];if(void 0!==f)if(Array.isArray(f))do{void 0!==(f=u[r])&&(a.push(u.time),t.push.apply(t,f)),u=n[o++]}while(void 0!==u);else if(void 0!==f.toArray)do{void 0!==(f=u[r])&&(a.push(u.time),f.toArray(t,t.length)),u=n[o++]}while(void 0!==u);else do{void 0!==(f=u[r])&&(a.push(u.time),t.push(f)),u=n[o++]}while(void 0!==u)}}var Wy=function(){function n(a,t,r,o){k(this,n),this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0!==o?o:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return j(n,[{key:"evaluate",value:function(t){var r=this.parameterPositions,o=this._cachedIndex,u=r[o],f=r[o-1];e:{t:{var p;n:{r:if(!(t<u)){for(var v=o+2;;){if(void 0===u){if(t<f)break r;return this._cachedIndex=o=r.length,this.copySampleValue_(o-1)}if(o===v)break;if(f=u,t<(u=r[++o]))break t}p=r.length;break n}if(t>=f)break e;var g=r[1];t<g&&(o=2,f=g);for(var y=o-2;;){if(void 0===f)return this._cachedIndex=0,this.copySampleValue_(0);if(o===y)break;if(u=f,t>=(f=r[--o-1]))break t}p=o,o=0}for(;o<p;){var _=o+p>>>1;t<r[_]?p=_:o=_+1}if(u=r[o],void 0===(f=r[o-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===u)return this._cachedIndex=o=r.length,this.copySampleValue_(o-1)}this._cachedIndex=o,this.intervalChanged_(o,f,u)}return this.interpolate_(o,f,t,u)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(t){for(var r=this.resultBuffer,o=this.sampleValues,u=this.valueSize,f=t*u,p=0;p!==u;++p)r[p]=o[f+p];return r}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),n}(),eq=function(n){ve(t,n);var a=me(t);function t(r,o,u,f){var p;return k(this,t),(p=a.call(this,r,o,u,f))._weightPrev=-0,p._offsetPrev=-0,p._weightNext=-0,p._offsetNext=-0,p.DefaultSettings_={endingStart:Nh,endingEnd:Nh},p}return j(t,[{key:"intervalChanged_",value:function(o,u,f){var p=this.parameterPositions,v=o-2,g=o+1,y=p[v],_=p[g];if(void 0===y)switch(this.getSettings_().endingStart){case kh:v=o,y=2*u-f;break;case 2402:y=u+p[v=p.length-2]-p[v+1];break;default:v=o,y=f}if(void 0===_)switch(this.getSettings_().endingEnd){case kh:g=o,_=2*f-u;break;case 2402:g=1,_=f+p[1]-p[0];break;default:g=o-1,_=u}var C=.5*(f-u),S=this.valueSize;this._weightPrev=C/(u-y),this._weightNext=C/(_-f),this._offsetPrev=v*S,this._offsetNext=g*S}},{key:"interpolate_",value:function(o,u,f,p){for(var v=this.resultBuffer,g=this.sampleValues,y=this.valueSize,_=o*y,C=_-y,S=this._offsetPrev,x=this._offsetNext,b=this._weightPrev,E=this._weightNext,D=(f-u)/(p-u),A=D*D,M=A*D,O=-b*M+2*b*A-b*D,I=(1+b)*M+(-1.5-2*b)*A+(-.5+b)*D+1,B=(-1-E)*M+(1.5+E)*A+.5*D,z=E*M-E*A,P=0;P!==y;++P)v[P]=O*g[S+P]+I*g[C+P]+B*g[_+P]+z*g[x+P];return v}}]),t}(Wy),TN=function(n){ve(t,n);var a=me(t);function t(r,o,u,f){return k(this,t),a.call(this,r,o,u,f)}return j(t,[{key:"interpolate_",value:function(o,u,f,p){for(var v=this.resultBuffer,g=this.sampleValues,y=this.valueSize,_=o*y,C=_-y,S=(f-u)/(p-u),x=1-S,b=0;b!==y;++b)v[b]=g[C+b]*x+g[_+b]*S;return v}}]),t}(Wy),tq=function(n){ve(t,n);var a=me(t);function t(r,o,u,f){return k(this,t),a.call(this,r,o,u,f)}return j(t,[{key:"interpolate_",value:function(o){return this.copySampleValue_(o-1)}}]),t}(Wy),bu=function(){function n(a,t,r,o){if(k(this,n),void 0===a)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a,this.times=wf(t,this.TimeBufferType),this.values=wf(r,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}return j(n,[{key:"InterpolantFactoryMethodDiscrete",value:function(t){return new tq(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodLinear",value:function(t){return new TN(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodSmooth",value:function(t){return new eq(this.times,this.values,this.getValueSize(),t)}},{key:"setInterpolation",value:function(t){var r;switch(t){case _y:r=this.InterpolantFactoryMethodDiscrete;break;case Fh:r=this.InterpolantFactoryMethodLinear;break;case 2302:r=this.InterpolantFactoryMethodSmooth}if(void 0===r){var o="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(o);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",o),this}return this.createInterpolant=r,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _y;case this.InterpolantFactoryMethodLinear:return Fh;case this.InterpolantFactoryMethodSmooth:return 2302}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(t){if(0!==t)for(var r=this.times,o=0,u=r.length;o!==u;++o)r[o]+=t;return this}},{key:"scale",value:function(t){if(1!==t)for(var r=this.times,o=0,u=r.length;o!==u;++o)r[o]*=t;return this}},{key:"trim",value:function(t,r){for(var o=this.times,u=o.length,f=0,p=u-1;f!==u&&o[f]<t;)++f;for(;-1!==p&&o[p]>r;)--p;if(++p,0!==f||p!==u){f>=p&&(f=(p=Math.max(p,1))-1);var v=this.getValueSize();this.times=ns(o,f,p),this.values=ns(this.values,f*v,p*v)}return this}},{key:"validate",value:function(){var t=!0,r=this.getValueSize();r-Math.floor(r)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var o=this.times,u=this.values,f=o.length;0===f&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var p=null,v=0;v!==f;v++){var g=o[v];if("number"==typeof g&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,v,g),t=!1;break}if(null!==p&&p>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,v,g,p),t=!1;break}p=g}if(void 0!==u&&AA(u))for(var y=0,_=u.length;y!==_;++y){var C=u[y];if(isNaN(C)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,y,C),t=!1;break}}return t}},{key:"optimize",value:function(){for(var t=ns(this.times),r=ns(this.values),o=this.getValueSize(),u=2302===this.getInterpolation(),f=t.length-1,p=1,v=1;v<f;++v){var g=!1,y=t[v];if(y!==t[v+1]&&(1!==v||y!==t[0]))if(u)g=!0;else for(var C=v*o,S=C-o,x=C+o,b=0;b!==o;++b){var E=r[C+b];if(E!==r[S+b]||E!==r[x+b]){g=!0;break}}if(g){if(v!==p){t[p]=t[v];for(var D=v*o,A=p*o,M=0;M!==o;++M)r[A+M]=r[D+M]}++p}}if(f>0){t[p]=t[f];for(var O=f*o,I=p*o,B=0;B!==o;++B)r[I+B]=r[O+B];++p}return p!==t.length?(this.times=ns(t,0,p),this.values=ns(r,0,p*o)):(this.times=t,this.values=r),this}},{key:"clone",value:function(){var t=ns(this.times,0),r=ns(this.values,0),u=new(0,this.constructor)(this.name,t,r);return u.createInterpolant=this.createInterpolant,u}}],[{key:"toJSON",value:function(t){var o,r=t.constructor;if(r.toJSON!==this.toJSON)o=r.toJSON(t);else{o={name:t.name,times:wf(t.times,Array),values:wf(t.values,Array)};var u=t.getInterpolation();u!==t.DefaultInterpolation&&(o.interpolation=u)}return o.type=t.ValueTypeName,o}}]),n}();bu.prototype.TimeBufferType=Float32Array,bu.prototype.ValueBufferType=Float32Array,bu.prototype.DefaultInterpolation=Fh;var lv=function(n){ve(t,n);var a=me(t);function t(){return k(this,t),a.apply(this,arguments)}return t}(bu);lv.prototype.ValueTypeName="bool",lv.prototype.ValueBufferType=Array,lv.prototype.DefaultInterpolation=_y,lv.prototype.InterpolantFactoryMethodLinear=void 0,lv.prototype.InterpolantFactoryMethodSmooth=void 0;var DN=function(n){ve(t,n);var a=me(t);function t(){return k(this,t),a.apply(this,arguments)}return t}(bu);DN.prototype.ValueTypeName="color";var Uy=function(n){ve(t,n);var a=me(t);function t(){return k(this,t),a.apply(this,arguments)}return t}(bu);Uy.prototype.ValueTypeName="number";var nq=function(n){ve(t,n);var a=me(t);function t(r,o,u,f){return k(this,t),a.call(this,r,o,u,f)}return j(t,[{key:"interpolate_",value:function(o,u,f,p){for(var v=this.resultBuffer,g=this.sampleValues,y=this.valueSize,_=(f-u)/(p-u),C=o*y,S=C+y;C!==S;C+=4)no.slerpFlat(v,0,g,C-y,g,C,_);return v}}]),t}(Wy),Sf=function(n){ve(t,n);var a=me(t);function t(){return k(this,t),a.apply(this,arguments)}return j(t,[{key:"InterpolantFactoryMethodLinear",value:function(o){return new nq(this.times,this.values,this.getValueSize(),o)}}]),t}(bu);Sf.prototype.ValueTypeName="quaternion",Sf.prototype.DefaultInterpolation=Fh,Sf.prototype.InterpolantFactoryMethodSmooth=void 0;var cv=function(n){ve(t,n);var a=me(t);function t(){return k(this,t),a.apply(this,arguments)}return t}(bu);cv.prototype.ValueTypeName="string",cv.prototype.ValueBufferType=Array,cv.prototype.DefaultInterpolation=_y,cv.prototype.InterpolantFactoryMethodLinear=void 0,cv.prototype.InterpolantFactoryMethodSmooth=void 0;var zy=function(n){ve(t,n);var a=me(t);function t(){return k(this,t),a.apply(this,arguments)}return t}(bu);zy.prototype.ValueTypeName="vector";var PA=function(){function n(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;k(this,n),this.name=a,this.tracks=r,this.duration=t,this.blendMode=o,this.uuid=Qa(),this.duration<0&&this.resetDuration()}return j(n,[{key:"resetDuration",value:function(){for(var r=0,o=0,u=this.tracks.length;o!==u;++o){var f=this.tracks[o];r=Math.max(r,f.times[f.times.length-1])}return this.duration=r,this}},{key:"trim",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var t=!0,r=0;r<this.tracks.length;r++)t=t&&this.tracks[r].validate();return t}},{key:"optimize",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},{key:"clone",value:function(){for(var t=[],r=0;r<this.tracks.length;r++)t.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(t){for(var r=[],o=t.tracks,u=1/(t.fps||1),f=0,p=o.length;f!==p;++f)r.push(iq(o[f]).scale(u));var v=new this(t.name,t.duration,r,t.blendMode);return v.uuid=t.uuid,v}},{key:"toJSON",value:function(t){for(var r=[],o=t.tracks,u={name:t.name,duration:t.duration,tracks:r,uuid:t.uuid,blendMode:t.blendMode},f=0,p=o.length;f!==p;++f)r.push(bu.toJSON(o[f]));return u}},{key:"CreateFromMorphTargetSequence",value:function(t,r,o,u){for(var f=r.length,p=[],v=0;v<f;v++){var g=[],y=[];g.push((v+f-1)%f,v,(v+1)%f),y.push(0,1,0);var _=RN(g);g=MA(g,1,_),y=MA(y,1,_),!u&&0===g[0]&&(g.push(f),y.push(y[0])),p.push(new Uy(".morphTargetInfluences["+r[v].name+"]",g,y).scale(1/o))}return new this(t,-1,p)}},{key:"findByName",value:function(t,r){var o=t;Array.isArray(t)||(o=t.geometry&&t.geometry.animations||t.animations);for(var f=0;f<o.length;f++)if(o[f].name===r)return o[f];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(t,r,o){for(var u={},f=/^([\w-]*?)([\d]+)$/,p=0,v=t.length;p<v;p++){var g=t[p],y=g.name.match(f);if(y&&y.length>1){var _=y[1],C=u[_];C||(u[_]=C=[]),C.push(g)}}var S=[];for(var x in u)S.push(this.CreateFromMorphTargetSequence(x,u[x],r,o));return S}},{key:"parseAnimation",value:function(t,r){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var o=function(P,W,X,ne,de){if(0!==X.length){var ce=[],G=[];OA(X,ce,G,ne),0!==ce.length&&de.push(new P(W,ce,G))}},u=[],f=t.name||"default",p=t.fps||30,v=t.blendMode,g=t.length||-1,y=t.hierarchy||[],_=0;_<y.length;_++){var C=y[_].keys;if(C&&0!==C.length)if(C[0].morphTargets){var S={},x=void 0;for(x=0;x<C.length;x++)if(C[x].morphTargets)for(var b=0;b<C[x].morphTargets.length;b++)S[C[x].morphTargets[b]]=-1;for(var E in S){for(var D=[],A=[],M=0;M!==C[x].morphTargets.length;++M){var O=C[x];D.push(O.time),A.push(O.morphTarget===E?1:0)}u.push(new Uy(".morphTargetInfluence["+E+"]",D,A))}g=S.length*p}else{var I=".bones["+r[_].name+"]";o(zy,I+".position",C,"pos",u),o(Sf,I+".quaternion",C,"rot",u),o(zy,I+".scale",C,"scl",u)}}return 0===u.length?null:new this(f,g,u,v)}}]),n}();function iq(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var a=function(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Uy;case"vector":case"vector2":case"vector3":case"vector4":return zy;case"color":return DN;case"quaternion":return Sf;case"bool":case"boolean":return lv;case"string":return cv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){var t=[],r=[];OA(n.keys,t,r,"value"),n.times=t,n.values=r}return void 0!==a.parse?a.parse(n):new a(n.name,n.times,n.values,n.interpolation)}var dv={enabled:!1,files:{},add:function(a,t){!1!==this.enabled&&(this.files[a]=t)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},oq=function n(a,t,r){k(this,n);var o=this,u=!1,f=0,p=0,v=void 0,g=[];this.onStart=void 0,this.onLoad=a,this.onProgress=t,this.onError=r,this.itemStart=function(y){p++,!1===u&&void 0!==o.onStart&&o.onStart(y,f,p),u=!0},this.itemEnd=function(y){f++,void 0!==o.onProgress&&o.onProgress(y,f,p),f===p&&(u=!1,void 0!==o.onLoad&&o.onLoad())},this.itemError=function(y){void 0!==o.onError&&o.onError(y)},this.resolveURL=function(y){return v?v(y):y},this.setURLModifier=function(y){return v=y,this},this.addHandler=function(y,_){return g.push(y,_),this},this.removeHandler=function(y){var _=g.indexOf(y);return-1!==_&&g.splice(_,2),this},this.getHandler=function(y){for(var _=0,C=g.length;_<C;_+=2){var S=g[_],x=g[_+1];if(S.global&&(S.lastIndex=0),S.test(y))return x}return null}},aq=new oq,jy=function(){function n(a){k(this,n),this.manager=void 0!==a?a:aq,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return j(n,[{key:"load",value:function(){}},{key:"loadAsync",value:function(t,r){var o=this;return new Promise(function(u,f){o.load(t,u,r,f)})}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(t){return this.crossOrigin=t,this}},{key:"setWithCredentials",value:function(t){return this.withCredentials=t,this}},{key:"setPath",value:function(t){return this.path=t,this}},{key:"setResourcePath",value:function(t){return this.resourcePath=t,this}},{key:"setRequestHeader",value:function(t){return this.requestHeader=t,this}}]),n}(),vl={},sq=function(n){ve(t,n);var a=me(t);function t(r,o){var u;return k(this,t),(u=a.call(this,r)).response=o,u}return t}(Sr(Error)),AN=function(n){ve(t,n);var a=me(t);function t(r){return k(this,t),a.call(this,r)}return j(t,[{key:"load",value:function(o,u,f,p){var v=this;void 0===o&&(o=""),void 0!==this.path&&(o=this.path+o),o=this.manager.resolveURL(o);var g=dv.get(o);if(void 0!==g)return this.manager.itemStart(o),setTimeout(function(){u&&u(g),v.manager.itemEnd(o)},0),g;if(void 0===vl[o]){vl[o]=[],vl[o].push({onLoad:u,onProgress:f,onError:p});var y=new Request(o,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),_=this.mimeType,C=this.responseType;fetch(y).then(function(S){if(200===S.status||0===S.status){if(0===S.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===S.body||void 0===S.body.getReader)return S;var x=vl[o],b=S.body.getReader(),E=S.headers.get("Content-Length")||S.headers.get("X-File-Size"),D=E?parseInt(E):0,A=0!==D,M=0,O=new ReadableStream({start:function(B){!function z(){b.read().then(function(P){var X=P.value;if(P.done)B.close();else{for(var ne=new ProgressEvent("progress",{lengthComputable:A,loaded:M+=X.byteLength,total:D}),de=0,ce=x.length;de<ce;de++){var G=x[de];G.onProgress&&G.onProgress(ne)}B.enqueue(X),z()}})}()}});return new Response(O)}throw new sq('fetch for "'.concat(S.url,'" responded with ').concat(S.status,": ").concat(S.statusText),S)}).then(function(S){switch(C){case"arraybuffer":return S.arrayBuffer();case"blob":return S.blob();case"document":return S.text().then(function(A){return(new DOMParser).parseFromString(A,_)});case"json":return S.json();default:if(void 0===_)return S.text();var b=/charset="?([^;"\s]*)"?/i.exec(_),E=b&&b[1]?b[1].toLowerCase():void 0,D=new TextDecoder(E);return S.arrayBuffer().then(function(A){return D.decode(A)})}}).then(function(S){dv.add(o,S);var x=vl[o];delete vl[o];for(var b=0,E=x.length;b<E;b++){var D=x[b];D.onLoad&&D.onLoad(S)}}).catch(function(S){var x=vl[o];if(void 0===x)throw v.manager.itemError(o),S;delete vl[o];for(var b=0,E=x.length;b<E;b++){var D=x[b];D.onError&&D.onError(S)}v.manager.itemError(o)}).finally(function(){v.manager.itemEnd(o)}),this.manager.itemStart(o)}else vl[o].push({onLoad:u,onProgress:f,onError:p})}},{key:"setResponseType",value:function(o){return this.responseType=o,this}},{key:"setMimeType",value:function(o){return this.mimeType=o,this}}]),t}(jy),uq=function(n){ve(t,n);var a=me(t);function t(r){return k(this,t),a.call(this,r)}return j(t,[{key:"load",value:function(o,u,f,p){void 0!==this.path&&(o=this.path+o),o=this.manager.resolveURL(o);var v=this,g=dv.get(o);if(void 0!==g)return v.manager.itemStart(o),setTimeout(function(){u&&u(g),v.manager.itemEnd(o)},0),g;var y=Ey("img");function _(){S(),dv.add(o,this),u&&u(this),v.manager.itemEnd(o)}function C(x){S(),p&&p(x),v.manager.itemError(o),v.manager.itemEnd(o)}function S(){y.removeEventListener("load",_,!1),y.removeEventListener("error",C,!1)}return y.addEventListener("load",_,!1),y.addEventListener("error",C,!1),"data:"!==o.slice(0,5)&&void 0!==this.crossOrigin&&(y.crossOrigin=this.crossOrigin),v.manager.itemStart(o),y.src=o,y}}]),t}(jy),lq=function(n){ve(t,n);var a=me(t);function t(r){return k(this,t),a.call(this,r)}return j(t,[{key:"load",value:function(o,u,f,p){var v=new wu,g=new uq(this.manager);return g.setCrossOrigin(this.crossOrigin),g.setPath(this.path),g.load(o,function(y){v.image=y,v.needsUpdate=!0,void 0!==u&&u(v)},f,p),v}}]),t}(jy),cE=function(n){ve(t,n);var a=me(t);function t(r){var o,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return k(this,t),(o=a.call(this)).isLight=!0,o.type="Light",o.color=new Yt(r),o.intensity=u,o}return j(t,[{key:"dispose",value:function(){}},{key:"copy",value:function(o,u){return Ce(Ue(t.prototype),"copy",this).call(this,o,u),this.color.copy(o.color),this.intensity=o.intensity,this}},{key:"toJSON",value:function(o){var u=Ce(Ue(t.prototype),"toJSON",this).call(this,o);return u.object.color=this.color.getHex(),u.object.intensity=this.intensity,void 0!==this.groundColor&&(u.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(u.object.distance=this.distance),void 0!==this.angle&&(u.object.angle=this.angle),void 0!==this.decay&&(u.object.decay=this.decay),void 0!==this.penumbra&&(u.object.penumbra=this.penumbra),void 0!==this.shadow&&(u.object.shadow=this.shadow.toJSON()),u}}]),t}(_o),IA=new Sn,MN=new J,ON=new J,LA=function(){function n(a){k(this,n),this.camera=a,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ye(512,512),this.map=null,this.mapPass=null,this.matrix=new Sn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new iA,this._frameExtents=new Ye(1,1),this._viewportCount=1,this._viewports=[new wr(0,0,1,1)]}return j(n,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(t){var r=this.camera,o=this.matrix;MN.setFromMatrixPosition(t.matrixWorld),r.position.copy(MN),ON.setFromMatrixPosition(t.target.matrixWorld),r.lookAt(ON),r.updateMatrixWorld(),IA.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(IA),o.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),o.multiply(IA)}},{key:"getViewport",value:function(t){return this._viewports[t]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}]),n}(),cq=function(n){ve(t,n);var a=me(t);function t(){var r;return k(this,t),(r=a.call(this,new ti(50,1,.5,500))).isSpotLightShadow=!0,r.focus=1,r}return j(t,[{key:"updateMatrices",value:function(o){var u=this.camera,f=2*wy*o.angle*this.focus,p=this.mapSize.width/this.mapSize.height,v=o.distance||u.far;(f!==u.fov||p!==u.aspect||v!==u.far)&&(u.fov=f,u.aspect=p,u.far=v,u.updateProjectionMatrix()),Ce(Ue(t.prototype),"updateMatrices",this).call(this,o)}},{key:"copy",value:function(o){return Ce(Ue(t.prototype),"copy",this).call(this,o),this.focus=o.focus,this}}]),t}(LA),dq=function(n){ve(t,n);var a=me(t);function t(r,o){var u,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return k(this,t),(u=a.call(this,r,o)).isSpotLight=!0,u.type="SpotLight",u.position.copy(_o.DefaultUp),u.updateMatrix(),u.target=new _o,u.distance=f,u.angle=p,u.penumbra=v,u.decay=g,u.map=null,u.shadow=new cq,u}return j(t,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(o){this.intensity=o/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(o,u){return Ce(Ue(t.prototype),"copy",this).call(this,o,u),this.distance=o.distance,this.angle=o.angle,this.penumbra=o.penumbra,this.decay=o.decay,this.target=o.target.clone(),this.shadow=o.shadow.clone(),this}}]),t}(cE),PN=new Sn,qy=new J,FA=new J,fq=function(n){ve(t,n);var a=me(t);function t(){var r;return k(this,t),(r=a.call(this,new ti(90,1,.5,500))).isPointLightShadow=!0,r._frameExtents=new Ye(4,2),r._viewportCount=6,r._viewports=[new wr(2,1,1,1),new wr(0,1,1,1),new wr(3,1,1,1),new wr(1,1,1,1),new wr(3,0,1,1),new wr(1,0,1,1)],r._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],r._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)],r}return j(t,[{key:"updateMatrices",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,f=this.camera,p=this.matrix,v=o.distance||f.far;v!==f.far&&(f.far=v,f.updateProjectionMatrix()),qy.setFromMatrixPosition(o.matrixWorld),f.position.copy(qy),FA.copy(f.position),FA.add(this._cubeDirections[u]),f.up.copy(this._cubeUps[u]),f.lookAt(FA),f.updateMatrixWorld(),p.makeTranslation(-qy.x,-qy.y,-qy.z),PN.multiplyMatrices(f.projectionMatrix,f.matrixWorldInverse),this._frustum.setFromProjectionMatrix(PN)}}]),t}(LA),pq=function(n){ve(t,n);var a=me(t);function t(r,o){var u,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return k(this,t),(u=a.call(this,r,o)).isPointLight=!0,u.type="PointLight",u.distance=f,u.decay=p,u.shadow=new fq,u}return j(t,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(o){this.intensity=o/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(o,u){return Ce(Ue(t.prototype),"copy",this).call(this,o,u),this.distance=o.distance,this.decay=o.decay,this.shadow=o.shadow.clone(),this}}]),t}(cE),hq=function(n){ve(t,n);var a=me(t);function t(){var r;return k(this,t),(r=a.call(this,new aA(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,r}return t}(LA),Ef=function(n){ve(t,n);var a=me(t);function t(r,o){var u;return k(this,t),(u=a.call(this,r,o)).isDirectionalLight=!0,u.type="DirectionalLight",u.position.copy(_o.DefaultUp),u.updateMatrix(),u.target=new _o,u.shadow=new hq,u}return j(t,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(o){return Ce(Ue(t.prototype),"copy",this).call(this,o),this.target=o.target.clone(),this.shadow=o.shadow.clone(),this}}]),t}(cE),bf=function(n){ve(t,n);var a=me(t);function t(r,o){var u;return k(this,t),(u=a.call(this,r,o)).isAmbientLight=!0,u.type="AmbientLight",u}return t}(cE),xf=function(){function n(){k(this,n)}return j(n,null,[{key:"decodeText",value:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var r="",o=0,u=t.length;o<u;o++)r+=String.fromCharCode(t[o]);try{return decodeURIComponent(escape(r))}catch(f){return r}}},{key:"extractUrlBase",value:function(t){var r=t.lastIndexOf("/");return-1===r?"./":t.slice(0,r+1)}},{key:"resolveURL",value:function(t,r){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(r)&&/^\//.test(t)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:r+t)}}]),n}(),vq=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this,r)).isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),o.options={premultiplyAlpha:"none"},o}return j(t,[{key:"setOptions",value:function(o){return this.options=o,this}},{key:"load",value:function(o,u,f,p){void 0===o&&(o=""),void 0!==this.path&&(o=this.path+o),o=this.manager.resolveURL(o);var v=this,g=dv.get(o);if(void 0!==g)return v.manager.itemStart(o),setTimeout(function(){u&&u(g),v.manager.itemEnd(o)},0),g;var y={};y.credentials="anonymous"===this.crossOrigin?"same-origin":"include",y.headers=this.requestHeader,fetch(o,y).then(function(_){return _.blob()}).then(function(_){return createImageBitmap(_,Object.assign(v.options,{colorSpaceConversion:"none"}))}).then(function(_){dv.add(o,_),u&&u(_),v.manager.itemEnd(o)}).catch(function(_){p&&p(_),v.manager.itemError(o),v.manager.itemEnd(o)}),v.manager.itemStart(o)}}]),t}(jy),fv=function(){function n(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];k(this,n),this.autoStart=a,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return j(n,[{key:"start",value:function(){this.startTime=IN(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var r=IN();t=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=t}return t}}]),n}();function IN(){return("undefined"==typeof performance?Date:performance).now()}var gq=function(){function n(a,t,r){var o,u,f;switch(k(this,n),this.binding=a,this.valueSize=r,t){case"quaternion":o=this._slerp,u=this._slerpAdditive,f=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":o=this._select,u=this._select,f=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:o=this._lerp,u=this._lerpAdditive,f=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=u,this._setIdentity=f,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return j(n,[{key:"accumulate",value:function(t,r){var o=this.buffer,u=this.valueSize,f=t*u+u,p=this.cumulativeWeight;if(0===p){for(var v=0;v!==u;++v)o[f+v]=o[v];p=r}else this._mixBufferRegion(o,f,0,r/(p+=r),u);this.cumulativeWeight=p}},{key:"accumulateAdditive",value:function(t){var r=this.buffer,o=this.valueSize,u=o*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(r,u,0,t,o),this.cumulativeWeightAdditive+=t}},{key:"apply",value:function(t){var r=this.valueSize,o=this.buffer,u=t*r+r,f=this.cumulativeWeight,p=this.cumulativeWeightAdditive,v=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,f<1&&this._mixBufferRegion(o,u,r*this._origIndex,1-f,r),p>0&&this._mixBufferRegionAdditive(o,u,this._addIndex*r,1,r);for(var y=r,_=r+r;y!==_;++y)if(o[y]!==o[y+r]){v.setValue(o,u);break}}},{key:"saveOriginalState",value:function(){var r=this.buffer,o=this.valueSize,u=o*this._origIndex;this.binding.getValue(r,u);for(var f=o,p=u;f!==p;++f)r[f]=r[u+f%o];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){this.binding.setValue(this.buffer,3*this.valueSize)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var t=this._addIndex*this.valueSize,r=t+this.valueSize,o=t;o<r;o++)this.buffer[o]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var t=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize,o=0;o<this.valueSize;o++)this.buffer[r+o]=this.buffer[t+o]}},{key:"_select",value:function(t,r,o,u,f){if(u>=.5)for(var p=0;p!==f;++p)t[r+p]=t[o+p]}},{key:"_slerp",value:function(t,r,o,u){no.slerpFlat(t,r,t,r,t,o,u)}},{key:"_slerpAdditive",value:function(t,r,o,u,f){var p=this._workIndex*f;no.multiplyQuaternionsFlat(t,p,t,r,t,o),no.slerpFlat(t,r,t,r,t,p,u)}},{key:"_lerp",value:function(t,r,o,u,f){for(var p=1-u,v=0;v!==f;++v){var g=r+v;t[g]=t[g]*p+t[o+v]*u}}},{key:"_lerpAdditive",value:function(t,r,o,u,f){for(var p=0;p!==f;++p){var v=r+p;t[v]=t[v]+t[o+p]*u}}}]),n}(),NA="\\[\\]\\.:\\/",mq=new RegExp("["+NA+"]","g"),kA="[^"+NA+"]",yq="[^"+NA.replace("\\.","")+"]",Eq=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",kA)+/(WCOD+)?/.source.replace("WCOD",yq)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",kA)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",kA)+"$"),bq=["material","materials","bones","map"],xq=function(){function n(a,t,r){k(this,n);var o=r||kr.parseTrackName(t);this._targetGroup=a,this._bindings=a.subscribe_(t,o)}return j(n,[{key:"getValue",value:function(t,r){this.bind();var u=this._bindings[this._targetGroup.nCachedObjects_];void 0!==u&&u.getValue(t,r)}},{key:"setValue",value:function(t,r){for(var o=this._bindings,u=this._targetGroup.nCachedObjects_,f=o.length;u!==f;++u)o[u].setValue(t,r)}},{key:"bind",value:function(){for(var t=this._bindings,r=this._targetGroup.nCachedObjects_,o=t.length;r!==o;++r)t[r].bind()}},{key:"unbind",value:function(){for(var t=this._bindings,r=this._targetGroup.nCachedObjects_,o=t.length;r!==o;++r)t[r].unbind()}}]),n}(),kr=function(){var n=function(){function a(t,r,o){k(this,a),this.path=r,this.parsedPath=o||a.parseTrackName(r),this.node=a.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return j(a,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(r,o){r[o]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(r,o){for(var u=this.resolvedProperty,f=0,p=u.length;f!==p;++f)r[o++]=u[f]}},{key:"_getValue_arrayElement",value:function(r,o){r[o]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(r,o){this.resolvedProperty.toArray(r,o)}},{key:"_setValue_direct",value:function(r,o){this.targetObject[this.propertyName]=r[o]}},{key:"_setValue_direct_setNeedsUpdate",value:function(r,o){this.targetObject[this.propertyName]=r[o],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(r,o){this.targetObject[this.propertyName]=r[o],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(r,o){for(var u=this.resolvedProperty,f=0,p=u.length;f!==p;++f)u[f]=r[o++]}},{key:"_setValue_array_setNeedsUpdate",value:function(r,o){for(var u=this.resolvedProperty,f=0,p=u.length;f!==p;++f)u[f]=r[o++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(r,o){for(var u=this.resolvedProperty,f=0,p=u.length;f!==p;++f)u[f]=r[o++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(r,o){this.resolvedProperty[this.propertyIndex]=r[o]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(r,o){this.resolvedProperty[this.propertyIndex]=r[o],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(r,o){this.resolvedProperty[this.propertyIndex]=r[o],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(r,o){this.resolvedProperty.fromArray(r,o)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(r,o){this.resolvedProperty.fromArray(r,o),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(r,o){this.resolvedProperty.fromArray(r,o),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(r,o){this.bind(),this.getValue(r,o)}},{key:"_setValue_unbound",value:function(r,o){this.bind(),this.setValue(r,o)}},{key:"bind",value:function(){var r=this.node,o=this.parsedPath,u=o.objectName,f=o.propertyName,p=o.propertyIndex;if(r||(r=a.findNode(this.rootNode,o.nodeName)||this.rootNode,this.node=r),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,r){if(u){var v=o.objectIndex;switch(u){case"materials":if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);r=r.material.materials;break;case"bones":if(!r.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);r=r.skeleton.bones;for(var g=0;g<r.length;g++)if(r[g].name===v){v=g;break}break;case"map":if("map"in r){r=r.map;break}if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);r=r.material.map;break;default:if(void 0===r[u])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);r=r[u]}if(void 0!==v){if(void 0===r[v])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,r);r=r[v]}}var y=r[f];if(void 0!==y){var C=this.Versioning.None;this.targetObject=r,void 0!==r.needsUpdate?C=this.Versioning.NeedsUpdate:void 0!==r.matrixWorldNeedsUpdate&&(C=this.Versioning.MatrixWorldNeedsUpdate);var S=this.BindingType.Direct;if(void 0!==p){if("morphTargetInfluences"===f){if(!r.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!r.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==r.morphTargetDictionary[p]&&(p=r.morphTargetDictionary[p])}S=this.BindingType.ArrayElement,this.resolvedProperty=y,this.propertyIndex=p}else void 0!==y.fromArray&&void 0!==y.toArray?(S=this.BindingType.HasFromToArray,this.resolvedProperty=y):Array.isArray(y)?(S=this.BindingType.EntireArray,this.resolvedProperty=y):this.propertyName=f;this.getValue=this.GetterByBindingType[S],this.setValue=this.SetterByBindingTypeAndVersioning[S][C]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+o.nodeName+"."+f+" but it wasn't found.",r)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(r,o,u){return r&&r.isAnimationObjectGroup?new a.Composite(r,o,u):new a(r,o,u)}},{key:"sanitizeNodeName",value:function(r){return r.replace(/\s/g,"_").replace(mq,"")}},{key:"parseTrackName",value:function(r){var o=Eq.exec(r);if(null===o)throw new Error("PropertyBinding: Cannot parse trackName: "+r);var u={nodeName:o[2],objectName:o[3],objectIndex:o[4],propertyName:o[5],propertyIndex:o[6]},f=u.nodeName&&u.nodeName.lastIndexOf(".");if(void 0!==f&&-1!==f){var p=u.nodeName.substring(f+1);-1!==bq.indexOf(p)&&(u.nodeName=u.nodeName.substring(0,f),u.objectName=p)}if(null===u.propertyName||0===u.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+r);return u}},{key:"findNode",value:function(r,o){if(void 0===o||""===o||"."===o||-1===o||o===r.name||o===r.uuid)return r;if(r.skeleton){var u=r.skeleton.getBoneByName(o);if(void 0!==u)return u}if(r.children){var p=function v(g){for(var y=0;y<g.length;y++){var _=g[y];if(_.name===o||_.uuid===o)return _;var C=v(_.children);if(C)return C}return null}(r.children);if(p)return p}return null}}]),a}();return n.Composite=xq,n}();kr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},kr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},kr.prototype.GetterByBindingType=[kr.prototype._getValue_direct,kr.prototype._getValue_array,kr.prototype._getValue_arrayElement,kr.prototype._getValue_toArray],kr.prototype.SetterByBindingTypeAndVersioning=[[kr.prototype._setValue_direct,kr.prototype._setValue_direct_setNeedsUpdate,kr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[kr.prototype._setValue_array,kr.prototype._setValue_array_setNeedsUpdate,kr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[kr.prototype._setValue_arrayElement,kr.prototype._setValue_arrayElement_setNeedsUpdate,kr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[kr.prototype._setValue_fromArray,kr.prototype._setValue_fromArray_setNeedsUpdate,kr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Rq=function(){function n(a,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;k(this,n),this._mixer=a,this._clip=t,this._localRoot=r,this.blendMode=o;for(var u=t.tracks,f=u.length,p=new Array(f),v={endingStart:Nh,endingEnd:Nh},g=0;g!==f;++g){var y=u[g].createInterpolant(null);p[g]=y,y.settings=v}this._interpolantSettings=v,this._interpolants=p,this._propertyBindings=new Array(f),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return j(n,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(t){return this._startTime=t,this}},{key:"setLoop",value:function(t,r){return this.loop=t,this.repetitions=r,this}},{key:"setEffectiveWeight",value:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(t){return this._scheduleFading(t,0,1)}},{key:"fadeOut",value:function(t){return this._scheduleFading(t,1,0)}},{key:"crossFadeFrom",value:function(t,r,o){if(t.fadeOut(r),this.fadeIn(r),o){var u=this._clip.duration,f=t._clip.duration,v=u/f;t.warp(1,f/u,r),this.warp(v,1,r)}return this}},{key:"crossFadeTo",value:function(t,r,o){return t.crossFadeFrom(this,r,o)}},{key:"stopFading",value:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"setEffectiveTimeScale",value:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}},{key:"syncWith",value:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}},{key:"halt",value:function(t){return this.warp(this._effectiveTimeScale,0,t)}},{key:"warp",value:function(t,r,o){var u=this._mixer,f=u.time,p=this.timeScale,v=this._timeScaleInterpolant;null===v&&(v=u._lendControlInterpolant(),this._timeScaleInterpolant=v);var g=v.parameterPositions,y=v.sampleValues;return g[0]=f,g[1]=f+o,y[0]=t/p,y[1]=r/p,this}},{key:"stopWarping",value:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(t,r,o,u){if(this.enabled){var f=this._startTime;if(null!==f){var p=(t-f)*o;p<0||0===o?r=0:(this._startTime=null,r=o*p)}r*=this._updateTimeScale(t);var v=this._updateTime(r),g=this._updateWeight(t);if(g>0){var y=this._interpolants,_=this._propertyBindings;if(2501===this.blendMode)for(var C=0,S=y.length;C!==S;++C)y[C].evaluate(v),_[C].accumulateAdditive(g);else for(var x=0,b=y.length;x!==b;++x)y[x].evaluate(v),_[x].accumulate(u,g)}}else this._updateWeight(t)}},{key:"_updateWeight",value:function(t){var r=0;if(this.enabled){r=this.weight;var o=this._weightInterpolant;if(null!==o){var u=o.evaluate(t)[0];r*=u,t>o.parameterPositions[1]&&(this.stopFading(),0===u&&(this.enabled=!1))}}return this._effectiveWeight=r,r}},{key:"_updateTimeScale",value:function(t){var r=0;if(!this.paused){r=this.timeScale;var o=this._timeScaleInterpolant;null!==o&&(r*=o.evaluate(t)[0],t>o.parameterPositions[1]&&(this.stopWarping(),0===r?this.paused=!0:this.timeScale=r))}return this._effectiveTimeScale=r,r}},{key:"_updateTime",value:function(t){var r=this._clip.duration,o=this.loop,u=this.time+t,f=this._loopCount,p=2202===o;if(0===t)return-1===f?u:p&&1==(1&f)?r-u:u;if(2200===o){-1===f&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(u>=r)u=r;else{if(!(u<0)){this.time=u;break e}u=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=u,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===f&&(t>=0?(f=0,this._setEndings(!0,0===this.repetitions,p)):this._setEndings(0===this.repetitions,!0,p)),u>=r||u<0){var v=Math.floor(u/r);u-=r*v,f+=Math.abs(v);var g=this.repetitions-f;if(g<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=u=t>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===g){var y=t<0;this._setEndings(y,!y,p)}else this._setEndings(!1,!1,p);this._loopCount=f,this.time=u,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:v})}}else this.time=u;if(p&&1==(1&f))return r-u}return u}},{key:"_setEndings",value:function(t,r,o){var u=this._interpolantSettings;o?(u.endingStart=kh,u.endingEnd=kh):(u.endingStart=t?this.zeroSlopeAtStart?kh:Nh:2402,u.endingEnd=r?this.zeroSlopeAtEnd?kh:Nh:2402)}},{key:"_scheduleFading",value:function(t,r,o){var u=this._mixer,f=u.time,p=this._weightInterpolant;null===p&&(p=u._lendControlInterpolant(),this._weightInterpolant=p);var v=p.parameterPositions,g=p.sampleValues;return v[0]=f,g[0]=r,v[1]=f+t,g[1]=o,this}}]),n}(),Tq=new Float32Array(1),GA=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this))._root=r,o._initMemoryManager(),o._accuIndex=0,o.time=0,o.timeScale=1,o}return j(t,[{key:"_bindAction",value:function(o,u){var f=o._localRoot||this._root,p=o._clip.tracks,v=p.length,g=o._propertyBindings,y=o._interpolants,_=f.uuid,C=this._bindingsByRootAndName,S=C[_];void 0===S&&(C[_]=S={});for(var x=0;x!==v;++x){var b=p[x],E=b.name,D=S[E];if(void 0!==D)++D.referenceCount,g[x]=D;else{if(void 0!==(D=g[x])){null===D._cacheIndex&&(++D.referenceCount,this._addInactiveBinding(D,_,E));continue}++(D=new gq(kr.create(f,E,u&&u._propertyBindings[x].binding.parsedPath),b.ValueTypeName,b.getValueSize())).referenceCount,this._addInactiveBinding(D,_,E),g[x]=D}y[x].resultBuffer=D.buffer}}},{key:"_activateAction",value:function(o){if(!this._isActiveAction(o)){if(null===o._cacheIndex){var u=(o._localRoot||this._root).uuid,f=o._clip.uuid,p=this._actionsByClip[f];this._bindAction(o,p&&p.knownActions[0]),this._addInactiveAction(o,f,u)}for(var v=o._propertyBindings,g=0,y=v.length;g!==y;++g){var _=v[g];0==_.useCount++&&(this._lendBinding(_),_.saveOriginalState())}this._lendAction(o)}}},{key:"_deactivateAction",value:function(o){if(this._isActiveAction(o)){for(var u=o._propertyBindings,f=0,p=u.length;f!==p;++f){var v=u[f];0==--v.useCount&&(v.restoreOriginalState(),this._takeBackBinding(v))}this._takeBackAction(o)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var o=this;this.stats={actions:{get total(){return o._actions.length},get inUse(){return o._nActiveActions}},bindings:{get total(){return o._bindings.length},get inUse(){return o._nActiveBindings}},controlInterpolants:{get total(){return o._controlInterpolants.length},get inUse(){return o._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(o){var u=o._cacheIndex;return null!==u&&u<this._nActiveActions}},{key:"_addInactiveAction",value:function(o,u,f){var p=this._actions,v=this._actionsByClip,g=v[u];if(void 0===g)g={knownActions:[o],actionByRoot:{}},o._byClipCacheIndex=0,v[u]=g;else{var y=g.knownActions;o._byClipCacheIndex=y.length,y.push(o)}o._cacheIndex=p.length,p.push(o),g.actionByRoot[f]=o}},{key:"_removeInactiveAction",value:function(o){var u=this._actions,f=u[u.length-1],p=o._cacheIndex;f._cacheIndex=p,u[p]=f,u.pop(),o._cacheIndex=null;var v=o._clip.uuid,g=this._actionsByClip,y=g[v],_=y.knownActions,C=_[_.length-1],S=o._byClipCacheIndex;C._byClipCacheIndex=S,_[S]=C,_.pop(),o._byClipCacheIndex=null,delete y.actionByRoot[(o._localRoot||this._root).uuid],0===_.length&&delete g[v],this._removeInactiveBindingsForAction(o)}},{key:"_removeInactiveBindingsForAction",value:function(o){for(var u=o._propertyBindings,f=0,p=u.length;f!==p;++f){var v=u[f];0==--v.referenceCount&&this._removeInactiveBinding(v)}}},{key:"_lendAction",value:function(o){var u=this._actions,f=o._cacheIndex,p=this._nActiveActions++,v=u[p];o._cacheIndex=p,u[p]=o,v._cacheIndex=f,u[f]=v}},{key:"_takeBackAction",value:function(o){var u=this._actions,f=o._cacheIndex,p=--this._nActiveActions,v=u[p];o._cacheIndex=p,u[p]=o,v._cacheIndex=f,u[f]=v}},{key:"_addInactiveBinding",value:function(o,u,f){var p=this._bindingsByRootAndName,v=this._bindings,g=p[u];void 0===g&&(p[u]=g={}),g[f]=o,o._cacheIndex=v.length,v.push(o)}},{key:"_removeInactiveBinding",value:function(o){var u=this._bindings,f=o.binding,p=f.rootNode.uuid,v=f.path,g=this._bindingsByRootAndName,y=g[p],_=u[u.length-1],C=o._cacheIndex;_._cacheIndex=C,u[C]=_,u.pop(),delete y[v],0===Object.keys(y).length&&delete g[p]}},{key:"_lendBinding",value:function(o){var u=this._bindings,f=o._cacheIndex,p=this._nActiveBindings++,v=u[p];o._cacheIndex=p,u[p]=o,v._cacheIndex=f,u[f]=v}},{key:"_takeBackBinding",value:function(o){var u=this._bindings,f=o._cacheIndex,p=--this._nActiveBindings,v=u[p];o._cacheIndex=p,u[p]=o,v._cacheIndex=f,u[f]=v}},{key:"_lendControlInterpolant",value:function(){var o=this._controlInterpolants,u=this._nActiveControlInterpolants++,f=o[u];return void 0===f&&((f=new TN(new Float32Array(2),new Float32Array(2),1,Tq)).__cacheIndex=u,o[u]=f),f}},{key:"_takeBackControlInterpolant",value:function(o){var u=this._controlInterpolants,f=o.__cacheIndex,p=--this._nActiveControlInterpolants,v=u[p];o.__cacheIndex=p,u[p]=o,v.__cacheIndex=f,u[f]=v}},{key:"clipAction",value:function(o,u,f){var p=u||this._root,v=p.uuid,g="string"==typeof o?PA.findByName(p,o):o,y=null!==g?g.uuid:o,_=this._actionsByClip[y],C=null;if(void 0===f&&(f=null!==g?g.blendMode:2500),void 0!==_){var S=_.actionByRoot[v];if(void 0!==S&&S.blendMode===f)return S;C=_.knownActions[0],null===g&&(g=C._clip)}if(null===g)return null;var x=new Rq(this,g,u,f);return this._bindAction(x,C),this._addInactiveAction(x,y,v),x}},{key:"existingAction",value:function(o,u){var f=u||this._root,p=f.uuid,v="string"==typeof o?PA.findByName(f,o):o,y=this._actionsByClip[v?v.uuid:o];return void 0!==y&&y.actionByRoot[p]||null}},{key:"stopAllAction",value:function(){for(var o=this._actions,f=this._nActiveActions-1;f>=0;--f)o[f].stop();return this}},{key:"update",value:function(o){for(var u=this._actions,f=this._nActiveActions,p=this.time+=o*=this.timeScale,v=Math.sign(o),g=this._accuIndex^=1,y=0;y!==f;++y)u[y]._update(p,o,v,g);for(var C=this._bindings,S=this._nActiveBindings,x=0;x!==S;++x)C[x].apply(g);return this}},{key:"setTime",value:function(o){this.time=0;for(var u=0;u<this._actions.length;u++)this._actions[u].time=0;return this.update(o)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(o){var u=this._actions,f=o.uuid,p=this._actionsByClip,v=p[f];if(void 0!==v){for(var g=v.knownActions,y=0,_=g.length;y!==_;++y){var C=g[y];this._deactivateAction(C);var S=C._cacheIndex,x=u[u.length-1];C._cacheIndex=null,C._byClipCacheIndex=null,x._cacheIndex=S,u[S]=x,u.pop(),this._removeInactiveBindingsForAction(C)}delete p[f]}}},{key:"uncacheRoot",value:function(o){var u=o.uuid,f=this._actionsByClip;for(var p in f){var g=f[p].actionByRoot[u];void 0!==g&&(this._deactivateAction(g),this._removeInactiveAction(g))}var _=this._bindingsByRootAndName[u];if(void 0!==_)for(var C in _){var S=_[C];S.restoreOriginalState(),this._removeInactiveBinding(S)}}},{key:"uncacheAction",value:function(o,u){var f=this.existingAction(o,u);null!==f&&(this._deactivateAction(f),this._removeInactiveAction(f))}}]),t}(sl),Dq=function(){function n(a,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;k(this,n),this.ray=new GS(a,t),this.near=r,this.far=o,this.camera=null,this.layers=new KD,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return j(n,[{key:"set",value:function(t,r){this.ray.set(t,r)}},{key:"setFromCamera",value:function(t,r){r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type: "+r.type)}},{key:"intersectObject",value:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return BA(t,this,o,r),o.sort(LN),o}},{key:"intersectObjects",value:function(t){for(var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=0,f=t.length;u<f;u++)BA(t[u],this,o,r);return o.sort(LN),o}}]),n}();function LN(n,a){return n.distance-a.distance}function BA(n,a,t,r){if(n.layers.test(a.layers)&&n.raycast(a,t),!0===r)for(var o=n.children,u=0,f=o.length;u<f;u++)BA(o[u],a,t,!0)}var FN=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return k(this,n),this.radius=a,this.phi=t,this.theta=r,this}return j(n,[{key:"set",value:function(t,r,o){return this.radius=t,this.phi=r,this.theta=o,this}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}},{key:"makeSafe",value:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}},{key:"setFromVector3",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:"setFromCartesianCoords",value:function(t,r,o){return this.radius=Math.sqrt(t*t+r*r+o*o),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,o),this.phi=Math.acos(fi(r/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(),Mq=function(n){ve(t,n);var a=me(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;k(this,t);var u=[0,0,0,o,0,0,0,0,0,0,o,0,0,0,0,0,0,o],f=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],p=new Dr;p.setAttribute("position",new cn(u,3)),p.setAttribute("color",new cn(f,3));var v=new iv({vertexColors:!0,toneMapped:!1});return(r=a.call(this,p,v)).type="AxesHelper",r}return j(t,[{key:"setColors",value:function(o,u,f){var p=new Yt,v=this.geometry.attributes.color.array;return p.set(o),p.toArray(v,0),p.toArray(v,3),p.set(u),p.toArray(v,6),p.toArray(v,9),p.set(f),p.toArray(v,12),p.toArray(v,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),t}(hA);"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:_D}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=_D);var pv=function(n){ve(t,n);var a=me(t);function t(r){var o;return k(this,t),(o=a.call(this,r)).dracoLoader=null,o.ktx2Loader=null,o.meshoptDecoder=null,o.pluginCallbacks=[],o.register(function(u){return new Gq(u)}),o.register(function(u){return new jq(u)}),o.register(function(u){return new qq(u)}),o.register(function(u){return new Hq(u)}),o.register(function(u){return new Vq(u)}),o.register(function(u){return new Wq(u)}),o.register(function(u){return new Uq(u)}),o.register(function(u){return new kq(u)}),o.register(function(u){return new zq(u)}),o.register(function(u){return new Bq(u)}),o.register(function(u){return new Fq(u)}),o.register(function(u){return new Kq(u)}),o.register(function(u){return new Yq(u)}),o}return j(t,[{key:"load",value:function(o,u,f,p){var g,v=this;g=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:xf.extractUrlBase(o),this.manager.itemStart(o);var y=function(S){p?p(S):console.error(S),v.manager.itemError(o),v.manager.itemEnd(o)},_=new AN(this.manager);_.setPath(this.path),_.setResponseType("arraybuffer"),_.setRequestHeader(this.requestHeader),_.setWithCredentials(this.withCredentials),_.load(o,function(C){try{v.parse(C,g,function(S){u(S),v.manager.itemEnd(o)},y)}catch(S){y(S)}},f,y)}},{key:"setDRACOLoader",value:function(o){return this.dracoLoader=o,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(o){return this.ktx2Loader=o,this}},{key:"setMeshoptDecoder",value:function(o){return this.meshoptDecoder=o,this}},{key:"register",value:function(o){return-1===this.pluginCallbacks.indexOf(o)&&this.pluginCallbacks.push(o),this}},{key:"unregister",value:function(o){return-1!==this.pluginCallbacks.indexOf(o)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(o),1),this}},{key:"parse",value:function(o,u,f,p){var v,g={},y={};if("string"==typeof o)v=JSON.parse(o);else if(o instanceof ArrayBuffer)if(xf.decodeText(new Uint8Array(o,0,4))===NN){try{g[tr.KHR_BINARY_GLTF]=new $q(o)}catch(A){return void(p&&p(A))}v=JSON.parse(g[tr.KHR_BINARY_GLTF].content)}else v=JSON.parse(xf.decodeText(new Uint8Array(o)));else v=o;if(void 0===v.asset||v.asset.version[0]<2)p&&p(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var C=new uK(v,{path:u||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});C.fileLoader.setRequestHeader(this.requestHeader);for(var S=0;S<this.pluginCallbacks.length;S++){var x=this.pluginCallbacks[S](C);y[x.name]=x,g[x.name]=!0}if(v.extensionsUsed)for(var b=0;b<v.extensionsUsed.length;++b){var E=v.extensionsUsed[b],D=v.extensionsRequired||[];switch(E){case tr.KHR_MATERIALS_UNLIT:g[E]=new Nq;break;case tr.KHR_DRACO_MESH_COMPRESSION:g[E]=new Xq(v,this.dracoLoader);break;case tr.KHR_TEXTURE_TRANSFORM:g[E]=new Jq;break;case tr.KHR_MESH_QUANTIZATION:g[E]=new Zq;break;default:D.indexOf(E)>=0&&void 0===y[E]&&console.warn('THREE.GLTFLoader: Unknown extension "'+E+'".')}}C.setExtensions(g),C.setPlugins(y),C.parse(f,p)}}},{key:"parseAsync",value:function(o,u){var f=this;return new Promise(function(p,v){f.parse(o,u,p,v)})}}]),t}(jy);function Lq(){var n={};return{get:function(t){return n[t]},add:function(t,r){n[t]=r},remove:function(t){delete n[t]},removeAll:function(){n={}}}}var tr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},Fq=function(){function n(a){k(this,n),this.parser=a,this.name=tr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return j(n,[{key:"_markDefs",value:function(){for(var t=this.parser,r=this.parser.json.nodes||[],o=0,u=r.length;o<u;o++){var f=r[o];f.extensions&&f.extensions[this.name]&&void 0!==f.extensions[this.name].light&&t._addNodeRef(this.cache,f.extensions[this.name].light)}}},{key:"_loadLight",value:function(t){var r=this.parser,o="light:"+t,u=r.cache.get(o);if(u)return u;var y,f=r.json,g=((f.extensions&&f.extensions[this.name]||{}).lights||[])[t],_=new Yt(16777215);void 0!==g.color&&_.fromArray(g.color);var C=void 0!==g.range?g.range:0;switch(g.type){case"directional":(y=new Ef(_)).target.position.set(0,0,-1),y.add(y.target);break;case"point":(y=new pq(_)).distance=C;break;case"spot":(y=new dq(_)).distance=C,g.spot=g.spot||{},g.spot.innerConeAngle=void 0!==g.spot.innerConeAngle?g.spot.innerConeAngle:0,g.spot.outerConeAngle=void 0!==g.spot.outerConeAngle?g.spot.outerConeAngle:Math.PI/4,y.angle=g.spot.outerConeAngle,y.penumbra=1-g.spot.innerConeAngle/g.spot.outerConeAngle,y.target.position.set(0,0,-1),y.add(y.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+g.type)}return y.position.set(0,0,0),y.decay=2,Nc(y,g),void 0!==g.intensity&&(y.intensity=g.intensity),y.name=r.createUniqueName(g.name||"light_"+t),u=Promise.resolve(y),r.cache.add(o,u),u}},{key:"getDependency",value:function(t,r){if("light"===t)return this._loadLight(r)}},{key:"createNodeAttachment",value:function(t){var r=this,o=this.parser,f=o.json.nodes[t],v=(f.extensions&&f.extensions[this.name]||{}).light;return void 0===v?null:this._loadLight(v).then(function(g){return o._getNodeRef(r.cache,v,g)})}}]),n}(),Nq=function(){function n(){k(this,n),this.name=tr.KHR_MATERIALS_UNLIT}return j(n,[{key:"getMaterialType",value:function(){return es}},{key:"extendParams",value:function(t,r,o){var u=[];t.color=new Yt(1,1,1),t.opacity=1;var f=r.pbrMetallicRoughness;if(f){if(Array.isArray(f.baseColorFactor)){var p=f.baseColorFactor;t.color.fromArray(p),t.opacity=p[3]}void 0!==f.baseColorTexture&&u.push(o.assignTexture(t,"map",f.baseColorTexture,Jn))}return Promise.all(u)}}]),n}(),kq=function(){function n(a){k(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_EMISSIVE_STRENGTH}return j(n,[{key:"extendMaterialParams",value:function(t,r){var u=this.parser.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=u.extensions[this.name].emissiveStrength;return void 0!==f&&(r.emissiveIntensity=f),Promise.resolve()}}]),n}(),Gq=function(){function n(a){k(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_CLEARCOAT}return j(n,[{key:"getMaterialType",value:function(t){var o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?Cf:null}},{key:"extendMaterialParams",value:function(t,r){var o=this.parser,u=o.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],p=u.extensions[this.name];if(void 0!==p.clearcoatFactor&&(r.clearcoat=p.clearcoatFactor),void 0!==p.clearcoatTexture&&f.push(o.assignTexture(r,"clearcoatMap",p.clearcoatTexture)),void 0!==p.clearcoatRoughnessFactor&&(r.clearcoatRoughness=p.clearcoatRoughnessFactor),void 0!==p.clearcoatRoughnessTexture&&f.push(o.assignTexture(r,"clearcoatRoughnessMap",p.clearcoatRoughnessTexture)),void 0!==p.clearcoatNormalTexture&&(f.push(o.assignTexture(r,"clearcoatNormalMap",p.clearcoatNormalTexture)),void 0!==p.clearcoatNormalTexture.scale)){var v=p.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new Ye(v,v)}return Promise.all(f)}}]),n}(),Bq=function(){function n(a){k(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_IRIDESCENCE}return j(n,[{key:"getMaterialType",value:function(t){var o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?Cf:null}},{key:"extendMaterialParams",value:function(t,r){var o=this.parser,u=o.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],p=u.extensions[this.name];return void 0!==p.iridescenceFactor&&(r.iridescence=p.iridescenceFactor),void 0!==p.iridescenceTexture&&f.push(o.assignTexture(r,"iridescenceMap",p.iridescenceTexture)),void 0!==p.iridescenceIor&&(r.iridescenceIOR=p.iridescenceIor),void 0===r.iridescenceThicknessRange&&(r.iridescenceThicknessRange=[100,400]),void 0!==p.iridescenceThicknessMinimum&&(r.iridescenceThicknessRange[0]=p.iridescenceThicknessMinimum),void 0!==p.iridescenceThicknessMaximum&&(r.iridescenceThicknessRange[1]=p.iridescenceThicknessMaximum),void 0!==p.iridescenceThicknessTexture&&f.push(o.assignTexture(r,"iridescenceThicknessMap",p.iridescenceThicknessTexture)),Promise.all(f)}}]),n}(),Hq=function(){function n(a){k(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_SHEEN}return j(n,[{key:"getMaterialType",value:function(t){var o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?Cf:null}},{key:"extendMaterialParams",value:function(t,r){var o=this.parser,u=o.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[];r.sheenColor=new Yt(0,0,0),r.sheenRoughness=0,r.sheen=1;var p=u.extensions[this.name];return void 0!==p.sheenColorFactor&&r.sheenColor.fromArray(p.sheenColorFactor),void 0!==p.sheenRoughnessFactor&&(r.sheenRoughness=p.sheenRoughnessFactor),void 0!==p.sheenColorTexture&&f.push(o.assignTexture(r,"sheenColorMap",p.sheenColorTexture,Jn)),void 0!==p.sheenRoughnessTexture&&f.push(o.assignTexture(r,"sheenRoughnessMap",p.sheenRoughnessTexture)),Promise.all(f)}}]),n}(),Vq=function(){function n(a){k(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_TRANSMISSION}return j(n,[{key:"getMaterialType",value:function(t){var o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?Cf:null}},{key:"extendMaterialParams",value:function(t,r){var o=this.parser,u=o.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],p=u.extensions[this.name];return void 0!==p.transmissionFactor&&(r.transmission=p.transmissionFactor),void 0!==p.transmissionTexture&&f.push(o.assignTexture(r,"transmissionMap",p.transmissionTexture)),Promise.all(f)}}]),n}(),Wq=function(){function n(a){k(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_VOLUME}return j(n,[{key:"getMaterialType",value:function(t){var o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?Cf:null}},{key:"extendMaterialParams",value:function(t,r){var o=this.parser,u=o.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],p=u.extensions[this.name];r.thickness=void 0!==p.thicknessFactor?p.thicknessFactor:0,void 0!==p.thicknessTexture&&f.push(o.assignTexture(r,"thicknessMap",p.thicknessTexture)),r.attenuationDistance=p.attenuationDistance||1/0;var v=p.attenuationColor||[1,1,1];return r.attenuationColor=new Yt(v[0],v[1],v[2]),Promise.all(f)}}]),n}(),Uq=function(){function n(a){k(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_IOR}return j(n,[{key:"getMaterialType",value:function(t){var o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?Cf:null}},{key:"extendMaterialParams",value:function(t,r){var u=this.parser.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=u.extensions[this.name];return r.ior=void 0!==f.ior?f.ior:1.5,Promise.resolve()}}]),n}(),zq=function(){function n(a){k(this,n),this.parser=a,this.name=tr.KHR_MATERIALS_SPECULAR}return j(n,[{key:"getMaterialType",value:function(t){var o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?Cf:null}},{key:"extendMaterialParams",value:function(t,r){var o=this.parser,u=o.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],p=u.extensions[this.name];r.specularIntensity=void 0!==p.specularFactor?p.specularFactor:1,void 0!==p.specularTexture&&f.push(o.assignTexture(r,"specularIntensityMap",p.specularTexture));var v=p.specularColorFactor||[1,1,1];return r.specularColor=new Yt(v[0],v[1],v[2]),void 0!==p.specularColorTexture&&f.push(o.assignTexture(r,"specularColorMap",p.specularColorTexture,Jn)),Promise.all(f)}}]),n}(),jq=function(){function n(a){k(this,n),this.parser=a,this.name=tr.KHR_TEXTURE_BASISU}return j(n,[{key:"loadTexture",value:function(t){var r=this.parser,o=r.json,u=o.textures[t];if(!u.extensions||!u.extensions[this.name])return null;var f=u.extensions[this.name],p=r.options.ktx2Loader;if(!p){if(o.extensionsRequired&&o.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(t,f.source,p)}}]),n}(),qq=function(){function n(a){k(this,n),this.parser=a,this.name=tr.EXT_TEXTURE_WEBP,this.isSupported=null}return j(n,[{key:"loadTexture",value:function(t){var r=this.name,o=this.parser,u=o.json,f=u.textures[t];if(!f.extensions||!f.extensions[r])return null;var p=f.extensions[r],v=u.images[p.source],g=o.textureLoader;if(v.uri){var y=o.options.manager.getHandler(v.uri);null!==y&&(g=y)}return this.detectSupport().then(function(_){if(_)return o.loadTextureImage(t,p.source,g);if(u.extensionsRequired&&u.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return o.loadTexture(t)})}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise(function(t){var r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(1===r.height)}})),this.isSupported}}]),n}(),Kq=function(){function n(a){k(this,n),this.name=tr.EXT_MESHOPT_COMPRESSION,this.parser=a}return j(n,[{key:"loadBufferView",value:function(t){var r=this.parser.json,o=r.bufferViews[t];if(o.extensions&&o.extensions[this.name]){var u=o.extensions[this.name],f=this.parser.getDependency("buffer",u.buffer),p=this.parser.options.meshoptDecoder;if(!p||!p.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return f.then(function(v){var _=u.count,C=u.byteStride,S=new Uint8Array(v,u.byteOffset||0,u.byteLength||0);return p.decodeGltfBufferAsync?p.decodeGltfBufferAsync(_,C,S,u.mode,u.filter).then(function(x){return x.buffer}):p.ready.then(function(){var x=new ArrayBuffer(_*C);return p.decodeGltfBuffer(new Uint8Array(x),_,C,S,u.mode,u.filter),x})})}return null}}]),n}(),Yq=function(){function n(a){k(this,n),this.name=tr.EXT_MESH_GPU_INSTANCING,this.parser=a}return j(n,[{key:"createNodeMesh",value:function(t){var r=this,o=this.parser.json,u=o.nodes[t];if(!u.extensions||!u.extensions[this.name]||void 0===u.mesh)return null;var v,p=Ot(o.meshes[u.mesh].primitives);try{for(p.s();!(v=p.n()).done;){var g=v.value;if(g.mode!==rs.TRIANGLES&&g.mode!==rs.TRIANGLE_STRIP&&g.mode!==rs.TRIANGLE_FAN&&void 0!==g.mode)return null}}catch(E){p.e(E)}finally{p.f()}var _=u.extensions[this.name].attributes,C=[],S={},x=function(D){C.push(r.parser.getDependency("accessor",_[D]).then(function(A){return S[D]=A,S[D]}))};for(var b in _)x(b);return C.length<1?null:(C.push(this.parser.createNodeMesh(t)),Promise.all(C).then(function(E){var B,D=E.pop(),M=E[0].count,O=[],I=Ot(D.isGroup?D.children:[D]);try{for(I.s();!(B=I.n()).done;){for(var z=B.value,P=new Sn,W=new J,X=new no,ne=new J(1,1,1),de=new r7(z.geometry,z.material,M),ce=0;ce<M;ce++)S.TRANSLATION&&W.fromBufferAttribute(S.TRANSLATION,ce),S.ROTATION&&X.fromBufferAttribute(S.ROTATION,ce),S.SCALE&&ne.fromBufferAttribute(S.SCALE,ce),de.setMatrixAt(ce,P.compose(W,X,ne));for(var G in S)"TRANSLATION"!==G&&"ROTATION"!==G&&"SCALE"!==G&&z.geometry.setAttribute(G,S[G]);_o.prototype.copy.call(de,z),de.frustumCulled=!1,r.parser.assignFinalMaterial(de),O.push(de)}}catch(ee){I.e(ee)}finally{I.f()}return D.isGroup?(D.clear(),D.add.apply(D,O),D):O[0]}))}}]),n}(),NN="glTF",$q=function n(a){k(this,n),this.name=tr.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(a,0,12);if(this.header={magic:xf.decodeText(new Uint8Array(a.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==NN)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,o=new DataView(a,12),u=0;u<r;){var f=o.getUint32(u,!0),p=o.getUint32(u+=4,!0);if(u+=4,1313821514===p){var v=new Uint8Array(a,12+u,f);this.content=xf.decodeText(v)}else if(5130562===p){var g=12+u;this.body=a.slice(g,g+f)}u+=f}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")},Xq=function(){function n(a,t){if(k(this,n),!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=tr.KHR_DRACO_MESH_COMPRESSION,this.json=a,this.dracoLoader=t,this.dracoLoader.preload()}return j(n,[{key:"decodePrimitive",value:function(t,r){var o=this.json,u=this.dracoLoader,f=t.extensions[this.name].bufferView,p=t.extensions[this.name].attributes,v={},g={},y={};for(var _ in p){var C=VA[_]||_.toLowerCase();v[C]=p[_]}for(var S in t.attributes){var x=VA[S]||S.toLowerCase();if(void 0!==p[S]){var b=o.accessors[t.attributes[S]];y[x]=hv[b.componentType].name,g[x]=!0===b.normalized}}return r.getDependency("bufferView",f).then(function(D){return new Promise(function(A){u.decodeDracoFile(D,function(M){for(var O in M.attributes){var B=g[O];void 0!==B&&(M.attributes[O].normalized=B)}A(M)},v,y)})})}}]),n}(),Jq=function(){function n(){k(this,n),this.name=tr.KHR_TEXTURE_TRANSFORM}return j(n,[{key:"extendTexture",value:function(t,r){return void 0!==r.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===r.offset&&void 0===r.rotation&&void 0===r.scale||(t=t.clone(),void 0!==r.offset&&t.offset.fromArray(r.offset),void 0!==r.rotation&&(t.rotation=r.rotation),void 0!==r.scale&&t.repeat.fromArray(r.scale),t.needsUpdate=!0),t}}]),n}(),Zq=function n(){k(this,n),this.name=tr.KHR_MESH_QUANTIZATION},GN=function(n){ve(t,n);var a=me(t);function t(r,o,u,f){return k(this,t),a.call(this,r,o,u,f)}return j(t,[{key:"copySampleValue_",value:function(o){for(var u=this.resultBuffer,f=this.sampleValues,p=this.valueSize,v=o*p*3+p,g=0;g!==p;g++)u[g]=f[v+g];return u}},{key:"interpolate_",value:function(o,u,f,p){for(var v=this.resultBuffer,g=this.sampleValues,y=this.valueSize,_=2*y,C=3*y,S=p-u,x=(f-u)/S,b=x*x,E=b*x,D=o*C,A=D-C,M=-2*E+3*b,O=E-b,I=1-M,B=O-b+x,z=0;z!==y;z++)v[z]=I*g[A+z+y]+B*(g[A+z+_]*S)+M*g[D+z+y]+O*(g[D+z]*S);return v}}]),t}(Wy),Qq=new no,eK=function(n){ve(t,n);var a=me(t);function t(){return k(this,t),a.apply(this,arguments)}return j(t,[{key:"interpolate_",value:function(o,u,f,p){var v=Ce(Ue(t.prototype),"interpolate_",this).call(this,o,u,f,p);return Qq.fromArray(v).normalize().toArray(v),v}}]),t}(GN),rs={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},hv={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},BN={9728:Mi,9729:Fo,9984:1004,9985:1007,9986:1005,9987:Tc},HN={33071:wa,33648:1002,10497:rf},HA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},VA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Fc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},tK={CUBICSPLINE:void 0,LINEAR:Fh,STEP:_y};function nK(n){return void 0===n.DefaultMaterial&&(n.DefaultMaterial=new DA({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial}function Yy(n,a,t){for(var r in t.extensions)void 0===n[r]&&(a.userData.gltfExtensions=a.userData.gltfExtensions||{},a.userData.gltfExtensions[r]=t.extensions[r])}function Nc(n,a){void 0!==a.extras&&("object"==typeof a.extras?Object.assign(n.userData,a.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+a.extras))}function iK(n,a){if(n.updateMorphTargets(),void 0!==a.weights)for(var t=0,r=a.weights.length;t<r;t++)n.morphTargetInfluences[t]=a.weights[t];if(a.extras&&Array.isArray(a.extras.targetNames)){var o=a.extras.targetNames;if(n.morphTargetInfluences.length===o.length){n.morphTargetDictionary={};for(var u=0,f=o.length;u<f;u++)n.morphTargetDictionary[o[u]]=u}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function oK(n){var a=n.extensions&&n.extensions[tr.KHR_DRACO_MESH_COMPRESSION];return a?"draco:"+a.bufferView+":"+a.indices+":"+VN(a.attributes):n.indices+":"+VN(n.attributes)+":"+n.mode}function VN(n){for(var a="",t=Object.keys(n).sort(),r=0,o=t.length;r<o;r++)a+=t[r]+":"+n[t[r]]+";";return a}function UA(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var sK=new Sn,uK=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};k(this,n),this.json=a,this.extensions={},this.plugins={},this.options=t,this.cache=new Lq,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var r=!1,o=!1,u=-1;"undefined"!=typeof navigator&&(r=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),u=(o=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader="undefined"==typeof createImageBitmap||r||o&&u<98?new lq(this.options.manager):new vq(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new AN(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return j(n,[{key:"setExtensions",value:function(t){this.extensions=t}},{key:"setPlugins",value:function(t){this.plugins=t}},{key:"parse",value:function(t,r){var o=this,u=this.json,f=this.extensions;this.cache.removeAll(),this._invokeAll(function(p){return p._markDefs&&p._markDefs()}),Promise.all(this._invokeAll(function(p){return p.beforeRoot&&p.beforeRoot()})).then(function(){return Promise.all([o.getDependencies("scene"),o.getDependencies("animation"),o.getDependencies("camera")])}).then(function(p){var v={scene:p[0][u.scene||0],scenes:p[0],animations:p[1],cameras:p[2],asset:u.asset,parser:o,userData:{}};Yy(f,v,u),Nc(v,u),Promise.all(o._invokeAll(function(g){return g.afterRoot&&g.afterRoot(v)})).then(function(){t(v)})}).catch(r)}},{key:"_markDefs",value:function(){for(var t=this.json.nodes||[],r=this.json.skins||[],o=this.json.meshes||[],u=0,f=r.length;u<f;u++)for(var p=r[u].joints,v=0,g=p.length;v<g;v++)t[p[v]].isBone=!0;for(var y=0,_=t.length;y<_;y++){var C=t[y];void 0!==C.mesh&&(this._addNodeRef(this.meshCache,C.mesh),void 0!==C.skin&&(o[C.mesh].isSkinnedMesh=!0)),void 0!==C.camera&&this._addNodeRef(this.cameraCache,C.camera)}}},{key:"_addNodeRef",value:function(t,r){void 0!==r&&(void 0===t.refs[r]&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}},{key:"_getNodeRef",value:function(t,r,o){var u=this;if(t.refs[r]<=1)return o;var f=o.clone();return function v(g,y){var _=u.associations.get(g);null!=_&&u.associations.set(y,_);var S,C=Ot(g.children.entries());try{for(C.s();!(S=C.n()).done;){var x=Ar(S.value,2);v(x[1],y.children[x[0]])}}catch(D){C.e(D)}finally{C.f()}}(o,f),f.name+="_instance_"+t.uses[r]++,f}},{key:"_invokeOne",value:function(t){var r=Object.values(this.plugins);r.push(this);for(var o=0;o<r.length;o++){var u=t(r[o]);if(u)return u}return null}},{key:"_invokeAll",value:function(t){var r=Object.values(this.plugins);r.unshift(this);for(var o=[],u=0;u<r.length;u++){var f=t(r[u]);f&&o.push(f)}return o}},{key:"getDependency",value:function(t,r){var o=t+":"+r,u=this.cache.get(o);if(!u){switch(t){case"scene":u=this.loadScene(r);break;case"node":u=this._invokeOne(function(f){return f.loadNode&&f.loadNode(r)});break;case"mesh":u=this._invokeOne(function(f){return f.loadMesh&&f.loadMesh(r)});break;case"accessor":u=this.loadAccessor(r);break;case"bufferView":u=this._invokeOne(function(f){return f.loadBufferView&&f.loadBufferView(r)});break;case"buffer":u=this.loadBuffer(r);break;case"material":u=this._invokeOne(function(f){return f.loadMaterial&&f.loadMaterial(r)});break;case"texture":u=this._invokeOne(function(f){return f.loadTexture&&f.loadTexture(r)});break;case"skin":u=this.loadSkin(r);break;case"animation":u=this._invokeOne(function(f){return f.loadAnimation&&f.loadAnimation(r)});break;case"camera":u=this.loadCamera(r);break;default:if(!(u=this._invokeOne(function(f){return f!=this&&f.getDependency&&f.getDependency(t,r)})))throw new Error("Unknown type: "+t)}this.cache.add(o,u)}return u}},{key:"getDependencies",value:function(t){var r=this.cache.get(t);if(!r){var o=this;r=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(f,p){return o.getDependency(t,p)})),this.cache.add(t,r)}return r}},{key:"loadBuffer",value:function(t){var r=this.json.buffers[t],o=this.fileLoader;if(r.type&&"arraybuffer"!==r.type)throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(void 0===r.uri&&0===t)return Promise.resolve(this.extensions[tr.KHR_BINARY_GLTF].body);var u=this.options;return new Promise(function(f,p){o.load(xf.resolveURL(r.uri,u.path),f,void 0,function(){p(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}},{key:"loadBufferView",value:function(t){var r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(o){var f=r.byteOffset||0;return o.slice(f,f+(r.byteLength||0))})}},{key:"loadAccessor",value:function(t){var r=this,o=this.json,u=this.json.accessors[t];if(void 0===u.bufferView&&void 0===u.sparse){var f=HA[u.type],v=!0===u.normalized,g=new(0,hv[u.componentType])(u.count*f);return Promise.resolve(new ko(g,f,v))}var y=[];return y.push(void 0!==u.bufferView?this.getDependency("bufferView",u.bufferView):null),void 0!==u.sparse&&(y.push(this.getDependency("bufferView",u.sparse.indices.bufferView)),y.push(this.getDependency("bufferView",u.sparse.values.bufferView))),Promise.all(y).then(function(_){var O,I,C=_[0],S=HA[u.type],x=hv[u.componentType],b=x.BYTES_PER_ELEMENT,D=u.byteOffset||0,A=void 0!==u.bufferView?o.bufferViews[u.bufferView].byteStride:void 0,M=!0===u.normalized;if(A&&A!==b*S){var B=Math.floor(D/A),z="InterleavedBuffer:"+u.bufferView+":"+u.componentType+":"+B+":"+u.count,P=r.cache.get(z);P||(O=new x(C,B*A,u.count*A/b),P=new Y9(O,A/b),r.cache.add(z,P)),I=new $9(P,S,D%A/b,M)}else O=null===C?new x(u.count*S):new x(C,D,u.count*S),I=new ko(O,S,M);if(void 0!==u.sparse){var de=u.sparse.values.byteOffset||0,ce=new(0,hv[u.sparse.indices.componentType])(_[1],u.sparse.indices.byteOffset||0,u.sparse.count*HA.SCALAR),G=new x(_[2],de,u.sparse.count*S);null!==C&&(I=new ko(I.array.slice(),I.itemSize,I.normalized));for(var ee=0,ie=ce.length;ee<ie;ee++){var ue=ce[ee];if(I.setX(ue,G[ee*S]),S>=2&&I.setY(ue,G[ee*S+1]),S>=3&&I.setZ(ue,G[ee*S+2]),S>=4&&I.setW(ue,G[ee*S+3]),S>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return I})}},{key:"loadTexture",value:function(t){var r=this.json,f=r.textures[t].source,p=r.images[f],v=this.textureLoader;if(p.uri){var g=this.options.manager.getHandler(p.uri);null!==g&&(v=g)}return this.loadTextureImage(t,f,v)}},{key:"loadTextureImage",value:function(t,r,o){var u=this,f=this.json,p=f.textures[t],v=f.images[r],g=(v.uri||v.bufferView)+":"+p.sampler;if(this.textureCache[g])return this.textureCache[g];var y=this.loadImageSource(r,o).then(function(_){_.flipY=!1,_.name=p.name||v.name||"";var S=(f.samplers||{})[p.sampler]||{};return _.magFilter=BN[S.magFilter]||Fo,_.minFilter=BN[S.minFilter]||Tc,_.wrapS=HN[S.wrapS]||rf,_.wrapT=HN[S.wrapT]||rf,u.associations.set(_,{textures:t}),_}).catch(function(){return null});return this.textureCache[g]=y,y}},{key:"loadImageSource",value:function(t,r){var u=this.json,f=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(function(C){return C.clone()});var p=u.images[t],v=self.URL||self.webkitURL,g=p.uri||"",y=!1;if(void 0!==p.bufferView)g=this.getDependency("bufferView",p.bufferView).then(function(C){y=!0;var S=new Blob([C],{type:p.mimeType});return g=v.createObjectURL(S)});else if(void 0===p.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");var _=Promise.resolve(g).then(function(C){return new Promise(function(S,x){var b=S;!0===r.isImageBitmapLoader&&(b=function(D){var A=new wu(D);A.needsUpdate=!0,S(A)}),r.load(xf.resolveURL(C,f.path),b,void 0,x)})}).then(function(C){return!0===y&&v.revokeObjectURL(g),C.userData.mimeType=p.mimeType||function(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(p.uri),C}).catch(function(C){throw console.error("THREE.GLTFLoader: Couldn't load texture",g),C});return this.sourceCache[t]=_,_}},{key:"assignTexture",value:function(t,r,o,u){var f=this;return this.getDependency("texture",o.index).then(function(p){if(!p)return null;if(void 0!==o.texCoord&&0!=o.texCoord&&!("aoMap"===r&&1==o.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+o.texCoord+" for texture "+r+" not yet supported."),f.extensions[tr.KHR_TEXTURE_TRANSFORM]){var v=void 0!==o.extensions?o.extensions[tr.KHR_TEXTURE_TRANSFORM]:void 0;if(v){var g=f.associations.get(p);p=f.extensions[tr.KHR_TEXTURE_TRANSFORM].extendTexture(p,v),f.associations.set(p,g)}}return void 0!==u&&(p.encoding=u),t[r]=p,p})}},{key:"assignFinalMaterial",value:function(t){var r=t.geometry,o=t.material,u=void 0===r.attributes.tangent,f=void 0!==r.attributes.color,p=void 0===r.attributes.normal;if(t.isPoints){var v="PointsMaterial:"+o.uuid,g=this.cache.get(v);g||(g=new sN,qs.prototype.copy.call(g,o),g.color.copy(o.color),g.map=o.map,g.sizeAttenuation=!1,this.cache.add(v,g)),o=g}else if(t.isLine){var y="LineBasicMaterial:"+o.uuid,_=this.cache.get(y);_||(_=new iv,qs.prototype.copy.call(_,o),_.color.copy(o.color),this.cache.add(y,_)),o=_}if(u||f||p){var C="ClonedMaterial:"+o.uuid+":";u&&(C+="derivative-tangents:"),f&&(C+="vertex-colors:"),p&&(C+="flat-shading:");var S=this.cache.get(C);S||(S=o.clone(),f&&(S.vertexColors=!0),p&&(S.flatShading=!0),u&&(S.normalScale&&(S.normalScale.y*=-1),S.clearcoatNormalScale&&(S.clearcoatNormalScale.y*=-1)),this.cache.add(C,S),this.associations.set(S,this.associations.get(o))),o=S}o.aoMap&&void 0===r.attributes.uv2&&void 0!==r.attributes.uv&&r.setAttribute("uv2",r.attributes.uv),t.material=o}},{key:"getMaterialType",value:function(){return DA}},{key:"loadMaterial",value:function(t){var p,r=this,u=this.extensions,f=this.json.materials[t],v={},y=[];if((f.extensions||{})[tr.KHR_MATERIALS_UNLIT]){var _=u[tr.KHR_MATERIALS_UNLIT];p=_.getMaterialType(),y.push(_.extendParams(v,f,r))}else{var C=f.pbrMetallicRoughness||{};if(v.color=new Yt(1,1,1),v.opacity=1,Array.isArray(C.baseColorFactor)){var S=C.baseColorFactor;v.color.fromArray(S),v.opacity=S[3]}void 0!==C.baseColorTexture&&y.push(r.assignTexture(v,"map",C.baseColorTexture,Jn)),v.metalness=void 0!==C.metallicFactor?C.metallicFactor:1,v.roughness=void 0!==C.roughnessFactor?C.roughnessFactor:1,void 0!==C.metallicRoughnessTexture&&(y.push(r.assignTexture(v,"metalnessMap",C.metallicRoughnessTexture)),y.push(r.assignTexture(v,"roughnessMap",C.metallicRoughnessTexture))),p=this._invokeOne(function(E){return E.getMaterialType&&E.getMaterialType(t)}),y.push(Promise.all(this._invokeAll(function(E){return E.extendMaterialParams&&E.extendMaterialParams(t,v)})))}!0===f.doubleSided&&(v.side=2);var x=f.alphaMode||"OPAQUE";if("BLEND"===x?(v.transparent=!0,v.depthWrite=!1):(v.transparent=!1,"MASK"===x&&(v.alphaTest=void 0!==f.alphaCutoff?f.alphaCutoff:.5)),void 0!==f.normalTexture&&p!==es&&(y.push(r.assignTexture(v,"normalMap",f.normalTexture)),v.normalScale=new Ye(1,1),void 0!==f.normalTexture.scale)){var b=f.normalTexture.scale;v.normalScale.set(b,b)}return void 0!==f.occlusionTexture&&p!==es&&(y.push(r.assignTexture(v,"aoMap",f.occlusionTexture)),void 0!==f.occlusionTexture.strength&&(v.aoMapIntensity=f.occlusionTexture.strength)),void 0!==f.emissiveFactor&&p!==es&&(v.emissive=(new Yt).fromArray(f.emissiveFactor)),void 0!==f.emissiveTexture&&p!==es&&y.push(r.assignTexture(v,"emissiveMap",f.emissiveTexture,Jn)),Promise.all(y).then(function(){var E=new p(v);return f.name&&(E.name=f.name),Nc(E,f),r.associations.set(E,{materials:t}),f.extensions&&Yy(u,E,f),E})}},{key:"createUniqueName",value:function(t){for(var r=kr.sanitizeNodeName(t||""),o=r,u=1;this.nodeNamesUsed[o];++u)o=r+"_"+u;return this.nodeNamesUsed[o]=!0,o}},{key:"loadGeometries",value:function(t){var r=this,o=this.extensions,u=this.primitiveCache;function f(x){return o[tr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(x,r).then(function(b){return WN(b,x,r)})}for(var p=[],v=0,g=t.length;v<g;v++){var y=t[v],_=oK(y),C=u[_];if(C)p.push(C.promise);else{var S;S=y.extensions&&y.extensions[tr.KHR_DRACO_MESH_COMPRESSION]?f(y):WN(new Dr,y,r),u[_]={primitive:y,promise:S},p.push(S)}}return Promise.all(p)}},{key:"loadMesh",value:function(t){for(var r=this,u=this.extensions,f=this.json.meshes[t],p=f.primitives,v=[],g=0,y=p.length;g<y;g++){var _=void 0===p[g].material?nK(this.cache):this.getDependency("material",p[g].material);v.push(_)}return v.push(r.loadGeometries(p)),Promise.all(v).then(function(C){for(var S=C.slice(0,C.length-1),x=C[C.length-1],b=[],E=0,D=x.length;E<D;E++){var A=x[E],M=p[E],O=void 0,I=S[E];if(M.mode===rs.TRIANGLES||M.mode===rs.TRIANGLE_STRIP||M.mode===rs.TRIANGLE_FAN||void 0===M.mode)!0===(O=!0===f.isSkinnedMesh?new Z9(A,I):new Fr(A,I)).isSkinnedMesh&&!O.geometry.attributes.skinWeight.normalized&&O.normalizeSkinWeights(),M.mode===rs.TRIANGLE_STRIP?O.geometry=UN(O.geometry,1):M.mode===rs.TRIANGLE_FAN&&(O.geometry=UN(O.geometry,2));else if(M.mode===rs.LINES)O=new hA(A,I);else if(M.mode===rs.LINE_STRIP)O=new Fy(A,I);else if(M.mode===rs.LINE_LOOP)O=new i7(A,I);else{if(M.mode!==rs.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);O=new o7(A,I)}Object.keys(O.geometry.morphAttributes).length>0&&iK(O,f),O.name=r.createUniqueName(f.name||"mesh_"+t),Nc(O,f),M.extensions&&Yy(u,O,M),r.assignFinalMaterial(O),b.push(O)}for(var B=0,z=b.length;B<z;B++)r.associations.set(b[B],{meshes:t,primitives:B});if(1===b.length)return b[0];var P=new Ic;r.associations.set(P,{meshes:t});for(var W=0,X=b.length;W<X;W++)P.add(b[W]);return P})}},{key:"loadCamera",value:function(t){var r,o=this.json.cameras[t],u=o[o.type];if(u)return"perspective"===o.type?r=new ti(Kj.radToDeg(u.yfov),u.aspectRatio||1,u.znear||1,u.zfar||2e6):"orthographic"===o.type&&(r=new aA(-u.xmag,u.xmag,u.ymag,-u.ymag,u.znear,u.zfar)),o.name&&(r.name=this.createUniqueName(o.name)),Nc(r,o),Promise.resolve(r);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(t){for(var r=this.json.skins[t],o=[],u=0,f=r.joints.length;u<f;u++)o.push(this.getDependency("node",r.joints[u]));return o.push(void 0!==r.inverseBindMatrices?this.getDependency("accessor",r.inverseBindMatrices):null),Promise.all(o).then(function(p){for(var v=p.pop(),g=p,y=[],_=[],C=0,S=g.length;C<S;C++){var x=g[C];if(x){y.push(x);var b=new Sn;null!==v&&b.fromArray(v.array,16*C),_.push(b)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[C])}return new t7(y,_)})}},{key:"loadAnimation",value:function(t){for(var o=this.json.animations[t],u=[],f=[],p=[],v=[],g=[],y=0,_=o.channels.length;y<_;y++){var C=o.channels[y],S=o.samplers[C.sampler],x=C.target,E=void 0!==o.parameters?o.parameters[S.input]:S.input,D=void 0!==o.parameters?o.parameters[S.output]:S.output;u.push(this.getDependency("node",x.node)),f.push(this.getDependency("accessor",E)),p.push(this.getDependency("accessor",D)),v.push(S),g.push(x)}return Promise.all([Promise.all(u),Promise.all(f),Promise.all(p),Promise.all(v),Promise.all(g)]).then(function(A){for(var M=A[0],O=A[1],I=A[2],B=A[3],z=A[4],P=[],W=function(ee,ie){var ue=M[ee],se=O[ee],ye=I[ee],xe=B[ee],we=z[ee];if(void 0===ue)return"continue";ue.updateMatrix();var _e=void 0;switch(Fc[we.path]){case Fc.weights:_e=Uy;break;case Fc.rotation:_e=Sf;break;default:_e=zy}var Ge=ue.name?ue.name:ue.uuid,be=void 0!==xe.interpolation?tK[xe.interpolation]:Fh,Ae=[];Fc[we.path]===Fc.weights?ue.traverse(function(et){et.morphTargetInfluences&&Ae.push(et.name?et.name:et.uuid)}):Ae.push(Ge);var ge=ye.array;if(ye.normalized){for(var Xe=UA(ge.constructor),ke=new Float32Array(ge.length),je=0,We=ge.length;je<We;je++)ke[je]=ge[je]*Xe;ge=ke}for(var ze=0,ot=Ae.length;ze<ot;ze++){var Vt=new _e(Ae[ze]+"."+Fc[we.path],se.array,ge,be);"CUBICSPLINE"===xe.interpolation&&(Vt.createInterpolant=function(Pt){return new(this instanceof Sf?eK:GN)(this.times,this.values,this.getValueSize()/3,Pt)},Vt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),P.push(Vt)}},X=0,ne=M.length;X<ne;X++)W(X);return new PA(o.name?o.name:"animation_"+t,void 0,P)})}},{key:"createNodeMesh",value:function(t){var o=this,u=this.json.nodes[t];return void 0===u.mesh?null:o.getDependency("mesh",u.mesh).then(function(f){var p=o._getNodeRef(o.meshCache,u.mesh,f);return void 0!==u.weights&&p.traverse(function(v){if(v.isMesh)for(var g=0,y=u.weights.length;g<y;g++)v.morphTargetInfluences[g]=u.weights[g]}),p})}},{key:"loadNode",value:function(t){var o=this.extensions,u=this,f=this.json.nodes[t],p=f.name?u.createUniqueName(f.name):"";return function(){var v=[],g=u._invokeOne(function(b){return b.createNodeMesh&&b.createNodeMesh(t)});g&&v.push(g),void 0!==f.camera&&v.push(u.getDependency("camera",f.camera).then(function(b){return u._getNodeRef(u.cameraCache,f.camera,b)})),u._invokeAll(function(b){return b.createNodeAttachment&&b.createNodeAttachment(t)}).forEach(function(b){v.push(b)});for(var y=[],_=f.children||[],C=0,S=_.length;C<S;C++)y.push(u.getDependency("node",_[C]));var x=void 0===f.skin?Promise.resolve(null):u.getDependency("skin",f.skin);return Promise.all([Promise.all(v),Promise.all(y),x])}().then(function(v){var C,g=v[0],y=v[1],_=v[2];if((C=!0===f.isBone?new JF:g.length>1?new Ic:1===g.length?g[0]:new _o)!==g[0])for(var S=0,x=g.length;S<x;S++)C.add(g[S]);if(f.name&&(C.userData.name=f.name,C.name=p),Nc(C,f),f.extensions&&Yy(o,C,f),void 0!==f.matrix){var b=new Sn;b.fromArray(f.matrix),C.applyMatrix4(b)}else void 0!==f.translation&&C.position.fromArray(f.translation),void 0!==f.rotation&&C.quaternion.fromArray(f.rotation),void 0!==f.scale&&C.scale.fromArray(f.scale);u.associations.has(C)||u.associations.set(C,{}),u.associations.get(C).nodes=t,null!==_&&C.traverse(function(A){!A.isSkinnedMesh||A.bind(_,sK)});for(var E=0,D=y.length;E<D;E++)C.add(y[E]);return C})}},{key:"loadScene",value:function(t){var r=this.extensions,o=this.json.scenes[t],u=this,f=new Ic;o.name&&(f.name=u.createUniqueName(o.name)),Nc(f,o),o.extensions&&Yy(r,f,o);for(var p=o.nodes||[],v=[],g=0,y=p.length;g<y;g++)v.push(u.getDependency("node",p[g]));return Promise.all(v).then(function(_){for(var C=0,S=_.length;C<S;C++)f.add(_[C]);return u.associations=function(E){var M,D=new Map,A=Ot(u.associations);try{for(A.s();!(M=A.n()).done;){var O=Ar(M.value,2),I=O[0];(I instanceof qs||I instanceof wu)&&D.set(I,O[1])}}catch(z){A.e(z)}finally{A.f()}return E.traverse(function(z){var P=u.associations.get(z);null!=P&&D.set(z,P)}),D}(f),f})}}]),n}();function WN(n,a,t){var r=a.attributes,o=[];function u(g,y){return t.getDependency("accessor",g).then(function(_){n.setAttribute(y,_)})}for(var f in r){var p=VA[f]||f.toLowerCase();p in n.attributes||o.push(u(r[f],p))}if(void 0!==a.indices&&!n.index){var v=t.getDependency("accessor",a.indices).then(function(g){n.setIndex(g)});o.push(v)}return Nc(n,a),function(n,a,t){var r=a.attributes,o=new ll;if(void 0!==r.POSITION){var u=t.json.accessors[r.POSITION],f=u.min,p=u.max;if(void 0!==f&&void 0!==p){if(o.set(new J(f[0],f[1],f[2]),new J(p[0],p[1],p[2])),u.normalized){var v=UA(hv[u.componentType]);o.min.multiplyScalar(v),o.max.multiplyScalar(v)}var g=a.targets;if(void 0!==g){for(var y=new J,_=new J,C=0,S=g.length;C<S;C++){var x=g[C];if(void 0!==x.POSITION){var b=t.json.accessors[x.POSITION],E=b.min,D=b.max;if(void 0!==E&&void 0!==D){if(_.setX(Math.max(Math.abs(E[0]),Math.abs(D[0]))),_.setY(Math.max(Math.abs(E[1]),Math.abs(D[1]))),_.setZ(Math.max(Math.abs(E[2]),Math.abs(D[2]))),b.normalized){var A=UA(hv[b.componentType]);_.multiplyScalar(A)}y.max(_)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(y)}n.boundingBox=o;var M=new Uh;o.getCenter(M.center),M.radius=o.min.distanceTo(o.max)/2,n.boundingSphere=M}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(n,a,t),Promise.all(o).then(function(){return void 0!==a.targets?function(n,a,t){for(var r=!1,o=!1,u=!1,f=0,p=a.length;f<p;f++){var v=a[f];if(void 0!==v.POSITION&&(r=!0),void 0!==v.NORMAL&&(o=!0),void 0!==v.COLOR_0&&(u=!0),r&&o&&u)break}if(!r&&!o&&!u)return Promise.resolve(n);for(var g=[],y=[],_=[],C=0,S=a.length;C<S;C++){var x=a[C];if(r){var b=void 0!==x.POSITION?t.getDependency("accessor",x.POSITION):n.attributes.position;g.push(b)}if(o){var E=void 0!==x.NORMAL?t.getDependency("accessor",x.NORMAL):n.attributes.normal;y.push(E)}if(u){var D=void 0!==x.COLOR_0?t.getDependency("accessor",x.COLOR_0):n.attributes.color;_.push(D)}}return Promise.all([Promise.all(g),Promise.all(y),Promise.all(_)]).then(function(A){var O=A[1],I=A[2];return r&&(n.morphAttributes.position=A[0]),o&&(n.morphAttributes.normal=O),u&&(n.morphAttributes.color=I),n.morphTargetsRelative=!0,n})}(n,a.targets,t):n})}function UN(n,a){var t=n.getIndex();if(null===t){var r=[],o=n.getAttribute("position");if(void 0===o)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(var u=0;u<o.count;u++)r.push(u);n.setIndex(r),t=n.getIndex()}var f=t.count-2,p=[];if(2===a)for(var v=1;v<=f;v++)p.push(t.getX(0)),p.push(t.getX(v)),p.push(t.getX(v+1));else for(var g=0;g<f;g++)g%2==0?(p.push(t.getX(g)),p.push(t.getX(g+1)),p.push(t.getX(g+2))):(p.push(t.getX(g+2)),p.push(t.getX(g+1)),p.push(t.getX(g)));p.length/3!==f&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var y=n.clone();return y.setIndex(p),y}var zN={type:"change"},zA={type:"start"},jN={type:"end"},jA=function(n){ve(t,n);var a=me(t);function t(r,o){var u,te,rt,At,Ct,pt,st;k(this,t),(u=a.call(this)).object=r,u.domElement=o,u.domElement.style.touchAction="none",u.enabled=!0,u.target=new J,u.minDistance=0,u.maxDistance=1/0,u.minZoom=0,u.maxZoom=1/0,u.minPolarAngle=0,u.maxPolarAngle=Math.PI,u.minAzimuthAngle=-1/0,u.maxAzimuthAngle=1/0,u.enableDamping=!1,u.dampingFactor=.05,u.enableZoom=!0,u.zoomSpeed=1,u.enableRotate=!0,u.rotateSpeed=1,u.enablePan=!0,u.panSpeed=1,u.screenSpacePanning=!0,u.keyPanSpeed=7,u.autoRotate=!1,u.autoRotateSpeed=2,u.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},u.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},u.touches={ONE:0,TWO:2},u.target0=u.target.clone(),u.position0=u.object.position.clone(),u.zoom0=u.object.zoom,u._domElementKeyEvents=null,u.getPolarAngle=function(){return y.phi},u.getAzimuthalAngle=function(){return y.theta},u.getDistance=function(){return this.object.position.distanceTo(this.target)},u.listenToKeyEvents=function(te){te.addEventListener("keydown",re),this._domElementKeyEvents=te},u.saveState=function(){f.target0.copy(f.target),f.position0.copy(f.object.position),f.zoom0=f.object.zoom},u.reset=function(){f.target.copy(f.target0),f.object.position.copy(f.position0),f.object.zoom=f.zoom0,f.object.updateProjectionMatrix(),f.dispatchEvent(zN),f.update(),v=p.NONE},u.update=(te=new J,rt=(new no).setFromUnitVectors(r.up,new J(0,1,0)),At=rt.clone().invert(),Ct=new J,pt=new no,st=2*Math.PI,function(){var In=f.object.position;te.copy(In).sub(f.target),te.applyQuaternion(rt),y.setFromVector3(te),f.autoRotate&&v===p.NONE&&de(2*Math.PI/60/60*f.autoRotateSpeed),f.enableDamping?(y.theta+=_.theta*f.dampingFactor,y.phi+=_.phi*f.dampingFactor):(y.theta+=_.theta,y.phi+=_.phi);var jn=f.minAzimuthAngle,qn=f.maxAzimuthAngle;return isFinite(jn)&&isFinite(qn)&&(jn<-Math.PI?jn+=st:jn>Math.PI&&(jn-=st),qn<-Math.PI?qn+=st:qn>Math.PI&&(qn-=st),y.theta=jn<=qn?Math.max(jn,Math.min(qn,y.theta)):y.theta>(jn+qn)/2?Math.max(jn,y.theta):Math.min(qn,y.theta)),y.phi=Math.max(f.minPolarAngle,Math.min(f.maxPolarAngle,y.phi)),y.makeSafe(),y.radius*=C,y.radius=Math.max(f.minDistance,Math.min(f.maxDistance,y.radius)),!0===f.enableDamping?f.target.addScaledVector(S,f.dampingFactor):f.target.add(S),te.setFromSpherical(y),te.applyQuaternion(At),In.copy(f.target).add(te),f.object.lookAt(f.target),!0===f.enableDamping?(_.theta*=1-f.dampingFactor,_.phi*=1-f.dampingFactor,S.multiplyScalar(1-f.dampingFactor)):(_.set(0,0,0),S.set(0,0,0)),C=1,!!(x||Ct.distanceToSquared(f.object.position)>g||8*(1-pt.dot(f.object.quaternion))>g)&&(f.dispatchEvent(zN),Ct.copy(f.object.position),pt.copy(f.object.quaternion),x=!1,!0)}),u.dispose=function(){f.domElement.removeEventListener("contextmenu",tt),f.domElement.removeEventListener("pointerdown",Cn),f.domElement.removeEventListener("pointercancel",Un),f.domElement.removeEventListener("wheel",gr),f.domElement.removeEventListener("pointermove",xt),f.domElement.removeEventListener("pointerup",hn),null!==f._domElementKeyEvents&&f._domElementKeyEvents.removeEventListener("keydown",re)};var f=Kn(u),p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},v=p.NONE,g=1e-6,y=new FN,_=new FN,C=1,S=new J,x=!1,b=new Ye,E=new Ye,D=new Ye,A=new Ye,M=new Ye,O=new Ye,I=new Ye,B=new Ye,z=new Ye,P=[],W={};function ne(){return Math.pow(.95,f.zoomSpeed)}function de(te){_.theta-=te}function ce(te){_.phi-=te}var G=function(){var te=new J;return function(At,Ct){te.setFromMatrixColumn(Ct,0),te.multiplyScalar(-At),S.add(te)}}(),ee=function(){var te=new J;return function(At,Ct){!0===f.screenSpacePanning?te.setFromMatrixColumn(Ct,1):(te.setFromMatrixColumn(Ct,0),te.crossVectors(f.object.up,te)),te.multiplyScalar(At),S.add(te)}}(),ie=function(){var te=new J;return function(At,Ct){var pt=f.domElement;if(f.object.isPerspectiveCamera){te.copy(f.object.position).sub(f.target);var Xt=te.length();Xt*=Math.tan(f.object.fov/2*Math.PI/180),G(2*At*Xt/pt.clientHeight,f.object.matrix),ee(2*Ct*Xt/pt.clientHeight,f.object.matrix)}else f.object.isOrthographicCamera?(G(At*(f.object.right-f.object.left)/f.object.zoom/pt.clientWidth,f.object.matrix),ee(Ct*(f.object.top-f.object.bottom)/f.object.zoom/pt.clientHeight,f.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),f.enablePan=!1)}}();function ue(te){f.object.isPerspectiveCamera?C/=te:f.object.isOrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom*te)),f.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function se(te){f.object.isPerspectiveCamera?C*=te:f.object.isOrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom/te)),f.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function ye(te){b.set(te.clientX,te.clientY)}function we(te){A.set(te.clientX,te.clientY)}function Xe(){1===P.length?b.set(P[0].pageX,P[0].pageY):b.set(.5*(P[0].pageX+P[1].pageX),.5*(P[0].pageY+P[1].pageY))}function ke(){1===P.length?A.set(P[0].pageX,P[0].pageY):A.set(.5*(P[0].pageX+P[1].pageX),.5*(P[0].pageY+P[1].pageY))}function je(){var te=P[0].pageX-P[1].pageX,rt=P[0].pageY-P[1].pageY,At=Math.sqrt(te*te+rt*rt);I.set(0,At)}function ot(te){if(1==P.length)E.set(te.pageX,te.pageY);else{var rt=kt(te);E.set(.5*(te.pageX+rt.x),.5*(te.pageY+rt.y))}D.subVectors(E,b).multiplyScalar(f.rotateSpeed);var pt=f.domElement;de(2*Math.PI*D.x/pt.clientHeight),ce(2*Math.PI*D.y/pt.clientHeight),b.copy(E)}function Vt(te){if(1===P.length)M.set(te.pageX,te.pageY);else{var rt=kt(te);M.set(.5*(te.pageX+rt.x),.5*(te.pageY+rt.y))}O.subVectors(M,A).multiplyScalar(f.panSpeed),ie(O.x,O.y),A.copy(M)}function et(te){var rt=kt(te),At=te.pageX-rt.x,Ct=te.pageY-rt.y,pt=Math.sqrt(At*At+Ct*Ct);B.set(0,pt),z.set(0,Math.pow(B.y/I.y,f.zoomSpeed)),ue(z.y),I.copy(B)}function Cn(te){!1!==f.enabled&&(0===P.length&&(f.domElement.setPointerCapture(te.pointerId),f.domElement.addEventListener("pointermove",xt),f.domElement.addEventListener("pointerup",hn)),function(te){P.push(te)}(te),"touch"===te.pointerType?function(te){switch(Ht(te),P.length){case 1:switch(f.touches.ONE){case 0:if(!1===f.enableRotate)return;Xe(),v=p.TOUCH_ROTATE;break;case 1:if(!1===f.enablePan)return;ke(),v=p.TOUCH_PAN;break;default:v=p.NONE}break;case 2:switch(f.touches.TWO){case 2:if(!1===f.enableZoom&&!1===f.enablePan)return;f.enableZoom&&je(),f.enablePan&&ke(),v=p.TOUCH_DOLLY_PAN;break;case 3:if(!1===f.enableZoom&&!1===f.enableRotate)return;f.enableZoom&&je(),f.enableRotate&&Xe(),v=p.TOUCH_DOLLY_ROTATE;break;default:v=p.NONE}break;default:v=p.NONE}v!==p.NONE&&f.dispatchEvent(zA)}(te):function(te){var rt;switch(te.button){case 0:rt=f.mouseButtons.LEFT;break;case 1:rt=f.mouseButtons.MIDDLE;break;case 2:rt=f.mouseButtons.RIGHT;break;default:rt=-1}switch(rt){case 1:if(!1===f.enableZoom)return;(function(te){I.set(te.clientX,te.clientY)})(te),v=p.DOLLY;break;case 0:if(te.ctrlKey||te.metaKey||te.shiftKey){if(!1===f.enablePan)return;we(te),v=p.PAN}else{if(!1===f.enableRotate)return;ye(te),v=p.ROTATE}break;case 2:if(te.ctrlKey||te.metaKey||te.shiftKey){if(!1===f.enableRotate)return;ye(te),v=p.ROTATE}else{if(!1===f.enablePan)return;we(te),v=p.PAN}break;default:v=p.NONE}v!==p.NONE&&f.dispatchEvent(zA)}(te))}function xt(te){!1!==f.enabled&&("touch"===te.pointerType?function(te){switch(Ht(te),v){case p.TOUCH_ROTATE:if(!1===f.enableRotate)return;ot(te),f.update();break;case p.TOUCH_PAN:if(!1===f.enablePan)return;Vt(te),f.update();break;case p.TOUCH_DOLLY_PAN:if(!1===f.enableZoom&&!1===f.enablePan)return;(function(te){f.enableZoom&&et(te),f.enablePan&&Vt(te)})(te),f.update();break;case p.TOUCH_DOLLY_ROTATE:if(!1===f.enableZoom&&!1===f.enableRotate)return;(function(te){f.enableZoom&&et(te),f.enableRotate&&ot(te)})(te),f.update();break;default:v=p.NONE}}(te):function(te){switch(v){case p.ROTATE:if(!1===f.enableRotate)return;!function(te){E.set(te.clientX,te.clientY),D.subVectors(E,b).multiplyScalar(f.rotateSpeed);var rt=f.domElement;de(2*Math.PI*D.x/rt.clientHeight),ce(2*Math.PI*D.y/rt.clientHeight),b.copy(E),f.update()}(te);break;case p.DOLLY:if(!1===f.enableZoom)return;!function(te){B.set(te.clientX,te.clientY),z.subVectors(B,I),z.y>0?ue(ne()):z.y<0&&se(ne()),I.copy(B),f.update()}(te);break;case p.PAN:if(!1===f.enablePan)return;!function(te){M.set(te.clientX,te.clientY),O.subVectors(M,A).multiplyScalar(f.panSpeed),ie(O.x,O.y),A.copy(M),f.update()}(te)}}(te))}function hn(te){ft(te),0===P.length&&(f.domElement.releasePointerCapture(te.pointerId),f.domElement.removeEventListener("pointermove",xt),f.domElement.removeEventListener("pointerup",hn)),f.dispatchEvent(jN),v=p.NONE}function Un(te){ft(te)}function gr(te){!1===f.enabled||!1===f.enableZoom||v!==p.NONE||(te.preventDefault(),f.dispatchEvent(zA),function(te){te.deltaY<0?se(ne()):te.deltaY>0&&ue(ne()),f.update()}(te),f.dispatchEvent(jN))}function re(te){!1===f.enabled||!1===f.enablePan||function(te){var rt=!1;switch(te.code){case f.keys.UP:te.ctrlKey||te.metaKey||te.shiftKey?ce(2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):ie(0,f.keyPanSpeed),rt=!0;break;case f.keys.BOTTOM:te.ctrlKey||te.metaKey||te.shiftKey?ce(-2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):ie(0,-f.keyPanSpeed),rt=!0;break;case f.keys.LEFT:te.ctrlKey||te.metaKey||te.shiftKey?de(2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):ie(f.keyPanSpeed,0),rt=!0;break;case f.keys.RIGHT:te.ctrlKey||te.metaKey||te.shiftKey?de(-2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):ie(-f.keyPanSpeed,0),rt=!0}rt&&(te.preventDefault(),f.update())}(te)}function tt(te){!1!==f.enabled&&te.preventDefault()}function ft(te){delete W[te.pointerId];for(var rt=0;rt<P.length;rt++)if(P[rt].pointerId==te.pointerId)return void P.splice(rt,1)}function Ht(te){var rt=W[te.pointerId];void 0===rt&&(rt=new Ye,W[te.pointerId]=rt),rt.set(te.pageX,te.pageY)}function kt(te){return W[(te.pointerId===P[0].pointerId?P[1]:P[0]).pointerId]}return f.domElement.addEventListener("contextmenu",tt),f.domElement.addEventListener("pointerdown",Cn),f.domElement.addEventListener("pointercancel",Un),f.domElement.addEventListener("wheel",gr,{passive:!1}),u.update(),u}return t}(sl),vv=function(a){a.scene.traverse(function(t){if("Mesh"===t.type&&t.material&&t.material.userData&&t.material.userData.BlendType)switch(t.material.userData.BlendType){case"AdditiveBlending":t.material.blending=2;break;case"SubtractiveBlending":t.material.blending=3;break;case"MultiplyBlending":t.material.blending=4}})};function cK(){}function qA(n){return null==n?cK:function(){return this.querySelector(n)}}function fK(n){return null==n?[]:Array.isArray(n)?n:Array.from(n)}function pK(){return[]}function qN(n){return null==n?pK:function(){return this.querySelectorAll(n)}}function KN(n){return function(){return this.matches(n)}}function YN(n){return function(a){return a.matches(n)}}var gK=Array.prototype.find;function yK(){return this.firstElementChild}var CK=Array.prototype.filter;function wK(){return Array.from(this.children)}function $N(n){return new Array(n.length)}function fE(n,a){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=a}function RK(n){return function(){return n}}function TK(n,a,t,r,o,u){for(var p,f=0,v=a.length,g=u.length;f<g;++f)(p=a[f])?(p.__data__=u[f],r[f]=p):t[f]=new fE(n,u[f]);for(;f<v;++f)(p=a[f])&&(o[f]=p)}function DK(n,a,t,r,o,u,f){var p,v,S,g=new Map,y=a.length,_=u.length,C=new Array(y);for(p=0;p<y;++p)(v=a[p])&&(C[p]=S=f.call(v,v.__data__,p,a)+"",g.has(S)?o[p]=v:g.set(S,v));for(p=0;p<_;++p)S=f.call(n,u[p],p,u)+"",(v=g.get(S))?(r[p]=v,v.__data__=u[p],g.delete(S)):t[p]=new fE(n,u[p]);for(p=0;p<y;++p)(v=a[p])&&g.get(C[p])===v&&(o[p]=v)}function AK(n){return n.__data__}function OK(n){return"object"==typeof n&&"length"in n?n:Array.from(n)}function kK(n,a){return n<a?-1:n>a?1:n>=a?0:NaN}fE.prototype={constructor:fE,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,t){return this._parent.insertBefore(a,t)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};var KA="http://www.w3.org/1999/xhtml",XN={svg:"http://www.w3.org/2000/svg",xhtml:KA,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pE(n){var a=n+="",t=a.indexOf(":");return t>=0&&"xmlns"!==(a=n.slice(0,t))&&(n=n.slice(t+1)),XN.hasOwnProperty(a)?{space:XN[a],local:n}:n}function zK(n){return function(){this.removeAttribute(n)}}function jK(n){return function(){this.removeAttributeNS(n.space,n.local)}}function qK(n,a){return function(){this.setAttribute(n,a)}}function KK(n,a){return function(){this.setAttributeNS(n.space,n.local,a)}}function YK(n,a){return function(){var t=a.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}function $K(n,a){return function(){var t=a.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function JN(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function JK(n){return function(){this.style.removeProperty(n)}}function ZK(n,a,t){return function(){this.style.setProperty(n,a,t)}}function QK(n,a,t){return function(){var r=a.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function gv(n,a){return n.style.getPropertyValue(a)||JN(n).getComputedStyle(n,null).getPropertyValue(a)}function tY(n){return function(){delete this[n]}}function nY(n,a){return function(){this[n]=a}}function rY(n,a){return function(){var t=a.apply(this,arguments);null==t?delete this[n]:this[n]=t}}function ZN(n){return n.trim().split(/^|\s+/)}function YA(n){return n.classList||new QN(n)}function QN(n){this._node=n,this._names=ZN(n.getAttribute("class")||"")}function ek(n,a){for(var t=YA(n),r=-1,o=a.length;++r<o;)t.add(a[r])}function tk(n,a){for(var t=YA(n),r=-1,o=a.length;++r<o;)t.remove(a[r])}function oY(n){return function(){ek(this,n)}}function aY(n){return function(){tk(this,n)}}function sY(n,a){return function(){(a.apply(this,arguments)?ek:tk)(this,n)}}function lY(){this.textContent=""}function cY(n){return function(){this.textContent=n}}function dY(n){return function(){var a=n.apply(this,arguments);this.textContent=null==a?"":a}}function pY(){this.innerHTML=""}function hY(n){return function(){this.innerHTML=n}}function vY(n){return function(){var a=n.apply(this,arguments);this.innerHTML=null==a?"":a}}function mY(){this.nextSibling&&this.parentNode.appendChild(this)}function _Y(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wY(n){return function(){var a=this.ownerDocument,t=this.namespaceURI;return t===KA&&a.documentElement.namespaceURI===KA?a.createElement(n):a.createElementNS(t,n)}}function SY(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function nk(n){var a=pE(n);return(a.local?SY:wY)(a)}function bY(){return null}function RY(){var n=this.parentNode;n&&n.removeChild(this)}function DY(){var n=this.cloneNode(!1),a=this.parentNode;return a?a.insertBefore(n,this.nextSibling):n}function AY(){var n=this.cloneNode(!0),a=this.parentNode;return a?a.insertBefore(n,this.nextSibling):n}function IY(n){return n.trim().split(/^|\s+/).map(function(a){var t="",r=a.indexOf(".");return r>=0&&(t=a.slice(r+1),a=a.slice(0,r)),{type:a,name:t}})}function LY(n){return function(){var a=this.__on;if(a){for(var u,t=0,r=-1,o=a.length;t<o;++t)u=a[t],n.type&&u.type!==n.type||u.name!==n.name?a[++r]=u:this.removeEventListener(u.type,u.listener,u.options);++r?a.length=r:delete this.__on}}}function FY(n,a,t){return function(){var o,r=this.__on,u=function(n){return function(a){n.call(this,a,this.__data__)}}(a);if(r)for(var f=0,p=r.length;f<p;++f)if((o=r[f]).type===n.type&&o.name===n.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=u,o.options=t),void(o.value=a);this.addEventListener(n.type,u,t),o={type:n.type,name:n.name,value:a,listener:u,options:t},r?r.push(o):this.__on=[o]}}function rk(n,a,t){var r=JN(n),o=r.CustomEvent;"function"==typeof o?o=new o(a,t):(o=r.document.createEvent("Event"),t?(o.initEvent(a,t.bubbles,t.cancelable),o.detail=t.detail):o.initEvent(a,!1,!1)),n.dispatchEvent(o)}function kY(n,a){return function(){return rk(this,n,a)}}function GY(n,a){return function(){return rk(this,n,a.apply(this,arguments))}}QN.prototype={add:function(a){this._names.indexOf(a)<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var t=this._names.indexOf(a);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};var HY=mi.mark(ik);function ik(){var n,a,t,r,o,u,f;return mi.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:a=0,t=(n=this._groups).length;case 1:if(!(a<t)){v.next=13;break}o=0,u=(r=n[a]).length;case 3:if(!(o<u)){v.next=10;break}if(!(f=r[o])){v.next=7;break}return v.next=7,f;case 7:++o,v.next=3;break;case 10:++a,v.next=1;break;case 13:case"end":return v.stop()}},HY,this)}var ok=[null];function ba(n,a){this._groups=n,this._parents=a}function ak(){return new ba([[document.documentElement]],ok)}ba.prototype=ak.prototype=bn({constructor:ba,select:function(n){"function"!=typeof n&&(n=qA(n));for(var a=this._groups,t=a.length,r=new Array(t),o=0;o<t;++o)for(var v,g,u=a[o],f=u.length,p=r[o]=new Array(f),y=0;y<f;++y)(v=u[y])&&(g=n.call(v,v.__data__,y,u))&&("__data__"in v&&(g.__data__=v.__data__),p[y]=g);return new ba(r,this._parents)},selectAll:function(n){n="function"==typeof n?function(n){return function(){return fK(n.apply(this,arguments))}}(n):qN(n);for(var a=this._groups,t=a.length,r=[],o=[],u=0;u<t;++u)for(var v,f=a[u],p=f.length,g=0;g<p;++g)(v=f[g])&&(r.push(n.call(v,v.__data__,g,f)),o.push(v));return new ba(r,o)},selectChild:function(n){return this.select(null==n?yK:function(n){return function(){return gK.call(this.children,n)}}("function"==typeof n?n:YN(n)))},selectChildren:function(n){return this.selectAll(null==n?wK:function(n){return function(){return CK.call(this.children,n)}}("function"==typeof n?n:YN(n)))},filter:function(n){"function"!=typeof n&&(n=KN(n));for(var a=this._groups,t=a.length,r=new Array(t),o=0;o<t;++o)for(var v,u=a[o],f=u.length,p=r[o]=[],g=0;g<f;++g)(v=u[g])&&n.call(v,v.__data__,g,u)&&p.push(v);return new ba(r,this._parents)},data:function(n,a){if(!arguments.length)return Array.from(this,AK);var t=a?DK:TK,r=this._parents,o=this._groups;"function"!=typeof n&&(n=RK(n));for(var u=o.length,f=new Array(u),p=new Array(u),v=new Array(u),g=0;g<u;++g){var y=r[g],_=o[g],C=_.length,S=OK(n.call(y,y&&y.__data__,g,r)),x=S.length,b=p[g]=new Array(x),E=f[g]=new Array(x),D=v[g]=new Array(C);t(y,_,b,E,D,S,a);for(var O,I,A=0,M=0;A<x;++A)if(O=b[A]){for(A>=M&&(M=A+1);!(I=E[M])&&++M<x;);O._next=I||null}}return(f=new ba(f,r))._enter=p,f._exit=v,f},enter:function(){return new ba(this._enter||this._groups.map($N),this._parents)},exit:function(){return new ba(this._exit||this._groups.map($N),this._parents)},join:function(n,a,t){var r=this.enter(),o=this,u=this.exit();return"function"==typeof n?(r=n(r))&&(r=r.selection()):r=r.append(n+""),null!=a&&(o=a(o))&&(o=o.selection()),null==t?u.remove():t(u),r&&o?r.merge(o).order():o},merge:function(n){for(var a=n.selection?n.selection():n,t=this._groups,r=a._groups,o=t.length,f=Math.min(o,r.length),p=new Array(o),v=0;v<f;++v)for(var S,g=t[v],y=r[v],_=g.length,C=p[v]=new Array(_),x=0;x<_;++x)(S=g[x]||y[x])&&(C[x]=S);for(;v<o;++v)p[v]=t[v];return new ba(p,this._parents)},selection:function(){return this},order:function(){for(var n=this._groups,a=-1,t=n.length;++a<t;)for(var f,r=n[a],o=r.length-1,u=r[o];--o>=0;)(f=r[o])&&(u&&4^f.compareDocumentPosition(u)&&u.parentNode.insertBefore(f,u),u=f);return this},sort:function(n){function a(_,C){return _&&C?n(_.__data__,C.__data__):!_-!C}n||(n=kK);for(var t=this._groups,r=t.length,o=new Array(r),u=0;u<r;++u){for(var g,f=t[u],p=f.length,v=o[u]=new Array(p),y=0;y<p;++y)(g=f[y])&&(v[y]=g);v.sort(a)}return new ba(o,this._parents).order()},call:function(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var n=this._groups,a=0,t=n.length;a<t;++a)for(var r=n[a],o=0,u=r.length;o<u;++o){var f=r[o];if(f)return f}return null},size:function(){var n=0,a=Ot(this);try{for(a.s();!a.n().done;)++n}catch(o){a.e(o)}finally{a.f()}return n},empty:function(){return!this.node()},each:function(n){for(var a=this._groups,t=0,r=a.length;t<r;++t)for(var p,o=a[t],u=0,f=o.length;u<f;++u)(p=o[u])&&n.call(p,p.__data__,u,o);return this},attr:function(n,a){var t=pE(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((null==a?t.local?jK:zK:"function"==typeof a?t.local?$K:YK:t.local?KK:qK)(t,a))},style:function(n,a,t){return arguments.length>1?this.each((null==a?JK:"function"==typeof a?QK:ZK)(n,a,null==t?"":t)):gv(this.node(),n)},property:function(n,a){return arguments.length>1?this.each((null==a?tY:"function"==typeof a?rY:nY)(n,a)):this.node()[n]},classed:function(n,a){var t=ZN(n+"");if(arguments.length<2){for(var r=YA(this.node()),o=-1,u=t.length;++o<u;)if(!r.contains(t[o]))return!1;return!0}return this.each(("function"==typeof a?sY:a?oY:aY)(t,a))},text:function(n){return arguments.length?this.each(null==n?lY:("function"==typeof n?dY:cY)(n)):this.node().textContent},html:function(n){return arguments.length?this.each(null==n?pY:("function"==typeof n?vY:hY)(n)):this.node().innerHTML},raise:function(){return this.each(mY)},lower:function(){return this.each(_Y)},append:function(n){var a="function"==typeof n?n:nk(n);return this.select(function(){return this.appendChild(a.apply(this,arguments))})},insert:function(n,a){var t="function"==typeof n?n:nk(n),r=null==a?bY:"function"==typeof a?a:qA(a);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(RY)},clone:function(n){return this.select(n?AY:DY)},datum:function(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function(n,a,t){var o,f,r=IY(n+""),u=r.length;if(!(arguments.length<2)){for(p=a?FY:LY,o=0;o<u;++o)this.each(p(r[o],a,t));return this}var p=this.node().__on;if(p)for(var y,v=0,g=p.length;v<g;++v)for(o=0,y=p[v];o<u;++o)if((f=r[o]).type===y.type&&f.name===y.name)return y.value},dispatch:function(n,a){return this.each(("function"==typeof a?GY:kY)(n,a))}},Symbol.iterator,ik);var $y=ak,WY={value:function(){}};function sk(){for(var r,n=0,a=arguments.length,t={};n<a;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new hE(t)}function hE(n){this._=n}function UY(n,a){return n.trim().split(/^|\s+/).map(function(t){var r="",o=t.indexOf(".");if(o>=0&&(r=t.slice(o+1),t=t.slice(0,o)),t&&!a.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}function zY(n,a){for(var o,t=0,r=n.length;t<r;++t)if((o=n[t]).name===a)return o.value}function uk(n,a,t){for(var r=0,o=n.length;r<o;++r)if(n[r].name===a){n[r]=WY,n=n.slice(0,r).concat(n.slice(r+1));break}return null!=t&&n.push({name:a,value:t}),n}hE.prototype=sk.prototype={constructor:hE,on:function(a,t){var u,r=this._,o=UY(a+"",r),f=-1,p=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++f<p;)if(u=(a=o[f]).type)r[u]=uk(r[u],a.name,t);else if(null==t)for(u in r)r[u]=uk(r[u],a.name,null);return this}for(;++f<p;)if((u=(a=o[f]).type)&&(u=zY(r[u],a.name)))return u},copy:function(){var a={},t=this._;for(var r in t)a[r]=t[r].slice();return new hE(a)},call:function(a,t){if((u=arguments.length-2)>0)for(var u,f,r=new Array(u),o=0;o<u;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(o=0,u=(f=this._[a]).length;o<u;++o)f[o].value.apply(t,r)},apply:function(a,t,r){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var o=this._[a],u=0,f=o.length;u<f;++u)o[u].value.apply(t,r)}};var vE,Zy,jY=sk,mv=0,Xy=0,Jy=0,gE=0,Rf=0,mE=0,Qy="object"==typeof performance&&performance.now?performance:Date,ck="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function $A(){return Rf||(ck(qY),Rf=Qy.now()+mE)}function qY(){Rf=0}function yE(){this._call=this._time=this._next=null}function dk(n,a,t){var r=new yE;return r.restart(n,a,t),r}function fk(){Rf=(gE=Qy.now())+mE,mv=Xy=0;try{!function(){$A(),++mv;for(var a,n=vE;n;)(a=Rf-n._time)>=0&&n._call.call(void 0,a),n=n._next;--mv}()}finally{mv=0,function(){for(var n,t,a=vE,r=1/0;a;)a._call?(r>a._time&&(r=a._time),n=a,a=a._next):(t=a._next,a._next=null,a=n?n._next=t:vE=t);Zy=n,XA(r)}(),Rf=0}}function YY(){var n=Qy.now(),a=n-gE;a>1e3&&(mE-=a,gE=n)}function XA(n){mv||(Xy&&(Xy=clearTimeout(Xy)),n-Rf>24?(n<1/0&&(Xy=setTimeout(fk,n-Qy.now()-mE)),Jy&&(Jy=clearInterval(Jy))):(Jy||(gE=Qy.now(),Jy=setInterval(YY,1e3)),mv=1,ck(fk)))}function pk(n,a,t){var r=new yE;return r.restart(function(o){r.stop(),n(o+a)},a=null==a?0:+a,t),r}yE.prototype=dk.prototype={constructor:yE,restart:function(a,t,r){if("function"!=typeof a)throw new TypeError("callback is not a function");r=(null==r?$A():+r)+(null==t?0:+t),!this._next&&Zy!==this&&(Zy?Zy._next=this:vE=this,Zy=this),this._call=a,this._time=r,XA()},stop:function(){this._call&&(this._call=null,this._time=1/0,XA())}};var XY=jY("start","end","cancel","interrupt"),JY=[];function wE(n,a,t,r,o,u){var f=n.__transition;if(f){if(t in f)return}else n.__transition={};!function(n,a,t){var o,r=n.__transition;function f(g){var y,_,C,S;if(1!==t.state)return v();for(y in r)if((S=r[y]).name===t.name){if(3===S.state)return pk(f);4===S.state?(S.state=6,S.timer.stop(),S.on.call("interrupt",n,n.__data__,S.index,S.group),delete r[y]):+y<a&&(S.state=6,S.timer.stop(),S.on.call("cancel",n,n.__data__,S.index,S.group),delete r[y])}if(pk(function(){3===t.state&&(t.state=4,t.timer.restart(p,t.delay,t.time),p(g))}),t.state=2,t.on.call("start",n,n.__data__,t.index,t.group),2===t.state){for(t.state=3,o=new Array(C=t.tween.length),y=0,_=-1;y<C;++y)(S=t.tween[y].value.call(n,n.__data__,t.index,t.group))&&(o[++_]=S);o.length=_+1}}function p(g){for(var y=g<t.duration?t.ease.call(null,g/t.duration):(t.timer.restart(v),t.state=5,1),_=-1,C=o.length;++_<C;)o[_].call(n,y);5===t.state&&(t.on.call("end",n,n.__data__,t.index,t.group),v())}function v(){for(var g in t.state=6,t.timer.stop(),delete r[a],r)return;delete n.__transition}r[a]=t,t.timer=dk(function(g){t.state=1,t.timer.restart(f,t.delay,t.time),t.delay<=g&&f(g-t.delay)},0,t.time)}(n,t,{name:a,index:r,group:o,on:XY,tween:JY,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:0})}function QA(n,a){var t=Ks(n,a);if(t.state>0)throw new Error("too late; already scheduled");return t}function xu(n,a){var t=Ks(n,a);if(t.state>3)throw new Error("too late; already running");return t}function Ks(n,a){var t=n.__transition;if(!t||!(t=t[a]))throw new Error("transition not found");return t}function kc(n,a){return n=+n,a=+a,function(t){return n*(1-t)+a*t}}var SE,mk=180/Math.PI,eM={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yk(n,a,t,r,o,u){var f,p,v;return(f=Math.sqrt(n*n+a*a))&&(n/=f,a/=f),(v=n*t+a*r)&&(t-=n*v,r-=a*v),(p=Math.sqrt(t*t+r*r))&&(t/=p,r/=p,v/=p),n*r<a*t&&(n=-n,a=-a,v=-v,f=-f),{translateX:o,translateY:u,rotate:Math.atan2(a,n)*mk,skewX:Math.atan(v)*mk,scaleX:f,scaleY:p}}function _k(n,a,t,r){function o(g){return g.length?g.pop()+" ":""}return function(g,y){var _=[],C=[];return g=n(g),y=n(y),function(g,y,_,C,S,x){if(g!==_||y!==C){var b=S.push("translate(",null,a,null,t);x.push({i:b-4,x:kc(g,_)},{i:b-2,x:kc(y,C)})}else(_||C)&&S.push("translate("+_+a+C+t)}(g.translateX,g.translateY,y.translateX,y.translateY,_,C),function(g,y,_,C){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),C.push({i:_.push(o(_)+"rotate(",null,r)-2,x:kc(g,y)})):y&&_.push(o(_)+"rotate("+y+r)}(g.rotate,y.rotate,_,C),function(g,y,_,C){g!==y?C.push({i:_.push(o(_)+"skewX(",null,r)-2,x:kc(g,y)}):y&&_.push(o(_)+"skewX("+y+r)}(g.skewX,y.skewX,_,C),function(g,y,_,C,S,x){if(g!==_||y!==C){var b=S.push(o(S)+"scale(",null,",",null,")");x.push({i:b-4,x:kc(g,_)},{i:b-2,x:kc(y,C)})}else(1!==_||1!==C)&&S.push(o(S)+"scale("+_+","+C+")")}(g.scaleX,g.scaleY,y.scaleX,y.scaleY,_,C),g=y=null,function(S){for(var E,x=-1,b=C.length;++x<b;)_[(E=C[x]).i]=E.x(S);return _.join("")}}}var r$=_k(function(n){var a=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(n+"");return a.isIdentity?eM:yk(a.a,a.b,a.c,a.d,a.e,a.f)},"px, ","px)","deg)"),i$=_k(function(n){return null!=n&&(SE||(SE=document.createElementNS("http://www.w3.org/2000/svg","g")),SE.setAttribute("transform",n),n=SE.transform.baseVal.consolidate())?yk((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):eM},", ",")",")");function o$(n,a){var t,r;return function(){var o=xu(this,n),u=o.tween;if(u!==t)for(var f=0,p=(r=t=u).length;f<p;++f)if(r[f].name===a){(r=r.slice()).splice(f,1);break}o.tween=r}}function a$(n,a,t){var r,o;if("function"!=typeof t)throw new Error;return function(){var u=xu(this,n),f=u.tween;if(f!==r){o=(r=f).slice();for(var p={name:a,value:t},v=0,g=o.length;v<g;++v)if(o[v].name===a){o[v]=p;break}v===g&&o.push(p)}u.tween=o}}function tM(n,a,t){var r=n._id;return n.each(function(){var o=xu(this,r);(o.value||(o.value={}))[a]=t.apply(this,arguments)}),function(o){return Ks(o,r).value[a]}}function nM(n,a,t){n.prototype=a.prototype=t,t.constructor=n}function Ck(n,a){var t=Object.create(n.prototype);for(var r in a)t[r]=a[r];return t}function e_(){}var EE=1/.7,yv="\\s*([+-]?\\d+)\\s*",n_="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ru="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u$=/^#([0-9a-f]{3,8})$/,l$=new RegExp("^rgb\\("+[yv,yv,yv]+"\\)$"),c$=new RegExp("^rgb\\("+[Ru,Ru,Ru]+"\\)$"),d$=new RegExp("^rgba\\("+[yv,yv,yv,n_]+"\\)$"),f$=new RegExp("^rgba\\("+[Ru,Ru,Ru,n_]+"\\)$"),p$=new RegExp("^hsl\\("+[n_,Ru,Ru]+"\\)$"),h$=new RegExp("^hsla\\("+[n_,Ru,Ru,n_]+"\\)$"),wk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Sk(){return this.rgb().formatHex()}function Ek(){return this.rgb().formatRgb()}function r_(n){var a,t;return n=(n+"").trim().toLowerCase(),(a=u$.exec(n))?(t=a[1].length,a=parseInt(a[1],16),6===t?bk(a):3===t?new xa(a>>8&15|a>>4&240,a>>4&15|240&a,(15&a)<<4|15&a,1):8===t?bE(a>>24&255,a>>16&255,a>>8&255,(255&a)/255):4===t?bE(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|240&a,((15&a)<<4|15&a)/255):null):(a=l$.exec(n))?new xa(a[1],a[2],a[3],1):(a=c$.exec(n))?new xa(255*a[1]/100,255*a[2]/100,255*a[3]/100,1):(a=d$.exec(n))?bE(a[1],a[2],a[3],a[4]):(a=f$.exec(n))?bE(255*a[1]/100,255*a[2]/100,255*a[3]/100,a[4]):(a=p$.exec(n))?Tk(a[1],a[2]/100,a[3]/100,1):(a=h$.exec(n))?Tk(a[1],a[2]/100,a[3]/100,a[4]):wk.hasOwnProperty(n)?bk(wk[n]):"transparent"===n?new xa(NaN,NaN,NaN,0):null}function bk(n){return new xa(n>>16&255,n>>8&255,255&n,1)}function bE(n,a,t,r){return r<=0&&(n=a=t=NaN),new xa(n,a,t,r)}function g$(n){return n instanceof e_||(n=r_(n)),n?new xa((n=n.rgb()).r,n.g,n.b,n.opacity):new xa}function xE(n,a,t,r){return 1===arguments.length?g$(n):new xa(n,a,t,null==r?1:r)}function xa(n,a,t,r){this.r=+n,this.g=+a,this.b=+t,this.opacity=+r}function xk(){return"#"+rM(this.r)+rM(this.g)+rM(this.b)}function Rk(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?")":", "+n+")")}function rM(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function Tk(n,a,t,r){return r<=0?n=a=t=NaN:t<=0||t>=1?n=a=NaN:a<=0&&(n=NaN),new Tu(n,a,t,r)}function Dk(n){if(n instanceof Tu)return new Tu(n.h,n.s,n.l,n.opacity);if(n instanceof e_||(n=r_(n)),!n)return new Tu;if(n instanceof Tu)return n;var a=(n=n.rgb()).r/255,t=n.g/255,r=n.b/255,o=Math.min(a,t,r),u=Math.max(a,t,r),f=NaN,p=u-o,v=(u+o)/2;return p?(f=a===u?(t-r)/p+6*(t<r):t===u?(r-a)/p+2:(a-t)/p+4,p/=v<.5?u+o:2-u-o,f*=60):p=v>0&&v<1?0:f,new Tu(f,p,v,n.opacity)}function Tu(n,a,t,r){this.h=+n,this.s=+a,this.l=+t,this.opacity=+r}function iM(n,a,t){return 255*(n<60?a+(t-a)*n/60:n<180?t:n<240?a+(t-a)*(240-n)/60:a)}function Ak(n,a,t,r,o){var u=n*n,f=u*n;return((1-3*n+3*u-f)*a+(4-6*u+3*f)*t+(1+3*n+3*u-3*f)*r+f*o)/6}nM(e_,r_,{copy:function(a){return Object.assign(new this.constructor,this,a)},displayable:function(){return this.rgb().displayable()},hex:Sk,formatHex:Sk,formatHsl:function(){return Dk(this).formatHsl()},formatRgb:Ek,toString:Ek}),nM(xa,xE,Ck(e_,{brighter:function(a){return a=null==a?EE:Math.pow(EE,a),new xa(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new xa(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xk,formatHex:xk,formatRgb:Rk,toString:Rk})),nM(Tu,function(n,a,t,r){return 1===arguments.length?Dk(n):new Tu(n,a,t,null==r?1:r)},Ck(e_,{brighter:function(a){return a=null==a?EE:Math.pow(EE,a),new Tu(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new Tu(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(this.h<0),t=isNaN(a)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*t,u=2*r-o;return new xa(iM(a>=240?a-240:a+120,u,o),iM(a,u,o),iM(a<120?a+240:a-120,u,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}));var Mk=function(n){return function(){return n}};function Pk(n,a){var t=a-n;return t?function(n,a){return function(t){return n+t*a}}(n,t):Mk(isNaN(n)?a:n)}var Ik=function n(a){var t=function(n){return 1==(n=+n)?Pk:function(a,t){return t-a?function(n,a,t){return n=Math.pow(n,t),a=Math.pow(a,t)-n,t=1/t,function(r){return Math.pow(n+r*a,t)}}(a,t,n):Mk(isNaN(a)?t:a)}}(a);function r(o,u){var f=t((o=xE(o)).r,(u=xE(u)).r),p=t(o.g,u.g),v=t(o.b,u.b),g=Pk(o.opacity,u.opacity);return function(y){return o.r=f(y),o.g=p(y),o.b=v(y),o.opacity=g(y),o+""}}return r.gamma=n,r}(1);function Lk(n){return function(a){var f,p,t=a.length,r=new Array(t),o=new Array(t),u=new Array(t);for(f=0;f<t;++f)p=xE(a[f]),r[f]=p.r||0,o[f]=p.g||0,u[f]=p.b||0;return r=n(r),o=n(o),u=n(u),p.opacity=1,function(v){return p.r=r(v),p.g=o(v),p.b=u(v),p+""}}}Lk(function(n){var a=n.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,a-1):Math.floor(t*a),o=n[r],u=n[r+1];return Ak((t-r/a)*a,r>0?n[r-1]:2*o-u,o,u,r<a-1?n[r+2]:2*u-o)}}),Lk(function(n){var a=n.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*a);return Ak((t-r/a)*a,n[(r+a-1)%a],n[r%a],n[(r+1)%a],n[(r+2)%a])}});var oM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aM=new RegExp(oM.source,"g");function b$(n,a){var r,o,u,t=oM.lastIndex=aM.lastIndex=0,f=-1,p=[],v=[];for(n+="",a+="";(r=oM.exec(n))&&(o=aM.exec(a));)(u=o.index)>t&&(u=a.slice(t,u),p[f]?p[f]+=u:p[++f]=u),(r=r[0])===(o=o[0])?p[f]?p[f]+=o:p[++f]=o:(p[++f]=null,v.push({i:f,x:kc(r,o)})),t=aM.lastIndex;return t<a.length&&(u=a.slice(t),p[f]?p[f]+=u:p[++f]=u),p.length<2?v[0]?function(n){return function(a){return n(a)+""}}(v[0].x):function(n){return function(){return n}}(a):(a=v.length,function(g){for(var _,y=0;y<a;++y)p[(_=v[y]).i]=_.x(g);return p.join("")})}function Fk(n,a){var t;return("number"==typeof a?kc:a instanceof r_?Ik:(t=r_(a))?(a=t,Ik):b$)(n,a)}function x$(n){return function(){this.removeAttribute(n)}}function R$(n){return function(){this.removeAttributeNS(n.space,n.local)}}function T$(n,a,t){var r,u,o=t+"";return function(){var f=this.getAttribute(n);return f===o?null:f===r?u:u=a(r=f,t)}}function D$(n,a,t){var r,u,o=t+"";return function(){var f=this.getAttributeNS(n.space,n.local);return f===o?null:f===r?u:u=a(r=f,t)}}function A$(n,a,t){var r,o,u;return function(){var f,v,p=t(this);return null==p?void this.removeAttribute(n):(f=this.getAttribute(n))===(v=p+"")?null:f===r&&v===o?u:(o=v,u=a(r=f,p))}}function M$(n,a,t){var r,o,u;return function(){var f,v,p=t(this);return null==p?void this.removeAttributeNS(n.space,n.local):(f=this.getAttributeNS(n.space,n.local))===(v=p+"")?null:f===r&&v===o?u:(o=v,u=a(r=f,p))}}function P$(n,a){return function(t){this.setAttribute(n,a.call(this,t))}}function I$(n,a){return function(t){this.setAttributeNS(n.space,n.local,a.call(this,t))}}function L$(n,a){var t,r;function o(){var u=a.apply(this,arguments);return u!==r&&(t=(r=u)&&I$(n,u)),t}return o._value=a,o}function F$(n,a){var t,r;function o(){var u=a.apply(this,arguments);return u!==r&&(t=(r=u)&&P$(n,u)),t}return o._value=a,o}function k$(n,a){return function(){QA(this,n).delay=+a.apply(this,arguments)}}function G$(n,a){return a=+a,function(){QA(this,n).delay=a}}function H$(n,a){return function(){xu(this,n).duration=+a.apply(this,arguments)}}function V$(n,a){return a=+a,function(){xu(this,n).duration=a}}function U$(n,a){if("function"!=typeof a)throw new Error;return function(){xu(this,n).ease=a}}function X$(n,a,t){var r,o,u=function(n){return(n+"").trim().split(/^|\s+/).every(function(a){var t=a.indexOf(".");return t>=0&&(a=a.slice(0,t)),!a||"start"===a})}(a)?QA:xu;return function(){var f=u(this,n),p=f.on;p!==r&&(o=(r=p).copy()).on(a,t),f.on=o}}var nX=$y.prototype.constructor;function Nk(n){return function(){this.style.removeProperty(n)}}function lX(n,a,t){return function(r){this.style.setProperty(n,a.call(this,r),t)}}function cX(n,a,t){var r,o;function u(){var f=a.apply(this,arguments);return f!==o&&(r=(o=f)&&lX(n,f,t)),r}return u._value=a,u}function vX(n){return function(a){this.textContent=n.call(this,a)}}function gX(n){var a,t;function r(){var o=n.apply(this,arguments);return o!==t&&(a=(t=o)&&vX(o)),a}return r._value=n,r}var CX=0;function ml(n,a,t,r){this._groups=n,this._parents=a,this._name=t,this._id=r}function kk(){return++CX}var yl=$y.prototype;ml.prototype=function(n){return $y().transition(n)}.prototype=bn({constructor:ml,select:function(n){var a=this._name,t=this._id;"function"!=typeof n&&(n=qA(n));for(var r=this._groups,o=r.length,u=new Array(o),f=0;f<o;++f)for(var y,_,p=r[f],v=p.length,g=u[f]=new Array(v),C=0;C<v;++C)(y=p[C])&&(_=n.call(y,y.__data__,C,p))&&("__data__"in y&&(_.__data__=y.__data__),g[C]=_,wE(g[C],a,t,C,g,Ks(y,t)));return new ml(u,this._parents,a,t)},selectAll:function(n){var a=this._name,t=this._id;"function"!=typeof n&&(n=qN(n));for(var r=this._groups,o=r.length,u=[],f=[],p=0;p<o;++p)for(var y,v=r[p],g=v.length,_=0;_<g;++_)if(y=v[_]){for(var S,C=n.call(y,y.__data__,_,v),x=Ks(y,t),b=0,E=C.length;b<E;++b)(S=C[b])&&wE(S,a,t,b,C,x);u.push(C),f.push(y)}return new ml(u,f,a,t)},selectChild:yl.selectChild,selectChildren:yl.selectChildren,filter:function(n){"function"!=typeof n&&(n=KN(n));for(var a=this._groups,t=a.length,r=new Array(t),o=0;o<t;++o)for(var v,u=a[o],f=u.length,p=r[o]=[],g=0;g<f;++g)(v=u[g])&&n.call(v,v.__data__,g,u)&&p.push(v);return new ml(r,this._parents,this._name,this._id)},merge:function(n){if(n._id!==this._id)throw new Error;for(var a=this._groups,t=n._groups,r=a.length,u=Math.min(r,t.length),f=new Array(r),p=0;p<u;++p)for(var C,v=a[p],g=t[p],y=v.length,_=f[p]=new Array(y),S=0;S<y;++S)(C=v[S]||g[S])&&(_[S]=C);for(;p<r;++p)f[p]=a[p];return new ml(f,this._parents,this._name,this._id)},selection:function(){return new nX(this._groups,this._parents)},transition:function(){for(var n=this._name,a=this._id,t=kk(),r=this._groups,o=r.length,u=0;u<o;++u)for(var v,f=r[u],p=f.length,g=0;g<p;++g)if(v=f[g]){var y=Ks(v,a);wE(v,n,t,g,f,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new ml(r,this._parents,n,t)},call:yl.call,nodes:yl.nodes,node:yl.node,size:yl.size,empty:yl.empty,each:yl.each,on:function(n,a){var t=this._id;return arguments.length<2?Ks(this.node(),t).on.on(n):this.each(X$(t,n,a))},attr:function(n,a){var t=pE(n),r="transform"===t?i$:Fk;return this.attrTween(n,"function"==typeof a?(t.local?M$:A$)(t,r,tM(this,"attr."+n,a)):null==a?(t.local?R$:x$)(t):(t.local?D$:T$)(t,r,a))},attrTween:function(n,a){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(null==a)return this.tween(t,null);if("function"!=typeof a)throw new Error;var r=pE(n);return this.tween(t,(r.local?L$:F$)(r,a))},style:function(n,a,t){var r="transform"==(n+="")?r$:Fk;return null==a?this.styleTween(n,function(n,a){var t,r,o;return function(){var u=gv(this,n),f=(this.style.removeProperty(n),gv(this,n));return u===f?null:u===t&&f===r?o:o=a(t=u,r=f)}}(n,r)).on("end.style."+n,Nk(n)):"function"==typeof a?this.styleTween(n,function(n,a,t){var r,o,u;return function(){var f=gv(this,n),p=t(this),v=p+"";return null==p&&(this.style.removeProperty(n),v=p=gv(this,n)),f===v?null:f===r&&v===o?u:(o=v,u=a(r=f,p))}}(n,r,tM(this,"style."+n,a))).each(function(n,a){var t,r,o,p,u="style."+a,f="end."+u;return function(){var v=xu(this,n),g=v.on,y=null==v.value[u]?p||(p=Nk(a)):void 0;(g!==t||o!==y)&&(r=(t=g).copy()).on(f,o=y),v.on=r}}(this._id,n)):this.styleTween(n,function(n,a,t){var r,u,o=t+"";return function(){var f=gv(this,n);return f===o?null:f===r?u:u=a(r=f,t)}}(n,r,a),t).on("end.style."+n,null)},styleTween:function(n,a,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==a)return this.tween(r,null);if("function"!=typeof a)throw new Error;return this.tween(r,cX(n,a,null==t?"":t))},text:function(n){return this.tween("text","function"==typeof n?function(n){return function(){var a=n(this);this.textContent=null==a?"":a}}(tM(this,"text",n)):function(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function(n){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(null==n)return this.tween(a,null);if("function"!=typeof n)throw new Error;return this.tween(a,gX(n))},remove:function(){return this.on("end.remove",function(n){return function(){var a=this.parentNode;for(var t in this.__transition)if(+t!==n)return;a&&a.removeChild(this)}}(this._id))},tween:function(n,a){var t=this._id;if(n+="",arguments.length<2){for(var f,r=Ks(this.node(),t).tween,o=0,u=r.length;o<u;++o)if((f=r[o]).name===n)return f.value;return null}return this.each((null==a?o$:a$)(t,n,a))},delay:function(n){var a=this._id;return arguments.length?this.each(("function"==typeof n?k$:G$)(a,n)):Ks(this.node(),a).delay},duration:function(n){var a=this._id;return arguments.length?this.each(("function"==typeof n?H$:V$)(a,n)):Ks(this.node(),a).duration},ease:function(n){var a=this._id;return arguments.length?this.each(U$(a,n)):Ks(this.node(),a).ease},easeVarying:function(n){if("function"!=typeof n)throw new Error;return this.each(function(n,a){return function(){var t=a.apply(this,arguments);if("function"!=typeof t)throw new Error;xu(this,n).ease=t}}(this._id,n))},end:function(){var n,a,t=this,r=t._id,o=t.size();return new Promise(function(u,f){var p={value:f},v={value:function(){0==--o&&u()}};t.each(function(){var g=xu(this,r),y=g.on;y!==n&&((a=(n=y).copy())._.cancel.push(p),a._.interrupt.push(p),a._.end.push(v)),g.on=a}),0===o&&u()})}},Symbol.iterator,yl[Symbol.iterator]);var EX={time:null,delay:0,duration:250,ease:function(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};function bX(n,a){for(var t;!(t=n.__transition)||!(t=t[a]);)if(!(n=n.parentNode))throw new Error("transition ".concat(a," not found"));return t}function i_(n){return{type:n}}function wv(n,a,t){this.k=n,this.x=a,this.y=t}function VX(n,a){1&n&&(s(0,"div"),s(1,"p"),le(2,"Fetching..."),l(),l())}function WX(n,a){1&n&&(s(0,"div"),s(1,"p"),le(2,"Sorry, this app had a problem getting that info."),l(),l())}function UX(n,a){if(1&n&&c(0,"div",34),2&n){var t=Re(2).index,r=Re(4);dh("width",r.DISPLAY_WIDTH,"px")("height",r.DISPLAY_HEIGHT,"px"),d("id","model_display_"+t)}}function zX(n,a){if(1&n&&(s(0,"div",35),c(1,"img",36),l()),2&n){var t=Re().$implicit,r=Re(5);dh("width",r.DISPLAY_WIDTH,"px")("height",r.DISPLAY_HEIGHT,"px"),ae(1),d("src",t.screenshotDataUrl,Si)}}function jX(n,a){if(1&n&&(s(0,"div",31),it(1,UX,1,5,"div",32),it(2,zX,2,5,"div",33),l()),2&n){var t=a.$implicit;ae(1),d("ngIf",!t.screenshotDataUrl),ae(1),d("ngIf",t.screenshotDataUrl)}}function qX(n,a){if(1&n&&(s(0,"span"),le(1),l()),2&n){var t=Re().$implicit;ae(1),zd("\xa0@\xa0xyz(",t.x,", ",t.y,", ",t.z,")")}}function KX(n,a){if(1&n&&(s(0,"div"),s(1,"span",23),le(2),l(),s(3,"span"),le(4," ( "),c(5,"div",37),le(6," ) "),it(7,qX,2,3,"span",12),l(),l()),2&n){var t=a.$implicit,r=a.index;ae(2),Nt("",3==r?"G":r+1,":"),ae(3),dh("background-color","rgb("+t.r+","+t.g+","+t.b+")"),ae(2),d("ngIf",null!=t.x)}}function YX(n,a){if(1&n&&(s(0,"span"),s(1,"span",23),le(2),l(),le(3),l()),2&n){var t=a.$implicit,r=a.index;ae(2),Nt("",r,":"),ae(1),Nt("\xa0",t.substring(0,4)," ")}}$y.prototype.interrupt=function(n){return this.each(function(){!function(n,a){var r,o,f,t=n.__transition,u=!0;if(t){for(f in a=null==a?null:a+"",t)(r=t[f]).name===a?(o=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(o?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[f]):u=!1;u&&delete n.__transition}}(this,n)})},$y.prototype.transition=function(n){var a,t;n instanceof ml?(a=n._id,n=n._name):(a=kk(),(t=EX).time=$A(),n=null==n?null:n+"");for(var r=this._groups,o=r.length,u=0;u<o;++u)for(var v,f=r[u],p=f.length,g=0;g<p;++g)(v=f[g])&&wE(v,n,a,g,f,t||bX(v,a));return new ml(r,this._parents,n,a)},Math,Math,Math,["w","e"].map(i_),["n","s"].map(i_),["n","w","e","s","nw","ne","sw","se"].map(i_),wv.prototype={constructor:wv,scale:function(a){return 1===a?this:new wv(this.k*a,this.x,this.y)},translate:function(a,t){return 0===a&0===t?this:new wv(this.k,this.x+this.k*a,this.y+this.k*t)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new wv(1,0,0);var o_=function(a){return[a]},$X=function(a,t,r,o){return[a,t,r,o]};function XX(n,a){if(1&n&&(s(0,"div",26),it(1,jX,3,2,"div",27),s(2,"div",28),s(3,"b"),le(4),l(),l(),c(5,"div",29),s(6,"b"),le(7,"Model:"),l(),le(8,"\xa0"),s(9,"a",30),le(10),l(),le(11," \xb7 "),s(12,"b"),le(13,"Scale:"),l(),le(14),c(15,"br"),s(16,"div",23),le(17,"Lights:"),l(),it(18,KX,8,4,"div",15),s(19,"div",23),le(20,"Animations:"),l(),it(21,YX,4,2,"span",15),c(22,"br"),l()),2&n){var t=a.$implicit,r=Re(4);ae(1),d("ngForOf",gh(7,o_,r.getDisplay(t.hrcId))),ae(3),Hn(t.name),ae(5),er("href","field-model-details/",t.hrcIdShort,"",Si),ae(1),Hn(t.hrcId),ae(4),Nt(" ",t.scaleString," "),ae(4),d("ngForOf",pP(9,$X,t.light1,t.light2,t.light3,t.globalLight)),ae(3),d("ngForOf",t.animations)}}function JX(n,a){if(1&n&&(s(0,"div",21),s(1,"div",3),le(2,"Model Loader Section"),l(),c(3,"div",13),s(4,"div"),le(5),l(),c(6,"div",22),s(7,"div",23),le(8,"Model Loaders"),l(),s(9,"div",24),it(10,XX,23,14,"div",25),l(),l()),2&n){var t=a.$implicit;ae(5),Nt("Scale: ",t.header.modelScale,""),ae(5),d("ngForOf",t.modelLoaders)}}function ZX(n,a){if(1&n){var t=L();s(0,"div",39),s(1,"div",40),s(2,"b"),le(3,"From Line:"),l(),le(4),l(),s(5,"div",40),s(6,"b"),le(7,"To Map:"),l(),le(8,"\xa0"),s(9,"a",41),oe("click",function(){var f=Pr(t).$implicit;return Re(4).onSelectFieldName(f.fieldName)}),le(10),l(),le(11," \xa0 "),s(12,"b"),le(13,"Position:"),l(),le(14),l(),l()}if(2&n){var r=a.$implicit;ae(4),VR(" (",r.exitLineVertex1.x,", ",r.exitLineVertex1.y,", ",r.exitLineVertex1.z,") - (",r.exitLineVertex2.x,", ",r.exitLineVertex2.y,", ",r.exitLineVertex2.z,") "),ae(6),mo("",r.fieldName," (",r.fieldId,")"),ae(4),zd("\xa0 (",r.destinationVertex.x,", ",r.destinationVertex.y,", ",r.destinationVertex.z,") ")}}function QX(n,a){if(1&n&&(s(0,"div",21),s(1,"div",3),le(2,"Triggers/Gateways Section"),l(),c(3,"div",13),s(4,"div",24),it(5,ZX,15,11,"div",38),l(),l()),2&n){var t=a.$implicit;ae(5),d("ngForOf",t.gateways)}}function eJ(n,a){if(1&n&&(s(0,"div",50),s(1,"div",51),le(2),l(),s(3,"div",52),le(4),l(),l()),2&n){var t=a.$implicit;ae(2),Hn(t.raw),ae(2),Hn(t.js)}}function tJ(n,a){if(1&n&&(s(0,"div",47),s(1,"div"),s(2,"b"),le(3),l(),l(),c(4,"div",48),it(5,eJ,5,2,"div",49),l()),2&n){var t=a.$implicit;ae(3),Nt("script ",t.index,":"),ae(2),d("ngForOf",t.ops)}}function nJ(n,a){if(1&n&&(s(0,"div",43),s(1,"div",44),le(2),s(3,"span",45),le(4),l(),l(),c(5,"div",22),it(6,tJ,6,2,"div",46),l()),2&n){var t=a.$implicit,r=a.index;ae(2),Nt("#",r,": "),ae(2),Nt('"',t.entityName,'"'),ae(2),d("ngForOf",t.scripts)}}function rJ(n,a){if(1&n&&(s(0,"div",21),s(1,"div",3),le(2,"Entities Section"),l(),c(3,"div",13),it(4,nJ,7,3,"div",42),l()),2&n){var t=a.$implicit;ae(4),d("ngForOf",t)}}function iJ(n,a){if(1&n&&(s(0,"div"),c(1,"div",19),it(2,JX,11,2,"div",20),c(3,"div",19),it(4,QX,6,1,"div",20),c(5,"div",13),it(6,rJ,5,1,"div",20),c(7,"div",13),l()),2&n){var t=Re(2);ae(2),d("ngForOf",gh(3,o_,t.scene.model)),ae(2),d("ngForOf",gh(5,o_,t.scene.triggers)),ae(2),d("ngForOf",gh(7,o_,t.scene.script.entities))}}function oJ(n,a){if(1&n&&(s(0,"div",54),s(1,"a",55),le(2),l(),c(3,"br"),le(4),c(5,"br"),c(6,"img",18),l()),2&n){var t=Re().$implicit,r=Re(2);ae(1),d("routerLink","/scene-details/"+t.sourceName),ae(1),Hn(t.sourceName),ae(2),Nt(" ",t.sourceFieldMenuName,""),ae(2),d("src",r.environment.KUJATA_DATA_BASE_URL+"/metadata/makou-reactor/backgrounds/"+t.sourceName+".png",Si)}}function aJ(n,a){if(1&n&&(w(0),it(1,oJ,7,4,"div",53),R()),2&n){var t=a.$implicit;ae(1),d("ngIf","inbound"==t.direction)}}function sJ(n,a){if(1&n&&(s(0,"div",54),s(1,"a",55),le(2),l(),c(3,"br"),le(4),c(5,"br"),c(6,"img",18),l()),2&n){var t=Re().$implicit,r=Re(2);ae(1),d("routerLink","/scene-details/"+t.targetName),ae(1),Hn(t.targetName),ae(2),Nt(" ",t.targetFieldMenuName,""),ae(2),d("src",r.environment.KUJATA_DATA_BASE_URL+"/metadata/makou-reactor/backgrounds/"+t.targetName+".png",Si)}}function uJ(n,a){if(1&n&&(w(0),it(1,sJ,7,4,"div",53),R()),2&n){var t=a.$implicit;ae(1),d("ngIf","outbound"==t.direction)}}function lJ(n,a){1&n&&(s(0,"div",21),s(1,"div",3),le(2,"Entity Script Visualization (Experimental)"),l(),c(3,"div",13),s(4,"div",56),zt.lFrame.currentNamespace=Qv,s(5,"svg",57),s(6,"style"),le(7," text { font-size: 8pt; } tspan { font-size: 8pt; } "),l(),l(),l(),l())}function cJ(n,a){if(1&n&&(w(0),it(1,lJ,8,0,"div",20),R()),2&n){var t=Re(2);ae(1),d("ngForOf",gh(1,o_,t.scene.model))}}function dJ(n,a){if(1&n&&(s(0,"div",1),s(1,"div",2),s(2,"div",3),le(3),l(),s(4,"div",4),le(5),l(),l(),s(6,"div",2),s(7,"div",5),s(8,"div",6),s(9,"div",7),le(10,"Background"),l(),s(11,"div",8),c(12,"img",9),l(),l(),c(13,"div",10),s(14,"div"),s(15,"div",7),le(16,"Walkmesh"),l(),c(17,"div",11),l(),l(),l(),it(18,VX,3,0,"div",12),it(19,WX,3,0,"div",12),it(20,iJ,8,9,"div",12),c(21,"div",13),s(22,"div",14),s(23,"div",3),le(24,"Field Links (Experimental)"),l(),s(25,"div",4),le(26,"(Based on Gateway data and Mapjump Ops)"),l(),c(27,"div",13),s(28,"div",5),it(29,aJ,2,1,"ng-container",15),s(30,"div",16),le(31,"\u2192"),l(),w(32),s(33,"div",17),s(34,"b"),le(35),l(),c(36,"br"),s(37,"b"),le(38),l(),c(39,"br"),c(40,"img",18),l(),R(),s(41,"div",16),le(42,"\u2192"),l(),it(43,uJ,2,1,"ng-container",15),l(),l(),c(44,"div",13),it(45,cJ,2,3,"ng-container",12),l()),2&n){var t=Re();ae(3),Hn(t.selectedFieldName),ae(2),Hn(t.selectedFieldMenuName),ae(7),d("src","https://makou-reactor-bg-images.netlify.app/"+t.selectedFieldName+".png",Si),ae(6),d("ngIf","FETCHING"==t.fetchStatus),ae(1),d("ngIf","ERROR"==t.fetchStatus),ae(1),d("ngIf","SUCCESS"==t.fetchStatus),ae(9),d("ngForOf",t.fieldLinks),ae(6),Hn(t.selectedFieldName),ae(3),Hn(t.selectedFieldMenuName),ae(2),d("src",t.environment.KUJATA_DATA_BASE_URL+"/metadata/makou-reactor/backgrounds/"+t.selectedFieldName+".png",Si),ae(3),d("ngForOf",t.fieldLinks),ae(2),d("ngIf",t.scene)}}var fJ=function(){var n=function(){function a(t,r){k(this,a),this.route=t,this.http=r,this.fetchStatus="NONE",this.fieldLinks=null,this.environment=Wn,this.mapList=null,this.sceneGraph=null,this.fieldIdToFieldMetadataMap=null,this.fieldNameToFieldMetadataMap=null,this.selectedFieldName=null,this.selectedFieldMenuName=null,this.GRID_X=150,this.GRID_Y=75,this.PSX_RES_X=320,this.PSX_RES_Y=224,this.NODE_SPACE_PROPORTION=.8,this.LABEL_LINE_LENGTH=18,this.DISPLAY_WIDTH=100,this.DISPLAY_HEIGHT=100,this.rendererGlobal=new Lc({alpha:!0,antialias:!0}),this.displayMap=null,this.isDestroyed=!1,console.log("scene-details component constructor")}return j(a,[{key:"ngOnInit",value:function(){var r=this;console.log("scene-details component ngOnInit()"),this.clock=new fv;var o=Wn.KUJATA_DATA_BASE_URL+"/data/field/flevel.lgp/maplist.json";this.http.get(o).subscribe(function(u){r.mapList=u,console.log("this.mapList:",r.mapList),r.initialize()},function(u){r.fetchStatus="ERROR"}),this.http.get(o=Wn.KUJATA_DATA_BASE_URL+"/metadata/scene-graph.json").subscribe(function(u){r.sceneGraph=u,r.fieldIdToFieldMetadataMap={},r.fieldNameToFieldMetadataMap={};var p,f=Ot(r.sceneGraph.nodes);try{for(f.s();!(p=f.n()).done;){var v=p.value;r.fieldIdToFieldMetadataMap[v.id]=v,r.fieldNameToFieldMetadataMap[v.fieldName]=v}}catch(g){f.e(g)}finally{f.f()}r.initialize()},function(u){r.fetchStatus="ERROR"}),this.route.paramMap.subscribe(function(u){var f=u.get("name");r.selectedFieldName=f,r.initialize()})}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0}},{key:"idToMetadata",value:function(r){return this.fieldIdToFieldMetadataMap[r]}},{key:"fieldNameToMetadata",value:function(r){return this.fieldNameToFieldMetadataMap[r]}},{key:"idFor",value:function(r){return this.fieldNameToMetadata(r).id}},{key:"fieldNameFor",value:function(r){return this.idToMetadata(r).fieldName}},{key:"getFieldMenuName",value:function(r){return""!==r.mapName?r.mapName:r.fieldName}},{key:"initialize",value:function(){var r=this;if(null!=this.mapList&&null!=this.sceneGraph&&null!=this.selectedFieldName){console.log("ready to initialize!");var o=this.fieldNameToMetadata(this.selectedFieldName),u=o.id;this.selectedFieldMenuName=this.getFieldMenuName(o),this.fieldLinks=[];var g,f={},p={},v=Ot(this.sceneGraph.links);try{for(v.s();!(g=v.n()).done;){var y=g.value;if(y.source==u){var _=this.idToMetadata(y.target);p[_.id]={direction:"outbound",sourceId:u,sourceName:this.selectedFieldName,targetId:_.id,targetName:_.fieldName,targetFieldMenuName:this.getFieldMenuName(_)}}if(y.target==u){var C=this.idToMetadata(y.source);f[C.id]={direction:"inbound",sourceId:C.id,sourceName:C.fieldName,sourceFieldMenuName:this.getFieldMenuName(C),targetId:u,targetName:this.selectedFieldName}}}}catch(O){v.e(O)}finally{v.f()}for(var S=0,x=Object.keys(f);S<x.length;S++)this.fieldLinks.push(f[x[S]]);for(var E=0,D=Object.keys(p);E<D.length;E++)this.fieldLinks.push(p[D[E]]);console.log("this.fieldLinks:",this.fieldLinks),this.fetchStatus="FETCHING",this.http.get(Wn.KUJATA_DATA_BASE_URL+"/data/field/flevel.lgp/"+this.selectedFieldName+".json").subscribe(function(O){r.fetchStatus="SUCCESS",r.scene=O,r.displays=[],r.displayMap={};for(var I=r.scene.model.modelLoaders,B=0;B<I.length;B++){var z=I[B];z.hrcIdShort=z.hrcId.toLowerCase().replace(".hrc","");var X=r.createEmptyDisplay({id:z.hrcId,name:"TODO"},"model_display_"+B,200,200);r.displays.push(X),r.displayMap[z.hrcId]=X}setTimeout(function(){r.recursiveLoadSkeletonAndAddToDisplay(0)},250),setTimeout(function(){r.buildGraph()},250),r.createWalkmeshDisplay()},function(O){r.fetchStatus="ERROR"})}}},{key:"createWalkmeshDisplay",value:function(){console.log("Creating walkmesh display...");var r=document.getElementById("walkmesh-container");if(r){for(;r.firstChild;)r.removeChild(r.firstChild);var o=this.scene;console.log("flevel:",o);var u=o.cameraSection.cameras[0],f=2*Math.atan(240/(2*u.zoom))*57.29577951;this.walkmeshRenderer=new Lc({alpha:!0,antialias:!0}),this.walkmeshRenderer.setSize(410,240),this.walkmeshScene=new yf,this.walkmeshScene.background=new Yt(2236962),this.walkmeshCamera=new ti(f,410/240,.001/4096,24.4140625);var y=-u.yAxis.x/4096,_=-u.yAxis.y/4096,C=-u.yAxis.z/4096,S=u.zAxis.x/4096,x=u.zAxis.y/4096,b=u.zAxis.z/4096,E=u.position.x/4096,D=-u.position.y/4096,A=u.position.z/4096,M=-(E*(u.xAxis.x/4096)+D*y+A*S),O=-(E*(u.xAxis.y/4096)+D*_+A*x),I=-(E*(u.xAxis.z/4096)+D*C+A*b);this.walkmeshCamera.position.x=M,this.walkmeshCamera.position.y=O,this.walkmeshCamera.position.z=I,this.walkmeshCamera.lookAt(M+S,O+x,I+b),this.walkmeshCamera.up.set(y,_,C),this.walkmeshCamera.updateProjectionMatrix(),this.walkmeshScene.add(this.walkmeshCamera);var B=new Ef(16777215);B.position.set(0,0,50).normalize(),this.walkmeshScene.add(B);var z=new bf(4210752);this.walkmeshScene.add(z);for(var W=o.walkmeshSection.triangles.length,X=0;X<W;X++){var ne=o.walkmeshSection.triangles[X],de=o.walkmeshSection.accessors[X],ce=new J(ne.vertices[0].x/4096,ne.vertices[0].y/4096,ne.vertices[0].z/4096),G=new J(ne.vertices[1].x/4096,ne.vertices[1].y/4096,ne.vertices[1].z/4096),ee=new J(ne.vertices[2].x/4096,ne.vertices[2].y/4096,ne.vertices[2].z/4096),ie=function(ke,je,We,ze){var Vt=new iv({color:-1==ze?4491468:8947848}),et=new Dr;et.vertices.push(je),et.vertices.push(We);var Pt=new Fy(et,Vt);ke.add(Pt)};ie(this.walkmeshScene,ce,G,de[0]),ie(this.walkmeshScene,G,ee,de[1]),ie(this.walkmeshScene,ee,ce,de[2])}var se,ue=Ot(o.triggers.gateways);try{for(ue.s();!(se=ue.n()).done;){var ye=se.value,xe=ye.exitLineVertex1,we=ye.exitLineVertex2,_e=(ce=new J(xe.x/4096,xe.y/4096,xe.z/4096),G=new J(we.x/4096,we.y/4096,we.z/4096),new iv({color:16711680})),Ge=new Dr;Ge.vertices.push(ce),Ge.vertices.push(G);var be=new Fy(Ge,_e);this.walkmeshScene.add(be)}}catch(Xe){ue.e(Xe)}finally{ue.f()}this.walkmeshControls=new jA(this.walkmeshCamera,this.walkmeshRenderer.domElement),this.walkmeshControls.target=new J(M+S,O+x,I+b),this.walkmeshControls.panSpeed=1/4,this.walkmeshControls.rotateSpeed=1/4,this.walkmeshControls.zoomSpeed=1/4,this.walkmeshControls.update(),r.appendChild(this.walkmeshRenderer.domElement),this.walkmeshRenderer.render(this.walkmeshScene,this.walkmeshCamera);var Ae=this;!function Xe(){if(Ae&&!Ae.isDestroyed){requestAnimationFrame(Xe);var ke=Ae.clock.getDelta();Ae.walkmeshControls&&Ae.walkmeshControls.update(ke),Ae.walkmeshRenderer&&Ae.walkmeshScene&&Ae.walkmeshCamera&&Ae.walkmeshRenderer.render(Ae.walkmeshScene,Ae.walkmeshCamera)}else console.log("stopping walkmeshTick()")}()}else console.log("WARN: Could not find walkmeshContainerElement")}},{key:"createEmptyDisplay",value:function(r,o,u,f){var p={containerId:o,skeleton:r,scene:new yf,camera:new ti(45,this.DISPLAY_WIDTH/this.DISPLAY_HEIGHT,.1,1e3),renderer:null};p.containerId=o,p.scene.background=new Yt(5263440),p.scene.add(p.camera);var v=new Ef(16777215);v.position.set(0,0,50).normalize(),p.scene.add(v);var g=new bf(4210752);return p.scene.add(g),p.camera.position.x=0,p.camera.position.y=33.53,p.camera.position.z=60,p.camera.lookAt(new J(0,13.53,0)),p}},{key:"getDisplay",value:function(r){return this.displayMap[r]}},{key:"showDisplay",value:function(r,o,u){var f=r.displays[o];f.renderer=r.rendererGlobal,f.renderer.setSize(this.DISPLAY_WIDTH,this.DISPLAY_HEIGHT);var p=document.getElementById(f.containerId);p?(p.appendChild(f.renderer.domElement),f.renderer.render(f.scene,f.camera),f.screenshotDataUrl=f.renderer.domElement.toDataURL(),f.renderer.dispose(),f.renderer=null):console.log("WARN: Could not find element by display.containerId, display: ",f)}},{key:"recursiveLoadSkeletonAndAddToDisplay",value:function(r){var o=this;if(!(r>=o.displays.length)){var u=o.displays[r],f=u.skeleton;(new pv).load(Wn.KUJATA_DATA_BASE_URL+"/data/field/char.lgp/"+f.id.toLowerCase()+".gltf",function(v){vv(v);var g=v.scene,y=g.children[0];y.position.x=0,y.position.y=0,y.position.z=0,u.scene.add(g),o.showDisplay(o,r,10),o.recursiveLoadSkeletonAndAddToDisplay(r+1)},void 0,function(v){console.error("oops!",v),o.recursiveLoadSkeletonAndAddToDisplay(r+1)})}}},{key:"addNodeToGraphAndMap",value:function(r){this.graph.nodes.push(r),this.nodeMap[r.id]=r}},{key:"buildGraph",value:function(){this.graph={rows:[],nodes:[],links:[]},this.nodeMap={};for(var o=0,u=0,f=[],p=0;p<this.scene.script.entities.length;p++)for(var v=this.scene.script.entities[p],g=0;g<v.scripts.length;g++){var y=v.scripts[g];if(y.ops.length<=1)console.log("Skipping script of length <= 1, ops = ",y.ops);else{var _=[];u=0;var C={type:"scriptStart",id:"scriptStart|"+p+"|"+g,row:o,col:u++,name:p+":"+v.entityName+", Script "+g,labelLines:[]};C.labelLines=this.stringToLines(C.name,this.LABEL_LINE_LENGTH),_.push(C),this.addNodeToGraphAndMap(C);for(var S=0;S<y.ops.length;S++){var x=y.ops[S],b={type:"RET"==x.op?"scriptEnd":"op",id:"op|"+p+"|"+g+"|"+S,row:o,col:u++,name:x.js,pres:x.pres,labelLines:[]};b.labelLines=this.stringToLines(b.pres?b.pres:b.name,this.LABEL_LINE_LENGTH),_.push(b),this.addNodeToGraphAndMap(b),this.graph.links.push({source:this.graph.nodes[this.graph.nodes.length-2],target:b,type:"script"}),("REQ"==x.op||"REQSW"==x.op||"REQEW"==x.op)&&f.push({source:b,targetId:"scriptStart|"+x.e+"|"+x.f,type:"REQ"})}this.graph.rows.push(_),o++}}for(var M=0,O=f;M<O.length;M++){var I=O[M];I.targetId&&!I.target&&(I.target=this.nodeMap[I.targetId],I.target?this.graph.links.push(I):console.log("WARNING: Did not show link for execution of empty script:",I))}this.drawGraph()}},{key:"getNodeCenterX",value:function(r){return(r.col+this.NODE_SPACE_PROPORTION)*this.GRID_X}},{key:"getNodeCenterY",value:function(r){return(r.row+this.NODE_SPACE_PROPORTION)*this.GRID_Y}},{key:"getNodeWidth",value:function(r){return this.GRID_X/2*this.NODE_SPACE_PROPORTION*2}},{key:"getNodeHeight",value:function(r){return this.GRID_Y/2*this.NODE_SPACE_PROPORTION*2}},{key:"getNodeRightEdgeX",value:function(r){return this.getNodeCenterX(r)+this.getNodeWidth(r)/2}},{key:"getNodeLeftEdgeX",value:function(r){return this.getNodeCenterX(r)-this.getNodeWidth(r)/2}},{key:"lastIndexOfMulti",value:function(r,o){var p,u=-1,f=Ot(o);try{for(f.s();!(p=f.n()).done;){var g=r.lastIndexOf(p.value);g>u&&(u=g)}}catch(y){f.e(y)}finally{f.f()}return u}},{key:"stringToLines",value:function(r,o){if(!o)throw new Error("maxLineLength required");for(var u=[],f=r;u.length<10;){if(f.length<=o)return u.push(f),u;var v=f.substring(0,o),g=this.lastIndexOfMulti(v,[" ","{","("]);-1==g&&(g=o);var y=f.substring(0,g+1);u.push(y),f=f.substring(g+1)}return console.log("WARNING: maxines reached!"),u}},{key:"drawGraph",value:function(){var r=this;console.log("graph:",this.graph);var o=function(n){return new ba([[document.querySelector(n)]],[document.documentElement])}("svg");o.selectAll("g").remove();var u=o.append("g").attr("class","view"),f=u.append("g").attr("class","links").selectAll("line").data(this.graph.links).enter().append("line").attr("stroke-width",function(C){return 2}).attr("stroke",function(C){return"gray"}),p=u.append("g").attr("class","nodes").selectAll("g").data(this.graph.nodes).enter().append("g").attr("transform",function(C){return"translate("+r.getNodeCenterX(C)+" "+r.getNodeCenterY(C)+")"});f.attr("x1",function(C){return r.getNodeRightEdgeX(C.source)}).attr("y1",function(C){return r.getNodeCenterY(C.source)}).attr("x2",function(C){return r.getNodeLeftEdgeX(C.target)}).attr("y2",function(C){return r.getNodeCenterY(C.target)}),p.append("rect").attr("rx",function(C){return.05*r.GRID_X}).attr("ry",function(C){return.05*r.GRID_X}).attr("x",function(C){return-r.getNodeWidth(C)/2}).attr("y",function(C){return-r.getNodeHeight(C)/2}).attr("width",function(C){return r.getNodeWidth(C)}).attr("height",function(C){return r.getNodeHeight(C)}).attr("stroke",function(C){return"scriptStart"==C.type?"#339933":"scriptEnd"==C.type?"#993333":"gray"}).attr("stroke-width","2").attr("fill",function(C){return"white"});for(var g=p.append("text").attr("fill",function(C){return"#333"}).attr("x",0).attr("y",function(C){return C.labelLines||console.log("This does not have labelLines:",C),-C.labelLines.length/2-.5+"em"}).attr("text-anchor","middle").attr("alignment-baseline","central"),y=function(S){g.filter(function(x){return x.labelLines.length>S}).append("tspan").attr("x",0).attr("dy","1em").attr("text-anchor","middle").attr("alignment-baseline","central").text(function(x){return x.labelLines[S]})},_=0;_<10;_++)y(_)}},{key:"onSelectHrcId",value:function(r){}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(_u),lt(Bs))},n.\u0275cmp=Mr({type:n,selectors:[["scene-details"]],decls:1,vars:1,consts:[["style","background-color:#c0c0c0; padding:4px;",4,"ngIf"],[2,"background-color","#c0c0c0","padding","4px"],[2,"background-color","white","padding","4px","margin-bottom","4px"],[2,"font-size","20pt","color","#404040"],[2,"font-size","16pt","color","#808080"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","font-size","10pt","background-color","#e0e0e0","padding","16px"],[2,"width","410px"],[2,"font-size","12pt","text-align","center"],[2,"width","410px","height","240px","background-color","#222222","text-align","center"],[2,"display","inline-block","max-width","410px","max-height","240px","width","auto","height","auto","padding","0px","margin","0",3,"src"],[2,"width","4px"],["id","walkmesh-container",2,"display","inline-block","width","410px","height","240px","background-color","#222222","padding","0px"],[4,"ngIf"],[2,"height","16px"],[2,"width","100%","height","100%","padding","16px","background-color","white"],[4,"ngFor","ngForOf"],[2,"padding","100px 8px 8px 8px"],[2,"width","200px","height","250px","text-align","center","background-color","white","border","solid #555 2px"],[2,"max-width","200px","max-height","200px","width","auto","height","auto",3,"src"],[2,"height","1em"],["style","background-color:white; padding:16px;",4,"ngFor","ngForOf"],[2,"background-color","white","padding","16px"],[2,"height","8px"],[2,"font-weight","bold"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","background-color","#e0e0e0","padding","16px","margin-bottom","16px"],["style","font-size:8pt; background-color:white; width:260px; height:450px; padding:16px; margin:0px 16px 16px 0px;",4,"ngFor","ngForOf"],[2,"font-size","8pt","background-color","white","width","260px","height","450px","padding","16px","margin","0px 16px 16px 0px"],["style","background-color:white; margin:16px 16px 16px 16px;",4,"ngFor","ngForOf"],[2,"font-size","10pt","margin","auto","text-align","center"],[2,"height","1.0em"],[3,"href"],[2,"background-color","white","margin","16px 16px 16px 16px"],["style","margin:auto; background-color:#808080",3,"width","height","id",4,"ngIf"],["style","margin:auto; background-color:white",3,"width","height",4,"ngIf"],[2,"margin","auto","background-color","#808080",3,"id"],[2,"margin","auto","background-color","white"],[3,"src"],[2,"display","inline-block","width","0.75em","height","0.75em","border","solid #808080 1px"],["style","font-size:8pt; border:solid #e0e0e0 1px; width:100; height:64; margin-right:16px; margin-bottom:16px; padding:16px; background-color:white;",4,"ngFor","ngForOf"],[2,"font-size","8pt","border","solid #e0e0e0 1px","width","100","height","64","margin-right","16px","margin-bottom","16px","padding","16px","background-color","white"],[2,"font-size","10pt"],[3,"routerLink","click"],["style","font-size:8pt; background-color:#e0e0e0; padding:16px; margin-bottom:16px; ",4,"ngFor","ngForOf"],[2,"font-size","8pt","background-color","#e0e0e0","padding","16px","margin-bottom","16px"],[2,"font-size","14pt","color","#404040"],[2,"font-size","12pt","color","#808080"],["style","background-color:white; padding:8px; margin-bottom:8px;",4,"ngFor","ngForOf"],[2,"background-color","white","padding","8px","margin-bottom","8px"],[2,"height","0.5em"],["style","font-size:8pt","class","kujata-font-mono",4,"ngFor","ngForOf"],[1,"kujata-font-mono",2,"font-size","8pt"],[2,"display","inline-block","width","24em"],[2,"display","inline-block"],["style","width:200px; height:250px; text-align:center;",4,"ngIf"],[2,"width","200px","height","250px","text-align","center"],[3,"routerLink"],[2,"width","100%","height","100%","padding","0","margin","0","background-color","#e0e0e0"],["width","100%","height","800",2,"margin","0","padding","0","font-family","'Fira Mono', monospace"]],template:function(t,r){1&t&&it(0,dJ,46,12,"div",0),2&t&&d("ngIf",r.selectedFieldName)},directives:[$a,rl,Vs],styles:[""]}),n}();function pJ(n,a){if(1&n&&(s(0,"a",12),s(1,"div",13),s(2,"div",14),le(3,"0x"),s(4,"b"),le(5),l(),l(),s(6,"div",15),le(7),l(),l(),s(8,"div",16),s(9,"div",17),le(10),l(),l(),l()),2&n){var t=a.$implicit,r=Re(3);d("routerLink","/field-op-code-details/"+t),ae(5),Hn(t),ae(2),Hn(r.opMetadata[t].shortName),ae(3),Hn(r.opMetadata[t].description||t)}}function hJ(n,a){if(1&n&&(s(0,"div"),s(1,"div",9),le(2),l(),s(3,"div",10),it(4,pJ,11,4,"a",11),l(),l()),2&n){var t=a.$implicit;ae(2),Hn(t.name),ae(2),d("ngForOf",t.opCodes)}}function vJ(n,a){if(1&n&&(s(0,"a",18),s(1,"div",14),le(2,"0x"),s(3,"b"),le(4),l(),l(),l()),2&n){var t=a.$implicit;d("routerLink","/field-op-code-details/"+t),ae(4),Hn(t)}}function gJ(n,a){if(1&n&&(s(0,"div",4),s(1,"div",5),le(2,"Arranged by Category"),l(),c(3,"div",2),it(4,hJ,5,2,"div",6),c(5,"div",2),s(6,"div",5),le(7,"All OpCodes in Numerical Order"),l(),c(8,"div",2),s(9,"div",7),it(10,vJ,5,2,"a",8),l(),l()),2&n){var t=Re();ae(4),d("ngForOf",t.opCategories),ae(6),d("ngForOf",t.opCodes)}}var mJ=function(){var n=function(){function a(t){k(this,a),this.http=t,this.opCategories=[],this.opCodes=[],this.Object=Object}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.http.get(Wn.KUJATA_DATA_BASE_URL+"/metadata/op-categories.json").subscribe(function(u){r.opCategories=u,r.http.get(Wn.KUJATA_DATA_BASE_URL+"/metadata/op-metadata.json").subscribe(function(p){r.opMetadata=p;for(var v=0,g=Object.keys(p);v<g.length;v++)r.opCodes.push(g[v]);r.opCodes.sort()})})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(Bs))},n.\u0275cmp=Mr({type:n,selectors:[["field-op-codes"]],decls:5,vars:1,consts:[[2,"background-color","white","padding","4px","margin-bottom","4px"],[2,"font-size","24pt","color","#404040"],[2,"height","16px"],["style","font-size:12pt;",4,"ngIf"],[2,"font-size","12pt"],[2,"font-size","20pt","color","#404040"],[4,"ngFor","ngForOf"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","font-size","10pt"],["style","border:solid white 2px; color: #404040; margin:0px 4px 4px 0px; text-align:center; text-decoration:none; ",3,"routerLink",4,"ngFor","ngForOf"],[2,"font-size","16pt","color","#404040"],[1,"op-cards-container"],["class","op-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"op-card",3,"routerLink"],[2,"height","2em"],[1,"op-code"],[1,"op-short-name"],[2,"height","4em"],[1,"op-description"],[2,"border","solid white 2px","color","#404040","margin","0px 4px 4px 0px","text-align","center","text-decoration","none",3,"routerLink"]],template:function(t,r){1&t&&(s(0,"div",0),s(1,"div",1),le(2,"Field Op Codes"),l(),c(3,"div",2),it(4,gJ,11,2,"div",3),l()),2&t&&(ae(4),d("ngIf",r.opMetadata))},directives:[$a,rl,Vs],styles:[".op-cards-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:flex-start;align-content:flex-start;font-size:10pt;background-color:silver;padding:4px}.op-card[_ngcontent-%COMP%]{width:150px;height:120px;border:solid white 2px;background-color:#fff;color:#404040;margin:0 4px 4px 0;text-align:center;text-decoration:none;padding:4px}.op-card[_ngcontent-%COMP%]:hover{background-color:#fff;border:solid black 2px}.op-code[_ngcontent-%COMP%]{display:inline-block;width:50px;padding:4px;background-color:#d22;color:#fff}.op-short-name[_ngcontent-%COMP%]{display:inline-block;width:80px;padding:4px;background-color:gray;color:#fff}.op-description[_ngcontent-%COMP%]{display:inline-block;padding:4px;color:#404040}"]}),n}();function yJ(n,a){1&n&&(s(0,"div"),s(1,"p"),le(2,"Fetching..."),l(),l())}function _J(n,a){1&n&&(s(0,"div"),s(1,"p"),le(2,"Sorry, this app had a problem getting that info."),l(),l())}function CJ(n,a){if(1&n){var t=L();s(0,"div"),s(1,"p"),s(2,"a",4),oe("click",function(){return Pr(t),Re(2).exportToCsv()}),le(3,"Export To CSV"),l(),l(),c(4,"ag-grid-angular",5),N0(5,"async"),l()}if(2&n){var r=Re(2);ae(4),d("gridOptions",r.gridOptions)("rowData",k0(5,3,r.rowData))("columnDefs",r.columnDefs)}}function wJ(n,a){if(1&n&&(s(0,"div",2),s(1,"h2"),le(2),l(),s(3,"h3"),le(4,"Usages"),l(),it(5,yJ,3,0,"div",3),it(6,_J,3,0,"div",3),it(7,CJ,6,5,"div",3),l()),2&n){var t=Re();ae(2),mo("Op Code ",t.selectedOpCode," - ",t.selectedOpDescription,""),ae(3),d("ngIf","FETCHING"==t.fetchStatus),ae(1),d("ngIf","ERROR"==t.fetchStatus),ae(1),d("ngIf","SUCCESS"==t.fetchStatus)}}var SJ=function(){var n=function(){function a(t,r,o){k(this,a),this.route=t,this.router=r,this.http=o,this.selectedOpCode=null,this.selectedOpDescription="...loading...",this.selectedOpMetadata=null,this.usages=[],this.fetchStatus="NONE",this.Object=Object,this.columnDefs=[],this.rowData=sn([]),this.friendlyColumnNames={routerLink:"Router Link",fieldName:"Field",entityName:"Entity",scriptIndex:"Script",opIndex:"Line",raw:"Raw",mr:"Makou Reactor translation",js:"Javascript translation (experimental)",pres:"Dramatization (experimental)"},this.columnWidths={fieldName:100,entityName:100,op:100,mr:400,js:400,pres:400}}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.gridOptions={rowData:this.rowData,columnDefs:this.columnDefs,rowSelection:"single",onRowClicked:function(f){console.log("a row was clicked")},onColumnResized:function(f){console.log("a column was resized")},onGridReady:function(f){console.log("the grid is now ready")},suppressNoRowsOverlay:!0};var o=Wn.KUJATA_DATA_BASE_URL+"/metadata/op-metadata.json";this.http.get(o).subscribe(function(u){r.opMetadata=u,r.initialize()}),this.http.get(o=Wn.KUJATA_DATA_BASE_URL+"/metadata/op-metadata.json").subscribe(function(u){r.opMetadata=u,r.initialize()}),this.route.paramMap.subscribe(function(u){r.selectedOpCode=u.get("hex"),r.initialize()})}},{key:"addColumnDef",value:function(r,o){var u={headerName:this.friendlyColumnNames[r]||r,field:r,width:o,sortable:!0,filter:!0,resizable:!0,onCellClicked:void 0,cellStyle:void 0,cellRenderer:void 0};"fieldName"==r&&(u.cellRenderer=function(f){return'<a href="scene-details/'.concat(f.value,'">').concat(f.value,"</a>")}),this.columnDefs.push(u)}},{key:"initialize",value:function(){var r=this;this.opMetadata&&this.selectedOpCode&&(this.selectedOpMetadata=this.opMetadata[this.selectedOpCode],this.selectedOpDescription="".concat(this.selectedOpMetadata.shortName," - ").concat(this.selectedOpMetadata.description),this.fetchStatus="FETCHING",this.gridOptions.api&&this.gridOptions.api.showLoadingOverlay(),this.http.get(Wn.KUJATA_DATA_BASE_URL+"/metadata/op-code-usages/"+this.selectedOpCode+".json").subscribe(function(u){if(r.fetchStatus="SUCCESS",r.usages=u,r.rowData=sn(r.usages),r.columnDefs=[],r.usages.length>0)for(var f=r.usages[0],p=0,v=Object.keys(f);p<v.length;p++){var g=v[p];"op"==g&&r.addColumnDef("raw",60+6*f.raw.length),"raw"!=g&&r.addColumnDef(g,r.columnWidths[g]||75)}r.gridOptions.api&&r.gridOptions.api.hideOverlay()},function(u){r.fetchStatus="ERROR"}))}},{key:"exportToCsv",value:function(){this.gridOptions.api.exportDataAsCsv({})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(_u),lt(Lo),lt(Bs))},n.\u0275cmp=Mr({type:n,selectors:[["field-op-code-details"]],decls:2,vars:1,consts:[[2,"background-color","#e0e0e0","padding","16px","margin-bottom","16px"],["style","background-color:white; padding:16px;",4,"ngIf"],[2,"background-color","white","padding","16px"],[4,"ngIf"],[3,"routerLink","click"],[1,"ag-theme-balham",2,"width","100%","height","500px",3,"gridOptions","rowData","columnDefs"]],template:function(t,r){1&t&&(s(0,"div",0),it(1,wJ,8,5,"div",1),l()),2&t&&(ae(1),d("ngIf",r.selectedOpCode))},directives:[$a,Vs,pL],pipes:[OT],styles:[""]}),n}();function EJ(n,a){1&n&&c(0,"div",13),2&n&&d("id",Re().$implicit.containerId)}function bJ(n,a){if(1&n&&(s(0,"div",14),c(1,"img",15),l()),2&n){var t=Re().$implicit;ae(1),d("src",t.screenshotDataUrl,Si)}}function xJ(n,a){if(1&n&&(s(0,"a",7),it(1,EJ,1,1,"div",8),it(2,bJ,2,1,"div",9),s(3,"div",10),s(4,"div",11),s(5,"b"),le(6),l(),l(),s(7,"div",12),s(8,"b"),le(9),l(),l(),l(),l()),2&n){var t=a.$implicit;d("routerLink","/field-model-details/"+t.skeleton),ae(1),d("ngIf",!t.screenshotDataUrl),ae(1),d("ngIf",t.screenshotDataUrl),ae(4),Hn(t.friendlyName),ae(3),Hn(t.skeleton)}}function RJ(n,a){if(1&n&&(s(0,"tr"),s(1,"td"),le(2),l(),s(3,"td"),le(4),l(),l()),2&n){var t=Re().$implicit;ae(2),Hn(t.id),ae(2),Hn(t.name)}}function TJ(n,a){if(1&n&&(w(0),it(1,RJ,5,2,"tr",6),R()),2&n){var t=a.$implicit,r=Re().$implicit;ae(1),d("ngIf",t.numBones==r)}}function DJ(n,a){if(1&n&&(s(0,"tr"),s(1,"td"),le(2),l(),s(3,"td"),le(4),l(),l()),2&n){var t=Re().$implicit;ae(2),Hn(t.id),ae(2),Hn(t.numFrames)}}function AJ(n,a){if(1&n&&(w(0),it(1,DJ,5,2,"tr",6),R()),2&n){var t=a.$implicit,r=Re().$implicit;ae(1),d("ngIf",t.numBones==r)}}function MJ(n,a){if(1&n&&(s(0,"div",19),s(1,"h2",20),le(2),l(),s(3,"div",21),s(4,"div",22),s(5,"h3"),le(6,"Field Models"),l(),s(7,"table"),s(8,"thead"),s(9,"tr"),s(10,"th"),le(11,"id"),l(),s(12,"th"),le(13,"name"),l(),l(),l(),s(14,"tbody"),it(15,TJ,2,1,"ng-container",23),l(),l(),l(),s(16,"div",24),s(17,"h3"),le(18,"Field Animations"),l(),s(19,"table"),s(20,"thead"),s(21,"tr"),s(22,"th"),le(23,"id"),l(),s(24,"th"),le(25,"numFrames"),l(),l(),l(),s(26,"tbody"),it(27,AJ,2,1,"ng-container",23),l(),l(),l(),l(),c(28,"div",3),l()),2&n){var t=a.$implicit,r=Re(3);ae(2),Nt("Models with ",t," bones"),ae(13),d("ngForOf",r.database.skeletons),ae(12),d("ngForOf",r.database.animations)}}function OJ(n,a){if(1&n&&(s(0,"div",17),c(1,"div",3),it(2,MJ,29,3,"div",18),l()),2&n){var t=Re(2);ae(2),d("ngForOf",t.uniqueBoneCounts)}}function PJ(n,a){if(1&n&&(w(0),it(1,OJ,3,1,"div",16),R()),2&n){var t=Re();ae(1),d("ngIf",t.database)}}var IJ=function(){var n=function(){function a(t){k(this,a),this.http=t,this.environment=Wn,this.rendererGlobal=new Lc({alpha:!0,antialias:!0}),this.isDestroyed=!1}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.displays=[],this.status="Loading skeleton info from database...",this.http.get(Wn.KUJATA_DATA_BASE_URL+"/metadata/skeleton-names-field.json").subscribe(function(o){r.modelIds=o,r.clock=new fv,Object.keys(r.modelIds).forEach(function(f,p){var g=r.createEmptyDisplay(f,r.modelIds[f],"ff7_scene_container"+p,200,200);r.displays.push(g)}),r.recursiveLoadSkeletonAndAddToDisplay(0)})}},{key:"ngOnChanges",value:function(r){console.log("simpleChanges:",r)}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0}},{key:"showDisplay",value:function(r,o,u){var f=r.displays[o];f.renderer=r.rendererGlobal,f.renderer.setSize(150,150),f.renderer.outputEncoding=Jn,document.getElementById(f.containerId).appendChild(f.renderer.domElement),f.renderer.render(f.scene,f.camera),f.screenshotDataUrl=f.renderer.domElement.toDataURL(),f.renderer.dispose(),f.renderer=null}},{key:"createEmptyDisplay",value:function(r,o,u,f,p){var v={containerId:u,skeleton:r,friendlyName:o,scene:new yf,camera:new ti(75,f/p,.1,1e3),renderer:null};v.containerId=u,v.scene.background=new Yt(5263440),v.scene.add(v.camera);var g=new Ef(16777215);g.position.set(0,0,50).normalize(),v.scene.add(g);var y=new bf(4210752);return v.scene.add(y),v.camera.position.x=0,v.camera.position.y=13.53,v.camera.position.z=50,v.camera.rotation.x=0*Math.PI/180,v}},{key:"recursiveLoadSkeletonAndAddToDisplay",value:function(r){var o=this;if(o&&!o.isDestroyed)if(r>=o.displays.length)this.status="Finished.";else{var u=o.displays[r],f=u.skeleton;this.status="Loading skeleton model "+f+" ("+u.friendlyName+")...",(new pv).load(Wn.KUJATA_DATA_BASE_URL+"/data/field/char.lgp/"+f+".hrc.gltf",function(g){if(o&&!o.isDestroyed){vv(g);var y=g.scene,_=y.children[0];_.position.x=0,_.position.y=0,_.position.z=0,u.scene.add(y),o.showDisplay(o,r,10),o.recursiveLoadSkeletonAndAddToDisplay(r+1)}else console.log("ignoring gltf load() callback")},void 0,function(g){console.error("oops!",g),o.recursiveLoadSkeletonAndAddToDisplay(r+1)})}else console.log("stopping recursive loading")}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(Bs))},n.\u0275cmp=Mr({type:n,selectors:[["field-models"]],features:[ua],decls:8,vars:3,consts:[[2,"background-color","#c0c0c0"],[2,"padding","4px"],[2,"background-color","white","padding","4px","width","308px","font-size","10pt"],[2,"height","1em"],[2,"display","flex","flex-wrap","wrap"],["class","display-box",3,"routerLink",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"display-box",3,"routerLink"],["class","scene-container",3,"id",4,"ngIf"],["class","scene-container",4,"ngIf"],[2,"height","15px"],[2,"text-align","center"],[2,"text-align","center","font-size","10pt"],[1,"scene-container",3,"id"],[1,"scene-container"],[3,"src"],["style","background-color:#e0e0e0",4,"ngIf"],[2,"background-color","#e0e0e0"],["style","background-color:white; margin:8px; padding:8px; border-radius:8px;",4,"ngFor","ngForOf"],[2,"background-color","white","margin","8px","padding","8px","border-radius","8px"],[2,"margin","auto"],[2,"display","grid","grid-template-columns","50% 50%","grid-template-rows","auto auto"],[2,"grid-row","1","grid-column","1/2"],[4,"ngFor","ngForOf"],[2,"grid-row","1","grid-column","2/3"]],template:function(t,r){1&t&&(s(0,"div",0),s(1,"div",1),s(2,"div",2),le(3),l(),l(),c(4,"div",3),s(5,"div",4),it(6,xJ,10,5,"a",5),l(),l(),it(7,PJ,2,1,"ng-container",6)),2&t&&(ae(3),Nt(" ",r.status," "),ae(3),d("ngForOf",r.displays),ae(1),d("ngIf",!1))},directives:[rl,$a,Vs],styles:[".display-box[_ngcontent-%COMP%]{width:150px;height:220px;background-color:#fff;margin:4px;color:#404040;text-decoration:none}.scene-container[_ngcontent-%COMP%]{width:150px;height:150px;margin:0;padding:0;background-color:gray}"]}),n}();function LJ(n,a){1&n&&c(0,"div",12),2&n&&d("id",Re().$implicit.containerId)}function FJ(n,a){if(1&n&&(s(0,"div",13),c(1,"img",14),l()),2&n){var t=Re().$implicit;ae(1),d("src",t.screenshotDataUrl,Si)}}function NJ(n,a){if(1&n&&(s(0,"a",7),it(1,LJ,1,1,"div",8),it(2,FJ,2,1,"div",9),s(3,"div",10),s(4,"div",11),s(5,"b"),le(6),l(),l(),s(7,"div",11),le(8),l(),l(),l()),2&n){var t=a.$implicit;d("routerLink","/battle-model-details/"+t.skeleton),ae(1),d("ngIf",!t.screenshotDataUrl),ae(1),d("ngIf",t.screenshotDataUrl),ae(4),Hn(t.friendlyName),ae(2),Hn(t.skeleton)}}function kJ(n,a){if(1&n&&(s(0,"tr"),s(1,"td"),le(2),l(),s(3,"td"),le(4),l(),l()),2&n){var t=Re().$implicit;ae(2),Hn(t.id),ae(2),Hn(t.name)}}function GJ(n,a){if(1&n&&(w(0),it(1,kJ,5,2,"tr",6),R()),2&n){var t=a.$implicit,r=Re().$implicit;ae(1),d("ngIf",t.numBones==r)}}function BJ(n,a){if(1&n&&(s(0,"tr"),s(1,"td"),le(2),l(),s(3,"td"),le(4),l(),l()),2&n){var t=Re().$implicit;ae(2),Hn(t.id),ae(2),Hn(t.numFrames)}}function HJ(n,a){if(1&n&&(w(0),it(1,BJ,5,2,"tr",6),R()),2&n){var t=a.$implicit,r=Re().$implicit;ae(1),d("ngIf",t.numBones==r)}}function VJ(n,a){if(1&n&&(s(0,"div",18),s(1,"h2",19),le(2),l(),s(3,"div",20),s(4,"div",21),s(5,"h3"),le(6,"Battle Models"),l(),s(7,"table"),s(8,"thead"),s(9,"tr"),s(10,"th"),le(11,"id"),l(),s(12,"th"),le(13,"name"),l(),l(),l(),s(14,"tbody"),it(15,GJ,2,1,"ng-container",22),l(),l(),l(),s(16,"div",23),s(17,"h3"),le(18,"Battle Animations"),l(),s(19,"table"),s(20,"thead"),s(21,"tr"),s(22,"th"),le(23,"id"),l(),s(24,"th"),le(25,"numFrames"),l(),l(),l(),s(26,"tbody"),it(27,HJ,2,1,"ng-container",22),l(),l(),l(),l(),c(28,"div",3),l()),2&n){var t=a.$implicit,r=Re(3);ae(2),Nt("Models with ",t," bones"),ae(13),d("ngForOf",r.database.skeletons),ae(12),d("ngForOf",r.database.animations)}}function WJ(n,a){if(1&n&&(s(0,"div",16),c(1,"div",3),it(2,VJ,29,3,"div",17),l()),2&n){var t=Re(2);ae(2),d("ngForOf",t.uniqueBoneCounts)}}function UJ(n,a){if(1&n&&(w(0),it(1,WJ,3,1,"div",15),R()),2&n){var t=Re();ae(1),d("ngIf",t.database)}}var zJ=function(){var n=function(){function a(t){k(this,a),this.http=t,this.environment=Wn,this.rendererGlobal=new Lc({alpha:!0,antialias:!0}),this.isDestroyed=!1}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.displays=[],this.status="Loading skeleton info from database...",this.http.get(Wn.KUJATA_DATA_BASE_URL+"/metadata/skeleton-names-battle.json").subscribe(function(o){r.battleModelList=o,r.clock=new fv,Object.keys(r.battleModelList).forEach(function(f,p){var g=r.createEmptyDisplay(f,r.battleModelList[f],"ff7_scene_container"+p,200,200);r.displays.push(g)}),r.recursiveLoadSkeletonAndAddToDisplay(0)})}},{key:"ngOnChanges",value:function(r){console.log("simpleChanges:",r)}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0}},{key:"showDisplay",value:function(r,o,u){var f=r.displays[o];f.renderer=r.rendererGlobal,f.renderer.setSize(150,150),f.renderer.outputEncoding=Jn,document.getElementById(f.containerId).appendChild(f.renderer.domElement),f.renderer.render(f.scene,f.camera),f.screenshotDataUrl=f.renderer.domElement.toDataURL(),f.renderer.dispose(),f.renderer=null}},{key:"createEmptyDisplay",value:function(r,o,u,f,p){var v={containerId:u,skeleton:r,friendlyName:o,scene:new yf,camera:new ti(90,f/p,.1,1e3),renderer:null};v.containerId=u,v.scene.background=new Yt(5263440),v.scene.add(v.camera);var g=new Ef(16777215);g.position.set(0,0,50).normalize(),v.scene.add(g);var y=new bf(4210752);return v.scene.add(y),v.camera.position.x=0,v.camera.position.y=0,v.camera.position.z=0,v.camera.rotation.x=0*Math.PI/180,v}},{key:"fitCameraToCenteredObject",value:function(r,o,u,f){var p=new ll;p.setFromObject(o),new J;var g=new J;p.getSize(g);var y=r.fov*(Math.PI/180),_=2*Math.atan(Math.tan(y/2)*r.aspect),C=g.z/2+Math.abs(g.x/2/Math.tan(_/2)),S=g.z/2+Math.abs(g.y/2/Math.tan(y/2)),x=Math.max(C,S);void 0!==u&&0!==u&&(x*=u),r.position.set(0,g.y/2,x);var b=p.min.z,E=b<0?-b+x:x-b;r.far=3*E,r.updateProjectionMatrix(),void 0!==f&&(f.target=new J(0,0,0),f.maxDistance=2*E)}},{key:"recursiveLoadSkeletonAndAddToDisplay",value:function(r){var o=this;if(o&&!o.isDestroyed)if(r>=o.displays.length)this.status="Finished.";else{var u=o.displays[r],f=u.skeleton;this.status="Loading skeleton model "+f+" ("+u.friendlyName+")...",(new pv).load(Wn.KUJATA_DATA_BASE_URL+"/data/battle/battle.lgp/"+f+".hrc.gltf",function(g){if(o&&!o.isDestroyed){vv(g);var y=g.scene,_=y.children[0];_.position.x=0,_.position.y=0,_.position.z=0,u.scene.add(y),o.fitCameraToCenteredObject(u.camera,y,void 0,void 0),o.showDisplay(o,r,10),o.recursiveLoadSkeletonAndAddToDisplay(r+1)}else console.log("ignoring gltf load() callback")},void 0,function(g){console.error("oops!",g),o.recursiveLoadSkeletonAndAddToDisplay(r+1)})}else console.log("stopping recursive loading")}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(Bs))},n.\u0275cmp=Mr({type:n,selectors:[["battle-models"]],features:[ua],decls:8,vars:3,consts:[[2,"background-color","#c0c0c0"],[2,"padding","4px"],[2,"background-color","white","padding","4px","width","308px","font-size","10pt"],[2,"height","1em"],[2,"display","flex","flex-wrap","wrap"],["class","display-box",3,"routerLink",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"display-box",3,"routerLink"],["class","scene-container",3,"id",4,"ngIf"],["class","scene-container",4,"ngIf"],[2,"height","25px"],[2,"text-align","center"],[1,"scene-container",3,"id"],[1,"scene-container"],[3,"src"],["style","background-color:#e0e0e0",4,"ngIf"],[2,"background-color","#e0e0e0"],["style","background-color:white; margin:8px; padding:8px; border-radius:8px;",4,"ngFor","ngForOf"],[2,"background-color","white","margin","8px","padding","8px","border-radius","8px"],[2,"margin","auto"],[2,"display","grid","grid-template-columns","50% 50%","grid-template-rows","auto auto"],[2,"grid-row","1","grid-column","1/2"],[4,"ngFor","ngForOf"],[2,"grid-row","1","grid-column","2/3"]],template:function(t,r){1&t&&(s(0,"div",0),s(1,"div",1),s(2,"div",2),le(3),l(),l(),c(4,"div",3),s(5,"div",4),it(6,NJ,9,5,"a",5),l(),l(),it(7,UJ,2,1,"ng-container",6)),2&t&&(ae(3),Nt(" ",r.status," "),ae(3),d("ngForOf",r.displays),ae(1),d("ngIf",!1))},directives:[rl,$a,Vs],styles:[".display-box[_ngcontent-%COMP%]{width:150px;height:220px;background-color:#fff;margin:4px;color:#404040;text-decoration:none}.scene-container[_ngcontent-%COMP%]{width:150px;height:150px;margin:0;padding:0;background-color:gray}"]}),n}();function jJ(n,a){if(1&n){var t=L();s(0,"div",11),oe("click",function(){var p=Pr(t).$implicit;return Re(2).onSelectAnimation(p)}),le(1),l()}if(2&n){var r=a.$implicit,o=Re(2);ae(1),mo(" ",r," (",o.metadata.animationStats.stand[r],") ")}}function qJ(n,a){if(1&n){var t=L();s(0,"div",11),oe("click",function(){var p=Pr(t).$implicit;return Re(2).onSelectAnimation(p)}),le(1),l()}if(2&n){var r=a.$implicit,o=Re(2);ae(1),mo(" ",r," (",o.metadata.animationStats.walk[r],") ")}}function KJ(n,a){if(1&n){var t=L();s(0,"div",11),oe("click",function(){var p=Pr(t).$implicit;return Re(2).onSelectAnimation(p)}),le(1),l()}if(2&n){var r=a.$implicit,o=Re(2);ae(1),mo(" ",r," (",o.metadata.animationStats.run[r],") ")}}function YJ(n,a){if(1&n){var t=L();s(0,"div",11),oe("click",function(){var p=Pr(t).$implicit;return Re(2).onSelectAnimation(p)}),le(1),l()}if(2&n){var r=a.$implicit,o=Re(2);ae(1),mo(" ",r," (",o.metadata.animationStats.other[r],") ")}}function $J(n,a){if(1&n&&(s(0,"div",12),le(1),l()),2&n){var t=a.$implicit,r=Re(2);ae(1),mo(" ",t," (",r.metadata.fieldStats[t],") ")}}function XJ(n,a){if(1&n&&(s(0,"div",2),s(1,"h2"),le(2),l(),s(3,"h3"),le(4),l(),s(5,"h4"),le(6),l(),s(7,"div",3),s(8,"div",4),s(9,"h4"),le(10,"Model"),l(),c(11,"div",5),l(),s(12,"div",6),s(13,"h4"),le(14,"Animations"),l(),s(15,"div",7),s(16,"h5"),le(17,"Stand"),l(),it(18,jJ,2,2,"div",8),l(),s(19,"div",7),s(20,"h5"),le(21,"Walk"),l(),it(22,qJ,2,2,"div",8),l(),s(23,"div",7),s(24,"h5"),le(25,"Run"),l(),it(26,KJ,2,2,"div",8),l(),s(27,"div",7),s(28,"h5"),le(29,"Other"),l(),it(30,YJ,2,2,"div",8),l(),l(),s(31,"div",9),s(32,"h4"),le(33,"Fields"),l(),it(34,$J,2,2,"div",10),l(),l(),l()),2&n){var t=Re();ae(2),Nt("HRC ID: ",t.selectedHrcId,""),ae(2),Nt("Name: ",t.friendlyName,""),ae(2),Nt("Used in ",t.metadata.numFieldModelLoaders," field model loaders"),ae(12),d("ngForOf",t.standAnimations),ae(4),d("ngForOf",t.walkAnimations),ae(4),d("ngForOf",t.runAnimations),ae(4),d("ngForOf",t.otherAnimations),ae(4),d("ngForOf",t.Object.keys(t.metadata.fieldStats))}}var JJ=function(){var n=function(){function a(t,r){k(this,a),this.route=t,this.http=r,this.environment=Wn,this.CHAR_BASE_URL=Wn.KUJATA_DATA_BASE_URL+"/data/field/char.lgp/",this.SCENE_WIDTH=300,this.SCENE_HEIGHT=300,this.standAnimations=[],this.walkAnimations=[],this.runAnimations=[],this.otherAnimations=[],this.Object=Object,this.isAnimationEnabled=!1,this.isDestroyed=!1}return j(a,[{key:"ngOnInit",value:function(){var r=this,o=Wn.KUJATA_DATA_BASE_URL+"/metadata/field-model-metadata.json";this.http.get(o).subscribe(function(u){r.fieldModelMetadata=u,r.initialize()}),this.http.get(o=Wn.KUJATA_DATA_BASE_URL+"/metadata/skeleton-names-field.json").subscribe(function(u){r.skeletonFriendlyNames=u,r.initialize()}),this.route.paramMap.subscribe(function(u){r.selectedHrcId=u.get("hrcId"),r.initialize()})}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0,this.isAnimationEnabled=!1}},{key:"initialize",value:function(){var r=this;if(this.fieldModelMetadata&&this.skeletonFriendlyNames&&this.selectedHrcId){this.friendlyName=this.skeletonFriendlyNames[this.selectedHrcId],this.metadata=this.fieldModelMetadata[this.selectedHrcId],this.standAnimations=Object.keys(this.metadata.animationStats.stand),this.walkAnimations=Object.keys(this.metadata.animationStats.walk),this.runAnimations=Object.keys(this.metadata.animationStats.run),this.otherAnimations=Object.keys(this.metadata.animationStats.other);var o=function(v){return function(g,y){return v[y]-v[g]}};this.standAnimations.sort(o(this.metadata.animationStats.stand)),this.walkAnimations.sort(o(this.metadata.animationStats.walk)),this.runAnimations.sort(o(this.metadata.animationStats.run)),this.otherAnimations.sort(o(this.metadata.animationStats.other)),this.isAnimationEnabled=!1,this.selectedAnimId=this.standAnimations[0],this.clock=new fv,this.renderer=new Lc({alpha:!0,antialias:!0}),this.renderer.setSize(this.SCENE_WIDTH,this.SCENE_HEIGHT),this.renderer.outputEncoding=Jn,this.modelGLTF=null,this.gltf=null,this.scene=null,this.camera=new ti(90,this.SCENE_WIDTH/this.SCENE_HEIGHT,.1,1e3),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=50,this.camera.rotation.x=0*Math.PI/180,this.controls=null,this.http.get(this.CHAR_BASE_URL+this.selectedHrcId+".hrc.gltf").subscribe(function(p){r.modelGLTF=p,r.fetchAnimationAndInitializeScene()},function(p){console.error("oops!",p)});var u=this;!function p(){if(u&&!u.isDestroyed){requestAnimationFrame(p);var v=u.clock.getDelta();u.controls&&u.controls.update(v),u.mixer&&u.isAnimationEnabled&&u.mixer.update(v),u.renderer&&u.scene&&u.camera&&u.renderer.render(u.scene,u.camera)}else console.log("stopping appTick()")}()}}},{key:"onSelectAnimation",value:function(r){this.selectedAnimId=r,this.fetchAnimationAndInitializeScene()}},{key:"fetchAnimationAndInitializeScene",value:function(){var r=this;this.http.get(this.CHAR_BASE_URL+this.selectedAnimId+".a.gltf").subscribe(function(o){var u=r.createCombinedGLTF(r.modelGLTF,o);r.initializeSceneWithCombinedGLTF(r,u)},function(o){console.error("oops!",o)})}},{key:"initializeSceneWithCombinedGLTF",value:function(r,o){var u=o.nodes[1].translation[1];0==u&&(u=15),0==r.camera.position.y&&(console.log("setting camera height to:"+2*u),r.camera.position.y=2*u,r.camera.position.z=Math.max(3*u,50)),console.log("modelRootHeight="+u),(new pv).parse(JSON.stringify(o),r.CHAR_BASE_URL,function(p){vv(p);var g,v=Ot(p.animations);try{for(v.s();!(g=v.n()).done;){var C,_=Ot(g.value.tracks);try{for(_.s();!(C=_.n()).done;)C.value.optimize()}catch(B){_.e(B)}finally{_.f()}}}catch(B){v.e(B)}finally{v.f()}console.log("combined gltf:",p),r.gltf=p;var x=p.scene;r.scene=new yf,r.scene.background=new Yt(12312063),r.scene.add(r.camera);var E=new Ef(16777215);E.position.set(0,0,50).normalize(),r.scene.add(E);var D=new bf(4210752);r.scene.add(D);var A=new es({color:3390293,opacity:1,side:2}),M=new bA(50,32),O=new Fr(M,A);O.rotateX(-Math.PI/2),r.scene.add(O),r.scene.add(x),document.getElementById("scene-container").appendChild(r.renderer.domElement),r.controls=new jA(r.camera,r.renderer.domElement),r.controls.target=new J(0,u,0),r.controls.update(),r.startAnimation(),r.renderer.render(r.scene,r.camera)},void 0,function(p){console.error("oops!",p)})}},{key:"createCombinedGLTF",value:function(r,o){console.log("modelGLTF:",r),console.log("animGLTF:",o);var u=JSON.parse(JSON.stringify(r)),f=JSON.parse(JSON.stringify(o)),p=u.buffers.length,v=u.bufferViews.length,g=u.accessors.length;u.animations||(u.animations=[]);var _,y=Ot(f.buffers);try{for(y.s();!(_=y.n()).done;)u.buffers.push(_.value)}catch(W){y.e(W)}finally{y.f()}var x,S=Ot(f.bufferViews);try{for(S.s();!(x=S.n()).done;){var b=x.value;b.buffer+=p,u.bufferViews.push(b)}}catch(W){S.e(W)}finally{S.f()}var D,E=Ot(f.accessors);try{for(E.s();!(D=E.n()).done;){var A=D.value;A.bufferView+=v,u.accessors.push(A)}}catch(W){E.e(W)}finally{E.f()}var O,M=Ot(f.animations);try{for(M.s();!(O=M.n()).done;){var z,I=O.value,B=Ot(I.samplers);try{for(B.s();!(z=B.n()).done;){var P=z.value;P.input+=g,P.output+=g}}catch(W){B.e(W)}finally{B.f()}u.animations.push(I)}}catch(W){M.e(W)}finally{M.f()}return console.log("combinedGLTF:",u),u}},{key:"startAnimation",value:function(){this.isAnimationEnabled=!0,this.mixer=new GA(this.gltf.scene),this.mixer.clipAction(this.gltf.animations[0]).play()}},{key:"stopAnimation",value:function(){this.isAnimationEnabled=!1}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(_u),lt(Bs))},n.\u0275cmp=Mr({type:n,selectors:[["field-model-details"]],decls:2,vars:1,consts:[[2,"background-color","#e0e0e0","padding","4px","margin-bottom","16px"],["style","background-color:white; padding:4px;",4,"ngIf"],[2,"background-color","white","padding","4px"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","font-size","12pt"],[1,"model-panel"],["id","scene-container",1,"scene-container"],[1,"animations-panel"],[1,"animation-category"],["class","animation-box",3,"click",4,"ngFor","ngForOf"],[1,"fields-panel"],["class","field-box",4,"ngFor","ngForOf"],[1,"animation-box",3,"click"],[1,"field-box"]],template:function(t,r){1&t&&(s(0,"div",0),it(1,XJ,35,8,"div",1),l()),2&t&&(ae(1),d("ngIf",r.metadata))},directives:[$a,rl],styles:[".model-panel[_ngcontent-%COMP%]{width:360px;height:400px;background-color:#f0f0f0;margin:4px 4px 0 0;text-align:center;padding:4px}.animations-panel[_ngcontent-%COMP%], .fields-panel[_ngcontent-%COMP%]{width:360px;height:400px;background-color:#f0f0f0;margin:4px 4px 0 0;overflow-y:auto;padding:4px}.animation-category[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#f8f8f8}.animation-box[_ngcontent-%COMP%], .field-box[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#fff}"]}),n}();function ZJ(n,a){if(1&n){var t=L();s(0,"div",10),oe("click",function(){var p=Pr(t).$implicit;return Re(2).onSelectAnimation(p)}),le(1),l()}if(2&n){var r=a.$implicit,o=Re(2);ae(1),mo(" ",r," ",o.bodyAnimationIdToFriendlyNameMap[r]," ")}}function QJ(n,a){if(1&n&&(s(0,"div",3),s(1,"h2"),le(2),l(),s(3,"h3"),le(4),l(),s(5,"div",4),s(6,"div",5),s(7,"h4"),le(8,"Model"),l(),c(9,"div",6),l(),s(10,"div",7),s(11,"h4"),le(12,"Animations"),l(),s(13,"div",8),s(14,"h5"),le(15,"Body Animations"),l(),it(16,ZJ,2,2,"div",9),l(),l(),l(),l()),2&n){var t=Re();ae(2),Nt("HRC ID: ",t.selectedHrcId,""),ae(2),Nt("Name: ",t.friendlyName,""),ae(12),d("ngForOf",t.bodyAnimationIds)}}function eZ(n,a){if(1&n&&(s(0,"div",21),s(1,"div",22),le(2),l(),s(3,"div",23),le(4),l(),l()),2&n){var t=a.$implicit;ae(2),Hn(t.raw),ae(2),Hn(t.js)}}function tZ(n,a){if(1&n){var t=L();s(0,"div",11),s(1,"div",15),le(2),s(3,"span",16),le(4),l(),s(5,"span",17),oe("click",function(){Pr(t);var p=Re().$implicit;return Re(2).startScriptPreviewAndScroll(p.play)}),c(6,"i",18),l(),l(),s(7,"div",19),it(8,eZ,5,2,"div",20),l(),l()}if(2&n){var r=Re(),o=r.index,u=r.$implicit;ae(2),Nt(" #",o," "),ae(2),Hn(u.name),ae(4),d("ngForOf",u.script)}}function nZ(n,a){if(1&n&&(s(0,"div"),it(1,tZ,9,3,"div",14),l()),2&n){var t=a.$implicit;ae(1),d("ngIf",t.script.length>0)}}function rZ(n,a){if(1&n&&(s(0,"div",11),s(1,"div",12),s(2,"h4"),le(3,"Action Scripts"),l(),s(4,"div",4),it(5,nZ,2,1,"div",13),l(),l(),l()),2&n){var t=Re();ae(5),d("ngForOf",t.scripts)}}var iZ=function(){var n=function(){function a(t,r){k(this,a),this.route=t,this.http=r,this.environment=Wn,this.BATTLE_LGP_BASE_URL=Wn.KUJATA_DATA_BASE_URL+"/data/battle/battle.lgp/",this.SCENE_WIDTH=600,this.SCENE_HEIGHT=600,this.bodyAnimationIdToIndexMap={},this.bodyAnimationIdToFriendlyNameMap={"body-0":"battle stance","body-1":"critical status","body-2":"victory","body-3":"move to front row","body-4":"move to back row","body-5":"block","body-6":"knocked out","body-7":"running away","body-8":"frozen/defend","body-9":"use item","body-10":"throw item","body-12":"magic: pre-cast","body-13":"magic: cast","body-14":"magic: post-cast","body-15":"take damage (quick)","body-16":"take damage (sustained)","body-17":"return to battle stance","body-18":"knocked off feet","body-19":"dodge/twirl"},this.bodyAnimationNames=[],this.bodyAnimationIds=[],this.selectedAnimId=0,this.previewAnimations=[],this.Object=Object,this.isAnimationEnabled=!1,this.isDestroyed=!1}return j(a,[{key:"enemyCodeToEnemyId",value:function(r){return 26*(r.charCodeAt(0)-97)+(r.charCodeAt(1)-97)}},{key:"getEnemyDataFromSceneBin",value:function(r,o){var p,u=this.enemyCodeToEnemyId(r),f=Ot(o);try{for(f.s();!(p=f.n()).done;)for(var v=p.value,g=0,y=[1,2,3];g<y.length;g++){var _=y[g];if(v["enemyId".concat(_)]===u)return{scene:v,enemy:v["enemyData".concat(_)]}}}catch(S){f.e(S)}finally{f.f()}return null}},{key:"ngOnInit",value:function(){var r=this;this.route.paramMap.subscribe(function(o){r.http.get(Wn.KUJATA_DATA_BASE_URL+"/metadata/skeleton-names-battle.json").subscribe(function(u){r.http.get(Wn.KUJATA_DATA_BASE_URL+"/data/battle/scene.bin/scene.bin.json").subscribe(function(f){r.http.get(Wn.KUJATA_DATA_BASE_URL+"/data/battle/action-sequences.json").subscribe(function(p){r.http.get(Wn.KUJATA_DATA_BASE_URL+"/metadata/action-sequence-metadata-player.json").subscribe(function(v){r.selectedHrcId=o.get("hrcId"),r.friendlyName=u[r.selectedHrcId],console.log("friendlyName",r.friendlyName);var g=r.getEnemyDataFromSceneBin(r.selectedHrcId,f);r.actionSequence=p[r.selectedHrcId.slice(0,-1)+"b"],console.log("actionSequence",r.actionSequence),r.scripts=r.actionSequence.scripts.map(function(y,_){var C={id:_,script:y,name:"???",play:y.map(function(M){return parseInt(M.raw.substring(0,2),16)}).filter(function(M){return M<=141})};if("player"===r.actionSequence.type){var x,S=Ot(v);try{for(S.s();!(x=S.n()).done;){var E=x.value.actionSequences.find(function(M){return M.id===C.id});if(E){C.name=E.name;break}}}catch(M){S.e(M)}finally{S.f()}}else{0===C.id&&(C.name="Idle"),1===C.id&&(C.name="Hurt"),2===C.id&&(C.name="Hurt Critical");var D=g.enemy.actionSequenceIndex.findIndex(function(M){return M===C.id});D>=0&&(C.name=g.scene.attackData[D].name)}return C}),console.log("actionSequence",r.actionSequence),r.initialize()})})})})})}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0,this.isAnimationEnabled=!1}},{key:"initialize",value:function(){var r=this;if(this.selectedHrcId){this.isAnimationEnabled=!1,this.clock=new fv,this.renderer=new Lc({alpha:!0,antialias:!0}),this.renderer.setSize(this.SCENE_WIDTH,this.SCENE_HEIGHT),this.renderer.outputEncoding=Jn,this.modelGLTF=null,this.gltf=null,this.scene=null,this.camera=new ti(90,this.SCENE_WIDTH/this.SCENE_HEIGHT,.1,1e5),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=50,this.controls=null,this.http.get(this.BATTLE_LGP_BASE_URL+this.selectedHrcId+".hrc.gltf").subscribe(function(f){r.modelGLTF=f,r.bodyAnimationNames=[];for(var p=0;p<f.animations.length;p++){var g=f.animations[p].name;r.bodyAnimationIds.push(g),r.bodyAnimationIdToIndexMap[g]=p}r.selectedAnimId=r.bodyAnimationIds[0],r.initializeSceneWithCombinedGLTF(r,r.modelGLTF)},function(f){console.error("oops!",f)});var o=this;!function f(){if(o&&!o.isDestroyed){requestAnimationFrame(f);var p=o.clock.getDelta();o.controls&&o.controls.update(p),o.mixer&&o.isAnimationEnabled&&o.mixer.update(p),o.renderer&&o.scene&&o.camera&&o.renderer.render(o.scene,o.camera)}else console.log("stopping appTick()")}()}}},{key:"onSelectAnimation",value:function(r){console.log("onSelectAnimation",r),this.previewAnimationSequence=null,this.selectedAnimId=r,this.initializeSceneWithCombinedGLTF(this,this.modelGLTF)}},{key:"startScriptPreviewAndScroll",value:function(r){this.previewAnimationSequence=r,this.selectedAnimId=null,this.initializeSceneWithCombinedGLTF(this,this.modelGLTF),window.scrollTo({top:0,behavior:"smooth"})}},{key:"initializeSceneWithCombinedGLTF",value:function(r,o){var u=o.nodes[1].translation[1];0==u&&(u=15),0==r.camera.position.y&&(console.log("setting camera height to:"+2*u),r.camera.position.y=600+1.5*u,r.camera.position.z=Math.max(2.5*u,1e3)),(new pv).parse(JSON.stringify(o),r.BATTLE_LGP_BASE_URL,function(p){vv(p);var g,v=Ot(p.animations);try{for(v.s();!(g=v.n()).done;){var C,_=Ot(g.value.tracks);try{for(_.s();!(C=_.n()).done;)C.value.optimize()}catch(I){_.e(I)}finally{_.f()}}}catch(I){v.e(I)}finally{v.f()}console.log("parsed gltf:",p),r.gltf=p;var x=p.scene;p.scene.rotation.y=-20*Math.PI/180,r.scene=new yf,r.scene.background=new Yt(12312063),r.scene.add(r.camera);var b=function(B,z,P){var W=new Ef(12632256);W.position.set(B,z,P).normalize(),r.scene.add(W)};b(4,2,3),b(0,-2,-3);var E=new bf(4210752);r.scene.add(E);var D=new es({color:3390293,opacity:1,side:2}),A=new bA(50,32),M=new Fr(A,D);M.rotateX(-Math.PI/2),r.scene.add(M),r.scene.add(x),document.getElementById("scene-container").appendChild(r.renderer.domElement),r.controls=new jA(r.camera,r.renderer.domElement),r.controls.target=new J(0,u,0),r.controls.update(),r.startAnimation(),r.renderer.render(r.scene,r.camera)},void 0,function(p){console.error("oops!",p)})}},{key:"startAnimation",value:function(){var r=this;if(this.previewAnimationSequence){this.isAnimationEnabled=!0,this.mixer=new GA(this.gltf.scene);var o=this.previewAnimationSequence.map(function(v){var g=r.bodyAnimationIdToIndexMap["body-".concat(v)],y=r.mixer.clipAction(r.gltf.animations[g]);return console.log("animation mapping",v,"->","body-".concat(v),g),y.setLoop(2200),y.clampWhenFinished=!0,y}),u=0,f=function(){console.log("play",u,o[u]),o[u].reset().play()};this.mixer.addEventListener("finished",function(){r.gltf.scene.position.x=r.gltf.scene.children[0].position.x,r.gltf.scene.position.z=r.gltf.scene.children[0].position.z,r.mixer.stopAllAction(),o[u].reset(),++u>=o.length&&(u=0),f()}),this.controls.target.y=this.controls.target.y+this.gltf.animations[0].tracks[0].values[1],f()}else if(this.selectedAnimId){this.isAnimationEnabled=!0,this.mixer=new GA(this.gltf.scene);var p=this.bodyAnimationIdToIndexMap[this.selectedAnimId];this.controls.target.y=this.controls.target.y+this.gltf.animations[p].tracks[0].values[1],this.action=this.mixer.clipAction(this.gltf.animations[p]),this.action.play()}}},{key:"stopAnimation",value:function(){this.isAnimationEnabled=!1}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(_u),lt(Bs))},n.\u0275cmp=Mr({type:n,selectors:[["battle-model-details"]],decls:3,vars:2,consts:[[2,"background-color","#e0e0e0","padding","4px","margin-bottom","16px"],["style","background-color:white; padding:4px;",4,"ngIf"],["class","grey-panel",4,"ngIf"],[2,"background-color","white","padding","4px"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","font-size","12pt"],[1,"model-panel"],["id","scene-container",1,"scene-container"],[1,"animations-panel"],[1,"animation-category"],["class","animation-box",3,"click",4,"ngFor","ngForOf"],[1,"animation-box",3,"click"],[1,"grey-panel"],[1,"white-panel"],[4,"ngFor","ngForOf"],["class","grey-panel","style","width-600px; ",4,"ngIf"],[2,"font-size","14pt","color","#404040"],[2,"font-size","12pt","color","#808080"],[2,"margin-left","20px","cursor","pointer",3,"click"],[1,"fa","fa-play-circle"],[1,"white-panel","kujata-font-mono",2,"font-size","8pt"],["class","",4,"ngFor","ngForOf"],[1,""],[2,"display","inline-block","width","150px"],[2,"display","inline-block"]],template:function(t,r){1&t&&(s(0,"div",0),it(1,QJ,17,3,"div",1),l(),it(2,rZ,6,1,"div",2)),2&t&&(ae(1),d("ngIf",r.selectedHrcId),ae(1),d("ngIf",r.scripts&&r.scripts.length>0))},directives:[$a,rl],styles:[".model-panel[_ngcontent-%COMP%]{width:620px;height:660px;background-color:#f0f0f0;margin:4px 4px 0 0;text-align:center;padding:4px}.animations-panel[_ngcontent-%COMP%]{width:360px;height:660px;background-color:#f0f0f0;margin:4px 4px 0 0;overflow-y:auto;padding:4px}.fields-panel[_ngcontent-%COMP%]{width:360px;height:400px;background-color:#f0f0f0;margin:4px 4px 0 0;overflow-y:auto;padding:4px}.animation-category[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#f8f8f8}.white-panel[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#fff}.grey-panel[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#f0f0f0}"]}),n}();function oZ(n,a){1&n&&(s(0,"div"),s(1,"p"),le(2,"Fetching..."),l(),l())}function aZ(n,a){1&n&&(s(0,"div"),s(1,"p"),le(2,"Sorry, this app had a problem getting that info."),l(),l())}function sZ(n,a){if(1&n){var t=L();s(0,"div"),s(1,"p"),s(2,"a",3),oe("click",function(){return Pr(t),Re().exportToCsv()}),le(3,"Export To CSV"),l(),l(),c(4,"ag-grid-angular",4),N0(5,"async"),l()}if(2&n){var r=Re();ae(4),d("gridOptions",r.gridOptions)("rowData",k0(5,3,r.rowData))("columnDefs",r.columnDefs)}}var uZ=function(){var n=function(){function a(t,r){k(this,a),this.router=t,this.http=r,this.soundMetadata=[],this.fetchStatus="NONE",this.Object=Object,this.columnDefs=[],this.rowData=sn([]),this.friendlyColumnNames={fieldName:"Field",entityName:"Entity",scriptType:"Script",lineNo:"Line",opType:"Op",direction:"Direction",soundId:"Sound ID",playSound:"Play Sound"},this.columnWidths={direction:100,soundId:150,playSound:150}}return j(a,[{key:"ngOnInit",value:function(){this.gridOptions={rowData:this.rowData,columnDefs:this.columnDefs,rowSelection:"single",onRowClicked:function(o){console.log("a row was clicked")},onColumnResized:function(o){console.log("a column was resized")},onGridReady:function(o){console.log("the grid is now ready")},suppressNoRowsOverlay:!0},this.init()}},{key:"addColumnDef",value:function(r,o){var u=this,f={headerName:this.friendlyColumnNames[r]||r,field:r,width:o,sortable:!0,filter:!0,resizable:!0,onCellClicked:void 0,cellStyle:void 0,sort:void 0,cellRenderer:void 0};"soundId"===r&&(f.sort="asc"),"fieldName"===r&&(f.cellRenderer=function(p){return'<a href="/scene-details/'.concat(p.value,'">').concat(p.value,"</a>")}),"playSound"===r&&(f.onCellClicked=function(p){u.playSound(p.data.soundId)},f.cellStyle={color:"#007bff",textDecoration:"underline",cursor:"pointer"},f.cellRenderer=function(p){return'<i class="fa fa-play-circle"></i> Play sound: '.concat(p.value)}),this.columnDefs.push(f)}},{key:"playSound",value:function(r){var o="".concat(Wn.KUJATA_DATA_BASE_URL,"/media/sounds/").concat(r,".ogg");console.log("Play sound - ".concat(r," - ").concat(o)),0!==r?(this.playingSound&&(this.playingSound.pause(),this.playingSound.currentTime=0),this.playingSound=new Audio(o),this.playingSound.play()):window.alert("Play sound 0 in game actually stops current sounds playing")}},{key:"init",value:function(){var r=this;this.fetchStatus="FETCHING",this.gridOptions.api&&this.gridOptions.api.showLoadingOverlay(),this.http.get(Wn.KUJATA_DATA_BASE_URL+"/metadata/sound-list.json").subscribe(function(u){if(r.soundMetadata=u,r.soundMetadata.map(function(g){delete g.entityId,delete g.scriptIndex,g.playSound=g.soundId}),console.log("soundMetadata",u),r.rowData=sn(r.soundMetadata),r.fetchStatus="SUCCESS",r.soundMetadata.length>0)for(var f=0,p=Object.keys(r.friendlyColumnNames);f<p.length;f++){var v=p[f];r.addColumnDef(v,r.columnWidths[v]||75)}},function(u){r.fetchStatus="ERROR"})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(Lo),lt(Bs))},n.\u0275cmp=Mr({type:n,selectors:[["sound-details"]],decls:9,vars:3,consts:[[2,"background-color","#e0e0e0","padding","16px","margin-bottom","16px"],[2,"background-color","white","padding","16px"],[4,"ngIf"],[3,"routerLink","click"],[1,"ag-theme-balham",2,"width","100%","height","500px",3,"gridOptions","rowData","columnDefs"]],template:function(t,r){1&t&&(s(0,"div",0),s(1,"div",1),s(2,"h2"),le(3,"Sound Details"),l(),s(4,"h3"),le(5,"Usages"),l(),it(6,oZ,3,0,"div",2),it(7,aZ,3,0,"div",2),it(8,sZ,6,5,"div",2),l(),l()),2&t&&(ae(6),d("ngIf","FETCHING"==r.fetchStatus),ae(1),d("ngIf","ERROR"==r.fetchStatus),ae(1),d("ngIf","SUCCESS"==r.fetchStatus))},directives:[$a,Vs,pL],pipes:[OT],styles:[""]}),n}(),Sv=new uF(0,0,0,"YXZ"),Ev=new J,lZ={type:"change"},cZ={type:"lock"},dZ={type:"unlock"},zk=Math.PI/2,fZ=function(n){ve(t,n);var a=me(t);function t(r,o){var u;k(this,t),(u=a.call(this)).domElement=o,u.isLocked=!1,u.minPolarAngle=0,u.maxPolarAngle=Math.PI,u.pointerSpeed=1;var y,f=Kn(u);function p(y){if(!1!==f.isLocked){var _=y.movementX||y.mozMovementX||y.webkitMovementX||0,C=y.movementY||y.mozMovementY||y.webkitMovementY||0;Sv.setFromQuaternion(r.quaternion),Sv.y-=.002*_*f.pointerSpeed,Sv.x-=.002*C*f.pointerSpeed,Sv.x=Math.max(zk-f.maxPolarAngle,Math.min(zk-f.minPolarAngle,Sv.x)),r.quaternion.setFromEuler(Sv),f.dispatchEvent(lZ)}}function v(){f.domElement.ownerDocument.pointerLockElement===f.domElement?(f.dispatchEvent(cZ),f.isLocked=!0):(f.dispatchEvent(dZ),f.isLocked=!1)}function g(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}return u.connect=function(){f.domElement.ownerDocument.addEventListener("mousemove",p),f.domElement.ownerDocument.addEventListener("pointerlockchange",v),f.domElement.ownerDocument.addEventListener("pointerlockerror",g)},u.disconnect=function(){f.domElement.ownerDocument.removeEventListener("mousemove",p),f.domElement.ownerDocument.removeEventListener("pointerlockchange",v),f.domElement.ownerDocument.removeEventListener("pointerlockerror",g)},u.dispose=function(){this.disconnect()},u.getObject=function(){return r},u.getDirection=(y=new J(0,0,-1),function(_){return _.copy(y).applyQuaternion(r.quaternion)}),u.moveForward=function(y){Ev.setFromMatrixColumn(r.matrix,0),Ev.crossVectors(r.up,Ev),r.position.addScaledVector(Ev,y)},u.moveRight=function(y){Ev.setFromMatrixColumn(r.matrix,0),r.position.addScaledVector(Ev,y)},u.lock=function(){this.domElement.requestPointerLock()},u.unlock=function(){f.domElement.ownerDocument.exitPointerLock()},u.connect(),u}return t}(sl);function pZ(n,a){if(1&n&&(s(0,"div",13),s(1,"p"),le(2),l(),s(3,"div",14),c(4,"div",15),l(),l()),2&n){var t=Re(2);ae(2),mo("Loading blocks: ",t.loadingProgress.loaded," / ",t.loadingProgress.total,""),ae(2),dh("width",t.loadingProgress.loaded/t.loadingProgress.total*100,"%")}}function hZ(n,a){if(1&n&&(s(0,"div",11),s(1,"p"),le(2,"Loading world map metadata and blocks..."),l(),it(3,pZ,5,4,"div",12),l()),2&n){var t=Re();ae(3),d("ngIf",t.loadingProgress.total>0)}}function vZ(n,a){1&n&&(s(0,"div",16),s(1,"p"),le(2,"Sorry, this app had a problem loading the world map."),l(),l())}function gZ(n,a){if(1&n){var t=L();s(0,"div",24),s(1,"div",25),le(2,"UV Debug Panel - Editing Triangle"),l(),s(3,"div",26),s(4,"div"),s(5,"strong"),le(6,"Block:"),l(),le(7),l(),s(8,"div"),s(9,"strong"),le(10,"Mesh:"),l(),le(11),l(),s(12,"div"),s(13,"strong"),le(14,"Triangle:"),l(),le(15),l(),s(16,"div",27),le(17,"Press 'U' to transfer hovered triangle here"),l(),l(),s(18,"div",28),s(19,"div",29),le(20,"UV Visualizer (0-1 range)"),l(),c(21,"canvas",30),s(22,"div",31),s(23,"div",32),c(24,"span",33),le(25,"UV1 (Red)"),l(),s(26,"div",32),c(27,"span",34),le(28,"UV2 (Green)"),l(),s(29,"div",32),c(30,"span",35),le(31,"UV3 (Blue)"),l(),l(),s(32,"div",36),le(33,"Drag points to change UV coordinates"),l(),l(),s(34,"div",37),s(35,"div",38),le(36),l(),s(37,"div",39),s(38,"label"),le(39),l(),s(40,"input",40),oe("input",function(u){return Pr(t),Re(2).updateUV("uv1","u",+u.target.value)}),l(),l(),s(41,"div",39),s(42,"label"),le(43),l(),s(44,"input",40),oe("input",function(u){return Pr(t),Re(2).updateUV("uv1","v",+u.target.value)}),l(),l(),l(),s(45,"div",37),s(46,"div",38),le(47),l(),s(48,"div",39),s(49,"label"),le(50),l(),s(51,"input",40),oe("input",function(u){return Pr(t),Re(2).updateUV("uv2","u",+u.target.value)}),l(),l(),s(52,"div",39),s(53,"label"),le(54),l(),s(55,"input",40),oe("input",function(u){return Pr(t),Re(2).updateUV("uv2","v",+u.target.value)}),l(),l(),l(),s(56,"div",37),s(57,"div",38),le(58),l(),s(59,"div",39),s(60,"label"),le(61),l(),s(62,"input",40),oe("input",function(u){return Pr(t),Re(2).updateUV("uv3","u",+u.target.value)}),l(),l(),s(63,"div",39),s(64,"label"),le(65),l(),s(66,"input",40),oe("input",function(u){return Pr(t),Re(2).updateUV("uv3","v",+u.target.value)}),l(),l(),l(),s(67,"div",41),s(68,"button",20),oe("click",function(){return Pr(t),Re(2).resetUVs()}),le(69,"Reset UVs"),l(),l(),l()}if(2&n){var r=Re(2);ae(7),Nt(" ",r.uvDebugData.blockId,""),ae(4),Nt(" ",r.uvDebugData.meshName,""),ae(4),Nt(" ",r.uvDebugData.triangleIndex,""),ae(21),Nt("Vertex 1 (",r.uvDebugData.vertexIndices[0],")"),ae(3),Nt("U: ",r.uvDebugData.uvCoords.uv1.u.toFixed(4),""),ae(1),d("value",r.uvDebugData.uvCoords.uv1.u),ae(3),Nt("V: ",r.uvDebugData.uvCoords.uv1.v.toFixed(4),""),ae(1),d("value",r.uvDebugData.uvCoords.uv1.v),ae(3),Nt("Vertex 2 (",r.uvDebugData.vertexIndices[1],")"),ae(3),Nt("U: ",r.uvDebugData.uvCoords.uv2.u.toFixed(4),""),ae(1),d("value",r.uvDebugData.uvCoords.uv2.u),ae(3),Nt("V: ",r.uvDebugData.uvCoords.uv2.v.toFixed(4),""),ae(1),d("value",r.uvDebugData.uvCoords.uv2.v),ae(3),Nt("Vertex 3 (",r.uvDebugData.vertexIndices[2],")"),ae(3),Nt("U: ",r.uvDebugData.uvCoords.uv3.u.toFixed(4),""),ae(1),d("value",r.uvDebugData.uvCoords.uv3.u),ae(3),Nt("V: ",r.uvDebugData.uvCoords.uv3.v.toFixed(4),""),ae(1),d("value",r.uvDebugData.uvCoords.uv3.v)}}function mZ(n,a){if(1&n){var t=L();s(0,"div",17),s(1,"p"),le(2,"Complete FF7 World Map loaded! Use WASD to move, Space/Shift for up/down, mouse to look around."),l(),s(3,"p"),le(4,"Click on the scene to enable pointer lock controls. Hover over triangles for details."),l(),s(5,"p"),s(6,"strong"),le(7,"Press 'U'"),l(),le(8," to transfer selected triangle to UV debugger (or default triangle if none selected)."),l(),s(9,"div",18),s(10,"button",19),oe("click",function(){return Pr(t),Re().toggleWireframes()}),le(11),l(),s(12,"button",20),oe("click",function(){return Pr(t),Re().resetCameraPosition()}),le(13," Reset Camera "),l(),s(14,"button",21),oe("click",function(){return Pr(t),Re().toggleUVDebugPanel()}),le(15),l(),s(16,"span",22),le(17),l(),l(),it(18,gZ,70,18,"div",23),l()}if(2&n){var r=Re();ae(11),Nt(" ",r.showWireframes?"Hide":"Show"," Wireframes "),ae(4),Nt(" ",r.showUVDebugPanel?"Hide":"Show"," UV Debug "),ae(2),Nt("Debug: ",r.wireframeBlocks.size," blocks with wireframes"),ae(1),d("ngIf",r.showUVDebugPanel&&r.uvDebugData)}}function yZ(n,a){1&n&&(s(0,"div",42),s(1,"p"),le(2,"Hover over triangles to see details"),l(),s(3,"p"),s(4,"small"),le(5,"(Unlock pointer first if using FPS controls)"),l(),l(),l())}function _Z(n,a){if(1&n&&(s(0,"div",43),s(1,"div",44),le(2,"UV Coordinates:"),l(),s(3,"div",45),le(4),c(5,"br"),le(6),l(),l()),2&n){var t=Re(2);ae(4),Nt(" U: ",t.triangleInfo.uv.u,""),ae(2),Nt(" V: ",t.triangleInfo.uv.v," ")}}function CZ(n,a){if(1&n&&(s(0,"div"),le(1),l()),2&n){var t=Re(2);ae(1),Nt("Color: ",t.triangleInfo.material.color,"")}}function wZ(n,a){if(1&n&&(s(0,"div"),s(1,"strong"),le(2,"Texture:"),l(),c(3,"br"),le(4),c(5,"br"),le(6),c(7,"br"),le(8),l()),2&n){var t=Re(2);ae(4),Nt(" Name: ",t.triangleInfo.material.texture.name,""),ae(2),Nt(" Size: ",t.triangleInfo.material.texture.size,""),ae(2),mo(" Wrap: ",t.triangleInfo.material.texture.wrapS,", ",t.triangleInfo.material.texture.wrapT," ")}}function SZ(n,a){if(1&n&&(s(0,"div",43),s(1,"div",44),le(2,"Triangle Vertices:"),l(),s(3,"div",47),s(4,"div"),le(5),l(),s(6,"div"),le(7),l(),s(8,"div"),le(9),l(),l(),l()),2&n){var t=Re(2);ae(5),zd("V1: [",t.triangleInfo.triangleVertices.v1[0].toFixed(2),", ",t.triangleInfo.triangleVertices.v1[1].toFixed(2),", ",t.triangleInfo.triangleVertices.v1[2].toFixed(2),"]"),ae(2),zd("V2: [",t.triangleInfo.triangleVertices.v2[0].toFixed(2),", ",t.triangleInfo.triangleVertices.v2[1].toFixed(2),", ",t.triangleInfo.triangleVertices.v2[2].toFixed(2),"]"),ae(2),zd("V3: [",t.triangleInfo.triangleVertices.v3[0].toFixed(2),", ",t.triangleInfo.triangleVertices.v3[1].toFixed(2),", ",t.triangleInfo.triangleVertices.v3[2].toFixed(2),"]")}}function EZ(n,a){if(1&n&&(s(0,"div",43),s(1,"div",44),le(2,"Triangle UVs:"),l(),s(3,"div",47),s(4,"div"),le(5),l(),s(6,"div"),le(7),l(),s(8,"div"),le(9),l(),l(),l()),2&n){var t=Re(2);ae(5),mo("UV1: [",t.triangleInfo.triangleUVs.uv1[0].toFixed(4),", ",t.triangleInfo.triangleUVs.uv1[1].toFixed(4),"]"),ae(2),mo("UV2: [",t.triangleInfo.triangleUVs.uv2[0].toFixed(4),", ",t.triangleInfo.triangleUVs.uv2[1].toFixed(4),"]"),ae(2),mo("UV3: [",t.triangleInfo.triangleUVs.uv3[0].toFixed(4),", ",t.triangleInfo.triangleUVs.uv3[1].toFixed(4),"]")}}function bZ(n,a){if(1&n&&(s(0,"div"),s(1,"div",43),s(2,"div",44),le(3,"Block & Mesh:"),l(),s(4,"div",45),le(5),l(),l(),s(6,"div",43),s(7,"div",44),le(8,"Face Index:"),l(),s(9,"div",45),le(10),l(),l(),s(11,"div",43),s(12,"div",44),le(13,"Distance:"),l(),s(14,"div",45),le(15),l(),l(),s(16,"div",43),s(17,"div",44),le(18,"World Position:"),l(),s(19,"div",45),le(20),c(21,"br"),le(22),c(23,"br"),le(24),l(),l(),it(25,_Z,7,2,"div",46),s(26,"div",43),s(27,"div",44),le(28,"Material:"),l(),s(29,"div",45),s(30,"div"),le(31),l(),s(32,"div"),le(33),l(),it(34,CZ,2,1,"div",10),it(35,wZ,9,4,"div",10),l(),l(),s(36,"div",43),s(37,"div",44),le(38,"Geometry:"),l(),s(39,"div",45),s(40,"div"),le(41),l(),s(42,"div"),le(43),l(),s(44,"div"),le(45),l(),s(46,"div"),le(47),l(),s(48,"div"),le(49),l(),l(),l(),it(50,SZ,10,9,"div",46),it(51,EZ,10,6,"div",46),l()),2&n){var t=Re();ae(5),mo("Block ",t.triangleInfo.blockId," - ",t.triangleInfo.meshName,""),ae(5),Hn(t.triangleInfo.faceIndex),ae(5),Nt("",t.triangleInfo.distance," units"),ae(5),Nt(" X: ",t.triangleInfo.worldPosition.x,""),ae(2),Nt(" Y: ",t.triangleInfo.worldPosition.y,""),ae(2),Nt(" Z: ",t.triangleInfo.worldPosition.z," "),ae(1),d("ngIf",t.triangleInfo.uv),ae(6),Nt("Type: ",t.triangleInfo.material.type,""),ae(2),Nt("Name: ",t.triangleInfo.material.name,""),ae(1),d("ngIf",t.triangleInfo.material.color),ae(1),d("ngIf",t.triangleInfo.material.texture),ae(6),Nt("Type: ",t.triangleInfo.geometry.type,""),ae(2),Nt("Vertices: ",t.triangleInfo.geometry.vertexCount,""),ae(2),Nt("Faces: ",t.triangleInfo.geometry.faceCount,""),ae(2),Nt("Has Normals: ",t.triangleInfo.geometry.hasNormals?"Yes":"No",""),ae(2),Nt("Has UVs: ",t.triangleInfo.geometry.hasUVs?"Yes":"No",""),ae(1),d("ngIf",t.triangleInfo.triangleVertices),ae(1),d("ngIf",t.triangleInfo.triangleUVs)}}var xZ=function(){var n=function(){function a(t,r){k(this,a),this.http=t,this.cdr=r,this.environment=Wn,this.SCENE_WIDTH=1200,this.SCENE_HEIGHT=800,this.fetchStatus="NONE",this.worldMapMetadata=null,this.loadedBlocks=new Map,this.wireframeBlocks=new Map,this.showWireframes=!1,this.loadingProgress={loaded:0,total:0},this.triangleInfo=null,this.raycaster=new Dq,this.mouse=new Ye,this.isPointerLocked=!1,this.showUVDebugPanel=!1,this.uvDebugData=null,this.debugTriangleMesh=null,this.debugTriangleIndex=0,this.originalMaterial=null,this.availableTextures=[],this.currentTexture="",this.uvVisualizerCanvas=null,this.uvVisualizerContext=null,this.isDraggingUVPoint=!1,this.draggedVertex=null,this.uvVisualizerSize=200,this.isDestroyed=!1,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.moveUp=!1,this.moveDown=!1,this.velocity=new J,this.direction=new J,this.clock=new fv}return j(a,[{key:"ngOnInit",value:function(){this.containerId="world-".concat(this.worldType,"-container"),this.cameraStorageKey="ff7-world-camera-".concat(this.worldType)}},{key:"ngAfterViewInit",value:function(){var r=this;this.initThreeJS(),setTimeout(function(){r.loadWorldMapMetadata()},0)}},{key:"ngOnChanges",value:function(){this.scene&&(this.clearWorldData(),this.loadWorldMapMetadata())}},{key:"ngOnDestroy",value:function(){this.isDestroyed=!0,this.saveCameraPosition(),this.saveInterval&&clearInterval(this.saveInterval),this.renderer&&this.renderer.dispose()}},{key:"initThreeJS",value:function(){var r=this;this.scene=new yf,this.scene.background=new Yt(2236962),this.camera=new ti(75,this.SCENE_WIDTH/this.SCENE_HEIGHT,.1,1e5),this.camera.position.set(0,5,10),this.renderer=new Lc({alpha:!0,antialias:!0}),this.renderer.setSize(this.SCENE_WIDTH,this.SCENE_HEIGHT),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=2,this.controls=new fZ(this.camera,this.renderer.domElement),this.renderer.domElement.addEventListener("click",function(){r.controls.lock()}),this.controls.addEventListener("lock",function(){r.isPointerLocked=!0}),this.controls.addEventListener("unlock",function(){r.isPointerLocked=!1}),this.setupTriangleInspection(),this.setupKeyboardControls();var o=new bf(16777215,5);this.scene.add(o);var u=new Mq(5);this.scene.add(u);var f=new Oy(2,2,2),p=new uv({color:65280}),v=new Fr(f,p);v.position.set(0,1,0),v.castShadow=!0,v.receiveShadow=!0;var g=new oA(20,20),y=new uv({color:8421504}),_=new Fr(g,y);_.rotation.x=-Math.PI/2,_.position.y=-1,_.receiveShadow=!0;var C=document.getElementById(this.containerId);C&&C.appendChild(this.renderer.domElement),this.animate()}},{key:"clearWorldData",value:function(){var r=this;this.loadedBlocks.forEach(function(o){r.scene.remove(o)}),this.loadedBlocks.clear(),this.wireframeBlocks.forEach(function(o){r.scene.remove(o)}),this.wireframeBlocks.clear(),this.loadingProgress={loaded:0,total:0},this.triangleInfo=null,this.uvDebugData=null,this.debugTriangleMesh=null,this.originalMaterial=null,this.availableTextures=[],this.currentTexture="",this.showUVDebugPanel=!1,this.fetchStatus="NONE",console.log("Cleared previous world data for switching to ".concat(this.worldType))}},{key:"getWorldMapType",value:function(){switch(this.worldType){case"overground":default:return"wm0";case"underwater":return"wm2";case"glacier":return"wm3"}}},{key:"loadWorldMapMetadata",value:function(){var r=this;this.fetchStatus="FETCHING",this.cdr.detectChanges();var o=this.getWorldMapType(),u=Wn.KUJATA_DATA_BASE_URL+"/metadata/world/".concat(o,"-map.json");console.log("Loading metadata for ".concat(this.worldType," world (").concat(o,"):"),u),this.http.get(u).subscribe({next:function(p){r.worldMapMetadata=p,console.log("World map metadata loaded for ".concat(o,":"),p),r.loadAllWorldBlocks()},error:function(p){console.error("Error loading world map metadata for ".concat(o,":"),p),r.fetchStatus="ERROR",r.cdr.detectChanges()}})}},{key:"loadAllWorldBlocks",value:function(){var r=this;if(this.worldMapMetadata){var o=this.worldMapMetadata.blockCoordinates,u=Object.keys(o).filter(function(f){return o[f].isDefault}).map(function(f){return parseInt(f)});this.loadingProgress.total=u.length,this.loadingProgress.loaded=0,console.log("Loading ".concat(u.length," world blocks...")),u.forEach(function(f){r.loadWorldBlock(f)})}}},{key:"loadWorldBlock",value:function(r){var o=this,u=new pv,f=this.getWorldMapType(),p="/data/world/world_us.lgp/".concat(f,"-block_").concat(r,".gltf"),v=this.worldMapMetadata.blockCoordinates[r.toString()];u.load(Wn.KUJATA_DATA_BASE_URL+p,function(g){vv(g),g.scene.position.set(v.x,0,v.y),o.loadedBlocks.set(r,g.scene),o.scene.add(g.scene),o.createWireframeForBlock(r,g.scene),o.loadingProgress.loaded++,console.log("Loaded ".concat(f," block ").concat(r," - ").concat(o.loadingProgress.loaded,"/").concat(o.loadingProgress.total)),o.loadingProgress.loaded===o.loadingProgress.total&&(o.fetchStatus="SUCCESS",o.cdr.detectChanges(),o.positionCameraForWorldView(),o.initUVDebugPanel(),console.log("All ".concat(f," world blocks loaded successfully!")))},function(g){},function(g){console.error("Error loading ".concat(f," block ").concat(r,":"),g),o.loadingProgress.loaded++,o.loadingProgress.loaded===o.loadingProgress.total&&(o.fetchStatus="SUCCESS",o.cdr.detectChanges(),o.positionCameraForWorldView(),o.initUVDebugPanel())})}},{key:"positionCameraForWorldView",value:function(){if(!localStorage.getItem(this.cameraStorageKey)){var f=24576,p=32768;this.camera.position.set(f,8192,p),this.camera.lookAt(f,0,p),console.log("Camera positioned to view world: center(".concat(f,", 0, ").concat(p,"), size(").concat(49152," x ").concat(65536,")"))}this.initCameraPersistence()}},{key:"createWireframeForBlock",value:function(r,o){var u=new Ic;u.position.copy(o.position),u.scale.copy(o.scale),o.traverse(function(f){if(f instanceof Fr&&f.geometry){var p=new bN(f.geometry),v=new iv({color:16711680,transparent:!0,opacity:.5}),g=new hA(p,v);g.position.copy(f.position),g.rotation.copy(f.rotation),g.scale.copy(f.scale),u.add(g)}}),this.wireframeBlocks.set(r,u),u.visible=this.showWireframes,this.scene.add(u),console.log("Created wireframe for block ".concat(r," with ").concat(u.children.length," wireframe meshes"))}},{key:"toggleWireframes",value:function(){var r=this;this.showWireframes=!this.showWireframes,this.wireframeBlocks.forEach(function(o,u){o.visible=r.showWireframes}),console.log("Wireframes ".concat(this.showWireframes?"enabled":"disabled"," for ").concat(this.wireframeBlocks.size," blocks"))}},{key:"animate",value:function(){var r=this;if(!this.isDestroyed){requestAnimationFrame(function(){return r.animate()});var o=this.clock.getDelta();this.velocity.x-=10*this.velocity.x*o,this.velocity.z-=10*this.velocity.z*o,this.velocity.y-=10*this.velocity.y*o,this.direction.z=Number(this.moveForward)-Number(this.moveBackward),this.direction.x=Number(this.moveRight)-Number(this.moveLeft),this.direction.y=Number(this.moveUp)-Number(this.moveDown),this.direction.normalize(),(this.moveForward||this.moveBackward)&&(this.velocity.z-=5e5*this.direction.z*o),(this.moveLeft||this.moveRight)&&(this.velocity.x-=5e5*this.direction.x*o),(this.moveUp||this.moveDown)&&(this.velocity.y-=5e5*this.direction.y*o),this.controls.moveRight(-this.velocity.x*o),this.controls.moveForward(-this.velocity.z*o),this.camera.position.y+=-this.velocity.y*o,this.renderer&&this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)}}},{key:"focusCameraOnModel",value:function(r){var o=(new ll).setFromObject(r),u=o.getCenter(new J),f=o.getSize(new J),v=2*Math.max(f.x,f.y,f.z);this.camera.position.set(u.x+v,u.y+.5*v,u.z+v),this.camera.lookAt(u),this.controls&&this.controls.reset(),console.log("Camera focused on model at:",u,"distance:",v)}},{key:"setupKeyboardControls",value:function(){var r=this;document.addEventListener("keydown",function(p){switch(p.code){case"ArrowUp":case"KeyW":r.moveForward=!0;break;case"ArrowLeft":case"KeyA":r.moveLeft=!0;break;case"ArrowDown":case"KeyS":r.moveBackward=!0;break;case"ArrowRight":case"KeyD":r.moveRight=!0;break;case"Space":r.moveUp=!0;break;case"ShiftLeft":case"ShiftRight":r.moveDown=!0;break;case"KeyU":r.transferTriangleToUVDebugger()}}),document.addEventListener("keyup",function(p){switch(p.code){case"ArrowUp":case"KeyW":r.moveForward=!1;break;case"ArrowLeft":case"KeyA":r.moveLeft=!1;break;case"ArrowDown":case"KeyS":r.moveBackward=!1;break;case"ArrowRight":case"KeyD":r.moveRight=!1;break;case"Space":r.moveUp=!1;break;case"ShiftLeft":case"ShiftRight":r.moveDown=!1}})}},{key:"setupTriangleInspection",value:function(){var r=this;this.renderer.domElement.addEventListener("mousemove",function(o){r.isPointerLocked?r.triangleInfo=null:r.inspectTriangleAtMouse(o)}),this.renderer.domElement.addEventListener("mouseleave",function(){r.triangleInfo=null})}},{key:"inspectTriangleAtMouse",value:function(r){var o=this.renderer.domElement.getBoundingClientRect();this.mouse.x=(r.clientX-o.left)/o.width*2-1,this.mouse.y=-(r.clientY-o.top)/o.height*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var u=[];this.loadedBlocks.forEach(function(v){v.traverse(function(g){g instanceof Fr&&u.push(g)})});var f=this.raycaster.intersectObjects(u);f.length>0?this.analyzeTriangle(f[0]):this.triangleInfo=null}},{key:"analyzeTriangle",value:function(r){var o,u,f,p,v=r.object,g=v.geometry,y=v.material,_=r.faceIndex,C=r.point,S=r.uv,x=-1;this.loadedBlocks.forEach(function(X,ne){X.traverse(function(de){de===v&&(x=ne)})});var b=null,E=null,D=null;if(g.index&&void 0!==_){var A=g.index.array,M=g.attributes.position.array,O=null===(o=g.attributes.normal)||void 0===o?void 0:o.array,I=null===(u=g.attributes.uv)||void 0===u?void 0:u.array,B=A[3*_],z=A[3*_+1],P=A[3*_+2];b={v1:[M[3*B],M[3*B+1],M[3*B+2]],v2:[M[3*z],M[3*z+1],M[3*z+2]],v3:[M[3*P],M[3*P+1],M[3*P+2]]},O&&(E={n1:[O[3*B],O[3*B+1],O[3*B+2]],n2:[O[3*z],O[3*z+1],O[3*z+2]],n3:[O[3*P],O[3*P+1],O[3*P+2]]}),I&&(D={uv1:[I[2*B],I[2*B+1]],uv2:[I[2*z],I[2*z+1]],uv3:[I[2*P],I[2*P+1]]})}var W={type:y.constructor.name,name:y.name||"Unnamed"};(y instanceof uv||y instanceof es)&&(W.color="#".concat(y.color.getHexString()),y.map&&(W.texture={name:y.map.name||"Unnamed texture",size:"".concat((null===(f=y.map.image)||void 0===f?void 0:f.width)||"unknown","x").concat((null===(p=y.map.image)||void 0===p?void 0:p.height)||"unknown"),format:y.map.format,type:y.map.type,wrapS:y.map.wrapS,wrapT:y.map.wrapT,magFilter:y.map.magFilter,minFilter:y.map.minFilter})),this.triangleInfo={blockId:x,meshName:v.name||"Unnamed mesh",faceIndex:_,distance:r.distance.toFixed(2),worldPosition:{x:C.x.toFixed(2),y:C.y.toFixed(2),z:C.z.toFixed(2)},uv:S?{u:S.x.toFixed(4),v:S.y.toFixed(4)}:null,triangleVertices:b,triangleNormals:E,triangleUVs:D,material:W,geometry:{type:g.constructor.name,vertexCount:g.attributes.position.count,faceCount:g.index?g.index.count/3:g.attributes.position.count/3,hasNormals:!!g.attributes.normal,hasUVs:!!g.attributes.uv}}}},{key:"transferTriangleToUVDebugger",value:function(){var r,o=null,u=0;if(this.triangleInfo){console.log("Transferring inspected triangle to UV debugger");var p=this.triangleInfo.meshName,v=this.loadedBlocks.get(this.triangleInfo.blockId);v&&v.traverse(function(_){_ instanceof Fr&&_.name===p&&(o=_)}),u=this.triangleInfo.faceIndex||0}else{console.log("No triangle selected, using default (0,0,0)");var g=Math.min.apply(Math,An(Array.from(this.loadedBlocks.keys()))),y=this.loadedBlocks.get(g);y&&y.traverse(function(_){_ instanceof Fr&&!o&&(o=_)}),u=0}o&&o.geometry.attributes.uv?(this.debugTriangleMesh=o,this.debugTriangleIndex=u,this.originalMaterial=o.material,this.collectAvailableTextures(),this.updateUVDebugData(),this.showUVDebugPanel=!0,this.initUVVisualizer(),console.log("Triangle transferred to UV debugger: Block ".concat(null===(r=this.uvDebugData)||void 0===r?void 0:r.blockId,", Triangle ").concat(u))):console.warn("No valid mesh with UV coordinates found for UV debugger")}},{key:"initUVDebugPanel",value:function(){var r=Math.min.apply(Math,An(Array.from(this.loadedBlocks.keys()))),o=this.loadedBlocks.get(r);if(o){var u=null;o.traverse(function(f){f instanceof Fr&&!u&&(u=f)}),u&&u.geometry.attributes.uv?(this.debugTriangleMesh=u,this.debugTriangleIndex=0,this.originalMaterial=u.material,this.collectAvailableTextures(),this.updateUVDebugData(),console.log("UV Debug Panel initialized for block ".concat(r,", mesh: ").concat(u.name))):console.warn("No mesh with UV coordinates found for debug panel")}else console.warn("No blocks loaded for UV debug panel")}},{key:"updateUVDebugData",value:function(){if(this.debugTriangleMesh){var r=this.debugTriangleMesh.geometry,o=r.attributes.uv,u=r.index;if(o&&u){var f=u.array[3*this.debugTriangleIndex],p=u.array[3*this.debugTriangleIndex+1],v=u.array[3*this.debugTriangleIndex+2],g=o.array;this.uvDebugData={blockId:this.getBlockIdForMesh(this.debugTriangleMesh),meshName:this.debugTriangleMesh.name||"Unnamed",triangleIndex:this.debugTriangleIndex,vertexIndices:[f,p,v],uvCoords:{uv1:{u:g[2*f],v:g[2*f+1]},uv2:{u:g[2*p],v:g[2*p+1]},uv3:{u:g[2*v],v:g[2*v+1]}}}}}}},{key:"getBlockIdForMesh",value:function(r){var u,o=Ot(this.loadedBlocks.entries());try{for(o.s();!(u=o.n()).done;){var f=Ar(u.value,2),p=f[0],g=!1;if(f[1].traverse(function(y){y===r&&(g=!0)}),g)return p}}catch(y){o.e(y)}finally{o.f()}return-1}},{key:"toggleUVDebugPanel",value:function(){this.showUVDebugPanel=!this.showUVDebugPanel,this.showUVDebugPanel&&!this.uvDebugData&&this.initUVDebugPanel(),this.showUVDebugPanel&&this.initUVVisualizer()}},{key:"updateUV",value:function(r,o,u){if(this.debugTriangleMesh&&this.uvDebugData){var f=this.debugTriangleMesh.geometry,p=f.attributes.uv;if(p&&f.index){var y=this.uvDebugData.vertexIndices[{uv1:0,uv2:1,uv3:2}[r]];p.array[2*y+("u"===o?0:1)]=u,this.uvDebugData.uvCoords[r][o]=u,p.needsUpdate=!0,this.drawUVVisualizer(),console.log("Updated ".concat(r,".").concat(o," to ").concat(u," for vertex ").concat(y))}}}},{key:"resetUVs",value:function(){!this.debugTriangleMesh||!this.uvDebugData||(this.updateUV("uv1","u",0),this.updateUV("uv1","v",0),this.updateUV("uv2","u",1),this.updateUV("uv2","v",0),this.updateUV("uv3","u",.5),this.updateUV("uv3","v",1))}},{key:"collectAvailableTextures",value:function(){var r=new Set,o=new Map;if(this.loadedBlocks.forEach(function(f,p){f.traverse(function(v){if(v instanceof Fr){var g=v.material;if((g instanceof uv||g instanceof es)&&g.map&&g.map.name){var y=g.map.name||"texture_".concat(p,"_").concat(v.name);r.add(y),o.set(y,g.map)}}})}),this.availableTextures=Array.from(r).sort(),this.debugTriangleMesh&&this.originalMaterial){var u=this.originalMaterial;u.map&&u.map.name?this.currentTexture=u.map.name:this.availableTextures.length>0&&(this.currentTexture=this.availableTextures[0])}console.log("Found ".concat(this.availableTextures.length," available textures:"),this.availableTextures)}},{key:"changeTexture",value:function(r){if(this.debugTriangleMesh&&r){var o=null;if(this.loadedBlocks.forEach(function(p){p.traverse(function(v){if(v instanceof Fr){var g=v.material;g.map&&g.map.name===r&&(o=g.map)}})}),!o)return void console.warn("Texture ".concat(r," not found"));var f,u=this.debugTriangleMesh.material;f=u instanceof uv?new uv({map:o,color:u.color,transparent:u.transparent,opacity:u.opacity}):new es({map:o,color:u.color||16777215,transparent:u.transparent,opacity:u.opacity}),this.debugTriangleMesh.material=f,this.currentTexture=r,console.log("Changed texture to: ".concat(r))}}},{key:"resetTexture",value:function(){if(this.debugTriangleMesh&&this.originalMaterial){this.debugTriangleMesh.material=this.originalMaterial;var r=this.originalMaterial;r.map&&r.map.name&&(this.currentTexture=r.map.name),console.log("Reset to original texture")}}},{key:"initUVVisualizer",value:function(){var r=this;setTimeout(function(){r.uvVisualizerCanvas=document.getElementById("uv-visualizer-canvas"),r.uvVisualizerCanvas&&(r.uvVisualizerContext=r.uvVisualizerCanvas.getContext("2d"),r.uvVisualizerContext&&(r.uvVisualizerCanvas.width=r.uvVisualizerSize,r.uvVisualizerCanvas.height=r.uvVisualizerSize,r.setupUVVisualizerEvents(),r.drawUVVisualizer()))},100)}},{key:"setupUVVisualizerEvents",value:function(){var r=this;!this.uvVisualizerCanvas||(this.uvVisualizerCanvas.addEventListener("mousedown",function(o){var u=r.uvVisualizerCanvas.getBoundingClientRect(),y=r.findClosestUVVertex((o.clientX-u.left)/r.uvVisualizerSize,(o.clientY-u.top)/r.uvVisualizerSize);y&&(r.isDraggingUVPoint=!0,r.draggedVertex=y,r.uvVisualizerCanvas.style.cursor="grabbing")}),this.uvVisualizerCanvas.addEventListener("mousemove",function(o){if(r.isDraggingUVPoint&&r.draggedVertex){var _=r.uvVisualizerCanvas.getBoundingClientRect(),S=o.clientY-_.top,x=Math.max(0,Math.min(1,(o.clientX-_.left)/r.uvVisualizerSize)),b=Math.max(0,Math.min(1,S/r.uvVisualizerSize));r.updateUV(r.draggedVertex,"u",x),r.updateUV(r.draggedVertex,"v",b),r.drawUVVisualizer()}else{var u=r.uvVisualizerCanvas.getBoundingClientRect(),y=r.findClosestUVVertex((o.clientX-u.left)/r.uvVisualizerSize,(o.clientY-u.top)/r.uvVisualizerSize);r.uvVisualizerCanvas.style.cursor=y?"grab":"default"}}),this.uvVisualizerCanvas.addEventListener("mouseup",function(){r.isDraggingUVPoint=!1,r.draggedVertex=null,r.uvVisualizerCanvas.style.cursor="default"}),this.uvVisualizerCanvas.addEventListener("mouseleave",function(){r.isDraggingUVPoint=!1,r.draggedVertex=null,r.uvVisualizerCanvas.style.cursor="default"}))}},{key:"findClosestUVVertex",value:function(r,o){if(!this.uvDebugData)return null;for(var p=null,v=.2,g=0,y=[{name:"uv1",u:this.uvDebugData.uvCoords.uv1.u%1,v:this.uvDebugData.uvCoords.uv1.v%1},{name:"uv2",u:this.uvDebugData.uvCoords.uv2.u%1,v:this.uvDebugData.uvCoords.uv2.v%1},{name:"uv3",u:this.uvDebugData.uvCoords.uv3.u%1,v:this.uvDebugData.uvCoords.uv3.v%1}];g<y.length;g++){var _=y[g],C=Math.sqrt(Math.pow(r-_.u,2)+Math.pow(o-_.v,2));C<v&&(v=C,p=_.name)}return p}},{key:"drawUVVisualizer",value:function(){if(this.uvVisualizerContext&&this.uvDebugData){var r=this.uvVisualizerContext,o=this.uvVisualizerSize;r.clearRect(0,0,o,o),this.drawTextureBackground(r,o),this.drawUVTriangle(r,o),this.drawUVPoints(r,o)}}},{key:"drawTextureBackground",value:function(r,o){if(this.debugTriangleMesh){var u=this.debugTriangleMesh.material;if(u.map&&u.map.image)try{r.drawImage(u.map.image,0,0,o,o),r.fillStyle="rgba(255, 255, 255, 0.1)",r.fillRect(0,0,o,o)}catch(p){r.fillStyle="#f0f0f0",r.fillRect(0,0,o,o)}}}},{key:"drawUVGrid",value:function(r,o){r.strokeStyle="#ccc",r.lineWidth=1;for(var u=0;u<=10;u++){var f=u/10*o;r.beginPath(),r.moveTo(f,0),r.lineTo(f,o),r.stroke(),r.beginPath(),r.moveTo(0,f),r.lineTo(o,f),r.stroke()}r.strokeStyle="#999",r.lineWidth=2,r.strokeRect(0,0,o,o)}},{key:"drawUVTriangle",value:function(r,o){if(this.uvDebugData){var u=this.uvDebugData.uvCoords,f=u.uv1.u%1*o,p=u.uv1.v%1*o,v=u.uv2.u%1*o,g=u.uv2.v%1*o,y=u.uv3.u%1*o,_=u.uv3.v%1*o;r.strokeStyle="#ff0000",r.lineWidth=2,r.beginPath(),r.moveTo(f,p),r.lineTo(v,g),r.lineTo(y,_),r.closePath(),r.stroke(),r.fillStyle="rgba(255, 0, 0, 0.1)",r.fill()}}},{key:"drawUVPoints",value:function(r,o){if(this.uvDebugData){var u=this.uvDebugData.uvCoords;[{name:"UV1",u:u.uv1.u,v:u.uv1.v,color:"#ff0000"},{name:"UV2",u:u.uv2.u,v:u.uv2.v,color:"#00ff00"},{name:"UV3",u:u.uv3.u,v:u.uv3.v,color:"#0000ff"}].forEach(function(p){var v=p.u%1*o,g=p.v%1*o;r.fillStyle=p.color,r.beginPath(),r.arc(v,g,6,0,2*Math.PI),r.fill(),r.strokeStyle="#ffffff",r.lineWidth=2,r.stroke(),r.fillStyle="#000000",r.font="10px Arial",r.fillText("".concat(p.name," (").concat(p.u.toFixed(2),", ").concat(p.v.toFixed(2),")"),v+8,g-8)})}}},{key:"initCameraPersistence",value:function(){var r=this;this.loadCameraPosition(),this.saveInterval=setInterval(function(){r.saveCameraPosition()},2e3)}},{key:"saveCameraPosition",value:function(){if(this.camera){var r={position:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},rotation:{x:this.camera.rotation.x,y:this.camera.rotation.y,z:this.camera.rotation.z},quaternion:{x:this.camera.quaternion.x,y:this.camera.quaternion.y,z:this.camera.quaternion.z,w:this.camera.quaternion.w},timestamp:Date.now()};localStorage.setItem(this.cameraStorageKey,JSON.stringify(r))}}},{key:"loadCameraPosition",value:function(){var r=localStorage.getItem(this.cameraStorageKey);if(r&&this.camera)try{var o=JSON.parse(r);if(Date.now()-o.timestamp>6048e5)return void console.log("Saved camera position is too old, using default");this.camera.position.set(o.position.x,o.position.y,o.position.z),this.camera.rotation.set(o.rotation.x,o.rotation.y,o.rotation.z),this.camera.quaternion.set(o.quaternion.x,o.quaternion.y,o.quaternion.z,o.quaternion.w),console.log("Restored camera position for ".concat(this.worldType," world:"),o.position)}catch(f){console.error("Error loading saved camera position:",f)}}},{key:"resetCameraPosition",value:function(){localStorage.removeItem(this.cameraStorageKey),this.positionCameraForWorldView(),console.log("Camera position reset for ".concat(this.worldType," world"))}},{key:"exportCameraPosition",value:function(){return this.camera?JSON.stringify({position:this.camera.position,rotation:this.camera.rotation,quaternion:this.camera.quaternion},null,2):""}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(Bs),lt(j0))},n.\u0275cmp=Mr({type:n,selectors:[["world-details"]],inputs:{worldType:"worldType"},features:[ua],decls:14,vars:9,consts:[[1,"world-details-panel"],[1,"world-title"],["class","status-message",4,"ngIf"],["class","status-message error",4,"ngIf"],["class","world-info",4,"ngIf"],[1,"main-content"],[1,"scene-container",3,"id"],[1,"triangle-info-panel"],[1,"info-header"],["class","no-info-message",4,"ngIf"],[4,"ngIf"],[1,"status-message"],["class","loading-progress",4,"ngIf"],[1,"loading-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"status-message","error"],[1,"world-info"],[1,"debug-controls"],[1,"debug-button",3,"click"],[1,"debug-button","reset-button",3,"click"],[1,"debug-button","uv-button",3,"click"],[1,"debug-info"],["class","uv-debug-panel",4,"ngIf"],[1,"uv-debug-panel"],[1,"uv-debug-header"],[1,"uv-debug-info"],[1,"uv-debug-hint"],[1,"uv-visualizer-container"],[1,"uv-visualizer-label"],["id","uv-visualizer-canvas",1,"uv-visualizer-canvas"],[1,"uv-visualizer-legend"],[1,"uv-legend-item"],[1,"uv-legend-color","uv1-color"],[1,"uv-legend-color","uv2-color"],[1,"uv-legend-color","uv3-color"],[1,"uv-visualizer-hint"],[1,"uv-vertex-controls"],[1,"uv-vertex-label"],[1,"uv-slider-group"],["type","range","min","0","max","1","step","0.001",3,"value","input"],[1,"uv-debug-actions"],[1,"no-info-message"],[1,"info-section"],[1,"info-label"],[1,"info-value"],["class","info-section",4,"ngIf"],[1,"info-value","vertex-data"]],template:function(t,r){1&t&&(s(0,"div",0),s(1,"div",1),le(2),N0(3,"titlecase"),l(),it(4,hZ,4,1,"div",2),it(5,vZ,3,0,"div",3),it(6,mZ,19,4,"div",4),s(7,"div",5),c(8,"div",6),s(9,"div",7),s(10,"div",8),le(11,"Triangle Inspector"),l(),it(12,yZ,6,0,"div",9),it(13,bZ,52,19,"div",10),l(),l(),l()),2&t&&(ae(2),Nt("",k0(3,7,r.worldType)," World"),ae(2),d("ngIf","FETCHING"==r.fetchStatus),ae(1),d("ngIf","ERROR"==r.fetchStatus),ae(1),d("ngIf","SUCCESS"==r.fetchStatus),ae(2),d("id","world-"+r.worldType+"-container"),ae(4),d("ngIf",!r.triangleInfo),ae(1),d("ngIf",r.triangleInfo))},directives:[$a],pipes:[O1],styles:[".world-details-panel[_ngcontent-%COMP%]{width:100%;background-color:#f0f0f0;padding:16px;text-align:center}.world-title[_ngcontent-%COMP%]{font-size:16pt;color:#404040;margin-bottom:16px;font-weight:700}.main-content[_ngcontent-%COMP%]{display:flex;grid-gap:16px;gap:16px;align-items:flex-start;justify-content:center}.scene-container[_ngcontent-%COMP%]{display:inline-block;width:1200px;height:800px;background-color:#222;border:solid #c0c0c0 2px;flex-shrink:0}.triangle-info-panel[_ngcontent-%COMP%]{width:300px;background-color:#f8f8f8;border:solid #c0c0c0 2px;border-radius:4px;padding:12px;font-size:9pt;max-height:800px;overflow-y:auto;flex-shrink:0}.info-header[_ngcontent-%COMP%]{font-weight:700;font-size:11pt;color:#404040;margin-bottom:12px;text-align:center;border-bottom:solid #c0c0c0 1px;padding-bottom:4px}.info-section[_ngcontent-%COMP%]{margin-bottom:8px;padding:4px;background-color:#fff;border-radius:2px;border:solid #e0e0e0 1px}.info-label[_ngcontent-%COMP%]{font-weight:700;color:#666;font-size:8pt;margin-bottom:2px}.info-value[_ngcontent-%COMP%]{color:#333;font-family:monospace;font-size:8pt;line-height:1.3}.vertex-data[_ngcontent-%COMP%]{font-size:7pt;line-height:1.2}.vertex-data[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:1px 0}.no-info-message[_ngcontent-%COMP%]{text-align:center;color:#888;font-style:italic;padding:20px;background-color:#f0f0f0;border-radius:4px;margin:10px 0}.no-info-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.no-info-message[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:7pt;color:#aaa}.status-message[_ngcontent-%COMP%]{padding:20px;font-size:12pt;color:#666}.status-message.error[_ngcontent-%COMP%]{color:#c00}.world-info[_ngcontent-%COMP%]{padding:12px;font-size:10pt;color:#404040;background-color:#e0e0e0;margin-bottom:16px;border-radius:4px}.debug-controls[_ngcontent-%COMP%]{margin-top:8px;padding-top:8px;border-top:solid #c0c0c0 1px}.debug-button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none;padding:6px 12px;margin-right:8px;cursor:pointer;border-radius:4px;font-size:9pt;transition:background-color .3s}.debug-button[_ngcontent-%COMP%]:hover{background-color:#45a049}.debug-button.reset-button[_ngcontent-%COMP%]{background-color:#ff6b6b}.debug-button.reset-button[_ngcontent-%COMP%]:hover{background-color:#ff5252}.debug-button.uv-button[_ngcontent-%COMP%]{background-color:#2196f3}.debug-button.uv-button[_ngcontent-%COMP%]:hover{background-color:#1976d2}.uv-debug-panel[_ngcontent-%COMP%]{background-color:#f0f8ff;border:solid #2196F3 2px;border-radius:4px;padding:12px;margin:12px 0;font-size:9pt}.uv-debug-header[_ngcontent-%COMP%]{font-weight:700;font-size:11pt;color:#1976d2;margin-bottom:8px;text-align:center;border-bottom:solid #2196F3 1px;padding-bottom:4px}.uv-debug-info[_ngcontent-%COMP%]{background-color:#fff;padding:6px;margin-bottom:8px;border-radius:2px;font-family:monospace;font-size:8pt}.uv-debug-hint[_ngcontent-%COMP%]{font-style:italic;color:#666;font-size:7pt;margin-top:4px;padding-top:4px;border-top:solid #e0e0e0 1px}.texture-selector[_ngcontent-%COMP%]{background-color:#fff;border:solid #e0e0e0 1px;border-radius:2px;padding:8px;margin-bottom:8px}.texture-selector-label[_ngcontent-%COMP%]{font-weight:700;color:#1976d2;margin-bottom:4px;font-size:8pt}.texture-dropdown[_ngcontent-%COMP%]{width:100%;padding:4px;margin-bottom:6px;border:solid #ccc 1px;border-radius:2px;font-size:8pt;font-family:monospace;background-color:#fff}.texture-dropdown[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3}.reset-texture-button[_ngcontent-%COMP%]{background-color:#ff9800;font-size:7pt;padding:4px 8px}.reset-texture-button[_ngcontent-%COMP%]:hover{background-color:#f57c00}.uv-visualizer-container[_ngcontent-%COMP%]{background-color:#fff;border:solid #e0e0e0 1px;border-radius:2px;padding:8px;margin-bottom:8px;text-align:center}.uv-visualizer-label[_ngcontent-%COMP%]{font-weight:700;color:#1976d2;margin-bottom:6px;font-size:8pt}.uv-visualizer-canvas[_ngcontent-%COMP%]{border:solid #ccc 2px;border-radius:2px;cursor:default;display:block;margin:0 auto 6px}.uv-visualizer-legend[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:4px}.uv-legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:7pt;color:#333}.uv-legend-color[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;margin-right:4px;border:solid #fff 1px}.uv1-color[_ngcontent-%COMP%]{background-color:red}.uv2-color[_ngcontent-%COMP%]{background-color:#0f0}.uv3-color[_ngcontent-%COMP%]{background-color:#00f}.uv-visualizer-hint[_ngcontent-%COMP%]{font-style:italic;color:#666;font-size:7pt}.uv-vertex-controls[_ngcontent-%COMP%]{background-color:#fff;border:solid #e0e0e0 1px;border-radius:2px;padding:8px;margin-bottom:6px}.uv-vertex-label[_ngcontent-%COMP%]{font-weight:700;color:#1976d2;margin-bottom:4px;font-size:8pt}.uv-slider-group[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:4px;grid-gap:8px;gap:8px}.uv-slider-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:80px;font-family:monospace;font-size:7pt;color:#333}.uv-slider-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{flex:1;height:4px;background:#ddd;outline:none;border-radius:2px}.uv-slider-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:12px;height:12px;background:#2196F3;cursor:pointer;border-radius:50%}.uv-slider-group[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{width:12px;height:12px;background:#2196F3;cursor:pointer;border-radius:50%;border:none}.uv-debug-actions[_ngcontent-%COMP%]{text-align:center;margin-top:8px;padding-top:8px;border-top:solid #e0e0e0 1px}.debug-info[_ngcontent-%COMP%]{font-size:8pt;color:#666;font-style:italic}.loading-progress[_ngcontent-%COMP%]{margin-top:16px}.progress-bar[_ngcontent-%COMP%]{width:300px;height:20px;background-color:#ddd;border-radius:10px;margin:8px auto;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background-color:#4caf50;transition:width .3s ease}"]}),n}();function RZ(n,a){if(1&n){var t=L();s(0,"div",8),oe("click",function(){var p=Pr(t).$implicit;return Re().onSelectTab(p.id)}),le(1),l()}if(2&n){var r=a.$implicit;BR("active",Re().activeTab===r.id),ae(1),Nt(" ",r.label," ")}}function TZ(n,a){1&n&&(s(0,"div",9),c(1,"world-details",10),l()),2&n&&(ae(1),d("worldType","overground"))}function DZ(n,a){1&n&&(s(0,"div",9),c(1,"world-details",10),l()),2&n&&(ae(1),d("worldType","underwater"))}function AZ(n,a){1&n&&(s(0,"div",9),c(1,"world-details",10),l()),2&n&&(ae(1),d("worldType","glacier"))}var MZ=function(){var n=function(){function a(){k(this,a),this.activeTab="overground",this.tabs=[{id:"overground",label:"Overground"},{id:"underwater",label:"Underwater"},{id:"glacier",label:"Glacier"}]}return j(a,[{key:"ngOnInit",value:function(){}},{key:"onSelectTab",value:function(r){this.activeTab=r}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Mr({type:n,selectors:[["world-map"]],decls:12,vars:4,consts:[[2,"background-color","#c0c0c0","padding","4px"],[2,"background-color","white","padding","4px","margin-bottom","4px"],[2,"font-size","20pt","color","#404040"],[2,"font-size","16pt","color","#808080"],[1,"tab-container"],["class","tab-header",3,"active","click",4,"ngFor","ngForOf"],[1,"tab-content"],["class","tab-panel",4,"ngIf"],[1,"tab-header",3,"click"],[1,"tab-panel"],[3,"worldType"]],template:function(t,r){1&t&&(s(0,"div",0),s(1,"div",1),s(2,"div",2),le(3,"World Map"),l(),s(4,"div",3),le(5,"Final Fantasy VII World Map Viewer"),l(),l(),s(6,"div",4),it(7,RZ,2,3,"div",5),l(),s(8,"div",6),it(9,TZ,2,1,"div",7),it(10,DZ,2,1,"div",7),it(11,AZ,2,1,"div",7),l(),l()),2&t&&(ae(7),d("ngForOf",r.tabs),ae(2),d("ngIf","overground"===r.activeTab),ae(1),d("ngIf","underwater"===r.activeTab),ae(1),d("ngIf","glacier"===r.activeTab))},directives:[rl,$a,xZ],styles:[".tab-container[_ngcontent-%COMP%]{display:flex;background-color:#e0e0e0;margin-bottom:4px}.tab-header[_ngcontent-%COMP%]{background-color:#f0f0f0;border:solid #c0c0c0 1px;border-bottom:none;padding:8px 16px;margin-right:2px;cursor:pointer;font-size:12pt;color:#404040;font-weight:700;transition:background-color .2s}.tab-header[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.tab-header.active[_ngcontent-%COMP%]{background-color:#fff;border-bottom:solid white 1px;margin-bottom:-1px;position:relative;z-index:1}.tab-content[_ngcontent-%COMP%]{background-color:#fff;border:solid #c0c0c0 1px;min-height:500px}.tab-panel[_ngcontent-%COMP%]{padding:0}"]}),n}(),OZ=[{path:"field-scenes",component:hL},{path:"scene-details/:name",component:fJ},{path:"field-models",component:IJ},{path:"field-model-details/:hrcId",component:JJ},{path:"battle-models",component:zJ},{path:"battle-model-details/:hrcId",component:iZ},{path:"field-op-codes",component:mJ},{path:"field-op-code-details/:hex",component:SJ},{path:"sounds",component:uZ},{path:"world-map",component:MZ},{path:"**",component:hL}],PZ=function(){var n=function a(){k(this,a)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_i({type:n,bootstrap:[Mz]}),n.\u0275inj=Vo({providers:[],imports:[[LV,mz.forRoot(OZ),rW,Th.withComponents([])]]}),n}();PV().bootstrapModule(PZ).catch(function(n){return console.error(n)})},564:function(wl,Y){"use strict";function Ue(d){return null==d||""===d?null:d}function Fe(d,i){return void 0===i&&(i=!1),null!=d&&(""!==d||i)}function Ce(d){return!Fe(d)}function ni(d){return null==d||0===d.length}function j(d){return null!=d&&"function"==typeof d.toString?d.toString():null}function k(d){if(void 0!==d){if(null===d||""===d)return null;if("number"==typeof d)return isNaN(d)?void 0:d;var i=parseInt(d,10);return isNaN(i)?void 0:i}}function oo(d){if(void 0!==d)return null!==d&&""!==d&&("boolean"==typeof d?d:/true/i.test(d))}function Li(d,i,e){if(null==d)return null;if(!Array.isArray(d))return Li(me(d),i,e);for(var l=d,c=null,h=0;h<l.length;h++){var m=l[h];if("string"==typeof i){if(m[i]===e){c=m;break}}else if(i(m)){c=m;break}}return c}function me(d){if(d instanceof Set||d instanceof Map){var i=[];return d.forEach(function(e){return i.push(e)}),i}return Object.keys(d).map(function(e){return d[e]})}var $s=Object.freeze({__proto__:null,makeNull:Ue,exists:Fe,missing:Ce,missingOrEmpty:ni,toStringOrNull:j,attrToNumber:k,attrToBoolean:oo,attrToString:function(d){if(null!=d&&""!==d)return d},referenceCompare:function(d,i){return null==d&&null==i||!(null==d&&null!=i||null!=d&&null==i)&&d===i},jsonEquals:function(d,i){return(d?JSON.stringify(d):null)===(i?JSON.stringify(i):null)},defaultComparator:function(d,i,e){void 0===e&&(e=!1);var s=null==d,l=null==i;if(d&&d.toNumber&&(d=d.toNumber()),i&&i.toNumber&&(i=i.toNumber()),s&&l)return 0;if(s)return-1;if(l)return 1;function c(h,m){return h>m?1:h<m?-1:0}if("string"!=typeof d||!e)return c(d,i);try{return d.localeCompare(i)}catch(h){return c(d,i)}},find:Li,values:me}),hi=function(){function d(){this.existingKeys={}}return d.prototype.addExistingKeys=function(i){for(var e=0;e<i.length;e++)this.existingKeys[i[e]]=!0},d.prototype.getUniqueKey=function(i,e){i=j(i);for(var s=0;;){var l=void 0;if(i?(l=i,0!==s&&(l+="_"+s)):e?(l=e,0!==s&&(l+="_"+s)):l=""+s,!this.existingKeys[l])return this.existingKeys[l]=!0,l;s++}},d}();function Ot(){for(var d=[],i=0;i<arguments.length;i++)d[i]=arguments[i];for(var e=0;e<d.length;e++){var s=d[e];if(Fe(s))return s}return null}function zn(d){if(d&&d.length)return d[d.length-1]}function Ar(d,i,e){return null==d&&null==i||null!=d&&null!=i&&d.length===i.length&&nn(d,function(s,l){return e?e(s,i[l]):i[l]===s})}function Wc(d){return d.sort(function(i,e){return i-e})}function ri(d,i){var e=d.indexOf(i);e>=0&&d.splice(e,1)}function An(d,i){Wt(i,function(e){return ri(d,e)})}function vi(d,i,e){d.splice(e,0,i)}function Sr(d,i,e){An(d,i),Wt(i.slice().reverse(),function(s){return vi(d,s,e)})}function xn(d,i){return d.indexOf(i)>-1}function ht(d,i){null==i||null==d||Wt(i,function(e){return d.push(e)})}function nt(d,i){for(var e=0;e<d.length;e++)if(i(d[e],e,d))return e;return-1}function nn(d,i){if(null==d)return!0;for(var e=0;e<d.length;e++)if(!i(d[e],e))return!1;return!0}function $t(d,i){if(null==d)return!1;for(var e=0;e<d.length;e++)if(i(d[e],e))return!0;return!1}function Wt(d,i){if(null!=d)for(var e=0;e<d.length;e++)i(d[e],e)}function gi(d,i){if(null==d)return null;for(var e=[],s=0;s<d.length;s++)e.push(i(d[s],s));return e}function Gr(d,i){if(null==d)return null;for(var e=[],s=0;s<d.length;s++)i(d[s],s)&&e.push(d[s]);return e}var ls=Object.freeze({__proto__:null,firstExistingValue:Ot,anyExists:function(d){return d&&null!=Ot(d)},existsAndNotEmpty:function(d){return null!=d&&d.length>0},last:zn,areEqual:Ar,compareArrays:function(d,i){return Ar(d,i)},shallowCompare:function(d,i){return Ar(d,i)},sortNumerically:Wc,removeRepeatsFromArray:function(d,i){if(d)for(var e=d.length-2;e>=0;e--)d[e]===i&&d[e+1]===i&&d.splice(e+1,1)},removeFromArray:ri,removeAllFromArray:An,insertIntoArray:vi,insertArrayIntoArray:function(d,i,e){if(null!=d&&null!=i)for(var s=i.length-1;s>=0;s--)vi(d,i[s],e)},moveInArray:Sr,includes:xn,flatten:function(d){return[].concat.apply([],d)},pushAll:ht,toStrings:function(d){return gi(d,j)},findIndex:nt,fill:function(d,i,e,s){void 0===i&&(i=null),void 0===e&&(e=0),void 0===s&&(s=d.length);for(var l=e;l<s;l++)d[l]=i;return d},every:nn,some:$t,forEach:Wt,forEachReverse:function(d,i){if(null!=d)for(var e=d.length-1;e>=0;e--)i(d[e],e)},map:gi,filter:Gr,reduce:function(d,i,e){if(null==d||null==e)return null;for(var s=e,l=0;l<d.length;l++)s=i(s,d[l],l);return s},forEachSnapshotFirst:function(d,i){d&&d.slice(0).forEach(i)}});function Fn(d,i){null!=d&&(Array.isArray(d)?Wt(d,function(e,s){return i(""+s,e)}):Wt(Object.keys(d),function(e){return i(e,d[e])}))}function cs(d){for(var i={},e=Object.keys(d),s=0;s<e.length;s++){var l=e[s];i[l]=d[l]}return i}function Df(d,i){if(d){var e=d,s={};return Object.keys(e).forEach(function(l){if(!(i&&i.indexOf(l)>=0)){var c=e[l],h=bl(c)&&c.constructor===Object;s[l]=h?Df(c):c}}),s}}function Af(d,i){return d[i]}function Mf(d,i,e){d[i]=e}function Tv(d,i,e,s){var l=Af(d,e);void 0!==l&&Mf(i,e,s?s(l):l)}function Of(d){var i={};return d.filter(function(e){return null!=e}).forEach(function(e){Wt(Object.keys(e),function(s){return i[s]=null})}),Object.keys(i)}function Ta(d){if(!d)return[];var i=Object;if("function"==typeof i.values)return i.values(d);var e=[];for(var s in d)d.hasOwnProperty(s)&&d.propertyIsEnumerable(s)&&e.push(d[s]);return e}function ao(d,i,e,s){void 0===e&&(e=!0),void 0===s&&(s=!1),Fe(i)&&Fn(i,function(l,c){var h=d[l];h!==c&&(s&&null==h&&null!=c&&"object"==typeof c&&c.constructor===Object&&(d[l]=h={}),bl(c)&&bl(h)&&!Array.isArray(h)?ao(h,c,e,s):(e||void 0!==c)&&(d[l]=c))})}function ii(d){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];return Wt(i,function(s){return Fn(s,function(l,c){return d[l]=c})}),d}function Pf(d,i,e){if(i&&d){if(!e)return d[i];for(var s=i.split("."),l=d,c=0;c<s.length;c++){if(null==l)return;l=l[s[c]]}return l}}function l_(d,i){Object.keys(d).forEach(function(l){"object"==typeof d[l]&&(d[l]=void 0)});var e=Object.getPrototypeOf(d),s={};Object.keys(e).forEach(function(l){"function"==typeof e[l]&&(s[l]={value:function(){console.warn("AG Grid: "+i+" function "+l+"() cannot be called as the grid has been destroyed.\n                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't\n                     be keeping the API reference, your application has a memory leak! Remove the API reference\n                     when the grid is destroyed.")},writable:!0})}),Object.defineProperties(d,s)}function bl(d){return"object"==typeof d&&null!==d}var ds=Object.freeze({__proto__:null,iterateObject:Fn,cloneObject:cs,deepCloneObject:function(d){return JSON.parse(JSON.stringify(d))},deepCloneDefinition:Df,getProperty:Af,setProperty:Mf,copyPropertiesIfPresent:function(d,i){for(var e=[],s=2;s<arguments.length;s++)e[s-2]=arguments[s];Wt(e,function(l){return Tv(d,i,l)})},copyPropertyIfPresent:Tv,getAllKeysInObjects:Of,getAllValuesInObject:Ta,mergeDeep:ao,assign:ii,missingOrEmptyObject:function(d){return Ce(d)||0===Object.keys(d).length},get:function(d,i,e){if(null==d)return e;for(var s=i.split("."),l=d;s.length>1;)if(null==(l=l[s.shift()]))return e;var c=l[s[0]];return null!=c?c:e},set:function(d,i,e){if(null!=d){for(var s=i.split("."),l=d;s.length>1;)if(null==(l=l[s.shift()]))return;l[s[0]]=e}},deepFreeze:function Dv(d){return Object.freeze(d),Wt(me(d),function(i){(bl(i)||"function"==typeof i)&&Dv(i)}),d},getValueUsingField:Pf,removeAllReferences:l_,isNonNullObject:bl}),c_=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,d_=/([^\s,]+)/g,oi={};function vn(d,i){oi[i]||(d(),oi[i]=!0)}function Yn(d){if(d.name)return d.name;var i=/function\s+([^\(]+)/.exec(d.toString());return i&&2===i.length?i[1].trim():null}function xl(d){return!!(d&&d.constructor&&d.call&&d.apply)}function If(d){DE(d,400)}var f_=[],Lf=!1;function p_(d){f_.push(d),!Lf&&(Lf=!0,window.setTimeout(function(){var i=f_.slice();f_.length=0,Lf=!1,i.forEach(function(e){return e()})},0))}function DE(d,i){void 0===i&&(i=0),d.length>0&&window.setTimeout(function(){return d.forEach(function(e){return e()})},i)}function Mu(d,i,e){var s;return void 0===e&&(e=!1),function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var h=this,m=e&&!s;window.clearTimeout(s),s=window.setTimeout(function(){s=null,e||d.apply(h,l)},i),m&&d.apply(h,l)}}function AE(d,i,e,s){void 0===e&&(e=100);var l=(new Date).getTime(),c=null,h=!1,m=function(){var R=(new Date).getTime()-l>e;(d()||R)&&(i(),h=!0,null!=c&&(window.clearInterval(c),c=null),R&&s&&console.warn(s))};m(),h||(c=window.setInterval(m,10))}function OE(d){d&&d()}var h_=Object.freeze({__proto__:null,doOnce:vn,getFunctionName:Yn,getFunctionParameters:function(d){var i=d.toString().replace(c_,"");return i.slice(i.indexOf("(")+1,i.indexOf(")")).match(d_)||[]},isFunction:xl,executeInAWhile:If,executeNextVMTurn:p_,executeAfter:DE,debounce:Mu,waitUntil:AE,compose:function(){for(var d=[],i=0;i<arguments.length;i++)d[i]=arguments[i];return function(e){return d.reduce(function(s,l){return l(s)},e)}},callIfPresent:OE}),PE=function(){function d(i,e){if(this.beanWrappers={},this.destroyed=!1,i&&i.beanClasses){this.contextParams=i,this.logger=e,this.logger.log(">> creating ag-Application Context"),this.createBeans();var s=this.getBeanInstances();this.wireBeans(s),this.logger.log(">> ag-Application Context ready - component is alive")}}return d.prototype.getBeanInstances=function(){return me(this.beanWrappers).map(function(i){return i.beanInstance})},d.prototype.createBean=function(i,e){if(!i)throw Error("Can't wire to bean since it is null");return this.wireBeans([i],e),i},d.prototype.wireBeans=function(i,e){this.autoWireBeans(i),this.methodWireBeans(i),this.callLifeCycleMethods(i,"preConstructMethods"),Fe(e)&&i.forEach(e),this.callLifeCycleMethods(i,"postConstructMethods")},d.prototype.createBeans=function(){var i=this;this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),Fn(this.beanWrappers,function(s,l){var c;l.bean.__agBeanMetaData&&l.bean.__agBeanMetaData.autowireMethods&&l.bean.__agBeanMetaData.autowireMethods.agConstructor&&(c=l.bean.__agBeanMetaData.autowireMethods.agConstructor);var h=i.getBeansForParameters(c,l.bean.name),m=function(d,i){var e=[null].concat(i);return new(d.bind.apply(d,e))}(l.bean,h);l.beanInstance=m});var e=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: "+e)},d.prototype.createBeanWrapper=function(i){var e=i.__agBeanMetaData;if(!e){var s;return s=i.prototype.constructor?Yn(i.prototype.constructor):""+i,void console.error("Context item "+s+" is not a bean")}this.beanWrappers[e.beanName]={bean:i,beanInstance:null,beanName:e.beanName}},d.prototype.autoWireBeans=function(i){var e=this;i.forEach(function(s){e.forEachMetaDataInHierarchy(s,function(l,c){var h=l.agClassAttributes;!h||h.forEach(function(m){var w=e.lookupBeanInstance(c,m.beanName,m.optional);s[m.attributeName]=w})})})},d.prototype.methodWireBeans=function(i){var e=this;i.forEach(function(s){e.forEachMetaDataInHierarchy(s,function(l,c){Fn(l.autowireMethods,function(h,m){if("agConstructor"!==h){var w=e.getBeansForParameters(m,c);s[h].apply(s,w)}})})})},d.prototype.forEachMetaDataInHierarchy=function(i,e){for(var s=Object.getPrototypeOf(i);null!=s;){var l=s.constructor;l.hasOwnProperty("__agBeanMetaData")&&e(l.__agBeanMetaData,this.getBeanName(l)),s=Object.getPrototypeOf(s)}},d.prototype.getBeanName=function(i){if(i.__agBeanMetaData&&i.__agBeanMetaData.beanName)return i.__agBeanMetaData.beanName;var e=i.toString();return e.substring(9,e.indexOf("("))},d.prototype.getBeansForParameters=function(i,e){var s=this,l=[];return i&&Fn(i,function(c,h){var m=s.lookupBeanInstance(e,h);l[Number(c)]=m}),l},d.prototype.lookupBeanInstance=function(i,e,s){if(void 0===s&&(s=!1),"context"===e)return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(e))return this.contextParams.providedBeanInstances[e];var l=this.beanWrappers[e];return l?l.beanInstance:(s||console.error("AG Grid: unable to find bean reference "+e+" while initialising "+i),null)},d.prototype.callLifeCycleMethods=function(i,e){var s=this;i.forEach(function(l){return s.callLifeCycleMethodsOnBean(l,e)})},d.prototype.callLifeCycleMethodsOnBean=function(i,e,s){var l={};this.forEachMetaDataInHierarchy(i,function(h){var m=h[e];m&&m.forEach(function(w){w!=s&&(l[w]=!0)})}),Object.keys(l).forEach(function(h){return i[h]()})},d.prototype.getBean=function(i){return this.lookupBeanInstance("getBean",i,!0)},d.prototype.destroy=function(){if(!this.destroyed){this.logger.log(">> Shutting down ag-Application Context");var i=this.getBeanInstances();this.destroyBeans(i),this.contextParams.providedBeanInstances=null,this.destroyed=!0,this.logger.log(">> ag-Application Context shut down - component is dead")}},d.prototype.destroyBean=function(i){!i||this.destroyBeans([i])},d.prototype.destroyBeans=function(i){var e=this;return i?(i.forEach(function(s){e.callLifeCycleMethodsOnBean(s,"preDestroyMethods","destroy"),"function"==typeof s.destroy&&s.destroy()}),[]):[]},d}();function Av(d,i,e){var s=Rl(d.constructor);s.preConstructMethods||(s.preConstructMethods=[]),s.preConstructMethods.push(i)}function Qe(d,i,e){var s=Rl(d.constructor);s.postConstructMethods||(s.postConstructMethods=[]),s.postConstructMethods.push(i)}function Fi(d,i,e){var s=Rl(d.constructor);s.preDestroyMethods||(s.preDestroyMethods=[]),s.preDestroyMethods.push(i)}function vt(d){return function(i){Rl(i).beanName=d}}function H(d){return function(i,e,s){IE(i,d,!1,0,e,null)}}function Nn(d){return function(i,e,s){IE(i,d,!0,0,e,null)}}function IE(d,i,e,s,l,c){if(null!==i)if("number"!=typeof c){var h=Rl(d.constructor);h.agClassAttributes||(h.agClassAttributes=[]),h.agClassAttributes.push({attributeName:l,beanName:i,optional:e})}else console.error("AG Grid: Autowired should be on an attribute");else console.error("AG Grid: Autowired name should not be null")}function Ni(d){return function(i,e,s){var c,l="function"==typeof i?i:i.constructor;if("number"==typeof s){var h=void 0;e?(c=Rl(l),h=e):(c=Rl(l),h="agConstructor"),c.autowireMethods||(c.autowireMethods={}),c.autowireMethods[h]||(c.autowireMethods[h]={}),c.autowireMethods[h][s]=d}}}function Rl(d){return d.hasOwnProperty("__agBeanMetaData")||(d.__agBeanMetaData={}),d.__agBeanMetaData}var d,g_=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Mv=function(d,i){return function(e,s){i(e,s,d)}},Js=function(){function d(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}return d.prototype.setBeans=function(i,e,s,l){if(void 0===l&&(l=null),this.frameworkOverrides=s,l){var c=e.useAsyncEvents();this.addGlobalListener(l,c)}},d.prototype.getListeners=function(i,e,s){var l=e?this.allAsyncListeners:this.allSyncListeners,c=l.get(i);return!c&&s&&l.set(i,c=new Set),c},d.prototype.noRegisteredListenersExist=function(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size},d.prototype.addEventListener=function(i,e,s){void 0===s&&(s=!1),this.getListeners(i,s,!0).add(e)},d.prototype.removeEventListener=function(i,e,s){void 0===s&&(s=!1);var l=this.getListeners(i,s,!1);l&&(l.delete(e),0===l.size)&&(s?this.allAsyncListeners:this.allSyncListeners).delete(i)},d.prototype.addGlobalListener=function(i,e){void 0===e&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).add(i)},d.prototype.removeGlobalListener=function(i,e){void 0===e&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).delete(i)},d.prototype.dispatchEvent=function(i){this.dispatchToListeners(i,!0),this.dispatchToListeners(i,!1),this.firedEvents[i.type]=!0},d.prototype.dispatchEventOnce=function(i){this.firedEvents[i.type]||this.dispatchEvent(i)},d.prototype.dispatchToListeners=function(i,e){var s=this,l=i.type,h=this.getListeners(l,e,!1);h&&h.forEach(function(T){e?s.dispatchAsync(function(){return T(i)}):T(i)}),(e?this.globalAsyncListeners:this.globalSyncListeners).forEach(function(w){e?s.dispatchAsync(function(){return s.frameworkOverrides.dispatchEvent(l,function(){return w(l,i)},!0)}):s.frameworkOverrides.dispatchEvent(l,function(){return w(l,i)},!0)})},d.prototype.dispatchAsync=function(i){this.asyncFunctionsQueue.push(i),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},d.prototype.flushAsyncQueue=function(){this.scheduled=!1;var i=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],i.forEach(function(e){return e()})},g_([Mv(0,Ni("loggerFactory")),Mv(1,Ni("gridOptionsWrapper")),Mv(2,Ni("frameworkOverrides")),Mv(3,Ni("globalEventListener"))],d.prototype,"setBeans",null),g_([vt("eventService")],d)}(),fe=function(){function d(){}return d.ROW_BUFFER_SIZE=10,d.LAYOUT_INTERVAL=500,d.BATCH_WAIT_MILLIS=50,d.EXPORT_TYPE_DRAG_COPY="dragCopy",d.EXPORT_TYPE_CLIPBOARD="clipboard",d.EXPORT_TYPE_EXCEL="excel",d.EXPORT_TYPE_CSV="csv",d.ROW_MODEL_TYPE_INFINITE="infinite",d.ROW_MODEL_TYPE_VIEWPORT="viewport",d.ROW_MODEL_TYPE_CLIENT_SIDE="clientSide",d.ROW_MODEL_TYPE_SERVER_SIDE="serverSide",d.ALWAYS="always",d.ONLY_WHEN_GROUPING="onlyWhenGrouping",d.PINNED_TOP="top",d.PINNED_BOTTOM="bottom",d.DOM_LAYOUT_NORMAL="normal",d.DOM_LAYOUT_PRINT="print",d.DOM_LAYOUT_AUTO_HEIGHT="autoHeight",d.GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",d.SOURCE_PASTE="paste",d.PINNED_RIGHT="right",d.PINNED_LEFT="left",d.SORT_ASC="asc",d.SORT_DESC="desc",d.INPUT_SELECTOR="input, select, button, textarea",d.FOCUSABLE_SELECTOR="[tabindex], input, select, button, textarea",d.FOCUSABLE_EXCLUDE=".ag-hidden, .ag-hidden *, [disabled], .ag-disabled, .ag-disabled *",d}();(d=Y.GXE||(Y.GXE={})).CommunityCoreModule="@ag-grid-community/core",d.CommunityAllModules="@ag-grid-community/all",d.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",d.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",d.CsvExportModule="@ag-grid-community/csv-export",d.EnterpriseCoreModule="@ag-grid-enterprise/core",d.EnterpriseAllModules="@ag-grid-enterprise/all",d.RowGroupingModule="@ag-grid-enterprise/row-grouping",d.ColumnToolPanelModule="@ag-grid-enterprise/column-tool-panel",d.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",d.MenuModule="@ag-grid-enterprise/menu",d.SetFilterModule="@ag-grid-enterprise/set-filter",d.MultiFilterModule="@ag-grid-enterprise/multi-filter",d.StatusBarModule="@ag-grid-enterprise/status-bar",d.SideBarModule="@ag-grid-enterprise/side-bar",d.RangeSelectionModule="@ag-grid-enterprise/range-selection",d.MasterDetailModule="@ag-grid-enterprise/master-detail",d.RichSelectModule="@ag-grid-enterprise/rich-select",d.GridChartsModule="@ag-grid-enterprise/charts",d.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",d.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",d.ExcelExportModule="@ag-grid-enterprise/excel-export",d.ClipboardModule="@ag-grid-enterprise/clipboard",d.SparklinesModule="@ag-grid-enterprise/sparklines",d.AngularModule="@ag-grid-community/angular",d.ReactModule="@ag-grid-community/react",d.VueModule="@ag-grid-community/vue",d.PolymerModule="@ag-grid-community/polymer";var qt=function(){function d(){}return d.register=function(i,e){void 0===e&&(e=!0),d.modulesMap[i.moduleName]=i,void 0===d.moduleBased?d.moduleBased=e:d.moduleBased!==e&&vn(function(){console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")},d.registerModules=function(i,e){void 0===e&&(e=!0),i&&i.forEach(function(s){return d.register(s,e)})},d.assertRegistered=function(i,e){if(this.isRegistered(i))return!0;var l="AG Grid: unable to use "+e+" as module "+i+" is not present. Please see: https://www.ag-grid.com/javascript-grid/modules/";return vn(function(){console.warn(l)},e+i),!1},d.isRegistered=function(i){return!!d.modulesMap[i]},d.getRegisteredModules=function(){return me(d.modulesMap)},d.isPackageBased=function(){return!d.moduleBased},d.modulesMap={},d}(),Ou=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},m_=0,Mn=function(){function d(i,e,s,l){this.instanceId=m_++,this.moving=!1,this.menuVisible=!1,this.filterActive=!1,this.eventService=new Js,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=i,this.userProvidedColDef=e,this.colId=s,this.primary=l,this.setState(i)}return d.prototype.getInstanceId=function(){return this.instanceId},d.prototype.setState=function(i){void 0!==i.sort?(i.sort===fe.SORT_ASC||i.sort===fe.SORT_DESC)&&(this.sort=i.sort):(i.initialSort===fe.SORT_ASC||i.initialSort===fe.SORT_DESC)&&(this.sort=i.initialSort);var e=k(i.sortIndex),s=k(i.initialSortIndex);void 0!==e?null!==e&&(this.sortIndex=e):null!==s&&(this.sortIndex=s);var l=oo(i.hide),c=oo(i.initialHide);this.visible=void 0!==l?!l:!c,this.setPinned(void 0!==i.pinned?i.pinned:i.initialPinned);var h=k(i.flex),m=k(i.initialFlex);void 0!==h?this.flex=h:void 0!==m&&(this.flex=m)},d.prototype.setColDef=function(i,e){this.colDef=i,this.userProvidedColDef=e,this.initMinAndMaxWidths(),this.initDotNotation()},d.prototype.getUserProvidedColDef=function(){return this.userProvidedColDef},d.prototype.setParent=function(i){this.parent=i},d.prototype.getParent=function(){return this.parent},d.prototype.setOriginalParent=function(i){this.originalParent=i},d.prototype.getOriginalParent=function(){return this.originalParent},d.prototype.initialise=function(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.validate()},d.prototype.initDotNotation=function(){var i=this.gridOptionsWrapper.isSuppressFieldDotNotation();this.fieldContainsDots=Fe(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!i,this.tooltipFieldContainsDots=Fe(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!i},d.prototype.initMinAndMaxWidths=function(){var i=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(i),this.maxWidth=this.columnUtils.calculateColMaxWidth(i)},d.prototype.resetActualWidth=function(i){void 0===i&&(i="api");var e=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(e,i,!0)},d.prototype.isEmptyGroup=function(){return!1},d.prototype.isRowGroupDisplayed=function(i){return!(Ce(this.colDef)||Ce(this.colDef.showRowGroup)||!0!==this.colDef.showRowGroup&&this.colDef.showRowGroup!==i)},d.prototype.isPrimary=function(){return this.primary},d.prototype.isFilterAllowed=function(){return this.primary&&(!!this.colDef.filter||!!this.colDef.filterFramework)},d.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},d.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},d.prototype.validate=function(){var i=this.colDef;function e(h,m,w){vn(function(){w?console.warn(h,w):vn(function(){return console.warn(h)},m)},m)}this.gridOptionsWrapper.isRowModelDefault()&&!qt.isRegistered(Y.GXE.RowGroupingModule)&&["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","enableValue","pivot","pivotIndex","aggFunc"].forEach(function(h){Fe(i[h])&&(qt.isPackageBased()?e("AG Grid: "+h+" is only valid in ag-grid-enterprise, your column definition should not have "+h,"ColumnRowGroupingMissing"+h):e("AG Grid: "+h+" is only valid with AG Grid Enterprise Module "+Y.GXE.RowGroupingModule+" - your column definition should not have "+h,"ColumnRowGroupingMissing"+h))}),qt.isRegistered(Y.GXE.RichSelectModule)||"agRichSelect"===this.colDef.cellEditor&&(qt.isPackageBased()?e("AG Grid: "+this.colDef.cellEditor+" can only be used with ag-grid-enterprise","ColumnRichSelectMissing"):e("AG Grid: "+this.colDef.cellEditor+" can only be used with AG Grid Enterprise Module "+Y.GXE.RichSelectModule,"ColumnRichSelectMissing")),this.gridOptionsWrapper.isTreeData()&&["rowGroup","rowGroupIndex","pivot","pivotIndex"].forEach(function(h){Fe(i[h])&&e("AG Grid: "+h+" is not possible when doing tree data, your column definition should not have "+h,"TreeDataCannotRowGroup")}),Fe(this.colDef.width)&&"number"!=typeof this.colDef.width&&e("AG Grid: colDef.width should be a number, not "+typeof this.colDef.width,"ColumnCheck_asdfawef"),i.pinnedRowCellRenderer&&e("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),i.pinnedRowCellRendererParams&&e("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),i.pinnedRowCellRendererFramework&&e("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),i.pinnedRowValueGetter&&e("AG Grid: pinnedRowCellRenderer is deprecated, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue.","colDef.pinnedRowCellRenderer-deprecated")},d.prototype.addEventListener=function(i,e){this.eventService.addEventListener(i,e)},d.prototype.removeEventListener=function(i,e){this.eventService.removeEventListener(i,e)},d.prototype.createColumnFunctionCallbackParams=function(i){return{node:i,data:i.data,column:this,colDef:this.colDef,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()}},d.prototype.isSuppressNavigable=function(i){if("boolean"==typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"==typeof this.colDef.suppressNavigable){var e=this.createColumnFunctionCallbackParams(i);return(0,this.colDef.suppressNavigable)(e)}return!1},d.prototype.isCellEditable=function(i){return!(i.group&&!this.gridOptionsWrapper.isEnableGroupEdit())&&this.isColumnFunc(i,this.colDef.editable)},d.prototype.isSuppressFillHandle=function(){return!!this.colDef.suppressFillHandle},d.prototype.isRowDrag=function(i){return this.isColumnFunc(i,this.colDef.rowDrag)},d.prototype.isDndSource=function(i){return this.isColumnFunc(i,this.colDef.dndSource)},d.prototype.isCellCheckboxSelection=function(i){return this.isColumnFunc(i,this.colDef.checkboxSelection)},d.prototype.isSuppressPaste=function(i){return this.isColumnFunc(i,this.colDef?this.colDef.suppressPaste:null)},d.prototype.isResizable=function(){return!0===this.colDef.resizable},d.prototype.isColumnFunc=function(i,e){return"boolean"==typeof e?e:"function"==typeof e&&e(this.createColumnFunctionCallbackParams(i))},d.prototype.setMoving=function(i,e){void 0===e&&(e="api"),this.moving=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_MOVING_CHANGED,e))},d.prototype.createColumnEvent=function(i,e){return{api:this.gridApi,columnApi:this.columnApi,type:i,column:this,columns:[this],source:e}},d.prototype.isMoving=function(){return this.moving},d.prototype.getSort=function(){return this.sort},d.prototype.setSort=function(i,e){void 0===e&&(e="api"),this.sort!==i&&(this.sort=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_SORT_CHANGED,e)))},d.prototype.setMenuVisible=function(i,e){void 0===e&&(e="api"),this.menuVisible!==i&&(this.menuVisible=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_MENU_VISIBLE_CHANGED,e)))},d.prototype.isMenuVisible=function(){return this.menuVisible},d.prototype.isSortAscending=function(){return this.sort===fe.SORT_ASC},d.prototype.isSortDescending=function(){return this.sort===fe.SORT_DESC},d.prototype.isSortNone=function(){return Ce(this.sort)},d.prototype.isSorting=function(){return Fe(this.sort)},d.prototype.getSortIndex=function(){return this.sortIndex},d.prototype.setSortIndex=function(i){this.sortIndex=i},d.prototype.setAggFunc=function(i){this.aggFunc=i},d.prototype.getAggFunc=function(){return this.aggFunc},d.prototype.getLeft=function(){return this.left},d.prototype.getOldLeft=function(){return this.oldLeft},d.prototype.getRight=function(){return this.left+this.actualWidth},d.prototype.setLeft=function(i,e){void 0===e&&(e="api"),this.oldLeft=this.left,this.left!==i&&(this.left=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_LEFT_CHANGED,e)))},d.prototype.isFilterActive=function(){return this.filterActive},d.prototype.setFilterActive=function(i,e,s){void 0===e&&(e="api"),this.filterActive!==i&&(this.filterActive=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_FILTER_ACTIVE_CHANGED,e)));var l=this.createColumnEvent(d.EVENT_FILTER_CHANGED,e);s&&ao(l,s),this.eventService.dispatchEvent(l)},d.prototype.setPinned=function(i){this.pinned=!0===i||i===fe.PINNED_LEFT?fe.PINNED_LEFT:i===fe.PINNED_RIGHT?fe.PINNED_RIGHT:null},d.prototype.setFirstRightPinned=function(i,e){void 0===e&&(e="api"),this.firstRightPinned!==i&&(this.firstRightPinned=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_FIRST_RIGHT_PINNED_CHANGED,e)))},d.prototype.setLastLeftPinned=function(i,e){void 0===e&&(e="api"),this.lastLeftPinned!==i&&(this.lastLeftPinned=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_LAST_LEFT_PINNED_CHANGED,e)))},d.prototype.isFirstRightPinned=function(){return this.firstRightPinned},d.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},d.prototype.isPinned=function(){return this.pinned===fe.PINNED_LEFT||this.pinned===fe.PINNED_RIGHT},d.prototype.isPinnedLeft=function(){return this.pinned===fe.PINNED_LEFT},d.prototype.isPinnedRight=function(){return this.pinned===fe.PINNED_RIGHT},d.prototype.getPinned=function(){return this.pinned},d.prototype.setVisible=function(i,e){void 0===e&&(e="api");var s=!0===i;this.visible!==s&&(this.visible=s,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_VISIBLE_CHANGED,e)))},d.prototype.isVisible=function(){return this.visible},d.prototype.getColDef=function(){return this.colDef},d.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},d.prototype.getColId=function(){return this.colId},d.prototype.getId=function(){return this.getColId()},d.prototype.getUniqueId=function(){return this.getId()},d.prototype.getDefinition=function(){return this.colDef},d.prototype.getActualWidth=function(){return this.actualWidth},d.prototype.createBaseColDefParams=function(i){return{node:i,data:i.data,colDef:this.colDef,column:this,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}},d.prototype.getColSpan=function(i){if(Ce(this.colDef.colSpan))return 1;var e=this.createBaseColDefParams(i),s=this.colDef.colSpan(e);return Math.max(s,1)},d.prototype.getRowSpan=function(i){if(Ce(this.colDef.rowSpan))return 1;var e=this.createBaseColDefParams(i),s=this.colDef.rowSpan(e);return Math.max(s,1)},d.prototype.setActualWidth=function(i,e,s){void 0===e&&(e="api"),void 0===s&&(s=!1),null!=this.minWidth&&(i=Math.max(i,this.minWidth)),null!=this.maxWidth&&(i=Math.min(i,this.maxWidth)),this.actualWidth!==i&&(this.actualWidth=i,this.flex&&"flex"!==e&&"gridInitializing"!==e&&(this.flex=null),s||this.fireColumnWidthChangedEvent(e))},d.prototype.fireColumnWidthChangedEvent=function(i){this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_WIDTH_CHANGED,i))},d.prototype.isGreaterThanMax=function(i){return null!=this.maxWidth&&i>this.maxWidth},d.prototype.getMinWidth=function(){return this.minWidth},d.prototype.getMaxWidth=function(){return this.maxWidth},d.prototype.getFlex=function(){return this.flex||0},d.prototype.setFlex=function(i){this.flex!==i&&(this.flex=i)},d.prototype.setMinimum=function(i){void 0===i&&(i="api"),Fe(this.minWidth)&&this.setActualWidth(this.minWidth,i)},d.prototype.setRowGroupActive=function(i,e){void 0===e&&(e="api"),this.rowGroupActive!==i&&(this.rowGroupActive=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_ROW_GROUP_CHANGED,e)))},d.prototype.isRowGroupActive=function(){return this.rowGroupActive},d.prototype.setPivotActive=function(i,e){void 0===e&&(e="api"),this.pivotActive!==i&&(this.pivotActive=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_PIVOT_CHANGED,e)))},d.prototype.isPivotActive=function(){return this.pivotActive},d.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},d.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},d.prototype.setValueActive=function(i,e){void 0===e&&(e="api"),this.aggregationActive!==i&&(this.aggregationActive=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_VALUE_CHANGED,e)))},d.prototype.isValueActive=function(){return this.aggregationActive},d.prototype.isAllowPivot=function(){return!0===this.colDef.enablePivot},d.prototype.isAllowValue=function(){return!0===this.colDef.enableValue},d.prototype.isAllowRowGroup=function(){return!0===this.colDef.enableRowGroup},d.prototype.getMenuTabs=function(i){var e=this.getColDef().menuTabs;return null==e&&(e=i),e},d.prototype.isLockPosition=function(){return console.warn("AG Grid: since v21, col.isLockPosition() should not be used, please use col.getColDef().lockPosition instead."),!!this.colDef&&!!this.colDef.lockPosition},d.prototype.isLockVisible=function(){return console.warn("AG Grid: since v21, col.isLockVisible() should not be used, please use col.getColDef().lockVisible instead."),!!this.colDef&&!!this.colDef.lockVisible},d.prototype.isLockPinned=function(){return console.warn("AG Grid: since v21, col.isLockPinned() should not be used, please use col.getColDef().lockPinned instead."),!!this.colDef&&!!this.colDef.lockPinned},d.EVENT_MOVING_CHANGED="movingChanged",d.EVENT_LEFT_CHANGED="leftChanged",d.EVENT_WIDTH_CHANGED="widthChanged",d.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",d.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",d.EVENT_VISIBLE_CHANGED="visibleChanged",d.EVENT_FILTER_CHANGED="filterChanged",d.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",d.EVENT_SORT_CHANGED="sortChanged",d.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",d.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",d.EVENT_PIVOT_CHANGED="columnPivotChanged",d.EVENT_VALUE_CHANGED="columnValueChanged",Ou([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),Ou([H("columnUtils")],d.prototype,"columnUtils",void 0),Ou([H("columnApi")],d.prototype,"columnApi",void 0),Ou([H("gridApi")],d.prototype,"gridApi",void 0),Ou([H("context")],d.prototype,"context",void 0),Ou([Qe],d.prototype,"initialise",null),d}(),ai=function(){function d(i,e,s,l){this.displayedChildren=[],this.localEventService=new Js,this.groupId=e,this.instanceId=s,this.originalColumnGroup=i,this.pinned=l}return d.createUniqueId=function(i,e){return i+"_"+e},d.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},d.prototype.getParent=function(){return this.parent},d.prototype.setParent=function(i){this.parent=i},d.prototype.getUniqueId=function(){return d.createUniqueId(this.groupId,this.instanceId)},d.prototype.isEmptyGroup=function(){return 0===this.displayedChildren.length},d.prototype.isMoving=function(){var i=this.getOriginalColumnGroup().getLeafColumns();return!(!i||0===i.length)&&i.every(function(e){return e.isMoving()})},d.prototype.checkLeft=function(){if(this.displayedChildren.forEach(function(l){l instanceof d&&l.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsWrapper.isEnableRtl()){var e=zn(this.displayedChildren).getLeft();this.setLeft(e)}else{var s=this.displayedChildren[0].getLeft();this.setLeft(s)}else this.setLeft(null)},d.prototype.getLeft=function(){return this.left},d.prototype.getOldLeft=function(){return this.oldLeft},d.prototype.setLeft=function(i){this.oldLeft=i,this.left!==i&&(this.left=i,this.localEventService.dispatchEvent(this.createAgEvent(d.EVENT_LEFT_CHANGED)))},d.prototype.getPinned=function(){return this.pinned},d.prototype.createAgEvent=function(i){return{type:i}},d.prototype.addEventListener=function(i,e){this.localEventService.addEventListener(i,e)},d.prototype.removeEventListener=function(i,e){this.localEventService.removeEventListener(i,e)},d.prototype.getGroupId=function(){return this.groupId},d.prototype.getInstanceId=function(){return this.instanceId},d.prototype.isChildInThisGroupDeepSearch=function(i){var e=!1;return this.children.forEach(function(s){i===s&&(e=!0),s instanceof d&&s.isChildInThisGroupDeepSearch(i)&&(e=!0)}),e},d.prototype.getActualWidth=function(){var i=0;return this.displayedChildren&&this.displayedChildren.forEach(function(e){i+=e.getActualWidth()}),i},d.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var i=!1;return this.displayedChildren.forEach(function(e){e.isResizable()&&(i=!0)}),i},d.prototype.getMinWidth=function(){var i=0;return this.displayedChildren.forEach(function(e){i+=e.getMinWidth()||0}),i},d.prototype.addChild=function(i){this.children||(this.children=[]),this.children.push(i)},d.prototype.getDisplayedChildren=function(){return this.displayedChildren},d.prototype.getLeafColumns=function(){var i=[];return this.addLeafColumns(i),i},d.prototype.getDisplayedLeafColumns=function(){var i=[];return this.addDisplayedLeafColumns(i),i},d.prototype.getDefinition=function(){return this.originalColumnGroup.getColGroupDef()},d.prototype.getColGroupDef=function(){return this.originalColumnGroup.getColGroupDef()},d.prototype.isPadding=function(){return this.originalColumnGroup.isPadding()},d.prototype.isExpandable=function(){return this.originalColumnGroup.isExpandable()},d.prototype.isExpanded=function(){return this.originalColumnGroup.isExpanded()},d.prototype.setExpanded=function(i){this.originalColumnGroup.setExpanded(i)},d.prototype.addDisplayedLeafColumns=function(i){this.displayedChildren.forEach(function(e){e instanceof Mn?i.push(e):e instanceof d&&e.addDisplayedLeafColumns(i)})},d.prototype.addLeafColumns=function(i){this.children.forEach(function(e){e instanceof Mn?i.push(e):e instanceof d&&e.addLeafColumns(i)})},d.prototype.getChildren=function(){return this.children},d.prototype.getColumnGroupShow=function(){return this.originalColumnGroup.getColumnGroupShow()},d.prototype.getOriginalColumnGroup=function(){return this.originalColumnGroup},d.prototype.getPaddingLevel=function(){var i=this.getParent();return this.isPadding()&&i&&i.isPadding()?1+i.getPaddingLevel():0},d.prototype.calculateDisplayedColumns=function(){var i=this;this.displayedChildren=[];for(var e=this;null!=e&&e.isPadding();)e=e.getParent();if(!e||!e.originalColumnGroup.isExpandable())return this.displayedChildren=this.children,void this.localEventService.dispatchEvent(this.createAgEvent(d.EVENT_DISPLAYED_CHILDREN_CHANGED));this.children.forEach(function(l){if(!(l instanceof d)||l.displayedChildren&&l.displayedChildren.length)switch(l.getColumnGroupShow()){case d.HEADER_GROUP_SHOW_OPEN:e.originalColumnGroup.isExpanded()&&i.displayedChildren.push(l);break;case d.HEADER_GROUP_SHOW_CLOSED:e.originalColumnGroup.isExpanded()||i.displayedChildren.push(l);break;default:i.displayedChildren.push(l)}}),this.localEventService.dispatchEvent(this.createAgEvent(d.EVENT_DISPLAYED_CHILDREN_CHANGED))},d.HEADER_GROUP_SHOW_OPEN="open",d.HEADER_GROUP_SHOW_CLOSED="closed",d.EVENT_LEFT_CHANGED="leftChanged",d.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),d}(),mr=function(){function d(i,e,s,l){this.localEventService=new Js,this.expandable=!1,this.colGroupDef=i,this.groupId=e,this.expanded=!!i&&!!i.openByDefault,this.padding=s,this.level=l}return d.prototype.setOriginalParent=function(i){this.originalParent=i},d.prototype.getOriginalParent=function(){return this.originalParent},d.prototype.getLevel=function(){return this.level},d.prototype.isVisible=function(){return!!this.children&&this.children.some(function(i){return i.isVisible()})},d.prototype.isPadding=function(){return this.padding},d.prototype.setExpanded=function(i){this.expanded=void 0!==i&&i,this.localEventService.dispatchEvent({type:d.EVENT_EXPANDED_CHANGED})},d.prototype.isExpandable=function(){return this.expandable},d.prototype.isExpanded=function(){return this.expanded},d.prototype.getGroupId=function(){return this.groupId},d.prototype.getId=function(){return this.getGroupId()},d.prototype.setChildren=function(i){this.children=i},d.prototype.getChildren=function(){return this.children},d.prototype.getColGroupDef=function(){return this.colGroupDef},d.prototype.getLeafColumns=function(){var i=[];return this.addLeafColumns(i),i},d.prototype.addLeafColumns=function(i){!this.children||this.children.forEach(function(e){e instanceof Mn?i.push(e):e instanceof d&&e.addLeafColumns(i)})},d.prototype.getColumnGroupShow=function(){var i=this.colGroupDef;if(i)return i.columnGroupShow},d.prototype.setupExpandable=function(){var i=this;this.setExpandable(),this.getLeafColumns().forEach(function(e){return e.addEventListener(Mn.EVENT_VISIBLE_CHANGED,i.onColumnVisibilityChanged.bind(i))})},d.prototype.setExpandable=function(){if(!this.isPadding()){for(var i=!1,e=!1,s=!1,l=this.findChildrenRemovingPadding(),c=0,h=l.length;c<h;c++){var m=l[c];if(m.isVisible()){var w=m.getColumnGroupShow();w===ai.HEADER_GROUP_SHOW_OPEN?(i=!0,s=!0):w===ai.HEADER_GROUP_SHOW_CLOSED?(e=!0,s=!0):(i=!0,e=!0)}}var R=i&&e&&s;this.expandable!==R&&(this.expandable=R,this.localEventService.dispatchEvent({type:d.EVENT_EXPANDABLE_CHANGED}))}},d.prototype.findChildrenRemovingPadding=function(){var i=[];return function s(l){l.forEach(function(c){c instanceof d&&c.isPadding()?s(c.children):i.push(c)})}(this.children),i},d.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},d.prototype.addEventListener=function(i,e){this.localEventService.addEventListener(i,e)},d.prototype.removeEventListener=function(i,e){this.localEventService.removeEventListener(i,e)},d.EVENT_EXPANDED_CHANGED="expandedChanged",d.EVENT_EXPANDABLE_CHANGED="expandableChanged",d}(),__={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},Ov="__ag_Grid_Stop_Propagation",C_=["touchstart","touchend","touchmove","touchcancel"],Ff={};function so(d){d[Ov]=!0}function Da(d){return!0===d[Ov]}var Pv=function(){var d={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(s){if("boolean"==typeof Ff[s])return Ff[s];var l=document.createElement(d[s]||"div"),c=(s="on"+s)in l;return c||(l.setAttribute(s,"return;"),c="function"==typeof l[s]),Ff[s]=c}}();function Nf(d,i,e){for(var s=Pu(i);s;){var l=d.getDomData(s,e);if(l)return l;s=s.parentElement}return null}function Pu(d){return d.target||d.srcElement}function kf(d,i){return!(!i||!d)&&Iv(i).indexOf(d)>=0}function w_(d){for(var i=[],e=Pu(d);e;)i.push(e),e=e.parentElement;return i}function Iv(d){var i=d;return i.deepPath?i.deepPath():i.path?i.path:i.composedPath?i.composedPath():i.__agGridEventPath?i.__agGridEventPath:w_(d)}function $r(d,i,e,s){var l=xn(C_,e);d&&d.addEventListener&&d.addEventListener(i,e,s,l?{passive:!0}:void 0)}var zc=Object.freeze({__proto__:null,stopPropagationForAgGrid:so,isStopPropagationForAgGrid:Da,isEventSupported:Pv,getCtrlForEvent:Nf,addChangeListener:function(d,i){d.addEventListener("changed",i),d.addEventListener("paste",i),d.addEventListener("input",i),d.addEventListener("keydown",i),d.addEventListener("keyup",i)},getTarget:Pu,isElementInEventPath:kf,createEventPath:w_,addAgGridEventPath:function(d){d.__agGridEventPath=Iv(d)},getEventPath:Iv,addSafePassiveEventListener:$r}),So=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ke=function(){function d(){var i=this;this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.isAlive=function(){return!i.destroyed}}return d.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},d.prototype.getContext=function(){return this.context},d.prototype.destroy=function(){this.destroyFunctions.forEach(function(i){return i()}),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:d.EVENT_DESTROYED})},d.prototype.addEventListener=function(i,e){this.localEventService||(this.localEventService=new Js),this.localEventService.addEventListener(i,e)},d.prototype.removeEventListener=function(i,e){this.localEventService&&this.localEventService.removeEventListener(i,e)},d.prototype.dispatchEventAsync=function(i){var e=this;window.setTimeout(function(){return e.dispatchEvent(i)},0)},d.prototype.dispatchEvent=function(i){this.localEventService&&this.localEventService.dispatchEvent(i)},d.prototype.addManagedListener=function(i,e,s){var l=this;if(!this.destroyed){i instanceof HTMLElement?$r(this.getFrameworkOverrides(),i,e,s):i.addEventListener(e,s);var c=function h(){return i.removeEventListener(e,s),l.destroyFunctions=l.destroyFunctions.filter(function(m){return m!==h}),null};return this.destroyFunctions.push(c),c}},d.prototype.addDestroyFunc=function(i){this.isAlive()?this.destroyFunctions.push(i):i()},d.prototype.createManagedBean=function(i,e){var s=this.createBean(i,e);return this.addDestroyFunc(this.destroyBean.bind(this,i,e)),s},d.prototype.createBean=function(i,e,s){return(e||this.getContext()).createBean(i,s)},d.prototype.destroyBean=function(i,e){return(e||this.getContext()).destroyBean(i)},d.prototype.destroyBeans=function(i,e){var s=this;return i&&Wt(i,function(l){return s.destroyBean(l,e)}),[]},d.EVENT_DESTROYED="destroyed",So([H("frameworkOverrides")],d.prototype,"frameworkOverrides",void 0),So([H("context")],d.prototype,"context",void 0),So([H("eventService")],d.prototype,"eventService",void 0),So([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),So([Fi],d.prototype,"destroy",null),d}(),FE=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Lv=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Fv=function(d,i){return function(e,s){i(e,s,d)}},S_=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return FE(i,d),i.prototype.setBeans=function(e){this.logger=e.create("ColumnFactory")},i.prototype.createColumnTree=function(e,s,l){var c=new hi,h=this.extractExistingTreeData(l),m=h.existingCols,w=h.existingGroups;c.addExistingKeys(h.existingColKeys);var T=this.recursivelyCreateColumns(e,0,s,m,c,w),L=this.findMaxDept(T,0);this.logger.log("Number of levels for grouped columns is "+L);var U=this.balanceColumnTree(T,0,L,c);return this.columnUtils.depthFirstOriginalTreeSearch(null,U,function(oe,Te){oe instanceof mr&&oe.setupExpandable(),oe.setOriginalParent(Te)}),{columnTree:U,treeDept:L}},i.prototype.extractExistingTreeData=function(e){var s=[],l=[],c=[];return e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,function(h){if(h instanceof mr)l.push(h);else{var w=h;c.push(w.getId()),s.push(w)}}),{existingCols:s,existingGroups:l,existingColKeys:c}},i.prototype.createForAutoGroups=function(e,s){var l=this,c=[];return e.forEach(function(h){var m=l.createAutoGroupTreeItem(s,h);c.push(m)}),c},i.prototype.createAutoGroupTreeItem=function(e,s){for(var c=s,h=this.findDepth(e)-1;h>=0;h--){var m=new mr(null,"FAKE_PATH_"+s.getId()+"}_"+h,!0,h);this.context.createBean(m),m.setChildren([c]),c.setOriginalParent(m),c=m}return c},i.prototype.findDepth=function(e){for(var s=0,l=e;l&&l[0]&&l[0]instanceof mr;)s++,l=l[0].getChildren();return s},i.prototype.balanceColumnTree=function(e,s,l,c){for(var h=[],m=0;m<e.length;m++){var w=e[m];if(w instanceof mr){var R=w,T=this.balanceColumnTree(R.getChildren(),s+1,l,c);R.setChildren(T),h.push(R)}else{for(var L=void 0,U=void 0,K=l-1;K>=s;K--){var Q=c.getUniqueKey(null,null),oe=this.createMergedColGroupDef(null),Te=new mr(oe,Q,!0,s);this.context.createBean(Te),U&&U.setChildren([Te]),U=Te,L||(L=U)}if(L&&U){if(h.push(L),e.some(function(Ve){return Ve instanceof mr})){U.setChildren([w]);continue}U.setChildren(e);break}h.push(w)}}return h},i.prototype.findMaxDept=function(e,s){for(var l=s,c=0;c<e.length;c++){var h=e[c];if(h instanceof mr){var w=this.findMaxDept(h.getChildren(),s+1);l<w&&(l=w)}}return l},i.prototype.recursivelyCreateColumns=function(e,s,l,c,h,m){var w=this,R=[];return e&&e.forEach(function(T){var L;L=w.isColumnGroup(T)?w.createColumnGroup(l,T,s,c,h,m):w.createColumn(l,T,c,h),R.push(L)}),R},i.prototype.createColumnGroup=function(e,s,l,c,h,m){var w=this.createMergedColGroupDef(s),R=h.getUniqueKey(w.groupId||null,null),T=new mr(w,R,!1,l);this.context.createBean(T);var L=this.findExistingGroup(s,m);L&&L.isExpanded()&&T.setExpanded(!0);var U=this.recursivelyCreateColumns(w.children,l+1,e,c,h,m);return T.setChildren(U),T},i.prototype.createMergedColGroupDef=function(e){var s={};return ii(s,this.gridOptionsWrapper.getDefaultColGroupDef()),ii(s,e),this.checkForDeprecatedItems(s),s},i.prototype.createColumn=function(e,s,l,c){var h=this.mergeColDefs(s);this.checkForDeprecatedItems(h);var m=this.findExistingColumn(s,l);if(m)m.setColDef(h,s),this.applyColumnState(m,h);else{var w=c.getUniqueKey(h.colId,h.field);m=new Mn(h,s,w,e),this.context.createBean(m)}return m},i.prototype.applyColumnState=function(e,s){var l=k(s.flex);if(void 0!==l&&e.setFlex(l),e.getFlex()<=0){var h=k(s.width);if(null!=h)e.setActualWidth(h);else{var m=e.getActualWidth();e.setActualWidth(m)}}void 0!==s.sort&&e.setSort(s.sort==fe.SORT_ASC||s.sort==fe.SORT_DESC?s.sort:void 0);var w=k(s.sortIndex);void 0!==w&&e.setSortIndex(w);var R=oo(s.hide);void 0!==R&&e.setVisible(!R),void 0!==s.pinned&&e.setPinned(s.pinned)},i.prototype.findExistingColumn=function(e,s){var l=Li(s,function(c){var h=c.getUserProvidedColDef();if(!h)return!1;var w=null!=e.field;return null!=e.colId?c.getId()===e.colId:w?h.field===e.field:h===e});return s&&l&&ri(s,l),l},i.prototype.findExistingGroup=function(e,s){var l=Li(s,function(c){return!(!c.getColGroupDef()||null==e.groupId||c.getId()!==e.groupId)});return l&&ri(s,l),l},i.prototype.mergeColDefs=function(e){var s={},l=this.gridOptionsWrapper.getDefaultColDef();ao(s,l,!1,!0);var c=e.type;return c||(c=l&&l.type),c&&this.assignColumnTypes(c,s),ao(s,e,!1,!0),s},i.prototype.assignColumnTypes=function(e,s){var l=[];if(e instanceof Array)e.some(function(w){return"string"!=typeof w})?console.warn("ag-grid: if colDef.type is supplied an array it should be of type 'string[]'"):l=e;else{if("string"!=typeof e)return void console.warn("ag-grid: colDef.type should be of type 'string' | 'string[]'");l=e.split(",")}var h=ii({},__);Fn(this.gridOptionsWrapper.getColumnTypes()||{},function(w,R){w in h?console.warn("AG Grid: the column type '"+w+"' is a default column type and cannot be overridden."):h[w]=R}),l.forEach(function(w){var R=h[w.trim()];R?ao(s,R,!1,!0):console.warn("ag-grid: colDef.type '"+w+"' does not correspond to defined gridOptions.columnTypes")})},i.prototype.checkForDeprecatedItems=function(e){if(e){var s=e;void 0!==s.group&&console.warn("ag-grid: colDef.group is invalid, please check documentation on how to do grouping as it changed in version 3"),void 0!==s.headerGroup&&console.warn("ag-grid: colDef.headerGroup is invalid, please check documentation on how to do grouping as it changed in version 3"),void 0!==s.headerGroupShow&&console.warn("ag-grid: colDef.headerGroupShow is invalid, should be columnGroupShow, please check documentation on how to do grouping as it changed in version 3"),void 0!==s.suppressRowGroup&&console.warn("ag-grid: colDef.suppressRowGroup is deprecated, please use colDef.type instead"),void 0!==s.suppressAggregation&&console.warn("ag-grid: colDef.suppressAggregation is deprecated, please use colDef.type instead"),(s.suppressRowGroup||s.suppressAggregation)&&console.warn("ag-grid: colDef.suppressAggregation and colDef.suppressRowGroup are deprecated, use allowRowGroup, allowPivot and allowValue instead"),s.displayName&&(console.warn("ag-grid: Found displayName "+s.displayName+", please use headerName instead, displayName is deprecated."),s.headerName=s.displayName)}},i.prototype.isColumnGroup=function(e){return void 0!==e.children},Lv([H("columnUtils")],i.prototype,"columnUtils",void 0),Lv([Fv(0,Ni("loggerFactory"))],i.prototype,"setBeans",null),Lv([vt("columnFactory")],i)}(Ke),$=function(){function d(){}return d.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",d.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",d.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",d.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",d.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",d.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",d.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",d.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",d.EVENT_COLUMN_MOVED="columnMoved",d.EVENT_COLUMN_VISIBLE="columnVisible",d.EVENT_COLUMN_PINNED="columnPinned",d.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",d.EVENT_COLUMN_RESIZED="columnResized",d.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",d.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",d.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",d.EVENT_ROW_GROUP_OPENED="rowGroupOpened",d.EVENT_ROW_DATA_CHANGED="rowDataChanged",d.EVENT_ROW_DATA_UPDATED="rowDataUpdated",d.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",d.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",d.EVENT_CHART_CREATED="chartCreated",d.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",d.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",d.EVENT_CHART_DESTROYED="chartDestroyed",d.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",d.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",d.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",d.EVENT_MODEL_UPDATED="modelUpdated",d.EVENT_PASTE_START="pasteStart",d.EVENT_PASTE_END="pasteEnd",d.EVENT_FILL_START="fillStart",d.EVENT_FILL_END="fillEnd",d.EVENT_CELL_CLICKED="cellClicked",d.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",d.EVENT_CELL_MOUSE_DOWN="cellMouseDown",d.EVENT_CELL_CONTEXT_MENU="cellContextMenu",d.EVENT_CELL_VALUE_CHANGED="cellValueChanged",d.EVENT_ROW_VALUE_CHANGED="rowValueChanged",d.EVENT_CELL_FOCUSED="cellFocused",d.EVENT_ROW_SELECTED="rowSelected",d.EVENT_SELECTION_CHANGED="selectionChanged",d.EVENT_CELL_KEY_DOWN="cellKeyDown",d.EVENT_CELL_KEY_PRESS="cellKeyPress",d.EVENT_CELL_MOUSE_OVER="cellMouseOver",d.EVENT_CELL_MOUSE_OUT="cellMouseOut",d.EVENT_FILTER_CHANGED="filterChanged",d.EVENT_FILTER_MODIFIED="filterModified",d.EVENT_FILTER_OPENED="filterOpened",d.EVENT_SORT_CHANGED="sortChanged",d.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",d.EVENT_ROW_CLICKED="rowClicked",d.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",d.EVENT_GRID_READY="gridReady",d.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",d.EVENT_VIEWPORT_CHANGED="viewportChanged",d.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",d.EVENT_FIRST_DATA_RENDERED="firstDataRendered",d.EVENT_DRAG_STARTED="dragStarted",d.EVENT_DRAG_STOPPED="dragStopped",d.EVENT_CHECKBOX_CHANGED="checkboxChanged",d.EVENT_ROW_EDITING_STARTED="rowEditingStarted",d.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",d.EVENT_CELL_EDITING_STARTED="cellEditingStarted",d.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",d.EVENT_BODY_SCROLL="bodyScroll",d.EVENT_BODY_SCROLL_END="bodyScrollEnd",d.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",d.EVENT_PAGINATION_CHANGED="paginationChanged",d.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",d.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",d.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",d.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",d.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",d.EVENT_FLASH_CELLS="flashCells",d.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",d.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",d.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",d.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",d.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",d.EVENT_ROW_DRAG_ENTER="rowDragEnter",d.EVENT_ROW_DRAG_MOVE="rowDragMove",d.EVENT_ROW_DRAG_LEAVE="rowDragLeave",d.EVENT_ROW_DRAG_END="rowDragEnd",d.EVENT_POPUP_TO_FRONT="popupToFront",d.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",d.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",d.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",d.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",d.EVENT_KEYBOARD_FOCUS="keyboardFocus",d.EVENT_MOUSE_FOCUS="mouseFocus",d.EVENT_STORE_UPDATED="storeUpdated",d}(),Nv=function(){function d(){this.existingIds={}}return d.prototype.getInstanceIdForKey=function(i){var s,e=this.existingIds[i];return this.existingIds[i]=s="number"!=typeof e?0:e+1,s},d}(),E_=/[&<>"']/g,b_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function x_(d,i){if(i=Math.floor(i),0===d.length||0===i)return"";var e=d.length*i;for(i=Math.floor(Math.log(i)/Math.log(2));i;)d+=d,i--;return d+d.substring(0,e-d.length)}function kv(d,i,e){return d.length>i?d:((i-=d.length)>e.length&&(e+=x_(e,i/e.length)),e.slice(0,i)+d)}function R_(d){return null==d?null:d.replace(/([A-Z])/g,function(i){return"-"+i[0].toLowerCase()})}function Gv(d){return null==d?null:d.replace(/-([a-z])/g,function(i){return i[1].toUpperCase()})}function T_(d){return d[0].toUpperCase()+d.substr(1).toLowerCase()}function oa(d){return null==d?null:d.toString().toString().replace(E_,function(i){return b_[i]})}function Xr(d){return d&&null!=d?d.replace(/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g,"$1$4 $2$3$5").replace("."," ").split(" ").map(function(s){return s.substring(0,1).toUpperCase()+(s.length>1?s.substring(1,s.length):"")}).join(" "):null}function Bv(d,i){return d===i||null!=d&&d.slice(0,i.length)===i}var Gf=Object.freeze({__proto__:null,utf8_encode:function(d){var i=String.fromCharCode;function l(L,U){return i(L>>U&63|128)}function c(L){if(L>=0&&L<=31&&10!==L)return"_x"+kv(L.toString(16).toUpperCase(),4,"0")+"_";if(0==(4294967168&L))return i(L);var Q="";return 0==(4294965248&L)?Q=i(L>>6&31|192):0==(4294901760&L)?(function(L){if(L>=55296&&L<=57343)throw Error("Lone surrogate U+"+L.toString(16).toUpperCase()+" is not a scalar value")}(L),Q=i(L>>12&15|224),Q+=l(L,6)):0==(4292870144&L)&&(Q=i(L>>18&7|240),Q+=l(L,12),Q+=l(L,6)),Q+i(63&L|128)}for(var h=function(L){var U=[];if(!L)return[];for(var oe,Te,K=L.length,Q=0;Q<K;)(oe=L.charCodeAt(Q++))>=55296&&oe<=56319&&Q<K?56320==(64512&(Te=L.charCodeAt(Q++)))?U.push(((1023&oe)<<10)+(1023&Te)+65536):(U.push(oe),Q--):U.push(oe);return U}(d),m=h.length,w=-1,T="";++w<m;)T+=c(h[w]);return T},stringRepeat:x_,padStart:kv,camelCaseToHyphen:R_,hyphenToCamelCase:Gv,capitalise:T_,escapeString:oa,camelCaseToHumanText:Xr,startsWith:Bv});function Aa(d){var i=new Map;return d.forEach(function(e){return i.set(e[0],e[1])}),i}var Vv=Object.freeze({__proto__:null,convertToMap:Aa,mapById:function(d,i){var e=new Map;return d.forEach(function(s){return e.set(i(s),s)}),e},keys:function(d){var i=[];return d.forEach(function(e,s){return i.push(s)}),i}}),Bn=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Br=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},kE=function(d,i){return function(e,s){i(e,s,d)}},fn=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.primaryHeaderRowCount=0,e.secondaryHeaderRowCount=0,e.secondaryColumnsPresent=!1,e.gridHeaderRowCount=0,e.displayedColumnsLeft=[],e.displayedColumnsRight=[],e.displayedColumnsCenter=[],e.displayedColumns=[],e.displayedColumnsAndGroupsMap={},e.viewportColumns=[],e.viewportColumnsCenter=[],e.autoHeightActiveAtLeastOnce=!1,e.rowGroupColumns=[],e.valueColumns=[],e.pivotColumns=[],e.ready=!1,e.autoGroupsNeedBuilding=!1,e.forceRecreateAutoGroups=!1,e.pivotMode=!1,e.bodyWidth=0,e.leftWidth=0,e.rightWidth=0,e.bodyWidthDirty=!0,e.colDefVersion=0,e.flexColsCalculatedAtLestOnce=!1,e}return Bn(i,d),i.prototype.init=function(){this.suppressColumnVirtualisation=this.gridOptionsWrapper.isSuppressColumnVirtualisation();var e=this.gridOptionsWrapper.isPivotMode();this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.addManagedListener(this.gridOptionsWrapper,"autoGroupColumnDef",this.onAutoGroupColumnDefChanged.bind(this))},i.prototype.onAutoGroupColumnDefChanged=function(){this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged")},i.prototype.getColDefVersion=function(){return this.colDefVersion},i.prototype.setColumnDefs=function(e,s){var l=this;void 0===s&&(s="api");var c=!!this.columnDefs;this.colDefVersion++;var h=this.compareColumnStatesAndRaiseEvents(s);this.columnDefs=e,this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var m=this.primaryColumns,R=this.columnFactory.createColumnTree(e,!0,this.primaryColumnTree);this.primaryColumnTree=R.columnTree,this.primaryHeaderRowCount=R.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(function(T){return l.primaryColumnsMap[T.getId()]=T}),this.extractRowGroupColumns(s,m),this.extractPivotColumns(s,m),this.extractValueColumns(s,m),this.ready=!0,this.updateGridColumns(),c&&this.gridColsArePrimary&&!this.gridOptionsWrapper.isMaintainColumnOrder()&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(s),this.checkViewportColumns(),this.dispatchEverythingChanged(s),h(),this.dispatchNewColumnsLoaded()},i.prototype.dispatchNewColumnsLoaded=function(){this.eventService.dispatchEvent({type:$.EVENT_NEW_COLUMNS_LOADED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.dispatchEverythingChanged=function(e){void 0===e&&(e="api"),this.eventService.dispatchEvent({type:$.EVENT_COLUMN_EVERYTHING_CHANGED,api:this.gridApi,columnApi:this.columnApi,source:e})},i.prototype.orderGridColumnsLikePrimary=function(){var e=this,s=this.primaryColumns;!s||this.gridColumns.sort(function(l,c){var h=s.indexOf(l),m=s.indexOf(c),w=h>=0,R=m>=0;return w&&R?h-m:w?1:R?-1:e.gridColumns.indexOf(l)-e.gridColumns.indexOf(c)})},i.prototype.getAllDisplayedAutoHeightCols=function(){return this.displayedAutoHeightCols},i.prototype.setViewport=function(){this.gridOptionsWrapper.isEnableRtl()?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},i.prototype.getDisplayedColumnsStartingAt=function(e){for(var s=e,l=[];null!=s;)l.push(s),s=this.getDisplayedColAfter(s);return l},i.prototype.checkViewportColumns=function(){if(null!=this.displayedColumnsCenter){var e=this.viewportColumns.map(function(c){return c.getId()}).join("#");this.extractViewport(),e!==this.viewportColumns.map(function(c){return c.getId()}).join("#")&&this.eventService.dispatchEvent({type:$.EVENT_VIRTUAL_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi})}},i.prototype.setViewportPosition=function(e,s){(e!==this.scrollWidth||s!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=s,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns())},i.prototype.isPivotMode=function(){return this.pivotMode},i.prototype.isPivotSettingAllowed=function(e){return!e||!this.gridOptionsWrapper.isTreeData()||(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1)},i.prototype.setPivotMode=function(e,s){void 0===s&&(s="api"),e!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)&&(this.pivotMode=e,this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(s),this.eventService.dispatchEvent({type:$.EVENT_COLUMN_PIVOT_MODE_CHANGED,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.getSecondaryPivotColumn=function(e,s){if(!this.secondaryColumnsPresent||!this.secondaryColumns)return null;var l=this.getPrimaryColumn(s),c=null;return this.secondaryColumns.forEach(function(h){var m=h.getColDef().pivotKeys,w=h.getColDef().pivotValueColumn;Ar(m,e)&&w===l&&(c=h)}),c},i.prototype.setBeans=function(e){this.logger=e.create("columnModel")},i.prototype.setFirstRightAndLastLeftPinned=function(e){var s,l;this.gridOptionsWrapper.isEnableRtl()?(s=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,l=this.displayedColumnsRight?zn(this.displayedColumnsRight):null):(s=this.displayedColumnsLeft?zn(this.displayedColumnsLeft):null,l=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(function(c){c.setLastLeftPinned(c===s,e),c.setFirstRightPinned(c===l,e)})},i.prototype.autoSizeColumns=function(e,s,l){var c=this;void 0===l&&(l="api"),this.animationFrameService.flushAllFrames();var h=[],m=-1;for(null==s&&(s=this.gridOptionsWrapper.isSkipHeaderOnAutoSize());0!==m;)m=0,this.actionOnGridColumns(e,function(w){if(h.indexOf(w)>=0)return!1;var R=c.autoWidthCalculator.getPreferredWidthForColumn(w,s);if(R>0){var T=c.normaliseColumnWidth(w,R);w.setActualWidth(T,l),h.push(w),m++}return!0},l);this.fireColumnResizedEvent(h,!0,"autosizeColumns")},i.prototype.fireColumnResizedEvent=function(e,s,l,c){void 0===c&&(c=null),e&&e.length&&this.eventService.dispatchEvent({type:$.EVENT_COLUMN_RESIZED,columns:e,column:1===e.length?e[0]:null,flexColumns:c,finished:s,api:this.gridApi,columnApi:this.columnApi,source:l})},i.prototype.autoSizeColumn=function(e,s,l){void 0===l&&(l="api"),e&&this.autoSizeColumns([e],s,l)},i.prototype.autoSizeAllColumns=function(e,s){void 0===s&&(s="api");var l=this.getAllDisplayedColumns();this.autoSizeColumns(l,e,s)},i.prototype.getColumnsFromTree=function(e){var s=[];return function c(h){for(var m=0;m<h.length;m++){var w=h[m];w instanceof Mn?s.push(w):w instanceof mr&&c(w.getChildren())}}(e),s},i.prototype.getAllDisplayedTrees=function(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null},i.prototype.getPrimaryColumnTree=function(){return this.primaryColumnTree},i.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},i.prototype.getDisplayedTreeLeft=function(){return this.displayedTreeLeft},i.prototype.getDisplayedTreeRight=function(){return this.displayedTreeRight},i.prototype.getDisplayedTreeCentre=function(){return this.displayedTreeCentre},i.prototype.isColumnDisplayed=function(e){return this.getAllDisplayedColumns().indexOf(e)>=0},i.prototype.getAllDisplayedColumns=function(){return this.displayedColumns},i.prototype.getViewportColumns=function(){return this.viewportColumns},i.prototype.getDisplayedLeftColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft},i.prototype.getDisplayedRightColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight},i.prototype.getDisplayedColumnsForRow=function(e,s,l,c){for(var R,h=[],m=null,w=function(U){var Pe,K=s[U],Q=s.length-U,oe=Math.min(K.getColSpan(e),Q),Te=[K];if(oe>1){for(var He=oe-1,Ve=1;Ve<=He;Ve++)Te.push(s[U+Ve]);U+=He}l?(Pe=!1,Te.forEach(function(Re){l(Re)&&(Pe=!0)})):Pe=!0,Pe&&(0===h.length&&m&&c&&c(K)&&h.push(m),h.push(K)),m=K,R=U},T=0;T<s.length;T++)w(T),T=R;return h},i.prototype.getViewportCenterColumnsForRow=function(e){var s=this;if(!this.colSpanActive)return this.viewportColumnsCenter;var c=this.suppressColumnVirtualisation?null:this.isColumnInViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,c,function(m){var w=m.getLeft();return Fe(w)&&w>s.viewportLeft})},i.prototype.getAriaColumnIndex=function(e){return this.getAllGridColumns().indexOf(e)+1},i.prototype.isColumnInViewport=function(e){if(e.getColDef().autoHeight)return!0;var s=e.getLeft()||0,l=s+e.getActualWidth(),c=this.viewportLeft-200,h=this.viewportRight+200;return!(s<c&&l<c||s>h&&l>h)},i.prototype.getDisplayedColumnsLeftWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsLeft)},i.prototype.getDisplayedColumnsRightWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsRight)},i.prototype.updatePrimaryColumnList=function(e,s,l,c,h,m){var w=this;if(void 0===m&&(m="api"),e&&!ni(e)){var R=!1;e.forEach(function(L){var U=w.getPrimaryColumn(L);if(U){if(l){if(s.indexOf(U)>=0)return;s.push(U)}else{if(s.indexOf(U)<0)return;ri(s,U)}c(U),R=!0}}),R&&(this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(m),this.eventService.dispatchEvent({type:h,columns:s,column:1===s.length?s[0]:null,api:this.gridApi,columnApi:this.columnApi,source:m}))}},i.prototype.setRowGroupColumns=function(e,s){void 0===s&&(s="api"),this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.setRowGroupActive.bind(this),s)},i.prototype.setRowGroupActive=function(e,s,l){e!==s.isRowGroupActive()&&(s.setRowGroupActive(e,l),!e&&!this.gridOptionsWrapper.isSuppressMakeColumnVisibleAfterUnGroup()&&s.setVisible(!0,l))},i.prototype.addRowGroupColumn=function(e,s){void 0===s&&(s="api"),e&&this.addRowGroupColumns([e],s)},i.prototype.addRowGroupColumns=function(e,s){void 0===s&&(s="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),$.EVENT_COLUMN_ROW_GROUP_CHANGED,s)},i.prototype.removeRowGroupColumns=function(e,s){void 0===s&&(s="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),$.EVENT_COLUMN_ROW_GROUP_CHANGED,s)},i.prototype.removeRowGroupColumn=function(e,s){void 0===s&&(s="api"),e&&this.removeRowGroupColumns([e],s)},i.prototype.addPivotColumns=function(e,s){void 0===s&&(s="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!0,function(l){return l.setPivotActive(!0,s)},$.EVENT_COLUMN_PIVOT_CHANGED,s)},i.prototype.setPivotColumns=function(e,s){void 0===s&&(s="api"),this.setPrimaryColumnList(e,this.pivotColumns,$.EVENT_COLUMN_PIVOT_CHANGED,function(l,c){c.setPivotActive(l,s)},s)},i.prototype.addPivotColumn=function(e,s){void 0===s&&(s="api"),this.addPivotColumns([e],s)},i.prototype.removePivotColumns=function(e,s){void 0===s&&(s="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!1,function(l){return l.setPivotActive(!1,s)},$.EVENT_COLUMN_PIVOT_CHANGED,s)},i.prototype.removePivotColumn=function(e,s){void 0===s&&(s="api"),this.removePivotColumns([e],s)},i.prototype.setPrimaryColumnList=function(e,s,l,c,h){var m=this;s.length=0,Fe(e)&&e.forEach(function(w){var R=m.getPrimaryColumn(w);R&&s.push(R)}),(this.primaryColumns||[]).forEach(function(w){var R=s.indexOf(w)>=0;c(R,w)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(h),this.fireColumnEvent(l,s,h)},i.prototype.setValueColumns=function(e,s){void 0===s&&(s="api"),this.setPrimaryColumnList(e,this.valueColumns,$.EVENT_COLUMN_VALUE_CHANGED,this.setValueActive.bind(this),s)},i.prototype.setValueActive=function(e,s,l){if(e!==s.isValueActive()&&(s.setValueActive(e,l),e&&!s.getAggFunc())){var c=this.aggFuncService.getDefaultAggFunc(s);s.setAggFunc(c)}},i.prototype.addValueColumns=function(e,s){void 0===s&&(s="api"),this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),$.EVENT_COLUMN_VALUE_CHANGED,s)},i.prototype.addValueColumn=function(e,s){void 0===s&&(s="api"),e&&this.addValueColumns([e],s)},i.prototype.removeValueColumn=function(e,s){void 0===s&&(s="api"),this.removeValueColumns([e],s)},i.prototype.removeValueColumns=function(e,s){void 0===s&&(s="api"),this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),$.EVENT_COLUMN_VALUE_CHANGED,s)},i.prototype.normaliseColumnWidth=function(e,s){var l=e.getMinWidth();Fe(l)&&s<l&&(s=l);var c=e.getMaxWidth();return Fe(c)&&e.isGreaterThanMax(s)&&(s=c),s},i.prototype.getPrimaryOrGridColumn=function(e){return this.getPrimaryColumn(e)||this.getGridColumn(e)},i.prototype.setColumnWidths=function(e,s,l,c){var h=this;void 0===c&&(c="api");var m=[];e.forEach(function(w){var R=h.getPrimaryOrGridColumn(w.key);if(R&&(m.push({width:w.newWidth,ratios:[1],columns:[R]}),"shift"===h.gridOptionsWrapper.getColResizeDefault()&&(s=!s),s)){var L=h.getDisplayedColAfter(R);if(!L)return;var U=R.getActualWidth()-w.newWidth,K=L.getActualWidth()+U;m.push({width:K,ratios:[1],columns:[L]})}}),0!==m.length&&this.resizeColumnSets(m,l,c)},i.prototype.checkMinAndMaxWidthsForSet=function(e){var l=e.width,c=0,h=0,m=!0;return e.columns.forEach(function(T){var L=T.getMinWidth();c+=L||0;var U=T.getMaxWidth();Fe(U)&&U>0?h+=U:m=!1}),l>=c&&(!m||l<=h)},i.prototype.resizeColumnSets=function(e,s,l){var c=this;if(!e||e.every(function(K){return c.checkMinAndMaxWidthsForSet(K)})){var w=[],R=[];e.forEach(function(K){var Q=K.width,oe=K.columns,Te=K.ratios,He={},Ve={};oe.forEach(function(Gt){return R.push(Gt)});for(var Pe=!0,Ze=0,Re=function(){if(++Ze>1e3)return console.error("AG Grid: infinite loop in resizeColumnSets"),"break";Pe=!1;var mn=[],Xn=0,er=Q;oe.forEach(function(lr,eo){Ve[lr.getId()]?er-=He[lr.getId()]:(mn.push(lr),Xn+=Te[eo])});var or=1/Xn;mn.forEach(function(lr,eo){var zr;eo===mn.length-1?zr=er:(zr=Math.round(Te[eo]*Q*or),er-=zr);var lh=lr.getMinWidth(),Ud=lr.getMaxWidth();Fe(lh)&&zr<lh?(zr=lh,Ve[lr.getId()]=!0,Pe=!0):Fe(Ud)&&Ud>0&&zr>Ud&&(zr=Ud,Ve[lr.getId()]=!0,Pe=!0),He[lr.getId()]=zr})};Pe&&"break"!==Re(););oe.forEach(function(Gt){var mn=He[Gt.getId()];Gt.getActualWidth()!==mn&&(Gt.setActualWidth(mn,l),w.push(Gt))})});var T=w.length>0,L=this.refreshFlexedColumns({resizingCols:R,skipSetLeft:!0});T&&(this.setLeftValues(l),this.updateBodyWidths(),this.checkViewportColumns());var U=R.concat(L);(T||s)&&this.fireColumnResizedEvent(U,s,l,L)}else s&&this.fireColumnResizedEvent(e&&e.length>0?e[0].columns:null,s,l)},i.prototype.setColumnAggFunc=function(e,s,l){if(void 0===l&&(l="api"),e){var c=this.getPrimaryColumn(e);!c||(c.setAggFunc(s),this.fireColumnEvent($.EVENT_COLUMN_VALUE_CHANGED,[c],l))}},i.prototype.fireColumnEvent=function(e,s,l){this.eventService.dispatchEvent({type:e,columns:s,column:s&&1==s.length?s[0]:null,api:this.gridApi,columnApi:this.columnApi,source:l})},i.prototype.moveRowGroupColumn=function(e,s,l){void 0===l&&(l="api");var c=this.rowGroupColumns[e];this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(s,0,c),this.eventService.dispatchEvent({type:$.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:this.rowGroupColumns,column:1===this.rowGroupColumns.length?this.rowGroupColumns[0]:null,api:this.gridApi,columnApi:this.columnApi,source:l})},i.prototype.moveColumns=function(e,s,l){if(void 0===l&&(l="api"),this.columnAnimationService.start(),s>this.gridColumns.length-e.length)return console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+s),void console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");var c=this.getGridColumns(e);!this.doesMovePassRules(c,s)||(Sr(this.gridColumns,c,s),this.updateDisplayedColumns(l),this.eventService.dispatchEvent({type:$.EVENT_COLUMN_MOVED,columns:c,column:1===c.length?c[0]:null,toIndex:s,api:this.gridApi,columnApi:this.columnApi,source:l}),this.columnAnimationService.finish())},i.prototype.doesMovePassRules=function(e,s){var l=this.gridColumns.slice();return Sr(l,e,s),!(!this.doesMovePassMarryChildren(l)||!this.doesMovePassLockedPositions(l))},i.prototype.sortColumnsLikeGridColumns=function(e){var s=this;!e||e.length<=1||e.filter(function(c){return s.gridColumns.indexOf(c)<0}).length>0||e.sort(function(c,h){return s.gridColumns.indexOf(c)-s.gridColumns.indexOf(h)})},i.prototype.doesMovePassLockedPositions=function(e){var s=!1,l=!0;return e.forEach(function(c){c.getColDef().lockPosition?s&&(l=!1):s=!0}),l},i.prototype.doesMovePassMarryChildren=function(e){var s=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(l){if(l instanceof mr){var c=l,h=c.getColGroupDef();if(h&&h.marryChildren){var w=[];c.getLeafColumns().forEach(function(K){var Q=e.indexOf(K);w.push(Q)}),Math.max.apply(Math,w)-Math.min.apply(Math,w)>c.getLeafColumns().length-1&&(s=!1)}}}),s},i.prototype.moveColumn=function(e,s,l){void 0===l&&(l="api"),this.moveColumns([e],s,l)},i.prototype.moveColumnByIndex=function(e,s,l){void 0===l&&(l="api"),this.moveColumn(this.gridColumns[e],s,l)},i.prototype.getColumnDefs=function(){var e=this;if(this.primaryColumns){var s=this.primaryColumns.slice();return this.gridColsArePrimary?s.sort(function(l,c){return e.gridColumns.indexOf(l)-e.gridColumns.indexOf(c)}):this.lastPrimaryOrder&&s.sort(function(l,c){return e.lastPrimaryOrder.indexOf(l)-e.lastPrimaryOrder.indexOf(c)}),this.columnDefFactory.buildColumnDefs(s,this.rowGroupColumns,this.pivotColumns)}},i.prototype.getBodyContainerWidth=function(){return this.bodyWidth},i.prototype.getContainerWidth=function(e){switch(e){case fe.PINNED_LEFT:return this.leftWidth;case fe.PINNED_RIGHT:return this.rightWidth;default:return this.bodyWidth}},i.prototype.updateBodyWidths=function(){var e=this.getWidthOfColsInList(this.displayedColumnsCenter),s=this.getWidthOfColsInList(this.displayedColumnsLeft),l=this.getWidthOfColsInList(this.displayedColumnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==s||this.rightWidth!==l)&&(this.bodyWidth=e,this.leftWidth=s,this.rightWidth=l,this.eventService.dispatchEvent({type:$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},i.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},i.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},i.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},i.prototype.getDisplayedCenterColumns=function(){return this.displayedColumnsCenter},i.prototype.getDisplayedLeftColumns=function(){return this.displayedColumnsLeft},i.prototype.getDisplayedRightColumns=function(){return this.displayedColumnsRight},i.prototype.getDisplayedColumns=function(e){switch(e){case fe.PINNED_LEFT:return this.getDisplayedLeftColumns();case fe.PINNED_RIGHT:return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},i.prototype.getAllPrimaryColumns=function(){return this.primaryColumns?this.primaryColumns.slice():null},i.prototype.getSecondaryColumns=function(){return this.secondaryColumns?this.secondaryColumns.slice():null},i.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},i.prototype.getAllGridColumns=function(){return this.gridColumns},i.prototype.isEmpty=function(){return ni(this.gridColumns)},i.prototype.isRowGroupEmpty=function(){return ni(this.rowGroupColumns)},i.prototype.setColumnVisible=function(e,s,l){void 0===l&&(l="api"),this.setColumnsVisible([e],s,l)},i.prototype.setColumnsVisible=function(e,s,l){var c=this;void 0===s&&(s=!1),void 0===l&&(l="api"),this.columnAnimationService.start(),this.actionOnGridColumns(e,function(h){return h.isVisible()!==s&&(h.setVisible(s,l),!0)},l,function(){return{type:$.EVENT_COLUMN_VISIBLE,visible:s,column:null,columns:null,api:c.gridApi,columnApi:c.columnApi,source:l}}),this.columnAnimationService.finish()},i.prototype.setColumnPinned=function(e,s,l){void 0===l&&(l="api"),e&&this.setColumnsPinned([e],s,l)},i.prototype.setColumnsPinned=function(e,s,l){var h,c=this;void 0===l&&(l="api"),"print"!==this.gridOptionsWrapper.getDomLayout()?(this.columnAnimationService.start(),h=!0===s||s===fe.PINNED_LEFT?fe.PINNED_LEFT:s===fe.PINNED_RIGHT?fe.PINNED_RIGHT:null,this.actionOnGridColumns(e,function(m){return m.getPinned()!==h&&(m.setPinned(h),!0)},l,function(){return{type:$.EVENT_COLUMN_PINNED,pinned:h,column:null,columns:null,api:c.gridApi,columnApi:c.columnApi,source:l}}),this.columnAnimationService.finish()):console.warn("Changing the column pinning status is not allowed with domLayout='print'")},i.prototype.actionOnGridColumns=function(e,s,l,c){var h=this;if(!ni(e)){var m=[];if(e.forEach(function(R){var T=h.getGridColumn(R);T&&!1!==s(T)&&m.push(T)}),m.length&&(this.updateDisplayedColumns(l),Fe(c)&&c)){var w=c();w.columns=m,w.column=1===m.length?m[0]:null,this.eventService.dispatchEvent(w)}}},i.prototype.getDisplayedColBefore=function(e){var s=this.getAllDisplayedColumns(),l=s.indexOf(e);return l>0?s[l-1]:null},i.prototype.getDisplayedColAfter=function(e){var s=this.getAllDisplayedColumns(),l=s.indexOf(e);return l<s.length-1?s[l+1]:null},i.prototype.getDisplayedGroupAfter=function(e){return this.getDisplayedGroupAtDirection(e,"After")},i.prototype.getDisplayedGroupBefore=function(e){return this.getDisplayedGroupAtDirection(e,"Before")},i.prototype.getDisplayedGroupAtDirection=function(e,s){for(var l=e.getOriginalColumnGroup().getLevel()+e.getPaddingLevel(),c=e.getDisplayedLeafColumns(),h="After"===s?zn(c):c[0],m="getDisplayedCol"+s;;){var w=this[m](h);if(!w)return null;var R=this.getColumnGroupAtLevel(w,l);if(R!==e)return R}},i.prototype.getColumnGroupAtLevel=function(e,s){for(var l=e.getParent();!(l.getOriginalColumnGroup().getLevel()+l.getPaddingLevel()<=s);)l=l.getParent();return l},i.prototype.isPinningLeft=function(){return this.displayedColumnsLeft.length>0},i.prototype.isPinningRight=function(){return this.displayedColumnsRight.length>0},i.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var e=this.primaryColumns?this.primaryColumns.slice(0):[];return this.groupAutoColumns&&Fe(this.groupAutoColumns)&&this.groupAutoColumns.forEach(function(s){return e.push(s)}),this.secondaryColumnsPresent&&this.secondaryColumns&&this.secondaryColumns.forEach(function(s){return e.push(s)}),e},i.prototype.createStateItemFromColumn=function(e){var s=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,l=e.isPivotActive()?this.pivotColumns.indexOf(e):null,c=e.isValueActive()?e.getAggFunc():null,h=null!=e.getSort()?e.getSort():null,m=null!=e.getSortIndex()?e.getSortIndex():null,w=null!=e.getFlex()&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:h,sortIndex:m,aggFunc:c,rowGroup:e.isRowGroupActive(),rowGroupIndex:s,pivot:e.isPivotActive(),pivotIndex:l,flex:w}},i.prototype.getColumnState=function(){if(Ce(this.primaryColumns)||!this.isAlive())return[];var s=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.pivotMode||this.orderColumnStateList(s),s},i.prototype.getPrimaryAndAutoGroupCols=function(){return this.groupAutoColumns?function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s}(this.primaryColumns||[],this.groupAutoColumns):this.primaryColumns},i.prototype.orderColumnStateList=function(e){var s=Aa(this.gridColumns.map(function(l,c){return[l.getColId(),c]}));e.sort(function(l,c){return(s.has(l.colId)?s.get(l.colId):-1)-(s.has(c.colId)?s.get(c.colId):-1)})},i.prototype.resetColumnState=function(e){void 0===e&&(e="api");var s=this.getColumnsFromTree(this.primaryColumnTree),l=[],c=1e3,h=1e3,m=[];this.groupAutoColumns&&(m=m.concat(this.groupAutoColumns)),s&&(m=m.concat(s)),m.forEach(function(w){var R=function(mn,Xn){return null!=mn?mn:null!=Xn?Xn:null},T=w.getColDef(),L=R(T.sort,T.initialSort),U=R(T.sortIndex,T.initialSortIndex),K=R(T.hide,T.initialHide),Q=R(T.pinned,T.initialPinned),oe=R(T.width,T.initialWidth),Te=R(T.flex,T.initialFlex),He=R(T.rowGroupIndex,T.initialRowGroupIndex),Ve=R(T.rowGroup,T.initialRowGroup);null==He&&(null==Ve||0==Ve)&&(He=null,Ve=null);var Pe=R(T.pivotIndex,T.initialPivotIndex),Ze=R(T.pivot,T.initialPivot);null==Pe&&(null==Ze||0==Ze)&&(Pe=null,Ze=null);var Re=R(T.aggFunc,T.initialAggFunc),an={colId:w.getColId(),sort:L,sortIndex:U,hide:K,pinned:Q,width:oe,flex:Te,rowGroup:Ve,rowGroupIndex:He,pivot:Ze,pivotIndex:Pe,aggFunc:Re};Ce(He)&&Ve&&(an.rowGroupIndex=c++),Ce(Pe)&&Ze&&(an.pivotIndex=h++),l.push(an)}),this.applyColumnState({state:l,applyOrder:!0},e)},i.prototype.applyColumnState=function(e,s){var l=this;if(void 0===s&&(s="api"),ni(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;this.columnAnimationService.start();var c=this.compareColumnStatesAndRaiseEvents(s);this.autoGroupsNeedBuilding=!0;var h=this.primaryColumns.slice(),m=!0,w={},R={},T=[],L=this.rowGroupColumns.slice(),U=this.pivotColumns.slice();e.state&&e.state.forEach(function(Te){var Ve=Te.colId||"";if(Bv(Ve,fe.GROUP_AUTO_COLUMN_ID))T.push(Te);else{var Ze=l.getPrimaryColumn(Ve);Ze?(l.syncColumnWithStateItem(Ze,Te,e.defaultState,w,R,!1,s),ri(h,Ze)):m=!1}});var K=function(He){return l.syncColumnWithStateItem(He,null,e.defaultState,w,R,!1,s)};h.forEach(K);var Q=function(He,Ve,Pe,Ze){var Re=He[Pe.getId()],an=He[Ze.getId()],Gt=null!=Re,mn=null!=an;if(Gt&&mn)return Re-an;if(Gt)return-1;if(mn)return 1;var Xn=Ve.indexOf(Pe),er=Ve.indexOf(Ze),or=Xn>=0;return or&&er>=0?Xn-er:or?-1:1};this.rowGroupColumns.sort(Q.bind(this,w,L)),this.pivotColumns.sort(Q.bind(this,R,U)),this.updateGridColumns();var oe=this.groupAutoColumns?this.groupAutoColumns.slice():[];return T.forEach(function(Te){var He=l.getAutoColumn(Te.colId);ri(oe,He),l.syncColumnWithStateItem(He,Te,e.defaultState,null,null,!0,s)}),oe.forEach(K),this.applyOrderAfterApplyState(e),this.updateDisplayedColumns(s),this.dispatchEverythingChanged(s),c(),this.columnAnimationService.finish(),m},i.prototype.applyOrderAfterApplyState=function(e){if(this.gridColsArePrimary&&e.applyOrder&&e.state){var s=[],l={},c={};if(this.gridColumns.forEach(function(h){return c[h.getId()]=h}),e.state.forEach(function(h){if(h.colId&&!l[h.colId]){var m=c[h.colId];m&&(s.push(m),l[h.colId]=!0)}}),this.gridColumns.forEach(function(h){l[h.getColId()]||s.push(h)}),s=this.putFixedColumnsFirst(s),!this.doesMovePassMarryChildren(s))return void console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");this.gridColumns=s}},i.prototype.compareColumnStatesAndRaiseEvents=function(e){var s=this;if(!this.columnDefs)return function(){};var c={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},h=this.getColumnState(),m={};return h.forEach(function(w){m[w.colId]=w}),function(){if(!s.gridOptionsWrapper.isSuppressColumnStateEvents()){var w=s.getPrimaryAndAutoGroupCols(),R=function(Pe,Ze,Re,an){Ar(Ze.map(an),Re.map(an))||s.eventService.dispatchEvent({type:Pe,columns:Re,column:1===Re.length?Re[0]:null,api:s.gridApi,columnApi:s.columnApi,source:e})},T=function(Pe){var Ze=[];return(w||[]).forEach(function(Re){var an=m[Re.getColId()];an&&Pe(an,Re)&&Ze.push(Re)}),Ze},L=function(Pe){return Pe.getColId()};R($.EVENT_COLUMN_ROW_GROUP_CHANGED,c.rowGroupColumns,s.rowGroupColumns,L),R($.EVENT_COLUMN_PIVOT_CHANGED,c.pivotColumns,s.pivotColumns,L),T(function(Pe,Ze){var Re=null!=Pe.aggFunc,an=Re!=Ze.isValueActive(),Gt=Re&&Pe.aggFunc!=Ze.getAggFunc();return an||Gt}).length>0&&s.fireColumnEvent($.EVENT_COLUMN_VALUE_CHANGED,s.valueColumns,e),s.fireColumnResizedEvent(T(function(Pe,Ze){return Pe.width!=Ze.getActualWidth()}),!0,e),s.raiseColumnPinnedEvent(T(function(Pe,Ze){return Pe.pinned!=Ze.getPinned()}),e),s.raiseColumnVisibleEvent(T(function(Pe,Ze){return Pe.hide==Ze.isVisible()}),e),T(function(Pe,Ze){return Pe.sort!=Ze.getSort()||Pe.sortIndex!=Ze.getSortIndex()}).length>0&&s.sortController.dispatchSortChangedEvents(),s.raiseColumnMovedEvent(h,e)}}},i.prototype.raiseColumnPinnedEvent=function(e,s){if(e.length){var l=1===e.length?e[0]:null,c=this.getCommonValue(e,function(m){return m.getPinned()});this.eventService.dispatchEvent({type:$.EVENT_COLUMN_PINNED,pinned:null!=c?c:null,columns:e,column:l,api:this.gridApi,columnApi:this.columnApi,source:s})}},i.prototype.getCommonValue=function(e,s){if(e&&0!=e.length){for(var l=s(e[0]),c=1;c<e.length;c++)if(l!==s(e[c]))return;return l}},i.prototype.raiseColumnVisibleEvent=function(e,s){if(e.length){var l=1===e.length?e[0]:null,c=this.getCommonValue(e,function(m){return m.isVisible()});this.eventService.dispatchEvent({type:$.EVENT_COLUMN_VISIBLE,visible:c,columns:e,column:l,api:this.gridApi,columnApi:this.columnApi,source:s})}},i.prototype.raiseColumnMovedEvent=function(e,s){var l=this,c=this.getColumnState(),h={};c.forEach(function(U){return h[U.colId]=U});var m={};e.forEach(function(U){h[U.colId]&&(m[U.colId]=!0)});var w=Gr(e,function(U){return m[U.colId]}),R=Gr(c,function(U){return m[U.colId]}),T=[];R.forEach(function(U,K){var Q=w&&w[K];if(Q&&Q.colId!==U.colId){var oe=l.getGridColumn(Q.colId);oe&&T.push(oe)}}),T.length&&this.eventService.dispatchEvent({type:$.EVENT_COLUMN_MOVED,columns:T,column:null,api:this.gridApi,columnApi:this.columnApi,source:s})},i.prototype.syncColumnWithStateItem=function(e,s,l,c,h,m,w){if(e){var R=function(er,or){var lr=s,eo=l,ra={value1:void 0,value2:void 0},zr=!1;return lr&&(void 0!==lr[er]&&(ra.value1=lr[er],zr=!0),Fe(or)&&void 0!==lr[or]&&(ra.value2=lr[or],zr=!0)),!zr&&eo&&(void 0!==eo[er]&&(ra.value1=eo[er]),Fe(or)&&void 0!==eo[or]&&(ra.value2=eo[or])),ra},T=R("hide").value1;void 0!==T&&e.setVisible(!T,w);var L=R("pinned").value1;void 0!==L&&e.setPinned(L);var U=this.columnUtils.calculateColMinWidth(e.getColDef()),K=R("flex").value1;if(void 0!==K&&e.setFlex(K),e.getFlex()<=0){var oe=R("width").value1;null!=oe&&null!=U&&oe>=U&&e.setActualWidth(oe,w)}var Te=R("sort").value1;void 0!==Te&&e.setSort(Te===fe.SORT_DESC||Te===fe.SORT_ASC?Te:void 0);var He=R("sortIndex").value1;if(void 0!==He&&e.setSortIndex(He),!m){var Ve=R("aggFunc").value1;void 0!==Ve&&("string"==typeof Ve?(e.setAggFunc(Ve),e.isValueActive()||(e.setValueActive(!0,w),this.valueColumns.push(e))):(Fe(Ve)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,w),ri(this.valueColumns,e))));var Pe=R("rowGroup","rowGroupIndex"),Ze=Pe.value1,Re=Pe.value2;(void 0!==Ze||void 0!==Re)&&("number"==typeof Re||Ze?(e.isRowGroupActive()||(e.setRowGroupActive(!0,w),this.rowGroupColumns.push(e)),c&&"number"==typeof Re&&(c[e.getId()]=Re)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,w),ri(this.rowGroupColumns,e)));var an=R("pivot","pivotIndex"),Gt=an.value1,mn=an.value2;(void 0!==Gt||void 0!==mn)&&("number"==typeof mn||Gt?(e.isPivotActive()||(e.setPivotActive(!0,w),this.pivotColumns.push(e)),h&&"number"==typeof mn&&(h[e.getId()]=mn)):e.isPivotActive()&&(e.setPivotActive(!1,w),ri(this.pivotColumns,e)))}}},i.prototype.getGridColumns=function(e){return this.getColumns(e,this.getGridColumn.bind(this))},i.prototype.getColumns=function(e,s){var l=[];return e&&e.forEach(function(c){var h=s(c);h&&l.push(h)}),l},i.prototype.getColumnWithValidation=function(e){if(null==e)return null;var s=this.getGridColumn(e);return s||console.warn("AG Grid: could not find column "+e),s},i.prototype.getPrimaryColumn=function(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null},i.prototype.getGridColumn=function(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)},i.prototype.getColumn=function(e,s,l){if(!e)return null;if("string"==typeof e&&l[e])return l[e];for(var c=0;c<s.length;c++)if(this.columnsMatch(s[c],e))return s[c];return this.getAutoColumn(e)},i.prototype.getAutoColumn=function(e){var s=this;return this.groupAutoColumns&&Fe(this.groupAutoColumns)&&!Ce(this.groupAutoColumns)?Li(this.groupAutoColumns,function(l){return s.columnsMatch(l,e)}):null},i.prototype.columnsMatch=function(e,s){var l=e===s,c=e.getColDef()===s,h=e.getColId()==s;return l||c||h},i.prototype.getDisplayNameForColumn=function(e,s,l){if(void 0===l&&(l=!1),!e)return null;var c=this.getHeaderName(e.getColDef(),e,null,null,s);return l?this.wrapHeaderNameWithAggFunc(e,c):c},i.prototype.getDisplayNameForOriginalColumnGroup=function(e,s,l){var c=s?s.getColGroupDef():null;return c?this.getHeaderName(c,null,e,s,l):null},i.prototype.getDisplayNameForColumnGroup=function(e,s){return this.getDisplayNameForOriginalColumnGroup(e,e.getOriginalColumnGroup(),s)},i.prototype.getHeaderName=function(e,s,l,c,h){var m=e.headerValueGetter;if(m){var w={colDef:e,column:s,columnGroup:l,originalColumnGroup:c,location:h,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext()};return"function"==typeof m?m(w):"string"==typeof m?this.expressionService.evaluate(m,w):(console.warn("ag-grid: headerValueGetter must be a function or a string"),"")}return null!=e.headerName?e.headerName:e.field?Xr(e.field):""},i.prototype.wrapHeaderNameWithAggFunc=function(e,s){if(this.gridOptionsWrapper.isSuppressAggFuncInHeader())return s;var m,l=e.getColDef().pivotValueColumn,h=null;if(Fe(l))h=l?l.getAggFunc():null,m=!0;else{var w=e.isValueActive(),R=this.pivotMode||!this.isRowGroupEmpty();w&&R?(h=e.getAggFunc(),m=!0):m=!1}if(m){var T="string"==typeof h?h:"func";return this.gridOptionsWrapper.getLocaleTextFunc()(T,T)+"("+s+")"}return s},i.prototype.getColumnGroup=function(e,s){if(!e)return null;if(e instanceof ai)return e;var l=this.getAllDisplayedTrees(),c="number"==typeof s,h=null;return this.columnUtils.depthFirstAllColumnTreeSearch(l,function(m){if(m instanceof ai){var w=m;(c?e===w.getGroupId()&&s===w.getInstanceId():e===w.getGroupId())&&(h=w)}}),h},i.prototype.isReady=function(){return this.ready},i.prototype.extractValueColumns=function(e,s){this.valueColumns=this.extractColumns(s,this.valueColumns,function(l,c){return l.setValueActive(c,e)},function(){},function(){},function(l){var c=l.aggFunc;return null===c||""===c?null:void 0!==c?!!c:void 0},function(l){return null!=l.initialAggFunc&&""!=l.initialAggFunc}),this.valueColumns.forEach(function(l){var c=l.getColDef();null!=c.aggFunc&&""!=c.aggFunc?l.setAggFunc(c.aggFunc):l.getAggFunc()||l.setAggFunc(c.initialAggFunc)})},i.prototype.extractRowGroupColumns=function(e,s){this.rowGroupColumns=this.extractColumns(s,this.rowGroupColumns,function(l,c){return l.setRowGroupActive(c,e)},function(l){return l.rowGroupIndex},function(l){return l.initialRowGroupIndex},function(l){return l.rowGroup},function(l){return l.initialRowGroup})},i.prototype.extractColumns=function(e,s,l,c,h,m,w){void 0===e&&(e=[]),void 0===s&&(s=[]);var R=[],T=[];(this.primaryColumns||[]).forEach(function(K){var Q=e.indexOf(K)<0,oe=K.getColDef(),Te=oo(m(oe)),He=oo(w(oe)),Ve=k(c(oe)),Pe=k(h(oe));(void 0!==Te?Te:void 0!==Ve?null!==Ve&&Ve>=0:Q?void 0!==He?He:void 0!==Pe&&null!=Pe&&Pe>=0:s.indexOf(K)>=0)&&((Q?null!=Ve||null!=Pe:null!=Ve)?R.push(K):T.push(K))});var L=function(Q){var oe=c(Q.getColDef()),Te=h(Q.getColDef());return null!=oe?oe:Te};R.sort(function(K,Q){var oe=L(K),Te=L(Q);return oe===Te?0:oe<Te?-1:1});var U=[].concat(R);return s.forEach(function(K){T.indexOf(K)>=0&&U.push(K)}),T.forEach(function(K){U.indexOf(K)<0&&U.push(K)}),s.forEach(function(K){U.indexOf(K)<0&&l(K,!1)}),U.forEach(function(K){s.indexOf(K)<0&&l(K,!0)}),U},i.prototype.extractPivotColumns=function(e,s){this.pivotColumns=this.extractColumns(s,this.pivotColumns,function(l,c){return l.setPivotActive(c,e)},function(l){return l.pivotIndex},function(l){return l.initialPivotIndex},function(l){return l.pivot},function(l){return l.initialPivot})},i.prototype.resetColumnGroupState=function(e){void 0===e&&(e="api");var s=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,function(l){if(l instanceof mr){var c=l.getColGroupDef(),h={groupId:l.getGroupId(),open:c?c.openByDefault:void 0};s.push(h)}}),this.setColumnGroupState(s,e)},i.prototype.getColumnGroupState=function(){var e=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(s){if(s instanceof mr){var l=s;e.push({groupId:l.getGroupId(),open:l.isExpanded()})}}),e},i.prototype.setColumnGroupState=function(e,s){var l=this;void 0===s&&(s="api"),this.columnAnimationService.start();var c=[];e.forEach(function(h){var w=h.open,R=l.getOriginalColumnGroup(h.groupId);!R||R.isExpanded()!==w&&(l.logger.log("columnGroupOpened("+R.getGroupId()+","+w+")"),R.setExpanded(w),c.push(R))}),this.updateGroupsAndDisplayedColumns(s),this.setFirstRightAndLastLeftPinned(s),c.forEach(function(h){l.eventService.dispatchEvent({type:$.EVENT_COLUMN_GROUP_OPENED,columnGroup:h,api:l.gridApi,columnApi:l.columnApi})}),this.columnAnimationService.finish()},i.prototype.setColumnGroupOpened=function(e,s,l){var c;void 0===l&&(l="api"),c=e instanceof mr?e.getId():e||"",this.setColumnGroupState([{groupId:c,open:s}],l)},i.prototype.getOriginalColumnGroup=function(e){if(e instanceof mr)return e;"string"!=typeof e&&console.error("AG Grid: group key must be a string");var s=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(l){if(l instanceof mr){var c=l;c.getId()===e&&(s=c)}}),s},i.prototype.calculateColumnsForDisplay=function(){var e=this;return this.gridColumns.filter(this.pivotMode&&!this.secondaryColumnsPresent?function(l){var c=e.groupAutoColumns&&xn(e.groupAutoColumns,l),h=e.valueColumns&&xn(e.valueColumns,l);return c||h}:function(l){return e.groupAutoColumns&&xn(e.groupAutoColumns,l)||l.isVisible()})},i.prototype.checkColSpanActiveInCols=function(e){var s=!1;return e.forEach(function(l){Fe(l.getColDef().colSpan)&&(s=!0)}),s},i.prototype.calculateColumnsForGroupDisplay=function(){var e=this;this.groupDisplayColumns=[];var s=function(c){var h=c.getColDef();h&&Fe(h.showRowGroup)&&e.groupDisplayColumns.push(c)};this.gridColumns.forEach(s),this.groupAutoColumns&&this.groupAutoColumns.forEach(s)},i.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},i.prototype.updateDisplayedColumns=function(e){var s=this.calculateColumnsForDisplay();this.buildDisplayedTrees(s),this.calculateColumnsForGroupDisplay(),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)},i.prototype.isSecondaryColumnsPresent=function(){return this.secondaryColumnsPresent},i.prototype.setSecondaryColumns=function(e,s){void 0===s&&(s="api");var l=e&&e.length>0;if(l||this.secondaryColumnsPresent){if(l){this.processSecondaryColumnDefinitions(e);var c=this.columnFactory.createColumnTree(e,!1);this.secondaryBalancedTree=c.columnTree,this.secondaryHeaderRowCount=c.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsPresent=!0}else this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsPresent=!1;this.updateGridColumns(),this.updateDisplayedColumns(s)}},i.prototype.processSecondaryColumnDefinitions=function(e){var s=this.gridOptionsWrapper.getProcessSecondaryColDefFunc(),l=this.gridOptionsWrapper.getProcessSecondaryColGroupDefFunc();(s||l)&&e&&function h(m){m.forEach(function(w){if(Fe(w.children)){var T=w;l&&l(T),h(T.children)}else s&&s(w)})}(e)},i.prototype.updateGridColumns=function(){var e=this;this.gridColsArePrimary&&(this.lastPrimaryOrder=this.gridColumns),this.secondaryColumns&&this.secondaryBalancedTree?(this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1):this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,this.orderGridColsLikeLastPrimary()),this.addAutoGroupToGridColumns(),this.gridColumns=this.putFixedColumnsFirst(this.gridColumns),this.setupQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(function(l){return e.gridColumnsMap[l.getId()]=l}),this.setAutoHeightActive(),this.eventService.dispatchEvent({type:$.EVENT_GRID_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.setAutoHeightActive=function(){if(this.autoHeightActive=this.gridColumns.filter(function(c){return c.getColDef().autoHeight}).length>0,this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;var e=this.rowModel.getType();e!==fe.ROW_MODEL_TYPE_CLIENT_SIDE&&e!==fe.ROW_MODEL_TYPE_SERVER_SIDE&&vn(function(){return console.warn("AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.")},"autoHeightActive.wrongRowModel")}},i.prototype.orderGridColsLikeLastPrimary=function(){if(!Ce(this.lastPrimaryOrder)){var e=Aa(this.lastPrimaryOrder.map(function(R,T){return[R,T]})),s=!0;if(this.gridColumns.forEach(function(R){e.has(R)&&(s=!1)}),!s){var l=Aa(this.gridColumns.map(function(R){return[R,!0]})),c=this.lastPrimaryOrder.filter(function(R){return l.has(R)}),h=Aa(c.map(function(R){return[R,!0]})),m=this.gridColumns.filter(function(R){return!h.has(R)}),w=c.slice();m.forEach(function(R){var T=R.getOriginalParent();if(T){for(var L=[];!L.length&&T;)T.getLeafColumns().forEach(function(oe){var Te=w.indexOf(oe)>=0,He=L.indexOf(oe)<0;Te&&He&&L.push(oe)}),T=T.getOriginalParent();if(L.length){var K=L.map(function(oe){return w.indexOf(oe)}),Q=Math.max.apply(Math,K);vi(w,R,Q+1)}else w.push(R)}else w.push(R)}),this.gridColumns=w}}},i.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},i.prototype.setupQuickFilterColumns=function(){this.groupAutoColumns?this.columnsForQuickFilter=(this.primaryColumns||[]).concat(this.groupAutoColumns):this.primaryColumns&&(this.columnsForQuickFilter=this.primaryColumns)},i.prototype.putFixedColumnsFirst=function(e){var s=e.filter(function(c){return c.getColDef().lockPosition}),l=e.filter(function(c){return!c.getColDef().lockPosition});return s.concat(l)},i.prototype.addAutoGroupToGridColumns=function(){if(this.createGroupAutoColumnsIfNeeded(),!Ce(this.groupAutoColumns)){this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;var e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.gridBalancedTree=e.concat(this.gridBalancedTree)}},i.prototype.clearDisplayedAndViewportColumns=function(){this.displayedTreeLeft=[],this.displayedTreeRight=[],this.displayedTreeCentre=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[]},i.prototype.updateGroupsAndDisplayedColumns=function(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths(),this.eventService.dispatchEvent({type:$.EVENT_DISPLAYED_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.deriveDisplayedColumns=function(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(function(s){return s.getColDef().autoHeight})},i.prototype.isAutoRowHeightActive=function(){return this.autoHeightActive},i.prototype.wasAutoRowHeightEverActive=function(){return this.autoHeightActiveAtLeastOnce},i.prototype.joinDisplayedColumns=function(){this.displayedColumns=this.gridOptionsWrapper.isEnableRtl()?this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)},i.prototype.setLeftValues=function(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()},i.prototype.setLeftValuesOfColumns=function(e){var s=this;if(this.primaryColumns){var l=this.primaryColumns.slice(0),c=this.gridOptionsWrapper.isEnableRtl();[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(function(h){if(c){var m=s.getWidthOfColsInList(h);h.forEach(function(R){m-=R.getActualWidth(),R.setLeft(m,e)})}else{var w=0;h.forEach(function(R){R.setLeft(w,e),w+=R.getActualWidth()})}An(l,h)}),l.forEach(function(h){h.setLeft(null,e)})}},i.prototype.setLeftValuesOfGroups=function(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(function(e){e.forEach(function(s){s instanceof ai&&s.checkLeft()})})},i.prototype.derivedDisplayedColumnsFromDisplayedTree=function(e,s){s.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,function(l){l instanceof Mn&&s.push(l)})},i.prototype.extractViewportColumns=function(){this.viewportColumnsCenter=this.suppressColumnVirtualisation?this.displayedColumnsCenter:this.filterOutColumnsWithinViewport(),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)},i.prototype.getVirtualHeaderGroupRow=function(e,s){var l;switch(e){case fe.PINNED_LEFT:l=this.viewportRowLeft[s];break;case fe.PINNED_RIGHT:l=this.viewportRowRight[s];break;default:l=this.viewportRowCenter[s]}return Ce(l)&&(l=[]),l},i.prototype.extractViewportRows=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};var e={};this.viewportColumns.forEach(function(l){return e[l.getId()]=!0});var s=function l(c,h,m){for(var w=!1,R=0;R<c.length;R++){var T=c[R],L=!1;if(T instanceof Mn)L=!0===e[T.getId()];else{var K=T.getDisplayedChildren();K&&(L=l(K,h,m+1))}L&&(w=!0,h[m]||(h[m]=[]),h[m].push(T))}return w};s(this.displayedTreeLeft,this.viewportRowLeft,0),s(this.displayedTreeRight,this.viewportRowRight,0),s(this.displayedTreeCentre,this.viewportRowCenter,0)},i.prototype.extractViewport=function(){this.extractViewportColumns(),this.extractViewportRows()},i.prototype.filterOutColumnsWithinViewport=function(){return this.displayedColumnsCenter.filter(this.isColumnInViewport.bind(this))},i.prototype.refreshFlexedColumns=function(e){var s=this;void 0===e&&(e={});var l=e.source?e.source:"flex";if(null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];var c=-1;e.resizingCols&&e.resizingCols.forEach(function(Ze){var Re=s.displayedColumnsCenter.indexOf(Ze);c<Re&&(c=Re)});var h=function(Re){var an=s.displayedColumnsCenter.indexOf(Re)>c;return Re.getFlex()&&an},m=this.displayedColumnsCenter.filter(function(Ze){return!h(Ze)}),w=this.displayedColumnsCenter.filter(function(Ze){return h(Ze)}),R=[];if(!w.length)return[];var L,T=[];e:for(;;){var U=w.reduce(function(Ze,Re){return Ze+Re.getFlex()},0);L=this.flexViewportWidth-this.getWidthOfColsInList(m);for(var K=0;K<w.length;K++){var Q=w[K],oe=L*Q.getFlex()/U,Te=0,He=Q.getMinWidth(),Ve=Q.getMaxWidth();if(Fe(He)&&oe<He?Te=He:Fe(Ve)&&oe>Ve&&(Te=Ve),Te){Q.setActualWidth(Te,l),ri(w,Q),R.push(Q),m.push(Q);continue e}T[K]=Math.round(oe)}break}var Pe=L;return w.forEach(function(Ze,Re){Ze.setActualWidth(Math.min(T[Re],Pe),l),R.push(Ze),Pe-=T[Re]}),e.skipSetLeft||this.setLeftValues(l),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.fireColumnResizedEvent(R,!0,l,w),this.flexColsCalculatedAtLestOnce||(this.gridOptionsWrapper.isRowModelDefault()&&this.rowModel.resetRowHeights(),this.flexColsCalculatedAtLestOnce=!0),w},i.prototype.sizeColumnsToFit=function(e,s,l){void 0===s&&(s="sizeColumnsToFit");var c=this.getAllDisplayedColumns();if(!(e<=0)&&c.length){var h=[],m=[];c.forEach(function(Pe){!0===Pe.getColDef().suppressSizeToFit?m.push(Pe):h.push(Pe)});var w=h.slice(0),R=!1,T=function(Ze){ri(h,Ze),m.push(Ze)};for(h.forEach(function(Pe){return Pe.resetActualWidth(s)});!R;){R=!0;var L=e-this.getWidthOfColsInList(m);if(L<=0)h.forEach(function(Pe){Pe.setMinimum(s)});else for(var U=L/this.getWidthOfColsInList(h),K=L,Q=h.length-1;Q>=0;Q--){var oe=h[Q],Te=oe.getMinWidth(),He=oe.getMaxWidth(),Ve=Math.round(oe.getActualWidth()*U);Fe(Te)&&Ve<Te?(Ve=Te,T(oe),R=!1):Fe(He)&&oe.isGreaterThanMax(Ve)?(Ve=He,T(oe),R=!1):0===Q&&(Ve=K),oe.setActualWidth(Ve,s,!0),K-=Ve}}w.forEach(function(Pe){Pe.fireColumnWidthChangedEvent(s)}),this.setLeftValues(s),this.updateBodyWidths(),!l&&this.fireColumnResizedEvent(w,!0,s)}},i.prototype.buildDisplayedTrees=function(e){var s=[],l=[],c=[];e.forEach(function(m){switch(m.getPinned()){case"left":s.push(m);break;case"right":l.push(m);break;default:c.push(m)}});var h=new Nv;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(s,this.gridBalancedTree,h,fe.PINNED_LEFT,this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(l,this.gridBalancedTree,h,fe.PINNED_RIGHT,this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(c,this.gridBalancedTree,h,null,this.displayedTreeCentre),this.updateDisplayedMap()},i.prototype.updateDisplayedMap=function(){var e=this;this.displayedColumnsAndGroupsMap={};var s=function(c){e.displayedColumnsAndGroupsMap[c.getUniqueId()]=c};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,s),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,s),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,s)},i.prototype.isDisplayed=function(e){return this.displayedColumnsAndGroupsMap[e.getUniqueId()]===e},i.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var e=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(e,function(s){s instanceof ai&&s.calculateDisplayedColumns()})},i.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},i.prototype.createGroupAutoColumnsIfNeeded=function(){if(this.autoGroupsNeedBuilding){this.autoGroupsNeedBuilding=!1;var e=this.gridOptionsWrapper.isGroupUseEntireRow(this.pivotMode),s=this.pivotMode?this.gridOptionsWrapper.isPivotSuppressAutoColumn():this.gridOptionsWrapper.isGroupSuppressAutoColumn();if(!(this.rowGroupColumns.length>0||this.usingTreeData)||s||e)this.groupAutoColumns=null;else{var h=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);(!this.autoColsEqual(h,this.groupAutoColumns)||this.forceRecreateAutoGroups)&&(this.groupAutoColumns=h)}}},i.prototype.autoColsEqual=function(e,s){return Ar(e,s,function(l,c){return l.getColId()===c.getColId()})},i.prototype.getWidthOfColsInList=function(e){return e.reduce(function(s,l){return s+l.getActualWidth()},0)},i.prototype.getGridBalancedTree=function(){return this.gridBalancedTree},i.prototype.hasFloatingFilters=function(){return!!this.gridColumns&&this.gridColumns.some(function(s){return s.getColDef().floatingFilter})},i.prototype.getFirstDisplayedColumn=function(){var e=this.gridOptionsWrapper.isEnableRtl(),s=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&s.reverse();for(var l=0;l<s.length;l++){var c=this[s[l]]();if(c.length)return e?zn(c):c[0]}return null},Br([H("expressionService")],i.prototype,"expressionService",void 0),Br([H("columnFactory")],i.prototype,"columnFactory",void 0),Br([H("displayedGroupCreator")],i.prototype,"displayedGroupCreator",void 0),Br([H("autoWidthCalculator")],i.prototype,"autoWidthCalculator",void 0),Br([H("columnUtils")],i.prototype,"columnUtils",void 0),Br([H("columnAnimationService")],i.prototype,"columnAnimationService",void 0),Br([H("autoGroupColService")],i.prototype,"autoGroupColService",void 0),Br([Nn("aggFuncService")],i.prototype,"aggFuncService",void 0),Br([Nn("valueCache")],i.prototype,"valueCache",void 0),Br([Nn("animationFrameService")],i.prototype,"animationFrameService",void 0),Br([H("rowModel")],i.prototype,"rowModel",void 0),Br([H("columnApi")],i.prototype,"columnApi",void 0),Br([H("gridApi")],i.prototype,"gridApi",void 0),Br([H("sortController")],i.prototype,"sortController",void 0),Br([H("columnDefFactory")],i.prototype,"columnDefFactory",void 0),Br([Qe],i.prototype,"init",null),Br([kE(0,Ni("loggerFactory"))],i.prototype,"setBeans",null),Br([vt("columnModel")],i)}(Ke);function Bf(d,i){return kv(d.toString(),i,"0")}function GE(d,i){for(var e=[],s=d;s<=i;s++)e.push(s);return e}function ki(d){return""!==d&&!isNaN(parseFloat(d))&&isFinite(d)}function BE(){return Number.MAX_SAFE_INTEGER||9007199254740991}function zv(d){return"number"!=typeof d?"":d.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}var vM=Object.freeze({__proto__:null,padStartWidthZeros:Bf,createArrayOfNumbers:GE,isNumeric:ki,getMaxSafeInteger:BE,cleanNumber:function(d){return"string"==typeof d&&(d=parseInt(d,10)),"number"==typeof d?Math.floor(d):null},decToHex:function(d,i){for(var e="",s=0;s<i;s++)e+=String.fromCharCode(255&d),d>>>=8;return e},formatNumberTwoDecimalPlacesAndCommas:function(d){return"number"!=typeof d?"":zv(Math.round(100*d)/100)},formatNumberCommas:zv,sum:function(d){return null==d?null:d.reduce(function(i,e){return i+e},0)}}),Hf=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),HE=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Hf(i,d),i.prototype.calculateColMinWidth=function(e){return null!=e.minWidth?e.minWidth:this.gridOptionsWrapper.getMinColWidth()},i.prototype.calculateColMaxWidth=function(e){return null!=e.maxWidth?e.maxWidth:this.gridOptionsWrapper.getMaxColWidth()||BE()},i.prototype.calculateColInitialWidth=function(e){var c,s=this.calculateColMinWidth(e),l=this.calculateColMaxWidth(e),h=k(e.width),m=k(e.initialWidth);return c=null!=h?h:null!=m?m:this.gridOptionsWrapper.getColWidth(),Math.max(Math.min(c,l),s)},i.prototype.getOriginalPathForColumn=function(e,s){var l=[],c=!1;return function m(w,R){for(var T=0;T<w.length;T++){if(c)return;var L=w[T];L instanceof mr?(m(L.getChildren(),R+1),l[R]=L):L===e&&(c=!0)}}(s,0),c?l:null},i.prototype.depthFirstOriginalTreeSearch=function(e,s,l){var c=this;!s||s.forEach(function(h){h instanceof mr&&c.depthFirstOriginalTreeSearch(h,h.getChildren(),l),l(h,e)})},i.prototype.depthFirstAllColumnTreeSearch=function(e,s){var l=this;!e||e.forEach(function(c){c instanceof ai&&l.depthFirstAllColumnTreeSearch(c.getChildren(),s),s(c)})},i.prototype.depthFirstDisplayedColumnTreeSearch=function(e,s){var l=this;!e||e.forEach(function(c){c instanceof ai&&l.depthFirstDisplayedColumnTreeSearch(c.getDisplayedChildren(),s),s(c)})},i=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([vt("columnUtils")],i),i}(Ke),VE=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ma=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return VE(i,d),i.prototype.createDisplayedGroups=function(e,s,l,c,h){var R,T,m=this,w=[],L=this.mapOldGroupsById(h);return e.forEach(function(U){for(var K=m.getOriginalPathForColumn(s,U),Q=[],oe=!T,Te=0;Te<K.length;Te++)if(oe||K[Te]!==T[Te]){var He=m.createColumnGroup(K[Te],l,L,c);Q[Te]=He,0==Te?w.push(He):Q[Te-1].addChild(He)}else Q[Te]=R[Te];0===Q.length?w.push(U):zn(Q).addChild(U),R=Q,T=K}),this.setupParentsIntoColumns(w,null),w},i.prototype.createColumnGroup=function(e,s,l,c){var h=e.getGroupId(),m=s.getInstanceIdForKey(h),R=l[ai.createUniqueId(h,m)];return R&&R.getOriginalColumnGroup()!==e&&(R=null),Fe(R)?R.reset():(R=new ai(e,h,m,c),this.context.createBean(R)),R},i.prototype.mapOldGroupsById=function(e){var s={};return e&&function c(h){h.forEach(function(m){if(m instanceof ai){var w=m;s[m.getUniqueId()]=w,c(w.getChildren())}})}(e),s},i.prototype.setupParentsIntoColumns=function(e,s){var l=this;e.forEach(function(c){if(c.setParent(s),c instanceof ai){var h=c;l.setupParentsIntoColumns(h.getChildren(),h)}})},i.prototype.getOriginalPathForColumn=function(e,s){var l=[],c=!1;return function m(w,R){for(var T=0;T<w.length;T++){if(c)return;var L=w[T];L instanceof mr?(m(L.getChildren(),R+1),l[R]=L):L===s&&(c=!0)}}(e,0),c?l:(console.warn("could not get path"),null)},i=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([vt("displayedGroupCreator")],i),i}(Ke),ps=function(){function d(){}return d.STRING_PROPERTIES=["sortingOrder","rowClass","rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","quickFilterText","rowModelType","editType","domLayout","clipboardDeliminator","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","serverSideStoreType","groupDisplayType","treeDataDisplayType"],d.OBJECT_PROPERTIES=["components","frameworkComponents","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultExportParams","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","colResizeDefault","statusBar","sideBar","chartThemeOverrides","customChartThemes"],d.ARRAY_PROPERTIES=["alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes"],d.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","colWidth","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","minColWidth","maxColWidth","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","scrollbarWidth","batchUpdateWaitMillis","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"],d.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellSelection","suppressHorizontalScroll","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","angularCompileRows","angularCompileFilters","groupSuppressAutoColumn","groupSelectsChildren","groupIncludeFooter","groupIncludeTotalFooter","groupUseEntireRow","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","deprecatedEmbedFullWidthRows","suppressPaginationPanel","floatingFilter","groupHideOpenParents","groupMultiAutoColumn","pagination","stopEditingWhenGridLosesFocus","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","deltaRowDataMode","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDownAfterEdit","enterMovesDown","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressEnterpriseResetOnNewColumns","enableOldSetFilterModel","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","serverSideSortingAlwaysResets","suppressSetColumnStateEvents","suppressColumnStateEvents","enableCharts","deltaColumnMode","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","immutableData","immutableColumns","pivotSuppressAutoColumn","suppressExpandablePivotGroups","applyColumnDefOrder","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilteringAlwaysResets","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","reactUi"],d.ALL_PROPERTIES=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s}(d.ARRAY_PROPERTIES,d.OBJECT_PROPERTIES,d.STRING_PROPERTIES,d.NUMBER_PROPERTIES,d.FUNCTION_PROPERTIES=["localeTextFunc","groupRowInnerRenderer","groupRowInnerRendererFramework","groupRowRenderer","groupRowRendererFramework","isExternalFilterPresent","getRowHeight","doesExternalFilterPass","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","groupRowAggNodes","getRowNodeId","isFullWidthCell","fullWidthCellRenderer","fullWidthCellRendererFramework","processSecondaryColDef","processSecondaryColGroupDef","getBusinessKeyForNode","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","loadingCellRenderer","loadingCellRendererFramework","loadingOverlayComponent","loadingOverlayComponentFramework","noRowsOverlayComponent","noRowsOverlayComponentFramework","detailCellRenderer","detailCellRendererFramework","isRowMaster","isRowSelectable","postSort","processHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","suppressKeyboardEvent","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideStoreParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","defaultGroupSortComparator","defaultGroupOrderComparator","loadingCellRendererSelector"],d.BOOLEAN_PROPERTIES),d.FRAMEWORK_PROPERTIES=["__ob__","__v_skip","__metadata__","mappedColumnProperties","hasChildColumns","toColDef","createColDefFromGridColumn"],d}(),D_=function(){return D_=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},D_.apply(this,arguments)},WE=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s},Ho=function(){function d(){}return d.getEventCallbacks=function(){return d.EVENT_CALLBACKS||(d.EVENT_CALLBACKS=d.EVENTS.map(function(i){return d.getCallbackForEvent(i)})),d.EVENT_CALLBACKS},d.copyAttributesToGridOptions=function(i,e,s){"object"!=typeof i&&(i={});var l=i,c=function(m){return void 0!==e[m]};return WE(d.ARRAY_PROPERTIES,d.STRING_PROPERTIES,d.OBJECT_PROPERTIES,d.FUNCTION_PROPERTIES,d.getEventCallbacks()).filter(c).forEach(function(h){return l[h]=e[h]}),d.BOOLEAN_PROPERTIES.filter(c).forEach(function(h){return l[h]=d.toBoolean(e[h])}),d.NUMBER_PROPERTIES.filter(c).forEach(function(h){return l[h]=d.toNumber(e[h])}),i},d.getCallbackForEvent=function(i){return!i||i.length<2?i:"on"+i[0].toUpperCase()+i.substr(1)},d.processOnChange=function(i,e,s,l){if(i){var c=D_({},i),h=e,m=function(L){return c[L]};WE(d.ARRAY_PROPERTIES,d.OBJECT_PROPERTIES,d.STRING_PROPERTIES,d.getEventCallbacks()).filter(m).forEach(function(T){return h[T]=c[T].currentValue}),d.BOOLEAN_PROPERTIES.filter(m).forEach(function(T){return h[T]=d.toBoolean(c[T].currentValue)}),d.NUMBER_PROPERTIES.filter(m).forEach(function(T){return h[T]=d.toNumber(c[T].currentValue)}),c.enableCellTextSelection&&(s.setEnableCellTextSelection(d.toBoolean(c.enableCellTextSelection.currentValue)),delete c.enableCellTextSelection),c.quickFilterText&&(s.setQuickFilter(c.quickFilterText.currentValue),delete c.quickFilterText),c.autoGroupColumnDef&&(s.setAutoGroupColumnDef(c.autoGroupColumnDef.currentValue,"gridOptionsChanged"),delete c.autoGroupColumnDef),c.columnDefs&&(s.setColumnDefs(c.columnDefs.currentValue,"gridOptionsChanged"),delete c.columnDefs),c.paginationPageSize&&(s.paginationSetPageSize(d.toNumber(c.paginationPageSize.currentValue)),delete c.paginationPageSize),c.pivotMode&&(l.setPivotMode(d.toBoolean(c.pivotMode.currentValue)),delete c.pivotMode),c.groupRemoveSingleChildren&&(s.setGroupRemoveSingleChildren(d.toBoolean(c.groupRemoveSingleChildren.currentValue)),delete c.groupRemoveSingleChildren),c.suppressRowDrag&&(s.setSuppressRowDrag(d.toBoolean(c.suppressRowDrag.currentValue)),delete c.suppressRowDrag),c.suppressMoveWhenRowDragging&&(s.setSuppressMoveWhenRowDragging(d.toBoolean(c.suppressMoveWhenRowDragging.currentValue)),delete c.suppressMoveWhenRowDragging),c.suppressRowClickSelection&&(s.setSuppressRowClickSelection(d.toBoolean(c.suppressRowClickSelection.currentValue)),delete c.suppressRowClickSelection),c.suppressClipboardPaste&&(s.setSuppressClipboardPaste(d.toBoolean(c.suppressClipboardPaste.currentValue)),delete c.suppressClipboardPaste),c.headerHeight&&(s.setHeaderHeight(d.toNumber(c.headerHeight.currentValue)),delete c.headerHeight);var w=s;Object.keys(c).forEach(function(T){var L="set"+T.charAt(0).toUpperCase()+T.substring(1);w[L]&&w[L](i[T].currentValue)});var R={type:$.EVENT_COMPONENT_STATE_CHANGED,api:e.api,columnApi:e.columnApi};Fn(i,function(T,L){R[T]=L}),s.dispatchEvent(R)}},d.toBoolean=function(i){return"boolean"==typeof i?i:"string"==typeof i&&("TRUE"===i.toUpperCase()||""==i)},d.toNumber=function(i){return"number"==typeof i?i:"string"==typeof i?Number(i):void 0},d.EVENTS=[],d.PUBLIC_EVENTS=[],d.EXCLUDED_INTERNAL_EVENTS=[],d.STRING_PROPERTIES=ps.STRING_PROPERTIES,d.OBJECT_PROPERTIES=ps.OBJECT_PROPERTIES,d.ARRAY_PROPERTIES=ps.ARRAY_PROPERTIES,d.NUMBER_PROPERTIES=ps.NUMBER_PROPERTIES,d.BOOLEAN_PROPERTIES=ps.BOOLEAN_PROPERTIES,d.FUNCTION_PROPERTIES=ps.FUNCTION_PROPERTIES,d.ALL_PROPERTIES=ps.ALL_PROPERTIES,d}();Ho.EVENTS=me($),Ho.EXCLUDED_INTERNAL_EVENTS=[$.EVENT_SCROLLBAR_WIDTH_CHANGED,$.EVENT_CHECKBOX_CHANGED,$.EVENT_HEIGHT_SCALE_CHANGED,$.EVENT_BODY_HEIGHT_CHANGED,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,$.EVENT_SCROLL_VISIBILITY_CHANGED,$.EVENT_COLUMN_HOVER_CHANGED,$.EVENT_FLASH_CELLS,$.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,$.EVENT_DISPLAYED_ROWS_CHANGED,$.EVENT_LEFT_PINNED_WIDTH_CHANGED,$.EVENT_RIGHT_PINNED_WIDTH_CHANGED,$.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,$.EVENT_POPUP_TO_FRONT,$.EVENT_KEYBOARD_FOCUS,$.EVENT_MOUSE_FOCUS,$.EVENT_STORE_UPDATED,$.EVENT_COLUMN_PANEL_ITEM_DRAG_START,$.EVENT_COLUMN_PANEL_ITEM_DRAG_END,$.EVENT_FILL_START,$.EVENT_FILL_END],Ho.PUBLIC_EVENTS=Ho.EVENTS.filter(function(d){return!xn(Ho.EXCLUDED_INTERNAL_EVENTS,d)});var yM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),zE=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.componentsMappedByName={},e}return yM(i,d),i.prototype.setupComponents=function(e){var s=this;e&&e.forEach(function(l){return s.addComponent(l)})},i.prototype.addComponent=function(e){var l=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[l]=e.componentClass},i.prototype.getComponentClass=function(e){return this.componentsMappedByName[e]},i=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([vt("agStackComponentsRegistry")],i),i}(Ke),sr=function(){function d(){}return d.STRING_PROPERTIES=["headerName","columnGroupShow","headerClass","toolPanelClass","headerValueGetter","pivotKeys","groupId","colId","sort","initialSort","field","type","tooltipComponent","tooltipField","headerTooltip","cellClass","showRowGroup","template","templateUrl","filter","initialAggFunc","aggFunc","cellRenderer","cellEditor","pinned","initialPinned","chartDataType","cellEditorPopupPosition"],d.OBJECT_PROPERTIES=["headerGroupComponent","headerGroupComponentFramework","headerGroupComponentParams","cellStyle","cellRendererParams","cellEditorFramework","cellEditorParams","pinnedRowCellRendererFramework","pinnedRowCellRendererParams","filterFramework","filterParams","pivotValueColumn","headerComponent","headerComponentFramework","headerComponentParams","floatingFilterComponent","floatingFilterComponentParams","floatingFilterComponentFramework","tooltipComponent","tooltipComponentParams","tooltipComponentFramework","refData","columnsMenuParams"],d.ARRAY_PROPERTIES=["children","sortingOrder","allowedAggFuncs","menuTabs","pivotTotalColumnIds","cellClassRules","icons"],d.NUMBER_PROPERTIES=["sortedAt","sortIndex","initialSortIndex","flex","initialFlex","width","initialWidth","minWidth","maxWidth","rowGroupIndex","initialRowGroupIndex","pivotIndex","initialPivotIndex"],d.BOOLEAN_PROPERTIES=["suppressCellFlash","suppressColumnsToolPanel","suppressFiltersToolPanel","openByDefault","marryChildren","hide","initialHide","rowGroup","initialRowGroup","pivot","initialPivot","checkboxSelection","headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","suppressMenu","suppressMovable","lockPosition","lockVisible","lockPinned","unSortIcon","suppressSizeToFit","suppressAutoSize","enableRowGroup","enablePivot","enableValue","editable","suppressPaste","suppressNavigable","enableCellChangeFlash","rowDrag","dndSource","autoHeight","wrapText","sortable","resizable","singleClickEdit","floatingFilter","cellEditorPopup","suppressFillHandle"],d.ALL_PROPERTIES=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s}(d.ARRAY_PROPERTIES,d.OBJECT_PROPERTIES,d.STRING_PROPERTIES,d.NUMBER_PROPERTIES,d.FUNCTION_PROPERTIES=["dndSourceOnRowDrag","valueGetter","valueSetter","filterValueGetter","keyCreator","cellRenderer","cellRendererFramework","pinnedRowCellRenderer","valueFormatter","pinnedRowValueFormatter","valueParser","comparator","equals","pivotComparator","suppressKeyboardEvent","suppressHeaderKeyboardEvent","colSpan","rowSpan","getQuickFilterText","newValueHandler","onCellValueChanged","onCellClicked","onCellDoubleClicked","onCellContextMenu","rowDragText","tooltipValueGetter","tooltipComponent","tooltipComponentFramework","cellRendererSelector","cellEditorSelector"],d.BOOLEAN_PROPERTIES),d.FRAMEWORK_PROPERTIES=["__ob__","__v_skip","__metadata__","mappedColumnProperties","hasChildColumns","toColDef","createColDefFromGridColumn"],d}(),jc=function(){function d(i,e,s,l){void 0===l&&(l=1),this.r=Math.min(1,Math.max(0,i||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,s||0)),this.a=Math.min(1,Math.max(0,l||0))}return d.fromString=function(i){if(i.indexOf("#")>=0)return d.fromHexString(i);var e=d.nameToHex[i];if(e)return d.fromHexString(e);if(i.indexOf("rgb")>=0)return d.fromRgbaString(i);throw new Error("Invalid color string: '"+i+"'")},d.parseHex=function(i){var e;switch((i=i.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(var s=0;s<i.length;s+=2)e.push(parseInt(""+i[s]+i[s+1],16));break;case 3:case 4:e=i.split("").map(function(l){return parseInt(l,16)}).map(function(l){return l+16*l})}if(e.length>=3&&e.every(function(l){return l>=0}))return 3===e.length&&e.push(255),e},d.fromHexString=function(i){var e=d.parseHex(i);if(e)return new d(e[0]/255,e[1]/255,e[2]/255,e[3]/255);throw new Error("Malformed hexadecimal color string: '"+i+"'")},d.stringToRgba=function(i){for(var e=[NaN,NaN],s=e[0],l=e[1],c=0;c<i.length;c++){var h=i[c];if(s||"("!==h){if(")"===h){l=c;break}}else s=c}var m=s&&l&&i.substring(s+1,l);if(m){var w=m.split(","),R=[];for(c=0;c<w.length;c++){var T=w[c],L=parseFloat(T);if(isNaN(L))return;T.indexOf("%")>=0?(L=Math.max(0,Math.min(100,L)),L/=100):3===c?L=Math.max(0,Math.min(1,L)):(L=Math.max(0,Math.min(255,L)),L/=255),R.push(L)}return R}},d.fromRgbaString=function(i){var e=d.stringToRgba(i);if(e){if(3===e.length)return new d(e[0],e[1],e[2]);if(4===e.length)return new d(e[0],e[1],e[2],e[3])}throw new Error("Malformed rgb/rgba color string: '"+i+"'")},d.fromArray=function(i){if(4===i.length)return new d(i[0],i[1],i[2],i[3]);if(3===i.length)return new d(i[0],i[1],i[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},d.fromHSB=function(i,e,s,l){void 0===l&&(l=1);var c=d.HSBtoRGB(i,e,s);return new d(c[0],c[1],c[2],l)},d.padHex=function(i){return 1===i.length?"0"+i:i},d.prototype.toHexString=function(){var i="#"+d.padHex(Math.round(255*this.r).toString(16))+d.padHex(Math.round(255*this.g).toString(16))+d.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(i+=d.padHex(Math.round(255*this.a).toString(16))),i},d.prototype.toRgbaString=function(i){void 0===i&&(i=3);var e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],s=Math.pow(10,i);return 1!==this.a?(e.push(Math.round(this.a*s)/s),"rgba("+e.join(", ")+")"):"rgb("+e.join(", ")+")"},d.prototype.toString=function(){return 1===this.a?this.toHexString():this.toRgbaString()},d.prototype.toHSB=function(){return d.RGBtoHSB(this.r,this.g,this.b)},d.RGBtoHSB=function(i,e,s){var l=Math.min(i,e,s),c=Math.max(i,e,s),m=NaN;if(l!==c){var w=c-l,R=(c-i)/w,T=(c-e)/w,L=(c-s)/w;m=i===c?L-T:e===c?2+R-L:4+T-R,(m/=6)<0&&(m+=1)}return[360*m,0!==c?(c-l)/c:0,c]},d.HSBtoRGB=function(i,e,s){isNaN(i)&&(i=0),i=(i%360+360)%360/360;var l=0,c=0,h=0;if(0===e)l=c=h=s;else{var m=6*(i-Math.floor(i)),w=m-Math.floor(m),R=s*(1-e),T=s*(1-e*w),L=s*(1-e*(1-w));switch(m>>0){case 0:l=s,c=L,h=R;break;case 1:l=T,c=s,h=R;break;case 2:l=R,c=s,h=L;break;case 3:l=R,c=T,h=s;break;case 4:l=L,c=R,h=s;break;case 5:l=s,c=R,h=T}}return[l,c,h]},d.prototype.derive=function(i,e,s,l){var c=d.RGBtoHSB(this.r,this.g,this.b),h=c[2];0==h&&s>1&&(h=.05);var m=((c[0]+i)%360+360)%360,w=Math.max(Math.min(c[1]*e,1),0);h=Math.max(Math.min(h*s,1),0);var R=Math.max(Math.min(this.a*l,1),0),T=d.HSBtoRGB(m,w,h);return T.push(R),d.fromArray(T)},d.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},d.prototype.darker=function(){return this.derive(0,1,.7,1)},d.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),d}();var un,A_,Vo,qc,Vf,jv,qv,Wf,_M=Object.freeze({__proto__:null,stringToArray:function(d,i){void 0===i&&(i=",");var e=[],s=function(K){return"\r"===K||"\n"===K},l=!1;if(""===d)return[[""]];for(var h,m,w,c=function(K,Q,oe){var Te=d[oe-1],He=d[oe],Ve=d[oe+1],Pe=function(){e[K]||(e[K]=[]),e[K][Q]||(e[K][Q]="")};if(Pe(),'"'===He){if(l)return'"'===Ve?(e[K][Q]+='"',oe++):l=!1,h=K,m=Q,w=oe,"continue";if(void 0===Te||Te===i||s(Te))return l=!0,h=K,m=Q,w=oe,"continue"}if(!l){if(He===i)return Q++,Pe(),h=K,m=Q,w=oe,"continue";if(s(He))return Q=0,K++,Pe(),"\r"===He&&"\n"===Ve&&oe++,h=K,m=Q,w=oe,"continue"}e[K][Q]+=He,h=K,m=Q,w=oe},R=0,T=0,L=0;L<d.length;L++)c(R,T,L),R=h,T=m,L=w;return e}});function qi(){return void 0===A_&&(A_=!!document.documentMode),A_}function Tl(){return void 0===Vo&&(Vo=!qi()&&!!window.StyleMedia),Vo}function Kc(){return void 0===un&&(un=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),un}function Yc(){if(void 0===qc){var d=window;qc=!!d.chrome&&(!!d.chrome.webstore||!!d.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return qc}function Qt(){if(void 0===Vf){var d=window;Vf=void 0!==d.InstallTrigger}return Vf}function Zs(){return void 0===jv&&(jv=(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream),jv}function Uf(d){if(!d)return null;var i=d.tabIndex,e=d.getAttribute("tabIndex");return qi()&&0===i&&null===e?!0==={a:!0,body:!0,button:!0,frame:!0,iframe:!0,img:!0,input:!0,isindex:!0,object:!0,select:!0,textarea:!0}[d.nodeName.toLowerCase()]?"0":null:-1!==i||null!==e&&(""!==e||Qt())?i.toString():null}function hs(){if(!document.body)return-1;var d=1e6,i=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,e=document.createElement("div");for(document.body.appendChild(e);;){var s=2*d;if(e.style.height=s+"px",s>i||e.clientHeight!==s)break;d=s}return document.body.removeChild(e),d}function Kv(){return null==Wf&&qE(),Wf}function qE(){var d=document.body,i=document.createElement("div");i.style.width=i.style.height="100px",i.style.opacity="0",i.style.overflow="scroll",i.style.msOverflowStyle="scrollbar",i.style.position="absolute",d.appendChild(i);var e=i.offsetWidth-i.clientWidth;0===e&&0===i.clientWidth&&(e=null),i.parentNode&&i.parentNode.removeChild(i),null!=e&&(Wf=e,qv=0===e)}function vs(){return null==qv&&qE(),qv}function KE(){return document.body?document.body.clientWidth:window.innerHeight?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:-1}function YE(){return document.body?document.body.clientHeight:window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:-1}var zf,Oa=Object.freeze({__proto__:null,isBrowserIE:qi,isBrowserEdge:Tl,isBrowserSafari:Kc,isBrowserChrome:Yc,isBrowserFirefox:Qt,isIOSUserAgent:Zs,getTabIndex:Uf,getMaxDivHeight:hs,getScrollbarWidth:Kv,isInvisibleScrollbar:vs,hasOverflowScrolling:function(){var d=["webkit","moz","o","ms"],i=document.createElement("div"),s=!1;document.getElementsByTagName("body")[0].appendChild(i),i.setAttribute("style",d.map(function(w){return"-"+w+"-overflow-scrolling: touch"}).concat("overflow-scrolling: touch").join(";"));var c=window.getComputedStyle(i);if("touch"===c.overflowScrolling&&(s=!0),!s)for(var h=0,m=d;h<m.length;h++)if("touch"===c[m[h]+"OverflowScrolling"]){s=!0;break}return i.parentNode&&i.parentNode.removeChild(i),s},getBodyWidth:KE,getBodyHeight:YE});function Dt(d,i){if(d&&i&&0!==i.length){if(i.indexOf(" ")>=0)return void i.split(" ").forEach(function(s){return Dt(d,s)});if(d.classList)d.classList.add(i);else if(d.className&&d.className.length>0){var e=d.className.split(" ");e.indexOf(i)<0&&(e.push(i),d.setAttribute("class",e.join(" ")))}else d.setAttribute("class",i);return d}}function yi(d,i){if(d&&i&&0!==i.length){if(i.indexOf(" ")>=0)return void i.split(" ").forEach(function(s){return yi(d,s)});if(d.classList)d.classList.remove(i);else if(d.className&&d.className.length>0){var e=d.className.split(" ").filter(function(s){return s!==i}).join(" ");d.setAttribute("class",e)}}}function Ft(d,i,e){e?Dt(d,i):yi(d,i)}function gs(d,i){if(d.classList)return d.classList.contains(i);if(d.className){var e=d.className===i,s=d.className.indexOf(" "+i+" ")>=0,l=0===d.className.indexOf(i+" "),c=d.className.lastIndexOf(" "+i)===d.className.length-i.length-1;return e||s||l||c}return!1}function $E(d){var i=Element.prototype.matches||Element.prototype.msMatchesSelector,e=i.call(d,fe.INPUT_SELECTOR),s=i.call(d,fe.FOCUSABLE_EXCLUDE),l=Ml(d);return e&&!s&&l}function $n(d,i){Ft(d,"ag-hidden",!i)}function ir(d,i){Ft(d,"ag-invisible",!i)}function ms(d,i){var e="disabled",s=i?function(l){return l.setAttribute(e,"")}:function(l){return l.removeAttribute(e)};s(d),tu(d.querySelectorAll("input"),function(l){return s(l)})}function Dl(d,i,e){for(var s=0;d;){if(gs(d,i))return!0;if(d=d.parentElement,e&&++s>e)break}return!1}function Iu(d){var i=window.getComputedStyle(d),s=i.width,l=i.paddingTop,c=i.paddingRight,h=i.paddingBottom,m=i.paddingLeft,w=i.marginTop,R=i.marginRight,T=i.marginBottom,L=i.marginLeft,U=i.boxSizing;return{height:parseFloat(i.height),width:parseFloat(s),paddingTop:parseFloat(l),paddingRight:parseFloat(c),paddingBottom:parseFloat(h),paddingLeft:parseFloat(m),marginTop:parseFloat(w),marginRight:parseFloat(R),marginBottom:parseFloat(T),marginLeft:parseFloat(L),boxSizing:U}}function Al(d){var i=Iu(d);return"border-box"===i.boxSizing?i.height-i.paddingTop-i.paddingBottom:i.height}function Wo(d){var i=Iu(d);return"border-box"===i.boxSizing?i.width-i.paddingLeft-i.paddingRight:i.width}function Lu(d){var i=Iu(d);return Math.ceil(d.offsetHeight+(i.marginBottom+i.marginTop))}function jf(d){var i=Iu(d);return Math.ceil(d.offsetWidth+(i.marginLeft+i.marginRight))}function Mr(){if("boolean"==typeof zf)return zf;var d=document.createElement("div");return d.style.direction="rtl",d.style.width="1px",d.style.height="1px",d.style.position="fixed",d.style.top="0px",d.style.overflow="hidden",d.dir="rtl",d.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(d),d.scrollLeft=1,zf=0===Math.floor(d.scrollLeft),document.body.removeChild(d),zf}function $c(d,i){var e=d.scrollLeft;return i&&(e=Math.abs(e),Yc()&&!Mr()&&(e=d.scrollWidth-d.clientWidth-e)),e}function Xc(d,i,e){e&&(Mr()?i*=-1:(Kc()||Yc())&&(i=d.scrollWidth-d.clientWidth-i)),d.scrollLeft=i}function uo(d){for(;d&&d.firstChild;)d.removeChild(d.firstChild)}function _i(d){d&&d.parentNode&&d.parentNode.removeChild(d)}function Ml(d){return null!==d.offsetParent}function sa(d){var i=document.createElement("div");return i.innerHTML=(d||"").trim(),i.firstChild}function si(d){return d&&d.clientHeight?d.clientHeight:0}function Pa(d){return d&&d.clientWidth?d.clientWidth:0}function ys(d,i,e){e&&e.nextSibling===i||(e?e.nextSibling?d.insertBefore(i,e.nextSibling):d.appendChild(i):d.firstChild&&d.firstChild!==i&&d.insertAdjacentElement("afterbegin",i))}function co(d,i){for(var e=0;e<i.length;e++){var s=i[e],l=d.children[e];l!==s&&d.insertBefore(s,l)}}function Jc(d,i,e){e?e.insertAdjacentElement("afterend",i):d.firstChild?d.insertAdjacentElement("afterbegin",i):d.appendChild(i)}function Fu(d,i){!i||Object.keys(i).forEach(function(e){var s=Gv(e);s&&(d.style[s]=i[e])})}function Ol(d){return d.clientWidth<d.scrollWidth}function Qs(d){return d.clientHeight<d.scrollHeight}function Hr(d,i){"flex"===i?(d.style.removeProperty("width"),d.style.removeProperty("minWidth"),d.style.removeProperty("maxWidth"),d.style.flex="1 1 auto"):Ia(d,i)}function Ia(d,i){i=_n(i),d.style.width=i.toString(),d.style.maxWidth=i.toString(),d.style.minWidth=i.toString()}function ut(d,i){i=_n(i),d.style.height=i.toString(),d.style.maxHeight=i.toString(),d.style.minHeight=i.toString()}function _n(d){return"number"==typeof d?d+"px":d}function fr(d){return"function"==typeof Node?d instanceof Node:d&&"object"==typeof d&&"number"==typeof d.nodeType&&"string"==typeof d.nodeName}function fo(d){return"function"==typeof HTMLElement?d instanceof HTMLElement:d&&bl(d)&&1===d.nodeType&&"string"==typeof d.nodeName}function La(d){return fr(d)||fo(d)}function Jr(d){if(null==d)return[];var i=[];return tu(d,function(e){return i.push(e)}),i}function eu(d,i){if(d)for(var e=0;e<d.length;e++){var s=d[e];i(s.name,s.value)}}function _s(d,i,e){null==e?d.removeAttribute(i):d.setAttribute(i,e.toString())}function tu(d,i){if(null!=d)for(var e=0;e<d.length;e++)i(d[e])}var gn=Object.freeze({__proto__:null,addCssClass:Dt,removeCssClass:yi,addOrRemoveCssClass:Ft,radioCssClass:function(d,i,e){for(var s=d.parentElement,l=s&&s.firstChild;l;)i&&Ft(l,i,l===d),e&&Ft(l,e,l!==d),l=l.nextSibling},containsClass:gs,isFocusableFormField:$E,setDisplayed:$n,setVisible:ir,setDisabled:ms,isElementChildOfClass:Dl,getElementSize:Iu,getInnerHeight:Al,getInnerWidth:Wo,getAbsoluteHeight:Lu,getAbsoluteWidth:jf,isRtlNegativeScroll:Mr,getScrollLeft:$c,setScrollLeft:Xc,clearElement:uo,removeElement:function(d,i){_i(d.querySelector(i))},removeFromParent:_i,isVisible:Ml,loadTemplate:sa,appendHtml:function(d,i){d.lastChild?d.insertAdjacentHTML("afterbegin",i):d.innerHTML=i},getElementAttribute:function(d,i){return d.attributes&&d.attributes[i]?d.attributes[i].value:null},offsetHeight:si,offsetWidth:Pa,ensureDomOrder:ys,setDomChildOrder:co,insertWithDomOrder:Jc,prependDC:function(d,i){Fe(d.firstChild)?d.insertBefore(i,d.firstChild):d.appendChild(i)},addStylesToElement:Fu,isHorizontalScrollShowing:Ol,isVerticalScrollShowing:Qs,setElementWidth:Hr,setFixedWidth:Ia,setElementHeight:function(d,i){"flex"===i?(d.style.removeProperty("height"),d.style.removeProperty("minHeight"),d.style.removeProperty("maxHeight"),d.style.flex="1 1 auto"):ut(d,i)},setFixedHeight:ut,formatSize:_n,isNode:fr,isElement:fo,isNodeOrElement:La,copyNodeList:Jr,iterateNamedNodeMap:eu,setCheckboxState:function(d,i){"boolean"==typeof i?(d.checked=i,d.indeterminate=!1):d.indeterminate=!0},addOrRemoveAttribute:_s,nodeListForEach:tu}),Zc=Object.freeze({__proto__:null,getNameOfClass:function(d){var e=d.toString(),s=/function (.{1,})\(/.exec(e);return s&&s.length>1?s[1]:""},findLineByLeastSquares:function(d){var i=d.length,e=0;if(i<=1)return d;for(var s=0;s<d.length;s++){var l=d[s],c=l.toString().split("e-");c.length>1?e=Math.max(e,parseInt(c[1],10)):Math.floor(l)!==l&&(e=Math.max(e,l.toString().split(".")[1].length))}for(var h=0,m=0,w=0,R=0,T=0,L=0;L<i;L++)h+=L,m+=T=d[L],R+=L*L,w+=L*T;var U=(i*w-h*m)/(i*R-h*h),K=m/i-U*h/i,Q=[];for(L=0;L<=i;L++)Q.push(parseFloat((L*U+K).toFixed(e)));return Q},cssStyleObjectToMarkup:function(d){if(!d)return"";var i=[];return Fn(d,function(e,s){var l=R_(e);i.push(l+": "+s+";")}),i.join(" ")},message:function(d){var i=document.createElement("div"),e=document.querySelector("#__ag__message");i.innerHTML=d,e||(e=sa('<div id="__ag__message" style="display: inline-block; position: absolute; top: 0px; left: 0px; color: white; background-color: black; z-index: 20; padding: 2px; border: 1px solid darkred; height: 200px; overflow-y: auto;"></div>'),document.body&&document.body.appendChild(e)),e.insertBefore(i,e.children[0])},bindCellRendererToHtmlElement:function(d,i){d.then(function(e){var s=e.getGui();null!=s&&("object"==typeof s?i.appendChild(s):i.innerHTML=s)})}});function Er(d,i,e){d.setAttribute(ur(i),e.toString())}function Bi(d,i){d.removeAttribute(ur(i))}function ur(d){return"aria-"+d}function Ki(d,i){i?d.setAttribute("role",i):d.removeAttribute("role")}function O_(d){return d.isSortAscending()?"ascending":d.isSortDescending()?"descending":"none"}function zo(d){return parseInt(d.getAttribute("aria-posinset"),10)}function Na(d,i){var e="label";i?Er(d,e,i):Bi(d,e)}function Ll(d,i){var e="labelledby";i?Er(d,e,i):Bi(d,e)}function ho(d,i){var e="describedby";i?Er(d,e,i):Bi(d,e)}function Kf(d,i){Er(d,"disabled",i)}function Yf(d,i){Er(d,"expanded",i)}function ZE(d,i){Er(d,"setsize",i)}function QE(d,i){Er(d,"posinset",i)}function eb(d,i){Er(d,"multiselectable",i)}function tb(d,i){Er(d,"rowcount",i)}function P_(d,i){Er(d,"rowindex",i)}function nb(d,i){Er(d,"colcount",i)}function I_(d,i){Er(d,"colindex",i)}function rb(d,i){Er(d,"colspan",i)}function ib(d,i){Er(d,"sort",i)}function ob(d){Bi(d,"sort")}function Qc(d,i){var e="selected";i?Er(d,e,i):Bi(d,e)}function ab(d,i){Er(d,"checked",void 0===i?"mixed":i)}var CM=Object.freeze({__proto__:null,setAriaRole:Ki,getAriaSortState:O_,getAriaLevel:function(d){return parseInt(d.getAttribute("aria-level"),10)},getAriaPosInSet:zo,getAriaDescribedBy:function(d){return d.getAttribute("aria-describedby")||""},setAriaLabel:Na,setAriaLabelledBy:Ll,setAriaDescribedBy:ho,setAriaLevel:function(d,i){Er(d,"level",i)},setAriaDisabled:Kf,setAriaExpanded:Yf,removeAriaExpanded:function(d){Bi(d,"expanded")},setAriaSetSize:ZE,setAriaPosInSet:QE,setAriaMultiSelectable:eb,setAriaRowCount:tb,setAriaRowIndex:P_,setAriaColCount:nb,setAriaColIndex:I_,setAriaColSpan:rb,setAriaSort:ib,removeAriaSort:ob,setAriaSelected:Qc,setAriaChecked:ab});function Nu(d,i,e){if(void 0===i&&(i=!0),void 0===e&&(e="-"),!d)return null;var s=[d.getFullYear(),d.getMonth()+1,d.getDate()].map(function(l){return Bf(l,2)}).join(e);return i&&(s+=" "+[d.getHours(),d.getMinutes(),d.getSeconds()].map(function(l){return Bf(l,2)}).join(":")),s}function Cs(d){if(!d)return null;var i=d.split(" "),e=i[0],s=i[1];if(!e)return null;var l=e.split("-").map(function(K){return parseInt(K,10)});if(3!==l.filter(function(K){return!isNaN(K)}).length)return null;var c=l[0],h=l[1],m=l[2],w=new Date(c,h-1,m);if(w.getFullYear()!==c||w.getMonth()!==h-1||w.getDate()!==m)return null;if(!s||"00:00:00"===s)return w;var R=s.split(":").map(function(K){return parseInt(K,10)}),T=R[0],L=R[1],U=R[2];return T>=0&&T<24&&w.setHours(T),L>=0&&L<60&&w.setMinutes(L),U>=0&&U<60&&w.setSeconds(U),w}var Jv=Object.freeze({__proto__:null,serialiseDate:Nu,parseDateTimeFromString:Cs});function sb(d,i,e){var s={},l=d.filter(function(c){return!i.some(function(h){return h===c})});return l.length>0&&l.forEach(function(c){return s[c]=ub(c,e)}),s}function ub(d,i,e,s){var l=s?F_:nu,c=i.map(function(h){return{value:h,relevance:l(d.toLowerCase(),h.toLocaleLowerCase())}});return c.sort(function(h,m){return m.relevance-h.relevance}),e&&(c=c.filter(function(h){return 0!==h.relevance})),c.map(function(h){return h.value})}function L_(d){var s,l,c,i=d.toLowerCase(),e=new Array(i.length-1);for(s=l=0,c=e.length;l<=c;s=l+=1)e[s]=i.slice(s,s+2);return e}function nu(d,i){if(0===d.length&&0===i.length)return 0;var h,m,e=L_(d),s=L_(i),l=e.length+s.length,c=0;for(h=0,m=e.length;h<m;h++){var T,w=e[h],R=void 0;for(R=0,T=s.length;R<T;R++)w===s[R]&&c++}return c>0?2*c/l:0}function F_(d,i){for(var e=d.replace(/\s/g,""),s=i.replace(/\s/g,""),l=0,c=0,h=0;h<e.length;h++){var m=s.indexOf(e[h],c);-1!==m&&(l+=100-100*(c=m)/1e4*100)}return l}var ua=Object.freeze({__proto__:null,fuzzyCheckStrings:sb,fuzzySuggestions:ub,get_bigrams:L_,string_distances:nu,string_weighted_distances:F_}),Zv={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"};function jo(d,i,e){var s=ui(d,i,e);if(s&&s.className.indexOf("ag-icon")>-1)return s;var l=document.createElement("span");return l.appendChild(s),l}function ui(d,i,e,s){var l=null,c=e&&e.getColDef().icons;if(c&&(l=c[d]),i&&!l){var h=i.getIcons();h&&(l=h[d])}if(!l){var w=document.createElement("span"),R=Zv[d];return R||(s?R=d:(console.warn("AG Grid: Did not find icon "+d),R="")),w.setAttribute("class","ag-icon ag-icon-"+R),w.setAttribute("unselectable","on"),Ki(w,"presentation"),w}var m=void 0;if("function"==typeof l)m=l();else{if("string"!=typeof l)throw new Error("icon from grid options needs to be a string or a function");m=l}return"string"==typeof m?sa(m):La(m)?m:void console.warn("AG Grid: iconRenderer should return back a string or a dom object")}var N_=Object.freeze({__proto__:null,iconNameClassMap:Zv,createIcon:jo,createIconNoSpan:ui});function ed(d,i){return(d.which||d.keyCode)===i}function G_(d){if(d.altKey||d.ctrlKey||d.metaKey)return!1;var i=1===d.key.length,e=function(d){return(Tl()||qi())&&"Del"===d.key&&46===d.charCode}(d);return i||e}function Yi(d,i,e,s,l){var c=d.getSuppressKeyboardEventFunc(),h=s?s.getColDef().suppressKeyboardEvent:void 0;if(!c&&!h)return!1;var m={event:i,editing:l,column:s,api:d.getApi(),node:e,data:e.data,colDef:s.getColDef(),context:d.getContext(),columnApi:d.getColumnApi()};return!(!h||!h(m))||!!c&&c(m)}function Qv(d,i,e,s){var l=s.getDefinition(),c=l&&l.suppressHeaderKeyboardEvent;return!!Fe(c)&&!!c({api:d.getApi(),columnApi:d.getColumnApi(),context:d.getContext(),colDef:l,column:s,headerRowIndex:e,event:i})}var eg=Object.freeze({__proto__:null,isKeyPressed:ed,isEventFromPrintableCharacter:G_,isUserSuppressingKeyboardEvent:Yi,isUserSuppressingHeaderKeyboardEvent:Qv});function H_(d,i,e){if(0===e)return!1;var s=Math.abs(d.clientX-i.clientX),l=Math.abs(d.clientY-i.clientY);return Math.max(s,l)<=e}var br=Object.freeze({__proto__:null,normalizeWheel:function(d){var l=0,c=0,h=0,m=0;return"detail"in d&&(c=d.detail),"wheelDelta"in d&&(c=-d.wheelDelta/120),"wheelDeltaY"in d&&(c=-d.wheelDeltaY/120),"wheelDeltaX"in d&&(l=-d.wheelDeltaX/120),"axis"in d&&d.axis===d.HORIZONTAL_AXIS&&(l=c,c=0),h=10*l,m=10*c,"deltaY"in d&&(m=d.deltaY),"deltaX"in d&&(h=d.deltaX),(h||m)&&d.deltaMode&&(1==d.deltaMode?(h*=40,m*=40):(h*=800,m*=800)),h&&!l&&(l=h<1?-1:1),m&&!c&&(c=m<1?-1:1),{spinX:l,spinY:c,pixelX:h,pixelY:m}},isLeftClick:function(d){return"buttons"in d?1==d.buttons:1==(d.which||d.button)},areEventsNear:H_}),Vr=Object.freeze({__proto__:null,sortRowNodesByOrder:function(d,i){if(d){for(var e=function(w,R){var T=i[w.id],L=i[R.id],U=void 0!==T,K=void 0!==L;return U&&K?T-L:U||K?U?1:-1:w.__objectId-R.__objectId},c=!1,h=0;h<d.length-1;h++)if(e(d[h],d[h+1])>0){c=!0;break}c&&d.sort(e)}},traverseNodesWithKey:function(d,i){var e=[];!function s(l){!l||l.forEach(function(c){if(c.group||c.hasChildren()){e.push(c.key);var h=e.join("|");i(c,h),s(c.childrenAfterGroup),e.pop()}})}(d)}});function ng(d){var i=new Set;return d.forEach(function(e){return i.add(e)}),i}var wM=Object.freeze({__proto__:null,convertToSet:ng}),pr=function(){return pr=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},pr.apply(this,arguments)},yt=pr(pr(pr(pr(pr(pr(pr(pr(pr(pr(pr(pr(pr(pr(pr(pr(pr(pr(pr(pr({},Zc),CM),ls),Oa),_M),Jv),gn),zc),h_),ua),$s),N_),eg),Vv),br),vM),ds),Vr),wM),Gf),ws=function(){function d(i,e){void 0===i&&(i=0),void 0===e&&(e=1),this.nextValue=i,this.step=e}return d.prototype.next=function(){var i=this.nextValue;return this.nextValue+=this.step,i},d.prototype.peek=function(){return this.nextValue},d.prototype.skip=function(i){this.nextValue+=i},d}();!function(d){d[d.IN_PROGRESS=0]="IN_PROGRESS",d[d.RESOLVED=1]="RESOLVED"}(Y.Ws0||(Y.Ws0={}));var Zr=function(){function d(i){var e=this;this.status=Y.Ws0.IN_PROGRESS,this.resolution=null,this.waiters=[],i(function(s){return e.onDone(s)},function(s){return e.onReject(s)})}return d.all=function(i){return new d(function(e){var s=i.length,l=new Array(s);Wt(i,function(c,h){c.then(function(m){l[h]=m,0==--s&&e(l)})})})},d.resolve=function(i){return void 0===i&&(i=null),new d(function(e){return e(i)})},d.prototype.then=function(i){var e=this;return new d(function(s){e.status===Y.Ws0.RESOLVED?s(i(e.resolution)):e.waiters.push(function(l){return s(i(l))})})},d.prototype.resolveNow=function(i,e){return this.status===Y.Ws0.RESOLVED?e(this.resolution):i},d.prototype.onDone=function(i){this.status=Y.Ws0.RESOLVED,this.resolution=i,Wt(this.waiters,function(e){return e(i)})},d.prototype.onReject=function(i){console.warn("TBI")},d}(),W_=(function(){function d(){this.timestamp=(new Date).getTime()}d.prototype.print=function(i){var e=(new Date).getTime()-this.timestamp;console.info(i+" = "+e),this.timestamp=(new Date).getTime()}}(),function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}()),td=function(){return td=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},td.apply(this,arguments)},nd=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Qr=function(){return function(d){d[d.NOTHING=0]="NOTHING",d[d.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",d[d.SHOWING=2]="SHOWING"}(Qr||(Qr={})),Qr}(),$f=function(d){function i(e){var s=d.call(this)||this;return s.DEFAULT_HIDE_TOOLTIP_TIMEOUT=1e4,s.SHOW_QUICK_TOOLTIP_DIFF=1e3,s.FADE_OUT_TOOLTIP_TIMEOUT=1e3,s.state=Qr.NOTHING,s.tooltipInstanceCount=0,s.tooltipMouseTrack=!1,s.parentComp=e,s}return W_(i,d),i.prototype.postConstruct=function(){this.tooltipShowDelay=this.gridOptionsWrapper.getTooltipShowDelay()||2e3,this.tooltipMouseTrack=this.gridOptionsWrapper.isTooltipMouseTrack();var e=this.parentComp.getGui();this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this)),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this))},i.prototype.destroy=function(){this.setToDoNothing(),d.prototype.destroy.call(this)},i.prototype.onMouseEnter=function(e){if(!Zs()&&this.state==Qr.NOTHING){var s=this.isLastTooltipHiddenRecently()?200:this.tooltipShowDelay;this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),s),this.lastMouseEvent=e,this.state=Qr.WAITING_TO_SHOW}},i.prototype.onMouseLeave=function(){this.setToDoNothing()},i.prototype.onKeyDown=function(){this.setToDoNothing()},i.prototype.setToDoNothing=function(){this.state===Qr.SHOWING&&this.hideTooltip(),this.clearTimeouts(),this.state=Qr.NOTHING},i.prototype.onMouseMove=function(e){this.lastMouseEvent=e,this.tooltipMouseTrack&&this.state===Qr.SHOWING&&this.tooltipComp&&this.positionTooltipUnderLastMouseEvent()},i.prototype.onMouseDown=function(){this.setToDoNothing()},i.prototype.hideTooltip=function(){this.tooltipComp&&(this.destroyTooltipComp(),i.lastTooltipHideTime=(new Date).getTime()),this.state=Qr.NOTHING},i.prototype.destroyTooltipComp=function(){var e=this;Dt(this.tooltipComp.getGui(),"ag-tooltip-hiding");var s=this.tooltipPopupDestroyFunc,l=this.tooltipComp;window.setTimeout(function(){s(),e.getContext().destroyBean(l)},this.FADE_OUT_TOOLTIP_TIMEOUT),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0},i.prototype.isLastTooltipHiddenRecently=function(){return(new Date).getTime()-i.lastTooltipHideTime<this.SHOW_QUICK_TOOLTIP_DIFF},i.prototype.showTooltip=function(){var e=td({api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()},this.parentComp.getTooltipParams());if(Fe(e.value)){this.state=Qr.SHOWING,this.tooltipInstanceCount++;var s=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(s)}else this.setToDoNothing()},i.prototype.newTooltipComponentCallback=function(e,s){if(this.state!==Qr.SHOWING||this.tooltipInstanceCount!==e)this.getContext().destroyBean(s);else{var c=s.getGui();this.tooltipComp=s,gs(c,"ag-tooltip")||Dt(c,"ag-tooltip-custom"),this.gridOptionsWrapper.isReactUi()&&Dt(c,"ag-tooltip-reactui");var h=this.gridOptionsWrapper.getLocaleTextFunc(),m=this.popupService.addPopup({eChild:c,ariaLabel:h("ariaLabelTooltip","Tooltip")});m&&(this.tooltipPopupDestroyFunc=m.hideFunc),this.positionTooltipUnderLastMouseEvent(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.DEFAULT_HIDE_TOOLTIP_TIMEOUT)}},i.prototype.positionTooltipUnderLastMouseEvent=function(){this.popupService.positionPopupUnderMouseEvent({type:"tooltip",mouseEvent:this.lastMouseEvent,ePopup:this.tooltipComp.getGui(),nudgeY:18})},i.prototype.clearTimeouts=function(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0),this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)},nd([H("popupService")],i.prototype,"popupService",void 0),nd([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),nd([H("columnApi")],i.prototype,"columnApi",void 0),nd([H("gridApi")],i.prototype,"gridApi",void 0),nd([Qe],i.prototype,"postConstruct",null),i}(Ke),rg=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),zt=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},SM=new ws,pn=function(d){function i(e){var s=d.call(this)||this;return s.displayed=!0,s.visible=!0,s.compId=SM.next(),s.cssClassStates={},e&&s.setTemplate(e),s}return rg(i,d),i.prototype.preConstructOnComponent=function(){this.usingBrowserTooltips=this.gridOptionsWrapper.isEnableBrowserTooltips()},i.prototype.getCompId=function(){return this.compId},i.prototype.getTooltipParams=function(){return{value:this.tooltipText,location:"UNKNOWN"}},i.prototype.setTooltip=function(e){var s=this;this.tooltipText!=e&&(this.tooltipText&&(s.usingBrowserTooltips?s.getGui().removeAttribute("title"):s.tooltipFeature=s.destroyBean(s.tooltipFeature)),null!=e&&(this.tooltipText=e,this.tooltipText&&(s.usingBrowserTooltips?s.getGui().setAttribute("title",s.tooltipText):s.tooltipFeature=s.createBean(new $f(s)))))},i.prototype.createChildComponentsFromTags=function(e,s){var l=this;Wt(Jr(e.childNodes),function(h){if(h instanceof HTMLElement){var m=l.createComponentFromElement(h,function(R){R.getGui()&&l.copyAttributesFromNode(h,R.getGui())},s);if(m){if(m.addItems&&h.children.length){l.createChildComponentsFromTags(h,s);var w=Array.prototype.slice.call(h.children);m.addItems(w)}l.swapComponentForNode(m,e,h)}else h.childNodes&&l.createChildComponentsFromTags(h,s)}})},i.prototype.createComponentFromElement=function(e,s,l){var c=e.nodeName,h=l?l[e.getAttribute("ref")]:void 0,m=this.agStackComponentsRegistry.getComponentClass(c);if(m){i.elementGettingCreated=e;var w=new m(h);return w.setParentComponent(this),this.createBean(w,null,s),w}return null},i.prototype.copyAttributesFromNode=function(e,s){eu(e.attributes,function(l,c){return s.setAttribute(l,c)})},i.prototype.swapComponentForNode=function(e,s,l){var c=e.getGui();s.replaceChild(c,l),s.insertBefore(document.createComment(l.nodeName),c),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,l)},i.prototype.swapInComponentForQuerySelectors=function(e,s){var l=this;this.iterateOverQuerySelectors(function(c){l[c.attributeName]===s&&(l[c.attributeName]=e)})},i.prototype.iterateOverQuerySelectors=function(e){for(var s=Object.getPrototypeOf(this);null!=s;){var l=s.__agComponentMetaData,c=Yn(s.constructor);l&&l[c]&&l[c].querySelectors&&Wt(l[c].querySelectors,function(h){return e(h)}),s=Object.getPrototypeOf(s)}},i.prototype.setTemplate=function(e,s){var l=sa(e);this.setTemplateFromElement(l,s)},i.prototype.setTemplateFromElement=function(e,s){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),s)},i.prototype.createChildComponentsPreConstruct=function(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())},i.prototype.wireQuerySelectors=function(){var e=this;if(this.eGui){var s=this;this.iterateOverQuerySelectors(function(l){var c=function(R){return s[l.attributeName]=R};if(l.refSelector&&e.eGui.getAttribute("ref")===l.refSelector)c(e.eGui);else{var m=e.eGui.querySelector(l.querySelector);m&&c(m.__agComponent||m)}})}},i.prototype.getGui=function(){return this.eGui},i.prototype.getFocusableElement=function(){return this.eGui},i.prototype.setParentComponent=function(e){this.parentComponent=e},i.prototype.getParentComponent=function(){return this.parentComponent},i.prototype.setGui=function(e){this.eGui=e},i.prototype.queryForHtmlElement=function(e){return this.eGui.querySelector(e)},i.prototype.queryForHtmlInputElement=function(e){return this.eGui.querySelector(e)},i.prototype.appendChild=function(e,s){if(s||(s=this.eGui),null!=e)if(La(e))s.appendChild(e);else{var l=e;s.appendChild(l.getGui()),this.addDestroyFunc(this.destroyBean.bind(this,l))}},i.prototype.isDisplayed=function(){return this.displayed},i.prototype.setVisible=function(e){e!==this.visible&&(this.visible=e,ir(this.eGui,e))},i.prototype.setDisplayed=function(e){e!==this.displayed&&(this.displayed=e,$n(this.eGui,e),this.dispatchEvent({type:i.EVENT_DISPLAYED_CHANGED,visible:this.displayed}))},i.prototype.destroy=function(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),d.prototype.destroy.call(this)},i.prototype.addGuiEventListener=function(e,s){var l=this;this.eGui.addEventListener(e,s),this.addDestroyFunc(function(){return l.eGui.removeEventListener(e,s)})},i.prototype.addCssClass=function(e){!0!==this.cssClassStates[e]&&(Dt(this.eGui,e),this.cssClassStates[e]=!0)},i.prototype.removeCssClass=function(e){!1!==this.cssClassStates[e]&&(yi(this.eGui,e),this.cssClassStates[e]=!1)},i.prototype.addOrRemoveCssClass=function(e,s){this.cssClassStates[e]!==s&&(Ft(this.eGui,e,s),this.cssClassStates[e]=s)},i.prototype.getAttribute=function(e){var s=this.eGui;return s?s.getAttribute(e):null},i.prototype.getRefElement=function(e){return this.queryForHtmlElement('[ref="'+e+'"]')},i.EVENT_DISPLAYED_CHANGED="displayedChanged",zt([H("agStackComponentsRegistry")],i.prototype,"agStackComponentsRegistry",void 0),zt([Av],i.prototype,"preConstructOnComponent",null),zt([Av],i.prototype,"createChildComponentsPreConstruct",null),i}(Ke);function Be(d){return ig.bind(this,"[ref="+d+"]",d)}function ig(d,i,e,s,l){null!==d?"number"!=typeof l?function(d,i,e){var s=function(d,i){return d.__agComponentMetaData||(d.__agComponentMetaData={}),d.__agComponentMetaData[i]||(d.__agComponentMetaData[i]={}),d.__agComponentMetaData[i]}(d,Yn(d.constructor));s[i]||(s[i]=[]),s[i].push(e)}(e,"querySelectors",{attributeName:s,querySelector:d,refSelector:i}):console.error("AG Grid: QuerySelector should be on an attribute"):console.error("AG Grid: QuerySelector selector should not be null")}var qe=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),kn=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Pr=function(d){function i(){return d.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this}return qe(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(e){this.params=e;var s=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),l=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(s+" "+l("ariaFilterInput","Filter Input"))},i.prototype.onParentModelChanged=function(e){var s=this;e?this.params.parentFilterInstance(function(l){if(l.getModelAsString){var c=l.getModelAsString(e);s.eFloatingFilterText.setValue(c)}}):this.eFloatingFilterText.setValue("")},kn([Be("eFloatingFilterText")],i.prototype,"eFloatingFilterText",void 0),kn([H("columnModel")],i.prototype,"columnModel",void 0),i}(pn),Wr=function(){function d(i,e,s,l){var c=this;this.alive=!0,this.context=i,this.eParent=l,e.getDateCompDetails(s).newAgStackInstance().then(function(w){c.alive?(c.dateComp=w,w&&(l.appendChild(w.getGui()),w.afterGuiAttached&&w.afterGuiAttached(),c.tempValue&&w.setDate(c.tempValue),null!=c.disabled&&c.setDateCompDisabled(c.disabled))):i.destroyBean(w)})}return d.prototype.destroy=function(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)},d.prototype.getDate=function(){return this.dateComp?this.dateComp.getDate():this.tempValue},d.prototype.setDate=function(i){this.dateComp?this.dateComp.setDate(i):this.tempValue=i},d.prototype.setDisabled=function(i){this.dateComp?this.setDateCompDisabled(i):this.disabled=i},d.prototype.setDisplayed=function(i){$n(this.eParent,i)},d.prototype.setInputPlaceholder=function(i){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(i)},d.prototype.setInputAriaLabel=function(i){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(i)},d.prototype.afterGuiAttached=function(i){this.dateComp&&"function"==typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(i)},d.prototype.setDateCompDisabled=function(i){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(i)},d}(),Xf=function(){return Xf=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Xf.apply(this,arguments)},Fl=function(){function d(){this.customFilterOptions={}}return d.prototype.init=function(i,e){this.filterOptions=i.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(i),this.checkForDeprecatedParams()},d.prototype.checkForDeprecatedParams=function(){yt.some(this.filterOptions,function(i){return"string"!=typeof i&&null!=i.test})&&console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, test() has been replaced with predicate()."),yt.some(this.filterOptions,function(i){return"string"!=typeof i&&null!=i.hideFilterInput})&&console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, useOfHideFilterInput has been replaced with numberOfInputs.")},d.prototype.getFilterOptions=function(){return this.filterOptions},d.prototype.mapCustomOptions=function(){var i=this;!this.filterOptions||this.filterOptions.forEach(function(e){if("string"!=typeof e){if(!nn([["displayKey"],["displayName"],["predicate","test"]],function(w){return!!$t(w,function(R){return null!=e[R]})||(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '"+w+"'"),!1)}))return void(i.filterOptions=yt.filter(i.filterOptions,function(m){return m===e})||[]);var c=e.test,h=Xf({},e);null!=c&&null==e.predicate&&(h.predicate=function(m,w){return c(m[0],w)},delete h.test),h.hideFilterInput&&null==h.numberOfInputs&&(h.numberOfInputs=0,delete h.hideFilterInput),i.customFilterOptions[e.displayKey]=h}})},d.prototype.selectDefaultItem=function(i){if(i.defaultOption)this.defaultOption=i.defaultOption;else if(this.filterOptions.length>=1){var e=this.filterOptions[0];"string"==typeof e?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")},d.prototype.getDefaultOption=function(){return this.defaultOption},d.prototype.getCustomOption=function(i){return this.customFilterOptions[i]},d}(),ka={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose One",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},$e=function(){function d(){}return d.BACKSPACE=8,d.TAB=9,d.ENTER=13,d.SHIFT=16,d.ESCAPE=27,d.SPACE=32,d.LEFT=37,d.UP=38,d.RIGHT=39,d.DOWN=40,d.DELETE=46,d.A=65,d.C=67,d.V=86,d.D=68,d.Z=90,d.Y=89,d.F2=113,d.PAGE_UP=33,d.PAGE_DOWN=34,d.PAGE_HOME=36,d.PAGE_END=35,d}(),og=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),U_=function(){return U_=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},U_.apply(this,arguments)},z_=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ko=function(d){function i(e,s){void 0===s&&(s={});var l=d.call(this)||this;return l.eFocusableElement=e,l.callbacks=s,l.callbacks=U_({shouldStopEventPropagation:function(){return!1},onTabKeyDown:function(h){if(!h.defaultPrevented){var m=l.focusService.findNextFocusableElement(l.eFocusableElement,!1,h.shiftKey);!m||(m.focus(),h.preventDefault())}}},s),l}return og(i,d),i.prototype.postConstruct=function(){Dt(this.eFocusableElement,i.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)},i.prototype.addKeyDownListeners=function(e){var s=this;this.addManagedListener(e,"keydown",function(l){if(!l.defaultPrevented&&!Da(l)){if(s.callbacks.shouldStopEventPropagation(l))return void so(l);l.keyCode===$e.TAB?s.callbacks.onTabKeyDown(l):s.callbacks.handleKeyDown&&s.callbacks.handleKeyDown(l)}})},i.FOCUS_MANAGED_CLASS="ag-focus-managed",z_([H("focusService")],i.prototype,"focusService",void 0),z_([Qe],i.prototype,"postConstruct",null),i}(Ke),Jf=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Hi=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ro=function(d){function i(e){var s=d.call(this)||this;return s.filterNameKey=e,s.applyActive=!1,s.hidePopup=null,s.appliedModel=null,s}return Jf(i,d),i.prototype.postConstruct=function(){this.resetTemplate(),this.createManagedBean(new Ko(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)}))},i.prototype.handleKeyDown=function(e){},i.prototype.getFilterTitle=function(){return this.translate(this.filterNameKey)},i.prototype.onFilterChanged=function(){console.warn("AG Grid: you should not call onFilterChanged() directly on the filter, please call\n        gridApi.onFilterChanged() instead. onFilterChanged is not part of the exposed filter interface (it was\n        a method that existed on an old version of the filters that was not intended for public use."),this.providedFilterParams.filterChangedCallback()},i.prototype.isFilterActive=function(){return!!this.appliedModel},i.prototype.resetTemplate=function(e){var s='\n            <div class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-'+this.getCssIdentifier()+'-body-wrapper">\n                    '+this.createBodyTemplate()+"\n                </div>\n            </div>";this.setTemplate(s,e)},i.prototype.isReadOnly=function(){return!!this.providedFilterParams.readOnly},i.prototype.init=function(e){var s=this;this.setParams(e),this.resetUiToDefaults(!0).then(function(){s.updateUiVisibility(),s.setupOnBtApplyDebounce()})},i.prototype.setParams=function(e){i.checkForDeprecatedParams(e),this.providedFilterParams=e,this.newRowsActionKeep="keep"===e.newRowsAction||"clear"!==e.newRowsAction&&[fe.ROW_MODEL_TYPE_SERVER_SIDE,fe.ROW_MODEL_TYPE_INFINITE].indexOf(this.rowModel.getType())>=0,this.applyActive=i.isUseApplyButton(e),this.createButtonPanel()},i.prototype.createButtonPanel=function(){var e=this,s=this.providedFilterParams.buttons;if(!(!s||s.length<1||this.isReadOnly())){var l=document.createElement("div");Dt(l,"ag-filter-apply-panel"),ng(s).forEach(function(h){return function(m){var w,R;switch(m){case"apply":w=e.translate("applyFilter"),R=function(U){return e.onBtApply(!1,!1,U)};break;case"clear":w=e.translate("clearFilter"),R=function(){return e.onBtClear()};break;case"reset":w=e.translate("resetFilter"),R=function(){return e.onBtReset()};break;case"cancel":w=e.translate("cancelFilter"),R=function(U){e.onBtCancel(U)};break;default:return void console.warn("Unknown button type specified")}var T=sa('<button\n                    type="button"\n                    ref="'+m+'FilterButton"\n                    class="ag-standard-button ag-filter-apply-panel-button"\n                >'+w+"\n                </button>");l.appendChild(T),e.addManagedListener(T,"click",R)}(h)}),this.getGui().appendChild(l)}},i.checkForDeprecatedParams=function(e){var s=e.buttons||[];if(!(s.length>0)){var l=e.applyButton,c=e.resetButton;e.clearButton&&(console.warn("AG Grid: as of AG Grid v23.2, filterParams.clearButton is deprecated. Please use filterParams.buttons instead"),s.push("clear")),c&&(console.warn("AG Grid: as of AG Grid v23.2, filterParams.resetButton is deprecated. Please use filterParams.buttons instead"),s.push("reset")),l&&(console.warn("AG Grid: as of AG Grid v23.2, filterParams.applyButton is deprecated. Please use filterParams.buttons instead"),s.push("apply")),e.apply&&(console.warn("AG Grid: as of AG Grid v21, filterParams.apply is deprecated. Please use filterParams.buttons instead"),s.push("apply")),e.buttons=s}},i.prototype.getDefaultDebounceMs=function(){return 0},i.prototype.setupOnBtApplyDebounce=function(){var e=i.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs());this.onBtApplyDebounce=Mu(this.onBtApply.bind(this),e)},i.prototype.getModel=function(){return this.appliedModel},i.prototype.setModel=function(e){var s=this;return(e?this.setModelIntoUi(e):this.resetUiToDefaults()).then(function(){s.updateUiVisibility(),s.applyModel()})},i.prototype.onBtCancel=function(e){var s=this,l=this.getModel(),c=function(){s.onUiChanged(!1,"prevent"),s.providedFilterParams.closeOnApply&&s.close(e)};null!=l?this.setModelIntoUi(l).then(c):this.resetUiToDefaults().then(c)},i.prototype.onBtClear=function(){var e=this;this.resetUiToDefaults().then(function(){return e.onUiChanged()})},i.prototype.onBtReset=function(){this.onBtClear(),this.onBtApply()},i.prototype.applyModel=function(){var e=this.getModelFromUi();if(!this.isModelValid(e))return!1;var s=this.appliedModel;return this.appliedModel=e,!this.areModelsEqual(s,e)},i.prototype.isModelValid=function(e){return!0},i.prototype.onBtApply=function(e,s,l){void 0===e&&(e=!1),void 0===s&&(s=!1),this.applyModel()&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:s}),this.providedFilterParams.closeOnApply&&this.applyActive&&!e&&!s&&this.close(l)},i.prototype.onNewRowsLoaded=function(){var e=this;this.newRowsActionKeep||this.resetUiToDefaults().then(function(){return e.appliedModel=null})},i.prototype.close=function(e){if(this.hidePopup){var c,l=e&&e.key;("Enter"===l||"Space"===l)&&(c={keyboardEvent:e}),this.hidePopup(c),this.hidePopup=null}},i.prototype.isNewRowsActionKeep=function(){return this.newRowsActionKeep},i.prototype.onUiChanged=function(e,s){if(void 0===e&&(e=!1),this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly){var l=this.isModelValid(this.getModelFromUi());ms(this.getRefElement("applyFilterButton"),!l)}e&&!s||"immediately"===s?this.onBtApply(e):(!this.applyActive&&!s||"debounce"===s)&&this.onBtApplyDebounce()},i.prototype.afterGuiAttached=function(e){null!=e&&(this.hidePopup=e.hidePopup)},i.getDebounceMs=function(e,s){return i.isUseApplyButton(e)?(null!=e.debounceMs&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):null!=e.debounceMs?e.debounceMs:s},i.isUseApplyButton=function(e){return i.checkForDeprecatedParams(e),!!e.buttons&&e.buttons.indexOf("apply")>=0},i.prototype.destroy=function(){this.hidePopup=null,d.prototype.destroy.call(this)},i.prototype.translate=function(e){return this.gridOptionsWrapper.getLocaleTextFunc()(e,ka[e])},i.prototype.getCellValue=function(e){return this.providedFilterParams.valueGetter(e)},Hi([H("rowModel")],i.prototype,"rowModel",void 0),Hi([Qe],i.prototype,"postConstruct",null),i}(pn),j_=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),la=function(d){function i(e,s){var l=d.call(this,s)||this;return l.labelSeparator="",l.labelAlignment="left",l.label="",l.config=e||{},l}return j_(i,d),i.prototype.postConstruct=function(){Dt(this.getGui(),"ag-labeled"),Dt(this.eLabel,"ag-label");var e=this.config,s=e.labelSeparator,l=e.label,c=e.labelWidth,h=e.labelAlignment;null!=s&&this.setLabelSeparator(s),null!=l&&this.setLabel(l),null!=c&&this.setLabelWidth(c),this.setLabelAlignment(h||this.labelAlignment),this.refreshLabel()},i.prototype.refreshLabel=function(){uo(this.eLabel),"string"==typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(Dt(this.eLabel,"ag-hidden"),Ki(this.eLabel,"presentation")):(yi(this.eLabel,"ag-hidden"),Ki(this.eLabel,null))},i.prototype.setLabelSeparator=function(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this},i.prototype.getLabelId=function(){return this.eLabel.id=this.eLabel.id||"ag-"+this.getCompId()+"-label",this.eLabel.id},i.prototype.getLabel=function(){return this.label},i.prototype.setLabel=function(e){return this.label===e||(this.label=e,this.refreshLabel()),this},i.prototype.setLabelAlignment=function(e){var s=this.getGui();return Ft(s,"ag-label-align-left","left"===e),Ft(s,"ag-label-align-right","right"===e),Ft(s,"ag-label-align-top","top"===e),this},i.prototype.setLabelWidth=function(e){return null==this.label||Hr(this.eLabel,e),this},function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Qe],i.prototype,"postConstruct",null),i}(pn),vb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ca=function(d){function i(e,s,l){var c=d.call(this,e,s)||this;return c.className=l,c.disabled=!1,c}return vb(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this),this.className&&Dt(this.getGui(),this.className)},i.prototype.onValueChange=function(e){var s=this;return this.addManagedListener(this,i.EVENT_CHANGED,function(){return e(s.getValue())}),this},i.prototype.getWidth=function(){return this.getGui().clientWidth},i.prototype.setWidth=function(e){return Ia(this.getGui(),e),this},i.prototype.getPreviousValue=function(){return this.previousValue},i.prototype.getValue=function(){return this.value},i.prototype.setValue=function(e,s){return this.value===e||(this.previousValue=this.value,this.value=e,s||this.dispatchEvent({type:i.EVENT_CHANGED})),this},i.prototype.setDisabled=function(e){e=!!e;var s=this.getGui();return ms(s,e),Ft(s,"ag-disabled",e),this.disabled=e,this},i.prototype.isDisabled=function(){return!!this.disabled},i.EVENT_CHANGED="valueChange",i}(la),gb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Zf=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Qf=function(d){function i(e,s,l,c){var h=d.call(this,e,'<div class="ag-picker-field" role="presentation">\n                <div ref="eLabel"></div>\n                <div ref="eWrapper"\n                    class="ag-wrapper ag-picker-field-wrapper"\n                    tabIndex="-1"\n                    '+(c?'aria-haspopup="'+c+'"':"")+'\n                >\n                    <div ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',s)||this;return h.pickerIcon=l,h.isPickerDisplayed=!1,h.isDestroyingPicker=!1,h.skipClick=!1,h}return gb(i,d),i.prototype.postConstruct=function(){var e=this;d.prototype.postConstruct.call(this);var s=this.getCompId()+"-display";this.eDisplayField.setAttribute("id",s),ho(this.eWrapper,s);var l=function(){e.skipClick?e.skipClick=!1:e.isDisabled()||(e.pickerComponent=e.showPicker())},c=this.getGui();if(this.addManagedListener(c,"mousedown",function(m){!e.skipClick&&e.pickerComponent&&e.pickerComponent.isAlive()&&Ml(e.pickerComponent.getGui())&&c.contains(m.target)&&(e.skipClick=!0)}),this.addManagedListener(c,"keydown",function(m){switch(m.keyCode){case $e.UP:case $e.DOWN:case $e.ENTER:case $e.SPACE:l();case $e.ESCAPE:e.isPickerDisplayed&&m.preventDefault()}}),this.addManagedListener(this.eWrapper,"click",l),this.addManagedListener(this.eLabel,"click",l),this.pickerIcon){var h=ui(this.pickerIcon,this.gridOptionsWrapper);h&&this.eIcon.appendChild(h)}},i.prototype.refreshLabel=function(){Fe(this.getLabel())?Ll(this.eWrapper,this.getLabelId()):this.eWrapper.removeAttribute("aria-labelledby"),d.prototype.refreshLabel.call(this)},i.prototype.setAriaLabel=function(e){return Na(this.eWrapper,e),this},i.prototype.setInputWidth=function(e){return Hr(this.eWrapper,e),this},i.prototype.getFocusableElement=function(){return this.eWrapper},Zf([Be("eLabel")],i.prototype,"eLabel",void 0),Zf([Be("eWrapper")],i.prototype,"eWrapper",void 0),Zf([Be("eDisplayField")],i.prototype,"eDisplayField",void 0),Zf([Be("eIcon")],i.prototype,"eIcon",void 0),i}(ca),ag=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ep=function(d){function i(e){void 0===e&&(e="default");var s=d.call(this,'<div class="ag-list ag-'+e+'-list" role="listbox"></div>')||this;return s.cssIdentifier=e,s.options=[],s.itemEls=[],s}return ag(i,d),i.prototype.init=function(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))},i.prototype.handleKeyDown=function(e){var s=e.keyCode;switch(s){case $e.ENTER:if(this.highlightedEl){var l=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(l)}else this.setValue(this.getValue());break;case $e.DOWN:case $e.UP:var c=s===$e.DOWN,h=void 0;if(e.preventDefault(),this.highlightedEl){var w=this.itemEls.indexOf(this.highlightedEl)+(c?1:-1);w=Math.min(Math.max(w,0),this.itemEls.length-1),h=this.itemEls[w]}else h=this.itemEls[c?0:this.itemEls.length-1];this.highlightItem(h)}},i.prototype.addOptions=function(e){var s=this;return e.forEach(function(l){return s.addOption(l)}),this},i.prototype.addOption=function(e){var s=e.value,c=oa(e.text||s);return this.options.push({value:s,text:c}),this.renderOption(s,c),this},i.prototype.renderOption=function(e,s){var l=this,c=document.createElement("div");Ki(c,"option"),Dt(c,"ag-list-item"),Dt(c,"ag-"+this.cssIdentifier+"-list-item"),c.innerHTML="<span>"+s+"</span>",c.tabIndex=-1,this.itemEls.push(c),this.addManagedListener(c,"mouseover",function(){return l.highlightItem(c)}),this.addManagedListener(c,"mouseleave",function(){return l.clearHighlighted()}),this.addManagedListener(c,"click",function(){return l.setValue(e)}),this.getGui().appendChild(c)},i.prototype.setValue=function(e,s){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(),this;var l=nt(this.options,function(h){return h.value===e});if(-1!==l){var c=this.options[l];this.value=c.value,this.displayValue=null!=c.text?c.text:c.value,this.highlightItem(this.itemEls[l]),s||this.fireChangeEvent()}return this},i.prototype.setValueByIndex=function(e){return this.setValue(this.options[e].value)},i.prototype.getValue=function(){return this.value},i.prototype.getDisplayValue=function(){return this.displayValue},i.prototype.refreshHighlighted=function(){var e=this;this.clearHighlighted();var s=nt(this.options,function(l){return l.value===e.value});-1!==s&&this.highlightItem(this.itemEls[s])},i.prototype.reset=function(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()},i.prototype.highlightItem=function(e){!e.offsetParent||(this.clearHighlighted(),this.highlightedEl=e,Dt(this.highlightedEl,i.ACTIVE_CLASS),Qc(this.highlightedEl,!0),this.highlightedEl.focus())},i.prototype.clearHighlighted=function(){!this.highlightedEl||!this.highlightedEl.offsetParent||(yi(this.highlightedEl,i.ACTIVE_CLASS),Qc(this.highlightedEl,!1),this.highlightedEl=null)},i.prototype.fireChangeEvent=function(){this.dispatchEvent({type:ca.EVENT_CHANGED}),this.fireItemSelected()},i.prototype.fireItemSelected=function(){this.dispatchEvent({type:i.EVENT_ITEM_SELECTED})},i.EVENT_ITEM_SELECTED="selectedItem",i.ACTIVE_CLASS="ag-active-item",function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Qe],i.prototype,"init",null),i}(pn),mb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),sg=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},kl=function(d){function i(e){return d.call(this,e,"ag-select","smallDown","listbox")||this}return mb(i,d),i.prototype.init=function(){var e=this;this.listComponent=this.createBean(new ep("select")),this.listComponent.setParentComponent(this),this.eWrapper.tabIndex=0,this.listComponent.addManagedListener(this.listComponent,ep.EVENT_ITEM_SELECTED,function(){e.hideList&&e.hideList()}),this.listComponent.addManagedListener(this.listComponent,ca.EVENT_CHANGED,function(){e.setValue(e.listComponent.getValue(),!1,!0),e.hideList&&e.hideList()})},i.prototype.showPicker=function(){var e=this,s=this.listComponent.getGui(),l=this.addManagedListener(document.body,"wheel",function(w){!s.contains(w.target)&&e.hideList&&e.hideList()}),c=this.addManagedListener(s,"focusout",function(w){!s.contains(w.relatedTarget)&&e.hideList&&e.hideList()}),h=this.gridOptionsWrapper.getLocaleTextFunc(),m=this.popupService.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:function(){e.hideList=null,e.isPickerDisplayed=!1,c(),l(),e.isAlive()&&e.getFocusableElement().focus()},ariaLabel:h("ariaLabelSelectField","Select Field")});return m&&(this.hideList=m.hideFunc),this.isPickerDisplayed=!0,Hr(s,jf(this.eWrapper)),s.style.maxHeight=Al(this.popupService.getPopupParent())+"px",s.style.position="absolute",this.popupService.positionPopupUnderComponent({type:"ag-list",eventSource:this.eWrapper,ePopup:s,keepWithinBounds:!0}),this.listComponent.refreshHighlighted(),this.listComponent},i.prototype.addOptions=function(e){var s=this;return e.forEach(function(l){return s.addOption(l)}),this},i.prototype.addOption=function(e){return this.listComponent.addOption(e),this},i.prototype.setValue=function(e,s,l){return this.value===e?this:(l||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),d.prototype.setValue.call(this,e,s)))},i.prototype.destroy=function(){this.hideList&&this.hideList(),this.destroyBean(this.listComponent),d.prototype.destroy.call(this)},sg([H("popupService")],i.prototype,"popupService",void 0),sg([Qe],i.prototype,"init",null),i}(Qf),K_=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),tp=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ga=function(d){function i(e,s,l,c){void 0===l&&(l="text"),void 0===c&&(c="input");var h=d.call(this,e,'\n            <div role="presentation">\n                <div ref="eLabel" class="ag-input-field-label"></div>\n                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <'+c+' ref="eInput" class="ag-input-field-input"></'+c+">\n                </div>\n            </div>",s)||this;return h.inputType=l,h.displayFieldTag=c,h}return K_(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this),this.setInputType(),Dt(this.eLabel,this.className+"-label"),Dt(this.eWrapper,this.className+"-input-wrapper"),Dt(this.eInput,this.className+"-input"),Dt(this.getGui(),"ag-input-field"),this.eInput.id=this.eInput.id||"ag-"+this.getCompId()+"-input";var e=this.config,s=e.width,l=e.value;null!=s&&this.setWidth(s),null!=l&&this.setValue(l),this.addInputListeners()},i.prototype.refreshLabel=function(){Fe(this.getLabel())?Ll(this.eInput,this.getLabelId()):this.eInput.removeAttribute("aria-labelledby"),d.prototype.refreshLabel.call(this)},i.prototype.addInputListeners=function(){var e=this;this.addManagedListener(this.eInput,"input",function(s){return e.setValue(s.target.value)})},i.prototype.setInputType=function(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)},i.prototype.getInputElement=function(){return this.eInput},i.prototype.setInputWidth=function(e){return Hr(this.eWrapper,e),this},i.prototype.setInputName=function(e){return this.getInputElement().setAttribute("name",e),this},i.prototype.getFocusableElement=function(){return this.eInput},i.prototype.setMaxLength=function(e){return this.eInput.maxLength=e,this},i.prototype.setInputPlaceholder=function(e){return _s(this.eInput,"placeholder",e),this},i.prototype.setInputAriaLabel=function(e){return Na(this.eInput,e),this},i.prototype.setDisabled=function(e){return ms(this.eInput,e),d.prototype.setDisabled.call(this,e)},tp([Be("eLabel")],i.prototype,"eLabel",void 0),tp([Be("eWrapper")],i.prototype,"eWrapper",void 0),tp([Be("eInput")],i.prototype,"eInput",void 0),i}(ca),Y_=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ba=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ci=function(){return function(d){d[d.One=0]="One",d[d.Two=1]="Two"}(Ci||(Ci={})),Ci}(),$i=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Y_(i,d),i.prototype.getNumberOfInputs=function(e){var s=this.optionsFactory.getCustomOption(e);if(s){var l=s.numberOfInputs;return null!=l?l:1}return e===i.EMPTY?0:e===i.IN_RANGE?2:1},i.prototype.onFloatingFilterChanged=function(e,s){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(s),this.onUiChanged(!0)},i.prototype.setTypeFromFloatingFilter=function(e){this.eType1.setValue(e),this.eType2.setValue(this.optionsFactory.getDefaultOption()),(this.isDefaultOperator("AND")?this.eJoinOperatorAnd:this.eJoinOperatorOr).setValue(!0)},i.prototype.getModelFromUi=function(){return this.isConditionUiComplete(Ci.One)?this.isAllowTwoConditions()&&this.isConditionUiComplete(Ci.Two)?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:this.createCondition(Ci.One),condition2:this.createCondition(Ci.Two)}:this.createCondition(Ci.One):null},i.prototype.getConditionTypes=function(){return[this.eType1.getValue(),this.eType2.getValue()]},i.prototype.getJoinOperator=function(){return!0===this.eJoinOperatorOr.getValue()?"OR":"AND"},i.prototype.areModelsEqual=function(e,s){if(!e&&!s)return!0;if(!e&&s||e&&!s)return!1;var m,l=!e.operator,c=!s.operator;if(!l&&c||l&&!c)return!1;if(l)m=this.areSimpleModelsEqual(e,s);else{var T=e,L=s;m=T.operator===L.operator&&this.areSimpleModelsEqual(T.condition1,L.condition1)&&this.areSimpleModelsEqual(T.condition2,L.condition2)}return m},i.prototype.setModelIntoUi=function(e){if(e.operator){var l=e,c="OR"===l.operator;this.eJoinOperatorAnd.setValue(!c),this.eJoinOperatorOr.setValue(c),this.eType1.setValue(l.condition1.type),this.eType2.setValue(l.condition2.type),this.setConditionIntoUi(l.condition1,Ci.One),this.setConditionIntoUi(l.condition2,Ci.Two)}else{var h=e;this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND")),this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR")),this.eType1.setValue(h.type),this.eType2.setValue(this.optionsFactory.getDefaultOption()),this.setConditionIntoUi(h,Ci.One),this.setConditionIntoUi(null,Ci.Two)}return Zr.resolve()},i.prototype.doesFilterPass=function(e){var s=this,l=this.getModel();if(null==l)return!0;var c=l.operator,h=[];return c?h.push(l.condition1,l.condition2):h.push(l),(c&&"OR"===c?$t:nn)(h,function(R){return s.individualConditionPasses(e,R)})},i.prototype.setParams=function(e){d.prototype.setParams.call(this,e),this.optionsFactory=new Fl,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.allowTwoConditions=!e.suppressAndOrCondition,this.alwaysShowBothConditions=!!e.alwaysShowBothConditions,this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.putOptionsIntoDropdown(),this.addChangedListeners()},i.prototype.getDefaultJoinOperator=function(e){return xn(["AND","OR"],e)?e:"AND"},i.prototype.putOptionsIntoDropdown=function(){var e=this,s=this.optionsFactory.getFilterOptions(),l=[this.eType1,this.eType2];Wt(s,function(c){var h="string"==typeof c?e.createBoilerplateListOption(c):e.createCustomListOption(c);Wt(l,function(m){return m.addOption(h)})}),Wt(l,function(c){return c.setDisabled(s.length<=1)})},i.prototype.createBoilerplateListOption=function(e){return{value:e,text:this.translate(e)}},i.prototype.createCustomListOption=function(e){var s=e.displayKey,l=this.optionsFactory.getCustomOption(e.displayKey);return{value:s,text:l?this.gridOptionsWrapper.getLocaleTextFunc()(l.displayKey,l.displayName):this.translate(s)}},i.prototype.isAllowTwoConditions=function(){return this.allowTwoConditions},i.prototype.createBodyTemplate=function(){return'\n            <ag-select class="ag-filter-select" ref="eOptions1"></ag-select>\n            '+this.createValueTemplate(Ci.One)+'\n            <div class="ag-filter-condition" ref="eJoinOperatorPanel">\n               <ag-radio-button ref="eJoinOperatorAnd" class="ag-filter-condition-operator ag-filter-condition-operator-and"></ag-radio-button>\n               <ag-radio-button ref="eJoinOperatorOr" class="ag-filter-condition-operator ag-filter-condition-operator-or"></ag-radio-button>\n            </div>\n            <ag-select class="ag-filter-select" ref="eOptions2"></ag-select>\n            '+this.createValueTemplate(Ci.Two)},i.prototype.getCssIdentifier=function(){return"simple-filter"},i.prototype.updateUiVisibility=function(){var e=this,l=[this.eCondition1Body,this.eCondition2Body];Wt([[this.eType1],[this.eType2,this.eJoinOperatorPanel,this.eJoinOperatorAnd,this.eJoinOperatorOr]],function(c,h){var m=e.isConditionVisible(h),w=e.isConditionDisabled(h);Wt(c,function(R){R instanceof Ga||R instanceof kl?(R.setDisabled(w),R.setDisplayed(m)):(ms(R,w),$n(R,m))})}),Wt(l,function(c,h){$n(c,e.isConditionBodyVisible(h))}),this.forEachInput(function(c,h,m,w){e.setElementDisplayed(c,h<w),e.setElementDisabled(c,e.isConditionDisabled(m))}),this.resetPlaceholder()},i.prototype.afterGuiAttached=function(e){if(d.prototype.afterGuiAttached.call(this,e),this.resetPlaceholder(),!e||!e.suppressFocus&&!this.isReadOnly()){var s=this.getInputs()[0][0];if(!s)return;s instanceof Ga&&s.getInputElement().focus()}},i.prototype.resetPlaceholder=function(){var e=this,s=this.gridOptionsWrapper.getLocaleTextFunc();this.forEachInput(function(l,c,h,m){if(l instanceof Ga){var w=0===c&&m>1?"inRangeStart":0===c?"filterOoo":"inRangeEnd",R=0===c&&m>1?s("ariaFilterFromValue","Filter from value"):0===c?s("ariaFilterValue","Filter Value"):s("ariaFilterToValue","Filter to Value");l.setInputPlaceholder(e.translate(w)),l.setInputAriaLabel(R)}})},i.prototype.setElementValue=function(e,s,l){e instanceof Ga&&e.setValue(s?String(s):null,l)},i.prototype.setElementDisplayed=function(e,s){e instanceof pn&&$n(e.getGui(),s)},i.prototype.setElementDisabled=function(e,s){e instanceof pn&&ms(e.getGui(),s)},i.prototype.attachElementOnChange=function(e,s){e instanceof Ga&&e.onValueChange(s)},i.prototype.forEachInput=function(e){var s=this,l=this.getInputs();this.getConditionTypes().forEach(function(c,h){for(var m=s.getNumberOfInputs(c),w=0;w<l[h].length;w++){var R=l[h][w];null!=R&&e(R,w,h,m)}})},i.prototype.isConditionVisible=function(e){return 0===e||!!this.allowTwoConditions&&(this.isReadOnly()?this.isConditionUiComplete(e):!!this.alwaysShowBothConditions||this.isConditionUiComplete(e-1))},i.prototype.isConditionDisabled=function(e){return!(!this.isReadOnly()&&this.isConditionVisible(e))||0!==e&&!this.isConditionUiComplete(e-1)},i.prototype.isConditionBodyVisible=function(e){if(!this.isConditionVisible(e))return!1;var s=this.getConditionTypes()[e];return this.getNumberOfInputs(s)>0},i.prototype.isConditionUiComplete=function(e){return!(this.getConditionTypes()[e]===i.EMPTY||yt.some(this.getValues(e),function(l){return null==l}))},i.prototype.resetUiToDefaults=function(e){var s=this,c=this.gridOptionsWrapper.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator"),h="ag-simple-filter-and-or-"+this.getCompId(),m=this.optionsFactory.getDefaultOption();return this.eType1.setValue(m,e).setAriaLabel(c).setDisabled(this.isReadOnly()),this.eType2.setValue(this.optionsFactory.getDefaultOption(),e).setAriaLabel(c).setDisabled(this.isReadOnly()),this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND"),e).setName(h).setLabel(this.translate("andCondition")).setDisabled(this.isReadOnly()),this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR"),e).setName(h).setLabel(this.translate("orCondition")).setDisabled(this.isReadOnly()),this.forEachInput(function(w){s.setElementValue(w,null,e),s.setElementDisabled(w,s.isReadOnly())}),this.resetPlaceholder(),Zr.resolve()},i.prototype.setConditionIntoUi=function(e,s){var l=this,c=this.mapValuesFromModel(e);this.forEachInput(function(h,m,w,R){w===s&&l.setElementValue(h,c[m]?c[m]:null)})},i.prototype.setValueFromFloatingFilter=function(e){var s=this;this.forEachInput(function(l,c,h,m){s.setElementValue(l,0===c&&0===h?e:null)})},i.prototype.isDefaultOperator=function(e){return e===this.defaultJoinOperator},i.prototype.addChangedListeners=function(){var e=this;if(!this.isReadOnly()){var s=function(){return e.onUiChanged()};this.eType1.onValueChange(s),this.eType2.onValueChange(s),this.eJoinOperatorOr.onValueChange(s),this.eJoinOperatorAnd.onValueChange(s),this.forEachInput(function(l){e.attachElementOnChange(l,s)})}},i.prototype.individualConditionPasses=function(e,s){var l=this.getCellValue(e.node),c=this.mapValuesFromModel(s),h=this.optionsFactory.getCustomOption(s.type),m=this.evaluateCustomFilter(h,c,l);return null!=m?m:null==l?this.evaluateNullValue(s.type):this.evaluateNonNullValue(c,l,s)},i.prototype.evaluateCustomFilter=function(e,s,l){if(null!=e){var c=e.predicate;if(null!=c&&!yt.some(s,function(h){return null==h}))return c(s,l)}},i.EMPTY="empty",i.EQUALS="equals",i.NOT_EQUAL="notEqual",i.LESS_THAN="lessThan",i.LESS_THAN_OR_EQUAL="lessThanOrEqual",i.GREATER_THAN="greaterThan",i.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",i.IN_RANGE="inRange",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.STARTS_WITH="startsWith",i.ENDS_WITH="endsWith",Ba([Be("eOptions1")],i.prototype,"eType1",void 0),Ba([Be("eOptions2")],i.prototype,"eType2",void 0),Ba([Be("eJoinOperatorPanel")],i.prototype,"eJoinOperatorPanel",void 0),Ba([Be("eJoinOperatorAnd")],i.prototype,"eJoinOperatorAnd",void 0),Ba([Be("eJoinOperatorOr")],i.prototype,"eJoinOperatorOr",void 0),Ba([Be("eCondition1Body")],i.prototype,"eCondition1Body",void 0),Ba([Be("eCondition2Body")],i.prototype,"eCondition2Body",void 0),i}(Ro),Xi=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),xr=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Xi(i,d),i.prototype.setParams=function(e){d.prototype.setParams.call(this,e),this.scalarFilterParams=e,this.checkDeprecatedParams()},i.prototype.checkDeprecatedParams=function(){this.scalarFilterParams.nullComparator&&(console.warn("AG Grid: Since v21.0, the property filterParams.nullComparator is deprecated. Please use filterParams.includeBlanksInEquals, filterParams.includeBlanksInLessThan and filterParams.includeBlanksInGreaterThan instead."),this.scalarFilterParams.includeBlanksInEquals=this.scalarFilterParams.nullComparator.equals,this.scalarFilterParams.includeBlanksInLessThan=this.scalarFilterParams.nullComparator.lessThan,this.scalarFilterParams.includeBlanksInGreaterThan=this.scalarFilterParams.nullComparator.greaterThan)},i.prototype.evaluateNullValue=function(e){switch(e){case i.EQUALS:case i.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case i.GREATER_THAN:case i.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case i.LESS_THAN:case i.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case i.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0}return!1},i.prototype.evaluateNonNullValue=function(e,s,l){var c=this.comparator(),h=c(e[0],s);switch(l.type){case i.EQUALS:return 0===h;case i.NOT_EQUAL:return 0!==h;case i.GREATER_THAN:return h>0;case i.GREATER_THAN_OR_EQUAL:return h>=0;case i.LESS_THAN:return h<0;case i.LESS_THAN_OR_EQUAL:return h<=0;case i.IN_RANGE:var m=c(e[1],s);return this.scalarFilterParams.inRangeInclusive?h>=0&&m<=0:h>0&&m<0;default:return console.warn('AG Grid: Unexpected type of filter "'+l.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}},i}($i),Rr=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),np=function(){return np=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},np.apply(this,arguments)},rd=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ug=function(d){function i(){var e=d.call(this,"dateFilter")||this;return e.minValidYear=1e3,e.maxValidYear=1/0,e}return Rr(i,d),i.prototype.afterGuiAttached=function(e){d.prototype.afterGuiAttached.call(this,e),this.dateCondition1FromComp.afterGuiAttached(e)},i.prototype.mapValuesFromModel=function(e){var s=e||{},l=s.dateFrom,c=s.dateTo,h=s.type;return[l&&Cs(l)||null,c&&Cs(c)||null].slice(0,this.getNumberOfInputs(h))},i.prototype.comparator=function(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)},i.prototype.defaultComparator=function(e,s){return null==s||s<e?-1:s>e?1:0},i.prototype.setParams=function(e){d.prototype.setParams.call(this,e),this.dateFilterParams=e;var s=function(c,h){if(null!=e[c]){if(!isNaN(e[c]))return null==e[c]?h:Number(e[c]);console.warn("AG Grid: DateFilter "+c+" is not a number")}return h};this.minValidYear=s("minValidYear",1e3),this.maxValidYear=s("maxValidYear",1/0),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),this.createDateComponents()},i.prototype.createDateComponents=function(){var e=this,s=function(c){return new Wr(e.getContext(),e.userComponentFactory,{onDateChanged:function(){return e.onUiChanged()},filterParams:e.dateFilterParams},c)};this.dateCondition1FromComp=s(this.eCondition1PanelFrom),this.dateCondition1ToComp=s(this.eCondition1PanelTo),this.dateCondition2FromComp=s(this.eCondition2PanelFrom),this.dateCondition2ToComp=s(this.eCondition2PanelTo),this.addDestroyFunc(function(){e.forEachInput(function(l){return l.destroy()})})},i.prototype.setElementValue=function(e,s,l){e.setDate(s)},i.prototype.setElementDisplayed=function(e,s){e.setDisplayed(s)},i.prototype.setElementDisabled=function(e,s){e.setDisabled(s)},i.prototype.getDefaultFilterOptions=function(){return i.DEFAULT_FILTER_OPTIONS},i.prototype.createValueTemplate=function(e){var s=e===Ci.One?"1":"2";return'\n            <div class="ag-filter-body" ref="eCondition'+s+'Body">\n                <div class="ag-filter-from ag-filter-date-from" ref="eCondition'+s+'PanelFrom"></div>\n                <div class="ag-filter-to ag-filter-date-to" ref="eCondition'+s+'PanelTo"></div>\n            </div>'},i.prototype.isConditionUiComplete=function(e){var s=this;if(!d.prototype.isConditionUiComplete.call(this,e))return!1;var c=!0;return this.forEachInput(function(h,m,w,R){w!==e||!c||m>=R||(c=c&&function(m){return null!=m&&m.getUTCFullYear()>=s.minValidYear&&m.getUTCFullYear()<=s.maxValidYear}(h.getDate()))}),c},i.prototype.areSimpleModelsEqual=function(e,s){return e.dateFrom===s.dateFrom&&e.dateTo===s.dateTo&&e.type===s.type},i.prototype.getFilterType=function(){return"date"},i.prototype.createCondition=function(e){var s=this.getConditionTypes()[e],l={},c=this.getValues(e);return c.length>0&&(l.dateFrom=Nu(c[0])),c.length>1&&(l.dateTo=Nu(c[1])),np({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:s},l)},i.prototype.resetPlaceholder=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),s=this.translate("dateFormatOoo"),l=e("ariaFilterValue","Filter Value");this.forEachInput(function(c){c.setInputPlaceholder(s),c.setInputAriaLabel(l)})},i.prototype.getInputs=function(){return[[this.dateCondition1FromComp,this.dateCondition1ToComp],[this.dateCondition2FromComp,this.dateCondition2ToComp]]},i.prototype.getValues=function(e){var s=[];return this.forEachInput(function(l,c,h,m){e===h&&c<m&&s.push(l.getDate())}),s},i.DEFAULT_FILTER_OPTIONS=[xr.EQUALS,xr.GREATER_THAN,xr.LESS_THAN,xr.NOT_EQUAL,xr.IN_RANGE],rd([Be("eCondition1PanelFrom")],i.prototype,"eCondition1PanelFrom",void 0),rd([Be("eCondition1PanelTo")],i.prototype,"eCondition1PanelTo",void 0),rd([Be("eCondition2PanelFrom")],i.prototype,"eCondition2PanelFrom",void 0),rd([Be("eCondition2PanelTo")],i.prototype,"eCondition2PanelTo",void 0),rd([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),i}(xr),yb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),id=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return yb(i,d),i.prototype.getDefaultDebounceMs=function(){return 0},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.getTextFromModel=function(e){if(!e)return null;if(null!=e.operator){var l=e,c=l||{},h=c.condition1,m=c.condition2,w=this.optionsFactory.getCustomOption(h.type),R=this.optionsFactory.getCustomOption(m.type);return[this.conditionToString(h,w),l.operator,this.conditionToString(m,R)].join(" ")}var T=e,L=this.optionsFactory.getCustomOption(T.type),U=L||{},K=U.displayKey,Q=U.displayName;return K&&Q&&0===U.numberOfInputs?(this.gridOptionsWrapper.getLocaleTextFunc()(K,Q),Q):this.conditionToString(T,L)},i.prototype.isEventFromFloatingFilter=function(e){return e&&e.afterFloatingFilter},i.prototype.getLastType=function(){return this.lastType},i.prototype.isReadOnly=function(){return this.readOnly},i.prototype.setLastTypeFromModel=function(e){e?this.lastType=(e.operator?e.condition1:e).type:this.lastType=this.optionsFactory.getDefaultOption()},i.prototype.canWeEditAfterModelFromParentFilter=function(e){return e?!e.operator&&this.isTypeEditable(e.type):this.isTypeEditable(this.lastType)},i.prototype.init=function(e){this.optionsFactory=new Fl,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),this.lastType=this.optionsFactory.getDefaultOption(),this.readOnly=!!e.filterParams.readOnly;var s=this.isTypeEditable(this.lastType);this.setEditable(s)},i.prototype.doesFilterHaveSingleInput=function(e){var l=(this.optionsFactory.getCustomOption(e)||{}).numberOfInputs;return null==l||1==l},i.prototype.isTypeEditable=function(e){return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&e!==$i.IN_RANGE&&e!==$i.EMPTY},i}(pn),rp=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Gl=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},lg=function(d){function i(){return d.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>\n                <div ref="eDateWrapper" style="display: flex;"></div>\n            </div>')||this}return rp(i,d),i.prototype.getDefaultFilterOptions=function(){return ug.DEFAULT_FILTER_OPTIONS},i.prototype.conditionToString=function(e,s){var l=e.type,h=l==$i.IN_RANGE||2===(s||{}).numberOfInputs,m=Cs(e.dateFrom),w=Cs(e.dateTo);return h?Nu(m,!1)+"-"+Nu(w,!1):null!=m?""+Nu(m,!1):""+l},i.prototype.init=function(e){d.prototype.init.call(this,e),this.params=e,this.createDateComponent();var s=this.gridOptionsWrapper.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(s("ariaDateFilterInput","Date Filter Input"))},i.prototype.setEditable=function(e){$n(this.eDateWrapper,e),$n(this.eReadOnlyText.getGui(),!e)},i.prototype.onParentModelChanged=function(e,s){if(!this.isEventFromFloatingFilter(s)){d.prototype.setLastTypeFromModel.call(this,e);var l=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);this.setEditable(l),l?(this.dateComp.setDate(e?Cs(e.dateFrom):null),this.eReadOnlyText.setValue("")):(this.eReadOnlyText.setValue(this.getTextFromModel(e)),this.dateComp.setDate(null))}},i.prototype.onDateChanged=function(){var e=this,l=Nu(this.dateComp.getDate());this.params.parentFilterInstance(function(c){c&&c.onFloatingFilterChanged(e.getLastType(),Cs(l))})},i.prototype.createDateComponent=function(){var e=this,s=Ro.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),l={onDateChanged:Mu(this.onDateChanged.bind(this),s),filterParams:this.params.column.getColDef().filterParams};this.dateComp=new Wr(this.getContext(),this.userComponentFactory,l,this.eDateWrapper),this.addDestroyFunc(function(){return e.dateComp.destroy()})},Gl([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Gl([Be("eReadOnlyText")],i.prototype,"eReadOnlyText",void 0),Gl([Be("eDateWrapper")],i.prototype,"eDateWrapper",void 0),i}(id),J_=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ru=function(d){function i(){return d.call(this,'\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>\n            </div>')||this}return J_(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(e){var s=this,l=this.eDateInput.getInputElement();this.shouldUseBrowserDatePicker(e)&&(qi()?console.warn("ag-grid: browserDatePicker is specified to true, but it is not supported in IE 11; reverting to text date picker"):l.type="date"),this.addManagedListener(l,"mousedown",function(){s.eDateInput.isDisabled()||l.focus()}),this.addManagedListener(l,"input",function(w){w.target===document.activeElement&&(s.eDateInput.isDisabled()||e.onDateChanged())});var c=e.filterParams||{},h=c.minValidYear,m=c.maxValidYear;h&&(l.min=h+"-01-01"),m&&(l.max=m+"-12-31")},i.prototype.getDate=function(){return Cs(this.eDateInput.getValue())},i.prototype.setDate=function(e){this.eDateInput.setValue(Nu(e,!1))},i.prototype.setInputPlaceholder=function(e){this.eDateInput.setInputPlaceholder(e)},i.prototype.setDisabled=function(e){this.eDateInput.setDisabled(e)},i.prototype.afterGuiAttached=function(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()},i.prototype.shouldUseBrowserDatePicker=function(e){return e.filterParams&&null!=e.filterParams.browserDatePicker?e.filterParams.browserDatePicker:Yc()||Qt()},function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Be("eDateInput")],i.prototype,"eDateInput",void 0),i}(pn),od=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ip=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},cg=function(d){function i(){return d.call(this,"numberFilter")||this}return od(i,d),i.prototype.mapValuesFromModel=function(e){var s=e||{};return[s.filter||null,s.filterTo||null].slice(0,this.getNumberOfInputs(s.type))},i.prototype.getDefaultDebounceMs=function(){return 500},i.prototype.comparator=function(){return function(e,s){return e===s?0:e<s?1:-1}},i.prototype.setParams=function(e){this.numberFilterParams=e;var s=this.getAllowedCharPattern();if(s){var l={allowedCharPattern:s};this.resetTemplate({eValueFrom1:l,eValueTo1:l,eValueFrom2:l,eValueTo2:l})}d.prototype.setParams.call(this,e)},i.prototype.getDefaultFilterOptions=function(){return i.DEFAULT_FILTER_OPTIONS},i.prototype.createValueTemplate=function(e){var s=e===Ci.One?"1":"2",c=this.getAllowedCharPattern()?"ag-input-text-field":"ag-input-number-field";return'\n            <div class="ag-filter-body" ref="eCondition'+s+'Body" role="presentation">\n                <'+c+' class="ag-filter-from ag-filter-filter" ref="eValue-index0-'+s+'"></'+c+">\n                <"+c+' class="ag-filter-to ag-filter-filter" ref="eValue-index1-'+s+'"></'+c+">\n            </div>"},i.prototype.getValues=function(e){var s=this,l=[];return this.forEachInput(function(c,h,m,w){e===m&&h<w&&l.push(s.stringToFloat(c.getValue()))}),l},i.prototype.areSimpleModelsEqual=function(e,s){return e.filter===s.filter&&e.filterTo===s.filterTo&&e.type===s.type},i.prototype.getFilterType=function(){return"number"},i.prototype.stringToFloat=function(e){if("number"==typeof e)return e;var s=Ue(e);return null!=s&&""===s.trim()&&(s=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(s):null==s||"-"===s.trim()?null:parseFloat(s)},i.prototype.createCondition=function(e){var s=this.getConditionTypes()[e],l={filterType:this.getFilterType(),type:s},c=this.getValues(e);return c.length>0&&(l.filter=c[0]),c.length>1&&(l.filterTo=c[1]),l},i.prototype.getInputs=function(){return[[this.eValueFrom1,this.eValueTo1],[this.eValueFrom2,this.eValueTo2]]},i.prototype.getAllowedCharPattern=function(){return(this.numberFilterParams||{}).allowedCharPattern||(Yc()||Tl()?null:"\\d\\-\\.")},i.DEFAULT_FILTER_OPTIONS=[xr.EQUALS,xr.NOT_EQUAL,xr.LESS_THAN,xr.LESS_THAN_OR_EQUAL,xr.GREATER_THAN,xr.GREATER_THAN_OR_EQUAL,xr.IN_RANGE],ip([Be("eValue-index0-1")],i.prototype,"eValueFrom1",void 0),ip([Be("eValue-index1-1")],i.prototype,"eValueTo1",void 0),ip([Be("eValue-index0-2")],i.prototype,"eValueFrom2",void 0),ip([Be("eValue-index1-2")],i.prototype,"eValueTo2",void 0),i}(xr),ad=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Bl=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},op=function(d){function i(){return d.call(this,"textFilter")||this}return ad(i,d),i.trimInput=function(e){var s=e&&e.trim();return""===s?e:s},i.prototype.getDefaultDebounceMs=function(){return 500},i.prototype.setParams=function(e){d.prototype.setParams.call(this,e),this.textFilterParams=e,this.comparator=this.textFilterParams.textCustomComparator||i.DEFAULT_COMPARATOR,this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?i.DEFAULT_FORMATTER:i.DEFAULT_LOWERCASE_FORMATTER)},i.prototype.createCondition=function(e){var s=this.getConditionTypes()[e],l={filterType:this.getFilterType(),type:s},c=this.getValues(e);return c.length>0&&(l.filter=c[0]),c.length>1&&(l.filterTo=c[1]),l},i.prototype.getFilterType=function(){return"text"},i.prototype.areSimpleModelsEqual=function(e,s){return e.filter===s.filter&&e.filterTo===s.filterTo&&e.type===s.type},i.prototype.getInputs=function(){return[[this.eValueFrom1,this.eValueTo1],[this.eValueFrom2,this.eValueTo2]]},i.prototype.getValues=function(e){var s=this,l=[];return this.forEachInput(function(c,h,m,w){if(e===m&&h<w){var R=Ue(c.getValue()),T=(s.textFilterParams.trimInput?i.trimInput(R):R)||null;l.push(T),c.setValue(T,!0)}}),l},i.prototype.getDefaultFilterOptions=function(){return i.DEFAULT_FILTER_OPTIONS},i.prototype.createValueTemplate=function(e){var s=e===Ci.One?"1":"2";return'\n            <div class="ag-filter-body" ref="eCondition'+s+'Body" role="presentation">\n                <ag-input-text-field class=".ag-filter-from ag-filter-filter" ref="eValue-index0-'+s+'"></ag-input-text-field>\n                <ag-input-text-field class="ag-filter-to ag-filter-filter" ref="eValue-index1-'+s+'"></ag-input-text-field>\n            </div>'},i.prototype.mapValuesFromModel=function(e){var s=e||{};return[s.filter||null,s.filterTo||null].slice(0,this.getNumberOfInputs(s.type))},i.prototype.evaluateNullValue=function(e){return e===$i.NOT_EQUAL||e===$i.NOT_CONTAINS},i.prototype.evaluateNonNullValue=function(e,s,l){var c=this,h=yt.map(e,function(w){return c.formatter(w)})||[],m=this.formatter(s);return yt.some(h,function(w){return c.comparator(l.type,m,w)})},i.DEFAULT_FILTER_OPTIONS=[$i.CONTAINS,$i.NOT_CONTAINS,$i.EQUALS,$i.NOT_EQUAL,$i.STARTS_WITH,$i.ENDS_WITH],i.DEFAULT_FORMATTER=function(e){return e},i.DEFAULT_LOWERCASE_FORMATTER=function(e){return null==e?null:e.toString().toLowerCase()},i.DEFAULT_COMPARATOR=function(e,s,l){switch(e){case i.CONTAINS:return s.indexOf(l)>=0;case i.NOT_CONTAINS:return s.indexOf(l)<0;case i.EQUALS:return s===l;case i.NOT_EQUAL:return s!=l;case i.STARTS_WITH:return 0===s.indexOf(l);case i.ENDS_WITH:var c=s.lastIndexOf(l);return c>=0&&c===s.length-l.length;default:return!1}},Bl([Be("eValue-index0-1")],i.prototype,"eValueFrom1",void 0),Bl([Be("eValue-index1-1")],i.prototype,"eValueTo1",void 0),Bl([Be("eValue-index0-2")],i.prototype,"eValueFrom2",void 0),Bl([Be("eValue-index1-2")],i.prototype,"eValueTo2",void 0),i}($i),Cb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Z_=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},wb=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Cb(i,d),i.prototype.postConstruct=function(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterInput"></ag-input-text-field>\n            </div>')},i.prototype.getDefaultDebounceMs=function(){return 500},i.prototype.onParentModelChanged=function(e,s){this.isEventFromFloatingFilter(s)||(this.setLastTypeFromModel(e),this.eFloatingFilterInput.setValue(this.getTextFromModel(e)),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)))},i.prototype.init=function(e){if(d.prototype.init.call(this,e),this.params=e,this.applyActive=Ro.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){var s=Ro.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),l=Mu(this.syncUpWithParentFilter.bind(this),s),c=this.eFloatingFilterInput.getGui();this.addManagedListener(c,"input",l),this.addManagedListener(c,"keypress",l),this.addManagedListener(c,"keydown",l)}var h=e.column.getDefinition();(this.isReadOnly()||h.filterParams&&h.filterParams.filterOptions&&1===h.filterParams.filterOptions.length&&"inRange"===h.filterParams.filterOptions[0])&&this.eFloatingFilterInput.setDisabled(!0);var m=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),w=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterInput.setInputAriaLabel(m+" "+w("ariaFilterInput","Filter Input"))},i.prototype.syncUpWithParentFilter=function(e){var s=this,l=ed(e,$e.ENTER);if(!this.applyActive||l){var c=this.eFloatingFilterInput.getValue();this.params.filterParams.trimInput&&(c=op.trimInput(c),this.eFloatingFilterInput.setValue(c,!0)),this.params.parentFilterInstance(function(h){h&&h.onFloatingFilterChanged(s.getLastType(),c||null)})}},i.prototype.conditionToString=function(e,s){return e.type==$i.IN_RANGE||2===(s||{}).numberOfInputs?e.filter+"-"+e.filterTo:null!=e.filter?""+e.filter:""+e.type},i.prototype.setEditable=function(e){this.eFloatingFilterInput.setDisabled(!e)},Z_([H("columnModel")],i.prototype,"columnModel",void 0),Z_([Be("eFloatingFilterInput")],i.prototype,"eFloatingFilterInput",void 0),Z_([Qe],i.prototype,"postConstruct",null),i}(id),ap=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Q_=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return ap(i,d),i.prototype.getDefaultFilterOptions=function(){return cg.DEFAULT_FILTER_OPTIONS},i}(wb),dg=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),sd=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return dg(i,d),i.prototype.getDefaultFilterOptions=function(){return op.DEFAULT_FILTER_OPTIONS},i}(wb),To=function(){function d(i,e){var s=this;void 0===e&&(e=!1),this.destroyFuncs=[],this.touching=!1,this.eventService=new Js,this.eElement=i,this.preventMouseClick=e;var l=this.onTouchStart.bind(this),c=this.onTouchMove.bind(this),h=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",l,{passive:!0}),this.eElement.addEventListener("touchmove",c,{passive:!0}),this.eElement.addEventListener("touchend",h,{passive:!1}),this.destroyFuncs.push(function(){s.eElement.removeEventListener("touchstart",l,{passive:!0}),s.eElement.removeEventListener("touchmove",c,{passive:!0}),s.eElement.removeEventListener("touchend",h,{passive:!1})})}return d.prototype.getActiveTouch=function(i){for(var e=0;e<i.length;e++)if(i[e].identifier===this.touchStart.identifier)return i[e];return null},d.prototype.addEventListener=function(i,e){this.eventService.addEventListener(i,e)},d.prototype.removeEventListener=function(i,e){this.eventService.removeEventListener(i,e)},d.prototype.onTouchStart=function(i){var e=this;if(!this.touching){this.touchStart=i.touches[0],this.touching=!0,this.moved=!1;var s=this.touchStart;window.setTimeout(function(){e.touching&&e.touchStart===s&&!e.moved&&(e.moved=!0,e.eventService.dispatchEvent({type:d.EVENT_LONG_TAP,touchStart:e.touchStart,touchEvent:i}))},500)}},d.prototype.onTouchMove=function(i){if(this.touching){var e=this.getActiveTouch(i.touches);e&&!H_(e,this.touchStart,4)&&(this.moved=!0)}},d.prototype.onTouchEnd=function(i){this.touching&&(this.moved||(this.eventService.dispatchEvent({type:d.EVENT_TAP,touchStart:this.touchStart}),this.checkForDoubleTap()),this.preventMouseClick&&i.preventDefault(),this.touching=!1)},d.prototype.checkForDoubleTap=function(){var i=(new Date).getTime();this.lastTapTime&&this.lastTapTime>0&&i-this.lastTapTime>d.DOUBLE_TAP_MILLIS?(this.eventService.dispatchEvent({type:d.EVENT_DOUBLE_TAP,touchStart:this.touchStart}),this.lastTapTime=null):this.lastTapTime=i},d.prototype.destroy=function(){this.destroyFuncs.forEach(function(i){return i()})},d.EVENT_TAP="tap",d.EVENT_DOUBLE_TAP="doubleTap",d.EVENT_LONG_TAP="longTap",d.DOUBLE_TAP_MILLIS=500,d}(),eC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ji=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Sb=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.lastMovingChanged=0,e}return eC(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.refresh=function(e){return this.params=e,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&this.workOutSort()==this.currentSort&&(this.setDisplayName(e),!0)},i.prototype.workOutTemplate=function(){var e=Ot(this.params.template,i.TEMPLATE);return e&&e.trim?e.trim():e},i.prototype.init=function(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(e.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(e)},i.prototype.setDisplayName=function(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;var s=oa(this.currentDisplayName);this.eText&&(this.eText.innerHTML=s)}},i.prototype.setupIcons=function(e){this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addInIcon("menu",this.eMenu,e),this.addInIcon("filter",this.eFilter,e)},i.prototype.addInIcon=function(e,s,l){if(null!=s){var c=ui(e,this.gridOptionsWrapper,l);c&&s.appendChild(c)}},i.prototype.setupTap=function(){var e=this,s=this.gridOptionsWrapper;if(!s.isSuppressTouch()){var l=new To(this.getGui(),!0),c=s.isSuppressMenuHide(),h=c&&Fe(this.eMenu),m=h?new To(this.eMenu,!0):l;this.params.enableMenu&&this.addManagedListener(m,To[h?"EVENT_TAP":"EVENT_LONG_TAP"],function(U){s.getApi().showColumnMenuAfterMouseClick(e.params.column,U.touchStart)}),this.params.enableSorting&&this.addManagedListener(l,To.EVENT_TAP,function(U){c&&e.eMenu.contains(U.touchStart.target)||e.sortController.progressSort(e.params.column,!1,"uiColumnSorted")}),this.addDestroyFunc(function(){return l.destroy()}),h&&this.addDestroyFunc(function(){return m.destroy()})}},i.prototype.workOutShowMenu=function(){var e=!this.gridOptionsWrapper.isSuppressMenuHide(),s=Zs()&&e;return this.params.enableMenu&&!s},i.prototype.setMenu=function(){var e=this;if(this.eMenu){if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return void _i(this.eMenu);var s=this.gridOptionsWrapper.isSuppressMenuHide();this.addManagedListener(this.eMenu,"click",function(){return e.showMenu(e.eMenu)}),Ft(this.eMenu,"ag-header-menu-always-show",s)}},i.prototype.showMenu=function(e){e||(e=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,e,"columnMenu")},i.prototype.removeSortIcons=function(){_i(this.eSortAsc),_i(this.eSortDesc),_i(this.eSortNone),_i(this.eSortOrder)},i.prototype.workOutSort=function(){return this.params.enableSorting},i.prototype.setupSort=function(){var e=this;if(this.currentSort=this.params.enableSorting,this.currentSort){var s=this.gridOptionsWrapper.isMultiSortKeyCtrl();this.addManagedListener(this.params.column,Mn.EVENT_MOVING_CHANGED,function(){e.lastMovingChanged=(new Date).getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",function(l){var c=e.params.column.isMoving(),h=(new Date).getTime();c||h-e.lastMovingChanged<50||e.params.progressSort(s?l.ctrlKey||l.metaKey:l.shiftKey)}),this.addManagedListener(this.params.column,Mn.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.onSortChanged(),this.addManagedListener(this.eventService,$.EVENT_SORT_CHANGED,this.setMultiSortOrder.bind(this)),this.setMultiSortOrder()}else this.removeSortIcons()},i.prototype.onSortChanged=function(){if(Ft(this.getGui(),"ag-header-cell-sorted-asc",this.params.column.isSortAscending()),Ft(this.getGui(),"ag-header-cell-sorted-desc",this.params.column.isSortDescending()),Ft(this.getGui(),"ag-header-cell-sorted-none",this.params.column.isSortNone()),this.eSortAsc&&Ft(this.eSortAsc,"ag-hidden",!this.params.column.isSortAscending()),this.eSortDesc&&Ft(this.eSortDesc,"ag-hidden",!this.params.column.isSortDescending()),this.eSortNone){var e=!this.params.column.getColDef().unSortIcon&&!this.gridOptionsWrapper.isUnSortIcon();Ft(this.eSortNone,"ag-hidden",e||!this.params.column.isSortNone())}},i.prototype.setMultiSortOrder=function(){if(this.eSortOrder){var e=this.params.column,s=this.sortController.getColumnsWithSortingOrdered(),l=s.indexOf(e),c=s.length>1,h=e.isSorting()&&c;$n(this.eSortOrder,h),l>=0?this.eSortOrder.innerHTML=(l+1).toString():uo(this.eSortOrder)}},i.prototype.setupFilterIcon=function(){!this.eFilter||(this.addManagedListener(this.params.column,Mn.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},i.prototype.onFilterChanged=function(){var e=this.params.column.isFilterActive();Ft(this.eFilter,"ag-hidden",!e)},i.TEMPLATE='<div class="ag-cell-label-container" role="presentation">\n            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n            <div ref="eLabel" class="ag-header-cell-label" role="presentation" unselectable="on">\n                <span ref="eText" class="ag-header-cell-text" unselectable="on"></span>\n                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                <span ref="eSortOrder" class="ag-header-icon ag-header-label-icon ag-sort-order" aria-hidden="true"></span>\n                <span ref="eSortAsc" class="ag-header-icon ag-header-label-icon ag-sort-ascending-icon" aria-hidden="true"></span>\n                <span ref="eSortDesc" class="ag-header-icon ag-header-label-icon ag-sort-descending-icon" aria-hidden="true"></span>\n                <span ref="eSortNone" class="ag-header-icon ag-header-label-icon ag-sort-none-icon" aria-hidden="true"></span>\n            </div>\n        </div>',Ji([H("sortController")],i.prototype,"sortController",void 0),Ji([H("menuFactory")],i.prototype,"menuFactory",void 0),Ji([Be("eFilter")],i.prototype,"eFilter",void 0),Ji([Be("eSortAsc")],i.prototype,"eSortAsc",void 0),Ji([Be("eSortDesc")],i.prototype,"eSortDesc",void 0),Ji([Be("eSortNone")],i.prototype,"eSortNone",void 0),Ji([Be("eSortOrder")],i.prototype,"eSortOrder",void 0),Ji([Be("eMenu")],i.prototype,"eMenu",void 0),Ji([Be("eLabel")],i.prototype,"eLabel",void 0),Ji([Be("eText")],i.prototype,"eText",void 0),i}(pn),Hl=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ud=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},sp=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return Hl(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},i.prototype.checkWarnings=function(){this.params.template&&vn(function(){return console.warn("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")},"HeaderGroupComp.templateNotSupported")},i.prototype.setupExpandIcons=function(){var e=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var s=function(m){if(!Da(m)){var w=!e.params.columnGroup.isExpanded();e.columnModel.setColumnGroupOpened(e.params.columnGroup.getOriginalColumnGroup(),w,"uiColumnExpanded")}};this.addTouchAndClickListeners(this.eCloseIcon,s),this.addTouchAndClickListeners(this.eOpenIcon,s);var l=function(m){so(m)};this.addManagedListener(this.eCloseIcon,"dblclick",l),this.addManagedListener(this.eOpenIcon,"dblclick",l),this.addManagedListener(this.getGui(),"dblclick",s),this.updateIconVisibility();var c=this.params.columnGroup.getOriginalColumnGroup();this.addManagedListener(c,mr.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(c,mr.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},i.prototype.addTouchAndClickListeners=function(e,s){var l=new To(e,!0);this.addManagedListener(l,To.EVENT_TAP,s),this.addDestroyFunc(function(){return l.destroy()}),this.addManagedListener(e,"click",s)},i.prototype.updateIconVisibility=function(){if(this.params.columnGroup.isExpandable()){var s=this.params.columnGroup.isExpanded();$n(this.eOpenIcon,s),$n(this.eCloseIcon,!s)}else $n(this.eOpenIcon,!1),$n(this.eCloseIcon,!1)},i.prototype.addInIcon=function(e,s){var l=ui(e,this.gridOptionsWrapper,null);l&&this.getRefElement(s).appendChild(l)},i.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable())return $n(this.eOpenIcon,!1),void $n(this.eCloseIcon,!1)},i.prototype.setupLabel=function(){var e=this.params.displayName;if(Fe(e)){var s=oa(e);this.getRefElement("agLabel").innerHTML=s}},i.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">\n            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>',ud([H("columnModel")],i.prototype,"columnModel",void 0),ud([Be("agOpened")],i.prototype,"eOpenIcon",void 0),ud([Be("agClosed")],i.prototype,"eCloseIcon",void 0),i}(pn),Eb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ku=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Eb(i,d),i.prototype.isPopup=function(){return!0},i.prototype.setParentComponent=function(e){Dt(e.getGui(),"ag-has-popup"),d.prototype.setParentComponent.call(this,e)},i.prototype.destroy=function(){var e=this.parentComponent;e&&e.isAlive()&&yi(e.getGui(),"ag-has-popup"),d.prototype.destroy.call(this)},i}(pn),tC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),nC=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return tC(i,d),i.prototype.init=function(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),Fe(e.value)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this))},i.prototype.onKeyDown=function(e){var s=e.which||e.keyCode;(s===$e.LEFT||s===$e.UP||s===$e.RIGHT||s===$e.DOWN||e.shiftKey&&s===$e.ENTER)&&e.stopPropagation()},i.prototype.afterGuiAttached=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()},i.prototype.getValue=function(){return this.params.parseValue(this.eTextArea.getValue())},i.TEMPLATE='<div class="ag-large-text" tabindex="0">\n            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Be("eTextArea")],i.prototype,"eTextArea",void 0),i}(ku),ld=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),up=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},cd=function(d){function i(){var e=d.call(this,'<div class="ag-cell-edit-wrapper"><ag-select class="ag-cell-editor" ref="eSelect"></ag-select></div>')||this;return e.startedByEnter=!1,e}return ld(i,d),i.prototype.init=function(e){var s=this;if(this.focusAfterAttached=e.cellStartedEdit,Ce(e.values))console.warn("AG Grid: no values found for select cellEditor");else{this.startedByEnter=e.keyPress===$e.ENTER;var l=!1;e.values.forEach(function(c){var h={value:c},m=s.valueFormatterService.formatValue(e.column,null,null,c);h.text=null!=m?m:c,s.eSelect.addOption(h),l=l||e.value===c}),l?this.eSelect.setValue(e.value,!0):e.values.length&&this.eSelect.setValue(e.values[0],!0),this.gridOptionsWrapper.isFullRowEdit()||this.eSelect.onValueChange(function(){return e.stopEditing()})}},i.prototype.afterGuiAttached=function(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&this.eSelect.showPicker()},i.prototype.focusIn=function(){this.eSelect.getFocusableElement().focus()},i.prototype.getValue=function(){return this.eSelect.getValue()},i.prototype.isPopup=function(){return!1},up([H("valueFormatterService")],i.prototype,"valueFormatterService",void 0),up([Be("eSelect")],i.prototype,"eSelect",void 0),i}(ku),lp=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),dd=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return lp(i,d),i.prototype.isPopup=function(){return!0},i}(cd),xb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),fd=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return xb(i,d),i.prototype.init=function(e){this.params=e;var l,s=this.eInput;e.cellStartedEdit?(this.focusAfterAttached=!0,e.keyPress===$e.BACKSPACE||e.keyPress===$e.DELETE?l="":e.charPress?l=e.charPress:(l=this.getStartValue(e),e.keyPress!==$e.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,l=this.getStartValue(e)),null!=l&&s.setValue(l,!0),this.addManagedListener(s.getGui(),"keydown",function(c){var h=c.keyCode;(h===$e.PAGE_UP||h===$e.PAGE_DOWN)&&c.preventDefault()})},i.prototype.afterGuiAttached=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),s=this.eInput;if(s.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached){Kc()||s.getFocusableElement().focus();var l=s.getInputElement();if(this.highlightAllOnFocus)l.select();else{var c=s.getValue(),h=Fe(c)&&c.length||0;h&&l.setSelectionRange(h,h)}}},i.prototype.focusIn=function(){var e=this.eInput,s=e.getFocusableElement(),l=e.getInputElement();s.focus(),l.select()},i.prototype.focusOut=function(){var e=this.eInput.getInputElement();qi()&&e.setSelectionRange(0,0)},i.prototype.getValue=function(){return this.params.parseValue(this.eInput.getValue())},i.prototype.getStartValue=function(e){return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value},i.prototype.isPopup=function(){return!1},i.TEMPLATE='<div class="ag-cell-edit-wrapper"><ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field></div>',function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Be("eInput")],i.prototype,"eInput",void 0),i}(ku),iC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),fg=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return iC(i,d),i.prototype.isPopup=function(){return!0},i}(fd),Rb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),oC=function(d){function i(){var e=d.call(this,i.TEMPLATE)||this;return e.refreshCount=0,e}return Rb(i,d),i.prototype.init=function(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e)},i.prototype.showDelta=function(e,s){var l=Math.abs(s),c=e.formatValue(l),h=Fe(c)?c:l,m=s>=0;this.eDelta.innerHTML=m?"\u2191"+h:"\u2193"+h,Ft(this.eDelta,"ag-value-change-delta-up",m),Ft(this.eDelta,"ag-value-change-delta-down",!m)},i.prototype.setTimerToRemoveDelta=function(){var e=this;this.refreshCount++;var s=this.refreshCount;window.setTimeout(function(){s===e.refreshCount&&e.hideDeltaValue()},2e3)},i.prototype.hideDeltaValue=function(){yi(this.eValue,"ag-value-change-value-highlight"),uo(this.eDelta)},i.prototype.refresh=function(e){var s=e.value;return s!==this.lastValue&&(Fe(e.valueFormatted)?this.eValue.innerHTML=e.valueFormatted:Fe(e.value)?this.eValue.innerHTML=s:uo(this.eValue),!this.filterManager.isSuppressFlashingCellsBecauseFiltering())&&("number"==typeof s&&"number"==typeof this.lastValue&&this.showDelta(e,s-this.lastValue),this.lastValue&&Dt(this.eValue,"ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=s,!0)},i.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([H("filterManager")],i.prototype,"filterManager",void 0),i}(pn),aC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Gu=function(d){function i(){var e=d.call(this,i.TEMPLATE)||this;return e.refreshCount=0,e.eCurrent=e.queryForHtmlElement(".ag-value-slide-current"),e}return aC(i,d),i.prototype.init=function(e){this.refresh(e)},i.prototype.addSlideAnimation=function(){var e=this;this.refreshCount++;var s=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=sa('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout(function(){s===e.refreshCount&&Dt(e.ePrevious,"ag-value-slide-out-end")},50),window.setTimeout(function(){s===e.refreshCount&&(e.getGui().removeChild(e.ePrevious),e.ePrevious=null)},3e3)},i.prototype.refresh=function(e){var s=e.value;return Ce(s)&&(s=""),s!==this.lastValue&&!this.filterManager.isSuppressFlashingCellsBecauseFiltering()&&(this.addSlideAnimation(),this.lastValue=s,Fe(e.valueFormatted)?this.eCurrent.innerHTML=e.valueFormatted:Fe(e.value)?this.eCurrent.innerHTML=s:uo(this.eCurrent),!0)},i.TEMPLATE='<span>\n            <span class="ag-value-slide-current"></span>\n        </span>',function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([H("filterManager")],i.prototype,"filterManager",void 0),i}(pn);!function(d){d[d.Above=0]="Above",d[d.Below=1]="Below"}(Y.oh5||(Y.oh5={}));var ln=function(){function d(i){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=d.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.selected=!1,this.beans=i}return d.prototype.setData=function(i){this.setDataCommon(i,!1)},d.prototype.updateData=function(i){this.setDataCommon(i,!0)},d.prototype.setDataCommon=function(i,e){var s=this.data;this.data=i,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable();var l=this.createDataChangedEvent(i,s,e);this.dispatchLocalEvent(l)},d.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},d.prototype.createDataChangedEvent=function(i,e,s){return{type:d.EVENT_DATA_CHANGED,node:this,oldData:e,newData:i,update:s}},d.prototype.createLocalRowEvent=function(i){return{type:i,node:this}},d.prototype.getRowIndexString=function(){return this.rowPinned===fe.PINNED_TOP?"t-"+this.rowIndex:this.rowPinned===fe.PINNED_BOTTOM?"b-"+this.rowIndex:this.rowIndex.toString()},d.prototype.createDaemonNode=function(){var i=new d(this.beans);return i.id=this.id,i.data=this.data,i.daemon=!0,i.selected=this.selected,i.level=this.level,i},d.prototype.setDataAndId=function(i,e){var s=Fe(this.id)?this.createDaemonNode():null,l=this.data;this.data=i,this.updateDataOnDetailNode(),this.setId(e),this.beans.selectionService.syncInRowNode(this,s),this.checkRowSelectable();var c=this.createDataChangedEvent(i,l,!1);this.dispatchLocalEvent(c)},d.prototype.checkRowSelectable=function(){var i=this.beans.gridOptionsWrapper.getIsRowSelectableFunc();this.setRowSelectable(!i||i(this))},d.prototype.setRowSelectable=function(i){this.selectable!==i&&(this.selectable=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_SELECTABLE_CHANGED)))},d.prototype.setId=function(i){var e=this.beans.gridOptionsWrapper.getRowNodeIdFunc();e?this.data?(this.id=e(this.data),this.id&&"string"==typeof this.id&&Bv(this.id,d.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row ID's cannot start with "+d.ID_PREFIX_ROW_GROUP+", this is a reserved prefix for AG Grid's row grouping feature."),this.id&&"string"!=typeof this.id&&(this.id=""+this.id)):this.id=void 0:this.id=i},d.prototype.isPixelInRange=function(i){return!(!Fe(this.rowTop)||!Fe(this.rowHeight))&&i>=this.rowTop&&i<this.rowTop+this.rowHeight},d.prototype.setFirstChild=function(i){this.firstChild!==i&&(this.firstChild=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_FIRST_CHILD_CHANGED)))},d.prototype.setLastChild=function(i){this.lastChild!==i&&(this.lastChild=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_LAST_CHILD_CHANGED)))},d.prototype.setChildIndex=function(i){this.childIndex!==i&&(this.childIndex=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_CHILD_INDEX_CHANGED)))},d.prototype.setRowTop=function(i){this.oldRowTop=this.rowTop,this.rowTop!==i&&(this.rowTop=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_TOP_CHANGED)),this.setDisplayed(null!==i))},d.prototype.clearRowTopAndRowIndex=function(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)},d.prototype.setDisplayed=function(i){this.displayed!==i&&(this.displayed=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_DISPLAYED_CHANGED)))},d.prototype.setDragging=function(i){this.dragging!==i&&(this.dragging=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_DRAGGING_CHANGED)))},d.prototype.setHighlighted=function(i){i!==this.highlighted&&(this.highlighted=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_HIGHLIGHT_CHANGED)))},d.prototype.setAllChildrenCount=function(i){this.allChildrenCount!==i&&(this.allChildrenCount=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},d.prototype.setMaster=function(i){this.master!==i&&(this.master&&!i&&(this.expanded=!1),this.master=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_MASTER_CHANGED)))},d.prototype.setRowHeight=function(i,e){void 0===e&&(e=!1),this.rowHeight=i,this.rowHeightEstimated=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_HEIGHT_CHANGED))},d.prototype.setRowAutoHeight=function(i,e){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[e.getId()]=i,null!=i&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=Mu(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())},d.prototype.checkAutoHeights=function(){var i=!1,e=!0,s=0,l=this.__autoHeights;if(null!=l&&(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(function(m){var w=l[m.getId()];null!=w?(e=!1,w>s&&(s=w)):i=!0}),!i&&((e||s<10)&&(s=this.beans.gridOptionsWrapper.getRowHeightForNode(this).height),s!=this.rowHeight))){this.setRowHeight(s);var h=this.beans.rowModel;h.onRowHeightChanged&&h.onRowHeightChanged()}},d.prototype.setRowIndex=function(i){this.rowIndex!==i&&(this.rowIndex=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_ROW_INDEX_CHANGED)))},d.prototype.setUiLevel=function(i){this.uiLevel!==i&&(this.uiLevel=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_UI_LEVEL_CHANGED)))},d.prototype.setExpanded=function(i){if(this.expanded!==i){this.expanded=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_EXPANDED_CHANGED));var e=ii({},this.createGlobalRowEvent($.EVENT_ROW_GROUP_OPENED),{expanded:i});this.beans.rowNodeEventThrottle.dispatchExpanded(e),this.beans.gridOptionsWrapper.isGroupIncludeFooter()&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}},d.prototype.createGlobalRowEvent=function(i){return{type:i,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi()}},d.prototype.dispatchLocalEvent=function(i){this.eventService&&this.eventService.dispatchEvent(i)},d.prototype.setDataValue=function(i,e,s){var l=this.beans.columnModel.getPrimaryColumn(i),c=this.beans.valueService.getValue(l,this);this.beans.valueService.setValue(this,l,e,s),this.dispatchCellChangedEvent(l,e,c)},d.prototype.setGroupValue=function(i,e){var s=this.beans.columnModel.getGridColumn(i);Ce(this.groupData)&&(this.groupData={});var l=s.getColId(),c=this.groupData[l];c!==e&&(this.groupData[l]=e,this.dispatchCellChangedEvent(s,e,c))},d.prototype.setAggData=function(i){var e=this,s=Of([this.aggData,i]),l=this.aggData;this.aggData=i,this.eventService&&s.forEach(function(c){var h=e.beans.columnModel.getGridColumn(c);e.dispatchCellChangedEvent(h,e.aggData?e.aggData[c]:void 0,l?l[c]:void 0)})},d.prototype.updateHasChildren=function(){var i=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;i!==this.__hasChildren&&(this.__hasChildren=!!i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_HAS_CHILDREN_CHANGED)))},d.prototype.hasChildren=function(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren},d.prototype.isEmptyRowGroupNode=function(){return this.group&&ni(this.childrenAfterGroup)},d.prototype.dispatchCellChangedEvent=function(i,e,s){this.dispatchLocalEvent({type:d.EVENT_CELL_CHANGED,node:this,column:i,newValue:e,oldValue:s})},d.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},d.prototype.isExpandable=function(){return!!(this.hasChildren()&&!this.footer||this.master)},d.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},d.prototype.depthFirstSearch=function(i){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(function(e){return e.depthFirstSearch(i)}),i(this)},d.prototype.calculateSelectedFromChildren=function(){var i=!1,e=!1,s=!1;if(this.childrenAfterGroup)for(var c=0;c<this.childrenAfterGroup.length;c++){var h=this.childrenAfterGroup[c];if(h.selectable)switch(h.isSelected()){case!0:i=!0;break;case!1:e=!0;break;default:s=!0}}this.selectThisNode(s?void 0:!(!i||e)||!(!i&&e)&&void 0)},d.prototype.setSelectedInitialValue=function(i){this.selected=i},d.prototype.setSelected=function(i,e,s){void 0===e&&(e=!1),void 0===s&&(s=!1),this.setSelectedParams({newValue:i,clearSelection:e,suppressFinishActions:s,rangeSelect:!1})},d.prototype.isRowPinned=function(){return this.rowPinned===fe.PINNED_TOP||this.rowPinned===fe.PINNED_BOTTOM},d.prototype.setSelectedParams=function(i){var e=this.beans.gridOptionsWrapper.isGroupSelectsChildren(),s=!0===i.newValue,l=!0===i.clearSelection,c=!0===i.suppressFinishActions,h=!0===i.rangeSelect,m=e&&!0===i.groupSelectsFiltered;if(void 0===this.id)return console.warn("AG Grid: cannot select node until id for node is known"),0;if(this.rowPinned)return console.warn("AG Grid: cannot select pinned rows"),0;if(this.footer)return this.sibling.setSelectedParams(i);if(h&&this.beans.selectionService.getLastSelectedNode()){var w=this.beans.selectionService.getLastSelectedNode()!==this,R=this.beans.gridOptionsWrapper.isRowSelectionMulti();if(w&&R){var T=this.doRowRangeSelection(i.newValue);return this.beans.selectionService.setLastSelectedNode(this),T}}var L=0;return m&&this.group||this.selectThisNode(s)&&L++,e&&this.group&&(L+=this.selectChildNodes(s,m)),c||(s&&(l||!this.beans.gridOptionsWrapper.isRowSelectionMulti())&&(L+=this.beans.selectionService.clearOtherNodes(this)),L>0&&(this.beans.selectionService.updateGroupsFromChildrenSelections(),this.beans.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.beans.gridApi,columnApi:this.beans.columnApi})),s&&this.beans.selectionService.setLastSelectedNode(this)),L},d.prototype.doRowRangeSelection=function(i){var e=this;void 0===i&&(i=!0);var s=this.beans.gridOptionsWrapper.isGroupSelectsChildren(),l=this.beans.selectionService.getLastSelectedNode(),c=this.beans.rowModel.getNodesInRangeForSelection(this,l),h=0;return c.forEach(function(w){w.group&&s||!1===i&&e===w||w.selectThisNode(i)&&h++}),this.beans.selectionService.updateGroupsFromChildrenSelections(),this.beans.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.beans.gridApi,columnApi:this.beans.columnApi}),h},d.prototype.isParentOfNode=function(i){for(var e=this.parent;e;){if(e===i)return!0;e=e.parent}return!1},d.prototype.selectThisNode=function(i){if(!this.selectable&&i||this.selected===i)return!1;this.selected=i,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(d.EVENT_ROW_SELECTED));var l=this.createGlobalRowEvent($.EVENT_ROW_SELECTED);return this.beans.eventService.dispatchEvent(l),!0},d.prototype.selectChildNodes=function(i,e){var s=e?this.childrenAfterFilter:this.childrenAfterGroup;if(Ce(s))return 0;for(var l=0,c=0;c<s.length;c++)l+=s[c].setSelectedParams({newValue:i,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:e});return l},d.prototype.addEventListener=function(i,e){this.eventService||(this.eventService=new Js),this.eventService.addEventListener(i,e)},d.prototype.removeEventListener=function(i,e){!this.eventService||(this.eventService.removeEventListener(i,e),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))},d.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(d.EVENT_MOUSE_ENTER))},d.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(d.EVENT_MOUSE_LEAVE))},d.prototype.getFirstChildOfFirstChild=function(i){for(var e=this,s=!0,l=!1,c=null;s&&!l;){var h=e.parent;Fe(h)&&e.firstChild?h.rowGroupColumn===i&&(l=!0,c=h):s=!1,e=h}return l?c:null},d.prototype.isFullWidthCell=function(){var i=this.beans.gridOptionsWrapper.getIsFullWidthCellFunc();return!!i&&i(this)},d.prototype.getRoute=function(){if(null!=this.key){for(var i=[],e=this;null!=e.key;)i.push(e.key),e=e.parent;return i.reverse()}},d.ID_PREFIX_ROW_GROUP="row-group-",d.ID_PREFIX_TOP_PINNED="t-",d.ID_PREFIX_BOTTOM_PINNED="b-",d.OBJECT_ID_SEQUENCE=0,d.EVENT_ROW_SELECTED="rowSelected",d.EVENT_DATA_CHANGED="dataChanged",d.EVENT_CELL_CHANGED="cellChanged",d.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",d.EVENT_MASTER_CHANGED="masterChanged",d.EVENT_MOUSE_ENTER="mouseEnter",d.EVENT_MOUSE_LEAVE="mouseLeave",d.EVENT_HEIGHT_CHANGED="heightChanged",d.EVENT_TOP_CHANGED="topChanged",d.EVENT_DISPLAYED_CHANGED="displayedChanged",d.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",d.EVENT_LAST_CHILD_CHANGED="lastChildChanged",d.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",d.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",d.EVENT_EXPANDED_CHANGED="expandedChanged",d.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",d.EVENT_SELECTABLE_CHANGED="selectableChanged",d.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",d.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",d.EVENT_DRAGGING_CHANGED="draggingChanged",d}(),pg=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Vl=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},iu=function(d){function i(){return d.call(this,'\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')||this}return pg(i,d),i.prototype.postConstruct=function(){this.eCheckbox.setPassive(!0)},i.prototype.getCheckboxId=function(){return this.eCheckbox.getInputElement().id},i.prototype.onDataChanged=function(){this.onSelectionChanged()},i.prototype.onSelectableChanged=function(){this.showOrHideSelect()},i.prototype.onSelectionChanged=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),s=this.rowNode.isSelected(),l=void 0===s?e("ariaIndeterminate","indeterminate"):!0===s?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),c=e("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(s,!0),this.eCheckbox.setInputAriaLabel(c+" ("+l+")")},i.prototype.onCheckedClicked=function(e){var s=this.gridOptionsWrapper.isGroupSelectsFiltered();return this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:s})},i.prototype.onUncheckedClicked=function(e){var s=this.gridOptionsWrapper.isGroupSelectsFiltered();return this.rowNode.setSelectedParams({newValue:!0,rangeSelect:e.shiftKey,groupSelectsFiltered:s})},i.prototype.init=function(e){var s=this;if(this.rowNode=e.rowNode,this.column=e.column,this.onSelectionChanged(),this.addGuiEventListener("click",function(m){return so(m)}),this.addGuiEventListener("dblclick",function(m){return so(m)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",function(m){var w=s.eCheckbox.getValue();void 0===s.eCheckbox.getPreviousValue()?0===s.onUncheckedClicked(m||{})&&s.onCheckedClicked(m):w?s.onCheckedClicked(m):s.onUncheckedClicked(m||{})}),this.addManagedListener(this.rowNode,ln.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsWrapper.getIsRowSelectableFunc()||this.checkboxCallbackExists()){var h=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,h),this.addManagedListener(this.rowNode,ln.EVENT_DATA_CHANGED,h),this.addManagedListener(this.rowNode,ln.EVENT_CELL_CHANGED,h),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")},i.prototype.showOrHideSelect=function(){var e=this.rowNode.selectable;e&&this.checkboxCallbackExists()&&(e=this.column.isCellCheckboxSelection(this.rowNode)),this.setVisible(e)},i.prototype.checkboxCallbackExists=function(){var e=this.column?this.column.getColDef():null;return!!e&&"function"==typeof e.checkboxSelection},Vl([Be("eCheckbox")],i.prototype,"eCheckbox",void 0),Vl([Qe],i.prototype,"postConstruct",null),i}(pn),Wl=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Yo=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};(function(d){d[d.ToolPanel=0]="ToolPanel",d[d.HeaderCell=1]="HeaderCell",d[d.RowDrag=2]="RowDrag",d[d.ChartPanel=3]="ChartPanel"})(Y.rvo||(Y.rvo={})),function(d){d[d.Up=0]="Up",d[d.Down=1]="Down"}(Y.HO_||(Y.HO_={})),function(d){d[d.Left=0]="Left",d[d.Right=1]="Right"}(Y.poj||(Y.poj={}));var Vi=function(d){function i(){var s=null!==d&&d.apply(this,arguments)||this;return s.dragSourceAndParamsList=[],s.dropTargets=[],s}var e;return Wl(i,d),e=i,i.prototype.init=function(){this.ePinnedIcon=jo("columnMovePin",this.gridOptionsWrapper,null),this.eHideIcon=jo("columnMoveHide",this.gridOptionsWrapper,null),this.eMoveIcon=jo("columnMoveMove",this.gridOptionsWrapper,null),this.eLeftIcon=jo("columnMoveLeft",this.gridOptionsWrapper,null),this.eRightIcon=jo("columnMoveRight",this.gridOptionsWrapper,null),this.eGroupIcon=jo("columnMoveGroup",this.gridOptionsWrapper,null),this.eAggregateIcon=jo("columnMoveValue",this.gridOptionsWrapper,null),this.ePivotIcon=jo("columnMovePivot",this.gridOptionsWrapper,null),this.eDropNotAllowedIcon=jo("dropNotAllowed",this.gridOptionsWrapper,null)},i.prototype.addDragSource=function(s,l){void 0===l&&(l=!1);var c={eElement:s.eElement,dragStartPixels:s.dragStartPixels,onDragStart:this.onDragStart.bind(this,s),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this)};this.dragSourceAndParamsList.push({params:c,dragSource:s}),this.dragService.addDragSource(c,l)},i.prototype.removeDragSource=function(s){var l=Li(this.dragSourceAndParamsList,function(c){return c.dragSource===s});l&&(this.dragService.removeDragSource(l.params),ri(this.dragSourceAndParamsList,l))},i.prototype.clearDragSourceParamsList=function(){var s=this;this.dragSourceAndParamsList.forEach(function(l){return s.dragService.removeDragSource(l.params)}),this.dragSourceAndParamsList.length=0},i.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},i.prototype.onDragStart=function(s,l){this.dragging=!0,this.dragSource=s,this.eventLastTime=l,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()},i.prototype.onDragStop=function(s){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var l=this.createDropTargetEvent(this.lastDropTarget,s,null,null,!1);this.lastDropTarget.onDragStop(l)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},i.prototype.onDragging=function(s,l){var c=this,h=this.getHorizontalDirection(s),m=this.getVerticalDirection(s);this.eventLastTime=s,this.positionGhost(s);var w=this.dropTargets.filter(function(U){return c.isMouseOnDropTarget(s,U)}),R=w.length,T=null;if(R>0&&(T=1===R?w[0]:w.reduce(function(U,K){if(!U)return K;var Q=U.getContainer(),oe=K.getContainer();return Q.contains(oe)?K:U})),T!==this.lastDropTarget)this.leaveLastTargetIfExists(s,h,m,l),this.enterDragTargetIfExists(T,s,h,m,l),this.lastDropTarget=T;else if(T&&T.onDragging){var L=this.createDropTargetEvent(T,s,h,m,l);T.onDragging(L)}},i.prototype.enterDragTargetIfExists=function(s,l,c,h,m){if(s){if(s.onDragEnter){var w=this.createDropTargetEvent(s,l,c,h,m);s.onDragEnter(w)}this.setGhostIcon(s.getIconName?s.getIconName():null)}},i.prototype.leaveLastTargetIfExists=function(s,l,c,h){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){var m=this.createDropTargetEvent(this.lastDropTarget,s,l,c,h);this.lastDropTarget.onDragLeave(m)}this.setGhostIcon(null)}},i.prototype.getAllContainersFromDropTarget=function(s){var l=s.getSecondaryContainers?s.getSecondaryContainers():null,c=[[s.getContainer()]];return l?c.concat(l):c},i.prototype.allContainersIntersect=function(s,l){for(var c=0,h=l;c<h.length;c++){var w=h[c].getBoundingClientRect();if(0===w.width||0===w.height)return!1;if(!(s.clientX>=w.left&&s.clientX<w.right&&s.clientY>=w.top&&s.clientY<w.bottom))return!1}return!0},i.prototype.isMouseOnDropTarget=function(s,l){for(var h=!1,m=0,w=this.getAllContainersFromDropTarget(l);m<w.length;m++)if(this.allContainersIntersect(s,w[m])){h=!0;break}return h&&l.isInterestedIn(this.dragSource.type)},i.prototype.addDropTarget=function(s){this.dropTargets.push(s)},i.prototype.removeDropTarget=function(s){this.dropTargets=this.dropTargets.filter(function(l){return l.getContainer()!==s.getContainer()})},i.prototype.hasExternalDropZones=function(){return this.dropTargets.some(function(s){return s.external})},i.prototype.findExternalZone=function(s){return Li(this.dropTargets.filter(function(c){return c.external}),function(c){return c.getContainer()===s.getContainer()})},i.prototype.getHorizontalDirection=function(s){var l=this.eventLastTime&&this.eventLastTime.clientX,c=s.clientX;return l===c?null:l>c?Y.poj.Left:Y.poj.Right},i.prototype.getVerticalDirection=function(s){var l=this.eventLastTime&&this.eventLastTime.clientY,c=s.clientY;return l===c?null:l>c?Y.HO_.Up:Y.HO_.Down},i.prototype.createDropTargetEvent=function(s,l,c,h,m){var w=s.getContainer(),R=w.getBoundingClientRect(),T=this;return{event:l,x:l.clientX-R.left,y:l.clientY-R.top,vDirection:h,hDirection:c,dragSource:T.dragSource,fromNudge:m,dragItem:T.dragItem,api:T.gridApi,columnApi:T.columnApi,dropZoneTarget:w}},i.prototype.positionGhost=function(s){var l=this.eGhost;if(l){var h=l.getBoundingClientRect().height,m=KE()-2,w=YE()-2,R=s.pageY-h/2,T=s.pageX-10,L=this.gridOptionsWrapper.getDocument(),U=window.pageYOffset||L.documentElement.scrollTop,K=window.pageXOffset||L.documentElement.scrollLeft;m>0&&T+l.clientWidth>m+K&&(T=m+K-l.clientWidth),T<0&&(T=0),w>0&&R+l.clientHeight>w+U&&(R=w+U-l.clientHeight),R<0&&(R=0),l.style.left=T+"px",l.style.top=R+"px"}},i.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},i.prototype.createGhost=function(){this.eGhost=sa(e.GHOST_TEMPLATE);var s=this.environment.getTheme().theme;s&&Dt(this.eGhost,s),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var l=this.eGhost.querySelector(".ag-dnd-ghost-label"),c=this.dragSource.dragItemName;xl(c)&&(c=c()),l.innerHTML=oa(c)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var h=this.gridOptionsWrapper.getDocument(),m=h.fullscreenElement||h.querySelector("body");this.eGhostParent=m,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")},i.prototype.setGhostIcon=function(s,l){void 0===l&&(l=!1),uo(this.eGhostIcon);var c=null;switch(s||(s=this.dragSource.defaultIconName||e.ICON_NOT_ALLOWED),s){case e.ICON_PINNED:c=this.ePinnedIcon;break;case e.ICON_MOVE:c=this.eMoveIcon;break;case e.ICON_LEFT:c=this.eLeftIcon;break;case e.ICON_RIGHT:c=this.eRightIcon;break;case e.ICON_GROUP:c=this.eGroupIcon;break;case e.ICON_AGGREGATE:c=this.eAggregateIcon;break;case e.ICON_PIVOT:c=this.ePivotIcon;break;case e.ICON_NOT_ALLOWED:c=this.eDropNotAllowedIcon;break;case e.ICON_HIDE:c=this.eHideIcon}Ft(this.eGhostIcon,"ag-shake-left-to-right",l),(c!==this.eHideIcon||!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns())&&c&&this.eGhostIcon.appendChild(c)},i.ICON_PINNED="pinned",i.ICON_MOVE="move",i.ICON_LEFT="left",i.ICON_RIGHT="right",i.ICON_GROUP="group",i.ICON_AGGREGATE="aggregate",i.ICON_PIVOT="pivot",i.ICON_NOT_ALLOWED="notAllowed",i.ICON_HIDE="hide",i.GHOST_TEMPLATE='<div class="ag-dnd-ghost ag-unselectable">\n            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n            <div class="ag-dnd-ghost-label"></div>\n        </div>',Yo([H("dragService")],i.prototype,"dragService",void 0),Yo([H("environment")],i.prototype,"environment",void 0),Yo([H("columnApi")],i.prototype,"columnApi",void 0),Yo([H("gridApi")],i.prototype,"gridApi",void 0),Yo([Qe],i.prototype,"init",null),Yo([Fi],i.prototype,"clearDragSourceParamsList",null),e=Yo([vt("dragAndDropService")],i)}(Ke),Ul=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ha=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},zl=function(d){function i(e,s,l,c,h,m){var w=d.call(this)||this;return w.cellValueFn=e,w.rowNode=s,w.column=l,w.customGui=c,w.dragStartPixels=h,w.suppressVisibilityChange=m,w.dragSource=null,w}return Ul(i,d),i.prototype.isCustomGui=function(){return null!=this.customGui},i.prototype.postConstruct=function(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(ui("rowDrag",this.beans.gridOptionsWrapper,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){var e=this.beans.gridOptionsWrapper.isRowDragManaged()?new hg(this,this.beans,this.rowNode,this.column):new On(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}},i.prototype.setDragElement=function(e,s){this.setTemplateFromElement(e),this.addDragSource(s)},i.prototype.getSelectedCount=function(){if(!this.beans.gridOptionsWrapper.isRowDragMultiRow())return 1;var s=this.beans.selectionService.getSelectedNodes();return-1!==s.indexOf(this.rowNode)?s.length:1},i.prototype.checkCompatibility=function(){var e=this.beans.gridOptionsWrapper.isRowDragManaged();this.beans.gridOptionsWrapper.isTreeData()&&e&&vn(function(){return console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true")},"RowDragComp.managedAndTreeData")},i.prototype.addDragSource=function(e){var s=this;void 0===e&&(e=4),this.dragSource&&this.removeDragSource();var l={rowNode:this.rowNode,columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()},c=this.column&&this.column.getColDef().rowDragText;this.dragSource={type:Y.rvo.RowDrag,eElement:this.getGui(),dragItemName:function(){var m=s.getSelectedCount();return c?c(l,m):1===m?s.cellValueFn():m+" rows"},getDragItem:function(){return l},dragStartPixels:e,dragSourceDomDataKey:this.beans.gridOptionsWrapper.getDomDataKey()},this.addMouseDownListenerIfNeeded(),this.beans.dragAndDropService.addDragSource(this.dragSource,!0)},i.prototype.addMouseDownListenerIfNeeded=function(){var e=this;this.customGui||!this.column||!this.gridOptionsWrapper.isEnableCellTextSelect()||this.addManagedListener(this.getGui(),"mousedown",function(s){s.preventDefault(),e.beans.focusService.setFocusedCell(e.rowNode.rowIndex,e.column,e.rowNode.rowPinned,!0)})},i.prototype.removeDragSource=function(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null},Ha([H("beans")],i.prototype,"beans",void 0),Ha([Qe],i.prototype,"postConstruct",null),Ha([Fi],i.prototype,"removeDragSource",null),i}(pn),uC=function(d){function i(e,s,l){var c=d.call(this)||this;return c.parent=e,c.rowNode=s,c.column=l,c}return Ul(i,d),i.prototype.setDisplayedOrVisible=function(e){if(e)this.parent.setDisplayed(!1);else{var s=!0,l=!1;this.column&&(s=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),l=xl(this.column.getColDef().rowDrag)),l?(this.parent.setDisplayed(!0),this.parent.setVisible(s)):(this.parent.setDisplayed(s),this.parent.setVisible(!0))}},i}(Ke),On=function(d){function i(e,s,l,c){var h=d.call(this,e,l,c)||this;return h.beans=s,h}return Ul(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()},i.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},i.prototype.workOutVisibility=function(){var e=this.beans.gridOptionsWrapper.isSuppressRowDrag();this.setDisplayedOrVisible(e)},Ha([Qe],i.prototype,"postConstruct",null),i}(uC),hg=function(d){function i(e,s,l,c){var h=d.call(this,e,l,c)||this;return h.beans=s,h}return Ul(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.beans.eventService,$.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()},i.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},i.prototype.workOutVisibility=function(){var s=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),l=s&&s.shouldPreventRowMove(),c=this.beans.gridOptionsWrapper.isSuppressRowDrag(),h=this.beans.dragAndDropService.hasExternalDropZones();this.setDisplayedOrVisible(l&&!h||c)},Ha([Qe],i.prototype,"postConstruct",null),i}(uC),Db=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),dp=function(){return dp=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},dp.apply(this,arguments)},jl=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ab=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Db(i,d),i.prototype.init=function(e,s,l,c,h,m,w){this.params=w,this.eGui=s,this.eCheckbox=l,this.eExpanded=c,this.eContracted=h,this.comp=e,this.compClass=m;var R=this.isTopLevelFooter(),T=this.isEmbeddedRowMismatch(),L=null==w.value,U=!1;if(this.gridOptionsWrapper.isGroupIncludeFooter()&&this.gridOptionsWrapper.isGroupHideOpenParents()){var K=w.node;K.footer&&(U=(w.colDef&&w.colDef.showRowGroup)!==(K.rowGroupColumn&&K.rowGroupColumn.getColId()))}this.cellIsBlank=!R&&(T||L||U),!this.cellIsBlank&&(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),this.addFullWidthRowDraggerIfNeeded(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent())},i.prototype.isTopLevelFooter=function(){if(!this.gridOptionsWrapper.isGroupIncludeTotalFooter()||null!=this.params.value||-1!=this.params.node.level)return!1;var e=this.params.colDef;if(null==e||!0===e.showRowGroup)return!0;var l=this.columnModel.getRowGroupColumns();return!l||0===l.length||l[0].getId()===e.showRowGroup},i.prototype.isEmbeddedRowMismatch=function(){if(!this.params.fullWidth||!this.gridOptionsWrapper.isEmbedFullWidthRows())return!1;var e=this.params.pinned===fe.PINNED_LEFT,s=this.params.pinned===fe.PINNED_RIGHT,l=!e&&!s;return this.gridOptionsWrapper.isEnableRtl()?this.columnModel.isPinningLeft()?!s:!l:this.columnModel.isPinningLeft()?!e:!l},i.prototype.findDisplayedGroupNode=function(){var e=this.params.column,s=this.params.node;if(this.showingValueForOpenedParent)for(var l=s.parent;null!=l;){if(l.rowGroupColumn&&e.isRowGroupDisplayed(l.rowGroupColumn.getId())){this.displayedGroupNode=l;break}l=l.parent}Ce(this.displayedGroupNode)&&(this.displayedGroupNode=s)},i.prototype.setupShowingValueForOpenedParent=function(){var e=this.params.node,s=this.params.column;if(this.gridOptionsWrapper.isGroupHideOpenParents())if(e.groupData){if(null!=e.rowGroupColumn){var c=e.rowGroupColumn.getId();if(s.isRowGroupDisplayed(c))return void(this.showingValueForOpenedParent=!1)}var m=null!=e.groupData[s.getId()];this.showingValueForOpenedParent=m}else this.showingValueForOpenedParent=!1;else this.showingValueForOpenedParent=!1},i.prototype.addValueElement=function(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())},i.prototype.addGroupValue=function(){var e=this.adjustParamsWithDetailsFromRelatedColumn(),s=this.getInnerCompDetails(e),l=e.valueFormatted;this.comp.setInnerRenderer(s,null!=l?l:e.value)},i.prototype.adjustParamsWithDetailsFromRelatedColumn=function(){var e=this.displayedGroupNode.rowGroupColumn,s=this.params.column;if(!e)return this.params;if(null!=s&&!s.isRowGroupDisplayed(e.getId()))return this.params;var h=this.params,m=this.params,L=this.valueFormatterService.formatValue(e,m.node,m.scope,m.value);return dp(dp({},h),{valueFormatted:L})},i.prototype.addFooterValue=function(){var e=this.params.footerValueGetter,s="";if(e){var l=cs(this.params);l.value=this.params.value,"function"==typeof e?s=e(l):"string"==typeof e?s=this.expressionService.evaluate(e,l):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else s="Total "+(null!=this.params.value?this.params.value:"");var c=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(c,s)},i.prototype.getInnerCompDetails=function(e){var s=this;if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptions.groupRowRendererParams,e);var l=this.userComponentFactory.getInnerRendererDetails(e,e),c=function(L){return L&&L.componentClass==s.compClass};if(l&&!c(l))return l;var h=this.displayedGroupNode.rowGroupColumn,m=h?h.getColDef():void 0;if(m){var w=this.userComponentFactory.getCellRendererDetails(m,e);if(w&&!c(w))return w;if(c(w)&&m.cellRendererParams&&m.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(m.cellRendererParams,e)}},i.prototype.addChildCount=function(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,ln.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},i.prototype.updateChildCount=function(){var e=this.displayedGroupNode.allChildrenCount,s=this.isShowRowGroupForThisRow();this.comp.setChildCount(s&&null!=e&&e>=0?"("+e+")":"")},i.prototype.isShowRowGroupForThisRow=function(){if(this.gridOptionsWrapper.isTreeData())return!0;var e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;var s=this.params.column;return null==s||s.isRowGroupDisplayed(e.getId())},i.prototype.addExpandAndContract=function(){var e=this.params,s=ui("groupExpanded",this.gridOptionsWrapper,null),l=ui("groupContracted",this.gridOptionsWrapper,null);s&&this.eExpanded.appendChild(s),l&&this.eContracted.appendChild(l);var c=e.eGridCell;!this.gridOptionsWrapper.isEnableGroupEdit()&&this.isExpandable()&&!e.suppressDoubleClickExpand&&this.addManagedListener(c,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(c,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(e.node,ln.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();var h=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,ln.EVENT_ALL_CHILDREN_COUNT_CHANGED,h),this.addManagedListener(this.displayedGroupNode,ln.EVENT_MASTER_CHANGED,h),this.addManagedListener(this.displayedGroupNode,ln.EVENT_HAS_CHILDREN_CHANGED,h)},i.prototype.onExpandClicked=function(e){Da(e)||(so(e),this.onExpandOrContract())},i.prototype.onExpandOrContract=function(){var e=this.displayedGroupNode;e.setExpanded(!e.expanded)},i.prototype.isExpandable=function(){if(this.showingValueForOpenedParent)return!0;var e=this.displayedGroupNode,s=this.columnModel.isPivotMode()&&e.leafGroup;if(!e.isExpandable()||e.footer||s)return!1;var c=this.params.column;return null==c||"string"!=typeof c.getColDef().showRowGroup||this.isShowRowGroupForThisRow()},i.prototype.showExpandAndContractIcons=function(){var e=this,l=e.displayedGroupNode,c=e.columnModel,h=e.params.node,m=this.isExpandable();if(m){var w=!!this.showingValueForOpenedParent||h.expanded;this.comp.setExpandedDisplayed(w),this.comp.setContractedDisplayed(!w)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);var R=c.isPivotMode(),T=R&&l.leafGroup,L=m&&!T,U=h.footer&&-1===h.level;this.comp.addOrRemoveCssClass("ag-cell-expandable",L),this.comp.addOrRemoveCssClass("ag-row-group",L),R?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",T):U||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!L)},i.prototype.onRowNodeIsExpandableChanged=function(){this.showExpandAndContractIcons(),this.setIndent()},i.prototype.setupIndent=function(){this.params.suppressPadding||(this.addManagedListener(this.params.node,ln.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},i.prototype.setIndent=function(){if(!this.gridOptionsWrapper.isGroupHideOpenParents()){var e=this.params,s=e.node,l=!!e.colDef,c=this.gridOptionsWrapper.isTreeData(),m=!l||c||!0===e.colDef.showRowGroup?s.uiLevel:0;e.padding>=0&&vn(function(){return console.warn("AG Grid: cellRendererParams.padding no longer works, it was deprecated in since v14.2 and removed in v26, configuring padding for groupCellRenderer should be done with Sass variables and themes. Please see the AG Grid documentation page for Themes, in particular the property $row-group-indent-size.")},"groupCellRenderer->doDeprecatedWay"),this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+m,this.comp.addOrRemoveCssClass(this.indentClass,!0)}},i.prototype.addFullWidthRowDraggerIfNeeded=function(){var e=this;if(this.params.fullWidth&&this.params.rowDrag){var s=new zl(function(){return e.params.value},this.params.node);this.createManagedBean(s,this.context),this.eGui.insertAdjacentElement("afterbegin",s.getGui())}},i.prototype.isUserWantsSelected=function(){var e=this.params.checkbox;return"function"==typeof e?e(this.params):!0===e},i.prototype.addCheckboxIfNeeded=function(){var e=this,s=this.displayedGroupNode,l=this.isUserWantsSelected()&&!s.footer&&!s.rowPinned&&!s.detail;if(l){var c=new iu;this.getContext().createBean(c),c.init({rowNode:s,column:this.params.column}),this.eCheckbox.appendChild(c.getGui()),this.addDestroyFunc(function(){return e.getContext().destroyBean(c)})}this.comp.setCheckboxVisible(l)},i.prototype.onKeyDown=function(e){ed(e,$e.ENTER)&&!this.params.suppressEnterExpand&&(this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract())},i.prototype.onCellDblClicked=function(e){Da(e)||kf(this.eExpanded,e)||kf(this.eContracted,e)||this.onExpandOrContract()},jl([H("expressionService")],i.prototype,"expressionService",void 0),jl([H("valueFormatterService")],i.prototype,"valueFormatterService",void 0),jl([H("columnModel")],i.prototype,"columnModel",void 0),jl([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),jl([H("gridOptions")],i.prototype,"gridOptions",void 0),i}(Ke),EM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),hd=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Bu=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return EM(i,d),i.prototype.init=function(e){var s=this,l={setInnerRenderer:function(R,T){return s.setRenderDetails(R,T)},setChildCount:function(R){return s.eChildCount.innerHTML=R},addOrRemoveCssClass:function(R,T){return s.addOrRemoveCssClass(R,T)},setContractedDisplayed:function(R){return $n(s.eContracted,R)},setExpandedDisplayed:function(R){return $n(s.eExpanded,R)},setCheckboxVisible:function(R){return Ft(s.eCheckbox,"ag-invisible",!R)}},c=this.createManagedBean(new Ab),h=!e.colDef,m=this.getGui();c.init(l,m,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),h&&Ki(m,"gridcell")},i.prototype.setRenderDetails=function(e,s){var l=this;if(e){var c=e.newAgStackInstance();if(!c)return;c.then(function(h){if(h){var m=function(){return l.context.destroyBean(h)};l.isAlive()?(l.eValue.appendChild(h.getGui()),l.addDestroyFunc(m)):m()}})}else this.eValue.innerText=s},i.prototype.destroy=function(){this.getContext().destroyBean(this.innerCellRenderer),d.prototype.destroy.call(this)},i.prototype.refresh=function(){return!1},i.TEMPLATE='<span class="ag-cell-wrapper">\n            <span class="ag-group-expanded" ref="eExpanded"></span>\n            <span class="ag-group-contracted" ref="eContracted"></span>\n            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>\n            <span class="ag-group-value" ref="eValue"></span>\n            <span class="ag-group-child-count" ref="eChildCount"></span>\n        </span>',hd([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),hd([Be("eExpanded")],i.prototype,"eExpanded",void 0),hd([Be("eContracted")],i.prototype,"eContracted",void 0),hd([Be("eCheckbox")],i.prototype,"eCheckbox",void 0),hd([Be("eValue")],i.prototype,"eValue",void 0),hd([Be("eChildCount")],i.prototype,"eChildCount",void 0),i}(pn),bM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ur=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},vg=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return bM(i,d),i.prototype.init=function(e){e.node.failedLoad?this.setupFailed():this.setupLoading()},i.prototype.setupFailed=function(){this.eLoadingText.innerText="ERR"},i.prototype.setupLoading=function(){var e=ui("groupLoading",this.gridOptionsWrapper,null);e&&this.eLoadingIcon.appendChild(e);var s=this.gridOptionsWrapper.getLocaleTextFunc();this.eLoadingText.innerText=s("loadingOoo","Loading")},i.prototype.refresh=function(e){return!1},i.TEMPLATE='<div class="ag-loading">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',Ur([Be("eLoadingIcon")],i.prototype,"eLoadingIcon",void 0),Ur([Be("eLoadingText")],i.prototype,"eLoadingText",void 0),i}(pn),vd=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),xM=function(d){function i(){return d.call(this)||this}return vd(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(e){var s=this.gridOptionsWrapper.getOverlayLoadingTemplate()?this.gridOptionsWrapper.getOverlayLoadingTemplate():i.DEFAULT_LOADING_OVERLAY_TEMPLATE,l=this.gridOptionsWrapper.getLocaleTextFunc(),c=s.replace("[LOADING...]",l("loadingOoo","Loading..."));this.setTemplate(c)},i.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',i}(pn),Mb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),$o=function(d){function i(){return d.call(this)||this}return Mb(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(e){var s=this.gridOptionsWrapper.getOverlayNoRowsTemplate()?this.gridOptionsWrapper.getOverlayNoRowsTemplate():i.DEFAULT_NO_ROWS_TEMPLATE,l=this.gridOptionsWrapper.getLocaleTextFunc(),c=s.replace("[NO_ROWS_TO_SHOW]",l("noRowsToShow","No Rows To Show"));this.setTemplate(c)},i.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',i}(pn),Va=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),lC=function(d){function i(){return d.call(this,'<div class="ag-tooltip"></div>')||this}return Va(i,d),i.prototype.init=function(e){var s=e.value;this.getGui().innerHTML=oa(s)},i}(ku),fp=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Hu=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},gg=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.agGridDefaults={agDateInput:ru,agColumnHeader:Sb,agColumnGroupHeader:sp,agTextColumnFloatingFilter:sd,agNumberColumnFloatingFilter:Q_,agDateColumnFloatingFilter:lg,agReadOnlyFloatingFilter:Pr,agAnimateShowChangeCellRenderer:oC,agAnimateSlideCellRenderer:Gu,agGroupCellRenderer:Bu,agGroupRowRenderer:Bu,agLoadingCellRenderer:vg,agCellEditor:fd,agTextCellEditor:fd,agSelectCellEditor:cd,agPopupTextCellEditor:fg,agPopupSelectCellEditor:dd,agLargeTextCellEditor:nC,agTextColumnFilter:op,agNumberColumnFilter:cg,agDateColumnFilter:ug,agLoadingOverlay:xM,agNoRowsOverlay:$o,agTooltipComponent:lC},e.agDeprecatedNames={set:{newComponentName:"agSetColumnFilter",propertyHolder:"filter"},text:{newComponentName:"agTextColumnFilter",propertyHolder:"filter"},number:{newComponentName:"agNumberColumnFilter",propertyHolder:"filter"},date:{newComponentName:"agDateColumnFilter",propertyHolder:"filter"},group:{newComponentName:"agGroupCellRenderer",propertyHolder:"cellRenderer"},animateShowChange:{newComponentName:"agAnimateShowChangeCellRenderer",propertyHolder:"cellRenderer"},animateSlide:{newComponentName:"agAnimateSlideCellRenderer",propertyHolder:"cellRenderer"},select:{newComponentName:"agSelectCellEditor",propertyHolder:"cellEditor"},largeText:{newComponentName:"agLargeTextCellEditor",propertyHolder:"cellEditor"},popupSelect:{newComponentName:"agPopupSelectCellEditor",propertyHolder:"cellEditor"},popupText:{newComponentName:"agPopupTextCellEditor",propertyHolder:"cellEditor"},richSelect:{newComponentName:"agRichSelectCellEditor",propertyHolder:"cellEditor"},headerComponent:{newComponentName:"agColumnHeader",propertyHolder:"headerComponent"}},e.jsComponents={},e.frameworkComponents={},e}return fp(i,d),i.prototype.init=function(){var e=this;null!=this.gridOptions.components&&Fn(this.gridOptions.components,function(s,l){return e.registerComponent(s,l)}),null!=this.gridOptions.frameworkComponents&&Fn(this.gridOptions.frameworkComponents,function(s,l){return e.registerFwComponent(s,l)})},i.prototype.registerDefaultComponent=function(e,s){var l=this.translateIfDeprecated(e);this.agGridDefaults[l]?console.error("Trying to overwrite a default component. You should call registerComponent"):this.agGridDefaults[l]=s},i.prototype.registerComponent=function(e,s){var l=this.translateIfDeprecated(e);this.frameworkComponents[l]?console.error("Trying to register a component that you have already registered for frameworks: "+l):this.jsComponents[l]=s},i.prototype.registerFwComponent=function(e,s){var l=this.translateIfDeprecated(e);this.jsComponents[l]?console.error("Trying to register a component that you have already registered for plain javascript: "+l):this.frameworkComponents[l]=s},i.prototype.retrieve=function(e){var s=this.translateIfDeprecated(e),l=this.frameworkComponents[s]||this.getFrameworkOverrides().frameworkComponent(s);if(l)return{componentFromFramework:!0,component:l};var c=this.jsComponents[s];if(c)return{componentFromFramework:!1,component:c};var h=this.agGridDefaults[s];return h?{componentFromFramework:!1,component:h}:(Object.keys(this.agGridDefaults).indexOf(s)<0&&console.warn("AG Grid: Looking for component ["+s+"] but it wasn't found."),null)},i.prototype.translateIfDeprecated=function(e){var s=this.agDeprecatedNames[e];return null!=s?(vn(function(){console.warn("ag-grid. Since v15.0 component names have been renamed to be namespaced. You should rename "+s.propertyHolder+":"+e+" to "+s.propertyHolder+":"+s.newComponentName)},"DEPRECATE_COMPONENT_"+e),s.newComponentName):e},Hu([H("gridOptions")],i.prototype,"gridOptions",void 0),Hu([Qe],i.prototype,"init",null),Hu([vt("userComponentRegistry")],i)}(Ke),Ob={propertyName:"dateComponent",isCellRenderer:function(){return!1}},Pb={propertyName:"headerComponent",isCellRenderer:function(){return!1}},RM={propertyName:"headerGroupComponent",isCellRenderer:function(){return!1}},Ib={propertyName:"cellRenderer",isCellRenderer:function(){return!0}},cC={propertyName:"cellEditor",isCellRenderer:function(){return!1}},vo={propertyName:"innerRenderer",isCellRenderer:function(){return!0}},mg={propertyName:"loadingOverlayComponent",isCellRenderer:function(){return!1}},ql={propertyName:"noRowsOverlayComponent",isCellRenderer:function(){return!1}},TM={propertyName:"tooltipComponent",isCellRenderer:function(){return!1}},dC={propertyName:"filter",isCellRenderer:function(){return!1}},Lb={propertyName:"floatingFilterComponent",isCellRenderer:function(){return!1}},Fb={propertyName:"toolPanel",isCellRenderer:function(){return!1}},Nb={propertyName:"statusPanel",isCellRenderer:function(){return!1}},kb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Kl=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},yg=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return kb(i,d),i.prototype.getHeaderCompDetails=function(e,s){return this.getCompDetails(e,Pb,"agColumnHeader",s)},i.prototype.getHeaderGroupCompDetails=function(e){var s=e.columnGroup.getColGroupDef();return this.getCompDetails(s,RM,"agColumnGroupHeader",e)},i.prototype.getFullWidthCellRendererDetails=function(e,s,l){return this.getCompDetails(this.gridOptions,{propertyName:s,isCellRenderer:function(){return!0}},l,e)},i.prototype.getInnerRendererDetails=function(e,s){return this.getCompDetails(e,vo,null,s)},i.prototype.getFullWidthGroupRowInnerCellRenderer=function(e,s){return this.getCompDetails(e,vo,null,s)},i.prototype.getCellRendererDetails=function(e,s){return this.getCompDetails(e,Ib,null,s)},i.prototype.getCellEditorDetails=function(e,s){return this.getCompDetails(e,cC,"agCellEditor",s,!0)},i.prototype.getFilterDetails=function(e,s,l){return this.getCompDetails(e,dC,l,s,!0)},i.prototype.getDateCompDetails=function(e){return this.getCompDetails(this.gridOptions,Ob,"agDateInput",e,!0)},i.prototype.getLoadingOverlayCompDetails=function(e){return this.getCompDetails(this.gridOptions,mg,"agLoadingOverlay",e,!0)},i.prototype.getNoRowsOverlayCompDetails=function(e){return this.getCompDetails(this.gridOptions,ql,"agNoRowsOverlay",e,!0)},i.prototype.getTooltipCompDetails=function(e){return this.getCompDetails(e.colDef,TM,"agTooltipComponent",e,!0)},i.prototype.getSetFilterCellRendererDetails=function(e,s){return this.getCompDetails(e,Ib,null,s)},i.prototype.getFloatingFilterCompDetails=function(e,s,l){return this.getCompDetails(e,Lb,l,s)},i.prototype.getToolPanelCompDetails=function(e,s){return this.getCompDetails(e,Fb,null,s,!0)},i.prototype.getStatusPanelCompDetails=function(e,s){return this.getCompDetails(e,Nb,null,s,!0)},i.prototype.getCompDetails=function(e,s,l,c,h){var m=this;void 0===h&&(h=!1);var R,T,L,w=s.propertyName;if(e){var U=e,K=U[w+"Selector"],Q=K?K(c):null;Q?(R=Q.component,T=Q.frameworkComponent,L=Q.params):(R=U[w],T=U[w+"Framework"]),!0===R&&(R=void 0)}var oe=function(an){var Gt=m.userComponentRegistry.retrieve(an);Gt?(R=Gt.componentFromFramework?void 0:Gt.component,T=Gt.componentFromFramework?Gt.component:void 0):(R=void 0,T=void 0)};if("string"==typeof R&&oe(R),null==R&&null==T&&null!=l&&oe(l),R&&!this.agComponentUtils.doesImplementIComponent(R)&&(R=this.agComponentUtils.adaptFunction(w,R)),R||T){var Ve=this.mergeParamsWithApplicationProvidedParams(e,w,c,L),Pe=null==R,Ze=R||T;return{componentFromFramework:Pe,componentClass:Ze,params:Ve,type:s,newAgStackInstance:function(an){return m.newAgStackInstance(Ze,Pe,Ve,s,an)}}}h&&console.error("Could not find component "+((e?e[w]:l)||l)+", did you forget to configure this component?")},i.prototype.newAgStackInstance=function(e,s,l,c,h){var w;if(s){var T=this.componentMetadataProvider.retrieve(c.propertyName);w=this.frameworkComponentWrapper.wrap(e,T.mandatoryMethodList,T.optionalMethodList,c,h)}else w=new e;var L=this.initComponent(w,l);return null==L?Zr.resolve(w):L.then(function(){return w})},i.prototype.mergeParamsWithApplicationProvidedParams=function(e,s,l,c){void 0===c&&(c=null);var h={};ao(h,l);var m=e?e[s+"Params"]:null;return null!=m&&("function"==typeof m?ao(h,m(l)):"object"==typeof m&&ao(h,m)),ao(h,c),h},i.prototype.initComponent=function(e,s){if(this.context.createBean(e),null!=e.init)return e.init(s)},Kl([H("gridOptions")],i.prototype,"gridOptions",void 0),Kl([H("agComponentUtils")],i.prototype,"agComponentUtils",void 0),Kl([H("componentMetadataProvider")],i.prototype,"componentMetadataProvider",void 0),Kl([H("userComponentRegistry")],i.prototype,"userComponentRegistry",void 0),Kl([Nn("frameworkComponentWrapper")],i.prototype,"frameworkComponentWrapper",void 0),Kl([vt("userComponentFactory")],i)}(Ke),pp=function(){function d(){}return d.parse=function(i){if(!i)return null;if(!0===i)return{toolPanels:[d.DEFAULT_COLUMN_COMP,d.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if("string"==typeof i)return d.parse([i]);if(Array.isArray(i)){var e=[];return i.forEach(function(l){var c=d.DEFAULT_BY_KEY[l];c?e.push(c):console.warn("ag-grid: the key "+l+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(d.DEFAULT_BY_KEY).join(","))}),0===e.length?null:{toolPanels:e,defaultToolPanel:e[0].id}}return{toolPanels:d.parseComponents(i.toolPanels),defaultToolPanel:i.defaultToolPanel,hiddenByDefault:i.hiddenByDefault,position:i.position}},d.parseComponents=function(i){var e=[];return i&&i.forEach(function(s){var l=null;if("string"==typeof s){var c=d.DEFAULT_BY_KEY[s];if(!c)return void console.warn("ag-grid: the key "+s+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(d.DEFAULT_BY_KEY).join(","));l=c}else l=s;e.push(l)}),e},d.DEFAULT_BY_KEY={columns:d.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"},filters:d.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"}},d}(),Wa=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},fC=function(d,i){return function(e,s){i(e,s,d)}},Vu=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s};function Ie(d){return!0===d||"true"===d}function pC(d){return"number"==typeof d?d:"string"==typeof d?parseInt(d,10):void 0}function Cg(d,i){var e=parseInt(d,10);return ki(e)&&e>0?e:i}var gt=function(){function d(){this.propertyEventService=new Js,this.domDataKey="__AG_"+Math.random().toString(),this.destroyed=!1}var i;return i=d,d.prototype.agWire=function(e,s){this.gridOptions.api=e,this.gridOptions.columnApi=s,this.checkForDeprecated(),this.checkForViolations()},d.prototype.destroy=function(){this.gridOptions.api=null,this.gridOptions.columnApi=null,this.destroyed=!0},d.prototype.init=function(){var e=this;!0!==this.gridOptions.suppressPropertyNamesCheck&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties()),null!=this.gridOptions.sideBar&&(this.gridOptions.sideBar=pp.parse(this.gridOptions.sideBar));var s=this.useAsyncEvents();if(this.eventService.addGlobalListener(this.globalEventHandler.bind(this),s),this.isGroupSelectsChildren()&&this.isSuppressParentsInRowNodes()&&console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work"),this.isGroupSelectsChildren()&&(this.isRowSelectionMulti()||console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.isRowModelServerSide()&&console.warn("AG Grid: group selects children is NOT support for Server Side Row Model. This is because the rows are lazy loaded, so selecting a group is not possible asthe grid has no way of knowing what the children are.")),this.isGroupRemoveSingleChildren()&&this.isGroupHideOpenParents()&&console.warn("AG Grid: groupRemoveSingleChildren and groupHideOpenParents do not work with each other, you need to pick one. And don't ask us how to us these together on our support forum either you will get the same answer!"),this.isRowModelServerSide()){var l=function(m){return"AG Grid: '"+m+"' is not supported on the Server-Side Row Model"};Fe(this.gridOptions.groupDefaultExpanded)&&console.warn(l("groupDefaultExpanded")),Fe(this.gridOptions.groupDefaultExpanded)&&console.warn(l("groupIncludeFooter")),Fe(this.gridOptions.groupDefaultExpanded)&&console.warn(l("groupIncludeTotalFooter"))}this.isEnableRangeSelection()&&qt.assertRegistered(Y.GXE.RangeSelectionModule,"enableRangeSelection"),!this.isEnableRangeSelection()&&(this.isEnableRangeHandle()||this.isEnableFillHandle())&&console.warn("AG Grid: 'enableRangeHandle' and 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");var c=function(m){e.gridOptions.icons&&e.gridOptions.icons[m]&&console.warn("gridOptions.icons."+m+" is no longer supported. For information on how to style checkboxes and radio buttons, see https://www.ag-grid.com/javascript-grid-icons/")};c("radioButtonOff"),c("radioButtonOn"),c("checkboxChecked"),c("checkboxUnchecked"),c("checkboxIndeterminate"),this.getScrollbarWidth()},d.prototype.checkColumnDefProperties=function(){var e=this;null!=this.gridOptions.columnDefs&&this.gridOptions.columnDefs.forEach(function(s){var l=Object.getOwnPropertyNames(s),c=Vu(sr.ALL_PROPERTIES,sr.FRAMEWORK_PROPERTIES);e.checkProperties(l,c,c,"colDef","https://www.ag-grid.com/javascript-grid-column-properties/")})},d.prototype.checkGridOptionsProperties=function(){var e=Object.getOwnPropertyNames(this.gridOptions),s=Vu(ps.ALL_PROPERTIES,ps.FRAMEWORK_PROPERTIES,me($).map(function(c){return Ho.getCallbackForEvent(c)})),l=Vu(s,["api","columnApi"]);this.checkProperties(e,l,s,"gridOptions","https://www.ag-grid.com/javascript-grid-properties/")},d.prototype.checkProperties=function(e,s,l,c,h){var m=sb(e,s,l);Fn(m,function(w,R){console.warn("ag-grid: invalid "+c+" property '"+w+"' did you mean any of these: "+R.slice(0,8).join(", "))}),Object.keys(m).length>0&&console.warn("ag-grid: to see all the valid "+c+" properties please check: "+h)},d.prototype.getDomDataKey=function(){return this.domDataKey},d.prototype.getDomData=function(e,s){var l=e[this.getDomDataKey()];return l?l[s]:void 0},d.prototype.setDomData=function(e,s,l){var c=this.getDomDataKey(),h=e[c];Ce(h)&&(e[c]=h={}),h[s]=l},d.prototype.isRowSelection=function(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection},d.prototype.isSuppressRowDeselection=function(){return Ie(this.gridOptions.suppressRowDeselection)},d.prototype.isRowSelectionMulti=function(){return"multiple"===this.gridOptions.rowSelection},d.prototype.isRowMultiSelectWithClick=function(){return Ie(this.gridOptions.rowMultiSelectWithClick)},d.prototype.getContext=function(){return this.gridOptions.context},d.prototype.isPivotMode=function(){return Ie(this.gridOptions.pivotMode)},d.prototype.isSuppressExpandablePivotGroups=function(){return Ie(this.gridOptions.suppressExpandablePivotGroups)},d.prototype.getPivotColumnGroupTotals=function(){return this.gridOptions.pivotColumnGroupTotals},d.prototype.getPivotRowTotals=function(){return this.gridOptions.pivotRowTotals},d.prototype.isRowModelInfinite=function(){return this.gridOptions.rowModelType===fe.ROW_MODEL_TYPE_INFINITE},d.prototype.isRowModelViewport=function(){return this.gridOptions.rowModelType===fe.ROW_MODEL_TYPE_VIEWPORT},d.prototype.isRowModelServerSide=function(){return this.gridOptions.rowModelType===fe.ROW_MODEL_TYPE_SERVER_SIDE},d.prototype.isRowModelDefault=function(){return Ce(this.gridOptions.rowModelType)||this.gridOptions.rowModelType===fe.ROW_MODEL_TYPE_CLIENT_SIDE},d.prototype.isFullRowEdit=function(){return"fullRow"===this.gridOptions.editType},d.prototype.isSuppressFocusAfterRefresh=function(){return Ie(this.gridOptions.suppressFocusAfterRefresh)},d.prototype.isSuppressBrowserResizeObserver=function(){return Ie(this.gridOptions.suppressBrowserResizeObserver)},d.prototype.isSuppressMaintainUnsortedOrder=function(){return Ie(this.gridOptions.suppressMaintainUnsortedOrder)},d.prototype.isSuppressClearOnFillReduction=function(){return Ie(this.gridOptions.suppressClearOnFillReduction)},d.prototype.isShowToolPanel=function(){return Ie(this.gridOptions.sideBar&&Array.isArray(this.getSideBar().toolPanels))},d.prototype.getSideBar=function(){return this.gridOptions.sideBar},d.prototype.isSuppressTouch=function(){return Ie(this.gridOptions.suppressTouch)},d.prototype.isMaintainColumnOrder=function(){return Ie(this.gridOptions.maintainColumnOrder)},d.prototype.isSuppressRowTransform=function(){return Ie(this.gridOptions.suppressRowTransform)},d.prototype.isSuppressColumnStateEvents=function(){return Ie(this.gridOptions.suppressColumnStateEvents)},d.prototype.isAllowDragFromColumnsToolPanel=function(){return Ie(this.gridOptions.allowDragFromColumnsToolPanel)},d.prototype.useAsyncEvents=function(){return!Ie(this.gridOptions.suppressAsyncEvents)},d.prototype.isEnableCellChangeFlash=function(){return Ie(this.gridOptions.enableCellChangeFlash)},d.prototype.getCellFlashDelay=function(){return this.gridOptions.cellFlashDelay||500},d.prototype.getCellFadeDelay=function(){return this.gridOptions.cellFadeDelay||1e3},d.prototype.isGroupSelectsChildren=function(){var e=Ie(this.gridOptions.groupSelectsChildren);return e&&this.isTreeData()?(console.warn("AG Grid: groupSelectsChildren does not work with tree data"),!1):e},d.prototype.isSuppressRowHoverHighlight=function(){return Ie(this.gridOptions.suppressRowHoverHighlight)},d.prototype.isColumnHoverHighlight=function(){return Ie(this.gridOptions.columnHoverHighlight)},d.prototype.isGroupSelectsFiltered=function(){return Ie(this.gridOptions.groupSelectsFiltered)},d.prototype.isGroupHideOpenParents=function(){return Ie(this.gridOptions.groupHideOpenParents)},d.prototype.isGroupMaintainOrder=function(){return Ie(this.gridOptions.groupMaintainOrder)},d.prototype.getAutoGroupColumnDef=function(){return this.gridOptions.autoGroupColumnDef},d.prototype.isGroupMultiAutoColumn=function(){return this.gridOptions.groupDisplayType?this.matchesGroupDisplayType("multipleColumns",this.gridOptions.groupDisplayType):Ie(this.gridOptions.groupHideOpenParents)},d.prototype.isGroupUseEntireRow=function(e){return!e&&!!this.gridOptions.groupDisplayType&&this.matchesGroupDisplayType("groupRows",this.gridOptions.groupDisplayType)},d.prototype.isGroupSuppressAutoColumn=function(){return!(!this.gridOptions.groupDisplayType||!this.matchesGroupDisplayType("custom",this.gridOptions.groupDisplayType))||!!this.gridOptions.treeDataDisplayType&&this.matchesTreeDataDisplayType("custom",this.gridOptions.treeDataDisplayType)},d.prototype.isGroupRemoveSingleChildren=function(){return Ie(this.gridOptions.groupRemoveSingleChildren)},d.prototype.isGroupRemoveLowestSingleChildren=function(){return Ie(this.gridOptions.groupRemoveLowestSingleChildren)},d.prototype.isGroupIncludeFooter=function(){return Ie(this.gridOptions.groupIncludeFooter)},d.prototype.isGroupIncludeTotalFooter=function(){return Ie(this.gridOptions.groupIncludeTotalFooter)},d.prototype.isGroupSuppressBlankHeader=function(){return Ie(this.gridOptions.groupSuppressBlankHeader)},d.prototype.isSuppressRowClickSelection=function(){return Ie(this.gridOptions.suppressRowClickSelection)},d.prototype.isSuppressCellSelection=function(){return Ie(this.gridOptions.suppressCellSelection)},d.prototype.isSuppressMultiSort=function(){return Ie(this.gridOptions.suppressMultiSort)},d.prototype.isMultiSortKeyCtrl=function(){return"ctrl"===this.gridOptions.multiSortKey},d.prototype.isPivotSuppressAutoColumn=function(){return Ie(this.gridOptions.pivotSuppressAutoColumn)},d.prototype.isSuppressDragLeaveHidesColumns=function(){return Ie(this.gridOptions.suppressDragLeaveHidesColumns)},d.prototype.isSuppressScrollOnNewData=function(){return Ie(this.gridOptions.suppressScrollOnNewData)},d.prototype.isSuppressScrollWhenPopupsAreOpen=function(){return Ie(this.gridOptions.suppressScrollWhenPopupsAreOpen)},d.prototype.isRowDragEntireRow=function(){return Ie(this.gridOptions.rowDragEntireRow)},d.prototype.isSuppressRowDrag=function(){return Ie(this.gridOptions.suppressRowDrag)},d.prototype.isRowDragManaged=function(){return Ie(this.gridOptions.rowDragManaged)},d.prototype.isSuppressMoveWhenRowDragging=function(){return Ie(this.gridOptions.suppressMoveWhenRowDragging)},d.prototype.isRowDragMultiRow=function(){return Ie(this.gridOptions.rowDragMultiRow)},d.prototype.getDomLayout=function(){var e=this.gridOptions.domLayout||fe.DOM_LAYOUT_NORMAL;return-1===[fe.DOM_LAYOUT_PRINT,fe.DOM_LAYOUT_AUTO_HEIGHT,fe.DOM_LAYOUT_NORMAL].indexOf(e)?(vn(function(){return console.warn("AG Grid: "+e+" is not valid for DOM Layout, valid values are "+fe.DOM_LAYOUT_NORMAL+", "+fe.DOM_LAYOUT_AUTO_HEIGHT+" and "+fe.DOM_LAYOUT_PRINT)},"warn about dom layout values"),fe.DOM_LAYOUT_NORMAL):e},d.prototype.isSuppressHorizontalScroll=function(){return Ie(this.gridOptions.suppressHorizontalScroll)},d.prototype.isSuppressMaxRenderedRowRestriction=function(){return Ie(this.gridOptions.suppressMaxRenderedRowRestriction)},d.prototype.isExcludeChildrenWhenTreeDataFiltering=function(){return Ie(this.gridOptions.excludeChildrenWhenTreeDataFiltering)},d.prototype.isAlwaysShowHorizontalScroll=function(){return Ie(this.gridOptions.alwaysShowHorizontalScroll)},d.prototype.isAlwaysShowVerticalScroll=function(){return Ie(this.gridOptions.alwaysShowVerticalScroll)},d.prototype.isDebounceVerticalScrollbar=function(){return Ie(this.gridOptions.debounceVerticalScrollbar)},d.prototype.isSuppressLoadingOverlay=function(){return Ie(this.gridOptions.suppressLoadingOverlay)},d.prototype.isSuppressNoRowsOverlay=function(){return Ie(this.gridOptions.suppressNoRowsOverlay)},d.prototype.isSuppressFieldDotNotation=function(){return Ie(this.gridOptions.suppressFieldDotNotation)},d.prototype.getPinnedTopRowData=function(){return this.gridOptions.pinnedTopRowData},d.prototype.getPinnedBottomRowData=function(){return this.gridOptions.pinnedBottomRowData},d.prototype.isFunctionsPassive=function(){return Ie(this.gridOptions.functionsPassive)},d.prototype.isSuppressChangeDetection=function(){return Ie(this.gridOptions.suppressChangeDetection)},d.prototype.isSuppressAnimationFrame=function(){return Ie(this.gridOptions.suppressAnimationFrame)},d.prototype.getQuickFilterText=function(){return this.gridOptions.quickFilterText},d.prototype.isCacheQuickFilter=function(){return Ie(this.gridOptions.cacheQuickFilter)},d.prototype.isUnSortIcon=function(){return Ie(this.gridOptions.unSortIcon)},d.prototype.isSuppressMenuHide=function(){return Ie(this.gridOptions.suppressMenuHide)},d.prototype.isEnterMovesDownAfterEdit=function(){return Ie(this.gridOptions.enterMovesDownAfterEdit)},d.prototype.isEnterMovesDown=function(){return Ie(this.gridOptions.enterMovesDown)},d.prototype.isUndoRedoCellEditing=function(){return Ie(this.gridOptions.undoRedoCellEditing)},d.prototype.getUndoRedoCellEditingLimit=function(){return pC(this.gridOptions.undoRedoCellEditingLimit)},d.prototype.getRowStyle=function(){return this.gridOptions.rowStyle},d.prototype.getRowClass=function(){return this.gridOptions.rowClass},d.prototype.getRowStyleFunc=function(){return this.gridOptions.getRowStyle},d.prototype.getRowClassFunc=function(){return this.gridOptions.getRowClass},d.prototype.rowClassRules=function(){return this.gridOptions.rowClassRules},d.prototype.getServerSideStoreType=function(){return this.gridOptions.serverSideStoreType},d.prototype.getServerSideStoreParamsFunc=function(){return this.gridOptions.getServerSideStoreParams},d.prototype.getCreateChartContainerFunc=function(){return this.gridOptions.createChartContainer},d.prototype.getPopupParent=function(){return this.gridOptions.popupParent},d.prototype.getBlockLoadDebounceMillis=function(){return this.gridOptions.blockLoadDebounceMillis},d.prototype.getPostProcessPopupFunc=function(){return this.gridOptions.postProcessPopup},d.prototype.getPaginationNumberFormatterFunc=function(){return this.gridOptions.paginationNumberFormatter},d.prototype.getChildCountFunc=function(){return this.gridOptions.getChildCount},d.prototype.getIsApplyServerSideTransactionFunc=function(){return this.gridOptions.isApplyServerSideTransaction},d.prototype.getDefaultGroupOrderComparator=function(){return this.gridOptions.defaultGroupOrderComparator},d.prototype.getIsFullWidthCellFunc=function(){return this.gridOptions.isFullWidthCell},d.prototype.getFullWidthCellRendererParams=function(){return this.gridOptions.fullWidthCellRendererParams},d.prototype.isEmbedFullWidthRows=function(){return Ie(this.gridOptions.embedFullWidthRows)||Ie(this.gridOptions.deprecatedEmbedFullWidthRows)},d.prototype.isDetailRowAutoHeight=function(){return Ie(this.gridOptions.detailRowAutoHeight)},d.prototype.getSuppressKeyboardEventFunc=function(){return this.gridOptions.suppressKeyboardEvent},d.prototype.getBusinessKeyForNodeFunc=function(){return this.gridOptions.getBusinessKeyForNode},d.prototype.getApi=function(){return this.gridOptions.api},d.prototype.getColumnApi=function(){return this.gridOptions.columnApi},d.prototype.isImmutableData=function(){return Ie(this.gridOptions.immutableData)},d.prototype.isEnsureDomOrder=function(){return Ie(this.gridOptions.ensureDomOrder)},d.prototype.isEnableCharts=function(){return!!Ie(this.gridOptions.enableCharts)&&qt.assertRegistered(Y.GXE.GridChartsModule,"enableCharts")},d.prototype.getColResizeDefault=function(){return this.gridOptions.colResizeDefault},d.prototype.isSingleClickEdit=function(){return Ie(this.gridOptions.singleClickEdit)},d.prototype.isSuppressClickEdit=function(){return Ie(this.gridOptions.suppressClickEdit)},d.prototype.isStopEditingWhenCellsLoseFocus=function(){return Ie(this.gridOptions.stopEditingWhenCellsLoseFocus)},d.prototype.getGroupDefaultExpanded=function(){return this.gridOptions.groupDefaultExpanded},d.prototype.getMaxConcurrentDatasourceRequests=function(){return this.gridOptions.maxConcurrentDatasourceRequests},d.prototype.getMaxBlocksInCache=function(){return this.gridOptions.maxBlocksInCache},d.prototype.getCacheOverflowSize=function(){return this.gridOptions.cacheOverflowSize},d.prototype.getPaginationPageSize=function(){return pC(this.gridOptions.paginationPageSize)},d.prototype.isPaginateChildRows=function(){return!(!this.isGroupRemoveSingleChildren()&&!this.isGroupRemoveLowestSingleChildren())||Ie(this.gridOptions.paginateChildRows)},d.prototype.getCacheBlockSize=function(){return Cg(this.gridOptions.cacheBlockSize)},d.prototype.getInfiniteInitialRowCount=function(){return this.gridOptions.infiniteInitialRowCount},d.prototype.isPurgeClosedRowNodes=function(){return Ie(this.gridOptions.purgeClosedRowNodes)},d.prototype.isSuppressPaginationPanel=function(){return Ie(this.gridOptions.suppressPaginationPanel)},d.prototype.getRowData=function(){return this.gridOptions.rowData},d.prototype.isEnableRtl=function(){return Ie(this.gridOptions.enableRtl)},d.prototype.getRowGroupPanelShow=function(){return this.gridOptions.rowGroupPanelShow},d.prototype.getPivotPanelShow=function(){return this.gridOptions.pivotPanelShow},d.prototype.isAngularCompileRows=function(){return Ie(this.gridOptions.angularCompileRows)},d.prototype.isAngularCompileFilters=function(){return Ie(this.gridOptions.angularCompileFilters)},d.prototype.isDebug=function(){return Ie(this.gridOptions.debug)},d.prototype.getColumnDefs=function(){return this.gridOptions.columnDefs},d.prototype.getColumnTypes=function(){return this.gridOptions.columnTypes},d.prototype.getDatasource=function(){return this.gridOptions.datasource},d.prototype.getViewportDatasource=function(){return this.gridOptions.viewportDatasource},d.prototype.getServerSideDatasource=function(){return this.gridOptions.serverSideDatasource},d.prototype.isAccentedSort=function(){return Ie(this.gridOptions.accentedSort)},d.prototype.isEnableBrowserTooltips=function(){return Ie(this.gridOptions.enableBrowserTooltips)},d.prototype.isEnableCellExpressions=function(){return Ie(this.gridOptions.enableCellExpressions)},d.prototype.isEnableGroupEdit=function(){return Ie(this.gridOptions.enableGroupEdit)},d.prototype.isSuppressMiddleClickScrolls=function(){return Ie(this.gridOptions.suppressMiddleClickScrolls)},d.prototype.isPreventDefaultOnContextMenu=function(){return Ie(this.gridOptions.preventDefaultOnContextMenu)},d.prototype.isSuppressPreventDefaultOnMouseWheel=function(){return Ie(this.gridOptions.suppressPreventDefaultOnMouseWheel)},d.prototype.isSuppressColumnVirtualisation=function(){return Ie(this.gridOptions.suppressColumnVirtualisation)},d.prototype.isSuppressContextMenu=function(){return Ie(this.gridOptions.suppressContextMenu)},d.prototype.isAllowContextMenuWithControlKey=function(){return Ie(this.gridOptions.allowContextMenuWithControlKey)},d.prototype.isSuppressCopyRowsToClipboard=function(){return Ie(this.gridOptions.suppressCopyRowsToClipboard)},d.prototype.isCopyHeadersToClipboard=function(){return Ie(this.gridOptions.copyHeadersToClipboard)},d.prototype.isSuppressClipboardPaste=function(){return Ie(this.gridOptions.suppressClipboardPaste)},d.prototype.isSuppressLastEmptyLineOnPaste=function(){return Ie(this.gridOptions.suppressLastEmptyLineOnPaste)},d.prototype.isPagination=function(){return Ie(this.gridOptions.pagination)},d.prototype.isSuppressEnterpriseResetOnNewColumns=function(){return Ie(this.gridOptions.suppressEnterpriseResetOnNewColumns)},d.prototype.getProcessDataFromClipboardFunc=function(){return this.gridOptions.processDataFromClipboard},d.prototype.getAsyncTransactionWaitMillis=function(){return Fe(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:fe.BATCH_WAIT_MILLIS},d.prototype.isSuppressMovableColumns=function(){return Ie(this.gridOptions.suppressMovableColumns)},d.prototype.isAnimateRows=function(){return!this.isEnsureDomOrder()&&Ie(this.gridOptions.animateRows)},d.prototype.isSuppressColumnMoveAnimation=function(){return Ie(this.gridOptions.suppressColumnMoveAnimation)},d.prototype.isSuppressAggFuncInHeader=function(){return Ie(this.gridOptions.suppressAggFuncInHeader)},d.prototype.isSuppressAggAtRootLevel=function(){return Ie(this.gridOptions.suppressAggAtRootLevel)},d.prototype.isSuppressAggFilteredOnly=function(){return Ie(this.gridOptions.suppressAggFilteredOnly)},d.prototype.isShowOpenedGroup=function(){return Ie(this.gridOptions.showOpenedGroup)},d.prototype.isReactUi=function(){return Ie(this.gridOptions.reactUi)},d.prototype.isEnableRangeSelection=function(){return qt.isRegistered(Y.GXE.RangeSelectionModule)&&Ie(this.gridOptions.enableRangeSelection)},d.prototype.isEnableRangeHandle=function(){return Ie(this.gridOptions.enableRangeHandle)},d.prototype.isEnableFillHandle=function(){return Ie(this.gridOptions.enableFillHandle)},d.prototype.getFillHandleDirection=function(){var e=this.gridOptions.fillHandleDirection;return e?"x"!==e&&"y"!==e&&"xy"!==e?(vn(function(){return console.warn("AG Grid: valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'.")},"warn invalid fill direction"),"xy"):e:"xy"},d.prototype.getFillOperation=function(){return this.gridOptions.fillOperation},d.prototype.isSuppressMultiRangeSelection=function(){return Ie(this.gridOptions.suppressMultiRangeSelection)},d.prototype.isPaginationAutoPageSize=function(){return Ie(this.gridOptions.paginationAutoPageSize)},d.prototype.isRememberGroupStateWhenNewData=function(){return Ie(this.gridOptions.rememberGroupStateWhenNewData)},d.prototype.getIcons=function(){return this.gridOptions.icons},d.prototype.getAggFuncs=function(){return this.gridOptions.aggFuncs},d.prototype.getSortingOrder=function(){return this.gridOptions.sortingOrder},d.prototype.getAlignedGrids=function(){return this.gridOptions.alignedGrids},d.prototype.isMasterDetail=function(){return!!Ie(this.gridOptions.masterDetail)&&qt.assertRegistered(Y.GXE.MasterDetailModule,"masterDetail")},d.prototype.isKeepDetailRows=function(){return Ie(this.gridOptions.keepDetailRows)},d.prototype.getKeepDetailRowsCount=function(){var e=this.gridOptions.keepDetailRowsCount;return Fe(e)&&e>0?this.gridOptions.keepDetailRowsCount:10},d.prototype.getIsRowMasterFunc=function(){return this.gridOptions.isRowMaster},d.prototype.getIsRowSelectableFunc=function(){return this.gridOptions.isRowSelectable},d.prototype.getGroupRowRendererParams=function(){return this.gridOptions.groupRowRendererParams},d.prototype.getOverlayLoadingTemplate=function(){return this.gridOptions.overlayLoadingTemplate},d.prototype.getOverlayNoRowsTemplate=function(){return this.gridOptions.overlayNoRowsTemplate},d.prototype.isSuppressAutoSize=function(){return Ie(this.gridOptions.suppressAutoSize)},d.prototype.isEnableCellTextSelection=function(){return Ie(this.gridOptions.enableCellTextSelection)},d.prototype.isSuppressParentsInRowNodes=function(){return Ie(this.gridOptions.suppressParentsInRowNodes)},d.prototype.isSuppressClipboardApi=function(){return Ie(this.gridOptions.suppressClipboardApi)},d.prototype.isFunctionsReadOnly=function(){return Ie(this.gridOptions.functionsReadOnly)},d.prototype.isFloatingFilter=function(){return this.gridOptions.floatingFilter},d.prototype.isEnableCellTextSelect=function(){return Ie(this.gridOptions.enableCellTextSelection)},d.prototype.isEnableOldSetFilterModel=function(){return Ie(this.gridOptions.enableOldSetFilterModel)},d.prototype.getDefaultColDef=function(){return this.gridOptions.defaultColDef},d.prototype.getDefaultColGroupDef=function(){return this.gridOptions.defaultColGroupDef},d.prototype.getDefaultExportParams=function(e){return this.gridOptions.defaultExportParams?(console.warn("AG Grid: Since v25.2 `defaultExportParams`  has been replaced by `default"+T_(e)+"ExportParams`'"),this.gridOptions.defaultExportParams):"csv"===e&&this.gridOptions.defaultCsvExportParams?this.gridOptions.defaultCsvExportParams:"excel"===e&&this.gridOptions.defaultExcelExportParams?this.gridOptions.defaultExcelExportParams:void 0},d.prototype.isSuppressCsvExport=function(){return Ie(this.gridOptions.suppressCsvExport)},d.prototype.isAllowShowChangeAfterFilter=function(){return Ie(this.gridOptions.allowShowChangeAfterFilter)},d.prototype.isSuppressExcelExport=function(){return Ie(this.gridOptions.suppressExcelExport)},d.prototype.isSuppressMakeColumnVisibleAfterUnGroup=function(){return Ie(this.gridOptions.suppressMakeColumnVisibleAfterUnGroup)},d.prototype.getDataPathFunc=function(){return this.gridOptions.getDataPath},d.prototype.getIsServerSideGroupFunc=function(){return this.gridOptions.isServerSideGroup},d.prototype.getIsServerSideGroupOpenByDefaultFunc=function(){return this.gridOptions.isServerSideGroupOpenByDefault},d.prototype.getIsGroupOpenByDefaultFunc=function(){return this.gridOptions.isGroupOpenByDefault},d.prototype.getServerSideGroupKeyFunc=function(){return this.gridOptions.getServerSideGroupKey},d.prototype.getGroupRowAggNodesFunc=function(){return this.gridOptions.groupRowAggNodes},d.prototype.getContextMenuItemsFunc=function(){return this.gridOptions.getContextMenuItems},d.prototype.getMainMenuItemsFunc=function(){return this.gridOptions.getMainMenuItems},d.prototype.getRowNodeIdFunc=function(){return this.gridOptions.getRowNodeId},d.prototype.getNavigateToNextHeaderFunc=function(){return this.gridOptions.navigateToNextHeader},d.prototype.getTabToNextHeaderFunc=function(){return this.gridOptions.tabToNextHeader},d.prototype.getNavigateToNextCellFunc=function(){return this.gridOptions.navigateToNextCell},d.prototype.getTabToNextCellFunc=function(){return this.gridOptions.tabToNextCell},d.prototype.getGridTabIndex=function(){return(this.gridOptions.tabIndex||0).toString()},d.prototype.isTreeData=function(){return!!Ie(this.gridOptions.treeData)&&qt.assertRegistered(Y.GXE.RowGroupingModule,"Tree Data")},d.prototype.isValueCache=function(){return Ie(this.gridOptions.valueCache)},d.prototype.isValueCacheNeverExpires=function(){return Ie(this.gridOptions.valueCacheNeverExpires)},d.prototype.isDeltaSort=function(){return Ie(this.gridOptions.deltaSort)},d.prototype.isAggregateOnlyChangedColumns=function(){return Ie(this.gridOptions.aggregateOnlyChangedColumns)},d.prototype.getProcessSecondaryColDefFunc=function(){return this.gridOptions.processSecondaryColDef},d.prototype.getProcessSecondaryColGroupDefFunc=function(){return this.gridOptions.processSecondaryColGroupDef},d.prototype.getSendToClipboardFunc=function(){return this.gridOptions.sendToClipboard},d.prototype.getProcessRowPostCreateFunc=function(){return this.gridOptions.processRowPostCreate},d.prototype.getProcessCellForClipboardFunc=function(){return this.gridOptions.processCellForClipboard},d.prototype.getProcessHeaderForClipboardFunc=function(){return this.gridOptions.processHeaderForClipboard},d.prototype.getProcessCellFromClipboardFunc=function(){return this.gridOptions.processCellFromClipboard},d.prototype.getViewportRowModelPageSize=function(){return Cg(this.gridOptions.viewportRowModelPageSize,5)},d.prototype.getViewportRowModelBufferSize=function(){return function(d,i){return d>=0?d:5}(this.gridOptions.viewportRowModelBufferSize)},d.prototype.isServerSideSortingAlwaysResets=function(){return Ie(this.gridOptions.serverSideSortingAlwaysResets)},d.prototype.isServerSideFilteringAlwaysResets=function(){return Ie(this.gridOptions.serverSideFilteringAlwaysResets)},d.prototype.getPostSortFunc=function(){return this.gridOptions.postSort},d.prototype.getChartToolbarItemsFunc=function(){return this.gridOptions.getChartToolbarItems},d.prototype.getChartThemeOverrides=function(){return this.gridOptions.chartThemeOverrides},d.prototype.getCustomChartThemes=function(){return this.gridOptions.customChartThemes},d.prototype.getChartThemes=function(){return this.gridOptions.chartThemes||["ag-default","ag-material","ag-pastel","ag-vivid","ag-solar"]},d.prototype.getClipboardDeliminator=function(){return Fe(this.gridOptions.clipboardDeliminator)?this.gridOptions.clipboardDeliminator:"\t"},d.prototype.setProperty=function(e,s,l){void 0===l&&(l=!1);var c=this.gridOptions,h=c[e];(l||h!==s)&&(c[e]=s,this.propertyEventService.dispatchEvent({type:e,currentValue:s,previousValue:h}))},d.prototype.addEventListener=function(e,s){this.propertyEventService.addEventListener(e,s)},d.prototype.removeEventListener=function(e,s){this.propertyEventService.removeEventListener(e,s)},d.prototype.isSkipHeaderOnAutoSize=function(){return!!this.gridOptions.skipHeaderOnAutoSize},d.prototype.getAutoSizePadding=function(){var e=this.gridOptions.autoSizePadding;return null!=e&&e>=0?e:20},d.prototype.getHeaderHeight=function(){return"number"==typeof this.gridOptions.headerHeight?this.gridOptions.headerHeight:this.getFromTheme(25,"headerHeight")},d.prototype.getFloatingFiltersHeight=function(){return"number"==typeof this.gridOptions.floatingFiltersHeight?this.gridOptions.floatingFiltersHeight:this.getFromTheme(25,"headerHeight")},d.prototype.getGroupHeaderHeight=function(){return"number"==typeof this.gridOptions.groupHeaderHeight?this.gridOptions.groupHeaderHeight:this.getHeaderHeight()},d.prototype.getPivotHeaderHeight=function(){return"number"==typeof this.gridOptions.pivotHeaderHeight?this.gridOptions.pivotHeaderHeight:this.getHeaderHeight()},d.prototype.getPivotGroupHeaderHeight=function(){return"number"==typeof this.gridOptions.pivotGroupHeaderHeight?this.gridOptions.pivotGroupHeaderHeight:this.getGroupHeaderHeight()},d.prototype.isExternalFilterPresent=function(){return"function"==typeof this.gridOptions.isExternalFilterPresent&&this.gridOptions.isExternalFilterPresent()},d.prototype.doesExternalFilterPass=function(e){return"function"==typeof this.gridOptions.doesExternalFilterPass&&this.gridOptions.doesExternalFilterPass(e)},d.prototype.getTooltipShowDelay=function(){var e=this.gridOptions.tooltipShowDelay;return Fe(e)?(e<0&&console.warn("ag-grid: tooltipShowDelay should not be lower than 0"),Math.max(200,e)):null},d.prototype.isTooltipMouseTrack=function(){return Ie(this.gridOptions.tooltipMouseTrack)},d.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(){return Ie(this.gridOptions.suppressModelUpdateAfterUpdateTransaction)},d.prototype.getDocument=function(){var e=null;return this.gridOptions.getDocument&&Fe(this.gridOptions.getDocument)&&(e=this.gridOptions.getDocument()),e&&Fe(e)?e:document},d.prototype.getMinColWidth=function(){var e=this.gridOptions.minColWidth;if(Fe(e)&&e>i.MIN_COL_WIDTH)return this.gridOptions.minColWidth;var s=this.getFromTheme(null,"headerCellMinWidth");return Fe(s)?Math.max(s,i.MIN_COL_WIDTH):i.MIN_COL_WIDTH},d.prototype.getMaxColWidth=function(){return this.gridOptions.maxColWidth&&this.gridOptions.maxColWidth>i.MIN_COL_WIDTH?this.gridOptions.maxColWidth:null},d.prototype.getColWidth=function(){return"number"!=typeof this.gridOptions.colWidth||this.gridOptions.colWidth<i.MIN_COL_WIDTH?200:this.gridOptions.colWidth},d.prototype.getRowBuffer=function(){var e=this.gridOptions.rowBuffer;return"number"==typeof e?e<0&&(vn(function(){return console.warn("AG Grid: rowBuffer should not be negative")},"warn rowBuffer negative"),this.gridOptions.rowBuffer=e=0):e=fe.ROW_BUFFER_SIZE,e},d.prototype.getRowBufferInPixels=function(){return this.getRowBuffer()*this.getRowHeightAsNumber()},d.prototype.getScrollbarWidth=function(){if(null==this.scrollbarWidth){var s="number"==typeof this.gridOptions.scrollbarWidth&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:Kv();null!=s&&(this.scrollbarWidth=s,this.eventService.dispatchEvent({type:$.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth},d.prototype.checkForDeprecated=function(){var e=this.gridOptions;e.deprecatedEmbedFullWidthRows&&console.warn("AG Grid: since v21.2, deprecatedEmbedFullWidthRows has been replaced with embedFullWidthRows."),e.enableOldSetFilterModel&&console.warn("AG Grid: since v22.x, enableOldSetFilterModel is deprecated. Please move to the new Set Filter Model as the old one may not be supported in v23 onwards."),e.floatingFilter&&(console.warn("AG Grid: since v23.1, floatingFilter on the gridOptions is deprecated. Please use floatingFilter on the colDef instead."),e.defaultColDef||(e.defaultColDef={}),null==e.defaultColDef.floatingFilter&&(e.defaultColDef.floatingFilter=!0)),e.rowDeselection&&console.warn("AG Grid: since v24.x, rowDeselection is deprecated and the behaviour is true by default. Please use `suppressRowDeselection` to prevent rows from being deselected."),e.enableMultiRowDragging&&(e.rowDragMultiRow=!0,delete e.enableMultiRowDragging,console.warn("AG Grid: since v26.1, `enableMultiRowDragging` is deprecated. Please use `rowDragMultiRow`."));var s=function(m,w,R){null!=e[m]&&(console.warn("ag-grid: since version "+R+", '"+m+"' is deprecated / renamed, please use the new property name '"+w+"' instead."),null==e[w]&&(e[w]=e[m]))};if(s("batchUpdateWaitMillis","asyncTransactionWaitMillis","23.1.x"),s("deltaRowDataMode","immutableData","23.1.x"),(e.immutableColumns||e.deltaColumnMode)&&console.warn("AG Grid: since v24.0, immutableColumns and deltaColumnMode properties are gone. The grid now works like this as default. To keep column order maintained, set grid property applyColumnDefOrder=true"),s("suppressSetColumnStateEvents","suppressColumnStateEvents","24.0.x"),e.groupRowInnerRenderer||e.groupRowInnerRendererParams||e.groupRowInnerRendererFramework){console.warn("AG Grid: since v24.0, grid properties groupRowInnerRenderer, groupRowInnerRendererFramework and groupRowInnerRendererParams are no longer used."),console.warn("  Instead use the grid properties groupRowRendererParams.innerRenderer, groupRowRendererParams.innerRendererFramework and groupRowRendererParams.innerRendererParams."),console.warn("  For example instead of this:"),console.warn('    groupRowInnerRenderer: "myRenderer"'),console.warn("    groupRowInnerRendererParams: {x: a}"),console.warn("  Replace with this:"),console.warn("    groupRowRendererParams: {"),console.warn('      innerRenderer: "myRenderer",'),console.warn("      innerRendererParams: {x: a}"),console.warn("    }"),console.warn("  We have copied the properties over for you. However to stop this error message, please change your application code."),e.groupRowRendererParams||(e.groupRowRendererParams={});var l=e.groupRowRendererParams;e.groupRowInnerRenderer&&(l.innerRenderer=e.groupRowInnerRenderer),e.groupRowInnerRendererParams&&(l.innerRendererParams=e.groupRowInnerRendererParams),e.groupRowInnerRendererFramework&&(l.innerRendererFramework=e.groupRowInnerRendererFramework)}e.rememberGroupStateWhenNewData&&console.warn("AG Grid: since v24.0, grid property rememberGroupStateWhenNewData is deprecated. This feature was provided before Transaction Updates worked (which keep group state). Now that transaction updates are possible and they keep group state, this feature is no longer needed."),e.detailCellRendererParams&&e.detailCellRendererParams.autoHeight&&(console.warn("AG Grid: since v24.1, grid property detailCellRendererParams.autoHeight is replaced with grid property detailRowAutoHeight. This allows this feature to work when you provide a custom DetailCellRenderer"),e.detailRowAutoHeight=!0),e.suppressKeyboardEvent&&console.warn("AG Grid: since v24.1 suppressKeyboardEvent in the gridOptions has been deprecated and will be removed in\n                 future versions of AG Grid. If you need this to be set for every column use the defaultColDef property."),e.suppressEnterpriseResetOnNewColumns&&console.warn("AG Grid: since v25, grid property suppressEnterpriseResetOnNewColumns is deprecated. This was a temporary property to allow changing columns in Server Side Row Model without triggering a reload. Now that it is possible to dynamically change columns in the grid, this is no longer needed."),e.suppressColumnStateEvents&&console.warn('AG Grid: since v25, grid property suppressColumnStateEvents no longer works due to a refactor that we did. It should be possible to achieve similar using event.source, which would be "api" if the event was due to setting column state via the API'),e.defaultExportParams&&console.warn("AG Grid: since v25.2, the grid property `defaultExportParams` has been replaced by `defaultCsvExportParams` and `defaultExcelExportParams`."),e.stopEditingWhenGridLosesFocus&&(console.warn("AG Grid: since v25.2.2, the grid property `stopEditingWhenGridLosesFocus` has been replaced by `stopEditingWhenCellsLoseFocus`."),e.stopEditingWhenCellsLoseFocus=!0),e.applyColumnDefOrder&&console.warn("AG Grid: since v26.0, the grid property `applyColumnDefOrder` is no longer needed, as this is the default behaviour. To turn this behaviour off, set maintainColumnOrder=true"),e.groupMultiAutoColumn&&(console.warn("AG Grid: since v26.0, the grid property `groupMultiAutoColumn` has been replaced by `groupDisplayType = 'multipleColumns'`"),e.groupDisplayType="multipleColumns"),e.groupUseEntireRow&&(console.warn("AG Grid: since v26.0, the grid property `groupUseEntireRow` has been replaced by `groupDisplayType = 'groupRows'`"),e.groupDisplayType="groupRows"),e.groupSuppressAutoColumn&&(console.warn("AG Grid: since v26.0, the grid property `groupSuppressAutoColumn` has been replaced by `"+(e.treeData?"treeDataDisplayType":"groupDisplayType")+" = 'custom'`"),e.groupDisplayType="custom"),e.defaultGroupSortComparator&&(console.warn("AG Grid: since v26.0, the grid property `defaultGroupSortComparator` has been replaced by `defaultGroupOrderComparator`"),e.defaultGroupOrderComparator=e.defaultGroupSortComparator),e.colWidth&&console.warn("AG Grid: since v26.1, the grid property `colWidth` is deprecated and should be set via `defaultColDef.width`."),e.minColWidth&&console.warn("AG Grid: since v26.1, the grid property `minColWidth` is deprecated and should be set via `defaultColDef.minWidth`."),e.maxColWidth&&console.warn("AG Grid: since v26.1, the grid property `maxColWidth` is deprecated and should be set via `defaultColDef.maxWidth`.")},d.prototype.checkForViolations=function(){this.isTreeData()&&this.treeDataViolations()},d.prototype.treeDataViolations=function(){this.isRowModelDefault()&&Ce(this.getDataPathFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data."),this.isRowModelServerSide()&&(Ce(this.getIsServerSideGroupFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data."),Ce(this.getServerSideGroupKeyFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data."))},d.prototype.getLocaleTextFunc=function(){if(this.gridOptions.localeTextFunc)return this.gridOptions.localeTextFunc;var e=this.gridOptions.localeText;return function(s,l){return e&&e[s]?e[s]:l}},d.prototype.globalEventHandler=function(e,s){if(!this.destroyed){var l=Ho.getCallbackForEvent(e);"function"==typeof this.gridOptions[l]&&this.gridOptions[l](s)}},d.prototype.getRowHeightAsNumber=function(){return!this.gridOptions.rowHeight||Ce(this.gridOptions.rowHeight)?this.getDefaultRowHeight():this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:(console.warn("AG Grid row height must be a number if not using standard row model"),this.getDefaultRowHeight())},d.prototype.getRowHeightForNode=function(e,s,l){if(void 0===s&&(s=!1),null==l&&(l=this.getDefaultRowHeight()),"function"==typeof this.gridOptions.getRowHeight){if(s)return{height:this.getDefaultRowHeight(),estimated:!0};var h=this.gridOptions.getRowHeight({node:e,data:e.data,api:this.gridOptions.api,context:this.gridOptions.context});if(this.isNumeric(h))return 0===h&&vn(function(){return console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.")},"invalidRowHeight"),{height:Math.max(1,h),estimated:!1}}return e.detail&&this.isMasterDetail()?this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}:{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:l,estimated:!1}},d.prototype.isDynamicRowHeight=function(){return"function"==typeof this.gridOptions.getRowHeight},d.prototype.getListItemHeight=function(){return this.getFromTheme(20,"listItemHeight")},d.prototype.chartMenuPanelWidth=function(){return this.environment.chartMenuPanelWidth()},d.prototype.isNumeric=function(e){return!isNaN(e)&&"number"==typeof e&&isFinite(e)},d.prototype.getFromTheme=function(e,s){var l=this.environment.getTheme().theme;return l&&0===l.indexOf("ag-theme")?this.environment.getSassVariable(l,s):e},d.prototype.getDefaultRowHeight=function(){return this.getFromTheme(25,"rowHeight")},d.prototype.matchesGroupDisplayType=function(e,s){var l=["groupRows","multipleColumns","custom","singleColumn"];return l.indexOf(s)<0?(console.warn("AG Grid: '"+s+"' is not a valid groupDisplayType value - possible values are: '"+l.join("', '")+"'"),!1):s===e},d.prototype.matchesTreeDataDisplayType=function(e,s){var l=["auto","custom"];return l.indexOf(s)<0?(console.warn("AG Grid: '"+s+"' is not a valid treeDataDisplayType value - possible values are: '"+l.join("', '")+"'"),!1):s===e},d.MIN_COL_WIDTH=10,d.PROP_HEADER_HEIGHT="headerHeight",d.PROP_GROUP_REMOVE_SINGLE_CHILDREN="groupRemoveSingleChildren",d.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN="groupRemoveLowestSingleChildren",d.PROP_PIVOT_HEADER_HEIGHT="pivotHeaderHeight",d.PROP_SUPPRESS_CLIPBOARD_PASTE="suppressClipboardPaste",d.PROP_GROUP_HEADER_HEIGHT="groupHeaderHeight",d.PROP_PIVOT_GROUP_HEADER_HEIGHT="pivotGroupHeaderHeight",d.PROP_NAVIGATE_TO_NEXT_CELL="navigateToNextCell",d.PROP_TAB_TO_NEXT_CELL="tabToNextCell",d.PROP_NAVIGATE_TO_NEXT_HEADER="navigateToNextHeader",d.PROP_TAB_TO_NEXT_HEADER="tabToNextHeader",d.PROP_IS_EXTERNAL_FILTER_PRESENT="isExternalFilterPresent",d.PROP_DOES_EXTERNAL_FILTER_PASS="doesExternalFilterPass",d.PROP_FLOATING_FILTERS_HEIGHT="floatingFiltersHeight",d.PROP_SUPPRESS_ROW_CLICK_SELECTION="suppressRowClickSelection",d.PROP_SUPPRESS_ROW_DRAG="suppressRowDrag",d.PROP_SUPPRESS_MOVE_WHEN_ROW_DRAG="suppressMoveWhenRowDragging",d.PROP_GET_ROW_CLASS="getRowClass",d.PROP_GET_ROW_STYLE="getRowStyle",d.PROP_GET_ROW_HEIGHT="getRowHeight",d.PROP_POPUP_PARENT="popupParent",d.PROP_DOM_LAYOUT="domLayout",d.PROP_FILL_HANDLE_DIRECTION="fillHandleDirection",d.PROP_GROUP_ROW_AGG_NODES="groupRowAggNodes",d.PROP_GET_BUSINESS_KEY_FOR_NODE="getBusinessKeyForNode",d.PROP_GET_CHILD_COUNT="getChildCount",d.PROP_PROCESS_ROW_POST_CREATE="processRowPostCreate",d.PROP_GET_ROW_NODE_ID="getRowNodeId",d.PROP_IS_FULL_WIDTH_CELL="isFullWidthCell",d.PROP_IS_ROW_SELECTABLE="isRowSelectable",d.PROP_IS_ROW_MASTER="isRowMaster",d.PROP_POST_SORT="postSort",d.PROP_GET_DOCUMENT="getDocument",d.PROP_POST_PROCESS_POPUP="postProcessPopup",d.PROP_DEFAULT_GROUP_ORDER_COMPARATOR="defaultGroupOrderComparator",d.PROP_PAGINATION_NUMBER_FORMATTER="paginationNumberFormatter",d.PROP_GET_CONTEXT_MENU_ITEMS="getContextMenuItems",d.PROP_GET_MAIN_MENU_ITEMS="getMainMenuItems",d.PROP_PROCESS_CELL_FOR_CLIPBOARD="processCellForClipboard",d.PROP_PROCESS_CELL_FROM_CLIPBOARD="processCellFromClipboard",d.PROP_SEND_TO_CLIPBOARD="sendToClipboard",d.PROP_PROCESS_TO_SECONDARY_COLDEF="processSecondaryColDef",d.PROP_PROCESS_SECONDARY_COL_GROUP_DEF="processSecondaryColGroupDef",d.PROP_GET_CHART_TOOLBAR_ITEMS="getChartToolbarItems",d.PROP_GET_SERVER_SIDE_STORE_PARAMS="getServerSideStoreParams",d.PROP_IS_SERVER_SIDE_GROUPS_OPEN_BY_DEFAULT="isServerSideGroupOpenByDefault",d.PROP_IS_APPLY_SERVER_SIDE_TRANSACTION="isApplyServerSideTransaction",d.PROP_IS_SERVER_SIDE_GROUP="isServerSideGroup",d.PROP_GET_SERVER_SIDE_GROUP_KEY="getServerSideGroupKey",Wa([H("gridOptions")],d.prototype,"gridOptions",void 0),Wa([H("eventService")],d.prototype,"eventService",void 0),Wa([H("environment")],d.prototype,"environment",void 0),Wa([fC(0,Ni("gridApi")),fC(1,Ni("columnApi"))],d.prototype,"agWire",null),Wa([Fi],d.prototype,"destroy",null),Wa([Qe],d.prototype,"init",null),i=Wa([vt("gridOptionsWrapper")],d)}(),Mt=function(){function d(i,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=i,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}return d.prototype.setInactive=function(){this.active=!1},d.prototype.isActive=function(){return this.active},d.prototype.depthFirstSearchChangedPath=function(i,e){if(i.children)for(var s=0;s<i.children.length;s++)this.depthFirstSearchChangedPath(i.children[s],e);e(i.rowNode)},d.prototype.depthFirstSearchEverything=function(i,e,s){if(i.childrenAfterGroup)for(var l=0;l<i.childrenAfterGroup.length;l++){var c=i.childrenAfterGroup[l];c.childrenAfterGroup?this.depthFirstSearchEverything(i.childrenAfterGroup[l],e,s):s&&e(c)}e(i)},d.prototype.forEachChangedNodeDepthFirst=function(i,e){void 0===e&&(e=!1),this.active?this.depthFirstSearchChangedPath(this.pathRoot,i):this.depthFirstSearchEverything(this.pathRoot.rowNode,i,e)},d.prototype.executeFromRootNode=function(i){i(this.pathRoot.rowNode)},d.prototype.createPathItems=function(i){for(var e=i,s=0;!this.mapToItems[e.id];)this.mapToItems[e.id]={rowNode:e,children:null},s++,e=e.parent;return s},d.prototype.populateColumnsMap=function(i,e){var s=this;if(this.keepingColumns&&e)for(var l=i;l;)this.nodeIdsToColumns[l.id]||(this.nodeIdsToColumns[l.id]={}),e.forEach(function(c){return s.nodeIdsToColumns[l.id][c.getId()]=!0}),l=l.parent},d.prototype.linkPathItems=function(i,e){for(var s=i,l=0;l<e;l++){var c=this.mapToItems[s.id],h=this.mapToItems[s.parent.id];h.children||(h.children=[]),h.children.push(c),s=s.parent}},d.prototype.addParentNode=function(i,e){if(i&&!i.isRowPinned()){var s=this.createPathItems(i);this.linkPathItems(i,s),this.populateColumnsMap(i,e)}},d.prototype.canSkip=function(i){return this.active&&!this.mapToItems[i.id]},d.prototype.getValueColumnsForNode=function(i,e){if(!this.keepingColumns)return e;var s=this.nodeIdsToColumns[i.id];return e.filter(function(c){return s[c.getId()]})},d.prototype.getNotValueColumnsForNode=function(i,e){if(!this.keepingColumns)return null;var s=this.nodeIdsToColumns[i.id];return e.filter(function(c){return!s[c.getId()]})},d}(),hC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),md=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},wg=function(d,i){return function(e,s){i(e,s,d)}},Yl=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return hC(i,d),i.prototype.setBeans=function(e){this.logger=e.create("selectionService"),this.reset(),this.gridOptionsWrapper.isRowModelDefault()&&this.addManagedListener(this.eventService,$.EVENT_ROW_DATA_CHANGED,this.reset.bind(this))},i.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.addManagedListener(this.eventService,$.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},i.prototype.setLastSelectedNode=function(e){this.lastSelectedNode=e},i.prototype.getLastSelectedNode=function(){return this.lastSelectedNode},i.prototype.getSelectedNodes=function(){var e=[];return Fn(this.selectedNodes,function(s,l){l&&e.push(l)}),e},i.prototype.getSelectedRows=function(){var e=[];return Fn(this.selectedNodes,function(s,l){l&&l.data&&e.push(l.data)}),e},i.prototype.removeGroupsFromSelection=function(){var e=this;Fn(this.selectedNodes,function(s,l){l&&l.group&&(e.selectedNodes[l.id]=void 0)})},i.prototype.updateGroupsFromChildrenSelections=function(e){if(this.gridOptionsWrapper.isGroupSelectsChildren()&&this.rowModel.getType()===fe.ROW_MODEL_TYPE_CLIENT_SIDE){var l=this.rowModel.getRootNode();e||(e=new Mt(!0,l)).setInactive(),e.forEachChangedNodeDepthFirst(function(c){c!==l&&c.calculateSelectedFromChildren()})}},i.prototype.getNodeForIdIfSelected=function(e){return this.selectedNodes[e]},i.prototype.clearOtherNodes=function(e){var s=this,l={},c=0;return Fn(this.selectedNodes,function(h,m){m&&m.id!==e.id&&(c+=s.selectedNodes[m.id].setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0}),s.groupSelectsChildren&&m.parent&&(l[m.parent.id]=m.parent))}),Fn(l,function(h,m){m.calculateSelectedFromChildren()}),c},i.prototype.onRowSelected=function(e){var s=e.node;this.groupSelectsChildren&&s.group||(this.selectedNodes[s.id]=s.isSelected()?s:void 0)},i.prototype.syncInRowNode=function(e,s){this.syncInOldRowNode(e,s),this.syncInNewRowNode(e)},i.prototype.syncInOldRowNode=function(e,s){Fe(s)&&e.id!==s.id&&s&&this.selectedNodes[s.id]==e&&(this.selectedNodes[s.id]=s)},i.prototype.syncInNewRowNode=function(e){Fe(this.selectedNodes[e.id])?(e.setSelectedInitialValue(!0),this.selectedNodes[e.id]=e):e.setSelectedInitialValue(!1)},i.prototype.reset=function(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null},i.prototype.getBestCostNodeSelection=function(){if(this.rowModel.getType()===fe.ROW_MODEL_TYPE_CLIENT_SIDE){var s=this.rowModel.getTopLevelNodes();if(null!==s){var l=[];return function c(h){for(var m=0,w=h.length;m<w;m++){var R=h[m];R.isSelected()?l.push(R):R.group&&R.children&&c(R.children)}}(s),l}console.warn("selectAll not available doing rowModel=virtual")}else console.warn("getBestCostNodeSelection is only available when using normal row model")},i.prototype.setRowModel=function(e){this.rowModel=e},i.prototype.isEmpty=function(){var e=0;return Fn(this.selectedNodes,function(s,l){l&&e++}),0===e},i.prototype.deselectAllRowNodes=function(e){void 0===e&&(e=!1);var s=function(w){return w.selectThisNode(!1)},l=this.rowModel.getType()===fe.ROW_MODEL_TYPE_CLIENT_SIDE;if(e){if(!l)return void console.error("AG Grid: selecting just filtered only works with In Memory Row Model");this.rowModel.forEachNodeAfterFilter(s)}else Fn(this.selectedNodes,function(m,w){w&&s(w)}),this.reset();l&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(),this.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.selectAllRowNodes=function(e){if(void 0===e&&(e=!1),this.rowModel.getType()!==fe.ROW_MODEL_TYPE_CLIENT_SIDE)throw new Error("selectAll only available with normal row model, ie not "+this.rowModel.getType());var s=this.rowModel,l=function(m){return m.selectThisNode(!0)};e?s.forEachNodeAfterFilter(l):s.forEachNode(l),this.rowModel.getType()===fe.ROW_MODEL_TYPE_CLIENT_SIDE&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(),this.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.selectNode=function(e,s){e&&e.setSelectedParams({newValue:!0,clearSelection:!s})},i.prototype.deselectIndex=function(e){var s=this.rowModel.getRow(e);this.deselectNode(s)},i.prototype.deselectNode=function(e){e&&e.setSelectedParams({newValue:!1,clearSelection:!1})},i.prototype.selectIndex=function(e,s){var l=this.rowModel.getRow(e);this.selectNode(l,s)},md([H("rowModel")],i.prototype,"rowModel",void 0),md([H("columnApi")],i.prototype,"columnApi",void 0),md([H("gridApi")],i.prototype,"gridApi",void 0),md([wg(0,Ni("loggerFactory"))],i.prototype,"setBeans",null),md([Qe],i.prototype,"init",null),md([vt("selectionService")],i)}(Ke),Sg=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},vC=function(){function d(){}return d.prototype.sizeColumnsToFit=function(i){void 0===i&&console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)"),this.columnModel.sizeColumnsToFit(i,"api")},d.prototype.setColumnGroupOpened=function(i,e){this.columnModel.setColumnGroupOpened(i,e,"api")},d.prototype.getColumnGroup=function(i,e){return this.columnModel.getColumnGroup(i,e)},d.prototype.getOriginalColumnGroup=function(i){return this.columnModel.getOriginalColumnGroup(i)},d.prototype.getDisplayNameForColumn=function(i,e){return this.columnModel.getDisplayNameForColumn(i,e)||""},d.prototype.getDisplayNameForColumnGroup=function(i,e){return this.columnModel.getDisplayNameForColumnGroup(i,e)||""},d.prototype.getColumn=function(i){return this.columnModel.getPrimaryColumn(i)},d.prototype.applyColumnState=function(i){return this.columnModel.applyColumnState(i,"api")},d.prototype.getColumnState=function(){return this.columnModel.getColumnState()},d.prototype.resetColumnState=function(){this.columnModel.resetColumnState("api")},d.prototype.getColumnGroupState=function(){return this.columnModel.getColumnGroupState()},d.prototype.setColumnGroupState=function(i){this.columnModel.setColumnGroupState(i,"api")},d.prototype.resetColumnGroupState=function(){this.columnModel.resetColumnGroupState("api")},d.prototype.isPinning=function(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()},d.prototype.isPinningLeft=function(){return this.columnModel.isPinningLeft()},d.prototype.isPinningRight=function(){return this.columnModel.isPinningRight()},d.prototype.getDisplayedColAfter=function(i){return this.columnModel.getDisplayedColAfter(i)},d.prototype.getDisplayedColBefore=function(i){return this.columnModel.getDisplayedColBefore(i)},d.prototype.setColumnVisible=function(i,e){this.columnModel.setColumnVisible(i,e,"api")},d.prototype.setColumnsVisible=function(i,e){this.columnModel.setColumnsVisible(i,e,"api")},d.prototype.setColumnPinned=function(i,e){this.columnModel.setColumnPinned(i,e,"api")},d.prototype.setColumnsPinned=function(i,e){this.columnModel.setColumnsPinned(i,e,"api")},d.prototype.getAllColumns=function(){return this.columnModel.getAllPrimaryColumns()},d.prototype.getAllGridColumns=function(){return this.columnModel.getAllGridColumns()},d.prototype.getDisplayedLeftColumns=function(){return this.columnModel.getDisplayedLeftColumns()},d.prototype.getDisplayedCenterColumns=function(){return this.columnModel.getDisplayedCenterColumns()},d.prototype.getDisplayedRightColumns=function(){return this.columnModel.getDisplayedRightColumns()},d.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},d.prototype.getAllDisplayedVirtualColumns=function(){return this.columnModel.getViewportColumns()},d.prototype.moveColumn=function(i,e){"number"==typeof i?(console.warn("AG Grid: you are using moveColumn(fromIndex, toIndex) - moveColumn takes a column key and a destination index, not two indexes, to move with indexes use moveColumnByIndex(from,to) instead"),this.columnModel.moveColumnByIndex(i,e,"api")):this.columnModel.moveColumn(i,e,"api")},d.prototype.moveColumnByIndex=function(i,e){this.columnModel.moveColumnByIndex(i,e,"api")},d.prototype.moveColumns=function(i,e){this.columnModel.moveColumns(i,e,"api")},d.prototype.moveRowGroupColumn=function(i,e){this.columnModel.moveRowGroupColumn(i,e)},d.prototype.setColumnAggFunc=function(i,e){this.columnModel.setColumnAggFunc(i,e)},d.prototype.setColumnWidth=function(i,e,s,l){void 0===s&&(s=!0),this.columnModel.setColumnWidths([{key:i,newWidth:e}],!1,s,l)},d.prototype.setColumnWidths=function(i,e,s){void 0===e&&(e=!0),this.columnModel.setColumnWidths(i,!1,e,s)},d.prototype.setPivotMode=function(i){this.columnModel.setPivotMode(i)},d.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},d.prototype.getSecondaryPivotColumn=function(i,e){return this.columnModel.getSecondaryPivotColumn(i,e)},d.prototype.setValueColumns=function(i){this.columnModel.setValueColumns(i,"api")},d.prototype.getValueColumns=function(){return this.columnModel.getValueColumns()},d.prototype.removeValueColumn=function(i){this.columnModel.removeValueColumn(i,"api")},d.prototype.removeValueColumns=function(i){this.columnModel.removeValueColumns(i,"api")},d.prototype.addValueColumn=function(i){this.columnModel.addValueColumn(i,"api")},d.prototype.addValueColumns=function(i){this.columnModel.addValueColumns(i,"api")},d.prototype.setRowGroupColumns=function(i){this.columnModel.setRowGroupColumns(i,"api")},d.prototype.removeRowGroupColumn=function(i){this.columnModel.removeRowGroupColumn(i,"api")},d.prototype.removeRowGroupColumns=function(i){this.columnModel.removeRowGroupColumns(i,"api")},d.prototype.addRowGroupColumn=function(i){this.columnModel.addRowGroupColumn(i,"api")},d.prototype.addRowGroupColumns=function(i){this.columnModel.addRowGroupColumns(i,"api")},d.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},d.prototype.setPivotColumns=function(i){this.columnModel.setPivotColumns(i,"api")},d.prototype.removePivotColumn=function(i){this.columnModel.removePivotColumn(i,"api")},d.prototype.removePivotColumns=function(i){this.columnModel.removePivotColumns(i,"api")},d.prototype.addPivotColumn=function(i){this.columnModel.addPivotColumn(i,"api")},d.prototype.addPivotColumns=function(i){this.columnModel.addPivotColumns(i,"api")},d.prototype.getPivotColumns=function(){return this.columnModel.getPivotColumns()},d.prototype.getLeftDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeLeft()},d.prototype.getCenterDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeCentre()},d.prototype.getRightDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeRight()},d.prototype.getAllDisplayedColumnGroups=function(){return this.columnModel.getAllDisplayedTrees()},d.prototype.autoSizeColumn=function(i,e){return this.columnModel.autoSizeColumn(i,e,"api")},d.prototype.autoSizeColumns=function(i,e){return this.columnModel.autoSizeColumns(i,e,"api")},d.prototype.autoSizeAllColumns=function(i){this.columnModel.autoSizeAllColumns(i,"api")},d.prototype.setSecondaryColumns=function(i){this.columnModel.setSecondaryColumns(i,"api")},d.prototype.getSecondaryColumns=function(){return this.columnModel.getSecondaryColumns()},d.prototype.getPrimaryColumns=function(){return this.columnModel.getAllPrimaryColumns()},d.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(yt.removeAllReferences.bind(window,this,"Column API"),100)},d.prototype.columnGroupOpened=function(i,e){console.error("AG Grid: columnGroupOpened no longer exists, use setColumnGroupOpened"),this.setColumnGroupOpened(i,e)},d.prototype.hideColumns=function(i,e){console.error("AG Grid: hideColumns is deprecated, use setColumnsVisible"),this.columnModel.setColumnsVisible(i,!e,"api")},d.prototype.hideColumn=function(i,e){console.error("AG Grid: hideColumn is deprecated, use setColumnVisible"),this.columnModel.setColumnVisible(i,!e,"api")},d.prototype.setState=function(i){return console.error("AG Grid: setState is deprecated, use setColumnState"),this.setColumnState(i)},d.prototype.getState=function(){return console.error("AG Grid: getState is deprecated, use getColumnState"),this.getColumnState()},d.prototype.resetState=function(){console.error("AG Grid: resetState is deprecated, use resetColumnState"),this.resetColumnState()},d.prototype.getAggregationColumns=function(){return console.error("AG Grid: getAggregationColumns is deprecated, use getValueColumns"),this.columnModel.getValueColumns()},d.prototype.removeAggregationColumn=function(i){console.error("AG Grid: removeAggregationColumn is deprecated, use removeValueColumn"),this.columnModel.removeValueColumn(i,"api")},d.prototype.removeAggregationColumns=function(i){console.error("AG Grid: removeAggregationColumns is deprecated, use removeValueColumns"),this.columnModel.removeValueColumns(i,"api")},d.prototype.addAggregationColumn=function(i){console.error("AG Grid: addAggregationColumn is deprecated, use addValueColumn"),this.columnModel.addValueColumn(i,"api")},d.prototype.addAggregationColumns=function(i){console.error("AG Grid: addAggregationColumns is deprecated, use addValueColumns"),this.columnModel.addValueColumns(i,"api")},d.prototype.setColumnAggFunction=function(i,e){console.error("AG Grid: setColumnAggFunction is deprecated, use setColumnAggFunc"),this.columnModel.setColumnAggFunc(i,e,"api")},d.prototype.getDisplayNameForCol=function(i){return console.error("AG Grid: getDisplayNameForCol is deprecated, use getDisplayNameForColumn"),this.getDisplayNameForColumn(i,null)},d.prototype.setColumnState=function(i){return console.error("AG Grid: setColumnState is deprecated, use applyColumnState"),this.columnModel.applyColumnState({state:i,applyOrder:!0},"api")},Sg([H("columnModel")],d.prototype,"columnModel",void 0),Sg([Fi],d.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),Sg([vt("columnApi")],d)}();(function(d){d[d.FILL=0]="FILL",d[d.RANGE=1]="RANGE"})(Y.Lm6||(Y.Lm6={})),function(d){d[d.VALUE=0]="VALUE",d[d.DIMENSION=1]="DIMENSION"}(Y.StC||(Y.StC={}));var yd="ag-cell-range-selected",yC=function(){function d(i,e){this.beans=i,this.cellCtrl=e}return d.prototype.setComp=function(i){this.cellComp=i,this.onRangeSelectionChanged()},d.prototype.onRangeSelectionChanged=function(){this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(yd,0!==this.rangeCount),this.cellComp.addOrRemoveCssClass(yd+"-1",1===this.rangeCount),this.cellComp.addOrRemoveCssClass(yd+"-2",2===this.rangeCount),this.cellComp.addOrRemoveCssClass(yd+"-3",3===this.rangeCount),this.cellComp.addOrRemoveCssClass(yd+"-4",this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),this.cellComp.setAriaSelected(this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle()},d.prototype.updateRangeBorders=function(){var i=this.getRangeBorders(),e=this.isSingleCell(),l=!e&&i.right,c=!e&&i.bottom,h=!e&&i.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",!e&&i.top),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",l),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",c),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",h)},d.prototype.isSingleCell=function(){var i=this.beans.rangeService;return 1===this.rangeCount&&i&&!i.isMoreThanOneCell()},d.prototype.getHasChartRange=function(){var i=this.beans.rangeService;if(!this.rangeCount||!i)return!1;var e=i.getCellRanges();return e.length>0&&e.every(function(s){return xn([Y.StC.DIMENSION,Y.StC.VALUE],s.type)})},d.prototype.updateRangeBordersIfRangeCount=function(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())},d.prototype.getRangeBorders=function(){var L,U,i=this,e=this.beans.gridOptionsWrapper.isEnableRtl(),s=!1,l=!1,c=!1,h=!1,m=this.cellCtrl.getCellPosition().column,w=this.beans,R=w.rangeService,T=w.columnModel;e?(L=T.getDisplayedColAfter(m),U=T.getDisplayedColBefore(m)):(L=T.getDisplayedColBefore(m),U=T.getDisplayedColAfter(m));var K=R.getCellRanges().filter(function(Ve){return R.isCellInSpecificRange(i.cellCtrl.getCellPosition(),Ve)});L||(h=!0),U||(l=!0);for(var Q=0;Q<K.length&&!(s&&l&&c&&h);Q++){var oe=K[Q],Te=R.getRangeStartRow(oe),He=R.getRangeEndRow(oe);!s&&this.beans.rowPositionUtils.sameRow(Te,this.cellCtrl.getCellPosition())&&(s=!0),!c&&this.beans.rowPositionUtils.sameRow(He,this.cellCtrl.getCellPosition())&&(c=!0),!h&&L&&oe.columns.indexOf(L)<0&&(h=!0),!l&&U&&oe.columns.indexOf(U)<0&&(l=!0)}return{top:s,right:l,bottom:c,left:h}},d.prototype.refreshHandle=function(){if(this.beans.rangeService){var i=this.shouldHaveSelectionHandle();this.selectionHandle&&!i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),i&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}},d.prototype.shouldHaveSelectionHandle=function(){var i=this.beans,e=i.gridOptionsWrapper,s=i.rangeService,l=s.getCellRanges(),c=l.length;if(this.rangeCount<1||c<1)return!1;var h=zn(l),m=this.cellCtrl.getCellPosition(),w=e.isEnableFillHandle()&&!this.cellCtrl.isSuppressFillHandle(),R=e.isEnableRangeHandle(),T=1===c&&!this.cellCtrl.isEditing()&&(w||R);if(this.hasChartRange){var U=l[0].type===Y.StC.DIMENSION&&s.isCellInSpecificRange(m,l[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",U),T=h.type===Y.StC.VALUE}return T&&null!=h.endRow&&s.isContiguousRange(h)&&s.isBottomRightCell(h,m)},d.prototype.addSelectionHandle=function(){var i=this.beans,e=i.gridOptionsWrapper,l=zn(i.rangeService.getCellRanges()).type,h=e.isEnableFillHandle()&&Ce(l)?Y.Lm6.FILL:Y.Lm6.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==h&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(h)),this.selectionHandle.refresh(this.cellCtrl)},d.prototype.destroy=function(){this.beans.context.destroyBean(this.selectionHandle)},d}(),Wb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ub=function(d){function i(e,s){var l=d.call(this)||this;return l.cellCtrl=e,l.beans=s,l.column=e.getColumn(),l.rowNode=e.getRowNode(),l.setupColSpan(),l.setupRowSpan(),l}return Wb(i,d),i.prototype.setupRowSpan=function(){this.rowSpan=this.column.getRowSpan(this.rowNode)},i.prototype.setComp=function(e){this.cellComp=e,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()},i.prototype.onDisplayColumnsChanged=function(){var e=this.getColSpanningList();Ar(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())},i.prototype.setupColSpan=function(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))},i.prototype.onWidthChanged=function(){if(this.cellComp){var e=this.getCellWidth();this.cellComp.setWidth(e+"px")}},i.prototype.getCellWidth=function(){return this.colsSpanning?this.colsSpanning.reduce(function(e,s){return e+s.getActualWidth()},0):this.column.getActualWidth()},i.prototype.getColSpanningList=function(){var e=this.column.getColSpan(this.rowNode),s=[];if(1===e)s.push(this.column);else for(var l=this.column,c=this.column.getPinned(),h=0;l&&h<e&&(s.push(l),(l=this.beans.columnModel.getDisplayedColAfter(l))&&!Ce(l)&&c===l.getPinned());h++);return s},i.prototype.onLeftChanged=function(){if(this.cellComp){var e=this.modifyLeftForPrintLayout(this.getCellLeft());this.cellComp.setLeft(e+"px")}},i.prototype.getCellLeft=function(){return(this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?zn(this.colsSpanning):this.column).getLeft()},i.prototype.modifyLeftForPrintLayout=function(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()===fe.PINNED_LEFT)return e;var s=this.beans.columnModel.getDisplayedColumnsLeftWidth();return this.column.getPinned()===fe.PINNED_RIGHT?s+this.beans.columnModel.getBodyContainerWidth()+(e||0):s+(e||0)},i.prototype.applyRowSpan=function(){if(1!==this.rowSpan){var e=this.beans.gridOptionsWrapper.getRowHeightAsNumber();this.cellComp.setHeight(e*this.rowSpan+"px"),this.cellComp.setZIndex("1")}},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i}(Ke),Xl=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Cd=function(d){function i(e,s){var l=d.call(this)||this;return l.staticClasses=[],l.cellCtrl=e,l.beans=s,l.column=e.getColumn(),l.rowNode=e.getRowNode(),l}return Xl(i,d),i.prototype.setComp=function(e,s){this.cellComp=e,this.scope=s,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()},i.prototype.applyCellClassRules=function(){var e=this,s=this.column.getColDef(),l={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:s,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext()};this.beans.stylingService.processClassRules(s.cellClassRules,l,function(c){return e.cellComp.addOrRemoveCssClass(c,!0)},function(c){return e.cellComp.addOrRemoveCssClass(c,!1)})},i.prototype.applyUserStyles=function(){var e=this.column.getColDef();if(e.cellStyle){var s;if("function"==typeof e.cellStyle){var l={column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,$scope:this.scope,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()};s=(0,e.cellStyle)(l)}else s=e.cellStyle;this.cellComp.setUserStyles(s)}},i.prototype.applyClassesFromColDef=function(){var e=this,s=this.column.getColDef(),l={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:s,rowIndex:this.rowNode.rowIndex,$scope:this.scope,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()};this.staticClasses.length&&this.staticClasses.forEach(function(c){return e.cellComp.addOrRemoveCssClass(c,!1)}),this.staticClasses=this.beans.stylingService.getStaticCellClasses(s,l),this.staticClasses.length&&this.staticClasses.forEach(function(c){return e.cellComp.addOrRemoveCssClass(c,!0)})},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i}(Ke),zb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),_C=function(d){function i(e,s){var l=d.call(this)||this;return l.ctrl=e,l.beans=s,l}return zb(i,d),i.prototype.setComp=function(e){this.comp=e,this.setupTooltip()},i.prototype.setupTooltip=function(){this.browserTooltips=this.beans.gridOptionsWrapper.isEnableBrowserTooltips(),this.updateTooltipText(),this.browserTooltips?this.comp.setTitle(null!=this.tooltipSanatised?this.tooltipSanatised:void 0):this.createTooltipFeatureIfNeeded()},i.prototype.updateTooltipText=function(){this.tooltip=this.ctrl.getTooltipValue(),this.tooltipSanatised=oa(this.tooltip)},i.prototype.createTooltipFeatureIfNeeded=function(){var e=this;null==this.genericTooltipFeature&&(this.genericTooltipFeature=this.createManagedBean(new $f({getTooltipParams:function(){return e.getTooltipParams()},getGui:function(){return e.ctrl.getGui()}}),this.beans.context))},i.prototype.refreshToolTip=function(){this.updateTooltipText(),this.browserTooltips&&this.comp.setTitle(null!=this.tooltipSanatised?this.tooltipSanatised:void 0)},i.prototype.getTooltipParams=function(){var e=this.ctrl,s=e.getColumn?e.getColumn():void 0,l=e.getColDef?e.getColDef():void 0,c=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:l,column:s,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:c,data:c?c.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0}},i.prototype.getTooltipText=function(){return this.tooltip},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i}(Ke),en=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},bg=function(){function d(){}return d.prototype.postConstruct=function(){this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail(),this.gridOptionsWrapper.isRowModelDefault()&&(this.clientSideRowModel=this.rowModel),this.gridOptionsWrapper.isRowModelServerSide()&&(this.serverSideRowModel=this.rowModel)},en([H("resizeObserverService")],d.prototype,"resizeObserverService",void 0),en([H("paginationProxy")],d.prototype,"paginationProxy",void 0),en([H("context")],d.prototype,"context",void 0),en([H("columnApi")],d.prototype,"columnApi",void 0),en([H("gridApi")],d.prototype,"gridApi",void 0),en([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),en([H("expressionService")],d.prototype,"expressionService",void 0),en([H("rowRenderer")],d.prototype,"rowRenderer",void 0),en([H("$compile")],d.prototype,"$compile",void 0),en([H("templateService")],d.prototype,"templateService",void 0),en([H("valueService")],d.prototype,"valueService",void 0),en([H("eventService")],d.prototype,"eventService",void 0),en([H("columnModel")],d.prototype,"columnModel",void 0),en([H("headerNavigationService")],d.prototype,"headerNavigationService",void 0),en([H("navigationService")],d.prototype,"navigationService",void 0),en([H("columnAnimationService")],d.prototype,"columnAnimationService",void 0),en([Nn("rangeService")],d.prototype,"rangeService",void 0),en([H("focusService")],d.prototype,"focusService",void 0),en([Nn("contextMenuFactory")],d.prototype,"contextMenuFactory",void 0),en([H("popupService")],d.prototype,"popupService",void 0),en([H("valueFormatterService")],d.prototype,"valueFormatterService",void 0),en([H("stylingService")],d.prototype,"stylingService",void 0),en([H("columnHoverService")],d.prototype,"columnHoverService",void 0),en([H("userComponentFactory")],d.prototype,"userComponentFactory",void 0),en([H("userComponentRegistry")],d.prototype,"userComponentRegistry",void 0),en([H("animationFrameService")],d.prototype,"animationFrameService",void 0),en([H("dragAndDropService")],d.prototype,"dragAndDropService",void 0),en([H("sortController")],d.prototype,"sortController",void 0),en([H("filterManager")],d.prototype,"filterManager",void 0),en([H("rowContainerHeightService")],d.prototype,"rowContainerHeightService",void 0),en([H("frameworkOverrides")],d.prototype,"frameworkOverrides",void 0),en([H("cellPositionUtils")],d.prototype,"cellPositionUtils",void 0),en([H("rowPositionUtils")],d.prototype,"rowPositionUtils",void 0),en([H("selectionService")],d.prototype,"selectionService",void 0),en([Nn("selectionHandleFactory")],d.prototype,"selectionHandleFactory",void 0),en([H("rowCssClassCalculator")],d.prototype,"rowCssClassCalculator",void 0),en([H("rowModel")],d.prototype,"rowModel",void 0),en([H("ctrlsService")],d.prototype,"ctrlsService",void 0),en([H("ctrlsFactory")],d.prototype,"ctrlsFactory",void 0),en([H("agStackComponentsRegistry")],d.prototype,"agStackComponentsRegistry",void 0),en([H("valueCache")],d.prototype,"valueCache",void 0),en([H("rowNodeEventThrottle")],d.prototype,"rowNodeEventThrottle",void 0),en([Qe],d.prototype,"postConstruct",null),en([vt("beans")],d)}(),DM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),jb=function(d){function i(e,s,l){var c=d.call(this)||this;return c.cellCtrl=e,c.beans=s,c.column=l,c}return DM(i,d),i.prototype.onMouseEvent=function(e,s){if(!Da(s))switch(e){case"click":this.onCellClicked(s);break;case"mousedown":case"touchstart":this.onMouseDown(s);break;case"dblclick":this.onCellDoubleClicked(s);break;case"mouseout":this.onMouseOut(s);break;case"mouseover":this.onMouseOver(s)}},i.prototype.onCellClicked=function(e){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(e),void e.preventDefault();var s=this.beans,l=s.eventService,c=s.gridOptionsWrapper,h=this.cellCtrl.createEvent(e,$.EVENT_CELL_CLICKED);l.dispatchEvent(h);var m=this.column.getColDef();m.onCellClicked&&window.setTimeout(function(){return m.onCellClicked(h)},0),(c.isSingleClickEdit()||m.singleClickEdit)&&!c.isSuppressClickEdit()&&this.cellCtrl.startRowOrCellEdit()},i.prototype.isDoubleClickOnIPad=function(){if(!Zs()||Pv("dblclick"))return!1;var e=(new Date).getTime(),s=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,s},i.prototype.onCellDoubleClicked=function(e){var s=this.column.getColDef(),l=this.cellCtrl.createEvent(e,$.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(l),"function"==typeof s.onCellDoubleClicked&&window.setTimeout(function(){return s.onCellDoubleClicked(l)},0),!this.beans.gridOptionsWrapper.isSingleClickEdit()&&!this.beans.gridOptionsWrapper.isSuppressClickEdit()&&this.cellCtrl.startRowOrCellEdit()},i.prototype.onMouseDown=function(e){var s=e.ctrlKey,l=e.metaKey,c=e.shiftKey,h=e.target,m=this.beans,w=m.eventService,R=m.rangeService;if(!this.isRightClickInExistingRange(e)){var T=R&&0!=R.getCellRanges().length;if(!c||!T){var L=(qi()||Tl())&&!this.cellCtrl.isEditing()&&!$E(h);this.cellCtrl.focusCell(L)}if(c&&T&&e.preventDefault(),!this.containsWidget(h)){if(R){var U=this.cellCtrl.getCellPosition();c?R.extendLatestRangeToCell(U):R.setRangeToCell(U,s||l)}w.dispatchEvent(this.cellCtrl.createEvent(e,$.EVENT_CELL_MOUSE_DOWN))}}},i.prototype.isRightClickInExistingRange=function(e){var s=this.beans.rangeService;return!(!s||!s.isCellInAnyRange(this.cellCtrl.getCellPosition())||2!==e.button)},i.prototype.containsWidget=function(e){return Dl(e,"ag-selection-checkbox",3)},i.prototype.onMouseOut=function(e){if(!this.mouseStayingInsideCell(e)){var s=this.cellCtrl.createEvent(e,$.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(s),this.beans.columnHoverService.clearMouseOver()}},i.prototype.onMouseOver=function(e){if(!this.mouseStayingInsideCell(e)){var s=this.cellCtrl.createEvent(e,$.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(s),this.beans.columnHoverService.setMouseOver([this.column])}},i.prototype.mouseStayingInsideCell=function(e){if(!e.target||!e.relatedTarget)return!1;var s=this.cellCtrl.getGui(),l=s.contains(e.target),c=s.contains(e.relatedTarget);return l&&c},i.prototype.destroy=function(){},i}(bg),qb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Kb=function(d){function i(e,s,l,c,h,m){var w=d.call(this)||this;return w.cellCtrl=e,w.beans=s,w.column=l,w.rowNode=c,w.rowCtrl=m,w}return qb(i,d),i.prototype.setComp=function(e){this.eGui=e},i.prototype.onKeyDown=function(e){var s=e.which||e.keyCode;switch(s){case $e.ENTER:this.onEnterKeyDown(e);break;case $e.F2:this.onF2KeyDown();break;case $e.ESCAPE:this.onEscapeKeyDown();break;case $e.TAB:this.onTabKeyDown(e);break;case $e.BACKSPACE:case $e.DELETE:this.onBackspaceOrDeleteKeyPressed(s);break;case $e.DOWN:case $e.UP:case $e.RIGHT:case $e.LEFT:this.onNavigationKeyPressed(e,s)}},i.prototype.onNavigationKeyPressed=function(e,s){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(s):this.beans.navigationService.navigateToNextCell(e,s,this.cellCtrl.getCellPosition(),!0),e.preventDefault())},i.prototype.onShiftRangeSelect=function(e){if(this.beans.rangeService){var s=this.beans.rangeService.extendLatestRangeInDirection(e);s&&this.beans.navigationService.ensureCellVisible(s)}},i.prototype.onTabKeyDown=function(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)},i.prototype.onBackspaceOrDeleteKeyPressed=function(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(e)},i.prototype.onEnterKeyDown=function(e){this.cellCtrl.isEditing()||this.rowCtrl.isEditing()?this.cellCtrl.stopEditingAndFocus():this.beans.gridOptionsWrapper.isEnterMovesDown()?this.beans.navigationService.navigateToNextCell(null,$e.DOWN,this.cellCtrl.getCellPosition(),!1):(this.cellCtrl.startRowOrCellEdit($e.ENTER),this.cellCtrl.isEditing()&&e.preventDefault())},i.prototype.onF2KeyDown=function(){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit($e.F2)},i.prototype.onEscapeKeyDown=function(){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))},i.prototype.onKeyPress=function(e){if(Pu(e)===this.eGui&&!this.cellCtrl.isEditing()){var c=String.fromCharCode(e.charCode);" "===c?this.onSpaceKeyPressed(e):G_(e)&&(this.cellCtrl.startRowOrCellEdit(null,c),e.preventDefault())}},i.prototype.onSpaceKeyPressed=function(e){var s=this.beans.gridOptionsWrapper;if(!this.cellCtrl.isEditing()&&s.isRowSelection()){var l=this.rowNode.isSelected(),c=!l;if(c||!s.isSuppressRowDeselection()){var h=this.beans.gridOptionsWrapper.isGroupSelectsFiltered(),m=this.rowNode.setSelectedParams({newValue:c,rangeSelect:e.shiftKey,groupSelectsFiltered:h});void 0===l&&0===m&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:h})}}e.preventDefault()},i.prototype.destroy=function(){},i}(Ke),gp=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Jl=function(d){function i(e,s,l,c){var h=d.call(this,'<div class="ag-drag-handle ag-row-drag" draggable="true"></div>')||this;return h.rowNode=e,h.column=s,h.beans=l,h.eCell=c,h}return gp(i,d),i.prototype.postConstruct=function(){this.getGui().appendChild(ui("rowDrag",this.beans.gridOptionsWrapper,null)),this.addGuiEventListener("mousedown",function(s){s.stopPropagation()}),this.addDragSource(),this.checkVisibility()},i.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},i.prototype.onDragStart=function(e){var s=this,l=this.column.getColDef().dndSourceOnRowDrag,c=qi();c||e.dataTransfer.setDragImage(this.eCell,0,0),l?l({rowNode:this.rowNode,dragEvent:e}):function(){try{var w=JSON.stringify(s.rowNode.data);c?e.dataTransfer.setData("text",w):(e.dataTransfer.setData("application/json",w),e.dataTransfer.setData("text/plain",w))}catch(R){}}()},i.prototype.checkVisibility=function(){var e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)},function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Qe],i.prototype,"postConstruct",null),i}(pn),Yb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),mp=function(){return mp=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},mp.apply(this,arguments)},Tg="ag-cell-not-inline-editing",Qb=0,Zi=function(d){function i(e,s,l,c){var h=d.call(this)||this;return h.suppressRefreshCell=!1,h.column=e,h.rowNode=s,h.beans=l,h.rowCtrl=c,h.instanceId=e.getId()+"-"+Qb++,h.createCellPosition(),h.addFeatures(),h}return Yb(i,d),i.prototype.addFeatures=function(){var e=this;this.cellPositionFeature=new Ub(this,this.beans),this.addDestroyFunc(function(){return e.cellPositionFeature.destroy()}),this.cellCustomStyleFeature=new Cd(this,this.beans),this.addDestroyFunc(function(){return e.cellCustomStyleFeature.destroy()}),this.cellMouseListenerFeature=new jb(this,this.beans,this.column),this.addDestroyFunc(function(){return e.cellMouseListenerFeature.destroy()}),this.cellKeyboardListenerFeature=new Kb(this,this.beans,this.column,this.rowNode,this.scope,this.rowCtrl),this.addDestroyFunc(function(){return e.cellKeyboardListenerFeature.destroy()}),this.beans.rangeService&&this.beans.gridOptionsWrapper.isEnableRangeSelection()&&(this.cellRangeFeature=new yC(this.beans,this),this.addDestroyFunc(function(){return e.cellRangeFeature.destroy()})),this.addTooltipFeature()},i.prototype.addTooltipFeature=function(){var e=this;this.tooltipFeature=new _C({getColumn:function(){return e.column},getColDef:function(){return e.column.getColDef()},getRowIndex:function(){return e.cellPosition.rowIndex},getRowNode:function(){return e.rowNode},getGui:function(){return e.getGui()},getLocation:function(){return"cell"},getTooltipValue:function(){var h=e.column.getColDef(),m=e.rowNode.data;if(h.tooltipField&&Fe(m))return Pf(m,h.tooltipField,e.column.isTooltipFieldContainsDots());var w=h.tooltipValueGetter;return w?w({location:"cell",api:e.beans.gridOptionsWrapper.getApi(),columnApi:e.beans.gridOptionsWrapper.getColumnApi(),context:e.beans.gridOptionsWrapper.getContext(),colDef:e.column.getColDef(),column:e.column,rowIndex:e.cellPosition.rowIndex,node:e.rowNode,data:e.rowNode.data,value:e.value,valueFormatted:e.valueFormatted}):null},getValueFormatted:function(){return e.valueFormatted}},this.beans),this.addDestroyFunc(function(){return e.tooltipFeature.destroy()})},i.prototype.setComp=function(e,s,l,c,h){this.cellComp=e,this.gow=this.beans.gridOptionsWrapper,this.scope=s,this.eGui=l,this.printLayout=c,this.updateAndFormatValue(!0),this.addDomData(),this.onCellFocused(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAriaExpanded(),this.setupAutoHeight();var m=oa(this.column.getId()),w=this.beans.columnModel.getAriaColumnIndex(this.column);this.cellComp.setTabIndex(-1),this.cellComp.setRole("gridcell"),this.cellComp.setAriaColIndex(w),this.cellComp.setColId(m),this.cellComp.setUnselectable(this.beans.gridOptionsWrapper.isEnableCellTextSelection()?null:"on"),this.cellPositionFeature.setComp(e),this.cellCustomStyleFeature.setComp(e,s),this.tooltipFeature.setComp(e),this.cellKeyboardListenerFeature.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e),h&&this.isCellEditable()?this.startEditing():this.showValue()},i.prototype.setupAutoHeight=function(){var e=this;if(this.column.getColDef().autoHeight){var s=function h(m){var w=e.beans.gridOptionsWrapper.getDocument();w&&w.contains(e.eGui)||!(m<5)?e.rowNode.setRowAutoHeight(e.eGui.offsetHeight,e.column):e.beans.frameworkOverrides.setTimeout(function(){return h(m++)},0)},l=function(){return s(0)};l();var c=this.beans.resizeObserverService.observeResize(this.eGui,l);this.addDestroyFunc(function(){c(),e.rowNode.setRowAutoHeight(void 0,e.column)})}},i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.showValue=function(e){void 0===e&&(e=!1);var s=null!=this.valueFormatted?this.valueFormatted:this.value,l=this.createCellRendererParams(),c=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),l);this.cellComp.setRenderDetails(c,s,e),this.refreshHandle()},i.prototype.setupControlComps=function(){var e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource);var s=this.beans.gridOptionsWrapper.isEnableCellTextSelection()||1==this.column.getColDef().autoHeight;this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag),this.cellComp.setForceWrapper(s)},i.prototype.isIncludeControl=function(e){return!(null!=this.rowNode.rowPinned||"function"!=typeof e&&!0!==e)},i.prototype.setupAriaExpanded=function(){var e=this,s=this.column.getColDef();if(this.rowNode.isExpandable()){var l=s.showRowGroup,c=this.rowNode.rowGroupColumn,h=!0===l,m=c&&c.getColId()===l;if(h||m){var R=function(){e.cellComp.setAriaExpanded(!!e.rowNode.expanded)};this.addManagedListener(this.rowNode,ln.EVENT_EXPANDED_CHANGED,R),R()}}},i.prototype.refreshShouldDestroy=function(){var e=this.column.getColDef(),s=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),l=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),c=this.includeDndSource!=this.isIncludeControl(e.dndSource);return s||l||c},i.prototype.startEditing=function(e,s,l){if(void 0===e&&(e=null),void 0===s&&(s=null),void 0===l&&(l=!1),this.isCellEditable()&&!this.editing){var c=this.createCellEditorParams(e,s,l),h=this.column.getColDef(),m=this.beans.userComponentFactory.getCellEditorDetails(h,c),w=!!h.cellEditorPopup,R=h.cellEditorPopupPosition;this.setEditing(!0,w),this.cellComp.setEditDetails(m,w,R);var T=this.createEvent(null,$.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(T)}},i.prototype.setEditing=function(e,s){void 0===s&&(s=!1),this.editing!==e&&(this.editing=e,this.editingInPopup=s,this.setInlineEditingClass())},i.prototype.stopRowOrCellEdit=function(e){void 0===e&&(e=!1),this.beans.gridOptionsWrapper.isFullRowEdit()?this.rowCtrl.stopRowEditing(e):this.stopEditing(e)},i.prototype.onPopupEditorClosed=function(){!this.isEditing()||this.stopEditingAndFocus()},i.prototype.takeValueFromCellEditor=function(e){var s={newValueExists:!1};if(e)return s;var l=this.cellComp.getCellEditor();return l?l.isCancelAfterEnd&&l.isCancelAfterEnd()?s:{newValue:l.getValue(),newValueExists:!0}:s},i.prototype.saveNewValue=function(e,s){s!==e&&(this.suppressRefreshCell=!0,this.rowNode.setDataValue(this.column,s),this.suppressRefreshCell=!1)},i.prototype.stopEditing=function(e){if(void 0===e&&(e=!1),this.editing){var s=this.takeValueFromCellEditor(e),l=s.newValue,c=s.newValueExists,h=this.getValueFromValueService();c&&this.saveNewValue(h,l),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(h,l)}},i.prototype.dispatchEditingStoppedEvent=function(e,s){var l=mp(mp({},this.createEvent(null,$.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:s});this.beans.eventService.dispatchEvent(l)},i.prototype.setInlineEditingClass=function(){if(this.isAlive()){var e=this.editing&&!this.editingInPopup,s=this.editing&&this.editingInPopup;this.cellComp.addOrRemoveCssClass("ag-cell-inline-editing",e),this.cellComp.addOrRemoveCssClass(Tg,!e),this.cellComp.addOrRemoveCssClass("ag-cell-popup-editing",s),this.rowCtrl.setInlineEditingCss(this.editing)}},i.prototype.hackSayEditingInPopup=function(){this.editingInPopup||(this.editingInPopup=!0,this.setInlineEditingClass())},i.prototype.createCellEditorParams=function(e,s,l){var c={value:this.getValueFromValueService(),keyPress:e,charPress:s,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsWrapper.getApi(),cellStartedEdit:l,columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)};return this.scope&&(c.$scope=this.scope),c},i.prototype.createCellRendererParams=function(){var e=this,l={value:this.value,valueFormatted:this.valueFormatted,getValue:this.getValueFromValueService.bind(this),setValue:function(h){return e.beans.valueService.setValue(e.rowNode,e.column,h)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:function(h,m,w,R){return e.registerRowDragger(h,m,R)},addRowCompListener:function(h,m){console.warn("AG Grid: since AG Grid v26, params.addRowCompListener() is deprecated. If you need this functionality, please contact AG Grid support and advise why so that we can revert with an appropriate workaround, as we dont have any valid use cases for it. This method was originally provided as a work around to know when cells were destroyed in AG Grid before custom Cell Renderers could be provided."),e.rowCtrl.addEventListener(h,m)}};return this.scope&&(l.$scope=this.scope),l},i.prototype.parseValue=function(e){var s=this.column.getColDef(),l={node:this.rowNode,data:this.rowNode.data,oldValue:this.getValue(),newValue:e,colDef:s,column:this.column,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()},c=s.valueParser;return Fe(c)?this.beans.expressionService.evaluate(c,l):e},i.prototype.setFocusOutOnEditor=function(){if(this.editing){var e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}},i.prototype.setFocusInOnEditor=function(){if(this.editing){var e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}},i.prototype.onCellChanged=function(e){e.column===this.column&&this.refreshCell({})},i.prototype.refreshCell=function(e){if(!this.suppressRefreshCell&&!this.editing){var s=this.column.getColDef(),l=null!=e&&!!e.newData,c=null!=e&&!!e.suppressFlash||!!s.suppressCellFlash,m=e&&e.forceRefresh||null==s.field&&null==s.valueGetter&&null==s.showRowGroup||l,w=this.updateAndFormatValue();if(m||w){this.showValue(l);var T=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!c&&!T&&(this.beans.gridOptionsWrapper.isEnableCellChangeFlash()||s.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature.applyUserStyles(),this.cellCustomStyleFeature.applyClassesFromColDef()}this.refreshToolTip(),this.cellCustomStyleFeature.applyCellClassRules()}},i.prototype.stopEditingAndFocus=function(e){void 0===e&&(e=!1),this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit()},i.prototype.navigateAfterEdit=function(){this.beans.gridOptionsWrapper.isFullRowEdit()||this.beans.gridOptionsWrapper.isEnterMovesDownAfterEdit()&&this.beans.navigationService.navigateToNextCell(null,$e.DOWN,this.getCellPosition(),!1)},i.prototype.flashCell=function(e){this.animateCell("data-changed",e&&e.flashDelay,e&&e.fadeDelay)},i.prototype.animateCell=function(e,s,l){var c=this,h="ag-cell-"+e,m="ag-cell-"+e+"-animation",w=this.beans.gridOptionsWrapper;s||(s=w.getCellFlashDelay()),Fe(l)||(l=w.getCellFadeDelay()),this.cellComp.addOrRemoveCssClass(h,!0),this.cellComp.addOrRemoveCssClass(m,!1),window.setTimeout(function(){c.cellComp.addOrRemoveCssClass(h,!1),c.cellComp.addOrRemoveCssClass(m,!0),c.cellComp.setTransition("background-color "+l+"ms"),window.setTimeout(function(){c.cellComp.addOrRemoveCssClass(m,!1),c.cellComp.setTransition("transition")},l)},s)},i.prototype.onFlashCells=function(e){var s=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[s]&&this.animateCell("highlight")},i.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},i.prototype.isSuppressFillHandle=function(){return this.column.isSuppressFillHandle()},i.prototype.formatValue=function(e){var s=this.callValueFormatter(e);return null!=s?s:e},i.prototype.callValueFormatter=function(e){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,this.scope,e)},i.prototype.updateAndFormatValue=function(e){void 0===e&&(e=!1);var s=this.value,l=this.valueFormatted;return this.value=this.getValueFromValueService(),this.valueFormatted=this.callValueFormatter(this.value),!!e||!this.valuesAreEqual(s,this.value)||this.valueFormatted!=l},i.prototype.valuesAreEqual=function(e,s){var l=this.column.getColDef();return l.equals?l.equals(e,s):e===s},i.prototype.getComp=function(){return this.cellComp},i.prototype.getValueFromValueService=function(){var e=this.rowNode.leafGroup&&this.beans.columnModel.isPivotMode(),s=this.rowNode.group&&this.rowNode.expanded&&!this.rowNode.footer&&!e,l=this.beans.gridOptionsWrapper.isGroupIncludeFooter(),c=this.beans.gridOptionsWrapper.isGroupSuppressBlankHeader();return this.beans.valueService.getValue(this.column,this.rowNode,!1,s&&l&&!c)},i.prototype.getValue=function(){return this.value},i.prototype.getValueFormatted=function(){return this.valueFormatted},i.prototype.addDomData=function(){var e=this,s=this.getGui();this.beans.gridOptionsWrapper.setDomData(s,i.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(function(){return e.beans.gridOptionsWrapper.setDomData(s,i.DOM_DATA_KEY_CELL_CTRL,null)})},i.prototype.createEvent=function(e,s){var l={type:s,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex};return this.scope&&(l.$scope=this.scope),l},i.prototype.onKeyPress=function(e){this.cellKeyboardListenerFeature.onKeyPress(e)},i.prototype.onKeyDown=function(e){this.cellKeyboardListenerFeature.onKeyDown(e)},i.prototype.onMouseEvent=function(e,s){this.cellMouseListenerFeature.onMouseEvent(e,s)},i.prototype.getGui=function(){return this.eGui},i.prototype.refreshToolTip=function(){this.tooltipFeature.refreshToolTip()},i.prototype.getColSpanningList=function(){return this.cellPositionFeature.getColSpanningList()},i.prototype.onLeftChanged=function(){this.cellPositionFeature.onLeftChanged(),this.refreshAriaIndex()},i.prototype.refreshAriaIndex=function(){var e=this.beans.columnModel.getAriaColumnIndex(this.column);this.cellComp.setAriaColIndex(e)},i.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},i.prototype.onWidthChanged=function(){return this.cellPositionFeature.onWidthChanged()},i.prototype.getColumn=function(){return this.column},i.prototype.getRowNode=function(){return this.rowNode},i.prototype.getBeans=function(){return this.beans},i.prototype.isPrintLayout=function(){return this.printLayout},i.prototype.appendChild=function(e){this.eGui.appendChild(e)},i.prototype.refreshHandle=function(){this.editing||this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()},i.prototype.getCellPosition=function(){return this.cellPosition},i.prototype.isEditing=function(){return this.editing},i.prototype.startRowOrCellEdit=function(e,s){this.beans.gridOptionsWrapper.isFullRowEdit()?this.rowCtrl.startRowEditing(e,s,this):this.startEditing(e,s,!0)},i.prototype.getRowCtrl=function(){return this.rowCtrl},i.prototype.getRowPosition=function(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}},i.prototype.updateRangeBordersIfRangeCount=function(){this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()},i.prototype.onRangeSelectionChanged=function(){this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},i.prototype.isRangeSelectionEnabled=function(){return null!=this.cellRangeFeature},i.prototype.focusCell=function(e){void 0===e&&(e=!1),this.beans.focusService.setFocusedCell(this.getCellPosition().rowIndex,this.column,this.rowNode.rowPinned,e)},i.prototype.onRowIndexChanged=function(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},i.prototype.onFirstRightPinnedChanged=function(){if(this.cellComp){var e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",e)}},i.prototype.onLastLeftPinnedChanged=function(){if(this.cellComp){var e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",e)}},i.prototype.onCellFocused=function(e){if(this.cellComp){var s=this.beans.focusService.isCellFocused(this.cellPosition);if(this.gow.isSuppressCellSelection()||this.cellComp.addOrRemoveCssClass("ag-cell-focus",s),s&&e&&e.forceBrowserFocus){var l=this.cellComp.getFocusableElement();l.focus(),(!document.activeElement||document.activeElement===document.body)&&l.focus()}var c=this.beans.gridOptionsWrapper.isFullRowEdit();!s&&!c&&this.editing&&this.stopRowOrCellEdit()}},i.prototype.createCellPosition=function(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,column:this.column}},i.prototype.applyStaticCssClasses=function(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass(Tg,!0);var e=1==this.column.getColDef().autoHeight;this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",e),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!e)},i.prototype.onColumnHover=function(){if(this.cellComp&&this.beans.gridOptionsWrapper.isColumnHoverHighlight()){var e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",e)}},i.prototype.onNewColumnsLoaded=function(){!this.cellComp||(this.setWrapText(),this.editing||this.refreshCell({forceRefresh:!0,suppressFlash:!0}))},i.prototype.setWrapText=function(){var e=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",e)},i.prototype.dispatchCellContextMenuEvent=function(e){var s=this.column.getColDef(),l=this.createEvent(e,$.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(l),s.onCellContextMenu&&window.setTimeout(function(){return s.onCellContextMenu(l)},0)},i.prototype.getCellRenderer=function(){return this.cellComp?this.cellComp.getCellRenderer():null},i.prototype.getCellEditor=function(){return this.cellComp?this.cellComp.getCellEditor():null},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.createSelectionCheckbox=function(){var e=new iu;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e},i.prototype.createDndSource=function(){var e=new Jl(this.rowNode,this.column,this.beans,this.eGui);return this.beans.context.createBean(e),e},i.prototype.registerRowDragger=function(e,s,l){var c=this;if(this.customRowDragComp)this.customRowDragComp.setDragElement(e,s);else{var h=this.createRowDragComp(e,s,l);h&&(this.customRowDragComp=h,this.addDestroyFunc(function(){return c.beans.context.destroyBean(h)}))}},i.prototype.createRowDragComp=function(e,s,l){var c=this,h=this.beans.gridOptionsWrapper.isPagination(),m=this.beans.gridOptionsWrapper.isRowDragManaged(),w=this.beans.gridOptionsWrapper.isRowModelDefault();if(m){if(!w)return void vn(function(){return console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model")},"CellComp.addRowDragging");if(h)return void vn(function(){return console.warn("AG Grid: managed row dragging is not possible when doing pagination")},"CellComp.addRowDragging")}var R=new zl(function(){return c.value},this.rowNode,this.column,e,s,l);return this.beans.context.createBean(R),R},i.DOM_DATA_KEY_CELL_CTRL="cellCtrl",i}(Ke),Wu=function(){return Wu=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Wu.apply(this,arguments)},ex=function(){function d(){}return d.createChildScopeOrNull=function(i,e,s){if(!s.isAngularCompileRows())return null;var c=e.$new();return c.data=Wu({},i.data),c.rowNode=i,c.context=s.getContext(),{scope:c,scopeDestroyFunc:function(){c.$destroy(),c.data=null,c.rowNode=null,c.context=null}}},d}(),MM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),wi=function(){return function(d){d.Normal="Normal",d.FullWidth="FullWidth",d.FullWidthLoading="FullWidthLoading",d.FullWidthGroup="FullWidthGroup",d.FullWidthDetail="FullWidthDetail"}(wi||(wi={})),wi}(),PM=Aa([[wi.FullWidthLoading,"agLoadingCellRenderer"],[wi.FullWidthGroup,"agGroupRowRenderer"],[wi.FullWidthDetail,"agDetailCellRenderer"]]),IM=Aa([[wi.FullWidth,"fullWidthCellRenderer"],[wi.FullWidthLoading,"loadingCellRenderer"],[wi.FullWidthGroup,"groupRowRenderer"],[wi.FullWidthDetail,"detailCellRenderer"]]),EC=0,ou=function(d){function i(e,s,l,c,h,m){var w=d.call(this)||this;return w.allRowGuis=[],w.active=!0,w.centerCellCtrls={list:[],map:{}},w.leftCellCtrls={list:[],map:{}},w.rightCellCtrls={list:[],map:{}},w.lastMouseDownOnDragger=!1,w.updateColumnListsPending=!1,w.parentScope=e,w.beans=l,w.rowNode=s,w.paginationPage=w.beans.paginationProxy.getCurrentPage(),w.useAnimationFrameForCreate=h,w.printLayout=m,w.instanceId=s.id+"-"+EC++,w.setAnimateFlags(c),w.rowFocused=w.beans.focusService.isRowFocused(w.rowNode.rowIndex,w.rowNode.rowPinned),w.setupAngular1Scope(),w.rowLevel=w.beans.rowCssClassCalculator.calculateRowLevel(w.rowNode),w.setRowType(),w.addListeners(),w.setInitialRowTop(),w}return MM(i,d),i.prototype.getBeans=function(){return this.beans},i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.setComp=function(e,s,l){var c={rowComp:e,element:s,pinned:l};this.allRowGuis.push(c),l===fe.PINNED_LEFT?this.leftGui=c:l===fe.PINNED_RIGHT?this.rightGui=c:this.isFullWidth()&&!this.beans.gridOptionsWrapper.isEmbedFullWidthRows()?this.fullWidthGui=c:this.centerGui=c,(null!=this.leftGui&&null!=this.rightGui&&null!=this.centerGui||null!=this.fullWidthGui)&&this.initialiseRowComps()},i.prototype.isCacheable=function(){return this.rowType===wi.FullWidthDetail&&this.beans.gridOptionsWrapper.isKeepDetailRows()},i.prototype.setCached=function(e){var s=e?"none":void 0;this.allRowGuis.forEach(function(l){return l.rowComp.setDisplay(s)})},i.prototype.initialiseRowComps=function(){var e=this,s=this.beans.gridOptionsWrapper;this.onRowHeightChanged(),this.updateRowIndexes(),this.setFocusedClasses(),this.setStylesFromGridOptions(),s.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(),this.updateColumnLists(!this.useAnimationFrameForCreate),this.slideRowIn&&p_(this.onTopChanged.bind(this)),this.fadeRowIn&&p_(function(){e.allRowGuis.forEach(function(m){return m.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)})});var l=this.getRowBusinessKey(),c=oa(this.rowNode.id),h=oa(l);this.allRowGuis.forEach(function(m){var w=m.rowComp;w.setRole("row"),e.getInitialRowClasses(m.pinned).forEach(function(T){return w.addOrRemoveCssClass(T,!0)}),e.rowNode.group&&w.setAriaExpanded(1==e.rowNode.expanded),null!=c&&w.setRowId(c),null!=h&&w.setRowBusinessKey(h),e.isFullWidth()&&w.setTabIndex(-1),s.setDomData(m.element,i.DOM_DATA_KEY_ROW_CTRL,e),e.addDestroyFunc(function(){return s.setDomData(m.element,i.DOM_DATA_KEY_ROW_CTRL,null)}),e.useAnimationFrameForCreate?e.beans.animationFrameService.createTask(e.addHoverFunctionality.bind(e,m.element),e.rowNode.rowIndex,"createTasksP2"):e.addHoverFunctionality(m.element),e.isFullWidth()&&e.setupFullWidth(m),s.isRowDragEntireRow()&&e.addRowDraggerToRow(m),e.beans.animationFrameService.addDestroyTask(function(){e.isAlive()&&m.rowComp.addOrRemoveCssClass("ag-after-created",!0)})}),this.executeProcessRowPostCreateFunc()},i.prototype.addRowDraggerToRow=function(e){if(this.beans.gridOptionsWrapper.isEnableRangeSelection())vn(function(){console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`")},"rowDragAndRangeSelectionEnabled");else{var l=new zl(function(){return"1 row"},this.rowNode,void 0,e.element,void 0,!0);this.createManagedBean(l,this.beans.context)}},i.prototype.getFullWidthCellRendererType=function(){return IM.get(this.rowType)},i.prototype.getFullWidthCellRendererName=function(){return PM.get(this.rowType)},i.prototype.setupFullWidth=function(e){var s=this.createFullWidthParams(e.element,e.pinned),l=this.getFullWidthCellRendererType(),c=this.getFullWidthCellRendererName(),h=this.beans.userComponentFactory.getFullWidthCellRendererDetails(s,l,c);if(h)e.rowComp.showFullWidth(h);else{var m=qt.isRegistered(Y.GXE.MasterDetailModule);"agDetailCellRenderer"!==c||m?console.error("AG Grid: fullWidthCellRenderer "+c+" not found"):console.warn("AG Grid: cell renderer agDetailCellRenderer (for master detail) not found. Did you forget to include the master detail module?")}},i.prototype.getScope=function(){return this.scope},i.prototype.isPrintLayout=function(){return this.printLayout},i.prototype.setupAngular1Scope=function(){var e=ex.createChildScopeOrNull(this.rowNode,this.parentScope,this.beans.gridOptionsWrapper);e&&(this.scope=e.scope,this.addDestroyFunc(e.scopeDestroyFunc))},i.prototype.getCellElement=function(e){var s=this.getCellCtrl(e);return s?s.getGui():null},i.prototype.executeProcessRowPostCreateFunc=function(){var e=this.beans.gridOptionsWrapper.getProcessRowPostCreateFunc();e&&e({eRow:this.centerGui?this.centerGui.element:void 0,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,api:this.beans.gridOptionsWrapper.getApi(),rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()})},i.prototype.setRowType=function(){var e=this.rowNode.stub,s=this.rowNode.isFullWidthCell(),l=this.beans.doingMasterDetail&&this.rowNode.detail,c=this.beans.columnModel.isPivotMode(),m=!!this.rowNode.group&&!this.rowNode.footer&&this.beans.gridOptionsWrapper.isGroupUseEntireRow(c);this.rowType=e?wi.FullWidthLoading:l?wi.FullWidthDetail:s?wi.FullWidth:m?wi.FullWidthGroup:wi.Normal},i.prototype.updateColumnLists=function(e){var s=this;if(void 0===e&&(e=!1),!this.isFullWidth()){if(e||this.beans.gridOptionsWrapper.isSuppressAnimationFrame()||this.printLayout)return void this.updateColumnListsImpl();this.updateColumnListsPending||(this.beans.animationFrameService.createTask(function(){!s.active||s.updateColumnListsImpl()},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}},i.prototype.createCellCtrls=function(e,s,l){var c=this;void 0===l&&(l=null);var h={list:[],map:{}},m=function(R,T){h.list.push(T),h.map[R]=T};return s.forEach(function(w){var R=w.getInstanceId(),T=e.map[R];T||(T=new Zi(w,c.rowNode,c.beans,c)),m(R,T)}),e.list.forEach(function(w){if(null==h.map[w.getColumn().getInstanceId()]){if(!c.isCellEligibleToBeRemoved(w,l))return void m(w.getColumn().getInstanceId(),w);w.destroy()}}),h},i.prototype.updateColumnListsImpl=function(){var e=this;this.updateColumnListsPending=!1;var s=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,s.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{var l=s.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,l);var c=s.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,c,fe.PINNED_LEFT);var h=s.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,h,fe.PINNED_RIGHT)}this.allRowGuis.forEach(function(m){m.rowComp.setCellCtrls((m.pinned===fe.PINNED_LEFT?e.leftCellCtrls:m.pinned===fe.PINNED_RIGHT?e.rightCellCtrls:e.centerCellCtrls).list)})},i.prototype.isCellEligibleToBeRemoved=function(e,s){var l=!0;if(e.getColumn().getPinned()!=s)return l;var m=e.isEditing(),w=this.beans.focusService.isCellFocused(e.getCellPosition());if(m||w){var T=e.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(T)>=0)&&l}return l},i.prototype.setAnimateFlags=function(e){if(e){var s=Fe(this.rowNode.oldRowTop);this.slideRowIn=s,this.fadeRowIn=!s}else this.slideRowIn=!1,this.fadeRowIn=!1},i.prototype.isEditing=function(){return this.editingRow},i.prototype.stopRowEditing=function(e){this.stopEditing(e)},i.prototype.isFullWidth=function(){return this.rowType!==wi.Normal},i.prototype.getRowType=function(){return this.rowType},i.prototype.refreshFullWidth=function(){var e=this,s=function(T,L){if(!T)return!0;var U=T.rowComp.getFullWidthCellRenderer();if(!U||!U.refresh)return!1;var K=e.createFullWidthParams(T.element,L);return U.refresh(K)},l=s(this.fullWidthGui,null),c=s(this.centerGui,null),h=s(this.leftGui,fe.PINNED_LEFT),m=s(this.rightGui,fe.PINNED_RIGHT);return l&&c&&h&&m},i.prototype.addListeners=function(){this.addManagedListener(this.rowNode,ln.EVENT_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_ROW_SELECTED,this.onRowSelected.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,ln.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));var e=this.beans.eventService;this.addManagedListener(e,$.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(e,$.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(e,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(e,$.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(e,$.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,$.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(e,$.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(e,$.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addListenersForCellComps()},i.prototype.onColumnMoved=function(){this.updateColumnLists()},i.prototype.addListenersForCellComps=function(){var e=this;this.addManagedListener(this.rowNode,ln.EVENT_ROW_INDEX_CHANGED,function(){e.getAllCellCtrls().forEach(function(s){return s.onRowIndexChanged()})}),this.addManagedListener(this.rowNode,ln.EVENT_CELL_CHANGED,function(s){e.getAllCellCtrls().forEach(function(l){return l.onCellChanged(s)})})},i.prototype.onRowNodeDataChanged=function(e){this.getAllCellCtrls().forEach(function(s){return s.refreshCell({suppressFlash:!e.update,newData:!e.update})}),this.onRowSelected(),this.postProcessCss()},i.prototype.onRowNodeCellChanged=function(){this.postProcessCss()},i.prototype.postProcessCss=function(){this.setStylesFromGridOptions(),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},i.prototype.onRowNodeHighlightChanged=function(){var e=this.rowNode.highlighted;this.allRowGuis.forEach(function(s){var c=e===Y.oh5.Below;s.rowComp.addOrRemoveCssClass("ag-row-highlight-above",e===Y.oh5.Above),s.rowComp.addOrRemoveCssClass("ag-row-highlight-below",c)})},i.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()},i.prototype.postProcessRowDragging=function(){var e=this.rowNode.dragging;this.allRowGuis.forEach(function(s){return s.rowComp.addOrRemoveCssClass("ag-row-dragging",e)})},i.prototype.updateExpandedCss=function(){var e=this.rowNode.isExpandable(),s=1==this.rowNode.expanded;this.allRowGuis.forEach(function(l){l.rowComp.addOrRemoveCssClass("ag-row-group",e),l.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&s),l.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!s),l.rowComp.setAriaExpanded(e&&s)})},i.prototype.onDisplayedColumnsChanged=function(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()},i.prototype.onVirtualColumnsChanged=function(){this.updateColumnLists()},i.prototype.getRowPosition=function(){return{rowPinned:this.rowNode.rowPinned,rowIndex:this.rowNode.rowIndex}},i.prototype.onKeyboardNavigate=function(e){var s=Li(this.allRowGuis,function(R){return R.element.contains(e.target)});if((s?s.element:null)===e.target){var h=this.rowNode,m=this.beans.focusService.getFocusedCell();this.beans.navigationService.navigateToNextCell(e,e.keyCode,{rowIndex:h.rowIndex,rowPinned:h.rowPinned,column:m&&m.column},!0),e.preventDefault()}},i.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented&&!Da(e)){var s=Li(this.allRowGuis,function(m){return m.element.contains(e.target)}),l=s?s.element:null,c=l===e.target,h=null;c||(h=this.beans.focusService.findNextFocusableElement(l,!1,e.shiftKey)),(this.isFullWidth()&&c||!h)&&this.beans.navigationService.onTabKeyDown(this,e)}},i.prototype.onFullWidthRowFocused=function(e){var s=this.rowNode,l=this.isFullWidth()&&e.rowIndex===s.rowIndex&&e.rowPinned==s.rowPinned,c=this.fullWidthGui?this.fullWidthGui.element:this.centerGui.element;Ft(c,"ag-full-width-focus",l),l&&c.focus({preventScroll:!0})},i.prototype.refreshCell=function(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),this.updateColumnLists()},i.prototype.removeCellCtrl=function(e,s){var l={list:[],map:{}};return e.list.forEach(function(c){c!==s&&(l.list.push(c),l.map[c.getInstanceId()]=c)}),l},i.prototype.onMouseEvent=function(e,s){switch(e){case"dblclick":this.onRowDblClick(s);break;case"click":this.onRowClick(s);break;case"touchstart":case"mousedown":this.onRowMouseDown(s)}},i.prototype.createRowEvent=function(e,s){return{type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),event:s}},i.prototype.createRowEventWithSource=function(e,s){var l=this.createRowEvent(e,s);return l.source=this,l},i.prototype.onRowDblClick=function(e){if(!Da(e)){var s=this.createRowEventWithSource($.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(s)}},i.prototype.onRowMouseDown=function(e){if(this.lastMouseDownOnDragger=Dl(e.target,"ag-row-drag",3),this.isFullWidth()){var s=this.rowNode;this.beans.focusService.setFocusedCell(s.rowIndex,this.beans.columnModel.getAllDisplayedColumns()[0],s.rowPinned,!0)}},i.prototype.onRowClick=function(e){if(!Da(e)&&!this.lastMouseDownOnDragger){var l=this.createRowEventWithSource($.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(l);var c=e.ctrlKey||e.metaKey,h=e.shiftKey;if(!(this.beans.gridOptionsWrapper.isGroupSelectsChildren()&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.beans.gridOptionsWrapper.isRowSelection()||this.beans.gridOptionsWrapper.isSuppressRowClickSelection())){var w=this.beans.gridOptionsWrapper.isRowMultiSelectWithClick(),R=!this.beans.gridOptionsWrapper.isSuppressRowDeselection();this.rowNode.isSelected()?w?this.rowNode.setSelectedParams({newValue:!1}):c?R&&this.rowNode.setSelectedParams({newValue:!1}):this.rowNode.setSelectedParams({newValue:!h,clearSelection:!h,rangeSelect:h}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!w&&!c,rangeSelect:h})}}},i.prototype.setupDetailRowAutoHeight=function(e){var s=this;if(this.beans.gridOptionsWrapper.isDetailRowAutoHeight()){var l=function(){var m=e.clientHeight;null!=m&&m>0&&s.beans.frameworkOverrides.setTimeout(function(){s.rowNode.setRowHeight(m),s.beans.clientSideRowModel?s.beans.clientSideRowModel.onRowHeightChanged():s.beans.serverSideRowModel&&s.beans.serverSideRowModel.onRowHeightChanged()},0)},c=this.beans.resizeObserverService.observeResize(e,l);this.addDestroyFunc(c),l()}},i.prototype.createFullWidthParams=function(e,s){var l=this;return{fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,$scope:this.scope?this.scope:this.parentScope,$compile:this.beans.$compile,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),eGridCell:e,eParentOfValue:e,pinned:s,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:function(m,w,R,T){return l.addFullWidthRowDragging(m,w,R,T)}}},i.prototype.addFullWidthRowDragging=function(e,s,l,c){if(void 0===l&&(l=""),this.isFullWidth()){var h=new zl(function(){return l},this.rowNode,void 0,e,s,c);this.createManagedBean(h,this.beans.context)}},i.prototype.onUiLevelChanged=function(){var e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){var s="ag-row-level-"+e,l="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(function(c){c.rowComp.addOrRemoveCssClass(s,!0),c.rowComp.addOrRemoveCssClass(l,!1)})}this.rowLevel=e},i.prototype.isFirstRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()},i.prototype.isLastRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()},i.prototype.onModelUpdated=function(){var e=this.isFirstRowOnPage(),s=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass("ag-row-first",e)})),this.lastRowOnPage!==s&&(this.lastRowOnPage=s,this.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass("ag-row-last",s)}))},i.prototype.stopEditing=function(e){if(void 0===e&&(e=!1),this.getAllCellCtrls().forEach(function(l){return l.stopEditing(e)}),this.editingRow){if(!e){var s=this.createRowEvent($.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(s)}this.setEditingRow(!1)}},i.prototype.setInlineEditingCss=function(e){this.allRowGuis.forEach(function(s){s.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),s.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})},i.prototype.setEditingRow=function(e){this.editingRow=e,this.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass("ag-row-editing",e)});var s=this.createRowEvent(e?$.EVENT_ROW_EDITING_STARTED:$.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(s)},i.prototype.startRowEditing=function(e,s,l){void 0===e&&(e=null),void 0===s&&(s=null),void 0===l&&(l=null),!this.editingRow&&(this.getAllCellCtrls().forEach(function(c){var h=c===l;h?c.startEditing(e,s,h):c.startEditing(null,null,h)}),this.setEditingRow(!0))},i.prototype.getAllCellCtrls=function(){var e=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s}(this.centerCellCtrls.list,this.leftCellCtrls.list,this.rightCellCtrls.list);return e},i.prototype.postProcessClassesFromGridOptions=function(){var e=this,s=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode,this.scope);!s||!s.length||s.forEach(function(l){e.allRowGuis.forEach(function(c){return c.rowComp.addOrRemoveCssClass(l,!0)})})},i.prototype.postProcessRowClassRules=function(){var e=this;this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,this.scope,function(s){e.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass(s,!0)})},function(s){e.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass(s,!1)})})},i.prototype.setStylesFromGridOptions=function(){var e=this.processStylesFromGridOptions();this.allRowGuis.forEach(function(s){return s.rowComp.setUserStyles(e)})},i.prototype.getRowBusinessKey=function(){var e=this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc();if("function"==typeof e)return e(this.rowNode)},i.prototype.getInitialRowClasses=function(e){var s={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeRowIn,rowIsEven:this.rowNode.rowIndex%2==0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),scope:this.scope,pinned:e};return this.beans.rowCssClassCalculator.getInitialRowClasses(s)},i.prototype.processStylesFromGridOptions=function(){var e=this.beans.gridOptionsWrapper.getRowStyle();if(!e||"function"!=typeof e){var l,s=this.beans.gridOptionsWrapper.getRowStyleFunc();return s&&(l=s({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,$scope:this.scope,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()})),ii({},e,l)}console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead")},i.prototype.onRowSelected=function(){var e=this,s=this.rowNode.isSelected();this.allRowGuis.forEach(function(l){l.rowComp.setAriaSelected(!!s||void 0),l.rowComp.addOrRemoveCssClass("ag-row-selected",s),l.rowComp.setAriaLabel(e.createAriaLabel())})},i.prototype.createAriaLabel=function(){var e=this.rowNode.isSelected();if(!e||!this.beans.gridOptionsWrapper.isSuppressRowDeselection())return this.beans.gridOptionsWrapper.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect","Press SPACE to "+(e?"deselect":"select")+" this row.")},i.prototype.isUseAnimationFrameForCreate=function(){return this.useAnimationFrameForCreate},i.prototype.addHoverFunctionality=function(e){var s=this;!this.active||(this.addManagedListener(e,"mouseenter",function(){return s.rowNode.onMouseEnter()}),this.addManagedListener(e,"mouseleave",function(){return s.rowNode.onMouseLeave()}),this.addManagedListener(this.rowNode,ln.EVENT_MOUSE_ENTER,function(){s.beans.gridOptionsWrapper.isSuppressRowHoverHighlight()||Dt(e,"ag-row-hover")}),this.addManagedListener(this.rowNode,ln.EVENT_MOUSE_LEAVE,function(){yi(e,"ag-row-hover")}))},i.prototype.roundRowTopToBounds=function(e){var l=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),c=this.applyPaginationOffset(l.top,!0)-100,h=this.applyPaginationOffset(l.bottom,!0)+100;return Math.min(Math.max(c,e),h)},i.prototype.getFrameworkOverrides=function(){return this.beans.frameworkOverrides},i.prototype.onRowHeightChanged=function(){if(Fe(this.rowNode.rowHeight)){var e=this.rowNode.rowHeight+"px";this.allRowGuis.forEach(function(s){return s.rowComp.setHeight(e)})}},i.prototype.addEventListener=function(e,s){("renderedRowRemoved"===e||"rowRemoved"===e)&&(e=$.EVENT_VIRTUAL_ROW_REMOVED,console.warn("AG Grid: Since version 11, event renderedRowRemoved is now called "+$.EVENT_VIRTUAL_ROW_REMOVED)),d.prototype.addEventListener.call(this,e,s)},i.prototype.removeEventListener=function(e,s){("renderedRowRemoved"===e||"rowRemoved"===e)&&(e=$.EVENT_VIRTUAL_ROW_REMOVED,console.warn("AG Grid: Since version 11, event renderedRowRemoved and rowRemoved is now called "+$.EVENT_VIRTUAL_ROW_REMOVED)),d.prototype.removeEventListener.call(this,e,s)},i.prototype.destroyFirstPass=function(){this.active=!1,this.setupRemoveAnimation();var e=this.createRowEvent($.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(e),this.beans.eventService.dispatchEvent(e),d.prototype.destroy.call(this)},i.prototype.setupRemoveAnimation=function(){if(null!=this.rowNode.rowTop){var s=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)})},i.prototype.destroySecondPass=function(){this.allRowGuis.length=0;var e=function(l){return l.list.forEach(function(c){return c.destroy()}),{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)},i.prototype.setFocusedClasses=function(){var e=this;this.allRowGuis.forEach(function(s){s.rowComp.addOrRemoveCssClass("ag-row-focus",e.rowFocused),s.rowComp.addOrRemoveCssClass("ag-row-no-focus",!e.rowFocused)})},i.prototype.onCellFocusChanged=function(){var e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)},i.prototype.onPaginationChanged=function(){var e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged())},i.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},i.prototype.onPaginationPixelOffsetChanged=function(){this.onTopChanged()},i.prototype.applyPaginationOffset=function(e,s){return void 0===s&&(s=!1),this.rowNode.isRowPinned()?e:e+this.beans.paginationProxy.getPixelOffset()*(s?1:-1)},i.prototype.setRowTop=function(e){if(!this.printLayout&&Fe(e)){var s=this.applyPaginationOffset(e),l=this.rowNode.isRowPinned()?s:this.beans.rowContainerHeightService.getRealPixelPosition(s);this.setRowTopStyle(l+"px")}},i.prototype.getInitialRowTop=function(){return this.initialTop},i.prototype.getInitialTransform=function(){return this.initialTransform},i.prototype.setInitialRowTop=function(){if(this.printLayout)return"";var e=this.slideRowIn?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,s=this.applyPaginationOffset(e),c=(this.rowNode.isRowPinned()?s:this.beans.rowContainerHeightService.getRealPixelPosition(s))+"px";this.beans.gridOptionsWrapper.isSuppressRowTransform()?this.initialTop=c:this.initialTransform="translateY("+c+")"},i.prototype.setRowTopStyle=function(e){var s=this.beans.gridOptionsWrapper.isSuppressRowTransform();this.allRowGuis.forEach(function(l){return s?l.rowComp.setTop(e):l.rowComp.setTransform("translateY("+e+")")})},i.prototype.getRowNode=function(){return this.rowNode},i.prototype.getCellCtrl=function(e){var s=null;return this.getAllCellCtrls().forEach(function(l){l.getColumn()==e&&(s=l)}),null!=s||this.getAllCellCtrls().forEach(function(l){l.getColSpanningList().indexOf(e)>=0&&(s=l)}),s},i.prototype.onRowIndexChanged=function(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes())},i.prototype.updateRowIndexes=function(){var e=this,s=this.rowNode.getRowIndexString(),l=this.beans.headerNavigationService.getHeaderRowCount(),c=this.rowNode.rowIndex%2==0;this.allRowGuis.forEach(function(h){h.rowComp.setRowIndex(s),h.rowComp.setAriaRowIndex(l+e.rowNode.rowIndex+1),h.rowComp.addOrRemoveCssClass("ag-row-even",c),h.rowComp.addOrRemoveCssClass("ag-row-odd",!c)})},i.prototype.getPinnedLeftRowElement=function(){return this.leftGui?this.leftGui.element:void 0},i.prototype.getPinnedRightRowElement=function(){return this.rightGui?this.rightGui.element:void 0},i.prototype.getBodyRowElement=function(){return this.centerGui?this.centerGui.element:void 0},i.prototype.getFullWidthRowElement=function(){return this.fullWidthGui?this.fullWidthGui.element:void 0},i.DOM_DATA_KEY_ROW_CTRL="renderedRow",i}(Ke),tx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Do=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},bC=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s},nx=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.destroyFuncsForColumnListeners=[],e.rowCtrlsByRowIndex={},e.zombieRowCtrls={},e.allRowCtrls=[],e.topRowCtrls=[],e.bottomRowCtrls=[],e.refreshInProgress=!1,e}return tx(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl(),e.initialise()})},i.prototype.initialise=function(){this.addManagedListener(this.eventService,$.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,$.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_BODY_SCROLL,this.redrawAfterScroll.bind(this)),this.addManagedListener(this.eventService,$.EVENT_BODY_HEIGHT_CHANGED,this.redrawAfterScroll.bind(this)),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,this.onDomLayoutChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_PRINT,this.embedFullWidthRows=this.printLayout||this.gridOptionsWrapper.isEmbedFullWidthRows(),this.redrawAfterModelUpdate()},i.prototype.initialiseCache=function(){if(this.gridOptionsWrapper.isKeepDetailRows()){var e=this.gridOptionsWrapper.getKeepDetailRowsCount();this.cachedRowCtrls=new rx(null!=e?e:3)}},i.prototype.getRowCtrls=function(){return this.allRowCtrls},i.prototype.updateAllRowCtrls=function(){var e=Ta(this.rowCtrlsByRowIndex);this.beans.gridOptionsWrapper.isEnsureDomOrder()&&e.sort(function(c,h){return c.getRowNode().rowIndex-h.getRowNode.rowIndex});var s=Ta(this.zombieRowCtrls),l=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];this.allRowCtrls=bC(e,s,l)},i.prototype.registerCellEventListeners=function(){var e=this;this.addManagedListener(this.eventService,$.EVENT_CELL_FOCUSED,function(l){e.getAllCellCtrls().forEach(function(c){return c.onCellFocused(l)}),e.getAllRowCtrls().forEach(function(c){c.isFullWidth()&&c.onFullWidthRowFocused(l)})}),this.addManagedListener(this.eventService,$.EVENT_FLASH_CELLS,function(l){e.getAllCellCtrls().forEach(function(c){return c.onFlashCells(l)})}),this.addManagedListener(this.eventService,$.EVENT_COLUMN_HOVER_CHANGED,function(){e.getAllCellCtrls().forEach(function(l){return l.onColumnHover()})}),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){e.printLayout&&e.getAllCellCtrls().forEach(function(l){return l.onLeftChanged()})}),this.gridOptionsWrapper.isEnableRangeSelection()&&(this.addManagedListener(this.eventService,$.EVENT_RANGE_SELECTION_CHANGED,function(){e.getAllCellCtrls().forEach(function(l){return l.onRangeSelectionChanged()})}),this.addManagedListener(this.eventService,$.EVENT_COLUMN_MOVED,function(){e.getAllCellCtrls().forEach(function(l){return l.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PINNED,function(){e.getAllCellCtrls().forEach(function(l){return l.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VISIBLE,function(){e.getAllCellCtrls().forEach(function(l){return l.updateRangeBordersIfRangeCount()})})),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,$.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))},i.prototype.removeGridColumnListeners=function(){this.destroyFuncsForColumnListeners.forEach(function(e){return e()}),this.destroyFuncsForColumnListeners.length=0},i.prototype.refreshListenersToColumnsForCellComps=function(){var e=this;this.removeGridColumnListeners();var s=this.columnModel.getAllGridColumns();!s||s.forEach(function(l){var c=function(L){e.getAllCellCtrls().forEach(function(U){U.getColumn()===l&&L(U)})},h=function(){c(function(L){return L.onLeftChanged()})},m=function(){c(function(L){return L.onWidthChanged()})},w=function(){c(function(L){return L.onFirstRightPinnedChanged()})},R=function(){c(function(L){return L.onLastLeftPinnedChanged()})};l.addEventListener(Mn.EVENT_LEFT_CHANGED,h),l.addEventListener(Mn.EVENT_WIDTH_CHANGED,m),l.addEventListener(Mn.EVENT_FIRST_RIGHT_PINNED_CHANGED,w),l.addEventListener(Mn.EVENT_LAST_LEFT_PINNED_CHANGED,R),e.destroyFuncsForColumnListeners.push(function(){l.removeEventListener(Mn.EVENT_LEFT_CHANGED,h),l.removeEventListener(Mn.EVENT_WIDTH_CHANGED,m),l.removeEventListener(Mn.EVENT_FIRST_RIGHT_PINNED_CHANGED,w),l.removeEventListener(Mn.EVENT_LAST_LEFT_PINNED_CHANGED,R)})})},i.prototype.onDomLayoutChanged=function(){var e=this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_PRINT,s=e||this.gridOptionsWrapper.isEmbedFullWidthRows(),l=s!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=s,l&&this.redrawAfterModelUpdate()},i.prototype.datasourceChanged=function(){this.firstRenderedRow=0,this.lastRenderedRow=-1;var e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)},i.prototype.onPageLoaded=function(e){this.redrawAfterModelUpdate({recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0})},i.prototype.getAllCellsForColumn=function(e){var s=[];return this.getAllRowCtrls().forEach(function(l){var c=l.getCellElement(e);c&&s.push(c)}),s},i.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())},i.prototype.getTopRowCtrls=function(){return this.topRowCtrls},i.prototype.getBottomRowCtrls=function(){return this.bottomRowCtrls},i.prototype.refreshFloatingRows=function(e,s){var l=this;e.forEach(function(c){c.destroyFirstPass(),c.destroySecondPass()}),e.length=0,s&&s.forEach(function(c){var h=new ou(l.$scope,c,l.beans,!1,!1,l.printLayout);e.push(h)})},i.prototype.onPinnedRowDataChanged=function(){this.redrawAfterModelUpdate({recycleRows:!0})},i.prototype.getRenderedIndexesForRowNodes=function(e){var s=[];return Ce(e)||Fn(this.rowCtrlsByRowIndex,function(l,c){var h=c.getRowNode();e.indexOf(h)>=0&&s.push(l)}),s},i.prototype.redrawRows=function(e){var s=null!=e&&e.length>0;if(s){var l=this.getRenderedIndexesForRowNodes(e);this.removeRowCtrls(l)}this.redrawAfterModelUpdate({recycleRows:s})},i.prototype.getCellToRestoreFocusToAfterRefresh=function(e){var s=e.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==s)return null;var l=document.activeElement,c=this.gridOptionsWrapper.getDomData(l,Zi.DOM_DATA_KEY_CELL_CTRL),h=this.gridOptionsWrapper.getDomData(l,ou.DOM_DATA_KEY_ROW_CTRL);return c||h?s:null},i.prototype.redrawAfterModelUpdate=function(e){void 0===e&&(e={}),this.getLockOnRefresh();var s=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);var l=!this.printLayout&&!!e.recycleRows,c=e.animate&&this.gridOptionsWrapper.isAnimateRows(),h=l?this.recycleRows():null;l||this.removeAllRowComps();var w=function(){if(null==s||null==h)return!1;var T=!1;return Fn(h,function(L,U){var K=U.getRowNode();K.rowIndex==s.rowIndex&&K.rowPinned==s.rowPinned&&(T=!0)}),T}();this.redraw(h,c),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),w||this.restoreFocusedCell(s),this.releaseLockOnRefresh()},i.prototype.scrollToTopIfNewData=function(e){var s=e.newData||e.newPage,l=this.gridOptionsWrapper.isSuppressScrollOnNewData();s&&!l&&this.gridBodyCtrl.getScrollFeature().scrollToTop()},i.prototype.updateContainerHeights=function(){if(this.printLayout)this.rowContainerHeightService.setModelHeight(null);else{var e=this.paginationProxy.getCurrentPageHeight();0===e&&(e=1),this.rowContainerHeightService.setModelHeight(e)}},i.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.refreshView(), call setTimeout(function() { api.refreshView(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},i.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},i.prototype.restoreFocusedCell=function(e){e&&this.focusService.setFocusedCell(e.rowIndex,e.column,e.rowPinned,!0)},i.prototype.stopEditing=function(e){void 0===e&&(e=!1),this.getAllRowCtrls().forEach(function(s){s.stopEditing(e)})},i.prototype.onNewColumnsLoaded=function(){this.getAllCellCtrls().forEach(function(e){return e.onNewColumnsLoaded()})},i.prototype.getAllCellCtrls=function(){var e=[];return this.getAllRowCtrls().forEach(function(s){return e=e.concat(s.getAllCellCtrls())}),e},i.prototype.getAllRowCtrls=function(){var e=this,s=bC(this.topRowCtrls,this.bottomRowCtrls);return Object.keys(this.rowCtrlsByRowIndex).forEach(function(l){return s.push(e.rowCtrlsByRowIndex[l])}),s},i.prototype.addRenderedRowListener=function(e,s,l){var c=this.rowCtrlsByRowIndex[s];c&&c.addEventListener(e,l)},i.prototype.flashCells=function(e){void 0===e&&(e={});var s=e.flashDelay,l=e.fadeDelay;this.getCellCtrls(e.rowNodes,e.columns).forEach(function(c){return c.flashCell({flashDelay:s,fadeDelay:l})})},i.prototype.refreshCells=function(e){void 0===e&&(e={});var s={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach(function(l){if(l.refreshShouldDestroy()){var c=l.getRowCtrl();c&&c.refreshCell(l)}else l.refreshCell(s)})},i.prototype.getCellRendererInstances=function(e){return this.getCellCtrls(e.rowNodes,e.columns).map(function(l){return l.getCellRenderer()}).filter(function(l){return null!=l})},i.prototype.getCellEditorInstances=function(e){var s=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(function(l){var c=l.getCellEditor();c&&s.push(c)}),s},i.prototype.getEditingCells=function(){var e=[];return this.getAllCellCtrls().forEach(function(s){if(s.isEditing()){var l=s.getCellPosition();e.push(l)}}),e},i.prototype.getCellCtrls=function(e,s){var c,m,l=this,h=[];Fe(e)&&(c={top:{},bottom:{},normal:{}},e.forEach(function(R){var T=R.id;R.rowPinned===fe.PINNED_TOP?c.top[T]=!0:R.rowPinned===fe.PINNED_BOTTOM?c.bottom[T]=!0:c.normal[T]=!0})),Fe(s)&&(m={},s.forEach(function(R){var T=l.columnModel.getGridColumn(R);Fe(T)&&(m[T.getId()]=!0)}));var w=function(T){var L=T.getRowNode(),U=L.id,K=L.rowPinned;if(Fe(c))if(K===fe.PINNED_BOTTOM){if(!c.bottom[U])return}else if(K===fe.PINNED_TOP){if(!c.top[U])return}else if(!c.normal[U])return;T.getAllCellCtrls().forEach(function(Q){var oe=Q.getColumn().getId();m&&!m[oe]||h.push(Q)})};return Fn(this.rowCtrlsByRowIndex,function(R,T){w(T)}),this.topRowCtrls&&this.topRowCtrls.forEach(w),this.bottomRowCtrls&&this.bottomRowCtrls.forEach(w),h},i.prototype.destroy=function(){this.removeAllRowComps(),d.prototype.destroy.call(this)},i.prototype.removeAllRowComps=function(){var e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)},i.prototype.recycleRows=function(){var e=[];Fn(this.rowCtrlsByRowIndex,function(l,c){null==c.getRowNode().id&&e.push(l)}),this.removeRowCtrls(e);var s={};return Fn(this.rowCtrlsByRowIndex,function(l,c){var h=c.getRowNode();s[h.id]=c}),this.rowCtrlsByRowIndex={},s},i.prototype.removeRowCtrls=function(e){var s=this;e.forEach(function(l){var c=s.rowCtrlsByRowIndex[l];c&&(c.destroyFirstPass(),c.destroySecondPass()),delete s.rowCtrlsByRowIndex[l]})},i.prototype.redrawAfterScroll=function(){this.getLockOnRefresh(),this.redraw(null,!1,!0),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged()},i.prototype.removeRowCompsNotToDraw=function(e){var s={};e.forEach(function(h){return s[h]=!0});var c=Object.keys(this.rowCtrlsByRowIndex).filter(function(h){return!s[h]});this.removeRowCtrls(c)},i.prototype.calculateIndexesToDraw=function(e){var s=this,l=GE(this.firstRenderedRow,this.lastRenderedRow),c=function(m,w){var R=w.getRowNode().rowIndex;null!=R&&(R<s.firstRenderedRow||R>s.lastRenderedRow)&&s.doNotUnVirtualiseRow(w)&&l.push(R)};return Fn(this.rowCtrlsByRowIndex,c),Fn(e,c),l.sort(function(h,m){return h-m}),l},i.prototype.redraw=function(e,s,l){var c=this;void 0===s&&(s=!1),void 0===l&&(l=!1),this.rowContainerHeightService.updateOffset(),this.workOutFirstAndLastRowsToRender();var h=this.calculateIndexesToDraw(e);this.removeRowCompsNotToDraw(h),this.printLayout&&(s=!1),h.forEach(function(w){Fe(c.createOrUpdateRowCtrl(w,e,s,l))}),e&&(!l||this.gridOptionsWrapper.isSuppressAnimationFrame()||this.printLayout?this.destroyRowCtrls(e,s):this.beans.animationFrameService.addDestroyTask(function(){c.destroyRowCtrls(e,s),c.updateAllRowCtrls(),c.dispatchDisplayedRowsChanged()})),this.updateAllRowCtrls(),this.checkAngularCompile(),this.gridBodyCtrl.updateRowCount()},i.prototype.dispatchDisplayedRowsChanged=function(){this.eventService.dispatchEvent({type:$.EVENT_DISPLAYED_ROWS_CHANGED})},i.prototype.onDisplayedColumnsChanged=function(){var e=this.columnModel.isPinningLeft(),s=this.columnModel.isPinningRight();(this.pinningLeft!==e||s!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=s,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())},i.prototype.redrawFullWidthEmbeddedRows=function(){var e=[];Fn(this.rowCtrlsByRowIndex,function(s,l){if(l.isFullWidth()){var c=l.getRowNode().rowIndex;e.push(c.toString())}}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redrawAfterScroll()},i.prototype.refreshFullWidthRows=function(e){var s=[],l=!!e,c=l?{}:void 0;l&&c&&e.forEach(function(h){return c[h.id]=!0}),Fn(this.rowCtrlsByRowIndex,function(h,m){if(m.isFullWidth()){var w=m.getRowNode();if(l&&c&&!c[w.id]&&!c[w.level>0&&w.parent?w.parent.id:void 0])return;if(!m.refreshFullWidth()){var U=m.getRowNode().rowIndex;s.push(U.toString())}}}),this.removeRowCtrls(s),this.redrawAfterScroll()},i.prototype.createOrUpdateRowCtrl=function(e,s,l,c){var h,m=this.rowCtrlsByRowIndex[e];if(m||Fe(h=this.paginationProxy.getRow(e))&&Fe(s)&&s[h.id]&&h.alreadyRendered&&(m=s[h.id],s[h.id]=null),!m){if(h||(h=this.paginationProxy.getRow(e)),!Fe(h))return;m=this.createRowCon(h,l,c)}return h&&(h.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=m,m},i.prototype.destroyRowCtrls=function(e,s){var l=this,c=[];Fn(e,function(h,m){if(m){if(l.cachedRowCtrls&&m.isCacheable())return void l.cachedRowCtrls.addRow(m);m.destroyFirstPass(),s?(l.zombieRowCtrls[m.getInstanceId()]=m,c.push(function(){m.destroySecondPass(),delete l.zombieRowCtrls[m.getInstanceId()]})):m.destroySecondPass()}}),s&&(c.push(function(){l.updateAllRowCtrls(),l.dispatchDisplayedRowsChanged()}),If(c))},i.prototype.checkAngularCompile=function(){var e=this;this.gridOptionsWrapper.isAngularCompileRows()&&window.setTimeout(function(){e.$scope.$apply()},0)},i.prototype.workOutFirstAndLastRowsToRender=function(){var s,l,e=this;if(this.paginationProxy.isRowsToRender())if(this.printLayout)s=this.paginationProxy.getPageFirstRow(),l=this.paginationProxy.getPageLastRow();else{var c=this.gridOptionsWrapper.getRowBufferInPixels(),h=this.ctrlsService.getGridBodyCtrl(),m=!1,w=void 0,R=void 0;do{var T=this.paginationProxy.getPixelOffset(),L=this.paginationProxy.getCurrentPagePixelRange(),U=L.pageFirstPixel,K=L.pageLastPixel,Q=this.rowContainerHeightService.getDivStretchOffset(),oe=h.getScrollFeature().getVScrollPosition(),He=oe.bottom;w=Math.max(oe.top+T-c,U)+Q,R=Math.min(He+T+c,K)+Q,m=this.ensureAllRowsInRangeHaveHeightsCalculated(w,R)}while(m);var Ve=this.paginationProxy.getRowIndexAtPixel(w),Pe=this.paginationProxy.getRowIndexAtPixel(R),Ze=this.paginationProxy.getPageFirstRow(),Re=this.paginationProxy.getPageLastRow();Ve<Ze&&(Ve=Ze),Pe>Re&&(Pe=Re),s=Ve,l=Pe}else s=0,l=-1;var an=this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_NORMAL,Gt=this.gridOptionsWrapper.isSuppressMaxRenderedRowRestriction(),mn=Math.max(this.gridOptionsWrapper.getRowBuffer(),500);if(an&&!Gt&&l-s>mn&&(l=s+mn),(s!==this.firstRenderedRow||l!==this.lastRenderedRow)&&(this.firstRenderedRow=s,this.lastRenderedRow=l,this.eventService.dispatchEvent({type:$.EVENT_VIEWPORT_CHANGED,firstRow:s,lastRow:l,api:this.gridApi,columnApi:this.columnApi})),this.paginationProxy.isRowsToRender()){var lr={type:$.EVENT_FIRST_DATA_RENDERED,firstRow:s,lastRow:l,api:this.gridApi,columnApi:this.columnApi};window.setTimeout(function(){return e.eventService.dispatchEventOnce(lr)},50)}},i.prototype.ensureAllRowsInRangeHaveHeightsCalculated=function(e,s){var l=this.paginationProxy.ensureRowHeightsValid(e,s,-1,-1);return l&&this.updateContainerHeights(),l},i.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},i.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},i.prototype.doNotUnVirtualiseRow=function(e){var c=e.getRowNode(),h=this.focusService.isRowNodeFocused(c),m=e.isEditing();return!!(h||m||c.detail)&&!!this.paginationProxy.isRowPresent(c)},i.prototype.createRowCon=function(e,s,l){var c=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(c)return c;var h=this.gridOptionsWrapper.isSuppressAnimationFrame();return new ou(this.$scope,e,this.beans,s,l&&!h&&!this.printLayout,this.printLayout)},i.prototype.getRenderedNodes=function(){var e=this.rowCtrlsByRowIndex;return Object.keys(e).map(function(s){return e[s].getRowNode()})},i.prototype.getRowByPosition=function(e){var s;switch(e.rowPinned){case fe.PINNED_TOP:s=this.topRowCtrls[e.rowIndex];break;case fe.PINNED_BOTTOM:s=this.bottomRowCtrls[e.rowIndex];break;default:s=this.rowCtrlsByRowIndex[e.rowIndex]}return s},i.prototype.getRowNode=function(e){switch(e.rowPinned){case fe.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case fe.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},i.prototype.isRangeInRenderedViewport=function(e,s){return!(null==e||null==s||s<this.firstRenderedRow||e>this.lastRenderedRow)},Do([H("paginationProxy")],i.prototype,"paginationProxy",void 0),Do([H("columnModel")],i.prototype,"columnModel",void 0),Do([H("$scope")],i.prototype,"$scope",void 0),Do([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Do([H("rowModel")],i.prototype,"rowModel",void 0),Do([H("focusService")],i.prototype,"focusService",void 0),Do([H("columnApi")],i.prototype,"columnApi",void 0),Do([H("gridApi")],i.prototype,"gridApi",void 0),Do([H("beans")],i.prototype,"beans",void 0),Do([H("rowContainerHeightService")],i.prototype,"rowContainerHeightService",void 0),Do([Nn("ctrlsService")],i.prototype,"ctrlsService",void 0),Do([Qe],i.prototype,"postConstruct",null),Do([vt("rowRenderer")],i)}(Ke),rx=function(){function d(i){this.entriesMap={},this.entriesList=[],this.maxCount=i}return d.prototype.toString=function(){return this.entriesList.map(function(i){return i.getRowNode().data.name}).join(", ")},d.prototype.addRow=function(i){if(this.entriesMap[i.getRowNode().id]=i,this.entriesList.push(i),i.setCached(!0),this.entriesList.length>this.maxCount){var e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}},d.prototype.getRow=function(i){if(null==i||null==i.id)return null;var e=this.entriesMap[i.id];return e?(this.removeFromCache(e),e.setCached(!1),e.getRowNode()!=i?null:e):null},d.prototype.removeFromCache=function(i){var e=i.getRowNode().id;delete this.entriesMap[e],ri(this.entriesList,i)},d.prototype.getEntries=function(){return this.entriesList},d}(),_p=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Cp=function(d){function i(e,s){var l=d.call(this,e)||this;return l.ctrl=s,l}return _p(i,d),i.prototype.getCtrl=function(){return this.ctrl},i}(pn),za=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Uu=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},xC=function(d){function i(e){var s=d.call(this,i.TEMPLATE,e)||this;return s.headerCompVersion=0,s.column=e.getColumnGroupChild(),s.pinned=e.getPinned(),s}return za(i,d),i.prototype.postConstruct=function(){var e=this,s=this.getGui(),l=function(w,R,T){var L=T||s;null!=R&&""!=R?L.setAttribute(w,R):L.removeAttribute(w)};this.ctrl.setComp({setWidth:function(w){return s.style.width=w},addOrRemoveCssClass:function(w,R){return e.addOrRemoveCssClass(w,R)},setAriaSort:function(w){return w?ib(s,w):ob(s)},setColId:function(w){return l("col-id",w)},setTitle:function(w){return l("title",w)},setAriaDescribedBy:function(w){return ho(s,w)},setUserCompDetails:function(w){return e.setUserCompDetails(w)},getUserCompInstance:function(){return e.headerComp}},this.getGui(),this.eResize);var h=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",h)},i.prototype.destroyHeaderComp=function(){this.headerComp&&(this.getGui().removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)},i.prototype.setUserCompDetails=function(e){var s=this;this.headerCompVersion++;var l=this.headerCompVersion;e.newAgStackInstance().then(function(c){return s.afterCompCreated(l,c)})},i.prototype.afterCompCreated=function(e,s){e==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=s,this.headerCompGui=s.getGui(),this.getGui().appendChild(this.headerCompGui),this.ctrl.setDragSource(this.headerCompGui)):this.destroyBean(s)},i.TEMPLATE='<div class="ag-header-cell" role="columnheader" unselectable="on" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',Uu([Be("eResize")],i.prototype,"eResize",void 0),Uu([Qe],i.prototype,"postConstruct",null),Uu([Fi],i.prototype,"destroyHeaderComp",null),i}(Cp),RC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),wp=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ix=function(d){function i(e){return d.call(this,i.TEMPLATE,e)||this}return RC(i,d),i.prototype.postConstruct=function(){var e=this,s=this.getGui(),l=function(m,w){return null!=w?s.setAttribute(m,w):s.removeAttribute(m)};this.ctrl.setComp({addOrRemoveCssClass:function(m,w){return e.addOrRemoveCssClass(m,w)},addOrRemoveResizableCssClass:function(m,w){return Ft(e.eResize,m,w)},setWidth:function(m){return s.style.width=m},setColId:function(m){return s.setAttribute("col-id",m)},setAriaExpanded:function(m){return l("aria-expanded",m)},setTitle:function(m){return l("title",m)},setUserCompDetails:function(m){return e.setUserCompDetails(m)}},s,this.eResize)},i.prototype.setUserCompDetails=function(e){var s=this;e.newAgStackInstance().then(function(l){return s.afterHeaderCompCreated(l)})},i.prototype.afterHeaderCompCreated=function(e){var s=this,l=function(){return s.destroyBean(e)};this.isAlive()?(this.getGui().appendChild(e.getGui()),this.addDestroyFunc(l),this.ctrl.setDragSource(e.getGui())):l()},i.TEMPLATE='<div class="ag-header-group-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',wp([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),wp([Be("eResize")],i.prototype,"eResize",void 0),wp([Qe],i.prototype,"postConstruct",null),i}(Cp),ox=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Sp=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ep=function(d){function i(e){return d.call(this,i.TEMPLATE,e)||this}return ox(i,d),i.prototype.postConstruct=function(){var e=this,s=this.getGui();this.ctrl.setComp({addOrRemoveCssClass:function(h,m){return e.addOrRemoveCssClass(h,m)},addOrRemoveBodyCssClass:function(h,m){return Ft(e.eFloatingFilterBody,h,m)},addOrRemoveButtonWrapperCssClass:function(h,m){return Ft(e.eButtonWrapper,h,m)},setCompDetails:function(h){return e.setCompDetails(h)},getFloatingFilterComp:function(){return e.compPromise},setWidth:function(h){return s.style.width=h},setMenuIcon:function(h){return e.eButtonShowMainFilter.appendChild(h)}},s,this.eButtonShowMainFilter,this.eFloatingFilterBody)},i.prototype.setCompDetails=function(e){var s=this;this.compPromise=e.newAgStackInstance(),this.compPromise.then(function(l){return s.afterCompCreated(l)})},i.prototype.afterCompCreated=function(e){var s=this;!e||(this.addDestroyFunc(function(){return s.context.destroyBean(e)}),this.isAlive()&&(this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()))},i.TEMPLATE='<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">\n            <div ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">\n                <button type="button" aria-label="Open Filter Menu" class="ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',Sp([Be("eFloatingFilterBody")],i.prototype,"eFloatingFilterBody",void 0),Sp([Be("eButtonWrapper")],i.prototype,"eButtonWrapper",void 0),Sp([Be("eButtonShowMainFilter")],i.prototype,"eButtonShowMainFilter",void 0),Sp([Qe],i.prototype,"postConstruct",null),i}(Cp),Dg=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),bp=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};!function(d){d.COLUMN_GROUP="group",d.COLUMN="column",d.FLOATING_FILTER="filter"}(Y.A6C||(Y.A6C={}));var TC=function(d){function i(e){var s=d.call(this)||this;s.headerComps={};var l=e.getType()==Y.A6C.COLUMN_GROUP?"ag-header-row-column-group":e.getType()==Y.A6C.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";return s.setTemplate('<div class="ag-header-row '+l+'" role="row"></div>'),s.ctrl=e,s}return Dg(i,d),i.prototype.init=function(){var e=this;this.ctrl.setComp({setTransform:function(c){return e.getGui().style.transform=c},setHeight:function(c){return e.getGui().style.height=c},setTop:function(c){return e.getGui().style.top=c},setHeaderCtrls:function(c){return e.setHeaderCtrls(c)},setWidth:function(c){return e.getGui().style.width=c},setAriaRowIndex:function(c){return P_(e.getGui(),c)}})},i.prototype.destroyHeaderCtrls=function(){this.setHeaderCtrls([])},i.prototype.setHeaderCtrls=function(e){var s=this;if(this.isAlive()){var l=this.headerComps;if(this.headerComps={},e.forEach(function(w){var R=w.getInstanceId(),T=l[R];delete l[R],null==T&&(T=s.createHeaderComp(w),s.getGui().appendChild(T.getGui())),s.headerComps[R]=T}),Fn(l,function(w,R){s.getGui().removeChild(R.getGui()),s.destroyBean(R)}),this.gridOptionsWrapper.isEnsureDomOrder()){var h=Ta(this.headerComps);h.sort(function(w,R){return w.getCtrl().getColumnGroupChild().getLeft()-R.getCtrl().getColumnGroupChild().getLeft()});var m=h.map(function(w){return w.getGui()});co(this.getGui(),m)}}},i.prototype.createHeaderComp=function(e){var s;switch(this.ctrl.getType()){case Y.A6C.COLUMN_GROUP:s=new ix(e);break;case Y.A6C.FLOATING_FILTER:s=new Ep(e);break;default:s=new xC(e)}return this.createBean(s),s.setParentComponent(this),s},bp([Qe],i.prototype,"init",null),bp([Fi],i.prototype,"destroyHeaderCtrls",null),i}(pn),ax=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),zu=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};!function(d){d[d.UP=0]="UP",d[d.DOWN=1]="DOWN",d[d.LEFT=2]="LEFT",d[d.RIGHT=3]="RIGHT"}(Y.Y8R||(Y.Y8R={}));var DC=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return ax(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(s){e.gridBodyCon=s.gridBodyCtrl})},i.prototype.getHeaderRowCount=function(){var e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0},i.prototype.getHeaderRowType=function(e){var s=this.ctrlsService.getHeaderRowContainerCtrl();if(s)return s.getRowType(e)},i.prototype.navigateVertically=function(e,s,l){if(s||(s=this.focusService.getFocusedHeader()),!s)return!1;var c=s.headerRowIndex,h=s.column,m=this.getHeaderRowCount(),w=e===Y.Y8R.UP,R=w?c-1:c+1,T=null,L=!1;R<0&&(R=0,T=h,L=!0),R>=m&&(R=-1);var U=this.getHeaderRowType(c);if(!L){if(U===Y.A6C.COLUMN_GROUP){var K=h;T=w?h.getParent():K.getDisplayedChildren()[0]}else U===Y.A6C.FLOATING_FILTER?T=h:(K=h,T=w?K.getParent():K);if(!T)return!1}return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:R,column:T},allowUserOverride:!0,event:l})},i.prototype.navigateHorizontally=function(e,s,l){void 0===s&&(s=!1);var w,R,c=this.focusService.getFocusedHeader();return(w=e===Y.Y8R.LEFT!==this.gridOptionsWrapper.isEnableRtl()?this.headerPositionUtils.findHeader(c,R="Before"):this.headerPositionUtils.findHeader(c,R="After"))?this.focusService.focusHeaderPosition({headerPosition:w,direction:R,fromTab:s,allowUserOverride:!0,event:l}):!s||this.focusNextHeaderRow(c,R,l)},i.prototype.focusNextHeaderRow=function(e,s,l){var c=e.headerRowIndex,h=null;return"Before"===s?c>0&&(h=this.headerPositionUtils.findColAtEdgeForHeaderRow(c-1,"end")):h=this.headerPositionUtils.findColAtEdgeForHeaderRow(c+1,"start"),this.focusService.focusHeaderPosition({headerPosition:h,direction:s,fromTab:!0,allowUserOverride:!0,event:l})},i.prototype.scrollToColumn=function(e,s){if(void 0===s&&(s="After"),!e.getPinned()){var l;if(e instanceof ai){var c=e.getDisplayedLeafColumns();l="Before"===s?zn(c):c[0]}else l=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(l),this.gridBodyCon.getScrollFeature().horizontallyScrollHeaderCenterAndFloatingCenter(),this.animationFrameService.flushAllFrames()}},zu([H("focusService")],i.prototype,"focusService",void 0),zu([H("headerPositionUtils")],i.prototype,"headerPositionUtils",void 0),zu([H("animationFrameService")],i.prototype,"animationFrameService",void 0),zu([H("ctrlsService")],i.prototype,"ctrlsService",void 0),zu([Qe],i.prototype,"postConstruct",null),zu([vt("headerNavigationService")],i)}(Ke),sx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),xp=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},AC=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return sx(i,d),i.prototype.setComp=function(e,s,l){this.comp=e,this.eGui=s,this.createManagedBean(new Ko(l,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)},i.prototype.setupHeaderHeight=function(){var e=this.setHeaderHeight.bind(this);e(),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_HEADER_HEIGHT,e),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_PIVOT_HEADER_HEIGHT,e),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_GROUP_HEADER_HEIGHT,e),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_PIVOT_GROUP_HEADER_HEIGHT,e),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_FLOATING_FILTERS_HEIGHT,e),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,e)},i.prototype.setHeaderHeight=function(){var m,w,R,s=this.columnModel,l=this.gridOptionsWrapper,c=0,h=s.getHeaderRowCount();s.isPivotMode()?(w=l.getPivotGroupHeaderHeight(),R=l.getPivotHeaderHeight()):(s.hasFloatingFilters()&&(h++,c=1),w=l.getGroupHeaderHeight(),R=l.getHeaderHeight());var U=h-(1+c);m=c*l.getFloatingFiltersHeight(),m+=U*w,this.comp.setHeightAndMinHeight((m+=R)+1+"px")},i.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)},i.prototype.onTabKeyDown=function(e){var s=this.gridOptionsWrapper.isEnableRtl();(this.headerNavigationService.navigateHorizontally(e.shiftKey!==s?Y.Y8R.LEFT:Y.Y8R.RIGHT,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()},i.prototype.handleKeyDown=function(e){var s=null;switch(e.keyCode){case $e.LEFT:s=Y.Y8R.LEFT;case $e.RIGHT:Fe(s)||(s=Y.Y8R.RIGHT),this.headerNavigationService.navigateHorizontally(s,!1,e);break;case $e.UP:s=Y.Y8R.UP;case $e.DOWN:Fe(s)||(s=Y.Y8R.DOWN),this.headerNavigationService.navigateVertically(s,null,e)&&e.preventDefault();break;default:return}},i.prototype.onFocusOut=function(e){var s=e.relatedTarget;!s&&this.eGui.contains(document.activeElement)||this.eGui.contains(s)||this.focusService.clearFocusedHeader()},xp([H("headerNavigationService")],i.prototype,"headerNavigationService",void 0),xp([H("focusService")],i.prototype,"focusService",void 0),xp([H("columnModel")],i.prototype,"columnModel",void 0),xp([H("ctrlsService")],i.prototype,"ctrlsService",void 0),i}(Ke),MC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),wd=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ag=function(d){function i(e){var s=d.call(this)||this;return s.callback=e,s}return MC(i,d),i.prototype.postConstruct=function(){var e=this.setWidth.bind(this);this.addManagedListener(this.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,e),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.setWidth()},i.prototype.setWidth=function(){var e=this.columnModel,s=this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_PRINT,l=e.getBodyContainerWidth(),c=e.getDisplayedColumnsLeftWidth(),h=e.getDisplayedColumnsRightWidth();this.callback(s?l+c+h:l)},wd([H("columnModel")],i.prototype,"columnModel",void 0),wd([Qe],i.prototype,"postConstruct",null),i}(Ke),ju=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},OC=function(){function d(i,e){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.pinned=i,this.eContainer=e,this.centerContainer=!Fe(i)}return d.prototype.init=function(){var i=this;this.ctrlsService.whenReady(function(){i.gridBodyCon=i.ctrlsService.getGridBodyCtrl()})},d.prototype.getIconName=function(){return this.pinned?Vi.ICON_PINNED:Vi.ICON_MOVE},d.prototype.onDragEnter=function(i){var e=i.dragItem.columns;if(i.dragSource.type===Y.rvo.ToolPanel)this.setColumnsVisible(e,!0,"uiColumnDragged");else{var l=i.dragItem.visibleState,c=(e||[]).filter(function(h){return l[h.getId()]});this.setColumnsVisible(c,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(i,!0)},d.prototype.onDragLeave=function(i){if(!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()&&!i.fromNudge){var s=i.dragSource.getDragItem();this.setColumnsVisible(s.columns,!1,"uiColumnDragged")}this.ensureIntervalCleared()},d.prototype.setColumnsVisible=function(i,e,s){if(void 0===s&&(s="api"),i){var l=i.filter(function(c){return!c.getColDef().lockVisible});this.columnModel.setColumnsVisible(l,e,s)}},d.prototype.setColumnsPinned=function(i,e,s){if(void 0===s&&(s="api"),i){var l=i.filter(function(c){return!c.getColDef().lockPinned});this.columnModel.setColumnsPinned(l,e,s)}},d.prototype.onDragStop=function(){this.ensureIntervalCleared()},d.prototype.normaliseX=function(i){return this.gridOptionsWrapper.isEnableRtl()&&(i=this.eContainer.clientWidth-i),this.centerContainer&&(i+=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),i},d.prototype.checkCenterForScrolling=function(i){if(this.centerContainer){var e=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),s=e+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsWrapper.isEnableRtl()?(this.needToMoveRight=i<e+50,this.needToMoveLeft=i>s-50):(this.needToMoveLeft=i<e+50,this.needToMoveRight=i>s-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},d.prototype.onDragging=function(i,e){var s=this;if(void 0===e&&(e=!1),this.lastDraggingEvent=i,!Ce(i.hDirection)){var l=this.normaliseX(i.x);e||this.checkCenterForScrolling(l);var c=this.normaliseDirection(i.hDirection),h=i.dragSource.type,m=i.dragSource.getDragItem().columns;m=m.filter(function(w){return!w.getColDef().lockPinned||w.getPinned()==s.pinned}),this.attemptMoveColumns(h,m,c,l,e)}},d.prototype.normaliseDirection=function(i){if(!this.gridOptionsWrapper.isEnableRtl())return i;switch(i){case Y.poj.Left:return Y.poj.Right;case Y.poj.Right:return Y.poj.Left;default:console.error("AG Grid: Unknown direction "+i)}},d.prototype.calculateOldIndex=function(i){var e=this.columnModel.getAllGridColumns(),s=Wc(i.map(function(w){return e.indexOf(w)})),l=s[0];return zn(s)-l!=s.length-1?null:l},d.prototype.attemptMoveColumns=function(i,e,s,l,c){var h=s===Y.poj.Left,m=s===Y.poj.Right,w=e.slice();this.columnModel.sortColumnsLikeGridColumns(w);var R=this.calculateValidMoves(w,m,l),T=this.calculateOldIndex(w);if(0!==R.length){var L=R[0],U=null!==T&&!c;if(i==Y.rvo.HeaderCell&&(U=null!==T),!U||!(h&&L>=T||m&&L<=T))for(var K=0;K<R.length;K++){var Q=R[K];if(this.columnModel.doesMovePassRules(w,Q))return void this.columnModel.moveColumns(w,Q,"uiColumnDragged")}}},d.prototype.calculateValidMoves=function(i,e,s){if(this.gridOptionsWrapper.isSuppressMovableColumns()||i.some(function(Gt){return Gt.getColDef().suppressMovable}))return[];var oe,c=this.columnModel.getDisplayedColumns(this.pinned),h=this.columnModel.getAllGridColumns(),m=c.filter(function(Gt){return xn(i,Gt)}),w=c.filter(function(Gt){return!xn(i,Gt)}),R=h.filter(function(Gt){return!xn(i,Gt)}),T=0,L=s;if(e){var U=0;m.forEach(function(Gt){return U+=Gt.getActualWidth()}),L-=U}if(L>0){for(var K=0;K<w.length&&!((L-=w[K].getActualWidth())<0);K++)T++;e&&T++}T>0?oe=R.indexOf(w[T-1])+1:-1===(oe=R.indexOf(w[0]))&&(oe=0);var He=[oe],Ve=function(mn,Xn){return mn-Xn};if(e){for(var Pe=oe+1,Ze=h.length-1;Pe<=Ze;)He.push(Pe),Pe++;He.sort(Ve)}else{Ze=h.length-1;for(var Re=h[Pe=oe];Pe<=Ze&&this.isColumnHidden(c,Re);)Pe++,He.push(Pe),Re=h[Pe];for(Pe=oe-1;Pe>=0;)He.push(Pe),Pe--;He.sort(Ve).reverse()}return He},d.prototype.isColumnHidden=function(i,e){return i.indexOf(e)<0},d.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.setGhostIcon(this.needToMoveLeft?Vi.ICON_LEFT:Vi.ICON_RIGHT,!0))},d.prototype.ensureIntervalCleared=function(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(Vi.ICON_MOVE))},d.prototype.moveInterval=function(){var i;this.intervalCount++,(i=10+5*this.intervalCount)>100&&(i=100);var e=null,s=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=s.scrollHorizontally(-i):this.needToMoveRight&&(e=s.scrollHorizontally(i)),0!==e)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var c=this.lastDraggingEvent.dragItem.columns.filter(function(m){return!m.getColDef().lockPinned});c.length>0&&(this.dragAndDropService.setGhostIcon(Vi.ICON_PINNED),this.failedMoveAttempts>7)&&(this.setColumnsPinned(c,this.needToMoveLeft?fe.PINNED_LEFT:fe.PINNED_RIGHT,"uiColumnDragged"),this.dragAndDropService.nudge())}},ju([H("columnModel")],d.prototype,"columnModel",void 0),ju([H("dragAndDropService")],d.prototype,"dragAndDropService",void 0),ju([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),ju([H("ctrlsService")],d.prototype,"ctrlsService",void 0),ju([Qe],d.prototype,"init",null),d}(),Ir=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},PC=function(){function d(i){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=i}return d.prototype.onDragEnter=function(i){var e=this;if(this.clearColumnsList(),!this.gridOptionsWrapper.isFunctionsReadOnly()){var s=i.dragItem.columns;!s||s.forEach(function(l){!l.isPrimary()||l.isAnyFunctionActive()||(l.isAllowValue()?e.columnsToAggregate.push(l):l.isAllowRowGroup()?e.columnsToGroup.push(l):l.isAllowPivot()&&e.columnsToPivot.push(l))})}},d.prototype.getIconName=function(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?Vi.ICON_PINNED:Vi.ICON_MOVE:null},d.prototype.onDragLeave=function(i){this.clearColumnsList()},d.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},d.prototype.onDragging=function(i){},d.prototype.onDragStop=function(i){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},Ir([H("columnModel")],d.prototype,"columnModel",void 0),Ir([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),d}(),ux=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Si=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Mg=function(d){function i(e,s){var l=d.call(this)||this;return l.pinned=e,l.eContainer=s,l}return ux(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(s){switch(e.pinned){case fe.PINNED_LEFT:e.eSecondaryContainers=[[s.gridBodyCtrl.getBodyViewportElement(),s.leftRowContainerCtrl.getContainerElement()],[s.bottomLeftRowContainerCtrl.getContainerElement()],[s.topLeftRowContainerCtrl.getContainerElement()]];break;case fe.PINNED_RIGHT:e.eSecondaryContainers=[[s.gridBodyCtrl.getBodyViewportElement(),s.rightRowContainerCtrl.getContainerElement()],[s.bottomRightRowContainerCtrl.getContainerElement()],[s.topRightRowContainerCtrl.getContainerElement()]];break;default:e.eSecondaryContainers=[[s.gridBodyCtrl.getBodyViewportElement(),s.centerRowContainerCtrl.getViewportElement()],[s.bottomCenterRowContainerCtrl.getViewportElement()],[s.topCenterRowContainerCtrl.getViewportElement()]]}})},i.prototype.isInterestedIn=function(e){return e===Y.rvo.HeaderCell||e===Y.rvo.ToolPanel&&this.gridOptionsWrapper.isAllowDragFromColumnsToolPanel()},i.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},i.prototype.getContainer=function(){return this.eContainer},i.prototype.init=function(){this.moveColumnFeature=this.createManagedBean(new OC(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new PC(this.pinned)),this.dragAndDropService.addDropTarget(this)},i.prototype.getIconName=function(){return this.currentDropListener.getIconName()},i.prototype.isDropColumnInPivotMode=function(e){return this.columnModel.isPivotMode()&&e.dragSource.type===Y.rvo.ToolPanel},i.prototype.onDragEnter=function(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)},i.prototype.onDragLeave=function(e){this.currentDropListener.onDragLeave(e)},i.prototype.onDragging=function(e){this.currentDropListener.onDragging(e)},i.prototype.onDragStop=function(e){this.currentDropListener.onDragStop(e)},Si([H("dragAndDropService")],i.prototype,"dragAndDropService",void 0),Si([H("columnModel")],i.prototype,"columnModel",void 0),Si([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Si([Qe],i.prototype,"postConstruct",null),Si([Qe],i.prototype,"init",null),i}(Ke),lx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),dx=0,Sd=function(d){function i(e,s){var l=d.call(this)||this;return l.lastFocusEvent=null,l.columnGroupChild=e,l.parentRowCtrl=s,l.instanceId=e.getUniqueId()+"-"+dx++,l}return lx(i,d),i.prototype.shouldStopEventPropagation=function(e){var s=this.focusService.getFocusedHeader();return Qv(this.gridOptionsWrapper,e,s.headerRowIndex,s.column)},i.prototype.setGui=function(e){this.eGui=e,this.addDomData()},i.prototype.addDomData=function(){var e=this,s=i.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsWrapper.setDomData(this.eGui,s,this),this.addDestroyFunc(function(){return e.gridOptionsWrapper.setDomData(e.eGui,s,null)})},i.prototype.focus=function(e){return!!this.eGui&&(this.lastFocusEvent=e||null,this.eGui.focus(),!0)},i.prototype.getRowIndex=function(){return this.parentRowCtrl.getRowIndex()},i.prototype.getParentRowCtrl=function(){return this.parentRowCtrl},i.prototype.getPinned=function(){return this.parentRowCtrl.getPinned()},i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.getColumnGroupChild=function(){return this.columnGroupChild},i.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([H("focusService")],i.prototype,"focusService",void 0),i}(Ke),IC=function(){function d(){}return d.getFloatingFilterType=function(i){return this.filterToFloatingFilterMapping[i]},d.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},d}(),LM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),au=function(d){function i(e,s,l,c){var h=d.call(this)||this;return h.columnOrGroup=e,h.eCell=s,h.ariaEl=h.eCell.querySelector("[role=columnheader]")||h.eCell,h.colsSpanning=c,h.beans=l,h}return LM(i,d),i.prototype.setColsSpanning=function(e){this.colsSpanning=e,this.onLeftChanged()},i.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?zn(this.colsSpanning):this.columnOrGroup},i.prototype.postConstruct=function(){this.addManagedListener(this.columnOrGroup,Mn.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,this.onLeftChanged.bind(this))},i.prototype.setLeftFirstTime=function(){var e=this.beans.gridOptionsWrapper.isSuppressColumnMoveAnimation(),s=Fe(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&s&&!e?this.animateInLeft():this.onLeftChanged()},i.prototype.animateInLeft=function(){var e=this,s=this.getColumnOrGroup(),l=s.getLeft(),c=s.getOldLeft(),h=this.modifyLeftForPrintLayout(s,c),m=this.modifyLeftForPrintLayout(s,l);this.setLeft(h),this.actualLeft=m,this.beans.columnAnimationService.executeNextVMTurn(function(){e.actualLeft===m&&e.setLeft(m)})},i.prototype.onLeftChanged=function(){var e=this.getColumnOrGroup(),s=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,s),this.setLeft(this.actualLeft)},i.prototype.modifyLeftForPrintLayout=function(e,s){if(this.beans.gridOptionsWrapper.getDomLayout()!==fe.DOM_LAYOUT_PRINT||e.getPinned()===fe.PINNED_LEFT)return s;var c=this.beans.columnModel.getDisplayedColumnsLeftWidth();return e.getPinned()===fe.PINNED_RIGHT?c+this.beans.columnModel.getBodyContainerWidth()+s:c+s},i.prototype.setLeft=function(e){var s;if(Fe(e)&&(this.eCell.style.left=e+"px"),this.columnOrGroup instanceof Mn)s=this.columnOrGroup;else{var c=this.columnOrGroup.getLeafColumns();if(!c.length)return;c.length>1&&rb(this.ariaEl,c.length),s=c[0]}var h=this.beans.columnModel.getAriaColumnIndex(s);I_(this.ariaEl,h)},function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Qe],i.prototype,"postConstruct",null),i}(Ke),Xo=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Rp=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Tp=function(d){function i(e,s){var l=d.call(this)||this;return l.columns=e,l.element=s,l}return Xo(i,d),i.prototype.postConstruct=function(){this.gridOptionsWrapper.isColumnHoverHighlight()&&this.addMouseHoverListeners()},i.prototype.addMouseHoverListeners=function(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))},i.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},i.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},Rp([H("columnHoverService")],i.prototype,"columnHoverService",void 0),Rp([Qe],i.prototype,"postConstruct",null),i}(Ke),LC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Tr=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Zl=function(d){function i(e,s){var l=d.call(this,e,s)||this;return l.column=e,l}return LC(i,d),i.prototype.setComp=function(e,s,l,c){d.prototype.setGui.call(this,s),this.comp=e,this.eButtonShowMainFilter=l,this.eFloatingFilterBody=c;var h=this.column.getColDef();this.active=!(!h.filter&&!h.filterFramework||!h.floatingFilter),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this))},i.prototype.setupUi=function(){if(this.comp.addOrRemoveButtonWrapperCssClass("ag-hidden",!this.active||this.suppressFilterButton),this.active){this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton);var e=ui("filter",this.gridOptionsWrapper,this.column);e&&this.eButtonShowMainFilter.appendChild(e)}},i.prototype.setupFocus=function(){this.createManagedBean(new Ko(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},i.prototype.onTabKeyDown=function(e){if(document.activeElement!==this.eGui){var c=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);c&&(e.preventDefault(),c.focus())}},i.prototype.handleKeyDown=function(e){var l=document.activeElement===this.eGui;switch(e.keyCode){case $e.UP:case $e.DOWN:l||e.preventDefault();case $e.LEFT:case $e.RIGHT:if(l)return;e.stopPropagation();case $e.ENTER:l&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case $e.ESCAPE:l||this.eGui.focus()}},i.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var l=this.focusService.isKeyboardMode(),c=!!e.relatedTarget&&!gs(e.relatedTarget,"ag-floating-filter"),h=!!e.relatedTarget&&Dl(e.relatedTarget,"ag-floating-filter");if(l&&c&&h&&e.target===this.eGui){var m=this.lastFocusEvent;if(m&&m&&m.keyCode===$e.TAB){var R=this.beans.focusService.getFocusedHeader(),T=this.beans.columnModel.getDisplayedColAfter(this.column);this.focusService.focusInto(this.eGui,!!(l&&m.shiftKey&&R&&T===R.column))}}var K=this.getRowIndex();this.beans.focusService.setFocusedHeader(K,this.column)}},i.prototype.setupHover=function(){var e=this;this.createManagedBean(new Tp([this.column],this.eGui));var s=function(){if(e.gridOptionsWrapper.isColumnHoverHighlight()){var c=e.columnHoverService.isHovered(e.column);e.comp.addOrRemoveCssClass("ag-column-hover",c)}};this.addManagedListener(this.eventService,$.EVENT_COLUMN_HOVER_CHANGED,s),s()},i.prototype.setupLeft=function(){var e=new au(this.column,this.eGui,this.beans);this.createManagedBean(e)},i.prototype.setupUserComp=function(){if(this.active){var e=this.column.getColDef(),s=this.filterManager.createFilterParams(this.column,e),l=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(e,"filter",s),c=i.getDefaultFloatingFilterType(e);null==c&&(c="agReadOnlyFloatingFilter");var h={api:this.gridApi,column:this.column,filterParams:l,currentParentModel:this.currentParentModel.bind(this),parentFilterInstance:this.parentFilterInstance.bind(this),showParentFilter:this.showParentFilter.bind(this),onFloatingFilterChanged:this.onFloatingFilterChanged.bind(this),suppressFilterButton:!1};this.suppressFilterButton=!!e.floatingFilterComponentParams&&!!e.floatingFilterComponentParams.suppressFilterButton;var m=this.userComponentFactory.getFloatingFilterCompDetails(e,h,c);m&&this.comp.setCompDetails(m)}},i.getDefaultFloatingFilterType=function(e){if(null==e)return null;var s=null;return"string"==typeof e.filter?s=IC.getFloatingFilterType(e.filter):e.filterFramework||!0===e.filter&&(s=qt.isRegistered(Y.GXE.SetFilterModule)?"agSetColumnFloatingFilter":"agTextColumnFloatingFilter"),s},i.prototype.currentParentModel=function(){var e=this.getFilterComponent(!1);return e?e.resolveNow(null,function(s){return s&&s.getModel()}):null},i.prototype.getFilterComponent=function(e){return void 0===e&&(e=!0),this.filterManager.getFilterComponent(this.column,"NO_UI",e)},i.prototype.onFloatingFilterChanged=function(){console.warn("AG Grid: since version 21.x, how floating filters are implemented has changed. Instead of calling params.onFloatingFilterChanged(), get a reference to the main filter via params.parentFilterInstance() and then set a value on the parent filter directly.")},i.prototype.parentFilterInstance=function(e){var s=this,l=this.getFilterComponent();l&&l.then(function(c){var h=s.frameworkComponentWrapper?s.frameworkComponentWrapper.unwrap(c):c;e(h)})},i.prototype.showParentFilter=function(){this.menuFactory.showMenuAfterButtonClick(this.column,this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter,"floatingFilter","filterMenuTab",["filterMenuTab"])},i.prototype.setupSyncWithFilter=function(){var e=this;if(this.active){var s=function(c){var h=e.comp.getFloatingFilterComp();if(h){var m=e.currentParentModel();h.then(function(w){return w&&w.onParentModelChanged(m,c)})}};this.addManagedListener(this.column,Mn.EVENT_FILTER_CHANGED,s),this.filterManager.isFilterActive(this.column)&&s(null)}},i.prototype.setupWidth=function(){var e=this,s=function(){var c=e.column.getActualWidth()+"px";e.comp.setWidth(c)};this.addManagedListener(this.column,Mn.EVENT_WIDTH_CHANGED,s),s()},Tr([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Tr([H("filterManager")],i.prototype,"filterManager",void 0),Tr([H("columnHoverService")],i.prototype,"columnHoverService",void 0),Tr([H("gridApi")],i.prototype,"gridApi",void 0),Tr([H("menuFactory")],i.prototype,"menuFactory",void 0),Tr([H("beans")],i.prototype,"beans",void 0),Tr([Nn("frameworkComponentWrapper")],i.prototype,"frameworkComponentWrapper",void 0),i}(Sd),Ed=function(){function d(){}return d.getHeaderClassesFromColDef=function(i,e,s,l){return Ce(i)?[]:this.getColumnClassesFromCollDef(i.headerClass,i,e,s,l)},d.getToolPanelClassesFromColDef=function(i,e,s,l){return Ce(i)?[]:this.getColumnClassesFromCollDef(i.toolPanelClass,i,e,s,l)},d.getColumnClassesFromCollDef=function(i,e,s,l,c){return Ce(i)?[]:"string"==typeof(h="function"==typeof i?i({colDef:e,column:l,columnGroup:c,context:s.getContext(),api:s.getApi()}):i)?[h]:Array.isArray(h)?h:[];var h},d}(),fx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Og=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},FC=function(d){function i(e,s,l,c,h){var m=d.call(this)||this;return m.pinned=e,m.column=s,m.eResize=l,m.comp=c,m.ctrl=h,m}return fx(i,d),i.prototype.postConstruct=function(){var c,h,e=this,s=this.column.getColDef(),l=[],w=function(){l.forEach(function(L){return L()}),l.length=0},R=function(){var L=e.column.isResizable(),U=!e.gridOptionsWrapper.isSuppressAutoSize()&&!s.suppressAutoSize;(L!==c||U!==h)&&(c=L,h=U,w(),function(){if($n(e.eResize,c),c){var L=e.horizontalResizeService.addResizeBar({eResizeBar:e.eResize,onResizeStart:e.onResizeStart.bind(e),onResizing:e.onResizing.bind(e,!1),onResizeEnd:e.onResizing.bind(e,!0)});if(l.push(L),h){var U=e.gridOptionsWrapper.isSkipHeaderOnAutoSize(),K=function(){e.columnModel.autoSizeColumn(e.column,U,"uiColumnResized")};e.eResize.addEventListener("dblclick",K);var Q=new To(e.eResize);Q.addEventListener(To.EVENT_DOUBLE_TAP,K),e.addDestroyFunc(function(){e.eResize.removeEventListener("dblclick",K),Q.removeEventListener(To.EVENT_DOUBLE_TAP,K),Q.destroy()})}}}())};R(),this.addDestroyFunc(w),this.ctrl.addRefreshFunction(R)},i.prototype.onResizing=function(e,s){var l=this.normaliseResizeAmount(s);this.columnModel.setColumnWidths([{key:this.column,newWidth:this.resizeStartWidth+l}],this.resizeWithShiftKey,e,"uiColumnDragged"),e&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},i.prototype.onResizeStart=function(e){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=e,this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},i.prototype.normaliseResizeAmount=function(e){var s=e,l=this.pinned!==fe.PINNED_LEFT,c=this.pinned===fe.PINNED_RIGHT;return this.gridOptionsWrapper.isEnableRtl()?l&&(s*=-1):c&&(s*=-1),s},Og([H("horizontalResizeService")],i.prototype,"horizontalResizeService",void 0),Og([H("columnModel")],i.prototype,"columnModel",void 0),Og([Qe],i.prototype,"postConstruct",null),i}(Ke),px=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),qu=function(d){function i(e,s,l){void 0===s&&(s="ag-checkbox"),void 0===l&&(l="checkbox");var c=d.call(this,e,s,l)||this;return c.labelAlignment="right",c.selected=!1,c.readOnly=!1,c.passive=!1,c}return px(i,d),i.prototype.addInputListeners=function(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))},i.prototype.getNextValue=function(){return void 0===this.selected||!this.selected},i.prototype.setPassive=function(e){this.passive=e},i.prototype.isReadOnly=function(){return this.readOnly},i.prototype.setReadOnly=function(e){Ft(this.eWrapper,"ag-disabled",e),this.eInput.disabled=e,this.readOnly=e},i.prototype.setDisabled=function(e){return Ft(this.eWrapper,"ag-disabled",e),d.prototype.setDisabled.call(this,e)},i.prototype.toggle=function(){if(!this.eInput.disabled){var e=this.isSelected(),s=this.getNextValue();this.passive?this.dispatchChange(s,e):this.setValue(s)}},i.prototype.getValue=function(){return this.isSelected()},i.prototype.setValue=function(e,s){return this.refreshSelectedClass(e),this.setSelected(e,s),this},i.prototype.setName=function(e){return this.getInputElement().name=e,this},i.prototype.isSelected=function(){return this.selected},i.prototype.setSelected=function(e,s){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected="boolean"==typeof e?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=void 0===e,s||this.dispatchChange(this.selected,this.previousValue))},i.prototype.dispatchChange=function(e,s,l){this.dispatchEvent({type:i.EVENT_CHANGED,selected:e,previousValue:s,event:l});var c=this.getInputElement();this.eventService.dispatchEvent({type:$.EVENT_CHECKBOX_CHANGED,id:c.id,name:c.name,selected:e,previousValue:s})},i.prototype.onCheckboxClick=function(e){if(!this.passive&&!this.eInput.disabled){var s=this.isSelected(),l=this.selected=e.target.checked;this.refreshSelectedClass(l),this.dispatchChange(l,s,e)}},i.prototype.refreshSelectedClass=function(e){Ft(this.eWrapper,"ag-checked",!0===e),Ft(this.eWrapper,"ag-indeterminate",null==e)},i}(Ga),hx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),bd=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},vx=function(d){function i(e){var s=d.call(this)||this;s.cbSelectAllVisible=!1,s.processingEventFromCheckbox=!1,s.column=e;var l=e.getColDef();return s.filteredOnly=!!l&&!!l.headerCheckboxSelectionFilteredOnly,s}return hx(i,d),i.prototype.onSpaceKeyPressed=function(e){var s=this.cbSelectAll;s.isDisplayed()&&!s.getGui().contains(document.activeElement)&&(e.preventDefault(),s.setValue(!s.getValue()))},i.prototype.getCheckboxGui=function(){return this.cbSelectAll.getGui()},i.prototype.setComp=function(e){this.comp=e,this.cbSelectAll=this.createManagedBean(new qu),this.cbSelectAll.addCssClass("ag-header-select-all"),Ki(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,$.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,qu.EVENT_CHANGED,this.onCbSelectAll.bind(this)),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()},i.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType(),this.updateStateOfCheckbox()),this.refreshHeaderAriaDescribedBy(this.cbSelectAllVisible)},i.prototype.refreshHeaderAriaDescribedBy=function(e){var s=e?this.cbSelectAll.getInputElement().id:void 0;this.comp.setAriaDescribedBy(s)},i.prototype.onModelChanged=function(){!this.cbSelectAllVisible||this.updateStateOfCheckbox()},i.prototype.onSelectionChanged=function(){!this.cbSelectAllVisible||this.updateStateOfCheckbox()},i.prototype.getNextCheckboxState=function(e){return(0!==e.selected||0!==e.notSelected)&&(e.selected>0&&e.notSelected>0?null:e.selected>0)},i.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var e=this.getSelectionCount(),s=this.getNextCheckboxState(e);this.cbSelectAll.setValue(s),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}},i.prototype.refreshSelectAllLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),l=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),c=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAll.setInputAriaLabel(c+" ("+l+")")},i.prototype.getSelectionCount=function(){var e=this,s=0,l=0,c=function(m){e.gridOptionsWrapper.isGroupSelectsChildren()&&m.group||(m.isSelected()?s++:m.selectable&&l++)};return this.filteredOnly?this.gridApi.forEachNodeAfterFilter(c):this.gridApi.forEachNode(c),{notSelected:l,selected:s}},i.prototype.checkRightRowModelType=function(){var e=this.rowModel.getType();e===fe.ROW_MODEL_TYPE_CLIENT_SIDE||console.warn("AG Grid: selectAllCheckbox is only available if using normal row model, you are using "+e)},i.prototype.onCbSelectAll=function(){!this.processingEventFromCheckbox&&this.cbSelectAllVisible&&(this.cbSelectAll.getValue()?this.selectionService.selectAllRowNodes(this.filteredOnly):this.selectionService.deselectAllRowNodes(this.filteredOnly))},i.prototype.isCheckboxSelection=function(){var e=this.column.getColDef().headerCheckboxSelection;return"function"==typeof e&&(e=e({column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi})),!(!e||(this.gridOptionsWrapper.isRowModelServerSide()?(console.warn("headerCheckboxSelection is not supported for Server Side Row Model"),1):this.gridOptionsWrapper.isRowModelInfinite()?(console.warn("headerCheckboxSelection is not supported for Infinite Row Model"),1):this.gridOptionsWrapper.isRowModelViewport()&&(console.warn("headerCheckboxSelection is not supported for Viewport Row Model"),1)))},bd([H("gridApi")],i.prototype,"gridApi",void 0),bd([H("columnApi")],i.prototype,"columnApi",void 0),bd([H("rowModel")],i.prototype,"rowModel",void 0),bd([H("selectionService")],i.prototype,"selectionService",void 0),i}(Ke),gx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ja=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Dp=function(d){function i(e,s){var l=d.call(this,e,s)||this;return l.refreshFunctions=[],l.userHeaderClasses=new Set,l.column=e,l}return gx(i,d),i.prototype.setComp=function(e,s,l){var c=this;d.prototype.setGui.call(this,s),this.comp=e,this.colDefVersion=this.columnModel.getColDefVersion(),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.addColumnHoverListener(),this.setupFilterCss(),this.setupColId(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.createManagedBean(new FC(this.getPinned(),this.column,l,e,this)),this.createManagedBean(new Tp([this.column],s)),this.createManagedBean(new au(this.column,s,this.beans)),this.createManagedBean(new Ko(s,{shouldStopEventPropagation:function(m){return c.shouldStopEventPropagation(m)},onTabKeyDown:function(){return null},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this))},i.prototype.setupUserComp=function(){var e=this.lookupUserCompDetails();this.setCompDetails(e)},i.prototype.setCompDetails=function(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)},i.prototype.lookupUserCompDetails=function(){var e=this.createParams(),s=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(s,e)},i.prototype.createParams=function(){var e=this,s=this.column.getColDef();return{column:this.column,displayName:this.displayName,enableSorting:s.sortable,enableMenu:this.menuEnabled,showColumnMenu:function(h){e.gridApi.showColumnMenuAfterButtonClick(e.column,h)},progressSort:function(h){e.sortController.progressSort(e.column,!!h,"uiColumnSorted")},setSort:function(h,m){e.sortController.setSortForColumn(e.column,h,!!m,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext(),eGridHeader:this.getGui()}},i.prototype.setupSelectAll=function(){this.selectAllFeature=this.createManagedBean(new vx(this.column)),this.selectAllFeature.setComp(this.comp)},i.prototype.getSelectAllGui=function(){return this.selectAllFeature.getCheckboxGui()},i.prototype.handleKeyDown=function(e){e.keyCode===$e.SPACE&&this.selectAllFeature.onSpaceKeyPressed(e),e.keyCode===$e.ENTER&&this.onEnterKeyPressed(e)},i.prototype.onEnterKeyPressed=function(e){var s=this.comp.getUserCompInstance();s&&(e.ctrlKey||e.metaKey?this.menuEnabled&&s.showMenu&&(e.preventDefault(),s.showMenu()):this.sortable&&this.sortController.progressSort(this.column,e.shiftKey,"uiColumnSorted"))},i.prototype.isMenuEnabled=function(){return this.menuEnabled},i.prototype.onFocusIn=function(e){if(!this.getGui().contains(e.relatedTarget)){var s=this.getRowIndex();this.focusService.setFocusedHeader(s,this.column)}this.setActiveHeader(!0)},i.prototype.onFocusOut=function(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)},i.prototype.setupTooltip=function(){var e=this,l=this.createManagedBean(new _C({getColumn:function(){return e.column},getColDef:function(){return e.column.getColDef()},getGui:function(){return e.eGui},getLocation:function(){return"header"},getTooltipValue:function(){return e.column.getColDef().headerTooltip}},this.beans));l.setComp(this.comp),this.refreshFunctions.push(function(){return l.refreshToolTip()})},i.prototype.setupClassesFromColDef=function(){var e=this,s=function(){var c=e.column.getColDef(),m=Ed.getHeaderClassesFromColDef(c,e.gridOptionsWrapper,e.column,null),w=e.userHeaderClasses;e.userHeaderClasses=new Set(m),m.forEach(function(R){w.has(R)?w.delete(R):e.comp.addOrRemoveCssClass(R,!0)}),w.forEach(function(R){return e.comp.addOrRemoveCssClass(R,!1)})};this.refreshFunctions.push(s),s()},i.prototype.getGui=function(){return this.eGui},i.prototype.setDragSource=function(e){var s=this;this.dragSourceElement=e,this.removeDragSource(),e&&(!this.draggable||(this.moveDragSource={type:Y.rvo.HeaderCell,eElement:e,defaultIconName:Vi.ICON_HIDE,getDragItem:function(){return s.createDragItem()},dragItemName:this.displayName,onDragStarted:function(){return s.column.setMoving(!0,"uiColumnMoved")},onDragStopped:function(){return s.column.setMoving(!1,"uiColumnMoved")}},this.dragAndDropService.addDragSource(this.moveDragSource,!0)))},i.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},i.prototype.removeDragSource=function(){this.moveDragSource&&(this.dragAndDropService.removeDragSource(this.moveDragSource),this.moveDragSource=void 0)},i.prototype.onNewColumnsLoaded=function(){var e=this.columnModel.getColDefVersion();e!=this.colDefVersion&&(this.colDefVersion=e,this.refresh())},i.prototype.updateState=function(){var e=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!e.suppressMenu,this.sortable=e.sortable,this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()},i.prototype.addRefreshFunction=function(e){this.refreshFunctions.push(e)},i.prototype.refresh=function(){this.updateState(),this.refreshHeaderComp(),this.refreshFunctions.forEach(function(e){return e()})},i.prototype.refreshHeaderComp=function(){var e=this.lookupUserCompDetails();null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)},i.prototype.attemptHeaderCompRefresh=function(e){var s=this.comp.getUserCompInstance();return!(!s||!s.refresh)&&s.refresh(e)},i.prototype.calculateDisplayName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)},i.prototype.checkDisplayName=function(){this.displayName!==this.calculateDisplayName()&&this.refresh()},i.prototype.workOutDraggable=function(){var e=this.column.getColDef();return!(this.gridOptionsWrapper.isSuppressMovableColumns()||e.suppressMovable||e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot},i.prototype.onColumnRowGroupChanged=function(){this.checkDisplayName()},i.prototype.onColumnPivotChanged=function(){this.checkDisplayName()},i.prototype.onColumnValueChanged=function(){this.checkDisplayName()},i.prototype.setupWidth=function(){var e=this,s=function(){e.comp.setWidth(e.column.getActualWidth()+"px")};this.addManagedListener(this.column,Mn.EVENT_WIDTH_CHANGED,s),s()},i.prototype.setupMovingCss=function(){var e=this,s=function(){e.comp.addOrRemoveCssClass("ag-header-cell-moving",e.column.isMoving())};this.addManagedListener(this.column,Mn.EVENT_MOVING_CHANGED,s),s()},i.prototype.setupMenuClass=function(){var e=this,s=function(){e.comp.addOrRemoveCssClass("ag-column-menu-visible",e.column.isMenuVisible())};this.addManagedListener(this.column,Mn.EVENT_MENU_VISIBLE_CHANGED,s),s()},i.prototype.setupSortableClass=function(){var e=this,s=function(){e.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!e.sortable)},l=function(){e.comp.setAriaSort(e.sortable?O_(e.column):void 0)};s(),l(),this.addRefreshFunction(s),this.addRefreshFunction(l),this.addManagedListener(this.column,Mn.EVENT_SORT_CHANGED,l)},i.prototype.addColumnHoverListener=function(){var e=this,s=function(){if(e.gridOptionsWrapper.isColumnHoverHighlight()){var c=e.columnHoverService.isHovered(e.column);e.comp.addOrRemoveCssClass("ag-column-hover",c)}};this.addManagedListener(this.eventService,$.EVENT_COLUMN_HOVER_CHANGED,s),s()},i.prototype.setupFilterCss=function(){var e=this,s=function(){e.comp.addOrRemoveCssClass("ag-header-cell-filtered",e.column.isFilterActive())};this.addManagedListener(this.column,Mn.EVENT_FILTER_ACTIVE_CHANGED,s),s()},i.prototype.setupColId=function(){this.comp.setColId(this.column.getColId())},i.prototype.addActiveHeaderMouseListeners=function(){var e=this,s=function(c){return e.setActiveHeader("mouseenter"===c.type)};this.addManagedListener(this.getGui(),"mouseenter",s),this.addManagedListener(this.getGui(),"mouseleave",s)},i.prototype.setActiveHeader=function(e){this.comp.addOrRemoveCssClass("ag-header-active",e)},ja([H("columnModel")],i.prototype,"columnModel",void 0),ja([H("columnHoverService")],i.prototype,"columnHoverService",void 0),ja([H("beans")],i.prototype,"beans",void 0),ja([H("sortController")],i.prototype,"sortController",void 0),ja([H("menuFactory")],i.prototype,"menuFactory",void 0),ja([H("dragAndDropService")],i.prototype,"dragAndDropService",void 0),ja([H("gridApi")],i.prototype,"gridApi",void 0),ja([H("columnApi")],i.prototype,"columnApi",void 0),ja([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),ja([Fi],i.prototype,"removeDragSource",null),i}(Sd),mx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Pg=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},NM=function(d){function i(e,s,l,c){var h=d.call(this)||this;return h.eResize=s,h.comp=e,h.pinned=l,h.columnGroup=c,h}return mx(i,d),i.prototype.postConstruct=function(){var e=this;if(this.columnGroup.isResizable()){var s=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(s),!this.gridOptionsWrapper.isSuppressAutoSize()){var l=this.gridOptionsWrapper.isSkipHeaderOnAutoSize();this.eResize.addEventListener("dblclick",function(c){var h=[];e.columnGroup.getDisplayedLeafColumns().forEach(function(m){m.getColDef().suppressAutoSize||h.push(m.getColId())}),h.length>0&&e.columnModel.autoSizeColumns(h,l,"uiColumnResized")})}}else this.comp.addOrRemoveResizableCssClass("ag-hidden",!0)},i.prototype.onResizeStart=function(e){var s=this,l=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=l.filter(function(m){return m.isResizable()}),this.resizeStartWidth=0,this.resizeCols.forEach(function(m){return s.resizeStartWidth+=m.getActualWidth()}),this.resizeRatios=[],this.resizeCols.forEach(function(m){return s.resizeRatios.push(m.getActualWidth()/s.resizeStartWidth)});var c=null;if(e&&(c=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),c){var h=c.getDisplayedLeafColumns();this.resizeTakeFromCols=h.filter(function(m){return m.isResizable()}),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach(function(m){return s.resizeTakeFromStartWidth+=m.getActualWidth()}),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach(function(m){return s.resizeTakeFromRatios.push(m.getActualWidth()/s.resizeTakeFromStartWidth)})}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null;this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},i.prototype.onResizing=function(e,s){var l=[],c=this.normaliseDragChange(s);l.push({columns:this.resizeCols,ratios:this.resizeRatios,width:this.resizeStartWidth+c}),this.resizeTakeFromCols&&l.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-c}),this.columnModel.resizeColumnSets(l,e,"uiColumnDragged"),e&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},i.prototype.normaliseDragChange=function(e){var s=e;return this.gridOptionsWrapper.isEnableRtl()?this.pinned!==fe.PINNED_LEFT&&(s*=-1):this.pinned===fe.PINNED_RIGHT&&(s*=-1),s},Pg([H("horizontalResizeService")],i.prototype,"horizontalResizeService",void 0),Pg([H("columnModel")],i.prototype,"columnModel",void 0),Pg([Qe],i.prototype,"postConstruct",null),i}(Ke),Ig=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),_x=function(d){function i(e,s){var l=d.call(this)||this;return l.removeChildListenersFuncs=[],l.columnGroup=s,l.comp=e,l}return Ig(i,d),i.prototype.postConstruct=function(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,ai.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))},i.prototype.addListenersToChildrenColumns=function(){var e=this;this.removeListenersOnChildrenColumns();var s=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(function(l){l.addEventListener(Mn.EVENT_WIDTH_CHANGED,s),l.addEventListener(Mn.EVENT_VISIBLE_CHANGED,s),e.removeChildListenersFuncs.push(function(){l.removeEventListener(Mn.EVENT_WIDTH_CHANGED,s),l.removeEventListener(Mn.EVENT_VISIBLE_CHANGED,s)})})},i.prototype.removeListenersOnChildrenColumns=function(){this.removeChildListenersFuncs.forEach(function(e){return e()}),this.removeChildListenersFuncs=[]},i.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},i.prototype.onWidthChanged=function(){this.comp.setWidth(this.columnGroup.getActualWidth()+"px")},function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Qe],i.prototype,"postConstruct",null),i}(Ke),Ql=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ec=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},NC=function(d){function i(e,s){var l=d.call(this,e,s)||this;return l.columnGroup=e,l}return Ql(i,d),i.prototype.setComp=function(e,s,l){d.prototype.setGui.call(this,s),this.comp=e,this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.columnGroup,"header"),this.addClasses(),this.addAttributes(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();var c=this.getParentRowCtrl().getPinned(),h=this.columnGroup.getOriginalColumnGroup().getLeafColumns();this.createManagedBean(new Tp(h,s)),this.createManagedBean(new au(this.columnGroup,s,this.beans)),this.createManagedBean(new NM(e,l,c,this.columnGroup)),this.createManagedBean(new _x(e,this.columnGroup)),this.createManagedBean(new Ko(s,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:function(){},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},i.prototype.setupUserComp=function(){var e=this,s=this.displayName,l={displayName:this.displayName,columnGroup:this.columnGroup,setExpanded:function(T){e.columnModel.setColumnGroupOpened(e.columnGroup.getOriginalColumnGroup(),T,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};if(!s){for(var c=this.columnGroup,h=c.getLeafColumns();c.getParent()&&c.getParent().getLeafColumns().length===h.length;)c=c.getParent();var m=c.getColGroupDef();m&&(s=m.headerName),s||(s=h?this.columnModel.getDisplayNameForColumn(h[0],"header",!0):"")}var w=this.userComponentFactory.getHeaderGroupCompDetails(l);this.comp.setUserCompDetails(w)},i.prototype.setupTooltip=function(){var e=this,s=this.columnGroup.getColGroupDef(),l={getColumn:function(){return e.columnGroup},getGui:function(){return e.eGui},getLocation:function(){return"headerGroup"},getTooltipValue:function(){return s&&s.headerTooltip}};s&&(l.getColDef=function(){return s}),this.createManagedBean(new _C(l,this.beans)).setComp(this.comp)},i.prototype.setupExpandable=function(){var e=this.columnGroup.getOriginalColumnGroup();this.refreshExpanded(),this.addManagedListener(e,mr.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,mr.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))},i.prototype.refreshExpanded=function(){var e=this.columnGroup;this.expandable=e.isExpandable();var s=e.isExpanded();this.comp.setAriaExpanded(this.expandable?s?"true":"false":void 0)},i.prototype.addAttributes=function(){this.comp.setColId(this.columnGroup.getUniqueId())},i.prototype.addClasses=function(){var e=this,s=this.columnGroup.getColGroupDef(),l=Ed.getHeaderClassesFromColDef(s,this.gridOptionsWrapper,null,this.columnGroup);l.push(this.columnGroup.isPadding()?"ag-header-group-cell-no-group":"ag-header-group-cell-with-group"),l.forEach(function(c){return e.comp.addOrRemoveCssClass(c,!0)})},i.prototype.setupMovingCss=function(){var e=this,l=this.columnGroup.getOriginalColumnGroup().getLeafColumns(),c=function(){return e.comp.addOrRemoveCssClass("ag-header-cell-moving",e.columnGroup.isMoving())};l.forEach(function(h){e.addManagedListener(h,Mn.EVENT_MOVING_CHANGED,c)}),c()},i.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.columnGroup)}},i.prototype.handleKeyDown=function(e){var s=document.activeElement;if(this.expandable&&s===this.eGui&&e.keyCode===$e.ENTER){var c=this.columnGroup,h=!c.isExpanded();this.columnModel.setColumnGroupOpened(c.getOriginalColumnGroup(),h,"uiColumnExpanded")}},i.prototype.setDragSource=function(e){var s=this;if(!this.isSuppressMoving()){var l=this.columnGroup.getOriginalColumnGroup().getLeafColumns(),c={type:Y.rvo.HeaderCell,eElement:e,defaultIconName:Vi.ICON_HIDE,dragItemName:this.displayName,getDragItem:this.getDragItemForGroup.bind(this),onDragStarted:function(){return l.forEach(function(m){return m.setMoving(!0,"uiColumnDragged")})},onDragStopped:function(){return l.forEach(function(m){return m.setMoving(!1,"uiColumnDragged")})}};this.dragAndDropService.addDragSource(c,!0),this.addDestroyFunc(function(){return s.dragAndDropService.removeDragSource(c)})}},i.prototype.getDragItemForGroup=function(){var e=this.columnGroup.getOriginalColumnGroup().getLeafColumns(),s={};e.forEach(function(c){return s[c.getId()]=c.isVisible()});var l=[];return this.columnModel.getAllDisplayedColumns().forEach(function(c){e.indexOf(c)>=0&&(l.push(c),ri(e,c))}),e.forEach(function(c){return l.push(c)}),{columns:l,visibleState:s}},i.prototype.isSuppressMoving=function(){var e=!1;return this.columnGroup.getLeafColumns().forEach(function(l){(l.getColDef().suppressMovable||l.getColDef().lockPosition)&&(e=!0)}),e||this.gridOptionsWrapper.isSuppressMovableColumns()},ec([H("beans")],i.prototype,"beans",void 0),ec([H("columnModel")],i.prototype,"columnModel",void 0),ec([H("dragAndDropService")],i.prototype,"dragAndDropService",void 0),ec([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),ec([H("gridApi")],i.prototype,"gridApi",void 0),ec([H("columnApi")],i.prototype,"columnApi",void 0),i}(Sd),Cx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),kC=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},wx=0,xd=function(d){function i(e,s,l){var c=d.call(this)||this;return c.instanceId=wx++,c.headerCellCtrls={},c.rowIndex=e,c.pinned=s,c.type=l,c}return Cx(i,d),i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.setComp=function(e){this.comp=e,this.onRowHeightChanged(),this.onVirtualColumnsChanged(),this.setWidth(),this.addEventListeners(),Kc()&&this.comp.setTransform("translateZ(0)"),e.setAriaRowIndex(this.rowIndex+1)},i.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,$.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_PIVOT_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_PIVOT_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_FLOATING_FILTERS_HEIGHT,this.onRowHeightChanged.bind(this))},i.prototype.getHtmlElementForColumnHeader=function(e){if(this.type==Y.A6C.COLUMN){var s=Li(this.headerCellCtrls,function(c){return c.getColumnGroupChild()==e});if(s)return s.getGui()}},i.prototype.onDisplayedColumnsChanged=function(){this.onVirtualColumnsChanged(),this.setWidth()},i.prototype.getType=function(){return this.type},i.prototype.onColumnResized=function(){this.setWidth()},i.prototype.setWidth=function(){var e=this.getWidthForRow();this.comp.setWidth(e+"px")},i.prototype.getWidthForRow=function(){return this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_PRINT?null!=this.pinned?0:this.columnModel.getContainerWidth(fe.PINNED_RIGHT)+this.columnModel.getContainerWidth(fe.PINNED_LEFT)+this.columnModel.getContainerWidth(null):this.columnModel.getContainerWidth(this.pinned)},i.prototype.onRowHeightChanged=function(){var c,h,e=this.columnModel.getHeaderRowCount(),s=[],l=0;this.columnModel.isPivotMode()?(c=this.gridOptionsWrapper.getPivotGroupHeaderHeight(),h=this.gridOptionsWrapper.getPivotHeaderHeight()):(this.columnModel.hasFloatingFilters()&&(e++,l=1),c=this.gridOptionsWrapper.getGroupHeaderHeight(),h=this.gridOptionsWrapper.getHeaderHeight());for(var w=e-(1+l),R=0;R<w;R++)s.push(c);for(s.push(h),R=0;R<l;R++)s.push(this.gridOptionsWrapper.getFloatingFiltersHeight());var T=0;for(R=0;R<this.rowIndex;R++)T+=s[R];this.comp.setTop(T+"px"),this.comp.setHeight(s[this.rowIndex]+"px")},i.prototype.getPinned=function(){return this.pinned},i.prototype.getRowIndex=function(){return this.rowIndex},i.prototype.onVirtualColumnsChanged=function(){var e=this,s=this.headerCellCtrls;this.headerCellCtrls={},this.getColumnsInViewport().forEach(function(m){if(!m.isEmptyGroup()){var w=m.getUniqueId(),R=s[w];if(delete s[w],R&&R.getColumnGroupChild()!=m&&(e.destroyBean(R),R=void 0),null==R)switch(e.type){case Y.A6C.FLOATING_FILTER:R=e.createBean(new Zl(m,e));break;case Y.A6C.COLUMN_GROUP:R=e.createBean(new NC(m,e));break;default:R=e.createBean(new Dp(m,e))}e.headerCellCtrls[w]=R}}),Fn(s,function(m,w){var R=function(w){return!!e.focusService.isHeaderWrapperFocused(w)&&e.columnModel.isDisplayed(w.getColumnGroupChild())}(w);R?e.headerCellCtrls[m]=w:e.destroyBean(w)});var h=Ta(this.headerCellCtrls);this.comp.setHeaderCtrls(h)},i.prototype.getColumnsInViewport=function(){return this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_PRINT?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()},i.prototype.getColumnsInViewportPrintLayout=function(){var e=this;if(null!=this.pinned)return[];var s=[],l=this.getActualDepth();return[fe.PINNED_LEFT,null,fe.PINNED_RIGHT].forEach(function(c){var h=e.columnModel.getVirtualHeaderGroupRow(c,l);s=s.concat(h)}),s},i.prototype.getActualDepth=function(){return this.type==Y.A6C.FLOATING_FILTER?this.rowIndex-1:this.rowIndex},i.prototype.getColumnsInViewportNormalLayout=function(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())},i.prototype.focusHeader=function(e,s){var c=Li(Ta(this.headerCellCtrls),function(h){return h.getColumnGroupChild()==e});return!!c&&(c.focus(s),!0)},kC([H("columnModel")],i.prototype,"columnModel",void 0),kC([H("focusService")],i.prototype,"focusService",void 0),i}(Ke),Sx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Rd=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},GC=function(d){function i(e){var s=d.call(this)||this;return s.groupsRowCtrls=[],s.pinned=e,s}return Sx(i,d),i.prototype.setComp=function(e,s){this.comp=e,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(s),this.addManagedListener(this.eventService,$.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()},i.prototype.setupDragAndDrop=function(e){var s=new Mg(this.pinned,e);this.createManagedBean(s)},i.prototype.refresh=function(e){var s=this;void 0===e&&(e=!1);var L,l=new ws,c=this.focusService.getFocusHeaderToUseAfterRefresh();(function(){var L=s.columnModel.getHeaderRowCount()-1;s.groupsRowCtrls=s.destroyBeans(s.groupsRowCtrls);for(var U=0;U<L;U++){var K=s.createBean(new xd(l.next(),s.pinned,Y.A6C.COLUMN_GROUP));s.groupsRowCtrls.push(K)}})(),L=l.next(),(null==s.columnsRowCtrl||!e||s.columnsRowCtrl.getRowIndex()!==L)&&(s.destroyBean(s.columnsRowCtrl),s.columnsRowCtrl=s.createBean(new xd(L,s.pinned,Y.A6C.COLUMN))),function(){var U=function(){s.filtersRowCtrl=s.destroyBean(s.filtersRowCtrl)};if(!s.columnModel.isPivotMode()&&s.columnModel.hasFloatingFilters()){var K=l.next();if(s.filtersRowCtrl){var Q=s.filtersRowCtrl.getRowIndex()!==K;(!e||Q)&&U()}s.filtersRowCtrl||(s.filtersRowCtrl=s.createBean(new xd(K,s.pinned,Y.A6C.FLOATING_FILTER)))}else U()}();var R=this.getAllCtrls();this.comp.setCtrls(R),this.restoreFocusOnHeader(c)},i.prototype.restoreFocusOnHeader=function(e){null==e||e.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:e})},i.prototype.getAllCtrls=function(){var e=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s}(this.groupsRowCtrls,[this.columnsRowCtrl]);return this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e},i.prototype.onGridColumnsChanged=function(){this.refresh(!0)},i.prototype.setupCenterWidth=function(){var e=this;null==this.pinned&&this.createManagedBean(new Ag(function(s){return e.comp.setCenterWidth(s+"px")}))},i.prototype.setHorizontalScroll=function(e){this.comp.setContainerTransform("translateX("+e+"px)")},i.prototype.setupPinnedWidth=function(){var e=this;if(null!=this.pinned){var s=this.pinned===fe.PINNED_LEFT,l=this.pinned===fe.PINNED_RIGHT,c=function(){var m=s?e.pinnedWidthService.getPinnedLeftWidth():e.pinnedWidthService.getPinnedRightWidth();if(null!=m){var w=0==m,R=e.gridOptionsWrapper.isEnableRtl(),T=e.gridOptionsWrapper.getScrollbarWidth(),L=e.scrollVisibleService.isVerticalScrollShowing()&&(R&&s||!R&&l);e.comp.setPinnedContainerWidth((L?m+T:m)+"px"),e.comp.addOrRemoveCssClass("ag-hidden",w)}};this.addManagedListener(this.eventService,$.EVENT_LEFT_PINNED_WIDTH_CHANGED,c),this.addManagedListener(this.eventService,$.EVENT_RIGHT_PINNED_WIDTH_CHANGED,c),this.addManagedListener(this.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,c),this.addManagedListener(this.eventService,$.EVENT_SCROLLBAR_WIDTH_CHANGED,c)}},i.prototype.getHtmlElementForColumnHeader=function(e){if(this.columnsRowCtrl)return this.columnsRowCtrl.getHtmlElementForColumnHeader(e)},i.prototype.getRowType=function(e){var l=this.getAllCtrls()[e];return l?l.getType():void 0},i.prototype.focusHeader=function(e,s,l){var h=this.getAllCtrls()[e];return!!h&&h.focusHeader(s,l)},i.prototype.getRowCount=function(){return this.getAllCtrls().length},Rd([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Rd([H("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),Rd([H("pinnedWidthService")],i.prototype,"pinnedWidthService",void 0),Rd([H("columnModel")],i.prototype,"columnModel",void 0),Rd([H("focusService")],i.prototype,"focusService",void 0),i}(Ke),BC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Lg=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ap=function(d){function i(e){var s=d.call(this)||this;return s.headerRowComps={},s.rowCompsList=[],s.pinned=e,s}return BC(i,d),i.prototype.init=function(){var e=this;this.selectAndSetTemplate();var s={addOrRemoveCssClass:function(h,m){return e.addOrRemoveCssClass(h,m)},setCtrls:function(h){return e.setCtrls(h)},setCenterWidth:function(h){return e.eCenterContainer.style.width=h},setContainerTransform:function(h){return e.eCenterContainer.style.transform=h},setPinnedContainerWidth:function(h){var m=e.getGui();m.style.width=h,m.style.maxWidth=h,m.style.minWidth=h}};this.createManagedBean(new GC(this.pinned)).setComp(s,this.getGui())},i.prototype.selectAndSetTemplate=function(){this.setTemplate(this.pinned==fe.PINNED_LEFT?i.PINNED_LEFT_TEMPLATE:this.pinned==fe.PINNED_RIGHT?i.PINNED_RIGHT_TEMPLATE:i.CENTER_TEMPLATE),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()},i.prototype.destroyRowComps=function(){this.setCtrls([])},i.prototype.destroyRowComp=function(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())},i.prototype.setCtrls=function(e){var c,s=this,l=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[],e.forEach(function(m){var w=m.getInstanceId(),R=l[w];delete l[w];var T=R||s.createBean(new TC(m));s.headerRowComps[w]=T,s.rowCompsList.push(T),function(w){var R=w.getGui();R.parentElement!=s.eRowContainer&&s.eRowContainer.appendChild(R),c&&ys(s.eRowContainer,R,c),c=R}(T)}),Ta(l).forEach(function(m){return s.destroyRowComp(m)})},i.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"/>',i.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"/>',i.CENTER_TEMPLATE='<div class="ag-header-viewport" role="presentation">\n            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>\n        </div>',Lg([Be("eCenterContainer")],i.prototype,"eCenterContainer",void 0),Lg([Qe],i.prototype,"init",null),Lg([Fi],i.prototype,"destroyRowComps",null),i}(pn),bx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),da=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return bx(i,d),i.prototype.postConstruct=function(){var e=this,s={addOrRemoveCssClass:function(m,w){return e.addOrRemoveCssClass(m,w)},setHeightAndMinHeight:function(m){e.getGui().style.height=m,e.getGui().style.minHeight=m}};this.createManagedBean(new AC).setComp(s,this.getGui(),this.getFocusableElement());var c=function(m){e.createManagedBean(m),e.appendChild(m)};c(new Ap(fe.PINNED_LEFT)),c(new Ap(null)),c(new Ap(fe.PINNED_RIGHT))},i.TEMPLATE='<div class="ag-header" role="presentation" unselectable="on"/>',function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Qe],i.prototype,"postConstruct",null),i}(pn),kM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Fg=function(){return Fg=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Fg.apply(this,arguments)},Jo=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},xx=function(d){function i(){var s=null!==d&&d.apply(this,arguments)||this;return s.allAdvancedFilters=new Map,s.activeAdvancedFilters=[],s.quickFilter=null,s.quickFilterParts=null,s.processingFilterChange=!1,s}var e;return kM(i,d),e=i,i.prototype.init=function(){this.addManagedListener(this.eventService,$.EVENT_ROW_DATA_CHANGED,this.onNewRowsLoaded.bind(this)),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.quickFilter=this.parseQuickFilter(this.gridOptionsWrapper.getQuickFilterText()),this.setQuickFilterParts(),this.allowShowChangeAfterFilter=this.gridOptionsWrapper.isAllowShowChangeAfterFilter()},i.prototype.setQuickFilterParts=function(){this.quickFilterParts=this.quickFilter?this.quickFilter.split(" "):null},i.prototype.setFilterModel=function(s){var l=this,c=[],h=this.getFilterModel();if(s){var m=ng(Object.keys(s));this.allAdvancedFilters.forEach(function(w,R){c.push(l.setModelOnFilterWrapper(w.filterPromise,s[R])),m.delete(R)}),m.forEach(function(w){var R=l.columnModel.getPrimaryColumn(w);if(R)if(R.isFilterAllowed()){var T=l.getOrCreateFilterWrapper(R,"NO_UI");c.push(l.setModelOnFilterWrapper(T.filterPromise,s[w]))}else console.warn("AG-Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+w);else console.warn("AG-Grid: setFilterModel() - no column found for colId: "+w)})}else this.allAdvancedFilters.forEach(function(w){c.push(l.setModelOnFilterWrapper(w.filterPromise,null))});Zr.all(c).then(function(){var w=l.getFilterModel(),R=[];l.allAdvancedFilters.forEach(function(T,L){yt.jsonEquals(h?h[L]:null,w?w[L]:null)||R.push(T.column)}),R.length>0&&l.onFilterChanged({columns:R})})},i.prototype.setModelOnFilterWrapper=function(s,l){return new Zr(function(c){s.then(function(h){"function"!=typeof h.setModel&&(console.warn("Warning ag-grid - filter missing setModel method, which is needed for setFilterModel"),c()),(h.setModel(l)||Zr.resolve()).then(function(){return c()})})})},i.prototype.getFilterModel=function(){var s={};return this.allAdvancedFilters.forEach(function(l,c){var m=l.filterPromise.resolveNow(null,function(R){return R});if(null==m)return null;if("function"==typeof m.getModel){var w=m.getModel();Fe(w)&&(s[c]=w)}else console.warn("Warning ag-grid - filter API missing getModel method, which is needed for getFilterModel")}),s},i.prototype.isAdvancedFilterPresent=function(){return this.activeAdvancedFilters.length>0},i.prototype.updateActiveFilters=function(){var s=this;this.activeAdvancedFilters.length=0;var l=function(h){return!!h&&(h.isFilterActive?h.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1))};this.allAdvancedFilters.forEach(function(c){if(c.filterPromise.resolveNow(!1,l)){var h=c.filterPromise.resolveNow(null,function(m){return m});s.activeAdvancedFilters.push(h)}})},i.prototype.updateFilterFlagInColumns=function(s,l){this.allAdvancedFilters.forEach(function(c){var h=c.filterPromise.resolveNow(!1,function(m){return m.isFilterActive()});c.column.setFilterActive(h,s,l)})},i.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.isAdvancedFilterPresent()||this.gridOptionsWrapper.isExternalFilterPresent()},i.prototype.doAdvancedFiltersPass=function(s,l){for(var c=s.data,h=0;h<this.activeAdvancedFilters.length;h++){var m=this.activeAdvancedFilters[h];if(null!=m&&m!==l){if("function"!=typeof m.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!m.doesFilterPass({node:s,data:c}))return!1}}return!0},i.prototype.parseQuickFilter=function(s){return Fe(s)?this.gridOptionsWrapper.isRowModelDefault()?s.toUpperCase():(console.warn("ag-grid: quick filtering only works with the Client-Side Row Model"),null):null},i.prototype.setQuickFilter=function(s){var l=this.parseQuickFilter(s);this.quickFilter!==l&&(this.quickFilter=l,this.setQuickFilterParts(),this.onFilterChanged())},i.prototype.onFilterChanged=function(s){void 0===s&&(s={});var l=s.filterInstance,c=s.additionalEventAttributes,h=s.columns;this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",c),this.allAdvancedFilters.forEach(function(w){!w.filterPromise||w.filterPromise.then(function(R){R&&R!==l&&R.onAnyFilterChanged&&R.onAnyFilterChanged()})});var m={type:$.EVENT_FILTER_CHANGED,api:this.gridApi,columnApi:this.columnApi,columns:h||[]};c&&ao(m,c),this.processingFilterChange=!0,this.eventService.dispatchEvent(m),this.processingFilterChange=!1},i.prototype.isSuppressFlashingCellsBecauseFiltering=function(){return!this.allowShowChangeAfterFilter&&this.processingFilterChange},i.prototype.isQuickFilterPresent=function(){return null!==this.quickFilter},i.prototype.doesRowPassOtherFilters=function(s,l){return this.doesRowPassFilter({rowNode:l,filterInstanceToSkip:s})},i.prototype.doesRowPassQuickFilterNoCache=function(s,l){var c=this;return $t(this.columnModel.getAllColumnsForQuickFilter(),function(m){var w=c.getQuickFilterTextForColumn(m,s);return Fe(w)&&w.indexOf(l)>=0})},i.prototype.doesRowPassQuickFilterCache=function(s,l){return s.quickFilterAggregateText||this.aggregateRowForQuickFilter(s),s.quickFilterAggregateText.indexOf(l)>=0},i.prototype.doesRowPassQuickFilter=function(s){var l=this,c=this.gridOptionsWrapper.isCacheQuickFilter();return nn(this.quickFilterParts,function(h){return c?l.doesRowPassQuickFilterCache(s,h):l.doesRowPassQuickFilterNoCache(s,h)})},i.prototype.doesRowPassFilter=function(s){return!(this.isQuickFilterPresent()&&!this.doesRowPassQuickFilter(s.rowNode)||this.gridOptionsWrapper.isExternalFilterPresent()&&!this.gridOptionsWrapper.doesExternalFilterPass(s.rowNode)||this.isAdvancedFilterPresent()&&!this.doAdvancedFiltersPass(s.rowNode,s.filterInstanceToSkip))},i.prototype.getQuickFilterTextForColumn=function(s,l){var c=this.valueService.getValue(s,l,!0),h=s.getColDef();if(h.getQuickFilterText){var m={value:c,node:l,data:l.data,column:s,colDef:h,context:this.gridOptionsWrapper.getContext()};c=h.getQuickFilterText(m)}return Fe(c)?c.toString().toUpperCase():null},i.prototype.aggregateRowForQuickFilter=function(s){var l=this,c=[];Wt(this.columnModel.getAllColumnsForQuickFilter(),function(m){var w=l.getQuickFilterTextForColumn(m,s);Fe(w)&&c.push(w)}),s.quickFilterAggregateText=c.join(e.QUICK_FILTER_SEPARATOR)},i.prototype.onNewRowsLoaded=function(s){this.allAdvancedFilters.forEach(function(l){l.filterPromise.then(function(c){c.onNewRowsLoaded&&c.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(s),this.updateActiveFilters()},i.prototype.createValueGetter=function(s){var l=this;return function(c){return l.valueService.getValue(s,c,!0)}},i.prototype.getFilterComponent=function(s,l,c){if(void 0===c&&(c=!0),c)return this.getOrCreateFilterWrapper(s,l).filterPromise;var h=this.cachedFilter(s);return h?h.filterPromise:null},i.prototype.isFilterActive=function(s){var l=this.cachedFilter(s);return!!l&&l.filterPromise.resolveNow(!1,function(c){return c.isFilterActive()})},i.prototype.getOrCreateFilterWrapper=function(s,l){var c=this.cachedFilter(s);return c?"NO_UI"!==l&&this.putIntoGui(c,l):(c=this.createFilterWrapper(s,l),this.allAdvancedFilters.set(s.getColId(),c)),c},i.prototype.cachedFilter=function(s){return this.allAdvancedFilters.get(s.getColId())},i.prototype.createFilterInstance=function(s,l){var w,c=this,h=qt.isRegistered(Y.GXE.SetFilterModule)?"agSetColumnFilter":"agTextColumnFilter",m=s.getColDef(),R=Fg(Fg({},this.createFilterParams(s,m,l)),{filterModifiedCallback:function(){c.eventService.dispatchEvent({type:$.EVENT_FILTER_MODIFIED,api:c.gridApi,columnApi:c.columnApi,column:s,filterInstance:w})},filterChangedCallback:function(K){return c.onFilterChanged({filterInstance:w,additionalEventAttributes:K,columns:[s]})},doesRowPassOtherFilter:function(K){return c.doesRowPassOtherFilters(w,K)}}),T=this.userComponentFactory.getFilterDetails(m,R,h);if(!T)return null;var L=T.newAgStackInstance();return L&&L.then(function(U){return w=U}),L},i.prototype.createFilterParams=function(s,l,c){void 0===c&&(c=null);var h={api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),column:s,colDef:cs(l),rowModel:this.rowModel,filterChangedCallback:function(){},filterModifiedCallback:function(){},valueGetter:this.createValueGetter(s),context:this.gridOptionsWrapper.getContext(),doesRowPassOtherFilter:function(){return!0}};return c&&(h.$scope=c),h},i.prototype.createFilterWrapper=function(s,l){var c={column:s,filterPromise:null,scope:null,compiledElement:null,guiPromise:Zr.resolve(null)};return c.scope=this.gridOptionsWrapper.isAngularCompileFilters()?this.$scope.$new():null,c.filterPromise=this.createFilterInstance(s,c.scope),c.filterPromise&&this.putIntoGui(c,l),c},i.prototype.putIntoGui=function(s,l){var c=this,h=document.createElement("div");h.className="ag-filter",s.guiPromise=new Zr(function(m){s.filterPromise.then(function(w){var R=w.getGui();if(Fe(R)||console.warn("getGui method from filter returned "+R+", it should be a DOM element or an HTML template string."),"string"==typeof R&&(R=sa(R)),h.appendChild(R),s.scope){var T=c.$compile(h)(s.scope);s.compiledElement=T,window.setTimeout(function(){return s.scope.$apply()},0)}m(h),c.eventService.dispatchEvent({type:$.EVENT_FILTER_OPENED,column:s.column,source:l,eGui:h,api:c.gridApi,columnApi:c.columnApi})})})},i.prototype.onNewColumnsLoaded=function(){var s=this,l=!1,c=[];this.allAdvancedFilters.forEach(function(h){!s.columnModel.getPrimaryColumn(h.column)&&(l=!0,c.push(h.column),s.disposeFilterWrapper(h,"filterDestroyed"))}),l&&this.onFilterChanged({columns:c})},i.prototype.destroyFilter=function(s,l){void 0===l&&(l="api");var c=this.allAdvancedFilters.get(s.getColId());c&&(this.disposeFilterWrapper(c,l),this.onFilterChanged({columns:[s]}))},i.prototype.disposeFilterWrapper=function(s,l){var c=this;s.filterPromise.then(function(h){(h.setModel(null)||Zr.resolve()).then(function(){c.getContext().destroyBean(h),s.column.setFilterActive(!1,l),s.scope&&(s.compiledElement&&s.compiledElement.remove(),s.scope.$destroy()),c.allAdvancedFilters.delete(s.column.getColId())})})},i.prototype.destroy=function(){var s=this;d.prototype.destroy.call(this),this.allAdvancedFilters.forEach(function(l){return s.disposeFilterWrapper(l,"filterDestroyed")})},i.QUICK_FILTER_SEPARATOR="\n",Jo([H("$compile")],i.prototype,"$compile",void 0),Jo([H("$scope")],i.prototype,"$scope",void 0),Jo([H("valueService")],i.prototype,"valueService",void 0),Jo([H("columnModel")],i.prototype,"columnModel",void 0),Jo([H("rowModel")],i.prototype,"rowModel",void 0),Jo([H("columnApi")],i.prototype,"columnApi",void 0),Jo([H("gridApi")],i.prototype,"gridApi",void 0),Jo([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Jo([Qe],i.prototype,"init",null),Jo([Fi],i.prototype,"destroy",null),e=Jo([vt("filterManager")],i)}(Ke),Ao=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ku=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Mp=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.initialised=!1,e}return Ao(i,d),i.prototype.init=function(){this.cellExpressions=this.gridOptionsWrapper.isEnableCellExpressions(),this.initialised=!0},i.prototype.getValue=function(e,s,l,c){if(void 0===l&&(l=!1),void 0===c&&(c=!1),this.initialised||this.init(),s){var T,h=e.getColDef(),m=h.field,w=e.getId(),R=s.data,L=s.groupData&&void 0!==s.groupData[w],U=!c&&s.aggData&&void 0!==s.aggData[w];if(l&&h.filterValueGetter?T=this.executeFilterValueGetter(h.filterValueGetter,R,e,s):this.gridOptionsWrapper.isTreeData()&&U?T=s.aggData[w]:this.gridOptionsWrapper.isTreeData()&&h.valueGetter?T=this.executeValueGetter(h.valueGetter,R,e,s):this.gridOptionsWrapper.isTreeData()&&m&&R?T=Pf(R,m,e.isFieldContainsDots()):L?T=s.groupData[w]:U?T=s.aggData[w]:h.valueGetter?T=this.executeValueGetter(h.valueGetter,R,e,s):m&&R&&(T=Pf(R,m,e.isFieldContainsDots())),this.cellExpressions&&"string"==typeof T&&0===T.indexOf("=")){var K=T.substring(1);T=this.executeValueGetter(K,R,e,s)}if(null==T){var Q=this.getOpenedGroup(s,e);if(null!=Q)return Q}return T}},i.prototype.getOpenedGroup=function(e,s){if(this.gridOptionsWrapper.isShowOpenedGroup()&&s.getColDef().showRowGroup)for(var c=s.getColDef().showRowGroup,h=e.parent;null!=h;){if(h.rowGroupColumn&&(!0===c||c===h.rowGroupColumn.getId()))return h.key;h=h.parent}},i.prototype.setValue=function(e,s,l,c){var h=this.columnModel.getPrimaryColumn(s);if(e&&h){Ce(e.data)&&(e.data={});var m=h.getColDef(),w=m.field,R=m.newValueHandler,T=m.valueSetter;if(Ce(w)&&Ce(R)&&Ce(T))return void console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work");var U,L={node:e,data:e.data,oldValue:this.getValue(h,e),newValue:l,colDef:h.getColDef(),column:h,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};if(L.newValue=l,void 0===(U=R&&Fe(R)?R(L):Fe(T)?this.expressionService.evaluate(T,L):this.setValueUsingField(e.data,w,l,h.isFieldContainsDots()))&&(U=!0),U){e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),L.newValue=this.getValue(h,e);var K=h.getColDef().onCellValueChanged;"function"==typeof K&&setTimeout(function(){return K(L)},0),this.eventService.dispatchEvent({type:$.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:L.column,api:L.api,columnApi:L.columnApi,colDef:L.colDef,context:L.context,data:e.data,node:e,oldValue:L.oldValue,newValue:L.newValue,value:L.newValue,source:c})}}},i.prototype.setValueUsingField=function(e,s,l,c){if(!s)return!1;if(c)for(var m=s.split("."),w=e;m.length>0&&w;){var R=m.shift();0===m.length?w[R]=l:w=w[R]}else e[s]=l;return!0},i.prototype.executeFilterValueGetter=function(e,s,l,c){var h={data:s,node:c,column:l,colDef:l.getColDef(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),getValue:this.getValueCallback.bind(this,c)};return this.expressionService.evaluate(e,h)},i.prototype.executeValueGetter=function(e,s,l,c){var h=l.getId(),m=this.valueCache.getValue(c,h);if(void 0!==m)return m;var w={data:s,node:c,column:l,colDef:l.getColDef(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),getValue:this.getValueCallback.bind(this,c)},R=this.expressionService.evaluate(e,w);return this.valueCache.setValue(c,h,R),R},i.prototype.getValueCallback=function(e,s){var l=this.columnModel.getPrimaryColumn(s);return l?this.getValue(l,e):null},i.prototype.getKeyForNode=function(e,s){var l=this.getValue(e,s),c=e.getColDef().keyCreator,h=l;return c&&(h=c({value:l,colDef:e.getColDef(),column:e,node:s,data:s.data,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()})),"string"==typeof h||null==h||"[object Object]"===(h=String(h))&&vn(function(){console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")},"getKeyForNode - warn about [object,object]"),h},Ku([H("expressionService")],i.prototype,"expressionService",void 0),Ku([H("columnModel")],i.prototype,"columnModel",void 0),Ku([H("valueCache")],i.prototype,"valueCache",void 0),Ku([Qe],i.prototype,"init",null),Ku([vt("valueService")],i)}(Ke),Rx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ng=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};!function(d){d.AUTO_HEIGHT="ag-layout-auto-height",d.NORMAL="ag-layout-normal",d.PRINT="ag-layout-print"}(Y.LBn||(Y.LBn={}));var Yu=function(d){function i(e){var s=d.call(this)||this;return s.view=e,s}return Rx(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()},i.prototype.updateLayoutClasses=function(){var e=this.gridOptionsWrapper.getDomLayout(),s={autoHeight:e===fe.DOM_LAYOUT_AUTO_HEIGHT,normal:e===fe.DOM_LAYOUT_NORMAL,print:e===fe.DOM_LAYOUT_PRINT};this.view.updateLayoutClasses(s.autoHeight?Y.LBn.AUTO_HEIGHT:s.print?Y.LBn.PRINT:Y.LBn.NORMAL,s)},Ng([H("gridOptionsWrapper")],i.prototype,"gridOptionsWrapper",void 0),Ng([Qe],i.prototype,"postConstruct",null),i}(Ke),HC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),fa=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},kg=function(d){function i(e){var s=d.call(this)||this;return s.scrollLeft=-1,s.nextScrollTop=-1,s.scrollTop=-1,s.eBodyViewport=e,s.resetLastHorizontalScrollElementDebounced=Mu(s.resetLastHorizontalScrollElement.bind(s),500),s}return HC(i,d),i.prototype.postConstruct=function(){var e=this;this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(function(s){e.centerRowContainerCon=s.centerRowContainerCtrl,e.onDisplayedColumnsWidthChanged(),e.addScrollListener()})},i.prototype.addScrollListener=function(){var e=this.ctrlsService.getFakeHScrollCtrl();this.addManagedListener(this.centerRowContainerCon.getViewportElement(),"scroll",this.onCenterViewportScroll.bind(this)),this.addManagedListener(e.getViewport(),"scroll",this.onFakeHorizontalScroll.bind(this));var s=this.gridOptionsWrapper.isDebounceVerticalScrollbar()?Mu(this.onVerticalScroll.bind(this),100):this.onVerticalScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",s)},i.prototype.onDisplayedColumnsWidthChanged=function(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},i.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(e){void 0===e&&(e=this.centerRowContainerCon.getCenterViewportScrollLeft());var s=this.enableRtl?e:-e,l=this.ctrlsService.getTopCenterRowContainerCtrl(),c=this.ctrlsService.getBottomCenterRowContainerCtrl(),h=this.ctrlsService.getFakeHScrollCtrl();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(s),c.setContainerTranslateX(s),l.setContainerTranslateX(s),Xc(this.lastHorizontalScrollElement===this.centerRowContainerCon.getViewportElement()?h.getViewport():this.centerRowContainerCon.getViewportElement(),Math.abs(e),this.enableRtl)},i.prototype.isControllingScroll=function(e){return this.lastHorizontalScrollElement?e===this.lastHorizontalScrollElement:(this.lastHorizontalScrollElement=e,!0)},i.prototype.onFakeHorizontalScroll=function(){var e=this.ctrlsService.getFakeHScrollCtrl().getViewport();!this.isControllingScroll(e)||this.onBodyHorizontalScroll(e)},i.prototype.onCenterViewportScroll=function(){var e=this.centerRowContainerCon.getViewportElement();!this.isControllingScroll(e)||this.onBodyHorizontalScroll(e)},i.prototype.onBodyHorizontalScroll=function(e){var s=this.centerRowContainerCon.getViewportElement();this.shouldBlockScrollUpdate("horizontal",s.scrollLeft,!0)||(this.doHorizontalScroll(Math.round($c(e,this.enableRtl))),this.resetLastHorizontalScrollElementDebounced())},i.prototype.onVerticalScroll=function(){var e=this.eBodyViewport.scrollTop;this.shouldBlockScrollUpdate("vertical",e,!0)||(this.animationFrameService.setScrollTop(e),this.nextScrollTop=e,this.gridOptionsWrapper.isSuppressAnimationFrame()?(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()):this.animationFrameService.schedule())},i.prototype.resetLastHorizontalScrollElement=function(){this.lastHorizontalScrollElement=null},i.prototype.doHorizontalScroll=function(e){var l=$c(this.ctrlsService.getFakeHScrollCtrl().getViewport(),this.enableRtl);this.scrollLeft===e&&e===l||(this.scrollLeft=e,this.fireScrollEvent("horizontal"),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.onHorizontalViewportChanged())},i.prototype.fireScrollEvent=function(e){var s=this,l={type:$.EVENT_BODY_SCROLL,api:this.gridApi,columnApi:this.columnApi,direction:e,left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(l),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(function(){var c=ii({},l,{type:$.EVENT_BODY_SCROLL_END});s.eventService.dispatchEvent(c)},100)},i.prototype.shouldBlockScrollUpdate=function(e,s,l){if(void 0===l&&(l=!1),l&&!Zs())return!1;if("vertical"===e){var c=Al(this.eBodyViewport);if(s<0||s+c>this.eBodyViewport.scrollHeight)return!0}if("horizontal"===e){var m=this.centerRowContainerCon.getCenterWidth(),w=this.centerRowContainerCon.getViewportElement().scrollWidth;if(this.enableRtl&&Mr()){if(s>0)return!0}else if(s<0)return!0;if(Math.abs(s)+m>w)return!0}return!1},i.prototype.redrawRowsAfterScroll=function(){this.fireScrollEvent("vertical")},i.prototype.onHorizontalViewportChanged=function(){this.centerRowContainerCon.onHorizontalViewportChanged()},i.prototype.checkScrollLeft=function(){this.scrollLeft!==this.centerRowContainerCon.getCenterViewportScrollLeft()&&this.onBodyHorizontalScroll(this.centerRowContainerCon.getViewportElement())},i.prototype.executeAnimationFrameScroll=function(){var e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e},i.prototype.setHorizontalScrollPosition=function(e){var l=this.centerRowContainerCon.getViewportElement().scrollWidth-this.centerRowContainerCon.getCenterWidth();this.shouldBlockScrollUpdate("horizontal",e)&&(e=this.enableRtl&&Mr()?e>0?0:l:Math.min(Math.max(e,0),l)),Xc(this.centerRowContainerCon.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)},i.prototype.setVerticalScrollPosition=function(e){this.eBodyViewport.scrollTop=e},i.prototype.getVScrollPosition=function(){return{top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight}},i.prototype.getHScrollPosition=function(){return this.centerRowContainerCon.getHScrollPosition()},i.prototype.isHorizontalScrollShowing=function(){return this.centerRowContainerCon.isHorizontalScrollShowing()},i.prototype.scrollHorizontally=function(e){var s=this.centerRowContainerCon.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(s+e),this.centerRowContainerCon.getViewportElement().scrollLeft-s},i.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},i.prototype.ensureNodeVisible=function(e,s){void 0===s&&(s=null);for(var l=this.rowModel.getRowCount(),c="function"==typeof e,h=-1,m=0;m<l;m++){var w=this.rowModel.getRow(m);if(c){if(e(w)){h=m;break}}else if(e===w||e===w.data){h=m;break}}h>=0&&this.ensureIndexVisible(h,s)},i.prototype.ensureIndexVisible=function(e,s){if(this.gridOptionsWrapper.getDomLayout()!==fe.DOM_LAYOUT_PRINT){var l=this.paginationProxy.getRowCount();if("number"!=typeof e||e<0||e>=l)return void console.warn("invalid row index for ensureIndexVisible: "+e);this.gridOptionsWrapper.isPagination()&&!this.gridOptionsWrapper.isSuppressPaginationPanel()||this.paginationProxy.goToPageWithIndex(e);var w,m=this.paginationProxy.getRow(e);do{var R=m.rowTop,T=m.rowHeight,L=this.paginationProxy.getPixelOffset(),U=m.rowTop-L,K=U+m.rowHeight,Q=this.getVScrollPosition(),oe=this.heightScaler.getDivStretchOffset(),Te=Q.top+oe,He=Q.bottom+oe,Ve=He-Te,Pe=this.heightScaler.getScrollPositionForPixel(U),Ze=this.heightScaler.getScrollPositionForPixel(K-Ve),Re=Math.min((Pe+Ze)/2,U),mn=null;"top"===s?mn=Pe:"bottom"===s?mn=Ze:"middle"===s?mn=Re:Te>U?mn=Pe:He<K&&(mn=Ze),null!==mn&&(this.eBodyViewport.scrollTop=mn,this.rowRenderer.redrawAfterScroll()),w=R!==m.rowTop||T!==m.rowHeight}while(w);this.animationFrameService.flushAllFrames()}},i.prototype.ensureColumnVisible=function(e){var s=this.columnModel.getGridColumn(e);if(s&&!s.isPinned()&&this.columnModel.isColumnDisplayed(s)){var R,T,l=s.getLeft(),c=l+s.getActualWidth(),h=this.centerRowContainerCon.getCenterWidth(),m=this.centerRowContainerCon.getCenterViewportScrollLeft(),w=this.columnModel.getBodyContainerWidth();this.enableRtl?(R=w-m-h,T=w-m):(R=m,T=h+m);var L=R>l,U=T<c,K=h<s.getActualWidth(),Q=L||K;(Q||U)&&this.centerRowContainerCon.setCenterViewportScrollLeft(this.enableRtl?Q?w-h-l:w-c:Q?l:c-h),this.centerRowContainerCon.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}},fa([H("ctrlsService")],i.prototype,"ctrlsService",void 0),fa([H("animationFrameService")],i.prototype,"animationFrameService",void 0),fa([H("columnApi")],i.prototype,"columnApi",void 0),fa([H("gridApi")],i.prototype,"gridApi",void 0),fa([H("paginationProxy")],i.prototype,"paginationProxy",void 0),fa([H("rowModel")],i.prototype,"rowModel",void 0),fa([H("rowContainerHeightService")],i.prototype,"heightScaler",void 0),fa([H("rowRenderer")],i.prototype,"rowRenderer",void 0),fa([H("columnModel")],i.prototype,"columnModel",void 0),fa([Qe],i.prototype,"postConstruct",null),i}(Ke),Op=function(){function d(i){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=i.scrollContainer,this.scrollHorizontally=-1!==i.scrollAxis.indexOf("x"),this.scrollVertically=-1!==i.scrollAxis.indexOf("y"),this.scrollByTick=null!=i.scrollByTick?i.scrollByTick:20,i.onScrollCallback&&(this.onScrollCallback=i.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=i.getVerticalPosition,this.setVerticalPosition=i.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=i.getHorizontalPosition,this.setHorizontalPosition=i.setHorizontalPosition),this.shouldSkipVerticalScroll=i.shouldSkipVerticalScroll||function(){return!1},this.shouldSkipHorizontalScroll=i.shouldSkipHorizontalScroll||function(){return!1}}return d.prototype.check=function(i,e){void 0===e&&(e=!1);var s=e||this.shouldSkipVerticalScroll();if(!s||!this.shouldSkipHorizontalScroll()){var l=this.scrollContainer.getBoundingClientRect(),c=this.scrollByTick;this.tickLeft=i.clientX<l.left+c,this.tickRight=i.clientX>l.right-c,this.tickUp=i.clientY<l.top+c&&!s,this.tickDown=i.clientY>l.bottom-c&&!s,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}},d.prototype.ensureTickingStarted=function(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)},d.prototype.doTick=function(){var i;if(this.tickCount++,i=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){var e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-i),this.tickDown&&this.setVerticalPosition(e+i)}if(this.scrollHorizontally){var s=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(s-i),this.tickRight&&this.setHorizontalPosition(s+i)}this.onScrollCallback&&this.onScrollCallback()},d.prototype.ensureCleared=function(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)},d}(),VC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),WC=function(){return WC=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},WC.apply(this,arguments)},Ei=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Pp=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s},UC=function(d){function i(e){var s=d.call(this)||this;return s.isMultiRowDrag=!1,s.isGridSorted=!1,s.isGridFiltered=!1,s.isRowGroupActive=!1,s.eContainer=e,s}return VC(i,d),i.prototype.postConstruct=function(){var e=this;this.gridOptionsWrapper.isRowModelDefault()&&(this.clientSideRowModel=this.rowModel);var s=function(){e.onSortChanged(),e.onFilterChanged(),e.onRowGroupChanged()};this.addManagedListener(this.eventService,$.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_MODEL_UPDATED,function(){s()}),s(),this.ctrlsService.whenReady(function(){var l=e.ctrlsService.getGridBodyCtrl();e.autoScrollService=new Op({scrollContainer:l.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:function(){return l.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(h){return l.getScrollFeature().setVerticalScrollPosition(h)},onScrollCallback:function(){e.onDragging(e.lastDraggingEvent)}})})},i.prototype.onSortChanged=function(){this.isGridSorted=this.sortController.isSortActive()},i.prototype.onFilterChanged=function(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()},i.prototype.onRowGroupChanged=function(){var e=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!ni(e)},i.prototype.getContainer=function(){return this.eContainer},i.prototype.isInterestedIn=function(e){return e===Y.rvo.RowDrag},i.prototype.getIconName=function(){return this.gridOptionsWrapper.isRowDragManaged()&&this.shouldPreventRowMove()?Vi.ICON_NOT_ALLOWED:Vi.ICON_MOVE},i.prototype.shouldPreventRowMove=function(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive},i.prototype.getRowNodes=function(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];var s=this.gridOptionsWrapper.isRowDragMultiRow(),l=this.selectionService.getSelectedNodes(),c=e.dragItem.rowNode;return s&&-1!==l.indexOf(c)?(this.isMultiRowDrag=!0,Pp(l)):(this.isMultiRowDrag=!1,[c])},i.prototype.onDragEnter=function(e){this.dispatchGridEvent($.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach(function(s){s.setDragging(!0)}),this.onEnterOrDragging(e)},i.prototype.onDragging=function(e){this.onEnterOrDragging(e)},i.prototype.isFromThisGrid=function(e){return e.dragSource.dragSourceDomDataKey===this.gridOptionsWrapper.getDomDataKey()},i.prototype.isDropZoneWithinThisGrid=function(e){return!this.ctrlsService.getGridBodyCtrl().getGui().contains(e.dropZoneTarget)},i.prototype.onEnterOrDragging=function(e){this.dispatchGridEvent($.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;var s=this.mouseEventService.getNormalisedPosition(e).y;this.gridOptionsWrapper.isRowDragManaged()&&this.doManagedDrag(e,s),this.autoScrollService.check(e.event)},i.prototype.doManagedDrag=function(e,s){var c,l=this,h=this.isFromThisGrid(e);h?(c=[e.dragItem.rowNode],this.isMultiRowDrag&&(c=Pp(this.selectionService.getSelectedNodes()).sort(function(w,R){return l.getRowIndexNumber(w)-l.getRowIndexNumber(R)})),e.dragItem.rowNodes=c):c=e.dragItem.rowNodes,this.gridOptionsWrapper.isRowDragManaged()&&this.shouldPreventRowMove()||(this.gridOptionsWrapper.isSuppressMoveWhenRowDragging()||!h?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(c[0],s):this.moveRows(c,s))},i.prototype.getRowIndexNumber=function(e){return parseInt(zn(e.getRowIndexString().split("-")),10)},i.prototype.moveRowAndClearHighlight=function(e){var s=this,l=this.clientSideRowModel.getLastHighlightedRowNode(),c=l&&l.highlighted===Y.oh5.Below,h=this.mouseEventService.getNormalisedPosition(e).y,m=e.dragItem.rowNodes,w=c?1:0;if(this.isFromThisGrid(e))m.forEach(function(L){L.rowTop<h&&(w-=1)}),this.moveRows(m,h,w);else{var R=this.gridOptionsWrapper.getRowNodeIdFunc(),T=this.clientSideRowModel.getRowIndexAtPixel(h)+1;this.clientSideRowModel.getHighlightPosition(h)===Y.oh5.Above&&T--,this.clientSideRowModel.updateRowData({add:m.map(function(L){return L.data}).filter(function(L){return!s.clientSideRowModel.getRowNode(R?R(L):L.id)}),addIndex:T})}this.clearRowHighlight()},i.prototype.clearRowHighlight=function(){this.clientSideRowModel.highlightRowAtPixel(null)},i.prototype.moveRows=function(e,s,l){void 0===l&&(l=0),this.clientSideRowModel.ensureRowsAtPixel(e,s,l)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())},i.prototype.addRowDropZone=function(e){var s=this;if(e.getContainer())if(this.dragAndDropService.findExternalZone(e))console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");else{var l={getContainer:e.getContainer};e.fromGrid?(e.fromGrid=void 0,l=e):(e.onDragEnter&&(l.onDragEnter=function(c){e.onDragEnter(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_ENTER,c))}),e.onDragLeave&&(l.onDragLeave=function(c){e.onDragLeave(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_LEAVE,c))}),e.onDragging&&(l.onDragging=function(c){e.onDragging(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_MOVE,c))}),e.onDragStop&&(l.onDragStop=function(c){e.onDragStop(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_END,c))})),this.dragAndDropService.addDropTarget(WC({isInterestedIn:function(h){return h===Y.rvo.RowDrag},getIconName:function(){return Vi.ICON_MOVE},external:!0},l))}else vn(function(){return console.warn("AG Grid: addRowDropZone - A container target needs to be provided")},"add-drop-zone-empty-target")},i.prototype.getRowDropZone=function(e){var s=this,l=this.getContainer.bind(this),c=this.onDragEnter.bind(this),h=this.onDragLeave.bind(this),m=this.onDragging.bind(this),w=this.onDragStop.bind(this);return e?{getContainer:l,onDragEnter:e.onDragEnter?function(R){c(R),e.onDragEnter(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_ENTER,R))}:c,onDragLeave:e.onDragLeave?function(R){h(R),e.onDragLeave(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_LEAVE,R))}:h,onDragging:e.onDragging?function(R){m(R),e.onDragging(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_MOVE,R))}:m,onDragStop:e.onDragStop?function(R){w(R),e.onDragStop(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_END,R))}:w,fromGrid:!0}:{getContainer:l,onDragEnter:c,onDragLeave:h,onDragging:m,onDragStop:w,fromGrid:!0}},i.prototype.draggingToRowDragEvent=function(e,s){var m,w,l=this.mouseEventService.getNormalisedPosition(s).y,h=-1;switch(l>this.paginationProxy.getCurrentPageHeight()||(h=this.rowModel.getRowIndexAtPixel(l),m=this.rowModel.getRow(h)),s.vDirection){case Y.HO_.Down:w="down";break;case Y.HO_.Up:w="up";break;default:w=null}return{type:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),event:s.event,node:s.dragItem.rowNode,nodes:s.dragItem.rowNodes,overIndex:h,overNode:m,y:l,vDirection:w}},i.prototype.dispatchGridEvent=function(e,s){var l=this.draggingToRowDragEvent(e,s);this.eventService.dispatchEvent(l)},i.prototype.onDragLeave=function(e){this.dispatchGridEvent($.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gridOptionsWrapper.isRowDragManaged()&&this.clearRowHighlight(),this.isFromThisGrid(e)&&(this.isMultiRowDrag=!1)},i.prototype.onDragStop=function(e){this.dispatchGridEvent($.EVENT_ROW_DRAG_END,e),this.stopDragging(e),this.gridOptionsWrapper.isRowDragManaged()&&(this.gridOptionsWrapper.isSuppressMoveWhenRowDragging()||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)},i.prototype.stopDragging=function(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(function(s){s.setDragging(!1)})},Ei([H("dragAndDropService")],i.prototype,"dragAndDropService",void 0),Ei([H("rowModel")],i.prototype,"rowModel",void 0),Ei([H("paginationProxy")],i.prototype,"paginationProxy",void 0),Ei([H("columnModel")],i.prototype,"columnModel",void 0),Ei([H("focusService")],i.prototype,"focusService",void 0),Ei([H("sortController")],i.prototype,"sortController",void 0),Ei([H("filterManager")],i.prototype,"filterManager",void 0),Ei([H("selectionService")],i.prototype,"selectionService",void 0),Ei([H("mouseEventService")],i.prototype,"mouseEventService",void 0),Ei([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Ei([Nn("rangeService")],i.prototype,"rangeService",void 0),Ei([Qe],i.prototype,"postConstruct",null),i}(Ke),Tx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Qi=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};!function(d){d.ANIMATION_ON="ag-row-animation",d.ANIMATION_OFF="ag-row-no-animation"}(Y.SJN||(Y.SJN={}));var zC="ag-selectable",jC="ag-force-vertical-scroll",qC="ag-column-moving",KC=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.angularApplyTriggered=!1,e}return Tx(i,d),i.prototype.getScrollFeature=function(){return this.bodyScrollFeature},i.prototype.getBodyViewportElement=function(){return this.eBodyViewport},i.prototype.setComp=function(e,s,l,c,h){this.comp=e,this.eGridBody=s,this.eBodyViewport=l,this.eTop=c,this.eBottom=h,this.setCellTextSelection(this.gridOptionsWrapper.isEnableCellTextSelect()),this.createManagedBean(new Yu(this.comp)),this.bodyScrollFeature=this.createManagedBean(new kg(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.ctrlsService.registerGridBodyCtrl(this),this.addEventListeners(),this.addFocusListeners([c,l,h]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.$scope&&this.addAngularApplyCheck()},i.prototype.getComp=function(){return this.comp},i.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,$.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_PINNED_ROW_DATA_CHANGED,this.setFloatingHeights.bind(this))},i.prototype.addFocusListeners=function(e){var s=this;e.forEach(function(l){s.addManagedListener(l,"focusin",function(){Dt(l,"ag-has-focus")}),s.addManagedListener(l,"focusout",function(c){l.contains(c.relatedTarget)||yi(l,"ag-has-focus")})})},i.prototype.setColumnMovingCss=function(e){this.comp.setColumnMovingCss(e?qC:null,e)},i.prototype.setCellTextSelection=function(e){void 0===e&&(e=!1),this.comp.setCellSelectableCss(e?zC:null,e)},i.prototype.onScrollVisibilityChanged=function(){var e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e)},i.prototype.onGridColumnsChanged=function(){var e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e?e.length:0)},i.prototype.disableBrowserDragging=function(){this.addManagedListener(this.eGridBody,"dragstart",function(e){if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})},i.prototype.addStopEditingWhenGridLosesFocus=function(){var e=this;if(this.gridOptionsWrapper.isStopEditingWhenCellsLoseFocus()){var s=function(h){var m=h.relatedTarget;if(null!==Uf(m)){var w=l.some(function(T){return T.contains(m)})&&e.mouseEventService.isElementInThisGrid(m);if(!w){var R=e.popupService;w=R.getActivePopups().some(function(T){return T.contains(m)})||R.isElementWithinCustomPopup(m)}w||e.rowRenderer.stopEditing()}else e.rowRenderer.stopEditing()},l=[this.eBodyViewport,this.eBottom,this.eTop];l.forEach(function(c){return e.addManagedListener(c,"focusout",s)})}},i.prototype.updateRowCount=function(){var e=this.headerNavigationService.getHeaderRowCount(),s=this.paginationProxy.getType(),l=-1;s===fe.ROW_MODEL_TYPE_CLIENT_SIDE&&(l=0,this.paginationProxy.forEachNode(function(h){h.group||l++})),this.comp.setRowCount(-1===l?-1:e+l)},i.prototype.registerBodyViewportResizeListener=function(e){this.comp.registerBodyViewportResizeListener(e)},i.prototype.setVerticalScrollPaddingVisible=function(e){this.comp.setPinnedTopBottomOverflowY(e?"scroll":"hidden")},i.prototype.isVerticalScrollShowing=function(){var e=this.gridOptionsWrapper.isAlwaysShowVerticalScroll();return this.comp.setAlwaysVerticalScrollClass(e?jC:null,e),e||Qs(this.eBodyViewport)},i.prototype.setupRowAnimationCssClass=function(){var e=this,s=function(){var c=e.gridOptionsWrapper.isAnimateRows()&&!e.rowContainerHeightService.isStretching();e.comp.setRowAnimationCssOnBodyViewport(c?Y.SJN.ANIMATION_ON:Y.SJN.ANIMATION_OFF,c)};s(),this.addManagedListener(this.eventService,$.EVENT_HEIGHT_SCALE_CHANGED,s)},i.prototype.getGridBodyElement=function(){return this.eGridBody},i.prototype.addBodyViewportListener=function(){var e=this;this.addManagedListener(this.eBodyViewport,"contextmenu",function(c){e.gridOptionsWrapper.isPreventDefaultOnContextMenu()&&c.preventDefault();var h=Pu(c);(h===e.eBodyViewport||h===e.ctrlsService.getCenterRowContainerCtrl().getViewportElement())&&e.contextMenuFactory&&e.contextMenuFactory.onContextMenu(c,null,null,null,null,e.eGridBody)}),this.addManagedListener(this.eBodyViewport,"wheel",this.onWheel.bind(this))},i.prototype.onWheel=function(e){!this.gridOptionsWrapper.isSuppressScrollWhenPopupsAreOpen()||this.popupService.hasAnchoredPopup()&&e.preventDefault()},i.prototype.getGui=function(){return this.eGridBody},i.prototype.scrollVertically=function(e){var s=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(s+e),this.eBodyViewport.scrollTop-s},i.prototype.addRowDragListener=function(){this.rowDragFeature=this.createManagedBean(new UC(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)},i.prototype.getRowDragFeature=function(){return this.rowDragFeature},i.prototype.setFloatingHeights=function(){var e=this.pinnedRowModel,s=e.getPinnedTopTotalHeight();s&&(s+=1);var l=e.getPinnedBottomTotalHeight();l&&(l+=1),this.comp.setTopHeight(s),this.comp.setBottomHeight(l),this.comp.setTopDisplay(s?"inherit":"none"),this.comp.setBottomDisplay(l?"inherit":"none")},i.prototype.sizeColumnsToFit=function(e){var s=this,c=this.isVerticalScrollShowing()&&!qi()?this.gridOptionsWrapper.getScrollbarWidth():0,m=Wo(this.eBodyViewport)-c;m>0?this.columnModel.sizeColumnsToFit(m,"sizeColumnsToFit"):void 0===e?window.setTimeout(function(){s.sizeColumnsToFit(100)},0):100===e?window.setTimeout(function(){s.sizeColumnsToFit(500)},100):500===e?window.setTimeout(function(){s.sizeColumnsToFit(-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},i.prototype.addScrollEventListener=function(e){this.eBodyViewport.addEventListener("scroll",e)},i.prototype.removeScrollEventListener=function(e){this.eBodyViewport.removeEventListener("scroll",e)},i.prototype.requestAngularApply=function(){var e=this;this.angularApplyTriggered||(this.angularApplyTriggered=!0,window.setTimeout(function(){e.angularApplyTriggered=!1,e.$scope.$apply()},0))},i.prototype.addAngularApplyCheck=function(){var e=this;this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){return e.requestAngularApply()}),this.addManagedListener(this.eventService,$.EVENT_VIRTUAL_COLUMNS_CHANGED,function(){return e.requestAngularApply()})},Qi([H("rowContainerHeightService")],i.prototype,"rowContainerHeightService",void 0),Qi([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Qi([H("columnModel")],i.prototype,"columnModel",void 0),Qi([H("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),Qi([Nn("contextMenuFactory")],i.prototype,"contextMenuFactory",void 0),Qi([H("headerNavigationService")],i.prototype,"headerNavigationService",void 0),Qi([H("paginationProxy")],i.prototype,"paginationProxy",void 0),Qi([H("dragAndDropService")],i.prototype,"dragAndDropService",void 0),Qi([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Qi([H("rowRenderer")],i.prototype,"rowRenderer",void 0),Qi([H("popupService")],i.prototype,"popupService",void 0),Qi([H("mouseEventService")],i.prototype,"mouseEventService",void 0),Qi([H("$scope")],i.prototype,"$scope",void 0),i}(Ke),Dx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Mo=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},YC=function(d){function i(e){var s=d.call(this)||this;return s.element=e,s}return Dx(i,d),i.prototype.postConstruct=function(){this.addMouseListeners(),this.mockContextMenuForIPad(),this.addKeyboardEvents()},i.prototype.addKeyboardEvents=function(){var e=this;["keydown","keypress"].forEach(function(l){var c=e.processKeyboardEvent.bind(e,l);e.addManagedListener(e.element,l,c)})},i.prototype.addMouseListeners=function(){var e=this;["dblclick","contextmenu","mouseover","mouseout","click",Pv("touchstart")?"touchstart":"mousedown"].forEach(function(c){var h=e.processMouseEvent.bind(e,c);e.addManagedListener(e.element,c,h)})},i.prototype.processMouseEvent=function(e,s){if(this.mouseEventService.isEventFromThisGrid(s)&&!Da(s)){var l=this.getRowForEvent(s),c=this.mouseEventService.getRenderedCellForEvent(s);"contextmenu"===e?this.handleContextMenuMouseEvent(s,null,l,c):(c&&c.onMouseEvent(e,s),l&&l.onMouseEvent(e,s))}},i.prototype.mockContextMenuForIPad=function(){var e=this;if(Zs()){var s=new To(this.element);this.addManagedListener(s,To.EVENT_LONG_TAP,function(h){var m=e.getRowForEvent(h.touchEvent),w=e.mouseEventService.getRenderedCellForEvent(h.touchEvent);e.handleContextMenuMouseEvent(null,h.touchEvent,m,w)}),this.addDestroyFunc(function(){return s.destroy()})}},i.prototype.getRowForEvent=function(e){for(var s=Pu(e);s;){var l=this.gridOptionsWrapper.getDomData(s,ou.DOM_DATA_KEY_ROW_CTRL);if(l)return l;s=s.parentElement}return null},i.prototype.handleContextMenuMouseEvent=function(e,s,l,c){var h=l?l.getRowNode():null,m=c?c.getColumn():null,w=null;m&&(c.dispatchCellContextMenuEvent(e||s),w=this.valueService.getValue(m,h));var T=this.ctrlsService.getGridBodyCtrl(),L=c?c.getGui():T.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(e,s,h,m,w,L)},i.prototype.processKeyboardEvent=function(e,s){var l=Nf(this.gridOptionsWrapper,s,Zi.DOM_DATA_KEY_CELL_CTRL),c=Nf(this.gridOptionsWrapper,s,ou.DOM_DATA_KEY_ROW_CTRL);s.defaultPrevented||(l?this.processCellKeyboardEvent(l,e,s):c&&c.isFullWidth()&&this.processFullWidthRowKeyboardEvent(c,e,s))},i.prototype.processCellKeyboardEvent=function(e,s,l){var c=e.getRowNode(),h=e.getColumn(),m=e.isEditing();if(!Yi(this.gridOptionsWrapper,l,c,h,m))switch(s){case"keydown":!m&&this.navigationService.handlePageScrollingKey(l)||e.onKeyDown(l),this.doGridOperations(l,e.isEditing());break;case"keypress":e.onKeyPress(l)}if("keydown"===s){var T=e.createEvent(l,$.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(T)}if("keypress"===s){var L=e.createEvent(l,$.EVENT_CELL_KEY_PRESS);this.eventService.dispatchEvent(L)}},i.prototype.processFullWidthRowKeyboardEvent=function(e,s,l){var c=e.getRowNode(),h=this.focusService.getFocusedCell();if(!Yi(this.gridOptionsWrapper,l,c,h&&h.column,!1)&&"keydown"===s)switch(l.keyCode){case $e.UP:case $e.DOWN:e.onKeyboardNavigate(l);break;case $e.TAB:e.onTabKeyDown(l)}if("keydown"===s){var T=e.createRowEvent($.EVENT_CELL_KEY_DOWN,l);this.eventService.dispatchEvent(T)}if("keypress"===s){var L=e.createRowEvent($.EVENT_CELL_KEY_PRESS,l);this.eventService.dispatchEvent(L)}},i.prototype.doGridOperations=function(e,s){if((e.ctrlKey||e.metaKey)&&!s&&this.mouseEventService.isEventFromThisGrid(e))switch(e.which){case $e.A:return this.onCtrlAndA(e);case $e.C:return this.onCtrlAndC(e);case $e.V:return this.onCtrlAndV();case $e.D:return this.onCtrlAndD(e);case $e.Z:return e.shiftKey?this.undoRedoService.redo():this.undoRedoService.undo();case $e.Y:return this.undoRedoService.redo()}},i.prototype.onCtrlAndA=function(e){var s=this,l=s.pinnedRowModel,h=s.rangeService,m=fe.PINNED_BOTTOM,w=fe.PINNED_TOP;if(h&&s.paginationProxy.isRowsToRender()){var R=[l.isEmpty(w),l.isEmpty(m)],U=R[0]?null:w,K=void 0,Q=void 0;R[1]?(K=null,Q=this.paginationProxy.getRowCount()-1):(K=m,Q=l.getPinnedBottomRowData().length-1);var oe=this.columnModel.getAllDisplayedColumns();if(ni(oe))return;h.setCellRange({rowStartIndex:0,rowStartPinned:U,rowEndIndex:Q,rowEndPinned:K,columnStart:oe[0],columnEnd:zn(oe)})}e.preventDefault()},i.prototype.onCtrlAndC=function(e){!this.clipboardService||this.gridOptionsWrapper.isEnableCellTextSelection()||(this.clipboardService.copyToClipboard(),e.preventDefault())},i.prototype.onCtrlAndV=function(){qt.isRegistered(Y.GXE.ClipboardModule)&&!this.gridOptionsWrapper.isSuppressClipboardPaste()&&this.clipboardService.pasteFromClipboard()},i.prototype.onCtrlAndD=function(e){qt.isRegistered(Y.GXE.ClipboardModule)&&!this.gridOptionsWrapper.isSuppressClipboardPaste()&&this.clipboardService.copyRangeDown(),e.preventDefault()},Mo([H("mouseEventService")],i.prototype,"mouseEventService",void 0),Mo([H("valueService")],i.prototype,"valueService",void 0),Mo([Nn("contextMenuFactory")],i.prototype,"contextMenuFactory",void 0),Mo([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Mo([H("navigationService")],i.prototype,"navigationService",void 0),Mo([H("focusService")],i.prototype,"focusService",void 0),Mo([H("undoRedoService")],i.prototype,"undoRedoService",void 0),Mo([H("columnModel")],i.prototype,"columnModel",void 0),Mo([H("paginationProxy")],i.prototype,"paginationProxy",void 0),Mo([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Mo([Nn("rangeService")],i.prototype,"rangeService",void 0),Mo([Nn("clipboardService")],i.prototype,"clipboardService",void 0),Mo([Qe],i.prototype,"postConstruct",null),i}(Ke),Gg=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),$u=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Bg=function(d){function i(e){var s=d.call(this)||this;return s.centerContainerCon=e,s}return Gg(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(){e.gridBodyCon=e.ctrlsService.getGridBodyCtrl(),e.listenForResize()}),this.addManagedListener(this.eventService,$.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this))},i.prototype.listenForResize=function(){var e=this.onCenterViewportResized.bind(this);this.centerContainerCon.registerViewportResizeListener(e),this.gridBodyCon.registerBodyViewportResizeListener(e)},i.prototype.onScrollbarWidthChanged=function(){this.checkViewportAndScrolls()},i.prototype.onCenterViewportResized=function(){if(this.centerContainerCon.isViewportVisible()){this.checkViewportAndScrolls();var e=this.centerContainerCon.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0},i.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCon.getScrollFeature().checkScrollLeft()},i.prototype.getBodyHeight=function(){return this.bodyHeight},i.prototype.checkBodyHeight=function(){var s=Al(this.gridBodyCon.getBodyViewportElement());this.bodyHeight!==s&&(this.bodyHeight=s,this.eventService.dispatchEvent({type:$.EVENT_BODY_HEIGHT_CHANGED,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.updateScrollVisibleService=function(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)},i.prototype.updateScrollVisibleServiceImpl=function(){var e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCon.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e),this.gridBodyCon.setVerticalScrollPaddingVisible(e.verticalScrollShowing)},i.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsWrapper.isAlwaysShowHorizontalScroll()||this.centerContainerCon.isViewportHScrollShowing()},i.prototype.onHorizontalViewportChanged=function(){var e=this.centerContainerCon.getCenterWidth(),s=this.centerContainerCon.getViewportScrollLeft();this.columnModel.setViewportPosition(e,s)},$u([H("ctrlsService")],i.prototype,"ctrlsService",void 0),$u([H("columnModel")],i.prototype,"columnModel",void 0),$u([H("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),$u([H("columnApi")],i.prototype,"columnApi",void 0),$u([H("gridApi")],i.prototype,"gridApi",void 0),$u([Qe],i.prototype,"postConstruct",null),i}(Ke),Ax=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),$C=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},XC=function(d){function i(e){var s=d.call(this)||this;return s.element=e,s}return Ax(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))},i.prototype.onPinnedLeftWidthChanged=function(){var e=this.pinnedWidthService.getPinnedLeftWidth(),s=e>0;$n(this.element,s),s&&Ia(this.element,e)},$C([H("pinnedWidthService")],i.prototype,"pinnedWidthService",void 0),$C([Qe],i.prototype,"postConstruct",null),i}(Ke),JC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),su=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ZC=function(d){function i(e){var s=d.call(this)||this;return s.element=e,s}return JC(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))},i.prototype.onPinnedRightWidthChanged=function(){var e=this.pinnedWidthService.getPinnedRightWidth(),s=e>0;$n(this.element,s),s&&Ia(this.element,e)},su([H("pinnedWidthService")],i.prototype,"pinnedWidthService",void 0),su([Qe],i.prototype,"postConstruct",null),i}(Ke),QC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ew=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ip=function(d){function i(e,s){var l=d.call(this)||this;return l.eContainer=e,l.eWrapper=s,l}return QC(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))},i.prototype.onHeightChanged=function(){var e=this.maxDivHeightScaler.getUiContainerHeight(),s=null!=e?e+"px":"";this.eContainer.style.height=s,this.eWrapper&&(this.eWrapper.style.height=s)},ew([H("rowContainerHeightService")],i.prototype,"maxDivHeightScaler",void 0),ew([Qe],i.prototype,"postConstruct",null),i}(Ke),Mx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Lp=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},tw=function(d){function i(e){var s=d.call(this)||this;return s.eContainer=e,s}return Mx(i,d),i.prototype.postConstruct=function(){var e=this;if(this.gridOptionsWrapper.isEnableRangeSelection()&&!Ce(this.rangeService)){var s={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)};this.dragService.addDragSource(s),this.addDestroyFunc(function(){return e.dragService.removeDragSource(s)})}},Lp([Nn("rangeService")],i.prototype,"rangeService",void 0),Lp([H("dragService")],i.prototype,"dragService",void 0),Lp([Qe],i.prototype,"postConstruct",null),i}(Ke),nw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ss=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};!function(d){d.LEFT="left",d.RIGHT="right",d.CENTER="center",d.FULL_WIDTH="fullWidth",d.TOP_LEFT="topLeft",d.TOP_RIGHT="topRight",d.TOP_CENTER="topCenter",d.TOP_FULL_WITH="topFullWidth",d.BOTTOM_LEFT="bottomLeft",d.BOTTOM_RIGHT="bottomRight",d.BOTTOM_CENTER="bottomCenter",d.BOTTOM_FULL_WITH="bottomFullWidth"}(Y.hA6||(Y.hA6={}));var Fp=Aa([[Y.hA6.CENTER,"ag-center-cols-container"],[Y.hA6.LEFT,"ag-pinned-left-cols-container"],[Y.hA6.RIGHT,"ag-pinned-right-cols-container"],[Y.hA6.FULL_WIDTH,"ag-full-width-container"],[Y.hA6.TOP_CENTER,"ag-floating-top-container"],[Y.hA6.TOP_LEFT,"ag-pinned-left-floating-top"],[Y.hA6.TOP_RIGHT,"ag-pinned-right-floating-top"],[Y.hA6.TOP_FULL_WITH,"ag-floating-top-full-width-container"],[Y.hA6.BOTTOM_CENTER,"ag-floating-bottom-container"],[Y.hA6.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[Y.hA6.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[Y.hA6.BOTTOM_FULL_WITH,"ag-floating-bottom-full-width-container"]]),Np=Aa([[Y.hA6.CENTER,"ag-center-cols-viewport"],[Y.hA6.TOP_CENTER,"ag-floating-top-viewport"],[Y.hA6.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),iw=Aa([[Y.hA6.CENTER,"ag-center-cols-clipper"]]),nc=function(d){function i(e){var s=d.call(this)||this;return s.name=e,s}return nw(i,d),i.getRowContainerCssClasses=function(e){return{container:Fp.get(e),viewport:Np.get(e),wrapper:iw.get(e)}},i.getPinned=function(e){switch(e){case Y.hA6.BOTTOM_LEFT:case Y.hA6.TOP_LEFT:case Y.hA6.LEFT:return fe.PINNED_LEFT;case Y.hA6.BOTTOM_RIGHT:case Y.hA6.TOP_RIGHT:case Y.hA6.RIGHT:return fe.PINNED_RIGHT;default:return null}},i.prototype.postConstruct=function(){var e=this;this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.embedFullWidthRows=this.gridOptionsWrapper.isEmbedFullWidthRows(),this.addManagedListener(this.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_ROWS_CHANGED,this.onDisplayedRowsChanged.bind(this)),this.forContainers([Y.hA6.CENTER],function(){return e.viewportSizeFeature=e.createManagedBean(new Bg(e))}),this.registerWithCtrlsService()},i.prototype.registerWithCtrlsService=function(){switch(this.name){case Y.hA6.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case Y.hA6.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case Y.hA6.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case Y.hA6.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case Y.hA6.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case Y.hA6.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case Y.hA6.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case Y.hA6.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case Y.hA6.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this)}},i.prototype.forContainers=function(e,s){e.indexOf(this.name)>=0&&s()},i.prototype.getContainerElement=function(){return this.eContainer},i.prototype.getViewportSizeFeature=function(){return this.viewportSizeFeature},i.prototype.setComp=function(e,s,l,c){var h=this;this.comp=e,this.eContainer=s,this.eViewport=l,this.eWrapper=c,this.createManagedBean(new YC(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();var T=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s}([Y.hA6.TOP_CENTER,Y.hA6.TOP_LEFT,Y.hA6.TOP_RIGHT],[Y.hA6.BOTTOM_CENTER,Y.hA6.BOTTOM_LEFT,Y.hA6.BOTTOM_RIGHT],[Y.hA6.CENTER,Y.hA6.LEFT,Y.hA6.RIGHT]),L=[Y.hA6.CENTER,Y.hA6.LEFT,Y.hA6.RIGHT,Y.hA6.FULL_WIDTH],U=[Y.hA6.CENTER,Y.hA6.TOP_CENTER,Y.hA6.BOTTOM_CENTER],Q=[Y.hA6.RIGHT,Y.hA6.BOTTOM_RIGHT,Y.hA6.TOP_RIGHT];this.forContainers([Y.hA6.LEFT,Y.hA6.BOTTOM_LEFT,Y.hA6.TOP_LEFT],function(){return h.createManagedBean(new XC(h.eContainer))}),this.forContainers(Q,function(){return h.createManagedBean(new ZC(h.eContainer))}),this.forContainers(L,function(){return h.createManagedBean(new Ip(h.eContainer,h.eWrapper))}),this.forContainers(T,function(){return h.createManagedBean(new tw(h.eContainer))}),this.forContainers(U,function(){return h.createManagedBean(new Ag(function(oe){return h.comp.setContainerWidth(oe+"px")}))})},i.prototype.listenOnDomOrder=function(){var e=this,s=function(){return e.comp.setDomOrder(e.gridOptionsWrapper.isEnsureDomOrder())};this.addManagedListener(this.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,s),s()},i.prototype.stopHScrollOnPinnedRows=function(){var e=this;this.forContainers([Y.hA6.TOP_CENTER,Y.hA6.BOTTOM_CENTER],function(){e.addManagedListener(e.eViewport,"scroll",function(){return e.eViewport.scrollLeft=0})})},i.prototype.onDisplayedColumnsChanged=function(){var e=this;this.forContainers([Y.hA6.CENTER],function(){return e.onHorizontalViewportChanged()})},i.prototype.onDisplayedColumnsWidthChanged=function(){var e=this;this.forContainers([Y.hA6.CENTER],function(){return e.onHorizontalViewportChanged()})},i.prototype.onScrollVisibilityChanged=function(){if(this.name===Y.hA6.CENTER){var s=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gridOptionsWrapper.getScrollbarWidth()||0;this.comp.setViewportHeight(0==s?"100%":"calc(100% + "+s+"px)")}},i.prototype.addPreventScrollWhileDragging=function(){var e=this,s=function(c){e.dragService.isDragging()&&c.cancelable&&c.preventDefault()};this.eContainer.addEventListener("touchmove",s,{passive:!1}),this.addDestroyFunc(function(){return e.eContainer.removeEventListener("touchmove",s)})},i.prototype.onHorizontalViewportChanged=function(){var e=this.getCenterWidth(),s=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(e,s)},i.prototype.getCenterWidth=function(){return Wo(this.eViewport)},i.prototype.getCenterViewportScrollLeft=function(){return $c(this.eViewport,this.enableRtl)},i.prototype.registerViewportResizeListener=function(e){var s=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(function(){return s()})},i.prototype.isViewportVisible=function(){return Ml(this.eViewport)},i.prototype.isViewportHScrollShowing=function(){return Ol(this.eViewport)},i.prototype.getViewportScrollLeft=function(){return $c(this.eViewport,this.enableRtl)},i.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsWrapper.isAlwaysShowHorizontalScroll()||Ol(this.eViewport)},i.prototype.getViewportElement=function(){return this.eViewport},i.prototype.setContainerTranslateX=function(e){this.eContainer.style.transform="translateX("+e+"px)"},i.prototype.getHScrollPosition=function(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}},i.prototype.setCenterViewportScrollLeft=function(e){Xc(this.eViewport,e,this.enableRtl)},i.prototype.onDisplayedRowsChanged=function(){var e=this,s=this.name===Y.hA6.TOP_FULL_WITH||this.name===Y.hA6.BOTTOM_FULL_WITH||this.name===Y.hA6.FULL_WIDTH,h=this.getRowCtrls().filter(function(w){var R=w.isFullWidth(),T=e.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_PRINT,L=e.embedFullWidthRows||T;return s?!L&&R:L||!R});this.comp.setRowCtrls(h)},i.prototype.getRowCtrls=function(){switch(this.name){case Y.hA6.TOP_CENTER:case Y.hA6.TOP_LEFT:case Y.hA6.TOP_RIGHT:case Y.hA6.TOP_FULL_WITH:return this.rowRenderer.getTopRowCtrls();case Y.hA6.BOTTOM_CENTER:case Y.hA6.BOTTOM_LEFT:case Y.hA6.BOTTOM_RIGHT:case Y.hA6.BOTTOM_FULL_WITH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getRowCtrls()}},Ss([H("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),Ss([H("dragService")],i.prototype,"dragService",void 0),Ss([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Ss([H("columnModel")],i.prototype,"columnModel",void 0),Ss([H("resizeObserverService")],i.prototype,"resizeObserverService",void 0),Ss([H("rowRenderer")],i.prototype,"rowRenderer",void 0),Ss([Qe],i.prototype,"postConstruct",null),i}(Ke),ow=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Es=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Td='<div class="ag-root ag-unselectable" role="grid" unselectable="on">\n        <ag-header-root ref="gridHeader" unselectable="on"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation" unselectable="on">\n            <ag-row-container ref="topLeftContainer" name="'+Y.hA6.TOP_LEFT+'"></ag-row-container>\n            <ag-row-container ref="topCenterContainer" name="'+Y.hA6.TOP_CENTER+'"></ag-row-container>\n            <ag-row-container ref="topRightContainer" name="'+Y.hA6.TOP_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="topFullWidthContainer" name="'+Y.hA6.TOP_FULL_WITH+'"></ag-row-container>\n        </div>\n        <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n            <ag-row-container ref="leftContainer" name="'+Y.hA6.LEFT+'"></ag-row-container>\n            <ag-row-container ref="centerContainer" name="'+Y.hA6.CENTER+'"></ag-row-container>\n            <ag-row-container ref="rightContainer" name="'+Y.hA6.RIGHT+'"></ag-row-container>\n            <ag-row-container ref="fullWidthContainer" name="'+Y.hA6.FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation" unselectable="on">\n            <ag-row-container ref="bottomLeftContainer" name="'+Y.hA6.BOTTOM_LEFT+'"></ag-row-container>\n            <ag-row-container ref="bottomCenterContainer" name="'+Y.hA6.BOTTOM_CENTER+'"></ag-row-container>\n            <ag-row-container ref="bottomRightContainer" name="'+Y.hA6.BOTTOM_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="bottomFullWidthContainer" name="'+Y.hA6.BOTTOM_FULL_WITH+'"></ag-row-container>\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>',aw=function(d){function i(){return d.call(this,Td)||this}return ow(i,d),i.prototype.init=function(){var e=this,s=function(h,m){var w=h+"px";m.style.minHeight=w,m.style.height=w},l={setRowAnimationCssOnBodyViewport:function(h,m){return e.setRowAnimationCssOnBodyViewport(h,m)},setColumnCount:function(h){return nb(e.getGui(),h)},setRowCount:function(h){return tb(e.getGui(),h)},setTopHeight:function(h){return s(h,e.eTop)},setBottomHeight:function(h){return s(h,e.eBottom)},setTopDisplay:function(h){return e.eTop.style.display=h},setBottomDisplay:function(h){return e.eBottom.style.display=h},setColumnMovingCss:function(h,m){return e.addOrRemoveCssClass(qC,m)},updateLayoutClasses:function(h,m){Ft(e.eBodyViewport,Y.LBn.AUTO_HEIGHT,m.autoHeight),Ft(e.eBodyViewport,Y.LBn.NORMAL,m.normal),Ft(e.eBodyViewport,Y.LBn.PRINT,m.print),e.addOrRemoveCssClass(Y.LBn.AUTO_HEIGHT,m.autoHeight),e.addOrRemoveCssClass(Y.LBn.NORMAL,m.normal),e.addOrRemoveCssClass(Y.LBn.PRINT,m.print)},setAlwaysVerticalScrollClass:function(h,m){return Ft(e.eBodyViewport,jC,m)},registerBodyViewportResizeListener:function(h){var m=e.resizeObserverService.observeResize(e.eBodyViewport,h);e.addDestroyFunc(function(){return m()})},setPinnedTopBottomOverflowY:function(h){return e.eTop.style.overflowY=e.eBottom.style.overflowY=h},setCellSelectableCss:function(h,m){[e.eTop,e.eBodyViewport,e.eBottom].forEach(function(w){return Ft(w,zC,m)})}};this.ctrl=this.createManagedBean(new KC),this.ctrl.setComp(l,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom),(this.rangeService||this.gridOptionsWrapper.isRowSelectionMulti())&&eb(this.getGui(),!0)},i.prototype.setRowAnimationCssOnBodyViewport=function(e,s){Ft(this.eBodyViewport,Y.SJN.ANIMATION_ON,s),Ft(this.eBodyViewport,Y.SJN.ANIMATION_OFF,!s)},i.prototype.getFloatingTopBottom=function(){return[this.eTop,this.eBottom]},Es([H("resizeObserverService")],i.prototype,"resizeObserverService",void 0),Es([Nn("rangeService")],i.prototype,"rangeService",void 0),Es([Be("eBodyViewport")],i.prototype,"eBodyViewport",void 0),Es([Be("eTop")],i.prototype,"eTop",void 0),Es([Be("eBottom")],i.prototype,"eBottom",void 0),Es([Be("gridHeader")],i.prototype,"headerRootComp",void 0),Es([Qe],i.prototype,"init",null),i}(pn);!function(d){d[d.SINGLE_SHEET=0]="SINGLE_SHEET",d[d.MULTI_SHEET=1]="MULTI_SHEET"}(Y.nPL||(Y.nPL={})),function(d){d.EVERYTHING="group",d.FILTER="filter",d.SORT="sort",d.MAP="map",d.AGGREGATE="aggregate",d.PIVOT="pivot",d.NOTHING="nothing"}(Y.j_r||(Y.j_r={}));var Rn=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},sw=function(){function d(){this.detailGridInfoMap={},this.destroyCalled=!1}return d.prototype.registerOverlayWrapperComp=function(i){this.overlayWrapperComp=i},d.prototype.registerSideBarComp=function(i){this.sideBarComp=i},d.prototype.init=function(){var i=this;switch(this.rowModel.getType()){case fe.ROW_MODEL_TYPE_CLIENT_SIDE:this.clientSideRowModel=this.rowModel;break;case fe.ROW_MODEL_TYPE_INFINITE:this.infiniteRowModel=this.rowModel;break;case fe.ROW_MODEL_TYPE_SERVER_SIDE:this.serverSideRowModel=this.rowModel}this.ctrlsService.whenReady(function(){i.gridBodyCon=i.ctrlsService.getGridBodyCtrl()})},d.prototype.__getAlignedGridService=function(){return this.alignedGridsService},d.prototype.addDetailGridInfo=function(i,e){this.detailGridInfoMap[i]=e},d.prototype.removeDetailGridInfo=function(i){this.detailGridInfoMap[i]=void 0},d.prototype.getDetailGridInfo=function(i){return this.detailGridInfoMap[i]},d.prototype.forEachDetailGridInfo=function(i){var e=0;Fn(this.detailGridInfoMap,function(s,l){Fe(l)&&(i(l,e),e++)})},d.prototype.getDataAsCsv=function(i){if(qt.assertRegistered(Y.GXE.CsvExportModule,"api.getDataAsCsv"))return this.csvCreator.getDataAsCsv(i)},d.prototype.exportDataAsCsv=function(i){qt.assertRegistered(Y.GXE.CsvExportModule,"api.exportDataAsCSv")&&this.csvCreator.exportDataAsCsv(i)},d.prototype.getDataAsExcel=function(i){if(qt.assertRegistered(Y.GXE.ExcelExportModule,"api.getDataAsExcel"))return this.excelCreator.getFactoryMode(i&&i.exportMode||"xlsx")===Y.nPL.MULTI_SHEET?void console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling `api.getMultipleSheetAsExcel()` or `api.exportMultipleSheetsAsExcel()`"):this.excelCreator.getDataAsExcel(i)},d.prototype.exportDataAsExcel=function(i){if(qt.assertRegistered(Y.GXE.ExcelExportModule,"api.exportDataAsExcel")){if(this.excelCreator.getFactoryMode(i&&i.exportMode||"xlsx")===Y.nPL.MULTI_SHEET)return void console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling `api.getMultipleSheetAsExcel()` or `api.exportMultipleSheetsAsExcel()`");this.excelCreator.exportDataAsExcel(i)}},d.prototype.getSheetDataForExcel=function(i){if(qt.assertRegistered(Y.GXE.ExcelExportModule,"api.getSheetDataForExcel"))return this.excelCreator.setFactoryMode(Y.nPL.MULTI_SHEET,i&&i.exportMode||"xlsx"),this.excelCreator.getSheetDataForExcel(i)},d.prototype.getMultipleSheetsAsExcel=function(i){if(qt.assertRegistered(Y.GXE.ExcelExportModule,"api.getMultipleSheetsAsExcel"))return this.excelCreator.getMultipleSheetsAsExcel(i)},d.prototype.exportMultipleSheetsAsExcel=function(i){if(qt.assertRegistered(Y.GXE.ExcelExportModule,"api.exportMultipleSheetsAsExcel"))return this.excelCreator.exportMultipleSheetsAsExcel(i)},d.prototype.setEnterpriseDatasource=function(i){console.warn("ag-grid: since version 18.x, api.setEnterpriseDatasource() should be replaced with api.setServerSideDatasource()"),this.setServerSideDatasource(i)},d.prototype.setGridAriaProperty=function(i,e){if(i){var s=this.ctrlsService.getGridBodyCtrl().getGui(),l="aria-"+i;null===e?s.removeAttribute(l):s.setAttribute(l,e)}},d.prototype.setServerSideDatasource=function(i){this.serverSideRowModel?this.serverSideRowModel.setDatasource(i):console.warn("AG Grid: you can only use an enterprise datasource when gridOptions.rowModelType is '"+fe.ROW_MODEL_TYPE_SERVER_SIDE+"'")},d.prototype.setDatasource=function(i){this.gridOptionsWrapper.isRowModelInfinite()?this.rowModel.setDatasource(i):console.warn("AG Grid: you can only use a datasource when gridOptions.rowModelType is '"+fe.ROW_MODEL_TYPE_INFINITE+"'")},d.prototype.setViewportDatasource=function(i){this.gridOptionsWrapper.isRowModelViewport()?this.rowModel.setViewportDatasource(i):console.warn("AG Grid: you can only use a viewport datasource when gridOptions.rowModelType is '"+fe.ROW_MODEL_TYPE_VIEWPORT+"'")},d.prototype.setRowData=function(i){if(this.gridOptionsWrapper.isRowModelDefault())if(this.gridOptionsWrapper.isImmutableData()){var e=this.immutableService.createTransactionForRowData(i);if(!e)return;var c=this.clientSideRowModel.updateRowData(e[0],e[1]);c&&this.rowRenderer.refreshFullWidthRows(c.update)}else this.selectionService.reset(),this.clientSideRowModel.setRowData(i);else console.warn("cannot call setRowData unless using normal row model")},d.prototype.setFloatingTopRowData=function(i){console.warn("AG Grid: since v12, api.setFloatingTopRowData() is now api.setPinnedTopRowData()"),this.setPinnedTopRowData(i)},d.prototype.setFloatingBottomRowData=function(i){console.warn("AG Grid: since v12, api.setFloatingBottomRowData() is now api.setPinnedBottomRowData()"),this.setPinnedBottomRowData(i)},d.prototype.getFloatingTopRowCount=function(){return console.warn("AG Grid: since v12, api.getFloatingTopRowCount() is now api.getPinnedTopRowCount()"),this.getPinnedTopRowCount()},d.prototype.getFloatingBottomRowCount=function(){return console.warn("AG Grid: since v12, api.getFloatingBottomRowCount() is now api.getPinnedBottomRowCount()"),this.getPinnedBottomRowCount()},d.prototype.getFloatingTopRow=function(i){return console.warn("AG Grid: since v12, api.getFloatingTopRow() is now api.getPinnedTopRow()"),this.getPinnedTopRow(i)},d.prototype.getFloatingBottomRow=function(i){return console.warn("AG Grid: since v12, api.getFloatingBottomRow() is now api.getPinnedBottomRow()"),this.getPinnedBottomRow(i)},d.prototype.setPinnedTopRowData=function(i){this.pinnedRowModel.setPinnedTopRowData(i)},d.prototype.setPinnedBottomRowData=function(i){this.pinnedRowModel.setPinnedBottomRowData(i)},d.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},d.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},d.prototype.getPinnedTopRow=function(i){return this.pinnedRowModel.getPinnedTopRow(i)},d.prototype.getPinnedBottomRow=function(i){return this.pinnedRowModel.getPinnedBottomRow(i)},d.prototype.setColumnDefs=function(i,e){void 0===e&&(e="api"),this.columnModel.setColumnDefs(i,e)},d.prototype.setAutoGroupColumnDef=function(i,e){this.gridOptionsWrapper.setProperty("autoGroupColumnDef",i,!0)},d.prototype.expireValueCache=function(){this.valueCache.expire()},d.prototype.getVerticalPixelRange=function(){return this.gridBodyCon.getScrollFeature().getVScrollPosition()},d.prototype.getHorizontalPixelRange=function(){return this.gridBodyCon.getScrollFeature().getHScrollPosition()},d.prototype.setAlwaysShowHorizontalScroll=function(i){this.gridOptionsWrapper.setProperty("alwaysShowHorizontalScroll",i)},d.prototype.setAlwaysShowVerticalScroll=function(i){this.gridOptionsWrapper.setProperty("alwaysShowVerticalScroll",i)},d.prototype.refreshToolPanel=function(){!this.sideBarComp||this.sideBarComp.refresh()},d.prototype.refreshCells=function(i){void 0===i&&(i={}),Array.isArray(i)?console.warn("since AG Grid v11.1, refreshCells() now takes parameters, please see the documentation."):this.rowRenderer.refreshCells(i)},d.prototype.flashCells=function(i){void 0===i&&(i={}),this.rowRenderer.flashCells(i)},d.prototype.redrawRows=function(i){void 0===i&&(i={}),this.rowRenderer.redrawRows(i?i.rowNodes:void 0)},d.prototype.refreshView=function(){console.warn("AG Grid: since v11.1, refreshView() is deprecated, please call refreshCells() or redrawRows() instead"),this.redrawRows()},d.prototype.refreshRows=function(i){console.warn("since AG Grid v11.1, refreshRows() is deprecated, please use refreshCells({rowNodes: rows}) or redrawRows({rowNodes: rows}) instead"),this.refreshCells({rowNodes:i})},d.prototype.rowDataChanged=function(i){console.warn("AG Grid: rowDataChanged is deprecated, either call refreshView() to refresh everything, or call rowNode.setRowData(newData) to set value on a particular node"),this.redrawRows()},d.prototype.softRefreshView=function(){console.error("AG Grid: since v16, softRefreshView() is no longer supported. Please check the documentation on how to refresh.")},d.prototype.refreshGroupRows=function(){console.warn("AG Grid: since v11.1, refreshGroupRows() is no longer supported, call refreshCells() instead. Because refreshCells() now does dirty checking, it will only refresh cells that have changed, so it should not be necessary to only refresh the group rows."),this.refreshCells()},d.prototype.setFunctionsReadOnly=function(i){this.gridOptionsWrapper.setProperty("functionsReadOnly",i)},d.prototype.refreshHeader=function(){this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(i){return i.refresh()})},d.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},d.prototype.isAdvancedFilterPresent=function(){return console.warn("AG Grid: isAdvancedFilterPresent() is deprecated, please use isColumnFilterPresent()"),this.isColumnFilterPresent()},d.prototype.isColumnFilterPresent=function(){return this.filterManager.isAdvancedFilterPresent()},d.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},d.prototype.getModel=function(){return this.rowModel},d.prototype.setRowNodeExpanded=function(i,e){i&&i.setExpanded(e)},d.prototype.onGroupExpandedOrCollapsed=function(i){Ce(this.clientSideRowModel)&&console.warn("AG Grid: cannot call onGroupExpandedOrCollapsed unless using normal row model"),Fe(i)&&console.warn("AG Grid: api.onGroupExpandedOrCollapsed - refreshFromIndex parameter is no longer used, the grid will refresh all rows"),this.clientSideRowModel.refreshModel({step:Y.j_r.MAP})},d.prototype.refreshInMemoryRowModel=function(i){console.warn("ag-grid: since version 18.x, api.refreshInMemoryRowModel() should be replaced with api.refreshClientSideRowModel()"),this.refreshClientSideRowModel(i)},d.prototype.refreshClientSideRowModel=function(i){Ce(this.clientSideRowModel)&&console.warn("cannot call refreshClientSideRowModel unless using normal row model");var e=Y.j_r.EVERYTHING,s={group:Y.j_r.EVERYTHING,filter:Y.j_r.FILTER,map:Y.j_r.MAP,aggregate:Y.j_r.AGGREGATE,sort:Y.j_r.SORT,pivot:Y.j_r.PIVOT};Fe(i)&&(e=s[i]),Ce(e)?console.error("AG Grid: invalid step "+i+", available steps are "+Object.keys(s).join(", ")):this.clientSideRowModel.refreshModel({step:e,keepRenderedRows:!0,animate:!0,keepEditingRows:!0})},d.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},d.prototype.flushAllAnimationFrames=function(){this.animationFrameService.flushAllFrames()},d.prototype.getRowNode=function(i){return this.rowModel.getRowNode(i)},d.prototype.getSizesForCurrentTheme=function(){return{rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),headerHeight:this.gridOptionsWrapper.getHeaderHeight()}},d.prototype.expandAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!0):this.serverSideRowModel?this.serverSideRowModel.expandAll(!0):console.warn("AG Grid: expandAll only works with Client Side Row Model and Server Side Row Model")},d.prototype.collapseAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!1):this.serverSideRowModel?this.serverSideRowModel.expandAll(!1):console.warn("AG Grid: collapseAll only works with Client Side Row Model and Server Side Row Model")},d.prototype.getToolPanelInstance=function(i){if(this.sideBarComp){var e=this.sideBarComp.getToolPanelInstance(i);return this.frameworkComponentWrapper?this.frameworkComponentWrapper.unwrap(e):e}console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise")},d.prototype.addVirtualRowListener=function(i,e,s){"string"!=typeof i&&console.warn("AG Grid: addVirtualRowListener is deprecated, please use addRenderedRowListener."),this.addRenderedRowListener(i,e,s)},d.prototype.addRenderedRowListener=function(i,e,s){"virtualRowSelected"===i&&console.warn("AG Grid: event virtualRowSelected is deprecated, to register for individual row\n                selection events, add a listener directly to the row node."),this.rowRenderer.addRenderedRowListener(i,e,s)},d.prototype.setQuickFilter=function(i){this.filterManager.setQuickFilter(i)},d.prototype.selectIndex=function(i,e,s){console.warn("AG Grid: do not use api for selection, call node.setSelected(value) instead"),s&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionService.selectIndex(i,e)},d.prototype.deselectIndex=function(i,e){void 0===e&&(e=!1),console.warn("AG Grid: do not use api for selection, call node.setSelected(value) instead"),e&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionService.deselectIndex(i)},d.prototype.selectNode=function(i,e,s){void 0===e&&(e=!1),void 0===s&&(s=!1),console.warn("AG Grid: API for selection is deprecated, call node.setSelected(value) instead"),s&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),i.setSelectedParams({newValue:!0,clearSelection:!e})},d.prototype.deselectNode=function(i,e){void 0===e&&(e=!1),console.warn("AG Grid: API for selection is deprecated, call node.setSelected(value) instead"),e&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),i.setSelectedParams({newValue:!1})},d.prototype.selectAll=function(){this.selectionService.selectAllRowNodes()},d.prototype.deselectAll=function(){this.selectionService.deselectAllRowNodes()},d.prototype.selectAllFiltered=function(){this.selectionService.selectAllRowNodes(!0)},d.prototype.deselectAllFiltered=function(){this.selectionService.deselectAllRowNodes(!0)},d.prototype.recomputeAggregates=function(){Ce(this.clientSideRowModel)&&console.warn("cannot call recomputeAggregates unless using normal row model"),console.warn("recomputeAggregates is deprecated, please call api.refreshClientSideRowModel('aggregate') instead"),this.clientSideRowModel.refreshModel({step:Y.j_r.AGGREGATE})},d.prototype.sizeColumnsToFit=function(){this.gridBodyCon.sizeColumnsToFit()},d.prototype.showLoadingOverlay=function(){this.overlayWrapperComp.showLoadingOverlay()},d.prototype.showNoRowsOverlay=function(){this.overlayWrapperComp.showNoRowsOverlay()},d.prototype.hideOverlay=function(){this.overlayWrapperComp.hideOverlay()},d.prototype.isNodeSelected=function(i){return console.warn("AG Grid: no need to call api.isNodeSelected(), just call node.isSelected() instead"),i.isSelected()},d.prototype.getSelectedNodesById=function(){return console.error("AG Grid: since version 3.4, getSelectedNodesById no longer exists, use getSelectedNodes() instead"),null},d.prototype.getSelectedNodes=function(){return this.selectionService.getSelectedNodes()},d.prototype.getSelectedRows=function(){return this.selectionService.getSelectedRows()},d.prototype.getBestCostNodeSelection=function(){return this.selectionService.getBestCostNodeSelection()},d.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},d.prototype.ensureColIndexVisible=function(i){console.warn("AG Grid: ensureColIndexVisible(index) no longer supported, use ensureColumnVisible(colKey) instead.")},d.prototype.ensureColumnVisible=function(i){this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)},d.prototype.ensureIndexVisible=function(i,e){this.gridBodyCon.getScrollFeature().ensureIndexVisible(i,e)},d.prototype.ensureNodeVisible=function(i,e){void 0===e&&(e=null),this.gridBodyCon.getScrollFeature().ensureNodeVisible(i,e)},d.prototype.forEachLeafNode=function(i){Ce(this.clientSideRowModel)&&console.warn("cannot call forEachNode unless using normal row model"),this.clientSideRowModel.forEachLeafNode(i)},d.prototype.forEachNode=function(i){this.rowModel.forEachNode(i)},d.prototype.forEachNodeAfterFilter=function(i){Ce(this.clientSideRowModel)&&console.warn("cannot call forEachNodeAfterFilter unless using normal row model"),this.clientSideRowModel.forEachNodeAfterFilter(i)},d.prototype.forEachNodeAfterFilterAndSort=function(i){Ce(this.clientSideRowModel)&&console.warn("cannot call forEachNodeAfterFilterAndSort unless using normal row model"),this.clientSideRowModel.forEachNodeAfterFilterAndSort(i)},d.prototype.getFilterApiForColDef=function(i){return console.warn("ag-grid API method getFilterApiForColDef deprecated, use getFilterInstance instead"),this.getFilterInstance(i)},d.prototype.getFilterInstance=function(i,e){var s=this,l=this.columnModel.getPrimaryColumn(i);if(l){var c=this.filterManager.getFilterComponent(l,"NO_UI"),h=c&&c.resolveNow(null,function(w){return w}),m=this.frameworkComponentWrapper?this.frameworkComponentWrapper.unwrap(h):h;return e&&(m?setTimeout(e,0,m):c&&c.then(function(w){var R=s.frameworkComponentWrapper?s.frameworkComponentWrapper.unwrap(w):w;e(R)})),m}},d.prototype.getFilterApi=function(i){return console.warn("AG Grid: getFilterApi is deprecated, use getFilterInstance instead"),this.getFilterInstance(i)},d.prototype.destroyFilter=function(i){var e=this.columnModel.getPrimaryColumn(i);if(e)return this.filterManager.destroyFilter(e,"filterDestroyed")},d.prototype.getStatusPanel=function(i){if(this.statusBarService){var e=this.statusBarService.getStatusPanel(i);return this.frameworkComponentWrapper?this.frameworkComponentWrapper.unwrap(e):e}},d.prototype.getColumnDef=function(i){var e=this.columnModel.getPrimaryColumn(i);return e?e.getColDef():null},d.prototype.getColumnDefs=function(){return this.columnModel.getColumnDefs()},d.prototype.onFilterChanged=function(){this.filterManager.onFilterChanged()},d.prototype.onSortChanged=function(){this.sortController.onSortChanged()},d.prototype.setSortModel=function(i,e){console.warn("AG Grid: as of version 24.0.0, setSortModel() is deprecated, sort information is now part of Column State. Please use columnApi.applyColumnState() instead.");var s=[];i&&i.forEach(function(l,c){s.push({colId:l.colId,sort:l.sort,sortIndex:c})}),this.columnModel.applyColumnState({state:s,defaultState:{sort:null}})},d.prototype.getSortModel=function(){console.warn("AG Grid: as of version 24.0.0, getSortModel() is deprecated, sort information is now part of Column State. Please use columnApi.getColumnState() instead.");var e=this.columnModel.getColumnState().filter(function(c){return null!=c.sort}),s={};e.forEach(function(c){s[c.colId]=c.sortIndex});var l=e.map(function(c){return{colId:c.colId,sort:c.sort}});return l.sort(function(c,h){return s[c.colId]-s[h.colId]}),l},d.prototype.setFilterModel=function(i){this.filterManager.setFilterModel(i)},d.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},d.prototype.getFocusedCell=function(){return this.focusService.getFocusedCell()},d.prototype.clearFocusedCell=function(){return this.focusService.clearFocusedCell()},d.prototype.setFocusedCell=function(i,e,s){this.focusService.setFocusedCell(i,e,s,!0)},d.prototype.setSuppressRowDrag=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_SUPPRESS_ROW_DRAG,i)},d.prototype.setSuppressMoveWhenRowDragging=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_SUPPRESS_MOVE_WHEN_ROW_DRAG,i)},d.prototype.setSuppressRowClickSelection=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_SUPPRESS_ROW_CLICK_SELECTION,i)},d.prototype.addRowDropZone=function(i){this.gridBodyCon.getRowDragFeature().addRowDropZone(i)},d.prototype.removeRowDropZone=function(i){var e=this.dragAndDropService.findExternalZone(i);e&&this.dragAndDropService.removeDropTarget(e)},d.prototype.getRowDropZoneParams=function(i){return this.gridBodyCon.getRowDragFeature().getRowDropZone(i)},d.prototype.setHeaderHeight=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_HEADER_HEIGHT,i)},d.prototype.setDomLayout=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_DOM_LAYOUT,i)},d.prototype.setEnableCellTextSelection=function(i){this.gridBodyCon.setCellTextSelection(i)},d.prototype.setFillHandleDirection=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_FILL_HANDLE_DIRECTION,i)},d.prototype.setGroupHeaderHeight=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GROUP_HEADER_HEIGHT,i)},d.prototype.setFloatingFiltersHeight=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_FLOATING_FILTERS_HEIGHT,i)},d.prototype.setPivotGroupHeaderHeight=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PIVOT_GROUP_HEADER_HEIGHT,i)},d.prototype.setIsExternalFilterPresent=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_IS_EXTERNAL_FILTER_PRESENT,i)},d.prototype.setDoesExternalFilterPass=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_DOES_EXTERNAL_FILTER_PASS,i)},d.prototype.setNavigateToNextCell=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_NAVIGATE_TO_NEXT_CELL,i)},d.prototype.setTabToNextCell=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_TAB_TO_NEXT_CELL,i)},d.prototype.setTabToNextHeader=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_TAB_TO_NEXT_HEADER,i)},d.prototype.setNavigateToNextHeader=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_NAVIGATE_TO_NEXT_HEADER,i)},d.prototype.setGroupRowAggNodes=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GROUP_ROW_AGG_NODES,i)},d.prototype.setGetBusinessKeyForNode=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_BUSINESS_KEY_FOR_NODE,i)},d.prototype.setGetChildCount=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_CHILD_COUNT,i)},d.prototype.setProcessRowPostCreate=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PROCESS_ROW_POST_CREATE,i)},d.prototype.setGetRowNodeId=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_ROW_NODE_ID,i)},d.prototype.setGetRowClass=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_ROW_CLASS,i)},d.prototype.setIsFullWidthCell=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_IS_FULL_WIDTH_CELL,i)},d.prototype.setIsRowSelectable=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_IS_ROW_SELECTABLE,i)},d.prototype.setIsRowMaster=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_IS_ROW_MASTER,i)},d.prototype.setPostSort=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_POST_SORT,i)},d.prototype.setGetDocument=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_DOCUMENT,i)},d.prototype.setGetContextMenuItems=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_CONTEXT_MENU_ITEMS,i)},d.prototype.setGetMainMenuItems=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_MAIN_MENU_ITEMS,i)},d.prototype.setProcessCellForClipboard=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PROCESS_CELL_FOR_CLIPBOARD,i)},d.prototype.setSendToClipboard=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_SEND_TO_CLIPBOARD,i)},d.prototype.setProcessCellFromClipboard=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PROCESS_CELL_FROM_CLIPBOARD,i)},d.prototype.setProcessSecondaryColDef=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PROCESS_TO_SECONDARY_COLDEF,i)},d.prototype.setProcessSecondaryColGroupDef=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PROCESS_SECONDARY_COL_GROUP_DEF,i)},d.prototype.setPostProcessPopup=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_POST_PROCESS_POPUP,i)},d.prototype.setDefaultGroupOrderComparator=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_DEFAULT_GROUP_ORDER_COMPARATOR,i)},d.prototype.setGetChartToolbarItems=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_CHART_TOOLBAR_ITEMS,i)},d.prototype.setPaginationNumberFormatter=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PAGINATION_NUMBER_FORMATTER,i)},d.prototype.setGetServerSideStoreParams=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_SERVER_SIDE_STORE_PARAMS,i)},d.prototype.setIsServerSideGroupOpenByDefault=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_IS_SERVER_SIDE_GROUPS_OPEN_BY_DEFAULT,i)},d.prototype.setIsApplyServerSideTransaction=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_IS_APPLY_SERVER_SIDE_TRANSACTION,i)},d.prototype.setIsServerSideGroup=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_IS_SERVER_SIDE_GROUP,i)},d.prototype.setGetServerSideGroupKey=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_SERVER_SIDE_GROUP_KEY,i)},d.prototype.setGetRowStyle=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_ROW_STYLE,i)},d.prototype.setGetRowHeight=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GET_ROW_HEIGHT,i)},d.prototype.setPivotHeaderHeight=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_PIVOT_HEADER_HEIGHT,i)},d.prototype.isSideBarVisible=function(){return!!this.sideBarComp&&this.sideBarComp.isDisplayed()},d.prototype.setSideBarVisible=function(i){this.sideBarComp?this.sideBarComp.setDisplayed(i):i&&console.warn("AG Grid: sideBar is not loaded")},d.prototype.setSideBarPosition=function(i){this.sideBarComp?this.sideBarComp.setSideBarPosition(i):console.warn("AG Grid: sideBar is not loaded")},d.prototype.openToolPanel=function(i){this.sideBarComp?this.sideBarComp.openToolPanel(i):console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise")},d.prototype.closeToolPanel=function(){this.sideBarComp?this.sideBarComp.close():console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise")},d.prototype.getOpenedToolPanel=function(){return this.sideBarComp?this.sideBarComp.openedItem():null},d.prototype.getSideBar=function(){return this.gridOptionsWrapper.getSideBar()},d.prototype.setSideBar=function(i){this.gridOptionsWrapper.setProperty("sideBar",pp.parse(i))},d.prototype.setSuppressClipboardPaste=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_SUPPRESS_CLIPBOARD_PASTE,i)},d.prototype.isToolPanelShowing=function(){return this.sideBarComp.isToolPanelShowing()},d.prototype.doLayout=function(){vn(function(){return console.warn("AG Grid - since version 25.1, doLayout was taken out, as it's not needed. The grid responds to grid size changes automatically")},"doLayoutDeprecated")},d.prototype.resetRowHeights=function(){Fe(this.clientSideRowModel)&&this.clientSideRowModel.resetRowHeights()},d.prototype.setGroupRemoveSingleChildren=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GROUP_REMOVE_SINGLE_CHILDREN,i)},d.prototype.setGroupRemoveLowestSingleChildren=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,i)},d.prototype.onRowHeightChanged=function(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()},d.prototype.getValue=function(i,e){var s=this.columnModel.getPrimaryColumn(i);return Ce(s)&&(s=this.columnModel.getGridColumn(i)),Ce(s)?null:this.valueService.getValue(s,e)},d.prototype.addEventListener=function(i,e){var s=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addEventListener(i,e,s)},d.prototype.addGlobalListener=function(i){var e=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addGlobalListener(i,e)},d.prototype.removeEventListener=function(i,e){var s=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeEventListener(i,e,s)},d.prototype.removeGlobalListener=function(i){var e=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeGlobalListener(i,e)},d.prototype.dispatchEvent=function(i){this.eventService.dispatchEvent(i)},d.prototype.destroy=function(){if(!this.destroyCalled){this.destroyCalled=!0;var i=this.ctrlsService.getGridCtrl();i&&i.destroyGridUi(),this.context.destroy()}},d.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(l_.bind(window,this,"Grid API"),100)},d.prototype.warnIfDestroyed=function(i){return this.destroyCalled&&console.warn("AG Grid: Grid API method "+i+" was called on a grid that was destroyed."),this.destroyCalled},d.prototype.resetQuickFilter=function(){this.warnIfDestroyed("resetQuickFilter")||this.rowModel.forEachNode(function(i){return i.quickFilterAggregateText=null})},d.prototype.getRangeSelections=function(){return console.warn("AG Grid: in v20.1.x, api.getRangeSelections() is gone, please use getCellRanges() instead.\n        We had to change how cell selections works a small bit to allow charting to integrate. The return type of\n        getCellRanges() is a bit different, please check the AG Grid documentation."),null},d.prototype.getCellRanges=function(){return this.rangeService?this.rangeService.getCellRanges():(console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),null)},d.prototype.camelCaseToHumanReadable=function(i){return Xr(i)},d.prototype.addRangeSelection=function(i){console.warn("AG Grid: As of version 21.x, range selection changed slightly to allow charting integration. Please call api.addCellRange() instead of api.addRangeSelection()")},d.prototype.addCellRange=function(i){this.rangeService||console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),this.rangeService.addCellRange(i)},d.prototype.clearRangeSelection=function(){this.rangeService||console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),this.rangeService.removeAllCellRanges()},d.prototype.undoCellEditing=function(){this.undoRedoService.undo()},d.prototype.redoCellEditing=function(){this.undoRedoService.redo()},d.prototype.getCurrentUndoSize=function(){return this.undoRedoService.getCurrentUndoStackSize()},d.prototype.getCurrentRedoSize=function(){return this.undoRedoService.getCurrentRedoStackSize()},d.prototype.getChartModels=function(){if(qt.assertRegistered(Y.GXE.RangeSelectionModule,"api.getChartModels")&&qt.assertRegistered(Y.GXE.GridChartsModule,"api.getChartModels"))return this.chartService.getChartModels()},d.prototype.getChartRef=function(i){if(qt.assertRegistered(Y.GXE.RangeSelectionModule,"api.getChartRef")&&qt.assertRegistered(Y.GXE.GridChartsModule,"api.getChartRef"))return this.chartService.getChartRef(i)},d.prototype.getChartImageDataURL=function(i){if(qt.assertRegistered(Y.GXE.RangeSelectionModule,"api.getChartImageDataURL")&&qt.assertRegistered(Y.GXE.GridChartsModule,"api.getChartImageDataURL"))return this.chartService.getChartImageDataURL(i)},d.prototype.createRangeChart=function(i){if(qt.assertRegistered(Y.GXE.RangeSelectionModule,"api.createRangeChart")&&qt.assertRegistered(Y.GXE.GridChartsModule,"api.createRangeChart"))return this.chartService.createRangeChart(i)},d.prototype.createCrossFilterChart=function(i){if(qt.assertRegistered(Y.GXE.RangeSelectionModule,"api.createCrossFilterChart")&&qt.assertRegistered(Y.GXE.GridChartsModule,"api.createCrossFilterChart"))return this.chartService.createCrossFilterChart(i)},d.prototype.restoreChart=function(i,e){if(qt.assertRegistered(Y.GXE.RangeSelectionModule,"api.restoreChart")&&qt.assertRegistered(Y.GXE.GridChartsModule,"api.restoreChart"))return this.chartService.restoreChart(i,e)},d.prototype.createPivotChart=function(i){if(qt.assertRegistered(Y.GXE.RangeSelectionModule,"api.createPivotChart")&&qt.assertRegistered(Y.GXE.GridChartsModule,"api.createPivotChart"))return this.chartService.createPivotChart(i)},d.prototype.copySelectedRowsToClipboard=function(i,e){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copySelectedRowsToClipboard(i,e)},d.prototype.copySelectedRangeToClipboard=function(i){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copySelectedRangeToClipboard(i)},d.prototype.copySelectedRangeDown=function(){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copyRangeDown()},d.prototype.showColumnMenuAfterButtonClick=function(i,e){var s=this.columnModel.getGridColumn(i);this.menuFactory.showMenuAfterButtonClick(s,e,"columnMenu")},d.prototype.showColumnMenuAfterMouseClick=function(i,e){var s=this.columnModel.getGridColumn(i);s||(s=this.columnModel.getPrimaryColumn(i)),s?this.menuFactory.showMenuAfterMouseEvent(s,e):console.error("AG Grid: column '"+i+"' not found")},d.prototype.hidePopupMenu=function(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()},d.prototype.setPopupParent=function(i){this.gridOptionsWrapper.setProperty(gt.PROP_POPUP_PARENT,i)},d.prototype.tabToNextCell=function(){return this.navigationService.tabToNextCell(!1)},d.prototype.tabToPreviousCell=function(){return this.navigationService.tabToNextCell(!0)},d.prototype.getCellRendererInstances=function(i){return void 0===i&&(i={}),this.rowRenderer.getCellRendererInstances(i)},d.prototype.getCellEditorInstances=function(i){return void 0===i&&(i={}),this.rowRenderer.getCellEditorInstances(i)},d.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},d.prototype.stopEditing=function(i){void 0===i&&(i=!1),this.rowRenderer.stopEditing(i)},d.prototype.startEditingCell=function(i){var e=this.columnModel.getGridColumn(i.colKey);if(e){var s={rowIndex:i.rowIndex,rowPinned:i.rowPinned||null,column:e};null==i.rowPinned&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(i.rowIndex);var c=this.navigationService.getCellByPosition(s);!c||c.startRowOrCellEdit(i.keyPress,i.charPress)}else console.warn("AG Grid: no column found for "+i.colKey)},d.prototype.addAggFunc=function(i,e){this.aggFuncService&&this.aggFuncService.addAggFunc(i,e)},d.prototype.addAggFuncs=function(i){this.aggFuncService&&this.aggFuncService.addAggFuncs(i)},d.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},d.prototype.applyServerSideTransaction=function(i){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransaction(i);console.warn("AG Grid: Cannot apply Server Side Transaction if not using the Server Side Row Model.")},d.prototype.applyServerSideTransactionAsync=function(i,e){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransactionAsync(i,e);console.warn("AG Grid: Cannot apply Server Side Transaction if not using the Server Side Row Model.")},d.prototype.retryServerSideLoads=function(){this.serverSideRowModel?this.serverSideRowModel.retryLoads():console.warn("AG Grid: API retryServerSideLoads() can only be used when using Server-Side Row Model.")},d.prototype.flushServerSideAsyncTransactions=function(){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.flushAsyncTransactions();console.warn("AG Grid: Cannot flush Server Side Transaction if not using the Server Side Row Model.")},d.prototype.applyTransaction=function(i){if(this.clientSideRowModel){var e=this.clientSideRowModel.updateRowData(i);return this.rowRenderer.refreshFullWidthRows(e.update),this.gridOptionsWrapper.isSuppressChangeDetection()||this.rowRenderer.refreshCells(),e}console.error("AG Grid: updateRowData() only works with ClientSideRowModel. Working with InfiniteRowModel was deprecated in v23.1 and removed in v24.1")},d.prototype.updateRowData=function(i){return vn(function(){return console.warn("AG Grid: as of v23.1, grid API updateRowData(transaction) is now called applyTransaction(transaction). updateRowData is deprecated and will be removed in a future major release.")},"updateRowData deprecated"),this.applyTransaction(i)},d.prototype.applyTransactionAsync=function(i,e){this.clientSideRowModel?this.clientSideRowModel.batchUpdateRowData(i,e):console.error("AG Grid: api.applyTransactionAsync() only works with ClientSideRowModel.")},d.prototype.flushAsyncTransactions=function(){this.clientSideRowModel?this.clientSideRowModel.flushAsyncTransactions():console.error("AG Grid: api.applyTransactionAsync() only works with ClientSideRowModel.")},d.prototype.batchUpdateRowData=function(i,e){vn(function(){return console.warn("AG Grid: as of v23.1, grid API batchUpdateRowData(transaction, callback) is now called applyTransactionAsync(transaction, callback). batchUpdateRowData is deprecated and will be removed in a future major release.")},"batchUpdateRowData deprecated"),this.applyTransactionAsync(i,e)},d.prototype.insertItemsAtIndex=function(i,e,s){console.warn("AG Grid: insertItemsAtIndex() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:e,addIndex:i,update:null,remove:null})},d.prototype.removeItems=function(i,e){console.warn("AG Grid: removeItems() is deprecated, use updateRowData(transaction) instead.");var s=i.map(function(l){return l.data});this.updateRowData({add:null,addIndex:null,update:null,remove:s})},d.prototype.addItems=function(i,e){console.warn("AG Grid: addItems() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:i,addIndex:null,update:null,remove:null})},d.prototype.refreshVirtualPageCache=function(){console.warn("AG Grid: refreshVirtualPageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},d.prototype.refreshInfinitePageCache=function(){console.warn("AG Grid: refreshInfinitePageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},d.prototype.refreshInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():console.warn("AG Grid: api.refreshInfiniteCache is only available when rowModelType='infinite'.")},d.prototype.purgeVirtualPageCache=function(){console.warn("AG Grid: purgeVirtualPageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfinitePageCache()},d.prototype.purgeInfinitePageCache=function(){console.warn("AG Grid: purgeInfinitePageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfiniteCache()},d.prototype.purgeInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():console.warn("AG Grid: api.purgeInfiniteCache is only available when rowModelType='infinite'.")},d.prototype.purgeEnterpriseCache=function(i){console.warn("ag-grid: since version 18.x, api.purgeEnterpriseCache() should be replaced with api.purgeServerSideCache()"),this.purgeServerSideCache(i)},d.prototype.purgeServerSideCache=function(i){void 0===i&&(i=[]),this.serverSideRowModel?(console.warn("AG Grid: since v25.0, api.purgeServerSideCache is deprecated. Please use api.refreshServerSideStore({purge: true}) instead."),this.refreshServerSideStore({route:i,purge:!0})):console.warn("AG Grid: api.purgeServerSideCache is only available when rowModelType='serverSide'.")},d.prototype.refreshServerSideStore=function(i){this.serverSideRowModel?this.serverSideRowModel.refreshStore(i):console.warn("AG Grid: api.refreshServerSideStore is only available when rowModelType='serverSide'.")},d.prototype.getServerSideStoreState=function(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(console.warn("AG Grid: api.getServerSideStoreState is only available when rowModelType='serverSide'."),[])},d.prototype.getVirtualRowCount=function(){return console.warn("AG Grid: getVirtualRowCount() is now called getInfiniteRowCount(), please call getInfiniteRowCount() instead"),this.getInfiniteRowCount()},d.prototype.getInfiniteRowCount=function(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();console.warn("AG Grid: api.getVirtualRowCount is only available when rowModelType='virtual'.")},d.prototype.isMaxRowFound=function(){return console.warn("AG Grid: api.isLastRowIndexKnown is deprecated, please use api.isLastRowIndexKnown()"),this.isLastRowIndexKnown()},d.prototype.isLastRowIndexKnown=function(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();console.warn("AG Grid: api.isMaxRowFound is only available when rowModelType='virtual'.")},d.prototype.setVirtualRowCount=function(i,e){console.warn("AG Grid: setVirtualRowCount() is now called setInfiniteRowCount(), please call setInfiniteRowCount() instead"),this.setRowCount(i,e)},d.prototype.setInfiniteRowCount=function(i,e){console.warn("AG Grid: setInfiniteRowCount() is now called setRowCount(), please call setRowCount() instead"),this.setRowCount(i,e)},d.prototype.setRowCount=function(i,e){this.infiniteRowModel?this.infiniteRowModel.setRowCount(i,e):console.warn("AG Grid: api.setRowCount is only available for Infinite Row Model.")},d.prototype.getVirtualPageState=function(){return console.warn("AG Grid: getVirtualPageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},d.prototype.getInfinitePageState=function(){return console.warn("AG Grid: getInfinitePageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},d.prototype.getCacheBlockState=function(){return this.rowNodeBlockLoader.getBlockState()},d.prototype.checkGridSize=function(){console.warn("in AG Grid v25.2.0, checkGridSize() was removed, as it was legacy and didn't do anything uesful.")},d.prototype.getFirstRenderedRow=function(){return console.warn("in AG Grid v12, getFirstRenderedRow() was renamed to getFirstDisplayedRow()"),this.getFirstDisplayedRow()},d.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},d.prototype.getLastRenderedRow=function(){return console.warn("in AG Grid v12, getLastRenderedRow() was renamed to getLastDisplayedRow()"),this.getLastDisplayedRow()},d.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},d.prototype.getDisplayedRowAtIndex=function(i){return this.rowModel.getRow(i)},d.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},d.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},d.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},d.prototype.paginationSetPageSize=function(i){this.gridOptionsWrapper.setProperty("paginationPageSize",i)},d.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},d.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},d.prototype.paginationGetRowCount=function(){return this.paginationProxy.getMasterRowCount()},d.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},d.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},d.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},d.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},d.prototype.paginationGoToPage=function(i){this.paginationProxy.goToPage(i)},Rn([Nn("immutableService")],d.prototype,"immutableService",void 0),Rn([Nn("csvCreator")],d.prototype,"csvCreator",void 0),Rn([Nn("excelCreator")],d.prototype,"excelCreator",void 0),Rn([H("rowRenderer")],d.prototype,"rowRenderer",void 0),Rn([H("navigationService")],d.prototype,"navigationService",void 0),Rn([H("filterManager")],d.prototype,"filterManager",void 0),Rn([H("columnModel")],d.prototype,"columnModel",void 0),Rn([H("selectionService")],d.prototype,"selectionService",void 0),Rn([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),Rn([H("valueService")],d.prototype,"valueService",void 0),Rn([H("alignedGridsService")],d.prototype,"alignedGridsService",void 0),Rn([H("eventService")],d.prototype,"eventService",void 0),Rn([H("pinnedRowModel")],d.prototype,"pinnedRowModel",void 0),Rn([H("context")],d.prototype,"context",void 0),Rn([H("rowModel")],d.prototype,"rowModel",void 0),Rn([H("sortController")],d.prototype,"sortController",void 0),Rn([H("paginationProxy")],d.prototype,"paginationProxy",void 0),Rn([H("focusService")],d.prototype,"focusService",void 0),Rn([H("dragAndDropService")],d.prototype,"dragAndDropService",void 0),Rn([Nn("rangeService")],d.prototype,"rangeService",void 0),Rn([Nn("clipboardService")],d.prototype,"clipboardService",void 0),Rn([Nn("aggFuncService")],d.prototype,"aggFuncService",void 0),Rn([H("menuFactory")],d.prototype,"menuFactory",void 0),Rn([Nn("contextMenuFactory")],d.prototype,"contextMenuFactory",void 0),Rn([H("valueCache")],d.prototype,"valueCache",void 0),Rn([H("animationFrameService")],d.prototype,"animationFrameService",void 0),Rn([Nn("statusBarService")],d.prototype,"statusBarService",void 0),Rn([Nn("chartService")],d.prototype,"chartService",void 0),Rn([Nn("undoRedoService")],d.prototype,"undoRedoService",void 0),Rn([Nn("rowNodeBlockLoader")],d.prototype,"rowNodeBlockLoader",void 0),Rn([Nn("ssrmTransactionManager")],d.prototype,"serverSideTransactionManager",void 0),Rn([H("ctrlsService")],d.prototype,"ctrlsService",void 0),Rn([Nn("frameworkComponentWrapper")],d.prototype,"frameworkComponentWrapper",void 0),Rn([Qe],d.prototype,"init",null),Rn([Fi],d.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),Rn([vt("gridApi")],d)}(),Ox=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Hg=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Vg=function(d,i){return function(e,s){i(e,s,d)}},Wg=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.expressionToFunctionCache={},e}return Ox(i,d),i.prototype.setBeans=function(e){this.logger=e.create("ExpressionService")},i.prototype.evaluate=function(e,s){return"function"==typeof e?e(s):"string"==typeof e?this.evaluateExpression(e,s):void console.error("AG Grid: value should be either a string or a function",e)},i.prototype.evaluateExpression=function(e,s){try{return this.createExpressionFunction(e)(s.value,s.context,s.oldValue,s.newValue,s.value,s.node,s.data,s.colDef,s.rowIndex,s.api,s.columnApi,s.getValue,s.column,s.columnGroup)}catch(h){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",s),console.log("Exception = "+h),null}},i.prototype.createExpressionFunction=function(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];var s=this.createFunctionBody(e),l=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",s);return this.expressionToFunctionCache[e]=l,l},i.prototype.createFunctionBody=function(e){return e.indexOf("return")>=0?e:"return "+e+";"},Hg([Vg(0,Ni("loggerFactory"))],i.prototype,"setBeans",null),Hg([vt("expressionService")],i)}(Ke),GM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ug=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},uw=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.templateCache={},e.waitingCallbacks={},e}return GM(i,d),i.prototype.getTemplate=function(e,s){var l=this.templateCache[e];if(l)return l;var c=this.waitingCallbacks[e],h=this;if(!c){this.waitingCallbacks[e]=c=[];var m=new XMLHttpRequest;m.onload=function(){h.handleHttpResult(this,e)},m.open("GET",e),m.send()}return s&&c.push(s),null},i.prototype.handleHttpResult=function(e,s){if(200===e.status&&null!==e.response){this.templateCache[s]=e.response||e.responseText;for(var l=this.waitingCallbacks[s],c=0;c<l.length;c++)(0,l[c])();if(this.$scope){var m=this;window.setTimeout(function(){m.$scope.$apply()},0)}}else console.warn("Unable to get template error "+e.status+" - "+s)},Ug([H("$scope")],i.prototype,"$scope",void 0),Ug([vt("templateService")],i)}(Ke),lw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),pa=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Wi=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}var e;return lw(i,d),e=i,i.addKeyboardModeEvents=function(s,l){var c=e.instancesMonitored.get(s);c&&c.length>0?-1===c.indexOf(l)&&c.push(l):(e.instancesMonitored.set(s,[l]),s.addEventListener("keydown",e.toggleKeyboardMode),s.addEventListener("mousedown",e.toggleKeyboardMode))},i.removeKeyboardModeEvents=function(s,l){var c=e.instancesMonitored.get(s),h=[];c&&c.length&&(h=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s}(c).filter(function(m){return m!==l}),e.instancesMonitored.set(s,h)),0===h.length&&(s.removeEventListener("keydown",e.toggleKeyboardMode),s.removeEventListener("mousedown",e.toggleKeyboardMode))},i.toggleKeyboardMode=function(s){var l=e.keyboardModeActive,c="keydown"===s.type;if(!(c&&(s.ctrlKey||s.metaKey||s.altKey)||l&&c||!l&&!c)){e.keyboardModeActive=c;var h=s.target.ownerDocument;if(h){var m=e.instancesMonitored.get(h);m&&m.forEach(function(w){w.dispatchEvent({type:c?$.EVENT_KEYBOARD_FOCUS:$.EVENT_MOUSE_FOCUS})})}}},i.prototype.init=function(){var s=this,l=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_MODE_CHANGED,l),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_GROUP_OPENED,l),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,l),this.ctrlsService.whenReady(function(c){s.gridCtrl=c.gridCtrl;var h=s.gridOptionsWrapper.getDocument();e.addKeyboardModeEvents(h,s.gridCtrl),s.addDestroyFunc(function(){return s.unregisterGridCompController(s.gridCtrl)})})},i.prototype.unregisterGridCompController=function(s){var l=this.gridOptionsWrapper.getDocument();e.removeKeyboardModeEvents(l,s)},i.prototype.onColumnEverythingChanged=function(){if(this.focusedCellPosition){var s=this.focusedCellPosition.column,l=this.columnModel.getGridColumn(s.getId());s!==l&&this.clearFocusedCell()}},i.prototype.isKeyboardMode=function(){return e.keyboardModeActive},i.prototype.getFocusCellToUseAfterRefresh=function(){return this.gridOptionsWrapper.isSuppressFocusAfterRefresh()||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(document.activeElement,ou.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition},i.prototype.getFocusHeaderToUseAfterRefresh=function(){return this.gridOptionsWrapper.isSuppressFocusAfterRefresh()||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(document.activeElement,Sd.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition},i.prototype.isDomDataMissingInHierarchy=function(s,l){for(var c=s;c;){if(this.gridOptionsWrapper.getDomData(c,l))return!1;c=c.parentNode}return!0},i.prototype.clearFocusedCell=function(){this.focusedCellPosition=null,this.onCellFocused(!1)},i.prototype.getFocusedCell=function(){return this.focusedCellPosition},i.prototype.setFocusedCell=function(s,l,c,h){void 0===h&&(h=!1);var m=this.columnModel.getGridColumn(l);m?(this.focusedCellPosition=m?{rowIndex:s,rowPinned:Ue(c),column:m}:null,this.onCellFocused(h)):this.focusedCellPosition=null},i.prototype.isCellFocused=function(s){return null!=this.focusedCellPosition&&this.focusedCellPosition.column===s.column&&this.isRowFocused(s.rowIndex,s.rowPinned)},i.prototype.isRowNodeFocused=function(s){return this.isRowFocused(s.rowIndex,s.rowPinned)},i.prototype.isHeaderWrapperFocused=function(s){if(null==this.focusedHeaderPosition)return!1;var l=s.getColumnGroupChild(),c=s.getRowIndex(),h=s.getPinned(),m=this.focusedHeaderPosition,w=m.column;return l===w&&c===m.headerRowIndex&&h==w.getPinned()},i.prototype.clearFocusedHeader=function(){this.focusedHeaderPosition=null},i.prototype.getFocusedHeader=function(){return this.focusedHeaderPosition},i.prototype.setFocusedHeader=function(s,l){this.focusedHeaderPosition={headerRowIndex:s,column:l}},i.prototype.focusHeaderPosition=function(s){var l=s.direction,c=s.fromTab,m=s.event,w=s.headerPosition;if(s.allowUserOverride){var U,R=this.gridOptionsWrapper,T=this.getFocusedHeader(),L=this.headerNavigationService.getHeaderRowCount();c?(U=R.getTabToNextHeaderFunc())&&(w=U({backwards:"Before"===l,previousHeaderPosition:T,nextHeaderPosition:w,headerRowCount:L,api:R.getApi(),columnApi:R.getColumnApi()})):(U=R.getNavigateToNextHeaderFunc())&&m&&(w=U({key:m.key,previousHeaderPosition:T,nextHeaderPosition:w,headerRowCount:L,event:m,api:R.getApi(),columnApi:R.getColumnApi()}))}return!!w&&(-1===w.headerRowIndex?this.focusGridView(w.column):(this.headerNavigationService.scrollToColumn(w.column,l),this.ctrlsService.getHeaderRowContainerCtrl(w.column.getPinned()).focusHeader(w.headerRowIndex,w.column,m)))},i.prototype.isAnyCellFocused=function(){return!!this.focusedCellPosition},i.prototype.isRowFocused=function(s,l){return null!=this.focusedCellPosition&&this.focusedCellPosition.rowIndex===s&&this.focusedCellPosition.rowPinned===Ue(l)},i.prototype.findFocusableElements=function(s,l,c){void 0===c&&(c=!1);var m=fe.FOCUSABLE_EXCLUDE;l&&(m+=", "+l),c&&(m+=', [tabindex="-1"]');var K,w=Array.prototype.slice.apply(s.querySelectorAll(fe.FOCUSABLE_SELECTOR)),R=Array.prototype.slice.apply(s.querySelectorAll(m));return R.length?(K=R,w.filter(function(Q){return-1===K.indexOf(Q)})):w},i.prototype.focusInto=function(s,l,c){void 0===l&&(l=!1),void 0===c&&(c=!1);var h=this.findFocusableElements(s,null,c),m=l?zn(h):h[0];return!!m&&(m.focus(),!0)},i.prototype.findNextFocusableElement=function(s,l,c){var h=this.findFocusableElements(s,l?':not([tabindex="-1"])':null),w=(l?nt(h,function(R){return R.contains(document.activeElement)}):h.indexOf(document.activeElement))+(c?-1:1);return w<0||w>=h.length?null:h[w]},i.prototype.isFocusUnderManagedComponent=function(s){var l=s.querySelectorAll("."+Ko.FOCUS_MANAGED_CLASS);if(!l.length)return!1;for(var c=0;c<l.length;c++)if(l[c].contains(document.activeElement))return!0;return!1},i.prototype.findTabbableParent=function(s,l){void 0===l&&(l=5);for(var c=0;s&&null===Uf(s)&&++c<=l;)s=s.parentElement;return null===Uf(s)?null:s},i.prototype.onCellFocused=function(s){var l={type:$.EVENT_CELL_FOCUSED,forceBrowserFocus:s,rowIndex:null,column:null,floating:null,api:this.gridApi,columnApi:this.columnApi,rowPinned:null,isFullWidthCell:!1};if(this.focusedCellPosition){var c=l.rowIndex=this.focusedCellPosition.rowIndex,h=l.rowPinned=this.focusedCellPosition.rowPinned;l.column=this.focusedCellPosition.column;var m=this.rowRenderer.getRowByPosition({rowIndex:c,rowPinned:h});m&&(l.isFullWidthCell=m.isFullWidth())}this.eventService.dispatchEvent(l)},i.prototype.focusGridView=function(s,l){var c=l?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!c)return!1;var h=c.rowIndex,m=c.rowPinned,w=this.getFocusedHeader();return!s&&w&&(s=w.column),!(null==h||!s)&&(this.navigationService.ensureCellVisible({rowIndex:h,column:s,rowPinned:m}),this.setFocusedCell(h,s,Ue(m),!0),this.rangeService&&this.rangeService.setRangeToCell({rowIndex:h,rowPinned:m,column:s}),!0)},i.prototype.focusNextGridCoreContainer=function(s){return!!this.gridCtrl.focusNextInnerContainer(s)||(s||this.gridCtrl.forceFocusOutOfContainer(),!1)},i.AG_KEYBOARD_FOCUS="ag-keyboard-focus",i.keyboardModeActive=!1,i.instancesMonitored=new Map,pa([H("columnModel")],i.prototype,"columnModel",void 0),pa([H("headerNavigationService")],i.prototype,"headerNavigationService",void 0),pa([H("columnApi")],i.prototype,"columnApi",void 0),pa([H("gridApi")],i.prototype,"gridApi",void 0),pa([H("rowRenderer")],i.prototype,"rowRenderer",void 0),pa([H("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),pa([Nn("rangeService")],i.prototype,"rangeService",void 0),pa([H("navigationService")],i.prototype,"navigationService",void 0),pa([H("ctrlsService")],i.prototype,"ctrlsService",void 0),pa([Qe],i.prototype,"init",null),e=pa([vt("focusService")],i)}(Ke),Ix=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),rc=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},bs=function(){return function(d){d[d.vertical=0]="vertical",d[d.horizontal=1]="horizontal"}(bs||(bs={})),bs}(),Lx=0,cw=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.popupList=[],e}return Ix(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(s){e.gridCtrl=s.gridCtrl,e.addManagedListener(e.gridCtrl,$.EVENT_KEYBOARD_FOCUS,function(){Wt(e.popupList,function(l){return Dt(l.element,Wi.AG_KEYBOARD_FOCUS)})}),e.addManagedListener(e.gridCtrl,$.EVENT_MOUSE_FOCUS,function(){Wt(e.popupList,function(l){return yi(l.element,Wi.AG_KEYBOARD_FOCUS)})})})},i.prototype.getPopupParent=function(){return this.gridOptionsWrapper.getPopupParent()||this.gridCtrl.getGui()},i.prototype.positionPopupForMenu=function(e){var s=e.eventSource.getBoundingClientRect(),l=this.getParentRect(),c=this.keepXYWithinBounds(e.ePopup,s.top-l.top,bs.vertical),h=e.ePopup.clientWidth>0?e.ePopup.clientWidth:200;e.ePopup.style.minWidth=h+"px";var R,w=l.right-l.left-h;function T(){return s.right-l.left-2}function L(){return s.left-l.left-h}this.gridOptionsWrapper.isEnableRtl()?((R=L())<0&&(R=T()),R>w&&(R=0)):((R=T())>w&&(R=L()),R<0&&(R=0)),e.ePopup.style.left=R+"px",e.ePopup.style.top=c+"px"},i.prototype.positionPopupUnderMouseEvent=function(e){var s=e.ePopup,l=e.nudgeX,c=e.nudgeY,h=this.calculatePointerAlign(e.mouseEvent);this.positionPopup({ePopup:s,x:h.x,y:h.y,nudgeX:l,nudgeY:c,keepWithinBounds:!0}),this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)},i.prototype.calculatePointerAlign=function(e){var s=this.getParentRect();return{x:e.clientX-s.left,y:e.clientY-s.top}},i.prototype.positionPopupUnderComponent=function(e){var s=e.eventSource.getBoundingClientRect(),l=e.alignSide||"left",c=this.getParentRect(),h=s.left-c.left;"right"===l&&(h-=e.ePopup.offsetWidth-s.width),this.positionPopup({ePopup:e.ePopup,nudgeX:e.nudgeX,nudgeY:e.nudgeY,x:h,y:s.top-c.top+s.height,keepWithinBounds:e.keepWithinBounds}),this.callPostProcessPopup(e.type,e.ePopup,e.eventSource,null,e.column,e.rowNode)},i.prototype.positionPopupOverComponent=function(e){var s=e.eventSource.getBoundingClientRect(),l=this.getParentRect();this.positionPopup({ePopup:e.ePopup,nudgeX:e.nudgeX,nudgeY:e.nudgeY,x:s.left-l.left,y:s.top-l.top,keepWithinBounds:e.keepWithinBounds}),this.callPostProcessPopup(e.type,e.ePopup,e.eventSource,null,e.column,e.rowNode)},i.prototype.callPostProcessPopup=function(e,s,l,c,h,m){var w=this.gridOptionsWrapper.getPostProcessPopupFunc();w&&w({column:h,rowNode:m,ePopup:s,type:e,eventSource:l,mouseEvent:c})},i.prototype.positionPopup=function(e){var s=e.ePopup,c=e.nudgeX,h=e.nudgeY,m=e.x,w=e.y;c&&(m+=c),h&&(w+=h),e.keepWithinBounds&&(m=this.keepXYWithinBounds(s,m,bs.horizontal),w=this.keepXYWithinBounds(s,w,bs.vertical)),s.style.left=m+"px",s.style.top=w+"px"},i.prototype.getActivePopups=function(){return this.popupList.map(function(e){return e.element})},i.prototype.getPopupList=function(){return this.popupList},i.prototype.getParentRect=function(){var e=this.gridOptionsWrapper.getDocument(),s=this.getPopupParent();s===e.body&&(s=e.documentElement);var l=getComputedStyle(s),c=s.getBoundingClientRect();return{top:c.top+parseFloat(l.borderTopWidth)||0,left:c.left+parseFloat(l.borderLeftWidth)||0,right:c.right+parseFloat(l.borderRightWidth)||0,bottom:c.bottom+parseFloat(l.borderBottomWidth)||0}},i.prototype.keepXYWithinBounds=function(e,s,l){var c=l===bs.vertical,h=c?"clientHeight":"clientWidth",m=c?"top":"left",w=c?"offsetHeight":"offsetWidth",R=c?"scrollTop":"scrollLeft",T=this.gridOptionsWrapper.getDocument(),L=T.documentElement,U=this.getPopupParent(),K=U.getBoundingClientRect(),Q=T.documentElement.getBoundingClientRect(),oe=U===T.body,Te=e[w],Ve=oe?(c?Lu:jf)(L)+L[R]:U[h];oe&&(Ve-=Math.abs(Q[m]-K[m]));var Pe=Ve-Te;return Math.min(Math.max(s,0),Math.abs(Pe))},i.prototype.keepPopupPositionedRelativeTo=function(e){var s=this,l=this.getPopupParent(),c=l.getBoundingClientRect(),h=e.element.getBoundingClientRect(),m=c.top-h.top,w=c.left-h.left,R=m,T=w,L=e.ePopup.style.top,U=parseInt(L.substring(0,L.length-1),10),K=e.ePopup.style.left,Q=parseInt(K.substring(0,K.length-1),10);return new Zr(function(oe){s.getFrameworkOverrides().setInterval(function(){var Te=l.getBoundingClientRect(),He=e.element.getBoundingClientRect();if(0==He.top&&0==He.left&&0==He.height&&0==He.width)e.hidePopup();else{var Pe=Te.top-He.top;if(Pe!=R){var Ze=s.keepXYWithinBounds(e.ePopup,U+m-Pe,bs.vertical);e.ePopup.style.top=Ze+"px"}R=Pe;var Re=Te.left-He.left;if(Re!=T){var an=s.keepXYWithinBounds(e.ePopup,Q+w-Re,bs.horizontal);e.ePopup.style.left=an+"px"}T=Re}},200).then(function(Te){oe(function(){null!=Te&&window.clearInterval(Te)})})})},i.prototype.addPopup=function(e){var s=this,l=e.modal,c=e.eChild,h=e.closeOnEsc,m=e.closedCallback,w=e.click,R=e.alwaysOnTop,T=e.afterGuiAttached,L=e.positionCallback,U=e.anchorToElement,K=e.ariaLabel,Q=this.gridOptionsWrapper.getDocument(),oe=new Zr(function(er){return er(function(){})});if(!Q)return console.warn("ag-grid: could not find the document, document is empty"),{hideFunc:function(){},stopAnchoringPromise:oe};var Te=nt(this.popupList,function(er){return er.element===c});if(-1!==Te){var He=this.popupList[Te];return{hideFunc:He.hideFunc,stopAnchoringPromise:He.stopAnchoringPromise}}var Ve=this.getPopupParent();null==c.style.top&&(c.style.top="0px"),null==c.style.left&&(c.style.left="0px");var Pe=document.createElement("div"),Ze=this.environment.getTheme().theme;Ze&&Dt(Pe,Ze),Dt(Pe,"ag-popup"),Dt(c,this.gridOptionsWrapper.isEnableRtl()?"ag-rtl":"ag-ltr"),Dt(c,"ag-popup-child"),Ki(c,"dialog"),Na(c,K),this.focusService.isKeyboardMode()&&Dt(c,Wi.AG_KEYBOARD_FOCUS),Pe.appendChild(c),Ve.appendChild(Pe),R?this.setAlwaysOnTop(Pe,!0):this.bringPopupToFront(Pe);var Re=!1,an=function(or){Pe.contains(document.activeElement)&&(or.which||or.keyCode)===$e.ESCAPE&&Xn({keyboardEvent:or})},Gt=function(or){return Xn({mouseEvent:or})},mn=function(or){return Xn({touchEvent:or})},Xn=function(or){void 0===or&&(or={});var lr=or.mouseEvent,eo=or.touchEvent,ra=or.keyboardEvent;s.isEventFromCurrentPopup({mouseEvent:lr,touchEvent:eo},c)||s.isEventSameChainAsOriginalEvent({originalMouseEvent:w,mouseEvent:lr,touchEvent:eo})||Re||(Re=!0,Ve.removeChild(Pe),Q.removeEventListener("keydown",an),Q.removeEventListener("mousedown",Gt),Q.removeEventListener("touchstart",mn),Q.removeEventListener("contextmenu",Gt),s.eventService.removeEventListener($.EVENT_DRAG_STARTED,Gt),m&&m(lr||eo||ra),s.popupList=s.popupList.filter(function(zr){return zr.element!==c}),oe&&oe.then(function(zr){return zr&&zr()}))};return T&&T({hidePopup:Xn}),window.setTimeout(function(){h&&Q.addEventListener("keydown",an),l&&(Q.addEventListener("mousedown",Gt),s.eventService.addEventListener($.EVENT_DRAG_STARTED,Gt),Q.addEventListener("touchstart",mn),Q.addEventListener("contextmenu",Gt))},0),L&&L(),U&&(oe=this.keepPopupPositionedRelativeTo({element:U,ePopup:c,hidePopup:Xn})),this.popupList.push({element:c,wrapper:Pe,hideFunc:Xn,stopAnchoringPromise:oe,instanceId:Lx++,isAnchored:!!U}),{hideFunc:Xn,stopAnchoringPromise:oe}},i.prototype.hasAnchoredPopup=function(){return $t(this.popupList,function(e){return e.isAnchored})},i.prototype.isEventFromCurrentPopup=function(e,s){var h=e.mouseEvent||e.touchEvent;if(!h)return!1;var m=nt(this.popupList,function(T){return T.element===s});if(-1===m)return!1;for(var w=m;w<this.popupList.length;w++)if(kf(this.popupList[w].element,h))return!0;return this.isElementWithinCustomPopup(h.target)},i.prototype.isElementWithinCustomPopup=function(e){for(;e&&e!==document.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1},i.prototype.isEventSameChainAsOriginalEvent=function(e){var s=e.originalMouseEvent,l=e.mouseEvent,c=e.touchEvent,h=null;if(l?h=l:c&&(h=c.touches[0]),h&&s){var w=l?l.screenY:0,R=Math.abs(s.screenX-(l?l.screenX:0))<5,T=Math.abs(s.screenY-w)<5;if(R&&T)return!0}return!1},i.prototype.getWrapper=function(e){for(;!gs(e,"ag-popup")&&e.parentElement;)e=e.parentElement;return gs(e,"ag-popup")?e:null},i.prototype.setAlwaysOnTop=function(e,s){var l=this.getWrapper(e);!l||(Ft(l,"ag-always-on-top",!!s),s&&this.bringPopupToFront(l))},i.prototype.bringPopupToFront=function(e){var s=this.getPopupParent(),l=Array.prototype.slice.call(s.querySelectorAll(".ag-popup")),c=l.length,h=Array.prototype.slice.call(s.querySelectorAll(".ag-popup.ag-always-on-top")),m=h.length,w=this.getWrapper(e);if(w&&!(c<=1)&&s.contains(e)){var R=l.indexOf(w);m?gs(w,"ag-always-on-top")?R!==c-1&&zn(h).insertAdjacentElement("afterend",w):R!==c-m-1&&h[0].insertAdjacentElement("beforebegin",w):R!==c-1&&zn(l).insertAdjacentElement("afterend",w);var L={type:"popupToFront",api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),eWrapper:w};this.eventService.dispatchEvent(L)}},rc([H("environment")],i.prototype,"environment",void 0),rc([H("focusService")],i.prototype,"focusService",void 0),rc([H("ctrlsService")],i.prototype,"ctrlsService",void 0),rc([Qe],i.prototype,"postConstruct",null),rc([vt("popupService")],i)}(Ke),Fx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),zg=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Nx=function(d,i){return function(e,s){i(e,s,d)}},dw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Fx(i,d),i.prototype.setBeans=function(e){this.logging=e.isDebug()},i.prototype.create=function(e){return new kp(e,this.isLogging.bind(this))},i.prototype.isLogging=function(){return this.logging},zg([Nx(0,Ni("gridOptionsWrapper"))],i.prototype,"setBeans",null),zg([vt("loggerFactory")],i)}(Ke),kp=function(){function d(i,e){this.name=i,this.isLoggingFunc=e}return d.prototype.isLogging=function(){return this.isLoggingFunc()},d.prototype.log=function(i){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+i)},d}(),on=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ae=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},jg=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return on(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(s){e.centerRowContainerCon=s.centerRowContainerCtrl})},i.prototype.getPreferredWidthForColumn=function(e,s){var l=this.getHeaderCellForColumn(e);if(!l)return-1;var c=document.createElement("span");c.style.position="fixed";var h=this.centerRowContainerCon.getContainerElement();h.appendChild(c),this.putRowCellsIntoDummyContainer(e,c),s||this.cloneItemIntoDummy(l,c);var m=c.offsetWidth;return h.removeChild(c),m+this.gridOptionsWrapper.getAutoSizePadding()},i.prototype.getHeaderCellForColumn=function(e){var s=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(l){var c=l.getHtmlElementForColumnHeader(e);null!=c&&(s=c)}),s},i.prototype.putRowCellsIntoDummyContainer=function(e,s){var l=this;this.rowRenderer.getAllCellsForColumn(e).forEach(function(h){return l.cloneItemIntoDummy(h,s)})},i.prototype.cloneItemIntoDummy=function(e,s){var l=e.cloneNode(!0);l.style.width="",l.style.position="static",l.style.left="";var c=document.createElement("div");gs(l,"ag-header-cell")?(Dt(c,"ag-header"),Dt(c,"ag-header-row"),c.style.position="static"):Dt(c,"ag-row");for(var h=e.parentElement;h;){if(h.classList.contains("ag-header-row")||h.classList.contains("ag-row")){for(var m=0;m<h.classList.length;m++){var w=h.classList[m];"ag-row-position-absolute"!=w&&Dt(c,w)}break}h=h.parentElement}c.style.display="table-row",c.appendChild(l),s.appendChild(c)},ae([H("rowRenderer")],i.prototype,"rowRenderer",void 0),ae([H("ctrlsService")],i.prototype,"ctrlsService",void 0),ae([H("rowCssClassCalculator")],i.prototype,"rowCssClassCalculator",void 0),ae([Qe],i.prototype,"postConstruct",null),ae([vt("autoWidthCalculator")],i)}(Ke),fw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ic=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Zo=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return fw(i,d),i.prototype.addResizeBar=function(e){var s=this,l={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e)};return this.dragService.addDragSource(l,!0),function(){return s.dragService.removeDragSource(l)}},i.prototype.onDragStart=function(e,s){this.dragStartX=s.clientX,this.setResizeIcons();var l=s instanceof MouseEvent&&!0===s.shiftKey;e.onResizeStart(l)},i.prototype.setResizeIcons=function(){var e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!0),e.disableUserSelect(!0)},i.prototype.onDragStop=function(e,s){e.onResizeEnd(this.resizeAmount),this.resetIcons()},i.prototype.resetIcons=function(){var e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!1),e.disableUserSelect(!1)},i.prototype.onDragging=function(e,s){this.resizeAmount=s.clientX-this.dragStartX,e.onResizing(this.resizeAmount)},ic([H("dragService")],i.prototype,"dragService",void 0),ic([H("ctrlsService")],i.prototype,"ctrlsService",void 0),ic([vt("horizontalResizeService")],i)}(Ke),pw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),uu=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Gp=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return pw(i,d),i.prototype.postConstruct=function(){this.ctrlsService.registerGridCtrl(this)},i.prototype.setComp=function(e,s,l){var c=this;this.view=e,this.eGridHostDiv=s,this.eGui=l,this.mouseEventService.stampTopLevelGridCompWithGridInstance(s),this.createManagedBean(new Yu(this.view)),this.addRtlSupport(),this.addManagedListener(this,$.EVENT_KEYBOARD_FOCUS,function(){c.view.addOrRemoveKeyboardFocusClass(!0)}),this.addManagedListener(this,$.EVENT_MOUSE_FOCUS,function(){c.view.addOrRemoveKeyboardFocusClass(!1)});var h=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(function(){return h()})},i.prototype.showDropZones=function(){return qt.isRegistered(Y.GXE.RowGroupingModule)},i.prototype.showSideBar=function(){return qt.isRegistered(Y.GXE.SideBarModule)},i.prototype.showStatusBar=function(){return qt.isRegistered(Y.GXE.StatusBarModule)},i.prototype.showWatermark=function(){return qt.isRegistered(Y.GXE.EnterpriseCoreModule)},i.prototype.onGridSizeChanged=function(){this.eventService.dispatchEvent({type:$.EVENT_GRID_SIZE_CHANGED,api:this.gridApi,columnApi:this.columnApi,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})},i.prototype.addRtlSupport=function(){var e=this.gridOptionsWrapper.isEnableRtl()?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)},i.prototype.destroyGridUi=function(){this.view.destroyGridUi()},i.prototype.getGui=function(){return this.eGui},i.prototype.setResizeCursor=function(e){this.view.setCursor(e?"ew-resize":null)},i.prototype.disableUserSelect=function(e){this.view.setUserSelect(e?"none":null)},i.prototype.focusNextInnerContainer=function(e){var s=this.view.getFocusableContainers(),c=nt(s,function(h){return h.contains(document.activeElement)})+(e?-1:1);return!(c<0||c>=s.length)&&(0===c?this.focusGridHeader():this.focusService.focusInto(s[c]))},i.prototype.focusInnerElement=function(e){var s=this.view.getFocusableContainers();if(e){if(s.length>1)return this.focusService.focusInto(zn(s),!0);var l=zn(this.columnModel.getAllDisplayedColumns());if(this.focusService.focusGridView(l,!0))return!0}return this.focusGridHeader()},i.prototype.focusGridHeader=function(){var e=this.columnModel.getAllDisplayedColumns()[0];return!!e&&(e.getParent()&&(e=this.columnModel.getColumnGroupAtLevel(e,0)),this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:e}}),!0)},i.prototype.forceFocusOutOfContainer=function(e){void 0===e&&(e=!1),this.view.forceFocusOutOfContainer(e)},uu([H("columnApi")],i.prototype,"columnApi",void 0),uu([H("gridApi")],i.prototype,"gridApi",void 0),uu([H("focusService")],i.prototype,"focusService",void 0),uu([H("resizeObserverService")],i.prototype,"resizeObserverService",void 0),uu([H("columnModel")],i.prototype,"columnModel",void 0),uu([H("ctrlsService")],i.prototype,"ctrlsService",void 0),uu([H("mouseEventService")],i.prototype,"mouseEventService",void 0),uu([Qe],i.prototype,"postConstruct",null),i}(Ke),xs=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Bp=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},qg=function(d){function i(e){var s=d.call(this)||this;s.skipTabGuardFocus=!1;var c=e.eTopGuard,h=e.eBottomGuard,m=e.focusInnerElement,w=e.onFocusIn,R=e.onFocusOut,T=e.shouldStopEventPropagation,L=e.onTabKeyDown,U=e.handleKeyDown,K=e.eFocusableElement;return s.comp=e.comp,s.eTopGuard=c,s.eBottomGuard=h,s.providedFocusInnerElement=m,s.eFocusableElement=K,s.providedFocusIn=w,s.providedFocusOut=R,s.providedShouldStopEventPropagation=T,s.providedOnTabKeyDown=L,s.providedHandleKeyDown=U,s}return xs(i,d),i.prototype.postConstruct=function(){var e=this;this.createManagedBean(new Ko(this.eFocusableElement,{shouldStopEventPropagation:function(){return e.shouldStopEventPropagation()},onTabKeyDown:function(l){return e.onTabKeyDown(l)},handleKeyDown:function(l){return e.handleKeyDown(l)},onFocusIn:function(l){return e.onFocusIn(l)},onFocusOut:function(l){return e.onFocusOut(l)}})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(function(s){return e.addManagedListener(s,"focus",e.onFocus.bind(e))})},i.prototype.handleKeyDown=function(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)},i.prototype.tabGuardsAreActive=function(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")},i.prototype.shouldStopEventPropagation=function(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()},i.prototype.activateTabGuards=function(){this.comp.setTabIndex(this.getGridTabIndex())},i.prototype.deactivateTabGuards=function(){this.comp.setTabIndex()},i.prototype.onFocus=function(e){if(this.skipTabGuardFocus)this.skipTabGuardFocus=!1;else{var s=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(s):this.focusInnerElement(s)}},i.prototype.onFocusIn=function(e){this.providedFocusIn&&this.providedFocusIn(e)||this.deactivateTabGuards()},i.prototype.onFocusOut=function(e){this.providedFocusOut&&this.providedFocusOut(e)||this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards()},i.prototype.onTabKeyDown=function(e){var s=this;if(this.providedOnTabKeyDown)this.providedOnTabKeyDown(e);else if(!e.defaultPrevented){var l=this.tabGuardsAreActive();l&&this.deactivateTabGuards();var c=this.getNextFocusableElement(e.shiftKey);l&&setTimeout(function(){return s.activateTabGuards()},0),c&&(c.focus(),e.preventDefault())}},i.prototype.getGridTabIndex=function(){return this.gridOptionsWrapper.getGridTabIndex()},i.prototype.focusInnerElement=function(e){void 0===e&&(e=!1);var s=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(s.splice(0,1),s.splice(s.length-1,1)),s.length&&s[e?s.length-1:0].focus()},i.prototype.getNextFocusableElement=function(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)},i.prototype.forceFocusOutOfContainer=function(e){void 0===e&&(e=!1);var s=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,s.focus()},Bp([H("focusService")],i.prototype,"focusService",void 0),Bp([Qe],i.prototype,"postConstruct",null),i}(Ke),Kg=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),hw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Kg(i,d),i.prototype.initialiseTabGuard=function(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();var s=[this.eTopGuard,this.eBottomGuard],l={setTabIndex:function(h){s.forEach(function(m){return null!=h?m.setAttribute("tabIndex",h):m.removeAttribute("tabIndex")})}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new qg({comp:l,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation}))},i.prototype.createTabGuard=function(e){var s=document.createElement("div");return s.classList.add("ag-tab-guard"),s.classList.add("ag-tab-guard-"+e),Ki(s,"presentation"),s},i.prototype.addTabGuards=function(e,s){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",s)},i.prototype.removeAllChildrenExceptTabGuards=function(){var e=[this.eTopGuard,this.eBottomGuard];uo(this.getFocusableElement()),this.addTabGuards.apply(this,e)},i.prototype.forceFocusOutOfContainer=function(e){void 0===e&&(e=!1),this.tabGuardCtrl.forceFocusOutOfContainer(e)},i.prototype.appendChild=function(e,s){La(e)||(e=e.getGui());var l=this.eBottomGuard;l?l.insertAdjacentElement("beforebegin",e):d.prototype.appendChild.call(this,e,s)},i}(pn),vw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Hp=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Dd=function(d){function i(e){var s=d.call(this,void 0)||this;return s.eGridDiv=e,s}return vw(i,d),i.prototype.postConstruct=function(){var e=this;this.logger=this.loggerFactory.create("GridComp");var s={destroyGridUi:function(){return e.destroyBean(e)},setRtlClass:function(h){return Dt(e.getGui(),h)},addOrRemoveKeyboardFocusClass:function(h){return e.addOrRemoveCssClass(Wi.AG_KEYBOARD_FOCUS,h)},forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:function(h){e.getGui().style.userSelect=null!=h?h:"",e.getGui().style.webkitUserSelect=null!=h?h:""},setCursor:function(h){e.getGui().style.cursor=null!=h?h:""}};this.ctrl=this.createManagedBean(new Gp);var l=this.createTemplate();this.setTemplate(l),this.ctrl.setComp(s,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:function(){},focusInnerElement:function(h){return e.ctrl.focusInnerElement(h)}})},i.prototype.insertGridIntoDom=function(){var e=this,s=this.getGui();this.eGridDiv.appendChild(s),this.addDestroyFunc(function(){e.eGridDiv.removeChild(s),e.logger.log("Grid removed from DOM")})},i.prototype.updateLayoutClasses=function(e,s){Ft(this.eRootWrapperBody,Y.LBn.AUTO_HEIGHT,s.autoHeight),Ft(this.eRootWrapperBody,Y.LBn.NORMAL,s.normal),Ft(this.eRootWrapperBody,Y.LBn.PRINT,s.print),this.addOrRemoveCssClass(Y.LBn.AUTO_HEIGHT,s.autoHeight),this.addOrRemoveCssClass(Y.LBn.NORMAL,s.normal),this.addOrRemoveCssClass(Y.LBn.PRINT,s.print)},i.prototype.createTemplate=function(){return'<div class="ag-root-wrapper">\n                '+(this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"")+'\n                <div class="ag-root-wrapper-body" ref="rootWrapperBody">\n                    <ag-grid-body ref="gridBody"></ag-grid-body>\n                    '+(this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"")+"\n                </div>\n                "+(this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"")+"\n                <ag-pagination></ag-pagination>\n                "+(this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"")+"\n            </div>"},i.prototype.getFocusableElement=function(){return this.eRootWrapperBody},i.prototype.getFocusableContainers=function(){var e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter(function(s){return Ml(s)})},Hp([H("loggerFactory")],i.prototype,"loggerFactory",void 0),Hp([Be("gridBody")],i.prototype,"gridBodyComp",void 0),Hp([Be("sideBar")],i.prototype,"sideBarComp",void 0),Hp([Be("rootWrapperBody")],i.prototype,"eRootWrapperBody",void 0),Hp([Qe],i.prototype,"postConstruct",null),i}(hw),Vp=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),lu=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Wp=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.dragEndFunctions=[],e.dragSources=[],e}return Vp(i,d),i.prototype.init=function(){this.logger=this.loggerFactory.create("DragService")},i.prototype.removeAllListeners=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},i.prototype.removeListener=function(e){var s=e.dragSource.eElement;s.removeEventListener("mousedown",e.mouseDownListener),e.touchEnabled&&s.removeEventListener("touchstart",e.touchStartListener,{passive:!0})},i.prototype.removeDragSource=function(e){var s=Li(this.dragSources,function(l){return l.dragSource===e});!s||(this.removeListener(s),ri(this.dragSources,s))},i.prototype.isDragging=function(){return this.dragging},i.prototype.addDragSource=function(e,s){var l=this;void 0===s&&(s=!1);var c=this.onMouseDown.bind(this,e);e.eElement.addEventListener("mousedown",c);var h=null,m=this.gridOptionsWrapper.isSuppressTouch();s&&!m&&e.eElement.addEventListener("touchstart",h=function(R){R.preventDefault(),l.onTouchStart(e,R)},{passive:!0}),this.dragSources.push({dragSource:e,mouseDownListener:c,touchStartListener:h,touchEnabled:s})},i.prototype.onTouchStart=function(e,s){var l=this;this.currentDragParams=e,this.dragging=!1;var c=s.touches[0];this.touchLastTime=c,this.touchStart=c;var m=function(U){return l.onTouchUp(U,e.eElement)},R=e.eElement,T=[{target:document,type:"touchmove",listener:function(U){U.cancelable&&U.preventDefault()},options:{passive:!1}},{target:R,type:"touchmove",listener:function(U){return l.onTouchMove(U,e.eElement)},options:{passive:!0}},{target:R,type:"touchend",listener:m,options:{passive:!0}},{target:R,type:"touchcancel",listener:m,options:{passive:!0}}];this.addTemporaryEvents(T),0===e.dragStartPixels&&this.onCommonMove(c,this.touchStart,e.eElement)},i.prototype.onMouseDown=function(e,s){var l=this,c=s;if(!(e.skipMouseEvent&&e.skipMouseEvent(s)||c._alreadyProcessedByDragService||(c._alreadyProcessedByDragService=!0,0!==s.button))){this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=s;var h=this.gridOptionsWrapper.getDocument();this.addTemporaryEvents([{target:h,type:"mousemove",listener:function(K){return l.onMouseMove(K,e.eElement)}},{target:h,type:"mouseup",listener:function(K){return l.onMouseUp(K,e.eElement)}},{target:h,type:"contextmenu",listener:function(K){return K.preventDefault()}}]),0===e.dragStartPixels&&this.onMouseMove(s,e.eElement)}},i.prototype.addTemporaryEvents=function(e){e.forEach(function(s){s.target.addEventListener(s.type,s.listener,s.options)}),this.dragEndFunctions.push(function(){e.forEach(function(s){s.target.removeEventListener(s.type,s.listener,s.options)})})},i.prototype.isEventNearStartEvent=function(e,s){var l=this.currentDragParams.dragStartPixels;return H_(e,s,Fe(l)?l:4)},i.prototype.getFirstActiveTouch=function(e){for(var s=0;s<e.length;s++)if(e[s].identifier===this.touchStart.identifier)return e[s];return null},i.prototype.onCommonMove=function(e,s,l){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,s))return;this.dragging=!0,this.eventService.dispatchEvent({type:$.EVENT_DRAG_STARTED,api:this.gridApi,columnApi:this.columnApi,target:l}),this.currentDragParams.onDragStart(s),this.currentDragParams.onDragging(s)}this.currentDragParams.onDragging(e)},i.prototype.onTouchMove=function(e,s){var l=this.getFirstActiveTouch(e.touches);!l||this.onCommonMove(l,this.touchStart,s)},i.prototype.onMouseMove=function(e,s){this.onCommonMove(e,this.mouseStartEvent,s)},i.prototype.onTouchUp=function(e,s){var l=this.getFirstActiveTouch(e.changedTouches);l||(l=this.touchLastTime),this.onUpCommon(l,s)},i.prototype.onMouseUp=function(e,s){this.onUpCommon(e,s)},i.prototype.onUpCommon=function(e,s){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:$.EVENT_DRAG_STOPPED,api:this.gridApi,columnApi:this.columnApi,target:s})),this.mouseStartEvent=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(function(c){return c()}),this.dragEndFunctions.length=0},lu([H("loggerFactory")],i.prototype,"loggerFactory",void 0),lu([H("columnApi")],i.prototype,"columnApi",void 0),lu([H("gridApi")],i.prototype,"gridApi",void 0),lu([Qe],i.prototype,"init",null),lu([Fi],i.prototype,"removeAllListeners",null),lu([vt("dragService")],i)}(Ke),Yg=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),$g=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},gw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}var e;return Yg(i,d),e=i,i.prototype.progressSort=function(s,l,c){void 0===c&&(c="api");var h=this.getNextSortDirection(s);this.setSortForColumn(s,h,l,c)},i.prototype.setSortForColumn=function(s,l,c,h){void 0===h&&(h="api"),l!==fe.SORT_ASC&&l!==fe.SORT_DESC&&(l=null),s.setSort(l,h),c&&!this.gridOptionsWrapper.isSuppressMultiSort()||this.clearSortBarThisColumn(s,h),this.updateSortIndex(s),this.dispatchSortChangedEvents()},i.prototype.updateSortIndex=function(s){var l=this.getColumnsWithSortingOrdered(),c=0;l.forEach(function(m){m!==s&&(m.setSortIndex(c),c++)}),s.getSort()&&s.setSortIndex(c),this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(m){return null==m.getSort()}).forEach(function(m){return m.setSortIndex()})},i.prototype.onSortChanged=function(){this.dispatchSortChangedEvents()},i.prototype.isSortActive=function(){var l=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(c){return!!c.getSort()});return l&&l.length>0},i.prototype.dispatchSortChangedEvents=function(){this.eventService.dispatchEvent({type:$.EVENT_SORT_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.clearSortBarThisColumn=function(s,l){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(c){c!==s&&c.setSort(void 0,l)})},i.prototype.getNextSortDirection=function(s){var l;if(l=s.getColDef().sortingOrder?s.getColDef().sortingOrder:this.gridOptionsWrapper.getSortingOrder()?this.gridOptionsWrapper.getSortingOrder():e.DEFAULT_SORTING_ORDER,!Array.isArray(l)||l.length<=0)return console.warn("ag-grid: sortingOrder must be an array with at least one element, currently it's "+l),null;var w,c=l.indexOf(s.getSort());return e.DEFAULT_SORTING_ORDER.indexOf(w=c<0||c==l.length-1?l[0]:l[c+1])<0?(console.warn("ag-grid: invalid sort type "+w),null):w},i.prototype.getColumnsWithSortingOrdered=function(){var s=this.columnModel.getPrimaryAndSecondaryAndAutoColumns(),l=s.filter(function(h){return!!h.getSort()}),c={};return s.forEach(function(h,m){return c[h.getId()]=m}),l.sort(function(h,m){var w=h.getSortIndex(),R=m.getSortIndex();return null!=w&&null!=R?w-R:null==w&&null==R?c[h.getId()]>c[m.getId()]?1:-1:null==R?-1:1}),l},i.prototype.getSortModel=function(){return this.getColumnsWithSortingOrdered().map(function(s){return{sort:s.getSort(),colId:s.getId()}})},i.prototype.getSortOptions=function(){return this.getColumnsWithSortingOrdered().map(function(s){return{sort:s.getSort(),column:s}})},i.DEFAULT_SORTING_ORDER=[fe.SORT_ASC,fe.SORT_DESC,null],$g([H("columnModel")],i.prototype,"columnModel",void 0),$g([H("columnApi")],i.prototype,"columnApi",void 0),$g([H("gridApi")],i.prototype,"gridApi",void 0),e=$g([vt("sortController")],i)}(Ke),kx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),mw=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},yw=function(d){function i(){var s=null!==d&&d.apply(this,arguments)||this;return s.gridInstanceId=e.gridInstanceSequence.next(),s}var e;return kx(i,d),e=i,i.prototype.stampTopLevelGridCompWithGridInstance=function(s){s[e.GRID_DOM_KEY]=this.gridInstanceId},i.prototype.getRenderedCellForEvent=function(s){return Nf(this.gridOptionsWrapper,s,Zi.DOM_DATA_KEY_CELL_CTRL)},i.prototype.isEventFromThisGrid=function(s){return this.isElementInThisGrid(s.target)},i.prototype.isElementInThisGrid=function(s){for(var l=s;l;){var c=l[e.GRID_DOM_KEY];if(Fe(c))return c===this.gridInstanceId;l=l.parentElement}return!1},i.prototype.getCellPositionForEvent=function(s){var l=this.getRenderedCellForEvent(s);return l?l.getCellPosition():null},i.prototype.getNormalisedPosition=function(s){var h,m,l=this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_NORMAL;if(null!=s.clientX||null!=s.clientY?(h=s.clientX,m=s.clientY):(h=s.x,m=s.y),l){var w=this.ctrlsService.getGridBodyCtrl(),R=w.getScrollFeature().getVScrollPosition();h+=w.getScrollFeature().getHScrollPosition().left,m+=R.top}return{x:h,y:m}},i.gridInstanceSequence=new ws,i.GRID_DOM_KEY="__ag_grid_instance",mw([H("ctrlsService")],i.prototype,"ctrlsService",void 0),e=mw([vt("mouseEventService")],i)}(Ke),_w=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Up=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Cw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return _w(i,d),i.prototype.getNextCellToFocus=function(e,s){for(var l=s,c=!1;!c;){switch(e){case $e.UP:l=this.getCellAbove(l);break;case $e.DOWN:l=this.getCellBelow(l);break;case $e.RIGHT:l=this.gridOptionsWrapper.isEnableRtl()?this.getCellToLeft(l):this.getCellToRight(l);break;case $e.LEFT:l=this.gridOptionsWrapper.isEnableRtl()?this.getCellToRight(l):this.getCellToLeft(l);break;default:l=null,console.warn("AG Grid: unknown key for navigation "+e)}c=!l||this.isCellGoodToFocusOn(l)}return l},i.prototype.isCellGoodToFocusOn=function(e){var l,s=e.column;switch(e.rowPinned){case fe.PINNED_TOP:l=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case fe.PINNED_BOTTOM:l=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:l=this.rowModel.getRow(e.rowIndex)}return!!l&&!s.isSuppressNavigable(l)},i.prototype.getCellToLeft=function(e){if(!e)return null;var s=this.columnModel.getDisplayedColBefore(e.column);return s?{rowIndex:e.rowIndex,column:s,rowPinned:e.rowPinned}:null},i.prototype.getCellToRight=function(e){if(!e)return null;var s=this.columnModel.getDisplayedColAfter(e.column);return s?{rowIndex:e.rowIndex,column:s,rowPinned:e.rowPinned}:null},i.prototype.getRowBelow=function(e){var s=e.rowIndex,l=e.rowPinned;if(this.isLastRowInContainer(e))switch(l){case fe.PINNED_BOTTOM:return null;case fe.PINNED_TOP:return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender(fe.PINNED_BOTTOM)?{rowIndex:0,rowPinned:fe.PINNED_BOTTOM}:null;default:return this.pinnedRowModel.isRowsToRender(fe.PINNED_BOTTOM)?{rowIndex:0,rowPinned:fe.PINNED_BOTTOM}:null}return{rowIndex:s+1,rowPinned:l}},i.prototype.getCellBelow=function(e){if(!e)return null;var s=this.getRowBelow(e);return s?{rowIndex:s.rowIndex,column:e.column,rowPinned:s.rowPinned}:null},i.prototype.isLastRowInContainer=function(e){var s=e.rowPinned,l=e.rowIndex;return s===fe.PINNED_TOP?this.pinnedRowModel.getPinnedTopRowData().length-1<=l:s===fe.PINNED_BOTTOM?this.pinnedRowModel.getPinnedBottomRowData().length-1<=l:this.paginationProxy.getPageLastRow()<=l},i.prototype.getRowAbove=function(e){var s=e.rowIndex,l=e.rowPinned;return(l?0===s:s===this.paginationProxy.getPageFirstRow())?l===fe.PINNED_TOP?null:l&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender(fe.PINNED_TOP)?this.getLastFloatingTopRow():null:{rowIndex:s-1,rowPinned:l}},i.prototype.getCellAbove=function(e){if(!e)return null;var s=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return s?{rowIndex:s.rowIndex,column:e.column,rowPinned:s.rowPinned}:null},i.prototype.getLastBodyCell=function(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}},i.prototype.getLastFloatingTopRow=function(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:fe.PINNED_TOP}},i.prototype.getNextTabbedCell=function(e,s){return s?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)},i.prototype.getNextTabbedCellForwards=function(e){var s=this.columnModel.getAllDisplayedColumns(),l=e.rowIndex,c=e.rowPinned,h=this.columnModel.getDisplayedColAfter(e.column);if(!h){h=s[0];var m=this.getRowBelow(e);if(Ce(m)||!m.rowPinned&&!this.paginationProxy.isRowInPage(m))return null;l=m?m.rowIndex:null,c=m?m.rowPinned:null}return{rowIndex:l,column:h,rowPinned:c}},i.prototype.getNextTabbedCellBackwards=function(e){var s=this.columnModel.getAllDisplayedColumns(),l=e.rowIndex,c=e.rowPinned,h=this.columnModel.getDisplayedColBefore(e.column);if(!h){h=zn(s);var m=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Ce(m)||!m.rowPinned&&!this.paginationProxy.isRowInPage(m))return null;l=m?m.rowIndex:null,c=m?m.rowPinned:null}return{rowIndex:l,column:h,rowPinned:c}},Up([H("columnModel")],i.prototype,"columnModel",void 0),Up([H("rowModel")],i.prototype,"rowModel",void 0),Up([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Up([H("paginationProxy")],i.prototype,"paginationProxy",void 0),Up([vt("cellNavigationService")],i)}(Ke),BM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Xg=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Jg=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return BM(i,d),i.prototype.formatValue=function(e,s,l,c,h,m){void 0===m&&(m=!0);var R,w=null,T=e.getColDef();if(h?R=h:m&&(R=s&&s.rowPinned&&T.pinnedRowValueFormatter?T.pinnedRowValueFormatter:T.valueFormatter),R){var L={value:c,node:s,data:s?s.data:null,colDef:T,column:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};L.$scope=l,w=this.expressionService.evaluate(R,L)}else if(T.refData)return T.refData[c]||"";return null==w&&Array.isArray(c)&&(w=c.join(", ")),w},Xg([H("expressionService")],i.prototype,"expressionService",void 0),Xg([vt("valueFormatterService")],i)}(Ke),Gx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),zp=function(d){function i(e){return d.call(this,e,"ag-radio-button","radio")||this}return Gx(i,d),i.prototype.isSelected=function(){return this.eInput.checked},i.prototype.toggle=function(){this.eInput.disabled||this.isSelected()||this.setValue(!0)},i.prototype.addInputListeners=function(){d.prototype.addInputListeners.call(this),this.addManagedListener(this.eventService,$.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))},i.prototype.onChange=function(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)},i}(qu),HM=["mouseover","mouseout","mouseenter","mouseleave"],Bx=function(){function d(){this.isOutsideAngular=function(i){return xn(HM,i)}}return d.prototype.setTimeout=function(i,e){window.setTimeout(i,e)},d.prototype.setInterval=function(i,e){return new Zr(function(s){s(window.setInterval(i,e))})},d.prototype.addEventListener=function(i,e,s,l){i.addEventListener(e,s,l)},d.prototype.dispatchEvent=function(i,e,s){e()},d.prototype.frameworkComponent=function(i){return null},d}(),VM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),jp=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Hx=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return VM(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))},i.prototype.onDisplayedColumnsChanged=function(){this.update()},i.prototype.onDisplayedColumnsWidthChanged=function(){this.update()},i.prototype.update=function(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)},i.prototype.updateImpl=function(){var e=this.ctrlsService.getCenterRowContainerCtrl();if(e){var s={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(s)}},i.prototype.setScrollsVisible=function(e){this.horizontalScrollShowing===e.horizontalScrollShowing&&this.verticalScrollShowing===e.verticalScrollShowing||(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:$.EVENT_SCROLL_VISIBILITY_CHANGED,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.isHorizontalScrollShowing=function(){return this.horizontalScrollShowing},i.prototype.isVerticalScrollShowing=function(){return this.verticalScrollShowing},jp([H("columnApi")],i.prototype,"columnApi",void 0),jp([H("gridApi")],i.prototype,"gridApi",void 0),jp([H("ctrlsService")],i.prototype,"ctrlsService",void 0),jp([Qe],i.prototype,"postConstruct",null),jp([vt("scrollVisibleService")],i)}(Ke),WM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Vx=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Wx=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return WM(i,d),i.prototype.processAllCellClasses=function(e,s,l,c){this.processClassRules(e.cellClassRules,s,l,c),this.processStaticCellClasses(e,s,l)},i.prototype.processClassRules=function(e,s,l,c){if(null!=e)for(var h=Object.keys(e),m={},w={},R=function(K){var Te,Q=h[K],oe=e[Q];"string"==typeof oe?Te=T.expressionService.evaluate(oe,s):"function"==typeof oe&&(Te=oe(s)),Q.split(" ").forEach(function(He){null==He||""==He.trim()||(Te?m[He]=!0:w[He]=!0)}),c&&Object.keys(w).forEach(c),Object.keys(m).forEach(l)},T=this,L=0;L<h.length;L++)R(L)},i.prototype.getStaticCellClasses=function(e,s){var c,l=e.cellClass;return l?("string"==typeof(c="function"==typeof l?(0,e.cellClass)(s):l)&&(c=[c]),c):[]},i.prototype.processStaticCellClasses=function(e,s,l){this.getStaticCellClasses(e,s).forEach(function(h){l(h)})},Vx([H("expressionService")],i.prototype,"expressionService",void 0),Vx([vt("stylingService")],i)}(Ke),UM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ww=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},cu=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return UM(i,d),i.prototype.setMouseOver=function(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:$.EVENT_COLUMN_HOVER_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.clearMouseOver=function(){this.selectedColumns=null,this.eventService.dispatchEvent({type:$.EVENT_COLUMN_HOVER_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.isHovered=function(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0},ww([H("columnApi")],i.prototype,"columnApi",void 0),ww([H("gridApi")],i.prototype,"gridApi",void 0),ww([vt("columnHoverService")],i)}(Ke),Zg=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Qg=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Sw=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.executeNextFuncs=[],e.executeLaterFuncs=[],e.active=!1,e.animationThreadCount=0,e}return Zg(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(s){return e.gridBodyCtrl=s.gridBodyCtrl})},i.prototype.isActive=function(){return this.active},i.prototype.start=function(){this.active||this.gridOptionsWrapper.isSuppressColumnMoveAnimation()||this.gridOptionsWrapper.isEnableRtl()||(this.ensureAnimationCssClassPresent(),this.active=!0)},i.prototype.finish=function(){!this.active||(this.flush(),this.active=!1)},i.prototype.executeNextVMTurn=function(e){this.active?this.executeNextFuncs.push(e):e()},i.prototype.executeLaterVMTurn=function(e){this.active?this.executeLaterFuncs.push(e):e()},i.prototype.ensureAnimationCssClassPresent=function(){var e=this;this.animationThreadCount++;var s=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(function(){e.animationThreadCount===s&&e.gridBodyCtrl.setColumnMovingCss(!1)})},i.prototype.flush=function(){var e=this.executeNextFuncs;this.executeNextFuncs=[];var s=this.executeLaterFuncs;this.executeLaterFuncs=[],(0!==e.length||0!==s.length)&&(window.setTimeout(function(){return e.forEach(function(l){return l()})},0),window.setTimeout(function(){return s.forEach(function(l){return l()})},300))},Qg([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Qg([Qe],i.prototype,"postConstruct",null),Qg([vt("columnAnimationService")],i)}(Ke),em=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),qp=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},tm=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}var e;return em(i,d),e=i,i.prototype.createAutoGroupColumns=function(s){var l=this,c=[],h=this.gridOptionsWrapper.isTreeData(),m=this.gridOptionsWrapper.isGroupMultiAutoColumn();return h&&m&&(console.warn("AG Grid: you cannot mix groupMultiAutoColumn with treeData, only one column can be used to display groups when doing tree data"),m=!1),m?s.forEach(function(w,R){c.push(l.createOneAutoGroupColumn(w,R))}):c.push(this.createOneAutoGroupColumn()),c},i.prototype.createOneAutoGroupColumn=function(s,l){var h,c=this.generateDefaultColDef(s);h=s?fe.GROUP_AUTO_COLUMN_ID+"-"+s.getId():e.GROUP_AUTO_COLUMN_BUNDLE_ID,ao(c,this.gridOptionsWrapper.getAutoGroupColumnDef()),(c=this.columnFactory.mergeColDefs(c)).colId=h,this.gridOptionsWrapper.isTreeData()||Ce(c.field)&&Ce(c.valueGetter)&&Ce(c.filterValueGetter)&&(c.filter=!1),l&&l>0&&(c.headerCheckboxSelection=!1);var R=new Mn(c,null,h,!0);return this.context.createBean(R),R},i.prototype.generateDefaultColDef=function(s){var l=this.gridOptionsWrapper.getAutoGroupColumnDef(),h={headerName:this.gridOptionsWrapper.getLocaleTextFunc()("group","Group")};if(l&&(l.cellRenderer||l.cellRendererFramework||l.cellRendererSelector)||(h.cellRenderer="agGroupCellRenderer"),s){var w=s.getColDef();ii(h,{headerName:this.columnModel.getDisplayNameForColumn(s,"header"),headerValueGetter:w.headerValueGetter}),w.cellRenderer&&ii(h,{cellRendererParams:{innerRenderer:w.cellRenderer,innerRendererParams:w.cellRendererParams}}),h.showRowGroup=s.getColId()}else h.showRowGroup=!0;return h},i.GROUP_AUTO_COLUMN_BUNDLE_ID=fe.GROUP_AUTO_COLUMN_ID,qp([H("columnModel")],i.prototype,"columnModel",void 0),qp([H("columnFactory")],i.prototype,"columnFactory",void 0),e=qp([vt("autoGroupColService")],i)}(Ke),Ux=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Qo=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},nm=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.currentPage=0,e.topDisplayedRowIndex=0,e.bottomDisplayedRowIndex=0,e.pixelOffset=0,e.masterRowCount=0,e}return Ux(i,d),i.prototype.postConstruct=function(){this.active=this.gridOptionsWrapper.isPagination(),this.paginateChildRows=this.gridOptionsWrapper.isPaginateChildRows(),this.addManagedListener(this.eventService,$.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(this.gridOptionsWrapper,"paginationPageSize",this.onPaginationPageSizeChanged.bind(this)),this.onModelUpdated()},i.prototype.ensureRowHeightsValid=function(e,s,l,c){var h=this.rowModel.ensureRowHeightsValid(e,s,this.getPageFirstRow(),this.getPageLastRow());return h&&this.calculatePages(),h},i.prototype.onModelUpdated=function(e){this.calculatePages(),this.eventService.dispatchEvent({type:$.EVENT_PAGINATION_CHANGED,animate:!!e&&e.animate,newData:!!e&&e.newData,newPage:!!e&&e.newPage,keepRenderedRows:!!e&&e.keepRenderedRows,api:this.gridApi,columnApi:this.columnApi})},i.prototype.onPaginationPageSizeChanged=function(){this.calculatePages(),this.eventService.dispatchEvent({type:$.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,keepRenderedRows:!0,api:this.gridApi,columnApi:this.columnApi})},i.prototype.goToPage=function(e){this.active&&this.currentPage!==e&&(this.currentPage=e,this.onModelUpdated({type:$.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.getPixelOffset=function(){return this.pixelOffset},i.prototype.getRow=function(e){return this.rowModel.getRow(e)},i.prototype.getRowNode=function(e){return this.rowModel.getRowNode(e)},i.prototype.getRowIndexAtPixel=function(e){return this.rowModel.getRowIndexAtPixel(e)},i.prototype.getCurrentPageHeight=function(){return Ce(this.topRowBounds)||Ce(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)},i.prototype.getCurrentPagePixelRange=function(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}},i.prototype.isRowPresent=function(e){return!!this.rowModel.isRowPresent(e)&&e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex},i.prototype.isEmpty=function(){return this.rowModel.isEmpty()},i.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},i.prototype.getNodesInRangeForSelection=function(e,s){return this.rowModel.getNodesInRangeForSelection(e,s)},i.prototype.forEachNode=function(e){return this.rowModel.forEachNode(e)},i.prototype.getType=function(){return this.rowModel.getType()},i.prototype.getRowBounds=function(e){var s=this.rowModel.getRowBounds(e);return s.rowIndex=e,s},i.prototype.getPageFirstRow=function(){return this.topRowBounds?this.topRowBounds.rowIndex:-1},i.prototype.getPageLastRow=function(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1},i.prototype.getRowCount=function(){return this.rowModel.getRowCount()},i.prototype.getPageForIndex=function(e){return Math.floor(e/this.pageSize)},i.prototype.goToPageWithIndex=function(e){if(this.active){var s=this.getPageForIndex(e);this.goToPage(s)}},i.prototype.isRowInPage=function(e){return!this.active||this.getPageForIndex(e.rowIndex)===this.currentPage},i.prototype.isLastPageFound=function(){return this.rowModel.isLastRowIndexKnown()},i.prototype.getCurrentPage=function(){return this.currentPage},i.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},i.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},i.prototype.goToFirstPage=function(){this.goToPage(0)},i.prototype.goToLastPage=function(){var e=this.rowModel.getRowCount(),s=Math.floor(e/this.pageSize);this.goToPage(s)},i.prototype.getPageSize=function(){return this.pageSize},i.prototype.getTotalPages=function(){return this.totalPages},i.prototype.setPageSize=function(){this.pageSize=this.gridOptionsWrapper.getPaginationPageSize(),(null==this.pageSize||this.pageSize<1)&&(this.pageSize=100)},i.prototype.calculatePages=function(){this.active?(this.setPageSize(),this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly()):this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(Fe(this.topRowBounds)?this.topRowBounds.rowTop:0)},i.prototype.setPixelOffset=function(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:$.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))},i.prototype.setZeroRows=function(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0},i.prototype.calculatePagesMasterRowsOnly=function(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)this.setZeroRows();else{var e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!ki(this.currentPage)||this.currentPage<0)&&(this.currentPage=0);var l=this.pageSize*(this.currentPage+1)-1;if(l>e&&(l=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(this.pageSize*this.currentPage),l===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{var c=this.rowModel.getTopLevelRowDisplayedIndex(l+1);this.bottomDisplayedRowIndex=c-1}}},i.prototype.getMasterRowCount=function(){return this.masterRowCount},i.prototype.calculatePagesAllRows=function(){if(this.masterRowCount=this.rowModel.getRowCount(),0!==this.masterRowCount){var e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!ki(this.currentPage)||this.currentPage<0)&&(this.currentPage=0),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}else this.setZeroRows()},i.prototype.calculatedPagesNotActive=function(){this.pageSize=this.rowModel.getRowCount(),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1},Qo([H("rowModel")],i.prototype,"rowModel",void 0),Qo([H("columnApi")],i.prototype,"columnApi",void 0),Qo([H("gridApi")],i.prototype,"gridApi",void 0),Qo([Qe],i.prototype,"postConstruct",null),Qo([vt("paginationProxy")],i)}(Ke),zx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ad=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},jx=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return zx(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(s){e.centerRowContainerCon=s.centerRowContainerCtrl,e.addManagedListener(e.eventService,$.EVENT_BODY_HEIGHT_CHANGED,e.onBodyHeightChanged.bind(e)),e.addManagedListener(e.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,e.onScrollVisibilityChanged.bind(e)),e.checkPageSize()})},i.prototype.notActive=function(){return!this.gridOptionsWrapper.isPaginationAutoPageSize()},i.prototype.onScrollVisibilityChanged=function(){this.checkPageSize()},i.prototype.onBodyHeightChanged=function(){this.checkPageSize()},i.prototype.checkPageSize=function(){if(!this.notActive()){var e=this.gridOptionsWrapper.getRowHeightAsNumber(),s=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(s>0){var l=Math.floor(s/e);this.gridOptionsWrapper.setProperty("paginationPageSize",l)}}},Ad([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Ad([Qe],i.prototype,"postConstruct",null),Ad([vt("paginationAutoPageSizeService")],i)}(Ke),Ew=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),bw=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},xw=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.cacheVersion=0,e}return Ew(i,d),i.prototype.init=function(){this.active=this.gridOptionsWrapper.isValueCache(),this.neverExpires=this.gridOptionsWrapper.isValueCacheNeverExpires()},i.prototype.onDataChanged=function(){this.neverExpires||this.expire()},i.prototype.expire=function(){this.cacheVersion++},i.prototype.setValue=function(e,s,l){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[s]=l)},i.prototype.getValue=function(e,s){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[s]},bw([Qe],i.prototype,"init",null),bw([vt("valueCache")],i)}(Ke),Md=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Rs=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},rm=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Md(i,d),i.prototype.init=function(){this.rowModel.getType()===fe.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,$.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},i.prototype.onCellValueChanged=function(e){e.source!==fe.SOURCE_PASTE&&this.doChangeDetection(e.node,e.column)},i.prototype.doChangeDetection=function(e,s){if(!this.gridOptionsWrapper.isSuppressChangeDetection()){if(this.clientSideRowModel&&!e.isRowPinned()){var l=this.gridOptionsWrapper.isAggregateOnlyChangedColumns(),c=new Mt(l,this.clientSideRowModel.getRootNode());c.addParentNode(e.parent,[s]),this.clientSideRowModel.doAggregate(c)}this.rowRenderer.refreshCells()}},Rs([H("rowModel")],i.prototype,"rowModel",void 0),Rs([H("rowRenderer")],i.prototype,"rowRenderer",void 0),Rs([Qe],i.prototype,"init",null),Rs([vt("changeDetectionService")],i)}(Ke),oc=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ts=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ac=function(d,i){return function(e,s){i(e,s,d)}},Rw=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.consuming=!1,e}return oc(i,d),i.prototype.setBeans=function(e){this.logger=e.create("AlignedGridsService")},i.prototype.init=function(){this.addManagedListener(this.eventService,$.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},i.prototype.fireEvent=function(e){if(!this.consuming){var s=this.gridOptionsWrapper.getAlignedGrids();s&&s.forEach(function(l){if(l.api){var c=l.api.__getAlignedGridService();e(c)}})}},i.prototype.onEvent=function(e){this.consuming=!0,e(),this.consuming=!1},i.prototype.fireColumnEvent=function(e){this.fireEvent(function(s){s.onColumnEvent(e)})},i.prototype.fireScrollEvent=function(e){"horizontal"===e.direction&&this.fireEvent(function(s){s.onScrollEvent(e)})},i.prototype.onScrollEvent=function(e){var s=this;this.onEvent(function(){s.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left)})},i.prototype.getMasterColumns=function(e){var s=[];return e.columns?e.columns.forEach(function(l){s.push(l)}):e.column&&s.push(e.column),s},i.prototype.getColumnIds=function(e){var s=[];return e.columns?e.columns.forEach(function(l){s.push(l.getColId())}):e.column&&s.push(e.column.getColId()),s},i.prototype.onColumnEvent=function(e){var s=this;this.onEvent(function(){switch(e.type){case $.EVENT_COLUMN_MOVED:case $.EVENT_COLUMN_VISIBLE:case $.EVENT_COLUMN_PINNED:case $.EVENT_COLUMN_RESIZED:s.processColumnEvent(e);break;case $.EVENT_COLUMN_GROUP_OPENED:s.processGroupOpenedEvent(e);break;case $.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}})},i.prototype.processGroupOpenedEvent=function(e){var s=e.columnGroup,l=null;if(s){var c=s.getGroupId();l=this.columnModel.getOriginalColumnGroup(c)}s&&!l||(this.logger.log("onColumnEvent-> processing "+e+" expanded = "+s.isExpanded()),this.columnModel.setColumnGroupOpened(l,s.isExpanded(),"alignedGridChanged"))},i.prototype.processColumnEvent=function(e){var s=this,l=e.column,c=null;if(l&&(c=this.columnModel.getPrimaryColumn(l.getColId())),!l||c){var h=this.getMasterColumns(e);switch(e.type){case $.EVENT_COLUMN_MOVED:var m=e,R=e.columnApi.getColumnState().map(function(Te){return{colId:Te.colId}});this.columnModel.applyColumnState({state:R,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" toIndex = "+m.toIndex);break;case $.EVENT_COLUMN_VISIBLE:var T=e;R=e.columnApi.getColumnState().map(function(Ve){return{colId:Ve.colId,hide:Ve.hide}}),this.columnModel.applyColumnState({state:R},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" visible = "+T.visible);break;case $.EVENT_COLUMN_PINNED:var L=e;R=e.columnApi.getColumnState().map(function(Ve){return{colId:Ve.colId,pinned:Ve.pinned}}),this.columnModel.applyColumnState({state:R},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" pinned = "+L.pinned);break;case $.EVENT_COLUMN_RESIZED:var U=e;h.forEach(function(Te){s.logger.log("onColumnEvent-> processing "+e.type+" actualWidth = "+Te.getActualWidth());var He=[{key:Te.getColId(),newWidth:Te.getActualWidth()}];s.columnModel.setColumnWidths(He,!1,U.finished,"alignedGridChanged")})}var Q=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing(),oe=this.gridOptionsWrapper.getAlignedGrids();oe&&oe.forEach(function(Te){Te.api&&Te.api.setAlwaysShowVerticalScroll(Q)})}},Ts([H("columnModel")],i.prototype,"columnModel",void 0),Ts([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Ts([ac(0,Ni("loggerFactory"))],i.prototype,"setBeans",null),Ts([Qe],i.prototype,"init",null),Ts([vt("alignedGridsService")],i)}(Ke),Tw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),im=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},om=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Tw(i,d),i.prototype.adaptFunction=function(e,s){var l=this.componentMetadataProvider.retrieve(e);return l&&l.functionAdapter?l.functionAdapter(s):null},i.prototype.adaptCellRendererFunction=function(e){return function(){function l(){}return l.prototype.refresh=function(c){return!1},l.prototype.getGui=function(){var c=e(this.params),h=typeof c;return"string"===h||"number"===h||"boolean"===h?sa("<span>"+c+"</span>"):null==c?sa("<span></span>"):c},l.prototype.init=function(c){this.params=c},l}()},i.prototype.doesImplementIComponent=function(e){return!!e&&e.prototype&&"getGui"in e.prototype},im([H("componentMetadataProvider")],i.prototype,"componentMetadataProvider",void 0),im([vt("agComponentUtils")],i)}(Ke),am=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Kp=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Yp=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return am(i,d),i.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},pinnedRowCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}},i.prototype.retrieve=function(e){return this.componentMetaData[e]},Kp([H("agComponentUtils")],i.prototype,"agComponentUtils",void 0),Kp([Qe],i.prototype,"postConstruct",null),Kp([vt("componentMetadataProvider")],i)}(Ke),qx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),sm=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Mw={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:20,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:56,headerCellMinWidth:48,listItemHeight:32,rowHeight:48,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:32,headerCellMinWidth:24,listItemHeight:24,rowHeight:28,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:48,headerCellMinWidth:36,listItemHeight:24,rowHeight:42,chartMenuPanelWidth:240}},Ow={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},Od={},go=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return qx(i,d),i.prototype.getSassVariable=function(e,s){var l="ag-theme-"+(e.match("material")?"material":e.match("balham")?"balham":e.match("alpine")?"alpine":"custom"),c=Mw[l][s],h=0;Od[e]||(Od[e]={});var m=Od[e][s];if(null!=m)return m;if(Ow[s]){var w=Ow[s],R=document.createElement("div");Dt(R,e),R.style.position="absolute";var T=w.reduce(function(U,K){var Q=document.createElement("div");return Q.style.position="static",Dt(Q,K),U.appendChild(Q),Q},R);if(document.body){document.body.appendChild(R);var L=-1!==s.toLowerCase().indexOf("height")?"height":"width";h=parseInt(window.getComputedStyle(T)[L],10),document.body.removeChild(R)}}return Od[e][s]=h||c,Od[e][s]},i.prototype.isThemeDark=function(){var e=this.getTheme().theme;return!!e&&e.indexOf("dark")>=0},i.prototype.chartMenuPanelWidth=function(){var e=this.getTheme().themeFamily;return this.getSassVariable(e,"chartMenuPanelWidth")},i.prototype.getTheme=function(){for(var e=/\bag-(material|(?:theme-([\w\-]*)))\b/,s=this.eGridDiv,l=null;s&&!(l=e.exec(s.className));)s=s.parentElement||void 0;if(!l)return{};var c=l[0];if(void 0===l[2]){var m=c.replace("ag-","ag-theme-");vn(function(){return console.warn("AG Grid: As of v19 old theme are no longer provided. Please replace "+c+" with "+m+".")},"using-old-theme")}return{theme:c,el:s,themeFamily:c.replace(/-dark$/,"")}},sm([H("eGridDiv")],i.prototype,"eGridDiv",void 0),sm([vt("environment")],i)}(Ke),Kx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),lm=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Yx=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.createTasksP1={list:[],sorted:!1},e.createTasksP2={list:[],sorted:!1},e.destroyTasks=[],e.ticking=!1,e.scrollGoingDown=!0,e.lastScrollTop=0,e.taskCount=0,e.cancelledTasks=new Set,e}return Kx(i,d),i.prototype.setScrollTop=function(e){this.scrollGoingDown=e>this.lastScrollTop,this.lastScrollTop=e},i.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsWrapper.isSuppressAnimationFrame()},i.prototype.isOn=function(){return this.useAnimationFrame},i.prototype.verifyAnimationFrameOn=function(e){!1===this.useAnimationFrame&&console.warn("AG Grid: AnimationFrameService."+e+" called but animation frames are off")},i.prototype.createTask=function(e,s,l){this.verifyAnimationFrameOn(l);var c={task:e,index:s,createOrder:++this.taskCount};this.addTaskToList(this[l],c),this.schedule()},i.prototype.cancelTask=function(e){this.cancelledTasks.add(e)},i.prototype.addTaskToList=function(e,s){e.list.push(s),e.sorted=!1},i.prototype.sortTaskList=function(e){if(!e.sorted){var s=this.scrollGoingDown?1:-1;e.list.sort(function(l,c){return l.index!==c.index?s*(c.index-l.index):c.createOrder-l.createOrder}),e.sorted=!0}},i.prototype.addDestroyTask=function(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()},i.prototype.executeFrame=function(e){this.verifyAnimationFrameOn("executeFrame");for(var s=this.createTasksP1,l=s.list,c=this.createTasksP2,h=c.list,m=this.destroyTasks,w=(new Date).getTime(),R=(new Date).getTime()-w,T=e<=0,L=this.ctrlsService.getGridBodyCtrl();T||R<e;){if(!L.getScrollFeature().executeAnimationFrameScroll()){var K=void 0;if(l.length)this.sortTaskList(s),K=l.pop().task;else if(h.length)this.sortTaskList(c),K=h.pop().task;else{if(!m.length){this.cancelledTasks.clear();break}K=m.pop()}this.cancelledTasks.has(K)||K()}R=(new Date).getTime()-w}l.length||h.length||m.length?this.requestFrame():this.stopTicking()},i.prototype.stopTicking=function(){this.ticking=!1},i.prototype.flushAllFrames=function(){!this.useAnimationFrame||this.executeFrame(-1)},i.prototype.schedule=function(){!this.useAnimationFrame||this.ticking||(this.ticking=!0,this.requestFrame())},i.prototype.requestFrame=function(){var e=this.executeFrame.bind(this,60);window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):window.setTimeout(e,0)},i.prototype.isQueueEmpty=function(){return!this.ticking},i.prototype.debounce=function(e){var s=this,l=!1;return function(){s.isOn()?l||(l=!0,s.addDestroyTask(function(){l=!1,e()})):s.getFrameworkOverrides().setTimeout(e,0)}},lm([H("ctrlsService")],i.prototype,"ctrlsService",void 0),lm([Qe],i.prototype,"init",null),lm([vt("animationFrameService")],i)}(Ke),zM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Pd=function(){return Pd=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Pd.apply(this,arguments)},Oo=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Pw=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.timeLastPageEventProcessed=0,e}return zM(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(s){e.gridBodyCon=s.gridBodyCtrl})},i.prototype.handlePageScrollingKey=function(e){var s=e.which||e.keyCode,l=e.altKey,c=e.ctrlKey||e.metaKey,h=this.mouseEventService.getCellPositionForEvent(e);if(!h)return!1;var m=!1;switch(s){case $e.PAGE_HOME:case $e.PAGE_END:!c&&!l&&(this.onHomeOrEndKey(s),m=!0);break;case $e.LEFT:case $e.RIGHT:c&&!l&&(this.onCtrlLeftOrRight(s,h),m=!0);break;case $e.UP:case $e.DOWN:c&&!l&&(this.onCtrlUpOrDown(s,h),m=!0);break;case $e.PAGE_DOWN:!c&&!l&&(this.onPageDown(h),m=!0);break;case $e.PAGE_UP:!c&&!l&&(this.onPageUp(h),m=!0)}return m&&e.preventDefault(),m},i.prototype.isTimeSinceLastPageEventToRecent=function(){return(new Date).getTime()-this.timeLastPageEventProcessed<100},i.prototype.setTimeLastPageEventProcessed=function(){this.timeLastPageEventProcessed=(new Date).getTime()},i.prototype.navigateTo=function(e){var s=e.scrollIndex,l=e.scrollType,c=e.scrollColumn,h=e.focusIndex,m=e.focusColumn;Fe(c)&&!c.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(c),Fe(s)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(s,l),this.animationFrameService.flushAllFrames(),this.focusService.setFocusedCell(h,m,null,!0),this.rangeService&&this.rangeService.setRangeToCell({rowIndex:h,rowPinned:null,column:m})},i.prototype.onPageDown=function(e){if(!this.isTimeSinceLastPageEventToRecent()){var l=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),c=this.gridOptionsWrapper.getScrollbarWidth(),h=l.bottom-l.top;this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(h-=c);var m=this.paginationProxy.getPixelOffset(),T=this.paginationProxy.getRowIndexAtPixel(l.top+h+m),L=this.paginationProxy.getRow(e.rowIndex).rowTop,K=this.paginationProxy.getRowIndexAtPixel(L+h-m+m),Q=this.paginationProxy.getPageLastRow();K>Q&&(K=Q),T>Q&&(T=Q),this.navigateTo({scrollIndex:T,scrollType:"top",scrollColumn:null,focusIndex:K,focusColumn:e.column}),this.setTimeLastPageEventProcessed()}},i.prototype.onPageUp=function(e){if(!this.isTimeSinceLastPageEventToRecent()){var l=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),c=this.gridOptionsWrapper.getScrollbarWidth(),h=l.bottom-l.top;this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(h-=c);var m=this.paginationProxy.getPixelOffset(),T=this.paginationProxy.getRowIndexAtPixel(l.top+m),L=this.paginationProxy.getRow(e.rowIndex),K=this.paginationProxy.getRowIndexAtPixel(L.rowTop+L.rowHeight-h-m+m),Q=this.paginationProxy.getPageFirstRow();K<Q&&(K=Q),T<Q&&(T=Q),this.navigateTo({scrollIndex:T,scrollType:"bottom",scrollColumn:null,focusIndex:K,focusColumn:e.column}),this.setTimeLastPageEventProcessed()}},i.prototype.getIndexToFocus=function(e,s){var l=e;if(s){var c=this.paginationProxy.getRow(e);c&&c.stub&&(l-=1)}return l},i.prototype.onCtrlUpOrDown=function(e,s){var l=e===$e.UP,c=l?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:c,scrollType:null,scrollColumn:s.column,focusIndex:this.getIndexToFocus(c,!l),focusColumn:s.column})},i.prototype.onCtrlLeftOrRight=function(e,s){var l=e===$e.LEFT,c=this.columnModel.getAllDisplayedColumns(),m=l!==this.gridOptionsWrapper.isEnableRtl()?c[0]:zn(c);this.navigateTo({scrollIndex:s.rowIndex,scrollType:null,scrollColumn:m,focusIndex:s.rowIndex,focusColumn:m})},i.prototype.onHomeOrEndKey=function(e){var s=e===$e.PAGE_HOME,l=this.columnModel.getAllDisplayedColumns(),c=s?l[0]:zn(l),h=s?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:h,scrollType:null,scrollColumn:c,focusIndex:this.getIndexToFocus(h,!s),focusColumn:c})},i.prototype.onTabKeyDown=function(e,s){var l=s.shiftKey;if(this.tabToNextCellCommon(e,l))s.preventDefault();else if(l){var h=e.getRowPosition(),m=h.rowIndex;if(h.rowPinned?0===m:m===this.paginationProxy.getPageFirstRow()){s.preventDefault();var T=this.headerNavigationService.getHeaderRowCount()-1,L=zn(this.columnModel.getAllDisplayedColumns());this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:T,column:L},event:s})}}else e instanceof Zi&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(!1)&&s.preventDefault()},i.prototype.tabToNextCell=function(e){var s=this.focusService.getFocusedCell();if(!s)return!1;var l=this.getCellByPosition(s);return!!(l||(l=this.rowRenderer.getRowByPosition(s),l&&l.isFullWidth()))&&this.tabToNextCellCommon(l,e)},i.prototype.tabToNextCellCommon=function(e,s){var l=e.isEditing();if(!l&&e instanceof Zi){var h=e.getRowCtrl();h&&(l=h.isEditing())}return(l?this.gridOptionsWrapper.isFullRowEdit()?this.moveToNextEditingRow(e,s):this.moveToNextEditingCell(e,s):this.moveToNextCellNotEditing(e,s))||!!this.focusService.getFocusedHeader()},i.prototype.moveToNextEditingCell=function(e,s){var l=e.getCellPosition();e.stopEditing();var c=this.findNextCellToFocusOn(l,s,!0);return null!=c&&(c.startEditing(null,null,!0),c.focusCell(!1),!0)},i.prototype.moveToNextEditingRow=function(e,s){var l=e.getCellPosition(),c=this.findNextCellToFocusOn(l,s,!0);if(null==c)return!1;var h=c.getCellPosition(),m=this.isCellEditable(l),w=this.isCellEditable(h),R=h&&l.rowIndex===h.rowIndex&&l.rowPinned===h.rowPinned;return m&&e.setFocusOutOnEditor(),R||(e.getRowCtrl().stopEditing(),c.getRowCtrl().startRowEditing()),w?(c.setFocusInOnEditor(),c.focusCell()):c.focusCell(!0),!0},i.prototype.moveToNextCellNotEditing=function(e,s){var c,l=this.columnModel.getAllDisplayedColumns();c=e instanceof ou?Pd(Pd({},e.getRowPosition()),{column:s?l[0]:zn(l)}):e.getCellPosition();var h=this.findNextCellToFocusOn(c,s,!1);if(h instanceof Zi)h.focusCell(!0);else if(h)return this.tryToFocusFullWidthRow(h.getRowPosition(),s);return Fe(h)},i.prototype.findNextCellToFocusOn=function(e,s,l){for(var c=e;;){s||(c=this.getLastCellOfColSpan(c)),c=this.cellNavigationService.getNextTabbedCell(c,s);var h=this.gridOptionsWrapper.getTabToNextCellFunc();if(Fe(h)){var w=h({backwards:s,editing:l,previousCellPosition:e,nextCellPosition:c||null,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()});Fe(w)?(w.floating&&(vn(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),w.rowPinned=w.floating),c={rowIndex:w.rowIndex,column:w.column,rowPinned:w.rowPinned}):c=null}if(!c)return null;if(c.rowIndex<0){var R=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:R+c.rowIndex,column:c.column}}),null}var T=this.gridOptionsWrapper.isFullRowEdit();if(!l||T||this.isCellEditable(c)){this.ensureCellVisible(c);var U=this.getCellByPosition(c);if(!U){var K=this.rowRenderer.getRowByPosition(c);if(!K||!K.isFullWidth())continue;return K}if(!U.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(c),U}}},i.prototype.isCellEditable=function(e){var s=this.lookupRowNodeForCell(e);return!!s&&e.column.isCellEditable(s)},i.prototype.getCellByPosition=function(e){var s=this.rowRenderer.getRowByPosition(e);return s?s.getCellCtrl(e.column):null},i.prototype.lookupRowNodeForCell=function(e){return e.rowPinned===fe.PINNED_TOP?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned===fe.PINNED_BOTTOM?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)},i.prototype.navigateToNextCell=function(e,s,l,c){for(var h=l,m=!1;h&&(h===l||!this.isValidNavigateCell(h));)this.gridOptionsWrapper.isEnableRtl()?s===$e.LEFT&&(h=this.getLastCellOfColSpan(h)):s===$e.RIGHT&&(h=this.getLastCellOfColSpan(h)),m=Ce(h=this.cellNavigationService.getNextCellToFocus(s,h));if(m&&e&&e.keyCode===$e.UP&&(h={rowIndex:-1,rowPinned:null,column:l.column}),c){var w=this.gridOptionsWrapper.getNavigateToNextCellFunc();if(Fe(w)){var T=w({key:s,previousCellPosition:l,nextCellPosition:h||null,event:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()});Fe(T)?(T.floating&&(vn(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),T.rowPinned=T.floating),h={rowPinned:T.rowPinned,rowIndex:T.rowIndex,column:T.column}):h=null}}if(h){if(h.rowIndex<0){var L=this.headerNavigationService.getHeaderRowCount();return void this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:L+h.rowIndex,column:l.column},event:e||void 0})}var U=this.getNormalisedPosition(h);U?this.focusPosition(U):this.tryToFocusFullWidthRow(h)}},i.prototype.getNormalisedPosition=function(e){this.ensureCellVisible(e);var s=this.getCellByPosition(e);return s?(e=s.getCellPosition(),this.ensureCellVisible(e),e):null},i.prototype.tryToFocusFullWidthRow=function(e,s){void 0===s&&(s=!1);var l=this.columnModel.getAllDisplayedColumns(),c=this.rowRenderer.getRowByPosition(e);if(!c||!c.isFullWidth())return!1;var h={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(s?zn(l):l[0])};return this.focusPosition(h),!0},i.prototype.focusPosition=function(e){this.focusService.setFocusedCell(e.rowIndex,e.column,e.rowPinned,!0),this.rangeService&&this.rangeService.setRangeToCell(e)},i.prototype.isValidNavigateCell=function(e){return!!this.rowPositionUtils.getRowNode(e)},i.prototype.getLastCellOfColSpan=function(e){var s=this.getCellByPosition(e);if(!s)return e;var l=s.getColSpanningList();return 1===l.length?e:{rowIndex:e.rowIndex,column:zn(l),rowPinned:e.rowPinned}},i.prototype.ensureCellVisible=function(e){Ce(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column),this.gridBodyCon.getScrollFeature().horizontallyScrollHeaderCenterAndFloatingCenter(),this.animationFrameService.flushAllFrames()},Oo([H("mouseEventService")],i.prototype,"mouseEventService",void 0),Oo([H("paginationProxy")],i.prototype,"paginationProxy",void 0),Oo([H("focusService")],i.prototype,"focusService",void 0),Oo([H("animationFrameService")],i.prototype,"animationFrameService",void 0),Oo([Nn("rangeService")],i.prototype,"rangeService",void 0),Oo([H("columnModel")],i.prototype,"columnModel",void 0),Oo([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Oo([H("rowRenderer")],i.prototype,"rowRenderer",void 0),Oo([H("headerNavigationService")],i.prototype,"headerNavigationService",void 0),Oo([H("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),Oo([H("cellNavigationService")],i.prototype,"cellNavigationService",void 0),Oo([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Oo([Qe],i.prototype,"postConstruct",null),Oo([vt("navigationService")],i)}(Ke),cm=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Id=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},$x=function(d,i){return function(e,s){i(e,s,d)}},Xx=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.scrollY=0,e.uiBodyHeight=0,e}return cm(i,d),i.prototype.agWire=function(e){this.logger=e.create("RowContainerHeightService")},i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=hs(),this.logger.log("maxDivHeight = "+this.maxDivHeight)},i.prototype.isStretching=function(){return this.stretching},i.prototype.getDivStretchOffset=function(){return this.divStretchOffset},i.prototype.updateOffset=function(){if(this.stretching){var s=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,l=this.getUiBodyHeight();(s!==this.scrollY||l!==this.uiBodyHeight)&&(this.scrollY=s,this.uiBodyHeight=l,this.calculateOffset())}},i.prototype.calculateOffset=function(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var e=this.scrollY/this.maxScrollY,s=e*this.pixelsToShave;this.logger.log("Div Stretch Offset = "+s+" ("+this.pixelsToShave+" * "+e+")"),this.setDivStretchOffset(s)},i.prototype.setUiContainerHeight=function(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:$.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))},i.prototype.clearOffset=function(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)},i.prototype.setDivStretchOffset=function(e){var s="number"==typeof e?Math.floor(e):null;this.divStretchOffset!==s&&(this.divStretchOffset=s,this.eventService.dispatchEvent({type:$.EVENT_HEIGHT_SCALE_CHANGED}))},i.prototype.setModelHeight=function(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()},i.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},i.prototype.getRealPixelPosition=function(e){return e-this.divStretchOffset},i.prototype.getUiBodyHeight=function(){var s=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return s.bottom-s.top},i.prototype.getScrollPositionForPixel=function(e){if(this.pixelsToShave<=0)return e;var s=this.modelHeight-this.getUiBodyHeight();return this.maxScrollY*(e/s)},Id([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Id([$x(0,Ni("loggerFactory"))],i.prototype,"agWire",null),Id([Qe],i.prototype,"postConstruct",null),Id([vt("rowContainerHeightService")],i)}(Ke),Jx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),dm=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Iw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Jx(i,d),i.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.isRowSelectableFunc=this.gridOptionsWrapper.getIsRowSelectableFunc()},i.prototype.updateSelectableAfterGrouping=function(e){this.isRowSelectableFunc&&this.recurseDown(e.childrenAfterGroup,function(c){return c.childrenAfterGroup})},i.prototype.updateSelectableAfterFiltering=function(e){this.isRowSelectableFunc&&this.recurseDown(e.childrenAfterGroup,function(c){return c.childrenAfterFilter})},i.prototype.recurseDown=function(e,s){var l=this;!e||e.forEach(function(c){var h;c.group&&(c.hasChildren()&&l.recurseDown(s(c),s),h=l.groupSelectsChildren?Fe(Li(s(c),"selectable",!0)):!!l.isRowSelectableFunc&&l.isRowSelectableFunc(c),c.setRowSelectable(h))})},dm([Qe],i.prototype,"init",null),dm([vt("selectableService")],i)}(Ke),Lw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ea=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Zx=function(d){function i(){var e=d.call(this)||this;return e.previousAndFirstButtonsDisabled=!1,e.nextButtonDisabled=!1,e.lastButtonDisabled=!1,e}return Lw(i,d),i.prototype.postConstruct=function(){var e=this,s=this.gridOptionsWrapper.isEnableRtl();this.setTemplate(this.getTemplate()),this.btFirst.insertAdjacentElement("afterbegin",ui(s?"last":"first",this.gridOptionsWrapper)),this.btPrevious.insertAdjacentElement("afterbegin",ui(s?"next":"previous",this.gridOptionsWrapper)),this.btNext.insertAdjacentElement("afterbegin",ui(s?"previous":"next",this.gridOptionsWrapper)),this.btLast.insertAdjacentElement("afterbegin",ui(s?"first":"last",this.gridOptionsWrapper)),this.gridOptionsWrapper.isPagination()&&!this.gridOptionsWrapper.isSuppressPaginationPanel()?(this.addManagedListener(this.eventService,$.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(function(h){var m=h.el,w=h.fn;e.addManagedListener(m,"click",w),e.addManagedListener(m,"keydown",function(R){(R.keyCode===$e.ENTER||R.keyCode===$e.SPACE)&&(R.preventDefault(),w())})}),this.onPaginationChanged()):this.setDisplayed(!1)},i.prototype.onPaginationChanged=function(){this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels()},i.prototype.onBtFirst=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()},i.prototype.setCurrentPageLabel=function(){var e=this.paginationProxy.getTotalPages()>0,s=this.paginationProxy.getCurrentPage();this.lbCurrent.innerHTML=this.formatNumber(e?s+1:0)},i.prototype.formatNumber=function(e){var s=this.gridOptionsWrapper.getPaginationNumberFormatterFunc();return s?s({value:e}):zv(e)},i.prototype.getTemplate=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),s=e("page","Page"),l=e("to","to"),c=e("of","of"),h=e("firstPage","First Page"),m=e("previousPage","Previous Page"),w=e("nextPage","Next Page"),R=e("lastPage","Last Page"),T=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'+T+'">\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-'+T+'-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+T+'-to">'+l+'</span>\n                    <span id="ag-'+T+'-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+T+'-of">'+c+'</span>\n                    <span id="ag-'+T+'-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div ref="btFirst" class="ag-paging-button" role="button" aria-label="'+h+'" tabindex="0"></div>\n                    <div ref="btPrevious" class="ag-paging-button" role="button" aria-label="'+m+'" tabindex="0"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-'+T+'-start-page">'+s+'</span>\n                        <span id="ag-'+T+'-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-'+T+'-of-page">'+c+'</span>\n                        <span id="ag-'+T+'-of-page-number" ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div ref="btNext" class="ag-paging-button" role="button" aria-label="'+w+'" tabindex="0"></div>\n                    <div ref="btLast" class="ag-paging-button" role="button" aria-label="'+R+'" tabindex="0"></div>\n                </span>\n            </div>'},i.prototype.onBtNext=function(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()},i.prototype.onBtPrevious=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()},i.prototype.onBtLast=function(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()},i.prototype.enableOrDisableButtons=function(){var e=this.paginationProxy.getCurrentPage(),s=this.paginationProxy.isLastPageFound(),l=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,Ft(this.btFirst,"ag-disabled",this.previousAndFirstButtonsDisabled),Kf(this.btFirst,this.previousAndFirstButtonsDisabled),Ft(this.btPrevious,"ag-disabled",this.previousAndFirstButtonsDisabled),Kf(this.btPrevious,this.previousAndFirstButtonsDisabled);var c=this.isZeroPagesToDisplay();this.nextButtonDisabled=s&&e===l-1||c,Ft(this.btNext,"ag-disabled",this.nextButtonDisabled),Kf(this.btNext,this.nextButtonDisabled),this.lastButtonDisabled=!s||c||e===l-1,Ft(this.btLast,"ag-disabled",this.lastButtonDisabled),Kf(this.btLast,this.lastButtonDisabled)},i.prototype.updateRowLabels=function(){var h,m,e=this.paginationProxy.getCurrentPage(),s=this.paginationProxy.getPageSize(),l=this.paginationProxy.isLastPageFound(),c=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;this.isZeroPagesToDisplay()?h=m=0:(m=(h=s*e+1)+s-1,l&&m>c&&(m=c)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(h),this.lbLastRowOnPage.innerHTML=this.rowNodeBlockLoader.isLoading()?"?":this.formatNumber(m)},i.prototype.isZeroPagesToDisplay=function(){var e=this.paginationProxy.isLastPageFound(),s=this.paginationProxy.getTotalPages();return e&&0===s},i.prototype.setTotalLabels=function(){var e=this.paginationProxy.isLastPageFound(),s=this.paginationProxy.getTotalPages(),l=e?this.paginationProxy.getMasterRowCount():null;if(1===l){var c=this.paginationProxy.getRow(0);if(c&&c.group&&!c.groupData&&!c.aggData)return void this.setTotalLabelsToZero()}if(e)this.lbTotal.innerHTML=this.formatNumber(s),this.lbRecordCount.innerHTML=this.formatNumber(l);else{var m=this.gridOptionsWrapper.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=m,this.lbRecordCount.innerHTML=m}},i.prototype.setTotalLabelsToZero=function(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)},ea([H("paginationProxy")],i.prototype,"paginationProxy",void 0),ea([H("rowNodeBlockLoader")],i.prototype,"rowNodeBlockLoader",void 0),ea([Be("btFirst")],i.prototype,"btFirst",void 0),ea([Be("btPrevious")],i.prototype,"btPrevious",void 0),ea([Be("btNext")],i.prototype,"btNext",void 0),ea([Be("btLast")],i.prototype,"btLast",void 0),ea([Be("lbRecordCount")],i.prototype,"lbRecordCount",void 0),ea([Be("lbFirstRowOnPage")],i.prototype,"lbFirstRowOnPage",void 0),ea([Be("lbLastRowOnPage")],i.prototype,"lbLastRowOnPage",void 0),ea([Be("lbCurrent")],i.prototype,"lbCurrent",void 0),ea([Be("lbTotal")],i.prototype,"lbTotal",void 0),ea([Qe],i.prototype,"postConstruct",null),i}(pn),Fw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ha=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.polyfillFunctions=[],e}return Fw(i,d),i.prototype.observeResize=function(e,s){var L,l=this,c=Mu(s,50),w=this.gridOptionsWrapper.isSuppressBrowserResizeObserver();return window.ResizeObserver&&!w?((L=new window.ResizeObserver(c)).observe(e),function(){return L.disconnect()}):function(){var L=Pa(e),U=si(e),K=!0;return function oe(){if(K){var Te=Pa(e),He=si(e);(Te!==L||He!==U)&&(L=Te,U=He,s()),l.doNextPolyfillTurn(oe)}}(),function(){return K=!1}}()},i.prototype.doNextPolyfillTurn=function(e){this.polyfillFunctions.push(e),this.schedulePolyfill()},i.prototype.schedulePolyfill=function(){var e=this;this.polyfillScheduled||(this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout(function(){var c=e.polyfillFunctions;e.polyfillScheduled=!1,e.polyfillFunctions=[],c.forEach(function(h){return h()})},50))},i=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([vt("resizeObserverService")],i),i}(Ke),fm=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),sc=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Xu=function(){return function(d){d[d.Loading=0]="Loading",d[d.NoRows=1]="NoRows"}(Xu||(Xu={})),Xu}(),jM=function(d){function i(){var e=d.call(this,i.TEMPLATE)||this;return e.inProgress=!1,e.destroyRequested=!1,e}return fm(i,d),i.prototype.updateLayoutClasses=function(e,s){Ft(this.eOverlayWrapper,Y.LBn.AUTO_HEIGHT,s.autoHeight),Ft(this.eOverlayWrapper,Y.LBn.NORMAL,s.normal),Ft(this.eOverlayWrapper,Y.LBn.PRINT,s.print)},i.prototype.postConstruct=function(){this.createManagedBean(new Yu(this)),this.setDisplayed(!1),this.addManagedListener(this.eventService,$.EVENT_ROW_DATA_CHANGED,this.onRowDataChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_ROW_DATA_UPDATED,this.onRowDataChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.gridOptionsWrapper.isRowModelDefault()&&!this.gridOptionsWrapper.getRowData()&&this.showLoadingOverlay(),this.gridApi.registerOverlayWrapperComp(this)},i.prototype.setWrapperTypeClass=function(e){Ft(this.eOverlayWrapper,"ag-overlay-loading-wrapper",e===Xu.Loading),Ft(this.eOverlayWrapper,"ag-overlay-no-rows-wrapper",e===Xu.NoRows)},i.prototype.showLoadingOverlay=function(){if(!this.gridOptionsWrapper.isSuppressLoadingOverlay()){var e={api:this.gridOptionsWrapper.getApi()},l=this.userComponentFactory.getLoadingOverlayCompDetails(e).newAgStackInstance();this.showOverlay(l,Xu.Loading)}},i.prototype.showNoRowsOverlay=function(){if(!this.gridOptionsWrapper.isSuppressNoRowsOverlay()){var e={api:this.gridOptionsWrapper.getApi()},l=this.userComponentFactory.getNoRowsOverlayCompDetails(e).newAgStackInstance();this.showOverlay(l,Xu.NoRows)}},i.prototype.showOverlay=function(e,s){var l=this;this.inProgress||(this.setWrapperTypeClass(s),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(function(c){l.inProgress=!1,l.eOverlayWrapper.appendChild(c.getGui()),l.activeOverlay=c,l.destroyRequested&&(l.destroyRequested=!1,l.destroyActiveOverlay())}),this.setDisplayed(!0))},i.prototype.destroyActiveOverlay=function(){this.inProgress?this.destroyRequested=!0:!this.activeOverlay||(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),uo(this.eOverlayWrapper))},i.prototype.hideOverlay=function(){this.destroyActiveOverlay(),this.setDisplayed(!1)},i.prototype.destroy=function(){this.destroyActiveOverlay(),d.prototype.destroy.call(this)},i.prototype.showOrHideOverlay=function(){var e=this.paginationProxy.isEmpty(),s=this.gridOptionsWrapper.isSuppressNoRowsOverlay();e&&!s?this.showNoRowsOverlay():this.hideOverlay()},i.prototype.onRowDataChanged=function(){this.showOrHideOverlay()},i.prototype.onNewColumnsLoaded=function(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&this.hideOverlay()},i.TEMPLATE='\n        <div class="ag-overlay" aria-hidden="true">\n            <div class="ag-overlay-panel">\n                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>\n            </div>\n        </div>',sc([H("userComponentFactory")],i.prototype,"userComponentFactory",void 0),sc([H("paginationProxy")],i.prototype,"paginationProxy",void 0),sc([H("gridApi")],i.prototype,"gridApi",void 0),sc([H("columnModel")],i.prototype,"columnModel",void 0),sc([Be("eOverlayWrapper")],i.prototype,"eOverlayWrapper",void 0),sc([Qe],i.prototype,"postConstruct",null),i}(pn),Gw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),du=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Bw=function(d){function i(e){void 0===e&&(e={});var s=d.call(this,i.getTemplate(e))||this;s.suppressEnabledCheckbox=!0,s.suppressOpenCloseIcons=!1;var c=e.enabled,h=e.items,m=e.suppressEnabledCheckbox,w=e.suppressOpenCloseIcons;return s.title=e.title,s.cssIdentifier=e.cssIdentifier||"default",s.enabled=null==c||c,s.items=h||[],s.alignItems=e.alignItems||"center",null!=m&&(s.suppressEnabledCheckbox=m),null!=w&&(s.suppressOpenCloseIcons=w),s}return Gw(i,d),i.getTemplate=function(e){var s=e.cssIdentifier||"default";return'<div class="ag-group ag-'+s+'-group" role="presentation">\n            <div class="ag-group-title-bar ag-'+s+'-group-title-bar ag-unselectable" ref="eTitleBar" role="button">\n                <span class="ag-group-title-bar-icon ag-'+s+'-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>\n                <span class="ag-group-title-bar-icon ag-'+s+'-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>\n                <span ref="eTitle" class="ag-group-title ag-'+s+'-group-title"></span>\n            </div>\n            <div ref="eToolbar" class="ag-group-toolbar ag-'+s+'-group-toolbar">\n                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>\n            </div>\n            <div ref="eContainer" class="ag-group-container ag-group-container-'+(e.direction||"vertical")+" ag-"+s+'-group-container"></div>\n        </div>'},i.prototype.postConstruct=function(){if(this.items.length){var e=this.items;this.items=[],this.addItems(e)}var s=this.gridOptionsWrapper.getLocaleTextFunc();this.cbGroupEnabled.setLabel(s("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()},i.prototype.setupExpandContract=function(){var e=this;this.eGroupClosedIcon.appendChild(jo("columnSelectClosed",this.gridOptionsWrapper,null)),this.eGroupOpenedIcon.appendChild(jo("columnSelectOpen",this.gridOptionsWrapper,null)),this.addManagedListener(this.eTitleBar,"click",function(){return e.toggleGroupExpand()}),this.addManagedListener(this.eTitleBar,"keydown",function(s){switch(s.keyCode){case $e.ENTER:case $e.SPACE:s.preventDefault(),e.toggleGroupExpand();break;case $e.RIGHT:case $e.LEFT:s.preventDefault(),e.toggleGroupExpand(s.keyCode===$e.RIGHT)}})},i.prototype.refreshAriaStatus=function(){this.suppressOpenCloseIcons||Yf(this.eTitleBar,this.expanded)},i.prototype.refreshChildDisplay=function(){var e=!this.suppressOpenCloseIcons;$n(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),$n(this.eGroupOpenedIcon,e&&this.expanded),$n(this.eGroupClosedIcon,e&&!this.expanded)},i.prototype.isExpanded=function(){return this.expanded},i.prototype.setAlignItems=function(e){var s=this.getGui();return this.alignItems!==e&&yi(s,"ag-group-item-alignment-"+this.alignItems),this.alignItems=e,Dt(s,"ag-group-item-alignment-"+this.alignItems),this},i.prototype.toggleGroupExpand=function(e){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),$n(this.eContainer,!0),this):(this.expanded===(e=null!=e?e:!this.expanded)||(this.expanded=e,this.refreshAriaStatus(),this.refreshChildDisplay(),$n(this.eContainer,e),this.dispatchEvent({type:this.expanded?i.EVENT_EXPANDED:i.EVENT_COLLAPSED})),this)},i.prototype.addItems=function(e){var s=this;e.forEach(function(l){return s.addItem(l)})},i.prototype.addItem=function(e){var s=this.eContainer,l=e instanceof pn?e.getGui():e;Dt(l,"ag-group-item"),Dt(l,"ag-"+this.cssIdentifier+"-group-item"),s.appendChild(l),this.items.push(l)},i.prototype.hideItem=function(e,s){Ft(this.items[s],"ag-hidden",e)},i.prototype.setTitle=function(e){return this.eTitle.innerText=e,this},i.prototype.addCssClassToTitleBar=function(e){Dt(this.eTitleBar,e)},i.prototype.setEnabled=function(e,s){return this.enabled=e,this.refreshDisabledStyles(),this.toggleGroupExpand(e),s||this.cbGroupEnabled.setValue(e),this},i.prototype.isEnabled=function(){return this.enabled},i.prototype.onEnableChange=function(e){var s=this;return this.cbGroupEnabled.onValueChange(function(l){s.setEnabled(l,!0),e(l)}),this},i.prototype.hideEnabledCheckbox=function(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this},i.prototype.hideOpenCloseIcons=function(e){return this.suppressOpenCloseIcons=e,e&&this.toggleGroupExpand(!0),this},i.prototype.refreshDisabledStyles=function(){Ft(this.getGui(),"ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(Dt(this.eTitleBar,"ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(yi(this.eTitleBar,"ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),Ft(this.eContainer,"ag-disabled-group-container",!this.enabled)},i.EVENT_EXPANDED="expanded",i.EVENT_COLLAPSED="collapsed",du([Be("eTitleBar")],i.prototype,"eTitleBar",void 0),du([Be("eGroupOpenedIcon")],i.prototype,"eGroupOpenedIcon",void 0),du([Be("eGroupClosedIcon")],i.prototype,"eGroupClosedIcon",void 0),du([Be("eToolbar")],i.prototype,"eToolbar",void 0),du([Be("cbGroupEnabled")],i.prototype,"cbGroupEnabled",void 0),du([Be("eTitle")],i.prototype,"eTitle",void 0),du([Be("eContainer")],i.prototype,"eContainer",void 0),du([Qe],i.prototype,"postConstruct",null),i}(pn),Qx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Xp=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ld=function(d){function i(e,s){var l=d.call(this)||this;return l.element=e,l.dragStartPosition={x:0,y:0},l.position={x:0,y:0},l.lastSize={width:-1,height:-1},l.positioned=!1,l.resizersAdded=!1,l.resizeListeners=[],l.boundaryEl=null,l.isResizing=!1,l.isMoving=!1,l.resizable={},l.movable=!1,l.currentResizer=null,l.config=ii({},{popup:!1},s),l}return Qx(i,d),i.prototype.center=function(){var e=this.offsetParent,s=e.clientHeight,c=e.clientWidth/2-this.getWidth()/2,h=s/2-this.getHeight()/2;this.offsetElement(c,h)},i.prototype.initialisePosition=function(){var e=this.config,s=e.centered,l=e.forcePopupParentAsOffsetParent,c=e.minWidth,h=e.width,m=e.minHeight,w=e.height,R=e.x,T=e.y;this.offsetParent||this.setOffsetParent();var L=0,U=0,K=!!this.element.offsetParent;if(K){var Q=this.findBoundaryElement(),oe=window.getComputedStyle(Q);if(null!=oe.minWidth){var Te=Q.offsetWidth-this.element.offsetWidth;U=parseInt(oe.minWidth,10)-Te}if(null!=oe.minHeight){var He=Q.offsetHeight-this.element.offsetHeight;L=parseInt(oe.minHeight,10)-He}}if(this.minHeight=m||L,this.minWidth=c||U,h&&this.setWidth(h),w&&this.setHeight(w),(!h||!w)&&this.refreshSize(),s)this.center();else if(R||T)this.offsetElement(R,T);else if(K&&l&&this.boundaryEl){var Ve=parseFloat(this.boundaryEl.style.top),Pe=parseFloat(this.boundaryEl.style.left);this.offsetElement(isNaN(Pe)?0:Pe,isNaN(Ve)?0:Ve)}this.positioned=!!this.offsetParent},i.prototype.isPositioned=function(){return this.positioned},i.prototype.getPosition=function(){return this.position},i.prototype.setMovable=function(e,s){if(this.config.popup&&e!==this.movable){this.movable=e;var l=this.moveElementDragListener||{eElement:s,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(l),this.moveElementDragListener=l):(this.dragService.removeDragSource(l),this.moveElementDragListener=void 0)}},i.prototype.setResizable=function(e){var s=this;if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"==typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(function(l){var h=!!e[l],m=s.getResizerElement(l),w={dragStartPixels:0,eElement:m,onDragStart:function(T){return s.onResizeStart(T,l)},onDragging:s.onResize.bind(s),onDragStop:function(T){return s.onResizeEnd(T,l)}};(!!s.resizable[l]!==h||!s.isAlive()&&!h)&&(h?(s.dragService.addDragSource(w),s.resizeListeners.push(w),m.style.pointerEvents="all"):m.style.pointerEvents="none")})},i.prototype.removeSizeFromEl=function(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")},i.prototype.restoreLastSize=function(){this.element.style.flex="0 0 auto";var e=this.lastSize,s=e.height,l=e.width;-1!==l&&(this.element.style.width=l+"px"),-1!==s&&(this.element.style.height=s+"px")},i.prototype.getHeight=function(){return this.element.offsetHeight},i.prototype.setHeight=function(e){var s=this.config.popup,l=this.element,c=!1;if("string"==typeof e&&-1!==e.indexOf("%"))ut(l,e),e=Lu(l),c=!0;else if(this.positioned){var h=this.element.getBoundingClientRect(),m=this.offsetParent.getBoundingClientRect();e=Math.max(this.minHeight,e);var w=this.offsetParent.clientHeight,R=s?this.position.y:h.top;w&&e+R>w+(s?0:m.top)&&(e=w-R)}this.getHeight()!==e&&(c?(l.style.maxHeight="unset",l.style.minHeight="unset"):s?ut(l,e):(l.style.height=e+"px",l.style.flex="0 0 auto",this.lastSize.height="number"==typeof e?e:parseFloat(e)))},i.prototype.getWidth=function(){return this.element.offsetWidth},i.prototype.setWidth=function(e){var s=this.element,l=this.config.popup,c=!1;if("string"==typeof e&&-1!==e.indexOf("%"))Ia(s,e),e=jf(s),c=!0;else if(this.positioned){e=Math.max(this.minWidth,e);var h=this.offsetParent.clientWidth,m=l?this.position.x:this.element.getBoundingClientRect().left;h&&e+m>h&&(e=h-m)}this.getWidth()!==e&&(c?(s.style.maxWidth="unset",s.style.minWidth="unset"):this.config.popup?Ia(s,e):(s.style.width=e+"px",s.style.flex=" unset",this.lastSize.width="number"==typeof e?e:parseFloat(e)))},i.prototype.offsetElement=function(e,s){void 0===e&&(e=0),void 0===s&&(s=0);var l=this.config.forcePopupParentAsOffsetParent?this.boundaryEl:this.element;this.popupService.positionPopup({ePopup:l,x:e,y:s,keepWithinBounds:!0}),this.setPosition(parseFloat(l.style.left),parseFloat(l.style.top))},i.prototype.setPosition=function(e,s){this.position.x=e,this.position.y=s},i.prototype.updateDragStartPosition=function(e,s){this.dragStartPosition={x:e,y:s}},i.prototype.calculateMouseMovement=function(e){var s=e.e,c=e.isTop,m=e.topBuffer,w=s.clientX-this.dragStartPosition.x,R=s.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(s,!!e.isLeft,!!e.anywhereWithin,w)?0:w,movementY:this.shouldSkipY(s,!!c,m,R)?0:R}},i.prototype.shouldSkipX=function(e,s,l,c){var h=this.element.getBoundingClientRect(),m=this.offsetParent.getBoundingClientRect(),w=this.boundaryEl.getBoundingClientRect(),R=this.config.popup?this.position.x:h.left,T=R<=0&&m.left>=e.clientX||m.right<=e.clientX&&m.right<=w.right;return!!T||(s?c<0&&e.clientX>R+m.left||c>0&&e.clientX<R+m.left:l?c<0&&e.clientX>w.right||c>0&&e.clientX<R+m.left:c<0&&e.clientX>w.right||c>0&&e.clientX<w.right)},i.prototype.shouldSkipY=function(e,s,l,c){void 0===l&&(l=0);var h=this.element.getBoundingClientRect(),m=this.offsetParent.getBoundingClientRect(),w=this.boundaryEl.getBoundingClientRect(),R=this.config.popup?this.position.y:h.top,T=R<=0&&m.top>=e.clientY||m.bottom<=e.clientY&&m.bottom<=w.bottom;return!!T||(s?c<0&&e.clientY>R+m.top+l||c>0&&e.clientY<R+m.top:c<0&&e.clientY>w.bottom||c>0&&e.clientY<w.bottom)},i.prototype.createResizeMap=function(){var e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}},i.prototype.addResizers=function(){if(!this.resizersAdded){var e=this.element;if(e){var l=(new DOMParser).parseFromString('<div class="ag-resizer-wrapper">\n        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>',"text/html").body;e.appendChild(l.firstChild),this.createResizeMap(),this.resizersAdded=!0}}},i.prototype.removeResizers=function(){this.resizerMap=void 0;var e=this.element.querySelector(".ag-resizer-wrapper");e&&this.element.removeChild(e),this.resizersAdded=!1},i.prototype.getResizerElement=function(e){return this.resizerMap[e].element},i.prototype.onResizeStart=function(e,s){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!s.match(/top/i),isRight:!!s.match(/right/i),isBottom:!!s.match(/bottom/i),isLeft:!!s.match(/left/i)},Dt(this.element,"ag-resizing"),Dt(this.resizerMap[s].element,"ag-active");var l=this.config;!l.popup&&!l.forcePopupParentAsOffsetParent&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)},i.prototype.getSiblings=function(){var s=this.element.parentElement;return s?Array.prototype.slice.call(s.children).filter(function(l){return!gs(l,"ag-hidden")}):null},i.prototype.getMinSizeOfSiblings=function(){for(var e=this.getSiblings()||[],s=0,l=0,c=0;c<e.length;c++){var h=e[c];if(h!==this.element){var w=this.minHeight||0,R=this.minWidth||0;if(h.style.flex&&"0 0 auto"!==h.style.flex){var T=window.getComputedStyle(h);T.minHeight&&(w=parseInt(T.minHeight,10)),T.minWidth&&(R=parseInt(T.minWidth,10))}else w=h.offsetHeight,R=h.offsetWidth;s+=w,l+=R}}return{height:s,width:l}},i.prototype.applySizeToSiblings=function(e){var s=null,l=this.getSiblings();if(l){for(var c=0;c<l.length;c++){var h=l[c];h!==s&&(e?h.style.height=h.offsetHeight+"px":h.style.width=h.offsetWidth+"px",h.style.flex="0 0 auto",h===this.element&&(s=l[c+1]))}s&&(s.style.removeProperty("height"),s.style.removeProperty("min-height"),s.style.removeProperty("max-height"),s.style.flex="1 1 auto")}},i.prototype.onResize=function(e){if(this.isResizing&&this.currentResizer){var s=this.config,l=s.popup,c=s.forcePopupParentAsOffsetParent,h=this.currentResizer,m=h.isTop,T=h.isLeft,L=h.isRight||T,U=h.isBottom||m,K=this.calculateMouseMovement({e:e,isLeft:T,isTop:m}),Q=K.movementX,oe=K.movementY,Te=this.position.x,He=this.position.y,Ve=0,Pe=0;if(L&&Q){var Ze=T?-1:1,Re=this.getWidth(),an=Re+Q*Ze,Gt=!1;T&&(Te+(Ve=Re-an)<=0||an<=this.minWidth)&&(Gt=!0,Ve=0),Gt||this.setWidth(an)}if(U&&oe){Ze=m?-1:1;var mn=this.getHeight(),Xn=mn+oe*Ze,er=!1;m?(He+(Pe=mn-Xn)<=0||Xn<=this.minHeight)&&(er=!0,Pe=0):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&mn<Xn&&this.getMinSizeOfSiblings().height+Xn>this.element.parentElement.offsetHeight&&(er=!0),er||this.setHeight(Xn)}this.updateDragStartPosition(e.clientX,e.clientY),((l||c)&&Ve||Pe)&&this.offsetElement(Te+Ve,He+Pe)}},i.prototype.onResizeEnd=function(e,s){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;var l={type:"resize",api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()};yi(this.element,"ag-resizing"),yi(this.resizerMap[s].element,"ag-active"),this.dispatchEvent(l)},i.prototype.refreshSize=function(){var e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))},i.prototype.onMoveStart=function(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,Dt(this.element,"ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)},i.prototype.onMove=function(e){if(this.isMoving){var h,s=this.position,l=s.x,c=s.y;this.config.calculateTopBuffer&&(h=this.config.calculateTopBuffer());var m=this.calculateMouseMovement({e:e,isTop:!0,anywhereWithin:!0,topBuffer:h});this.offsetElement(l+m.movementX,c+m.movementY),this.updateDragStartPosition(e.clientX,e.clientY)}},i.prototype.onMoveEnd=function(){this.isMoving=!1,this.boundaryEl=null,yi(this.element,"ag-moving")},i.prototype.setOffsetParent=function(){this.offsetParent=this.config.forcePopupParentAsOffsetParent?this.popupService.getPopupParent():this.element.offsetParent},i.prototype.findBoundaryElement=function(){for(var e=this.element;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element},i.prototype.clearResizeListeners=function(){for(;this.resizeListeners.length;){var e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}},i.prototype.destroy=function(){d.prototype.destroy.call(this),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.clearResizeListeners(),this.removeResizers()},Xp([H("popupService")],i.prototype,"popupService",void 0),Xp([H("dragService")],i.prototype,"dragService",void 0),i}(Ke),pm=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Fd=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Nd=function(d){function i(e){var s=d.call(this,i.getTemplate(e))||this;return s.closable=!0,s.config=e,s}return pm(i,d),i.getTemplate=function(e){var s=e&&e.cssIdentifier||"default";return'<div class="ag-panel ag-'+s+'-panel" tabindex="-1">\n            <div ref="eTitleBar" class="ag-panel-title-bar ag-'+s+'-panel-title-bar ag-unselectable">\n                <span ref="eTitle" class="ag-panel-title-bar-title ag-'+s+'-panel-title-bar-title"></span>\n                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-'+s+'-panel-title-bar-buttons"></div>\n            </div>\n            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-'+s+'-panel-content-wrapper"></div>\n        </div>'},i.prototype.postConstruct=function(){var e=this,s=this.config,l=s.component,c=s.closable,h=s.hideTitleBar,m=s.title,w=s.minWidth,R=void 0===w?250:w,T=s.width,L=s.minHeight,U=void 0===L?250:L,K=s.height,Q=s.centered,oe=s.popup,Te=s.x,He=s.y;this.positionableFeature=new Ld(this.getGui(),{minWidth:R,width:T,minHeight:U,height:K,centered:Q,x:Te,y:He,popup:oe,calculateTopBuffer:function(){return e.positionableFeature.getHeight()-e.getBodyHeight()}}),this.createManagedBean(this.positionableFeature);var Ve=this.getGui();l&&this.setBodyComponent(l),h?Dt(this.eTitleBar,"ag-hidden"):(m&&this.setTitle(m),this.setClosable(null!=c?c:this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",function(Pe){if(Ve.contains(Pe.relatedTarget)||Ve.contains(document.activeElement)||e.eTitleBarButtons.contains(Pe.target))Pe.preventDefault();else{var Ze=e.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");Ze&&Ze.focus()}}),(!oe||!this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")},i.prototype.renderComponent=function(){var e=this,s=this.getGui();s.focus(),this.close=function(){s.parentElement.removeChild(s),e.destroy()}},i.prototype.getHeight=function(){return this.positionableFeature.getHeight()},i.prototype.setHeight=function(e){this.positionableFeature.setHeight(e)},i.prototype.getWidth=function(){return this.positionableFeature.getWidth()},i.prototype.setWidth=function(e){this.positionableFeature.setWidth(e)},i.prototype.setClosable=function(e){if(e!==this.closable&&(this.closable=e),e){var s=this.closeButtonComp=new pn(i.CLOSE_BTN_TEMPLATE);this.getContext().createBean(s),(l=s.getGui()).appendChild(Dt(ui("close",this.gridOptionsWrapper),"ag-panel-title-bar-button-icon")),this.addTitleBarButton(s),s.addManagedListener(l,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){var l;(l=this.closeButtonComp.getGui()).parentElement.removeChild(l),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}},i.prototype.setBodyComponent=function(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())},i.prototype.addTitleBarButton=function(e,s){var l=this.eTitleBarButtons,c=l.children,h=c.length;null==s&&(s=h),s=Math.max(0,Math.min(s,h));var m=e.getGui();Dt(m,"ag-panel-title-bar-button"),0===s?l.insertAdjacentElement("afterbegin",m):s===h?l.insertAdjacentElement("beforeend",m):c[s-1].insertAdjacentElement("afterend",m),e.setParentComponent(this)},i.prototype.getBodyHeight=function(){return Al(this.eContentWrapper)},i.prototype.getBodyWidth=function(){return Wo(this.eContentWrapper)},i.prototype.setTitle=function(e){this.eTitle.innerText=e},i.prototype.onBtClose=function(){this.close()},i.prototype.destroy=function(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));var e=this.getGui();e&&e.offsetParent&&this.close(),d.prototype.destroy.call(this)},i.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',Fd([Be("eContentWrapper")],i.prototype,"eContentWrapper",void 0),Fd([Be("eTitleBar")],i.prototype,"eTitleBar",void 0),Fd([Be("eTitleBarButtons")],i.prototype,"eTitleBarButtons",void 0),Fd([Be("eTitle")],i.prototype,"eTitle",void 0),Fd([Qe],i.prototype,"postConstruct",null),i}(pn),hm=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),kd=function(){return kd=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},kd.apply(this,arguments)},vm=function(d){function i(e){var s=d.call(this,kd(kd({},e),{popup:!0}))||this;return s.isMaximizable=!1,s.isMaximized=!1,s.maximizeListeners=[],s.resizeListenerDestroy=null,s.lastPosition={x:0,y:0,width:0,height:0},s}return hm(i,d),i.prototype.postConstruct=function(){var e=this,s=this.getGui(),l=this.config,c=l.movable,h=l.resizable,m=l.maximizable;Dt(s,"ag-dialog"),d.prototype.postConstruct.call(this),this.addManagedListener(s,"focusin",function(w){s.contains(w.relatedTarget)||e.popupService.bringPopupToFront(s)}),c&&this.setMovable(c),m&&this.setMaximizable(m),h&&this.setResizable(h)},i.prototype.renderComponent=function(){var e=this.getGui(),s=this.config,l=s.alwaysOnTop,c=s.modal,h=s.title,m=this.gridOptionsWrapper.getLocaleTextFunc(),w=this.popupService.addPopup({modal:c,eChild:e,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop:l,ariaLabel:h||m("ariaLabelDialog","Dialog")});w&&(this.close=w.hideFunc)},i.prototype.toggleMaximize=function(){var e=this.positionableFeature.getPosition();if(this.isMaximized){var s=this.lastPosition,l=s.x,c=s.y,m=s.height;this.setWidth(s.width),this.setHeight(m),this.positionableFeature.offsetElement(l,c)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},i.prototype.refreshMaximizeIcon=function(){$n(this.maximizeIcon,!this.isMaximized),$n(this.minimizeIcon,this.isMaximized)},i.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(function(e){return e()}),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},i.prototype.destroy=function(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),d.prototype.destroy.call(this)},i.prototype.setResizable=function(e){this.positionableFeature.setResizable(e)},i.prototype.setMovable=function(e){this.positionableFeature.setMovable(e,this.eTitleBar)},i.prototype.setMaximizable=function(e){var s=this;if(!e)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));var l=this.eTitleBar;if(l&&e!==this.isMaximizable){var c=this.maximizeButtonComp=this.createBean(new pn('<div class="ag-dialog-button"></span>')),h=c.getGui();h.appendChild(this.maximizeIcon=ui("maximize",this.gridOptionsWrapper)),Dt(this.maximizeIcon,"ag-panel-title-bar-button-icon"),h.appendChild(this.minimizeIcon=ui("minimize",this.gridOptionsWrapper)),Dt(this.minimizeIcon,"ag-panel-title-bar-button-icon"),Dt(this.minimizeIcon,"ag-hidden"),c.addManagedListener(h,"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(c,0),this.maximizeListeners.push(this.addManagedListener(l,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",function(){s.isMaximized=!1,s.refreshMaximizeIcon()})}},function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([H("popupService")],i.prototype,"popupService",void 0),i}(Nd),gm=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Vw=function(d){function i(e,s,l){return void 0===s&&(s="ag-text-field"),void 0===l&&(l="text"),d.call(this,e,s,l)||this}return gm(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this),this.config.allowedCharPattern&&this.preventDisallowedCharacters()},i.prototype.setValue=function(e,s){var l=d.prototype.setValue.call(this,e,s);return this.eInput.value!==e&&(this.eInput.value=Fe(e)?e:""),l},i.prototype.preventDisallowedCharacters=function(){var e=new RegExp("["+this.config.allowedCharPattern+"]");this.addManagedListener(this.eInput,"keypress",function(c){c.key&&!e.test(c.key)&&c.preventDefault()}),this.addManagedListener(this.eInput,"paste",function(l){$t(l.clipboardData.getData("text"),function(h){return!e.test(h)})&&l.preventDefault()})},i}(Ga),nR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),mm=function(d){function i(e){return d.call(this,e,"ag-text-area",null,"textarea")||this}return nR(i,d),i.prototype.setValue=function(e,s){var l=d.prototype.setValue.call(this,e,s);return this.eInput.value=e,l},i.prototype.setCols=function(e){return this.eInput.cols=e,this},i.prototype.setRows=function(e){return this.eInput.rows=e,this},i}(Ga),Ww=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Gd=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ym=function(d){function i(e){var s=d.call(this,e,i.TEMPLATE)||this;return s.labelAlignment="top",s}return Ww(i,d),i.prototype.init=function(){Dt(this.eSlider.getGui(),"ag-slider-field")},i.prototype.onValueChange=function(e){var s=this,l=ca.EVENT_CHANGED;return this.addManagedListener(this.eText,l,function(){var c=parseFloat(s.eText.getValue());s.eSlider.setValue(c.toString(),!0),e(c||0)}),this.addManagedListener(this.eSlider,l,function(){var c=s.eSlider.getValue();s.eText.setValue(c,!0),e(parseFloat(c))}),this},i.prototype.setSliderWidth=function(e){return this.eSlider.setWidth(e),this},i.prototype.setTextFieldWidth=function(e){return this.eText.setWidth(e),this},i.prototype.setMinValue=function(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this},i.prototype.setMaxValue=function(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this},i.prototype.getValue=function(){return this.eText.getValue()},i.prototype.setValue=function(e){return this.getValue()===e||(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),this.dispatchEvent({type:ca.EVENT_CHANGED})),this},i.prototype.setStep=function(e){return this.eSlider.setStep(e),this.eText.setStep(e),this},i.TEMPLATE='<div class="ag-slider">\n            <label ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range ref="eSlider"></ag-input-range>\n                <ag-input-number-field ref="eText"></ag-input-number-field>\n            </div>\n        </div>',Gd([Be("eLabel")],i.prototype,"eLabel",void 0),Gd([Be("eSlider")],i.prototype,"eSlider",void 0),Gd([Be("eText")],i.prototype,"eText",void 0),Gd([Qe],i.prototype,"init",null),i}(la),Uw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),bi=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Jp=function(d){function i(e){var s=d.call(this,i.TEMPLATE)||this;return s.H=1,s.S=1,s.B=1,s.A=1,s.isSpectrumDragging=!1,s.isSpectrumHueDragging=!1,s.isSpectrumAlphaDragging=!1,s.colorChanged=!1,s.picker=e.picker,s}return Uw(i,d),i.prototype.postConstruct=function(){var e=this.getGui();this.initRecentColors(),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(e,"mousemove",this.onSpectrumDraggerMove.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(e,"mousemove",this.onSpectrumHueMove.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addManagedListener(e,"mousemove",this.onSpectrumAlphaMove.bind(this)),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this))},i.prototype.refreshSpectrumRect=function(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()},i.prototype.refreshHueRect=function(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()},i.prototype.refreshAlphaRect=function(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()},i.prototype.onSpectrumDraggerDown=function(e){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)},i.prototype.onSpectrumDraggerMove=function(e){this.isSpectrumDragging&&this.moveDragger(e)},i.prototype.onSpectrumHueDown=function(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)},i.prototype.onSpectrumHueMove=function(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)},i.prototype.onSpectrumAlphaDown=function(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)},i.prototype.onSpectrumAlphaMove=function(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)},i.prototype.onMouseUp=function(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1},i.prototype.moveDragger=function(e){var s=this.spectrumValRect;if(s){var l=e.clientX-s.left,c=e.clientY-s.top;l=Math.max(l,0),l=Math.min(l,s.width),c=Math.max(c,0),c=Math.min(c,s.height),this.setSpectrumValue(l/s.width,1-c/s.height)}},i.prototype.moveHueSlider=function(e){var s=this.spectrumHueRect;if(s){var l=this.spectrumHueSlider,c=l.getBoundingClientRect(),h=e.clientX-s.left;h=Math.max(h,0),h=Math.min(h,s.width),this.H=1-h/s.width,l.style.left=h+c.width/2+"px",this.update()}},i.prototype.moveAlphaSlider=function(e){var s=this.spectrumAlphaRect;if(s){var l=this.spectrumAlphaSlider,c=l.getBoundingClientRect(),h=e.clientX-s.left;h=Math.max(h,0),h=Math.min(h,s.width),this.A=h/s.width,l.style.left=h+c.width/2+"px",this.update()}},i.prototype.update=function(){var e=jc.fromHSB(360*this.H,this.S,this.B,this.A),s=jc.fromHSB(360*this.H,1,1),l=e.toRgbaString(),c=this.picker;jc.fromString(c.getValue()).toRgbaString()!==l&&(this.colorChanged=!0),c.setValue(l),this.spectrumColor.style.backgroundColor=s.toRgbaString(),this.spectrumDragger.style.backgroundColor=l},i.prototype.setSpectrumValue=function(e,s){var l=this.spectrumValRect||this.refreshSpectrumRect();if(l){var c=this.spectrumDragger,h=c.getBoundingClientRect();e=Math.max(0,e),e=Math.min(1,e),s=Math.max(0,s),s=Math.min(1,s),this.S=e,this.B=s,c.style.left=e*l.width-h.width/2+"px",c.style.top=(1-s)*l.height-h.height/2+"px",this.update()}},i.prototype.initRecentColors=function(){var s=i.recentColors.map(function(l,c){return'<div class="ag-recent-color" id='+c+' style="background-color: '+l+'; width: 15px; height: 15px;" recent-color="'+l+'"></div>'});this.recentColors.innerHTML=s.join("")},i.prototype.setValue=function(e){var s=jc.fromString(e),l=s.toHSB(),c=l[0],h=l[1],m=l[2];this.H=(isNaN(c)?0:c)/360,this.A=s.a;var w=this.spectrumHueRect||this.refreshHueRect(),R=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=(this.H-1)*-w.width+"px",this.spectrumAlphaSlider.style.left=this.A*R.width+"px",this.setSpectrumValue(h,m)},i.prototype.onRecentColorClick=function(e){var s=e.target;if(Fe(s.id)){var l=parseInt(s.id,10);this.setValue(i.recentColors[l]),this.destroy()}},i.prototype.addRecentColor=function(){var s=jc.fromHSB(360*this.H,this.S,this.B,this.A).toRgbaString(),l=i.recentColors;!this.colorChanged||l[0]===s||(l=l.filter(function(c){return c!=s}),(l=[s].concat(l)).length>i.maxRecentColors&&(l=l.slice(0,i.maxRecentColors)),i.recentColors=l)},i.prototype.destroy=function(){this.addRecentColor(),d.prototype.destroy.call(this)},i.maxRecentColors=8,i.recentColors=[],i.TEMPLATE='<div class="ag-color-panel">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>',bi([Be("spectrumColor")],i.prototype,"spectrumColor",void 0),bi([Be("spectrumVal")],i.prototype,"spectrumVal",void 0),bi([Be("spectrumDragger")],i.prototype,"spectrumDragger",void 0),bi([Be("spectrumHue")],i.prototype,"spectrumHue",void 0),bi([Be("spectrumHueSlider")],i.prototype,"spectrumHueSlider",void 0),bi([Be("spectrumAlpha")],i.prototype,"spectrumAlpha",void 0),bi([Be("spectrumAlphaSlider")],i.prototype,"spectrumAlphaSlider",void 0),bi([Be("recentColors")],i.prototype,"recentColors",void 0),bi([Qe],i.prototype,"postConstruct",null),i}(pn),rR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),zw=function(d){function i(e){var s=d.call(this,e,"ag-color-picker","colorPicker")||this;return e&&e.color&&(s.value=e.color),s}return rR(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this),this.value&&this.setValue(this.value)},i.prototype.showPicker=function(){var e=this,s=this.getGui().getBoundingClientRect(),l=this.createBean(new vm({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:s.right-190,y:s.top-250}));this.isPickerDisplayed=!0,Dt(l.getGui(),"ag-color-dialog");var c=this.createBean(new Jp({picker:this}));return c.addDestroyFunc(function(){l.isAlive()&&e.destroyBean(l)}),l.setParentComponent(this),l.setBodyComponent(c),c.setValue(this.getValue()),l.addDestroyFunc(function(){e.isDestroyingPicker?e.isDestroyingPicker=!1:(e.isDestroyingPicker=!0,c.isAlive()&&e.destroyBean(c)),e.isAlive()&&e.getFocusableElement().focus(),e.isPickerDisplayed=!1}),l},i.prototype.setValue=function(e){return this.value===e?this:(this.eDisplayField.style.backgroundColor=e,d.prototype.setValue.call(this,e))},i.prototype.getValue=function(){return this.value},i}(Qf),qM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Zp=function(d){function i(e){return d.call(this,e,"ag-number-field","number")||this}return qM(i,d),i.prototype.postConstruct=function(){var e=this;d.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"blur",function(){var s=parseFloat(e.eInput.value),l=isNaN(s)?"":e.normalizeValue(s.toString());e.value!==l&&e.setValue(l)})},i.prototype.normalizeValue=function(e){if(""===e)return"";this.precision&&(e=this.adjustPrecision(e));var s=parseFloat(e);return null!=this.min&&s<this.min?e=this.min.toString():null!=this.max&&s>this.max&&(e=this.max.toString()),e},i.prototype.adjustPrecision=function(e){if(this.precision){var s=parseFloat(e).toFixed(this.precision);e=parseFloat(s).toString()}return e},i.prototype.setMin=function(e){return this.min===e||(this.min=e,_s(this.eInput,"min",e)),this},i.prototype.setMax=function(e){return this.max===e||(this.max=e,_s(this.eInput,"max",e)),this},i.prototype.setPrecision=function(e){return this.precision=e,this},i.prototype.setStep=function(e){return this.step===e||(this.step=e,_s(this.eInput,"step",e)),this},i.prototype.setValue=function(e,s){return(e=this.adjustPrecision(e))!=this.normalizeValue(e)?this:d.prototype.setValue.call(this,e,s)},i}(Vw),jw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Qp=function(d){function i(e){return d.call(this,e,"ag-range-field","range")||this}return jw(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this);var e=this.config,s=e.min,l=e.max,c=e.step;null!=s&&this.setMinValue(s),null!=l&&this.setMaxValue(l),this.setStep(c||1)},i.prototype.addInputListeners=function(){var e=this,s=qi();this.addManagedListener(this.eInput,s?"change":"input",function(c){e.setValue(c.target.value)})},i.prototype.setMinValue=function(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this},i.prototype.setMaxValue=function(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this},i.prototype.setStep=function(e){return this.eInput.setAttribute("step",e.toString()),this},i.prototype.setValue=function(e,s){null!=this.min&&(e=Math.max(parseFloat(e),this.min).toString()),null!=this.max&&(e=Math.min(parseFloat(e),this.max).toString());var l=d.prototype.setValue.call(this,e,s);return this.eInput.value=e,l},i}(Ga),Bd=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Hd=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},eh=function(d){function i(e){var s=d.call(this,e,i.TEMPLATE)||this;return s.radius=0,s.offsetX=0,s.offsetY=0,s}return Bd(i,d),i.prototype.postConstruct=function(){var e=this;d.prototype.postConstruct.call(this),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:function(l){e.parentCircleRect=e.eParentCircle.getBoundingClientRect()},onDragging:function(l){return e.calculateAngleDrag(l)},onDragStop:function(){}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(""+this.degrees).onValueChange(function(s){(null==s||""===s)&&(s="0"),s=e.eAngleValue.normalizeValue(s);var l=parseFloat(s);l>180&&(l-=360),e.setValue(l)}),this.updateNumberInput(),Fe(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,ca.EVENT_CHANGED,function(){e.eAngleValue.getInputElement().contains(document.activeElement)||e.updateNumberInput()})},i.prototype.updateNumberInput=function(){var e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())},i.prototype.positionChildCircle=function(e){var s=this.parentCircleRect||{width:24,height:24},l=this.eChildCircle,h=s.height/2;l.style.left=s.width/2+8*Math.cos(e)+"px",l.style.top=h+8*Math.sin(e)+"px"},i.prototype.calculatePolar=function(){var e=this.offsetX,s=this.offsetY,l=Math.atan2(s,e);this.degrees=this.toDegrees(l),this.radius=Math.sqrt(e*e+s*s),this.positionChildCircle(l)},i.prototype.calculateCartesian=function(){var e=this.toRadians(this.getValue()),s=this.getRadius();this.setOffsetX(Math.cos(e)*s).setOffsetY(Math.sin(e)*s)},i.prototype.setOffsetX=function(e){return this.offsetX!==e&&(this.offsetX=e,this.calculatePolar()),this},i.prototype.setOffsetY=function(e){return this.offsetY!==e&&(this.offsetY=e,this.calculatePolar()),this},i.prototype.calculateAngleDrag=function(e){var s=this.parentCircleRect,T=Math.atan2(e.clientY-s.top-s.height/2,e.clientX-s.left-s.width/2);this.setValue(T,!0)},i.prototype.toDegrees=function(e){return e/Math.PI*180},i.prototype.toRadians=function(e){return e/180*Math.PI},i.prototype.normalizeNegativeValue=function(e){return e<0?360+e:e},i.prototype.normalizeAngle180=function(e){return(e%=2*Math.PI)<-Math.PI?e+=2*Math.PI:e>=Math.PI&&(e-=2*Math.PI),e},i.prototype.getRadius=function(){return this.radius},i.prototype.setRadius=function(e){return this.radius===e||(this.radius=e,this.calculateCartesian()),this},i.prototype.onValueChange=function(e){var s=this;return this.addManagedListener(this,ca.EVENT_CHANGED,function(){e(s.degrees)}),this},i.prototype.getValue=function(e){return e?this.toRadians(this.degrees):this.degrees},i.prototype.setValue=function(e,s){var l;return l=s?e:this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(l),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(l),this.dispatchEvent({type:ca.EVENT_CHANGED})),this},i.prototype.setWidth=function(e){return Ia(this.getGui(),e),this},i.prototype.destroy=function(){this.dragService.removeDragSource(this.dragListener),d.prototype.destroy.call(this)},i.TEMPLATE='<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>',Hd([Be("eLabel")],i.prototype,"eLabel",void 0),Hd([Be("eParentCircle")],i.prototype,"eParentCircle",void 0),Hd([Be("eChildCircle")],i.prototype,"eChildCircle",void 0),Hd([Be("eAngleValue")],i.prototype,"eAngleValue",void 0),Hd([H("dragService")],i.prototype,"dragService",void 0),i}(la),qw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),_m=function(d){function i(e){return d.call(this,e,"ag-toggle-button")||this}return qw(i,d),i.prototype.setValue=function(e,s){return d.prototype.setValue.call(this,e,s),Ft(this.getGui(),"ag-selected",this.getValue()),this},i}(qu),Kw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),th=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},nh=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Kw(i,d),i.prototype.getFirstRow=function(){var s,e=0;return this.pinnedRowModel.getPinnedTopRowCount()?s=fe.PINNED_TOP:this.rowModel.getRowCount()?(s=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(s=fe.PINNED_BOTTOM),void 0===s?null:{rowIndex:e,rowPinned:s}},i.prototype.getLastRow=function(){var e,s=null,l=this.pinnedRowModel.getPinnedBottomRowCount(),c=this.pinnedRowModel.getPinnedTopRowCount();return l?(s=fe.PINNED_BOTTOM,e=l-1):this.rowModel.getRowCount()?(s=null,e=this.paginationProxy.getPageLastRow()):c&&(s=fe.PINNED_TOP,e=c-1),void 0===e?null:{rowIndex:e,rowPinned:s}},i.prototype.getRowNode=function(e){switch(e.rowPinned){case fe.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case fe.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},i.prototype.sameRow=function(e,s){return!e&&!s||!(e&&!s||!e&&s)&&e.rowIndex===s.rowIndex&&e.rowPinned==s.rowPinned},i.prototype.before=function(e,s){switch(e.rowPinned){case fe.PINNED_TOP:if(s.rowPinned!==fe.PINNED_TOP)return!0;break;case fe.PINNED_BOTTOM:if(s.rowPinned!==fe.PINNED_BOTTOM)return!1;break;default:if(Fe(s.rowPinned))return s.rowPinned!==fe.PINNED_TOP}return e.rowIndex<s.rowIndex},th([H("rowModel")],i.prototype,"rowModel",void 0),th([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),th([H("paginationProxy")],i.prototype,"paginationProxy",void 0),th([vt("rowPositionUtils")],i)}(Ke),iR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Cm=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return iR(i,d),i.prototype.createId=function(e){return this.createIdFromValues(e.rowIndex,e.column,e.rowPinned)},i.prototype.createIdFromValues=function(e,s,l){return e+"."+(null==l?"null":l)+"."+s.getId()},i.prototype.equals=function(e,s){return e.column===s.column&&e.rowPinned===s.rowPinned&&e.rowIndex===s.rowIndex},i=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([vt("cellPositionUtils")],i),i}(Ke),uc=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),lc=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Yw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return uc(i,d),i.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsWrapper.getPinnedTopRowData()),this.setPinnedBottomRowData(this.gridOptionsWrapper.getPinnedBottomRowData())},i.prototype.isEmpty=function(e){return ni(e===fe.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows)},i.prototype.isRowsToRender=function(e){return!this.isEmpty(e)},i.prototype.getRowAtPixel=function(e,s){var l=s===fe.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows;if(ni(l))return 0;for(var c=0;c<l.length;c++){var h=l[c];if(h.rowTop+h.rowHeight-1>=e)return c}return l.length-1},i.prototype.setPinnedTopRowData=function(e){this.pinnedTopRows=this.createNodesFromData(e,!0),this.eventService.dispatchEvent({type:$.EVENT_PINNED_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.setPinnedBottomRowData=function(e){this.pinnedBottomRows=this.createNodesFromData(e,!1),this.eventService.dispatchEvent({type:$.EVENT_PINNED_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.createNodesFromData=function(e,s){var l=this,c=[];if(e){var h=0;e.forEach(function(m,w){var R=new ln(l.beans);R.data=m,R.id=(s?ln.ID_PREFIX_TOP_PINNED:ln.ID_PREFIX_BOTTOM_PINNED)+w,R.rowPinned=s?fe.PINNED_TOP:fe.PINNED_BOTTOM,R.setRowTop(h),R.setRowHeight(l.gridOptionsWrapper.getRowHeightForNode(R).height),R.setRowIndex(w),h+=R.rowHeight,c.push(R)})}return c},i.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},i.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},i.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},i.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},i.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},i.prototype.getPinnedTopRow=function(e){return this.pinnedTopRows[e]},i.prototype.getPinnedBottomRow=function(e){return this.pinnedBottomRows[e]},i.prototype.forEachPinnedTopRow=function(e){ni(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)},i.prototype.forEachPinnedBottomRow=function(e){ni(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)},i.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},i.prototype.getTotalHeight=function(e){if(!e||0===e.length)return 0;var s=zn(e);return s.rowTop+s.rowHeight},lc([H("columnApi")],i.prototype,"columnApi",void 0),lc([H("gridApi")],i.prototype,"gridApi",void 0),lc([H("beans")],i.prototype,"beans",void 0),lc([Qe],i.prototype,"init",null),lc([vt("pinnedRowModel")],i)}(Ke),aR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ds=function(i){this.cellValueChanges=i},wm=function(d){function i(e,s,l){var c=d.call(this,e)||this;return c.initialRange=s,c.finalRange=l,c}return aR(i,d),i}(Ds),$w=function(){function d(i){this.actionStack=[],this.maxStackSize=i||d.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}return d.prototype.pop=function(){return this.actionStack.pop()},d.prototype.push=function(i){!(i.cellValueChanges&&i.cellValueChanges.length>0)||(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(i))},d.prototype.clear=function(){this.actionStack=[]},d.prototype.getCurrentStackSize=function(){return this.actionStack.length},d.DEFAULT_STACK_SIZE=10,d}(),sR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),fu=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ui=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.cellValueChanges=[],e.activeCellEdit=null,e.activeRowEdit=null,e.isPasting=!1,e.isFilling=!1,e.onCellValueChanged=function(s){var l={column:s.column,rowIndex:s.rowIndex,rowPinned:s.rowPinned},c=null!==e.activeCellEdit&&e.cellPositionUtils.equals(e.activeCellEdit,l),h=null!==e.activeRowEdit&&e.rowPositionUtils.sameRow(e.activeRowEdit,l);if(c||h||e.isPasting||e.isFilling){var L=s.oldValue,U=s.value,K={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:s.column.getColId(),newValue:U,oldValue:L};e.cellValueChanges.push(K)}},e.clearStacks=function(){e.undoStack.clear(),e.redoStack.clear()},e}return sR(i,d),i.prototype.init=function(){if(this.gridOptionsWrapper.isUndoRedoCellEditing()){var e=this.gridOptionsWrapper.getUndoRedoCellEditingLimit();e<=0||(this.undoStack=new $w(e),this.redoStack=new $w(e),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addManagedListener(this.eventService,$.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,$.EVENT_MODEL_UPDATED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_ROW_DRAG_END,this.clearStacks))}},i.prototype.getCurrentUndoStackSize=function(){return this.undoStack?this.undoStack.getCurrentStackSize():0},i.prototype.getCurrentRedoStackSize=function(){return this.redoStack?this.redoStack.getCurrentStackSize():0},i.prototype.undo=function(){if(this.undoStack){var e=this.undoStack.pop();!e||!e.cellValueChanges||(this.processAction(e,function(s){return s.oldValue}),e instanceof wm?this.processRangeAndCellFocus(e.cellValueChanges,e.initialRange):this.processRangeAndCellFocus(e.cellValueChanges),this.redoStack.push(e))}},i.prototype.redo=function(){if(this.redoStack){var e=this.redoStack.pop();!e||!e.cellValueChanges||(this.processAction(e,function(s){return s.newValue}),e instanceof wm?this.processRangeAndCellFocus(e.cellValueChanges,e.finalRange):this.processRangeAndCellFocus(e.cellValueChanges),this.undoStack.push(e))}},i.prototype.processAction=function(e,s){var l=this;e.cellValueChanges.forEach(function(c){var w=c.columnId,T=l.getRowNode({rowIndex:c.rowIndex,rowPinned:c.rowPinned});!T.displayed||T.setDataValue(w,s(c))})},i.prototype.processRangeAndCellFocus=function(e,s){var l;if(s){var c=s.startRow,h=s.endRow;return l={rowPinned:c.rowPinned,rowIndex:c.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(l),void this.gridApi.addCellRange({rowStartIndex:c.rowIndex,rowStartPinned:c.rowPinned,rowEndIndex:h.rowIndex,rowEndPinned:h.rowPinned,columnStart:s.startColumn,columns:s.columns})}var w=e[0],U=this.getRowNode({rowIndex:w.rowIndex,rowPinned:w.rowPinned});this.setLastFocusedCell(l={rowPinned:w.rowPinned,rowIndex:U.rowIndex,columnId:w.columnId})},i.prototype.setLastFocusedCell=function(e){var s=e.rowIndex,l=e.columnId,c=e.rowPinned;this.gridApi.ensureIndexVisible(s),this.gridApi.ensureColumnVisible(l),qt.isRegistered(Y.GXE.RangeSelectionModule)&&this.gridApi.clearRangeSelection(),this.focusService.setFocusedCell(s,l,c,!0)},i.prototype.addRowEditingListeners=function(){var e=this;this.addManagedListener(this.eventService,$.EVENT_ROW_EDITING_STARTED,function(s){e.activeRowEdit={rowIndex:s.rowIndex,rowPinned:s.rowPinned}}),this.addManagedListener(this.eventService,$.EVENT_ROW_EDITING_STOPPED,function(){var s=new Ds(e.cellValueChanges);e.pushActionsToUndoStack(s),e.activeRowEdit=null})},i.prototype.addCellEditingListeners=function(){var e=this;this.addManagedListener(this.eventService,$.EVENT_CELL_EDITING_STARTED,function(s){e.activeCellEdit={column:s.column,rowIndex:s.rowIndex,rowPinned:s.rowPinned}}),this.addManagedListener(this.eventService,$.EVENT_CELL_EDITING_STOPPED,function(){if(e.activeCellEdit=null,!e.activeRowEdit&&!e.isPasting&&!e.isFilling){var l=new Ds(e.cellValueChanges);e.pushActionsToUndoStack(l)}})},i.prototype.addPasteListeners=function(){var e=this;this.addManagedListener(this.eventService,$.EVENT_PASTE_START,function(){e.isPasting=!0}),this.addManagedListener(this.eventService,$.EVENT_PASTE_END,function(){var s=new Ds(e.cellValueChanges);e.pushActionsToUndoStack(s),e.isPasting=!1})},i.prototype.addFillListeners=function(){var e=this;this.addManagedListener(this.eventService,$.EVENT_FILL_START,function(){e.isFilling=!0}),this.addManagedListener(this.eventService,$.EVENT_FILL_END,function(s){var l=new wm(e.cellValueChanges,s.initialRange,s.finalRange);e.pushActionsToUndoStack(l),e.isFilling=!1})},i.prototype.pushActionsToUndoStack=function(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()},i.prototype.getRowNode=function(e){switch(e.rowPinned){case fe.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case fe.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},fu([H("focusService")],i.prototype,"focusService",void 0),fu([H("gridApi")],i.prototype,"gridApi",void 0),fu([H("rowModel")],i.prototype,"rowModel",void 0),fu([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),fu([H("cellPositionUtils")],i.prototype,"cellPositionUtils",void 0),fu([H("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),fu([Qe],i.prototype,"init",null),fu([vt("undoRedoService")],i)}(Ke),uR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Sm=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Xw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return uR(i,d),i.prototype.findHeader=function(e,s){var l;if(l=e.column instanceof ai?this.columnModel["getDisplayedGroup"+s](e.column):this.columnModel["getDisplayedCol"+s](e.column))return{column:l,headerRowIndex:e.headerRowIndex}},i.prototype.findColAtEdgeForHeaderRow=function(e,s){var l=this.columnModel.getAllDisplayedColumns(),c=l["start"===s?0:l.length-1];if(c){var m=this.ctrlsService.getHeaderRowContainerCtrl(c.getPinned()).getRowType(e);return console.log("level="+e+" type = "+m),m==Y.A6C.COLUMN_GROUP?{headerRowIndex:e,column:this.columnModel.getColumnGroupAtLevel(c,e)}:{headerRowIndex:null==m?-1:e,column:c}}},Sm([H("columnModel")],i.prototype,"columnModel",void 0),Sm([H("ctrlsService")],i.prototype,"ctrlsService",void 0),Sm([vt("headerPositionUtils")],i)}(Ke),lR=function(){function d(){}return d.prototype.buildColumnDefs=function(i,e,s){var l=this,c=[],h={};return i.forEach(function(m){for(var R=!0,T=l.createDefFromColumn(m,e,s),L=m.getOriginalParent();L;){var U=null;if(L.isPadding())L=L.getOriginalParent();else{var K=h[L.getGroupId()];if(K){K.children.push(T),R=!1;break}(U=l.createDefFromGroup(L))&&(U.children=[T],h[U.groupId]=U,T=U,L=L.getOriginalParent())}}R&&c.push(T)}),c},d.prototype.createDefFromGroup=function(i){var e=Df(i.getColGroupDef(),["children"]);return e&&(e.groupId=i.getGroupId()),e},d.prototype.createDefFromColumn=function(i,e,s){var l=Df(i.getColDef());return l.colId=i.getColId(),l.width=i.getActualWidth(),l.rowGroup=i.isRowGroupActive(),l.rowGroupIndex=i.isRowGroupActive()?e.indexOf(i):null,l.pivot=i.isPivotActive(),l.pivotIndex=i.isPivotActive()?s.indexOf(i):null,l.aggFunc=i.isValueActive()?i.getAggFunc():null,l.hide=!i.isVisible()||void 0,l.pinned=i.isPinned()?i.getPinned():null,l.sort=i.getSort()?i.getSort():null,l.sortIndex=null!=i.getSortIndex()?i.getSortIndex():null,l},d=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([vt("columnDefFactory")],d),d}(),Zw=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},cR=function(){function d(){}return d.prototype.getInitialRowClasses=function(i){var e=[];return Fe(i.extraCssClass)&&e.push(i.extraCssClass),e.push("ag-row"),e.push(i.rowFocused?"ag-row-focus":"ag-row-no-focus"),i.fadeRowIn&&e.push("ag-opacity-zero"),e.push(i.rowIsEven?"ag-row-even":"ag-row-odd"),i.rowNode.isRowPinned()&&e.push("ag-row-pinned"),i.rowNode.isSelected()&&e.push("ag-row-selected"),i.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+i.rowLevel),i.rowNode.stub&&e.push("ag-row-loading"),i.fullWidthRow&&e.push("ag-full-width-row"),i.expandable&&(e.push("ag-row-group"),e.push(i.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),i.rowNode.dragging&&e.push("ag-row-dragging"),ht(e,this.processClassesFromGridOptions(i.rowNode,i.scope)),ht(e,this.preProcessRowClassRules(i.rowNode,i.scope)),e.push(i.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),i.firstRowOnPage&&e.push("ag-row-first"),i.lastRowOnPage&&e.push("ag-row-last"),i.fullWidthRow&&(i.pinned===fe.PINNED_LEFT&&e.push("ag-cell-last-left-pinned"),i.pinned===fe.PINNED_RIGHT&&e.push("ag-cell-first-right-pinned")),e},d.prototype.processClassesFromGridOptions=function(i,e){var s=[],l=function(T){"string"==typeof T?s.push(T):Array.isArray(T)&&T.forEach(function(L){return s.push(L)})},c=this.gridOptionsWrapper.getRowClass();if(c){if("function"==typeof c)return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];l(c)}var h=this.gridOptionsWrapper.getRowClassFunc();return h&&l(h({data:i.data,node:i,rowIndex:i.rowIndex,$scope:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()})),s},d.prototype.preProcessRowClassRules=function(i,e){var s=[];return this.processRowClassRules(i,e,function(l){s.push(l)},function(l){}),s},d.prototype.processRowClassRules=function(i,e,s,l){var c={data:i.data,node:i,rowIndex:i.rowIndex,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),$scope:e,context:this.gridOptionsWrapper.getContext()};this.stylingService.processClassRules(this.gridOptionsWrapper.rowClassRules(),c,s,l)},d.prototype.calculateRowLevel=function(i){return i.group?i.level:i.parent?i.parent.level+1:0},Zw([H("stylingService")],d.prototype,"stylingService",void 0),Zw([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),Zw([vt("rowCssClassCalculator")],d)}(),dR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Em=function(d){function i(e){var s=d.call(this)||this;return s.state=i.STATE_WAITING_TO_LOAD,s.version=0,s.id=e,s}return dR(i,d),i.prototype.getId=function(){return this.id},i.prototype.load=function(){this.state=i.STATE_LOADING,this.loadFromDatasource()},i.prototype.getVersion=function(){return this.version},i.prototype.setStateWaitingToLoad=function(){this.version++,this.state=i.STATE_WAITING_TO_LOAD},i.prototype.getState=function(){return this.state},i.prototype.pageLoadFailed=function(e){this.isRequestMostRecentAndLive(e)&&(this.state=i.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)},i.prototype.success=function(e,s){this.successCommon(e,s)},i.prototype.pageLoaded=function(e,s,l){this.successCommon(e,{rowData:s,rowCount:l})},i.prototype.isRequestMostRecentAndLive=function(e){var s=e===this.version,l=this.isAlive();return s&&l},i.prototype.successCommon=function(e,s){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state=i.STATE_LOADED,this.processServerResult(s))},i.prototype.dispatchLoadCompleted=function(e){void 0===e&&(e=!0),this.dispatchEvent({type:i.EVENT_LOAD_COMPLETE,success:e,block:this})},i.EVENT_LOAD_COMPLETE="loadComplete",i.STATE_WAITING_TO_LOAD="needsLoading",i.STATE_LOADING="loading",i.STATE_LOADED="loaded",i.STATE_FAILED="failed",i}(Ke),Qw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),e0=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},fR=function(d,i){return function(e,s){i(e,s,d)}},t0=function(d){function i(){var s=null!==d&&d.apply(this,arguments)||this;return s.activeBlockLoadsCount=0,s.blocks=[],s.active=!0,s}var e;return Qw(i,d),e=i,i.prototype.postConstruct=function(){this.maxConcurrentRequests=this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();var s=this.gridOptionsWrapper.getBlockLoadDebounceMillis();s&&s>0&&(this.checkBlockToLoadDebounce=yt.debounce(this.performCheckBlocksToLoad.bind(this),s))},i.prototype.setBeans=function(s){this.logger=s.create("RowNodeBlockLoader")},i.prototype.addBlock=function(s){this.blocks.push(s),s.addEventListener(Em.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()},i.prototype.removeBlock=function(s){yt.removeFromArray(this.blocks,s)},i.prototype.destroy=function(){d.prototype.destroy.call(this),this.active=!1},i.prototype.loadComplete=function(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),0==this.activeBlockLoadsCount&&this.dispatchEvent({type:e.BLOCK_LOADER_FINISHED_EVENT})},i.prototype.checkBlockToLoad=function(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()},i.prototype.performCheckBlocksToLoad=function(){if(this.active){if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void this.logger.log("checkBlockToLoad: max loads exceeded");var s=null;this.blocks.forEach(function(l){l.getState()===Em.STATE_WAITING_TO_LOAD&&(s=l)}),s&&(s.load(),this.activeBlockLoadsCount++,this.printCacheStatus())}},i.prototype.getBlockState=function(){var s={};return this.blocks.forEach(function(l){var c=l.getBlockStateJson();s[c.id]=c.state}),s},i.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+", blocks = "+JSON.stringify(this.getBlockState()))},i.prototype.isLoading=function(){return this.activeBlockLoadsCount>0},i.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",e0([Qe],i.prototype,"postConstruct",null),e0([fR(0,Ni("loggerFactory"))],i.prototype,"setBeans",null),e=e0([vt("rowNodeBlockLoader")],i)}(Ke),rh=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},pR=function(){function d(){}return d.prototype.doFullSort=function(i,e){var l=i.map(function(h,m){return{currentPos:m,rowNode:h}});return l.sort(this.compareRowNodes.bind(this,e)),l.map(function(c){return c.rowNode})},d.prototype.compareRowNodes=function(i,e,s){for(var l=e.rowNode,c=s.rowNode,h=0,m=i.length;h<m;h++){var U,w=i[h],R=w.sort===fe.SORT_DESC,T=this.getValue(l,w.column),L=this.getValue(c,w.column),K=this.getComparator(w,l);if(U=K?K(T,L,l,c,R):yt.defaultComparator(T,L,this.gridOptionsWrapper.isAccentedSort()),!isNaN(U)&&0!==U)return w.sort===fe.SORT_ASC?U:-1*U}return e.currentPos-s.currentPos},d.prototype.getComparator=function(i,e){var s=i.column,l=s.getColDef().comparator;if(null!=l)return l;if(e.rowGroupColumn)return e.rowGroupColumn.getColDef().comparator;if(s.getColDef().showRowGroup){var c=!e.group&&s.getColDef().field;if(c){var h=this.columnModel.getPrimaryColumn(c);if(h)return h.getColDef().comparator}}},d.prototype.getValue=function(i,e){return this.valueService.getValue(e,i,!1,!1)},rh([H("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),rh([H("valueService")],d.prototype,"valueService",void 0),rh([H("columnModel")],d.prototype,"columnModel",void 0),rh([vt("rowNodeSorter")],d)}(),KM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),n0=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.ready=!1,e.readyCallbacks=[],e}return KM(i,d),i.prototype.checkReady=function(){if(this.ready=null!=this.gridCtrl&&null!=this.gridBodyCtrl&&null!=this.centerRowContainerCtrl&&null!=this.leftRowContainerCtrl&&null!=this.rightRowContainerCtrl&&null!=this.bottomCenterRowContainerCtrl&&null!=this.bottomLeftRowContainerCtrl&&null!=this.bottomRightRowContainerCtrl&&null!=this.topCenterRowContainerCtrl&&null!=this.topLeftRowContainerCtrl&&null!=this.topRightRowContainerCtrl&&null!=this.centerHeaderRowContainerCtrl&&null!=this.leftHeaderRowContainerCtrl&&null!=this.rightHeaderRowContainerCtrl&&null!=this.fakeHScrollCtrl&&null!=this.gridHeaderCtrl,this.ready){var e=this.createReadyParams();this.readyCallbacks.forEach(function(s){return s(e)}),this.readyCallbacks.length=0}},i.prototype.whenReady=function(e){this.ready?e(this.createReadyParams()):this.readyCallbacks.push(e)},i.prototype.createReadyParams=function(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollCtrl:this.fakeHScrollCtrl,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}},i.prototype.registerFakeHScrollCtrl=function(e){this.fakeHScrollCtrl=e,this.checkReady()},i.prototype.registerGridHeaderCtrl=function(e){this.gridHeaderCtrl=e,this.checkReady()},i.prototype.registerCenterRowContainerCtrl=function(e){this.centerRowContainerCtrl=e,this.checkReady()},i.prototype.registerLeftRowContainerCtrl=function(e){this.leftRowContainerCtrl=e,this.checkReady()},i.prototype.registerRightRowContainerCtrl=function(e){this.rightRowContainerCtrl=e,this.checkReady()},i.prototype.registerTopCenterRowContainerCtrl=function(e){this.topCenterRowContainerCtrl=e,this.checkReady()},i.prototype.registerTopLeftRowContainerCon=function(e){this.topLeftRowContainerCtrl=e,this.checkReady()},i.prototype.registerTopRightRowContainerCtrl=function(e){this.topRightRowContainerCtrl=e,this.checkReady()},i.prototype.registerBottomCenterRowContainerCtrl=function(e){this.bottomCenterRowContainerCtrl=e,this.checkReady()},i.prototype.registerBottomLeftRowContainerCtrl=function(e){this.bottomLeftRowContainerCtrl=e,this.checkReady()},i.prototype.registerBottomRightRowContainerCtrl=function(e){this.bottomRightRowContainerCtrl=e,this.checkReady()},i.prototype.registerHeaderContainer=function(e,s){switch(s){case fe.PINNED_LEFT:this.leftHeaderRowContainerCtrl=e;break;case fe.PINNED_RIGHT:this.rightHeaderRowContainerCtrl=e;break;default:this.centerHeaderRowContainerCtrl=e}this.checkReady()},i.prototype.registerGridBodyCtrl=function(e){this.gridBodyCtrl=e,this.checkReady()},i.prototype.registerGridCtrl=function(e){this.gridCtrl=e,this.checkReady()},i.prototype.getFakeHScrollCtrl=function(){return this.fakeHScrollCtrl},i.prototype.getGridHeaderCtrl=function(){return this.gridHeaderCtrl},i.prototype.getGridCtrl=function(){return this.gridCtrl},i.prototype.getCenterRowContainerCtrl=function(){return this.centerRowContainerCtrl},i.prototype.getTopCenterRowContainerCtrl=function(){return this.topCenterRowContainerCtrl},i.prototype.getBottomCenterRowContainerCtrl=function(){return this.bottomCenterRowContainerCtrl},i.prototype.getGridBodyCtrl=function(){return this.gridBodyCtrl},i.prototype.getHeaderRowContainerCtrls=function(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]},i.prototype.getHeaderRowContainerCtrl=function(e){switch(e){case fe.PINNED_LEFT:return this.leftHeaderRowContainerCtrl;case fe.PINNED_RIGHT:return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}},i=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([vt("ctrlsService")],i),i}(Ke),r0=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),YM=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.registry={},e}return r0(i,d),i.prototype.register=function(e){this.registry[e.controllerName]=e.controllerClass},i.prototype.getInstance=function(e){var s=this.registry[e];if(null!=s)return new s},i=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([vt("ctrlsFactory")],i),i}(Ke),va=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),xm=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},$M=function(d){function i(){return d.call(this)||this}return va(i,d),i.prototype.setComp=function(e,s,l,c){this.view=e,this.eViewport=l,this.eContainer=c,this.eGui=s,this.addManagedListener(this.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged();var h=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,h),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,h),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,h),this.setFakeHScrollSpacerWidths(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()),this.ctrlsService.registerFakeHScrollCtrl(this)},i.prototype.addActiveListenerToggles=function(){var e=this;["mouseenter","mousedown","touchstart"].forEach(function(c){return e.addManagedListener(e.eGui,c,function(){return e.view.addOrRemoveCssClass("ag-scrollbar-active",!0)})}),["mouseleave","mouseup","touchend"].forEach(function(c){return e.addManagedListener(e.eGui,c,function(){return e.view.addOrRemoveCssClass("ag-scrollbar-active",!1)})})},i.prototype.postConstruct=function(){this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.invisibleScrollbar=vs()},i.prototype.onScrollVisibilityChanged=function(){this.setScrollVisible(),this.setFakeHScrollSpacerWidths()},i.prototype.hideAndShowInvisibleScrollAsNeeded=function(){var e=this;this.addManagedListener(this.eventService,$.EVENT_BODY_SCROLL,function(s){"horizontal"===s.direction&&e.view.addOrRemoveCssClass("ag-scrollbar-scrolling",!0)}),this.addManagedListener(this.eventService,$.EVENT_BODY_SCROLL_END,function(){return e.view.addOrRemoveCssClass("ag-scrollbar-scrolling",!1)})},i.prototype.setFakeHScrollSpacerWidths=function(){var e=this.scrollVisibleService.isVerticalScrollShowing(),s=this.columnModel.getDisplayedColumnsRightWidth(),l=!this.enableRtl&&e,c=this.gridOptionsWrapper.getScrollbarWidth();l&&(s+=c),this.view.setRightSpacerFixedWidth(s),this.view.includeRightSpacerScrollerCss("ag-scroller-corner",s<=c);var h=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(h+=c),this.view.setLeftSpacerFixedWidth(h),this.view.includeLeftSpacerScrollerCss("ag-scroller-corner",h<=c)},i.prototype.setScrollVisible=function(){var e=this.scrollVisibleService.isHorizontalScrollShowing(),s=this.invisibleScrollbar,l=this.gridOptionsWrapper.isSuppressHorizontalScroll(),c=e&&this.gridOptionsWrapper.getScrollbarWidth()||0,m=l?0:0===c&&s?15:c,w=qi()&&e;this.view.addOrRemoveCssClass("ag-scrollbar-invisible",s),this.view.setHeight(m),this.view.setViewportHeight(m+(w?1:0)),this.view.setContainerHeight(m)},i.prototype.getViewport=function(){return this.eViewport},i.prototype.getContainer=function(){return this.eContainer},xm([H("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),xm([H("columnModel")],i.prototype,"columnModel",void 0),xm([H("ctrlsService")],i.prototype,"ctrlsService",void 0),xm([Qe],i.prototype,"postConstruct",null),i}(Ke),a0=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),cc=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},s0=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return a0(i,d),i.prototype.postConstruct=function(){var e=this,s={addOrRemoveCssClass:function(h,m){return e.addOrRemoveCssClass(h,m)},setHeight:function(h){return ut(e.getGui(),h)},setContainerHeight:function(h){return ut(e.eContainer,h)},setViewportHeight:function(h){return ut(e.eViewport,h)},setRightSpacerFixedWidth:function(h){return Ia(e.eRightSpacer,h)},setLeftSpacerFixedWidth:function(h){return Ia(e.eLeftSpacer,h)},includeLeftSpacerScrollerCss:function(h,m){return Ft(e.eLeftSpacer,h,m)},includeRightSpacerScrollerCss:function(h,m){return Ft(e.eRightSpacer,h,m)}};this.createManagedBean(new $M).setComp(s,this.getGui(),this.eViewport,this.eContainer),this.createManagedBean(new Ag(function(c){return e.eContainer.style.width=c+"px"}))},i.TEMPLATE='<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>\n        </div>',cc([Be("eLeftSpacer")],i.prototype,"eLeftSpacer",void 0),cc([Be("eRightSpacer")],i.prototype,"eRightSpacer",void 0),cc([Be("eViewport")],i.prototype,"eViewport",void 0),cc([Be("eContainer")],i.prototype,"eContainer",void 0),cc([Qe],i.prototype,"postConstruct",null),i}(pn),hR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),u0=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},l0=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return hR(i,d),i.prototype.postConstruct=function(){var e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_DOM_LAYOUT,e)},i.prototype.checkContainerWidths=function(){var e=this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_PRINT,s=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),l=e?0:this.columnModel.getDisplayedColumnsRightWidth();s!=this.leftWidth&&(this.leftWidth=s,this.eventService.dispatchEvent({type:$.EVENT_LEFT_PINNED_WIDTH_CHANGED})),l!=this.rightWidth&&(this.rightWidth=l,this.eventService.dispatchEvent({type:$.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))},i.prototype.getPinnedRightWidth=function(){return this.rightWidth},i.prototype.getPinnedLeftWidth=function(){return this.leftWidth},u0([H("columnModel")],i.prototype,"columnModel",void 0),u0([Qe],i.prototype,"postConstruct",null),u0([vt("pinnedWidthService")],i)}(Ke),c0=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ih=function(d){function i(e){var s=d.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return s.params=e,s}return c0(i,d),i.prototype.postConstruct=function(){this.gridOptionsWrapper.setDomData(this.getGui(),i.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()},i.prototype.addKeyDownListener=function(){var e=this,s=this.getGui(),l=this.params;this.addManagedListener(s,"keydown",function(m){Yi(e.gridOptionsWrapper,m,l.node,l.column,!0)||l.onKeyDown(m)})},i.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Qe],i.prototype,"postConstruct",null),i}(ku),gR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Rm=function(){return Rm=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Rm.apply(this,arguments)},d0=function(d){function i(e,s,l,c,h,m,w){var R=d.call(this)||this;R.scope=null,R.rendererVersion=0,R.editorVersion=0,R.scope=e,R.beans=s,R.column=l.getColumn(),R.rowNode=l.getRowNode(),R.rowCtrl=l.getRowCtrl(),R.autoHeightCell=c,R.eRow=m,R.setTemplate('<div comp-id="'+R.getCompId()+'"/>');var T=R.getGui(),L=T.style;R.eCellValue=T;var U=function(oe,Te,He){var Ve=He||T;null!=Te&&""!=Te?Ve.setAttribute(oe,Te):Ve.removeAttribute(oe)},K={addOrRemoveCssClass:function(oe,Te){return R.addOrRemoveCssClass(oe,Te)},setUserStyles:function(oe){return Fu(T,oe)},setAriaSelected:function(oe){return Qc(T,oe)},setAriaExpanded:function(oe){return Yf(T,oe)},getFocusableElement:function(){return R.getFocusableElement()},setLeft:function(oe){return L.left=oe},setWidth:function(oe){return L.width=oe},setAriaColIndex:function(oe){return I_(R.getGui(),oe)},setHeight:function(oe){return L.height=oe},setZIndex:function(oe){return L.zIndex=oe},setTabIndex:function(oe){return U("tabindex",oe.toString())},setRole:function(oe){return Ki(T,oe)},setColId:function(oe){return U("col-id",oe)},setTitle:function(oe){return U("title",oe)},setUnselectable:function(oe){return U("unselectable",oe,R.eCellValue)},setTransition:function(oe){return L.transition=oe||""},setIncludeSelection:function(oe){return R.includeSelection=oe},setIncludeRowDrag:function(oe){return R.includeRowDrag=oe},setIncludeDndSource:function(oe){return R.includeDndSource=oe},setForceWrapper:function(oe){return R.forceWrapper=oe},setRenderDetails:function(oe,Te,He){return R.setRenderDetails(oe,Te,He)},setEditDetails:function(oe,Te,He){return R.setEditDetails(oe,Te,He)},getCellEditor:function(){return R.cellEditor||null},getCellRenderer:function(){return R.cellRenderer||null},getParentOfValue:function(){return R.eCellValue}};return R.cellCtrl=l,l.setComp(K,R.scope,R.getGui(),h,w),R}return gR(i,d),i.prototype.setRenderDetails=function(e,s,l){if(!this.cellEditor||this.cellEditorPopupWrapper){this.firstRender=null==this.firstRender;var h=this.isUsingAngular1Template(),m=this.setupControlsWrapper();e?!l&&!m&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),h?this.insertValueUsingAngular1Template():this.insertValueWithoutCellRenderer(s))}},i.prototype.setEditDetails=function(e,s,l){e?this.createCellEditorInstance(e,s,l):this.destroyEditor()},i.prototype.removeControlsWrapper=function(){this.eCellValue=this.getGui(),this.eCellWrapper=null,this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)},i.prototype.setupControlsWrapper=function(){var e=this.includeRowDrag||this.includeDndSource||this.includeSelection||this.forceWrapper;return this.addOrRemoveCssClass("ag-cell-value",!e),e&&!this.eCellWrapper?(this.addControlsWrapper(),!0):!(e||!this.eCellWrapper||(this.removeControlsWrapper(),0))},i.prototype.addControlsWrapper=function(){this.getGui().innerHTML='<div ref="eCellWrapper" class="ag-cell-wrapper" role="presentation">\n                <span ref="eCellValue" class="ag-cell-value" role="presentation"></span>\n            </div>',this.eCellValue=this.getRefElement("eCellValue"),this.eCellWrapper=this.getRefElement("eCellWrapper"),this.forceWrapper||this.eCellValue.setAttribute("unselectable","on");var s=this.eCellValue.id="cell-"+this.getCompId(),l=[];this.includeRowDrag&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue),l.push(this.checkboxSelectionComp.getCheckboxId())),l.push(s),ho(this.getGui(),l.join(" "))},i.prototype.createCellEditorInstance=function(e,s,l){var c=this,h=this.editorVersion,m=e.newAgStackInstance();if(m){var w=e.params;m.then(function(T){return c.afterCellEditorCreated(h,T,w,s,l)}),Ce(this.cellEditor)&&w.cellStartedEdit&&this.cellCtrl.focusCell(!0)}},i.prototype.insertValueWithoutCellRenderer=function(e){var s=null!=e?oa(e):null;null!=s?this.eCellValue.innerHTML=s:uo(this.eCellValue)},i.prototype.insertValueUsingAngular1Template=function(){var h,e=this,s=this.column.getColDef(),l=s.template,c=s.templateUrl;null!=l?h=l:null!=c&&(h=this.beans.templateService.getTemplate(c,function(){return e.cellCtrl.refreshCell({forceRefresh:!0})})),null!=h&&(this.eCellValue.innerHTML=h,this.updateAngular1ScopeAndCompile())},i.prototype.destroyEditorAndRenderer=function(){this.destroyRenderer(),this.destroyEditor()},i.prototype.destroyRenderer=function(){this.cellRenderer=this.beans.context.destroyBean(this.cellRenderer),_i(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++},i.prototype.destroyEditor=function(){var e=this.beans.context;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),_i(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++},i.prototype.refreshCellRenderer=function(e){if(null==this.cellRenderer||null==this.cellRenderer.refresh||this.cellRendererClass!==e.componentClass)return!1;var s=this.cellRenderer.refresh(e.params);return!0===s||void 0===s},i.prototype.createCellRendererInstance=function(e){var s=this,l=this.beans.gridOptionsWrapper.isAngularCompileRows(),c=this.beans.gridOptionsWrapper.isSuppressAnimationFrame(),m=this.rendererVersion,w=e.componentClass,R=function(){if(s.rendererVersion===m&&s.isAlive()){var U=e.newAgStackInstance(),K=s.afterCellRendererCreated.bind(s,m,w);U&&U.then(K)}};l||c||this.autoHeightCell||!this.firstRender?R():this.beans.animationFrameService.createTask(R,this.rowNode.rowIndex,"createTasksP2")},i.prototype.isUsingAngular1Template=function(){var e=this.column.getColDef();return null!=e.template||null!=e.templateUrl},i.prototype.getCtrl=function(){return this.cellCtrl},i.prototype.getRowCtrl=function(){return this.rowCtrl},i.prototype.getCellRenderer=function(){return this.cellRenderer},i.prototype.getCellEditor=function(){return this.cellEditor},i.prototype.afterCellRendererCreated=function(e,s,l){this.isAlive()&&e===this.rendererVersion?(this.cellRenderer=l,this.cellRendererClass=s,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui&&(uo(this.eCellValue),this.eCellValue.appendChild(this.cellRendererGui),this.updateAngular1ScopeAndCompile())):this.beans.context.destroyBean(l)},i.prototype.afterCellEditorCreated=function(e,s,l,c,h){if(e!==this.editorVersion)this.beans.context.destroyBean(s);else{if(s.isCancelBeforeStart&&s.isCancelBeforeStart())return this.beans.context.destroyBean(s),void this.cellCtrl.stopEditing();if(!s.getGui)return console.warn("AG Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method"),void this.beans.context.destroyBean(s);this.cellEditor=s,this.cellEditorGui=s.getGui(),c||void 0!==s.isPopup&&s.isPopup()?(c||this.cellCtrl.hackSayEditingInPopup(),this.addPopupCellEditor(l,h)):this.addInCellEditor(),s.afterGuiAttached&&s.afterGuiAttached()}},i.prototype.addInCellEditor=function(){var e=this.getGui();e.contains(document.activeElement)&&e.focus(),this.destroyRenderer(),this.removeControlsWrapper(),this.clearCellElement(),this.cellEditorGui&&e.appendChild(this.cellEditorGui)},i.prototype.addPopupCellEditor=function(e,s){var l=this;this.beans.gridOptionsWrapper.isFullRowEdit()&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var c=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new ih(e));var h=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&h.appendChild(this.cellEditorGui);var m=this.beans.popupService,w=this.beans.gridOptionsWrapper.isStopEditingWhenCellsLoseFocus(),T=(null!=s||c.getPopupPosition&&c.getPopupPosition(),{column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),ePopup:h,keepWithinBounds:!0}),L="under"===s?m.positionPopupUnderComponent.bind(m,T):m.positionPopupOverComponent.bind(m,T),U=this.beans.gridOptionsWrapper.getLocaleTextFunc(),K=m.addPopup({modal:w,eChild:h,closeOnEsc:!0,closedCallback:function(){l.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:L,ariaLabel:U("ariaLabelCellEditor","Cell Editor")});K&&(this.hideEditorPopup=K.hideFunc)},i.prototype.detach=function(){this.eRow.removeChild(this.getGui())},i.prototype.destroy=function(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControlsWrapper(),this.angularCompiledElement&&(this.angularCompiledElement.remove(),this.angularCompiledElement=void 0),d.prototype.destroy.call(this)},i.prototype.clearCellElement=function(){var e=this.getGui();e.contains(document.activeElement)&&!qi()&&e.focus({preventScroll:!0}),uo(e)},i.prototype.updateAngular1ScopeAndCompile=function(){this.beans.gridOptionsWrapper.isAngularCompileRows()&&this.scope&&(this.scope.data=Rm({},this.rowNode.data),this.angularCompiledElement&&this.angularCompiledElement.remove(),this.angularCompiledElement=this.beans.$compile(this.eCellValue.children)(this.scope),this.beans.ctrlsService.getGridBodyCtrl().requestAngularApply())},i}(pn),mR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),yR=function(d){function i(e,s,l){var c=d.call(this)||this;c.cellComps={},c.beans=s,c.rowCtrl=e,c.setTemplate('<div comp-id="'+c.getCompId()+'" style="'+c.getInitialStyle()+'"/>');var h=c.getGui(),m=h.style;return e.setComp({setDisplay:function(T){null==T?m.removeProperty("display"):m.setProperty("display","none")},setDomOrder:function(T){return c.domOrder=T},setCellCtrls:function(T){return c.setCellCtrls(T)},showFullWidth:function(T){return c.showFullWidth(T)},getFullWidthCellRenderer:function(){return c.getFullWidthCellRenderer()},addOrRemoveCssClass:function(T,L){return c.addOrRemoveCssClass(T,L)},setAriaExpanded:function(T){return Yf(h,T)},setUserStyles:function(T){return Fu(h,T)},setAriaSelected:function(T){return Qc(h,T)},setAriaLabel:function(T){Na(h,null==T?"":T)},setHeight:function(T){return m.height=T},setTop:function(T){return m.top=T},setTransform:function(T){return m.transform=T},setRowIndex:function(T){return h.setAttribute("row-index",T)},setRole:function(T){return Ki(h,T)},setAriaRowIndex:function(T){return P_(c.getGui(),T)},setRowId:function(T){return h.setAttribute("row-id",T)},setRowBusinessKey:function(T){return h.setAttribute("row-business-key",T)},setTabIndex:function(T){return h.setAttribute("tabindex",T.toString())}},c.getGui(),l),c}return mR(i,d),i.prototype.getInitialStyle=function(){var e=this.rowCtrl.getInitialTransform(),s=this.rowCtrl.getInitialRowTop();return e?"transform: "+e:"top: "+s},i.prototype.showFullWidth=function(e){var s=this,c=e.newAgStackInstance(this.rowCtrl.getFullWidthCellRendererType());!c||c.then(function(m){if(s.isAlive()){var w=m.getGui();s.getGui().appendChild(w),s.rowCtrl.getRowType()===wi.FullWidthDetail&&s.rowCtrl.setupDetailRowAutoHeight(w),s.setFullWidthRowComp(m)}else s.beans.context.destroyBean(m)})},i.prototype.setCellCtrls=function(e){var s=this,l=ii({},this.cellComps);e.forEach(function(h){var m=h.getInstanceId();null==s.cellComps[m]?s.newCellComp(h):l[m]=null});var c=Ta(l).filter(function(h){return null!=h});this.destroyCells(c),this.ensureDomOrder(e)},i.prototype.ensureDomOrder=function(e){var s=this;if(this.domOrder){var l=[];e.forEach(function(c){var h=s.cellComps[c.getInstanceId()];h&&l.push(h.getGui())}),co(this.getGui(),l)}},i.prototype.newCellComp=function(e){var s=new d0(this.rowCtrl.getScope(),this.beans,e,!1,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=s,this.getGui().appendChild(s.getGui())},i.prototype.destroy=function(){d.prototype.destroy.call(this),this.destroyAllCells()},i.prototype.destroyAllCells=function(){var e=Ta(this.cellComps).filter(function(s){return null!=s});this.destroyCells(e)},i.prototype.setFullWidthRowComp=function(e){var s=this;this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(function(){s.fullWidthCellRenderer=s.beans.context.destroyBean(s.fullWidthCellRenderer)})},i.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},i.prototype.destroyCells=function(e){var s=this;e.forEach(function(l){if(l){var c=l.getCtrl().getInstanceId();s.cellComps[c]===l&&(l.detach(),l.destroy(),s.cellComps[c]=null)}})},i}(pn),_R=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),dc=function(){return dc=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},dc.apply(this,arguments)},ga=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},fc=function(d){function i(){var e=d.call(this,function(){var d=pn.elementGettingCreated.getAttribute("name"),i=nc.getRowContainerCssClasses(d);return d===Y.hA6.CENTER?'<div class="'+i.wrapper+'" ref="eWrapper" role="presentation" unselectable="on">\n                <div class="'+i.viewport+'" ref="eViewport" role="presentation">\n                    <div class="'+i.container+'" ref="eContainer" role="rowgroup" unselectable="on"></div>\n                </div>\n            </div>':d===Y.hA6.TOP_CENTER||d===Y.hA6.BOTTOM_CENTER?'<div class="'+i.viewport+'" ref="eViewport" role="presentation" unselectable="on">\n                <div class="'+i.container+'" ref="eContainer" role="presentation" unselectable="on"></div>\n            </div>':'<div class="'+i.container+'" ref="eContainer" role="presentation" unselectable="on"></div>'}())||this;return e.rowComps={},e.name=pn.elementGettingCreated.getAttribute("name"),e}return _R(i,d),i.prototype.postConstruct=function(){var e=this,s={setViewportHeight:function(h){return e.eViewport.style.height=h},setRowCtrls:function(h){return e.setRowCtrls(h)},setDomOrder:function(h){e.domOrder=h},setContainerWidth:function(h){return e.eContainer.style.width=h}};this.createManagedBean(new nc(this.name)).setComp(s,this.eContainer,this.eViewport,this.eWrapper)},i.prototype.preDestroy=function(){this.setRowCtrls([])},i.prototype.setRowCtrls=function(e){var s=this,l=dc({},this.rowComps);this.rowComps={},this.lastPlacedElement=null,e.forEach(function(m){var w=m.getInstanceId(),R=l[w];if(R)s.rowComps[w]=R,delete l[w],s.ensureDomOrder(R.getGui());else{var T=s.newRowComp(m);s.rowComps[w]=T,s.appendRow(T.getGui())}}),Ta(l).forEach(function(h){s.eContainer.removeChild(h.getGui()),h.destroy()})},i.prototype.appendRow=function(e){this.domOrder?Jc(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e},i.prototype.ensureDomOrder=function(e){this.domOrder&&(ys(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)},i.prototype.newRowComp=function(e){var s=nc.getPinned(this.name);return new yR(e,this.beans,s)},ga([H("beans")],i.prototype,"beans",void 0),ga([Be("eViewport")],i.prototype,"eViewport",void 0),ga([Be("eContainer")],i.prototype,"eContainer",void 0),ga([Be("eWrapper")],i.prototype,"eWrapper",void 0),ga([Qe],i.prototype,"postConstruct",null),ga([Fi],i.prototype,"preDestroy",null),i}(pn),wR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),oh=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Tm=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.events=[],e}return wR(i,d),i.prototype.postConstruct=function(){this.rowModel.getType()==fe.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel)},i.prototype.dispatchExpanded=function(e){var s=this;this.events.push(e),null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(function(){s.clientSideRowModel&&s.clientSideRowModel.onRowGroupOpened(),s.events.forEach(function(l){return s.eventService.dispatchEvent(l)}),s.events=[]})),this.dispatchExpandedDebounced()},oh([H("animationFrameService")],i.prototype,"animationFrameService",void 0),oh([H("rowModel")],i.prototype,"rowModel",void 0),oh([Qe],i.prototype,"postConstruct",null),oh([vt("rowNodeEventThrottle")],i)}(Ke),qa=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),As=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},xi=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return qa(i,d),i.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},i.prototype.showMenuAfterMouseEvent=function(e,s){var l=this;this.showPopup(e,function(c){l.popupService.positionPopupUnderMouseEvent({column:e,type:"columnMenu",mouseEvent:s,ePopup:c})},s.target)},i.prototype.showMenuAfterButtonClick=function(e,s,l){var c=this;this.showPopup(e,function(h){c.popupService.positionPopupUnderComponent({type:l,eventSource:s,ePopup:h,keepWithinBounds:!0,column:e})},s)},i.prototype.showPopup=function(e,s,l){var c=this,h=this.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU"),m=document.createElement("div");Ki(m,"presentation"),Dt(m,"ag-menu"),this.tabListener=this.addManagedListener(m,"keydown",function(K){return c.trapFocusWithin(K,m)}),h.guiPromise.then(function(K){return m.appendChild(K)});var w,R=l||this.ctrlsService.getGridBodyCtrl().getGui(),L=this.gridOptionsWrapper.getLocaleTextFunc(),U=this.popupService.addPopup({modal:!0,eChild:m,closeOnEsc:!0,closedCallback:function(Q){e.setMenuVisible(!1,"contextMenu");var oe=Q instanceof KeyboardEvent;if(c.tabListener&&(c.tabListener=c.tabListener()),oe&&l&&Ml(l)){var Te=c.focusService.findTabbableParent(l);Te&&Te.focus()}},positionCallback:function(){return s(m)},anchorToElement:R,ariaLabel:L("ariaLabelColumnMenu","Column Menu")});U&&(this.hidePopup=w=U.hideFunc),h.filterPromise.then(function(K){s(m),K.afterGuiAttached&&K.afterGuiAttached({container:"columnMenu",hidePopup:w})}),e.setMenuVisible(!0,"contextMenu")},i.prototype.trapFocusWithin=function(e,s){e.keyCode!==$e.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(s,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(s,e.shiftKey))},i.prototype.isMenuEnabled=function(e){return e.isFilterAllowed()},As([H("filterManager")],i.prototype,"filterManager",void 0),As([H("popupService")],i.prototype,"popupService",void 0),As([H("focusService")],i.prototype,"focusService",void 0),As([H("ctrlsService")],i.prototype,"ctrlsService",void 0),As([vt("menuFactory")],i)}(Ke),Ms=function(){function d(i,e,s){e?(this.gridOptions=e,(new Vd).create(i,e,function(l){var c=new Dd(i);l.createBean(c)},s)):console.error("AG Grid: no gridOptions provided to the grid")}return d.prototype.destroy=function(){this.gridOptions&&this.gridOptions.api&&this.gridOptions.api.destroy()},d}(),Vd=function(){function d(){}return d.prototype.create=function(i,e,s,l){var c=this,h=!!e.debug,m=this.getRegisteredModules(l),w=this.createBeansList(e.rowModelType,m),R=this.createProvidedBeans(i,e,l);if(w){var T={providedBeanInstances:R,beanClasses:w,debug:h},L=new kp("AG Grid",function(){return e.debug}),U=new kp("Context",function(){return T.debug}),K=new PE(T,U),Q=K.getBean("beans");this.registerModuleUserComponents(Q,m),this.registerStackComponents(Q,m),this.registerControllers(Q,m),s(K),Q.ctrlsService.whenReady(function(){c.setColumnsAndData(Q),c.dispatchGridReadyEvent(Q,e);var oe=qt.isRegistered(Y.GXE.EnterpriseCoreModule);L.log("initialised successfully, enterprise = "+oe)})}},d.prototype.registerControllers=function(i,e){e.forEach(function(s){s.controllers&&s.controllers.forEach(function(l){return i.ctrlsFactory.register(l)})})},d.prototype.registerStackComponents=function(i,e){var s=this.createAgStackComponentsList(e);i.agStackComponentsRegistry.setupComponents(s)},d.prototype.getRegisteredModules=function(i){var e=i?i.modules:null,s=qt.getRegisteredModules(),l=[],c={};function h(m,w){var T;c[(T=w).moduleName]||(c[T.moduleName]=!0,l.push(T),qt.register(T,m)),w.dependantModules&&w.dependantModules.forEach(h.bind(null,m))}return e&&e.forEach(h.bind(null,!0)),s&&s.forEach(h.bind(null,!qt.isPackageBased())),l},d.prototype.registerModuleUserComponents=function(i,e){this.extractModuleEntity(e,function(l){return l.userComponents?l.userComponents:[]}).forEach(function(l){i.userComponentRegistry.registerDefaultComponent(l.componentName,l.componentClass)})},d.prototype.createProvidedBeans=function(i,e,s){var l=s?s.frameworkOverrides:null;Ce(l)&&(l=new Bx);var c={gridOptions:e,eGridDiv:i,$scope:s?s.$scope:null,$compile:s?s.$compile:null,globalEventListener:s?s.globalEventListener:null,frameworkOverrides:l};return s&&s.providedBeanInstances&&ii(c,s.providedBeanInstances),c},d.prototype.createAgStackComponentsList=function(i){var e=[{componentName:"AgCheckbox",componentClass:qu},{componentName:"AgRadioButton",componentClass:zp},{componentName:"AgToggleButton",componentClass:_m},{componentName:"AgInputTextField",componentClass:Vw},{componentName:"AgInputTextArea",componentClass:mm},{componentName:"AgInputNumberField",componentClass:Zp},{componentName:"AgInputRange",componentClass:Qp},{componentName:"AgSelect",componentClass:kl},{componentName:"AgSlider",componentClass:ym},{componentName:"AgAngleSelect",componentClass:eh},{componentName:"AgColorPicker",componentClass:zw},{componentName:"AgGridBody",componentClass:aw},{componentName:"AgHeaderRoot",componentClass:da},{componentName:"AgPagination",componentClass:Zx},{componentName:"AgOverlayWrapper",componentClass:jM},{componentName:"AgGroupComponent",componentClass:Bw},{componentName:"AgPanel",componentClass:Nd},{componentName:"AgDialog",componentClass:vm},{componentName:"AgRowContainer",componentClass:fc},{componentName:"AgFakeHorizontalScroll",componentClass:s0}],s=this.extractModuleEntity(i,function(l){return l.agStackComponents?l.agStackComponents:[]});return e.concat(s)},d.prototype.createBeansList=function(i,e){var s=this.getRowModelClass(i,e);if(s){var l=[s,bg,nh,Cm,Xw,jx,sw,gg,om,Yp,ha,yg,Xx,Zo,Yw,Wp,Ma,Js,gt,cw,Yl,xx,fn,DC,nm,nx,Wg,S_,uw,Rw,Pw,xw,Mp,dw,HE,jg,xi,Vi,vC,Wi,yw,go,Cw,Jg,Wx,Hx,gw,cu,Sw,Iw,tm,rm,Yx,Ui,zE,lR,cR,t0,pR,n0,l0,Tm,YM],c=this.extractModuleEntity(e,function(m){return m.beans?m.beans:[]});l.push.apply(l,c);var h=[];return l.forEach(function(m){h.indexOf(m)<0&&h.push(m)}),h}},d.prototype.extractModuleEntity=function(i,e){return[].concat.apply([],i.map(e))},d.prototype.setColumnsAndData=function(i){var e=i.gridOptionsWrapper.getColumnDefs();i.columnModel.setColumnDefs(e||[],"gridInitializing"),i.rowModel.start()},d.prototype.dispatchGridReadyEvent=function(i,e){i.eventService.dispatchEvent({type:$.EVENT_GRID_READY,api:e.api,columnApi:e.columnApi})},d.prototype.getRowModelClass=function(i,e){i||(i=fe.ROW_MODEL_TYPE_CLIENT_SIDE);var s={};e.forEach(function(c){Fn(c.rowModels,function(h,m){s[h]=m})});var l=s[i];if(Fe(l))return l;i===fe.ROW_MODEL_TYPE_INFINITE&&console.error('AG Grid: Row Model "Infinite" not found. Please ensure the '+Y.GXE.InfiniteRowModelModule+" is registered.';"),console.error("AG Grid: could not find matching row model for rowModelType "+i),i===fe.ROW_MODEL_TYPE_VIEWPORT&&console.error('AG Grid: Row Model "Viewport" not found. Please ensure the AG Grid Enterprise Module '+Y.GXE.ViewportRowModelModule+" is registered.';"),i===fe.ROW_MODEL_TYPE_SERVER_SIDE&&console.error('AG Grid: Row Model "Server Side" not found. Please ensure the AG Grid Enterprise Module '+Y.GXE.ServerSideRowModelModule+" is registered.';"),i===fe.ROW_MODEL_TYPE_CLIENT_SIDE&&console.error('AG Grid: Row Model "Client Side" not found. Please ensure the '+Y.GXE.ClientSideRowModelModule+" is registered.';")},d}();var vc=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Os=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};!function(d){function i(e){var s=d.call(this,i.getTemplate(e.cssClass))||this;return s.items=[],s.params=e,e.items&&e.items.forEach(function(l){return s.addItem(l)}),s}vc(i,d),i.prototype.postConstruct=function(){this.createManagedBean(new Ko(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},i.getTemplate=function(e){return'<div class="ag-tabs '+e+'">\n            <div ref="eHeader" role="tablist" class="ag-tabs-header '+(e?e+"-header":"")+'"></div>\n            <div ref="eBody" role="presentation" class="ag-tabs-body '+(e?e+"-body":"")+'"></div>\n        </div>'},i.prototype.handleKeyDown=function(e){switch(e.keyCode){case $e.RIGHT:case $e.LEFT:if(!this.eHeader.contains(document.activeElement))return;var s=this.items.indexOf(this.activeItem),l=e.keyCode===$e.RIGHT?Math.min(s+1,this.items.length-1):Math.max(s-1,0);if(s===l)return;e.preventDefault();var c=this.items[l];this.showItemWrapper(c),c.eHeaderButton.focus();break;case $e.UP:case $e.DOWN:e.stopPropagation()}},i.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var s=this,l=s.focusService,c=s.eHeader,h=s.eBody,m=s.activeItem,w=document.activeElement;if(e.preventDefault(),c.contains(w))l.focusInto(h,e.shiftKey);else if(l.isFocusUnderManagedComponent(h))m.eHeaderButton.focus();else{var R=l.findNextFocusableElement(h,!1,e.shiftKey);R?R.focus():m.eHeaderButton.focus()}}},i.prototype.setAfterAttachedParams=function(e){this.afterAttachedParams=e},i.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},i.prototype.addItem=function(e){var s=document.createElement("span");Ki(s,"tab"),s.setAttribute("tabIndex","-1"),s.appendChild(e.title),Dt(s,"ag-tab"),this.eHeader.appendChild(s),Na(s,e.titleLabel);var l={tabbedItem:e,eHeaderButton:s};this.items.push(l),s.addEventListener("click",this.showItemWrapper.bind(this,l))},i.prototype.showItem=function(e){var s=Li(this.items,function(l){return l.tabbedItem===e});s&&this.showItemWrapper(s)},i.prototype.showItemWrapper=function(e){var s=this;this.params.onItemClicked&&this.params.onItemClicked({item:e.tabbedItem}),this.activeItem!==e?(uo(this.eBody),e.tabbedItem.bodyPromise.then(function(l){s.eBody.appendChild(l);var c=!s.focusService.isKeyboardMode();s.focusService.focusInto(s.eBody,!1,c),e.tabbedItem.afterAttachedCallback&&e.tabbedItem.afterAttachedCallback(s.afterAttachedParams)}),this.activeItem&&yi(this.activeItem.eHeaderButton,"ag-tab-selected"),Dt(e.eHeaderButton,"ag-tab-selected"),this.activeItem=e):OE(this.params.onActiveItemClicked)},Os([H("focusService")],i.prototype,"focusService",void 0),Os([Be("eHeader")],i.prototype,"eHeader",void 0),Os([Be("eBody")],i.prototype,"eBody",void 0),Os([Qe],i.prototype,"postConstruct",null)}(pn);!function(d){d.Applied="Applied",d.StoreNotFound="StoreNotFound",d.StoreLoading="StoreLoading",d.StoreWaitingToLoad="StoreWaitingToLoad",d.StoreLoadingFailed="StoreLoadingFailed",d.StoreWrongType="StoreWrongType",d.Cancelled="Cancelled"}(Y.Qk6||(Y.Qk6={}));var yc=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ps=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},h0=(function(d){function i(e,s,l){void 0===e&&(e="default"),void 0===s&&(s="listbox");var c=d.call(this,i.getTemplate(e))||this;return c.cssIdentifier=e,c.ariaRole=s,c.listName=l,c.renderedRows=new Map,c.rowHeight=20,c.isDestroyed=!1,c}yc(i,d),i.prototype.postConstruct=function(){var e=this;this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:function(l){return e.onFocusIn(l)},onFocusOut:function(l){return e.onFocusOut(l)},focusInnerElement:function(l){return e.focusInnerElement(l)},onTabKeyDown:function(l){return e.onTabKeyDown(l)},handleKeyDown:function(l){return e.handleKeyDown(l)}}),this.setAriaProperties()},i.prototype.setAriaProperties=function(){var s=this.gridOptionsWrapper.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),l=this.eContainer;Ki(l,this.ariaRole),Na(l,s)},i.prototype.addResizeObserver=function(){var e=this.drawVirtualRows.bind(this),s=this.resizeObserverService.observeResize(this.getGui(),e);this.addDestroyFunc(s)},i.prototype.focusInnerElement=function(e){this.focusRow(e?this.model.getRowCount()-1:0)},i.prototype.onFocusIn=function(e){var s=e.target;return gs(s,"ag-virtual-list-item")&&(this.lastFocusedRowIndex=zo(s)-1),!1},i.prototype.onFocusOut=function(e){return this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null),!1},i.prototype.handleKeyDown=function(e){switch(e.keyCode){case $e.UP:case $e.DOWN:this.navigate(e.keyCode===$e.UP)&&e.preventDefault()}},i.prototype.onTabKeyDown=function(e){this.navigate(e.shiftKey)?e.preventDefault():this.focusService.focusInto(this.getGui(),!e.shiftKey)},i.prototype.navigate=function(e){if(null==this.lastFocusedRowIndex)return!1;var s=this.lastFocusedRowIndex+(e?-1:1);return!(s<0||s>=this.model.getRowCount()||(this.focusRow(s),0))},i.prototype.getLastFocusedRow=function(){return this.lastFocusedRowIndex},i.prototype.focusRow=function(e){var s=this;this.ensureIndexVisible(e),window.setTimeout(function(){var l=s.renderedRows.get(e);l&&l.eDiv.focus()},10)},i.prototype.getComponentAt=function(e){var s=this.renderedRows.get(e);return s&&s.rowComponent},i.getTemplate=function(e){return'\n            <div class="ag-virtual-list-viewport ag-'+e+'-virtual-list-viewport" role="presentation">\n                <div class="ag-virtual-list-container ag-'+e+'-virtual-list-container" ref="eContainer"></div>\n            </div>'},i.prototype.getItemHeight=function(){return this.gridOptionsWrapper.getListItemHeight()},i.prototype.ensureIndexVisible=function(e){var s=this.model.getRowCount();if("number"!=typeof e||e<0||e>=s)console.warn("invalid row index for ensureIndexVisible: "+e);else{var l=e*this.rowHeight,c=l+this.rowHeight,h=this.getGui(),m=h.scrollTop,w=h.offsetHeight,L=m+w<c;m>l?h.scrollTop=l:L&&(h.scrollTop=c-w)}},i.prototype.setComponentCreator=function(e){this.componentCreator=e},i.prototype.getRowHeight=function(){return this.rowHeight},i.prototype.getScrollTop=function(){return this.getGui().scrollTop},i.prototype.setRowHeight=function(e){this.rowHeight=e,this.refresh()},i.prototype.refresh=function(){var e=this;if(null!=this.model&&!this.isDestroyed){var s=this.model.getRowCount();this.eContainer.style.height=s*this.rowHeight+"px",AE(function(){return e.eContainer.clientHeight>=s*e.rowHeight},function(){e.isDestroyed||(e.clearVirtualRows(),e.drawVirtualRows())})}},i.prototype.clearVirtualRows=function(){var e=this;this.renderedRows.forEach(function(s,l){return e.removeRow(l)})},i.prototype.drawVirtualRows=function(){var e=this.getGui(),s=e.scrollTop,l=s+e.offsetHeight,c=Math.floor(s/this.rowHeight),h=Math.floor(l/this.rowHeight);this.ensureRowsRendered(c,h)},i.prototype.ensureRowsRendered=function(e,s){var l=this;this.renderedRows.forEach(function(h,m){(m<e||m>s)&&m!==l.lastFocusedRowIndex&&l.removeRow(m)});for(var c=e;c<=s;c++)this.renderedRows.has(c)||c<this.model.getRowCount()&&this.insertRow(c)},i.prototype.insertRow=function(e){var s=this,l=this.model.getRow(e),c=document.createElement("div");if(Dt(c,"ag-virtual-list-item"),Dt(c,"ag-"+this.cssIdentifier+"-virtual-list-item"),Ki(c,"tree"===this.ariaRole?"treeitem":"option"),ZE(c,this.model.getRowCount()),QE(c,e+1),c.setAttribute("tabindex","-1"),"function"==typeof this.model.isRowSelected){var h=this.model.isRowSelected(e);Qc(c,!!h),ab(c,h)}c.style.height=this.rowHeight+"px",c.style.top=this.rowHeight*e+"px";var m=this.componentCreator(l,c);m.addGuiEventListener("focusin",function(){return s.lastFocusedRowIndex=e}),c.appendChild(m.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",c):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",c):this.eContainer.appendChild(c),this.renderedRows.set(e,{rowComponent:m,eDiv:c})},i.prototype.removeRow=function(e){var s=this.renderedRows.get(e);this.eContainer.removeChild(s.eDiv),this.destroyBean(s.rowComponent),this.renderedRows.delete(e)},i.prototype.addScrollListener=function(){var e=this;this.addGuiEventListener("scroll",function(){return e.drawVirtualRows()})},i.prototype.setModel=function(e){this.model=e},i.prototype.destroy=function(){this.isDestroyed||(this.clearVirtualRows(),this.isDestroyed=!0,d.prototype.destroy.call(this))},Ps([H("resizeObserverService")],i.prototype,"resizeObserverService",void 0),Ps([H("focusService")],i.prototype,"focusService",void 0),Ps([Be("eContainer")],i.prototype,"eContainer",void 0),Ps([Qe],i.prototype,"postConstruct",null)}(hw),function(){function d(){}return d.prototype.wrap=function(i,e,s,l,c){var h=this;void 0===s&&(s=[]);var m=this.createWrapper(i,l,c);return e.forEach(function(w){h.createMethod(m,w,!0)}),s.forEach(function(w){h.createMethod(m,w,!1)}),m},d.prototype.unwrap=function(i){return i},d.prototype.createMethod=function(i,e,s){i.addMethod(e,this.createMethodProxy(i,e,s))},d.prototype.createMethodProxy=function(i,e,s){return function(){return i.hasMethod(e)?i.callMethod(e,arguments):(s&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}},d}());!function(d){d.Column="column",d.GroupedColumn="groupedColumn",d.StackedColumn="stackedColumn",d.NormalizedColumn="normalizedColumn",d.Bar="bar",d.GroupedBar="groupedBar",d.StackedBar="stackedBar",d.NormalizedBar="normalizedBar",d.Line="line",d.Scatter="scatter",d.Bubble="bubble",d.Pie="pie",d.Doughnut="doughnut",d.Area="area",d.StackedArea="stackedArea",d.NormalizedArea="normalizedArea",d.Histogram="histogram"}(Y.oXM||(Y.oXM={}));var Zu="undefined"==typeof global?{}:global;Zu.HTMLElement="undefined"==typeof HTMLElement?{}:HTMLElement,Zu.HTMLButtonElement="undefined"==typeof HTMLButtonElement?{}:HTMLButtonElement,Zu.HTMLSelectElement="undefined"==typeof HTMLSelectElement?{}:HTMLSelectElement,Zu.HTMLInputElement="undefined"==typeof HTMLInputElement?{}:HTMLInputElement,Zu.Node="undefined"==typeof Node?{}:Node,Zu.MouseEvent="undefined"==typeof MouseEvent?{}:MouseEvent;var Am=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],h=0,m=c.length;h<m;h++,l++)s[l]=c[h];return s},v0=function(){function d(i,e,s,l,c,h,m,w){this.nextId=0,this.allNodesMap={},this.rootNode=i,this.gridOptionsWrapper=e,this.eventService=s,this.columnModel=l,this.gridApi=c,this.columnApi=h,this.beans=w,this.selectionService=m,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=d.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}return d.prototype.postConstruct=function(){this.suppressParentsInRowNodes=this.gridOptionsWrapper.isSuppressParentsInRowNodes(),this.isRowMasterFunc=this.gridOptionsWrapper.getIsRowMasterFunc(),this.doingTreeData=this.gridOptionsWrapper.isTreeData(),this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail()},d.prototype.getCopyOfNodesMap=function(){return yt.cloneObject(this.allNodesMap)},d.prototype.getRowNode=function(i){return this.allNodesMap[i]},d.prototype.setRowData=function(i){var e=this;if("string"!=typeof i){var s=this.rootNode,l=this.rootNode.sibling;s.childrenAfterFilter=null,s.childrenAfterGroup=null,s.childrenAfterSort=null,s.childrenMapped=null,s.updateHasChildren(),this.nextId=0,this.allNodesMap={},i?s.allLeafChildren=i.map(function(c){return e.createNode(c,e.rootNode,d.TOP_LEVEL)}):(s.allLeafChildren=[],s.childrenAfterGroup=[]),l&&(l.childrenAfterFilter=s.childrenAfterFilter,l.childrenAfterGroup=s.childrenAfterGroup,l.childrenAfterSort=s.childrenAfterSort,l.childrenMapped=s.childrenMapped,l.allLeafChildren=s.allLeafChildren)}else console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first")},d.prototype.updateRowData=function(i,e){var s={remove:[],update:[],add:[]},l=[];return this.executeRemove(i,s,l),this.executeUpdate(i,s,l),this.executeAdd(i,s),this.updateSelection(l),e&&yt.sortRowNodesByOrder(this.rootNode.allLeafChildren,e),s},d.prototype.updateSelection=function(i){var e=i.length>0;e&&i.forEach(function(l){l.setSelected(!1,!1,!0)}),this.selectionService.updateGroupsFromChildrenSelections(),e&&this.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi})},d.prototype.executeAdd=function(i,e){var s=this,l=i.add,c=i.addIndex;if(!yt.missingOrEmpty(l)){var h=l.map(function(L){return s.createNode(L,s.rootNode,d.TOP_LEVEL)});if("number"==typeof c&&c>=0){var w=this.rootNode.allLeafChildren,R=w.slice(0,c),T=w.slice(c,w.length);this.rootNode.allLeafChildren=Am(R,h,T)}else this.rootNode.allLeafChildren=Am(this.rootNode.allLeafChildren,h);this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),e.add=h}},d.prototype.executeRemove=function(i,e,s){var l=this,c=i.remove;if(!yt.missingOrEmpty(c)){var h={};c.forEach(function(m){var w=l.lookupRowNode(m);!w||(w.isSelected()&&s.push(w),w.clearRowTopAndRowIndex(),h[w.id]=!0,delete l.allNodesMap[w.id],e.remove.push(w))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(function(m){return!h[m.id]}),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},d.prototype.executeUpdate=function(i,e,s){var l=this,c=i.update;yt.missingOrEmpty(c)||c.forEach(function(h){var m=l.lookupRowNode(h);!m||(m.updateData(h),!m.selectable&&m.isSelected()&&s.push(m),l.setMasterForRow(m,h,d.TOP_LEVEL,!1),e.update.push(m))})},d.prototype.lookupRowNode=function(i){var s,e=this.gridOptionsWrapper.getRowNodeIdFunc();if(yt.exists(e)){var l=e(i);if(!(s=this.allNodesMap[l]))return console.error("AG Grid: could not find row id="+l+", data item was not found for this id"),null}else if(!(s=yt.find(this.rootNode.allLeafChildren,function(c){return c.data===i})))return console.error("AG Grid: could not find data item as object was not found",i),console.error("Consider using getRowNodeId to help the Grid find matching row data"),null;return s},d.prototype.createNode=function(i,e,s){var l=new ln(this.beans);return l.group=!1,this.setMasterForRow(l,i,s,!0),e&&!this.suppressParentsInRowNodes&&(l.parent=e),l.level=s,l.setDataAndId(i,this.nextId.toString()),this.allNodesMap[l.id]&&console.warn("ag-grid: duplicate node id '"+l.id+"' detected from getRowNodeId callback, this could cause issues in your grid."),this.allNodesMap[l.id]=l,this.nextId++,l},d.prototype.setMasterForRow=function(i,e,s,l){if(this.doingTreeData)i.setMaster(!1),l&&(i.expanded=!1);else if(i.setMaster(!!this.doingMasterDetail&&(!this.isRowMasterFunc||this.isRowMasterFunc(e))),l){var c=this.columnModel.getRowGroupColumns();i.expanded=!!i.master&&this.isExpanded(s+(c?c.length:0))}},d.prototype.isExpanded=function(i){var e=this.gridOptionsWrapper.getGroupDefaultExpanded();return-1===e||i<e},d.TOP_LEVEL=0,d.ROOT_NODE_ID="ROOT_NODE_ID",d}(),g0=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ri=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},na=function(){return function(d){d[d.Normal=0]="Normal",d[d.AfterFilter=1]="AfterFilter",d[d.AfterFilterAndSort=2]="AfterFilterAndSort",d[d.PivotNodes=3]="PivotNodes"}(na||(na={})),na}(),SR=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return g0(i,d),i.prototype.init=function(){var e=this.refreshModel.bind(this,{step:Y.j_r.EVERYTHING}),s=this.refreshModel.bind(this,{step:Y.j_r.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:!0});this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,s),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:Y.j_r.PIVOT})),this.addManagedListener(this.eventService,$.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_MODE_CHANGED,e);var l=this.refreshModel.bind(this,{step:Y.j_r.MAP,keepRenderedRows:!0,animate:!0});this.addManagedListener(this.gridOptionsWrapper,gt.PROP_GROUP_REMOVE_SINGLE_CHILDREN,l),this.addManagedListener(this.gridOptionsWrapper,gt.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,l),this.rootNode=new ln(this.beans),this.nodeManager=new v0(this.rootNode,this.gridOptionsWrapper,this.eventService,this.columnModel,this.gridApi,this.columnApi,this.selectionService,this.beans)},i.prototype.start=function(){var e=this.gridOptionsWrapper.getRowData();e&&this.setRowData(e)},i.prototype.ensureRowHeightsValid=function(e,s,l,c){var h,m=!1;do{h=!1;for(var w=this.getRowIndexAtPixel(e),R=this.getRowIndexAtPixel(s),T=Math.max(w,l),L=Math.min(R,c),U=T;U<=L;U++){var K=this.getRow(U);if(K.rowHeightEstimated){var Q=this.gridOptionsWrapper.getRowHeightForNode(K);K.setRowHeight(Q.height),h=!0,m=!0}}h&&this.setRowTopAndRowIndex()}while(h);return m},i.prototype.setRowTopAndRowIndex=function(){for(var e=this.gridOptionsWrapper.getDefaultRowHeight(),s=0,l=new Set,c=this.gridOptionsWrapper.getDomLayout()===fe.DOM_LAYOUT_NORMAL,h=0;h<this.rowsToDisplay.length;h++){var m=this.rowsToDisplay[h];if(null!=m.id&&l.add(m.id),null==m.rowHeight){var w=this.gridOptionsWrapper.getRowHeightForNode(m,c,e);m.setRowHeight(w.height,w.estimated)}m.setRowTop(s),m.setRowIndex(h),s+=m.rowHeight}return l},i.prototype.clearRowTopAndRowIndex=function(e,s){var l=e.isActive(),c=function(w){w&&null!=w.id&&!s.has(w.id)&&w.clearRowTopAndRowIndex()};!function m(w){c(w),c(w.detailNode),c(w.sibling),w.hasChildren()&&w.childrenAfterGroup&&(l&&-1!=w.level&&!w.expanded||w.childrenAfterGroup.forEach(m))}(this.rootNode)},i.prototype.ensureRowsAtPixel=function(e,s,l){var c=this;void 0===l&&(l=0);var h=this.getRowIndexAtPixel(s);return this.getRow(h)!==e[0]&&(e.forEach(function(w){yt.removeFromArray(c.rootNode.allLeafChildren,w)}),e.forEach(function(w,R){yt.insertIntoArray(c.rootNode.allLeafChildren,w,Math.max(h+l,0)+R)}),this.refreshModel({step:Y.j_r.EVERYTHING,keepRenderedRows:!0,animate:!0,keepEditingRows:!0}),!0)},i.prototype.highlightRowAtPixel=function(e,s){var l=null!=s?this.getRowIndexAtPixel(s):null,c=null!=l?this.getRow(l):null;if(c&&e&&c!==e&&null!=s){var h=this.getHighlightPosition(s,c);this.lastHighlightedRow&&this.lastHighlightedRow!==c&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),c.setHighlighted(h),this.lastHighlightedRow=c}else this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)},i.prototype.getHighlightPosition=function(e,s){if(!s){var l=this.getRowIndexAtPixel(e);if(!(s=this.getRow(l||0)))return Y.oh5.Below}return e-s.rowTop<s.rowHeight/2?Y.oh5.Above:Y.oh5.Below},i.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},i.prototype.isLastRowIndexKnown=function(){return!0},i.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},i.prototype.getTopLevelRowCount=function(){return this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode?1:this.rootNode.childrenAfterFilter?this.rootNode.childrenAfterFilter.length:0},i.prototype.getTopLevelRowDisplayedIndex=function(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;var l=this.rootNode.childrenAfterSort[e];if(this.gridOptionsWrapper.isGroupHideOpenParents())for(;l.expanded&&l.childrenAfterSort&&l.childrenAfterSort.length>0;)l=l.childrenAfterSort[0];return l.rowIndex},i.prototype.getRowBounds=function(e){if(yt.missing(this.rowsToDisplay))return null;var s=this.rowsToDisplay[e];return s?{rowTop:s.rowTop,rowHeight:s.rowHeight}:null},i.prototype.onRowGroupOpened=function(){var e=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:Y.j_r.MAP,keepRenderedRows:!0,animate:e})},i.prototype.onFilterChanged=function(e){if(!e.afterDataChange){var s=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:Y.j_r.FILTER,keepRenderedRows:!0,animate:s})}},i.prototype.onSortChanged=function(){var e=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:Y.j_r.SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0})},i.prototype.getType=function(){return fe.ROW_MODEL_TYPE_CLIENT_SIDE},i.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:Y.j_r.PIVOT}):this.refreshModel({step:Y.j_r.AGGREGATE})},i.prototype.createChangePath=function(e){var s=yt.missingOrEmpty(e),l=new Mt(!1,this.rootNode);return(s||this.gridOptionsWrapper.isTreeData())&&l.setInactive(),l},i.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(e){if(!this.gridOptionsWrapper.isSuppressModelUpdateAfterUpdateTransaction()||null==e.rowNodeTransactions)return!1;var s=yt.filter(e.rowNodeTransactions,function(c){return null!=c.add&&c.add.length>0||null!=c.remove&&c.remove.length>0});return null==s||0==s.length},i.prototype.refreshModel=function(e){var s=this;if(!this.isSuppressModelUpdateAfterUpdateTransaction(e)){var l=this.createChangePath(e.rowNodeTransactions);switch(e.step){case Y.j_r.EVERYTHING:this.doRowGrouping(e.groupState,e.rowNodeTransactions,e.rowNodeOrder,l,!!e.afterColumnsChanged);case Y.j_r.FILTER:this.doFilter(l);case Y.j_r.PIVOT:this.doPivot(l);case Y.j_r.AGGREGATE:this.doAggregate(l);case Y.j_r.SORT:this.doSort(e.rowNodeTransactions,l);case Y.j_r.MAP:this.doRowsToDisplay()}var c=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(l,c),this.eventService.dispatchEvent({type:$.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1}),this.$scope&&window.setTimeout(function(){s.$scope.$apply()},0)}},i.prototype.isEmpty=function(){var e=yt.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return yt.missing(this.rootNode)||e||!this.columnModel.isReady()},i.prototype.isRowsToRender=function(){return yt.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},i.prototype.getNodesInRangeForSelection=function(e,s){var h,l=!s,c=!1,m=[],w=this.gridOptionsWrapper.isGroupSelectsChildren();return this.forEachNodeAfterFilterAndSort(function(R){var T=l&&!c;if(l||(R===s||R===e)&&(l=!0),!R.group||!w){var U=l&&!c,K=R.isParentOfNode(h);(U||K)&&m.push(R)}T&&(R===s||R===e)&&(c=!0,h=R===s?s:e)}),m},i.prototype.setDatasource=function(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")},i.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},i.prototype.getRootNode=function(){return this.rootNode},i.prototype.getRow=function(e){return this.rowsToDisplay[e]},i.prototype.isRowPresent=function(e){return this.rowsToDisplay.indexOf(e)>=0},i.prototype.getRowIndexAtPixel=function(e){if(this.isEmpty())return-1;var s=0,l=this.rowsToDisplay.length-1;if(e<=0)return 0;if(yt.last(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;for(;;){var h=Math.floor((s+l)/2),m=this.rowsToDisplay[h];if(this.isRowInPixel(m,e))return h;m.rowTop<e?s=h+1:m.rowTop>e&&(l=h-1)}},i.prototype.isRowInPixel=function(e,s){return e.rowTop<=s&&e.rowTop+e.rowHeight>s},i.prototype.forEachLeafNode=function(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(s,l){return e(s,l)})},i.prototype.forEachNode=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterGroup,e,na.Normal,0)},i.prototype.forEachNodeAfterFilter=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterFilter,e,na.AfterFilter,0)},i.prototype.forEachNodeAfterFilterAndSort=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterSort,e,na.AfterFilterAndSort,0)},i.prototype.forEachPivotNode=function(e){this.recursivelyWalkNodesAndCallback([this.rootNode],e,na.PivotNodes,0)},i.prototype.recursivelyWalkNodesAndCallback=function(e,s,l,c){if(!e)return c;for(var h=0;h<e.length;h++){var m=e[h];if(s(m,c++),m.hasChildren()){var w=null;switch(l){case na.Normal:w=m.childrenAfterGroup;break;case na.AfterFilter:w=m.childrenAfterFilter;break;case na.AfterFilterAndSort:w=m.childrenAfterSort;break;case na.PivotNodes:w=m.leafGroup?null:m.childrenAfterSort}w&&(c=this.recursivelyWalkNodesAndCallback(w,s,l,c))}}return c},i.prototype.doAggregate=function(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})},i.prototype.expandOrCollapseAll=function(e){var s=this.gridOptionsWrapper.isTreeData();this.rootNode&&function l(m){!m||m.forEach(function(w){(s?yt.exists(w.childrenAfterGroup):w.group)&&(w.expanded=e,l(w.childrenAfterGroup))})}(this.rootNode.childrenAfterGroup),this.refreshModel({step:Y.j_r.MAP}),this.eventService.dispatchEvent({api:this.gridApi,columnApi:this.columnApi,type:$.EVENT_EXPAND_COLLAPSE_ALL,source:e?"expandAll":"collapseAll"})},i.prototype.doSort=function(e,s){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:s})},i.prototype.doRowGrouping=function(e,s,l,c,h){this.groupStage?(s?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:s,rowNodeOrder:l,changedPath:c}):(this.groupStage.execute({rowNode:this.rootNode,changedPath:c,afterColumnsChanged:h}),this.restoreGroupState(e)),this.gridOptionsWrapper.isGroupSelectsChildren()&&this.selectionService.updateGroupsFromChildrenSelections(c)):(this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren())},i.prototype.restoreGroupState=function(e){!e||yt.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(s,l){"boolean"==typeof e[l]&&(s.expanded=e[l])})},i.prototype.doFilter=function(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})},i.prototype.doPivot=function(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})},i.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsWrapper.isRememberGroupStateWhenNewData())return null;var e={};return yt.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(s,l){return e[l]=s.expanded}),e},i.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},i.prototype.getRowNode=function(e){if("string"==typeof e&&0==e.indexOf(ln.ID_PREFIX_ROW_GROUP)){var l=void 0;return this.forEachNode(function(c){c.id===e&&(l=c)}),l}return this.nodeManager.getRowNode(e)},i.prototype.setRowData=function(e){var s=this.getGroupState();this.nodeManager.setRowData(e),this.eventService.dispatchEvent({type:$.EVENT_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi}),this.refreshModel({step:Y.j_r.EVERYTHING,groupState:s,newData:!0})},i.prototype.batchUpdateRowData=function(e,s){var l=this;if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];var c=this.gridOptionsWrapper.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(function(){l.executeBatchUpdateRowData()},c)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:s})},i.prototype.flushAsyncTransactions=function(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},i.prototype.executeBatchUpdateRowData=function(){var e=this;this.valueCache.onDataChanged();var s=[],l=[],c=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(function(m){var w=e.nodeManager.updateRowData(m.rowDataTransaction,void 0);l.push(w),m.callback&&s.push(m.callback.bind(null,w)),"number"==typeof m.rowDataTransaction.addIndex&&(c=!0)}),this.commonUpdateRowData(l,void 0,c),s.length>0&&window.setTimeout(function(){s.forEach(function(m){return m()})},0),l.length>0){var h={api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),type:$.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:l};this.eventService.dispatchEvent(h)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},i.prototype.updateRowData=function(e,s){this.valueCache.onDataChanged();var l=this.nodeManager.updateRowData(e,s);return this.commonUpdateRowData([l],s,"number"==typeof e.addIndex),l},i.prototype.createRowNodeOrder=function(){if(!this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder()){var s={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var l=0;l<this.rootNode.allLeafChildren.length;l++)s[this.rootNode.allLeafChildren[l].id]=l;return s}},i.prototype.commonUpdateRowData=function(e,s,l){l&&(s=this.createRowNodeOrder()),this.refreshModel({step:Y.j_r.EVERYTHING,rowNodeTransactions:e,rowNodeOrder:s,keepRenderedRows:!0,animate:!0,keepEditingRows:!0}),this.eventService.dispatchEvent({type:$.EVENT_ROW_DATA_UPDATED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},i.prototype.onRowHeightChanged=function(){this.refreshModel({step:Y.j_r.MAP,keepRenderedRows:!0,keepEditingRows:!0})},i.prototype.resetRowHeights=function(){var e=!1;this.forEachNode(function(s){s.setRowHeight(s.rowHeight,!0);var l=s.detailNode;l&&l.setRowHeight(l.rowHeight,!0),e=!0}),e&&this.onRowHeightChanged()},Ri([H("columnModel")],i.prototype,"columnModel",void 0),Ri([H("$scope")],i.prototype,"$scope",void 0),Ri([H("selectionService")],i.prototype,"selectionService",void 0),Ri([H("valueCache")],i.prototype,"valueCache",void 0),Ri([H("columnApi")],i.prototype,"columnApi",void 0),Ri([H("gridApi")],i.prototype,"gridApi",void 0),Ri([H("animationFrameService")],i.prototype,"animationFrameService",void 0),Ri([H("beans")],i.prototype,"beans",void 0),Ri([H("filterStage")],i.prototype,"filterStage",void 0),Ri([H("sortStage")],i.prototype,"sortStage",void 0),Ri([H("flattenStage")],i.prototype,"flattenStage",void 0),Ri([Nn("groupStage")],i.prototype,"groupStage",void 0),Ri([Nn("aggregationStage")],i.prototype,"aggregationStage",void 0),Ri([Nn("pivotStage")],i.prototype,"pivotStage",void 0),Ri([Qe],i.prototype,"init",null),Ri([vt("rowModel")],i)}(Ke),it=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Mm=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ER=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return it(i,d),i.prototype.execute=function(e){var s=e.rowNode;this.filterService.filter(e.changedPath),this.selectableService.updateSelectableAfterFiltering(s)},Mm([H("selectableService")],i.prototype,"selectableService",void 0),Mm([H("filterService")],i.prototype,"filterService",void 0),Mm([vt("filterStage")],i)}(Ke),m0=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ah=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},bR=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return m0(i,d),i.prototype.execute=function(e){var s=this.sortController.getSortOptions(),l=yt.exists(s)&&s.length>0,c=l&&yt.exists(e.rowNodeTransactions)&&this.gridOptionsWrapper.isDeltaSort(),h=c?this.calculateDirtyNodes(e.rowNodeTransactions):null,m=yt.missingOrEmpty(this.columnModel.getValueColumns()),w=yt.some(s,function(R){return!!R.column.getColDef().showRowGroup});this.sortService.sort(s,l,c,h,e.changedPath,m,w)},i.prototype.calculateDirtyNodes=function(e){var s={},l=function(h){h&&h.forEach(function(m){return s[m.id]=!0})};return e&&e.forEach(function(c){l(c.add),l(c.update),l(c.remove)}),s},ah([H("sortService")],i.prototype,"sortService",void 0),ah([H("sortController")],i.prototype,"sortController",void 0),ah([H("columnModel")],i.prototype,"columnModel",void 0),ah([vt("sortStage")],i)}(Ke),y0=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Om=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},_0=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return y0(i,d),i.prototype.execute=function(e){var s=e.rowNode,l=[],c={value:0},h=this.columnModel.isPivotMode(),m=h&&s.leafGroup;return this.recursivelyAddToRowsToDisplay(m?[s]:s.childrenAfterSort,l,c,h,0),!m&&l.length>0&&this.gridOptionsWrapper.isGroupIncludeTotalFooter()&&(this.ensureFooterNodeExists(s),this.addRowNodeToRowsToDisplay(s.sibling,l,c,0)),l},i.prototype.recursivelyAddToRowsToDisplay=function(e,s,l,c,h){if(!yt.missingOrEmpty(e))for(var m=this.gridOptionsWrapper.isGroupHideOpenParents(),w=this.gridOptionsWrapper.isGroupRemoveSingleChildren(),R=!w&&this.gridOptionsWrapper.isGroupRemoveLowestSingleChildren(),T=0;T<e.length;T++){var L=e[T],U=L.hasChildren(),Q=w&&U&&1===L.childrenAfterGroup.length,oe=R&&U&&L.leafGroup&&1===L.childrenAfterGroup.length;if(!(c&&!U||m&&L.expanded&&(!c||!L.leafGroup)||Q||oe)&&this.addRowNodeToRowsToDisplay(L,s,l,h),!c||!L.leafGroup)if(U){var Pe=Q||oe;(L.expanded||Pe)&&(this.recursivelyAddToRowsToDisplay(L.childrenAfterSort,s,l,c,Pe?h:h+1),this.gridOptionsWrapper.isGroupIncludeFooter()&&(this.ensureFooterNodeExists(L),this.addRowNodeToRowsToDisplay(L.sibling,s,l,h)))}else if(L.master&&L.expanded){var Re=this.createDetailNode(L);this.addRowNodeToRowsToDisplay(Re,s,l,h)}}},i.prototype.addRowNodeToRowsToDisplay=function(e,s,l,c){var h=this.gridOptionsWrapper.isGroupMultiAutoColumn();s.push(e),e.setUiLevel(h?0:c)},i.prototype.ensureFooterNodeExists=function(e){if(!yt.exists(e.sibling)){var s=new ln(this.beans);Object.keys(e).forEach(function(l){s[l]=e[l]}),s.footer=!0,s.setRowTop(null),s.setRowIndex(null),s.oldRowTop=null,yt.exists(s.id)&&(s.id="rowGroupFooter_"+s.id),s.sibling=e,e.sibling=s}},i.prototype.createDetailNode=function(e){if(yt.exists(e.detailNode))return e.detailNode;var s=new ln(this.beans);return s.detail=!0,s.selectable=!1,s.parent=e,yt.exists(e.id)&&(s.id="detail_"+e.id),s.data=e.data,s.level=e.level+1,e.detailNode=s,s},Om([H("columnModel")],i.prototype,"columnModel",void 0),Om([H("beans")],i.prototype,"beans",void 0),Om([vt("flattenStage")],i)}(Ke),xR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),sh=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},XM=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return xR(i,d),i.prototype.init=function(){this.postSortFunc=this.gridOptionsWrapper.getPostSortFunc()},i.prototype.sort=function(e,s,l,c,h,m,w){var R=this,T=this.gridOptionsWrapper.isGroupMaintainOrder(),L=yt.some(this.columnModel.getAllGridColumns(),function(K){return K.isRowGroupActive()});h&&h.forEachChangedNodeDepthFirst(function(Q){R.pullDownGroupDataForHideOpenParents(Q.childrenAfterFilter,!0),Q.childrenAfterSort=s?T&&L&&!Q.leafGroup&&!w?Q.childrenAfterFilter.slice(0):l?R.doDeltaSort(Q,e,c,h,m):R.rowNodeSorter.doFullSort(Q.childrenAfterFilter,e):Q.childrenAfterFilter.slice(0),Q.sibling&&(Q.sibling.childrenAfterSort=Q.childrenAfterSort),R.updateChildIndexes(Q),R.postSortFunc&&R.postSortFunc(Q.childrenAfterSort)}),this.updateGroupDataForHideOpenParents(h)},i.prototype.mapNodeToSortedNode=function(e,s){return{currentPos:s,rowNode:e}},i.prototype.doDeltaSort=function(e,s,l,c,h){var m=e.childrenAfterSort.filter(function(L){var U=!l[L.id],K=h||c&&c.canSkip(L);return U&&K}).map(this.mapNodeToSortedNode.bind(this)),w={};m.forEach(function(L){return w[L.rowNode.id]=L.rowNode});var R=e.childrenAfterFilter.filter(function(L){return!w[L.id]}).map(this.mapNodeToSortedNode.bind(this));return R.sort(this.rowNodeSorter.compareRowNodes.bind(this,s)),(0===R.length?m:0===m.length?R:this.mergeSortedArrays(s,m,R)).map(function(L){return L.rowNode})},i.prototype.mergeSortedArrays=function(e,s,l){for(var c=[],h=0,m=0;h<s.length&&m<l.length;){var w=this.rowNodeSorter.compareRowNodes(e,s[h],l[m]);c.push(w<0?s[h++]:l[m++])}for(;h<s.length;)c.push(s[h++]);for(;m<l.length;)c.push(l[m++]);return c},i.prototype.updateChildIndexes=function(e){if(!yt.missing(e.childrenAfterSort))for(var s=e.childrenAfterSort,l=0;l<s.length;l++){var c=s[l],m=l===e.childrenAfterSort.length-1;c.setFirstChild(0===l),c.setLastChild(m),c.setChildIndex(l)}},i.prototype.updateGroupDataForHideOpenParents=function(e){var s=this;if(this.gridOptionsWrapper.isGroupHideOpenParents()){if(this.gridOptionsWrapper.isTreeData())return yt.doOnce(function(){return console.warn("AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).")},"sortService.hideOpenParentsWithTreeData"),!1;var c=function h(m){s.pullDownGroupDataForHideOpenParents(m.childrenAfterSort,!1),m.childrenAfterSort.forEach(function(w){w.hasChildren()&&h(w)})};e&&e.executeFromRootNode(function(h){return c(h)})}},i.prototype.pullDownGroupDataForHideOpenParents=function(e,s){var l=this;!this.gridOptionsWrapper.isGroupHideOpenParents()||yt.missing(e)||e.forEach(function(c){l.columnModel.getGroupDisplayColumns().forEach(function(m){var w=m.getColDef().showRowGroup;if("string"==typeof w){var T=l.columnModel.getPrimaryColumn(w);if(T!==c.rowGroupColumn)if(s)c.setGroupValue(m.getId(),void 0);else{var U=c.getFirstChildOfFirstChild(T);U&&c.setGroupValue(m.getId(),U.key)}}else console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup")})})},sh([H("columnModel")],i.prototype,"columnModel",void 0),sh([H("rowNodeSorter")],i.prototype,"rowNodeSorter",void 0),sh([Qe],i.prototype,"init",null),sh([vt("sortService")],i)}(Ke),RR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Wd=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Pm=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return RR(i,d),i.prototype.postConstruct=function(){this.doingTreeData=this.gridOptionsWrapper.isTreeData()},i.prototype.filter=function(e){var s=this.filterManager.isAnyFilterPresent();this.filterNodes(s,e)},i.prototype.filterNodes=function(e,s){var l=this,c=function(T,L){T.hasChildren()?(T.childrenAfterFilter=e&&!L?T.childrenAfterGroup.filter(function(U){var K=U.childrenAfterFilter&&U.childrenAfterFilter.length>0,Q=U.data&&l.filterManager.doesRowPassFilter({rowNode:U});return K||Q}):T.childrenAfterGroup,l.setAllChildrenCount(T)):(T.childrenAfterFilter=T.childrenAfterGroup,T.setAllChildrenCount(null)),T.sibling&&(T.sibling.childrenAfterFilter=T.childrenAfterFilter)};if(this.doingTreeDataFiltering()){var h=function R(T,L){if(T.childrenAfterGroup)for(var U=0;U<T.childrenAfterGroup.length;U++){var K=T.childrenAfterGroup[U],Q=L||l.filterManager.doesRowPassFilter({rowNode:K});K.childrenAfterGroup?R(T.childrenAfterGroup[U],Q):c(K,Q)}c(T,L)};s.executeFromRootNode(function(T){return h(T,!1)})}else s.forEachChangedNodeDepthFirst(function(T){return c(T,!1)},!0)},i.prototype.setAllChildrenCountTreeData=function(e){var s=0;e.childrenAfterFilter.forEach(function(l){s++,s+=l.allChildrenCount}),e.setAllChildrenCount(s)},i.prototype.setAllChildrenCountGridGrouping=function(e){var s=0;e.childrenAfterFilter.forEach(function(l){l.group?s+=l.allChildrenCount:s++}),e.setAllChildrenCount(s)},i.prototype.setAllChildrenCount=function(e){this.doingTreeData?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e)},i.prototype.doingTreeDataFiltering=function(){return this.gridOptionsWrapper.isTreeData()&&!this.gridOptionsWrapper.isExcludeChildrenWhenTreeDataFiltering()},Wd([H("filterManager")],i.prototype,"filterManager",void 0),Wd([Qe],i.prototype,"postConstruct",null),Wd([vt("filterService")],i)}(Ke),TR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),C0=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},JM=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return TR(i,d),i.prototype.postConstruct=function(){this.rowModel.getType()===fe.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel)},i.prototype.createTransactionForRowData=function(e){if(yt.missing(this.clientSideRowModel))console.error("AG Grid: ImmutableService only works with ClientSideRowModel");else{var s=this.gridOptionsWrapper.getRowNodeIdFunc();if(s&&!yt.missing(s)){var l={remove:[],update:[],add:[]},c=this.clientSideRowModel.getCopyOfNodesMap(),m=this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder()?null:{};return yt.exists(e)&&e.forEach(function(w,R){var T=s(w),L=c[T];m&&(m[T]=R),L?(L.data!==w&&l.update.push(w),c[T]=void 0):l.add.push(w)}),yt.iterateObject(c,function(w,R){R&&l.remove.push(R.data)}),[l,m]}console.error("AG Grid: ImmutableService requires getRowNodeId() callback to be implemented, your row data need IDs!")}},C0([H("rowModel")],i.prototype,"rowModel",void 0),C0([Qe],i.prototype,"postConstruct",null),C0([vt("immutableService")],i)}(Ke),ZM={moduleName:Y.GXE.ClientSideRowModelModule,beans:[ER,bR,_0,XM,Pm,JM],rowModels:{clientSide:SR}},DR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),uh=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},AR=function(d){function i(e,s,l){var c=d.call(this,e)||this;return c.parentCache=s,c.params=l,c.startRow=e*l.blockSize,c.endRow=c.startRow+l.blockSize,c}return DR(i,d),i.prototype.postConstruct=function(){this.createRowNodes()},i.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},i.prototype.setDataAndId=function(e,s,l){!e.id&&e.alreadyRendered&&(e.alreadyRendered=!1),yt.exists(s)?e.setDataAndId(s,l.toString()):e.setDataAndId(void 0,void 0)},i.prototype.loadFromDatasource=function(){var e=this,s=this.createLoadParams();yt.missing(this.params.datasource.getRows)?console.warn("AG Grid: datasource is missing getRows method"):window.setTimeout(function(){e.params.datasource.getRows(s)},0)},i.prototype.processServerFail=function(){},i.prototype.createLoadParams=function(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsWrapper.getContext()}},i.prototype.forEachNode=function(e,s,l){var c=this;this.rowNodes.forEach(function(h,m){c.startRow+m<l&&e(h,s.next())})},i.prototype.getLastAccessed=function(){return this.lastAccessed},i.prototype.getRow=function(e,s){return void 0===s&&(s=!1),s||(this.lastAccessed=this.params.lastAccessedSequence.next()),this.rowNodes[e-this.startRow]},i.prototype.getStartRow=function(){return this.startRow},i.prototype.getEndRow=function(){return this.endRow},i.prototype.createRowNodes=function(){this.rowNodes=[];for(var e=0;e<this.params.blockSize;e++){var s=this.startRow+e,l=new ln(this.beans);l.setRowHeight(this.params.rowHeight),l.uiLevel=0,l.setRowIndex(s),l.setRowTop(this.params.rowHeight*s),this.rowNodes.push(l)}},i.prototype.processServerResult=function(e){var s=this;this.rowNodes.forEach(function(c,h){s.setDataAndId(c,e.rowData?e.rowData[h]:void 0,s.startRow+h)}),this.parentCache.pageLoaded(this,null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0)},i.prototype.destroyRowNodes=function(){this.rowNodes.forEach(function(e){e.clearRowTopAndRowIndex()})},uh([H("beans")],i.prototype,"beans",void 0),uh([Qe],i.prototype,"postConstruct",null),uh([Fi],i.prototype,"destroyRowNodes",null),i}(Em),MR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Is=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},OR=function(d,i){return function(e,s){i(e,s,d)}},w0=function(d){function i(e){var s=d.call(this)||this;return s.lastRowIndexKnown=!1,s.blocks={},s.blockCount=0,s.rowCount=e.initialRowCount,s.params=e,s}return MR(i,d),i.prototype.setBeans=function(e){this.logger=e.create("InfiniteCache")},i.prototype.getRow=function(e,s){void 0===s&&(s=!1);var l=Math.floor(e/this.params.blockSize),c=this.blocks[l];if(!c){if(s)return;c=this.createBlock(l)}return c.getRow(e)},i.prototype.createBlock=function(e){var s=this.createBean(new AR(e,this,this.params));return this.blocks[s.getId()]=s,this.blockCount++,this.purgeBlocksIfNeeded(s),this.params.rowNodeBlockLoader.addBlock(s),s},i.prototype.refreshCache=function(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach(function(s){return s.setStateWaitingToLoad()}),this.params.rowNodeBlockLoader.checkBlockToLoad())},i.prototype.destroyAllBlocks=function(){var e=this;this.getBlocksInOrder().forEach(function(s){return e.destroyBlock(s)})},i.prototype.getRowCount=function(){return this.rowCount},i.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},i.prototype.pageLoaded=function(e,s){!this.isAlive()||(this.logger.log("onPageLoaded: page = "+e.getId()+", lastRow = "+s),this.checkRowCount(e,s),this.onCacheUpdated())},i.prototype.purgeBlocksIfNeeded=function(e){var s=this,l=this.getBlocksInOrder().filter(function(R){return R!=e});l.sort(function(T,L){return L.getLastAccessed()-T.getLastAccessed()});var h=this.params.maxBlocksInCache>0,m=h?this.params.maxBlocksInCache-1:null,w=i.MAX_EMPTY_BLOCKS_TO_KEEP-1;l.forEach(function(R,T){if(R.getState()===AR.STATE_WAITING_TO_LOAD&&T>=w||h&&T>=m){if(s.isBlockCurrentlyDisplayed(R)||s.isBlockFocused(R))return;s.removeBlockFromCache(R)}})},i.prototype.isBlockFocused=function(e){var s=this.focusService.getFocusCellToUseAfterRefresh();if(!s||null!=s.rowPinned)return!1;var l=e.getStartRow(),c=e.getEndRow();return s.rowIndex>=l&&s.rowIndex<c},i.prototype.isBlockCurrentlyDisplayed=function(e){var s=e.getStartRow(),l=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(s,l)},i.prototype.removeBlockFromCache=function(e){!e||this.destroyBlock(e)},i.prototype.checkRowCount=function(e,s){if("number"==typeof s&&s>=0)this.rowCount=s,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var c=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<c&&(this.rowCount=c)}},i.prototype.setRowCount=function(e,s){this.rowCount=e,yt.exists(s)&&(this.lastRowIndexKnown=s),this.lastRowIndexKnown||this.rowCount%this.params.blockSize==0&&this.rowCount++,this.onCacheUpdated()},i.prototype.forEachNodeDeep=function(e){var s=this,l=new ws;this.getBlocksInOrder().forEach(function(c){return c.forEachNode(e,l,s.rowCount)})},i.prototype.getBlocksInOrder=function(){return yt.getAllValuesInObject(this.blocks).sort(function(c,h){return c.getId()-h.getId()})},i.prototype.destroyBlock=function(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)},i.prototype.onCacheUpdated=function(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:$.EVENT_STORE_UPDATED}))},i.prototype.destroyAllBlocksPastVirtualRowCount=function(){var e=this,s=[];this.getBlocksInOrder().forEach(function(l){l.getId()*e.params.blockSize>=e.rowCount&&s.push(l)}),s.length>0&&s.forEach(function(l){return e.destroyBlock(l)})},i.prototype.purgeCache=function(){var e=this;this.getBlocksInOrder().forEach(function(s){return e.removeBlockFromCache(s)}),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},i.prototype.getRowNodesInRange=function(e,s){var l=this,c=[],h=-1,m=!1,w=new ws;yt.missing(e)&&(m=!0);var R=!1;return this.getBlocksInOrder().forEach(function(L){if(!R){if(m&&h+1!==L.getId())return void(R=!0);h=L.getId(),L.forEachNode(function(U){var K=U===e||U===s;(m||K)&&c.push(U),K&&(m=!m)},w,l.rowCount)}}),R||m?[]:c},i.MAX_EMPTY_BLOCKS_TO_KEEP=2,Is([H("rowRenderer")],i.prototype,"rowRenderer",void 0),Is([H("focusService")],i.prototype,"focusService",void 0),Is([OR(0,Ni("loggerFactory"))],i.prototype,"setBeans",null),Is([Fi],i.prototype,"destroyAllBlocks",null),i}(Ke),PR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ma=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},S0=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return PR(i,d),i.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}},i.prototype.ensureRowHeightsValid=function(e,s,l,c){return!1},i.prototype.init=function(){var e=this;!this.gridOptionsWrapper.isRowModelInfinite()||(this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(function(){return e.destroyCache()}),this.verifyProps())},i.prototype.verifyProps=function(){null!=this.gridOptionsWrapper.getDefaultGroupOrderComparator()&&yt.doOnce(function(){return console.warn("AG Grid: defaultGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.")},"IRM.DefaultGroupOrderComparator")},i.prototype.start=function(){this.setDatasource(this.gridOptionsWrapper.getDatasource())},i.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},i.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,$.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,$.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this))},i.prototype.onFilterChanged=function(){this.reset()},i.prototype.onSortChanged=function(){this.reset()},i.prototype.onColumnEverything=function(){(!this.cacheParams||this.isSortModelDifferent())&&this.reset()},i.prototype.isSortModelDifferent=function(){return!yt.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},i.prototype.getType=function(){return fe.ROW_MODEL_TYPE_INFINITE},i.prototype.setDatasource=function(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()},i.prototype.isEmpty=function(){return!this.infiniteCache},i.prototype.isRowsToRender=function(){return!!this.infiniteCache},i.prototype.getNodesInRangeForSelection=function(e,s){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,s):[]},i.prototype.reset=function(){if(this.datasource){yt.exists(this.gridOptionsWrapper.getRowNodeIdFunc())||this.selectionService.reset(),this.resetCache();var s=this.createModelUpdatedEvent();this.eventService.dispatchEvent(s)}},i.prototype.createModelUpdatedEvent=function(){return{type:$.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,newPage:!1,newData:!1,keepRenderedRows:!0,animate:!1}},i.prototype.resetCache=function(){this.destroyCache();var e=this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,maxConcurrentRequests:this.defaultIfInvalid(e,2),initialRowCount:this.defaultIfInvalid(this.gridOptionsWrapper.getInfiniteInitialRowCount(),1),maxBlocksInCache:this.gridOptionsWrapper.getMaxBlocksInCache(),rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),overflowSize:this.defaultIfInvalid(this.gridOptionsWrapper.getCacheOverflowSize(),1),blockSize:this.defaultIfInvalid(this.gridOptionsWrapper.getCacheBlockSize(),100),lastAccessedSequence:new ws},this.infiniteCache=this.createBean(new w0(this.cacheParams))},i.prototype.defaultIfInvalid=function(e,s){return e>0?e:s},i.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},i.prototype.onCacheUpdated=function(){var e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)},i.prototype.getRow=function(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)},i.prototype.getRowNode=function(e){var s=void 0;return this.forEachNode(function(l){l.id===e&&(s=l)}),s},i.prototype.forEachNode=function(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)},i.prototype.getTopLevelRowCount=function(){return this.getRowCount()},i.prototype.getTopLevelRowDisplayedIndex=function(e){return e},i.prototype.getRowIndexAtPixel=function(e){if(0!==this.rowHeight){var s=Math.floor(e/this.rowHeight),l=this.getRowCount()-1;return s>l?l:s}return 0},i.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},i.prototype.isRowPresent=function(e){return!!this.getRowNode(e.id)},i.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},i.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},i.prototype.isLastRowIndexKnown=function(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()},i.prototype.setRowCount=function(e,s){this.infiniteCache&&this.infiniteCache.setRowCount(e,s)},ma([H("filterManager")],i.prototype,"filterManager",void 0),ma([H("sortController")],i.prototype,"sortController",void 0),ma([H("selectionService")],i.prototype,"selectionService",void 0),ma([H("gridApi")],i.prototype,"gridApi",void 0),ma([H("columnApi")],i.prototype,"columnApi",void 0),ma([H("rowRenderer")],i.prototype,"rowRenderer",void 0),ma([H("rowNodeBlockLoader")],i.prototype,"rowNodeBlockLoader",void 0),ma([Qe],i.prototype,"init",null),ma([Fi],i.prototype,"destroyDatasource",null),ma([vt("rowModel")],i)}(Ke),IR={moduleName:Y.GXE.InfiniteRowModelModule,rowModels:{infinite:S0}},Im=function(){function d(){}return d.prototype.setBeans=function(i){this.beans=i},d.prototype.getFileName=function(i){var e=this.getDefaultFileExtension();return(null==i||!i.length)&&(i=this.getDefaultFileName()),-1===i.indexOf(".")?i+"."+e:i},d.prototype.getMergedParamsAndData=function(i){var e=this.mergeDefaultParams(i);return{mergedParams:e,data:this.beans.gridSerializer.serialize(this.createSerializingSession(e),e)}},d.prototype.mergeDefaultParams=function(i){var e=this.getDefaultExportParams(),s={};return yt.assign(s,e),yt.assign(s,i),s},d}(),E0=function(){function d(i){this.groupColumns=[];var s=i.valueService,l=i.gridOptionsWrapper,c=i.processCellCallback,h=i.processHeaderCallback,m=i.processGroupHeaderCallback,w=i.processRowGroupCallback;this.columnModel=i.columnModel,this.valueService=s,this.gridOptionsWrapper=l,this.processCellCallback=c,this.processHeaderCallback=h,this.processGroupHeaderCallback=m,this.processRowGroupCallback=w}return d.prototype.prepare=function(i){this.groupColumns=yt.filter(i,function(e){return!!e.getColDef().showRowGroup})},d.prototype.extractHeaderValue=function(i){var e=this.getHeaderName(this.processHeaderCallback,i);return null!=e?e:""},d.prototype.extractRowCellValue=function(i,e,s,l,c){var w,h=this.gridOptionsWrapper.isGroupMultiAutoColumn()?c.rowGroupIndex:0;w=c&&c.group&&(e===h&&-1!==this.groupColumns.indexOf(i)||0===e&&this.gridOptionsWrapper.isGroupUseEntireRow(this.columnModel.isPivotMode()))?this.createValueForGroupNode(c):this.valueService.getValue(i,c);var R=this.processCell(s,c,i,w,this.processCellCallback,l);return null!=R?R:""},d.prototype.getHeaderName=function(i,e){return i?i({column:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}):this.columnModel.getDisplayNameForColumn(e,"csv",!0)},d.prototype.createValueForGroupNode=function(i){if(this.processRowGroupCallback)return this.processRowGroupCallback({node:i,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()});var e=[i.key];if(!this.gridOptionsWrapper.isGroupMultiAutoColumn())for(;i.parent;)e.push((i=i.parent).key);return e.reverse().join(" -> ")},d.prototype.processCell=function(i,e,s,l,c,h){return c?c({accumulatedRowIndex:i,column:s,node:e,value:l,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),type:h}):null!=l?l:""},d}(),b0=function(){function d(){}return d.download=function(i,e){var s=document.defaultView||window;if(s)if(s.navigator.msSaveOrOpenBlob)s.navigator.msSaveOrOpenBlob(e,i);else{var l=document.createElement("a"),c=s.URL.createObjectURL(e);l.setAttribute("href",c),l.setAttribute("download",i),l.style.display="none",document.body.appendChild(l),l.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:s})),document.body.removeChild(l),s.setTimeout(function(){s.URL.revokeObjectURL(c)},0)}else console.warn("AG Grid: There is no `window` associated with the current `document`")},d}(),LR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),NR=function(d){function i(e){var s=d.call(this,e)||this;s.isFirstLine=!0,s.result="";var c=e.columnSeparator;return s.suppressQuotes=e.suppressQuotes,s.columnSeparator=c,s}return LR(i,d),i.prototype.addCustomContent=function(e){var s=this;!e||("string"==typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach(function(l){s.beginNewLine(),l.forEach(function(c,h){0!==h&&(s.result+=s.columnSeparator),s.result+=s.putInQuotes(c.data.value||""),c.mergeAcross&&s.appendEmptyCells(c.mergeAcross)})}))},i.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},i.prototype.onNewHeaderGroupingRowColumn=function(e,s,l){0!=s&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e),this.appendEmptyCells(l)},i.prototype.appendEmptyCells=function(e){for(var s=1;s<=e;s++)this.result+=this.columnSeparator+this.putInQuotes("")},i.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},i.prototype.onNewHeaderRowColumn=function(e,s){0!=s&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))},i.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},i.prototype.onNewBodyRowColumn=function(e,s,l){0!=s&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractRowCellValue(e,s,s,fe.EXPORT_TYPE_CSV,l))},i.prototype.putInQuotes=function(e){return this.suppressQuotes?e:null==e?'""':("string"==typeof e?s=e:"function"==typeof e.toString?s=e.toString():(console.warn("unknown value type during csv conversion"),s=""),'"'+s.replace(/"/g,'""')+'"');var s},i.prototype.parse=function(){return this.result},i.prototype.beginNewLine=function(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1},i}(E0),x0=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),_c=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Lm=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return x0(i,d),i.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})},i.prototype.getDefaultExportParams=function(){return this.gridOptionsWrapper.getDefaultExportParams("csv")},i.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("ag-grid: Export cancelled. Export is not allowed as per your configuration."),"";var s=this.getMergedParamsAndData(e),l=s.mergedParams,c=s.data,h=new Blob(["\ufeff",c],{type:window.navigator.msSaveOrOpenBlob?this.getMimeType():"octet/stream"});return b0.download(this.getFileName(l.fileName),h),c},i.prototype.exportDataAsCsv=function(e){return this.export(e)},i.prototype.getDataAsCsv=function(e){return this.getMergedParamsAndData(e).data},i.prototype.getMimeType=function(){return"text/csv;charset=utf-8;"},i.prototype.getDefaultFileName=function(){return"export.csv"},i.prototype.getDefaultFileExtension=function(){return"csv"},i.prototype.createSerializingSession=function(e){var s=this;return new NR({columnModel:s.columnModel,valueService:s.valueService,gridOptionsWrapper:s.gridOptionsWrapper,processCellCallback:e.processCellCallback||void 0,processHeaderCallback:e.processHeaderCallback||void 0,processGroupHeaderCallback:e.processGroupHeaderCallback||void 0,processRowGroupCallback:e.processRowGroupCallback||void 0,suppressQuotes:e.suppressQuotes||!1,columnSeparator:e.columnSeparator||","})},i.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressCsvExport()},_c([H("columnModel")],i.prototype,"columnModel",void 0),_c([H("valueService")],i.prototype,"valueService",void 0),_c([H("gridSerializer")],i.prototype,"gridSerializer",void 0),_c([H("gridOptionsWrapper")],i.prototype,"gridOptionsWrapper",void 0),_c([Qe],i.prototype,"postConstruct",null),_c([vt("csvCreator")],i)}(Im),R0=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),pu=function(d,i,e,s){var h,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(h=d[m])&&(c=(l<3?h(c):l>3?h(i,e,c):h(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};!function(d){d[d.HEADER_GROUPING=0]="HEADER_GROUPING",d[d.HEADER=1]="HEADER",d[d.BODY=2]="BODY"}(Y.aCu||(Y.aCu={}));var kR=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return R0(i,d),i.prototype.serialize=function(e,s){void 0===s&&(s={});var l=this.getColumnsToExport(s.allColumns,s.columnKeys);return yt.compose(this.prepareSession(l),this.prependContent(s),this.exportColumnGroups(s,l),this.exportHeaders(s,l),this.processPinnedTopRows(s,l),this.processRows(s,l),this.processPinnedBottomRows(s,l),this.appendContent(s))(e).parse()},i.prototype.processRow=function(e,s,l,c){var h=s.shouldRowBeSkipped||function(){return!1},m=this.gridOptionsWrapper,w=m.getContext(),R=m.getApi(),T=m.getColumnApi(),L=m.isGroupRemoveSingleChildren(),U=m.isGroupHideOpenParents(),K=m.isGroupRemoveLowestSingleChildren(),Q=this.columnModel.isPivotMode()?c.leafGroup:!c.group,He=1===c.allChildrenCount&&(L||K&&c.leafGroup);if((s.skipGroups||s.skipRowGroups)&&s.skipGroups&&yt.doOnce(function(){return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.")},"gridSerializer-skipGroups"),!(!Q&&(s.skipRowGroups||He||U)||s.onlySelected&&!c.isSelected()||s.skipPinnedTop&&"top"===c.rowPinned||s.skipPinnedBottom&&"bottom"===c.rowPinned)&&(-1!==c.level||c.leafGroup)&&!h({node:c,api:R,context:w})){var Ze=e.onNewBodyRow();if(l.forEach(function(an,Gt){Ze.onColumn(an,Gt,c)}),s.getCustomContentBelowRow){var Re=s.getCustomContentBelowRow({node:c,api:R,columnApi:T,context:w});Re&&e.addCustomContent(Re)}}},i.prototype.appendContent=function(e){return function(s){var l=e.customFooter||e.appendContent;return l&&(e.customFooter&&yt.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.")},"gridSerializer-customFooter"),s.addCustomContent(l)),s}},i.prototype.prependContent=function(e){return function(s){var l=e.customHeader||e.prependContent;return l&&(e.customHeader&&yt.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.")},"gridSerializer-customHeader"),s.addCustomContent(l)),s}},i.prototype.prepareSession=function(e){return function(s){return s.prepare(e),s}},i.prototype.exportColumnGroups=function(e,s){var l=this;return function(c){if(e.skipColumnGroupHeaders)e.columnGroups&&yt.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.")},"gridSerializer-columnGroups");else{var h=new Nv,m=l.displayedGroupCreator.createDisplayedGroups(s,l.columnModel.getGridBalancedTree(),h,null);l.recursivelyAddHeaderGroups(m,c,e.processGroupHeaderCallback)}return c}},i.prototype.exportHeaders=function(e,s){return function(l){if(e.skipHeader||e.skipColumnHeaders)e.skipHeader&&yt.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.")},"gridSerializer-skipHeader");else{var c=l.onNewHeaderRow();s.forEach(function(h,m){c.onColumn(h,m,void 0)})}return l}},i.prototype.processPinnedTopRows=function(e,s){var l=this;return function(c){var h=l.processRow.bind(l,c,e,s);return l.pinnedRowModel.forEachPinnedTopRow(h),c}},i.prototype.processRows=function(e,s){var l=this;return function(c){var h=l.rowModel,m=h.getType(),w=m===fe.ROW_MODEL_TYPE_CLIENT_SIDE,R=m===fe.ROW_MODEL_TYPE_SERVER_SIDE,T=!w&&e.onlySelected,L=l.processRow.bind(l,c,e,s);return l.columnModel.isPivotMode()?w?h.forEachPivotNode(L):h.forEachNode(L):e.onlySelectedAllPages||T?l.selectionService.getSelectedNodes().forEach(L):w||R?h.forEachNodeAfterFilterAndSort(L):h.forEachNode(L),c}},i.prototype.processPinnedBottomRows=function(e,s){var l=this;return function(c){var h=l.processRow.bind(l,c,e,s);return l.pinnedRowModel.forEachPinnedBottomRow(h),c}},i.prototype.getColumnsToExport=function(e,s){void 0===e&&(e=!1);var l=this.columnModel.isPivotMode();return s&&s.length?this.columnModel.getGridColumns(s):e&&!l?(this.gridOptionsWrapper.isTreeData()?this.columnModel.getGridColumns([fe.GROUP_AUTO_COLUMN_ID]):[]).concat(this.columnModel.getAllPrimaryColumns()||[]):this.columnModel.getAllDisplayedColumns()},i.prototype.recursivelyAddHeaderGroups=function(e,s,l){var c=[];e.forEach(function(h){!h.getChildren||h.getChildren().forEach(function(w){return c.push(w)})}),e.length>0&&e[0]instanceof ai&&this.doAddHeaderHeader(s,e,l),c&&c.length>0&&this.recursivelyAddHeaderGroups(c,s,l)},i.prototype.doAddHeaderHeader=function(e,s,l){var c=this,h=e.onNewHeaderGroupingRow(),m=0;s.forEach(function(w){var T,R=w;T=l?l({columnGroup:R,api:c.gridOptionsWrapper.getApi(),columnApi:c.gridOptionsWrapper.getColumnApi(),context:c.gridOptionsWrapper.getContext()}):c.columnModel.getDisplayNameForColumnGroup(R,"header"),h.onColumn(T||"",m++,R.getLeafColumns().length-1)})},pu([H("displayedGroupCreator")],i.prototype,"displayedGroupCreator",void 0),pu([H("columnModel")],i.prototype,"columnModel",void 0),pu([H("rowModel")],i.prototype,"rowModel",void 0),pu([H("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),pu([H("selectionService")],i.prototype,"selectionService",void 0),pu([vt("gridSerializer")],i)}(Ke),GR={moduleName:Y.GXE.CsvExportModule,beans:[Lm,kR]},lt=(function(){function d(){}d.createHeader=function(i){void 0===i&&(i={});var l=["version"];return i.version||(i.version="1.0"),i.encoding&&l.push("encoding"),i.standalone&&l.push("standalone"),"<?xml "+l.map(function(h){return h+'="'+i[h]+'"'}).join(" ")+" ?>"},d.createXml=function(i,e){var s=this,l="";i.properties&&(i.properties.prefixedAttributes&&i.properties.prefixedAttributes.forEach(function(h){Object.keys(h.map).forEach(function(m){l+=s.returnAttributeIfPopulated(h.prefix+m,h.map[m],e)})}),i.properties.rawMap&&Object.keys(i.properties.rawMap).forEach(function(h){l+=s.returnAttributeIfPopulated(h,i.properties.rawMap[h],e)}));var c="<"+i.name+l;return i.children||null!=i.textNode?null!=i.textNode?c+">"+i.textNode+"</"+i.name+">\r\n":(c+=">\r\n",i.children&&i.children.forEach(function(h){c+=s.createXml(h,e)}),c+"</"+i.name+">\r\n"):c+"/>\r\n"},d.returnAttributeIfPopulated=function(i,e,s){if(!e&&""!==e&&0!==e)return"";var l=e;return"boolean"==typeof e&&s&&(l=s(e))," "+i+'="'+l+'"'}}(),new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]));!function(){function d(){}d.addFolders=function(i){i.forEach(this.addFolder.bind(this))},d.addFolder=function(i){this.folders.push({path:i,created:new Date,isBase64:!1})},d.addFile=function(i,e,s){void 0===s&&(s=!1),this.files.push({path:i,created:new Date,content:e,isBase64:s})},d.getContent=function(i){void 0===i&&(i="application/zip");var e=this.buildFileStream(),s=this.buildUint8Array(e);return this.clearStream(),new Blob([s],{type:i})},d.clearStream=function(){this.folders=[],this.files=[]},d.buildFileStream=function(i){void 0===i&&(i="");for(var e=this.folders.concat(this.files),s=e.length,l="",c=0,h=0,m=0,w=e;m<w.length;m++){var T=this.getHeader(w[m],c),L=T.fileHeader,U=T.folderHeader,K=T.content;c+=L.length+K.length,h+=U.length,i+=L+K,l+=U}return i+l+this.buildFolderEnd(s,h,c)},d.getHeader=function(i,e){var s=i.content,l=i.path,c=i.created,h=i.isBase64,w=yt.decToHex,R=(0,yt.utf8_encode)(l),T=R!==l,L=this.convertTime(c),U=this.convertDate(c),K="";if(T){var Q=w(1,1)+w(this.getFromCrc32Table(R),4)+R;K="up"+w(Q.length,2)+Q}var oe=s?this.getConvertedContent(s,h):{size:0,content:""},Te=oe.size,He=oe.content,Ve="\n\0"+(T?"\0\b":"\0\0")+"\0\0"+w(L,2)+w(U,2)+w(Te?this.getFromCrc32Table(He):0,4)+w(Te,4)+w(Te,4)+w(R.length,2)+w(K.length,2);return{fileHeader:"PK\x03\x04"+Ve+R+K,folderHeader:"PK\x01\x02\x14\0"+Ve+"\0\0\0\0\0\0"+(s?"\0\0\0\0":"\x10\0\0\0")+w(e,4)+R+K,content:He||""}},d.getConvertedContent=function(i,e){return void 0===e&&(e=!1),e&&(i=i.split(";base64,")[1]),{size:(i=e?atob(i):i).length,content:i}},d.buildFolderEnd=function(i,e,s){var l=yt.decToHex;return"PK\x05\x06\0\0\0\0"+l(i,2)+l(i,2)+l(e,4)+l(s,4)+"\0\0"},d.buildUint8Array=function(i){for(var e=new Uint8Array(i.length),s=0;s<e.length;s++)e[s]=i.charCodeAt(s);return e},d.getFromCrc32Table=function(i){if(!i.length)return 0;for(var e=i.length,s=new Uint8Array(e),l=0;l<e;l++)s[l]=i.charCodeAt(l);var c=-1;for(l=0;l<e;l++)c=c>>>8^lt[255&(c^s[l])];return-1^c},d.convertTime=function(i){var e=i.getHours();return e<<=6,e|=i.getMinutes(),(e<<=5)|i.getSeconds()/2},d.convertDate=function(i){var e=i.getFullYear()-1980;return e<<=4,e|=i.getMonth()+1,(e<<=5)|i.getDate()},d.folders=[],d.files=[]}();qt.register(ZM,!1),qt.register(IR,!1),qt.register(GR,!1),Y.j_S=Zr,Y.Nk3=h0,Y.plv=Ho,Y.rjZ=Ms,Y.vA3=Bx},854:function(wl){var Y=function(pe){"use strict";var Ce,Ue=Object.prototype,Fe=Ue.hasOwnProperty,ni="function"==typeof Symbol?Symbol:{},j=ni.iterator||"@@iterator",k=ni.asyncIterator||"@@asyncIterator",oo=ni.toStringTag||"@@toStringTag";function ve(ht,Je,nt){return Object.defineProperty(ht,Je,{value:nt,enumerable:!0,configurable:!0,writable:!0}),ht[Je]}try{ve({},"")}catch(ht){ve=function(nt,Lt,nn){return nt[Lt]=nn}}function Vc(ht,Je,nt,Lt){var $t=Object.create((Je&&Je.prototype instanceof Ot?Je:Ot).prototype),Wt=new Sr(Lt||[]);return $t._invoke=function(ht,Je,nt){var Lt=Kn;return function($t,Wt){if(Lt===me)throw new Error("Generator is already running");if(Lt===$s){if("throw"===$t)throw Wt;return El()}for(nt.method=$t,nt.arg=Wt;;){var Yr=nt.delegate;if(Yr){var gi=An(Yr,nt);if(gi){if(gi===hi)continue;return gi}}if("next"===nt.method)nt.sent=nt._sent=nt.arg;else if("throw"===nt.method){if(Lt===Kn)throw Lt=$s,nt.arg;nt.dispatchException(nt.arg)}else"return"===nt.method&&nt.abrupt("return",nt.arg);Lt=me;var Gr=Ys(ht,Je,nt);if("normal"===Gr.type){if(Lt=nt.done?$s:Li,Gr.arg===hi)continue;return{value:Gr.arg,done:nt.done}}"throw"===Gr.type&&(Lt=$s,nt.method="throw",nt.arg=Gr.arg)}}}(ht,nt,Wt),$t}function Ys(ht,Je,nt){try{return{type:"normal",arg:ht.call(Je,nt)}}catch(Lt){return{type:"throw",arg:Lt}}}pe.wrap=Vc;var Kn="suspendedStart",Li="suspendedYield",me="executing",$s="completed",hi={};function Ot(){}function Du(){}function ss(){}var zn={};ve(zn,j,function(){return this});var Ar=Object.getPrototypeOf,bn=Ar&&Ar(Ar(xn([])));bn&&bn!==Ue&&Fe.call(bn,j)&&(zn=bn);var us=ss.prototype=Ot.prototype=Object.create(zn);function Wc(ht){["next","throw","return"].forEach(function(Je){ve(ht,Je,function(nt){return this._invoke(Je,nt)})})}function Sl(ht,Je){function nt($t,Wt,Yr,gi){var Gr=Ys(ht[$t],ht,Wt);if("throw"!==Gr.type){var Xs=Gr.arg,Au=Xs.value;return Au&&"object"==typeof Au&&Fe.call(Au,"__await")?Je.resolve(Au.__await).then(function(ls){nt("next",ls,Yr,gi)},function(ls){nt("throw",ls,Yr,gi)}):Je.resolve(Au).then(function(ls){Xs.value=ls,Yr(Xs)},function(ls){return nt("throw",ls,Yr,gi)})}gi(Gr.arg)}var Lt;this._invoke=function($t,Wt){function Yr(){return new Je(function(gi,Gr){nt($t,Wt,gi,Gr)})}return Lt=Lt?Lt.then(Yr,Yr):Yr()}}function An(ht,Je){var nt=ht.iterator[Je.method];if(nt===Ce){if(Je.delegate=null,"throw"===Je.method){if(ht.iterator.return&&(Je.method="return",Je.arg=Ce,An(ht,Je),"throw"===Je.method))return hi;Je.method="throw",Je.arg=new TypeError("The iterator does not provide a 'throw' method")}return hi}var Lt=Ys(nt,ht.iterator,Je.arg);if("throw"===Lt.type)return Je.method="throw",Je.arg=Lt.arg,Je.delegate=null,hi;var nn=Lt.arg;return nn?nn.done?(Je[ht.resultName]=nn.value,Je.next=ht.nextLoc,"return"!==Je.method&&(Je.method="next",Je.arg=Ce),Je.delegate=null,hi):nn:(Je.method="throw",Je.arg=new TypeError("iterator result is not an object"),Je.delegate=null,hi)}function vi(ht){var Je={tryLoc:ht[0]};1 in ht&&(Je.catchLoc=ht[1]),2 in ht&&(Je.finallyLoc=ht[2],Je.afterLoc=ht[3]),this.tryEntries.push(Je)}function Uc(ht){var Je=ht.completion||{};Je.type="normal",delete Je.arg,ht.completion=Je}function Sr(ht){this.tryEntries=[{tryLoc:"root"}],ht.forEach(vi,this),this.reset(!0)}function xn(ht){if(ht){var Je=ht[j];if(Je)return Je.call(ht);if("function"==typeof ht.next)return ht;if(!isNaN(ht.length)){var nt=-1,Lt=function nn(){for(;++nt<ht.length;)if(Fe.call(ht,nt))return nn.value=ht[nt],nn.done=!1,nn;return nn.value=Ce,nn.done=!0,nn};return Lt.next=Lt}}return{next:El}}function El(){return{value:Ce,done:!0}}return Du.prototype=ss,ve(us,"constructor",ss),ve(ss,"constructor",Du),Du.displayName=ve(ss,oo,"GeneratorFunction"),pe.isGeneratorFunction=function(ht){var Je="function"==typeof ht&&ht.constructor;return!!Je&&(Je===Du||"GeneratorFunction"===(Je.displayName||Je.name))},pe.mark=function(ht){return Object.setPrototypeOf?Object.setPrototypeOf(ht,ss):(ht.__proto__=ss,ve(ht,oo,"GeneratorFunction")),ht.prototype=Object.create(us),ht},pe.awrap=function(ht){return{__await:ht}},Wc(Sl.prototype),ve(Sl.prototype,k,function(){return this}),pe.AsyncIterator=Sl,pe.async=function(ht,Je,nt,Lt,nn){void 0===nn&&(nn=Promise);var $t=new Sl(Vc(ht,Je,nt,Lt),nn);return pe.isGeneratorFunction(Je)?$t:$t.next().then(function(Wt){return Wt.done?Wt.value:$t.next()})},Wc(us),ve(us,oo,"Generator"),ve(us,j,function(){return this}),ve(us,"toString",function(){return"[object Generator]"}),pe.keys=function(ht){var Je=[];for(var nt in ht)Je.push(nt);return Je.reverse(),function Lt(){for(;Je.length;){var nn=Je.pop();if(nn in ht)return Lt.value=nn,Lt.done=!1,Lt}return Lt.done=!0,Lt}},pe.values=xn,Sr.prototype={constructor:Sr,reset:function(Je){if(this.prev=0,this.next=0,this.sent=this._sent=Ce,this.done=!1,this.delegate=null,this.method="next",this.arg=Ce,this.tryEntries.forEach(Uc),!Je)for(var nt in this)"t"===nt.charAt(0)&&Fe.call(this,nt)&&!isNaN(+nt.slice(1))&&(this[nt]=Ce)},stop:function(){this.done=!0;var nt=this.tryEntries[0].completion;if("throw"===nt.type)throw nt.arg;return this.rval},dispatchException:function(Je){if(this.done)throw Je;var nt=this;function Lt(Gr,Xs){return Wt.type="throw",Wt.arg=Je,nt.next=Gr,Xs&&(nt.method="next",nt.arg=Ce),!!Xs}for(var nn=this.tryEntries.length-1;nn>=0;--nn){var $t=this.tryEntries[nn],Wt=$t.completion;if("root"===$t.tryLoc)return Lt("end");if($t.tryLoc<=this.prev){var Yr=Fe.call($t,"catchLoc"),gi=Fe.call($t,"finallyLoc");if(Yr&&gi){if(this.prev<$t.catchLoc)return Lt($t.catchLoc,!0);if(this.prev<$t.finallyLoc)return Lt($t.finallyLoc)}else if(Yr){if(this.prev<$t.catchLoc)return Lt($t.catchLoc,!0)}else{if(!gi)throw new Error("try statement without catch or finally");if(this.prev<$t.finallyLoc)return Lt($t.finallyLoc)}}}},abrupt:function(Je,nt){for(var Lt=this.tryEntries.length-1;Lt>=0;--Lt){var nn=this.tryEntries[Lt];if(nn.tryLoc<=this.prev&&Fe.call(nn,"finallyLoc")&&this.prev<nn.finallyLoc){var $t=nn;break}}$t&&("break"===Je||"continue"===Je)&&$t.tryLoc<=nt&&nt<=$t.finallyLoc&&($t=null);var Wt=$t?$t.completion:{};return Wt.type=Je,Wt.arg=nt,$t?(this.method="next",this.next=$t.finallyLoc,hi):this.complete(Wt)},complete:function(Je,nt){if("throw"===Je.type)throw Je.arg;return"break"===Je.type||"continue"===Je.type?this.next=Je.arg:"return"===Je.type?(this.rval=this.arg=Je.arg,this.method="return",this.next="end"):"normal"===Je.type&&nt&&(this.next=nt),hi},finish:function(Je){for(var nt=this.tryEntries.length-1;nt>=0;--nt){var Lt=this.tryEntries[nt];if(Lt.finallyLoc===Je)return this.complete(Lt.completion,Lt.afterLoc),Uc(Lt),hi}},catch:function(Je){for(var nt=this.tryEntries.length-1;nt>=0;--nt){var Lt=this.tryEntries[nt];if(Lt.tryLoc===Je){var nn=Lt.completion;if("throw"===nn.type){var $t=nn.arg;Uc(Lt)}return $t}}throw new Error("illegal catch attempt")},delegateYield:function(Je,nt,Lt){return this.delegate={iterator:xn(Je),resultName:nt,nextLoc:Lt},"next"===this.method&&(this.arg=Ce),hi}},pe}(wl.exports);try{regeneratorRuntime=Y}catch(pe){"object"==typeof globalThis?globalThis.regeneratorRuntime=Y:Function("r","regeneratorRuntime = r")(Y)}},757:function(wl,Y,pe){wl.exports=pe(854)}},function(wl){wl(wl.s=735)}]);