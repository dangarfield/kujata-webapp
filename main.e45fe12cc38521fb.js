(self.webpackChunkkujata_webapp=self.webpackChunkkujata_webapp||[]).push([[179],{999:function(yl,K,de){"use strict";function ze(n){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}function Le(n,a){for(;!Object.prototype.hasOwnProperty.call(n,a)&&null!==(n=ze(n)););return n}function ye(){return ye="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,t,r){var o=Le(a,t);if(o){var u=Object.getOwnPropertyDescriptor(o,t);return u.get?u.get.call(arguments.length<3?a:r):u.value}},ye.apply(this,arguments)}function Qr(n,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function j(n,a,t){return a&&Qr(n.prototype,a),t&&Qr(n,t),n}function G(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function ro(n,a){return(ro=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r})(n,a)}function pe(n,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),a&&ro(n,a)}function Bc(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Us(n){return(Us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Xn(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Pi(n,a){if(a&&("object"===Us(a)||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return Xn(n)}function ve(n){var a=Bc();return function(){var o,r=ze(n);if(a){var u=ze(this).constructor;o=Reflect.construct(r,arguments,u)}else o=r.apply(this,arguments);return Pi(this,o)}}function zs(n,a){(null==a||a>n.length)&&(a=n.length);for(var t=0,r=new Array(a);t<a;t++)r[t]=n[t];return r}function fi(n,a){if(n){if("string"==typeof n)return zs(n,a);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return zs(n,a)}}function Ft(n,a){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=fi(n))||a&&n&&"number"==typeof n.length){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(g){throw g},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var h,u=!0,f=!1;return{s:function(){t=t.call(n)},n:function(){var g=t.next();return u=g.done,g},e:function(g){f=!0,h=g},f:function(){try{!u&&null!=t.return&&t.return()}finally{if(f)throw h}}}}function Ir(n,a){return function(n){if(Array.isArray(n))return n}(n)||function(n,a){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var f,h,r=[],o=!0,u=!1;try{for(t=t.call(n);!(o=(f=t.next()).done)&&(r.push(f.value),!a||r.length!==a);o=!0);}catch(v){u=!0,h=v}finally{try{!o&&null!=t.return&&t.return()}finally{if(u)throw h}}return r}}(n,a)||fi(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function En(n,a,t){return a in n?Object.defineProperty(n,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[a]=t,n}function kn(n){return function(n){if(Array.isArray(n))return zs(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||fi(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pi(n,a,t){return(pi=Bc()?Reflect.construct:function(o,u,f){var h=[null];h.push.apply(h,u);var g=new(Function.bind.apply(o,h));return f&&ro(g,f.prototype),g}).apply(null,arguments)}function wr(n){var a="function"==typeof Map?new Map:void 0;return wr=function(r){if(null===r||!function(n){return-1!==Function.toString.call(n).indexOf("[native code]")}(r))return r;if("function"!=typeof r)throw new TypeError("Super expression must either be null or a function");if(void 0!==a){if(a.has(r))return a.get(r);a.set(r,o)}function o(){return pi(r,arguments,ze(this).constructor)}return o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),ro(o,r)},wr(n)}function bn(n){return"function"==typeof n}function Cl(n){var t=n(function(o){Error.call(o),o.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var pt=Cl(function(n){return function(t){n(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map(function(r,o){return"".concat(o+1,") ").concat(r.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t}});function Je(n,a){if(n){var t=n.indexOf(a);0<=t&&n.splice(t,1)}}var n,nt=function(){function n(a){G(this,n),this.initialTeardown=a,this.closed=!1,this._parentage=null,this._teardowns=null}return j(n,[{key:"unsubscribe",value:function(){var t;if(!this.closed){this.closed=!0;var r=this._parentage;if(r)if(this._parentage=null,Array.isArray(r)){var u,o=Ft(r);try{for(o.s();!(u=o.n()).done;)u.value.remove(this)}catch(C){o.e(C)}finally{o.f()}}else r.remove(this);var h=this.initialTeardown;if(bn(h))try{h()}catch(C){t=C instanceof pt?C.errors:[C]}var v=this._teardowns;if(v){this._teardowns=null;var y,g=Ft(v);try{for(g.s();!(y=g.n()).done;){var _=y.value;try{Yt(_)}catch(C){t=null!=t?t:[],C instanceof pt?t=[].concat(kn(t),kn(C.errors)):t.push(C)}}}catch(C){g.e(C)}finally{g.f()}}if(t)throw new pt(t)}}},{key:"add",value:function(t){var r;if(t&&t!==this)if(this.closed)Yt(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(t)}}},{key:"_hasParent",value:function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)}},{key:"_addParent",value:function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t}},{key:"_removeParent",value:function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&Je(r,t)}},{key:"remove",value:function(t){var r=this._teardowns;r&&Je(r,t),t instanceof n&&t._removeParent(this)}}]),n}();nt.EMPTY=((n=new nt).closed=!0,n);var It=nt.EMPTY;function en(n){return n instanceof nt||n&&"closed"in n&&bn(n.remove)&&bn(n.add)&&bn(n.unsubscribe)}function Yt(n){bn(n)?n():n.unsubscribe()}var jr={setTimeout:function(n){function a(){return n.apply(this,arguments)}return a.toString=function(){return n.toString()},a}(function(){var n=jr.delegate;return((null==n?void 0:n.setTimeout)||setTimeout).apply(void 0,arguments)}),clearTimeout:function(n){function a(t){return n.apply(this,arguments)}return a.toString=function(){return n.toString()},a}(function(n){var a=jr.delegate;return((null==a?void 0:a.clearTimeout)||clearTimeout)(n)}),delegate:void 0};function hi(n){jr.setTimeout(function(){throw n})}function Lr(){}var js=In("C",void 0,void 0);function In(n,a,t){return{kind:n,value:a,error:t}}function bf(n){n()}var Rf=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this)).isStopped=!1,r?(o.destination=r,en(r)&&r.add(Xn(o))):o.destination=ba,o}return j(t,[{key:"next",value:function(o){this.isStopped?Tf(function(n){return In("N",n,void 0)}(o),this):this._next(o)}},{key:"error",value:function(o){this.isStopped?Tf(function(n){return In("E",void 0,n)}(o),this):(this.isStopped=!0,this._error(o))}},{key:"complete",value:function(){this.isStopped?Tf(js,this):(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,ye(ze(t.prototype),"unsubscribe",this).call(this),this.destination=null)}},{key:"_next",value:function(o){this.destination.next(o)}},{key:"_error",value:function(o){try{this.destination.error(o)}finally{this.unsubscribe()}}},{key:"_complete",value:function(){try{this.destination.complete()}finally{this.unsubscribe()}}}],[{key:"create",value:function(o,u,f){return new Af(o,u,f)}}]),t}(nt),Af=function(n){pe(t,n);var a=ve(t);function t(r,o,u){var f,h;if(G(this,t),f=a.call(this),bn(r))h=r;else if(r){var v;h=r.next,o=r.error,u=r.complete,Xn(f),v=r,h=null==h?void 0:h.bind(v),o=null==o?void 0:o.bind(v),u=null==u?void 0:u.bind(v)}return f.destination={next:h?mv(h,Xn(f)):Lr,error:mv(null!=o?o:yv,Xn(f)),complete:u?mv(u,Xn(f)):Lr},f}return t}(Rf);function mv(n,a){return function(){try{n.apply(void 0,arguments)}catch(t){hi(t)}}}function yv(n){throw n}function Tf(n,a){var t=null;t&&jr.setTimeout(function(){return t(n,a)})}var ba={closed:!0,next:Lr,error:yv,complete:Lr},io="function"==typeof Symbol&&Symbol.observable||"@@observable";function ti(n){return n}function n_(n){return 0===n.length?ti:1===n.length?n[0]:function(t){return n.reduce(function(r,o){return o(r)},t)}}var _r=function(){var n=function(){function a(t){G(this,a),t&&(this._subscribe=t)}return j(a,[{key:"lift",value:function(r){var o=new a;return o.source=this,o.operator=r,o}},{key:"subscribe",value:function(r,o,u){var f=this,h=function(n){return n&&n instanceof Rf||function(n){return n&&bn(n.next)&&bn(n.error)&&bn(n.complete)}(n)&&en(n)}(r)?r:new Af(r,o,u);return bf(function(){var v=f.operator,g=f.source;h.add(v?v.call(h,g):g?f._subscribe(h):f._trySubscribe(h))}),h}},{key:"_trySubscribe",value:function(r){try{return this._subscribe(r)}catch(o){r.error(o)}}},{key:"forEach",value:function(r,o){var u=this;return new(o=_v(o))(function(f,h){var v;v=u.subscribe(function(g){try{r(g)}catch(y){h(y),null==v||v.unsubscribe()}},h,f)})}},{key:"_subscribe",value:function(r){var o;return null===(o=this.source)||void 0===o?void 0:o.subscribe(r)}},{key:io,value:function(){return this}},{key:"pipe",value:function(){for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n_(o)(this)}},{key:"toPromise",value:function(r){var o=this;return new(r=_v(r))(function(u,f){var h;o.subscribe(function(v){return h=v},function(v){return f(v)},function(){return u(h)})})}}]),a}();return n.create=function(a){return new n(a)},n}();function _v(n){var a;return null!==(a=null!=n?n:undefined)&&void 0!==a?a:Promise}var wl=Cl(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ss=function(){var n=function(a){pe(r,a);var t=ve(r);function r(){var o;return G(this,r),(o=t.call(this)).closed=!1,o.observers=[],o.isStopped=!1,o.hasError=!1,o.thrownError=null,o}return j(r,[{key:"lift",value:function(u){var f=new i_(this,this);return f.operator=u,f}},{key:"_throwIfClosed",value:function(){if(this.closed)throw new wl}},{key:"next",value:function(u){var f=this;bf(function(){if(f._throwIfClosed(),!f.isStopped){var g,v=Ft(f.observers.slice());try{for(v.s();!(g=v.n()).done;)g.value.next(u)}catch(_){v.e(_)}finally{v.f()}}})}},{key:"error",value:function(u){var f=this;bf(function(){if(f._throwIfClosed(),!f.isStopped){f.hasError=f.isStopped=!0,f.thrownError=u;for(var h=f.observers;h.length;)h.shift().error(u)}})}},{key:"complete",value:function(){var u=this;bf(function(){if(u._throwIfClosed(),!u.isStopped){u.isStopped=!0;for(var f=u.observers;f.length;)f.shift().complete()}})}},{key:"unsubscribe",value:function(){this.isStopped=this.closed=!0,this.observers=null}},{key:"observed",get:function(){var u;return(null===(u=this.observers)||void 0===u?void 0:u.length)>0}},{key:"_trySubscribe",value:function(u){return this._throwIfClosed(),ye(ze(r.prototype),"_trySubscribe",this).call(this,u)}},{key:"_subscribe",value:function(u){return this._throwIfClosed(),this._checkFinalizedStatuses(u),this._innerSubscribe(u)}},{key:"_innerSubscribe",value:function(u){var v=this.observers;return this.hasError||this.isStopped?It:(v.push(u),new nt(function(){return Je(v,u)}))}},{key:"_checkFinalizedStatuses",value:function(u){var v=this.isStopped;this.hasError?u.error(this.thrownError):v&&u.complete()}},{key:"asObservable",value:function(){var u=new _r;return u.source=this,u}}]),r}(_r);return n.create=function(a,t){return new i_(a,t)},n}(),i_=function(n){pe(t,n);var a=ve(t);function t(r,o){var u;return G(this,t),(u=a.call(this)).destination=r,u.source=o,u}return j(t,[{key:"next",value:function(o){var u,f;null===(f=null===(u=this.destination)||void 0===u?void 0:u.next)||void 0===f||f.call(u,o)}},{key:"error",value:function(o){var u,f;null===(f=null===(u=this.destination)||void 0===u?void 0:u.error)||void 0===f||f.call(u,o)}},{key:"complete",value:function(){var o,u;null===(u=null===(o=this.destination)||void 0===o?void 0:o.complete)||void 0===u||u.call(o)}},{key:"_subscribe",value:function(o){var u,f;return null!==(f=null===(u=this.source)||void 0===u?void 0:u.subscribe(o))&&void 0!==f?f:It}}]),t}(ss);function o_(n){return bn(null==n?void 0:n.lift)}function ni(n){return function(a){if(o_(a))return a.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var pn=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f,h){var v,g,y,_;return G(this,t),(_=a.call(this,r)).onFinalize=h,_._next=o?function(C){try{o(C)}catch(S){r.error(S)}}:ye((v=Xn(_),ze(t.prototype)),"_next",v),_._error=f?function(C){try{f(C)}catch(S){r.error(S)}finally{this.unsubscribe()}}:ye((g=Xn(_),ze(t.prototype)),"_error",g),_._complete=u?function(){try{u()}catch(C){r.error(C)}finally{this.unsubscribe()}}:ye((y=Xn(_),ze(t.prototype)),"_complete",y),_}return j(t,[{key:"unsubscribe",value:function(){var o,u=this.closed;ye(ze(t.prototype),"unsubscribe",this).call(this),!u&&(null===(o=this.onFinalize)||void 0===o||o.call(this))}}]),t}(Rf);function zn(n,a){return ni(function(t,r){var o=0;t.subscribe(new pn(r,function(u){r.next(n.call(a,u,o++))}))})}var vi=de(757),Sl=de.n(vi);function B(n){return this instanceof B?(this.v=n,this):new B(n)}function Ln(n,a,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=t.apply(n,a||[]),u=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(C){r[C]&&(o[C]=function(S){return new Promise(function(R,b){u.push([C,S,R,b])>1||h(C,S)})})}function h(C,S){try{!function(C){C.value instanceof B?Promise.resolve(C.value.v).then(g,y):_(u[0][2],C)}(r[C](S))}catch(R){_(u[0][3],R)}}function g(C){h("next",C)}function y(C){h("throw",C)}function _(C,S){C(S),u.shift(),u.length&&h(u[0][0],u[0][1])}}function Li(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,a=n[Symbol.asyncIterator];return a?a.call(n):(n=function(n){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&n[a],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(u){t[u]=n[u]&&function(f){return new Promise(function(h,v){!function(u,f,h,v){Promise.resolve(v).then(function(g){u({value:g,done:h})},f)}(h,v,(f=n[u](f)).done,f.value)})}}}var Mu=function(a){return a&&"number"==typeof a.length&&"function"!=typeof a};function d_(n){return bn(null==n?void 0:n.then)}function Tn(n){return bn(n[io])}function f_(n){return Symbol.asyncIterator&&bn(null==n?void 0:n[Symbol.asyncIterator])}function ri(n){return new TypeError("You provided ".concat(null!==n&&"object"==typeof n?"an invalid object":"'".concat(n,"'")," where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable."))}var p_="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Sv(n){return bn(null==n?void 0:n[p_])}function h_(n){return Ln(this,arguments,Sl().mark(function a(){var t,r,o;return Sl().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:t=n.getReader(),h.prev=1;case 2:return h.next=5,B(t.read());case 5:if(o=(r=h.sent).value,!r.done){h.next=12;break}return h.next=11,B(void 0);case 11:return h.abrupt("return",h.sent);case 12:return h.next=14,B(o);case 14:return h.next=16,h.sent;case 16:h.next=2;break;case 18:return h.prev=18,t.releaseLock(),h.finish(18);case 21:case"end":return h.stop()}},a,null,[[1,,18,21]])}))}function Pf(n){return bn(null==n?void 0:n.getReader)}function oo(n){if(n instanceof _r)return n;if(null!=n){if(Tn(n))return function(n){return new _r(function(a){var t=n[io]();if(bn(t.subscribe))return t.subscribe(a);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Mu(n))return function(n){return new _r(function(a){for(var t=0;t<n.length&&!a.closed;t++)a.next(n[t]);a.complete()})}(n);if(d_(n))return function(n){return new _r(function(a){n.then(function(t){a.closed||(a.next(t),a.complete())},function(t){return a.error(t)}).then(null,hi)})}(n);if(f_(n))return Ou(n);if(Sv(n))return function(n){return new _r(function(a){var r,t=Ft(n);try{for(t.s();!(r=t.n()).done;)if(a.next(r.value),a.closed)return}catch(u){t.e(u)}finally{t.f()}a.complete()})}(n);if(Pf(n))return function(n){return Ou(h_(n))}(n)}throw ri(n)}function Ou(n){return new _r(function(a){(function(n,a){var t,r,o,u;return function(n,a,t,r){return new(t||(t=Promise))(function(u,f){function h(y){try{g(r.next(y))}catch(_){f(_)}}function v(y){try{g(r.throw(y))}catch(_){f(_)}}function g(y){y.done?u(y.value):function(u){return u instanceof t?u:new t(function(f){f(u)})}(y.value).then(h,v)}g((r=r.apply(n,a||[])).next())})}(this,void 0,void 0,Sl().mark(function f(){return Sl().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:g.prev=0,t=Li(n);case 2:return g.next=4,t.next();case 4:if((r=g.sent).done){g.next=12;break}if(a.next(r.value),!a.closed){g.next=10;break}return g.abrupt("return");case 10:g.next=2;break;case 12:g.next=17;break;case 14:g.prev=14,g.t0=g.catch(0),o={error:g.t0};case 17:if(g.prev=17,g.prev=18,!r||r.done||!(u=t.return)){g.next=22;break}return g.next=22,u.call(t);case 22:if(g.prev=22,!o){g.next=25;break}throw o.error;case 25:return g.finish(22);case 26:return g.finish(17);case 27:a.complete();case 28:case"end":return g.stop()}},f,null,[[0,14,17,27],[18,,22,26]])}))})(n,a).catch(function(t){return a.error(t)})})}function us(n,a,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=a.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(u),!o)return u}function bv(n,a,t,r,o,u,f,h){var v=[],g=0,y=0,_=!1,C=function(){_&&!v.length&&!g&&a.complete()},S=function(E){return g<r?R(E):v.push(E)},R=function b(E){u&&a.next(E),g++;var T=!1;oo(t(E,y++)).subscribe(new pn(a,function(D){null==o||o(D),u?S(D):a.next(D)},function(){T=!0},void 0,function(){if(T)try{g--;for(var D=function(){var O=v.shift();f?us(a,f,function(){return b(O)}):b(O)};v.length&&g<r;)D();C()}catch(M){a.error(M)}}))};return n.subscribe(new pn(a,S,function(){_=!0,C()})),function(){null==h||h()}}function qr(n,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return bn(a)?qr(function(r,o){return zn(function(u,f){return a(r,u,o,f)})(oo(n(r,o)))},t):("number"==typeof a&&(t=a),ni(function(r,o){return bv(r,o,n,t)}))}function Wc(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;return qr(ti,n)}var _o=new _r(function(n){return n.complete()});function Rv(n){return n[n.length-1]}function g_(n){return bn(Rv(n))?n.pop():void 0}function $(n){return function(n){return n&&bn(n.schedule)}(Rv(n))?n.pop():void 0}function Av(n,a){return"number"==typeof Rv(n)?n.pop():a}function m_(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return ni(function(t,r){t.subscribe(new pn(r,function(o){return us(r,n,function(){return r.next(o)},a)},function(){return us(r,n,function(){return r.complete()},a)},function(o){return us(r,n,function(){return r.error(o)},a)}))})}function y_(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return ni(function(t,r){r.add(n.schedule(function(){return t.subscribe(r)},a))})}function Dv(n,a){if(!n)throw new Error("Iterable cannot be null");return new _r(function(t){us(t,a,function(){var r=n[Symbol.asyncIterator]();us(t,a,function(){r.next().then(function(o){o.done?t.complete():t.next(o.value)})},0,!0)})})}function Yr(n,a){return a?function(n,a){if(null!=n){if(Tn(n))return function(n,a){return oo(n).pipe(y_(a),m_(a))}(n,a);if(Mu(n))return function(n,a){return new _r(function(t){var r=0;return a.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,a);if(d_(n))return function(n,a){return oo(n).pipe(y_(a),m_(a))}(n,a);if(f_(n))return Dv(n,a);if(Sv(n))return function(n,a){return new _r(function(t){var r;return us(t,a,function(){r=n[p_](),us(t,a,function(){var o,u;try{var f=r.next();o=f.value,u=f.done}catch(h){return void t.error(h)}u?t.complete():t.next(o)},0,!0)}),function(){return bn(null==r?void 0:r.return)&&r.return()}})}(n,a);if(Pf(n))return function(n,a){return Dv(h_(n),a)}(n,a)}throw ri(n)}(n,a):oo(n)}function Ff(n){return n<=0?function(){return _o}:ni(function(a,t){var r=0;a.subscribe(new pn(t,function(o){++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Ov(n,a){if(!0===a)return n(),null;if(!1===a)return null;for(var t=arguments.length,r=new Array(t>2?t-2:0),o=2;o<t;o++)r[o-2]=arguments[o];return a.apply(void 0,r).pipe(Ff(1)).subscribe(function(){return n()})}function or(n){for(var a in n)if(n[a]===or)return a;throw Error("Could not find renamed property on target object.")}function Gn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Gn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return"".concat(n.overriddenName);if(n.name)return"".concat(n.name);var a=n.toString();if(null==a)return""+a;var t=a.indexOf("\n");return-1===t?a:a.substring(0,t)}function Fr(n,a){return null==n||""===n?null===a?"":a:null==a||""===a?n:n+" "+a}var ME=or({__forward_ref__:or});function Iv(n){return n.__forward_ref__=Iv,n.toString=function(){return Gn(this())},n}function cn(n){return Nf(n)?n():n}function Nf(n){return"function"==typeof n&&n.hasOwnProperty(ME)&&n.__forward_ref__===Iv}var Fi=function(n){pe(t,n);var a=ve(t);function t(r,o){var u;return G(this,t),(u=a.call(this,function(n,a){var t=n?"NG0".concat(n,": "):"";return"".concat(t).concat(a)}(r,o))).code=r,u}return t}(wr(Error));function tn(n){return"string"==typeof n?n:null==n?"":String(n)}function Ui(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():tn(n)}function kf(n,a){var t=a?" in ".concat(a):"";throw new Fi("201","No provider for ".concat(Ui(n)," found").concat(t))}function wo(n,a){null==n&&function(n,a,t,r){throw new Error("ASSERTION ERROR: ".concat(n)+(null==r?"":" [Expected=> ".concat(t," ").concat(r," ").concat(a," <=Actual]")))}(a,n,null,"!=")}function an(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Go(n){return{providers:n.providers||[],imports:n.imports||[]}}function zc(n){return Gf(n,zi)||Gf(n,jc)}function Gf(n,a){return n.hasOwnProperty(a)?n[a]:null}function Bf(n){return n&&(n.hasOwnProperty(bl)||n.hasOwnProperty(qc))?n[bl]:null}var Ys,zi=or({"\u0275prov":or}),bl=or({"\u0275inj":or}),jc=or({ngInjectableDef:or}),qc=or({ngInjectorDef:or}),Jt=function(){return(Jt=Jt||{})[Jt.Default=0]="Default",Jt[Jt.Host=1]="Host",Jt[Jt.Self=2]="Self",Jt[Jt.SkipSelf=4]="SkipSelf",Jt[Jt.Optional=8]="Optional",Jt}();function Hf(){return Ys}function cs(n){var a=Ys;return Ys=n,a}function Gv(n,a,t){var r=zc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Jt.Optional?null:void 0!==a?a:void kf(Gn(n),"Injector")}function ds(n){return{toString:n}.toString()}var ia=function(){return(ia=ia||{})[ia.OnPush=0]="OnPush",ia[ia.Default=1]="Default",ia}(),Ta=function(){return function(n){n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom"}(Ta||(Ta={})),Ta}(),Vf="undefined"!=typeof globalThis&&globalThis,Tt="undefined"!=typeof window&&window,gi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Lt="undefined"!=typeof global&&global,tr=Vf||Lt||Tt||gi,jn={},nr=[],ps=or({"\u0275cmp":or}),xl=or({"\u0275dir":or}),Pu=or({"\u0275pipe":or}),Rl=or({"\u0275mod":or}),Bo=or({"\u0275fac":or}),Iu=or({__NG_ELEMENT_ID__:or}),Wf=0;function Kr(n){return ds(function(){var t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ia.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||nr,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ta.Emulated,id:"c",styles:n.styles||nr,_:null,setInput:null,schemas:n.schemas||null,tView:null},o=n.directives,u=n.features,f=n.pipes;return r.id+=Wf++,r.inputs=oa(n.inputs,t),r.outputs=oa(n.outputs),u&&u.forEach(function(h){return h(r)}),r.directiveDefs=o?function(){return("function"==typeof o?o():o).map(Kc)}:null,r.pipeDefs=f?function(){return("function"==typeof f?f():f).map(ao)}:null,r})}function Kc(n){return ii(n)||function(n){return n[xl]||null}(n)}function ao(n){return function(n){return n[Pu]||null}(n)}var b_={};function mi(n){return ds(function(){var a={type:n.type,bootstrap:n.bootstrap||nr,declarations:n.declarations||nr,imports:n.imports||nr,exports:n.exports||nr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(b_[n.id]=n.type),a})}function oa(n,a){if(null==n)return jn;var t={};for(var r in n)if(n.hasOwnProperty(r)){var o=n[r],u=o;Array.isArray(o)&&(u=o[1],o=o[0]),t[o]=r,a&&(a[o]=u)}return t}var Ni=Kr;function so(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function ii(n){return n[ps]||null}function uo(n,a){var t=n[Rl]||null;if(!t&&!0===a)throw new Error("Type ".concat(Gn(n)," does not have '\u0275mod' property."));return t}function Pa(n){return Array.isArray(n)&&"object"==typeof n[1]}function Vo(n){return Array.isArray(n)&&!0===n[1]}function Vv(n){return 0!=(8&n.flags)}function Ia(n){return 2==(2&n.flags)}function Ol(n){return 1==(1&n.flags)}function fo(n){return null!==n.template}function UE(n){return 0!=(512&n[2])}function Js(n,a){return n.hasOwnProperty(Bo)?n[Bo]:null}var D_=function(){function n(a,t,r){G(this,n),this.previousValue=a,this.currentValue=t,this.firstChange=r}return j(n,[{key:"isFirstChange",value:function(){return this.firstChange}}]),n}();function La(){return Uv}function Uv(n){return n.type.prototype.ngOnChanges&&(n.setInput=oi),Wo}function Wo(){var n=O_(this),a=null==n?void 0:n.current;if(a){var t=n.previous;if(t===jn)n.previous=a;else for(var r in a)t[r]=a[r];n.current=null,this.ngOnChanges(a)}}function oi(n,a,t,r){var o=O_(n)||function(n,a){return n[M_]=a}(n,{previous:jn,current:null}),u=o.current||(o.current={}),f=o.previous,h=this.declaredInputs[t],v=f[h];u[h]=new D_(v&&v.currentValue,a,f===jn),n[r]=a}La.ngInherit=!0;var M_="__ngSimpleChanges__";function O_(n){return n[M_]||null}var zv="http://www.w3.org/2000/svg",jv=void 0;function Er(n){return!!n.listen}var F_={createRenderer:function(a,t){return void 0!==jv?jv:"undefined"!=typeof document?document:void 0}};function kr(n){for(;Array.isArray(n);)n=n[0];return n}function fr(n,a){return kr(a[n])}function Uo(n,a){return kr(a[n.index])}function ms(n,a){return n.data[a]}function So(n,a){var t=a[n];return Pa(t)?t:t[0]}function N_(n){return 4==(4&n[2])}function Qc(n){return 128==(128&n[2])}function Jr(n,a){return null==a?null:n[a]}function qf(n){n[18]=0}function Kv(n,a){n[5]+=a;for(var t=n,r=n[3];null!==r&&(1===a&&1===t[5]||-1===a&&0===t[5]);)r[5]+=a,t=r,r=r[3]}var Ut={lFrame:Zf(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $v(){return Ut.bindingsEnabled}function qe(){return Ut.lFrame.lView}function Fn(){return Ut.lFrame.tView}function ys(n){return Ut.lFrame.contextLView=n,n[8]}function Gr(){for(var n=Yf();null!==n&&64===n.type;)n=n.parent;return n}function Yf(){return Ut.lFrame.currentTNode}function Fa(n,a){var t=Ut.lFrame;t.currentTNode=n,t.isParent=a}function $e(){return Ut.lFrame.isParent}function Xv(){Ut.lFrame.isParent=!1}function zo(){return Ut.isInCheckNoChangesMode}function Kf(n){Ut.isInCheckNoChangesMode=n}function Gi(){var n=Ut.lFrame,a=n.bindingRootIndex;return-1===a&&(a=n.bindingRootIndex=n.tView.bindingStartIndex),a}function Eo(){return Ut.lFrame.bindingIndex}function Il(){return Ut.lFrame.bindingIndex++}function aa(n){var a=Ut.lFrame,t=a.bindingIndex;return a.bindingIndex=a.bindingIndex+n,t}function lb(n,a){var t=Ut.lFrame;t.bindingIndex=t.bindingRootIndex=n,Xf(a)}function Xf(n){Ut.lFrame.currentDirectiveIndex=n}function H_(){return Ut.lFrame.currentQueryIndex}function Jf(n){Ut.lFrame.currentQueryIndex=n}function cb(n){var a=n[1];return 2===a.type?a.declTNode:1===a.type?n[6]:null}function Zv(n,a,t){if(t&Jt.SkipSelf){for(var r=a,o=n;!(null!==(r=r.parent)||t&Jt.Host||null===(r=cb(o))||(o=o[15],10&r.type)););if(null===r)return!1;a=r,n=o}var u=Ut.lFrame=V_();return u.currentTNode=a,u.lView=n,!0}function Ll(n){var a=V_(),t=n[1];Ut.lFrame=a,a.currentTNode=t.firstChild,a.lView=n,a.tView=t,a.contextLView=n,a.bindingIndex=t.bindingStartIndex,a.inI18n=!1}function V_(){var n=Ut.lFrame,a=null===n?null:n.child;return null===a?Zf(n):a}function Zf(n){var a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=a),a}function Na(){var n=Ut.lFrame;return Ut.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var W_=Na;function ka(){var n=Na();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function yi(n){var a=Ut.lFrame.contextLView=function(n,a){for(;n>0;)a=a[15],n--;return a}(n,Ut.lFrame.contextLView);return a[8]}function Ki(){return Ut.lFrame.selectedIndex}function br(n){Ut.lFrame.selectedIndex=n}function xr(){var n=Ut.lFrame;return ms(n.tView,n.selectedIndex)}function nd(n,a){for(var t=a.directiveStart,r=a.directiveEnd;t<r;t++){var u=n.data[t].type.prototype,f=u.ngAfterContentInit,h=u.ngAfterContentChecked,v=u.ngAfterViewInit,g=u.ngAfterViewChecked,y=u.ngOnDestroy;f&&(n.contentHooks||(n.contentHooks=[])).push(-t,f),h&&((n.contentHooks||(n.contentHooks=[])).push(t,h),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,h)),v&&(n.viewHooks||(n.viewHooks=[])).push(-t,v),g&&((n.viewHooks||(n.viewHooks=[])).push(t,g),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,g)),null!=y&&(n.destroyHooks||(n.destroyHooks=[])).push(t,y)}}function ep(n,a,t){j_(n,a,3,t)}function Fl(n,a,t,r){(3&n[2])===t&&j_(n,a,t,r)}function eg(n,a){var t=n[2];(3&t)===a&&(t&=2047,n[2]=t+=1)}function j_(n,a,t,r){for(var u=null!=r?r:-1,f=a.length-1,h=0,v=void 0!==r?65535&n[18]:0;v<f;v++)if("number"==typeof a[v+1]){if(h=a[v],null!=r&&h>=r)break}else a[v]<0&&(n[18]+=65536),(h<u||-1==u)&&(fb(n,t,a,v),n[18]=(4294901760&n[18])+v+2),v++}function fb(n,a,t,r){var o=t[r]<0,u=t[r+1],h=n[o?-t[r]:t[r]];if(o){if(n[2]>>11<n[18]>>16&&(3&n[2])===a){n[2]+=2048;try{u.call(h)}finally{}}}else try{u.call(h)}finally{}}var rd=function n(a,t,r){G(this,n),this.factory=a,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r};function rp(n,a,t){for(var r=Er(n),o=0;o<t.length;){var u=t[o];if("number"==typeof u){if(0!==u)break;o++;var f=t[o++],h=t[o++],v=t[o++];r?n.setAttribute(a,h,v,f):a.setAttributeNS(f,h,v)}else{var g=u,y=t[++o];ng(g)?r&&n.setProperty(a,g,y):r?n.setAttribute(a,g,y):a.setAttribute(g,y),o++}}return o}function Y_(n){return 3===n||4===n||6===n}function ng(n){return 64===n.charCodeAt(0)}function od(n,a){if(null!==a&&0!==a.length)if(null===n||0===n.length)n=a.slice();else for(var t=-1,r=0;r<a.length;r++){var o=a[r];"number"==typeof o?t=o:0===t||bo(n,t,o,null,-1===t||2===t?a[++r]:null)}return n}function bo(n,a,t,r,o){var u=0,f=n.length;if(-1===a)f=-1;else for(;u<n.length;){var h=n[u++];if("number"==typeof h){if(h===a){f=-1;break}if(h>a){f=u-1;break}}}for(;u<n.length;){var v=n[u];if("number"==typeof v)break;if(v===t){if(null===r)return void(null!==o&&(n[u+1]=o));if(r===n[u+1])return void(n[u+2]=o)}u++,null!==r&&u++,null!==o&&u++}-1!==f&&(n.splice(f,0,a),u=f+1),n.splice(u++,0,t),null!==r&&n.splice(u++,0,r),null!==o&&n.splice(u++,0,o)}function K_(n){return-1!==n}function $i(n){return 32767&n}function kl(n,a){for(var t=function(n){return n>>16}(n),r=a;t>0;)r=r[15],t--;return r}var ad=!0;function ip(n){var a=ad;return ad=n,a}var mb=0;function sd(n,a){var t=ud(n,a);if(-1!==t)return t;var r=a[1];r.firstCreatePass&&(n.injectorIndex=a.length,op(r.data,n),op(a,null),op(r.blueprint,null));var o=ap(n,a),u=n.injectorIndex;if(K_(o))for(var f=$i(o),h=kl(o,a),v=h[1].data,g=0;g<8;g++)a[u+g]=h[f+g]|v[f+g];return a[u+8]=o,u}function op(n,a){n.push(0,0,0,0,0,0,0,0,a)}function ud(n,a){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===a[n.injectorIndex+8]?-1:n.injectorIndex}function ap(n,a){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;for(var t=0,r=null,o=a;null!==o;){var u=o[1],f=u.type;if(null===(r=2===f?u.declTNode:1===f?o[6]:null))return-1;if(t++,o=o[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function ld(n,a,t){!function(n,a,t){var r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Iu)&&(r=t[Iu]),null==r&&(r=t[Iu]=mb++);var o=255&r;a.data[n+(o>>5)]|=1<<o}(n,a,t)}function J_(n,a,t){if(t&Jt.Optional)return n;kf(a,"NodeInjector")}function cd(n,a,t,r){if(t&Jt.Optional&&void 0===r&&(r=null),0==(t&(Jt.Self|Jt.Host))){var o=n[9],u=cs(void 0);try{return o?o.get(a,r,t&Jt.Optional):Gv(a,r,t&Jt.Optional)}finally{cs(u)}}return J_(r,a,t)}function Z_(n,a,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jt.Default,o=arguments.length>4?arguments[4]:void 0;if(null!==n){var u=Q_(t);if("function"==typeof u){if(!Zv(a,n,r))return r&Jt.Host?J_(o,t,r):cd(a,t,r,o);try{var f=u(r);if(null!=f||r&Jt.Optional)return f;kf(t)}finally{W_()}}else if("number"==typeof u){var h=null,v=ud(n,a),g=-1,y=r&Jt.Host?a[16][6]:null;for((-1===v||r&Jt.SkipSelf)&&(-1!==(g=-1===v?ap(n,a):a[v+8])&&tC(r,!1)?(h=a[1],v=$i(g),a=kl(g,a)):v=-1);-1!==v;){var _=a[1];if(eC(u,v,_.data)){var C=Cb(v,a,t,h,r,y);if(C!==rg)return C}-1!==(g=a[v+8])&&tC(r,a[1].data[v+8]===y)&&eC(u,v,a)?(h=_,v=$i(g),a=kl(g,a)):v=-1}}}return cd(a,t,r,o)}var rg={};function _b(){return new ku(Gr(),qe())}function Cb(n,a,t,r,o,u){var f=a[1],h=f.data[n+8],y=sp(h,f,t,null==r?Ia(h)&&ad:r!=f&&0!=(3&h.type),o&Jt.Host&&u===h);return null!==y?dd(a,f,y,h):rg}function sp(n,a,t,r,o){for(var u=n.providerIndexes,f=a.data,h=1048575&u,v=n.directiveStart,y=u>>20,C=o?h+y:n.directiveEnd,S=r?h:h+y;S<C;S++){var R=f[S];if(S<v&&t===R||S>=v&&R.type===t)return S}if(o){var b=f[v];if(b&&fo(b)&&b.type===t)return v}return null}function dd(n,a,t,r){var o=n[t],u=a.data;if(function(n){return n instanceof rd}(o)){var f=o;f.resolving&&function(n,a){throw new Fi("200","Circular dependency in DI detected for ".concat(n).concat(""))}(Ui(u[t]));var h=ip(f.canSeeViewProviders);f.resolving=!0;var v=f.injectImpl?cs(f.injectImpl):null;Zv(n,r,Jt.Default);try{o=n[t]=f.factory(void 0,u,n,r),a.firstCreatePass&&t>=r.directiveStart&&function(n,a,t){var r=a.type.prototype,u=r.ngOnInit,f=r.ngDoCheck;if(r.ngOnChanges){var h=Uv(a);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,h),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,h)}u&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,u),f&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,f),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,f))}(t,u[t],a)}finally{null!==v&&cs(v),ip(h),f.resolving=!1,W_()}}return o}function Q_(n){if("string"==typeof n)return n.charCodeAt(0)||0;var a=n.hasOwnProperty(Iu)?n[Iu]:void 0;return"number"==typeof a?a>=0?255&a:_b:a}function eC(n,a,t){return!!(t[a+(n>>5)]&1<<n)}function tC(n,a){return!(n&Jt.Self||n&Jt.Host&&a)}var ku=function(){function n(a,t){G(this,n),this._tNode=a,this._lView=t}return j(n,[{key:"get",value:function(t,r,o){return Z_(this._tNode,this._lView,t,o,r)}}]),n}();function ig(n){return Nf(n)?function(){var a=ig(cn(n));return a&&a()}:Js(n)}function Gl(n){return function(n,a){if("class"===a)return n.classes;if("style"===a)return n.styles;var t=n.attrs;if(t)for(var r=t.length,o=0;o<r;){var u=t[o];if(Y_(u))break;if(0===u)o+=2;else if("number"==typeof u)for(o++;o<r&&"string"==typeof t[o];)o++;else{if(u===a)return t[o+1];o+=2}}return null}(Gr(),n)}var Bl="__parameters__",jo="__prop__metadata__";function Hl(n){return function(){if(n){var t=n.apply(void 0,arguments);for(var r in t)this[r]=t[r]}}}function Ga(n,a,t){return ds(function(){var r=Hl(a);function o(){for(var u=arguments.length,f=new Array(u),h=0;h<u;h++)f[h]=arguments[h];if(this instanceof o)return r.apply(this,f),this;var v=pi(o,f);return g.annotation=v,g;function g(y,_,C){for(var S=y.hasOwnProperty(Bl)?y[Bl]:Object.defineProperty(y,Bl,{value:[]})[Bl];S.length<=C;)S.push(null);return(S[C]=S[C]||[]).push(v),y}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}function Vl(n,a,t,r){return ds(function(){var o=Hl(a);function u(){for(var f=arguments.length,h=new Array(f),v=0;v<f;v++)h[v]=arguments[v];if(this instanceof u)return o.apply(this,h),this;var g=pi(u,h);function y(_,C){var S=_.constructor,R=S.hasOwnProperty(jo)?S[jo]:Object.defineProperty(S,jo,{value:{}})[jo];R[C]=R.hasOwnProperty(C)&&R[C]||[],R[C].unshift(g),r&&r.apply(void 0,[_,C].concat(h))}return y}return t&&(u.prototype=Object.create(t.prototype)),u.prototype.ngMetadataName=n,u.annotationCls=u,u})}var Dn=function(){function n(a,t){G(this,n),this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=an({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}return j(n,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),n}(),og=new Dn("AnalyzeForEntryComponents"),up=function n(){G(this,n)},Wl=Vl("ContentChildren",function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:n,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0},a)},up);function qo(n,a){void 0===a&&(a=n);for(var t=0;t<n.length;t++){var r=n[t];Array.isArray(r)?(a===n&&(a=n.slice(0,t)),qo(r,a)):a!==n&&a.push(r)}return a}function Ba(n,a){n.forEach(function(t){return Array.isArray(t)?Ba(t,a):a(t)})}function rC(n,a,t){a>=n.length?n.push(t):n.splice(a,0,t)}function lp(n,a){return a>=n.length-1?n.pop():n.splice(a,1)[0]}function po(n,a,t){var r=Ul(n,a);return r>=0?n[1|r]=t:function(n,a,t,r){var o=n.length;if(o==a)n.push(t,r);else if(1===o)n.push(r,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>a;)n[o]=n[o-2],o--;n[a]=t,n[a+1]=r}}(n,r=~r,a,t),r}function ug(n,a){var t=Ul(n,a);if(t>=0)return n[1|t]}function Ul(n,a){return function(n,a,t){for(var r=0,o=n.length>>t;o!==r;){var u=r+(o-r>>1),f=n[u<<t];if(a===f)return u<<t;f>a?o=u:r=u+1}return~(o<<t)}(n,a,1)}var Hu={},cg="__NG_DI_FLAG__",dp="ngTempTokenPath",Pb=/\n/gm,Oe="__source",sC=or({provide:String,useValue:or}),hd=void 0;function dg(n){var a=hd;return hd=n,a}function vt(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt.Default;if(void 0===hd)throw new Error("inject() must be called from an injection context");return null===hd?Gv(n,void 0,a):hd.get(n,a&Jt.Optional?null:void 0,a)}function Mt(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt.Default;return(Hf()||vt)(cn(n),a)}function fg(n){for(var a=[],t=0;t<n.length;t++){var r=cn(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var o=void 0,u=Jt.Default,f=0;f<r.length;f++){var h=r[f],v=pg(h);"number"==typeof v?-1===v?o=h.token:u|=v:o=h}a.push(Mt(o,u))}else a.push(Mt(r))}return a}function jl(n,a){return n[cg]=a,n.prototype[cg]=a,n}function pg(n){return n[cg]}function lC(n,a,t,r){var o=n[dp];throw a[Oe]&&o.unshift(a[Oe]),n.message=function(n,a,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;var o=Gn(a);if(Array.isArray(a))o=a.map(Gn).join(" -> ");else if("object"==typeof a){var u=[];for(var f in a)if(a.hasOwnProperty(f)){var h=a[f];u.push(f+":"+("string"==typeof h?JSON.stringify(h):Gn(h)))}o="{".concat(u.join(", "),"}")}return"".concat(t).concat(r?"("+r+")":"","[").concat(o,"]: ").concat(n.replace(Pb,"\n  "))}("\n"+n.message,o,t,r),n.ngTokenPath=o,n[dp]=null,n}var md=jl(Ga("Inject",function(n){return{token:n}}),-1),Va=jl(Ga("Optional"),8),ql=jl(Ga("SkipSelf"),4),yg=function(){function n(a){G(this,n),this.changingThisBreaksApplicationSecurity=a}return j(n,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see https://g.co/ng/security#xss)"}}]),n}();function Xi(n){return n instanceof yg?n.changingThisBreaksApplicationSecurity:n}var yC=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Xb=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Tr=function(){return(Tr=Tr||{})[Tr.NONE=0]="NONE",Tr[Tr.HTML=1]="HTML",Tr[Tr.STYLE=2]="STYLE",Tr[Tr.SCRIPT=3]="SCRIPT",Tr[Tr.URL=4]="URL",Tr[Tr.RESOURCE_URL=5]="RESOURCE_URL",Tr}();function Ci(n){var a=function(){var n=qe();return n&&n[12]}();return a?a.sanitize(Tr.URL,n)||"":function(n,a){var t=function(n){return n instanceof yg&&n.getTypeName()||null}(n);if(null!=t&&t!==a){if("ResourceURL"===t&&"URL"===a)return!0;throw new Error("Required a safe ".concat(a,", got a ").concat(t," (see https://g.co/ng/security#xss)"))}return t===a}(n,"URL")?Xi(n):function(n){return(n=String(n)).match(yC)||n.match(Xb)?n:"unsafe:"+n}(tn(n))}var TC="__ngContext__";function Rr(n,a){n[TC]=a}function wd(n){var a=function(n){return n[TC]||null}(n);return a?Array.isArray(a)?a:a.lView:null}function bg(n){return n.ngOriginalError}function fx(n){for(var a=arguments.length,t=new Array(a>1?a-1:0),r=1;r<a;r++)t[r-1]=arguments[r];n.error.apply(n,t)}var Xl=function(){function n(){G(this,n),this._console=console}return j(n,[{key:"handleError",value:function(t){var r=this._findOriginalError(t),o=function(n){return n&&n.ngErrorLogger||fx}(t);o(this._console,"ERROR",t),r&&o(this._console,"ORIGINAL ERROR",r)}},{key:"_findOriginalError",value:function(t){for(var r=t&&bg(t);r&&bg(r);)r=bg(r);return r||null}}]),n}(),IC=function(){return("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(tr)}();function ua(n){return n instanceof Function?n():n}var Ro=function(){return(Ro=Ro||{})[Ro.Important=1]="Important",Ro[Ro.DashCase=2]="DashCase",Ro}();function Ap(n,a){return undefined(n,a)}function Yu(n){var a=n[3];return Vo(a)?a[3]:a}function Tg(n){return FC(n[13])}function Tp(n){return FC(n[4])}function FC(n){for(;null!==n&&!Vo(n);)n=n[4];return n}function wi(n,a,t,r,o){if(null!=r){var u,f=!1;Vo(r)?u=r:Pa(r)&&(f=!0,r=r[0]);var h=kr(r);0===n&&null!==t?null==o?qC(a,t,h):nu(a,t,h,o||null,!0):1===n&&null!==t?nu(a,t,h,o||null,!0):2===n?function(n,a,t){var r=Mp(n,a);r&&function(n,a,t,r){Er(n)?n.removeChild(a,t,r):a.removeChild(t)}(n,r,a,t)}(a,h,f):3===n&&a.destroyNode(h),null!=u&&function(n,a,t,r,o){var u=t[7];u!==kr(t)&&wi(a,n,r,u,o);for(var h=10;h<t.length;h++){var v=t[h];xd(v[1],v,n,a,r,u)}}(a,n,u,t,o)}}function Dp(n,a){return Er(n)?n.createText(a):n.createTextNode(a)}function Ji(n,a,t){return Er(n)?n.createElement(a,t):null===t?n.createElement(a):n.createElementNS(t,a)}function WC(n,a){var t=n[9],r=t.indexOf(a),o=a[3];1024&a[2]&&(a[2]&=-1025,Kv(o,-1)),t.splice(r,1)}function Dg(n,a){if(!(n.length<=10)){var t=10+a,r=n[t];if(r){var o=r[17];null!==o&&o!==n&&WC(o,r),a>0&&(n[t-1][4]=r[4]);var u=lp(n,10+a);!function(n,a){xd(n,a,a[11],2,null,null),a[0]=null,a[6]=null}(r[1],r);var f=u[19];null!==f&&f.detachView(u[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function Ku(n,a){if(!(256&a[2])){var t=a[11];Er(t)&&t.destroyNode&&xd(n,a,t,3,null,null),function(n){var a=n[13];if(!a)return Mg(n[1],n);for(;a;){var t=null;if(Pa(a))t=a[13];else{var r=a[10];r&&(t=r)}if(!t){for(;a&&!a[4]&&a!==n;)Pa(a)&&Mg(a[1],a),a=a[3];null===a&&(a=n),Pa(a)&&Mg(a[1],a),t=a&&a[4]}a=t}}(a)}}function Mg(n,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function(n,a){var t;if(null!=n&&null!=(t=n.destroyHooks))for(var r=0;r<t.length;r+=2){var o=a[t[r]];if(!(o instanceof rd)){var u=t[r+1];if(Array.isArray(u))for(var f=0;f<u.length;f+=2){var h=o[u[f]],v=u[f+1];try{v.call(h)}finally{}}else try{u.call(o)}finally{}}}}(n,a),function(n,a){var t=n.cleanup,r=a[7],o=-1;if(null!==t)for(var u=0;u<t.length-1;u+=2)if("string"==typeof t[u]){var f=t[u+1],h="function"==typeof f?f(a):kr(a[f]),v=r[o=t[u+2]],g=t[u+3];"boolean"==typeof g?h.removeEventListener(t[u],v,g):g>=0?r[o=g]():r[o=-g].unsubscribe(),u+=2}else{var y=r[o=t[u+1]];t[u].call(y)}if(null!==r){for(var _=o+1;_<r.length;_++)(0,r[_])();a[7]=null}}(n,a),1===a[1].type&&Er(a[11])&&a[11].destroy();var t=a[17];if(null!==t&&Vo(a[3])){t!==a[3]&&WC(t,a);var r=a[19];null!==r&&r.detachView(n)}}}function zC(n,a,t){return function(n,a,t){for(var r=a;null!==r&&40&r.type;)r=(a=r).parent;if(null===r)return t[0];if(2&r.flags){var o=n.data[r.directiveStart].encapsulation;if(o===Ta.None||o===Ta.Emulated)return null}return Uo(r,t)}(n,a.parent,t)}function nu(n,a,t,r,o){Er(n)?n.insertBefore(a,t,r,o):a.insertBefore(t,r,o)}function qC(n,a,t){Er(n)?n.appendChild(a,t):a.appendChild(t)}function YC(n,a,t,r,o){null!==r?nu(n,a,t,r,o):qC(n,a,t)}function Mp(n,a){return Er(n)?n.parentNode(a):a.parentNode}var XC=function(n,a,t){return 40&n.type?Uo(n,t):null};function Pp(n,a,t,r){var o=zC(n,r,a),u=a[11],h=function(n,a,t){return XC(n,a,t)}(r.parent||a[6],r,a);if(null!=o)if(Array.isArray(t))for(var v=0;v<t.length;v++)YC(u,o,t[v],h,!1);else YC(u,o,t,h,!1)}function Ip(n,a){if(null!==a){var t=a.type;if(3&t)return Uo(a,n);if(4&t)return Ql(-1,n[a.index]);if(8&t){var r=a.child;if(null!==r)return Ip(n,r);var o=n[a.index];return Vo(o)?Ql(-1,o):kr(o)}if(32&t)return Ap(a,n)()||kr(n[a.index]);var h=ZC(n,a);return null!==h?Array.isArray(h)?h[0]:Ip(Yu(n[16]),h):Ip(n,a.next)}return null}function ZC(n,a){return null!==a?n[16][6].projection[a.projection]:null}function Ql(n,a){var t=10+n+1;if(t<a.length){var r=a[t],o=r[1].firstChild;if(null!==o)return Ip(r,o)}return a[7]}function Cs(n,a,t,r,o,u,f){for(;null!=t;){var h=r[t.index],v=t.type;if(f&&0===a&&(h&&Rr(kr(h),r),t.flags|=4),64!=(64&t.flags))if(8&v)Cs(n,a,t.child,r,o,u,!1),wi(a,n,o,h,u);else if(32&v){for(var g=Ap(t,r),y=void 0;y=g();)wi(a,n,o,y,u);wi(a,n,o,h,u)}else 16&v?xn(n,a,r,t,o,u):wi(a,n,o,h,u);t=f?t.projectionNext:t.next}}function xd(n,a,t,r,o,u){Cs(t,r,n.firstChild,a,o,u,!1)}function xn(n,a,t,r,o,u){var f=t[16],v=f[6].projection[r.projection];if(Array.isArray(v))for(var g=0;g<v.length;g++)wi(a,n,o,v[g],u);else Cs(n,a,v,f[3],o,u,!0)}function Og(n,a,t){Er(n)?n.setAttribute(a,"style",t):a.style.cssText=t}function Pg(n,a,t){Er(n)?""===t?n.removeAttribute(a,"class"):n.setAttribute(a,"class",t):a.className=t}function Ig(n,a,t){for(var r=n.length;;){var o=n.indexOf(a,t);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){var u=a.length;if(o+u===r||n.charCodeAt(o+u)<=32)return o}t=o+1}}var Lg="ng-template";function nw(n,a,t){for(var r=0;r<n.length;){var o=n[r++];if(t&&"class"===o){if(-1!==Ig((o=n[r]).toLowerCase(),a,0))return!0}else if(1===o){for(;r<n.length&&"string"==typeof(o=n[r++]);)if(o.toLowerCase()===a)return!0;return!1}}return!1}function rw(n){return 4===n.type&&n.value!==Lg}function ca(n,a,t){return a===(4!==n.type||t?n.value:Lg)}function xx(n,a,t){for(var r=4,o=n.attrs||[],u=function(n){for(var a=0;a<n.length;a++)if(Y_(n[a]))return a;return n.length}(o),f=!1,h=0;h<a.length;h++){var v=a[h];if("number"!=typeof v){if(!f)if(4&r){if(r=2|1&r,""!==v&&!ca(n,v,t)||""===v&&1===a.length){if(Hi(r))return!1;f=!0}}else{var g=8&r?v:a[++h];if(8&r&&null!==n.attrs){if(!nw(n.attrs,g,t)){if(Hi(r))return!1;f=!0}continue}var _=Rx(8&r?"class":v,o,rw(n),t);if(-1===_){if(Hi(r))return!1;f=!0;continue}if(""!==g){var C;C=_>u?"":o[_+1].toLowerCase();var S=8&r?C:null;if(S&&-1!==Ig(S,g,0)||2&r&&g!==C){if(Hi(r))return!1;f=!0}}}}else{if(!f&&!Hi(r)&&!Hi(v))return!1;if(f&&Hi(v))continue;f=!1,r=v|1&r}}return Hi(r)||f}function Hi(n){return 0==(1&n)}function Rx(n,a,t,r){if(null===a)return-1;var o=0;if(r||!t){for(var u=!1;o<a.length;){var f=a[o];if(f===n)return o;if(3===f||6===f)u=!0;else{if(1===f||2===f){for(var h=a[++o];"string"==typeof h;)h=a[++o];continue}if(4===f)break;if(0===f){o+=4;continue}}o+=u?1:2}return-1}return function(n,a){var t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){var r=n[t];if("number"==typeof r)return-1;if(r===a)return t;t++}return-1}(a,n)}function ec(n,a){for(var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<a.length;r++)if(xx(n,a[r],t))return!0;return!1}function Fg(n,a){return n?":not("+a.trim()+")":a}function Dx(n){for(var a=n[0],t=1,r=2,o="",u=!1;t<n.length;){var f=n[t];if("string"==typeof f)if(2&r){var h=n[++t];o+="["+f+(h.length>0?'="'+h+'"':"")+"]"}else 8&r?o+="."+f:4&r&&(o+=" "+f);else""!==o&&!Hi(f)&&(a+=Fg(u,o),o=""),r=f,u=u||!Hi(r);t++}return""!==o&&(a+=Fg(u,o)),a}var nn={};function be(n){Ng(Fn(),qe(),Ki()+n,zo())}function Ng(n,a,t,r){if(!r)if(3==(3&a[2])){var u=n.preOrderCheckHooks;null!==u&&ep(a,u,t)}else{var f=n.preOrderHooks;null!==f&&Fl(a,f,0,t)}br(t)}function tc(n,a){return n<<17|a<<2}function $o(n){return n>>17&32767}function Fp(n){return 2|n}function Ss(n){return(131068&n)>>2}function Np(n,a){return-131069&n|a<<2}function Gg(n){return 1|n}function mw(n,a){var t=n.contentQueries;if(null!==t)for(var r=0;r<t.length;r+=2){var u=t[r+1];if(-1!==u){var f=n.data[u];Jf(t[r]),f.contentQueries(2,a[u],u)}}}function Td(n,a,t,r,o,u,f,h,v,g){var y=a.blueprint.slice();return y[0]=o,y[2]=140|r,qf(y),y[3]=y[15]=n,y[8]=t,y[10]=f||n&&n[10],y[11]=h||n&&n[11],y[12]=v||n&&n[12]||null,y[9]=g||n&&n[9]||null,y[6]=u,y[16]=2==a.type?n[16]:y,y}function Es(n,a,t,r,o){var u=n.data[a];if(null===u)u=function(n,a,t,r,o){var u=Yf(),f=$e(),v=n.data[a]=function(n,a,t,r,o,u){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:u,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,f?u:u&&u.parent,t,a,r,o);return null===n.firstChild&&(n.firstChild=v),null!==u&&(f?null==u.child&&null!==v.parent&&(u.child=v):null===u.next&&(u.next=v)),v}(n,a,t,r,o),Ut.lFrame.inI18n&&(u.flags|=64);else if(64&u.type){u.type=t,u.value=r,u.attrs=o;var f=function(){var n=Ut.lFrame,a=n.currentTNode;return n.isParent?a:a.parent}();u.injectorIndex=null===f?-1:f.injectorIndex}return Fa(u,!0),u}function nc(n,a,t,r){if(0===t)return-1;for(var o=a.length,u=0;u<t;u++)a.push(r),n.blueprint.push(r),n.data.push(null);return o}function bs(n,a,t){Ll(a);try{var r=n.viewQuery;null!==r&&sm(1,r,t);var o=n.template;null!==o&&ww(n,a,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&mw(n,a),n.staticViewQueries&&sm(2,n.viewQuery,t);var u=n.components;null!==u&&function(n,a){for(var t=0;t<a.length;t++)Lw(n,a[t])}(a,u)}catch(f){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),f}finally{a[2]&=-5,ka()}}function rc(n,a,t,r){var o=a[2];if(256!=(256&o)){Ll(a);var u=zo();try{qf(a),function(n){Ut.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&ww(n,a,t,2,r);var f=3==(3&o);if(!u)if(f){var h=n.preOrderCheckHooks;null!==h&&ep(a,h,null)}else{var v=n.preOrderHooks;null!==v&&Fl(a,v,0,null),eg(a,0)}if(function(n){for(var a=Tg(n);null!==a;a=Tp(a))if(a[2])for(var t=a[9],r=0;r<t.length;r++){var o=t[r];0==(1024&o[2])&&Kv(o[3],1),o[2]|=1024}}(a),function(n){for(var a=Tg(n);null!==a;a=Tp(a))for(var t=10;t<a.length;t++){var r=a[t],o=r[1];Qc(r)&&rc(o,r,o.template,r[8])}}(a),null!==n.contentQueries&&mw(n,a),!u)if(f){var g=n.contentCheckHooks;null!==g&&ep(a,g)}else{var y=n.contentHooks;null!==y&&Fl(a,y,1),eg(a,1)}!function(n,a){var t=n.hostBindingOpCodes;if(null!==t)try{for(var r=0;r<t.length;r++){var o=t[r];if(o<0)br(~o);else{var u=o,f=t[++r],h=t[++r];lb(f,u),h(2,a[u])}}}finally{br(-1)}}(n,a);var _=n.components;null!==_&&function(n,a){for(var t=0;t<a.length;t++)qx(n,a[t])}(a,_);var C=n.viewQuery;if(null!==C&&sm(2,C,r),!u)if(f){var S=n.viewCheckHooks;null!==S&&ep(a,S)}else{var R=n.viewHooks;null!==R&&Fl(a,R,2),eg(a,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),u||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,Kv(a[3],-1))}finally{ka()}}}function Cw(n,a,t,r){var o=a[10],u=!zo(),f=N_(a);try{u&&!f&&o.begin&&o.begin(),f&&bs(n,a,r),rc(n,a,t,r)}finally{u&&!f&&o.end&&o.end()}}function ww(n,a,t,r,o){var u=Ki(),f=2&r;try{br(-1),f&&a.length>20&&Ng(n,a,20,zo()),t(r,o)}finally{br(u)}}function $g(n,a,t){if(Vv(a))for(var o=a.directiveEnd,u=a.directiveStart;u<o;u++){var f=n.data[u];f.contentQueries&&f.contentQueries(1,t[u],u)}}function Xg(n,a,t){!$v()||(function(n,a,t,r){var o=t.directiveStart,u=t.directiveEnd;n.firstCreatePass||sd(t,a),Rr(r,a);for(var f=t.initialInputs,h=o;h<u;h++){var v=n.data[h],g=fo(v);g&&Ow(a,t,v);var y=dd(a,n,h,t);Rr(y,a),null!==f&&ic(0,h-o,y,v,0,f),g&&(So(t.index,a)[8]=y)}}(n,a,t,Uo(t,a)),128==(128&t.flags)&&function(n,a,t){var r=t.directiveStart,o=t.directiveEnd,f=t.index,h=Ut.lFrame.currentDirectiveIndex;try{br(f);for(var v=r;v<o;v++){var g=n.data[v],y=a[v];Xf(v),(null!==g.hostBindings||0!==g.hostVars||null!==g.hostAttrs)&&nm(g,y)}}finally{br(-1),Xf(h)}}(n,a,t))}function Jg(n,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uo,r=a.localNames;if(null!==r)for(var o=a.index+1,u=0;u<r.length;u+=2){var f=r[u+1],h=-1===f?t(a,n):n[f];n[o++]=h}}function zp(n){var a=n.tView;return null===a||a.incompleteFirstPass?n.tView=jp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):a}function jp(n,a,t,r,o,u,f,h,v,g){var y=20+r,_=y+o,C=function(n,a){for(var t=[],r=0;r<a;r++)t.push(r<n?null:nn);return t}(y,_),S="function"==typeof g?g():g;return C[1]={type:n,blueprint:C,template:t,queries:null,viewQuery:h,declTNode:a,data:C.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof u?u():u,pipeRegistry:"function"==typeof f?f():f,firstChild:null,schemas:v,consts:S,incompleteFirstPass:!1}}function qp(n,a,t,r){var o=um(a);null===t?o.push(r):(o.push(t),n.firstCreatePass&&Nw(n).push(r,o.length-1))}function bw(n,a,t){for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(a,o):t[r]=[a,o]}return t}function ho(n,a,t,r,o,u,f,h){var y,v=Uo(a,t),g=a.inputs;!h&&null!=g&&(y=g[r])?(kw(n,t,y,r,o),Ia(a)&&function(n,a){var t=So(a,n);16&t[2]||(t[2]|=64)}(t,a.index)):3&a.type&&(r=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),o=null!=f?f(o,a.value||"",r):o,Er(u)?u.setProperty(v,r,o):ng(r)||(v.setProperty?v.setProperty(r,o):v[r]=o))}function tm(n,a,t,r){var o=!1;if($v()){var u=function(n,a,t){var r=n.directiveRegistry,o=null;if(r)for(var u=0;u<r.length;u++){var f=r[u];ec(t,f.selectors,!1)&&(o||(o=[]),ld(sd(t,a),n,f.type),fo(f)?(Tw(n,t),o.unshift(f)):o.push(f))}return o}(n,a,t),f=null===r?null:{"":-1};if(null!==u){o=!0,Dw(t,n.data.length,u.length);for(var h=0;h<u.length;h++){var v=u[h];v.providersResolver&&v.providersResolver(v)}for(var g=!1,y=!1,_=nc(n,a,u.length,null),C=0;C<u.length;C++){var S=u[C];t.mergedAttrs=od(t.mergedAttrs,S.hostAttrs),Mw(n,t,a,_,S),jx(_,S,f),null!==S.contentQueries&&(t.flags|=8),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(t.flags|=128);var R=S.type.prototype;!g&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),g=!0),!y&&(R.ngOnChanges||R.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),y=!0),_++}!function(n,a){for(var r=a.directiveEnd,o=n.data,u=a.attrs,f=[],h=null,v=null,g=a.directiveStart;g<r;g++){var y=o[g],_=y.inputs,C=null===u||rw(a)?null:$u(_,u);f.push(C),h=bw(_,g,h),v=bw(y.outputs,g,v)}null!==h&&(h.hasOwnProperty("class")&&(a.flags|=16),h.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=f,a.inputs=h,a.outputs=v}(n,t)}f&&function(n,a,t){if(a)for(var r=n.localNames=[],o=0;o<a.length;o+=2){var u=t[a[o+1]];if(null==u)throw new Fi("301","Export of name '".concat(a[o+1],"' not found!"));r.push(a[o],u)}}(t,r,f)}return t.mergedAttrs=od(t.mergedAttrs,t.attrs),o}function Od(n,a,t,r,o,u){var f=u.hostBindings;if(f){var h=n.hostBindingOpCodes;null===h&&(h=n.hostBindingOpCodes=[]);var v=~a.index;(function(n){for(var a=n.length;a>0;){var t=n[--a];if("number"==typeof t&&t<0)return t}return 0})(h)!=v&&h.push(v),h.push(r,o,f)}}function nm(n,a){null!==n.hostBindings&&n.hostBindings(1,a)}function Tw(n,a){a.flags|=2,(n.components||(n.components=[])).push(a.index)}function jx(n,a,t){if(t){if(a.exportAs)for(var r=0;r<a.exportAs.length;r++)t[a.exportAs[r]]=n;fo(a)&&(t[""]=n)}}function Dw(n,a,t){n.flags|=1,n.directiveStart=a,n.directiveEnd=a+t,n.providerIndexes=a}function Mw(n,a,t,r,o){n.data[r]=o;var u=o.factory||(o.factory=Js(o.type)),f=new rd(u,fo(o),null);n.blueprint[r]=f,t[r]=f,Od(n,a,0,r,nc(n,t,o.hostVars,nn),o)}function Ow(n,a,t){var r=Uo(a,n),o=zp(t),u=n[10],f=Pd(n,Td(n,o,null,t.onPush?64:16,r,a,u,u.createRenderer(r,t),null,null));n[a.index]=f}function da(n,a,t,r,o,u){var f=Uo(n,a);!function(n,a,t,r,o,u,f){if(null==u)Er(n)?n.removeAttribute(a,o,t):a.removeAttribute(o);else{var h=null==f?tn(u):f(u,r||"",o);Er(n)?n.setAttribute(a,o,h,t):t?a.setAttributeNS(t,o,h):a.setAttribute(o,h)}}(a[11],f,u,n.value,t,r,o)}function ic(n,a,t,r,o,u){var f=u[a];if(null!==f)for(var h=r.setInput,v=0;v<f.length;){var g=f[v++],y=f[v++],_=f[v++];null!==h?r.setInput(t,_,g,y):t[y]=_}}function $u(n,a){for(var t=null,r=0;r<a.length;){var o=a[r];if(0!==o)if(5!==o){if("number"==typeof o)break;n.hasOwnProperty(o)&&(null===t&&(t=[]),t.push(o,n[o],a[r+1])),r+=2}else r+=2;else r+=4}return t}function Pw(n,a,t,r){return new Array(n,!0,!1,a,null,0,r,t,null,null)}function qx(n,a){var t=So(a,n);if(Qc(t)){var r=t[1];80&t[2]?rc(r,t,r.template,t[8]):t[5]>0&&Yp(t)}}function Yp(n){for(var a=Tg(n);null!==a;a=Tp(a))for(var t=10;t<a.length;t++){var r=a[t];if(1024&r[2]){var o=r[1];rc(o,r,o.template,r[8])}else r[5]>0&&Yp(r)}var f=n[1].components;if(null!==f)for(var h=0;h<f.length;h++){var v=So(f[h],n);Qc(v)&&v[5]>0&&Yp(v)}}function Lw(n,a){var t=So(a,n),r=t[1];(function(n,a){for(var t=a.length;t<n.blueprint.length;t++)a.push(n.blueprint[t])})(r,t),bs(r,t,t[8])}function Pd(n,a){return n[13]?n[14][4]=a:n[13]=a,n[14]=a,a}function im(n){for(;n;){n[2]|=64;var a=Yu(n);if(UE(n)&&!a)return n;n=a}return null}function om(n,a,t){var r=a[10];r.begin&&r.begin();try{rc(n,a,n.template,t)}catch(o){throw lm(a,o),o}finally{r.end&&r.end()}}function Fd(n){!function(n){for(var a=0;a<n.components.length;a++){var t=n.components[a],r=wd(t),o=r[1];Cw(o,r,o.template,t)}}(n[8])}function sm(n,a,t){Jf(0),a(n,t)}var $x=function(){return Promise.resolve(null)}();function um(n){return n[7]||(n[7]=[])}function Nw(n){return n.cleanup||(n.cleanup=[])}function lm(n,a){var t=n[9],r=t?t.get(Xl,null):null;r&&r.handleError(a)}function kw(n,a,t,r,o){for(var u=0;u<t.length;){var f=t[u++],h=t[u++],v=a[f],g=n.data[f];null!==g.setInput?g.setInput(v,o,r,h):v[h]=o}}function Si(n,a,t){var r=fr(a,n);!function(n,a,t){Er(n)?n.setValue(a,t):a.textContent=t}(n[11],r,t)}function Kp(n,a,t){var r=t?n.styles:null,o=t?n.classes:null,u=0;if(null!==a)for(var f=0;f<a.length;f++){var h=a[f];"number"==typeof h?u=h:1==u?o=Fr(o,h):2==u&&(r=Fr(r,h+": "+a[++f]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}var $p=new Dn("INJECTOR",-1),Bw=function(){function n(){G(this,n)}return j(n,[{key:"get",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hu;if(r===Hu){var o=new Error("NullInjectorError: No provider for ".concat(Gn(t),"!"));throw o.name="NullInjectorError",o}return r}}]),n}(),Xp=new Dn("Set Injector scope."),kd={},Gd={},Jp=void 0;function Hw(){return void 0===Jp&&(Jp=new Bw),Jp}function cm(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,o=Vw(n,a,t,r);return o._resolveInjectorDefTypes(),o}function Vw(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new Zp(n,t,a||Hw(),r)}var Zp=function(){function n(a,t,r){var o=this,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;G(this,n),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var f=[];t&&Ba(t,function(v){return o.processProvider(v,a,t)}),Ba([a],function(v){return o.processInjectorType(v,[],f)}),this.records.set($p,oc(void 0,this));var h=this.records.get(Xp);this.scope=null!=h?h.value:null,this.source=u||("object"==typeof a?null:Gn(a))}return j(n,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(t){return t.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hu,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jt.Default;this.assertNotDestroyed();var u=dg(this),f=cs(void 0);try{if(!(o&Jt.SkipSelf)){var h=this.records.get(t);if(void 0===h){var v=su(t)&&zc(t);h=v&&this.injectableDefInScope(v)?oc(Qp(t),kd):null,this.records.set(t,h)}if(null!=h)return this.hydrate(t,h)}var g=o&Jt.Self?Hw():this.parent;return g.get(t,r=o&Jt.Optional&&r===Hu?null:r)}catch(_){if("NullInjectorError"===_.name){var y=_[dp]=_[dp]||[];if(y.unshift(Gn(t)),u)throw _;return lC(_,t,"R3InjectorError",this.source)}throw _}finally{cs(f),dg(u)}}},{key:"_resolveInjectorDefTypes",value:function(){var t=this;this.injectorDefTypes.forEach(function(r){return t.get(r)})}},{key:"toString",value:function(){var t=[];return this.records.forEach(function(o,u){return t.push(Gn(u))}),"R3Injector[".concat(t.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(t,r,o){var u=this;if(!(t=cn(t)))return!1;var f=Bf(t),h=null==f&&t.ngModule||void 0,v=void 0===h?t:h,_=-1!==o.indexOf(v);if(void 0!==h&&(f=Bf(h)),null==f)return!1;if(null!=f.imports&&!_){var C;o.push(v);try{Ba(f.imports,function(D){u.processInjectorType(D,r,o)&&(void 0===C&&(C=[]),C.push(D))})}finally{}if(void 0!==C)for(var S=function(M){var O=C[M],L=O.ngModule,H=O.providers;Ba(H,function(z){return u.processProvider(z,L,H||nr)})},R=0;R<C.length;R++)S(R)}this.injectorDefTypes.add(v);var b=Js(v)||function(){return new v};this.records.set(v,oc(b,kd));var E=f.providers;if(null!=E&&!_){var T=t;Ba(E,function(D){return u.processProvider(D,T,E)})}return void 0!==h&&void 0!==t.providers}},{key:"processProvider",value:function(t,r,o){var u=xs(t=cn(t))?t:cn(t&&t.provide),f=function(n,a,t){return ac(n)?oc(void 0,n.useValue):oc(dm(n),kd)}(t);if(xs(t)||!0!==t.multi)this.records.get(u);else{var h=this.records.get(u);h||((h=oc(void 0,kd,!0)).factory=function(){return fg(h.multi)},this.records.set(u,h)),u=t,h.multi.push(t)}this.records.set(u,f)}},{key:"hydrate",value:function(t,r){return r.value===kd&&(r.value=Gd,r.value=r.factory()),"object"==typeof r.value&&r.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(r.value)&&this.onDestroy.add(r.value),r.value}},{key:"injectableDefInScope",value:function(t){if(!t.providedIn)return!1;var r=cn(t.providedIn);return"string"==typeof r?"any"===r||r===this.scope:this.injectorDefTypes.has(r)}}]),n}();function Qp(n){var a=zc(n),t=null!==a?a.factory:Js(n);if(null!==t)return t;if(n instanceof Dn)throw new Error("Token ".concat(Gn(n)," is missing a \u0275prov definition."));if(n instanceof Function)return function(n){var a=n.length;if(a>0){var t=function(n,a){for(var t=[],r=0;r<n;r++)t.push(a);return t}(a,"?");throw new Error("Can't resolve all parameters for ".concat(Gn(n),": (").concat(t.join(", "),")."))}var r=function(n){var a=n&&(n[zi]||n[jc]);if(a){var t=function(n){if(n.hasOwnProperty("name"))return n.name;var a=(""+n).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(n);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(t,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in a future version of Angular. Please add @Injectable() to the "'.concat(t,'" class.')),a}return null}(n);return null!==r?function(){return r.factory(n)}:function(){return new n}}(n);throw new Error("unreachable")}function dm(n,a,t){var r=void 0;if(xs(n)){var o=cn(n);return Js(o)||Qp(o)}if(ac(n))r=function(){return cn(n.useValue)};else if(function(n){return!(!n||!n.useFactory)}(n))r=function(){return n.useFactory.apply(n,kn(fg(n.deps||[])))};else if(function(n){return!(!n||!n.useExisting)}(n))r=function(){return Mt(cn(n.useExisting))};else{var u=cn(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return Js(u)||Qp(u);r=function(){return pi(u,kn(fg(n.deps)))}}return r}function oc(n,a){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:n,value:a,multi:t?[]:void 0}}function ac(n){return null!==n&&"object"==typeof n&&sC in n}function xs(n){return"function"==typeof n}function su(n){return"function"==typeof n||"object"==typeof n&&n instanceof Dn}var Vi=function(){var n=function(){function a(){G(this,a)}return j(a,null,[{key:"create",value:function(r,o){var u;if(Array.isArray(r))return cm({name:""},o,r,"");var f=null!==(u=r.name)&&void 0!==u?u:"";return cm({name:f},r.parent,r.providers,f)}}]),a}();return n.THROW_IF_NOT_FOUND=Hu,n.NULL=new Bw,n.\u0275prov=an({token:n,providedIn:"any",factory:function(){return Mt($p)}}),n.__NG_ELEMENT_ID__=-1,n}();function sR(n,a){nd(wd(n)[1],Gr())}var uc=null;function pa(){if(!uc){var n=tr.Symbol;if(n&&n.iterator)uc=n.iterator;else for(var a=Object.getOwnPropertyNames(Map.prototype),t=0;t<a.length;++t){var r=a[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(uc=r)}}return uc}function lc(n){return!!ym(n)&&(Array.isArray(n)||!(n instanceof Map)&&pa()in n)}function ym(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function za(n,a,t){return n[a]=t}function Ei(n,a,t){return!Object.is(n[a],t)&&(n[a]=t,!0)}function As(n,a,t,r){var o=Ei(n,a,t);return Ei(n,a+1,r)||o}function Zo(n,a,t,r,o,u){var f=As(n,a,t,r);return As(n,a+2,o,u)||f}function _m(n,a,t,r){var o=qe();return Ei(o,Il(),a)&&(Fn(),da(xr(),o,n,a,t,r)),_m}function cc(n,a,t,r){return Ei(n,Il(),t)?a+tn(t)+r:nn}function fc(n,a,t,r,o,u,f,h){var g=function(n,a,t,r,o){var u=As(n,a,t,r);return Ei(n,a+2,o)||u}(n,Eo(),t,o,f);return aa(3),g?a+tn(t)+r+tn(o)+u+tn(f)+h:nn}function gt(n,a,t,r,o,u,f,h){var v=qe(),g=Fn(),y=n+20,_=g.firstCreatePass?function(n,a,t,r,o,u,f,h,v){var g=a.consts,y=Es(a,n,4,f||null,Jr(g,h));tm(a,t,y,Jr(g,v)),nd(a,y);var _=y.tViews=jp(2,y,r,o,u,a.directiveRegistry,a.pipeRegistry,null,a.schemas,g);return null!==a.queries&&(a.queries.template(a,y),_.queries=a.queries.embeddedTView(y)),y}(y,g,v,a,t,r,o,u,f):g.data[y];Fa(_,!1);var C=v[11].createComment("");Pp(g,v,C,_),Rr(C,v),Pd(v,v[y]=Pw(C,v,C,_)),Ol(_)&&Xg(g,v,_),null!=f&&Jg(v,_,h)}function lt(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt.Default,t=qe();if(null===t)return Mt(n,a);var r=Gr();return Z_(r,t,cn(n),a)}function Am(){throw new Error("invalid")}function d(n,a,t){var r=qe();return Ei(r,Il(),a)&&ho(Fn(),xr(),r,n,a,r[11],t,!1),d}function i(n,a,t,r,o){var f=o?"class":"style";kw(n,t,a.inputs[f],f,r)}function s(n,a,t,r){var o=qe(),u=Fn(),f=20+n,h=o[11],v=o[f]=Ji(h,a,Ut.lFrame.currentNamespace),g=u.firstCreatePass?function(n,a,t,r,o,u,f){var h=a.consts,g=Es(a,n,2,o,Jr(h,u));return tm(a,t,g,Jr(h,f)),null!==g.attrs&&Kp(g,g.attrs,!1),null!==g.mergedAttrs&&Kp(g,g.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,g),g}(f,u,o,0,a,t,r):u.data[f];Fa(g,!0);var y=g.mergedAttrs;null!==y&&rp(h,v,y);var _=g.classes;null!==_&&Pg(h,v,_);var C=g.styles;null!==C&&Og(h,v,C),64!=(64&g.flags)&&Pp(u,o,v,g),0===Ut.lFrame.elementDepthCount&&Rr(v,o),Ut.lFrame.elementDepthCount++,Ol(g)&&(Xg(u,o,g),$g(u,g,o)),null!==r&&Jg(o,g)}function l(){var n=Gr();$e()?Xv():Fa(n=n.parent,!1);var a=n;Ut.lFrame.elementDepthCount--;var t=Fn();t.firstCreatePass&&(nd(t,n),Vv(n)&&t.queries.elementEnd(n)),null!=a.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(a)&&i(t,a,qe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(a)&&i(t,a,qe(),a.stylesWithoutHost,!1)}function c(n,a,t,r){s(n,a,t,r),l()}function w(n,a,t){var r=qe(),o=Fn(),u=n+20,f=o.firstCreatePass?function(n,a,t,r,o){var u=a.consts,f=Jr(u,r),h=Es(a,n,8,"ng-container",f);return null!==f&&Kp(h,f,!0),tm(a,t,h,Jr(u,o)),null!==a.queries&&a.queries.elementStart(a,h),h}(u,o,r,a,t):o.data[u];Fa(f,!0);var h=r[u]=r[11].createComment("");Pp(o,r,h,f),Rr(h,r),Ol(f)&&(Xg(o,r,f),$g(o,f,r)),null!=t&&Jg(r,f)}function x(){var n=Gr(),a=Fn();$e()?Xv():Fa(n=n.parent,!1),a.firstCreatePass&&(nd(a,n),Vv(n)&&a.queries.elementEnd(n))}function I(){return qe()}function U(n){return!!n&&"function"==typeof n.then}function Y(n){return!!n&&"function"==typeof n.subscribe}var Q=Y;function oe(n,a,t,r){var o=qe(),u=Fn(),f=Gr();return function(n,a,t,r,o,u,f,h){var v=Ol(r),y=n.firstCreatePass&&Nw(n),_=a[8],C=um(a),S=!0;if(3&r.type||h){var R=Uo(r,a),b=h?h(R):R,E=C.length,T=h?function(ee){return h(kr(ee[r.index]))}:r.index;if(Er(t)){var D=null;if(!h&&v&&(D=function(n,a,t,r){var o=n.cleanup;if(null!=o)for(var u=0;u<o.length-1;u+=2){var f=o[u];if(f===t&&o[u+1]===r){var h=a[7],v=o[u+2];return h.length>v?h[v]:null}"string"==typeof f&&(u+=2)}return null}(n,a,o,r.index)),null!==D)(D.__ngLastListenerFn__||D).__ngNextListenerFn__=u,D.__ngLastListenerFn__=u,S=!1;else{u=Ze(r,a,_,u,!1);var O=t.listen(b,o,u);C.push(u,O),y&&y.push(o,T,E,E+1)}}else u=Ze(r,a,_,u,!0),b.addEventListener(o,u,f),C.push(u),y&&y.push(o,T,E,f)}else u=Ze(r,a,_,u,!1);var H,L=r.outputs;if(S&&null!==L&&(H=L[o])){var z=H.length;if(z)for(var P=0;P<z;P+=2){var ue=a[H[P]][H[P+1]].subscribe(u),k=C.length;C.push(u,ue),y&&y.push(o,r.index,k,-(k+1))}}}(u,o,o[11],f,n,a,!!t,r),oe}function Me(n,a,t,r){try{return!1!==t(r)}catch(o){return lm(n,o),!1}}function Ze(n,a,t,r,o){return function u(f){if(f===Function)return r;var h=2&n.flags?So(n.index,a):a;0==(32&a[2])&&im(h);for(var v=Me(a,0,r,f),g=u.__ngNextListenerFn__;g;)v=Me(a,0,g,f)&&v,g=g.__ngNextListenerFn__;return o&&!1===v&&(f.preventDefault(),f.returnValue=!1),v}}function Fe(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return yi(n)}function Jn(n,a,t,r,o){var u=qe(),f=cc(u,a,t,r);return f!==nn&&ho(Fn(),xr(),u,n,f,u[11],o,!1),Jn}function zM(n,a,t,r,o){for(var u=n[t+1],f=null===a,h=r?$o(u):Ss(u),v=!1;0!==h&&(!1===v||f);){var y=n[h+1];kk(n[h],a)&&(v=!0,n[h+1]=r?Gg(y):Fp(y)),h=r?$o(y):Ss(y)}v&&(n[t+1]=r?Fp(u):Gg(u))}function kk(n,a){return null===n||null==a||(Array.isArray(n)?n[1]:n)===a||!(!Array.isArray(n)||"string"!=typeof a)&&Ul(n,a)>=0}function Tm(n,a,t){return function(n,a,t,r){var o=qe(),u=Fn(),f=aa(2);u.firstUpdatePass&&function(n,a,t,r){var o=n.data;if(null===o[t+1]){var u=o[Ki()],f=function(n,a){return a>=n.expandoStartIndex}(n,t);(function(n,a){return 0!=(n.flags&(a?16:32))})(u,r)&&null===a&&!f&&(a=!1),a=function(n,a,t,r){var o=function(n){var a=Ut.lFrame.currentDirectiveIndex;return-1===a?null:n[a]}(n),u=r?a.residualClasses:a.residualStyles;if(null===o)0===(r?a.classBindings:a.styleBindings)&&(t=Dm(t=PR(null,n,a,t,r),a.attrs,r),u=null);else{var h=a.directiveStylingLast;if(-1===h||n[h]!==o)if(t=PR(o,n,a,t,r),null===u){var g=function(n,a,t){var r=t?a.classBindings:a.styleBindings;if(0!==Ss(r))return n[$o(r)]}(n,a,r);void 0!==g&&Array.isArray(g)&&function(n,a,t,r){n[$o(t?a.classBindings:a.styleBindings)]=r}(n,a,r,g=Dm(g=PR(null,n,a,g[1],r),a.attrs,r))}else u=function(n,a,t){for(var r=void 0,o=a.directiveEnd,u=1+a.directiveStylingLast;u<o;u++)r=Dm(r,n[u].hostAttrs,t);return Dm(r,a.attrs,t)}(n,a,r)}return void 0!==u&&(r?a.residualClasses=u:a.residualStyles=u),t}(o,u,a,r),function(n,a,t,r,o,u){var f=u?a.classBindings:a.styleBindings,h=$o(f),v=Ss(f);n[r]=t;var y,g=!1;if(Array.isArray(t)?(null===(y=t[1])||Ul(t,y)>0)&&(g=!0):y=t,o)if(0!==v){var S=$o(n[h+1]);n[r+1]=tc(S,h),0!==S&&(n[S+1]=Np(n[S+1],r)),n[h+1]=function(n,a){return 131071&n|a<<17}(n[h+1],r)}else n[r+1]=tc(h,0),0!==h&&(n[h+1]=Np(n[h+1],r)),h=r;else n[r+1]=tc(v,0),0===h?h=r:n[v+1]=Np(n[v+1],r),v=r;g&&(n[r+1]=Fp(n[r+1])),zM(n,y,r,!0),zM(n,y,r,!1),function(n,a,t,r,o){var u=o?n.residualClasses:n.residualStyles;null!=u&&"string"==typeof a&&Ul(u,a)>=0&&(t[r+1]=Gg(t[r+1]))}(a,y,n,r,u),f=tc(h,v),u?a.classBindings=f:a.styleBindings=f}(o,u,a,t,f,r)}}(u,n,f,r),a!==nn&&Ei(o,f,a)&&function(n,a,t,r,o,u,f,h){if(3&a.type){var v=n.data,g=v[h+1];w0(function(n){return 1==(1&n)}(g)?nO(v,a,t,o,Ss(g),f):void 0)||(w0(u)||function(n){return 2==(2&n)}(g)&&(u=nO(v,null,t,o,h,f)),function(n,a,t,r,o){var u=Er(n);if(a)o?u?n.addClass(t,r):t.classList.add(r):u?n.removeClass(t,r):t.classList.remove(r);else{var f=-1===r.indexOf("-")?void 0:Ro.DashCase;if(null==o)u?n.removeStyle(t,r,f):t.style.removeProperty(r);else{var h="string"==typeof o&&o.endsWith("!important");h&&(o=o.slice(0,-10),f|=Ro.Important),u?n.setStyle(t,r,o,f):t.style.setProperty(r,o,h?"important":"")}}}(r,f,fr(Ki(),t),o,u))}}(u,u.data[Ki()],o,o[11],n,o[f+1]=function(n,a){return null==n||("string"==typeof a?n+=a:"object"==typeof n&&(n=Gn(Xi(n)))),n}(a,t),r,f)}(n,a,t,!1),Tm}function PR(n,a,t,r,o){var u=null,f=t.directiveEnd,h=t.directiveStylingLast;for(-1===h?h=t.directiveStart:h++;h<f&&(r=Dm(r,(u=a[h]).hostAttrs,o),u!==n);)h++;return null!==n&&(t.directiveStylingLast=h),r}function Dm(n,a,t){var r=t?1:2,o=-1;if(null!==a)for(var u=0;u<a.length;u++){var f=a[u];"number"==typeof f?o=f:o===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),po(n,f,!!t||a[++u]))}return void 0===n?null:n}function nO(n,a,t,r,o,u){for(var f=null===a,h=void 0;o>0;){var v=n[o],g=Array.isArray(v),y=g?v[1]:v,_=null===y,C=t[o+1];C===nn&&(C=_?nr:void 0);var S=_?ug(C,r):y===r?C:void 0;if(g&&!w0(S)&&(S=ug(v,r)),w0(S)&&(h=S,f))return h;var R=n[o+1];o=f?$o(R):Ss(R)}if(null!==a){var b=u?a.residualClasses:a.residualStyles;null!=b&&(h=ug(b,r))}return h}function w0(n){return void 0!==n}function Pe(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=qe(),r=Fn(),o=n+20,u=r.firstCreatePass?Es(r,o,1,a,null):r.data[o],f=t[o]=Dp(t[11],a);Pp(r,t,f,u),Fa(u,!1)}function Qn(n){return Vr("",n,""),Qn}function Vr(n,a,t){var r=qe(),o=cc(r,n,a,t);return o!==nn&&Si(r,Ki(),o),Vr}function du(n,a,t,r,o){var u=qe(),f=function(n,a,t,r,o,u){var h=As(n,Eo(),t,o);return aa(2),h?a+tn(t)+r+tn(o)+u:nn}(u,n,a,t,r,o);return f!==nn&&Si(u,Ki(),f),du}function S0(n,a,t,r,o,u,f){var h=qe(),v=fc(h,n,a,t,r,o,u,f);return v!==nn&&Si(h,Ki(),v),S0}function IR(n,a,t,r,o,u,f,h,v,g,y,_,C){var S=qe(),R=function(n,a,t,r,o,u,f,h,v,g,y,_,C,S){var R=Eo(),b=Zo(n,R,t,o,f,v);return b=As(n,R+4,y,C)||b,aa(6),b?a+tn(t)+r+tn(o)+u+tn(f)+h+tn(v)+g+tn(y)+_+tn(C)+S:nn}(S,n,a,t,r,o,u,f,h,v,g,y,_,C);return R!==nn&&Si(S,Ki(),R),IR}var Wd=void 0,yG=["en",[["a","p"],["AM","PM"],Wd],[["AM","PM"],Wd,Wd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wd,"{1} 'at' {0}",Wd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){var t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}],uh={};function wO(n){return n in uh||(uh[n]=tr.ng&&tr.ng.common&&tr.ng.common.locales&&tr.ng.common.locales[n]),uh[n]}var mt=function(){return(mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt}(),E0="en-US";function h2(n,a,t){var r=Fn();if(r.firstCreatePass){var o=fo(n);NR(t,r.data,r.blueprint,o,!0),NR(a,r.data,r.blueprint,o,!1)}}function NR(n,a,t,r,o){if(n=cn(n),Array.isArray(n))for(var u=0;u<n.length;u++)NR(n[u],a,t,r,o);else{var f=Fn(),h=qe(),v=xs(n)?n:cn(n.provide),g=dm(n),y=Gr(),_=1048575&y.providerIndexes,C=y.directiveStart,S=y.providerIndexes>>20;if(xs(n)||!n.multi){var R=new rd(g,o,lt),b=GR(v,a,o?_:_+S,C);-1===b?(ld(sd(y,h),f,v),kR(f,n,a.length),a.push(v),y.directiveStart++,y.directiveEnd++,o&&(y.providerIndexes+=1048576),t.push(R),h.push(R)):(t[b]=R,h[b]=R)}else{var E=GR(v,a,_+S,C),T=GR(v,a,_,_+S),M=T>=0&&t[T];if(o&&!M||!o&&!(E>=0&&t[E])){ld(sd(y,h),f,v);var O=function(n,a,t,r,o){var u=new rd(n,t,lt);return u.multi=[],u.index=a,u.componentProviders=0,qO(u,o,r&&!t),u}(o?g2:v2,t.length,o,r,g);!o&&M&&(t[T].providerFactory=O),kR(f,n,a.length,0),a.push(v),y.directiveStart++,y.directiveEnd++,o&&(y.providerIndexes+=1048576),t.push(O),h.push(O)}else kR(f,n,E>-1?E:T,qO(t[o?T:E],g,!o&&r));!o&&r&&M&&t[T].componentProviders++}}}function kR(n,a,t,r){var o=xs(a),u=function(n){return!!n.useClass}(a);if(o||u){var v=(u?cn(a.useClass):a).prototype.ngOnDestroy;if(v){var g=n.destroyHooks||(n.destroyHooks=[]);if(!o&&a.multi){var y=g.indexOf(t);-1===y?g.push(t,[r,v]):g[y+1].push(r,v)}else g.push(t,v)}}}function qO(n,a,t){return t&&n.componentProviders++,n.multi.push(a)-1}function GR(n,a,t,r){for(var o=t;o<r;o++)if(a[o]===n)return o;return-1}function v2(n,a,t,r){return BR(this.multi,[])}function g2(n,a,t,r){var u,o=this.multi;if(this.providerFactory){var f=this.providerFactory.componentProviders,h=dd(t,t[1],this.providerFactory.index,r);BR(o,u=h.slice(0,f));for(var v=f;v<h.length;v++)u.push(h[v])}else BR(o,u=[]);return u}function BR(n,a){for(var t=0;t<n.length;t++)a.push((0,n[t])());return a}function YO(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(t){t.providersResolver=function(r,o){return h2(r,o?o(n):n,a)}}}var y2=function n(){G(this,n)},KO=function n(){G(this,n)},C2=function(){function n(){G(this,n)}return j(n,[{key:"resolveComponentFactory",value:function(t){throw function(n){var a=Error("No component factory found for ".concat(Gn(n),". Did you add it to @NgModule.entryComponents?"));return a.ngComponent=n,a}(t)}}]),n}(),mc=function(){var n=function a(){G(this,a)};return n.NULL=new C2,n}();function w2(){return ch(Gr(),qe())}function ch(n,a){return new fu(Uo(n,a))}var fu=function(){var n=function a(t){G(this,a),this.nativeElement=t};return n.__NG_ELEMENT_ID__=w2,n}();function S2(n){return n instanceof fu?n.nativeElement:n}var XO=function n(){G(this,n)},T0=function(){var n=function a(){G(this,a)};return n.__NG_ELEMENT_ID__=function(){return function(){var n=qe(),t=So(Gr().index,n);return function(n){return n[11]}(Pa(t)?t:n)}()},n}(),x2=function(){var n=function a(){G(this,a)};return n.\u0275prov=an({token:n,providedIn:"root",factory:function(){return null}}),n}(),D0=function n(a){G(this,n),this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")},R2=new D0("13.1.0"),HR={};function M0(n,a,t,r){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==t;){var u=a[t.index];if(null!==u&&r.push(kr(u)),Vo(u))for(var f=10;f<u.length;f++){var h=u[f],v=h[1].firstChild;null!==v&&M0(h[1],h,v,r)}var g=t.type;if(8&g)M0(n,a,t.child,r);else if(32&g)for(var y=Ap(t,a),_=void 0;_=y();)r.push(_);else if(16&g){var C=ZC(a,t);if(Array.isArray(C))r.push.apply(r,kn(C));else{var S=Yu(a[16]);M0(S[1],S,C,r,!0)}}t=o?t.projectionNext:t.next}return r}var Lm=function(){function n(a,t){G(this,n),this._lView=a,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}return j(n,[{key:"rootNodes",get:function(){var t=this._lView,r=t[1];return M0(r,t,r.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(t){this._lView[8]=t}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var t=this._lView[3];if(Vo(t)){var r=t[8],o=r?r.indexOf(this):-1;o>-1&&(Dg(t,o),lp(r,o))}this._attachedToViewContainer=!1}Ku(this._lView[1],this._lView)}},{key:"onDestroy",value:function(t){qp(this._lView[1],this._lView,null,t)}},{key:"markForCheck",value:function(){im(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){om(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(n,a,t){Kf(!0);try{om(n,a,t)}finally{Kf(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){this._appRef=null,function(n,a){xd(n,a,a[11],2,null,null)}(this._lView[1],this._lView)}},{key:"attachToAppRef",value:function(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}]),n}(),A2=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this,r))._view=r,o}return j(t,[{key:"detectChanges",value:function(){Fd(this._view)}},{key:"checkNoChanges",value:function(){!function(n){Kf(!0);try{Fd(n)}finally{Kf(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),t}(Lm),JO=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this)).ngModule=r,o}return j(t,[{key:"resolveComponentFactory",value:function(o){var u=ii(o);return new VR(u,this.ngModule)}}]),t}(mc);function ZO(n){var a=[];for(var t in n)n.hasOwnProperty(t)&&a.push({propName:n[t],templateName:t});return a}var D2=new Dn("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return IC}}),VR=function(n){pe(t,n);var a=ve(t);function t(r,o){var u;return G(this,t),(u=a.call(this)).componentDef=r,u.ngModule=o,u.componentType=r.type,u.selector=function(n){return n.map(Dx).join(",")}(r.selectors),u.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],u.isBoundToModule=!!o,u}return j(t,[{key:"inputs",get:function(){return ZO(this.componentDef.inputs)}},{key:"outputs",get:function(){return ZO(this.componentDef.outputs)}},{key:"create",value:function(o,u,f,h){var D,M,v=(h=h||this.ngModule)?function(n,a){return{get:function(r,o,u){var f=n.get(r,HR,u);return f!==HR||o===HR?f:a.get(r,o,u)}}}(o,h.injector):o,g=v.get(XO,F_),y=v.get(x2,null),_=g.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",S=f?function(n,a,t){if(Er(n))return n.selectRootElement(a,t===Ta.ShadowDom);var o="string"==typeof a?n.querySelector(a):a;return o.textContent="",o}(_,f,this.componentDef.encapsulation):Ji(g.createRenderer(null,this.componentDef),C,function(n){var a=n.toLowerCase();return"svg"===a?zv:"math"===a?"http://www.w3.org/1998/MathML/":null}(C)),R=this.componentDef.onPush?576:528,b=function(n,a){return{components:[],scheduler:n||IC,clean:$x,playerHandler:a||null,flags:0}}(),E=jp(0,null,null,1,0,null,null,null,null,null),T=Td(null,E,b,R,null,null,g,_,y,v);Ll(T);try{var O=function(n,a,t,r,o,u){var f=t[1];t[20]=n;var v=Es(f,20,2,"#host",null),g=v.mergedAttrs=a.hostAttrs;null!==g&&(Kp(v,g,!0),null!==n&&(rp(o,n,g),null!==v.classes&&Pg(o,n,v.classes),null!==v.styles&&Og(o,n,v.styles)));var y=r.createRenderer(n,a),_=Td(t,zp(a),null,a.onPush?64:16,t[20],v,r,y,u||null,null);return f.firstCreatePass&&(ld(sd(v,t),f,a.type),Tw(f,v),Dw(v,t.length,1)),Pd(t,_),t[20]=_}(S,this.componentDef,T,g,_);if(S)if(f)rp(_,S,["ng-version",R2.full]);else{var L=function(n){for(var a=[],t=[],r=1,o=2;r<n.length;){var u=n[r];if("string"==typeof u)2===o?""!==u&&a.push(u,n[++r]):8===o&&t.push(u);else{if(!Hi(o))break;o=u}r++}return{attrs:a,classes:t}}(this.componentDef.selectors[0]),H=L.attrs,z=L.classes;H&&rp(_,S,H),z&&z.length>0&&Pg(_,S,z.join(" "))}if(M=ms(E,20),void 0!==u)for(var P=M.projection=[],W=0;W<this.ngContentSelectors.length;W++){var X=u[W];P.push(null!=X?Array.from(X):null)}D=function(n,a,t,r,o){var u=t[1],f=function(n,a,t){var r=Gr();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Mw(n,r,a,nc(n,a,1,null),t));var u=dd(a,n,r.directiveStart,r);Rr(u,a);var f=Uo(r,a);return f&&Rr(f,a),u}(u,t,a);if(r.components.push(f),n[8]=f,o&&o.forEach(function(y){return y(f,a)}),a.contentQueries){var h=Gr();a.contentQueries(1,f,h.directiveStart)}var v=Gr();return!u.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(br(v.index),Od(t[1],v,0,v.directiveStart,v.directiveEnd,a),nm(a,f)),f}(O,this.componentDef,T,b,[sR]),bs(E,T,null)}finally{ka()}return new P2(this.componentType,D,ch(M,T),T,M)}}]),t}(KO),P2=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f,h){var v;return G(this,t),(v=a.call(this)).location=u,v._rootLView=f,v._tNode=h,v.instance=o,v.hostView=v.changeDetectorRef=new A2(f),v.componentType=r,v}return j(t,[{key:"injector",get:function(){return new ku(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(o){this.hostView.onDestroy(o)}}]),t}(y2),Zu=function n(){G(this,n)},QO=function n(){G(this,n)},dh=new Map;var nP=function(n){pe(t,n);var a=ve(t);function t(r,o){var u;G(this,t),(u=a.call(this))._parent=o,u._bootstrapComponents=[],u.injector=Xn(u),u.destroyCbs=[],u.componentFactoryResolver=new JO(Xn(u));var f=uo(r);return u._bootstrapComponents=ua(f.bootstrap),u._r3Injector=Vw(r,o,[{provide:Zu,useValue:Xn(u)},{provide:mc,useValue:u.componentFactoryResolver}],Gn(r)),u._r3Injector._resolveInjectorDefTypes(),u.instance=u.get(r),u}return j(t,[{key:"get",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vi.THROW_IF_NOT_FOUND,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jt.Default;return o===Vi||o===Zu||o===$p?this:this._r3Injector.get(o,u,f)}},{key:"destroy",value:function(){var o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(function(u){return u()}),this.destroyCbs=null}},{key:"onDestroy",value:function(o){this.destroyCbs.push(o)}}]),t}(Zu),WR=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this)).moduleType=r,null!==uo(r)&&function(n){var a=new Set;!function t(r){var o=uo(r,!0),u=o.id;null!==u&&(function(n,a,t){if(a&&a!==t)throw new Error("Duplicate module registered for ".concat(n," - ").concat(Gn(a)," vs ").concat(Gn(a.name)))}(u,dh.get(u),r),dh.set(u,r));var g,v=Ft(ua(o.imports));try{for(v.s();!(g=v.n()).done;){var y=g.value;a.has(y)||(a.add(y),t(y))}}catch(_){v.e(_)}finally{v.f()}}(n)}(r),o}return j(t,[{key:"create",value:function(o){return new nP(this.moduleType,o)}}]),t}(QO);function fh(n,a,t,r){return iP(qe(),Gi(),n,a,t,r)}function rP(n,a,t,r,o,u,f){return function(n,a,t,r,o,u,f,h,v){var g=a+t;return Zo(n,g,o,u,f,h)?za(n,g+4,v?r.call(v,o,u,f,h):r(o,u,f,h)):Fm(n,g+4)}(qe(),Gi(),n,a,t,r,o,u,f)}function Fm(n,a){var t=n[a];return t===nn?void 0:t}function iP(n,a,t,r,o,u){var f=a+t;return Ei(n,f,o)?za(n,f+1,u?r.call(u,o):r(o)):Fm(n,f+1)}function UR(n,a){var r,t=Fn(),o=n+20;t.firstCreatePass?(r=function(n,a){if(a)for(var t=a.length-1;t>=0;t--){var r=a[t];if(n===r.name)return r}}(a,t.pipeRegistry),t.data[o]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(o,r.onDestroy)):r=t.data[o];var u=r.factory||(r.factory=Js(r.type)),f=cs(lt);try{var h=ip(!1),v=u();return ip(h),function(n,a,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),a[t]=r}(t,qe(),o,v),v}finally{cs(f)}}function zR(n,a,t){var r=n+20,o=qe(),u=function(n,a){return n[a]}(o,r);return function(n,a){return n[1].data[a].pure}(o,r)?iP(o,Gi(),a,u.transform,t,u):u.transform(t)}var K2=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return G(this,t),(r=a.call(this)).__isAsync=o,r}return j(t,[{key:"emit",value:function(o){ye(ze(t.prototype),"next",this).call(this,o)}},{key:"subscribe",value:function(o,u,f){var h,v,g,y=o,_=u||function(){return null},C=f;if(o&&"object"==typeof o){var S=o;y=null===(h=S.next)||void 0===h?void 0:h.bind(S),_=null===(v=S.error)||void 0===v?void 0:v.bind(S),C=null===(g=S.complete)||void 0===g?void 0:g.bind(S)}this.__isAsync&&(_=jR(_),y&&(y=jR(y)),C&&(C=jR(C)));var R=ye(ze(t.prototype),"subscribe",this).call(this,{next:y,error:_,complete:C});return o instanceof nt&&o.add(R),R}}]),t}(ss);function jR(n){return function(a){setTimeout(n,void 0,a)}}var we=K2;function $2(){return this._results[pa()]()}var qR=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];G(this,n),this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var t=pa(),r=n.prototype;r[t]||(r[t]=$2)}return j(n,[{key:"changes",get:function(){return this._changes||(this._changes=new we)}},{key:"get",value:function(t){return this._results[t]}},{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,r){return this._results.reduce(t,r)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t,r){var o=this;o.dirty=!1;var u=qo(t);(this._changesDetected=!function(n,a,t){if(n.length!==a.length)return!1;for(var r=0;r<n.length;r++){var o=n[r],u=a[r];if(t&&(o=t(o),u=t(u)),u!==o)return!1}return!0}(o._results,u,r))&&(o._results=u,o.length=u.length,o.last=u[this.length-1],o.first=u[0])}},{key:"notifyOnChanges",value:function(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),n}();Symbol;var Qu=function(){var n=function a(){G(this,a)};return n.__NG_ELEMENT_ID__=Z2,n}(),J2=function(n){pe(t,n);var a=ve(t);function t(r,o,u){var f;return G(this,t),(f=a.call(this))._declarationLView=r,f._declarationTContainer=o,f.elementRef=u,f}return j(t,[{key:"createEmbeddedView",value:function(o){var u=this._declarationTContainer.tViews,f=Td(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);f[17]=this._declarationLView[this._declarationTContainer.index];var v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(u)),bs(u,f,o),new Lm(f)}}]),t}(Qu);function Z2(){return O0(Gr(),qe())}function O0(n,a){return 4&n.type?new J2(a,n,ch(n,a)):null}var va=function(){var n=function a(){G(this,a)};return n.__NG_ELEMENT_ID__=Q2,n}();function Q2(){return dP(Gr(),qe())}var lP=function(n){pe(t,n);var a=ve(t);function t(r,o,u){var f;return G(this,t),(f=a.call(this))._lContainer=r,f._hostTNode=o,f._hostLView=u,f}return j(t,[{key:"element",get:function(){return ch(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new ku(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var o=ap(this._hostTNode,this._hostLView);if(K_(o)){var u=kl(o,this._hostLView),f=$i(o);return new ku(u[1].data[f+8],u)}return new ku(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(o){var u=cP(this._lContainer);return null!==u&&u[o]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(o,u,f){var h=o.createEmbeddedView(u||{});return this.insert(h,f),h}},{key:"createComponent",value:function(o,u,f,h,v){var y,g=o&&!function(n){return"function"==typeof n}(o);if(g)y=u;else{var _=u||{};y=_.index,f=_.injector,h=_.projectableNodes,v=_.ngModuleRef}var C=g?o:new VR(ii(o)),S=f||this.parentInjector;if(!v&&null==C.ngModule&&S){var R=S.get(Zu,null);R&&(v=R)}var b=C.create(S,h,void 0,v);return this.insert(b.hostView,y),b}},{key:"insert",value:function(o,u){var f=o._lView,h=f[1];if(function(n){return Vo(n[3])}(f)){var v=this.indexOf(o);if(-1!==v)this.detach(v);else{var g=f[3],y=new lP(g,g[6],g[3]);y.detach(y.indexOf(o))}}var _=this._adjustIndex(u),C=this._lContainer;!function(n,a,t,r){var o=10+r,u=t.length;r>0&&(t[o-1][4]=a),r<u-10?(a[4]=t[o],rC(t,10+r,a)):(t.push(a),a[4]=null),a[3]=t;var f=a[17];null!==f&&t!==f&&function(n,a){var t=n[9];a[16]!==a[3][3][16]&&(n[2]=!0),null===t?n[9]=[a]:t.push(a)}(f,a);var h=a[19];null!==h&&h.insertView(n),a[2]|=128}(h,f,C,_);var S=Ql(_,C),R=f[11],b=Mp(R,C[7]);return null!==b&&function(n,a,t,r,o,u){r[0]=o,r[6]=a,xd(n,r,t,1,o,u)}(h,C[6],R,f,b,S),o.attachToViewContainerRef(),rC(YR(C),_,o),o}},{key:"move",value:function(o,u){return this.insert(o,u)}},{key:"indexOf",value:function(o){var u=cP(this._lContainer);return null!==u?u.indexOf(o):-1}},{key:"remove",value:function(o){var u=this._adjustIndex(o,-1),f=Dg(this._lContainer,u);f&&(lp(YR(this._lContainer),u),Ku(f[1],f))}},{key:"detach",value:function(o){var u=this._adjustIndex(o,-1),f=Dg(this._lContainer,u);return f&&null!=lp(YR(this._lContainer),u)?new Lm(f):null}},{key:"_adjustIndex",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==o?this.length+u:o}}]),t}(va);function cP(n){return n[8]}function YR(n){return n[8]||(n[8]=[])}function dP(n,a){var t,r=a[n.index];if(Vo(r))t=r;else{var o;if(8&n.type)o=kr(r);else{var u=a[11];o=u.createComment("");var f=Uo(n,a);nu(u,Mp(u,f),o,function(n,a){return Er(n)?n.nextSibling(a):a.nextSibling}(u,f),!1)}a[n.index]=t=Pw(r,a,o,n),Pd(a,t)}return new lP(t,n,a)}var rB=function(){function n(a){G(this,n),this.queryList=a,this.matches=null}return j(n,[{key:"clone",value:function(){return new n(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),n}(),iB=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];G(this,n),this.queries=a}return j(n,[{key:"createEmbeddedView",value:function(t){var r=t.queries;if(null!==r){for(var o=null!==t.contentQueries?t.contentQueries[0]:r.length,u=[],f=0;f<o;f++){var h=r.getByIndex(f);u.push(this.queries[h.indexInDeclarationView].clone())}return new n(u)}return null}},{key:"insertView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"detachView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"dirtyQueriesWithMatches",value:function(t){for(var r=0;r<this.queries.length;r++)null!==gP(t,r).matches&&this.queries[r].setDirty()}}]),n}(),fP=function n(a,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;G(this,n),this.predicate=a,this.flags=t,this.read=r},oB=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];G(this,n),this.queries=a}return j(n,[{key:"elementStart",value:function(t,r){for(var o=0;o<this.queries.length;o++)this.queries[o].elementStart(t,r)}},{key:"elementEnd",value:function(t){for(var r=0;r<this.queries.length;r++)this.queries[r].elementEnd(t)}},{key:"embeddedTView",value:function(t){for(var r=null,o=0;o<this.length;o++){var u=null!==r?r.length:0,f=this.getByIndex(o).embeddedTView(t,u);f&&(f.indexInDeclarationView=o,null!==r?r.push(f):r=[f])}return null!==r?new n(r):null}},{key:"template",value:function(t,r){for(var o=0;o<this.queries.length;o++)this.queries[o].template(t,r)}},{key:"getByIndex",value:function(t){return this.queries[t]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(t){this.queries.push(t)}}]),n}(),aB=function(){function n(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;G(this,n),this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}return j(n,[{key:"elementStart",value:function(t,r){this.isApplyingToNode(r)&&this.matchTNode(t,r)}},{key:"elementEnd",value:function(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(t,r){this.elementStart(t,r)}},{key:"embeddedTView",value:function(t,r){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,r),new n(this.metadata)):null}},{key:"isApplyingToNode",value:function(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var r=this._declarationNodeIndex,o=t.parent;null!==o&&8&o.type&&o.index!==r;)o=o.parent;return r===(null!==o?o.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(t,r){var o=this.metadata.predicate;if(Array.isArray(o))for(var u=0;u<o.length;u++){var f=o[u];this.matchTNodeWithReadOption(t,r,sB(r,f)),this.matchTNodeWithReadOption(t,r,sp(r,t,f,!1,!1))}else o===Qu?4&r.type&&this.matchTNodeWithReadOption(t,r,-1):this.matchTNodeWithReadOption(t,r,sp(r,t,o,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(t,r,o){if(null!==o){var u=this.metadata.read;if(null!==u)if(u===fu||u===va||u===Qu&&4&r.type)this.addMatch(r.index,-2);else{var f=sp(r,t,u,!1,!1);null!==f&&this.addMatch(r.index,f)}else this.addMatch(r.index,o)}}},{key:"addMatch",value:function(t,r){null===this.matches?this.matches=[t,r]:this.matches.push(t,r)}}]),n}();function sB(n,a){var t=n.localNames;if(null!==t)for(var r=0;r<t.length;r+=2)if(t[r]===a)return t[r+1];return null}function lB(n,a,t,r){return-1===t?function(n,a){return 11&n.type?ch(n,a):4&n.type?O0(n,a):null}(a,n):-2===t?function(n,a,t){return t===fu?ch(a,n):t===Qu?O0(a,n):t===va?dP(a,n):void 0}(n,a,r):dd(n,n[1],t,a)}function pP(n,a,t,r){var o=a[19].queries[r];if(null===o.matches){for(var u=n.data,f=t.matches,h=[],v=0;v<f.length;v+=2){var g=f[v];h.push(g<0?null:lB(a,u[g],f[v+1],t.metadata.read))}o.matches=h}return o.matches}function KR(n,a,t,r){var o=n.queries.getByIndex(t),u=o.matches;if(null!==u)for(var f=pP(n,a,o,t),h=0;h<u.length;h+=2){var v=u[h];if(v>0)r.push(f[h/2]);else{for(var g=u[h+1],y=a[-v],_=10;_<y.length;_++){var C=y[_];C[17]===C[3]&&KR(C[1],C,g,r)}if(null!==y[9])for(var S=y[9],R=0;R<S.length;R++){var b=S[R];KR(b[1],b,g,r)}}}return r}function km(n){var a=qe(),t=Fn(),r=H_();Jf(r+1);var o=gP(t,r);if(n.dirty&&N_(a)===(2==(2&o.metadata.flags))){if(null===o.matches)n.reset([]);else{var u=o.crossesNgTemplate?KR(t,a,r,[]):pP(t,a,o,r);n.reset(u,S2),n.notifyOnChanges()}return!0}return!1}function Gm(n,a,t,r){var o=Fn();if(o.firstCreatePass){var u=Gr();(function(n,a,t){null===n.queries&&(n.queries=new oB),n.queries.track(new aB(a,t))})(o,new fP(a,t,r),u.index),function(n,a){var t=n.contentQueries||(n.contentQueries=[]);a!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,a)}(o,n),2==(2&t)&&(o.staticContentQueries=!0)}!function(n,a,t){var r=new qR(4==(4&t));qp(n,a,r,r.destroy),null===a[19]&&(a[19]=new iB),a[19].queries.push(new rB(r))}(o,qe(),t)}function Bm(){return function(n,a){return n[19].queries[a].queryList}(qe(),H_())}function gP(n,a){return n.queries.getByIndex(a)}var V=Vl("Input",function(n){return{bindingPropertyName:n}}),_t=Vl("Output",function(n){return{bindingPropertyName:n}});function L0(){}var F0=new Dn("Application Initializer"),hh=function(){var n=function(){function a(t){var r=this;G(this,a),this.appInits=t,this.resolve=L0,this.reject=L0,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(o,u){r.resolve=o,r.reject=u})}return j(a,[{key:"runInitializers",value:function(){var r=this;if(!this.initialized){var o=[],u=function(){r.done=!0,r.resolve()};if(this.appInits)for(var f=function(g){var y=r.appInits[g]();if(U(y))o.push(y);else if(Q(y)){var _=new Promise(function(C,S){y.subscribe({complete:C,error:S})});o.push(_)}},h=0;h<this.appInits.length;h++)f(h);Promise.all(o).then(function(){u()}).catch(function(v){r.reject(v)}),0===o.length&&u(),this.initialized=!0}}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(F0,8))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),Vm=new Dn("AppId"),PB={provide:Vm,useFactory:function(){return"".concat(eA()).concat(eA()).concat(eA())},deps:[]};function eA(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var IP=new Dn("Platform Initializer"),N0=new Dn("Platform ID"),LP=new Dn("appBootstrapListener"),FP=function(){var n=function(){function a(){G(this,a)}return j(a,[{key:"log",value:function(r){console.log(r)}},{key:"warn",value:function(r){console.warn(r)}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),yc=new Dn("LocaleId"),NP=new Dn("DefaultCurrencyCode"),IB=function n(a,t){G(this,n),this.ngModuleFactory=a,this.componentFactories=t},k0=function(){var n=function(){function a(){G(this,a)}return j(a,[{key:"compileModuleSync",value:function(r){return new WR(r)}},{key:"compileModuleAsync",value:function(r){return Promise.resolve(this.compileModuleSync(r))}},{key:"compileModuleAndAllComponentsSync",value:function(r){var o=this.compileModuleSync(r),f=ua(uo(r).declarations).reduce(function(h,v){var g=ii(v);return g&&h.push(new VR(g)),h},[]);return new IB(o,f)}},{key:"compileModuleAndAllComponentsAsync",value:function(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}},{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(r){}},{key:"getModuleId",value:function(r){}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),FB=function(){return Promise.resolve(0)}();function tA(n){"undefined"==typeof Zone?FB.then(function(){n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}var Ri=function(){function n(a){var t=a.enableLongStackTrace,r=void 0!==t&&t,o=a.shouldCoalesceEventChangeDetection,u=void 0!==o&&o,f=a.shouldCoalesceRunChangeDetection,h=void 0!==f&&f;if(G(this,n),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new we(!1),this.onMicrotaskEmpty=new we(!1),this.onStable=new we(!1),this.onError=new we(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();var v=this;v._nesting=0,v._outer=v._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(v._inner=v._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(v._inner=v._inner.fork(Zone.longStackTraceZoneSpec)),v.shouldCoalesceEventChangeDetection=!h&&u,v.shouldCoalesceRunChangeDetection=h,v.lastRequestAnimationFrameId=-1,v.nativeRequestAnimationFrame=function(){var n=tr.requestAnimationFrame,a=tr.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&a){var t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);var r=a[Zone.__symbol__("OriginalDelegate")];r&&(a=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function(n){var a=function(){!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(tr,function(){n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){n.lastRequestAnimationFrameId=-1,rA(n),n.isCheckStableRunning=!0,nA(n),n.isCheckStableRunning=!1},void 0,function(){},function(){})),n.fakeTopEventTask.invoke()}),rA(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(r,o,u,f,h,v){try{return kP(n),r.invokeTask(u,f,h,v)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&a(),GP(n)}},onInvoke:function(r,o,u,f,h,v,g){try{return kP(n),r.invoke(u,f,h,v,g)}finally{n.shouldCoalesceRunChangeDetection&&a(),GP(n)}},onHasTask:function(r,o,u,f){r.hasTask(u,f),o===u&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,rA(n),nA(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:function(r,o,u,f){return r.handleError(u,f),n.runOutsideAngular(function(){return n.onError.emit(f)}),!1}})}(v)}return j(n,[{key:"run",value:function(t,r,o){return this._inner.run(t,r,o)}},{key:"runTask",value:function(t,r,o,u){var f=this._inner,h=f.scheduleEventTask("NgZoneEvent: "+u,t,kB,L0,L0);try{return f.runTask(h,r,o)}finally{f.cancelTask(h)}}},{key:"runGuarded",value:function(t,r,o){return this._inner.runGuarded(t,r,o)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!n.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(n.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),n}(),kB={};function nA(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(function(){return n.onStable.emit(null)})}finally{n.isStable=!0}}}function rA(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function kP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function GP(n){n._nesting--,nA(n)}var Is,HB=function(){function n(){G(this,n),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new we,this.onMicrotaskEmpty=new we,this.onStable=new we,this.onError=new we}return j(n,[{key:"run",value:function(t,r,o){return t.apply(r,o)}},{key:"runGuarded",value:function(t,r,o){return t.apply(r,o)}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t,r,o,u){return t.apply(r,o)}}]),n}(),iA=function(){var n=function(){function a(t){var r=this;G(this,a),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){r.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return j(a,[{key:"_watchAngularEvents",value:function(){var r=this;this._ngZone.onUnstable.subscribe({next:function(){r._didWork=!0,r._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){r._ngZone.onStable.subscribe({next:function(){Ri.assertNotInAngularZone(),tA(function(){r._isZoneStable=!0,r._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var r=this;if(this.isStable())tA(function(){for(;0!==r._callbacks.length;){var u=r._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(r._didWork)}r._didWork=!1});else{var o=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(u){return!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(r){return{source:r.source,creationLocation:r.creationLocation,data:r.data}}):[]}},{key:"addCallback",value:function(r,o,u){var f=this,h=-1;o&&o>0&&(h=setTimeout(function(){f._callbacks=f._callbacks.filter(function(v){return v.timeoutId!==h}),r(f._didWork,f.getPendingTasks())},o)),this._callbacks.push({doneCb:r,timeoutId:h,updateCb:u})}},{key:"whenStable",value:function(r,o,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,u),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(r,o,u){return[]}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(Ri))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),BP=function(){var n=function(){function a(){G(this,a),this._applications=new Map,oA.addToWindow(this)}return j(a,[{key:"registerApplication",value:function(r,o){this._applications.set(r,o)}},{key:"unregisterApplication",value:function(r){this._applications.delete(r)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(r){return this._applications.get(r)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(r){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return oA.findTestabilityInTree(this,r,o)}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),VB=function(){function n(){G(this,n)}return j(n,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,r,o){return null}}]),n}(),oA=new VB;function UB(n,a,t){var r=new WR(t);return Promise.resolve(r)}var HP=new Dn("AllowMultipleToken"),VP=function n(a,t){G(this,n),this.name=a,this.token=t};function qB(n){if(Is&&!Is.destroyed&&!Is.injector.get(HP,!1))throw new Fi("400","");Is=n.get(zP);var t=n.get(IP,null);return t&&t.forEach(function(r){return r()}),Is}function WP(n,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(a),o=new Dn(r);return function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],f=UP();if(!f||f.injector.get(HP,!1))if(n)n(t.concat(u).concat({provide:o,useValue:!0}));else{var h=t.concat(u).concat({provide:o,useValue:!0},{provide:Xp,useValue:"platform"});qB(Vi.create({providers:h,name:r}))}return YB()}}function YB(n){var a=UP();if(!a)throw new Fi("401","");return a}function UP(){return Is&&!Is.destroyed?Is:null}var zP=function(){var n=function(){function a(t){G(this,a),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return j(a,[{key:"bootstrapModuleFactory",value:function(r,o){var u=this,g=function(n,a){return"noop"===n?new HB:("zone.js"===n?void 0:n)||new Ri({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)})}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),y=[{provide:Ri,useValue:g}];return g.run(function(){var _=Vi.create({providers:y,parent:u.injector,name:r.moduleType.name}),C=r.create(_),S=C.injector.get(Xl,null);if(!S)throw new Fi("402","");return g.runOutsideAngular(function(){var b=g.onError.subscribe({next:function(T){S.handleError(T)}});C.onDestroy(function(){aA(u._modules,C),b.unsubscribe()})}),function(n,a,t){try{var r=((b=C.injector.get(hh)).runInitializers(),b.donePromise.then(function(){return function(n){wo(n,"Expected localeId to be defined"),"string"==typeof n&&n.toLowerCase().replace(/_/g,"-")}(C.injector.get(yc,E0)||E0),u._moduleDoBootstrap(C),C}));return U(r)?r.catch(function(o){throw a.runOutsideAngular(function(){return n.handleError(o)}),o}):r}catch(o){throw a.runOutsideAngular(function(){return n.handleError(o)}),o}var b}(S,g)})}},{key:"bootstrapModule",value:function(r){var o=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],f=jP({},u);return UB(0,0,r).then(function(h){return o.bootstrapModuleFactory(h,f)})}},{key:"_moduleDoBootstrap",value:function(r){var o=r.injector.get(Wm);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(function(f){return o.bootstrap(f)});else{if(!r.instance.ngDoBootstrap)throw new Fi("403","");r.instance.ngDoBootstrap(o)}this._modules.push(r)}},{key:"onDestroy",value:function(r){this._destroyListeners.push(r)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Fi("404","");this._modules.slice().forEach(function(o){return o.destroy()}),this._destroyListeners.forEach(function(o){return o()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(Vi))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}();function jP(n,a){return Array.isArray(a)?a.reduce(jP,n):Object.assign(Object.assign({},n),a)}var Wm=function(){var n=function(){function a(t,r,o,u,f){var h=this;G(this,a),this._zone=t,this._injector=r,this._exceptionHandler=o,this._componentFactoryResolver=u,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){h._zone.run(function(){h.tick()})}});var v=new _r(function(y){h._stable=h._zone.isStable&&!h._zone.hasPendingMacrotasks&&!h._zone.hasPendingMicrotasks,h._zone.runOutsideAngular(function(){y.next(h._stable),y.complete()})}),g=new _r(function(y){var _;h._zone.runOutsideAngular(function(){_=h._zone.onStable.subscribe(function(){Ri.assertNotInAngularZone(),tA(function(){!h._stable&&!h._zone.hasPendingMacrotasks&&!h._zone.hasPendingMicrotasks&&(h._stable=!0,y.next(!0))})})});var C=h._zone.onUnstable.subscribe(function(){Ri.assertInAngularZone(),h._stable&&(h._stable=!1,h._zone.runOutsideAngular(function(){y.next(!1)}))});return function(){_.unsubscribe(),C.unsubscribe()}});this.isStable=function(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];var r=$(a),o=Av(a,1/0),u=a;return u.length?1===u.length?oo(u[0]):Wc(o)(Yr(u,r)):_o}(v,g.pipe(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.connector,t=void 0===a?function(){return new ss}:a,r=n.resetOnError,o=void 0===r||r,u=n.resetOnComplete,f=void 0===u||u,h=n.resetOnRefCountZero,v=void 0===h||h;return function(g){var y=null,_=null,C=null,S=0,R=!1,b=!1,E=function(){null==_||_.unsubscribe(),_=null},T=function(){E(),y=C=null,R=b=!1},D=function(){var O=y;T(),null==O||O.unsubscribe()};return ni(function(M,O){S++,!b&&!R&&E();var L=C=null!=C?C:t();O.add(function(){0==--S&&!b&&!R&&(_=Ov(D,v))}),L.subscribe(O),y||(y=new Af({next:function(z){return L.next(z)},error:function(z){b=!0,E(),_=Ov(T,o,z),L.error(z)},complete:function(){R=!0,E(),_=Ov(T,f),L.complete()}}),Yr(M).subscribe(y))})(g)}}()))}return j(a,[{key:"bootstrap",value:function(r,o){var h,u=this;if(!this._initStatus.done)throw new Fi("405","");h=r instanceof KO?r:this._componentFactoryResolver.resolveComponentFactory(r),this.componentTypes.push(h.componentType);var v=function(n){return n.isBoundToModule}(h)?void 0:this._injector.get(Zu),y=h.create(Vi.NULL,[],o||h.selector,v),_=y.location.nativeElement,C=y.injector.get(iA,null),S=C&&y.injector.get(BP);return C&&S&&S.registerApplication(_,C),y.onDestroy(function(){u.detachView(y.hostView),aA(u.components,y),S&&S.unregisterApplication(_)}),this._loadComponent(y),y}},{key:"tick",value:function(){var r=this;if(this._runningTick)throw new Fi("101","");try{this._runningTick=!0;var f,u=Ft(this._views);try{for(u.s();!(f=u.n()).done;)f.value.detectChanges()}catch(_){u.e(_)}finally{u.f()}}catch(_){this._zone.runOutsideAngular(function(){return r._exceptionHandler.handleError(_)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(r){var o=r;this._views.push(o),o.attachToAppRef(this)}},{key:"detachView",value:function(r){var o=r;aA(this._views,o),o.detachFromAppRef()}},{key:"_loadComponent",value:function(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(LP,[]).concat(this._bootstrapListeners).forEach(function(u){return u(r)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(r){return r.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(Ri),Mt(Vi),Mt(Xl),Mt(mc),Mt(hh))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}();function aA(n,a){var t=n.indexOf(a);t>-1&&n.splice(t,1)}var sA=function(){var n=function a(){G(this,a)};return n.__NG_ELEMENT_ID__=ZB,n}();function ZB(n){return function(n,a,t){if(Ia(n)&&!t){var r=So(n.index,a);return new Lm(r,r)}return 47&n.type?new Lm(a[16],a):null}(Gr(),qe(),16==(16&n))}var ZP=function(){function n(){G(this,n)}return j(n,[{key:"supports",value:function(t){return lc(t)}},{key:"create",value:function(t){return new r3(t)}}]),n}(),n3=function(a,t){return t},r3=function(){function n(a){G(this,n),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||n3}return j(n,[{key:"forEachItem",value:function(t){var r;for(r=this._itHead;null!==r;r=r._next)t(r)}},{key:"forEachOperation",value:function(t){for(var r=this._itHead,o=this._removalsHead,u=0,f=null;r||o;){var h=!o||r&&r.currentIndex<e1(o,u,f)?r:o,v=e1(h,u,f),g=h.currentIndex;if(h===o)u--,o=o._nextRemoved;else if(r=r._next,null==h.previousIndex)u++;else{f||(f=[]);var y=v-u,_=g-u;if(y!=_){for(var C=0;C<y;C++){var S=C<f.length?f[C]:f[C]=0,R=S+C;_<=R&&R<y&&(f[C]=S+1)}f[h.previousIndex]=_-y}}v!==g&&t(h,v,g)}}},{key:"forEachPreviousItem",value:function(t){var r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)t(r)}},{key:"forEachAddedItem",value:function(t){var r;for(r=this._additionsHead;null!==r;r=r._nextAdded)t(r)}},{key:"forEachMovedItem",value:function(t){var r;for(r=this._movesHead;null!==r;r=r._nextMoved)t(r)}},{key:"forEachRemovedItem",value:function(t){var r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)t(r)}},{key:"forEachIdentityChange",value:function(t){var r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)t(r)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!lc(t))throw new Error("Error trying to diff '".concat(Gn(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var r=this;this._reset();var f,h,v,o=this._itHead,u=!1;if(Array.isArray(t)){this.length=t.length;for(var g=0;g<this.length;g++)v=this._trackByFn(g,h=t[g]),null!==o&&Object.is(o.trackById,v)?(u&&(o=this._verifyReinsertion(o,h,v,g)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,v,g),u=!0),o=o._next}else f=0,function(n,a){if(Array.isArray(n))for(var t=0;t<n.length;t++)a(n[t]);else for(var o,r=n[pa()]();!(o=r.next()).done;)a(o.value)}(t,function(y){v=r._trackByFn(f,y),null!==o&&Object.is(o.trackById,v)?(u&&(o=r._verifyReinsertion(o,y,v,f)),Object.is(o.item,y)||r._addIdentityChange(o,y)):(o=r._mismatch(o,y,v,f),u=!0),o=o._next,f++}),this.length=f;return this._truncate(o),this.collection=t,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,r,o,u){var f;return null===t?f=this._itTail:(f=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._reinsertAfter(t,f,u)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(o,u))?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._moveAfter(t,f,u)):t=this._addAfter(new i3(r,o),f,u),t}},{key:"_verifyReinsertion",value:function(t,r,o,u){var f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?t=this._reinsertAfter(f,t._prev,u):t.currentIndex!=u&&(t.currentIndex=u,this._addToMoves(t,u)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var r=t._next;this._addToRemovals(this._unlink(t)),t=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,r,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var u=t._prevRemoved,f=t._nextRemoved;return null===u?this._removalsHead=f:u._nextRemoved=f,null===f?this._removalsTail=u:f._prevRemoved=u,this._insertAfter(t,r,o),this._addToMoves(t,o),t}},{key:"_moveAfter",value:function(t,r,o){return this._unlink(t),this._insertAfter(t,r,o),this._addToMoves(t,o),t}},{key:"_addAfter",value:function(t,r,o){return this._insertAfter(t,r,o),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,r,o){var u=null===r?this._itHead:r._next;return t._next=u,t._prev=r,null===u?this._itTail=t:u._prev=t,null===r?this._itHead=t:r._next=t,null===this._linkedRecords&&(this._linkedRecords=new QP),this._linkedRecords.put(t),t.currentIndex=o,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var r=t._prev,o=t._next;return null===r?this._itHead=o:r._next=o,null===o?this._itTail=r:o._prev=r,t}},{key:"_addToMoves",value:function(t,r){return t.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new QP),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,r){return t.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}]),n}(),i3=function n(a,t){G(this,n),this.item=a,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},o3=function(){function n(){G(this,n),this._head=null,this._tail=null}return j(n,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,r){var o;for(o=this._head;null!==o;o=o._nextDup)if((null===r||r<=o.currentIndex)&&Object.is(o.trackById,t))return o;return null}},{key:"remove",value:function(t){var r=t._prevDup,o=t._nextDup;return null===r?this._head=o:r._nextDup=o,null===o?this._tail=r:o._prevDup=r,null===this._head}}]),n}(),QP=function(){function n(){G(this,n),this.map=new Map}return j(n,[{key:"put",value:function(t){var r=t.trackById,o=this.map.get(r);o||(o=new o3,this.map.set(r,o)),o.add(t)}},{key:"get",value:function(t,r){var u=this.map.get(t);return u?u.get(t,r):null}},{key:"remove",value:function(t){var r=t.trackById;return this.map.get(r).remove(t)&&this.map.delete(r),t}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),n}();function e1(n,a,t){var r=n.previousIndex;if(null===r)return r;var o=0;return t&&r<t.length&&(o=t[r]),r+a+o}var t1=function(){function n(){G(this,n)}return j(n,[{key:"supports",value:function(t){return t instanceof Map||ym(t)}},{key:"create",value:function(){return new a3}}]),n}(),a3=function(){function n(){G(this,n),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return j(n,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(t){var r;for(r=this._mapHead;null!==r;r=r._next)t(r)}},{key:"forEachPreviousItem",value:function(t){var r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)t(r)}},{key:"forEachChangedItem",value:function(t){var r;for(r=this._changesHead;null!==r;r=r._nextChanged)t(r)}},{key:"forEachAddedItem",value:function(t){var r;for(r=this._additionsHead;null!==r;r=r._nextAdded)t(r)}},{key:"forEachRemovedItem",value:function(t){var r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)t(r)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||ym(t)))throw new Error("Error trying to diff '".concat(Gn(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var r=this;this._reset();var o=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(f,h){if(o&&o.key===h)r._maybeAddToChanges(o,f),r._appendAfter=o,o=o._next;else{var v=r._getOrCreateRecordForKey(h,f);o=r._insertBeforeOrAppend(o,v)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(var u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,r){if(t){var o=t._prev;return r._next=t,r._prev=o,t._prev=r,o&&(o._next=r),t===this._mapHead&&(this._mapHead=r),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}},{key:"_getOrCreateRecordForKey",value:function(t,r){if(this._records.has(t)){var o=this._records.get(t);this._maybeAddToChanges(o,r);var u=o._prev,f=o._next;return u&&(u._next=f),f&&(f._prev=u),o._next=null,o._prev=null,o}var h=new s3(t);return this._records.set(t,h),h.currentValue=r,this._addToAdditions(h),h}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,r){Object.is(r,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=r,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,r){t instanceof Map?t.forEach(r):Object.keys(t).forEach(function(o){return r(t[o],o)})}}]),n}(),s3=function n(a){G(this,n),this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null};function n1(){return new Um([new ZP])}var Um=function(){var n=function(){function a(t){G(this,a),this.factories=t}return j(a,[{key:"find",value:function(r){var o=this.factories.find(function(u){return u.supports(r)});if(null!=o)return o;throw new Error("Cannot find a differ supporting object '".concat(r,"' of type '").concat(function(n){return n.name||typeof n}(r),"'"))}}],[{key:"create",value:function(r,o){if(null!=o){var u=o.factories.slice();r=r.concat(u)}return new a(r)}},{key:"extend",value:function(r){return{provide:a,useFactory:function(u){return a.create(r,u||n1())},deps:[[a,new ql,new Va]]}}}]),a}();return n.\u0275prov=an({token:n,providedIn:"root",factory:n1}),n}();function r1(){return new vh([new t1])}var vh=function(){var n=function(){function a(t){G(this,a),this.factories=t}return j(a,[{key:"find",value:function(r){var o=this.factories.find(function(u){return u.supports(r)});if(o)return o;throw new Error("Cannot find a differ supporting object '".concat(r,"'"))}}],[{key:"create",value:function(r,o){if(o){var u=o.factories.slice();r=r.concat(u)}return new a(r)}},{key:"extend",value:function(r){return{provide:a,useFactory:function(u){return a.create(r,u||r1())},deps:[[a,new ql,new Va]]}}}]),a}();return n.\u0275prov=an({token:n,providedIn:"root",factory:r1}),n}(),l3=[new t1],d3=new Um([new ZP]),f3=new vh(l3),h3=WP(null,"core",[{provide:N0,useValue:"unknown"},{provide:zP,deps:[Vi]},{provide:BP,deps:[]},{provide:FP,deps:[]}]),_3=[{provide:Wm,useClass:Wm,deps:[Ri,Vi,Xl,mc,hh]},{provide:D2,deps:[Ri],useFactory:function(n){var a=[];return n.onStable.subscribe(function(){for(;a.length;)a.pop()()}),function(t){a.push(t)}}},{provide:hh,useClass:hh,deps:[[new Va,F0]]},{provide:k0,useClass:k0,deps:[]},PB,{provide:Um,useFactory:function(){return d3},deps:[]},{provide:vh,useFactory:function(){return f3},deps:[]},{provide:yc,useFactory:function(n){return n||"undefined"!=typeof $localize&&$localize.locale||E0},deps:[[new md(yc),new Va,new ql]]},{provide:NP,useValue:"USD"}],w3=function(){var n=function a(t){G(this,a)};return n.\u0275fac=function(t){return new(t||n)(Mt(Wm))},n.\u0275mod=mi({type:n}),n.\u0275inj=Go({providers:_3}),n}(),G0=null;function _c(){return G0}var b3=function n(){G(this,n)},ga=new Dn("DocumentToken"),zd=function(){var n=function(){function a(){G(this,a)}return j(a,[{key:"historyGo",value:function(r){throw new Error("Not implemented")}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=an({token:n,factory:function(){return Mt(i1)},providedIn:"platform"}),n}(),R3=new Dn("Location Initialized"),i1=function(){var n=function(a){pe(r,a);var t=ve(r);function r(o){var u;return G(this,r),(u=t.call(this))._doc=o,u._init(),u}return j(r,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return _c().getBaseHref(this._doc)}},{key:"onPopState",value:function(u){var f=_c().getGlobalEventTarget(this._doc,"window");return f.addEventListener("popstate",u,!1),function(){return f.removeEventListener("popstate",u)}}},{key:"onHashChange",value:function(u){var f=_c().getGlobalEventTarget(this._doc,"window");return f.addEventListener("hashchange",u,!1),function(){return f.removeEventListener("hashchange",u)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(u){this.location.pathname=u}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(u,f,h){o1()?this._history.pushState(u,f,h):this.location.hash=h}},{key:"replaceState",value:function(u,f,h){o1()?this._history.replaceState(u,f,h):this.location.hash=h}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(u)}},{key:"getState",value:function(){return this._history.state}}]),r}(zd);return n.\u0275fac=function(t){return new(t||n)(Mt(ga))},n.\u0275prov=an({token:n,factory:function(){return new i1(Mt(ga))},providedIn:"platform"}),n}();function o1(){return!!window.history.pushState}function pA(n,a){if(0==n.length)return a;if(0==a.length)return n;var t=0;return n.endsWith("/")&&t++,a.startsWith("/")&&t++,2==t?n+a.substring(1):1==t?n+a:n+"/"+a}function a1(n){var a=n.match(/#|\?|$/),t=a&&a.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function el(n){return n&&"?"!==n[0]?"?"+n:n}var gh=function(){var n=function(){function a(){G(this,a)}return j(a,[{key:"historyGo",value:function(r){throw new Error("Not implemented")}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=an({token:n,factory:function(){return a=Mt(ga).location,new s1(Mt(zd),a&&a.origin||"");var a},providedIn:"root"}),n}(),hA=new Dn("appBaseHref"),s1=function(){var n=function(a){pe(r,a);var t=ve(r);function r(o,u){var f;if(G(this,r),(f=t.call(this))._platformLocation=o,f._removeListenerFns=[],null==u&&(u=f._platformLocation.getBaseHrefFromDOM()),null==u)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return f._baseHref=u,f}return j(r,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(u){this._removeListenerFns.push(this._platformLocation.onPopState(u),this._platformLocation.onHashChange(u))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(u){return pA(this._baseHref,u)}},{key:"path",value:function(){var u=arguments.length>0&&void 0!==arguments[0]&&arguments[0],f=this._platformLocation.pathname+el(this._platformLocation.search),h=this._platformLocation.hash;return h&&u?"".concat(f).concat(h):f}},{key:"pushState",value:function(u,f,h,v){var g=this.prepareExternalUrl(h+el(v));this._platformLocation.pushState(u,f,g)}},{key:"replaceState",value:function(u,f,h,v){var g=this.prepareExternalUrl(h+el(v));this._platformLocation.replaceState(u,f,g)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var f,h,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(h=(f=this._platformLocation).historyGo)||void 0===h||h.call(f,u)}}]),r}(gh);return n.\u0275fac=function(t){return new(t||n)(Mt(zd),Mt(hA,8))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),D3=function(){var n=function(a){pe(r,a);var t=ve(r);function r(o,u){var f;return G(this,r),(f=t.call(this))._platformLocation=o,f._baseHref="",f._removeListenerFns=[],null!=u&&(f._baseHref=u),f}return j(r,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(u){this._removeListenerFns.push(this._platformLocation.onPopState(u),this._platformLocation.onHashChange(u))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var f=this._platformLocation.hash;return null==f&&(f="#"),f.length>0?f.substring(1):f}},{key:"prepareExternalUrl",value:function(u){var f=pA(this._baseHref,u);return f.length>0?"#"+f:f}},{key:"pushState",value:function(u,f,h,v){var g=this.prepareExternalUrl(h+el(v));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.pushState(u,f,g)}},{key:"replaceState",value:function(u,f,h,v){var g=this.prepareExternalUrl(h+el(v));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.replaceState(u,f,g)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var f,h,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(h=(f=this._platformLocation).historyGo)||void 0===h||h.call(f,u)}}]),r}(gh);return n.\u0275fac=function(t){return new(t||n)(Mt(zd),Mt(hA,8))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),vA=function(){var n=function(){function a(t,r){var o=this;G(this,a),this._subject=new we,this._urlChangeListeners=[],this._platformStrategy=t;var u=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=a1(u1(u)),this._platformStrategy.onPopState(function(f){o._subject.emit({url:o.path(!0),pop:!0,state:f.state,type:f.type})})}return j(a,[{key:"path",value:function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(r))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(r+el(o))}},{key:"normalize",value:function(r){return a.stripTrailingSlash(function(n,a){return n&&a.startsWith(n)?a.substring(n.length):a}(this._baseHref,u1(r)))}},{key:"prepareExternalUrl",value:function(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}},{key:"go",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(u,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+el(o)),u)}},{key:"replaceState",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(u,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+el(o)),u)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var o,u,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(u=(o=this._platformStrategy).historyGo)||void 0===u||u.call(o,r)}},{key:"onUrlChange",value:function(r){var o=this;this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(u){o._notifyUrlChangeListeners(u.url,u.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(u){return u(r,o)})}},{key:"subscribe",value:function(r,o,u){return this._subject.subscribe({next:r,error:o,complete:u})}}]),a}();return n.normalizeQueryParams=el,n.joinWithSlash=pA,n.stripTrailingSlash=a1,n.\u0275fac=function(t){return new(t||n)(Mt(gh),Mt(zd))},n.\u0275prov=an({token:n,factory:function(){return new vA(Mt(gh),Mt(zd))},providedIn:"root"}),n}();function u1(n){return n.replace(/\/index.html$/,"")}var ai=function(){return(ai=ai||{})[ai.Zero=0]="Zero",ai[ai.One=1]="One",ai[ai.Two=2]="Two",ai[ai.Few=3]="Few",ai[ai.Many=4]="Many",ai[ai.Other=5]="Other",ai}(),G3=function(n){return function(n){var a=function(n){return n.toLowerCase().replace(/_/g,"-")}(n),t=wO(a);if(t)return t;var r=a.split("-")[0];if(t=wO(r))return t;if("en"===r)return yG;throw new Error('Missing locale data for the locale "'.concat(n,'".'))}(n)[mt.PluralCase]},K0=function n(){G(this,n)},pH=function(){var n=function(a){pe(r,a);var t=ve(r);function r(o){var u;return G(this,r),(u=t.call(this)).locale=o,u}return j(r,[{key:"getPluralCategory",value:function(u,f){switch(G3(f||this.locale)(u)){case ai.Zero:return"zero";case ai.One:return"one";case ai.Two:return"two";case ai.Few:return"few";case ai.Many:return"many";default:return"other"}}}]),r}(K0);return n.\u0275fac=function(t){return new(t||n)(Mt(yc))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}();function m1(n,a){a=encodeURIComponent(a);var r,t=Ft(n.split(";"));try{for(t.s();!(r=t.n()).done;){var o=r.value,u=o.indexOf("="),h=Ir(-1==u?[o,""]:[o.slice(0,u),o.slice(u+1)],2),g=h[1];if(h[0].trim()===a)return decodeURIComponent(g)}}catch(y){t.e(y)}finally{t.f()}return null}var gH=function(){function n(a,t,r,o){G(this,n),this.$implicit=a,this.ngForOf=t,this.index=r,this.count=o}return j(n,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),n}(),Cc=function(){var n=function(){function a(t,r,o){G(this,a),this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return j(a,[{key:"ngForOf",set:function(r){this._ngForOf=r,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(r){this._trackByFn=r}},{key:"ngForTemplate",set:function(r){r&&(this._template=r)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var r=this._ngForOf;!this._differ&&r&&(this._differ=this._differs.find(r).create(this.ngForTrackBy))}if(this._differ){var o=this._differ.diff(this._ngForOf);o&&this._applyChanges(o)}}},{key:"_applyChanges",value:function(r){var o=this,u=this._viewContainer;r.forEachOperation(function(y,_,C){if(null==y.previousIndex)u.createEmbeddedView(o._template,new gH(y.item,o._ngForOf,-1,-1),null===C?void 0:C);else if(null==C)u.remove(null===_?void 0:_);else if(null!==_){var S=u.get(_);u.move(S,C),y1(S,y)}});for(var f=0,h=u.length;f<h;f++){var g=u.get(f).context;g.index=f,g.count=h,g.ngForOf=this._ngForOf}r.forEachIdentityChange(function(y){y1(u.get(y.currentIndex),y)})}}],[{key:"ngTemplateContextGuard",value:function(r,o){return!0}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(va),lt(Qu),lt(Um))},n.\u0275dir=Ni({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n}();function y1(n,a){n.context.$implicit=a.item}var pu=function(){var n=function(){function a(t,r){G(this,a),this._viewContainer=t,this._context=new mH,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}return j(a,[{key:"ngIf",set:function(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}},{key:"ngIfThen",set:function(r){_1("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(r){_1("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(r,o){return!0}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(va),lt(Qu))},n.\u0275dir=Ni({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n}(),mH=function n(){G(this,n),this.$implicit=null,this.ngIf=null};function _1(n,a){if(a&&!a.createEmbeddedView)throw new Error("".concat(n," must be a TemplateRef, but received '").concat(Gn(a),"'."))}var EH=function(){function n(){G(this,n)}return j(n,[{key:"createSubscription",value:function(t,r){return t.subscribe({next:r,error:function(u){throw u}})}},{key:"dispose",value:function(t){t.unsubscribe()}},{key:"onDestroy",value:function(t){t.unsubscribe()}}]),n}(),bH=function(){function n(){G(this,n)}return j(n,[{key:"createSubscription",value:function(t,r){return t.then(r,function(o){throw o})}},{key:"dispose",value:function(t){}},{key:"onDestroy",value:function(t){}}]),n}(),xH=new bH,RH=new EH,RA=function(){var n=function(){function a(t){G(this,a),this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}return j(a,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(r){return this._obj?r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue:(r&&this._subscribe(r),this._latestValue)}},{key:"_subscribe",value:function(r){var o=this;this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,function(u){return o._updateLatestValue(r,u)})}},{key:"_selectStrategy",value:function(r){if(U(r))return xH;if(Y(r))return RH;throw function(n,a){return Error("InvalidPipeArgument: '".concat(a,"' for pipe '").concat(Gn(n),"'"))}(a,r)}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(r,o){r===this._obj&&(this._latestValue=o,this._ref.markForCheck())}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(sA,16))},n.\u0275pipe=so({name:"async",type:n,pure:!1}),n}(),UH=function(){var n=function a(){G(this,a)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=Go({providers:[{provide:K0,useClass:pH}]}),n}(),YH=function(){var n=function a(){G(this,a)};return n.\u0275prov=an({token:n,providedIn:"root",factory:function(){return new KH(Mt(ga),window)}}),n}(),KH=function(){function n(a,t){G(this,n),this.document=a,this.window=t,this.offset=function(){return[0,0]}}return j(n,[{key:"setOffset",value:function(t){this.offset=Array.isArray(t)?function(){return t}:t}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}},{key:"scrollToAnchor",value:function(t){if(this.supportsScrolling()){var r=function(n,a){var t=n.getElementById(a)||n.getElementsByName(a)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow))for(var r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;o;){var u=o.shadowRoot;if(u){var f=u.getElementById(a)||u.querySelector('[name="'.concat(a,'"]'));if(f)return f}o=r.nextNode()}return null}(this.document,t);r&&(this.scrollToElement(r),this.attemptFocus(r))}}},{key:"setHistoryScrollRestoration",value:function(t){if(this.supportScrollRestoration()){var r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=t)}}},{key:"scrollToElement",value:function(t){var r=t.getBoundingClientRect(),o=r.left+this.window.pageXOffset,u=r.top+this.window.pageYOffset,f=this.offset();this.window.scrollTo(o-f[0],u-f[1])}},{key:"attemptFocus",value:function(t){return t.focus(),this.document.activeElement===t}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var t=E1(this.window.history)||E1(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(r){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}]),n}();function E1(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}var $0,DA=function n(){G(this,n)},XH=function(n){pe(t,n);var a=ve(t);function t(){var r;return G(this,t),(r=a.apply(this,arguments)).supportsDOMEvents=!0,r}return t}(b3),JH=function(n){pe(t,n);var a=ve(t);function t(){return G(this,t),a.apply(this,arguments)}return j(t,[{key:"onAndCancel",value:function(o,u,f){return o.addEventListener(u,f,!1),function(){o.removeEventListener(u,f,!1)}}},{key:"dispatchEvent",value:function(o,u){o.dispatchEvent(u)}},{key:"remove",value:function(o){o.parentNode&&o.parentNode.removeChild(o)}},{key:"createElement",value:function(o,u){return(u=u||this.getDefaultDocument()).createElement(o)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(o){return o.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(o){return o instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(o,u){return"window"===u?window:"document"===u?o:"body"===u?o.body:null}},{key:"getBaseHref",value:function(o){var u=(qm=qm||document.querySelector("base"))?qm.getAttribute("href"):null;return null==u?null:function(n){($0=$0||document.createElement("a")).setAttribute("href",n);var a=$0.pathname;return"/"===a.charAt(0)?a:"/".concat(a)}(u)}},{key:"resetBaseElement",value:function(){qm=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(o){return m1(document.cookie,o)}}],[{key:"makeCurrent",value:function(){!function(n){G0||(G0=n)}(new t)}}]),t}(XH),qm=null,b1=new Dn("TRANSITION_ID"),tV=[{provide:F0,useFactory:function(n,a,t){return function(){t.get(hh).donePromise.then(function(){for(var r=_c(),o=a.querySelectorAll('style[ng-transition="'.concat(n,'"]')),u=0;u<o.length;u++)r.remove(o[u])})}},deps:[b1,ga,Vi],multi:!0}],nV=function(){function n(){G(this,n)}return j(n,[{key:"addToWindow",value:function(t){tr.getAngularTestability=function(o){var u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],f=t.findTestabilityInTree(o,u);if(null==f)throw new Error("Could not find testability for element.");return f},tr.getAllAngularTestabilities=function(){return t.getAllTestabilities()},tr.getAllAngularRootElements=function(){return t.getAllRootElements()},tr.frameworkStabilizers||(tr.frameworkStabilizers=[]),tr.frameworkStabilizers.push(function(u){var f=tr.getAllAngularTestabilities(),h=f.length,v=!1,g=function(_){v=v||_,0==--h&&u(v)};f.forEach(function(y){y.whenStable(g)})})}},{key:"findTestabilityInTree",value:function(t,r,o){if(null==r)return null;var u=t.getTestability(r);return null!=u?u:o?_c().isShadowRoot(r)?this.findTestabilityInTree(t,r.host,!0):this.findTestabilityInTree(t,r.parentElement,!0):null}}],[{key:"init",value:function(){!function(n){oA=n}(new n)}}]),n}(),rV=function(){var n=function(){function a(){G(this,a)}return j(a,[{key:"build",value:function(){return new XMLHttpRequest}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),X0=new Dn("EventManagerPlugins"),J0=function(){var n=function(){function a(t,r){var o=this;G(this,a),this._zone=r,this._eventNameToPlugin=new Map,t.forEach(function(u){return u.manager=o}),this._plugins=t.slice().reverse()}return j(a,[{key:"addEventListener",value:function(r,o,u){return this._findPluginFor(o).addEventListener(r,o,u)}},{key:"addGlobalEventListener",value:function(r,o,u){return this._findPluginFor(o).addGlobalEventListener(r,o,u)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(r){var o=this._eventNameToPlugin.get(r);if(o)return o;for(var u=this._plugins,f=0;f<u.length;f++){var h=u[f];if(h.supports(r))return this._eventNameToPlugin.set(r,h),h}throw new Error("No event manager plugin found for event ".concat(r))}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(X0),Mt(Ri))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),x1=function(){function n(a){G(this,n),this._doc=a}return j(n,[{key:"addGlobalEventListener",value:function(t,r,o){var u=_c().getGlobalEventTarget(this._doc,t);if(!u)throw new Error("Unsupported event target ".concat(u," for event ").concat(r));return this.addEventListener(u,r,o)}}]),n}(),R1=function(){var n=function(){function a(){G(this,a),this._stylesSet=new Set}return j(a,[{key:"addStyles",value:function(r){var o=this,u=new Set;r.forEach(function(f){o._stylesSet.has(f)||(o._stylesSet.add(f),u.add(f))}),this.onStylesAdded(u)}},{key:"onStylesAdded",value:function(r){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),Ym=function(){var n=function(a){pe(r,a);var t=ve(r);function r(o){var u;return G(this,r),(u=t.call(this))._doc=o,u._hostNodes=new Map,u._hostNodes.set(o.head,[]),u}return j(r,[{key:"_addStylesToHost",value:function(u,f,h){var v=this;u.forEach(function(g){var y=v._doc.createElement("style");y.textContent=g,h.push(f.appendChild(y))})}},{key:"addHost",value:function(u){var f=[];this._addStylesToHost(this._stylesSet,u,f),this._hostNodes.set(u,f)}},{key:"removeHost",value:function(u){var f=this._hostNodes.get(u);f&&f.forEach(A1),this._hostNodes.delete(u)}},{key:"onStylesAdded",value:function(u){var f=this;this._hostNodes.forEach(function(h,v){f._addStylesToHost(u,v,h)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(u){return u.forEach(A1)})}}]),r}(R1);return n.\u0275fac=function(t){return new(t||n)(Mt(ga))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}();function A1(n){_c().remove(n)}var MA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},OA=/%COMP%/g,iV="_nghost-".concat("%COMP%"),oV="_ngcontent-".concat("%COMP%");function Z0(n,a,t){for(var r=0;r<a.length;r++){var o=a[r];Array.isArray(o)?Z0(n,o,t):(o=o.replace(OA,n),t.push(o))}return t}function M1(n){return function(a){if("__ngUnwrap__"===a)return n;!1===n(a)&&(a.preventDefault(),a.returnValue=!1)}}var PA=function(){var n=function(){function a(t,r,o){G(this,a),this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new IA(t)}return j(a,[{key:"createRenderer",value:function(r,o){if(!r||!o)return this.defaultRenderer;switch(o.encapsulation){case Ta.Emulated:var u=this.rendererByCompId.get(o.id);return u||(u=new lV(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,u)),u.applyToHost(r),u;case 1:case Ta.ShadowDom:return new cV(this.eventManager,this.sharedStylesHost,r,o);default:if(!this.rendererByCompId.has(o.id)){var f=Z0(o.id,o.styles,[]);this.sharedStylesHost.addStyles(f),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(J0),Mt(Ym),Mt(Vm))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),IA=function(){function n(a){G(this,n),this.eventManager=a,this.data=Object.create(null),this.destroyNode=null}return j(n,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,r){return r?document.createElementNS(MA[r]||r,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,r){t.appendChild(r)}},{key:"insertBefore",value:function(t,r,o){t&&t.insertBefore(r,o)}},{key:"removeChild",value:function(t,r){t&&t.removeChild(r)}},{key:"selectRootElement",value:function(t,r){var o="string"==typeof t?document.querySelector(t):t;if(!o)throw new Error('The selector "'.concat(t,'" did not match any elements'));return r||(o.textContent=""),o}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,r,o,u){if(u){r=u+":"+r;var f=MA[u];f?t.setAttributeNS(f,r,o):t.setAttribute(r,o)}else t.setAttribute(r,o)}},{key:"removeAttribute",value:function(t,r,o){if(o){var u=MA[o];u?t.removeAttributeNS(u,r):t.removeAttribute("".concat(o,":").concat(r))}else t.removeAttribute(r)}},{key:"addClass",value:function(t,r){t.classList.add(r)}},{key:"removeClass",value:function(t,r){t.classList.remove(r)}},{key:"setStyle",value:function(t,r,o,u){u&(Ro.DashCase|Ro.Important)?t.style.setProperty(r,o,u&Ro.Important?"important":""):t.style[r]=o}},{key:"removeStyle",value:function(t,r,o){o&Ro.DashCase?t.style.removeProperty(r):t.style[r]=""}},{key:"setProperty",value:function(t,r,o){t[r]=o}},{key:"setValue",value:function(t,r){t.nodeValue=r}},{key:"listen",value:function(t,r,o){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,r,M1(o)):this.eventManager.addEventListener(t,r,M1(o))}}]),n}(),lV=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f){var h;G(this,t),(h=a.call(this,r)).component=u;var v=Z0(f+"-"+u.id,u.styles,[]);return o.addStyles(v),h.contentAttr=function(n){return oV.replace(OA,n)}(f+"-"+u.id),h.hostAttr=function(n){return iV.replace(OA,n)}(f+"-"+u.id),h}return j(t,[{key:"applyToHost",value:function(o){ye(ze(t.prototype),"setAttribute",this).call(this,o,this.hostAttr,"")}},{key:"createElement",value:function(o,u){var f=ye(ze(t.prototype),"createElement",this).call(this,o,u);return ye(ze(t.prototype),"setAttribute",this).call(this,f,this.contentAttr,""),f}}]),t}(IA),cV=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f){var h;G(this,t),(h=a.call(this,r)).sharedStylesHost=o,h.hostEl=u,h.shadowRoot=u.attachShadow({mode:"open"}),h.sharedStylesHost.addHost(h.shadowRoot);for(var v=Z0(f.id,f.styles,[]),g=0;g<v.length;g++){var y=document.createElement("style");y.textContent=v[g],h.shadowRoot.appendChild(y)}return h}return j(t,[{key:"nodeOrShadowRoot",value:function(o){return o===this.hostEl?this.shadowRoot:o}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(o,u){return ye(ze(t.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(o),u)}},{key:"insertBefore",value:function(o,u,f){return ye(ze(t.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(o),u,f)}},{key:"removeChild",value:function(o,u){return ye(ze(t.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(o),u)}},{key:"parentNode",value:function(o){return this.nodeOrShadowRoot(ye(ze(t.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(o)))}}]),t}(IA),dV=function(){var n=function(a){pe(r,a);var t=ve(r);function r(o){return G(this,r),t.call(this,o)}return j(r,[{key:"supports",value:function(u){return!0}},{key:"addEventListener",value:function(u,f,h){var v=this;return u.addEventListener(f,h,!1),function(){return v.removeEventListener(u,f,h)}}},{key:"removeEventListener",value:function(u,f,h){return u.removeEventListener(f,h)}}]),r}(x1);return n.\u0275fac=function(t){return new(t||n)(Mt(ga))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),P1=["alt","control","meta","shift"],pV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},I1={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hV={alt:function(a){return a.altKey},control:function(a){return a.ctrlKey},meta:function(a){return a.metaKey},shift:function(a){return a.shiftKey}},vV=function(){var n=function(a){pe(r,a);var t=ve(r);function r(o){return G(this,r),t.call(this,o)}return j(r,[{key:"supports",value:function(u){return null!=r.parseEventName(u)}},{key:"addEventListener",value:function(u,f,h){var v=r.parseEventName(f),g=r.eventCallback(v.fullKey,h,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return _c().onAndCancel(u,v.domEventName,g)})}}],[{key:"parseEventName",value:function(u){var f=u.toLowerCase().split("."),h=f.shift();if(0===f.length||"keydown"!==h&&"keyup"!==h)return null;var v=r._normalizeKey(f.pop()),g="";if(P1.forEach(function(_){var C=f.indexOf(_);C>-1&&(f.splice(C,1),g+=_+".")}),g+=v,0!=f.length||0===v.length)return null;var y={};return y.domEventName=h,y.fullKey=g,y}},{key:"getEventFullKey",value:function(u){var f="",h=function(n){var a=n.key;if(null==a){if(null==(a=n.keyIdentifier))return"Unidentified";a.startsWith("U+")&&(a=String.fromCharCode(parseInt(a.substring(2),16)),3===n.location&&I1.hasOwnProperty(a)&&(a=I1[a]))}return pV[a]||a}(u);return" "===(h=h.toLowerCase())?h="space":"."===h&&(h="dot"),P1.forEach(function(v){v!=h&&(0,hV[v])(u)&&(f+=v+".")}),f+=h}},{key:"eventCallback",value:function(u,f,h){return function(v){r.getEventFullKey(v)===u&&h.runGuarded(function(){return f(v)})}}},{key:"_normalizeKey",value:function(u){return"esc"===u?"escape":u}}]),r}(x1);return n.\u0275fac=function(t){return new(t||n)(Mt(ga))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),CV=[{provide:N0,useValue:"browser"},{provide:IP,useValue:function(){JH.makeCurrent(),nV.init()},multi:!0},{provide:ga,useFactory:function(){return function(n){jv=n}(document),document},deps:[]}],wV=WP(h3,"browser",CV),SV=[{provide:Xp,useValue:"root"},{provide:Xl,useFactory:function(){return new Xl},deps:[]},{provide:X0,useClass:dV,multi:!0,deps:[ga,Ri,N0]},{provide:X0,useClass:vV,multi:!0,deps:[ga]},{provide:PA,useClass:PA,deps:[J0,Ym,Vm]},{provide:XO,useExisting:PA},{provide:R1,useExisting:Ym},{provide:Ym,useClass:Ym,deps:[ga]},{provide:iA,useClass:iA,deps:[Ri]},{provide:J0,useClass:J0,deps:[X0,Ri]},{provide:DA,useClass:rV,deps:[]}],EV=function(){var n=function(){function a(t){if(G(this,a),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return j(a,null,[{key:"withServerTransition",value:function(r){return{ngModule:a,providers:[{provide:Vm,useValue:r.appId},{provide:b1,useExisting:Vm},tV]}}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(n,12))},n.\u0275mod=mi({type:n}),n.\u0275inj=Go({providers:SV,imports:[UH,w3]}),n}();function on(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];var r=$(a);return Yr(a,r)}function mh(n,a){return bn(a)?qr(n,a,1):qr(n,1)}function jd(n,a){return ni(function(t,r){var o=0;t.subscribe(new pn(r,function(u){return n.call(a,u,o++)&&r.next(u)}))})}"undefined"!=typeof window&&window;var N1=function n(){G(this,n)},k1=function n(){G(this,n)},Km=function(){function n(a){var t=this;G(this,n),this.normalizedNames=new Map,this.lazyUpdate=null,a?this.lazyInit="string"==typeof a?function(){t.headers=new Map,a.split("\n").forEach(function(r){var o=r.indexOf(":");if(o>0){var u=r.slice(0,o),f=u.toLowerCase(),h=r.slice(o+1).trim();t.maybeSetNormalizedName(u,f),t.headers.has(f)?t.headers.get(f).push(h):t.headers.set(f,[h])}})}:function(){t.headers=new Map,Object.keys(a).forEach(function(r){var o=a[r],u=r.toLowerCase();"string"==typeof o&&(o=[o]),o.length>0&&(t.headers.set(u,o),t.maybeSetNormalizedName(r,u))})}:this.headers=new Map}return j(n,[{key:"has",value:function(t){return this.init(),this.headers.has(t.toLowerCase())}},{key:"get",value:function(t){this.init();var r=this.headers.get(t.toLowerCase());return r&&r.length>0?r[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(t){return this.init(),this.headers.get(t.toLowerCase())||null}},{key:"append",value:function(t,r){return this.clone({name:t,value:r,op:"a"})}},{key:"set",value:function(t,r){return this.clone({name:t,value:r,op:"s"})}},{key:"delete",value:function(t,r){return this.clone({name:t,value:r,op:"d"})}},{key:"maybeSetNormalizedName",value:function(t,r){this.normalizedNames.has(r)||this.normalizedNames.set(r,t)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(r){return t.applyUpdate(r)}),this.lazyUpdate=null))}},{key:"copyFrom",value:function(t){var r=this;t.init(),Array.from(t.headers.keys()).forEach(function(o){r.headers.set(o,t.headers.get(o)),r.normalizedNames.set(o,t.normalizedNames.get(o))})}},{key:"clone",value:function(t){var r=new n;return r.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,r.lazyUpdate=(this.lazyUpdate||[]).concat([t]),r}},{key:"applyUpdate",value:function(t){var r=t.name.toLowerCase();switch(t.op){case"a":case"s":var o=t.value;if("string"==typeof o&&(o=[o]),0===o.length)return;this.maybeSetNormalizedName(t.name,r);var u=("a"===t.op?this.headers.get(r):void 0)||[];u.push.apply(u,kn(o)),this.headers.set(r,u);break;case"d":var f=t.value;if(f){var h=this.headers.get(r);if(!h)return;0===(h=h.filter(function(v){return-1===f.indexOf(v)})).length?(this.headers.delete(r),this.normalizedNames.delete(r)):this.headers.set(r,h)}else this.headers.delete(r),this.normalizedNames.delete(r)}}},{key:"forEach",value:function(t){var r=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(o){return t(r.normalizedNames.get(o),r.headers.get(o))})}}]),n}(),PV=function(){function n(){G(this,n)}return j(n,[{key:"encodeKey",value:function(t){return G1(t)}},{key:"encodeValue",value:function(t){return G1(t)}},{key:"decodeKey",value:function(t){return decodeURIComponent(t)}},{key:"decodeValue",value:function(t){return decodeURIComponent(t)}}]),n}();function IV(n,a){var t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(function(o){var u=o.indexOf("="),h=Ir(-1==u?[a.decodeKey(o),""]:[a.decodeKey(o.slice(0,u)),a.decodeValue(o.slice(u+1))],2),v=h[0],g=h[1],y=t.get(v)||[];y.push(g),t.set(v,y)}),t}var LV=/%(\d[a-f0-9])/gi,FV={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function G1(n){return encodeURIComponent(n).replace(LV,function(a,t){var r;return null!==(r=FV[t])&&void 0!==r?r:a})}function B1(n){return"".concat(n)}var yh=function(){function n(){var a=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(G(this,n),this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new PV,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=IV(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(function(r){var o=t.fromObject[r];a.map.set(r,Array.isArray(o)?o:[o])})):this.map=null}return j(n,[{key:"has",value:function(t){return this.init(),this.map.has(t)}},{key:"get",value:function(t){this.init();var r=this.map.get(t);return r?r[0]:null}},{key:"getAll",value:function(t){return this.init(),this.map.get(t)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(t,r){return this.clone({param:t,value:r,op:"a"})}},{key:"appendAll",value:function(t){var r=[];return Object.keys(t).forEach(function(o){var u=t[o];Array.isArray(u)?u.forEach(function(f){r.push({param:o,value:f,op:"a"})}):r.push({param:o,value:u,op:"a"})}),this.clone(r)}},{key:"set",value:function(t,r){return this.clone({param:t,value:r,op:"s"})}},{key:"delete",value:function(t,r){return this.clone({param:t,value:r,op:"d"})}},{key:"toString",value:function(){var t=this;return this.init(),this.keys().map(function(r){var o=t.encoder.encodeKey(r);return t.map.get(r).map(function(u){return o+"="+t.encoder.encodeValue(u)}).join("&")}).filter(function(r){return""!==r}).join("&")}},{key:"clone",value:function(t){var r=new n({encoder:this.encoder});return r.cloneFrom=this.cloneFrom||this,r.updates=(this.updates||[]).concat(t),r}},{key:"init",value:function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(r){return t.map.set(r,t.cloneFrom.map.get(r))}),this.updates.forEach(function(r){switch(r.op){case"a":case"s":var o=("a"===r.op?t.map.get(r.param):void 0)||[];o.push(B1(r.value)),t.map.set(r.param,o);break;case"d":if(void 0===r.value){t.map.delete(r.param);break}var u=t.map.get(r.param)||[],f=u.indexOf(B1(r.value));-1!==f&&u.splice(f,1),u.length>0?t.map.set(r.param,u):t.map.delete(r.param)}}),this.cloneFrom=this.updates=null)}}]),n}(),NV=function(){function n(){G(this,n),this.map=new Map}return j(n,[{key:"set",value:function(t,r){return this.map.set(t,r),this}},{key:"get",value:function(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}},{key:"delete",value:function(t){return this.map.delete(t),this}},{key:"has",value:function(t){return this.map.has(t)}},{key:"keys",value:function(){return this.map.keys()}}]),n}();function H1(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function V1(n){return"undefined"!=typeof Blob&&n instanceof Blob}function W1(n){return"undefined"!=typeof FormData&&n instanceof FormData}var FA=function(){function n(a,t,r,o){var u;if(G(this,n),this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=a.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,u=o):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Km),this.context||(this.context=new NV),this.params){var f=this.params.toString();if(0===f.length)this.urlWithParams=t;else{var h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+f}}else this.params=new yh,this.urlWithParams=t}return j(n,[{key:"serializeBody",value:function(){return null===this.body?null:H1(this.body)||V1(this.body)||W1(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof yh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||W1(this.body)?null:V1(this.body)?this.body.type||null:H1(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof yh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}},{key:"clone",value:function(){var r,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.method||this.method,u=t.url||this.url,f=t.responseType||this.responseType,h=void 0!==t.body?t.body:this.body,v=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,g=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,y=t.headers||this.headers,_=t.params||this.params,C=null!==(r=t.context)&&void 0!==r?r:this.context;return void 0!==t.setHeaders&&(y=Object.keys(t.setHeaders).reduce(function(S,R){return S.set(R,t.setHeaders[R])},y)),t.setParams&&(_=Object.keys(t.setParams).reduce(function(S,R){return S.set(R,t.setParams[R])},_)),new n(o,u,h,{params:_,headers:y,context:C,reportProgress:g,responseType:f,withCredentials:v})}}]),n}(),ui=function(){return(ui=ui||{})[ui.Sent=0]="Sent",ui[ui.UploadProgress=1]="UploadProgress",ui[ui.ResponseHeader=2]="ResponseHeader",ui[ui.DownloadProgress=3]="DownloadProgress",ui[ui.Response=4]="Response",ui[ui.User=5]="User",ui}(),NA=function n(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";G(this,n),this.headers=a.headers||new Km,this.status=void 0!==a.status?a.status:t,this.statusText=a.statusText||r,this.url=a.url||null,this.ok=this.status>=200&&this.status<300},BV=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return G(this,t),(r=a.call(this,o)).type=ui.ResponseHeader,r}return j(t,[{key:"clone",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t({headers:o.headers||this.headers,status:void 0!==o.status?o.status:this.status,statusText:o.statusText||this.statusText,url:o.url||this.url||void 0})}}]),t}(NA),U1=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return G(this,t),(r=a.call(this,o)).type=ui.Response,r.body=void 0!==o.body?o.body:null,r}return j(t,[{key:"clone",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t({body:void 0!==o.body?o.body:this.body,headers:o.headers||this.headers,status:void 0!==o.status?o.status:this.status,statusText:o.statusText||this.statusText,url:o.url||this.url||void 0})}}]),t}(NA),z1=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this,r,0,"Unknown Error")).name="HttpErrorResponse",o.ok=!1,o.message=o.status>=200&&o.status<300?"Http failure during parsing for ".concat(r.url||"(unknown url)"):"Http failure response for ".concat(r.url||"(unknown url)",": ").concat(r.status," ").concat(r.statusText),o.error=r.error||null,o}return t}(NA);function kA(n,a){return{body:a,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}var hu=function(){var n=function(){function a(t){G(this,a),this.handler=t}return j(a,[{key:"request",value:function(r,o){var h,u=this,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r instanceof FA)h=r;else{var v=void 0;v=f.headers instanceof Km?f.headers:new Km(f.headers);var g=void 0;f.params&&(g=f.params instanceof yh?f.params:new yh({fromObject:f.params})),h=new FA(r,o,void 0!==f.body?f.body:null,{headers:v,context:f.context,params:g,reportProgress:f.reportProgress,responseType:f.responseType||"json",withCredentials:f.withCredentials})}var y=on(h).pipe(mh(function(C){return u.handler.handle(C)}));if(r instanceof FA||"events"===f.observe)return y;var _=y.pipe(jd(function(C){return C instanceof U1}));switch(f.observe||"body"){case"body":switch(h.responseType){case"arraybuffer":return _.pipe(zn(function(C){if(null!==C.body&&!(C.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return C.body}));case"blob":return _.pipe(zn(function(C){if(null!==C.body&&!(C.body instanceof Blob))throw new Error("Response is not a Blob.");return C.body}));case"text":return _.pipe(zn(function(C){if(null!==C.body&&"string"!=typeof C.body)throw new Error("Response is not a string.");return C.body}));default:return _.pipe(zn(function(C){return C.body}))}case"response":return _;default:throw new Error("Unreachable: unhandled observe type ".concat(f.observe,"}"))}}},{key:"delete",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",r,o)}},{key:"get",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",r,o)}},{key:"head",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",r,o)}},{key:"jsonp",value:function(r,o){return this.request("JSONP",r,{params:(new yh).append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",r,o)}},{key:"patch",value:function(r,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",r,kA(u,o))}},{key:"post",value:function(r,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",r,kA(u,o))}},{key:"put",value:function(r,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",r,kA(u,o))}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(N1))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),j1=function(){function n(a,t){G(this,n),this.next=a,this.interceptor=t}return j(n,[{key:"handle",value:function(t){return this.interceptor.intercept(t,this.next)}}]),n}(),q1=new Dn("HTTP_INTERCEPTORS"),HV=function(){var n=function(){function a(){G(this,a)}return j(a,[{key:"intercept",value:function(r,o){return o.handle(r)}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),VV=/^\)\]\}',?\n/,Y1=function(){var n=function(){function a(t){G(this,a),this.xhrFactory=t}return j(a,[{key:"handle",value:function(r){var o=this;if("JSONP"===r.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new _r(function(u){var f=o.xhrFactory.build();if(f.open(r.method,r.urlWithParams),r.withCredentials&&(f.withCredentials=!0),r.headers.forEach(function(T,D){return f.setRequestHeader(T,D.join(","))}),r.headers.has("Accept")||f.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){var h=r.detectContentTypeHeader();null!==h&&f.setRequestHeader("Content-Type",h)}if(r.responseType){var v=r.responseType.toLowerCase();f.responseType="json"!==v?v:"text"}var g=r.serializeBody(),y=null,_=function(){if(null!==y)return y;var D=1223===f.status?204:f.status,M=f.statusText||"OK",O=new Km(f.getAllResponseHeaders()),L=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(f)||r.url;return y=new BV({headers:O,status:D,statusText:M,url:L})},C=function(){var D=_(),M=D.headers,O=D.status,L=D.statusText,H=D.url,z=null;204!==O&&(z=void 0===f.response?f.responseText:f.response),0===O&&(O=z?200:0);var P=O>=200&&O<300;if("json"===r.responseType&&"string"==typeof z){var W=z;z=z.replace(VV,"");try{z=""!==z?JSON.parse(z):null}catch(X){z=W,P&&(P=!1,z={error:X,text:z})}}P?(u.next(new U1({body:z,headers:M,status:O,statusText:L,url:H||void 0})),u.complete()):u.error(new z1({error:z,headers:M,status:O,statusText:L,url:H||void 0}))},S=function(D){var M=_(),L=new z1({error:D,status:f.status||0,statusText:f.statusText||"Unknown Error",url:M.url||void 0});u.error(L)},R=!1,b=function(D){R||(u.next(_()),R=!0);var M={type:ui.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(M.total=D.total),"text"===r.responseType&&!!f.responseText&&(M.partialText=f.responseText),u.next(M)},E=function(D){var M={type:ui.UploadProgress,loaded:D.loaded};D.lengthComputable&&(M.total=D.total),u.next(M)};return f.addEventListener("load",C),f.addEventListener("error",S),f.addEventListener("timeout",S),f.addEventListener("abort",S),r.reportProgress&&(f.addEventListener("progress",b),null!==g&&f.upload&&f.upload.addEventListener("progress",E)),f.send(g),u.next({type:ui.Sent}),function(){f.removeEventListener("error",S),f.removeEventListener("abort",S),f.removeEventListener("load",C),f.removeEventListener("timeout",S),r.reportProgress&&(f.removeEventListener("progress",b),null!==g&&f.upload&&f.upload.removeEventListener("progress",E)),f.readyState!==f.DONE&&f.abort()}})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(DA))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),GA=new Dn("XSRF_COOKIE_NAME"),BA=new Dn("XSRF_HEADER_NAME"),K1=function n(){G(this,n)},UV=function(){var n=function(){function a(t,r,o){G(this,a),this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return j(a,[{key:"getToken",value:function(){if("server"===this.platform)return null;var r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=m1(r,this.cookieName),this.lastCookieString=r),this.lastToken}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(ga),Mt(N0),Mt(GA))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),HA=function(){var n=function(){function a(t,r){G(this,a),this.tokenService=t,this.headerName=r}return j(a,[{key:"intercept",value:function(r,o){var u=r.url.toLowerCase();if("GET"===r.method||"HEAD"===r.method||u.startsWith("http://")||u.startsWith("https://"))return o.handle(r);var f=this.tokenService.getToken();return null!==f&&!r.headers.has(this.headerName)&&(r=r.clone({headers:r.headers.set(this.headerName,f)})),o.handle(r)}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(K1),Mt(BA))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),zV=function(){var n=function(){function a(t,r){G(this,a),this.backend=t,this.injector=r,this.chain=null}return j(a,[{key:"handle",value:function(r){if(null===this.chain){var o=this.injector.get(q1,[]);this.chain=o.reduceRight(function(u,f){return new j1(u,f)},this.backend)}return this.chain.handle(r)}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(k1),Mt(Vi))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),jV=function(){var n=function(){function a(){G(this,a)}return j(a,null,[{key:"disable",value:function(){return{ngModule:a,providers:[{provide:HA,useClass:HV}]}}},{key:"withOptions",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:a,providers:[r.cookieName?{provide:GA,useValue:r.cookieName}:[],r.headerName?{provide:BA,useValue:r.headerName}:[]]}}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=Go({providers:[HA,{provide:q1,useExisting:HA,multi:!0},{provide:K1,useClass:UV},{provide:GA,useValue:"XSRF-TOKEN"},{provide:BA,useValue:"X-XSRF-TOKEN"}]}),n}(),qV=function(){var n=function a(){G(this,a)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=mi({type:n}),n.\u0275inj=Go({providers:[hu,{provide:N1,useClass:zV},Y1,{provide:k1,useExisting:Y1}],imports:[[jV.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n}(),Ns=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this))._value=r,o}return j(t,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(o){var u=ye(ze(t.prototype),"_subscribe",this).call(this,o);return!u.closed&&o.next(this._value),u}},{key:"getValue",value:function(){var f=this._value;if(this.hasError)throw this.thrownError;return this._throwIfClosed(),f}},{key:"next",value:function(o){ye(ze(t.prototype),"next",this).call(this,this._value=o)}}]),t}(ss),YV=Array.isArray,KV=Object.getPrototypeOf,$V=Object.prototype,XV=Object.keys;function JV(n){if(1===n.length){var a=n[0];if(YV(a))return{args:a,keys:null};if(function(n){return n&&"object"==typeof n&&KV(n)===$V}(a)){var t=XV(a);return{args:t.map(function(r){return a[r]}),keys:t}}}return{args:n,keys:null}}var QV=Array.isArray;function tW(n){return zn(function(a){return function(n,a){return QV(a)?n.apply(void 0,kn(a)):n(a)}(n,a)})}function nW(n,a){return n.reduce(function(t,r,o){return t[r]=a[o],t},{})}function iW(n,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ti;return function(r){$1(a,function(){for(var o=n.length,u=new Array(o),f=o,h=o,v=function(_){$1(a,function(){var C=Yr(n[_],a),S=!1;C.subscribe(new pn(r,function(R){u[_]=R,S||(S=!0,h--),h||r.next(t(u.slice()))},function(){--f||r.complete()}))},r)},g=0;g<o;g++)v(g)},r)}}function $1(n,a,t){n?us(t,n,a):a()}var Q0=Cl(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function oW(){return Wc(1)}function VA(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];return oW()(Yr(a,$(a)))}function X1(n){return new _r(function(a){oo(n()).subscribe(a)})}function J1(){return ni(function(n,a){var t=null;n._refCount++;var r=new pn(a,void 0,void 0,void 0,function(){if(!n||n._refCount<=0||0<--n._refCount)t=null;else{var o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),a.unsubscribe()}});n.subscribe(r),r.closed||(t=n.connect())})}var aW=function(n){pe(t,n);var a=ve(t);function t(r,o){var u;return G(this,t),(u=a.call(this)).source=r,u.subjectFactory=o,u._subject=null,u._refCount=0,u._connection=null,o_(r)&&(u.lift=r.lift),u}return j(t,[{key:"_subscribe",value:function(o){return this.getSubject().subscribe(o)}},{key:"getSubject",value:function(){var o=this._subject;return(!o||o.isStopped)&&(this._subject=this.subjectFactory()),this._subject}},{key:"_teardown",value:function(){this._refCount=0;var o=this._connection;this._subject=this._connection=null,null==o||o.unsubscribe()}},{key:"connect",value:function(){var o=this,u=this._connection;if(!u){u=this._connection=new nt;var f=this.getSubject();u.add(this.source.subscribe(new pn(f,void 0,function(){o._teardown(),f.complete()},function(h){o._teardown(),f.error(h)},function(){return o._teardown()}))),u.closed&&(this._connection=null,u=nt.EMPTY)}return u}},{key:"refCount",value:function(){return J1()(this)}}]),t}(_r);function qd(n,a){return ni(function(t,r){var o=null,u=0,f=!1,h=function(){return f&&!o&&r.complete()};t.subscribe(new pn(r,function(v){null==o||o.unsubscribe();var g=0,y=u++;oo(n(v,y)).subscribe(o=new pn(r,function(_){return r.next(a?a(v,_,y,g++):_)},function(){o=null,h()}))},function(){f=!0,h()}))})}function uW(n,a,t,r,o){return function(u,f){var h=t,v=a,g=0;u.subscribe(new pn(f,function(y){var _=g++;v=h?n(v,y,_):(h=!0,y),r&&f.next(v)},o&&function(){h&&f.next(v),f.complete()}))}}function Z1(n,a){return ni(uW(n,a,arguments.length>=2,!0))}function wc(n){return ni(function(a,t){var u,r=null,o=!1;r=a.subscribe(new pn(t,void 0,void 0,function(f){u=oo(n(f,wc(n)(a))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function WA(n){return n<=0?function(){return _o}:ni(function(a,t){var r=[];a.subscribe(new pn(t,function(o){r.push(o),n<r.length&&r.shift()},function(){var u,o=Ft(r);try{for(o.s();!(u=o.n()).done;)t.next(u.value)}catch(h){o.e(h)}finally{o.f()}t.complete()},void 0,function(){r=null}))})}function Q1(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lW;return ni(function(a,t){var r=!1;a.subscribe(new pn(t,function(o){r=!0,t.next(o)},function(){return r?t.complete():t.error(n())}))})}function lW(){return new Q0}function eI(n){return ni(function(a,t){var r=!1;a.subscribe(new pn(t,function(o){r=!0,t.next(o)},function(){r||t.next(n),t.complete()}))})}function _h(n,a){var t=arguments.length>=2;return function(r){return r.pipe(n?jd(function(o,u){return n(o,u,r)}):ti,Ff(1),t?eI(a):Q1(function(){return new Q0}))}}function ma(n,a,t){var r=bn(n)||a||t?{next:n,error:a,complete:t}:n;return r?ni(function(o,u){var f;null===(f=r.subscribe)||void 0===f||f.call(r);var h=!0;o.subscribe(new pn(u,function(v){var g;null===(g=r.next)||void 0===g||g.call(r,v),u.next(v)},function(){var v;h=!1,null===(v=r.complete)||void 0===v||v.call(r),u.complete()},function(v){var g;h=!1,null===(g=r.error)||void 0===g||g.call(r,v),u.error(v)},function(){var v,g;h&&(null===(v=r.unsubscribe)||void 0===v||v.call(r)),null===(g=r.finalize)||void 0===g||g.call(r)}))}):ti}var nl=function n(a,t){G(this,n),this.id=a,this.url=t},UA=function(n){pe(t,n);var a=ve(t);function t(r,o){var u,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return G(this,t),(u=a.call(this,r,o)).navigationTrigger=f,u.restoredState=h,u}return j(t,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),t}(nl),$m=function(n){pe(t,n);var a=ve(t);function t(r,o,u){var f;return G(this,t),(f=a.call(this,r,o)).urlAfterRedirects=u,f}return j(t,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),t}(nl),tI=function(n){pe(t,n);var a=ve(t);function t(r,o,u){var f;return G(this,t),(f=a.call(this,r,o)).reason=u,f}return j(t,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),t}(nl),fW=function(n){pe(t,n);var a=ve(t);function t(r,o,u){var f;return G(this,t),(f=a.call(this,r,o)).error=u,f}return j(t,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),t}(nl),pW=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f){var h;return G(this,t),(h=a.call(this,r,o)).urlAfterRedirects=u,h.state=f,h}return j(t,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(nl),hW=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f){var h;return G(this,t),(h=a.call(this,r,o)).urlAfterRedirects=u,h.state=f,h}return j(t,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(nl),vW=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f,h){var v;return G(this,t),(v=a.call(this,r,o)).urlAfterRedirects=u,v.state=f,v.shouldActivate=h,v}return j(t,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),t}(nl),gW=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f){var h;return G(this,t),(h=a.call(this,r,o)).urlAfterRedirects=u,h.state=f,h}return j(t,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(nl),mW=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f){var h;return G(this,t),(h=a.call(this,r,o)).urlAfterRedirects=u,h.state=f,h}return j(t,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(nl),nI=function(){function n(a){G(this,n),this.route=a}return j(n,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),n}(),rI=function(){function n(a){G(this,n),this.route=a}return j(n,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),n}(),yW=function(){function n(a){G(this,n),this.snapshot=a}return j(n,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),n}(),_W=function(){function n(a){G(this,n),this.snapshot=a}return j(n,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),n}(),CW=function(){function n(a){G(this,n),this.snapshot=a}return j(n,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),n}(),wW=function(){function n(a){G(this,n),this.snapshot=a}return j(n,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),n}(),iI=function(){function n(a,t,r){G(this,n),this.routerEvent=a,this.position=t,this.anchor=r}return j(n,[{key:"toString",value:function(){var t=this.position?"".concat(this.position[0],", ").concat(this.position[1]):null;return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(t,"')")}}]),n}(),Mn="primary",SW=function(){function n(a){G(this,n),this.params=a||{}}return j(n,[{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.params,t)}},{key:"get",value:function(t){if(this.has(t)){var r=this.params[t];return Array.isArray(r)?r[0]:r}return null}},{key:"getAll",value:function(t){if(this.has(t)){var r=this.params[t];return Array.isArray(r)?r:[r]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),n}();function Ch(n){return new SW(n)}var oI="ngNavigationCancelingError";function zA(n){var a=Error("NavigationCancelingError: "+n);return a[oI]=!0,a}function bW(n,a,t){var r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(a.hasChildren()||r.length<n.length))return null;for(var o={},u=0;u<r.length;u++){var f=r[u],h=n[u];if(f.startsWith(":"))o[f.substring(1)]=h;else if(f!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function vu(n,a){var t=n?Object.keys(n):void 0,r=a?Object.keys(a):void 0;if(!t||!r||t.length!=r.length)return!1;for(var o,u=0;u<t.length;u++)if(!aI(n[o=t[u]],a[o]))return!1;return!0}function aI(n,a){if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length)return!1;var t=kn(n).sort(),r=kn(a).sort();return t.every(function(o,u){return r[u]===o})}return n===a}function sI(n){return Array.prototype.concat.apply([],n)}function uI(n){return n.length>0?n[n.length-1]:null}function Qi(n,a){for(var t in n)n.hasOwnProperty(t)&&a(n[t],t)}function gu(n){return Q(n)?n:U(n)?Yr(Promise.resolve(n)):on(n)}var AW={exact:function dI(n,a,t){if(!Kd(n.segments,a.segments)||!eS(n.segments,a.segments,t)||n.numberOfChildren!==a.numberOfChildren)return!1;for(var r in a.children)if(!n.children[r]||!dI(n.children[r],a.children[r],t))return!1;return!0},subset:fI},lI={exact:function(n,a){return vu(n,a)},subset:function(n,a){return Object.keys(a).length<=Object.keys(n).length&&Object.keys(a).every(function(t){return aI(n[t],a[t])})},ignored:function(){return!0}};function cI(n,a,t){return AW[t.paths](n.root,a.root,t.matrixParams)&&lI[t.queryParams](n.queryParams,a.queryParams)&&!("exact"===t.fragment&&n.fragment!==a.fragment)}function fI(n,a,t){return pI(n,a,a.segments,t)}function pI(n,a,t,r){if(n.segments.length>t.length){var o=n.segments.slice(0,t.length);return!(!Kd(o,t)||a.hasChildren()||!eS(o,t,r))}if(n.segments.length===t.length){if(!Kd(n.segments,t)||!eS(n.segments,t,r))return!1;for(var u in a.children)if(!n.children[u]||!fI(n.children[u],a.children[u],r))return!1;return!0}var f=t.slice(0,n.segments.length),h=t.slice(n.segments.length);return!!(Kd(n.segments,f)&&eS(n.segments,f,r)&&n.children[Mn])&&pI(n.children[Mn],a,h,r)}function eS(n,a,t){return a.every(function(r,o){return lI[t](n[o].parameters,r.parameters)})}var Yd=function(){function n(a,t,r){G(this,n),this.root=a,this.queryParams=t,this.fragment=r}return j(n,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Ch(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return PW.serialize(this)}}]),n}(),Bn=function(){function n(a,t){var r=this;G(this,n),this.segments=a,this.children=t,this.parent=null,Qi(t,function(o,u){return o.parent=r})}return j(n,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return tS(this)}}]),n}(),Xm=function(){function n(a,t){G(this,n),this.path=a,this.parameters=t}return j(n,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=Ch(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return yI(this)}}]),n}();function Kd(n,a){return n.length===a.length&&n.every(function(t,r){return t.path===a[r].path})}var hI=function n(){G(this,n)},vI=function(){function n(){G(this,n)}return j(n,[{key:"parse",value:function(t){var r=new VW(t);return new Yd(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}},{key:"serialize",value:function(t){var r="/".concat(Jm(t.root,!0)),o=function(n){var a=Object.keys(n).map(function(t){var r=n[t];return Array.isArray(r)?r.map(function(o){return"".concat(nS(t),"=").concat(nS(o))}).join("&"):"".concat(nS(t),"=").concat(nS(r))}).filter(function(t){return!!t});return a.length?"?".concat(a.join("&")):""}(t.queryParams),u="string"==typeof t.fragment?"#".concat(function(n){return encodeURI(n)}(t.fragment)):"";return"".concat(r).concat(o).concat(u)}}]),n}(),PW=new vI;function tS(n){return n.segments.map(function(a){return yI(a)}).join("/")}function Jm(n,a){if(!n.hasChildren())return tS(n);if(a){var t=n.children[Mn]?Jm(n.children[Mn],!1):"",r=[];return Qi(n.children,function(u,f){f!==Mn&&r.push("".concat(f,":").concat(Jm(u,!1)))}),r.length>0?"".concat(t,"(").concat(r.join("//"),")"):t}var o=function(n,a){var t=[];return Qi(n.children,function(r,o){o===Mn&&(t=t.concat(a(r,o)))}),Qi(n.children,function(r,o){o!==Mn&&(t=t.concat(a(r,o)))}),t}(n,function(u,f){return f===Mn?[Jm(n.children[Mn],!1)]:["".concat(f,":").concat(Jm(u,!1))]});return 1===Object.keys(n.children).length&&null!=n.children[Mn]?"".concat(tS(n),"/").concat(o[0]):"".concat(tS(n),"/(").concat(o.join("//"),")")}function gI(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nS(n){return gI(n).replace(/%3B/gi,";")}function jA(n){return gI(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rS(n){return decodeURIComponent(n)}function mI(n){return rS(n.replace(/\+/g,"%20"))}function yI(n){return"".concat(jA(n.path)).concat(function(n){return Object.keys(n).map(function(a){return";".concat(jA(a),"=").concat(jA(n[a]))}).join("")}(n.parameters))}var NW=/^[^\/()?;=#]+/;function iS(n){var a=n.match(NW);return a?a[0]:""}var kW=/^[^=?&#]+/,BW=/^[^&#]+/,VW=function(){function n(a){G(this,n),this.url=a,this.remaining=a}return j(n,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bn([],{}):new Bn([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));var o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(t.length>0||Object.keys(r).length>0)&&(o[Mn]=new Bn(t,r)),o}},{key:"parseSegment",value:function(){var t=iS(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new Xm(rS(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var r=iS(this.remaining);if(r){this.capture(r);var o="";if(this.consumeOptional("=")){var u=iS(this.remaining);u&&this.capture(o=u)}t[rS(r)]=rS(o)}}},{key:"parseQueryParam",value:function(t){var r=function(n){var a=n.match(kW);return a?a[0]:""}(this.remaining);if(r){this.capture(r);var o="";if(this.consumeOptional("=")){var u=function(n){var a=n.match(BW);return a?a[0]:""}(this.remaining);u&&this.capture(o=u)}var f=mI(r),h=mI(o);if(t.hasOwnProperty(f)){var v=t[f];Array.isArray(v)||(t[f]=v=[v]),v.push(h)}else t[f]=h}}},{key:"parseParens",value:function(t){var r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var o=iS(this.remaining),u=this.remaining[o.length];if("/"!==u&&")"!==u&&";"!==u)throw new Error("Cannot parse url '".concat(this.url,"'"));var f=void 0;o.indexOf(":")>-1?(f=o.substr(0,o.indexOf(":")),this.capture(f),this.capture(":")):t&&(f=Mn);var h=this.parseChildren();r[f]=1===Object.keys(h).length?h[Mn]:new Bn([],h),this.consumeOptional("//")}return r}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),n}(),_I=function(){function n(a){G(this,n),this._root=a}return j(n,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(t){var r=this.pathFromRoot(t);return r.length>1?r[r.length-2]:null}},{key:"children",value:function(t){var r=qA(t,this._root);return r?r.children.map(function(o){return o.value}):[]}},{key:"firstChild",value:function(t){var r=qA(t,this._root);return r&&r.children.length>0?r.children[0].value:null}},{key:"siblings",value:function(t){var r=YA(t,this._root);return r.length<2?[]:r[r.length-2].children.map(function(u){return u.value}).filter(function(u){return u!==t})}},{key:"pathFromRoot",value:function(t){return YA(t,this._root).map(function(r){return r.value})}}]),n}();function qA(n,a){if(n===a.value)return a;var r,t=Ft(a.children);try{for(t.s();!(r=t.n()).done;){var u=qA(n,r.value);if(u)return u}}catch(f){t.e(f)}finally{t.f()}return null}function YA(n,a){if(n===a.value)return[a];var r,t=Ft(a.children);try{for(t.s();!(r=t.n()).done;){var u=YA(n,r.value);if(u.length)return u.unshift(a),u}}catch(f){t.e(f)}finally{t.f()}return[]}var rl=function(){function n(a,t){G(this,n),this.value=a,this.children=t}return j(n,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),n}();function wh(n){var a={};return n&&n.children.forEach(function(t){return a[t.value.outlet]=t}),a}var CI=function(n){pe(t,n);var a=ve(t);function t(r,o){var u;return G(this,t),(u=a.call(this,r)).snapshot=o,KA(Xn(u),r),u}return j(t,[{key:"toString",value:function(){return this.snapshot.toString()}}]),t}(_I);function wI(n,a){var t=function(n,a){var f=new oS([],{},{},"",{},Mn,a,null,n.root,-1,{});return new EI("",new rl(f,[]))}(n,a),r=new Ns([new Xm("",{})]),o=new Ns({}),u=new Ns({}),f=new Ns({}),h=new Ns(""),v=new mu(r,o,f,h,u,Mn,a,t.root);return v.snapshot=t.root,new CI(new rl(v,[]),t)}var mu=function(){function n(a,t,r,o,u,f,h,v){G(this,n),this.url=a,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=f,this.component=h,this._futureSnapshot=v}return j(n,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(zn(function(t){return Ch(t)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(zn(function(t){return Ch(t)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),n}();function SI(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",t=n.pathFromRoot,r=0;if("always"!==a)for(r=t.length-1;r>=1;){var o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return UW(t.slice(r))}function UW(n){return n.reduce(function(a,t){return{params:Object.assign(Object.assign({},a.params),t.params),data:Object.assign(Object.assign({},a.data),t.data),resolve:Object.assign(Object.assign({},a.resolve),t._resolvedData)}},{params:{},data:{},resolve:{}})}var oS=function(){function n(a,t,r,o,u,f,h,v,g,y,_){G(this,n),this.url=a,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=f,this.component=h,this.routeConfig=v,this._urlSegment=g,this._lastPathIndex=y,this._resolve=_}return j(n,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=Ch(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Ch(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){var t=this.url.map(function(o){return o.toString()}).join("/"),r=this.routeConfig?this.routeConfig.path:"";return"Route(url:'".concat(t,"', path:'").concat(r,"')")}}]),n}(),EI=function(n){pe(t,n);var a=ve(t);function t(r,o){var u;return G(this,t),(u=a.call(this,o)).url=r,KA(Xn(u),o),u}return j(t,[{key:"toString",value:function(){return bI(this._root)}}]),t}(_I);function KA(n,a){a.value._routerState=n,a.children.forEach(function(t){return KA(n,t)})}function bI(n){var a=n.children.length>0?" { ".concat(n.children.map(bI).join(", ")," } "):"";return"".concat(n.value).concat(a)}function $A(n){if(n.snapshot){var a=n.snapshot,t=n._futureSnapshot;n.snapshot=t,vu(a.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),a.fragment!==t.fragment&&n.fragment.next(t.fragment),vu(a.params,t.params)||n.params.next(t.params),function(n,a){if(n.length!==a.length)return!1;for(var t=0;t<n.length;++t)if(!vu(n[t],a[t]))return!1;return!0}(a.url,t.url)||n.url.next(t.url),vu(a.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function XA(n,a){var t=vu(n.params,a.params)&&function(n,a){return Kd(n,a)&&n.every(function(t,r){return vu(t.parameters,a[r].parameters)})}(n.url,a.url);return t&&!(!n.parent!=!a.parent)&&(!n.parent||XA(n.parent,a.parent))}function Zm(n,a,t){if(t&&n.shouldReuseRoute(a.value,t.value.snapshot)){var r=t.value;r._futureSnapshot=a.value;var o=function(n,a,t){return a.children.map(function(r){var u,o=Ft(t.children);try{for(o.s();!(u=o.n()).done;){var f=u.value;if(n.shouldReuseRoute(r.value,f.value.snapshot))return Zm(n,r,f)}}catch(h){o.e(h)}finally{o.f()}return Zm(n,r)})}(n,a,t);return new rl(r,o)}if(n.shouldAttach(a.value)){var u=n.retrieve(a.value);if(null!==u){var f=u.route;return f.value._futureSnapshot=a.value,f.children=a.children.map(function(g){return Zm(n,g)}),f}}var h=function(n){return new mu(new Ns(n.url),new Ns(n.params),new Ns(n.queryParams),new Ns(n.fragment),new Ns(n.data),n.outlet,n.component,n)}(a.value),v=a.children.map(function(g){return Zm(n,g)});return new rl(h,v)}function YW(n,a,t,r,o){if(0===t.length)return JA(a.root,a.root,a,r,o);var u=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new RI(!0,0,n);var a=0,t=!1,r=n.reduce(function(o,u,f){if("object"==typeof u&&null!=u){if(u.outlets){var h={};return Qi(u.outlets,function(v,g){h[g]="string"==typeof v?v.split("/"):v}),[].concat(kn(o),[{outlets:h}])}if(u.segmentPath)return[].concat(kn(o),[u.segmentPath])}return"string"!=typeof u?[].concat(kn(o),[u]):0===f?(u.split("/").forEach(function(v,g){0==g&&"."===v||(0==g&&""===v?t=!0:".."===v?a++:""!=v&&o.push(v))}),o):[].concat(kn(o),[u])},[]);return new RI(t,a,r)}(t);if(u.toRoot())return JA(a.root,new Bn([],{}),a,r,o);var f=function(n,a,t){if(n.isAbsolute)return new ZA(a.root,!0,0);if(-1===t.snapshot._lastPathIndex){var r=t.snapshot._urlSegment;return new ZA(r,r===a.root,0)}var u=aS(n.commands[0])?0:1;return function(n,a,t){for(var r=n,o=a,u=t;u>o;){if(u-=o,!(r=r.parent))throw new Error("Invalid number of '../'");o=r.segments.length}return new ZA(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+u,n.numberOfDoubleDots)}(u,a,n),h=f.processChildren?sS(f.segmentGroup,f.index,u.commands):AI(f.segmentGroup,f.index,u.commands);return JA(f.segmentGroup,h,a,r,o)}function aS(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Qm(n){return"object"==typeof n&&null!=n&&n.outlets}function JA(n,a,t,r,o){var u={};return r&&Qi(r,function(f,h){u[h]=Array.isArray(f)?f.map(function(v){return"".concat(v)}):"".concat(f)}),new Yd(t.root===n?a:xI(t.root,n,a),u,o)}function xI(n,a,t){var r={};return Qi(n.children,function(o,u){r[u]=o===a?t:xI(o,a,t)}),new Bn(n.segments,r)}var RI=function(){function n(a,t,r){if(G(this,n),this.isAbsolute=a,this.numberOfDoubleDots=t,this.commands=r,a&&r.length>0&&aS(r[0]))throw new Error("Root segment cannot have matrix parameters");var o=r.find(Qm);if(o&&o!==uI(r))throw new Error("{outlets:{}} has to be the last command")}return j(n,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),n}(),ZA=function n(a,t,r){G(this,n),this.segmentGroup=a,this.processChildren=t,this.index=r};function AI(n,a,t){if(n||(n=new Bn([],{})),0===n.segments.length&&n.hasChildren())return sS(n,a,t);var r=function(n,a,t){for(var r=0,o=a,u={match:!1,pathIndex:0,commandIndex:0};o<n.segments.length;){if(r>=t.length)return u;var f=n.segments[o],h=t[r];if(Qm(h))break;var v="".concat(h),g=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&g&&"object"==typeof g&&void 0===g.outlets){if(!DI(v,g,f))return u;r+=2}else{if(!DI(v,{},f))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,a,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){var u=new Bn(n.segments.slice(0,r.pathIndex),{});return u.children[Mn]=new Bn(n.segments.slice(r.pathIndex),n.children),sS(u,0,o)}return r.match&&0===o.length?new Bn(n.segments,{}):r.match&&!n.hasChildren()?QA(n,a,t):r.match?sS(n,0,o):QA(n,a,t)}function sS(n,a,t){if(0===t.length)return new Bn(n.segments,{});var r=function(n){return Qm(n[0])?n[0].outlets:En({},Mn,n)}(t),o={};return Qi(r,function(u,f){"string"==typeof u&&(u=[u]),null!==u&&(o[f]=AI(n.children[f],a,u))}),Qi(n.children,function(u,f){void 0===r[f]&&(o[f]=u)}),new Bn(n.segments,o)}function QA(n,a,t){for(var r=n.segments.slice(0,a),o=0;o<t.length;){var u=t[o];if(Qm(u)){var f=QW(u.outlets);return new Bn(r,f)}if(0===o&&aS(t[0]))r.push(new Xm(n.segments[a].path,TI(t[0]))),o++;else{var v=Qm(u)?u.outlets[Mn]:"".concat(u),g=o<t.length-1?t[o+1]:null;v&&g&&aS(g)?(r.push(new Xm(v,TI(g))),o+=2):(r.push(new Xm(v,{})),o++)}}return new Bn(r,{})}function QW(n){var a={};return Qi(n,function(t,r){"string"==typeof t&&(t=[t]),null!==t&&(a[r]=QA(new Bn([],{}),0,t))}),a}function TI(n){var a={};return Qi(n,function(t,r){return a[r]="".concat(t)}),a}function DI(n,a,t){return n==t.path&&vu(a,t.parameters)}var tU=function(){function n(a,t,r,o){G(this,n),this.routeReuseStrategy=a,this.futureState=t,this.currState=r,this.forwardEvent=o}return j(n,[{key:"activate",value:function(t){var r=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,o,t),$A(this.futureState.root),this.activateChildRoutes(r,o,t)}},{key:"deactivateChildRoutes",value:function(t,r,o){var u=this,f=wh(r);t.children.forEach(function(h){var v=h.value.outlet;u.deactivateRoutes(h,f[v],o),delete f[v]}),Qi(f,function(h,v){u.deactivateRouteAndItsChildren(h,o)})}},{key:"deactivateRoutes",value:function(t,r,o){var u=t.value,f=r?r.value:null;if(u===f)if(u.component){var h=o.getContext(u.outlet);h&&this.deactivateChildRoutes(t,r,h.children)}else this.deactivateChildRoutes(t,r,o);else f&&this.deactivateRouteAndItsChildren(r,o)}},{key:"deactivateRouteAndItsChildren",value:function(t,r){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,r):this.deactivateRouteAndOutlet(t,r)}},{key:"detachAndStoreRouteSubtree",value:function(t,r){for(var o=r.getContext(t.value.outlet),u=o&&t.value.component?o.children:r,f=wh(t),h=0,v=Object.keys(f);h<v.length;h++)this.deactivateRouteAndItsChildren(f[v[h]],u);if(o&&o.outlet){var y=o.outlet.detach(),_=o.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:y,route:t,contexts:_})}}},{key:"deactivateRouteAndOutlet",value:function(t,r){for(var o=r.getContext(t.value.outlet),u=o&&t.value.component?o.children:r,f=wh(t),h=0,v=Object.keys(f);h<v.length;h++)this.deactivateRouteAndItsChildren(f[v[h]],u);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}},{key:"activateChildRoutes",value:function(t,r,o){var u=this,f=wh(r);t.children.forEach(function(h){u.activateRoutes(h,f[h.value.outlet],o),u.forwardEvent(new wW(h.value.snapshot))}),t.children.length&&this.forwardEvent(new _W(t.value.snapshot))}},{key:"activateRoutes",value:function(t,r,o){var u=t.value,f=r?r.value:null;if($A(u),u===f)if(u.component){var h=o.getOrCreateContext(u.outlet);this.activateChildRoutes(t,r,h.children)}else this.activateChildRoutes(t,r,o);else if(u.component){var v=o.getOrCreateContext(u.outlet);if(this.routeReuseStrategy.shouldAttach(u.snapshot)){var g=this.routeReuseStrategy.retrieve(u.snapshot);this.routeReuseStrategy.store(u.snapshot,null),v.children.onOutletReAttached(g.contexts),v.attachRef=g.componentRef,v.route=g.route.value,v.outlet&&v.outlet.attach(g.componentRef,g.route.value),$A(g.route.value),this.activateChildRoutes(t,null,v.children)}else{var y=function(n){for(var a=n.parent;a;a=a.parent){var t=a.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(u.snapshot),_=y?y.module.componentFactoryResolver:null;v.attachRef=null,v.route=u,v.resolver=_,v.outlet&&v.outlet.activateWith(u,_),this.activateChildRoutes(t,null,v.children)}}else this.activateChildRoutes(t,null,o)}}]),n}(),eT=function n(a,t){G(this,n),this.routes=a,this.module=t};function Sc(n){return"function"==typeof n}function $d(n){return n instanceof Yd}var ey=Symbol("INITIAL_VALUE");function ty(){return qd(function(n){return function(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];var r=$(a),o=g_(a),u=JV(a),f=u.args,h=u.keys;if(0===f.length)return Yr([],r);var v=new _r(iW(f,r,h?function(g){return nW(h,g)}:ti));return o?v.pipe(tW(o)):v}(n.map(function(a){return a.pipe(Ff(1),function(){for(var n=arguments.length,a=new Array(n),t=0;t<n;t++)a[t]=arguments[t];var r=$(a);return ni(function(o,u){(r?VA(a,o,r):VA(a,o)).subscribe(u)})}(ey))})).pipe(Z1(function(a,t){var r=!1;return t.reduce(function(o,u,f){return o!==ey?o:(u===ey&&(r=!0),r||!1!==u&&f!==t.length-1&&!$d(u)?o:u)},a)},ey),jd(function(a){return a!==ey}),zn(function(a){return $d(a)?a:!0===a}),Ff(1))})}var uU=function n(){G(this,n),this.outlet=null,this.route=null,this.resolver=null,this.children=new ny,this.attachRef=null},ny=function(){function n(){G(this,n),this.contexts=new Map}return j(n,[{key:"onChildOutletCreated",value:function(t,r){var o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}},{key:"onChildOutletDestroyed",value:function(t){var r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var r=this.getContext(t);return r||(r=new uU,this.contexts.set(t,r)),r}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),n}(),tT=function(){var n=function(){function a(t,r,o,u,f){G(this,a),this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new we,this.deactivateEvents=new we,this.attachEvents=new we,this.detachEvents=new we,this.name=u||Mn,t.onChildOutletCreated(this.name,this)}return j(a,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}},{key:"attach",value:function(r,o){this.activated=r,this._activatedRoute=o,this.location.insert(r.hostView),this.attachEvents.emit(r.instance)}},{key:"deactivate",value:function(){if(this.activated){var r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}},{key:"activateWith",value:function(r,o){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;var h=(o=o||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),v=this.parentContexts.getOrCreateContext(this.name).children,g=new lU(r,v,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(ny),lt(va),lt(mc),Gl("name"),lt(sA))},n.\u0275dir=Ni({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n}(),lU=function(){function n(a,t,r){G(this,n),this.route=a,this.childContexts=t,this.parent=r}return j(n,[{key:"get",value:function(t,r){return t===mu?this.route:t===ny?this.childContexts:this.parent.get(t,r)}}]),n}(),MI=function(){var n=function a(){G(this,a)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Kr({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c(0,"router-outlet")},directives:[tT],encapsulation:2}),n}();function OI(n){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=0;t<n.length;t++){var r=n[t],o=dU(a,r);cU(r,o)}}function cU(n,a){n.children&&OI(n.children,a)}function dU(n,a){return a?n||a.path?n&&!a.path?"".concat(n,"/"):!n&&a.path?a.path:"".concat(n,"/").concat(a.path):"":n}function nT(n){var a=n.children&&n.children.map(nT),t=a?Object.assign(Object.assign({},n),{children:a}):Object.assign({},n);return!t.component&&(a||t.loadChildren)&&t.outlet&&t.outlet!==Mn&&(t.component=MI),t}function Ya(n){return n.outlet||Mn}function PI(n,a){var t=n.filter(function(r){return Ya(r)===a});return t.push.apply(t,kn(n.filter(function(r){return Ya(r)!==a}))),t}var II={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function uS(n,a,t){var r;if(""===a.path)return"full"===a.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},II):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var u=(a.matcher||bW)(t,n,a);if(!u)return Object.assign({},II);var f={};Qi(u.posParams,function(v,g){f[g]=v.path});var h=u.consumed.length>0?Object.assign(Object.assign({},f),u.consumed[u.consumed.length-1].parameters):f;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:h,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function lS(n,a,t,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(t.length>0&&hU(n,t,r)){var u=new Bn(a,pU(n,a,r,new Bn(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=a.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&vU(n,t,r)){var f=new Bn(n.segments,fU(n,a,t,r,n.children,o));return f._sourceSegment=n,f._segmentIndexShift=a.length,{segmentGroup:f,slicedSegments:t}}var h=new Bn(n.segments,n.children);return h._sourceSegment=n,h._segmentIndexShift=a.length,{segmentGroup:h,slicedSegments:t}}function fU(n,a,t,r,o,u){var v,f={},h=Ft(r);try{for(h.s();!(v=h.n()).done;){var g=v.value;if(cS(n,t,g)&&!o[Ya(g)]){var y=new Bn([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:a.length,f[Ya(g)]=y}}}catch(_){h.e(_)}finally{h.f()}return Object.assign(Object.assign({},o),f)}function pU(n,a,t,r){var o={};o[Mn]=r,r._sourceSegment=n,r._segmentIndexShift=a.length;var f,u=Ft(t);try{for(u.s();!(f=u.n()).done;){var h=f.value;if(""===h.path&&Ya(h)!==Mn){var v=new Bn([],{});v._sourceSegment=n,v._segmentIndexShift=a.length,o[Ya(h)]=v}}}catch(g){u.e(g)}finally{u.f()}return o}function hU(n,a,t){return t.some(function(r){return cS(n,a,r)&&Ya(r)!==Mn})}function vU(n,a,t){return t.some(function(r){return cS(n,a,r)})}function cS(n,a,t){return(!(n.hasChildren()||a.length>0)||"full"!==t.pathMatch)&&""===t.path}function LI(n,a,t,r){return!!(Ya(n)===r||r!==Mn&&cS(a,t,n))&&("**"===n.path||uS(a,n,t).matched)}function FI(n,a,t){return 0===a.length&&!n.children[t]}var ry=function n(a){G(this,n),this.segmentGroup=a||null},NI=function n(a){G(this,n),this.urlTree=a};function dS(n){return new _r(function(a){return a.error(new ry(n))})}function kI(n){return new _r(function(a){return a.error(new NI(n))})}function gU(n){return new _r(function(a){return a.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(n,"'")))})}var _U=function(){function n(a,t,r,o,u){G(this,n),this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=a.get(Zu)}return j(n,[{key:"apply",value:function(){var t=this,r=lS(this.urlTree.root,[],[],this.config).segmentGroup,o=new Bn(r.segments,r.children);return this.expandSegmentGroup(this.ngModule,this.config,o,Mn).pipe(zn(function(h){return t.createUrlTree(rT(h),t.urlTree.queryParams,t.urlTree.fragment)})).pipe(wc(function(h){if(h instanceof NI)return t.allowRedirects=!1,t.match(h.urlTree);throw h instanceof ry?t.noMatchError(h):h}))}},{key:"match",value:function(t){var r=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,Mn).pipe(zn(function(f){return r.createUrlTree(rT(f),t.queryParams,t.fragment)})).pipe(wc(function(f){throw f instanceof ry?r.noMatchError(f):f}))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,r,o){var u=t.segments.length>0?new Bn([],En({},Mn,t)):t;return new Yd(u,r,o)}},{key:"expandSegmentGroup",value:function(t,r,o,u){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(t,r,o).pipe(zn(function(f){return new Bn([],f)})):this.expandSegment(t,o,r,o.segments,u,!0)}},{key:"expandChildren",value:function(t,r,o){for(var u=this,f=[],h=0,v=Object.keys(o.children);h<v.length;h++){var g=v[h];"primary"===g?f.unshift(g):f.push(g)}return Yr(f).pipe(mh(function(y){var _=o.children[y],C=PI(r,y);return u.expandSegmentGroup(t,C,_,y).pipe(zn(function(S){return{segment:S,outlet:y}}))}),Z1(function(y,_){return y[_.outlet]=_.segment,y},{}),function(n,a){var t=arguments.length>=2;return function(r){return r.pipe(n?jd(function(o,u){return n(o,u,r)}):ti,WA(1),t?eI(a):Q1(function(){return new Q0}))}}())}},{key:"expandSegment",value:function(t,r,o,u,f,h){var v=this;return Yr(o).pipe(mh(function(g){return v.expandSegmentAgainstRoute(t,r,o,g,u,f,h).pipe(wc(function(_){if(_ instanceof ry)return on(null);throw _}))}),_h(function(g){return!!g}),wc(function(g,y){if(g instanceof Q0||"EmptyError"===g.name){if(FI(r,u,f))return on(new Bn([],{}));throw new ry(r)}throw g}))}},{key:"expandSegmentAgainstRoute",value:function(t,r,o,u,f,h,v){return LI(u,r,f,h)?void 0===u.redirectTo?this.matchSegmentAgainstRoute(t,r,u,f,h):v&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,r,o,u,f,h):dS(r):dS(r)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,r,o,u,f,h){return"**"===u.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,o,u,h):this.expandRegularSegmentAgainstRouteUsingRedirect(t,r,o,u,f,h)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,r,o,u){var f=this,h=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?kI(h):this.lineralizeSegments(o,h).pipe(qr(function(v){var g=new Bn(v,{});return f.expandSegment(t,g,r,v,u,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,r,o,u,f,h){var v=this,g=uS(r,u,f),_=g.consumedSegments,C=g.lastChild,S=g.positionalParamSegments;if(!g.matched)return dS(r);var R=this.applyRedirectCommands(_,u.redirectTo,S);return u.redirectTo.startsWith("/")?kI(R):this.lineralizeSegments(u,R).pipe(qr(function(b){return v.expandSegment(t,r,o,b.concat(f.slice(C)),h,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(t,r,o,u,f){var h=this;if("**"===o.path)return o.loadChildren?(o._loadedConfig?on(o._loadedConfig):this.configLoader.load(t.injector,o)).pipe(zn(function(b){return o._loadedConfig=b,new Bn(u,{})})):on(new Bn(u,{}));var g=uS(r,o,u),_=g.consumedSegments,C=g.lastChild;if(!g.matched)return dS(r);var S=u.slice(C);return this.getChildConfig(t,o,u).pipe(qr(function(b){var E=b.module,T=b.routes,D=lS(r,_,S,T),M=D.segmentGroup,O=D.slicedSegments,L=new Bn(M.segments,M.children);if(0===O.length&&L.hasChildren())return h.expandChildren(E,T,L).pipe(zn(function(W){return new Bn(_,W)}));if(0===T.length&&0===O.length)return on(new Bn(_,{}));var z=Ya(o)===f;return h.expandSegment(E,L,T,O,z?Mn:f,!0).pipe(zn(function(W){return new Bn(_.concat(W.segments),W.children)}))}))}},{key:"getChildConfig",value:function(t,r,o){var u=this;return r.children?on(new eT(r.children,t)):r.loadChildren?void 0!==r._loadedConfig?on(r._loadedConfig):this.runCanLoadGuards(t.injector,r,o).pipe(qr(function(f){return f?u.configLoader.load(t.injector,r).pipe(zn(function(h){return r._loadedConfig=h,h})):function(n){return new _r(function(a){return a.error(zA("Cannot load children because the guard of the route \"path: '".concat(n.path,"'\" returned false")))})}(r)})):on(new eT([],t))}},{key:"runCanLoadGuards",value:function(t,r,o){var u=this,f=r.canLoad;if(!f||0===f.length)return on(!0);var h=f.map(function(v){var y,g=t.get(v);if(function(n){return n&&Sc(n.canLoad)}(g))y=g.canLoad(r,o);else{if(!Sc(g))throw new Error("Invalid CanLoad guard");y=g(r,o)}return gu(y)});return on(h).pipe(ty(),ma(function(v){if($d(v)){var g=zA('Redirecting to "'.concat(u.urlSerializer.serialize(v),'"'));throw g.url=v,g}}),zn(function(v){return!0===v}))}},{key:"lineralizeSegments",value:function(t,r){for(var o=[],u=r.root;;){if(o=o.concat(u.segments),0===u.numberOfChildren)return on(o);if(u.numberOfChildren>1||!u.children[Mn])return gU(t.redirectTo);u=u.children[Mn]}}},{key:"applyRedirectCommands",value:function(t,r,o){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),t,o)}},{key:"applyRedirectCreatreUrlTree",value:function(t,r,o,u){var f=this.createSegmentGroup(t,r.root,o,u);return new Yd(f,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}},{key:"createQueryParams",value:function(t,r){var o={};return Qi(t,function(u,f){if("string"==typeof u&&u.startsWith(":")){var v=u.substring(1);o[f]=r[v]}else o[f]=u}),o}},{key:"createSegmentGroup",value:function(t,r,o,u){var f=this,h=this.createSegments(t,r.segments,o,u),v={};return Qi(r.children,function(g,y){v[y]=f.createSegmentGroup(t,g,o,u)}),new Bn(h,v)}},{key:"createSegments",value:function(t,r,o,u){var f=this;return r.map(function(h){return h.path.startsWith(":")?f.findPosParam(t,h,u):f.findOrReturn(h,o)})}},{key:"findPosParam",value:function(t,r,o){var u=o[r.path.substring(1)];if(!u)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(r.path,"'."));return u}},{key:"findOrReturn",value:function(t,r){var f,o=0,u=Ft(r);try{for(u.s();!(f=u.n()).done;){var h=f.value;if(h.path===t.path)return r.splice(o),h;o++}}catch(v){u.e(v)}finally{u.f()}return t}}]),n}();function rT(n){for(var a={},t=0,r=Object.keys(n.children);t<r.length;t++){var o=r[t],f=rT(n.children[o]);(f.segments.length>0||f.hasChildren())&&(a[o]=f)}return function(n){if(1===n.numberOfChildren&&n.children[Mn]){var a=n.children[Mn];return new Bn(n.segments.concat(a.segments),a.children)}return n}(new Bn(n.segments,a))}var GI=function n(a){G(this,n),this.path=a,this.route=this.path[this.path.length-1]},fS=function n(a,t){G(this,n),this.component=a,this.route=t};function SU(n,a,t){var r=n._root;return iy(r,a?a._root:null,t,[r.value])}function pS(n,a,t){var r=function(n){if(!n)return null;for(var a=n.parent;a;a=a.parent){var t=a.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(a);return(r?r.module.injector:t).get(n)}function iy(n,a,t,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},u=wh(a);return n.children.forEach(function(f){xU(f,u[f.value.outlet],t,r.concat([f.value]),o),delete u[f.value.outlet]}),Qi(u,function(f,h){return oy(f,t.getContext(h),o)}),o}function xU(n,a,t,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},u=n.value,f=a?a.value:null,h=t?t.getContext(n.value.outlet):null;if(f&&u.routeConfig===f.routeConfig){var v=RU(f,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new GI(r)):(u.data=f.data,u._resolvedData=f._resolvedData),iy(n,a,u.component?h?h.children:null:t,r,o),v&&h&&h.outlet&&h.outlet.isActivated&&o.canDeactivateChecks.push(new fS(h.outlet.component,f))}else f&&oy(a,h,o),o.canActivateChecks.push(new GI(r)),iy(n,null,u.component?h?h.children:null:t,r,o);return o}function RU(n,a,t){if("function"==typeof t)return t(n,a);switch(t){case"pathParamsChange":return!Kd(n.url,a.url);case"pathParamsOrQueryParamsChange":return!Kd(n.url,a.url)||!vu(n.queryParams,a.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!XA(n,a)||!vu(n.queryParams,a.queryParams);default:return!XA(n,a)}}function oy(n,a,t){var r=wh(n),o=n.value;Qi(r,function(u,f){oy(u,o.component?a?a.children.getContext(f):null:a,t)}),t.canDeactivateChecks.push(new fS(o.component&&a&&a.outlet&&a.outlet.isActivated?a.outlet.component:null,o))}var FU=function n(){G(this,n)};function BI(n){return new _r(function(a){return a.error(n)})}var kU=function(){function n(a,t,r,o,u,f){G(this,n),this.rootComponentType=a,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=f}return j(n,[{key:"recognize",value:function(){var t=lS(this.urlTree.root,[],[],this.config.filter(function(h){return void 0===h.redirectTo}),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,t,Mn);if(null===r)return null;var o=new oS([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Mn,this.rootComponentType,null,this.urlTree.root,-1,{}),u=new rl(o,r),f=new EI(this.url,u);return this.inheritParamsAndData(f._root),f}},{key:"inheritParamsAndData",value:function(t){var r=this,o=t.value,u=SI(o,this.paramsInheritanceStrategy);o.params=Object.freeze(u.params),o.data=Object.freeze(u.data),t.children.forEach(function(f){return r.inheritParamsAndData(f)})}},{key:"processSegmentGroup",value:function(t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,r):this.processSegment(t,r,r.segments,o)}},{key:"processChildren",value:function(t,r){for(var o=[],u=0,f=Object.keys(r.children);u<f.length;u++){var h=f[u],v=r.children[h],g=PI(t,h),y=this.processSegmentGroup(g,v,h);if(null===y)return null;o.push.apply(o,kn(y))}var _=HI(o);return function(n){n.sort(function(a,t){return a.value.outlet===Mn?-1:t.value.outlet===Mn?1:a.value.outlet.localeCompare(t.value.outlet)})}(_),_}},{key:"processSegment",value:function(t,r,o,u){var h,f=Ft(t);try{for(f.s();!(h=f.n()).done;){var g=this.processSegmentAgainstRoute(h.value,r,o,u);if(null!==g)return g}}catch(y){f.e(y)}finally{f.f()}return FI(r,o,u)?[]:null}},{key:"processSegmentAgainstRoute",value:function(t,r,o,u){if(t.redirectTo||!LI(t,r,o,u))return null;var f,h=[],v=[];if("**"===t.path){var g=o.length>0?uI(o).parameters:{};f=new oS(o,g,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,UI(t),Ya(t),t.component,t,VI(r),WI(r)+o.length,zI(t))}else{var y=uS(r,t,o);if(!y.matched)return null;h=y.consumedSegments,v=o.slice(y.lastChild),f=new oS(h,y.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,UI(t),Ya(t),t.component,t,VI(r),WI(r)+h.length,zI(t))}var _=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),C=lS(r,h,v,_.filter(function(D){return void 0===D.redirectTo}),this.relativeLinkResolution),S=C.segmentGroup,R=C.slicedSegments;if(0===R.length&&S.hasChildren()){var b=this.processChildren(_,S);return null===b?null:[new rl(f,b)]}if(0===_.length&&0===R.length)return[new rl(f,[])];var E=Ya(t)===u,T=this.processSegment(_,S,R,E?Mn:u);return null===T?null:[new rl(f,T)]}}]),n}();function HI(n){var o,a=[],t=new Set,r=Ft(n);try{var u=function(){var C=o.value;if(!function(n){var a=n.value.routeConfig;return a&&""===a.path&&void 0===a.redirectTo}(C))return a.push(C),"continue";var R,S=a.find(function(b){return C.value.routeConfig===b.value.routeConfig});void 0!==S?((R=S.children).push.apply(R,kn(C.children)),t.add(S)):a.push(C)};for(r.s();!(o=r.n()).done;)u()}catch(_){r.e(_)}finally{r.f()}var v,h=Ft(t);try{for(h.s();!(v=h.n()).done;){var g=v.value,y=HI(g.children);a.push(new rl(g.value,y))}}catch(_){h.e(_)}finally{h.f()}return a.filter(function(_){return!t.has(_)})}function VI(n){for(var a=n;a._sourceSegment;)a=a._sourceSegment;return a}function WI(n){for(var a=n,t=a._segmentIndexShift?a._segmentIndexShift:0;a._sourceSegment;)t+=(a=a._sourceSegment)._segmentIndexShift?a._segmentIndexShift:0;return t-1}function UI(n){return n.data||{}}function zI(n){return n.resolve||{}}function iT(n){return qd(function(a){var t=n(a);return t?Yr(t).pipe(zn(function(){return a})):on(a)})}var YU=function(){function n(){G(this,n)}return j(n,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,r){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,r){return t.routeConfig===r.routeConfig}}]),n}(),KU=function(n){pe(t,n);var a=ve(t);function t(){return G(this,t),a.apply(this,arguments)}return t}(YU),oT=new Dn("ROUTES"),jI=function(){function n(a,t,r,o){G(this,n),this.injector=a,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}return j(n,[{key:"load",value:function(t,r){var o=this;if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);var f=this.loadModuleFactory(r.loadChildren).pipe(zn(function(h){o.onLoadEndListener&&o.onLoadEndListener(r);var v=h.create(t);return new eT(sI(v.injector.get(oT,void 0,Jt.Self|Jt.Optional)).map(nT),v)}),wc(function(h){throw r._loader$=void 0,h}));return r._loader$=new aW(f,function(){return new ss}).pipe(J1()),r._loader$}},{key:"loadModuleFactory",value:function(t){var r=this;return gu(t()).pipe(qr(function(o){return o instanceof QO?on(o):Yr(r.compiler.compileModuleAsync(o))}))}}]),n}(),XU=function(){function n(){G(this,n)}return j(n,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,r){return t}}]),n}();function JU(n){throw n}function ZU(n,a,t){return a.parse("/")}function qI(n,a){return on(null)}var QU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ez={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Oo=function(){var n=function(){function a(t,r,o,u,f,h,v){var g=this;G(this,a),this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ss,this.errorHandler=JU,this.malformedUriErrorHandler=ZU,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qI,afterPreactivation:qI},this.urlHandlingStrategy=new XU,this.routeReuseStrategy=new KU,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(Zu),this.console=f.get(FP);var C=f.get(Ri);this.isNgZoneEnabled=C instanceof Ri&&Ri.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=new Yd(new Bn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new jI(f,h,function(R){return g.triggerEvent(new nI(R))},function(R){return g.triggerEvent(new rI(R))}),this.routerState=wI(this.currentUrlTree,this.rootComponentType),this.transitions=new Ns({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return j(a,[{key:"browserPageId",get:function(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}},{key:"setupNavigations",value:function(r){var o=this,u=this.events;return r.pipe(jd(function(f){return 0!==f.id}),zn(function(f){return Object.assign(Object.assign({},f),{extractedUrl:o.urlHandlingStrategy.extract(f.rawUrl)})}),qd(function(f){var h=!1,v=!1;return on(f).pipe(ma(function(g){o.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:o.lastSuccessfulNavigation?Object.assign(Object.assign({},o.lastSuccessfulNavigation),{previousNavigation:null}):null}}),qd(function(g){var y=o.browserUrlTree.toString(),_=!o.navigated||g.extractedUrl.toString()!==y||y!==o.currentUrlTree.toString();if(("reload"===o.onSameUrlNavigation||_)&&o.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return hS(g.source)&&(o.browserUrlTree=g.extractedUrl),on(g).pipe(qd(function(L){var H=o.transitions.getValue();return u.next(new UA(L.id,o.serializeUrl(L.extractedUrl),L.source,L.restoredState)),H!==o.transitions.getValue()?_o:Promise.resolve(L)}),function(n,a,t,r){return qd(function(o){return function(n,a,t,r,o){return new _U(n,a,t,r,o).apply()}(n,a,t,o.extractedUrl,r).pipe(zn(function(u){return Object.assign(Object.assign({},o),{urlAfterRedirects:u})}))})}(o.ngModule.injector,o.configLoader,o.urlSerializer,o.config),ma(function(L){o.currentNavigation=Object.assign(Object.assign({},o.currentNavigation),{finalUrl:L.urlAfterRedirects})}),function(n,a,t,r,o){return qr(function(u){return function(n,a,t,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var f=new kU(n,a,t,r,o,u).recognize();return null===f?BI(new FU):on(f)}catch(h){return BI(h)}}(n,a,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe(zn(function(f){return Object.assign(Object.assign({},u),{targetSnapshot:f})}))})}(o.rootComponentType,o.config,function(L){return o.serializeUrl(L)},o.paramsInheritanceStrategy,o.relativeLinkResolution),ma(function(L){if("eager"===o.urlUpdateStrategy){if(!L.extras.skipLocationChange){var H=o.urlHandlingStrategy.merge(L.urlAfterRedirects,L.rawUrl);o.setBrowserUrl(H,L)}o.browserUrlTree=L.urlAfterRedirects}var z=new pW(L.id,o.serializeUrl(L.extractedUrl),o.serializeUrl(L.urlAfterRedirects),L.targetSnapshot);u.next(z)}));if(_&&o.rawUrlTree&&o.urlHandlingStrategy.shouldProcessUrl(o.rawUrlTree)){var b=g.extractedUrl,E=g.source,T=g.restoredState,D=g.extras,M=new UA(g.id,o.serializeUrl(b),E,T);u.next(M);var O=wI(b,o.rootComponentType).snapshot;return on(Object.assign(Object.assign({},g),{targetSnapshot:O,urlAfterRedirects:b,extras:Object.assign(Object.assign({},D),{skipLocationChange:!1,replaceUrl:!1})}))}return o.rawUrlTree=g.rawUrl,g.resolve(null),_o}),iT(function(g){var R=g.extras;return o.hooks.beforePreactivation(g.targetSnapshot,{navigationId:g.id,appliedUrlTree:g.extractedUrl,rawUrlTree:g.rawUrl,skipLocationChange:!!R.skipLocationChange,replaceUrl:!!R.replaceUrl})}),ma(function(g){var y=new hW(g.id,o.serializeUrl(g.extractedUrl),o.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);o.triggerEvent(y)}),zn(function(g){return Object.assign(Object.assign({},g),{guards:SU(g.targetSnapshot,g.currentSnapshot,o.rootContexts)})}),function(n,a){return qr(function(t){var r=t.targetSnapshot,o=t.currentSnapshot,u=t.guards,f=u.canActivateChecks,h=u.canDeactivateChecks;return 0===h.length&&0===f.length?on(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,a,t,r){return Yr(n).pipe(qr(function(o){return function(n,a,t,r,o){var u=a&&a.routeConfig?a.routeConfig.canDeactivate:null;if(!u||0===u.length)return on(!0);var f=u.map(function(h){var g,v=pS(h,a,o);if(function(n){return n&&Sc(n.canDeactivate)}(v))g=gu(v.canDeactivate(n,a,t,r));else{if(!Sc(v))throw new Error("Invalid CanDeactivate guard");g=gu(v(n,a,t,r))}return g.pipe(_h())});return on(f).pipe(ty())}(o.component,o.route,t,a,r)}),_h(function(o){return!0!==o},!0))}(h,r,o,n).pipe(qr(function(v){return v&&function(n){return"boolean"==typeof n}(v)?function(n,a,t,r){return Yr(a).pipe(mh(function(o){return VA(function(n,a){return null!==n&&a&&a(new yW(n)),on(!0)}(o.route.parent,r),function(n,a){return null!==n&&a&&a(new CW(n)),on(!0)}(o.route,r),function(n,a,t){var r=a[a.length-1],o=a.slice(0,a.length-1).reverse().map(function(f){return function(n){var a=n.routeConfig?n.routeConfig.canActivateChild:null;return a&&0!==a.length?{node:n,guards:a}:null}(f)}).filter(function(f){return null!==f}),u=o.map(function(f){return X1(function(){var h=f.guards.map(function(v){var y,g=pS(v,f.node,t);if(function(n){return n&&Sc(n.canActivateChild)}(g))y=gu(g.canActivateChild(r,n));else{if(!Sc(g))throw new Error("Invalid CanActivateChild guard");y=gu(g(r,n))}return y.pipe(_h())});return on(h).pipe(ty())})});return on(u).pipe(ty())}(n,o.path,t),function(n,a,t){var r=a.routeConfig?a.routeConfig.canActivate:null;if(!r||0===r.length)return on(!0);var o=r.map(function(u){return X1(function(){var h,f=pS(u,a,t);if(function(n){return n&&Sc(n.canActivate)}(f))h=gu(f.canActivate(a,n));else{if(!Sc(f))throw new Error("Invalid CanActivate guard");h=gu(f(a,n))}return h.pipe(_h())})});return on(o).pipe(ty())}(n,o.route,t))}),_h(function(o){return!0!==o},!0))}(r,f,n,a):on(v)}),zn(function(v){return Object.assign(Object.assign({},t),{guardsResult:v})}))})}(o.ngModule.injector,function(g){return o.triggerEvent(g)}),ma(function(g){if($d(g.guardsResult)){var y=zA('Redirecting to "'.concat(o.serializeUrl(g.guardsResult),'"'));throw y.url=g.guardsResult,y}var _=new vW(g.id,o.serializeUrl(g.extractedUrl),o.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);o.triggerEvent(_)}),jd(function(g){return!!g.guardsResult||(o.restoreHistory(g),o.cancelNavigationTransition(g,""),!1)}),iT(function(g){if(g.guards.canActivateChecks.length)return on(g).pipe(ma(function(y){var _=new gW(y.id,o.serializeUrl(y.extractedUrl),o.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);o.triggerEvent(_)}),qd(function(y){var _=!1;return on(y).pipe(function(n,a){return qr(function(t){var r=t.targetSnapshot,o=t.guards.canActivateChecks;if(!o.length)return on(t);var u=0;return Yr(o).pipe(mh(function(f){return function(n,a,t,r){return function(n,a,t,r){var o=Object.keys(n);if(0===o.length)return on({});var u={};return Yr(o).pipe(qr(function(f){return function(n,a,t,r){var o=pS(n,a,r);return gu(o.resolve?o.resolve(a,t):o(a,t))}(n[f],a,t,r).pipe(ma(function(h){u[f]=h}))}),WA(1),qr(function(){return Object.keys(u).length===o.length?on(u):_o}))}(n._resolve,n,a,r).pipe(zn(function(u){return n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),SI(n,t).resolve),null}))}(f.route,r,n,a)}),ma(function(){return u++}),WA(1),qr(function(f){return u===o.length?on(t):_o}))})}(o.paramsInheritanceStrategy,o.ngModule.injector),ma({next:function(){return _=!0},complete:function(){_||(o.restoreHistory(y),o.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),ma(function(y){var _=new mW(y.id,o.serializeUrl(y.extractedUrl),o.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);o.triggerEvent(_)}))}),iT(function(g){var R=g.extras;return o.hooks.afterPreactivation(g.targetSnapshot,{navigationId:g.id,appliedUrlTree:g.extractedUrl,rawUrlTree:g.rawUrl,skipLocationChange:!!R.skipLocationChange,replaceUrl:!!R.replaceUrl})}),zn(function(g){var y=function(n,a,t){var r=Zm(n,a._root,t?t._root:void 0);return new CI(r,a)}(o.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:y})}),ma(function(g){o.currentUrlTree=g.urlAfterRedirects,o.rawUrlTree=o.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),o.routerState=g.targetRouterState,"deferred"===o.urlUpdateStrategy&&(g.extras.skipLocationChange||o.setBrowserUrl(o.rawUrlTree,g),o.browserUrlTree=g.urlAfterRedirects)}),function(a,t,r){return zn(function(o){return new tU(t,o.targetRouterState,o.currentRouterState,r).activate(a),o})}(o.rootContexts,o.routeReuseStrategy,function(g){return o.triggerEvent(g)}),ma({next:function(){h=!0},complete:function(){h=!0}}),function(n){return ni(function(a,t){try{a.subscribe(t)}finally{t.add(n)}})}(function(){var g;if(!h&&!v){var y="Navigation ID ".concat(f.id," is not equal to the current navigation id ").concat(o.navigationId);o.cancelNavigationTransition(f,y)}(null===(g=o.currentNavigation)||void 0===g?void 0:g.id)===f.id&&(o.currentNavigation=null)}),wc(function(g){if(v=!0,function(n){return n&&n[oI]}(g)){var y=$d(g.url);y||(o.navigated=!0,o.restoreHistory(f,!0));var _=new tI(f.id,o.serializeUrl(f.extractedUrl),g.message);u.next(_),y?setTimeout(function(){var S=o.urlHandlingStrategy.merge(g.url,o.rawUrlTree),R={skipLocationChange:f.extras.skipLocationChange,replaceUrl:"eager"===o.urlUpdateStrategy||hS(f.source)};o.scheduleNavigation(S,"imperative",null,R,{resolve:f.resolve,reject:f.reject,promise:f.promise})},0):f.resolve(!1)}else{o.restoreHistory(f,!0);var C=new fW(f.id,o.serializeUrl(f.extractedUrl),g);u.next(C);try{f.resolve(o.errorHandler(g))}catch(S){f.reject(S)}}return _o}))}))}},{key:"resetRootComponentType",value:function(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}},{key:"setTransition",value:function(r){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),r))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var r=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(o){var u="popstate"===o.type?"popstate":"hashchange";"popstate"===u&&setTimeout(function(){var f,h={replaceUrl:!0},v=(null===(f=o.state)||void 0===f?void 0:f.navigationId)?o.state:null;if(v){var g=Object.assign({},v);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(h.state=g)}var y=r.parseUrl(o.url);r.scheduleNavigation(y,u,v,h)},0)}))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(r){this.events.next(r)}},{key:"resetConfig",value:function(r){OI(r),this.config=r.map(nT),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=o.relativeTo,f=o.queryParams,h=o.fragment,v=o.queryParamsHandling,g=o.preserveFragment,y=u||this.routerState.root,_=g?this.currentUrlTree.fragment:h,C=null;switch(v){case"merge":C=Object.assign(Object.assign({},this.currentUrlTree.queryParams),f);break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=f||null}return null!==C&&(C=this.removeEmptyProps(C)),YW(y,this.currentUrlTree,r,C,null!=_?_:null)}},{key:"navigateByUrl",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},u=$d(r)?r:this.parseUrl(r),f=this.urlHandlingStrategy.merge(u,this.rawUrlTree);return this.scheduleNavigation(f,"imperative",null,o)}},{key:"navigate",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return tz(r),this.navigateByUrl(this.createUrlTree(r,o),o)}},{key:"serializeUrl",value:function(r){return this.urlSerializer.serialize(r)}},{key:"parseUrl",value:function(r){var o;try{o=this.urlSerializer.parse(r)}catch(u){o=this.malformedUriErrorHandler(u,this.urlSerializer,r)}return o}},{key:"isActive",value:function(r,o){var u;if(u=!0===o?Object.assign({},QU):!1===o?Object.assign({},ez):o,$d(r))return cI(this.currentUrlTree,r,u);var f=this.parseUrl(r);return cI(this.currentUrlTree,f,u)}},{key:"removeEmptyProps",value:function(r){return Object.keys(r).reduce(function(o,u){var f=r[u];return null!=f&&(o[u]=f),o},{})}},{key:"processNavigations",value:function(){var r=this;this.navigations.subscribe(function(o){r.navigated=!0,r.lastSuccessfulId=o.id,r.currentPageId=o.targetPageId,r.events.next(new $m(o.id,r.serializeUrl(o.extractedUrl),r.serializeUrl(r.currentUrlTree))),r.lastSuccessfulNavigation=r.currentNavigation,o.resolve(!0)},function(o){r.console.warn("Unhandled Navigation Error: ".concat(o))})}},{key:"scheduleNavigation",value:function(r,o,u,f,h){var v,g,y;if(this.disposed)return Promise.resolve(!1);var E,T,D,_=this.transitions.value,C=hS(o)&&_&&!hS(_.source),S=_.rawUrl.toString()===r.toString(),R=_.id===(null===(v=this.currentNavigation)||void 0===v?void 0:v.id);if(C&&S&&R)return Promise.resolve(!0);h?(E=h.resolve,T=h.reject,D=h.promise):D=new Promise(function(H,z){E=H,T=z});var O,M=++this.navigationId;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(u=this.location.getState()),O=u&&u.\u0275routerPageId?u.\u0275routerPageId:f.replaceUrl||f.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):O=0,this.setTransition({id:M,targetPageId:O,source:o,restoredState:u,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:f,resolve:E,reject:T,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(function(H){return Promise.reject(H)})}},{key:"setBrowserUrl",value:function(r,o){var u=this.urlSerializer.serialize(r),f=Object.assign(Object.assign({},o.extras.state),this.generateNgRouterState(o.id,o.targetPageId));this.location.isCurrentPathEqualTo(u)||o.extras.replaceUrl?this.location.replaceState(u,"",f):this.location.go(u,"",f)}},{key:"restoreHistory",value:function(r){var u,f,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("computed"===this.canceledNavigationResolution){var h=this.currentPageId-r.targetPageId,v="popstate"===r.source||"eager"===this.urlUpdateStrategy||this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl);v&&0!==h?this.location.historyGo(h):this.currentUrlTree===(null===(f=this.currentNavigation)||void 0===f?void 0:f.finalUrl)&&0===h&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(r),this.resetUrlToCurrentUrlTree())}},{key:"resetState",value:function(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(r,o){var u=new tI(r.id,this.serializeUrl(r.extractedUrl),o);this.triggerEvent(u),r.resolve(!1)}},{key:"generateNgRouterState",value:function(r,o){return"computed"===this.canceledNavigationResolution?{navigationId:r,"\u0275routerPageId":o}:{navigationId:r}}}]),a}();return n.\u0275fac=function(t){Am()},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}();function tz(n){for(var a=0;a<n.length;a++){var t=n[a];if(null==t)throw new Error("The requested path contains ".concat(t," segment at index ").concat(a))}}function hS(n){return"imperative"!==n}var aT=function(){var n=function(){function a(t,r,o,u,f){G(this,a),this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=f,this.commands=null,this.onChanges=new ss,this.setTabIndexIfNotOnNativeEl("0")}return j(a,[{key:"setTabIndexIfNotOnNativeEl",value:function(r){if(null==this.tabIndexAttribute){var o=this.renderer,u=this.el.nativeElement;null!==r?o.setAttribute(u,"tabindex",r):o.removeAttribute(u,"tabindex")}}},{key:"ngOnChanges",value:function(r){this.onChanges.next(this)}},{key:"routerLink",set:function(r){null!=r?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}},{key:"onClick",value:function(){if(null===this.urlTree)return!0;var r={skipLocationChange:Sh(this.skipLocationChange),replaceUrl:Sh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!0}},{key:"urlTree",get:function(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Sh(this.preserveFragment)})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(Oo),lt(mu),Gl("tabindex"),lt(T0),lt(fu))},n.\u0275dir=Ni({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&oe("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[La]}),n}(),ks=function(){var n=function(){function a(t,r,o){var u=this;G(this,a),this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new ss,this.subscription=t.events.subscribe(function(f){f instanceof $m&&u.updateTargetUrlAndHref()})}return j(a,[{key:"routerLink",set:function(r){this.commands=null!=r?Array.isArray(r)?r:[r]:null}},{key:"ngOnChanges",value:function(r){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(r,o,u,f,h){if(0!==r||o||u||f||h||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;var v={skipLocationChange:Sh(this.skipLocationChange),replaceUrl:Sh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,v),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}},{key:"urlTree",get:function(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Sh(this.preserveFragment)})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(Oo),lt(mu),lt(gh))},n.\u0275dir=Ni({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&oe("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&_m("target",r.target)("href",r.href,Ci)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[La]}),n}();function Sh(n){return""===n||!!n}var YI=function(){var n=function(){function a(t,r,o,u,f,h){var v=this;G(this,a),this.router=t,this.element=r,this.renderer=o,this.cdr=u,this.link=f,this.linkWithHref=h,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new we,this.routerEventsSubscription=t.events.subscribe(function(g){g instanceof $m&&v.update()})}return j(a,[{key:"ngAfterContentInit",value:function(){var r=this;on(this.links.changes,this.linksWithHrefs.changes,on(null)).pipe(Wc()).subscribe(function(o){r.update(),r.subscribeToEachLinkOnChanges()})}},{key:"subscribeToEachLinkOnChanges",value:function(){var o,r=this;null===(o=this.linkInputChangesSubscription)||void 0===o||o.unsubscribe();var u=[].concat(kn(this.links.toArray()),kn(this.linksWithHrefs.toArray()),[this.link,this.linkWithHref]).filter(function(f){return!!f}).map(function(f){return f.onChanges});this.linkInputChangesSubscription=Yr(u).pipe(Wc()).subscribe(function(f){r.isActive!==r.isLinkActive(r.router)(f)&&r.update()})}},{key:"routerLinkActive",set:function(r){var o=Array.isArray(r)?r:r.split(" ");this.classes=o.filter(function(u){return!!u})}},{key:"ngOnChanges",value:function(r){this.update()}},{key:"ngOnDestroy",value:function(){var r;this.routerEventsSubscription.unsubscribe(),null===(r=this.linkInputChangesSubscription)||void 0===r||r.unsubscribe()}},{key:"update",value:function(){var r=this;!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(function(){var o=r.hasActiveLinks();r.isActive!==o&&(r.isActive=o,r.cdr.markForCheck(),r.classes.forEach(function(u){o?r.renderer.addClass(r.element.nativeElement,u):r.renderer.removeClass(r.element.nativeElement,u)}),r.isActiveChange.emit(o))})}},{key:"isLinkActive",value:function(r){var o=function(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return function(u){return!!u.urlTree&&r.isActive(u.urlTree,o)}}},{key:"hasActiveLinks",value:function(){var r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.linkWithHref&&r(this.linkWithHref)||this.links.some(r)||this.linksWithHrefs.some(r)}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(Oo),lt(fu),lt(T0),lt(sA),lt(aT,8),lt(ks,8))},n.\u0275dir=Ni({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){var u;1&t&&(Gm(o,aT,5),Gm(o,ks,5)),2&t&&(km(u=Bm())&&(r.links=u),km(u=Bm())&&(r.linksWithHrefs=u))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[La]}),n}(),KI=function n(){G(this,n)},rz=function(){function n(){G(this,n)}return j(n,[{key:"preload",value:function(t,r){return r().pipe(wc(function(){return on(null)}))}}]),n}(),$I=function(){function n(){G(this,n)}return j(n,[{key:"preload",value:function(t,r){return on(null)}}]),n}(),XI=function(){var n=function(){function a(t,r,o,u){G(this,a),this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new jI(o,r,function(g){return t.triggerEvent(new nI(g))},function(g){return t.triggerEvent(new rI(g))})}return j(a,[{key:"setUpPreloading",value:function(){var r=this;this.subscription=this.router.events.pipe(jd(function(o){return o instanceof $m}),mh(function(){return r.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var r=this.injector.get(Zu);return this.processRoutes(r,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(r,o){var h,u=[],f=Ft(o);try{for(f.s();!(h=f.n()).done;){var v=h.value;if(v.loadChildren&&!v.canLoad&&v._loadedConfig){var g=v._loadedConfig;u.push(this.processRoutes(g.module,g.routes))}else v.loadChildren&&!v.canLoad?u.push(this.preloadConfig(r,v)):v.children&&u.push(this.processRoutes(r,v.children))}}catch(y){f.e(y)}finally{f.f()}return Yr(u).pipe(Wc(),zn(function(y){}))}},{key:"preloadConfig",value:function(r,o){var u=this;return this.preloadingStrategy.preload(o,function(){return(o._loadedConfig?on(o._loadedConfig):u.loader.load(r.injector,o)).pipe(qr(function(h){return o._loadedConfig=h,u.processRoutes(h.module,h.routes)}))})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(Oo),Mt(k0),Mt(Vi),Mt(KI))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),sT=function(){var n=function(){function a(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};G(this,a),this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}return j(a,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var r=this;return this.router.events.subscribe(function(o){o instanceof UA?(r.store[r.lastId]=r.viewportScroller.getScrollPosition(),r.lastSource=o.navigationTrigger,r.restoredId=o.restoredState?o.restoredState.navigationId:0):o instanceof $m&&(r.lastId=o.id,r.scheduleScrollEvent(o,r.router.parseUrl(o.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var r=this;return this.router.events.subscribe(function(o){o instanceof iI&&(o.position?"top"===r.options.scrollPositionRestoration?r.viewportScroller.scrollToPosition([0,0]):"enabled"===r.options.scrollPositionRestoration&&r.viewportScroller.scrollToPosition(o.position):o.anchor&&"enabled"===r.options.anchorScrolling?r.viewportScroller.scrollToAnchor(o.anchor):"disabled"!==r.options.scrollPositionRestoration&&r.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(r,o){this.router.triggerEvent(new iI(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),a}();return n.\u0275fac=function(t){Am()},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}(),Xd=new Dn("ROUTER_CONFIGURATION"),JI=new Dn("ROUTER_FORROOT_GUARD"),iz=[vA,{provide:hI,useClass:vI},{provide:Oo,useFactory:function(n,a,t,r,o,u){var f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},h=arguments.length>7?arguments[7]:void 0,v=arguments.length>8?arguments[8]:void 0,g=new Oo(null,n,a,t,r,o,sI(u));return h&&(g.urlHandlingStrategy=h),v&&(g.routeReuseStrategy=v),dz(f,g),f.enableTracing&&g.events.subscribe(function(y){var _,C;null===(_=console.group)||void 0===_||_.call(console,"Router Event: ".concat(y.constructor.name)),console.log(y.toString()),console.log(y),null===(C=console.groupEnd)||void 0===C||C.call(console)}),g},deps:[hI,ny,vA,Vi,k0,oT,Xd,[function n(){G(this,n)},new Va],[function n(){G(this,n)},new Va]]},ny,{provide:mu,useFactory:function(n){return n.routerState.root},deps:[Oo]},XI,$I,rz,{provide:Xd,useValue:{enableTracing:!1}}];function oz(){return new VP("Router",Oo)}var az=function(){var n=function(){function a(t,r){G(this,a)}return j(a,null,[{key:"forRoot",value:function(r,o){return{ngModule:a,providers:[iz,ZI(r),{provide:JI,useFactory:lz,deps:[[Oo,new Va,new ql]]},{provide:Xd,useValue:o||{}},{provide:gh,useFactory:uz,deps:[zd,[new md(hA),new Va],Xd]},{provide:sT,useFactory:sz,deps:[Oo,YH,Xd]},{provide:KI,useExisting:o&&o.preloadingStrategy?o.preloadingStrategy:$I},{provide:VP,multi:!0,useFactory:oz},[uT,{provide:F0,multi:!0,useFactory:pz,deps:[uT]},{provide:QI,useFactory:hz,deps:[uT]},{provide:LP,multi:!0,useExisting:QI}]]}}},{key:"forChild",value:function(r){return{ngModule:a,providers:[ZI(r)]}}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(JI,8),Mt(Oo,8))},n.\u0275mod=mi({type:n}),n.\u0275inj=Go({}),n}();function sz(n,a,t){return t.scrollOffset&&a.setOffset(t.scrollOffset),new sT(n,a,t)}function uz(n,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.useHash?new D3(n,a):new s1(n,a)}function lz(n){return"guarded"}function ZI(n){return[{provide:og,multi:!0,useValue:n},{provide:oT,multi:!0,useValue:n}]}function dz(n,a){n.errorHandler&&(a.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(a.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(a.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(a.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(a.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(a.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(a.canceledNavigationResolution=n.canceledNavigationResolution)}var uT=function(){var n=function(){function a(t){G(this,a),this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ss}return j(a,[{key:"appInitializer",value:function(){var r=this;return this.injector.get(R3,Promise.resolve(null)).then(function(){if(r.destroyed)return Promise.resolve(!0);var u=null,f=new Promise(function(g){return u=g}),h=r.injector.get(Oo),v=r.injector.get(Xd);return"disabled"===v.initialNavigation?(h.setUpLocationChangeListener(),u(!0)):"enabled"===v.initialNavigation||"enabledBlocking"===v.initialNavigation?(h.hooks.afterPreactivation=function(){return r.initNavigation?on(null):(r.initNavigation=!0,u(!0),r.resultOfPreactivationDone)},h.initialNavigation()):u(!0),f})}},{key:"bootstrapListener",value:function(r){var o=this.injector.get(Xd),u=this.injector.get(XI),f=this.injector.get(sT),h=this.injector.get(Oo),v=this.injector.get(Wm);r===v.components[0]&&(("enabledNonBlocking"===o.initialNavigation||void 0===o.initialNavigation)&&h.initialNavigation(),u.setUpPreloading(),f.init(),h.resetRootComponentType(v.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"ngOnDestroy",value:function(){this.destroyed=!0}}]),a}();return n.\u0275fac=function(t){return new(t||n)(Mt(Vi))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n}();function pz(n){return n.appInitializer.bind(n)}function hz(n){return n.bootstrapListener.bind(n)}var QI=new Dn("Router Initializer");function F(n,a,t,r){var f,o=arguments.length,u=o<3?a:null===r?r=Object.getOwnPropertyDescriptor(a,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,a,t,r);else for(var h=n.length-1;h>=0;h--)(f=n[h])&&(u=(o<3?f(u):o>3?f(a,t,u):f(a,t))||u);return o>3&&u&&Object.defineProperty(a,t,u),u}function N(n,a){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,a)}var cT,Jd=de(564),Te=cT=function(){function n(){G(this,n)}return j(n,[{key:"hasChildColumns",value:function(){return!(!(this.childColumns&&this.childColumns.length>0)||1===this.childColumns.length&&this.childColumns.first===this)}},{key:"toColDef",value:function(){var t=this.createColDefFromGridColumn(this);return this.hasChildColumns()&&(t.children=this.getChildColDefs(this.childColumns)),t}},{key:"getChildColDefs",value:function(t){return t.filter(function(r){return!r.hasChildColumns()}).map(function(r){return r.toColDef()})}},{key:"createColDefFromGridColumn",value:function(t){var o=function(n,a){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&a.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]])}return t}(t,["childColumns"]);return o}}]),n}();Te.\u0275fac=function(a){return new(a||Te)},Te.\u0275cmp=Kr({type:Te,selectors:[["ag-grid-column"]],contentQueries:function(a,t,r){var o;1&a&&Gm(r,cT,4),2&a&&km(o=Bm())&&(t.childColumns=o)},inputs:{filterFramework:"filterFramework",filterParams:"filterParams",floatingFilterComponent:"floatingFilterComponent",floatingFilterComponentParams:"floatingFilterComponentParams",floatingFilterComponentFramework:"floatingFilterComponentFramework",filter:"filter",headerName:"headerName",headerValueGetter:"headerValueGetter",headerTooltip:"headerTooltip",headerClass:"headerClass",suppressHeaderKeyboardEvent:"suppressHeaderKeyboardEvent",columnGroupShow:"columnGroupShow",toolPanelClass:"toolPanelClass",suppressColumnsToolPanel:"suppressColumnsToolPanel",suppressFiltersToolPanel:"suppressFiltersToolPanel",tooltipComponent:"tooltipComponent",tooltipComponentFramework:"tooltipComponentFramework",tooltipComponentParams:"tooltipComponentParams",children:"children",groupId:"groupId",openByDefault:"openByDefault",marryChildren:"marryChildren",headerGroupComponent:"headerGroupComponent",headerGroupComponentFramework:"headerGroupComponentFramework",headerGroupComponentParams:"headerGroupComponentParams",colId:"colId",field:"field",type:"type",valueGetter:"valueGetter",valueFormatter:"valueFormatter",refData:"refData",keyCreator:"keyCreator",equals:"equals",tooltipField:"tooltipField",tooltipValueGetter:"tooltipValueGetter",checkboxSelection:"checkboxSelection",icons:"icons",suppressNavigable:"suppressNavigable",suppressKeyboardEvent:"suppressKeyboardEvent",suppressPaste:"suppressPaste",suppressFillHandle:"suppressFillHandle",hide:"hide",initialHide:"initialHide",lockVisible:"lockVisible",lockPosition:"lockPosition",suppressMovable:"suppressMovable",editable:"editable",valueSetter:"valueSetter",valueParser:"valueParser",cellEditor:"cellEditor",cellEditorFramework:"cellEditorFramework",cellEditorParams:"cellEditorParams",cellEditorSelector:"cellEditorSelector",singleClickEdit:"singleClickEdit",newValueHandler:"newValueHandler",cellEditorPopup:"cellEditorPopup",cellEditorPopupPosition:"cellEditorPopupPosition",onCellValueChanged:"onCellValueChanged",onCellClicked:"onCellClicked",onCellDoubleClicked:"onCellDoubleClicked",onCellContextMenu:"onCellContextMenu",getQuickFilterText:"getQuickFilterText",filterValueGetter:"filterValueGetter",floatingFilter:"floatingFilter",headerComponent:"headerComponent",headerComponentFramework:"headerComponentFramework",headerComponentParams:"headerComponentParams",menuTabs:"menuTabs",columnsMenuParams:"columnsMenuParams",suppressMenu:"suppressMenu",headerCheckboxSelection:"headerCheckboxSelection",headerCheckboxSelectionFilteredOnly:"headerCheckboxSelectionFilteredOnly",chartDataType:"chartDataType",pinned:"pinned",initialPinned:"initialPinned",lockPinned:"lockPinned",pinnedRowCellRenderer:"pinnedRowCellRenderer",pinnedRowCellRendererFramework:"pinnedRowCellRendererFramework",pinnedRowCellRendererParams:"pinnedRowCellRendererParams",pinnedRowValueFormatter:"pinnedRowValueFormatter",pivot:"pivot",initialPivot:"initialPivot",pivotIndex:"pivotIndex",initialPivotIndex:"initialPivotIndex",pivotComparator:"pivotComparator",enablePivot:"enablePivot",cellStyle:"cellStyle",cellClass:"cellClass",cellClassRules:"cellClassRules",cellRenderer:"cellRenderer",cellRendererFramework:"cellRendererFramework",cellRendererParams:"cellRendererParams",cellRendererSelector:"cellRendererSelector",autoHeight:"autoHeight",wrapText:"wrapText",enableCellChangeFlash:"enableCellChangeFlash",suppressCellFlash:"suppressCellFlash",rowDrag:"rowDrag",rowDragText:"rowDragText",dndSource:"dndSource",dndSourceOnRowDrag:"dndSourceOnRowDrag",rowGroup:"rowGroup",initialRowGroup:"initialRowGroup",rowGroupIndex:"rowGroupIndex",initialRowGroupIndex:"initialRowGroupIndex",enableRowGroup:"enableRowGroup",enableValue:"enableValue",aggFunc:"aggFunc",initialAggFunc:"initialAggFunc",allowedAggFuncs:"allowedAggFuncs",showRowGroup:"showRowGroup",sortable:"sortable",sort:"sort",initialSort:"initialSort",sortIndex:"sortIndex",initialSortIndex:"initialSortIndex",sortingOrder:"sortingOrder",comparator:"comparator",unSortIcon:"unSortIcon",sortedAt:"sortedAt",colSpan:"colSpan",rowSpan:"rowSpan",width:"width",initialWidth:"initialWidth",minWidth:"minWidth",maxWidth:"maxWidth",flex:"flex",initialFlex:"initialFlex",resizable:"resizable",suppressSizeToFit:"suppressSizeToFit",suppressAutoSize:"suppressAutoSize"},decls:0,vars:0,template:function(a,t){},encapsulation:2}),F([Wl(cT),N("design:type",qR)],Te.prototype,"childColumns",void 0),F([V(),N("design:type",Object)],Te.prototype,"filterFramework",void 0),F([V(),N("design:type",Object)],Te.prototype,"filterParams",void 0),F([V(),N("design:type",Object)],Te.prototype,"floatingFilterComponent",void 0),F([V(),N("design:type",Object)],Te.prototype,"floatingFilterComponentParams",void 0),F([V(),N("design:type",Object)],Te.prototype,"floatingFilterComponentFramework",void 0),F([V(),N("design:type",Object)],Te.prototype,"filter",void 0),F([V(),N("design:type",String)],Te.prototype,"headerName",void 0),F([V(),N("design:type",Object)],Te.prototype,"headerValueGetter",void 0),F([V(),N("design:type",String)],Te.prototype,"headerTooltip",void 0),F([V(),N("design:type",Object)],Te.prototype,"headerClass",void 0),F([V(),N("design:type",Function)],Te.prototype,"suppressHeaderKeyboardEvent",void 0),F([V(),N("design:type",String)],Te.prototype,"columnGroupShow",void 0),F([V(),N("design:type",Object)],Te.prototype,"toolPanelClass",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"suppressColumnsToolPanel",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"suppressFiltersToolPanel",void 0),F([V(),N("design:type",Object)],Te.prototype,"tooltipComponent",void 0),F([V(),N("design:type",Object)],Te.prototype,"tooltipComponentFramework",void 0),F([V(),N("design:type",Object)],Te.prototype,"tooltipComponentParams",void 0),F([V(),N("design:type",Array)],Te.prototype,"children",void 0),F([V(),N("design:type",String)],Te.prototype,"groupId",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"openByDefault",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"marryChildren",void 0),F([V(),N("design:type",Object)],Te.prototype,"headerGroupComponent",void 0),F([V(),N("design:type",Object)],Te.prototype,"headerGroupComponentFramework",void 0),F([V(),N("design:type",Object)],Te.prototype,"headerGroupComponentParams",void 0),F([V(),N("design:type",String)],Te.prototype,"colId",void 0),F([V(),N("design:type",String)],Te.prototype,"field",void 0),F([V(),N("design:type",Object)],Te.prototype,"type",void 0),F([V(),N("design:type",Object)],Te.prototype,"valueGetter",void 0),F([V(),N("design:type",Object)],Te.prototype,"valueFormatter",void 0),F([V(),N("design:type",Object)],Te.prototype,"refData",void 0),F([V(),N("design:type",Function)],Te.prototype,"keyCreator",void 0),F([V(),N("design:type",Function)],Te.prototype,"equals",void 0),F([V(),N("design:type",String)],Te.prototype,"tooltipField",void 0),F([V(),N("design:type",Function)],Te.prototype,"tooltipValueGetter",void 0),F([V(),N("design:type",Object)],Te.prototype,"checkboxSelection",void 0),F([V(),N("design:type",Object)],Te.prototype,"icons",void 0),F([V(),N("design:type",Object)],Te.prototype,"suppressNavigable",void 0),F([V(),N("design:type",Function)],Te.prototype,"suppressKeyboardEvent",void 0),F([V(),N("design:type",Object)],Te.prototype,"suppressPaste",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"suppressFillHandle",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"hide",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"initialHide",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"lockVisible",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"lockPosition",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"suppressMovable",void 0),F([V(),N("design:type",Object)],Te.prototype,"editable",void 0),F([V(),N("design:type",Object)],Te.prototype,"valueSetter",void 0),F([V(),N("design:type",Object)],Te.prototype,"valueParser",void 0),F([V(),N("design:type",Object)],Te.prototype,"cellEditor",void 0),F([V(),N("design:type",Object)],Te.prototype,"cellEditorFramework",void 0),F([V(),N("design:type",Object)],Te.prototype,"cellEditorParams",void 0),F([V(),N("design:type",Function)],Te.prototype,"cellEditorSelector",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"singleClickEdit",void 0),F([V(),N("design:type",Function)],Te.prototype,"newValueHandler",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"cellEditorPopup",void 0),F([V(),N("design:type",String)],Te.prototype,"cellEditorPopupPosition",void 0),F([V(),N("design:type",Function)],Te.prototype,"onCellValueChanged",void 0),F([V(),N("design:type",Function)],Te.prototype,"onCellClicked",void 0),F([V(),N("design:type",Function)],Te.prototype,"onCellDoubleClicked",void 0),F([V(),N("design:type",Function)],Te.prototype,"onCellContextMenu",void 0),F([V(),N("design:type",Function)],Te.prototype,"getQuickFilterText",void 0),F([V(),N("design:type",Object)],Te.prototype,"filterValueGetter",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"floatingFilter",void 0),F([V(),N("design:type",Object)],Te.prototype,"headerComponent",void 0),F([V(),N("design:type",Object)],Te.prototype,"headerComponentFramework",void 0),F([V(),N("design:type",Object)],Te.prototype,"headerComponentParams",void 0),F([V(),N("design:type",Array)],Te.prototype,"menuTabs",void 0),F([V(),N("design:type",Object)],Te.prototype,"columnsMenuParams",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"suppressMenu",void 0),F([V(),N("design:type",Object)],Te.prototype,"headerCheckboxSelection",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"headerCheckboxSelectionFilteredOnly",void 0),F([V(),N("design:type",String)],Te.prototype,"chartDataType",void 0),F([V(),N("design:type",Object)],Te.prototype,"pinned",void 0),F([V(),N("design:type",Object)],Te.prototype,"initialPinned",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"lockPinned",void 0),F([V(),N("design:type",Object)],Te.prototype,"pinnedRowCellRenderer",void 0),F([V(),N("design:type",Object)],Te.prototype,"pinnedRowCellRendererFramework",void 0),F([V(),N("design:type",Object)],Te.prototype,"pinnedRowCellRendererParams",void 0),F([V(),N("design:type",Object)],Te.prototype,"pinnedRowValueFormatter",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"pivot",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"initialPivot",void 0),F([V(),N("design:type",Number)],Te.prototype,"pivotIndex",void 0),F([V(),N("design:type",Number)],Te.prototype,"initialPivotIndex",void 0),F([V(),N("design:type",Function)],Te.prototype,"pivotComparator",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"enablePivot",void 0),F([V(),N("design:type",Object)],Te.prototype,"cellStyle",void 0),F([V(),N("design:type",Object)],Te.prototype,"cellClass",void 0),F([V(),N("design:type",Object)],Te.prototype,"cellClassRules",void 0),F([V(),N("design:type",Object)],Te.prototype,"cellRenderer",void 0),F([V(),N("design:type",Object)],Te.prototype,"cellRendererFramework",void 0),F([V(),N("design:type",Object)],Te.prototype,"cellRendererParams",void 0),F([V(),N("design:type",Function)],Te.prototype,"cellRendererSelector",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"autoHeight",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"wrapText",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"enableCellChangeFlash",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"suppressCellFlash",void 0),F([V(),N("design:type",Object)],Te.prototype,"rowDrag",void 0),F([V(),N("design:type",Function)],Te.prototype,"rowDragText",void 0),F([V(),N("design:type",Object)],Te.prototype,"dndSource",void 0),F([V(),N("design:type",Function)],Te.prototype,"dndSourceOnRowDrag",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"rowGroup",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"initialRowGroup",void 0),F([V(),N("design:type",Number)],Te.prototype,"rowGroupIndex",void 0),F([V(),N("design:type",Number)],Te.prototype,"initialRowGroupIndex",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"enableRowGroup",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"enableValue",void 0),F([V(),N("design:type",Object)],Te.prototype,"aggFunc",void 0),F([V(),N("design:type",Object)],Te.prototype,"initialAggFunc",void 0),F([V(),N("design:type",Array)],Te.prototype,"allowedAggFuncs",void 0),F([V(),N("design:type",Object)],Te.prototype,"showRowGroup",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"sortable",void 0),F([V(),N("design:type",String)],Te.prototype,"sort",void 0),F([V(),N("design:type",String)],Te.prototype,"initialSort",void 0),F([V(),N("design:type",Number)],Te.prototype,"sortIndex",void 0),F([V(),N("design:type",Number)],Te.prototype,"initialSortIndex",void 0),F([V(),N("design:type",Array)],Te.prototype,"sortingOrder",void 0),F([V(),N("design:type",Function)],Te.prototype,"comparator",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"unSortIcon",void 0),F([V(),N("design:type",Number)],Te.prototype,"sortedAt",void 0),F([V(),N("design:type",Function)],Te.prototype,"colSpan",void 0),F([V(),N("design:type",Function)],Te.prototype,"rowSpan",void 0),F([V(),N("design:type",Number)],Te.prototype,"width",void 0),F([V(),N("design:type",Number)],Te.prototype,"initialWidth",void 0),F([V(),N("design:type",Number)],Te.prototype,"minWidth",void 0),F([V(),N("design:type",Number)],Te.prototype,"maxWidth",void 0),F([V(),N("design:type",Number)],Te.prototype,"flex",void 0),F([V(),N("design:type",Number)],Te.prototype,"initialFlex",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"resizable",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"suppressSizeToFit",void 0),F([V(),N("design:type",Boolean)],Te.prototype,"suppressAutoSize",void 0);var pT,dT=function(){var n=function(a){pe(r,a);var t=ve(r);function r(o){var u;return G(this,r),(u=t.call(this))._ngZone=o,u}return j(r,[{key:"setEmitterUsedCallback",value:function(u){this.isEmitterUsed=u}},{key:"setTimeout",value:function(u,f){this._ngZone?this._ngZone.runOutsideAngular(function(){window.setTimeout(function(){u()},f)}):window.setTimeout(function(){u()},f)}},{key:"setInterval",value:function(u,f){var h=this;return new Jd.j_S(function(v){h._ngZone?h._ngZone.runOutsideAngular(function(){v(window.setInterval(function(){u()},f))}):v(window.setInterval(function(){u()},f))})}},{key:"addEventListener",value:function(u,f,h,v){this.isOutsideAngular(f)&&this._ngZone?this._ngZone.runOutsideAngular(function(){u.addEventListener(f,h,v)}):u.addEventListener(f,h,v)}},{key:"dispatchEvent",value:function(u,f){var h=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isOutsideAngular(u)?this._ngZone?this._ngZone.runOutsideAngular(f):f():(this.isEmitterUsed(u)||h)&&(!Ri.isInAngularZone()&&this._ngZone?this._ngZone.run(f):f())}}]),r}(Jd.vA3);return n.\u0275fac=function(t){return new(t||n)(Mt(Ri))},n.\u0275prov=an({token:n,factory:function(t){return n.\u0275fac(t)}}),n=F([N("design:paramtypes",[Ri])],n)}(),fT=function(){var n=function(a){pe(r,a);var t=ve(r);function r(){return G(this,r),t.apply(this,arguments)}return j(r,[{key:"setViewContainerRef",value:function(u){this.viewContainerRef=u}},{key:"setComponentFactoryResolver",value:function(u){this.componentFactoryResolver=u}},{key:"createWrapper",value:function(u){var f=this,h=function(g){pe(_,g);var y=ve(_);function _(){return G(this,_),y.apply(this,arguments)}return j(_,[{key:"init",value:function(S){ye(ze(_.prototype),"init",this).call(this,S),this._componentRef.changeDetectorRef.detectChanges()}},{key:"createComponent",value:function(){return f.createComponent(u)}},{key:"hasMethod",value:function(S){return null!=v.getFrameworkComponentInstance()[S]}},{key:"callMethod",value:function(S,R){var b=this.getFrameworkComponentInstance();return v.getFrameworkComponentInstance()[S].apply(b,R)}},{key:"addMethod",value:function(S,R){v[S]=R}}]),_}(yz),v=new h;return v}},{key:"createComponent",value:function(u){var f=this.componentFactoryResolver.resolveComponentFactory(u);return this.viewContainerRef.createComponent(f)}}]),r}(Jd.Nk3);return n.\u0275fac=function(){var a;return function(r){return(a||(a=function(n){return ds(function(){for(var a=n.prototype.constructor,t=a[Bo]||ig(a),r=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;o&&o!==r;){var u=o[Bo]||ig(o);if(u&&u!==t)return u;o=Object.getPrototypeOf(o)}return function(f){return new f}})}(n)))(r||n)}}(),n.\u0275prov=an({token:n,factory:function(t){return n.\u0275fac(t)}}),n}(),yz=function(){function n(){G(this,n)}return j(n,[{key:"init",value:function(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,this._agAwareComponent.agInit(this._params)}},{key:"getGui",value:function(){return this._eGui}},{key:"destroy",value:function(){this._frameworkComponentInstance&&"function"==typeof this._frameworkComponentInstance.destroy&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}},{key:"getFrameworkComponentInstance",value:function(){return this._frameworkComponentInstance}}]),n}(),nL=function(){var n=function(){function a(t,r,o,u,f){G(this,a),this.viewContainerRef=r,this.angularFrameworkOverrides=o,this.frameworkComponentWrapper=u,this.componentFactoryResolver=f,this._initialised=!1,this._destroyed=!1,this._fullyReady=Jd.j_S.resolve(!0),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipShowDelay=void 0,this.tooltipMouseTrack=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.clipboardDeliminator=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.deltaColumnMode=void 0,this.applyColumnDefOrder=void 0,this.immutableColumns=void 0,this.suppressSetColumnStateEvents=void 0,this.suppressColumnStateEvents=void 0,this.colWidth=void 0,this.minColWidth=void 0,this.maxColWidth=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.components=void 0,this.frameworkComponents=void 0,this.reactUi=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterMovesDown=void 0,this.enterMovesDownAfterEdit=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.stopEditingWhenGridLosesFocus=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.defaultExportParams=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.floatingFilter=void 0,this.enableOldSetFilterModel=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererFramework=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererFramework=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressParentsInRowNodes=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentFramework=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentFramework=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.suppressAggAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDelay=void 0,this.cellFadeDelay=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererFramework=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.deprecatedEmbedFullWidthRows=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererFramework=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.groupRowInnerRenderer=void 0,this.groupRowInnerRendererFramework=void 0,this.groupMultiAutoColumn=void 0,this.groupUseEntireRow=void 0,this.groupSuppressAutoColumn=void 0,this.rememberGroupStateWhenNewData=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.immutableData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.deltaRowDataMode=void 0,this.batchUpdateWaitMillis=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideStoreType=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortingAlwaysResets=void 0,this.serverSideFilteringAlwaysResets=void 0,this.suppressEnterpriseResetOnNewColumns=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellSelection=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.angularCompileRows=void 0,this.angularCompileFilters=void 0,this.functionsPassive=void 0,this.enableGroupEdit=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.suppressKeyboardEvent=void 0,this.localeTextFunc=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.groupRowAggNodes=void 0,this.isGroupOpenByDefault=void 0,this.defaultGroupOrderComparator=void 0,this.processSecondaryColDef=void 0,this.processSecondaryColGroupDef=void 0,this.getDataPath=void 0,this.defaultGroupSortComparator=void 0,this.getChildCount=void 0,this.getServerSideStoreParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowNodeId=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSort=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthCell=void 0,this.toolPanelVisibleChanged=new we,this.pasteStart=new we,this.pasteEnd=new we,this.columnVisible=new we,this.columnPinned=new we,this.columnResized=new we,this.columnMoved=new we,this.columnValueChanged=new we,this.columnPivotModeChanged=new we,this.columnPivotChanged=new we,this.columnGroupOpened=new we,this.newColumnsLoaded=new we,this.gridColumnsChanged=new we,this.displayedColumnsChanged=new we,this.virtualColumnsChanged=new we,this.columnEverythingChanged=new we,this.componentStateChanged=new we,this.cellValueChanged=new we,this.rowValueChanged=new we,this.cellEditingStarted=new we,this.cellEditingStopped=new we,this.rowEditingStarted=new we,this.rowEditingStopped=new we,this.filterOpened=new we,this.filterChanged=new we,this.filterModified=new we,this.chartCreated=new we,this.chartRangeSelectionChanged=new we,this.chartOptionsChanged=new we,this.chartDestroyed=new we,this.cellKeyDown=new we,this.cellKeyPress=new we,this.gridReady=new we,this.firstDataRendered=new we,this.gridSizeChanged=new we,this.modelUpdated=new we,this.virtualRowRemoved=new we,this.viewportChanged=new we,this.bodyScroll=new we,this.bodyScrollEnd=new we,this.dragStarted=new we,this.dragStopped=new we,this.paginationChanged=new we,this.rowDragEnter=new we,this.rowDragMove=new we,this.rowDragLeave=new we,this.rowDragEnd=new we,this.columnRowGroupChanged=new we,this.rowGroupOpened=new we,this.expandOrCollapseAll=new we,this.pinnedRowDataChanged=new we,this.rowDataChanged=new we,this.rowDataUpdated=new we,this.asyncTransactionsFlushed=new we,this.cellClicked=new we,this.cellDoubleClicked=new we,this.cellFocused=new we,this.cellMouseOver=new we,this.cellMouseOut=new we,this.cellMouseDown=new we,this.rowClicked=new we,this.rowDoubleClicked=new we,this.rowSelected=new we,this.selectionChanged=new we,this.cellContextMenu=new we,this.rangeSelectionChanged=new we,this.sortChanged=new we,this.columnRowGroupChangeRequest=new we,this.columnPivotChangeRequest=new we,this.columnValueChangeRequest=new we,this.columnAggFuncChangeRequest=new we,this._nativeElement=t.nativeElement}return j(a,[{key:"ngAfterViewInit",value:function(){this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef),this.frameworkComponentWrapper.setComponentFactoryResolver(this.componentFactoryResolver),this.angularFrameworkOverrides.setEmitterUsedCallback(this.isEmitterUsed.bind(this)),this.gridOptions=Jd.plv.copyAttributesToGridOptions(this.gridOptions,this,!0),this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]},this.columns&&this.columns.length>0&&(this.gridOptions.columnDefs=this.columns.map(function(r){return r.toColDef()})),new Jd.rjZ(this._nativeElement,this.gridOptions,this.gridParams),this.gridOptions.api&&(this.api=this.gridOptions.api),this.gridOptions.columnApi&&(this.columnApi=this.gridOptions.columnApi),this._initialised=!0,this._fullyReady.resolveNow(null,function(r){return r})}},{key:"ngOnChanges",value:function(r){this._initialised&&Jd.plv.processOnChange(r,this.gridOptions,this.api,this.columnApi)}},{key:"ngOnDestroy",value:function(){this._initialised&&(this._destroyed=!0,this.api&&this.api.destroy())}},{key:"isEmitterUsed",value:function(r){var o=this[r],u=!!o&&o.observers&&o.observers.length>0,f="on".concat(r.charAt(0).toUpperCase()).concat(r.substring(1));return u||!!this.gridOptions&&!!this.gridOptions[f]}},{key:"globalEventListener",value:function(r,o){if(!this._destroyed){var u=this[r];u&&this.isEmitterUsed(r)&&("gridReady"===r?this._fullyReady.then(function(f){u.emit(o)}):u.emit(o))}}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(fu),lt(va),lt(dT),lt(fT),lt(mc))},n.\u0275cmp=Kr({type:n,selectors:[["ag-grid-angular"]],contentQueries:function(t,r,o){var u;1&t&&Gm(o,Te,4),2&t&&km(u=Bm())&&(r.columns=u)},inputs:{statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipShowDelay:"tooltipShowDelay",tooltipMouseTrack:"tooltipMouseTrack",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",clipboardDeliminator:"clipboardDeliminator",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",deltaColumnMode:"deltaColumnMode",applyColumnDefOrder:"applyColumnDefOrder",immutableColumns:"immutableColumns",suppressSetColumnStateEvents:"suppressSetColumnStateEvents",suppressColumnStateEvents:"suppressColumnStateEvents",colWidth:"colWidth",minColWidth:"minColWidth",maxColWidth:"maxColWidth",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",components:"components",frameworkComponents:"frameworkComponents",reactUi:"reactUi",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterMovesDown:"enterMovesDown",enterMovesDownAfterEdit:"enterMovesDownAfterEdit",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",stopEditingWhenGridLosesFocus:"stopEditingWhenGridLosesFocus",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",defaultExportParams:"defaultExportParams",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",floatingFilter:"floatingFilter",enableOldSetFilterModel:"enableOldSetFilterModel",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererFramework:"loadingCellRendererFramework",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererFramework:"detailCellRendererFramework",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressParentsInRowNodes:"suppressParentsInRowNodes",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentFramework:"loadingOverlayComponentFramework",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentFramework:"noRowsOverlayComponentFramework",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",suppressAggAtRootLevel:"suppressAggAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDelay:"cellFlashDelay",cellFadeDelay:"cellFadeDelay",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererFramework:"fullWidthCellRendererFramework",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",deprecatedEmbedFullWidthRows:"deprecatedEmbedFullWidthRows",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererFramework:"groupRowRendererFramework",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",groupRowInnerRenderer:"groupRowInnerRenderer",groupRowInnerRendererFramework:"groupRowInnerRendererFramework",groupMultiAutoColumn:"groupMultiAutoColumn",groupUseEntireRow:"groupUseEntireRow",groupSuppressAutoColumn:"groupSuppressAutoColumn",rememberGroupStateWhenNewData:"rememberGroupStateWhenNewData",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",immutableData:"immutableData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",deltaRowDataMode:"deltaRowDataMode",batchUpdateWaitMillis:"batchUpdateWaitMillis",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideStoreType:"serverSideStoreType",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortingAlwaysResets:"serverSideSortingAlwaysResets",serverSideFilteringAlwaysResets:"serverSideFilteringAlwaysResets",suppressEnterpriseResetOnNewColumns:"suppressEnterpriseResetOnNewColumns",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellSelection:"suppressCellSelection",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",angularCompileRows:"angularCompileRows",angularCompileFilters:"angularCompileFilters",functionsPassive:"functionsPassive",enableGroupEdit:"enableGroupEdit",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",suppressKeyboardEvent:"suppressKeyboardEvent",localeTextFunc:"localeTextFunc",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",groupRowAggNodes:"groupRowAggNodes",isGroupOpenByDefault:"isGroupOpenByDefault",defaultGroupOrderComparator:"defaultGroupOrderComparator",processSecondaryColDef:"processSecondaryColDef",processSecondaryColGroupDef:"processSecondaryColGroupDef",getDataPath:"getDataPath",defaultGroupSortComparator:"defaultGroupSortComparator",getChildCount:"getChildCount",getServerSideStoreParams:"getServerSideStoreParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowNodeId:"getRowNodeId",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSort:"postSort",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthCell:"isFullWidthCell",gridOptions:"gridOptions",modules:"modules"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",cellKeyPress:"cellKeyPress",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataChanged:"rowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",sortChanged:"sortChanged",columnRowGroupChangeRequest:"columnRowGroupChangeRequest",columnPivotChangeRequest:"columnPivotChangeRequest",columnValueChangeRequest:"columnValueChangeRequest",columnAggFuncChangeRequest:"columnAggFuncChangeRequest"},features:[YO([dT,fT]),La],decls:0,vars:0,template:function(t,r){},encapsulation:2}),F([Wl(Te),N("design:type",qR)],n.prototype,"columns",void 0),F([V(),N("design:type",Object)],n.prototype,"gridOptions",void 0),F([V(),N("design:type",Array)],n.prototype,"modules",void 0),F([V(),N("design:type",Object)],n.prototype,"statusBar",void 0),F([V(),N("design:type",Object)],n.prototype,"sideBar",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressContextMenu",void 0),F([V(),N("design:type",Boolean)],n.prototype,"preventDefaultOnContextMenu",void 0),F([V(),N("design:type",Boolean)],n.prototype,"allowContextMenuWithControlKey",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMenuHide",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableBrowserTooltips",void 0),F([V(),N("design:type",Number)],n.prototype,"tooltipShowDelay",void 0),F([V(),N("design:type",Boolean)],n.prototype,"tooltipMouseTrack",void 0),F([V(),N("design:type",HTMLElement)],n.prototype,"popupParent",void 0),F([V(),N("design:type",Boolean)],n.prototype,"copyHeadersToClipboard",void 0),F([V(),N("design:type",String)],n.prototype,"clipboardDeliminator",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressCopyRowsToClipboard",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressLastEmptyLineOnPaste",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressClipboardPaste",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressClipboardApi",void 0),F([V(),N("design:type",Array)],n.prototype,"columnDefs",void 0),F([V(),N("design:type",Object)],n.prototype,"defaultColDef",void 0),F([V(),N("design:type",Object)],n.prototype,"defaultColGroupDef",void 0),F([V(),N("design:type",Object)],n.prototype,"columnTypes",void 0),F([V(),N("design:type",Boolean)],n.prototype,"maintainColumnOrder",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressFieldDotNotation",void 0),F([V(),N("design:type",Boolean)],n.prototype,"deltaColumnMode",void 0),F([V(),N("design:type",Boolean)],n.prototype,"applyColumnDefOrder",void 0),F([V(),N("design:type",Boolean)],n.prototype,"immutableColumns",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressSetColumnStateEvents",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressColumnStateEvents",void 0),F([V(),N("design:type",Number)],n.prototype,"colWidth",void 0),F([V(),N("design:type",Number)],n.prototype,"minColWidth",void 0),F([V(),N("design:type",Number)],n.prototype,"maxColWidth",void 0),F([V(),N("design:type",Number)],n.prototype,"headerHeight",void 0),F([V(),N("design:type",Number)],n.prototype,"groupHeaderHeight",void 0),F([V(),N("design:type",Number)],n.prototype,"floatingFiltersHeight",void 0),F([V(),N("design:type",Number)],n.prototype,"pivotHeaderHeight",void 0),F([V(),N("design:type",Number)],n.prototype,"pivotGroupHeaderHeight",void 0),F([V(),N("design:type",Boolean)],n.prototype,"allowDragFromColumnsToolPanel",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMovableColumns",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressColumnMoveAnimation",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressDragLeaveHidesColumns",void 0),F([V(),N("design:type",String)],n.prototype,"colResizeDefault",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressAutoSize",void 0),F([V(),N("design:type",Number)],n.prototype,"autoSizePadding",void 0),F([V(),N("design:type",Boolean)],n.prototype,"skipHeaderOnAutoSize",void 0),F([V(),N("design:type",Object)],n.prototype,"components",void 0),F([V(),N("design:type",Object)],n.prototype,"frameworkComponents",void 0),F([V(),N("design:type",Boolean)],n.prototype,"reactUi",void 0),F([V(),N("design:type",String)],n.prototype,"editType",void 0),F([V(),N("design:type",Boolean)],n.prototype,"singleClickEdit",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressClickEdit",void 0),F([V(),N("design:type",Boolean)],n.prototype,"stopEditingWhenCellsLoseFocus",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enterMovesDown",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enterMovesDownAfterEdit",void 0),F([V(),N("design:type",Boolean)],n.prototype,"undoRedoCellEditing",void 0),F([V(),N("design:type",Number)],n.prototype,"undoRedoCellEditingLimit",void 0),F([V(),N("design:type",Boolean)],n.prototype,"stopEditingWhenGridLosesFocus",void 0),F([V(),N("design:type",Object)],n.prototype,"defaultCsvExportParams",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressCsvExport",void 0),F([V(),N("design:type",Object)],n.prototype,"defaultExcelExportParams",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressExcelExport",void 0),F([V(),N("design:type",Array)],n.prototype,"excelStyles",void 0),F([V(),N("design:type",Object)],n.prototype,"defaultExportParams",void 0),F([V(),N("design:type",String)],n.prototype,"quickFilterText",void 0),F([V(),N("design:type",Boolean)],n.prototype,"cacheQuickFilter",void 0),F([V(),N("design:type",Boolean)],n.prototype,"excludeChildrenWhenTreeDataFiltering",void 0),F([V(),N("design:type",Boolean)],n.prototype,"floatingFilter",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableOldSetFilterModel",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableCharts",void 0),F([V(),N("design:type",Array)],n.prototype,"chartThemes",void 0),F([V(),N("design:type",Object)],n.prototype,"customChartThemes",void 0),F([V(),N("design:type",Object)],n.prototype,"chartThemeOverrides",void 0),F([V(),N("design:type",Object)],n.prototype,"loadingCellRenderer",void 0),F([V(),N("design:type",Object)],n.prototype,"loadingCellRendererFramework",void 0),F([V(),N("design:type",Object)],n.prototype,"loadingCellRendererParams",void 0),F([V(),N("design:type",Function)],n.prototype,"loadingCellRendererSelector",void 0),F([V(),N("design:type",Object)],n.prototype,"localeText",void 0),F([V(),N("design:type",Boolean)],n.prototype,"masterDetail",void 0),F([V(),N("design:type",Boolean)],n.prototype,"keepDetailRows",void 0),F([V(),N("design:type",Number)],n.prototype,"keepDetailRowsCount",void 0),F([V(),N("design:type",Object)],n.prototype,"detailCellRenderer",void 0),F([V(),N("design:type",Object)],n.prototype,"detailCellRendererFramework",void 0),F([V(),N("design:type",Object)],n.prototype,"detailCellRendererParams",void 0),F([V(),N("design:type",Number)],n.prototype,"detailRowHeight",void 0),F([V(),N("design:type",Boolean)],n.prototype,"detailRowAutoHeight",void 0),F([V(),N("design:type",Object)],n.prototype,"context",void 0),F([V(),N("design:type",Array)],n.prototype,"alignedGrids",void 0),F([V(),N("design:type",Number)],n.prototype,"tabIndex",void 0),F([V(),N("design:type",Number)],n.prototype,"rowBuffer",void 0),F([V(),N("design:type",Boolean)],n.prototype,"valueCache",void 0),F([V(),N("design:type",Boolean)],n.prototype,"valueCacheNeverExpires",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableCellExpressions",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressParentsInRowNodes",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressTouch",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressFocusAfterRefresh",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressAsyncEvents",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressBrowserResizeObserver",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressPropertyNamesCheck",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressChangeDetection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"debug",void 0),F([V(),N("design:type",String)],n.prototype,"overlayLoadingTemplate",void 0),F([V(),N("design:type",Object)],n.prototype,"loadingOverlayComponent",void 0),F([V(),N("design:type",Object)],n.prototype,"loadingOverlayComponentFramework",void 0),F([V(),N("design:type",Object)],n.prototype,"loadingOverlayComponentParams",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressLoadingOverlay",void 0),F([V(),N("design:type",String)],n.prototype,"overlayNoRowsTemplate",void 0),F([V(),N("design:type",Object)],n.prototype,"noRowsOverlayComponent",void 0),F([V(),N("design:type",Object)],n.prototype,"noRowsOverlayComponentFramework",void 0),F([V(),N("design:type",Object)],n.prototype,"noRowsOverlayComponentParams",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressNoRowsOverlay",void 0),F([V(),N("design:type",Boolean)],n.prototype,"pagination",void 0),F([V(),N("design:type",Number)],n.prototype,"paginationPageSize",void 0),F([V(),N("design:type",Boolean)],n.prototype,"paginationAutoPageSize",void 0),F([V(),N("design:type",Boolean)],n.prototype,"paginateChildRows",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressPaginationPanel",void 0),F([V(),N("design:type",Boolean)],n.prototype,"pivotMode",void 0),F([V(),N("design:type",String)],n.prototype,"pivotPanelShow",void 0),F([V(),N("design:type",String)],n.prototype,"pivotColumnGroupTotals",void 0),F([V(),N("design:type",String)],n.prototype,"pivotRowTotals",void 0),F([V(),N("design:type",Boolean)],n.prototype,"pivotSuppressAutoColumn",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressExpandablePivotGroups",void 0),F([V(),N("design:type",Boolean)],n.prototype,"functionsReadOnly",void 0),F([V(),N("design:type",Object)],n.prototype,"aggFuncs",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressAggFuncInHeader",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressAggAtRootLevel",void 0),F([V(),N("design:type",Boolean)],n.prototype,"aggregateOnlyChangedColumns",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressAggFilteredOnly",void 0),F([V(),N("design:type",Boolean)],n.prototype,"animateRows",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableCellChangeFlash",void 0),F([V(),N("design:type",Number)],n.prototype,"cellFlashDelay",void 0),F([V(),N("design:type",Number)],n.prototype,"cellFadeDelay",void 0),F([V(),N("design:type",String)],n.prototype,"domLayout",void 0),F([V(),N("design:type",Boolean)],n.prototype,"ensureDomOrder",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableRtl",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressColumnVirtualisation",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMaxRenderedRowRestriction",void 0),F([V(),N("design:type",Boolean)],n.prototype,"rowDragManaged",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressRowDrag",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMoveWhenRowDragging",void 0),F([V(),N("design:type",Boolean)],n.prototype,"rowDragEntireRow",void 0),F([V(),N("design:type",Boolean)],n.prototype,"rowDragMultiRow",void 0),F([V(),N("design:type",Object)],n.prototype,"fullWidthCellRenderer",void 0),F([V(),N("design:type",Object)],n.prototype,"fullWidthCellRendererFramework",void 0),F([V(),N("design:type",Object)],n.prototype,"fullWidthCellRendererParams",void 0),F([V(),N("design:type",Boolean)],n.prototype,"embedFullWidthRows",void 0),F([V(),N("design:type",Boolean)],n.prototype,"deprecatedEmbedFullWidthRows",void 0),F([V(),N("design:type",String)],n.prototype,"groupDisplayType",void 0),F([V(),N("design:type",Number)],n.prototype,"groupDefaultExpanded",void 0),F([V(),N("design:type",Object)],n.prototype,"autoGroupColumnDef",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupMaintainOrder",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupSelectsChildren",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupIncludeFooter",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupIncludeTotalFooter",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupSuppressBlankHeader",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupSelectsFiltered",void 0),F([V(),N("design:type",Boolean)],n.prototype,"showOpenedGroup",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupRemoveSingleChildren",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupRemoveLowestSingleChildren",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupHideOpenParents",void 0),F([V(),N("design:type",String)],n.prototype,"rowGroupPanelShow",void 0),F([V(),N("design:type",Object)],n.prototype,"groupRowRenderer",void 0),F([V(),N("design:type",Object)],n.prototype,"groupRowRendererFramework",void 0),F([V(),N("design:type",Object)],n.prototype,"groupRowRendererParams",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMakeColumnVisibleAfterUnGroup",void 0),F([V(),N("design:type",Boolean)],n.prototype,"treeData",void 0),F([V(),N("design:type",Object)],n.prototype,"groupRowInnerRenderer",void 0),F([V(),N("design:type",Object)],n.prototype,"groupRowInnerRendererFramework",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupMultiAutoColumn",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupUseEntireRow",void 0),F([V(),N("design:type",Boolean)],n.prototype,"groupSuppressAutoColumn",void 0),F([V(),N("design:type",Boolean)],n.prototype,"rememberGroupStateWhenNewData",void 0),F([V(),N("design:type",Array)],n.prototype,"pinnedTopRowData",void 0),F([V(),N("design:type",Array)],n.prototype,"pinnedBottomRowData",void 0),F([V(),N("design:type",String)],n.prototype,"rowModelType",void 0),F([V(),N("design:type",Array)],n.prototype,"rowData",void 0),F([V(),N("design:type",Boolean)],n.prototype,"immutableData",void 0),F([V(),N("design:type",Number)],n.prototype,"asyncTransactionWaitMillis",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressModelUpdateAfterUpdateTransaction",void 0),F([V(),N("design:type",Boolean)],n.prototype,"deltaRowDataMode",void 0),F([V(),N("design:type",Number)],n.prototype,"batchUpdateWaitMillis",void 0),F([V(),N("design:type",Object)],n.prototype,"datasource",void 0),F([V(),N("design:type",Number)],n.prototype,"cacheOverflowSize",void 0),F([V(),N("design:type",Number)],n.prototype,"infiniteInitialRowCount",void 0),F([V(),N("design:type",String)],n.prototype,"serverSideStoreType",void 0),F([V(),N("design:type",Number)],n.prototype,"cacheBlockSize",void 0),F([V(),N("design:type",Number)],n.prototype,"maxBlocksInCache",void 0),F([V(),N("design:type",Number)],n.prototype,"maxConcurrentDatasourceRequests",void 0),F([V(),N("design:type",Number)],n.prototype,"blockLoadDebounceMillis",void 0),F([V(),N("design:type",Boolean)],n.prototype,"purgeClosedRowNodes",void 0),F([V(),N("design:type",Object)],n.prototype,"serverSideDatasource",void 0),F([V(),N("design:type",Boolean)],n.prototype,"serverSideSortingAlwaysResets",void 0),F([V(),N("design:type",Boolean)],n.prototype,"serverSideFilteringAlwaysResets",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressEnterpriseResetOnNewColumns",void 0),F([V(),N("design:type",Object)],n.prototype,"viewportDatasource",void 0),F([V(),N("design:type",Number)],n.prototype,"viewportRowModelPageSize",void 0),F([V(),N("design:type",Number)],n.prototype,"viewportRowModelBufferSize",void 0),F([V(),N("design:type",Boolean)],n.prototype,"alwaysShowHorizontalScroll",void 0),F([V(),N("design:type",Boolean)],n.prototype,"alwaysShowVerticalScroll",void 0),F([V(),N("design:type",Boolean)],n.prototype,"debounceVerticalScrollbar",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressHorizontalScroll",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressScrollOnNewData",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressScrollWhenPopupsAreOpen",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressAnimationFrame",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMiddleClickScrolls",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressPreventDefaultOnMouseWheel",void 0),F([V(),N("design:type",Number)],n.prototype,"scrollbarWidth",void 0),F([V(),N("design:type",String)],n.prototype,"rowSelection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"rowMultiSelectWithClick",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressRowDeselection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressRowClickSelection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressCellSelection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMultiRangeSelection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableCellTextSelection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableRangeSelection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableRangeHandle",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableFillHandle",void 0),F([V(),N("design:type",String)],n.prototype,"fillHandleDirection",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressClearOnFillReduction",void 0),F([V(),N("design:type",Array)],n.prototype,"sortingOrder",void 0),F([V(),N("design:type",Boolean)],n.prototype,"accentedSort",void 0),F([V(),N("design:type",Boolean)],n.prototype,"unSortIcon",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMultiSort",void 0),F([V(),N("design:type",String)],n.prototype,"multiSortKey",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressMaintainUnsortedOrder",void 0),F([V(),N("design:type",Object)],n.prototype,"icons",void 0),F([V(),N("design:type",Number)],n.prototype,"rowHeight",void 0),F([V(),N("design:type",Object)],n.prototype,"rowStyle",void 0),F([V(),N("design:type",Object)],n.prototype,"rowClass",void 0),F([V(),N("design:type",Object)],n.prototype,"rowClassRules",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressRowHoverHighlight",void 0),F([V(),N("design:type",Boolean)],n.prototype,"suppressRowTransform",void 0),F([V(),N("design:type",Boolean)],n.prototype,"columnHoverHighlight",void 0),F([V(),N("design:type",Boolean)],n.prototype,"deltaSort",void 0),F([V(),N("design:type",String)],n.prototype,"treeDataDisplayType",void 0),F([V(),N("design:type",Boolean)],n.prototype,"angularCompileRows",void 0),F([V(),N("design:type",Boolean)],n.prototype,"angularCompileFilters",void 0),F([V(),N("design:type",Boolean)],n.prototype,"functionsPassive",void 0),F([V(),N("design:type",Boolean)],n.prototype,"enableGroupEdit",void 0),F([V(),N("design:type",Function)],n.prototype,"getContextMenuItems",void 0),F([V(),N("design:type",Function)],n.prototype,"getMainMenuItems",void 0),F([V(),N("design:type",Function)],n.prototype,"postProcessPopup",void 0),F([V(),N("design:type",Function)],n.prototype,"processCellForClipboard",void 0),F([V(),N("design:type",Function)],n.prototype,"processHeaderForClipboard",void 0),F([V(),N("design:type",Function)],n.prototype,"processCellFromClipboard",void 0),F([V(),N("design:type",Function)],n.prototype,"sendToClipboard",void 0),F([V(),N("design:type",Function)],n.prototype,"processDataFromClipboard",void 0),F([V(),N("design:type",Function)],n.prototype,"isExternalFilterPresent",void 0),F([V(),N("design:type",Function)],n.prototype,"doesExternalFilterPass",void 0),F([V(),N("design:type",Function)],n.prototype,"getChartToolbarItems",void 0),F([V(),N("design:type",Function)],n.prototype,"createChartContainer",void 0),F([V(),N("design:type",Function)],n.prototype,"navigateToNextHeader",void 0),F([V(),N("design:type",Function)],n.prototype,"tabToNextHeader",void 0),F([V(),N("design:type",Function)],n.prototype,"navigateToNextCell",void 0),F([V(),N("design:type",Function)],n.prototype,"tabToNextCell",void 0),F([V(),N("design:type",Function)],n.prototype,"suppressKeyboardEvent",void 0),F([V(),N("design:type",Function)],n.prototype,"localeTextFunc",void 0),F([V(),N("design:type",Function)],n.prototype,"getDocument",void 0),F([V(),N("design:type",Function)],n.prototype,"paginationNumberFormatter",void 0),F([V(),N("design:type",Function)],n.prototype,"groupRowAggNodes",void 0),F([V(),N("design:type",Function)],n.prototype,"isGroupOpenByDefault",void 0),F([V(),N("design:type",Function)],n.prototype,"defaultGroupOrderComparator",void 0),F([V(),N("design:type",Function)],n.prototype,"processSecondaryColDef",void 0),F([V(),N("design:type",Function)],n.prototype,"processSecondaryColGroupDef",void 0),F([V(),N("design:type",Function)],n.prototype,"getDataPath",void 0),F([V(),N("design:type",Function)],n.prototype,"defaultGroupSortComparator",void 0),F([V(),N("design:type",Function)],n.prototype,"getChildCount",void 0),F([V(),N("design:type",Function)],n.prototype,"getServerSideStoreParams",void 0),F([V(),N("design:type",Function)],n.prototype,"isServerSideGroupOpenByDefault",void 0),F([V(),N("design:type",Function)],n.prototype,"isApplyServerSideTransaction",void 0),F([V(),N("design:type",Function)],n.prototype,"isServerSideGroup",void 0),F([V(),N("design:type",Function)],n.prototype,"getServerSideGroupKey",void 0),F([V(),N("design:type",Function)],n.prototype,"getBusinessKeyForNode",void 0),F([V(),N("design:type",Function)],n.prototype,"getRowNodeId",void 0),F([V(),N("design:type",Function)],n.prototype,"processRowPostCreate",void 0),F([V(),N("design:type",Function)],n.prototype,"isRowSelectable",void 0),F([V(),N("design:type",Function)],n.prototype,"isRowMaster",void 0),F([V(),N("design:type",Function)],n.prototype,"fillOperation",void 0),F([V(),N("design:type",Function)],n.prototype,"postSort",void 0),F([V(),N("design:type",Function)],n.prototype,"getRowStyle",void 0),F([V(),N("design:type",Function)],n.prototype,"getRowClass",void 0),F([V(),N("design:type",Function)],n.prototype,"getRowHeight",void 0),F([V(),N("design:type",Function)],n.prototype,"isFullWidthCell",void 0),F([_t(),N("design:type",we)],n.prototype,"toolPanelVisibleChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"pasteStart",void 0),F([_t(),N("design:type",we)],n.prototype,"pasteEnd",void 0),F([_t(),N("design:type",we)],n.prototype,"columnVisible",void 0),F([_t(),N("design:type",we)],n.prototype,"columnPinned",void 0),F([_t(),N("design:type",we)],n.prototype,"columnResized",void 0),F([_t(),N("design:type",we)],n.prototype,"columnMoved",void 0),F([_t(),N("design:type",we)],n.prototype,"columnValueChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"columnPivotModeChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"columnPivotChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"columnGroupOpened",void 0),F([_t(),N("design:type",we)],n.prototype,"newColumnsLoaded",void 0),F([_t(),N("design:type",we)],n.prototype,"gridColumnsChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"displayedColumnsChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"virtualColumnsChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"columnEverythingChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"componentStateChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"cellValueChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"rowValueChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"cellEditingStarted",void 0),F([_t(),N("design:type",we)],n.prototype,"cellEditingStopped",void 0),F([_t(),N("design:type",we)],n.prototype,"rowEditingStarted",void 0),F([_t(),N("design:type",we)],n.prototype,"rowEditingStopped",void 0),F([_t(),N("design:type",we)],n.prototype,"filterOpened",void 0),F([_t(),N("design:type",we)],n.prototype,"filterChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"filterModified",void 0),F([_t(),N("design:type",we)],n.prototype,"chartCreated",void 0),F([_t(),N("design:type",we)],n.prototype,"chartRangeSelectionChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"chartOptionsChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"chartDestroyed",void 0),F([_t(),N("design:type",we)],n.prototype,"cellKeyDown",void 0),F([_t(),N("design:type",we)],n.prototype,"cellKeyPress",void 0),F([_t(),N("design:type",we)],n.prototype,"gridReady",void 0),F([_t(),N("design:type",we)],n.prototype,"firstDataRendered",void 0),F([_t(),N("design:type",we)],n.prototype,"gridSizeChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"modelUpdated",void 0),F([_t(),N("design:type",we)],n.prototype,"virtualRowRemoved",void 0),F([_t(),N("design:type",we)],n.prototype,"viewportChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"bodyScroll",void 0),F([_t(),N("design:type",we)],n.prototype,"bodyScrollEnd",void 0),F([_t(),N("design:type",we)],n.prototype,"dragStarted",void 0),F([_t(),N("design:type",we)],n.prototype,"dragStopped",void 0),F([_t(),N("design:type",we)],n.prototype,"paginationChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"rowDragEnter",void 0),F([_t(),N("design:type",we)],n.prototype,"rowDragMove",void 0),F([_t(),N("design:type",we)],n.prototype,"rowDragLeave",void 0),F([_t(),N("design:type",we)],n.prototype,"rowDragEnd",void 0),F([_t(),N("design:type",we)],n.prototype,"columnRowGroupChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"rowGroupOpened",void 0),F([_t(),N("design:type",we)],n.prototype,"expandOrCollapseAll",void 0),F([_t(),N("design:type",we)],n.prototype,"pinnedRowDataChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"rowDataChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"rowDataUpdated",void 0),F([_t(),N("design:type",we)],n.prototype,"asyncTransactionsFlushed",void 0),F([_t(),N("design:type",we)],n.prototype,"cellClicked",void 0),F([_t(),N("design:type",we)],n.prototype,"cellDoubleClicked",void 0),F([_t(),N("design:type",we)],n.prototype,"cellFocused",void 0),F([_t(),N("design:type",we)],n.prototype,"cellMouseOver",void 0),F([_t(),N("design:type",we)],n.prototype,"cellMouseOut",void 0),F([_t(),N("design:type",we)],n.prototype,"cellMouseDown",void 0),F([_t(),N("design:type",we)],n.prototype,"rowClicked",void 0),F([_t(),N("design:type",we)],n.prototype,"rowDoubleClicked",void 0),F([_t(),N("design:type",we)],n.prototype,"rowSelected",void 0),F([_t(),N("design:type",we)],n.prototype,"selectionChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"cellContextMenu",void 0),F([_t(),N("design:type",we)],n.prototype,"rangeSelectionChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"sortChanged",void 0),F([_t(),N("design:type",we)],n.prototype,"columnRowGroupChangeRequest",void 0),F([_t(),N("design:type",we)],n.prototype,"columnPivotChangeRequest",void 0),F([_t(),N("design:type",we)],n.prototype,"columnValueChangeRequest",void 0),F([_t(),N("design:type",we)],n.prototype,"columnAggFuncChangeRequest",void 0),n=F([N("design:paramtypes",[fu,va,dT,fT,mc])],n)}(),Eh=pT=function(){function n(){G(this,n)}return j(n,null,[{key:"withComponents",value:function(t){return{ngModule:pT,providers:[{provide:og,useValue:t,multi:!0}]}}},{key:"forRoot",value:function(t){return{ngModule:pT,providers:[{provide:og,useValue:t,multi:!0}]}}}]),n}();Eh.\u0275fac=function(a){return new(a||Eh)},Eh.\u0275mod=mi({type:Eh}),Eh.\u0275inj=Go({imports:[[]]});var _z=function(){var n=function(){function a(){G(this,a)}return j(a,[{key:"ngOnInit",value:function(){}}]),a}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Kr({type:n,selectors:[["app-root"]],decls:17,vars:0,consts:[[1,"kujata-menu"],[1,"kujata-menu-item"],["routerLink","/field-scenes","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/field-op-codes","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/field-models","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/battle-models","routerLinkActive","active",1,"kujata-menu-item-text"],["routerLink","/sounds","routerLinkActive","active",1,"kujata-menu-item-text"]],template:function(t,r){1&t&&(s(0,"div",0),s(1,"div",1),s(2,"a",2),Pe(3,"Fields"),l(),l(),s(4,"div",1),s(5,"a",3),Pe(6,"Field Op Codes"),l(),l(),s(7,"div",1),s(8,"a",4),Pe(9,"Field Models"),l(),l(),s(10,"div",1),s(11,"a",5),Pe(12,"Battle Models"),l(),l(),s(13,"div",1),s(14,"a",6),Pe(15,"Sounds"),l(),l(),l(),c(16,"router-outlet"))},directives:[ks,YI,tT],styles:[".kujata-menu[_ngcontent-%COMP%]{background-color:silver;margin-bottom:4px;padding:4px;display:flex;flex-flow:row wrap;align-items:flex-start;align-content:flex-start;font-size:10pt}.kujata-menu-item[_ngcontent-%COMP%]{background-color:#fff;margin-right:4px;padding:4px}.kujata-menu-item-text[_ngcontent-%COMP%]{color:#404040;font-weight:700}"]}),n}(),ir={production:!0,KUJATA_DATA_BASE_URL:"https://kujata-data-dg.netlify.app/"};function Cz(n,a){1&n&&c(0,"img",12),2&n&&d("src",Fe(5).environment.KUJATA_DATA_BASE_URL+"/metadata/world-map/wm0.png",Ci)}function wz(n,a){1&n&&c(0,"img",12),2&n&&d("src","https://makou-reactor-bg-images.netlify.app/"+Fe().$implicit+".png",Ci)}function Sz(n,a){if(1&n&&(s(0,"a",8),s(1,"div",9),Pe(2),l(),s(3,"div",10),Pe(4),l(),gt(5,Cz,1,1,"img",11),gt(6,wz,1,1,"img",11),l()),2&n){var t=a.$implicit,r=Fe(4);d("routerLink","/scene-details/"+t),be(2),Qn(t),be(2),Qn(r.getMenuName(t)),be(1),d("ngIf",t.startsWith("wm")),be(1),d("ngIf",!t.startsWith("wm"))}}function Ez(n,a){if(1&n&&(s(0,"div",6),gt(1,Sz,7,5,"a",7),l()),2&n){var t=Fe().$implicit;be(1),d("ngForOf",t.fieldNames)}}function bz(n,a){if(1&n&&(s(0,"div",3),s(1,"div",4),Pe(2),l(),gt(3,Ez,2,1,"div",5),l()),2&n){var t=a.$implicit;be(2),Qn(t.name),be(1),d("ngIf","Missing"!=t.name)}}function xz(n,a){if(1&n&&(w(0),gt(1,bz,4,2,"div",2),x()),2&n){var t=Fe();be(1),d("ngForOf",t.chapters)}}var gS,rL=function(){var n=function(){function a(t){G(this,a),this.http=t,this.environment=ir,this.fetchStatus="NONE",this.sceneGraph=null,this.fieldIdToFieldMetadataMap=null,this.fieldNameToFieldMetadataMap=null,this.GRID_X=150,this.GRID_Y=75}return j(a,[{key:"createFieldNameToIdMap",value:function(r){this.fieldNameToIdMap={};for(var o=0;o<r.length;o++){var u=r[o];u&&u.length>0&&(this.fieldNameToIdMap[u]=o)}}},{key:"fieldNameToId",value:function(r){return this.fieldNameToIdMap[r]||-1}},{key:"fieldNameToMetadata",value:function(r){return this.fieldNameToFieldMetadataMap[r]}},{key:"getFieldMenuName",value:function(r){return""!==r.mapName?r.mapName:r.fieldName}},{key:"getMenuName",value:function(r){var o=this.fieldNameToMetadata(r);return this.getFieldMenuName(o)}},{key:"ngOnInit",value:function(){var r=this,o=ir.KUJATA_DATA_BASE_URL+"/data/field/flevel.lgp/maplist.json";this.http.get(o).subscribe(function(u){r.mapList=u,r.createFieldNameToIdMap(u),r.http.get(o=ir.KUJATA_DATA_BASE_URL+"/metadata/scene-graph.json").subscribe(function(f){r.sceneGraph=f,r.fieldIdToFieldMetadataMap={},r.fieldNameToFieldMetadataMap={};var v,h=Ft(r.sceneGraph.nodes);try{for(h.s();!(v=h.n()).done;){var g=v.value;r.fieldIdToFieldMetadataMap[g.id]=g,r.fieldNameToFieldMetadataMap[g.fieldName]=g}}catch(y){h.e(y)}finally{h.f()}console.log("this.fieldNameToFieldMetadataMap:",r.fieldNameToFieldMetadataMap),r.http.get(o=ir.KUJATA_DATA_BASE_URL+"/metadata/chapters.json").subscribe(function(y){r.chapters=y;for(var _={},C=65;C<r.mapList.length;C++){var S=r.mapList[C];S&&S.length>0&&(_[S]=!0)}var b,R=Ft(r.chapters);try{for(R.s();!(b=R.n()).done;){var D,T=Ft(b.value.fieldNames);try{for(T.s();!(D=T.n()).done;)_[D.value]=void 0}catch(P){T.e(P)}finally{T.f()}}}catch(P){R.e(P)}finally{R.f()}for(var O=r.chapters[r.chapters.length-3],L=0,H=Object.keys(_);L<H.length;L++){var z=H[L];null!=_[z]&&O.fieldNames.push(z)}})})},function(u){r.fetchStatus="ERROR"})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(hu))},n.\u0275cmp=Kr({type:n,selectors:[["field-scenes"]],decls:2,vars:1,consts:[[2,"background-color","#c0c0c0","padding","4px"],[4,"ngIf"],["class","chapter-container",4,"ngFor","ngForOf"],[1,"chapter-container"],[1,"chapter-name"],["class","field-cards-container",4,"ngIf"],[1,"field-cards-container"],["class","field-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"field-card",3,"routerLink"],[1,"field-name"],[1,"field-menu-name"],["class","field-image",3,"src",4,"ngIf"],[1,"field-image",3,"src"]],template:function(t,r){1&t&&(s(0,"div",0),gt(1,xz,2,1,"ng-container",1),l()),2&t&&(be(1),d("ngIf",r.chapters))},directives:[pu,Cc,ks],styles:[".chapter-container[_ngcontent-%COMP%]{background-color:#e0e0e0;margin-bottom:4px;padding:4px}.field-cards-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:flex-start;align-content:flex-start;font-size:10pt}.field-card[_ngcontent-%COMP%]{width:150px;height:180px;background-color:#f0f0f0;margin:4px 4px 0 0;text-align:center}.field-card[_ngcontent-%COMP%]:hover{background-color:#fff;text-decoration:none}.field-name[_ngcontent-%COMP%]{color:#404040;font-weight:700}.field-menu-name[_ngcontent-%COMP%]{color:gray;font-weight:700}.field-image[_ngcontent-%COMP%]{max-width:120px;max-height:120px;width:auto;height:auto}"]}),n}();function iL(n,a,t,r,o,u,f){try{var h=n[u](f),v=h.value}catch(g){return void t(g)}h.done?a(v):Promise.resolve(v).then(r,o)}var hT="148",ef=1e3,ya=1001,Ti=1003,Po=1006,xc=1008,tf=1009,nf=1014,Rc=1015,cy=1016,Dh=1020,$a=1023,rf=1026,Mh=1027,yT=33776,_T=33777,CT=33778,wT=33779,gL=35840,mL=35841,yL=35842,_L=35843,CL=37492,wL=37496,SL=37808,EL=37809,bL=37810,xL=37811,RL=37812,AL=37813,TL=37814,DL=37815,ML=37816,OL=37817,PL=37818,IL=37819,LL=37820,FL=37821,NL=36492,dy=2300,Oh=2301,Ph=2400,Ih=2401,of=3e3,Yn=3001,yu="srgb",fy="srgb-linear",xT=35044,Ac=function(){function n(){G(this,n)}return j(n,[{key:"addEventListener",value:function(t,r){void 0===this._listeners&&(this._listeners={});var o=this._listeners;void 0===o[t]&&(o[t]=[]),-1===o[t].indexOf(r)&&o[t].push(r)}},{key:"hasEventListener",value:function(t,r){if(void 0===this._listeners)return!1;var o=this._listeners;return void 0!==o[t]&&-1!==o[t].indexOf(r)}},{key:"removeEventListener",value:function(t,r){if(void 0!==this._listeners){var u=this._listeners[t];if(void 0!==u){var f=u.indexOf(r);-1!==f&&u.splice(f,1)}}}},{key:"dispatchEvent",value:function(t){if(void 0!==this._listeners){var o=this._listeners[t.type];if(void 0!==o){t.target=this;for(var u=o.slice(0),f=0,h=u.length;f<h;f++)u[f].call(this,t);t.target=null}}}}]),n}(),vo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],VL=1234567,Lh=Math.PI/180,py=180/Math.PI;function Xa(){var n=4294967295*Math.random()|0,a=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(vo[255&n]+vo[n>>8&255]+vo[n>>16&255]+vo[n>>24&255]+"-"+vo[255&a]+vo[a>>8&255]+"-"+vo[a>>16&15|64]+vo[a>>24&255]+"-"+vo[63&t|128]+vo[t>>8&255]+"-"+vo[t>>16&255]+vo[t>>24&255]+vo[255&r]+vo[r>>8&255]+vo[r>>16&255]+vo[r>>24&255]).toLowerCase()}function li(n,a,t){return Math.max(a,Math.min(t,n))}function AT(n,a){return(n%a+a)%a}function hy(n,a,t){return(1-t)*n+t*a}function TT(n){return 0==(n&n-1)&&0!==n}function WL(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function SS(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function ol(n,a){switch(a.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function pr(n,a){switch(a.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}var Gj=Object.freeze({__proto__:null,DEG2RAD:Lh,RAD2DEG:py,generateUUID:Xa,clamp:li,euclideanModulo:AT,mapLinear:function(n,a,t,r,o){return r+(n-a)*(o-r)/(t-a)},inverseLerp:function(n,a,t){return n!==a?(t-n)/(a-n):0},lerp:hy,damp:function(n,a,t,r){return hy(n,a,1-Math.exp(-t*r))},pingpong:function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return a-Math.abs(AT(n,2*a)-a)},smoothstep:function(n,a,t){return n<=a?0:n>=t?1:(n=(n-a)/(t-a))*n*(3-2*n)},smootherstep:function(n,a,t){return n<=a?0:n>=t?1:(n=(n-a)/(t-a))*n*n*(n*(6*n-15)+10)},randInt:function(n,a){return n+Math.floor(Math.random()*(a-n+1))},randFloat:function(n,a){return n+Math.random()*(a-n)},randFloatSpread:function(n){return n*(.5-Math.random())},seededRandom:function(n){void 0!==n&&(VL=n);var a=VL+=1831565813;return a=Math.imul(a^a>>>15,1|a),(((a^=a+Math.imul(a^a>>>7,61|a))^a>>>14)>>>0)/4294967296},degToRad:function(n){return n*Lh},radToDeg:function(n){return n*py},isPowerOfTwo:TT,ceilPowerOfTwo:WL,floorPowerOfTwo:SS,setQuaternionFromProperEuler:function(n,a,t,r,o){var u=Math.cos,f=Math.sin,h=u(t/2),v=f(t/2),g=u((a+r)/2),y=f((a+r)/2),_=u((a-r)/2),C=f((a-r)/2),S=u((r-a)/2),R=f((r-a)/2);switch(o){case"XYX":n.set(h*y,v*_,v*C,h*g);break;case"YZY":n.set(v*C,h*y,v*_,h*g);break;case"ZXZ":n.set(v*_,v*C,h*y,h*g);break;case"XZX":n.set(h*y,v*R,v*S,h*g);break;case"YXY":n.set(v*S,h*y,v*R,h*g);break;case"ZYZ":n.set(v*R,v*S,h*y,h*g);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}},normalize:pr,denormalize:ol}),Ke=function(n){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;G(this,a),a.prototype.isVector2=!0,this.x=t,this.y=r}return j(a,[{key:"width",get:function(){return this.x},set:function(r){this.x=r}},{key:"height",get:function(){return this.y},set:function(r){this.y=r}},{key:"set",value:function(r,o){return this.x=r,this.y=o,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setComponent",value:function(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this}},{key:"add",value:function(r){return this.x+=r.x,this.y+=r.y,this}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this}},{key:"addVectors",value:function(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this}},{key:"addScaledVector",value:function(r,o){return this.x+=r.x*o,this.y+=r.y*o,this}},{key:"sub",value:function(r){return this.x-=r.x,this.y-=r.y,this}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this}},{key:"subVectors",value:function(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this}},{key:"multiply",value:function(r){return this.x*=r.x,this.y*=r.y,this}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this}},{key:"divide",value:function(r){return this.x/=r.x,this.y/=r.y,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"applyMatrix3",value:function(r){var o=this.x,u=this.y,f=r.elements;return this.x=f[0]*o+f[3]*u+f[6],this.y=f[1]*o+f[4]*u+f[7],this}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this}},{key:"clamp",value:function(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this}},{key:"clampScalar",value:function(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this}},{key:"clampLength",value:function(r,o){var u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(r,Math.min(o,u)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y}},{key:"cross",value:function(r){return this.x*r.y-this.y*r.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(r){return Math.sqrt(this.distanceToSquared(r))}},{key:"distanceToSquared",value:function(r){var o=this.x-r.x,u=this.y-r.y;return o*o+u*u}},{key:"manhattanDistanceTo",value:function(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this}},{key:"lerpVectors",value:function(r,o,u){return this.x=r.x+(o.x-r.x)*u,this.y=r.y+(o.y-r.y)*u,this}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y}},{key:"fromArray",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[o],this.y=r[o+1],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[o]=this.x,r[o+1]=this.y,r}},{key:"fromBufferAttribute",value:function(r,o){return this.x=r.getX(o),this.y=r.getY(o),this}},{key:"rotateAround",value:function(r,o){var u=Math.cos(o),f=Math.sin(o),h=this.x-r.x,v=this.y-r.y;return this.x=h*u-v*f+r.x,this.y=h*f+v*u+r.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:vi.mark(function t(){return vi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.x;case 2:return o.next=4,this.y;case 4:case"end":return o.stop()}},t,this)})}]),a}(),Gs=function(){function n(){G(this,n),n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return j(n,[{key:"set",value:function(t,r,o,u,f,h,v,g,y){var _=this.elements;return _[0]=t,_[1]=u,_[2]=v,_[3]=r,_[4]=f,_[5]=g,_[6]=o,_[7]=h,_[8]=y,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(t){var r=this.elements,o=t.elements;return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],this}},{key:"extractBasis",value:function(t,r,o){return t.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),o.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(t){var r=t.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,r){var o=t.elements,u=r.elements,f=this.elements,h=o[0],v=o[3],g=o[6],y=o[1],_=o[4],C=o[7],S=o[2],R=o[5],b=o[8],E=u[0],T=u[3],D=u[6],M=u[1],O=u[4],L=u[7],H=u[2],z=u[5],P=u[8];return f[0]=h*E+v*M+g*H,f[3]=h*T+v*O+g*z,f[6]=h*D+v*L+g*P,f[1]=y*E+_*M+C*H,f[4]=y*T+_*O+C*z,f[7]=y*D+_*L+C*P,f[2]=S*E+R*M+b*H,f[5]=S*T+R*O+b*z,f[8]=S*D+R*L+b*P,this}},{key:"multiplyScalar",value:function(t){var r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this}},{key:"determinant",value:function(){var t=this.elements,r=t[0],o=t[1],u=t[2],f=t[3],h=t[4],v=t[5],g=t[6],y=t[7],_=t[8];return r*h*_-r*v*y-o*f*_+o*v*g+u*f*y-u*h*g}},{key:"invert",value:function(){var t=this.elements,r=t[0],o=t[1],u=t[2],f=t[3],h=t[4],v=t[5],g=t[6],y=t[7],_=t[8],C=_*h-v*y,S=v*g-_*f,R=y*f-h*g,b=r*C+o*S+u*R;if(0===b)return this.set(0,0,0,0,0,0,0,0,0);var E=1/b;return t[0]=C*E,t[1]=(u*y-_*o)*E,t[2]=(v*o-u*h)*E,t[3]=S*E,t[4]=(_*r-u*g)*E,t[5]=(u*f-v*r)*E,t[6]=R*E,t[7]=(o*g-y*r)*E,t[8]=(h*r-o*f)*E,this}},{key:"transpose",value:function(){var t,r=this.elements;return t=r[1],r[1]=r[3],r[3]=t,t=r[2],r[2]=r[6],r[6]=t,t=r[5],r[5]=r[7],r[7]=t,this}},{key:"getNormalMatrix",value:function(t){return this.setFromMatrix4(t).invert().transpose()}},{key:"transposeIntoArray",value:function(t){var r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this}},{key:"setUvTransform",value:function(t,r,o,u,f,h,v){var g=Math.cos(f),y=Math.sin(f);return this.set(o*g,o*y,-o*(g*h+y*v)+h+t,-u*y,u*g,-u*(-y*h+g*v)+v+r,0,0,1),this}},{key:"scale",value:function(t,r){return this.premultiply(DT.makeScale(t,r)),this}},{key:"rotate",value:function(t){return this.premultiply(DT.makeRotation(-t)),this}},{key:"translate",value:function(t,r){return this.premultiply(DT.makeTranslation(t,r)),this}},{key:"makeTranslation",value:function(t,r){return this.set(1,0,t,0,1,r,0,0,1),this}},{key:"makeRotation",value:function(t){var r=Math.cos(t),o=Math.sin(t);return this.set(r,-o,0,o,r,0,0,0,1),this}},{key:"makeScale",value:function(t,r){return this.set(t,0,0,0,r,0,0,0,1),this}},{key:"equals",value:function(t){for(var r=this.elements,o=t.elements,u=0;u<9;u++)if(r[u]!==o[u])return!1;return!0}},{key:"fromArray",value:function(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=0;o<9;o++)this.elements[o]=t[o+r];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.elements;return t[r]=o[0],t[r+1]=o[1],t[r+2]=o[2],t[r+3]=o[3],t[r+4]=o[4],t[r+5]=o[5],t[r+6]=o[6],t[r+7]=o[7],t[r+8]=o[8],t}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),n}(),DT=new Gs;function UL(n){for(var a=n.length-1;a>=0;--a)if(n[a]>=65535)return!0;return!1}function vy(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function af(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function ES(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;var MT=(En(gS={},yu,En({},fy,af)),En(gS,fy,En({},yu,ES)),gS),Io={legacyMode:!0,get workingColorSpace(){return fy},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(a,t,r){if(this.legacyMode||t===r||!t||!r)return a;if(MT[t]&&void 0!==MT[t][r]){var o=MT[t][r];return a.r=o(a.r),a.g=o(a.g),a.b=o(a.b),a}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(a,t){return this.convert(a,this.workingColorSpace,t)},toWorkingColorSpace:function(a,t){return this.convert(a,t,this.workingColorSpace)}},zL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Di={r:0,g:0,b:0},Bs={h:0,s:0,l:0},bS={h:0,s:0,l:0};function OT(n,a,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(a-n)*t:t<.5?a:t<2/3?n+6*(a-n)*(2/3-t):n}function xS(n,a){return a.r=n.r,a.g=n.g,a.b=n.b,a}var Fh,un=function(){var n=function(a){function t(r,o,u){return G(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===o&&void 0===u?this.set(r):this.setRGB(r,o,u)}return j(t,[{key:"set",value:function(o){return o&&o.isColor?this.copy(o):"number"==typeof o?this.setHex(o):"string"==typeof o&&this.setStyle(o),this}},{key:"setScalar",value:function(o){return this.r=o,this.g=o,this.b=o,this}},{key:"setHex",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yu;return o=Math.floor(o),this.r=(o>>16&255)/255,this.g=(o>>8&255)/255,this.b=(255&o)/255,Io.toWorkingColorSpace(this,u),this}},{key:"setRGB",value:function(o,u,f){var h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Io.workingColorSpace;return this.r=o,this.g=u,this.b=f,Io.toWorkingColorSpace(this,h),this}},{key:"setHSL",value:function(o,u,f){var h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Io.workingColorSpace;if(o=AT(o,1),u=li(u,0,1),f=li(f,0,1),0===u)this.r=this.g=this.b=f;else{var v=f<=.5?f*(1+u):f+u-f*u,g=2*f-v;this.r=OT(g,v,o+1/3),this.g=OT(g,v,o),this.b=OT(g,v,o-1/3)}return Io.toWorkingColorSpace(this,h),this}},{key:"setStyle",value:function(o){var h,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yu;function f(E){void 0!==E&&parseFloat(E)<1&&console.warn("THREE.Color: Alpha component of "+o+" will be ignored.")}if(h=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(o)){var v,g=h[1],y=h[2];switch(g){case"rgb":case"rgba":if(v=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y))return this.r=Math.min(255,parseInt(v[1],10))/255,this.g=Math.min(255,parseInt(v[2],10))/255,this.b=Math.min(255,parseInt(v[3],10))/255,Io.toWorkingColorSpace(this,u),f(v[4]),this;if(v=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y))return this.r=Math.min(100,parseInt(v[1],10))/100,this.g=Math.min(100,parseInt(v[2],10))/100,this.b=Math.min(100,parseInt(v[3],10))/100,Io.toWorkingColorSpace(this,u),f(v[4]),this;break;case"hsl":case"hsla":if(v=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(y)){var _=parseFloat(v[1])/360,C=parseFloat(v[2])/100,S=parseFloat(v[3])/100;return f(v[4]),this.setHSL(_,C,S,u)}}}else if(h=/^\#([A-Fa-f\d]+)$/.exec(o)){var R=h[1],b=R.length;if(3===b)return this.r=parseInt(R.charAt(0)+R.charAt(0),16)/255,this.g=parseInt(R.charAt(1)+R.charAt(1),16)/255,this.b=parseInt(R.charAt(2)+R.charAt(2),16)/255,Io.toWorkingColorSpace(this,u),this;if(6===b)return this.r=parseInt(R.charAt(0)+R.charAt(1),16)/255,this.g=parseInt(R.charAt(2)+R.charAt(3),16)/255,this.b=parseInt(R.charAt(4)+R.charAt(5),16)/255,Io.toWorkingColorSpace(this,u),this}return o&&o.length>0?this.setColorName(o,u):this}},{key:"setColorName",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yu,f=zL[o.toLowerCase()];return void 0!==f?this.setHex(f,u):console.warn("THREE.Color: Unknown color "+o),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(o){return this.r=o.r,this.g=o.g,this.b=o.b,this}},{key:"copySRGBToLinear",value:function(o){return this.r=af(o.r),this.g=af(o.g),this.b=af(o.b),this}},{key:"copyLinearToSRGB",value:function(o){return this.r=ES(o.r),this.g=ES(o.g),this.b=ES(o.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yu;return Io.fromWorkingColorSpace(xS(this,Di),o),li(255*Di.r,0,255)<<16^li(255*Di.g,0,255)<<8^li(255*Di.b,0,255)<<0}},{key:"getHexString",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yu;return("000000"+this.getHex(o).toString(16)).slice(-6)}},{key:"getHSL",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Io.workingColorSpace;Io.fromWorkingColorSpace(xS(this,Di),u);var _,C,f=Di.r,h=Di.g,v=Di.b,g=Math.max(f,h,v),y=Math.min(f,h,v),S=(y+g)/2;if(y===g)_=0,C=0;else{var R=g-y;switch(C=S<=.5?R/(g+y):R/(2-g-y),g){case f:_=(h-v)/R+(h<v?6:0);break;case h:_=(v-f)/R+2;break;case v:_=(f-h)/R+4}_/=6}return o.h=_,o.s=C,o.l=S,o}},{key:"getRGB",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Io.workingColorSpace;return Io.fromWorkingColorSpace(xS(this,Di),u),o.r=Di.r,o.g=Di.g,o.b=Di.b,o}},{key:"getStyle",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yu;return Io.fromWorkingColorSpace(xS(this,Di),o),o!==yu?"color(".concat(o," ").concat(Di.r," ").concat(Di.g," ").concat(Di.b,")"):"rgb(".concat(255*Di.r|0,",").concat(255*Di.g|0,",").concat(255*Di.b|0,")")}},{key:"offsetHSL",value:function(o,u,f){return this.getHSL(Bs),Bs.h+=o,Bs.s+=u,Bs.l+=f,this.setHSL(Bs.h,Bs.s,Bs.l),this}},{key:"add",value:function(o){return this.r+=o.r,this.g+=o.g,this.b+=o.b,this}},{key:"addColors",value:function(o,u){return this.r=o.r+u.r,this.g=o.g+u.g,this.b=o.b+u.b,this}},{key:"addScalar",value:function(o){return this.r+=o,this.g+=o,this.b+=o,this}},{key:"sub",value:function(o){return this.r=Math.max(0,this.r-o.r),this.g=Math.max(0,this.g-o.g),this.b=Math.max(0,this.b-o.b),this}},{key:"multiply",value:function(o){return this.r*=o.r,this.g*=o.g,this.b*=o.b,this}},{key:"multiplyScalar",value:function(o){return this.r*=o,this.g*=o,this.b*=o,this}},{key:"lerp",value:function(o,u){return this.r+=(o.r-this.r)*u,this.g+=(o.g-this.g)*u,this.b+=(o.b-this.b)*u,this}},{key:"lerpColors",value:function(o,u,f){return this.r=o.r+(u.r-o.r)*f,this.g=o.g+(u.g-o.g)*f,this.b=o.b+(u.b-o.b)*f,this}},{key:"lerpHSL",value:function(o,u){this.getHSL(Bs),o.getHSL(bS);var f=hy(Bs.h,bS.h,u),h=hy(Bs.s,bS.s,u),v=hy(Bs.l,bS.l,u);return this.setHSL(f,h,v),this}},{key:"equals",value:function(o){return o.r===this.r&&o.g===this.g&&o.b===this.b}},{key:"fromArray",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=o[u],this.g=o[u+1],this.b=o[u+2],this}},{key:"toArray",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o[u]=this.r,o[u+1]=this.g,o[u+2]=this.b,o}},{key:"fromBufferAttribute",value:function(o,u){return this.r=o.getX(u),this.g=o.getY(u),this.b=o.getZ(u),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:vi.mark(function r(){return vi.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.r;case 2:return u.next=4,this.g;case 4:return u.next=6,this.b;case 6:case"end":return u.stop()}},r,this)})}]),t}();return n.NAMES=zL,n}(),jL=function(){function n(){G(this,n)}return j(n,null,[{key:"getDataURL",value:function(t){if(/^data:/i.test(t.src)||"undefined"==typeof HTMLCanvasElement)return t.src;var r;if(t instanceof HTMLCanvasElement)r=t;else{void 0===Fh&&(Fh=vy("canvas")),Fh.width=t.width,Fh.height=t.height;var o=Fh.getContext("2d");t instanceof ImageData?o.putImageData(t,0,0):o.drawImage(t,0,0,t.width,t.height),r=Fh}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var r=vy("canvas");r.width=t.width,r.height=t.height;var o=r.getContext("2d");o.drawImage(t,0,0,t.width,t.height);for(var u=o.getImageData(0,0,t.width,t.height),f=u.data,h=0;h<f.length;h++)f[h]=255*af(f[h]/255);return o.putImageData(u,0,0),r}if(t.data){for(var v=t.data.slice(0),g=0;g<v.length;g++)v[g]=v instanceof Uint8Array||v instanceof Uint8ClampedArray?Math.floor(255*af(v[g]/255)):af(v[g]);return{data:v,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}]),n}(),qL=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;G(this,n),this.isSource=!0,this.uuid=Xa(),this.data=a,this.version=0}return j(n,[{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"toJSON",value:function(t){var r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.images[this.uuid])return t.images[this.uuid];var o={uuid:this.uuid,url:""},u=this.data;if(null!==u){var f;if(Array.isArray(u)){f=[];for(var h=0,v=u.length;h<v;h++)f.push(PT(u[h].isDataTexture?u[h].image:u[h]))}else f=PT(u);o.url=f}return r||(t.images[this.uuid]=o),o}}]),n}();function PT(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?jL.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Hj=0,_u=function(){var n=function(a){pe(r,a);var t=ve(r);function r(){var o,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.DEFAULT_IMAGE,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.DEFAULT_MAPPING,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ya,v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ya,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Po,y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:xc,_=arguments.length>6&&void 0!==arguments[6]?arguments[6]:$a,C=arguments.length>7&&void 0!==arguments[7]?arguments[7]:tf,S=arguments.length>8&&void 0!==arguments[8]?arguments[8]:r.DEFAULT_ANISOTROPY,R=arguments.length>9&&void 0!==arguments[9]?arguments[9]:of;return G(this,r),(o=t.call(this)).isTexture=!0,Object.defineProperty(Xn(o),"id",{value:Hj++}),o.uuid=Xa(),o.name="",o.source=new qL(u),o.mipmaps=[],o.mapping=f,o.wrapS=h,o.wrapT=v,o.magFilter=g,o.minFilter=y,o.anisotropy=S,o.format=_,o.internalFormat=null,o.type=C,o.offset=new Ke(0,0),o.repeat=new Ke(1,1),o.center=new Ke(0,0),o.rotation=0,o.matrixAutoUpdate=!0,o.matrix=new Gs,o.generateMipmaps=!0,o.premultiplyAlpha=!1,o.flipY=!0,o.unpackAlignment=4,o.encoding=R,o.userData={},o.version=0,o.onUpdate=null,o.isRenderTargetTexture=!1,o.needsPMREMUpdate=!1,o}return j(r,[{key:"image",get:function(){return this.source.data},set:function(u){this.source.data=u}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(u){return this.name=u.name,this.source=u.source,this.mipmaps=u.mipmaps.slice(0),this.mapping=u.mapping,this.wrapS=u.wrapS,this.wrapT=u.wrapT,this.magFilter=u.magFilter,this.minFilter=u.minFilter,this.anisotropy=u.anisotropy,this.format=u.format,this.internalFormat=u.internalFormat,this.type=u.type,this.offset.copy(u.offset),this.repeat.copy(u.repeat),this.center.copy(u.center),this.rotation=u.rotation,this.matrixAutoUpdate=u.matrixAutoUpdate,this.matrix.copy(u.matrix),this.generateMipmaps=u.generateMipmaps,this.premultiplyAlpha=u.premultiplyAlpha,this.flipY=u.flipY,this.unpackAlignment=u.unpackAlignment,this.encoding=u.encoding,this.userData=JSON.parse(JSON.stringify(u.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(u){var f=void 0===u||"string"==typeof u;if(!f&&void 0!==u.textures[this.uuid])return u.textures[this.uuid];var h={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(u).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(h.userData=this.userData),f||(u.textures[this.uuid]=h),h}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(u){if(300!==this.mapping)return u;if(u.applyMatrix3(this.matrix),u.x<0||u.x>1)switch(this.wrapS){case ef:u.x=u.x-Math.floor(u.x);break;case ya:u.x=u.x<0?0:1;break;case 1002:u.x=1===Math.abs(Math.floor(u.x)%2)?Math.ceil(u.x)-u.x:u.x-Math.floor(u.x)}if(u.y<0||u.y>1)switch(this.wrapT){case ef:u.y=u.y-Math.floor(u.y);break;case ya:u.y=u.y<0?0:1;break;case 1002:u.y=1===Math.abs(Math.floor(u.y)%2)?Math.ceil(u.y)-u.y:u.y-Math.floor(u.y)}return this.flipY&&(u.y=1-u.y),u}},{key:"needsUpdate",set:function(u){!0===u&&(this.version++,this.source.needsUpdate=!0)}}]),r}(Ac);return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n}(),Cr=function(n){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;G(this,a),a.prototype.isVector4=!0,this.x=t,this.y=r,this.z=o,this.w=u}return j(a,[{key:"width",get:function(){return this.z},set:function(r){this.z=r}},{key:"height",get:function(){return this.w},set:function(r){this.w=r}},{key:"set",value:function(r,o,u,f){return this.x=r,this.y=o,this.z=u,this.w=f,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this.z=r,this.w=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setZ",value:function(r){return this.z=r,this}},{key:"setW",value:function(r){return this.w=r,this}},{key:"setComponent",value:function(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=void 0!==r.w?r.w:1,this}},{key:"add",value:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this}},{key:"addVectors",value:function(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this.z=r.z+o.z,this.w=r.w+o.w,this}},{key:"addScaledVector",value:function(r,o){return this.x+=r.x*o,this.y+=r.y*o,this.z+=r.z*o,this.w+=r.w*o,this}},{key:"sub",value:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this}},{key:"subVectors",value:function(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this.z=r.z-o.z,this.w=r.w-o.w,this}},{key:"multiply",value:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this.w*=r.w,this}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this}},{key:"applyMatrix4",value:function(r){var o=this.x,u=this.y,f=this.z,h=this.w,v=r.elements;return this.x=v[0]*o+v[4]*u+v[8]*f+v[12]*h,this.y=v[1]*o+v[5]*u+v[9]*f+v[13]*h,this.z=v[2]*o+v[6]*u+v[10]*f+v[14]*h,this.w=v[3]*o+v[7]*u+v[11]*f+v[15]*h,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"setAxisAngleFromQuaternion",value:function(r){this.w=2*Math.acos(r.w);var o=Math.sqrt(1-r.w*r.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=r.x/o,this.y=r.y/o,this.z=r.z/o),this}},{key:"setAxisAngleFromRotationMatrix",value:function(r){var o,u,f,h,v=.01,g=.1,y=r.elements,_=y[0],C=y[4],S=y[8],R=y[1],b=y[5],E=y[9],T=y[2],D=y[6],M=y[10];if(Math.abs(C-R)<v&&Math.abs(S-T)<v&&Math.abs(E-D)<v){if(Math.abs(C+R)<g&&Math.abs(S+T)<g&&Math.abs(E+D)<g&&Math.abs(_+b+M-3)<g)return this.set(1,0,0,0),this;o=Math.PI;var O=(_+1)/2,L=(b+1)/2,H=(M+1)/2,z=(C+R)/4,P=(S+T)/4,W=(E+D)/4;return O>L&&O>H?O<v?(u=0,f=.707106781,h=.707106781):(f=z/(u=Math.sqrt(O)),h=P/u):L>H?L<v?(u=.707106781,f=0,h=.707106781):(u=z/(f=Math.sqrt(L)),h=W/f):H<v?(u=.707106781,f=.707106781,h=0):(u=P/(h=Math.sqrt(H)),f=W/h),this.set(u,f,h,o),this}var X=Math.sqrt((D-E)*(D-E)+(S-T)*(S-T)+(R-C)*(R-C));return Math.abs(X)<.001&&(X=1),this.x=(D-E)/X,this.y=(S-T)/X,this.z=(R-C)/X,this.w=Math.acos((_+b+M-1)/2),this}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this.w=Math.min(this.w,r.w),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this.w=Math.max(this.w,r.w),this}},{key:"clamp",value:function(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this.z=Math.max(r.z,Math.min(o.z,this.z)),this.w=Math.max(r.w,Math.min(o.w,this.w)),this}},{key:"clampScalar",value:function(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this.z=Math.max(r,Math.min(o,this.z)),this.w=Math.max(r,Math.min(o,this.w)),this}},{key:"clampLength",value:function(r,o){var u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(r,Math.min(o,u)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this.z+=(r.z-this.z)*o,this.w+=(r.w-this.w)*o,this}},{key:"lerpVectors",value:function(r,o,u){return this.x=r.x+(o.x-r.x)*u,this.y=r.y+(o.y-r.y)*u,this.z=r.z+(o.z-r.z)*u,this.w=r.w+(o.w-r.w)*u,this}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w}},{key:"fromArray",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[o],this.y=r[o+1],this.z=r[o+2],this.w=r[o+3],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[o]=this.x,r[o+1]=this.y,r[o+2]=this.z,r[o+3]=this.w,r}},{key:"fromBufferAttribute",value:function(r,o){return this.x=r.getX(o),this.y=r.getY(o),this.z=r.getZ(o),this.w=r.getW(o),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:vi.mark(function t(){return vi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.x;case 2:return o.next=4,this.y;case 4:return o.next=6,this.z;case 6:return o.next=8,this.w;case 8:case"end":return o.stop()}},t,this)})}]),a}(),sf=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};G(this,t),(r=a.call(this)).isWebGLRenderTarget=!0,r.width=o,r.height=u,r.depth=1,r.scissor=new Cr(0,0,o,u),r.scissorTest=!1,r.viewport=new Cr(0,0,o,u);var h={width:o,height:u,depth:1};return r.texture=new _u(h,f.mapping,f.wrapS,f.wrapT,f.magFilter,f.minFilter,f.format,f.type,f.anisotropy,f.encoding),r.texture.isRenderTargetTexture=!0,r.texture.flipY=!1,r.texture.generateMipmaps=void 0!==f.generateMipmaps&&f.generateMipmaps,r.texture.internalFormat=void 0!==f.internalFormat?f.internalFormat:null,r.texture.minFilter=void 0!==f.minFilter?f.minFilter:Po,r.depthBuffer=void 0===f.depthBuffer||f.depthBuffer,r.stencilBuffer=void 0!==f.stencilBuffer&&f.stencilBuffer,r.depthTexture=void 0!==f.depthTexture?f.depthTexture:null,r.samples=void 0!==f.samples?f.samples:0,r}return j(t,[{key:"setSize",value:function(o,u){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(this.width!==o||this.height!==u||this.depth!==f)&&(this.width=o,this.height=u,this.depth=f,this.texture.image.width=o,this.texture.image.height=u,this.texture.image.depth=f,this.dispose()),this.viewport.set(0,0,o,u),this.scissor.set(0,0,o,u)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(o){this.width=o.width,this.height=o.height,this.depth=o.depth,this.viewport.copy(o.viewport),this.texture=o.texture.clone(),this.texture.isRenderTargetTexture=!0;var u=Object.assign({},o.texture.image);return this.texture.source=new qL(u),this.depthBuffer=o.depthBuffer,this.stencilBuffer=o.stencilBuffer,null!==o.depthTexture&&(this.depthTexture=o.depthTexture.clone()),this.samples=o.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),t}(Ac),YL=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return G(this,t),(r=a.call(this,null)).isDataArrayTexture=!0,r.image={data:o,width:u,height:f,depth:h},r.magFilter=Ti,r.minFilter=Ti,r.wrapR=ya,r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r}return t}(_u),Vj=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return G(this,t),(r=a.call(this,null)).isData3DTexture=!0,r.image={data:o,width:u,height:f,depth:h},r.magFilter=Ti,r.minFilter=Ti,r.wrapR=ya,r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r}return t}(_u),eo=function(n){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;G(this,a),this.isQuaternion=!0,this._x=t,this._y=r,this._z=o,this._w=u}return j(a,[{key:"x",get:function(){return this._x},set:function(r){this._x=r,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(r){this._y=r,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(r){this._z=r,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(r){this._w=r,this._onChangeCallback()}},{key:"set",value:function(r,o,u,f){return this._x=r,this._y=o,this._z=u,this._w=f,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(r){return this._x=r.x,this._y=r.y,this._z=r.z,this._w=r.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(r,o){var u=r._x,f=r._y,h=r._z,v=r._order,g=Math.cos,y=Math.sin,_=g(u/2),C=g(f/2),S=g(h/2),R=y(u/2),b=y(f/2),E=y(h/2);switch(v){case"XYZ":this._x=R*C*S+_*b*E,this._y=_*b*S-R*C*E,this._z=_*C*E+R*b*S,this._w=_*C*S-R*b*E;break;case"YXZ":this._x=R*C*S+_*b*E,this._y=_*b*S-R*C*E,this._z=_*C*E-R*b*S,this._w=_*C*S+R*b*E;break;case"ZXY":this._x=R*C*S-_*b*E,this._y=_*b*S+R*C*E,this._z=_*C*E+R*b*S,this._w=_*C*S-R*b*E;break;case"ZYX":this._x=R*C*S-_*b*E,this._y=_*b*S+R*C*E,this._z=_*C*E-R*b*S,this._w=_*C*S+R*b*E;break;case"YZX":this._x=R*C*S+_*b*E,this._y=_*b*S+R*C*E,this._z=_*C*E-R*b*S,this._w=_*C*S-R*b*E;break;case"XZY":this._x=R*C*S-_*b*E,this._y=_*b*S-R*C*E,this._z=_*C*E+R*b*S,this._w=_*C*S+R*b*E;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+v)}return!1!==o&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(r,o){var u=o/2,f=Math.sin(u);return this._x=r.x*f,this._y=r.y*f,this._z=r.z*f,this._w=Math.cos(u),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(r){var o=r.elements,u=o[0],f=o[4],h=o[8],v=o[1],g=o[5],y=o[9],_=o[2],C=o[6],S=o[10],R=u+g+S;if(R>0){var b=.5/Math.sqrt(R+1);this._w=.25/b,this._x=(C-y)*b,this._y=(h-_)*b,this._z=(v-f)*b}else if(u>g&&u>S){var E=2*Math.sqrt(1+u-g-S);this._w=(C-y)/E,this._x=.25*E,this._y=(f+v)/E,this._z=(h+_)/E}else if(g>S){var T=2*Math.sqrt(1+g-u-S);this._w=(h-_)/T,this._x=(f+v)/T,this._y=.25*T,this._z=(y+C)/T}else{var D=2*Math.sqrt(1+S-u-g);this._w=(v-f)/D,this._x=(h+_)/D,this._y=(y+C)/D,this._z=.25*D}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(r,o){var u=r.dot(o)+1;return u<Number.EPSILON?(u=0,Math.abs(r.x)>Math.abs(r.z)?(this._x=-r.y,this._y=r.x,this._z=0,this._w=u):(this._x=0,this._y=-r.z,this._z=r.y,this._w=u)):(this._x=r.y*o.z-r.z*o.y,this._y=r.z*o.x-r.x*o.z,this._z=r.x*o.y-r.y*o.x,this._w=u),this.normalize()}},{key:"angleTo",value:function(r){return 2*Math.acos(Math.abs(li(this.dot(r),-1,1)))}},{key:"rotateTowards",value:function(r,o){var u=this.angleTo(r);if(0===u)return this;var f=Math.min(1,o/u);return this.slerp(r,f),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var r=this.length();return 0===r?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(r=1/r),this._y=this._y*r,this._z=this._z*r,this._w=this._w*r),this._onChangeCallback(),this}},{key:"multiply",value:function(r){return this.multiplyQuaternions(this,r)}},{key:"premultiply",value:function(r){return this.multiplyQuaternions(r,this)}},{key:"multiplyQuaternions",value:function(r,o){var u=r._x,f=r._y,h=r._z,v=r._w,g=o._x,y=o._y,_=o._z,C=o._w;return this._x=u*C+v*g+f*_-h*y,this._y=f*C+v*y+h*g-u*_,this._z=h*C+v*_+u*y-f*g,this._w=v*C-u*g-f*y-h*_,this._onChangeCallback(),this}},{key:"slerp",value:function(r,o){if(0===o)return this;if(1===o)return this.copy(r);var u=this._x,f=this._y,h=this._z,v=this._w,g=v*r._w+u*r._x+f*r._y+h*r._z;if(g<0?(this._w=-r._w,this._x=-r._x,this._y=-r._y,this._z=-r._z,g=-g):this.copy(r),g>=1)return this._w=v,this._x=u,this._y=f,this._z=h,this;var y=1-g*g;if(y<=Number.EPSILON){var _=1-o;return this._w=_*v+o*this._w,this._x=_*u+o*this._x,this._y=_*f+o*this._y,this._z=_*h+o*this._z,this.normalize(),this._onChangeCallback(),this}var C=Math.sqrt(y),S=Math.atan2(C,g),R=Math.sin((1-o)*S)/C,b=Math.sin(o*S)/C;return this._w=v*R+this._w*b,this._x=u*R+this._x*b,this._y=f*R+this._y*b,this._z=h*R+this._z*b,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(r,o,u){return this.copy(r).slerp(o,u)}},{key:"random",value:function(){var r=Math.random(),o=Math.sqrt(1-r),u=Math.sqrt(r),f=2*Math.PI*Math.random(),h=2*Math.PI*Math.random();return this.set(o*Math.cos(f),u*Math.sin(h),u*Math.cos(h),o*Math.sin(f))}},{key:"equals",value:function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w}},{key:"fromArray",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=r[o],this._y=r[o+1],this._z=r[o+2],this._w=r[o+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[o]=this._x,r[o+1]=this._y,r[o+2]=this._z,r[o+3]=this._w,r}},{key:"fromBufferAttribute",value:function(r,o){return this._x=r.getX(o),this._y=r.getY(o),this._z=r.getZ(o),this._w=r.getW(o),this}},{key:"_onChange",value:function(r){return this._onChangeCallback=r,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:vi.mark(function t(){return vi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this._x;case 2:return o.next=4,this._y;case 4:return o.next=6,this._z;case 6:return o.next=8,this._w;case 8:case"end":return o.stop()}},t,this)})}],[{key:"slerpFlat",value:function(r,o,u,f,h,v,g){var y=u[f+0],_=u[f+1],C=u[f+2],S=u[f+3],R=h[v+0],b=h[v+1],E=h[v+2],T=h[v+3];if(0===g)return r[o+0]=y,r[o+1]=_,r[o+2]=C,void(r[o+3]=S);if(1===g)return r[o+0]=R,r[o+1]=b,r[o+2]=E,void(r[o+3]=T);if(S!==T||y!==R||_!==b||C!==E){var D=1-g,M=y*R+_*b+C*E+S*T,O=M>=0?1:-1,L=1-M*M;if(L>Number.EPSILON){var H=Math.sqrt(L),z=Math.atan2(H,M*O);D=Math.sin(D*z)/H,g=Math.sin(g*z)/H}var P=g*O;if(y=y*D+R*P,_=_*D+b*P,C=C*D+E*P,S=S*D+T*P,D===1-g){var W=1/Math.sqrt(y*y+_*_+C*C+S*S);y*=W,_*=W,C*=W,S*=W}}r[o]=y,r[o+1]=_,r[o+2]=C,r[o+3]=S}},{key:"multiplyQuaternionsFlat",value:function(r,o,u,f,h,v){var g=u[f],y=u[f+1],_=u[f+2],C=u[f+3],S=h[v],R=h[v+1],b=h[v+2],E=h[v+3];return r[o]=g*E+C*S+y*b-_*R,r[o+1]=y*E+C*R+_*S-g*b,r[o+2]=_*E+C*b+g*R-y*S,r[o+3]=C*E-g*S-y*R-_*b,r}}]),a}(),J=function(n){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;G(this,a),a.prototype.isVector3=!0,this.x=t,this.y=r,this.z=o}return j(a,[{key:"set",value:function(r,o,u){return void 0===u&&(u=this.z),this.x=r,this.y=o,this.z=u,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this.z=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setZ",value:function(r){return this.z=r,this}},{key:"setComponent",value:function(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this}},{key:"add",value:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z,this}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this.z+=r,this}},{key:"addVectors",value:function(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this.z=r.z+o.z,this}},{key:"addScaledVector",value:function(r,o){return this.x+=r.x*o,this.y+=r.y*o,this.z+=r.z*o,this}},{key:"sub",value:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z,this}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this.z-=r,this}},{key:"subVectors",value:function(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this.z=r.z-o.z,this}},{key:"multiply",value:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this.z*=r,this}},{key:"multiplyVectors",value:function(r,o){return this.x=r.x*o.x,this.y=r.y*o.y,this.z=r.z*o.z,this}},{key:"applyEuler",value:function(r){return this.applyQuaternion(KL.setFromEuler(r))}},{key:"applyAxisAngle",value:function(r,o){return this.applyQuaternion(KL.setFromAxisAngle(r,o))}},{key:"applyMatrix3",value:function(r){var o=this.x,u=this.y,f=this.z,h=r.elements;return this.x=h[0]*o+h[3]*u+h[6]*f,this.y=h[1]*o+h[4]*u+h[7]*f,this.z=h[2]*o+h[5]*u+h[8]*f,this}},{key:"applyNormalMatrix",value:function(r){return this.applyMatrix3(r).normalize()}},{key:"applyMatrix4",value:function(r){var o=this.x,u=this.y,f=this.z,h=r.elements,v=1/(h[3]*o+h[7]*u+h[11]*f+h[15]);return this.x=(h[0]*o+h[4]*u+h[8]*f+h[12])*v,this.y=(h[1]*o+h[5]*u+h[9]*f+h[13])*v,this.z=(h[2]*o+h[6]*u+h[10]*f+h[14])*v,this}},{key:"applyQuaternion",value:function(r){var o=this.x,u=this.y,f=this.z,h=r.x,v=r.y,g=r.z,y=r.w,_=y*o+v*f-g*u,C=y*u+g*o-h*f,S=y*f+h*u-v*o,R=-h*o-v*u-g*f;return this.x=_*y+R*-h+C*-g-S*-v,this.y=C*y+R*-v+S*-h-_*-g,this.z=S*y+R*-g+_*-v-C*-h,this}},{key:"project",value:function(r){return this.applyMatrix4(r.matrixWorldInverse).applyMatrix4(r.projectionMatrix)}},{key:"unproject",value:function(r){return this.applyMatrix4(r.projectionMatrixInverse).applyMatrix4(r.matrixWorld)}},{key:"transformDirection",value:function(r){var o=this.x,u=this.y,f=this.z,h=r.elements;return this.x=h[0]*o+h[4]*u+h[8]*f,this.y=h[1]*o+h[5]*u+h[9]*f,this.z=h[2]*o+h[6]*u+h[10]*f,this.normalize()}},{key:"divide",value:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this}},{key:"clamp",value:function(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this.z=Math.max(r.z,Math.min(o.z,this.z)),this}},{key:"clampScalar",value:function(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this.z=Math.max(r,Math.min(o,this.z)),this}},{key:"clampLength",value:function(r,o){var u=this.length();return this.divideScalar(u||1).multiplyScalar(Math.max(r,Math.min(o,u)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y+this.z*r.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this.z+=(r.z-this.z)*o,this}},{key:"lerpVectors",value:function(r,o,u){return this.x=r.x+(o.x-r.x)*u,this.y=r.y+(o.y-r.y)*u,this.z=r.z+(o.z-r.z)*u,this}},{key:"cross",value:function(r){return this.crossVectors(this,r)}},{key:"crossVectors",value:function(r,o){var u=r.x,f=r.y,h=r.z,v=o.x,g=o.y,y=o.z;return this.x=f*y-h*g,this.y=h*v-u*y,this.z=u*g-f*v,this}},{key:"projectOnVector",value:function(r){var o=r.lengthSq();if(0===o)return this.set(0,0,0);var u=r.dot(this)/o;return this.copy(r).multiplyScalar(u)}},{key:"projectOnPlane",value:function(r){return IT.copy(this).projectOnVector(r),this.sub(IT)}},{key:"reflect",value:function(r){return this.sub(IT.copy(r).multiplyScalar(2*this.dot(r)))}},{key:"angleTo",value:function(r){var o=Math.sqrt(this.lengthSq()*r.lengthSq());if(0===o)return Math.PI/2;var u=this.dot(r)/o;return Math.acos(li(u,-1,1))}},{key:"distanceTo",value:function(r){return Math.sqrt(this.distanceToSquared(r))}},{key:"distanceToSquared",value:function(r){var o=this.x-r.x,u=this.y-r.y,f=this.z-r.z;return o*o+u*u+f*f}},{key:"manhattanDistanceTo",value:function(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)+Math.abs(this.z-r.z)}},{key:"setFromSpherical",value:function(r){return this.setFromSphericalCoords(r.radius,r.phi,r.theta)}},{key:"setFromSphericalCoords",value:function(r,o,u){var f=Math.sin(o)*r;return this.x=f*Math.sin(u),this.y=Math.cos(o)*r,this.z=f*Math.cos(u),this}},{key:"setFromCylindrical",value:function(r){return this.setFromCylindricalCoords(r.radius,r.theta,r.y)}},{key:"setFromCylindricalCoords",value:function(r,o,u){return this.x=r*Math.sin(o),this.y=u,this.z=r*Math.cos(o),this}},{key:"setFromMatrixPosition",value:function(r){var o=r.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this}},{key:"setFromMatrixScale",value:function(r){var o=this.setFromMatrixColumn(r,0).length(),u=this.setFromMatrixColumn(r,1).length(),f=this.setFromMatrixColumn(r,2).length();return this.x=o,this.y=u,this.z=f,this}},{key:"setFromMatrixColumn",value:function(r,o){return this.fromArray(r.elements,4*o)}},{key:"setFromMatrix3Column",value:function(r,o){return this.fromArray(r.elements,3*o)}},{key:"setFromEuler",value:function(r){return this.x=r._x,this.y=r._y,this.z=r._z,this}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z}},{key:"fromArray",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[o],this.y=r[o+1],this.z=r[o+2],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[o]=this.x,r[o+1]=this.y,r[o+2]=this.z,r}},{key:"fromBufferAttribute",value:function(r,o){return this.x=r.getX(o),this.y=r.getY(o),this.z=r.getZ(o),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var r=2*(Math.random()-.5),o=Math.random()*Math.PI*2,u=Math.sqrt(1-Math.pow(r,2));return this.x=u*Math.cos(o),this.y=u*Math.sin(o),this.z=r,this}},{key:Symbol.iterator,value:vi.mark(function t(){return vi.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.x;case 2:return o.next=4,this.y;case 4:return o.next=6,this.z;case 6:case"end":return o.stop()}},t,this)})}]),a}(),IT=new J,KL=new eo,Tc=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new J(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new J(-1/0,-1/0,-1/0);G(this,n),this.isBox3=!0,this.min=a,this.max=t}return j(n,[{key:"set",value:function(t,r){return this.min.copy(t),this.max.copy(r),this}},{key:"setFromArray",value:function(t){for(var r=1/0,o=1/0,u=1/0,f=-1/0,h=-1/0,v=-1/0,g=0,y=t.length;g<y;g+=3){var _=t[g],C=t[g+1],S=t[g+2];_<r&&(r=_),C<o&&(o=C),S<u&&(u=S),_>f&&(f=_),C>h&&(h=C),S>v&&(v=S)}return this.min.set(r,o,u),this.max.set(f,h,v),this}},{key:"setFromBufferAttribute",value:function(t){for(var r=1/0,o=1/0,u=1/0,f=-1/0,h=-1/0,v=-1/0,g=0,y=t.count;g<y;g++){var _=t.getX(g),C=t.getY(g),S=t.getZ(g);_<r&&(r=_),C<o&&(o=C),S<u&&(u=S),_>f&&(f=_),C>h&&(h=C),S>v&&(v=S)}return this.min.set(r,o,u),this.max.set(f,h,v),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var r=0,o=t.length;r<o;r++)this.expandByPoint(t[r]);return this}},{key:"setFromCenterAndSize",value:function(t,r){var o=uf.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(o),this.max.copy(t).add(o),this}},{key:"setFromObject",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(t,r)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"expandByObject",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.updateWorldMatrix(!1,!1);var o=t.geometry;if(void 0!==o)if(r&&null!=o.attributes&&void 0!==o.attributes.position)for(var u=o.attributes.position,f=0,h=u.count;f<h;f++)uf.fromBufferAttribute(u,f).applyMatrix4(t.matrixWorld),this.expandByPoint(uf);else null===o.boundingBox&&o.computeBoundingBox(),LT.copy(o.boundingBox),LT.applyMatrix4(t.matrixWorld),this.union(LT);for(var v=t.children,g=0,y=v.length;g<y;g++)this.expandByObject(v[g],r);return this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}},{key:"getParameter",value:function(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}},{key:"intersectsSphere",value:function(t){return this.clampPoint(t.center,uf),uf.distanceToSquared(t.center)<=t.radius*t.radius}},{key:"intersectsPlane",value:function(t){var r,o;return t.normal.x>0?(r=t.normal.x*this.min.x,o=t.normal.x*this.max.x):(r=t.normal.x*this.max.x,o=t.normal.x*this.min.x),t.normal.y>0?(r+=t.normal.y*this.min.y,o+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,o+=t.normal.y*this.min.y),t.normal.z>0?(r+=t.normal.z*this.min.z,o+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,o+=t.normal.z*this.min.z),r<=-t.constant&&o>=-t.constant}},{key:"intersectsTriangle",value:function(t){if(this.isEmpty())return!1;this.getCenter(gy),RS.subVectors(this.max,gy),Nh.subVectors(t.a,gy),kh.subVectors(t.b,gy),Gh.subVectors(t.c,gy),Dc.subVectors(kh,Nh),Mc.subVectors(Gh,kh),lf.subVectors(Nh,Gh);var r=[0,-Dc.z,Dc.y,0,-Mc.z,Mc.y,0,-lf.z,lf.y,Dc.z,0,-Dc.x,Mc.z,0,-Mc.x,lf.z,0,-lf.x,-Dc.y,Dc.x,0,-Mc.y,Mc.x,0,-lf.y,lf.x,0];return!(!FT(r,Nh,kh,Gh,RS)||(r=[1,0,0,0,1,0,0,0,1],!FT(r,Nh,kh,Gh,RS)))&&(AS.crossVectors(Dc,Mc),FT(r=[AS.x,AS.y,AS.z],Nh,kh,Gh,RS))}},{key:"clampPoint",value:function(t,r){return r.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return uf.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"getBoundingSphere",value:function(t){return this.getCenter(t.center),t.radius=.5*this.getSize(uf).length(),t}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"applyMatrix4",value:function(t){return this.isEmpty()||(al[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),al[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),al[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),al[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),al[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),al[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),al[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),al[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(al)),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),n}(),al=[new J,new J,new J,new J,new J,new J,new J,new J],uf=new J,LT=new Tc,Nh=new J,kh=new J,Gh=new J,Dc=new J,Mc=new J,lf=new J,gy=new J,RS=new J,AS=new J,cf=new J;function FT(n,a,t,r,o){for(var u=0,f=n.length-3;u<=f;u+=3){cf.fromArray(n,u);var h=o.x*Math.abs(cf.x)+o.y*Math.abs(cf.y)+o.z*Math.abs(cf.z),v=a.dot(cf),g=t.dot(cf),y=r.dot(cf);if(Math.max(-Math.max(v,g,y),Math.min(v,g,y))>h)return!1}return!0}var Wj=new Tc,my=new J,NT=new J,Bh=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new J,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;G(this,n),this.center=a,this.radius=t}return j(n,[{key:"set",value:function(t,r){return this.center.copy(t),this.radius=r,this}},{key:"setFromPoints",value:function(t,r){var o=this.center;void 0!==r?o.copy(r):Wj.setFromPoints(t).getCenter(o);for(var u=0,f=0,h=t.length;f<h;f++)u=Math.max(u,o.distanceToSquared(t[f]));return this.radius=Math.sqrt(u),this}},{key:"copy",value:function(t){return this.center.copy(t.center),this.radius=t.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(t){return t.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(t){var r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r}},{key:"intersectsBox",value:function(t){return t.intersectsSphere(this)}},{key:"intersectsPlane",value:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(t,r){var o=this.center.distanceToSquared(t);return r.copy(t),o>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}},{key:"getBoundingBox",value:function(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}},{key:"applyMatrix4",value:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}},{key:"translate",value:function(t){return this.center.add(t),this}},{key:"expandByPoint",value:function(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;my.subVectors(t,this.center);var r=my.lengthSq();if(r>this.radius*this.radius){var o=Math.sqrt(r),u=.5*(o-this.radius);this.center.addScaledVector(my,u/o),this.radius+=u}return this}},{key:"union",value:function(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(NT.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(my.copy(t.center).add(NT)),this.expandByPoint(my.copy(t.center).sub(NT))),this)}},{key:"equals",value:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(),sl=new J,kT=new J,TS=new J,Oc=new J,GT=new J,DS=new J,BT=new J,HT=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new J,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new J(0,0,-1);G(this,n),this.origin=a,this.direction=t}return j(n,[{key:"set",value:function(t,r){return this.origin.copy(t),this.direction.copy(r),this}},{key:"copy",value:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}},{key:"at",value:function(t,r){return r.copy(this.direction).multiplyScalar(t).add(this.origin)}},{key:"lookAt",value:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this}},{key:"recast",value:function(t){return this.origin.copy(this.at(t,sl)),this}},{key:"closestPointToPoint",value:function(t,r){r.subVectors(t,this.origin);var o=r.dot(this.direction);return o<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(o).add(this.origin)}},{key:"distanceToPoint",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:"distanceSqToPoint",value:function(t){var r=sl.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(sl.copy(this.direction).multiplyScalar(r).add(this.origin),sl.distanceToSquared(t))}},{key:"distanceSqToSegment",value:function(t,r,o,u){kT.copy(t).add(r).multiplyScalar(.5),TS.copy(r).sub(t).normalize(),Oc.copy(this.origin).sub(kT);var C,S,R,b,f=.5*t.distanceTo(r),h=-this.direction.dot(TS),v=Oc.dot(this.direction),g=-Oc.dot(TS),y=Oc.lengthSq(),_=Math.abs(1-h*h);if(_>0)if(S=h*v-g,b=f*_,(C=h*g-v)>=0)if(S>=-b)if(S<=b){var E=1/_;R=(C*=E)*(C+h*(S*=E)+2*v)+S*(h*C+S+2*g)+y}else S=f,R=-(C=Math.max(0,-(h*S+v)))*C+S*(S+2*g)+y;else S=-f,R=-(C=Math.max(0,-(h*S+v)))*C+S*(S+2*g)+y;else S<=-b?R=-(C=Math.max(0,-(-h*f+v)))*C+(S=C>0?-f:Math.min(Math.max(-f,-g),f))*(S+2*g)+y:S<=b?(C=0,R=(S=Math.min(Math.max(-f,-g),f))*(S+2*g)+y):R=-(C=Math.max(0,-(h*f+v)))*C+(S=C>0?f:Math.min(Math.max(-f,-g),f))*(S+2*g)+y;else S=h>0?-f:f,R=-(C=Math.max(0,-(h*S+v)))*C+S*(S+2*g)+y;return o&&o.copy(this.direction).multiplyScalar(C).add(this.origin),u&&u.copy(TS).multiplyScalar(S).add(kT),R}},{key:"intersectSphere",value:function(t,r){sl.subVectors(t.center,this.origin);var o=sl.dot(this.direction),u=sl.dot(sl)-o*o,f=t.radius*t.radius;if(u>f)return null;var h=Math.sqrt(f-u),v=o-h,g=o+h;return v<0&&g<0?null:this.at(v<0?g:v,r)}},{key:"intersectsSphere",value:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}},{key:"distanceToPlane",value:function(t){var r=t.normal.dot(this.direction);if(0===r)return 0===t.distanceToPoint(this.origin)?0:null;var o=-(this.origin.dot(t.normal)+t.constant)/r;return o>=0?o:null}},{key:"intersectPlane",value:function(t,r){var o=this.distanceToPlane(t);return null===o?null:this.at(o,r)}},{key:"intersectsPlane",value:function(t){var r=t.distanceToPoint(this.origin);return 0===r||t.normal.dot(this.direction)*r<0}},{key:"intersectBox",value:function(t,r){var o,u,f,h,v,g,y=1/this.direction.x,_=1/this.direction.y,C=1/this.direction.z,S=this.origin;return y>=0?(o=(t.min.x-S.x)*y,u=(t.max.x-S.x)*y):(o=(t.max.x-S.x)*y,u=(t.min.x-S.x)*y),_>=0?(f=(t.min.y-S.y)*_,h=(t.max.y-S.y)*_):(f=(t.max.y-S.y)*_,h=(t.min.y-S.y)*_),o>h||f>u||((f>o||isNaN(o))&&(o=f),(h<u||isNaN(u))&&(u=h),C>=0?(v=(t.min.z-S.z)*C,g=(t.max.z-S.z)*C):(v=(t.max.z-S.z)*C,g=(t.min.z-S.z)*C),o>g||v>u)||((v>o||o!=o)&&(o=v),(g<u||u!=u)&&(u=g),u<0)?null:this.at(o>=0?o:u,r)}},{key:"intersectsBox",value:function(t){return null!==this.intersectBox(t,sl)}},{key:"intersectTriangle",value:function(t,r,o,u,f){GT.subVectors(r,t),DS.subVectors(o,t),BT.crossVectors(GT,DS);var v,h=this.direction.dot(BT);if(h>0){if(u)return null;v=1}else{if(!(h<0))return null;v=-1,h=-h}Oc.subVectors(this.origin,t);var g=v*this.direction.dot(DS.crossVectors(Oc,DS));if(g<0)return null;var y=v*this.direction.dot(GT.cross(Oc));if(y<0||g+y>h)return null;var _=-v*Oc.dot(BT);return _<0?null:this.at(_/h,f)}},{key:"applyMatrix4",value:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}},{key:"equals",value:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(),wn=function(){function n(){G(this,n),n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return j(n,[{key:"set",value:function(t,r,o,u,f,h,v,g,y,_,C,S,R,b,E,T){var D=this.elements;return D[0]=t,D[4]=r,D[8]=o,D[12]=u,D[1]=f,D[5]=h,D[9]=v,D[13]=g,D[2]=y,D[6]=_,D[10]=C,D[14]=S,D[3]=R,D[7]=b,D[11]=E,D[15]=T,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new n).fromArray(this.elements)}},{key:"copy",value:function(t){var r=this.elements,o=t.elements;return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],this}},{key:"copyPosition",value:function(t){var r=this.elements,o=t.elements;return r[12]=o[12],r[13]=o[13],r[14]=o[14],this}},{key:"setFromMatrix3",value:function(t){var r=t.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(t,r,o){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),o.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(t,r,o){return this.set(t.x,r.x,o.x,0,t.y,r.y,o.y,0,t.z,r.z,o.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(t){var r=this.elements,o=t.elements,u=1/Hh.setFromMatrixColumn(t,0).length(),f=1/Hh.setFromMatrixColumn(t,1).length(),h=1/Hh.setFromMatrixColumn(t,2).length();return r[0]=o[0]*u,r[1]=o[1]*u,r[2]=o[2]*u,r[3]=0,r[4]=o[4]*f,r[5]=o[5]*f,r[6]=o[6]*f,r[7]=0,r[8]=o[8]*h,r[9]=o[9]*h,r[10]=o[10]*h,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){var r=this.elements,o=t.x,u=t.y,f=t.z,h=Math.cos(o),v=Math.sin(o),g=Math.cos(u),y=Math.sin(u),_=Math.cos(f),C=Math.sin(f);if("XYZ"===t.order){var S=h*_,R=h*C,b=v*_,E=v*C;r[0]=g*_,r[4]=-g*C,r[8]=y,r[1]=R+b*y,r[5]=S-E*y,r[9]=-v*g,r[2]=E-S*y,r[6]=b+R*y,r[10]=h*g}else if("YXZ"===t.order){var T=g*_,D=g*C,M=y*_,O=y*C;r[0]=T+O*v,r[4]=M*v-D,r[8]=h*y,r[1]=h*C,r[5]=h*_,r[9]=-v,r[2]=D*v-M,r[6]=O+T*v,r[10]=h*g}else if("ZXY"===t.order){var L=g*_,H=g*C,z=y*_,P=y*C;r[0]=L-P*v,r[4]=-h*C,r[8]=z+H*v,r[1]=H+z*v,r[5]=h*_,r[9]=P-L*v,r[2]=-h*y,r[6]=v,r[10]=h*g}else if("ZYX"===t.order){var W=h*_,X=h*C,ne=v*_,le=v*C;r[0]=g*_,r[4]=ne*y-X,r[8]=W*y+le,r[1]=g*C,r[5]=le*y+W,r[9]=X*y-ne,r[2]=-y,r[6]=v*g,r[10]=h*g}else if("YZX"===t.order){var ue=h*g,k=h*y,ee=v*g,ie=v*y;r[0]=g*_,r[4]=ie-ue*C,r[8]=ee*C+k,r[1]=C,r[5]=h*_,r[9]=-v*_,r[2]=-y*_,r[6]=k*C+ee,r[10]=ue-ie*C}else if("XZY"===t.order){var se=h*g,ae=h*y,ge=v*g,Ee=v*y;r[0]=g*_,r[4]=-C,r[8]=y*_,r[1]=se*C+Ee,r[5]=h*_,r[9]=ae*C-ge,r[2]=ge*C-ae,r[6]=v*_,r[10]=Ee*C+se}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(t){return this.compose(Uj,t,zj)}},{key:"lookAt",value:function(t,r,o){var u=this.elements;return _a.subVectors(t,r),0===_a.lengthSq()&&(_a.z=1),_a.normalize(),Pc.crossVectors(o,_a),0===Pc.lengthSq()&&(1===Math.abs(o.z)?_a.x+=1e-4:_a.z+=1e-4,_a.normalize(),Pc.crossVectors(o,_a)),Pc.normalize(),MS.crossVectors(_a,Pc),u[0]=Pc.x,u[4]=MS.x,u[8]=_a.x,u[1]=Pc.y,u[5]=MS.y,u[9]=_a.y,u[2]=Pc.z,u[6]=MS.z,u[10]=_a.z,this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,r){var o=t.elements,u=r.elements,f=this.elements,h=o[0],v=o[4],g=o[8],y=o[12],_=o[1],C=o[5],S=o[9],R=o[13],b=o[2],E=o[6],T=o[10],D=o[14],M=o[3],O=o[7],L=o[11],H=o[15],z=u[0],P=u[4],W=u[8],X=u[12],ne=u[1],le=u[5],ue=u[9],k=u[13],ee=u[2],ie=u[6],se=u[10],ae=u[14],ge=u[3],Ee=u[7],_e=u[11],me=u[15];return f[0]=h*z+v*ne+g*ee+y*ge,f[4]=h*P+v*le+g*ie+y*Ee,f[8]=h*W+v*ue+g*se+y*_e,f[12]=h*X+v*k+g*ae+y*me,f[1]=_*z+C*ne+S*ee+R*ge,f[5]=_*P+C*le+S*ie+R*Ee,f[9]=_*W+C*ue+S*se+R*_e,f[13]=_*X+C*k+S*ae+R*me,f[2]=b*z+E*ne+T*ee+D*ge,f[6]=b*P+E*le+T*ie+D*Ee,f[10]=b*W+E*ue+T*se+D*_e,f[14]=b*X+E*k+T*ae+D*me,f[3]=M*z+O*ne+L*ee+H*ge,f[7]=M*P+O*le+L*ie+H*Ee,f[11]=M*W+O*ue+L*se+H*_e,f[15]=M*X+O*k+L*ae+H*me,this}},{key:"multiplyScalar",value:function(t){var r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this}},{key:"determinant",value:function(){var t=this.elements,r=t[0],o=t[4],u=t[8],f=t[12],h=t[1],v=t[5],g=t[9],y=t[13],_=t[2],C=t[6],S=t[10],R=t[14];return t[3]*(+f*g*C-u*y*C-f*v*S+o*y*S+u*v*R-o*g*R)+t[7]*(+r*g*R-r*y*S+f*h*S-u*h*R+u*y*_-f*g*_)+t[11]*(+r*y*C-r*v*R-f*h*C+o*h*R+f*v*_-o*y*_)+t[15]*(-u*v*_-r*g*C+r*v*S+u*h*C-o*h*S+o*g*_)}},{key:"transpose",value:function(){var r,t=this.elements;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this}},{key:"setPosition",value:function(t,r,o){var u=this.elements;return t.isVector3?(u[12]=t.x,u[13]=t.y,u[14]=t.z):(u[12]=t,u[13]=r,u[14]=o),this}},{key:"invert",value:function(){var t=this.elements,r=t[0],o=t[1],u=t[2],f=t[3],h=t[4],v=t[5],g=t[6],y=t[7],_=t[8],C=t[9],S=t[10],R=t[11],b=t[12],E=t[13],T=t[14],D=t[15],M=C*T*y-E*S*y+E*g*R-v*T*R-C*g*D+v*S*D,O=b*S*y-_*T*y-b*g*R+h*T*R+_*g*D-h*S*D,L=_*E*y-b*C*y+b*v*R-h*E*R-_*v*D+h*C*D,H=b*C*g-_*E*g-b*v*S+h*E*S+_*v*T-h*C*T,z=r*M+o*O+u*L+f*H;if(0===z)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var P=1/z;return t[0]=M*P,t[1]=(E*S*f-C*T*f-E*u*R+o*T*R+C*u*D-o*S*D)*P,t[2]=(v*T*f-E*g*f+E*u*y-o*T*y-v*u*D+o*g*D)*P,t[3]=(C*g*f-v*S*f-C*u*y+o*S*y+v*u*R-o*g*R)*P,t[4]=O*P,t[5]=(_*T*f-b*S*f+b*u*R-r*T*R-_*u*D+r*S*D)*P,t[6]=(b*g*f-h*T*f-b*u*y+r*T*y+h*u*D-r*g*D)*P,t[7]=(h*S*f-_*g*f+_*u*y-r*S*y-h*u*R+r*g*R)*P,t[8]=L*P,t[9]=(b*C*f-_*E*f-b*o*R+r*E*R+_*o*D-r*C*D)*P,t[10]=(h*E*f-b*v*f+b*o*y-r*E*y-h*o*D+r*v*D)*P,t[11]=(_*v*f-h*C*f-_*o*y+r*C*y+h*o*R-r*v*R)*P,t[12]=H*P,t[13]=(_*E*u-b*C*u+b*o*S-r*E*S-_*o*T+r*C*T)*P,t[14]=(b*v*u-h*E*u-b*o*g+r*E*g+h*o*T-r*v*T)*P,t[15]=(h*C*u-_*v*u+_*o*g-r*C*g-h*o*S+r*v*S)*P,this}},{key:"scale",value:function(t){var r=this.elements,o=t.x,u=t.y,f=t.z;return r[0]*=o,r[4]*=u,r[8]*=f,r[1]*=o,r[5]*=u,r[9]*=f,r[2]*=o,r[6]*=u,r[10]*=f,r[3]*=o,r[7]*=u,r[11]*=f,this}},{key:"getMaxScaleOnAxis",value:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}},{key:"makeTranslation",value:function(t,r,o){return this.set(1,0,0,t,0,1,0,r,0,0,1,o,0,0,0,1),this}},{key:"makeRotationX",value:function(t){var r=Math.cos(t),o=Math.sin(t);return this.set(1,0,0,0,0,r,-o,0,0,o,r,0,0,0,0,1),this}},{key:"makeRotationY",value:function(t){var r=Math.cos(t),o=Math.sin(t);return this.set(r,0,o,0,0,1,0,0,-o,0,r,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(t){var r=Math.cos(t),o=Math.sin(t);return this.set(r,-o,0,0,o,r,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(t,r){var o=Math.cos(r),u=Math.sin(r),f=1-o,h=t.x,v=t.y,g=t.z,y=f*h,_=f*v;return this.set(y*h+o,y*v-u*g,y*g+u*v,0,y*v+u*g,_*v+o,_*g-u*h,0,y*g-u*v,_*g+u*h,f*g*g+o,0,0,0,0,1),this}},{key:"makeScale",value:function(t,r,o){return this.set(t,0,0,0,0,r,0,0,0,0,o,0,0,0,0,1),this}},{key:"makeShear",value:function(t,r,o,u,f,h){return this.set(1,o,f,0,t,1,h,0,r,u,1,0,0,0,0,1),this}},{key:"compose",value:function(t,r,o){var u=this.elements,f=r._x,h=r._y,v=r._z,g=r._w,y=f+f,_=h+h,C=v+v,S=f*y,R=f*_,b=f*C,E=h*_,T=h*C,D=v*C,M=g*y,O=g*_,L=g*C,H=o.x,z=o.y,P=o.z;return u[0]=(1-(E+D))*H,u[1]=(R+L)*H,u[2]=(b-O)*H,u[3]=0,u[4]=(R-L)*z,u[5]=(1-(S+D))*z,u[6]=(T+M)*z,u[7]=0,u[8]=(b+O)*P,u[9]=(T-M)*P,u[10]=(1-(S+E))*P,u[11]=0,u[12]=t.x,u[13]=t.y,u[14]=t.z,u[15]=1,this}},{key:"decompose",value:function(t,r,o){var u=this.elements,f=Hh.set(u[0],u[1],u[2]).length(),h=Hh.set(u[4],u[5],u[6]).length(),v=Hh.set(u[8],u[9],u[10]).length();this.determinant()<0&&(f=-f),t.x=u[12],t.y=u[13],t.z=u[14],Hs.copy(this);var y=1/f,_=1/h,C=1/v;return Hs.elements[0]*=y,Hs.elements[1]*=y,Hs.elements[2]*=y,Hs.elements[4]*=_,Hs.elements[5]*=_,Hs.elements[6]*=_,Hs.elements[8]*=C,Hs.elements[9]*=C,Hs.elements[10]*=C,r.setFromRotationMatrix(Hs),o.x=f,o.y=h,o.z=v,this}},{key:"makePerspective",value:function(t,r,o,u,f,h){var v=this.elements,y=2*f/(o-u),_=(r+t)/(r-t),C=(o+u)/(o-u),S=-(h+f)/(h-f),R=-2*h*f/(h-f);return v[0]=2*f/(r-t),v[4]=0,v[8]=_,v[12]=0,v[1]=0,v[5]=y,v[9]=C,v[13]=0,v[2]=0,v[6]=0,v[10]=S,v[14]=R,v[3]=0,v[7]=0,v[11]=-1,v[15]=0,this}},{key:"makeOrthographic",value:function(t,r,o,u,f,h){var v=this.elements,g=1/(r-t),y=1/(o-u),_=1/(h-f),C=(r+t)*g,S=(o+u)*y,R=(h+f)*_;return v[0]=2*g,v[4]=0,v[8]=0,v[12]=-C,v[1]=0,v[5]=2*y,v[9]=0,v[13]=-S,v[2]=0,v[6]=0,v[10]=-2*_,v[14]=-R,v[3]=0,v[7]=0,v[11]=0,v[15]=1,this}},{key:"equals",value:function(t){for(var r=this.elements,o=t.elements,u=0;u<16;u++)if(r[u]!==o[u])return!1;return!0}},{key:"fromArray",value:function(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=0;o<16;o++)this.elements[o]=t[o+r];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.elements;return t[r]=o[0],t[r+1]=o[1],t[r+2]=o[2],t[r+3]=o[3],t[r+4]=o[4],t[r+5]=o[5],t[r+6]=o[6],t[r+7]=o[7],t[r+8]=o[8],t[r+9]=o[9],t[r+10]=o[10],t[r+11]=o[11],t[r+12]=o[12],t[r+13]=o[13],t[r+14]=o[14],t[r+15]=o[15],t}}]),n}(),Hh=new J,Hs=new wn,Uj=new J(0,0,0),zj=new J(1,1,1),Pc=new J,MS=new J,_a=new J,$L=new wn,XL=new eo,jj=function(){var n=function(a){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;G(this,t),this.isEuler=!0,this._x=r,this._y=o,this._z=u,this._order=f}return j(t,[{key:"x",get:function(){return this._x},set:function(o){this._x=o,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(o){this._y=o,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(o){this._z=o,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(o){this._order=o,this._onChangeCallback()}},{key:"set",value:function(o,u,f){var h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=o,this._y=u,this._z=f,this._order=h,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(o){return this._x=o._x,this._y=o._y,this._z=o._z,this._order=o._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,f=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],h=o.elements,v=h[0],g=h[4],y=h[8],_=h[1],C=h[5],S=h[9],R=h[2],b=h[6],E=h[10];switch(u){case"XYZ":this._y=Math.asin(li(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(-S,E),this._z=Math.atan2(-g,v)):(this._x=Math.atan2(b,C),this._z=0);break;case"YXZ":this._x=Math.asin(-li(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(y,E),this._z=Math.atan2(_,C)):(this._y=Math.atan2(-R,v),this._z=0);break;case"ZXY":this._x=Math.asin(li(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-R,E),this._z=Math.atan2(-g,C)):(this._y=0,this._z=Math.atan2(_,v));break;case"ZYX":this._y=Math.asin(-li(R,-1,1)),Math.abs(R)<.9999999?(this._x=Math.atan2(b,E),this._z=Math.atan2(_,v)):(this._x=0,this._z=Math.atan2(-g,C));break;case"YZX":this._z=Math.asin(li(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(-S,C),this._y=Math.atan2(-R,v)):(this._x=0,this._y=Math.atan2(y,E));break;case"XZY":this._z=Math.asin(-li(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(b,C),this._y=Math.atan2(y,v)):(this._x=Math.atan2(-S,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+u)}return this._order=u,!0===f&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(o,u,f){return $L.makeRotationFromQuaternion(o),this.setFromRotationMatrix($L,u,f)}},{key:"setFromVector3",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(o.x,o.y,o.z,u)}},{key:"reorder",value:function(o){return XL.setFromEuler(this),this.setFromQuaternion(XL,o)}},{key:"equals",value:function(o){return o._x===this._x&&o._y===this._y&&o._z===this._z&&o._order===this._order}},{key:"fromArray",value:function(o){return this._x=o[0],this._y=o[1],this._z=o[2],void 0!==o[3]&&(this._order=o[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o[u]=this._x,o[u+1]=this._y,o[u+2]=this._z,o[u+3]=this._order,o}},{key:"_onChange",value:function(o){return this._onChangeCallback=o,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:vi.mark(function r(){return vi.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this._x;case 2:return u.next=4,this._y;case 4:return u.next=6,this._z;case 6:return u.next=8,this._order;case 8:case"end":return u.stop()}},r,this)})},{key:"toVector3",value:function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}]),t}();return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n}(),JL=function(){function n(){G(this,n),this.mask=1}return j(n,[{key:"set",value:function(t){this.mask=(1<<t|0)>>>0}},{key:"enable",value:function(t){this.mask|=1<<t|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(t){this.mask^=1<<t|0}},{key:"disable",value:function(t){this.mask&=~(1<<t|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(t){return 0!=(this.mask&t.mask)}},{key:"isEnabled",value:function(t){return 0!=(this.mask&(1<<t|0))}}]),n}(),qj=0,ZL=new J,Vh=new eo,ul=new wn,OS=new J,yy=new J,Yj=new J,Kj=new eo,QL=new J(1,0,0),eF=new J(0,1,0),tF=new J(0,0,1),$j={type:"added"},nF={type:"removed"},go=function(){var n=function(a){pe(r,a);var t=ve(r);function r(){var o;G(this,r),(o=t.call(this)).isObject3D=!0,Object.defineProperty(Xn(o),"id",{value:qj++}),o.uuid=Xa(),o.name="",o.type="Object3D",o.parent=null,o.children=[],o.up=r.DefaultUp.clone();var u=new J,f=new jj,h=new eo,v=new J(1,1,1);return f._onChange(function(){h.setFromEuler(f,!1)}),h._onChange(function(){f.setFromQuaternion(h,void 0,!1)}),Object.defineProperties(Xn(o),{position:{configurable:!0,enumerable:!0,value:u},rotation:{configurable:!0,enumerable:!0,value:f},quaternion:{configurable:!0,enumerable:!0,value:h},scale:{configurable:!0,enumerable:!0,value:v},modelViewMatrix:{value:new wn},normalMatrix:{value:new Gs}}),o.matrix=new wn,o.matrixWorld=new wn,o.matrixAutoUpdate=r.DefaultMatrixAutoUpdate,o.matrixWorldNeedsUpdate=!1,o.matrixWorldAutoUpdate=r.DefaultMatrixWorldAutoUpdate,o.layers=new JL,o.visible=!0,o.castShadow=!1,o.receiveShadow=!1,o.frustumCulled=!0,o.renderOrder=0,o.animations=[],o.userData={},o}return j(r,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(u){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(u),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(u){return this.quaternion.premultiply(u),this}},{key:"setRotationFromAxisAngle",value:function(u,f){this.quaternion.setFromAxisAngle(u,f)}},{key:"setRotationFromEuler",value:function(u){this.quaternion.setFromEuler(u,!0)}},{key:"setRotationFromMatrix",value:function(u){this.quaternion.setFromRotationMatrix(u)}},{key:"setRotationFromQuaternion",value:function(u){this.quaternion.copy(u)}},{key:"rotateOnAxis",value:function(u,f){return Vh.setFromAxisAngle(u,f),this.quaternion.multiply(Vh),this}},{key:"rotateOnWorldAxis",value:function(u,f){return Vh.setFromAxisAngle(u,f),this.quaternion.premultiply(Vh),this}},{key:"rotateX",value:function(u){return this.rotateOnAxis(QL,u)}},{key:"rotateY",value:function(u){return this.rotateOnAxis(eF,u)}},{key:"rotateZ",value:function(u){return this.rotateOnAxis(tF,u)}},{key:"translateOnAxis",value:function(u,f){return ZL.copy(u).applyQuaternion(this.quaternion),this.position.add(ZL.multiplyScalar(f)),this}},{key:"translateX",value:function(u){return this.translateOnAxis(QL,u)}},{key:"translateY",value:function(u){return this.translateOnAxis(eF,u)}},{key:"translateZ",value:function(u){return this.translateOnAxis(tF,u)}},{key:"localToWorld",value:function(u){return this.updateWorldMatrix(!0,!1),u.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(u){return this.updateWorldMatrix(!0,!1),u.applyMatrix4(ul.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(u,f,h){u.isVector3?OS.copy(u):OS.set(u,f,h);var v=this.parent;this.updateWorldMatrix(!0,!1),yy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ul.lookAt(yy,OS,this.up):ul.lookAt(OS,yy,this.up),this.quaternion.setFromRotationMatrix(ul),v&&(ul.extractRotation(v.matrixWorld),Vh.setFromRotationMatrix(ul),this.quaternion.premultiply(Vh.invert()))}},{key:"add",value:function(u){if(arguments.length>1){for(var f=0;f<arguments.length;f++)this.add(arguments[f]);return this}return u===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",u),this):(u&&u.isObject3D?(null!==u.parent&&u.parent.remove(u),u.parent=this,this.children.push(u),u.dispatchEvent($j)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",u),this)}},{key:"remove",value:function(u){if(arguments.length>1){for(var f=0;f<arguments.length;f++)this.remove(arguments[f]);return this}var h=this.children.indexOf(u);return-1!==h&&(u.parent=null,this.children.splice(h,1),u.dispatchEvent(nF)),this}},{key:"removeFromParent",value:function(){var u=this.parent;return null!==u&&u.remove(this),this}},{key:"clear",value:function(){for(var u=0;u<this.children.length;u++){var f=this.children[u];f.parent=null,f.dispatchEvent(nF)}return this.children.length=0,this}},{key:"attach",value:function(u){return this.updateWorldMatrix(!0,!1),ul.copy(this.matrixWorld).invert(),null!==u.parent&&(u.parent.updateWorldMatrix(!0,!1),ul.multiply(u.parent.matrixWorld)),u.applyMatrix4(ul),this.add(u),u.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(u){return this.getObjectByProperty("id",u)}},{key:"getObjectByName",value:function(u){return this.getObjectByProperty("name",u)}},{key:"getObjectByProperty",value:function(u,f){if(this[u]===f)return this;for(var h=0,v=this.children.length;h<v;h++){var y=this.children[h].getObjectByProperty(u,f);if(void 0!==y)return y}}},{key:"getObjectsByProperty",value:function(u,f){var h=[];this[u]===f&&h.push(this);for(var v=0,g=this.children.length;v<g;v++){var y=this.children[v].getObjectsByProperty(u,f);y.length>0&&(h=h.concat(y))}return h}},{key:"getWorldPosition",value:function(u){return this.updateWorldMatrix(!0,!1),u.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(u){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yy,u,Yj),u}},{key:"getWorldScale",value:function(u){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yy,Kj,u),u}},{key:"getWorldDirection",value:function(u){this.updateWorldMatrix(!0,!1);var f=this.matrixWorld.elements;return u.set(f[8],f[9],f[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(u){u(this);for(var f=this.children,h=0,v=f.length;h<v;h++)f[h].traverse(u)}},{key:"traverseVisible",value:function(u){if(!1!==this.visible){u(this);for(var f=this.children,h=0,v=f.length;h<v;h++)f[h].traverseVisible(u)}}},{key:"traverseAncestors",value:function(u){var f=this.parent;null!==f&&(u(f),f.traverseAncestors(u))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(u){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||u)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,u=!0);for(var f=this.children,h=0,v=f.length;h<v;h++){var g=f[h];(!0===g.matrixWorldAutoUpdate||!0===u)&&g.updateMatrixWorld(u)}}},{key:"updateWorldMatrix",value:function(u,f){var h=this.parent;if(!0===u&&null!==h&&!0===h.matrixWorldAutoUpdate&&h.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===f)for(var v=this.children,g=0,y=v.length;g<y;g++){var _=v[g];!0===_.matrixWorldAutoUpdate&&_.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(u){var f=void 0===u||"string"==typeof u,h={};f&&(u={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},h.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var v={};function g(k,ee){return void 0===k[ee.uuid]&&(k[ee.uuid]=ee.toJSON(u)),ee.uuid}if(v.uuid=this.uuid,v.type=this.type,""!==this.name&&(v.name=this.name),!0===this.castShadow&&(v.castShadow=!0),!0===this.receiveShadow&&(v.receiveShadow=!0),!1===this.visible&&(v.visible=!1),!1===this.frustumCulled&&(v.frustumCulled=!1),0!==this.renderOrder&&(v.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(v.userData=this.userData),v.layers=this.layers.mask,v.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(v.matrixAutoUpdate=!1),this.isInstancedMesh&&(v.type="InstancedMesh",v.count=this.count,v.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(v.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?v.background=this.background.toJSON():this.background.isTexture&&(v.background=this.background.toJSON(u).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(v.environment=this.environment.toJSON(u).uuid);else if(this.isMesh||this.isLine||this.isPoints){v.geometry=g(u.geometries,this.geometry);var y=this.geometry.parameters;if(void 0!==y&&void 0!==y.shapes){var _=y.shapes;if(Array.isArray(_))for(var C=0,S=_.length;C<S;C++)g(u.shapes,_[C]);else g(u.shapes,_)}}if(this.isSkinnedMesh&&(v.bindMode=this.bindMode,v.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(g(u.skeletons,this.skeleton),v.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var b=[],E=0,T=this.material.length;E<T;E++)b.push(g(u.materials,this.material[E]));v.material=b}else v.material=g(u.materials,this.material);if(this.children.length>0){v.children=[];for(var D=0;D<this.children.length;D++)v.children.push(this.children[D].toJSON(u).object)}if(this.animations.length>0){v.animations=[];for(var M=0;M<this.animations.length;M++)v.animations.push(g(u.animations,this.animations[M]))}if(f){var L=ue(u.geometries),H=ue(u.materials),z=ue(u.textures),P=ue(u.images),W=ue(u.shapes),X=ue(u.skeletons),ne=ue(u.animations),le=ue(u.nodes);L.length>0&&(h.geometries=L),H.length>0&&(h.materials=H),z.length>0&&(h.textures=z),P.length>0&&(h.images=P),W.length>0&&(h.shapes=W),X.length>0&&(h.skeletons=X),ne.length>0&&(h.animations=ne),le.length>0&&(h.nodes=le)}return h.object=v,h;function ue(k){var ee=[];for(var ie in k){var se=k[ie];delete se.metadata,ee.push(se)}return ee}}},{key:"clone",value:function(u){return(new this.constructor).copy(this,u)}},{key:"copy",value:function(u){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=u.name,this.up.copy(u.up),this.position.copy(u.position),this.rotation.order=u.rotation.order,this.quaternion.copy(u.quaternion),this.scale.copy(u.scale),this.matrix.copy(u.matrix),this.matrixWorld.copy(u.matrixWorld),this.matrixAutoUpdate=u.matrixAutoUpdate,this.matrixWorldNeedsUpdate=u.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=u.matrixWorldAutoUpdate,this.layers.mask=u.layers.mask,this.visible=u.visible,this.castShadow=u.castShadow,this.receiveShadow=u.receiveShadow,this.frustumCulled=u.frustumCulled,this.renderOrder=u.renderOrder,this.userData=JSON.parse(JSON.stringify(u.userData)),!0===f)for(var h=0;h<u.children.length;h++){var v=u.children[h];this.add(v.clone())}return this}}]),r}(Ac);return n.DefaultUp=new J(0,1,0),n.DefaultMatrixAutoUpdate=!0,n.DefaultMatrixWorldAutoUpdate=!0,n}(),Vs=new J,ll=new J,VT=new J,cl=new J,Wh=new J,Uh=new J,rF=new J,WT=new J,UT=new J,zT=new J,PS=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new J,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new J,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new J;G(this,n),this.a=a,this.b=t,this.c=r}return j(n,[{key:"set",value:function(t,r,o){return this.a.copy(t),this.b.copy(r),this.c.copy(o),this}},{key:"setFromPointsAndIndices",value:function(t,r,o,u){return this.a.copy(t[r]),this.b.copy(t[o]),this.c.copy(t[u]),this}},{key:"setFromAttributeAndIndices",value:function(t,r,o,u){return this.a.fromBufferAttribute(t,r),this.b.fromBufferAttribute(t,o),this.c.fromBufferAttribute(t,u),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}},{key:"getArea",value:function(){return Vs.subVectors(this.c,this.b),ll.subVectors(this.a,this.b),.5*Vs.cross(ll).length()}},{key:"getMidpoint",value:function(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return n.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,r){return n.getBarycoord(t,this.a,this.b,this.c,r)}},{key:"getUV",value:function(t,r,o,u,f){return n.getUV(t,this.a,this.b,this.c,r,o,u,f)}},{key:"containsPoint",value:function(t){return n.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return n.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(t){return t.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(t,r){var h,v,o=this.a,u=this.b,f=this.c;Wh.subVectors(u,o),Uh.subVectors(f,o),WT.subVectors(t,o);var g=Wh.dot(WT),y=Uh.dot(WT);if(g<=0&&y<=0)return r.copy(o);UT.subVectors(t,u);var _=Wh.dot(UT),C=Uh.dot(UT);if(_>=0&&C<=_)return r.copy(u);var S=g*C-_*y;if(S<=0&&g>=0&&_<=0)return h=g/(g-_),r.copy(o).addScaledVector(Wh,h);zT.subVectors(t,f);var R=Wh.dot(zT),b=Uh.dot(zT);if(b>=0&&R<=b)return r.copy(f);var E=R*y-g*b;if(E<=0&&y>=0&&b<=0)return v=y/(y-b),r.copy(o).addScaledVector(Uh,v);var T=_*b-R*C;if(T<=0&&C-_>=0&&R-b>=0)return rF.subVectors(f,u),v=(C-_)/(C-_+(R-b)),r.copy(u).addScaledVector(rF,v);var D=1/(T+E+S);return h=E*D,v=S*D,r.copy(o).addScaledVector(Wh,h).addScaledVector(Uh,v)}},{key:"equals",value:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}],[{key:"getNormal",value:function(t,r,o,u){u.subVectors(o,r),Vs.subVectors(t,r),u.cross(Vs);var f=u.lengthSq();return f>0?u.multiplyScalar(1/Math.sqrt(f)):u.set(0,0,0)}},{key:"getBarycoord",value:function(t,r,o,u,f){Vs.subVectors(u,r),ll.subVectors(o,r),VT.subVectors(t,r);var h=Vs.dot(Vs),v=Vs.dot(ll),g=Vs.dot(VT),y=ll.dot(ll),_=ll.dot(VT),C=h*y-v*v;if(0===C)return f.set(-2,-1,-1);var S=1/C,R=(y*g-v*_)*S,b=(h*_-v*g)*S;return f.set(1-R-b,b,R)}},{key:"containsPoint",value:function(t,r,o,u){return this.getBarycoord(t,r,o,u,cl),cl.x>=0&&cl.y>=0&&cl.x+cl.y<=1}},{key:"getUV",value:function(t,r,o,u,f,h,v,g){return this.getBarycoord(t,r,o,u,cl),g.set(0,0),g.addScaledVector(f,cl.x),g.addScaledVector(h,cl.y),g.addScaledVector(v,cl.z),g}},{key:"isFrontFacing",value:function(t,r,o,u){return Vs.subVectors(o,r),ll.subVectors(t,r),Vs.cross(ll).dot(u)<0}}]),n}(),Xj=0,Cu=function(n){pe(t,n);var a=ve(t);function t(){var r;return G(this,t),(r=a.call(this)).isMaterial=!0,Object.defineProperty(Xn(r),"id",{value:Xj++}),r.uuid=Xa(),r.name="",r.type="Material",r.blending=1,r.side=0,r.vertexColors=!1,r.opacity=1,r.transparent=!1,r.blendSrc=204,r.blendDst=205,r.blendEquation=100,r.blendSrcAlpha=null,r.blendDstAlpha=null,r.blendEquationAlpha=null,r.depthFunc=3,r.depthTest=!0,r.depthWrite=!0,r.stencilWriteMask=255,r.stencilFunc=519,r.stencilRef=0,r.stencilFuncMask=255,r.stencilFail=7680,r.stencilZFail=7680,r.stencilZPass=7680,r.stencilWrite=!1,r.clippingPlanes=null,r.clipIntersection=!1,r.clipShadows=!1,r.shadowSide=null,r.colorWrite=!0,r.precision=null,r.polygonOffset=!1,r.polygonOffsetFactor=0,r.polygonOffsetUnits=0,r.dithering=!1,r.alphaToCoverage=!1,r.premultipliedAlpha=!1,r.visible=!0,r.toneMapped=!0,r.userData={},r.version=0,r._alphaTest=0,r}return j(t,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(o){this._alphaTest>0!=o>0&&this.version++,this._alphaTest=o}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(o){if(void 0!==o)for(var u in o){var f=o[u];if(void 0!==f){var h=this[u];void 0!==h?h&&h.isColor?h.set(f):h&&h.isVector3&&f&&f.isVector3?h.copy(f):this[u]=f:console.warn("THREE."+this.type+": '"+u+"' is not a property of this material.")}else console.warn("THREE.Material: '"+u+"' parameter is undefined.")}}},{key:"toJSON",value:function(o){var u=void 0===o||"string"==typeof o;u&&(o={textures:{},images:{}});var f={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function h(y){var _=[];for(var C in y){var S=y[C];delete S.metadata,_.push(S)}return _}if(f.uuid=this.uuid,f.type=this.type,""!==this.name&&(f.name=this.name),this.color&&this.color.isColor&&(f.color=this.color.getHex()),void 0!==this.roughness&&(f.roughness=this.roughness),void 0!==this.metalness&&(f.metalness=this.metalness),void 0!==this.sheen&&(f.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(f.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(f.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(f.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(f.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(f.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(f.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(f.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(f.shininess=this.shininess),void 0!==this.clearcoat&&(f.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(f.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(f.clearcoatMap=this.clearcoatMap.toJSON(o).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(f.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(o).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(f.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(o).uuid,f.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(f.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(f.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(f.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(f.iridescenceMap=this.iridescenceMap.toJSON(o).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(f.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(o).uuid),this.map&&this.map.isTexture&&(f.map=this.map.toJSON(o).uuid),this.matcap&&this.matcap.isTexture&&(f.matcap=this.matcap.toJSON(o).uuid),this.alphaMap&&this.alphaMap.isTexture&&(f.alphaMap=this.alphaMap.toJSON(o).uuid),this.lightMap&&this.lightMap.isTexture&&(f.lightMap=this.lightMap.toJSON(o).uuid,f.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(f.aoMap=this.aoMap.toJSON(o).uuid,f.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(f.bumpMap=this.bumpMap.toJSON(o).uuid,f.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(f.normalMap=this.normalMap.toJSON(o).uuid,f.normalMapType=this.normalMapType,f.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(f.displacementMap=this.displacementMap.toJSON(o).uuid,f.displacementScale=this.displacementScale,f.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(f.roughnessMap=this.roughnessMap.toJSON(o).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(f.metalnessMap=this.metalnessMap.toJSON(o).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(f.emissiveMap=this.emissiveMap.toJSON(o).uuid),this.specularMap&&this.specularMap.isTexture&&(f.specularMap=this.specularMap.toJSON(o).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(f.specularIntensityMap=this.specularIntensityMap.toJSON(o).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(f.specularColorMap=this.specularColorMap.toJSON(o).uuid),this.envMap&&this.envMap.isTexture&&(f.envMap=this.envMap.toJSON(o).uuid,void 0!==this.combine&&(f.combine=this.combine)),void 0!==this.envMapIntensity&&(f.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(f.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(f.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(f.gradientMap=this.gradientMap.toJSON(o).uuid),void 0!==this.transmission&&(f.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(f.transmissionMap=this.transmissionMap.toJSON(o).uuid),void 0!==this.thickness&&(f.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(f.thicknessMap=this.thicknessMap.toJSON(o).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(f.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(f.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(f.size=this.size),null!==this.shadowSide&&(f.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(f.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(f.blending=this.blending),0!==this.side&&(f.side=this.side),this.vertexColors&&(f.vertexColors=!0),this.opacity<1&&(f.opacity=this.opacity),!0===this.transparent&&(f.transparent=this.transparent),f.depthFunc=this.depthFunc,f.depthTest=this.depthTest,f.depthWrite=this.depthWrite,f.colorWrite=this.colorWrite,f.stencilWrite=this.stencilWrite,f.stencilWriteMask=this.stencilWriteMask,f.stencilFunc=this.stencilFunc,f.stencilRef=this.stencilRef,f.stencilFuncMask=this.stencilFuncMask,f.stencilFail=this.stencilFail,f.stencilZFail=this.stencilZFail,f.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(f.rotation=this.rotation),!0===this.polygonOffset&&(f.polygonOffset=!0),0!==this.polygonOffsetFactor&&(f.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(f.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(f.linewidth=this.linewidth),void 0!==this.dashSize&&(f.dashSize=this.dashSize),void 0!==this.gapSize&&(f.gapSize=this.gapSize),void 0!==this.scale&&(f.scale=this.scale),!0===this.dithering&&(f.dithering=!0),this.alphaTest>0&&(f.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(f.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(f.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(f.wireframe=this.wireframe),this.wireframeLinewidth>1&&(f.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(f.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(f.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(f.flatShading=this.flatShading),!1===this.visible&&(f.visible=!1),!1===this.toneMapped&&(f.toneMapped=!1),!1===this.fog&&(f.fog=!1),Object.keys(this.userData).length>0&&(f.userData=this.userData),u){var v=h(o.textures),g=h(o.images);v.length>0&&(f.textures=v),g.length>0&&(f.images=g)}return f}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(o){this.name=o.name,this.blending=o.blending,this.side=o.side,this.vertexColors=o.vertexColors,this.opacity=o.opacity,this.transparent=o.transparent,this.blendSrc=o.blendSrc,this.blendDst=o.blendDst,this.blendEquation=o.blendEquation,this.blendSrcAlpha=o.blendSrcAlpha,this.blendDstAlpha=o.blendDstAlpha,this.blendEquationAlpha=o.blendEquationAlpha,this.depthFunc=o.depthFunc,this.depthTest=o.depthTest,this.depthWrite=o.depthWrite,this.stencilWriteMask=o.stencilWriteMask,this.stencilFunc=o.stencilFunc,this.stencilRef=o.stencilRef,this.stencilFuncMask=o.stencilFuncMask,this.stencilFail=o.stencilFail,this.stencilZFail=o.stencilZFail,this.stencilZPass=o.stencilZPass,this.stencilWrite=o.stencilWrite;var u=o.clippingPlanes,f=null;if(null!==u){var h=u.length;f=new Array(h);for(var v=0;v!==h;++v)f[v]=u[v].clone()}return this.clippingPlanes=f,this.clipIntersection=o.clipIntersection,this.clipShadows=o.clipShadows,this.shadowSide=o.shadowSide,this.colorWrite=o.colorWrite,this.precision=o.precision,this.polygonOffset=o.polygonOffset,this.polygonOffsetFactor=o.polygonOffsetFactor,this.polygonOffsetUnits=o.polygonOffsetUnits,this.dithering=o.dithering,this.alphaTest=o.alphaTest,this.alphaToCoverage=o.alphaToCoverage,this.premultipliedAlpha=o.premultipliedAlpha,this.visible=o.visible,this.toneMapped=o.toneMapped,this.userData=JSON.parse(JSON.stringify(o.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(o){!0===o&&this.version++}}]),t}(Ac),dl=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this)).isMeshBasicMaterial=!0,o.type="MeshBasicMaterial",o.color=new un(16777215),o.map=null,o.lightMap=null,o.lightMapIntensity=1,o.aoMap=null,o.aoMapIntensity=1,o.specularMap=null,o.alphaMap=null,o.envMap=null,o.combine=0,o.reflectivity=1,o.refractionRatio=.98,o.wireframe=!1,o.wireframeLinewidth=1,o.wireframeLinecap="round",o.wireframeLinejoin="round",o.fog=!0,o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return ye(ze(t.prototype),"copy",this).call(this,o),this.color.copy(o.color),this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.fog=o.fog,this}}]),t}(Cu),ci=new J,IS=new Ke,Lo=function(){function n(a,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(G(this,n),Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=a,this.itemSize=t,this.count=void 0!==a?a.length/t:0,this.normalized=r,this.usage=xT,this.updateRange={offset:0,count:-1},this.version=0}return j(n,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}},{key:"copyAt",value:function(t,r,o){t*=this.itemSize,o*=r.itemSize;for(var u=0,f=this.itemSize;u<f;u++)this.array[t+u]=r.array[o+u];return this}},{key:"copyArray",value:function(t){return this.array.set(t),this}},{key:"applyMatrix3",value:function(t){if(2===this.itemSize)for(var r=0,o=this.count;r<o;r++)IS.fromBufferAttribute(this,r),IS.applyMatrix3(t),this.setXY(r,IS.x,IS.y);else if(3===this.itemSize)for(var u=0,f=this.count;u<f;u++)ci.fromBufferAttribute(this,u),ci.applyMatrix3(t),this.setXYZ(u,ci.x,ci.y,ci.z);return this}},{key:"applyMatrix4",value:function(t){for(var r=0,o=this.count;r<o;r++)ci.fromBufferAttribute(this,r),ci.applyMatrix4(t),this.setXYZ(r,ci.x,ci.y,ci.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var r=0,o=this.count;r<o;r++)ci.fromBufferAttribute(this,r),ci.applyNormalMatrix(t),this.setXYZ(r,ci.x,ci.y,ci.z);return this}},{key:"transformDirection",value:function(t){for(var r=0,o=this.count;r<o;r++)ci.fromBufferAttribute(this,r),ci.transformDirection(t),this.setXYZ(r,ci.x,ci.y,ci.z);return this}},{key:"set",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,r),this}},{key:"getX",value:function(t){var r=this.array[t*this.itemSize];return this.normalized&&(r=ol(r,this.array)),r}},{key:"setX",value:function(t,r){return this.normalized&&(r=pr(r,this.array)),this.array[t*this.itemSize]=r,this}},{key:"getY",value:function(t){var r=this.array[t*this.itemSize+1];return this.normalized&&(r=ol(r,this.array)),r}},{key:"setY",value:function(t,r){return this.normalized&&(r=pr(r,this.array)),this.array[t*this.itemSize+1]=r,this}},{key:"getZ",value:function(t){var r=this.array[t*this.itemSize+2];return this.normalized&&(r=ol(r,this.array)),r}},{key:"setZ",value:function(t,r){return this.normalized&&(r=pr(r,this.array)),this.array[t*this.itemSize+2]=r,this}},{key:"getW",value:function(t){var r=this.array[t*this.itemSize+3];return this.normalized&&(r=ol(r,this.array)),r}},{key:"setW",value:function(t,r){return this.normalized&&(r=pr(r,this.array)),this.array[t*this.itemSize+3]=r,this}},{key:"setXY",value:function(t,r,o){return t*=this.itemSize,this.normalized&&(r=pr(r,this.array),o=pr(o,this.array)),this.array[t+0]=r,this.array[t+1]=o,this}},{key:"setXYZ",value:function(t,r,o,u){return t*=this.itemSize,this.normalized&&(r=pr(r,this.array),o=pr(o,this.array),u=pr(u,this.array)),this.array[t+0]=r,this.array[t+1]=o,this.array[t+2]=u,this}},{key:"setXYZW",value:function(t,r,o,u,f){return t*=this.itemSize,this.normalized&&(r=pr(r,this.array),o=pr(o,this.array),u=pr(u,this.array),f=pr(f,this.array)),this.array[t+0]=r,this.array[t+1]=o,this.array[t+2]=u,this.array[t+3]=f,this}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==xT&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}]),n}(),iF=function(n){pe(t,n);var a=ve(t);function t(r,o,u){return G(this,t),a.call(this,new Uint16Array(r),o,u)}return t}(Lo),oF=function(n){pe(t,n);var a=ve(t);function t(r,o,u){return G(this,t),a.call(this,new Uint32Array(r),o,u)}return t}(Lo),gn=function(n){pe(t,n);var a=ve(t);function t(r,o,u){return G(this,t),a.call(this,new Float32Array(r),o,u)}return t}(Lo),Jj=0,Ja=new wn,jT=new go,zh=new J,Ca=new Tc,_y=new Tc,Wi=new J,Mr=function(n){pe(t,n);var a=ve(t);function t(){var r;return G(this,t),(r=a.call(this)).isBufferGeometry=!0,Object.defineProperty(Xn(r),"id",{value:Jj++}),r.uuid=Xa(),r.name="",r.type="BufferGeometry",r.index=null,r.attributes={},r.morphAttributes={},r.morphTargetsRelative=!1,r.groups=[],r.boundingBox=null,r.boundingSphere=null,r.drawRange={start:0,count:1/0},r.userData={},r}return j(t,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(o){return this.index=Array.isArray(o)?new(UL(o)?oF:iF)(o,1):o,this}},{key:"getAttribute",value:function(o){return this.attributes[o]}},{key:"setAttribute",value:function(o,u){return this.attributes[o]=u,this}},{key:"deleteAttribute",value:function(o){return delete this.attributes[o],this}},{key:"hasAttribute",value:function(o){return void 0!==this.attributes[o]}},{key:"addGroup",value:function(o,u){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:o,count:u,materialIndex:f})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(o,u){this.drawRange.start=o,this.drawRange.count=u}},{key:"applyMatrix4",value:function(o){var u=this.attributes.position;void 0!==u&&(u.applyMatrix4(o),u.needsUpdate=!0);var f=this.attributes.normal;if(void 0!==f){var h=(new Gs).getNormalMatrix(o);f.applyNormalMatrix(h),f.needsUpdate=!0}var v=this.attributes.tangent;return void 0!==v&&(v.transformDirection(o),v.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(o){return Ja.makeRotationFromQuaternion(o),this.applyMatrix4(Ja),this}},{key:"rotateX",value:function(o){return Ja.makeRotationX(o),this.applyMatrix4(Ja),this}},{key:"rotateY",value:function(o){return Ja.makeRotationY(o),this.applyMatrix4(Ja),this}},{key:"rotateZ",value:function(o){return Ja.makeRotationZ(o),this.applyMatrix4(Ja),this}},{key:"translate",value:function(o,u,f){return Ja.makeTranslation(o,u,f),this.applyMatrix4(Ja),this}},{key:"scale",value:function(o,u,f){return Ja.makeScale(o,u,f),this.applyMatrix4(Ja),this}},{key:"lookAt",value:function(o){return jT.lookAt(o),jT.updateMatrix(),this.applyMatrix4(jT.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(zh).negate(),this.translate(zh.x,zh.y,zh.z),this}},{key:"setFromPoints",value:function(o){for(var u=[],f=0,h=o.length;f<h;f++){var v=o[f];u.push(v.x,v.y,v.z||0)}return this.setAttribute("position",new gn(u,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Tc);var o=this.attributes.position,u=this.morphAttributes.position;if(o&&o.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));if(void 0!==o){if(this.boundingBox.setFromBufferAttribute(o),u)for(var f=0,h=u.length;f<h;f++)Ca.setFromBufferAttribute(u[f]),this.morphTargetsRelative?(Wi.addVectors(this.boundingBox.min,Ca.min),this.boundingBox.expandByPoint(Wi),Wi.addVectors(this.boundingBox.max,Ca.max),this.boundingBox.expandByPoint(Wi)):(this.boundingBox.expandByPoint(Ca.min),this.boundingBox.expandByPoint(Ca.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Bh);var o=this.attributes.position,u=this.morphAttributes.position;if(o&&o.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new J,1/0);if(o){var f=this.boundingSphere.center;if(Ca.setFromBufferAttribute(o),u)for(var h=0,v=u.length;h<v;h++)_y.setFromBufferAttribute(u[h]),this.morphTargetsRelative?(Wi.addVectors(Ca.min,_y.min),Ca.expandByPoint(Wi),Wi.addVectors(Ca.max,_y.max),Ca.expandByPoint(Wi)):(Ca.expandByPoint(_y.min),Ca.expandByPoint(_y.max));Ca.getCenter(f);for(var y=0,_=0,C=o.count;_<C;_++)Wi.fromBufferAttribute(o,_),y=Math.max(y,f.distanceToSquared(Wi));if(u)for(var S=0,R=u.length;S<R;S++)for(var b=u[S],E=this.morphTargetsRelative,T=0,D=b.count;T<D;T++)Wi.fromBufferAttribute(b,T),E&&(zh.fromBufferAttribute(o,T),Wi.add(zh)),y=Math.max(y,f.distanceToSquared(Wi));this.boundingSphere.radius=Math.sqrt(y),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var o=this.index,u=this.attributes;if(null!==o&&void 0!==u.position&&void 0!==u.normal&&void 0!==u.uv){var f=o.array,h=u.position.array,v=u.normal.array,g=u.uv.array,y=h.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Lo(new Float32Array(4*y),4));for(var _=this.getAttribute("tangent").array,C=[],S=[],R=0;R<y;R++)C[R]=new J,S[R]=new J;var b=new J,E=new J,T=new J,D=new Ke,M=new Ke,O=new Ke,L=new J,H=new J,P=this.groups;0===P.length&&(P=[{start:0,count:f.length}]);for(var W=0,X=P.length;W<X;++W)for(var ne=P[W],le=ne.start,k=le,ee=le+ne.count;k<ee;k+=3)z(f[k+0],f[k+1],f[k+2]);for(var ie=new J,se=new J,ae=new J,ge=new J,_e=0,me=P.length;_e<me;++_e)for(var Ge=P[_e],Se=Ge.start,he=Se,Xe=Se+Ge.count;he<Xe;he+=3)Ee(f[he+0]),Ee(f[he+1]),Ee(f[he+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function z(ke,je,We){b.fromArray(h,3*ke),E.fromArray(h,3*je),T.fromArray(h,3*We),D.fromArray(g,2*ke),M.fromArray(g,2*je),O.fromArray(g,2*We),E.sub(b),T.sub(b),M.sub(D),O.sub(D);var Ue=1/(M.x*O.y-O.x*M.y);!isFinite(Ue)||(L.copy(E).multiplyScalar(O.y).addScaledVector(T,-M.y).multiplyScalar(Ue),H.copy(T).multiplyScalar(M.x).addScaledVector(E,-O.x).multiplyScalar(Ue),C[ke].add(L),C[je].add(L),C[We].add(L),S[ke].add(H),S[je].add(H),S[We].add(H))}function Ee(ke){ae.fromArray(v,3*ke),ge.copy(ae);var je=C[ke];ie.copy(je),ie.sub(ae.multiplyScalar(ae.dot(je))).normalize(),se.crossVectors(ge,je);var Ue=se.dot(S[ke])<0?-1:1;_[4*ke]=ie.x,_[4*ke+1]=ie.y,_[4*ke+2]=ie.z,_[4*ke+3]=Ue}}},{key:"computeVertexNormals",value:function(){var o=this.index,u=this.getAttribute("position");if(void 0!==u){var f=this.getAttribute("normal");if(void 0===f)f=new Lo(new Float32Array(3*u.count),3),this.setAttribute("normal",f);else for(var h=0,v=f.count;h<v;h++)f.setXYZ(h,0,0,0);var g=new J,y=new J,_=new J,C=new J,S=new J,R=new J,b=new J,E=new J;if(o)for(var T=0,D=o.count;T<D;T+=3){var M=o.getX(T+0),O=o.getX(T+1),L=o.getX(T+2);g.fromBufferAttribute(u,M),y.fromBufferAttribute(u,O),_.fromBufferAttribute(u,L),b.subVectors(_,y),E.subVectors(g,y),b.cross(E),C.fromBufferAttribute(f,M),S.fromBufferAttribute(f,O),R.fromBufferAttribute(f,L),C.add(b),S.add(b),R.add(b),f.setXYZ(M,C.x,C.y,C.z),f.setXYZ(O,S.x,S.y,S.z),f.setXYZ(L,R.x,R.y,R.z)}else for(var H=0,z=u.count;H<z;H+=3)g.fromBufferAttribute(u,H+0),y.fromBufferAttribute(u,H+1),_.fromBufferAttribute(u,H+2),b.subVectors(_,y),E.subVectors(g,y),b.cross(E),f.setXYZ(H+0,b.x,b.y,b.z),f.setXYZ(H+1,b.x,b.y,b.z),f.setXYZ(H+2,b.x,b.y,b.z);this.normalizeNormals(),f.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var o=this.attributes.normal,u=0,f=o.count;u<f;u++)Wi.fromBufferAttribute(o,u),Wi.normalize(),o.setXYZ(u,Wi.x,Wi.y,Wi.z)}},{key:"toNonIndexed",value:function(){function o(z,P){for(var W=z.array,X=z.itemSize,ne=z.normalized,le=new W.constructor(P.length*X),ue=0,k=0,ee=0,ie=P.length;ee<ie;ee++){ue=z.isInterleavedBufferAttribute?P[ee]*z.data.stride+z.offset:P[ee]*X;for(var se=0;se<X;se++)le[k++]=W[ue++]}return new Lo(le,X,ne)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var u=new t,f=this.index.array,h=this.attributes;for(var v in h){var y=o(h[v],f);u.setAttribute(v,y)}var _=this.morphAttributes;for(var C in _){for(var S=[],R=_[C],b=0,E=R.length;b<E;b++){var D=o(R[b],f);S.push(D)}u.morphAttributes[C]=S}u.morphTargetsRelative=this.morphTargetsRelative;for(var M=this.groups,O=0,L=M.length;O<L;O++){var H=M[O];u.addGroup(H.start,H.count,H.materialIndex)}return u}},{key:"toJSON",value:function(){var o={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),Object.keys(this.userData).length>0&&(o.userData=this.userData),void 0!==this.parameters){var u=this.parameters;for(var f in u)void 0!==u[f]&&(o[f]=u[f]);return o}o.data={attributes:{}};var h=this.index;null!==h&&(o.data.index={type:h.array.constructor.name,array:Array.prototype.slice.call(h.array)});var v=this.attributes;for(var g in v)o.data.attributes[g]=v[g].toJSON(o.data);var _={},C=!1;for(var S in this.morphAttributes){for(var R=this.morphAttributes[S],b=[],E=0,T=R.length;E<T;E++)b.push(R[E].toJSON(o.data));b.length>0&&(_[S]=b,C=!0)}C&&(o.data.morphAttributes=_,o.data.morphTargetsRelative=this.morphTargetsRelative);var M=this.groups;M.length>0&&(o.data.groups=JSON.parse(JSON.stringify(M)));var O=this.boundingSphere;return null!==O&&(o.data.boundingSphere={center:O.center.toArray(),radius:O.radius}),o}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(o){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var u={};this.name=o.name;var f=o.index;null!==f&&this.setIndex(f.clone(u));var h=o.attributes;for(var v in h)this.setAttribute(v,h[v].clone(u));var y=o.morphAttributes;for(var _ in y){for(var C=[],S=y[_],R=0,b=S.length;R<b;R++)C.push(S[R].clone(u));this.morphAttributes[_]=C}this.morphTargetsRelative=o.morphTargetsRelative;for(var E=o.groups,T=0,D=E.length;T<D;T++){var M=E[T];this.addGroup(M.start,M.count,M.materialIndex)}var O=o.boundingBox;null!==O&&(this.boundingBox=O.clone());var L=o.boundingSphere;return null!==L&&(this.boundingSphere=L.clone()),this.drawRange.start=o.drawRange.start,this.drawRange.count=o.drawRange.count,this.userData=o.userData,void 0!==o.parameters&&(this.parameters=Object.assign({},o.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),t}(Ac),aF=new wn,jh=new HT,qT=new Bh,Cy=new J,wy=new J,Sy=new J,YT=new J,LS=new J,FS=new Ke,NS=new Ke,kS=new Ke,KT=new J,GS=new J,na=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mr,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dl;return G(this,t),(r=a.call(this)).isMesh=!0,r.type="Mesh",r.geometry=o,r.material=u,r.updateMorphTargets(),r}return j(t,[{key:"copy",value:function(o,u){return ye(ze(t.prototype),"copy",this).call(this,o,u),void 0!==o.morphTargetInfluences&&(this.morphTargetInfluences=o.morphTargetInfluences.slice()),void 0!==o.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},o.morphTargetDictionary)),this.material=o.material,this.geometry=o.geometry,this}},{key:"updateMorphTargets",value:function(){var u=this.geometry.morphAttributes,f=Object.keys(u);if(f.length>0){var h=u[f[0]];if(void 0!==h){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var v=0,g=h.length;v<g;v++){var y=h[v].name||String(v);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=v}}}}},{key:"getVertexPosition",value:function(o,u){var f=this.geometry,v=f.morphAttributes.position,g=f.morphTargetsRelative;u.fromBufferAttribute(f.attributes.position,o);var y=this.morphTargetInfluences;if(v&&y){LS.set(0,0,0);for(var _=0,C=v.length;_<C;_++){var S=y[_];0!==S&&(YT.fromBufferAttribute(v[_],o),LS.addScaledVector(g?YT:YT.sub(u),S))}u.add(LS)}return this.isSkinnedMesh&&this.boneTransform(o,u),u}},{key:"raycast",value:function(o,u){var f=this.geometry,h=this.material,v=this.matrixWorld;if(void 0!==h&&(null===f.boundingSphere&&f.computeBoundingSphere(),qT.copy(f.boundingSphere),qT.applyMatrix4(v),!1!==o.ray.intersectsSphere(qT)&&(aF.copy(v).invert(),jh.copy(o.ray).applyMatrix4(aF),null===f.boundingBox||!1!==jh.intersectsBox(f.boundingBox)))){var g,y=f.index,_=f.attributes.position,C=f.attributes.uv,S=f.attributes.uv2,R=f.groups,b=f.drawRange;if(null!==y)if(Array.isArray(h))for(var E=0,T=R.length;E<T;E++)for(var D=R[E],M=h[D.materialIndex],H=Math.max(D.start,b.start),z=Math.min(y.count,Math.min(D.start+D.count,b.start+b.count));H<z;H+=3){var P=y.getX(H),W=y.getX(H+1),X=y.getX(H+2);(g=BS(this,M,o,jh,C,S,P,W,X))&&(g.faceIndex=Math.floor(H/3),g.face.materialIndex=D.materialIndex,u.push(g))}else for(var ue=Math.max(0,b.start),k=Math.min(y.count,b.start+b.count);ue<k;ue+=3){var ee=y.getX(ue),ie=y.getX(ue+1),se=y.getX(ue+2);(g=BS(this,h,o,jh,C,S,ee,ie,se))&&(g.faceIndex=Math.floor(ue/3),u.push(g))}else if(void 0!==_)if(Array.isArray(h))for(var ae=0,ge=R.length;ae<ge;ae++)for(var Ee=R[ae],_e=h[Ee.materialIndex],Se=Math.max(Ee.start,b.start),Ae=Math.min(_.count,Math.min(Ee.start+Ee.count,b.start+b.count));Se<Ae;Se+=3)(g=BS(this,_e,o,jh,C,S,Se,Se+1,Se+2))&&(g.faceIndex=Math.floor(Se/3),g.face.materialIndex=Ee.materialIndex,u.push(g));else for(var Ue=Math.max(0,b.start),it=Math.min(_.count,b.start+b.count);Ue<it;Ue+=3)(g=BS(this,h,o,jh,C,S,Ue,Ue+1,Ue+2))&&(g.faceIndex=Math.floor(Ue/3),u.push(g))}}}]),t}(go);function BS(n,a,t,r,o,u,f,h,v){n.getVertexPosition(f,Cy),n.getVertexPosition(h,wy),n.getVertexPosition(v,Sy);var g=function(n,a,t,r,o,u,f,h){if(null===(1===a.side?r.intersectTriangle(f,u,o,!0,h):r.intersectTriangle(o,u,f,0===a.side,h)))return null;GS.copy(h),GS.applyMatrix4(n.matrixWorld);var g=t.ray.origin.distanceTo(GS);return g<t.near||g>t.far?null:{distance:g,point:GS.clone(),object:n}}(n,a,t,r,Cy,wy,Sy,KT);if(g){o&&(FS.fromBufferAttribute(o,f),NS.fromBufferAttribute(o,h),kS.fromBufferAttribute(o,v),g.uv=PS.getUV(KT,Cy,wy,Sy,FS,NS,kS,new Ke)),u&&(FS.fromBufferAttribute(u,f),NS.fromBufferAttribute(u,h),kS.fromBufferAttribute(u,v),g.uv2=PS.getUV(KT,Cy,wy,Sy,FS,NS,kS,new Ke));var y={a:f,b:h,c:v,normal:new J,materialIndex:0};PS.getNormal(Cy,wy,Sy,y.normal),g.face=y}return g}var HS=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;G(this,t),(r=a.call(this)).type="BoxGeometry",r.parameters={width:o,height:u,depth:f,widthSegments:h,heightSegments:v,depthSegments:g};var y=Xn(r);h=Math.floor(h),v=Math.floor(v),g=Math.floor(g);var _=[],C=[],S=[],R=[],b=0,E=0;function T(D,M,O,L,H,z,P,W,X,ne,le){for(var ue=z/X,k=P/ne,ee=z/2,ie=P/2,se=W/2,ae=X+1,ge=ne+1,Ee=0,_e=0,me=new J,Ge=0;Ge<ge;Ge++)for(var Se=Ge*k-ie,Ae=0;Ae<ae;Ae++)me[D]=(Ae*ue-ee)*L,me[M]=Se*H,me[O]=se,C.push(me.x,me.y,me.z),me[D]=0,me[M]=0,me[O]=W>0?1:-1,S.push(me.x,me.y,me.z),R.push(Ae/X),R.push(1-Ge/ne),Ee+=1;for(var Xe=0;Xe<ne;Xe++)for(var ke=0;ke<X;ke++){var We=b+ke+ae*(Xe+1),Ue=b+(ke+1)+ae*(Xe+1),it=b+(ke+1)+ae*Xe;_.push(b+ke+ae*Xe,We,it),_.push(We,Ue,it),_e+=6}y.addGroup(E,_e,le),E+=_e,b+=Ee}return T("z","y","x",-1,-1,f,u,o,g,v,0),T("z","y","x",1,-1,f,u,-o,g,v,1),T("x","z","y",1,1,o,f,u,h,g,2),T("x","z","y",1,-1,o,f,-u,h,g,3),T("x","y","z",1,-1,o,u,f,h,v,4),T("x","y","z",-1,-1,o,u,-f,h,v,5),r.setIndex(_),r.setAttribute("position",new gn(C,3)),r.setAttribute("normal",new gn(S,3)),r.setAttribute("uv",new gn(R,2)),r}return j(t,null,[{key:"fromJSON",value:function(o){return new t(o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments)}}]),t}(Mr);function qh(n){var a={};for(var t in n)for(var r in a[t]={},n[t]){var o=n[t][r];a[t][r]=o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.clone():Array.isArray(o)?o.slice():o}return a}function Fo(n){for(var a={},t=0;t<n.length;t++){var r=qh(n[t]);for(var o in r)a[o]=r[o]}return a}function sF(n){return null===n.getRenderTarget()&&n.outputEncoding===Yn?yu:fy}var e4={clone:qh,merge:Fo},df=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this)).isShaderMaterial=!0,o.type="ShaderMaterial",o.defines={},o.uniforms={},o.uniformsGroups=[],o.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",o.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",o.linewidth=1,o.wireframe=!1,o.wireframeLinewidth=1,o.fog=!1,o.lights=!1,o.clipping=!1,o.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},o.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},o.index0AttributeName=void 0,o.uniformsNeedUpdate=!1,o.glslVersion=null,void 0!==r&&o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return ye(ze(t.prototype),"copy",this).call(this,o),this.fragmentShader=o.fragmentShader,this.vertexShader=o.vertexShader,this.uniforms=qh(o.uniforms),this.uniformsGroups=function(n){for(var a=[],t=0;t<n.length;t++)a.push(n[t].clone());return a}(o.uniformsGroups),this.defines=Object.assign({},o.defines),this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.fog=o.fog,this.lights=o.lights,this.clipping=o.clipping,this.extensions=Object.assign({},o.extensions),this.glslVersion=o.glslVersion,this}},{key:"toJSON",value:function(o){var u=ye(ze(t.prototype),"toJSON",this).call(this,o);for(var f in u.glslVersion=this.glslVersion,u.uniforms={},this.uniforms){var v=this.uniforms[f].value;u.uniforms[f]=v&&v.isTexture?{type:"t",value:v.toJSON(o).uuid}:v&&v.isColor?{type:"c",value:v.getHex()}:v&&v.isVector2?{type:"v2",value:v.toArray()}:v&&v.isVector3?{type:"v3",value:v.toArray()}:v&&v.isVector4?{type:"v4",value:v.toArray()}:v&&v.isMatrix3?{type:"m3",value:v.toArray()}:v&&v.isMatrix4?{type:"m4",value:v.toArray()}:{value:v}}Object.keys(this.defines).length>0&&(u.defines=this.defines),u.vertexShader=this.vertexShader,u.fragmentShader=this.fragmentShader;var g={};for(var y in this.extensions)!0===this.extensions[y]&&(g[y]=!0);return Object.keys(g).length>0&&(u.extensions=g),u}}]),t}(Cu),$T=function(n){pe(t,n);var a=ve(t);function t(){var r;return G(this,t),(r=a.call(this)).isCamera=!0,r.type="Camera",r.matrixWorldInverse=new wn,r.projectionMatrix=new wn,r.projectionMatrixInverse=new wn,r}return j(t,[{key:"copy",value:function(o,u){return ye(ze(t.prototype),"copy",this).call(this,o,u),this.matrixWorldInverse.copy(o.matrixWorldInverse),this.projectionMatrix.copy(o.projectionMatrix),this.projectionMatrixInverse.copy(o.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(o){this.updateWorldMatrix(!0,!1);var u=this.matrixWorld.elements;return o.set(-u[8],-u[9],-u[10]).normalize()}},{key:"updateMatrixWorld",value:function(o){ye(ze(t.prototype),"updateMatrixWorld",this).call(this,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(o,u){ye(ze(t.prototype),"updateWorldMatrix",this).call(this,o,u),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(go),di=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return G(this,t),(r=a.call(this)).isPerspectiveCamera=!0,r.type="PerspectiveCamera",r.fov=o,r.zoom=1,r.near=f,r.far=h,r.focus=10,r.aspect=u,r.view=null,r.filmGauge=35,r.filmOffset=0,r.updateProjectionMatrix(),r}return j(t,[{key:"copy",value:function(o,u){return ye(ze(t.prototype),"copy",this).call(this,o,u),this.fov=o.fov,this.zoom=o.zoom,this.near=o.near,this.far=o.far,this.focus=o.focus,this.aspect=o.aspect,this.view=null===o.view?null:Object.assign({},o.view),this.filmGauge=o.filmGauge,this.filmOffset=o.filmOffset,this}},{key:"setFocalLength",value:function(o){var u=.5*this.getFilmHeight()/o;this.fov=2*py*Math.atan(u),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var o=Math.tan(.5*Lh*this.fov);return.5*this.getFilmHeight()/o}},{key:"getEffectiveFOV",value:function(){return 2*py*Math.atan(Math.tan(.5*Lh*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(o,u,f,h,v,g){this.aspect=o/u,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=u,this.view.offsetX=f,this.view.offsetY=h,this.view.width=v,this.view.height=g,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var o=this.near,u=o*Math.tan(.5*Lh*this.fov)/this.zoom,f=2*u,h=this.aspect*f,v=-.5*h,g=this.view;if(null!==this.view&&this.view.enabled){var y=g.fullWidth,_=g.fullHeight;v+=g.offsetX*h/y,u-=g.offsetY*f/_,h*=g.width/y,f*=g.height/_}var C=this.filmOffset;0!==C&&(v+=o*C/this.getFilmWidth()),this.projectionMatrix.makePerspective(v,v+h,u,u-f,o,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(o){var u=ye(ze(t.prototype),"toJSON",this).call(this,o);return u.object.fov=this.fov,u.object.zoom=this.zoom,u.object.near=this.near,u.object.far=this.far,u.object.focus=this.focus,u.object.aspect=this.aspect,null!==this.view&&(u.object.view=Object.assign({},this.view)),u.object.filmGauge=this.filmGauge,u.object.filmOffset=this.filmOffset,u}}]),t}($T),r4=function(n){pe(t,n);var a=ve(t);function t(r,o,u){var f;G(this,t),(f=a.call(this)).type="CubeCamera",f.renderTarget=u;var h=new di(-90,1,r,o);h.layers=f.layers,h.up.set(0,1,0),h.lookAt(1,0,0),f.add(h);var v=new di(-90,1,r,o);v.layers=f.layers,v.up.set(0,1,0),v.lookAt(-1,0,0),f.add(v);var g=new di(-90,1,r,o);g.layers=f.layers,g.up.set(0,0,-1),g.lookAt(0,1,0),f.add(g);var y=new di(-90,1,r,o);y.layers=f.layers,y.up.set(0,0,1),y.lookAt(0,-1,0),f.add(y);var _=new di(-90,1,r,o);_.layers=f.layers,_.up.set(0,1,0),_.lookAt(0,0,1),f.add(_);var C=new di(-90,1,r,o);return C.layers=f.layers,C.up.set(0,1,0),C.lookAt(0,0,-1),f.add(C),f}return j(t,[{key:"update",value:function(o,u){null===this.parent&&this.updateMatrixWorld();var f=this.renderTarget,h=Ir(this.children,6),v=h[0],g=h[1],y=h[2],_=h[3],C=h[4],S=h[5],R=o.getRenderTarget(),b=o.toneMapping,E=o.xr.enabled;o.toneMapping=0,o.xr.enabled=!1;var T=f.texture.generateMipmaps;f.texture.generateMipmaps=!1,o.setRenderTarget(f,0),o.render(u,v),o.setRenderTarget(f,1),o.render(u,g),o.setRenderTarget(f,2),o.render(u,y),o.setRenderTarget(f,3),o.render(u,_),o.setRenderTarget(f,4),o.render(u,C),f.texture.generateMipmaps=T,o.setRenderTarget(f,5),o.render(u,S),o.setRenderTarget(R),o.toneMapping=b,o.xr.enabled=E,f.texture.needsPMREMUpdate=!0}}]),t}(go),uF=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f,h,v,g,y,_,C){var S;return G(this,t),(S=a.call(this,r=void 0!==r?r:[],o=void 0!==o?o:301,u,f,h,v,g,y,_,C)).isCubeTexture=!0,S.flipY=!1,S}return j(t,[{key:"images",get:function(){return this.image},set:function(o){this.image=o}}]),t}(_u),i4=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};G(this,t),(r=a.call(this,o,o,u)).isWebGLCubeRenderTarget=!0;var f={width:o,height:o,depth:1},h=[f,f,f,f,f,f];return r.texture=new uF(h,u.mapping,u.wrapS,u.wrapT,u.magFilter,u.minFilter,u.format,u.type,u.anisotropy,u.encoding),r.texture.isRenderTargetTexture=!0,r.texture.generateMipmaps=void 0!==u.generateMipmaps&&u.generateMipmaps,r.texture.minFilter=void 0!==u.minFilter?u.minFilter:Po,r}return j(t,[{key:"fromEquirectangularTexture",value:function(o,u){this.texture.type=u.type,this.texture.encoding=u.encoding,this.texture.generateMipmaps=u.generateMipmaps,this.texture.minFilter=u.minFilter,this.texture.magFilter=u.magFilter;var h=new HS(5,5,5),v=new df({name:"CubemapFromEquirect",uniforms:qh({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});v.uniforms.tEquirect.value=u;var g=new na(h,v),y=u.minFilter;return u.minFilter===xc&&(u.minFilter=Po),new r4(1,10,this).update(o,g),u.minFilter=y,g.geometry.dispose(),g.material.dispose(),this}},{key:"clear",value:function(o,u,f,h){for(var v=o.getRenderTarget(),g=0;g<6;g++)o.setRenderTarget(this,g),o.clear(u,f,h);o.setRenderTarget(v)}}]),t}(sf),XT=new J,o4=new J,a4=new Gs,ff=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new J(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;G(this,n),this.isPlane=!0,this.normal=a,this.constant=t}return j(n,[{key:"set",value:function(t,r){return this.normal.copy(t),this.constant=r,this}},{key:"setComponents",value:function(t,r,o,u){return this.normal.set(t,r,o),this.constant=u,this}},{key:"setFromNormalAndCoplanarPoint",value:function(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(t,r,o){var u=XT.subVectors(o,r).cross(o4.subVectors(t,r)).normalize();return this.setFromNormalAndCoplanarPoint(u,t),this}},{key:"copy",value:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this}},{key:"normalize",value:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(t){return this.normal.dot(t)+this.constant}},{key:"distanceToSphere",value:function(t){return this.distanceToPoint(t.center)-t.radius}},{key:"projectPoint",value:function(t,r){return r.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}},{key:"intersectLine",value:function(t,r){var o=t.delta(XT),u=this.normal.dot(o);if(0===u)return 0===this.distanceToPoint(t.start)?r.copy(t.start):null;var f=-(t.start.dot(this.normal)+this.constant)/u;return f<0||f>1?null:r.copy(o).multiplyScalar(f).add(t.start)}},{key:"intersectsLine",value:function(t){var r=this.distanceToPoint(t.start),o=this.distanceToPoint(t.end);return r<0&&o>0||o<0&&r>0}},{key:"intersectsBox",value:function(t){return t.intersectsPlane(this)}},{key:"intersectsSphere",value:function(t){return t.intersectsPlane(this)}},{key:"coplanarPoint",value:function(t){return t.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(t,r){var o=r||a4.getNormalMatrix(t),u=this.coplanarPoint(XT).applyMatrix4(t),f=this.normal.applyMatrix3(o).normalize();return this.constant=-u.dot(f),this}},{key:"translate",value:function(t){return this.constant-=t.dot(this.normal),this}},{key:"equals",value:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(),$h=new Bh,VS=new J,JT=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ff,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ff,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ff,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ff,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new ff,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new ff;G(this,n),this.planes=[a,t,r,o,u,f]}return j(n,[{key:"set",value:function(t,r,o,u,f,h){var v=this.planes;return v[0].copy(t),v[1].copy(r),v[2].copy(o),v[3].copy(u),v[4].copy(f),v[5].copy(h),this}},{key:"copy",value:function(t){for(var r=this.planes,o=0;o<6;o++)r[o].copy(t.planes[o]);return this}},{key:"setFromProjectionMatrix",value:function(t){var r=this.planes,o=t.elements,u=o[0],f=o[1],h=o[2],v=o[3],g=o[4],y=o[5],_=o[6],C=o[7],S=o[8],R=o[9],b=o[10],E=o[11],T=o[12],D=o[13],M=o[14],O=o[15];return r[0].setComponents(v-u,C-g,E-S,O-T).normalize(),r[1].setComponents(v+u,C+g,E+S,O+T).normalize(),r[2].setComponents(v+f,C+y,E+R,O+D).normalize(),r[3].setComponents(v-f,C-y,E-R,O-D).normalize(),r[4].setComponents(v-h,C-_,E-b,O-M).normalize(),r[5].setComponents(v+h,C+_,E+b,O+M).normalize(),this}},{key:"intersectsObject",value:function(t){var r=t.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),$h.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere($h)}},{key:"intersectsSprite",value:function(t){return $h.center.set(0,0,0),$h.radius=.7071067811865476,$h.applyMatrix4(t.matrixWorld),this.intersectsSphere($h)}},{key:"intersectsSphere",value:function(t){for(var r=this.planes,o=t.center,u=-t.radius,f=0;f<6;f++)if(r[f].distanceToPoint(o)<u)return!1;return!0}},{key:"intersectsBox",value:function(t){for(var r=this.planes,o=0;o<6;o++){var u=r[o];if(VS.x=u.normal.x>0?t.max.x:t.min.x,VS.y=u.normal.y>0?t.max.y:t.min.y,VS.z=u.normal.z>0?t.max.z:t.min.z,u.distanceToPoint(VS)<0)return!1}return!0}},{key:"containsPoint",value:function(t){for(var r=this.planes,o=0;o<6;o++)if(r[o].distanceToPoint(t)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}();function lF(){var n=null,a=!1,t=null,r=null;function o(u,f){t(u,f),r=n.requestAnimationFrame(o)}return{start:function(){!0!==a&&null!==t&&(r=n.requestAnimationFrame(o),a=!0)},stop:function(){n.cancelAnimationFrame(r),a=!1},setAnimationLoop:function(f){t=f},setContext:function(f){n=f}}}function s4(n,a){var t=a.isWebGL2,r=new WeakMap;return{get:function(g){return g.isInterleavedBufferAttribute&&(g=g.data),r.get(g)},remove:function(g){g.isInterleavedBufferAttribute&&(g=g.data);var y=r.get(g);y&&(n.deleteBuffer(y.buffer),r.delete(g))},update:function(g,y){if(g.isGLBufferAttribute){var _=r.get(g);(!_||_.version<g.version)&&r.set(g,{buffer:g.buffer,type:g.type,bytesPerElement:g.elementSize,version:g.version})}else{g.isInterleavedBufferAttribute&&(g=g.data);var C=r.get(g);void 0===C?r.set(g,function(g,y){var R,_=g.array,C=g.usage,S=n.createBuffer();if(n.bindBuffer(y,S),n.bufferData(y,_,C),g.onUploadCallback(),_ instanceof Float32Array)R=5126;else if(_ instanceof Uint16Array)if(g.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");R=5131}else R=5123;else if(_ instanceof Int16Array)R=5122;else if(_ instanceof Uint32Array)R=5125;else if(_ instanceof Int32Array)R=5124;else if(_ instanceof Int8Array)R=5120;else if(_ instanceof Uint8Array)R=5121;else{if(!(_ instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_);R=5121}return{buffer:S,type:R,bytesPerElement:_.BYTES_PER_ELEMENT,version:g.version}}(g,y)):C.version<g.version&&(function(g,y,_){var C=y.array,S=y.updateRange;n.bindBuffer(_,g),-1===S.count?n.bufferSubData(_,0,C):(t?n.bufferSubData(_,S.offset*C.BYTES_PER_ELEMENT,C,S.offset,S.count):n.bufferSubData(_,S.offset*C.BYTES_PER_ELEMENT,C.subarray(S.offset,S.offset+S.count)),S.count=-1),y.onUploadCallback()}(C.buffer,g,y),C.version=g.version)}}}}var cF=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;G(this,t),(r=a.call(this)).type="PlaneGeometry",r.parameters={width:o,height:u,widthSegments:f,heightSegments:h};for(var v=o/2,g=u/2,y=Math.floor(f),_=Math.floor(h),C=y+1,S=_+1,R=o/y,b=u/_,E=[],T=[],D=[],M=[],O=0;O<S;O++)for(var L=O*b-g,H=0;H<C;H++){var z=H*R-v;T.push(z,-L,0),D.push(0,0,1),M.push(H/y),M.push(1-O/_)}for(var P=0;P<_;P++)for(var W=0;W<y;W++){var X=W+C*P,ne=W+C*(P+1),le=W+1+C*(P+1),ue=W+1+C*P;E.push(X,ne,ue),E.push(ne,le,ue)}return r.setIndex(E),r.setAttribute("position",new gn(T,3)),r.setAttribute("normal",new gn(D,3)),r.setAttribute("uv",new gn(M,2)),r}return j(t,null,[{key:"fromJSON",value:function(o){return new t(o.width,o.height,o.widthSegments,o.heightSegments)}}]),t}(Mr),Rn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},ut={common:{diffuse:{value:new un(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Gs},uv2Transform:{value:new Gs},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ke(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new un(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new un(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Gs}},sprite:{diffuse:{value:new un(16777215)},opacity:{value:1},center:{value:new Ke(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Gs}}},wu={basic:{uniforms:Fo([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.fog]),vertexShader:Rn.meshbasic_vert,fragmentShader:Rn.meshbasic_frag},lambert:{uniforms:Fo([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new un(0)}}]),vertexShader:Rn.meshlambert_vert,fragmentShader:Rn.meshlambert_frag},phong:{uniforms:Fo([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new un(0)},specular:{value:new un(1118481)},shininess:{value:30}}]),vertexShader:Rn.meshphong_vert,fragmentShader:Rn.meshphong_frag},standard:{uniforms:Fo([ut.common,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.roughnessmap,ut.metalnessmap,ut.fog,ut.lights,{emissive:{value:new un(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Rn.meshphysical_vert,fragmentShader:Rn.meshphysical_frag},toon:{uniforms:Fo([ut.common,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.gradientmap,ut.fog,ut.lights,{emissive:{value:new un(0)}}]),vertexShader:Rn.meshtoon_vert,fragmentShader:Rn.meshtoon_frag},matcap:{uniforms:Fo([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,{matcap:{value:null}}]),vertexShader:Rn.meshmatcap_vert,fragmentShader:Rn.meshmatcap_frag},points:{uniforms:Fo([ut.points,ut.fog]),vertexShader:Rn.points_vert,fragmentShader:Rn.points_frag},dashed:{uniforms:Fo([ut.common,ut.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Rn.linedashed_vert,fragmentShader:Rn.linedashed_frag},depth:{uniforms:Fo([ut.common,ut.displacementmap]),vertexShader:Rn.depth_vert,fragmentShader:Rn.depth_frag},normal:{uniforms:Fo([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,{opacity:{value:1}}]),vertexShader:Rn.meshnormal_vert,fragmentShader:Rn.meshnormal_frag},sprite:{uniforms:Fo([ut.sprite,ut.fog]),vertexShader:Rn.sprite_vert,fragmentShader:Rn.sprite_frag},background:{uniforms:{uvTransform:{value:new Gs},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Rn.background_vert,fragmentShader:Rn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Rn.backgroundCube_vert,fragmentShader:Rn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Rn.cube_vert,fragmentShader:Rn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Rn.equirect_vert,fragmentShader:Rn.equirect_frag},distanceRGBA:{uniforms:Fo([ut.common,ut.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Rn.distanceRGBA_vert,fragmentShader:Rn.distanceRGBA_frag},shadow:{uniforms:Fo([ut.lights,ut.fog,{color:{value:new un(0)},opacity:{value:1}}]),vertexShader:Rn.shadow_vert,fragmentShader:Rn.shadow_frag}};wu.physical={uniforms:Fo([wu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ke(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new un(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ke},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new un(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new un(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Rn.meshphysical_vert,fragmentShader:Rn.meshphysical_frag};var WS={r:0,b:0,g:0};function H5(n,a,t,r,o,u,f){var g,y,h=new un(0),v=!0===u?0:1,_=null,C=0,S=null;function b(E,T){E.getRGB(WS,sF(n)),r.buffers.color.setClear(WS.r,WS.g,WS.b,T,f)}return{getClearColor:function(){return h},setClearColor:function(T){var D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;h.set(T),b(h,v=D)},getClearAlpha:function(){return v},setClearAlpha:function(T){b(h,v=T)},render:function(E,T){var D=!1,M=!0===T.isScene?T.background:null;M&&M.isTexture&&(M=(T.backgroundBlurriness>0?t:a).get(M));var L=n.xr,H=L.getSession&&L.getSession();H&&"additive"===H.environmentBlendMode&&(M=null),null===M?b(h,v):M&&M.isColor&&(b(M,1),D=!0),(n.autoClear||D)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),M&&(M.isCubeTexture||306===M.mapping)?(void 0===y&&((y=new na(new HS(1,1,1),new df({name:"BackgroundCubeMaterial",uniforms:qh(wu.backgroundCube.uniforms),vertexShader:wu.backgroundCube.vertexShader,fragmentShader:wu.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),y.geometry.deleteAttribute("uv"),y.onBeforeRender=function(z,P,W){this.matrixWorld.copyPosition(W.matrixWorld)},Object.defineProperty(y.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(y)),y.material.uniforms.envMap.value=M,y.material.uniforms.flipEnvMap.value=M.isCubeTexture&&!1===M.isRenderTargetTexture?-1:1,y.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,y.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,y.material.toneMapped=M.encoding!==Yn,(_!==M||C!==M.version||S!==n.toneMapping)&&(y.material.needsUpdate=!0,_=M,C=M.version,S=n.toneMapping),y.layers.enableAll(),E.unshift(y,y.geometry,y.material,0,0,null)):M&&M.isTexture&&(void 0===g&&((g=new na(new cF(2,2),new df({name:"BackgroundMaterial",uniforms:qh(wu.background.uniforms),vertexShader:wu.background.vertexShader,fragmentShader:wu.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(g.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(g)),g.material.uniforms.t2D.value=M,g.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,g.material.toneMapped=M.encoding!==Yn,!0===M.matrixAutoUpdate&&M.updateMatrix(),g.material.uniforms.uvTransform.value.copy(M.matrix),(_!==M||C!==M.version||S!==n.toneMapping)&&(g.material.needsUpdate=!0,_=M,C=M.version,S=n.toneMapping),g.layers.enableAll(),E.unshift(g,g.geometry,g.material,0,0,null))}}}function V5(n,a,t,r){var o=n.getParameter(34921),u=r.isWebGL2?null:a.get("OES_vertex_array_object"),f=r.isWebGL2||null!==u,h={},v=E(null),g=v,y=!1;function S(k){return r.isWebGL2?n.bindVertexArray(k):u.bindVertexArrayOES(k)}function R(k){return r.isWebGL2?n.deleteVertexArray(k):u.deleteVertexArrayOES(k)}function E(k){for(var ee=[],ie=[],se=[],ae=0;ae<o;ae++)ee[ae]=0,ie[ae]=0,se[ae]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ee,enabledAttributes:ie,attributeDivisors:se,object:k,attributes:{},index:null}}function M(){for(var k=g.newAttributes,ee=0,ie=k.length;ee<ie;ee++)k[ee]=0}function O(k){L(k,0)}function L(k,ee){var se=g.enabledAttributes,ae=g.attributeDivisors;g.newAttributes[k]=1,0===se[k]&&(n.enableVertexAttribArray(k),se[k]=1),ae[k]!==ee&&((r.isWebGL2?n:a.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](k,ee),ae[k]=ee)}function H(){for(var k=g.newAttributes,ee=g.enabledAttributes,ie=0,se=ee.length;ie<se;ie++)ee[ie]!==k[ie]&&(n.disableVertexAttribArray(ie),ee[ie]=0)}function z(k,ee,ie,se,ae,ge){!0!==r.isWebGL2||5124!==ie&&5125!==ie?n.vertexAttribPointer(k,ee,ie,se,ae,ge):n.vertexAttribIPointer(k,ee,ie,ae,ge)}function le(){ue(),y=!0,g!==v&&S((g=v).object)}function ue(){v.geometry=null,v.program=null,v.wireframe=!1}return{setup:function(k,ee,ie,se,ae){var ge=!1;if(f){var Ee=function(k,ee,ie){var se=!0===ie.wireframe,ae=h[k.id];void 0===ae&&(h[k.id]=ae={});var ge=ae[ee.id];void 0===ge&&(ae[ee.id]=ge={});var Ee=ge[se];return void 0===Ee&&(Ee=E(r.isWebGL2?n.createVertexArray():u.createVertexArrayOES()),ge[se]=Ee),Ee}(se,ie,ee);g!==Ee&&S((g=Ee).object),ge=function(k,ee,ie,se){var ae=g.attributes,ge=ee.attributes,Ee=0,_e=ie.getAttributes();for(var me in _e)if(_e[me].location>=0){var Se=ae[me],Ae=ge[me];if(void 0===Ae&&("instanceMatrix"===me&&k.instanceMatrix&&(Ae=k.instanceMatrix),"instanceColor"===me&&k.instanceColor&&(Ae=k.instanceColor)),void 0===Se||Se.attribute!==Ae||Ae&&Se.data!==Ae.data)return!0;Ee++}return g.attributesNum!==Ee||g.index!==se}(k,se,ie,ae),ge&&function(k,ee,ie,se){var ae={},ge=ee.attributes,Ee=0,_e=ie.getAttributes();for(var me in _e)if(_e[me].location>=0){var Se=ge[me];void 0===Se&&("instanceMatrix"===me&&k.instanceMatrix&&(Se=k.instanceMatrix),"instanceColor"===me&&k.instanceColor&&(Se=k.instanceColor));var Ae={};Ae.attribute=Se,Se&&Se.data&&(Ae.data=Se.data),ae[me]=Ae,Ee++}g.attributes=ae,g.attributesNum=Ee,g.index=se}(k,se,ie,ae)}else{var _e=!0===ee.wireframe;(g.geometry!==se.id||g.program!==ie.id||g.wireframe!==_e)&&(g.geometry=se.id,g.program=ie.id,g.wireframe=_e,ge=!0)}null!==ae&&t.update(ae,34963),(ge||y)&&(y=!1,function(k,ee,ie,se){if(!1!==r.isWebGL2||!k.isInstancedMesh&&!se.isInstancedBufferGeometry||null!==a.get("ANGLE_instanced_arrays")){M();var ae=se.attributes,ge=ie.getAttributes(),Ee=ee.defaultAttributeValues;for(var _e in ge){var me=ge[_e];if(me.location>=0){var Ge=ae[_e];if(void 0===Ge&&("instanceMatrix"===_e&&k.instanceMatrix&&(Ge=k.instanceMatrix),"instanceColor"===_e&&k.instanceColor&&(Ge=k.instanceColor)),void 0!==Ge){var Se=Ge.normalized,Ae=Ge.itemSize,he=t.get(Ge);if(void 0===he)continue;var Xe=he.buffer,ke=he.type,je=he.bytesPerElement;if(Ge.isInterleavedBufferAttribute){var We=Ge.data,Ue=We.stride,it=Ge.offset;if(We.isInstancedInterleavedBuffer){for(var Ht=0;Ht<me.locationSize;Ht++)L(me.location+Ht,We.meshPerAttribute);!0!==k.isInstancedMesh&&void 0===se._maxInstanceCount&&(se._maxInstanceCount=We.meshPerAttribute*We.count)}else for(var et=0;et<me.locationSize;et++)O(me.location+et);n.bindBuffer(34962,Xe);for(var Ot=0;Ot<me.locationSize;Ot++)z(me.location+Ot,Ae/me.locationSize,ke,Se,Ue*je,(it+Ae/me.locationSize*Ot)*je)}else{if(Ge.isInstancedBufferAttribute){for(var Sn=0;Sn<me.locationSize;Sn++)L(me.location+Sn,Ge.meshPerAttribute);!0!==k.isInstancedMesh&&void 0===se._maxInstanceCount&&(se._maxInstanceCount=Ge.meshPerAttribute*Ge.count)}else for(var _n=0;_n<me.locationSize;_n++)O(me.location+_n);n.bindBuffer(34962,Xe);for(var xt=0;xt<me.locationSize;xt++)z(me.location+xt,Ae/me.locationSize,ke,Se,Ae*je,Ae/me.locationSize*xt*je)}}else if(void 0!==Ee){var fn=Ee[_e];if(void 0!==fn)switch(fn.length){case 2:n.vertexAttrib2fv(me.location,fn);break;case 3:n.vertexAttrib3fv(me.location,fn);break;case 4:n.vertexAttrib4fv(me.location,fn);break;default:n.vertexAttrib1fv(me.location,fn)}}}}H()}}(k,ee,ie,se),null!==ae&&n.bindBuffer(34963,t.get(ae).buffer))},reset:le,resetDefaultState:ue,dispose:function(){for(var k in le(),h){var ee=h[k];for(var ie in ee){var se=ee[ie];for(var ae in se)R(se[ae].object),delete se[ae];delete ee[ie]}delete h[k]}},releaseStatesOfGeometry:function(k){if(void 0!==h[k.id]){var ee=h[k.id];for(var ie in ee){var se=ee[ie];for(var ae in se)R(se[ae].object),delete se[ae];delete ee[ie]}delete h[k.id]}},releaseStatesOfProgram:function(k){for(var ee in h){var ie=h[ee];if(void 0!==ie[k.id]){var se=ie[k.id];for(var ae in se)R(se[ae].object),delete se[ae];delete ie[k.id]}}},initAttributes:M,enableAttribute:O,disableUnusedAttributes:H}}function W5(n,a,t,r){var u,o=r.isWebGL2;this.setMode=function(g){u=g},this.render=function(g,y){n.drawArrays(u,g,y),t.update(y,u,1)},this.renderInstances=function(g,y,_){if(0!==_){var C,S;if(o)C=n,S="drawArraysInstanced";else if(S="drawArraysInstancedANGLE",null===(C=a.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");C[S](u,g,y,_),t.update(y,u,_)}}}function U5(n,a,t){var r;function u(z){if("highp"===z){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";z="mediump"}return"mediump"===z&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var f="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&n instanceof WebGL2ComputeRenderingContext,h=void 0!==t.precision?t.precision:"highp",v=u(h);v!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",v,"instead."),h=v);var g=f||a.has("WEBGL_draw_buffers"),y=!0===t.logarithmicDepthBuffer,_=n.getParameter(34930),C=n.getParameter(35660),S=n.getParameter(3379),R=n.getParameter(34076),b=n.getParameter(34921),E=n.getParameter(36347),T=n.getParameter(36348),D=n.getParameter(36349),M=C>0,O=f||a.has("OES_texture_float");return{isWebGL2:f,drawBuffers:g,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===a.has("EXT_texture_filter_anisotropic")){var z=a.get("EXT_texture_filter_anisotropic");r=n.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:u,precision:h,logarithmicDepthBuffer:y,maxTextures:_,maxVertexTextures:C,maxTextureSize:S,maxCubemapSize:R,maxAttributes:b,maxVertexUniforms:E,maxVaryings:T,maxFragmentUniforms:D,vertexTextures:M,floatFragmentTextures:O,floatVertexTextures:M&&O,maxSamples:f?n.getParameter(36183):0}}function z5(n){var a=this,t=null,r=0,o=!1,u=!1,f=new ff,h=new Gs,v={value:null,needsUpdate:!1};function g(){v.value!==t&&(v.value=t,v.needsUpdate=r>0),a.numPlanes=r,a.numIntersection=0}function y(_,C,S,R){var b=null!==_?_.length:0,E=null;if(0!==b){if(E=v.value,!0!==R||null===E){var T=S+4*b,D=C.matrixWorldInverse;h.getNormalMatrix(D),(null===E||E.length<T)&&(E=new Float32Array(T));for(var M=0,O=S;M!==b;++M,O+=4)f.copy(_[M]).applyMatrix4(D,h),f.normal.toArray(E,O),E[O+3]=f.constant}v.value=E,v.needsUpdate=!0}return a.numPlanes=b,a.numIntersection=0,E}this.uniform=v,this.numPlanes=0,this.numIntersection=0,this.init=function(_,C,S){var R=0!==_.length||C||0!==r||o;return o=C,t=y(_,S,0),r=_.length,R},this.beginShadows=function(){u=!0,y(null)},this.endShadows=function(){u=!1,g()},this.setState=function(_,C,S){var R=_.clippingPlanes,b=_.clipIntersection,E=_.clipShadows,T=n.get(_);if(!o||null===R||0===R.length||u&&!E)u?y(null):g();else{var D=u?0:r,M=4*D,O=T.clippingState||null;v.value=O,O=y(R,C,M,S);for(var L=0;L!==M;++L)O[L]=t[L];T.clippingState=O,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=D}}}function j5(n){var a=new WeakMap;function t(f,h){return 303===h?f.mapping=301:304===h&&(f.mapping=302),f}function o(f){var h=f.target;h.removeEventListener("dispose",o);var v=a.get(h);void 0!==v&&(a.delete(h),v.dispose())}return{get:function(f){if(f&&f.isTexture&&!1===f.isRenderTargetTexture){var h=f.mapping;if(303===h||304===h){if(a.has(f))return t(a.get(f).texture,f.mapping);var g=f.image;if(g&&g.height>0){var y=new i4(g.height/2);return y.fromEquirectangularTexture(n,f),a.set(f,y),f.addEventListener("dispose",o),t(y.texture,f.mapping)}return null}}return f},dispose:function(){a=new WeakMap}}}var ZT=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return G(this,t),(r=a.call(this)).isOrthographicCamera=!0,r.type="OrthographicCamera",r.zoom=1,r.view=null,r.left=o,r.right=u,r.top=f,r.bottom=h,r.near=v,r.far=g,r.updateProjectionMatrix(),r}return j(t,[{key:"copy",value:function(o,u){return ye(ze(t.prototype),"copy",this).call(this,o,u),this.left=o.left,this.right=o.right,this.top=o.top,this.bottom=o.bottom,this.near=o.near,this.far=o.far,this.zoom=o.zoom,this.view=null===o.view?null:Object.assign({},o.view),this}},{key:"setViewOffset",value:function(o,u,f,h,v,g){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=u,this.view.offsetX=f,this.view.offsetY=h,this.view.width=v,this.view.height=g,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var o=(this.right-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),f=(this.right+this.left)/2,h=(this.top+this.bottom)/2,v=f-o,g=f+o,y=h+u,_=h-u;if(null!==this.view&&this.view.enabled){var C=(this.right-this.left)/this.view.fullWidth/this.zoom,S=(this.top-this.bottom)/this.view.fullHeight/this.zoom;g=(v+=C*this.view.offsetX)+C*this.view.width,_=(y-=S*this.view.offsetY)-S*this.view.height}this.projectionMatrix.makeOrthographic(v,g,y,_,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(o){var u=ye(ze(t.prototype),"toJSON",this).call(this,o);return u.object.zoom=this.zoom,u.object.left=this.left,u.object.right=this.right,u.object.top=this.top,u.object.bottom=this.bottom,u.object.near=this.near,u.object.far=this.far,null!==this.view&&(u.object.view=Object.assign({},this.view)),u}}]),t}($T),dF=[.125,.215,.35,.446,.526,.582],QT=new ZT,fF=new un,eD=null,hf=(1+Math.sqrt(5))/2,Jh=1/hf,pF=[new J(1,1,1),new J(-1,1,1),new J(1,1,-1),new J(-1,1,-1),new J(0,hf,Jh),new J(0,hf,-Jh),new J(Jh,0,hf),new J(-Jh,0,hf),new J(hf,Jh,0),new J(-hf,Jh,0)],hF=function(){function n(a){G(this,n),this._renderer=a,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return j(n,[{key:"fromScene",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;eD=this._renderer.getRenderTarget(),this._setSize(256);var f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(t,o,u,f),r>0&&this._blur(f,0,0,r),this._applyPMREM(f),this._cleanup(f),f}},{key:"fromEquirectangular",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,r)}},{key:"fromCubemap",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,r)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=mF(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=gF(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}},{key:"_cleanup",value:function(t){this._renderer.setRenderTarget(eD),t.scissorTest=!1,US(t,0,0,t.width,t.height)}},{key:"_fromTexture",value:function(t,r){this._setSize(301===t.mapping||302===t.mapping?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),eD=this._renderer.getRenderTarget();var o=r||this._allocateTargets();return this._textureToCubeUV(t,o),this._applyPMREM(o),this._cleanup(o),o}},{key:"_allocateTargets",value:function(){var t=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,o={magFilter:Po,minFilter:Po,generateMipmaps:!1,type:cy,format:$a,encoding:of,depthBuffer:!1},u=vF(t,r,o);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=vF(t,r,o);var f=this._lodMax,h=function(n){for(var a=[],t=[],r=[],o=n,u=n-4+1+dF.length,f=0;f<u;f++){var h=Math.pow(2,o);t.push(h);var v=1/h;f>n-4?v=dF[f-n+4-1]:0===f&&(v=0),r.push(v);for(var g=1/(h-2),y=-g,_=1+g,C=[y,y,_,y,_,_,y,y,_,_,y,_],D=new Float32Array(108),M=new Float32Array(72),O=new Float32Array(36),L=0;L<6;L++){var H=L%3*2/3-1,z=L>2?0:-1;D.set([H,z,0,H+2/3,z,0,H+2/3,z+1,0,H,z,0,H+2/3,z+1,0,H,z+1,0],18*L),M.set(C,12*L),O.set([L,L,L,L,L,L],6*L)}var X=new Mr;X.setAttribute("position",new Lo(D,3)),X.setAttribute("uv",new Lo(M,2)),X.setAttribute("faceIndex",new Lo(O,1)),a.push(X),o>4&&o--}return{lodPlanes:a,sizeLods:t,sigmas:r}}(f);this._sizeLods=h.sizeLods,this._lodPlanes=h.lodPlanes,this._sigmas=h.sigmas,this._blurMaterial=function(n,a,t){var r=new Float32Array(20),o=new J(0,1,0);return new df({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/a,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:"".concat(n,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(f,t,r)}return u}},{key:"_compileMaterial",value:function(t){var r=new na(this._lodPlanes[0],t);this._renderer.compile(r,QT)}},{key:"_sceneToCubeUV",value:function(t,r,o,u){var v=new di(90,1,r,o),g=[1,-1,1,1,1,1],y=[1,1,1,-1,-1,-1],_=this._renderer,C=_.autoClear,S=_.toneMapping;_.getClearColor(fF),_.toneMapping=0,_.autoClear=!1;var R=new dl({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),b=new na(new HS,R),E=!1,T=t.background;T?T.isColor&&(R.color.copy(T),t.background=null,E=!0):(R.color.copy(fF),E=!0);for(var D=0;D<6;D++){var M=D%3;0===M?(v.up.set(0,g[D],0),v.lookAt(y[D],0,0)):1===M?(v.up.set(0,0,g[D]),v.lookAt(0,y[D],0)):(v.up.set(0,g[D],0),v.lookAt(0,0,y[D]));var O=this._cubeSize;US(u,M*O,D>2?O:0,O,O),_.setRenderTarget(u),E&&_.render(b,v),_.render(t,v)}b.geometry.dispose(),b.material.dispose(),_.toneMapping=S,_.autoClear=C,t.background=T}},{key:"_textureToCubeUV",value:function(t,r){var o=this._renderer,u=301===t.mapping||302===t.mapping;u?(null===this._cubemapMaterial&&(this._cubemapMaterial=mF()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=gF());var f=u?this._cubemapMaterial:this._equirectMaterial,h=new na(this._lodPlanes[0],f);f.uniforms.envMap.value=t;var g=this._cubeSize;US(r,0,0,3*g,2*g),o.setRenderTarget(r),o.render(h,QT)}},{key:"_applyPMREM",value:function(t){var r=this._renderer,o=r.autoClear;r.autoClear=!1;for(var u=1;u<this._lodPlanes.length;u++){var f=Math.sqrt(this._sigmas[u]*this._sigmas[u]-this._sigmas[u-1]*this._sigmas[u-1]);this._blur(t,u-1,u,f,pF[(u-1)%pF.length])}r.autoClear=o}},{key:"_blur",value:function(t,r,o,u,f){var h=this._pingPongRenderTarget;this._halfBlur(t,h,r,o,u,"latitudinal",f),this._halfBlur(h,t,o,o,u,"longitudinal",f)}},{key:"_halfBlur",value:function(t,r,o,u,f,h,v){var g=this._renderer,y=this._blurMaterial;"latitudinal"!==h&&"longitudinal"!==h&&console.error("blur direction must be either latitudinal or longitudinal!");var C=new na(this._lodPlanes[u],y),S=y.uniforms,R=this._sizeLods[o]-1,b=isFinite(f)?Math.PI/(2*R):2*Math.PI/39,E=f/b,T=isFinite(f)?1+Math.floor(3*E):20;T>20&&console.warn("sigmaRadians, ".concat(f,", is too large and will clip, as it requested ").concat(T," samples when the maximum is set to ").concat(20));for(var D=[],M=0,O=0;O<20;++O){var L=O/E,H=Math.exp(-L*L/2);D.push(H),0===O?M+=H:O<T&&(M+=2*H)}for(var z=0;z<D.length;z++)D[z]=D[z]/M;S.envMap.value=t.texture,S.samples.value=T,S.weights.value=D,S.latitudinal.value="latitudinal"===h,v&&(S.poleAxis.value=v);var P=this._lodMax;S.dTheta.value=b,S.mipInt.value=P-o;var W=this._sizeLods[u];US(r,3*W*(u>P-4?u-P+4:0),4*(this._cubeSize-W),3*W,2*W),g.setRenderTarget(r),g.render(C,QT)}}]),n}();function vF(n,a,t){var r=new sf(n,a,t);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function US(n,a,t,r,o){n.viewport.set(a,t,r,o),n.scissor.set(a,t,r,o)}function gF(){return new df({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function mF(){return new df({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function K5(n){var a=new WeakMap,t=null;function u(h){var v=h.target;v.removeEventListener("dispose",u);var g=a.get(v);void 0!==g&&(a.delete(v),g.dispose())}return{get:function(h){if(h&&h.isTexture){var v=h.mapping,g=303===v||304===v,y=301===v||302===v;if(g||y){if(h.isRenderTargetTexture&&!0===h.needsPMREMUpdate){h.needsPMREMUpdate=!1;var _=a.get(h);return null===t&&(t=new hF(n)),_=g?t.fromEquirectangular(h,_):t.fromCubemap(h,_),a.set(h,_),_.texture}if(a.has(h))return a.get(h).texture;var C=h.image;if(g&&C&&C.height>0||y&&C&&function(h){for(var v=0,y=0;y<6;y++)void 0!==h[y]&&v++;return 6===v}(C)){null===t&&(t=new hF(n));var S=g?t.fromEquirectangular(h):t.fromCubemap(h);return a.set(h,S),h.addEventListener("dispose",u),S.texture}return null}}return h},dispose:function(){a=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function $5(n){var a={};function t(r){if(void 0!==a[r])return a[r];var o;switch(r){case"WEBGL_depth_texture":o=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=n.getExtension(r)}return a[r]=o,o}return{has:function(o){return null!==t(o)},init:function(o){o.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(o){var u=t(o);return null===u&&console.warn("THREE.WebGLRenderer: "+o+" extension not supported."),u}}}function X5(n,a,t,r){var o={},u=new WeakMap;function f(_){var C=_.target;for(var S in null!==C.index&&a.remove(C.index),C.attributes)a.remove(C.attributes[S]);C.removeEventListener("dispose",f),delete o[C.id];var R=u.get(C);R&&(a.remove(R),u.delete(C)),r.releaseStatesOfGeometry(C),!0===C.isInstancedBufferGeometry&&delete C._maxInstanceCount,t.memory.geometries--}function g(_){var C=[],S=_.index,R=_.attributes.position,b=0;if(null!==S){var E=S.array;b=S.version;for(var T=0,D=E.length;T<D;T+=3){var M=E[T+0],O=E[T+1],L=E[T+2];C.push(M,O,O,L,L,M)}}else{b=R.version;for(var z=0,P=R.array.length/3-1;z<P;z+=3){var W=z+0,X=z+1,ne=z+2;C.push(W,X,X,ne,ne,W)}}var le=new(UL(C)?oF:iF)(C,1);le.version=b;var ue=u.get(_);ue&&a.remove(ue),u.set(_,le)}return{get:function(_,C){return!0===o[C.id]||(C.addEventListener("dispose",f),o[C.id]=!0,t.memory.geometries++),C},update:function(_){var C=_.attributes;for(var S in C)a.update(C[S],34962);var R=_.morphAttributes;for(var b in R)for(var E=R[b],T=0,D=E.length;T<D;T++)a.update(E[T],34962)},getWireframeAttribute:function(_){var C=u.get(_);if(C){var S=_.index;null!==S&&C.version<S.version&&g(_)}else g(_);return u.get(_)}}}function J5(n,a,t,r){var u,h,v,o=r.isWebGL2;this.setMode=function(C){u=C},this.setIndex=function(C){h=C.type,v=C.bytesPerElement},this.render=function(C,S){n.drawElements(u,S,h,C*v),t.update(S,u,1)},this.renderInstances=function(C,S,R){if(0!==R){var b,E;if(o)b=n,E="drawElementsInstanced";else if(E="drawElementsInstancedANGLE",null===(b=a.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");b[E](u,S,h,C*v,R),t.update(S,u,R)}}}function Z5(n){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(u,f,h){switch(t.calls++,f){case 4:t.triangles+=h*(u/3);break;case 1:t.lines+=h*(u/2);break;case 3:t.lines+=h*(u-1);break;case 2:t.lines+=h*u;break;case 0:t.points+=h*u;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",f)}}}}function Q5(n,a){return n[0]-a[0]}function e8(n,a){return Math.abs(a[1])-Math.abs(n[1])}function t8(n,a,t){for(var r={},o=new Float32Array(8),u=new WeakMap,f=new Cr,h=[],v=0;v<8;v++)h[v]=[v,0];return{update:function(y,_,C,S){var R=y.morphTargetInfluences;if(!0===a.isWebGL2){var b=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,E=void 0!==b?b.length:0,T=u.get(_);if(void 0===T||T.count!==E){void 0!==T&&T.texture.dispose();var M=void 0!==_.morphAttributes.position,O=void 0!==_.morphAttributes.normal,L=void 0!==_.morphAttributes.color,H=_.morphAttributes.position||[],z=_.morphAttributes.normal||[],P=_.morphAttributes.color||[],W=0;!0===M&&(W=1),!0===O&&(W=2),!0===L&&(W=3);var X=_.attributes.position.count*W,ne=1;X>a.maxTextureSize&&(ne=Math.ceil(X/a.maxTextureSize),X=a.maxTextureSize);var le=new Float32Array(X*ne*4*E),ue=new YL(le,X,ne,E);ue.type=Rc,ue.needsUpdate=!0;for(var k=4*W,ee=0;ee<E;ee++)for(var ie=H[ee],se=z[ee],ae=P[ee],ge=X*ne*4*ee,Ee=0;Ee<ie.count;Ee++){var _e=Ee*k;!0===M&&(f.fromBufferAttribute(ie,Ee),le[ge+_e+0]=f.x,le[ge+_e+1]=f.y,le[ge+_e+2]=f.z,le[ge+_e+3]=0),!0===O&&(f.fromBufferAttribute(se,Ee),le[ge+_e+4]=f.x,le[ge+_e+5]=f.y,le[ge+_e+6]=f.z,le[ge+_e+7]=0),!0===L&&(f.fromBufferAttribute(ae,Ee),le[ge+_e+8]=f.x,le[ge+_e+9]=f.y,le[ge+_e+10]=f.z,le[ge+_e+11]=4===ae.itemSize?f.w:1)}T={count:E,texture:ue,size:new Ke(X,ne)},u.set(_,T),_.addEventListener("dispose",function fn(){ue.dispose(),u.delete(_),_.removeEventListener("dispose",fn)})}for(var me=0,Ge=0;Ge<R.length;Ge++)me+=R[Ge];var Se=_.morphTargetsRelative?1:1-me;S.getUniforms().setValue(n,"morphTargetBaseInfluence",Se),S.getUniforms().setValue(n,"morphTargetInfluences",R),S.getUniforms().setValue(n,"morphTargetsTexture",T.texture,t),S.getUniforms().setValue(n,"morphTargetsTextureSize",T.size)}else{var Ae=void 0===R?0:R.length,he=r[_.id];if(void 0===he||he.length!==Ae){he=[];for(var Xe=0;Xe<Ae;Xe++)he[Xe]=[Xe,0];r[_.id]=he}for(var ke=0;ke<Ae;ke++){var je=he[ke];je[0]=ke,je[1]=R[ke]}he.sort(e8);for(var We=0;We<8;We++)We<Ae&&he[We][1]?(h[We][0]=he[We][0],h[We][1]=he[We][1]):(h[We][0]=Number.MAX_SAFE_INTEGER,h[We][1]=0);h.sort(Q5);for(var Ue=_.morphAttributes.position,it=_.morphAttributes.normal,Ht=0,et=0;et<8;et++){var Ot=h[et],Sn=Ot[0],_n=Ot[1];Sn!==Number.MAX_SAFE_INTEGER&&_n?(Ue&&_.getAttribute("morphTarget"+et)!==Ue[Sn]&&_.setAttribute("morphTarget"+et,Ue[Sn]),it&&_.getAttribute("morphNormal"+et)!==it[Sn]&&_.setAttribute("morphNormal"+et,it[Sn]),o[et]=_n,Ht+=_n):(Ue&&!0===_.hasAttribute("morphTarget"+et)&&_.deleteAttribute("morphTarget"+et),it&&!0===_.hasAttribute("morphNormal"+et)&&_.deleteAttribute("morphNormal"+et),o[et]=0)}var xt=_.morphTargetsRelative?1:1-Ht;S.getUniforms().setValue(n,"morphTargetBaseInfluence",xt),S.getUniforms().setValue(n,"morphTargetInfluences",o)}}}}function n8(n,a,t,r){var o=new WeakMap;function h(v){var g=v.target;g.removeEventListener("dispose",h),t.remove(g.instanceMatrix),null!==g.instanceColor&&t.remove(g.instanceColor)}return{update:function(v){var g=r.render.frame,_=a.get(v,v.geometry);return o.get(_)!==g&&(a.update(_),o.set(_,g)),v.isInstancedMesh&&(!1===v.hasEventListener("dispose",h)&&v.addEventListener("dispose",h),t.update(v.instanceMatrix,34962),null!==v.instanceColor&&t.update(v.instanceColor,34962)),_},dispose:function(){o=new WeakMap}}}var yF=new _u,_F=new YL,CF=new Vj,wF=new uF,SF=[],EF=[],bF=new Float32Array(16),xF=new Float32Array(9),RF=new Float32Array(4);function Zh(n,a,t){var r=n[0];if(r<=0||r>0)return n;var o=a*t,u=SF[o];if(void 0===u&&(u=new Float32Array(o),SF[o]=u),0!==a){r.toArray(u,0);for(var f=1,h=0;f!==a;++f)n[f].toArray(u,h+=t)}return u}function Mi(n,a){if(n.length!==a.length)return!1;for(var t=0,r=n.length;t<r;t++)if(n[t]!==a[t])return!1;return!0}function Oi(n,a){for(var t=0,r=a.length;t<r;t++)n[t]=a[t]}function zS(n,a){var t=EF[a];void 0===t&&(t=new Int32Array(a),EF[a]=t);for(var r=0;r!==a;++r)t[r]=n.allocateTextureUnit();return t}function r8(n,a){var t=this.cache;t[0]!==a&&(n.uniform1f(this.addr,a),t[0]=a)}function i8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y)&&(n.uniform2f(this.addr,a.x,a.y),t[0]=a.x,t[1]=a.y);else{if(Mi(t,a))return;n.uniform2fv(this.addr,a),Oi(t,a)}}function o8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y||t[2]!==a.z)&&(n.uniform3f(this.addr,a.x,a.y,a.z),t[0]=a.x,t[1]=a.y,t[2]=a.z);else if(void 0!==a.r)(t[0]!==a.r||t[1]!==a.g||t[2]!==a.b)&&(n.uniform3f(this.addr,a.r,a.g,a.b),t[0]=a.r,t[1]=a.g,t[2]=a.b);else{if(Mi(t,a))return;n.uniform3fv(this.addr,a),Oi(t,a)}}function a8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y||t[2]!==a.z||t[3]!==a.w)&&(n.uniform4f(this.addr,a.x,a.y,a.z,a.w),t[0]=a.x,t[1]=a.y,t[2]=a.z,t[3]=a.w);else{if(Mi(t,a))return;n.uniform4fv(this.addr,a),Oi(t,a)}}function s8(n,a){var t=this.cache,r=a.elements;if(void 0===r){if(Mi(t,a))return;n.uniformMatrix2fv(this.addr,!1,a),Oi(t,a)}else{if(Mi(t,r))return;RF.set(r),n.uniformMatrix2fv(this.addr,!1,RF),Oi(t,r)}}function u8(n,a){var t=this.cache,r=a.elements;if(void 0===r){if(Mi(t,a))return;n.uniformMatrix3fv(this.addr,!1,a),Oi(t,a)}else{if(Mi(t,r))return;xF.set(r),n.uniformMatrix3fv(this.addr,!1,xF),Oi(t,r)}}function l8(n,a){var t=this.cache,r=a.elements;if(void 0===r){if(Mi(t,a))return;n.uniformMatrix4fv(this.addr,!1,a),Oi(t,a)}else{if(Mi(t,r))return;bF.set(r),n.uniformMatrix4fv(this.addr,!1,bF),Oi(t,r)}}function c8(n,a){var t=this.cache;t[0]!==a&&(n.uniform1i(this.addr,a),t[0]=a)}function d8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y)&&(n.uniform2i(this.addr,a.x,a.y),t[0]=a.x,t[1]=a.y);else{if(Mi(t,a))return;n.uniform2iv(this.addr,a),Oi(t,a)}}function f8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y||t[2]!==a.z)&&(n.uniform3i(this.addr,a.x,a.y,a.z),t[0]=a.x,t[1]=a.y,t[2]=a.z);else{if(Mi(t,a))return;n.uniform3iv(this.addr,a),Oi(t,a)}}function p8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y||t[2]!==a.z||t[3]!==a.w)&&(n.uniform4i(this.addr,a.x,a.y,a.z,a.w),t[0]=a.x,t[1]=a.y,t[2]=a.z,t[3]=a.w);else{if(Mi(t,a))return;n.uniform4iv(this.addr,a),Oi(t,a)}}function h8(n,a){var t=this.cache;t[0]!==a&&(n.uniform1ui(this.addr,a),t[0]=a)}function v8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y)&&(n.uniform2ui(this.addr,a.x,a.y),t[0]=a.x,t[1]=a.y);else{if(Mi(t,a))return;n.uniform2uiv(this.addr,a),Oi(t,a)}}function g8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y||t[2]!==a.z)&&(n.uniform3ui(this.addr,a.x,a.y,a.z),t[0]=a.x,t[1]=a.y,t[2]=a.z);else{if(Mi(t,a))return;n.uniform3uiv(this.addr,a),Oi(t,a)}}function m8(n,a){var t=this.cache;if(void 0!==a.x)(t[0]!==a.x||t[1]!==a.y||t[2]!==a.z||t[3]!==a.w)&&(n.uniform4ui(this.addr,a.x,a.y,a.z,a.w),t[0]=a.x,t[1]=a.y,t[2]=a.z,t[3]=a.w);else{if(Mi(t,a))return;n.uniform4uiv(this.addr,a),Oi(t,a)}}function y8(n,a,t){var r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(n.uniform1i(this.addr,o),r[0]=o),t.setTexture2D(a||yF,o)}function _8(n,a,t){var r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(n.uniform1i(this.addr,o),r[0]=o),t.setTexture3D(a||CF,o)}function C8(n,a,t){var r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(n.uniform1i(this.addr,o),r[0]=o),t.setTextureCube(a||wF,o)}function w8(n,a,t){var r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(n.uniform1i(this.addr,o),r[0]=o),t.setTexture2DArray(a||_F,o)}function E8(n,a){n.uniform1fv(this.addr,a)}function b8(n,a){var t=Zh(a,this.size,2);n.uniform2fv(this.addr,t)}function x8(n,a){var t=Zh(a,this.size,3);n.uniform3fv(this.addr,t)}function R8(n,a){var t=Zh(a,this.size,4);n.uniform4fv(this.addr,t)}function A8(n,a){var t=Zh(a,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function T8(n,a){var t=Zh(a,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function D8(n,a){var t=Zh(a,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function M8(n,a){n.uniform1iv(this.addr,a)}function O8(n,a){n.uniform2iv(this.addr,a)}function P8(n,a){n.uniform3iv(this.addr,a)}function I8(n,a){n.uniform4iv(this.addr,a)}function L8(n,a){n.uniform1uiv(this.addr,a)}function F8(n,a){n.uniform2uiv(this.addr,a)}function N8(n,a){n.uniform3uiv(this.addr,a)}function k8(n,a){n.uniform4uiv(this.addr,a)}function G8(n,a,t){var r=this.cache,o=a.length,u=zS(t,o);Mi(r,u)||(n.uniform1iv(this.addr,u),Oi(r,u));for(var f=0;f!==o;++f)t.setTexture2D(a[f]||yF,u[f])}function B8(n,a,t){var r=this.cache,o=a.length,u=zS(t,o);Mi(r,u)||(n.uniform1iv(this.addr,u),Oi(r,u));for(var f=0;f!==o;++f)t.setTexture3D(a[f]||CF,u[f])}function H8(n,a,t){var r=this.cache,o=a.length,u=zS(t,o);Mi(r,u)||(n.uniform1iv(this.addr,u),Oi(r,u));for(var f=0;f!==o;++f)t.setTextureCube(a[f]||wF,u[f])}function V8(n,a,t){var r=this.cache,o=a.length,u=zS(t,o);Mi(r,u)||(n.uniform1iv(this.addr,u),Oi(r,u));for(var f=0;f!==o;++f)t.setTexture2DArray(a[f]||_F,u[f])}var U8=function n(a,t,r){G(this,n),this.id=a,this.addr=r,this.cache=[],this.setValue=function(n){switch(n){case 5126:return r8;case 35664:return i8;case 35665:return o8;case 35666:return a8;case 35674:return s8;case 35675:return u8;case 35676:return l8;case 5124:case 35670:return c8;case 35667:case 35671:return d8;case 35668:case 35672:return f8;case 35669:case 35673:return p8;case 5125:return h8;case 36294:return v8;case 36295:return g8;case 36296:return m8;case 35678:case 36198:case 36298:case 36306:case 35682:return y8;case 35679:case 36299:case 36307:return _8;case 35680:case 36300:case 36308:case 36293:return C8;case 36289:case 36303:case 36311:case 36292:return w8}}(t.type)},z8=function n(a,t,r){G(this,n),this.id=a,this.addr=r,this.cache=[],this.size=t.size,this.setValue=function(n){switch(n){case 5126:return E8;case 35664:return b8;case 35665:return x8;case 35666:return R8;case 35674:return A8;case 35675:return T8;case 35676:return D8;case 5124:case 35670:return M8;case 35667:case 35671:return O8;case 35668:case 35672:return P8;case 35669:case 35673:return I8;case 5125:return L8;case 36294:return F8;case 36295:return N8;case 36296:return k8;case 35678:case 36198:case 36298:case 36306:case 35682:return G8;case 35679:case 36299:case 36307:return B8;case 35680:case 36300:case 36308:case 36293:return H8;case 36289:case 36303:case 36311:case 36292:return V8}}(t.type)},j8=function(){function n(a){G(this,n),this.id=a,this.seq=[],this.map={}}return j(n,[{key:"setValue",value:function(t,r,o){for(var u=this.seq,f=0,h=u.length;f!==h;++f){var v=u[f];v.setValue(t,r[v.id],o)}}}]),n}(),nD=/(\w+)(\])?(\[|\.)?/g;function AF(n,a){n.seq.push(a),n.map[a.id]=a}function q8(n,a,t){var r=n.name,o=r.length;for(nD.lastIndex=0;;){var u=nD.exec(r),h=u[1],g=u[3];if("]"===u[2]&&(h|=0),void 0===g||"["===g&&nD.lastIndex+2===o){AF(t,void 0===g?new U8(h,n,a):new z8(h,n,a));break}var _=t.map[h];void 0===_&&AF(t,_=new j8(h)),t=_}}var jS=function(){function n(a,t){G(this,n),this.seq=[],this.map={};for(var r=a.getProgramParameter(t,35718),o=0;o<r;++o){var u=a.getActiveUniform(t,o);q8(u,a.getUniformLocation(t,u.name),this)}}return j(n,[{key:"setValue",value:function(t,r,o,u){var f=this.map[r];void 0!==f&&f.setValue(t,o,u)}},{key:"setOptional",value:function(t,r,o){var u=r[o];void 0!==u&&this.setValue(t,o,u)}}],[{key:"upload",value:function(t,r,o,u){for(var f=0,h=r.length;f!==h;++f){var v=r[f],g=o[v.id];!1!==g.needsUpdate&&v.setValue(t,g.value,u)}}},{key:"seqWithValue",value:function(t,r){for(var o=[],u=0,f=t.length;u!==f;++u){var h=t[u];h.id in r&&o.push(h)}return o}}]),n}();function TF(n,a,t){var r=n.createShader(a);return n.shaderSource(r,t),n.compileShader(r),r}var Y8=0;function DF(n,a,t){var r=n.getShaderParameter(a,35713),o=n.getShaderInfoLog(a).trim();if(r&&""===o)return"";var u=/ERROR: 0:(\d+)/.exec(o);if(u){var f=parseInt(u[1]);return t.toUpperCase()+"\n\n"+o+"\n\n"+function(n,a){for(var t=n.split("\n"),r=[],o=Math.max(a-6,0),u=Math.min(a+6,t.length),f=o;f<u;f++){var h=f+1;r.push("".concat(h===a?">":" "," ").concat(h,": ").concat(t[f]))}return r.join("\n")}(n.getShaderSource(a),f)}return o}function X8(n,a){var t=function(n){switch(n){case of:return["Linear","( value )"];case Yn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(a);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function J8(n,a){var t;switch(a){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",a),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Ey(n){return""!==n}function MF(n,a){var t=a.numSpotLightShadows+a.numSpotLightMaps-a.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,a.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,a.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,a.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,a.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,a.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,a.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,a.numPointLightShadows)}function OF(n,a){return n.replace(/NUM_CLIPPING_PLANES/g,a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,a.numClippingPlanes-a.numClipIntersection)}var t9=/^[ \t]*#include +<([\w\d./]+)>/gm;function rD(n){return n.replace(t9,n9)}function n9(n,a){var t=Rn[a];if(void 0===t)throw new Error("Can not resolve #include <"+a+">");return rD(t)}var r9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function PF(n){return n.replace(r9,i9)}function i9(n,a,t,r){for(var o="",u=parseInt(a);u<parseInt(t);u++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+u+" ]").replace(/UNROLLED_LOOP_INDEX/g,u);return o}function IF(n){var a="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?a+="\n#define HIGH_PRECISION":"mediump"===n.precision?a+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(a+="\n#define LOW_PRECISION"),a}function c9(n,a,t,r){var E,T,o=n.getContext(),u=t.defines,f=t.vertexShader,h=t.fragmentShader,v=function(n){var a="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?a="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?a="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(a="SHADOWMAP_TYPE_VSM"),a}(t),g=function(n){var a="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:a="ENVMAP_TYPE_CUBE";break;case 306:a="ENVMAP_TYPE_CUBE_UV"}return a}(t),y=function(n){var a="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(a="ENVMAP_MODE_REFRACTION"),a}(t),_=function(n){var a="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:a="ENVMAP_BLENDING_MULTIPLY";break;case 1:a="ENVMAP_BLENDING_MIX";break;case 2:a="ENVMAP_BLENDING_ADD"}return a}(t),C=function(n){var a=n.envMapCubeUVHeight;if(null===a)return null;var t=Math.log2(a)-2,r=1/a;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}(t),S=t.isWebGL2?"":function(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ey).join("\n")}(t),R=function(n){var a=[];for(var t in n){var r=n[t];!1!==r&&a.push("#define "+t+" "+r)}return a.join("\n")}(u),b=o.createProgram(),D=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?((E=[R].filter(Ey).join("\n")).length>0&&(E+="\n"),(T=[S,R].filter(Ey).join("\n")).length>0&&(T+="\n")):(E=[IF(t),"#define SHADER_NAME "+t.shaderName,R,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+y:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+v:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ey).join("\n"),T=[S,IF(t),"#define SHADER_NAME "+t.shaderName,R,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.envMap?"#define "+y:"",t.envMap?"#define "+_:"",C?"#define CUBEUV_TEXEL_WIDTH "+C.texelWidth:"",C?"#define CUBEUV_TEXEL_HEIGHT "+C.texelHeight:"",C?"#define CUBEUV_MAX_MIP "+C.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+v:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Rn.tonemapping_pars_fragment:"",0!==t.toneMapping?J8("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Rn.encodings_pars_fragment,X8("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Ey).join("\n")),f=OF(f=MF(f=rD(f),t),t),h=OF(h=MF(h=rD(h),t),t),f=PF(f),h=PF(h),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(D="#version 300 es\n",E=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+E,T=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+T);var k,ee,O=D+T+h,L=TF(o,35633,D+E+f),H=TF(o,35632,O);if(o.attachShader(b,L),o.attachShader(b,H),void 0!==t.index0AttributeName?o.bindAttribLocation(b,0,t.index0AttributeName):!0===t.morphTargets&&o.bindAttribLocation(b,0,"position"),o.linkProgram(b),n.debug.checkShaderErrors){var z=o.getProgramInfoLog(b).trim(),P=o.getShaderInfoLog(L).trim(),W=o.getShaderInfoLog(H).trim(),X=!0,ne=!0;if(!1===o.getProgramParameter(b,35714)){X=!1;var le=DF(o,L,"vertex"),ue=DF(o,H,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(b,35715)+"\n\nProgram Info Log: "+z+"\n"+le+"\n"+ue)}else""!==z?console.warn("THREE.WebGLProgram: Program Info Log:",z):(""===P||""===W)&&(ne=!1);ne&&(this.diagnostics={runnable:X,programLog:z,vertexShader:{log:P,prefix:E},fragmentShader:{log:W,prefix:T}})}return o.deleteShader(L),o.deleteShader(H),this.getUniforms=function(){return void 0===k&&(k=new jS(o,b)),k},this.getAttributes=function(){return void 0===ee&&(ee=function(n,a){for(var t={},r=n.getProgramParameter(a,35721),o=0;o<r;o++){var u=n.getActiveAttrib(a,o),f=u.name,h=1;35674===u.type&&(h=2),35675===u.type&&(h=3),35676===u.type&&(h=4),t[f]={type:u.type,location:n.getAttribLocation(a,f),locationSize:h}}return t}(o,b)),ee},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(b),this.program=void 0},this.name=t.shaderName,this.id=Y8++,this.cacheKey=a,this.usedTimes=1,this.program=b,this.vertexShader=L,this.fragmentShader=H,this}var d9=0,f9=function(){function n(){G(this,n),this.shaderCache=new Map,this.materialCache=new Map}return j(n,[{key:"update",value:function(t){var o=t.fragmentShader,u=this._getShaderStage(t.vertexShader),f=this._getShaderStage(o),h=this._getShaderCacheForMaterial(t);return!1===h.has(u)&&(h.add(u),u.usedTimes++),!1===h.has(f)&&(h.add(f),f.usedTimes++),this}},{key:"remove",value:function(t){var u,o=Ft(this.materialCache.get(t));try{for(o.s();!(u=o.n()).done;){var f=u.value;f.usedTimes--,0===f.usedTimes&&this.shaderCache.delete(f.code)}}catch(h){o.e(h)}finally{o.f()}return this.materialCache.delete(t),this}},{key:"getVertexShaderID",value:function(t){return this._getShaderStage(t.vertexShader).id}},{key:"getFragmentShaderID",value:function(t){return this._getShaderStage(t.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(t){var r=this.materialCache,o=r.get(t);return void 0===o&&r.set(t,o=new Set),o}},{key:"_getShaderStage",value:function(t){var r=this.shaderCache,o=r.get(t);return void 0===o&&(o=new p9(t),r.set(t,o)),o}}]),n}(),p9=function n(a){G(this,n),this.id=d9++,this.code=a,this.usedTimes=0};function h9(n,a,t,r,o,u,f){var h=new JL,v=new f9,g=[],y=o.isWebGL2,_=o.logarithmicDepthBuffer,C=o.vertexTextures,S=o.precision,R={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(P,W,X,ne,le){var ue=ne.fog,k=le.geometry,ie=(P.isMeshStandardMaterial?t:a).get(P.envMap||(P.isMeshStandardMaterial?ne.environment:null)),se=ie&&306===ie.mapping?ie.image.height:null,ae=R[P.type];null!==P.precision&&(S=o.getMaxPrecision(P.precision))!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",S,"instead.");var me,Ge,Se,Ae,ge=k.morphAttributes.position||k.morphAttributes.normal||k.morphAttributes.color,Ee=void 0!==ge?ge.length:0,_e=0;if(void 0!==k.morphAttributes.position&&(_e=1),void 0!==k.morphAttributes.normal&&(_e=2),void 0!==k.morphAttributes.color&&(_e=3),ae){var he=wu[ae];me=he.vertexShader,Ge=he.fragmentShader}else me=P.vertexShader,Ge=P.fragmentShader,v.update(P),Se=v.getVertexShaderID(P),Ae=v.getFragmentShaderID(P);var Xe=n.getRenderTarget(),je=P.clearcoat>0,We=P.iridescence>0;return{isWebGL2:y,shaderID:ae,shaderName:P.type,vertexShader:me,fragmentShader:Ge,defines:P.defines,customVertexShaderID:Se,customFragmentShaderID:Ae,isRawShaderMaterial:!0===P.isRawShaderMaterial,glslVersion:P.glslVersion,precision:S,instancing:!0===le.isInstancedMesh,instancingColor:!0===le.isInstancedMesh&&null!==le.instanceColor,supportsVertexTextures:C,outputEncoding:null===Xe?n.outputEncoding:!0===Xe.isXRRenderTarget?Xe.texture.encoding:of,map:!!P.map,matcap:!!P.matcap,envMap:!!ie,envMapMode:ie&&ie.mapping,envMapCubeUVHeight:se,lightMap:!!P.lightMap,aoMap:!!P.aoMap,emissiveMap:!!P.emissiveMap,bumpMap:!!P.bumpMap,normalMap:!!P.normalMap,objectSpaceNormalMap:1===P.normalMapType,tangentSpaceNormalMap:0===P.normalMapType,decodeVideoTexture:!!P.map&&!0===P.map.isVideoTexture&&P.map.encoding===Yn,clearcoat:je,clearcoatMap:je&&!!P.clearcoatMap,clearcoatRoughnessMap:je&&!!P.clearcoatRoughnessMap,clearcoatNormalMap:je&&!!P.clearcoatNormalMap,iridescence:We,iridescenceMap:We&&!!P.iridescenceMap,iridescenceThicknessMap:We&&!!P.iridescenceThicknessMap,displacementMap:!!P.displacementMap,roughnessMap:!!P.roughnessMap,metalnessMap:!!P.metalnessMap,specularMap:!!P.specularMap,specularIntensityMap:!!P.specularIntensityMap,specularColorMap:!!P.specularColorMap,opaque:!1===P.transparent&&1===P.blending,alphaMap:!!P.alphaMap,alphaTest:P.alphaTest>0,gradientMap:!!P.gradientMap,sheen:P.sheen>0,sheenColorMap:!!P.sheenColorMap,sheenRoughnessMap:!!P.sheenRoughnessMap,transmission:P.transmission>0,transmissionMap:!!P.transmissionMap,thicknessMap:!!P.thicknessMap,combine:P.combine,vertexTangents:!!P.normalMap&&!!k.attributes.tangent,vertexColors:P.vertexColors,vertexAlphas:!0===P.vertexColors&&!!k.attributes.color&&4===k.attributes.color.itemSize,vertexUvs:!!(P.map||P.bumpMap||P.normalMap||P.specularMap||P.alphaMap||P.emissiveMap||P.roughnessMap||P.metalnessMap||P.clearcoatMap||P.clearcoatRoughnessMap||P.clearcoatNormalMap||P.iridescenceMap||P.iridescenceThicknessMap||P.displacementMap||P.transmissionMap||P.thicknessMap||P.specularIntensityMap||P.specularColorMap||P.sheenColorMap||P.sheenRoughnessMap),uvsVertexOnly:!(P.map||P.bumpMap||P.normalMap||P.specularMap||P.alphaMap||P.emissiveMap||P.roughnessMap||P.metalnessMap||P.clearcoatNormalMap||P.iridescenceMap||P.iridescenceThicknessMap||P.transmission>0||P.transmissionMap||P.thicknessMap||P.specularIntensityMap||P.specularColorMap||P.sheen>0||P.sheenColorMap||P.sheenRoughnessMap||!P.displacementMap),fog:!!ue,useFog:!0===P.fog,fogExp2:ue&&ue.isFogExp2,flatShading:!!P.flatShading,sizeAttenuation:P.sizeAttenuation,logarithmicDepthBuffer:_,skinning:!0===le.isSkinnedMesh,morphTargets:void 0!==k.morphAttributes.position,morphNormals:void 0!==k.morphAttributes.normal,morphColors:void 0!==k.morphAttributes.color,morphTargetsCount:Ee,morphTextureStride:_e,numDirLights:W.directional.length,numPointLights:W.point.length,numSpotLights:W.spot.length,numSpotLightMaps:W.spotLightMap.length,numRectAreaLights:W.rectArea.length,numHemiLights:W.hemi.length,numDirLightShadows:W.directionalShadowMap.length,numPointLightShadows:W.pointShadowMap.length,numSpotLightShadows:W.spotShadowMap.length,numSpotLightShadowsWithMaps:W.numSpotLightShadowsWithMaps,numClippingPlanes:f.numPlanes,numClipIntersection:f.numIntersection,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&X.length>0,shadowMapType:n.shadowMap.type,toneMapping:P.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:P.premultipliedAlpha,doubleSided:2===P.side,flipSided:1===P.side,useDepthPacking:!!P.depthPacking,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionDerivatives:P.extensions&&P.extensions.derivatives,extensionFragDepth:P.extensions&&P.extensions.fragDepth,extensionDrawBuffers:P.extensions&&P.extensions.drawBuffers,extensionShaderTextureLOD:P.extensions&&P.extensions.shaderTextureLOD,rendererExtensionFragDepth:y||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:y||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:y||r.has("EXT_shader_texture_lod"),customProgramCacheKey:P.customProgramCacheKey()}},getProgramCacheKey:function(P){var W=[];if(P.shaderID?W.push(P.shaderID):(W.push(P.customVertexShaderID),W.push(P.customFragmentShaderID)),void 0!==P.defines)for(var X in P.defines)W.push(X),W.push(P.defines[X]);return!1===P.isRawShaderMaterial&&(function(P,W){P.push(W.precision),P.push(W.outputEncoding),P.push(W.envMapMode),P.push(W.envMapCubeUVHeight),P.push(W.combine),P.push(W.vertexUvs),P.push(W.fogExp2),P.push(W.sizeAttenuation),P.push(W.morphTargetsCount),P.push(W.morphAttributeCount),P.push(W.numDirLights),P.push(W.numPointLights),P.push(W.numSpotLights),P.push(W.numSpotLightMaps),P.push(W.numHemiLights),P.push(W.numRectAreaLights),P.push(W.numDirLightShadows),P.push(W.numPointLightShadows),P.push(W.numSpotLightShadows),P.push(W.numSpotLightShadowsWithMaps),P.push(W.shadowMapType),P.push(W.toneMapping),P.push(W.numClippingPlanes),P.push(W.numClipIntersection),P.push(W.depthPacking)}(W,P),function(P,W){h.disableAll(),W.isWebGL2&&h.enable(0),W.supportsVertexTextures&&h.enable(1),W.instancing&&h.enable(2),W.instancingColor&&h.enable(3),W.map&&h.enable(4),W.matcap&&h.enable(5),W.envMap&&h.enable(6),W.lightMap&&h.enable(7),W.aoMap&&h.enable(8),W.emissiveMap&&h.enable(9),W.bumpMap&&h.enable(10),W.normalMap&&h.enable(11),W.objectSpaceNormalMap&&h.enable(12),W.tangentSpaceNormalMap&&h.enable(13),W.clearcoat&&h.enable(14),W.clearcoatMap&&h.enable(15),W.clearcoatRoughnessMap&&h.enable(16),W.clearcoatNormalMap&&h.enable(17),W.iridescence&&h.enable(18),W.iridescenceMap&&h.enable(19),W.iridescenceThicknessMap&&h.enable(20),W.displacementMap&&h.enable(21),W.specularMap&&h.enable(22),W.roughnessMap&&h.enable(23),W.metalnessMap&&h.enable(24),W.gradientMap&&h.enable(25),W.alphaMap&&h.enable(26),W.alphaTest&&h.enable(27),W.vertexColors&&h.enable(28),W.vertexAlphas&&h.enable(29),W.vertexUvs&&h.enable(30),W.vertexTangents&&h.enable(31),W.uvsVertexOnly&&h.enable(32),P.push(h.mask),h.disableAll(),W.fog&&h.enable(0),W.useFog&&h.enable(1),W.flatShading&&h.enable(2),W.logarithmicDepthBuffer&&h.enable(3),W.skinning&&h.enable(4),W.morphTargets&&h.enable(5),W.morphNormals&&h.enable(6),W.morphColors&&h.enable(7),W.premultipliedAlpha&&h.enable(8),W.shadowMapEnabled&&h.enable(9),W.physicallyCorrectLights&&h.enable(10),W.doubleSided&&h.enable(11),W.flipSided&&h.enable(12),W.useDepthPacking&&h.enable(13),W.dithering&&h.enable(14),W.specularIntensityMap&&h.enable(15),W.specularColorMap&&h.enable(16),W.transmission&&h.enable(17),W.transmissionMap&&h.enable(18),W.thicknessMap&&h.enable(19),W.sheen&&h.enable(20),W.sheenColorMap&&h.enable(21),W.sheenRoughnessMap&&h.enable(22),W.decodeVideoTexture&&h.enable(23),W.opaque&&h.enable(24),P.push(h.mask)}(W,P),W.push(n.outputEncoding)),W.push(P.customProgramCacheKey),W.join()},getUniforms:function(P){var W=R[P.type];return W?e4.clone(wu[W].uniforms):P.uniforms},acquireProgram:function(P,W){for(var X,ne=0,le=g.length;ne<le;ne++){var ue=g[ne];if(ue.cacheKey===W){++(X=ue).usedTimes;break}}return void 0===X&&(X=new c9(n,W,P,u),g.push(X)),X},releaseProgram:function(P){if(0==--P.usedTimes){var W=g.indexOf(P);g[W]=g[g.length-1],g.pop(),P.destroy()}},releaseShaderCache:function(P){v.remove(P)},programs:g,dispose:function(){v.dispose()}}}function v9(){var n=new WeakMap;return{get:function(u){var f=n.get(u);return void 0===f&&n.set(u,f={}),f},remove:function(u){n.delete(u)},update:function(u,f,h){n.get(u)[f]=h},dispose:function(){n=new WeakMap}}}function g9(n,a){return n.groupOrder!==a.groupOrder?n.groupOrder-a.groupOrder:n.renderOrder!==a.renderOrder?n.renderOrder-a.renderOrder:n.material.id!==a.material.id?n.material.id-a.material.id:n.z!==a.z?n.z-a.z:n.id-a.id}function LF(n,a){return n.groupOrder!==a.groupOrder?n.groupOrder-a.groupOrder:n.renderOrder!==a.renderOrder?n.renderOrder-a.renderOrder:n.z!==a.z?a.z-n.z:n.id-a.id}function FF(){var n=[],a=0,t=[],r=[],o=[];function f(_,C,S,R,b,E){var T=n[a];return void 0===T?n[a]=T={id:_.id,object:_,geometry:C,material:S,groupOrder:R,renderOrder:_.renderOrder,z:b,group:E}:(T.id=_.id,T.object=_,T.geometry=C,T.material=S,T.groupOrder=R,T.renderOrder=_.renderOrder,T.z=b,T.group=E),a++,T}return{opaque:t,transmissive:r,transparent:o,init:function(){a=0,t.length=0,r.length=0,o.length=0},push:function(_,C,S,R,b,E){var T=f(_,C,S,R,b,E);S.transmission>0?r.push(T):!0===S.transparent?o.push(T):t.push(T)},unshift:function(_,C,S,R,b,E){var T=f(_,C,S,R,b,E);S.transmission>0?r.unshift(T):!0===S.transparent?o.unshift(T):t.unshift(T)},finish:function(){for(var _=a,C=n.length;_<C;_++){var S=n[_];if(null===S.id)break;S.id=null,S.object=null,S.geometry=null,S.material=null,S.group=null}},sort:function(_,C){t.length>1&&t.sort(_||g9),r.length>1&&r.sort(C||LF),o.length>1&&o.sort(C||LF)}}}function m9(){var n=new WeakMap;return{get:function(r,o){var f,u=n.get(r);return void 0===u?(f=new FF,n.set(r,[f])):o>=u.length?(f=new FF,u.push(f)):f=u[o],f},dispose:function(){n=new WeakMap}}}function y9(){var n={};return{get:function(t){if(void 0!==n[t.id])return n[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new J,color:new un};break;case"SpotLight":r={position:new J,direction:new J,color:new un,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new J,color:new un,distance:0,decay:0};break;case"HemisphereLight":r={direction:new J,skyColor:new un,groundColor:new un};break;case"RectAreaLight":r={color:new un,position:new J,halfWidth:new J,halfHeight:new J}}return n[t.id]=r,r}}}var C9=0;function w9(n,a){return(a.castShadow?2:0)-(n.castShadow?2:0)+(a.map?1:0)-(n.map?1:0)}function S9(n,a){for(var t=new y9,r=function(){var n={};return{get:function(t){if(void 0!==n[t.id])return n[t.id];var r;switch(t.type){case"DirectionalLight":case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke,shadowCameraNear:1,shadowCameraFar:1e3}}return n[t.id]=r,r}}}(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},u=0;u<9;u++)o.probe.push(new J);var f=new J,h=new wn,v=new wn;return{setup:function(_,C){for(var S=0,R=0,b=0,E=0;E<9;E++)o.probe[E].set(0,0,0);var T=0,D=0,M=0,O=0,L=0,H=0,z=0,P=0,W=0,X=0;_.sort(w9);for(var ne=!0!==C?Math.PI:1,le=0,ue=_.length;le<ue;le++){var k=_[le],ee=k.color,ie=k.intensity,se=k.distance,ae=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)S+=ee.r*ie*ne,R+=ee.g*ie*ne,b+=ee.b*ie*ne;else if(k.isLightProbe)for(var ge=0;ge<9;ge++)o.probe[ge].addScaledVector(k.sh.coefficients[ge],ie);else if(k.isDirectionalLight){var Ee=t.get(k);if(Ee.color.copy(k.color).multiplyScalar(k.intensity*ne),k.castShadow){var _e=k.shadow,me=r.get(k);me.shadowBias=_e.bias,me.shadowNormalBias=_e.normalBias,me.shadowRadius=_e.radius,me.shadowMapSize=_e.mapSize,o.directionalShadow[T]=me,o.directionalShadowMap[T]=ae,o.directionalShadowMatrix[T]=k.shadow.matrix,H++}o.directional[T]=Ee,T++}else if(k.isSpotLight){var Ge=t.get(k);Ge.position.setFromMatrixPosition(k.matrixWorld),Ge.color.copy(ee).multiplyScalar(ie*ne),Ge.distance=se,Ge.coneCos=Math.cos(k.angle),Ge.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),Ge.decay=k.decay,o.spot[M]=Ge;var Se=k.shadow;if(k.map&&(o.spotLightMap[W]=k.map,W++,Se.updateMatrices(k),k.castShadow&&X++),o.spotLightMatrix[M]=Se.matrix,k.castShadow){var Ae=r.get(k);Ae.shadowBias=Se.bias,Ae.shadowNormalBias=Se.normalBias,Ae.shadowRadius=Se.radius,Ae.shadowMapSize=Se.mapSize,o.spotShadow[M]=Ae,o.spotShadowMap[M]=ae,P++}M++}else if(k.isRectAreaLight){var he=t.get(k);he.color.copy(ee).multiplyScalar(ie),he.halfWidth.set(.5*k.width,0,0),he.halfHeight.set(0,.5*k.height,0),o.rectArea[O]=he,O++}else if(k.isPointLight){var Xe=t.get(k);if(Xe.color.copy(k.color).multiplyScalar(k.intensity*ne),Xe.distance=k.distance,Xe.decay=k.decay,k.castShadow){var ke=k.shadow,je=r.get(k);je.shadowBias=ke.bias,je.shadowNormalBias=ke.normalBias,je.shadowRadius=ke.radius,je.shadowMapSize=ke.mapSize,je.shadowCameraNear=ke.camera.near,je.shadowCameraFar=ke.camera.far,o.pointShadow[D]=je,o.pointShadowMap[D]=ae,o.pointShadowMatrix[D]=k.shadow.matrix,z++}o.point[D]=Xe,D++}else if(k.isHemisphereLight){var We=t.get(k);We.skyColor.copy(k.color).multiplyScalar(ie*ne),We.groundColor.copy(k.groundColor).multiplyScalar(ie*ne),o.hemi[L]=We,L++}}O>0&&(a.isWebGL2||!0===n.has("OES_texture_float_linear")?(o.rectAreaLTC1=ut.LTC_FLOAT_1,o.rectAreaLTC2=ut.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=ut.LTC_HALF_1,o.rectAreaLTC2=ut.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=S,o.ambient[1]=R,o.ambient[2]=b;var Ue=o.hash;(Ue.directionalLength!==T||Ue.pointLength!==D||Ue.spotLength!==M||Ue.rectAreaLength!==O||Ue.hemiLength!==L||Ue.numDirectionalShadows!==H||Ue.numPointShadows!==z||Ue.numSpotShadows!==P||Ue.numSpotMaps!==W)&&(o.directional.length=T,o.spot.length=M,o.rectArea.length=O,o.point.length=D,o.hemi.length=L,o.directionalShadow.length=H,o.directionalShadowMap.length=H,o.pointShadow.length=z,o.pointShadowMap.length=z,o.spotShadow.length=P,o.spotShadowMap.length=P,o.directionalShadowMatrix.length=H,o.pointShadowMatrix.length=z,o.spotLightMatrix.length=P+W-X,o.spotLightMap.length=W,o.numSpotLightShadowsWithMaps=X,Ue.directionalLength=T,Ue.pointLength=D,Ue.spotLength=M,Ue.rectAreaLength=O,Ue.hemiLength=L,Ue.numDirectionalShadows=H,Ue.numPointShadows=z,Ue.numSpotShadows=P,Ue.numSpotMaps=W,o.version=C9++)},setupView:function(_,C){for(var S=0,R=0,b=0,E=0,T=0,D=C.matrixWorldInverse,M=0,O=_.length;M<O;M++){var L=_[M];if(L.isDirectionalLight){var H=o.directional[S];H.direction.setFromMatrixPosition(L.matrixWorld),f.setFromMatrixPosition(L.target.matrixWorld),H.direction.sub(f),H.direction.transformDirection(D),S++}else if(L.isSpotLight){var z=o.spot[b];z.position.setFromMatrixPosition(L.matrixWorld),z.position.applyMatrix4(D),z.direction.setFromMatrixPosition(L.matrixWorld),f.setFromMatrixPosition(L.target.matrixWorld),z.direction.sub(f),z.direction.transformDirection(D),b++}else if(L.isRectAreaLight){var P=o.rectArea[E];P.position.setFromMatrixPosition(L.matrixWorld),P.position.applyMatrix4(D),v.identity(),h.copy(L.matrixWorld),h.premultiply(D),v.extractRotation(h),P.halfWidth.set(.5*L.width,0,0),P.halfHeight.set(0,.5*L.height,0),P.halfWidth.applyMatrix4(v),P.halfHeight.applyMatrix4(v),E++}else if(L.isPointLight){var W=o.point[R];W.position.setFromMatrixPosition(L.matrixWorld),W.position.applyMatrix4(D),R++}else if(L.isHemisphereLight){var X=o.hemi[T];X.direction.setFromMatrixPosition(L.matrixWorld),X.direction.transformDirection(D),T++}}},state:o}}function NF(n,a){var t=new S9(n,a),r=[],o=[];return{init:function(){r.length=0,o.length=0},state:{lightsArray:r,shadowsArray:o,lights:t},setupLights:function(_){t.setup(r,_)},setupLightsView:function(_){t.setupView(r,_)},pushLight:function(_){r.push(_)},pushShadow:function(_){o.push(_)}}}function E9(n,a){var t=new WeakMap;return{get:function(u){var v,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=t.get(u);return void 0===h?(v=new NF(n,a),t.set(u,[v])):f>=h.length?(v=new NF(n,a),h.push(v)):v=h[f],v},dispose:function(){t=new WeakMap}}}var b9=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this)).isMeshDepthMaterial=!0,o.type="MeshDepthMaterial",o.depthPacking=3200,o.map=null,o.alphaMap=null,o.displacementMap=null,o.displacementScale=1,o.displacementBias=0,o.wireframe=!1,o.wireframeLinewidth=1,o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return ye(ze(t.prototype),"copy",this).call(this,o),this.depthPacking=o.depthPacking,this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this}}]),t}(Cu),x9=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this)).isMeshDistanceMaterial=!0,o.type="MeshDistanceMaterial",o.referencePosition=new J,o.nearDistance=1,o.farDistance=1e3,o.map=null,o.alphaMap=null,o.displacementMap=null,o.displacementScale=1,o.displacementBias=0,o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return ye(ze(t.prototype),"copy",this).call(this,o),this.referencePosition.copy(o.referencePosition),this.nearDistance=o.nearDistance,this.farDistance=o.farDistance,this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this}}]),t}(Cu);function T9(n,a,t){var r=new JT,o=new Ke,u=new Ke,f=new Cr,h=new b9({depthPacking:3201}),v=new x9,g={},y=t.maxTextureSize,_={0:1,1:0,2:2},C=new df({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ke},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),S=C.clone();S.defines.HORIZONTAL_PASS=1;var R=new Mr;R.setAttribute("position",new Lo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var b=new na(R,C),E=this;function T(O,L){var H=a.update(b);C.defines.VSM_SAMPLES!==O.blurSamples&&(C.defines.VSM_SAMPLES=O.blurSamples,S.defines.VSM_SAMPLES=O.blurSamples,C.needsUpdate=!0,S.needsUpdate=!0),null===O.mapPass&&(O.mapPass=new sf(o.x,o.y)),C.uniforms.shadow_pass.value=O.map.texture,C.uniforms.resolution.value=O.mapSize,C.uniforms.radius.value=O.radius,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(L,null,H,C,b,null),S.uniforms.shadow_pass.value=O.mapPass.texture,S.uniforms.resolution.value=O.mapSize,S.uniforms.radius.value=O.radius,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(L,null,H,S,b,null)}function D(O,L,H,z,P,W){var X=null,ne=!0===H.isPointLight?O.customDistanceMaterial:O.customDepthMaterial;if(void 0!==ne)X=ne;else if(X=!0===H.isPointLight?v:h,n.localClippingEnabled&&!0===L.clipShadows&&Array.isArray(L.clippingPlanes)&&0!==L.clippingPlanes.length||L.displacementMap&&0!==L.displacementScale||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0){var le=X.uuid,ue=L.uuid,k=g[le];void 0===k&&(g[le]=k={});var ee=k[ue];void 0===ee&&(ee=X.clone(),k[ue]=ee),X=ee}return X.visible=L.visible,X.wireframe=L.wireframe,X.side=3===W?null!==L.shadowSide?L.shadowSide:L.side:null!==L.shadowSide?L.shadowSide:_[L.side],X.alphaMap=L.alphaMap,X.alphaTest=L.alphaTest,X.map=L.map,X.clipShadows=L.clipShadows,X.clippingPlanes=L.clippingPlanes,X.clipIntersection=L.clipIntersection,X.displacementMap=L.displacementMap,X.displacementScale=L.displacementScale,X.displacementBias=L.displacementBias,X.wireframeLinewidth=L.wireframeLinewidth,X.linewidth=L.linewidth,!0===H.isPointLight&&!0===X.isMeshDistanceMaterial&&(X.referencePosition.setFromMatrixPosition(H.matrixWorld),X.nearDistance=z,X.farDistance=P),X}function M(O,L,H,z,P){if(!1!==O.visible){if(O.layers.test(L.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&3===P)&&(!O.frustumCulled||r.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,O.matrixWorld);var X=a.update(O),ne=O.material;if(Array.isArray(ne))for(var le=X.groups,ue=0,k=le.length;ue<k;ue++){var ee=le[ue],ie=ne[ee.materialIndex];if(ie&&ie.visible){var se=D(O,ie,z,H.near,H.far,P);n.renderBufferDirect(H,null,X,se,O,ee)}}else if(ne.visible){var ae=D(O,ne,z,H.near,H.far,P);n.renderBufferDirect(H,null,X,ae,O,null)}}for(var ge=O.children,Ee=0,_e=ge.length;Ee<_e;Ee++)M(ge[Ee],L,H,z,P)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(O,L,H){if(!1!==E.enabled&&(!1!==E.autoUpdate||!1!==E.needsUpdate)&&0!==O.length){var z=n.getRenderTarget(),P=n.getActiveCubeFace(),W=n.getActiveMipmapLevel(),X=n.state;X.setBlending(0),X.buffers.color.setClear(1,1,1,1),X.buffers.depth.setTest(!0),X.setScissorTest(!1);for(var ne=0,le=O.length;ne<le;ne++){var ue=O[ne],k=ue.shadow;if(void 0!==k){if(!1!==k.autoUpdate||!1!==k.needsUpdate){o.copy(k.mapSize);var ee=k.getFrameExtents();o.multiply(ee),u.copy(k.mapSize),(o.x>y||o.y>y)&&(o.x>y&&(u.x=Math.floor(y/ee.x),o.x=u.x*ee.x,k.mapSize.x=u.x),o.y>y&&(u.y=Math.floor(y/ee.y),o.y=u.y*ee.y,k.mapSize.y=u.y)),null===k.map&&(k.map=new sf(o.x,o.y,3!==this.type?{minFilter:Ti,magFilter:Ti}:{}),k.map.texture.name=ue.name+".shadowMap",k.camera.updateProjectionMatrix()),n.setRenderTarget(k.map),n.clear();for(var se=k.getViewportCount(),ae=0;ae<se;ae++){var ge=k.getViewport(ae);f.set(u.x*ge.x,u.y*ge.y,u.x*ge.z,u.y*ge.w),X.viewport(f),k.updateMatrices(ue,ae),r=k.getFrustum(),M(L,H,k.camera,ue,this.type)}!0!==k.isPointLightShadow&&3===this.type&&T(k,H),k.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",ue,"has no shadow.")}E.needsUpdate=!1,n.setRenderTarget(z,P,W)}}}function D9(n,a,t){var r,o,u=t.isWebGL2,g=new function(){var fe=!1,wt=new Cr,ot=null,St=new Cr(0,0,0,0);return{setMask:function(bt){ot!==bt&&!fe&&(n.colorMask(bt,bt,bt,bt),ot=bt)},setLocked:function(bt){fe=bt},setClear:function(bt,lr,Kn,yr,Ur){!0===Ur&&(bt*=yr,lr*=yr,Kn*=yr),wt.set(bt,lr,Kn,yr),!1===St.equals(wt)&&(n.clearColor(bt,lr,Kn,yr),St.copy(wt))},reset:function(){fe=!1,ot=null,St.set(-1,0,0,0)}}},y=new function(){var fe=!1,wt=null,ot=null,St=null;return{setTest:function(bt){bt?je(2929):We(2929)},setMask:function(bt){wt!==bt&&!fe&&(n.depthMask(bt),wt=bt)},setFunc:function(bt){if(ot!==bt){switch(bt){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}ot=bt}},setLocked:function(bt){fe=bt},setClear:function(bt){St!==bt&&(n.clearDepth(bt),St=bt)},reset:function(){fe=!1,wt=null,ot=null,St=null}}},_=new function(){var fe=!1,wt=null,ot=null,St=null,Et=null,bt=null,lr=null,Kn=null,yr=null;return{setTest:function(er){fe||(er?je(2960):We(2960))},setMask:function(er){wt!==er&&!fe&&(n.stencilMask(er),wt=er)},setFunc:function(er,es,ts){(ot!==er||St!==es||Et!==ts)&&(n.stencilFunc(er,es,ts),ot=er,St=es,Et=ts)},setOp:function(er,es,ts){(bt!==er||lr!==es||Kn!==ts)&&(n.stencilOp(er,es,ts),bt=er,lr=es,Kn=ts)},setLocked:function(er){fe=er},setClear:function(er){yr!==er&&(n.clearStencil(er),yr=er)},reset:function(){fe=!1,wt=null,ot=null,St=null,Et=null,bt=null,lr=null,Kn=null,yr=null}}},C=new WeakMap,S=new WeakMap,R={},b={},E=new WeakMap,T=[],D=null,M=!1,O=null,L=null,H=null,z=null,P=null,W=null,X=null,ne=!1,le=null,ue=null,k=null,ee=null,ie=null,se=n.getParameter(35661),ae=!1,ge=0,Ee=n.getParameter(7938);-1!==Ee.indexOf("WebGL")?(ge=parseFloat(/^WebGL (\d)/.exec(Ee)[1]),ae=ge>=1):-1!==Ee.indexOf("OpenGL ES")&&(ge=parseFloat(/^OpenGL ES (\d)/.exec(Ee)[1]),ae=ge>=2);var _e=null,me={},Ge=n.getParameter(3088),Se=n.getParameter(2978),Ae=(new Cr).fromArray(Ge),he=(new Cr).fromArray(Se);function Xe(fe,wt,ot){var St=new Uint8Array(4),Et=n.createTexture();n.bindTexture(fe,Et),n.texParameteri(fe,10241,9728),n.texParameteri(fe,10240,9728);for(var bt=0;bt<ot;bt++)n.texImage2D(wt+bt,0,6408,1,1,0,6408,5121,St);return Et}var ke={};function je(fe){!0!==R[fe]&&(n.enable(fe),R[fe]=!0)}function We(fe){!1!==R[fe]&&(n.disable(fe),R[fe]=!1)}ke[3553]=Xe(3553,3553,1),ke[34067]=Xe(34067,34069,6),g.setClear(0,0,0,1),y.setClear(1),_.setClear(0),je(2929),y.setFunc(3),fn(!1),Hn(1),je(2884),_n(0);var et=(En(r={},100,32774),En(r,101,32778),En(r,102,32779),r);if(u)et[103]=32775,et[104]=32776;else{var Ot=a.get("EXT_blend_minmax");null!==Ot&&(et[103]=Ot.MIN_EXT,et[104]=Ot.MAX_EXT)}var Sn=(En(o={},200,0),En(o,201,1),En(o,202,768),En(o,204,770),En(o,210,776),En(o,208,774),En(o,206,772),En(o,203,769),En(o,205,771),En(o,209,775),En(o,207,773),o);function _n(fe,wt,ot,St,Et,bt,lr,Kn){if(0!==fe){if(!1===M&&(je(3042),M=!0),5===fe)Et=Et||wt,bt=bt||ot,lr=lr||St,(wt!==L||Et!==P)&&(n.blendEquationSeparate(et[wt],et[Et]),L=wt,P=Et),(ot!==H||St!==z||bt!==W||lr!==X)&&(n.blendFuncSeparate(Sn[ot],Sn[St],Sn[bt],Sn[lr]),H=ot,z=St,W=bt,X=lr),O=fe,ne=!1;else if(fe!==O||Kn!==ne){if((100!==L||100!==P)&&(n.blendEquation(32774),L=100,P=100),Kn)switch(fe){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe)}else switch(fe){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe)}H=null,z=null,W=null,X=null,O=fe,ne=Kn}}else!0===M&&(We(3042),M=!1)}function fn(fe){le!==fe&&(n.frontFace(fe?2304:2305),le=fe)}function Hn(fe){0!==fe?(je(2884),fe!==ue&&n.cullFace(1===fe?1029:2===fe?1028:1032)):We(2884),ue=fe}function hr(fe,wt,ot){fe?(je(32823),(ee!==wt||ie!==ot)&&(n.polygonOffset(wt,ot),ee=wt,ie=ot)):We(32823)}return{buffers:{color:g,depth:y,stencil:_},enable:je,disable:We,bindFramebuffer:function(fe,wt){return b[fe]!==wt&&(n.bindFramebuffer(fe,wt),b[fe]=wt,u&&(36009===fe&&(b[36160]=wt),36160===fe&&(b[36009]=wt)),!0)},drawBuffers:function(fe,wt){var ot=T,St=!1;if(fe)if(void 0===(ot=E.get(wt))&&E.set(wt,ot=[]),fe.isWebGLMultipleRenderTargets){var Et=fe.texture;if(ot.length!==Et.length||36064!==ot[0]){for(var bt=0,lr=Et.length;bt<lr;bt++)ot[bt]=36064+bt;ot.length=Et.length,St=!0}}else 36064!==ot[0]&&(ot[0]=36064,St=!0);else 1029!==ot[0]&&(ot[0]=1029,St=!0);St&&(t.isWebGL2?n.drawBuffers(ot):a.get("WEBGL_draw_buffers").drawBuffersWEBGL(ot))},useProgram:function(fe){return D!==fe&&(n.useProgram(fe),D=fe,!0)},setBlending:_n,setMaterial:function(fe,wt){2===fe.side?We(2884):je(2884);var ot=1===fe.side;wt&&(ot=!ot),fn(ot),1===fe.blending&&!1===fe.transparent?_n(0):_n(fe.blending,fe.blendEquation,fe.blendSrc,fe.blendDst,fe.blendEquationAlpha,fe.blendSrcAlpha,fe.blendDstAlpha,fe.premultipliedAlpha),y.setFunc(fe.depthFunc),y.setTest(fe.depthTest),y.setMask(fe.depthWrite),g.setMask(fe.colorWrite);var St=fe.stencilWrite;_.setTest(St),St&&(_.setMask(fe.stencilWriteMask),_.setFunc(fe.stencilFunc,fe.stencilRef,fe.stencilFuncMask),_.setOp(fe.stencilFail,fe.stencilZFail,fe.stencilZPass)),hr(fe.polygonOffset,fe.polygonOffsetFactor,fe.polygonOffsetUnits),!0===fe.alphaToCoverage?je(32926):We(32926)},setFlipSided:fn,setCullFace:Hn,setLineWidth:function(fe){fe!==k&&(ae&&n.lineWidth(fe),k=fe)},setPolygonOffset:hr,setScissorTest:function(fe){fe?je(3089):We(3089)},activeTexture:function(fe){void 0===fe&&(fe=33984+se-1),_e!==fe&&(n.activeTexture(fe),_e=fe)},bindTexture:function(fe,wt,ot){void 0===ot&&(ot=null===_e?33984+se-1:_e);var St=me[ot];void 0===St&&(me[ot]=St={type:void 0,texture:void 0}),(St.type!==fe||St.texture!==wt)&&(_e!==ot&&(n.activeTexture(ot),_e=ot),n.bindTexture(fe,wt||ke[fe]),St.type=fe,St.texture=wt)},unbindTexture:function(){var fe=me[_e];void 0!==fe&&void 0!==fe.type&&(n.bindTexture(fe.type,null),fe.type=void 0,fe.texture=void 0)},compressedTexImage2D:function(){try{n.compressedTexImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}},compressedTexImage3D:function(){try{n.compressedTexImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}},texImage2D:function(){try{n.texImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}},texImage3D:function(){try{n.texImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}},updateUBOMapping:function(fe,wt){var ot=S.get(wt);void 0===ot&&(ot=new WeakMap,S.set(wt,ot));var St=ot.get(fe);void 0===St&&(St=n.getUniformBlockIndex(wt,fe.name),ot.set(fe,St))},uniformBlockBinding:function(fe,wt){var St=S.get(wt).get(fe);C.get(wt)!==St&&(n.uniformBlockBinding(wt,St,fe.__bindingPointIndex),C.set(wt,St))},texStorage2D:function(){try{n.texStorage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}},texStorage3D:function(){try{n.texStorage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}},texSubImage2D:function(){try{n.texSubImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}},texSubImage3D:function(){try{n.texSubImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}},compressedTexSubImage2D:function(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}},compressedTexSubImage3D:function(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}},scissor:function(fe){!1===Ae.equals(fe)&&(n.scissor(fe.x,fe.y,fe.z,fe.w),Ae.copy(fe))},viewport:function(fe){!1===he.equals(fe)&&(n.viewport(fe.x,fe.y,fe.z,fe.w),he.copy(fe))},reset:function(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===u&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),R={},_e=null,me={},b={},E=new WeakMap,T=[],D=null,M=!1,O=null,L=null,H=null,z=null,P=null,W=null,X=null,ne=!1,le=null,ue=null,k=null,ee=null,ie=null,Ae.set(0,0,n.canvas.width,n.canvas.height),he.set(0,0,n.canvas.width,n.canvas.height),g.reset(),y.reset(),_.reset()}}}function M9(n,a,t,r,o,u,f){var h,v,T,g=o.isWebGL2,y=o.maxTextures,_=o.maxCubemapSize,C=o.maxTextureSize,S=o.maxSamples,R=a.has("WEBGL_multisampled_render_to_texture")?a.get("WEBGL_multisampled_render_to_texture"):null,b="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),E=new WeakMap,D=new WeakMap,M=!1;try{M="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(re){}function O(re,q){return M?new OffscreenCanvas(re,q):vy("canvas")}function L(re,q,De,tt){var ct=1;if((re.width>tt||re.height>tt)&&(ct=tt/Math.max(re.width,re.height)),ct<1||!0===q){if("undefined"!=typeof HTMLImageElement&&re instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&re instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&re instanceof ImageBitmap){var dt=q?SS:Math.floor,Bt=dt(ct*re.width),Nt=dt(ct*re.height);void 0===T&&(T=O(Bt,Nt));var te=De?O(Bt,Nt):T;return te.width=Bt,te.height=Nt,te.getContext("2d").drawImage(re,0,0,Bt,Nt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+re.width+"x"+re.height+") to ("+Bt+"x"+Nt+")."),te}return"data"in re&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+re.width+"x"+re.height+")."),re}return re}function H(re){return TT(re.width)&&TT(re.height)}function P(re,q){return re.generateMipmaps&&q&&re.minFilter!==Ti&&re.minFilter!==Po}function W(re){n.generateMipmap(re)}function X(re,q,De,tt){var ct=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===g)return q;if(null!==re){if(void 0!==n[re])return n[re];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+re+"'")}var dt=q;return 6403===q&&(5126===De&&(dt=33326),5131===De&&(dt=33325),5121===De&&(dt=33321)),33319===q&&(5126===De&&(dt=33328),5131===De&&(dt=33327),5121===De&&(dt=33323)),6408===q&&(5126===De&&(dt=34836),5131===De&&(dt=34842),5121===De&&(dt=tt===Yn&&!1===ct?35907:32856),32819===De&&(dt=32854),32820===De&&(dt=32855)),(33325===dt||33326===dt||33327===dt||33328===dt||34842===dt||34836===dt)&&a.get("EXT_color_buffer_float"),dt}function ne(re,q,De){return!0===P(re,De)||re.isFramebufferTexture&&re.minFilter!==Ti&&re.minFilter!==Po?Math.log2(Math.max(q.width,q.height))+1:void 0!==re.mipmaps&&re.mipmaps.length>0?re.mipmaps.length:re.isCompressedTexture&&Array.isArray(re.image)?q.mipmaps.length:1}function le(re){return re===Ti||1004===re||1005===re?9728:9729}function ue(re){var q=re.target;q.removeEventListener("dispose",ue),function(re){var q=r.get(re);if(void 0!==q.__webglInit){var De=re.source,tt=D.get(De);if(tt){var ct=tt[q.__cacheKey];ct.usedTimes--,0===ct.usedTimes&&ie(re),0===Object.keys(tt).length&&D.delete(De)}r.remove(re)}}(q),q.isVideoTexture&&E.delete(q)}function k(re){var q=re.target;q.removeEventListener("dispose",k),function(re){var q=re.texture,De=r.get(re),tt=r.get(q);if(void 0!==tt.__webglTexture&&(n.deleteTexture(tt.__webglTexture),f.memory.textures--),re.depthTexture&&re.depthTexture.dispose(),re.isWebGLCubeRenderTarget)for(var ct=0;ct<6;ct++)n.deleteFramebuffer(De.__webglFramebuffer[ct]),De.__webglDepthbuffer&&n.deleteRenderbuffer(De.__webglDepthbuffer[ct]);else{if(n.deleteFramebuffer(De.__webglFramebuffer),De.__webglDepthbuffer&&n.deleteRenderbuffer(De.__webglDepthbuffer),De.__webglMultisampledFramebuffer&&n.deleteFramebuffer(De.__webglMultisampledFramebuffer),De.__webglColorRenderbuffer)for(var dt=0;dt<De.__webglColorRenderbuffer.length;dt++)De.__webglColorRenderbuffer[dt]&&n.deleteRenderbuffer(De.__webglColorRenderbuffer[dt]);De.__webglDepthRenderbuffer&&n.deleteRenderbuffer(De.__webglDepthRenderbuffer)}if(re.isWebGLMultipleRenderTargets)for(var Bt=0,Nt=q.length;Bt<Nt;Bt++){var te=r.get(q[Bt]);te.__webglTexture&&(n.deleteTexture(te.__webglTexture),f.memory.textures--),r.remove(q[Bt])}r.remove(q),r.remove(re)}(q)}function ie(re){var q=r.get(re);n.deleteTexture(q.__webglTexture),delete D.get(re.source)[q.__cacheKey],f.memory.textures--}var ae=0;function me(re,q){var De=r.get(re);if(re.isVideoTexture&&function(re){var q=f.render.frame;E.get(re)!==q&&(E.set(re,q),re.update())}(re),!1===re.isRenderTargetTexture&&re.version>0&&De.__version!==re.version){var tt=re.image;if(null===tt)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==tt.complete)return void We(De,re,q);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(3553,De.__webglTexture,33984+q)}var he=(En(h={},ef,10497),En(h,ya,33071),En(h,1002,33648),h),Xe=(En(v={},Ti,9728),En(v,1004,9984),En(v,1005,9986),En(v,Po,9729),En(v,1007,9985),En(v,xc,9987),v);function ke(re,q,De){if(De?(n.texParameteri(re,10242,he[q.wrapS]),n.texParameteri(re,10243,he[q.wrapT]),(32879===re||35866===re)&&n.texParameteri(re,32882,he[q.wrapR]),n.texParameteri(re,10240,Xe[q.magFilter]),n.texParameteri(re,10241,Xe[q.minFilter])):(n.texParameteri(re,10242,33071),n.texParameteri(re,10243,33071),(32879===re||35866===re)&&n.texParameteri(re,32882,33071),(q.wrapS!==ya||q.wrapT!==ya)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(re,10240,le(q.magFilter)),n.texParameteri(re,10241,le(q.minFilter)),q.minFilter!==Ti&&q.minFilter!==Po&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===a.has("EXT_texture_filter_anisotropic")){var tt=a.get("EXT_texture_filter_anisotropic");if(q.magFilter===Ti||1005!==q.minFilter&&q.minFilter!==xc||q.type===Rc&&!1===a.has("OES_texture_float_linear")||!1===g&&q.type===cy&&!1===a.has("OES_texture_half_float_linear"))return;(q.anisotropy>1||r.get(q).__currentAnisotropy)&&(n.texParameterf(re,tt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,o.getMaxAnisotropy())),r.get(q).__currentAnisotropy=q.anisotropy)}}function je(re,q){var De=!1;void 0===re.__webglInit&&(re.__webglInit=!0,q.addEventListener("dispose",ue));var tt=q.source,ct=D.get(tt);void 0===ct&&D.set(tt,ct={});var dt=function(re){var q=[];return q.push(re.wrapS),q.push(re.wrapT),q.push(re.wrapR||0),q.push(re.magFilter),q.push(re.minFilter),q.push(re.anisotropy),q.push(re.internalFormat),q.push(re.format),q.push(re.type),q.push(re.generateMipmaps),q.push(re.premultiplyAlpha),q.push(re.flipY),q.push(re.unpackAlignment),q.push(re.encoding),q.join()}(q);if(dt!==re.__cacheKey){void 0===ct[dt]&&(ct[dt]={texture:n.createTexture(),usedTimes:0},f.memory.textures++,De=!0),ct[dt].usedTimes++;var Bt=ct[re.__cacheKey];void 0!==Bt&&(ct[re.__cacheKey].usedTimes--,0===Bt.usedTimes&&ie(q)),re.__cacheKey=dt,re.__webglTexture=ct[dt].texture}return De}function We(re,q,De){var tt=3553;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(tt=35866),q.isData3DTexture&&(tt=32879);var ct=je(re,q),dt=q.source;t.bindTexture(tt,re.__webglTexture,33984+De);var Bt=r.get(dt);if(dt.version!==Bt.__version||!0===ct){t.activeTexture(33984+De),n.pixelStorei(37440,q.flipY),n.pixelStorei(37441,q.premultiplyAlpha),n.pixelStorei(3317,q.unpackAlignment),n.pixelStorei(37443,0);var Nt=function(re){return!g&&(re.wrapS!==ya||re.wrapT!==ya||re.minFilter!==Ti&&re.minFilter!==Po)}(q)&&!1===H(q.image),te=L(q.image,Nt,!1,C),rt=H(te=vr(q,te))||g,Dt=u.convert(q.format,q.encoding),Ct=u.convert(q.type),ft=X(q.internalFormat,Dt,Ct,q.encoding,q.isVideoTexture);ke(tt,q,rt);var at,Kt=q.mipmaps,On=g&&!0!==q.isVideoTexture,Wn=void 0===Bt.__version||!0===ct,Un=ne(q,te,rt);if(q.isDepthTexture)ft=6402,g?ft=q.type===Rc?36012:q.type===nf?33190:q.type===Dh?35056:33189:q.type===Rc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),q.format===rf&&6402===ft&&1012!==q.type&&q.type!==nf&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),q.type=nf,Ct=u.convert(q.type)),q.format===Mh&&6402===ft&&(ft=34041,q.type!==Dh&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),q.type=Dh,Ct=u.convert(q.type))),Wn&&(On?t.texStorage2D(3553,1,ft,te.width,te.height):t.texImage2D(3553,0,ft,te.width,te.height,0,Dt,Ct,null));else if(q.isDataTexture)if(Kt.length>0&&rt){On&&Wn&&t.texStorage2D(3553,Un,ft,Kt[0].width,Kt[0].height);for(var fe=0,wt=Kt.length;fe<wt;fe++)at=Kt[fe],On?t.texSubImage2D(3553,fe,0,0,at.width,at.height,Dt,Ct,at.data):t.texImage2D(3553,fe,ft,at.width,at.height,0,Dt,Ct,at.data);q.generateMipmaps=!1}else On?(Wn&&t.texStorage2D(3553,Un,ft,te.width,te.height),t.texSubImage2D(3553,0,0,0,te.width,te.height,Dt,Ct,te.data)):t.texImage2D(3553,0,ft,te.width,te.height,0,Dt,Ct,te.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){On&&Wn&&t.texStorage3D(35866,Un,ft,Kt[0].width,Kt[0].height,te.depth);for(var ot=0,St=Kt.length;ot<St;ot++)at=Kt[ot],q.format!==$a?null!==Dt?On?t.compressedTexSubImage3D(35866,ot,0,0,0,at.width,at.height,te.depth,Dt,at.data,0,0):t.compressedTexImage3D(35866,ot,ft,at.width,at.height,te.depth,0,at.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):On?t.texSubImage3D(35866,ot,0,0,0,at.width,at.height,te.depth,Dt,Ct,at.data):t.texImage3D(35866,ot,ft,at.width,at.height,te.depth,0,Dt,Ct,at.data)}else{On&&Wn&&t.texStorage2D(3553,Un,ft,Kt[0].width,Kt[0].height);for(var Et=0,bt=Kt.length;Et<bt;Et++)at=Kt[Et],q.format!==$a?null!==Dt?On?t.compressedTexSubImage2D(3553,Et,0,0,at.width,at.height,Dt,at.data):t.compressedTexImage2D(3553,Et,ft,at.width,at.height,0,at.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):On?t.texSubImage2D(3553,Et,0,0,at.width,at.height,Dt,Ct,at.data):t.texImage2D(3553,Et,ft,at.width,at.height,0,Dt,Ct,at.data)}else if(q.isDataArrayTexture)On?(Wn&&t.texStorage3D(35866,Un,ft,te.width,te.height,te.depth),t.texSubImage3D(35866,0,0,0,0,te.width,te.height,te.depth,Dt,Ct,te.data)):t.texImage3D(35866,0,ft,te.width,te.height,te.depth,0,Dt,Ct,te.data);else if(q.isData3DTexture)On?(Wn&&t.texStorage3D(32879,Un,ft,te.width,te.height,te.depth),t.texSubImage3D(32879,0,0,0,0,te.width,te.height,te.depth,Dt,Ct,te.data)):t.texImage3D(32879,0,ft,te.width,te.height,te.depth,0,Dt,Ct,te.data);else if(q.isFramebufferTexture){if(Wn)if(On)t.texStorage2D(3553,Un,ft,te.width,te.height);else for(var lr=te.width,Kn=te.height,yr=0;yr<Un;yr++)t.texImage2D(3553,yr,ft,lr,Kn,0,Dt,Ct,null),lr>>=1,Kn>>=1}else if(Kt.length>0&&rt){On&&Wn&&t.texStorage2D(3553,Un,ft,Kt[0].width,Kt[0].height);for(var Ur=0,er=Kt.length;Ur<er;Ur++)at=Kt[Ur],On?t.texSubImage2D(3553,Ur,0,0,Dt,Ct,at):t.texImage2D(3553,Ur,ft,Dt,Ct,at);q.generateMipmaps=!1}else On?(Wn&&t.texStorage2D(3553,Un,ft,te.width,te.height),t.texSubImage2D(3553,0,0,0,Dt,Ct,te)):t.texImage2D(3553,0,ft,Dt,Ct,te);P(q,rt)&&W(tt),Bt.__version=dt.version,q.onUpdate&&q.onUpdate(q)}re.__version=q.version}function it(re,q,De,tt,ct){var dt=u.convert(De.format,De.encoding),Bt=u.convert(De.type),Nt=X(De.internalFormat,dt,Bt,De.encoding);r.get(q).__hasExternalTextures||(32879===ct||35866===ct?t.texImage3D(ct,0,Nt,q.width,q.height,q.depth,0,dt,Bt,null):t.texImage2D(ct,0,Nt,q.width,q.height,0,dt,Bt,null)),t.bindFramebuffer(36160,re),zt(q)?R.framebufferTexture2DMultisampleEXT(36160,tt,ct,r.get(De).__webglTexture,0,Hn(q)):(3553===ct||ct>=34069&&ct<=34074)&&n.framebufferTexture2D(36160,tt,ct,r.get(De).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ht(re,q,De){if(n.bindRenderbuffer(36161,re),q.depthBuffer&&!q.stencilBuffer){var tt=33189;if(De||zt(q)){var ct=q.depthTexture;ct&&ct.isDepthTexture&&(ct.type===Rc?tt=36012:ct.type===nf&&(tt=33190));var dt=Hn(q);zt(q)?R.renderbufferStorageMultisampleEXT(36161,dt,tt,q.width,q.height):n.renderbufferStorageMultisample(36161,dt,tt,q.width,q.height)}else n.renderbufferStorage(36161,tt,q.width,q.height);n.framebufferRenderbuffer(36160,36096,36161,re)}else if(q.depthBuffer&&q.stencilBuffer){var Bt=Hn(q);De&&!1===zt(q)?n.renderbufferStorageMultisample(36161,Bt,35056,q.width,q.height):zt(q)?R.renderbufferStorageMultisampleEXT(36161,Bt,35056,q.width,q.height):n.renderbufferStorage(36161,34041,q.width,q.height),n.framebufferRenderbuffer(36160,33306,36161,re)}else for(var Nt=!0===q.isWebGLMultipleRenderTargets?q.texture:[q.texture],te=0;te<Nt.length;te++){var rt=Nt[te],Dt=u.convert(rt.format,rt.encoding),Ct=u.convert(rt.type),ft=X(rt.internalFormat,Dt,Ct,rt.encoding),at=Hn(q);De&&!1===zt(q)?n.renderbufferStorageMultisample(36161,at,ft,q.width,q.height):zt(q)?R.renderbufferStorageMultisampleEXT(36161,at,ft,q.width,q.height):n.renderbufferStorage(36161,ft,q.width,q.height)}n.bindRenderbuffer(36161,null)}function Ot(re){var q=r.get(re),De=!0===re.isWebGLCubeRenderTarget;if(re.depthTexture&&!q.__autoAllocateDepthBuffer){if(De)throw new Error("target.depthTexture not supported in Cube render targets");!function(re,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,re),!q.depthTexture||!q.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(q.depthTexture).__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),me(q.depthTexture,0);var tt=r.get(q.depthTexture).__webglTexture,ct=Hn(q);if(q.depthTexture.format===rf)zt(q)?R.framebufferTexture2DMultisampleEXT(36160,36096,3553,tt,0,ct):n.framebufferTexture2D(36160,36096,3553,tt,0);else{if(q.depthTexture.format!==Mh)throw new Error("Unknown depthTexture format");zt(q)?R.framebufferTexture2DMultisampleEXT(36160,33306,3553,tt,0,ct):n.framebufferTexture2D(36160,33306,3553,tt,0)}}(q.__webglFramebuffer,re)}else if(De){q.__webglDepthbuffer=[];for(var tt=0;tt<6;tt++)t.bindFramebuffer(36160,q.__webglFramebuffer[tt]),q.__webglDepthbuffer[tt]=n.createRenderbuffer(),Ht(q.__webglDepthbuffer[tt],re,!1)}else t.bindFramebuffer(36160,q.__webglFramebuffer),q.__webglDepthbuffer=n.createRenderbuffer(),Ht(q.__webglDepthbuffer,re,!1);t.bindFramebuffer(36160,null)}function Hn(re){return Math.min(S,re.samples)}function zt(re){var q=r.get(re);return g&&re.samples>0&&!0===a.has("WEBGL_multisampled_render_to_texture")&&!1!==q.__useRenderToTexture}function vr(re,q){var De=re.encoding,tt=re.format,ct=re.type;return!0===re.isCompressedTexture||!0===re.isVideoTexture||1035===re.format||De!==of&&(De===Yn?!1===g?!0===a.has("EXT_sRGB")&&tt===$a?(re.format=1035,re.minFilter=Po,re.generateMipmaps=!1):q=jL.sRGBToLinear(q):(tt!==$a||ct!==tf)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",De)),q}this.allocateTextureUnit=function(){var re=ae;return re>=y&&console.warn("THREE.WebGLTextures: Trying to use "+re+" texture units while this GPU supports only "+y),ae+=1,re},this.resetTextureUnits=function(){ae=0},this.setTexture2D=me,this.setTexture2DArray=function(re,q){var De=r.get(re);re.version>0&&De.__version!==re.version?We(De,re,q):t.bindTexture(35866,De.__webglTexture,33984+q)},this.setTexture3D=function(re,q){var De=r.get(re);re.version>0&&De.__version!==re.version?We(De,re,q):t.bindTexture(32879,De.__webglTexture,33984+q)},this.setTextureCube=function(re,q){var De=r.get(re);re.version>0&&De.__version!==re.version?function(re,q,De){if(6===q.image.length){var tt=je(re,q),ct=q.source;t.bindTexture(34067,re.__webglTexture,33984+De);var dt=r.get(ct);if(ct.version!==dt.__version||!0===tt){t.activeTexture(33984+De),n.pixelStorei(37440,q.flipY),n.pixelStorei(37441,q.premultiplyAlpha),n.pixelStorei(3317,q.unpackAlignment),n.pixelStorei(37443,0);for(var Bt=q.isCompressedTexture||q.image[0].isCompressedTexture,Nt=q.image[0]&&q.image[0].isDataTexture,te=[],rt=0;rt<6;rt++)te[rt]=Bt||Nt?Nt?q.image[rt].image:q.image[rt]:L(q.image[rt],!1,!0,_),te[rt]=vr(q,te[rt]);var fe,Dt=te[0],Ct=H(Dt)||g,ft=u.convert(q.format,q.encoding),at=u.convert(q.type),Kt=X(q.internalFormat,ft,at,q.encoding),On=g&&!0!==q.isVideoTexture,Wn=void 0===dt.__version||!0===tt,Un=ne(q,Dt,Ct);if(ke(34067,q,Ct),Bt){On&&Wn&&t.texStorage2D(34067,Un,Kt,Dt.width,Dt.height);for(var wt=0;wt<6;wt++){fe=te[wt].mipmaps;for(var ot=0;ot<fe.length;ot++){var St=fe[ot];q.format!==$a?null!==ft?On?t.compressedTexSubImage2D(34069+wt,ot,0,0,St.width,St.height,ft,St.data):t.compressedTexImage2D(34069+wt,ot,Kt,St.width,St.height,0,St.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):On?t.texSubImage2D(34069+wt,ot,0,0,St.width,St.height,ft,at,St.data):t.texImage2D(34069+wt,ot,Kt,St.width,St.height,0,ft,at,St.data)}}}else{fe=q.mipmaps,On&&Wn&&(fe.length>0&&Un++,t.texStorage2D(34067,Un,Kt,te[0].width,te[0].height));for(var Et=0;Et<6;Et++)if(Nt){On?t.texSubImage2D(34069+Et,0,0,0,te[Et].width,te[Et].height,ft,at,te[Et].data):t.texImage2D(34069+Et,0,Kt,te[Et].width,te[Et].height,0,ft,at,te[Et].data);for(var bt=0;bt<fe.length;bt++){var Kn=fe[bt].image[Et].image;On?t.texSubImage2D(34069+Et,bt+1,0,0,Kn.width,Kn.height,ft,at,Kn.data):t.texImage2D(34069+Et,bt+1,Kt,Kn.width,Kn.height,0,ft,at,Kn.data)}}else{On?t.texSubImage2D(34069+Et,0,0,0,ft,at,te[Et]):t.texImage2D(34069+Et,0,Kt,ft,at,te[Et]);for(var yr=0;yr<fe.length;yr++){var Ur=fe[yr];On?t.texSubImage2D(34069+Et,yr+1,0,0,ft,at,Ur.image[Et]):t.texImage2D(34069+Et,yr+1,Kt,ft,at,Ur.image[Et])}}}P(q,Ct)&&W(34067),dt.__version=ct.version,q.onUpdate&&q.onUpdate(q)}re.__version=q.version}}(De,re,q):t.bindTexture(34067,De.__webglTexture,33984+q)},this.rebindTextures=function(re,q,De){var tt=r.get(re);void 0!==q&&it(tt.__webglFramebuffer,re,re.texture,36064,3553),void 0!==De&&Ot(re)},this.setupRenderTarget=function(re){var q=re.texture,De=r.get(re),tt=r.get(q);re.addEventListener("dispose",k),!0!==re.isWebGLMultipleRenderTargets&&(void 0===tt.__webglTexture&&(tt.__webglTexture=n.createTexture()),tt.__version=q.version,f.memory.textures++);var ct=!0===re.isWebGLCubeRenderTarget,dt=!0===re.isWebGLMultipleRenderTargets,Bt=H(re)||g;if(ct){De.__webglFramebuffer=[];for(var Nt=0;Nt<6;Nt++)De.__webglFramebuffer[Nt]=n.createFramebuffer()}else{if(De.__webglFramebuffer=n.createFramebuffer(),dt)if(o.drawBuffers)for(var te=re.texture,rt=0,Dt=te.length;rt<Dt;rt++){var Ct=r.get(te[rt]);void 0===Ct.__webglTexture&&(Ct.__webglTexture=n.createTexture(),f.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(g&&re.samples>0&&!1===zt(re)){var ft=dt?q:[q];De.__webglMultisampledFramebuffer=n.createFramebuffer(),De.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,De.__webglMultisampledFramebuffer);for(var at=0;at<ft.length;at++){var Kt=ft[at];De.__webglColorRenderbuffer[at]=n.createRenderbuffer(),n.bindRenderbuffer(36161,De.__webglColorRenderbuffer[at]);var On=u.convert(Kt.format,Kt.encoding),Wn=u.convert(Kt.type),Un=X(Kt.internalFormat,On,Wn,Kt.encoding,!0===re.isXRRenderTarget),fe=Hn(re);n.renderbufferStorageMultisample(36161,fe,Un,re.width,re.height),n.framebufferRenderbuffer(36160,36064+at,36161,De.__webglColorRenderbuffer[at])}n.bindRenderbuffer(36161,null),re.depthBuffer&&(De.__webglDepthRenderbuffer=n.createRenderbuffer(),Ht(De.__webglDepthRenderbuffer,re,!0)),t.bindFramebuffer(36160,null)}}if(ct){t.bindTexture(34067,tt.__webglTexture),ke(34067,q,Bt);for(var wt=0;wt<6;wt++)it(De.__webglFramebuffer[wt],re,q,36064,34069+wt);P(q,Bt)&&W(34067),t.unbindTexture()}else if(dt){for(var ot=re.texture,St=0,Et=ot.length;St<Et;St++){var bt=ot[St],lr=r.get(bt);t.bindTexture(3553,lr.__webglTexture),ke(3553,bt,Bt),it(De.__webglFramebuffer,re,bt,36064+St,3553),P(bt,Bt)&&W(3553)}t.unbindTexture()}else{var Kn=3553;(re.isWebGL3DRenderTarget||re.isWebGLArrayRenderTarget)&&(g?Kn=re.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Kn,tt.__webglTexture),ke(Kn,q,Bt),it(De.__webglFramebuffer,re,q,36064,Kn),P(q,Bt)&&W(Kn),t.unbindTexture()}re.depthBuffer&&Ot(re)},this.updateRenderTargetMipmap=function(re){for(var q=H(re)||g,De=!0===re.isWebGLMultipleRenderTargets?re.texture:[re.texture],tt=0,ct=De.length;tt<ct;tt++){var dt=De[tt];if(P(dt,q)){var Bt=re.isWebGLCubeRenderTarget?34067:3553,Nt=r.get(dt).__webglTexture;t.bindTexture(Bt,Nt),W(Bt),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function(re){if(g&&re.samples>0&&!1===zt(re)){var q=re.isWebGLMultipleRenderTargets?re.texture:[re.texture],De=re.width,tt=re.height,ct=16384,dt=[],Bt=re.stencilBuffer?33306:36096,Nt=r.get(re),te=!0===re.isWebGLMultipleRenderTargets;if(te)for(var rt=0;rt<q.length;rt++)t.bindFramebuffer(36160,Nt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+rt,36161,null),t.bindFramebuffer(36160,Nt.__webglFramebuffer),n.framebufferTexture2D(36009,36064+rt,3553,null,0);t.bindFramebuffer(36008,Nt.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Nt.__webglFramebuffer);for(var Dt=0;Dt<q.length;Dt++){dt.push(36064+Dt),re.depthBuffer&&dt.push(Bt);var Ct=void 0!==Nt.__ignoreDepthValues&&Nt.__ignoreDepthValues;if(!1===Ct&&(re.depthBuffer&&(ct|=256),re.stencilBuffer&&(ct|=1024)),te&&n.framebufferRenderbuffer(36008,36064,36161,Nt.__webglColorRenderbuffer[Dt]),!0===Ct&&(n.invalidateFramebuffer(36008,[Bt]),n.invalidateFramebuffer(36009,[Bt])),te){var ft=r.get(q[Dt]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,ft,0)}n.blitFramebuffer(0,0,De,tt,0,0,De,tt,ct,9728),b&&n.invalidateFramebuffer(36008,dt)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),te)for(var at=0;at<q.length;at++){t.bindFramebuffer(36160,Nt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+at,36161,Nt.__webglColorRenderbuffer[at]);var Kt=r.get(q[at]).__webglTexture;t.bindFramebuffer(36160,Nt.__webglFramebuffer),n.framebufferTexture2D(36009,36064+at,3553,Kt,0)}t.bindFramebuffer(36009,Nt.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Ot,this.setupFrameBufferTexture=it,this.useMultisampledRTT=zt}function O9(n,a,t){var r=t.isWebGL2;return{convert:function(u){var h,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(u===tf)return 5121;if(1017===u)return 32819;if(1018===u)return 32820;if(1010===u)return 5120;if(1011===u)return 5122;if(1012===u)return 5123;if(1013===u)return 5124;if(u===nf)return 5125;if(u===Rc)return 5126;if(u===cy)return r?5131:null!==(h=a.get("OES_texture_half_float"))?h.HALF_FLOAT_OES:null;if(1021===u)return 6406;if(u===$a)return 6408;if(1024===u)return 6409;if(1025===u)return 6410;if(u===rf)return 6402;if(u===Mh)return 34041;if(1022===u)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===u)return null!==(h=a.get("EXT_sRGB"))?h.SRGB_ALPHA_EXT:null;if(1028===u)return 6403;if(1029===u)return 36244;if(1030===u)return 33319;if(1031===u)return 33320;if(1033===u)return 36249;if(u===yT||u===_T||u===CT||u===wT)if(f===Yn){if(null===(h=a.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(u===yT)return h.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(u===_T)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(u===CT)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(u===wT)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(h=a.get("WEBGL_compressed_texture_s3tc")))return null;if(u===yT)return h.COMPRESSED_RGB_S3TC_DXT1_EXT;if(u===_T)return h.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(u===CT)return h.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(u===wT)return h.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(u===gL||u===mL||u===yL||u===_L){if(null===(h=a.get("WEBGL_compressed_texture_pvrtc")))return null;if(u===gL)return h.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(u===mL)return h.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(u===yL)return h.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(u===_L)return h.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===u)return null!==(h=a.get("WEBGL_compressed_texture_etc1"))?h.COMPRESSED_RGB_ETC1_WEBGL:null;if(u===CL||u===wL){if(null===(h=a.get("WEBGL_compressed_texture_etc")))return null;if(u===CL)return f===Yn?h.COMPRESSED_SRGB8_ETC2:h.COMPRESSED_RGB8_ETC2;if(u===wL)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:h.COMPRESSED_RGBA8_ETC2_EAC}if(u===SL||u===EL||u===bL||u===xL||u===RL||u===AL||u===TL||u===DL||u===ML||u===OL||u===PL||u===IL||u===LL||u===FL){if(null===(h=a.get("WEBGL_compressed_texture_astc")))return null;if(u===SL)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:h.COMPRESSED_RGBA_ASTC_4x4_KHR;if(u===EL)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:h.COMPRESSED_RGBA_ASTC_5x4_KHR;if(u===bL)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:h.COMPRESSED_RGBA_ASTC_5x5_KHR;if(u===xL)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:h.COMPRESSED_RGBA_ASTC_6x5_KHR;if(u===RL)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:h.COMPRESSED_RGBA_ASTC_6x6_KHR;if(u===AL)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:h.COMPRESSED_RGBA_ASTC_8x5_KHR;if(u===TL)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:h.COMPRESSED_RGBA_ASTC_8x6_KHR;if(u===DL)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:h.COMPRESSED_RGBA_ASTC_8x8_KHR;if(u===ML)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:h.COMPRESSED_RGBA_ASTC_10x5_KHR;if(u===OL)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:h.COMPRESSED_RGBA_ASTC_10x6_KHR;if(u===PL)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:h.COMPRESSED_RGBA_ASTC_10x8_KHR;if(u===IL)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:h.COMPRESSED_RGBA_ASTC_10x10_KHR;if(u===LL)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:h.COMPRESSED_RGBA_ASTC_12x10_KHR;if(u===FL)return f===Yn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:h.COMPRESSED_RGBA_ASTC_12x12_KHR}if(u===NL){if(null===(h=a.get("EXT_texture_compression_bptc")))return null;if(u===NL)return f===Yn?h.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:h.COMPRESSED_RGBA_BPTC_UNORM_EXT}return u===Dh?r?34042:null!==(h=a.get("WEBGL_depth_texture"))?h.UNSIGNED_INT_24_8_WEBGL:null:void 0!==n[u]?n[u]:null}}}var P9=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return G(this,t),(r=a.call(this)).isArrayCamera=!0,r.cameras=o,r}return t}(di),vf=function(n){pe(t,n);var a=ve(t);function t(){var r;return G(this,t),(r=a.call(this)).isGroup=!0,r.type="Group",r}return t}(go),I9={type:"move"},iD=function(){function n(){G(this,n),this._targetRay=null,this._grip=null,this._hand=null}return j(n,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new vf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new vf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new vf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}},{key:"dispatchEvent",value:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}},{key:"connect",value:function(t){if(t&&t.hand){var r=this._hand;if(r){var u,o=Ft(t.hand.values());try{for(o.s();!(u=o.n()).done;)this._getHandJoint(r,u.value)}catch(h){o.e(h)}finally{o.f()}}}return this.dispatchEvent({type:"connected",data:t}),this}},{key:"disconnect",value:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(t,r,o){var u=null,f=null,h=null,v=this._targetRay,g=this._grip,y=this._hand;if(t&&"visible-blurred"!==r.session.visibilityState){if(y&&t.hand){h=!0;var C,_=Ft(t.hand.values());try{for(_.s();!(C=_.n()).done;){var S=C.value,R=r.getJointPose(S,o),b=this._getHandJoint(y,S);null!==R&&(b.matrix.fromArray(R.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.jointRadius=R.radius),b.visible=null!==R}}catch(L){_.e(L)}finally{_.f()}var D=y.joints["index-finger-tip"].position.distanceTo(y.joints["thumb-tip"].position);y.inputState.pinching&&D>.025?(y.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!y.inputState.pinching&&D<=.015&&(y.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==g&&t.gripSpace&&null!==(f=r.getPose(t.gripSpace,o))&&(g.matrix.fromArray(f.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),f.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(f.linearVelocity)):g.hasLinearVelocity=!1,f.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(f.angularVelocity)):g.hasAngularVelocity=!1);null!==v&&(null===(u=r.getPose(t.targetRaySpace,o))&&null!==f&&(u=f),null!==u&&(v.matrix.fromArray(u.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),u.linearVelocity?(v.hasLinearVelocity=!0,v.linearVelocity.copy(u.linearVelocity)):v.hasLinearVelocity=!1,u.angularVelocity?(v.hasAngularVelocity=!0,v.angularVelocity.copy(u.angularVelocity)):v.hasAngularVelocity=!1,this.dispatchEvent(I9)))}return null!==v&&(v.visible=null!==u),null!==g&&(g.visible=null!==f),null!==y&&(y.visible=null!==h),this}},{key:"_getHandJoint",value:function(t,r){if(void 0===t.joints[r.jointName]){var o=new vf;o.matrixAutoUpdate=!1,o.visible=!1,t.joints[r.jointName]=o,t.add(o)}return t.joints[r.jointName]}}]),n}(),L9=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f,h,v,g,y,_,C){var S;if(G(this,t),(C=void 0!==C?C:rf)!==rf&&C!==Mh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===u&&C===rf&&(u=nf),void 0===u&&C===Mh&&(u=Dh),(S=a.call(this,null,f,h,v,g,y,C,u,_)).isDepthTexture=!0,S.image={width:r,height:o},S.magFilter=void 0!==g?g:Ti,S.minFilter=void 0!==y?y:Ti,S.flipY=!1,S.generateMipmaps=!1,S}return t}(_u),F9=function(n){pe(t,n);var a=ve(t);function t(r,o){var u;G(this,t);var f=Xn(u=a.call(this)),h=null,v=1,g=null,y="local-floor",_=null,C=null,S=null,R=null,b=null,E=null,T=o.getContextAttributes(),D=null,M=null,O=[],L=[],H=new Set,z=new Map,P=new di;P.layers.enable(1),P.viewport=new Cr;var W=new di;W.layers.enable(2),W.viewport=new Cr;var X=[P,W],ne=new P9;ne.layers.enable(1),ne.layers.enable(2);var le=null,ue=null;function k(Se){var Ae=L.indexOf(Se.inputSource);if(-1!==Ae){var he=O[Ae];void 0!==he&&he.dispatchEvent({type:Se.type,data:Se.inputSource})}}function ee(){h.removeEventListener("select",k),h.removeEventListener("selectstart",k),h.removeEventListener("selectend",k),h.removeEventListener("squeeze",k),h.removeEventListener("squeezestart",k),h.removeEventListener("squeezeend",k),h.removeEventListener("end",ee),h.removeEventListener("inputsourceschange",ie);for(var Se=0;Se<O.length;Se++){var Ae=L[Se];null!==Ae&&(L[Se]=null,O[Se].disconnect(Ae))}le=null,ue=null,r.setRenderTarget(D),b=null,R=null,S=null,h=null,M=null,Ge.stop(),f.isPresenting=!1,f.dispatchEvent({type:"sessionend"})}function ie(Se){for(var Ae=0;Ae<Se.removed.length;Ae++){var he=Se.removed[Ae],Xe=L.indexOf(he);Xe>=0&&(L[Xe]=null,O[Xe].disconnect(he))}for(var ke=0;ke<Se.added.length;ke++){var je=Se.added[ke],We=L.indexOf(je);if(-1===We){for(var Ue=0;Ue<O.length;Ue++){if(Ue>=L.length){L.push(je),We=Ue;break}if(null===L[Ue]){L[Ue]=je,We=Ue;break}}if(-1===We)break}var it=O[We];it&&it.connect(je)}}u.cameraAutoUpdate=!0,u.enabled=!1,u.isPresenting=!1,u.getController=function(Se){var Ae=O[Se];return void 0===Ae&&(Ae=new iD,O[Se]=Ae),Ae.getTargetRaySpace()},u.getControllerGrip=function(Se){var Ae=O[Se];return void 0===Ae&&(Ae=new iD,O[Se]=Ae),Ae.getGripSpace()},u.getHand=function(Se){var Ae=O[Se];return void 0===Ae&&(Ae=new iD,O[Se]=Ae),Ae.getHandSpace()},u.setFramebufferScaleFactor=function(Se){v=Se,!0===f.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},u.setReferenceSpaceType=function(Se){y=Se,!0===f.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},u.getReferenceSpace=function(){return _||g},u.setReferenceSpace=function(Se){_=Se},u.getBaseLayer=function(){return null!==R?R:b},u.getBinding=function(){return S},u.getFrame=function(){return E},u.getSession=function(){return h},u.setSession=function(){var Se=function(n){return function(){var a=this,t=arguments;return new Promise(function(r,o){var u=n.apply(a,t);function f(v){iL(u,r,o,f,h,"next",v)}function h(v){iL(u,r,o,f,h,"throw",v)}f(void 0)})}}(vi.mark(function Ae(he){var ke,je,We,Ue;return vi.wrap(function(et){for(;;)switch(et.prev=et.next){case 0:if(null===(h=he)){et.next=25;break}if(D=r.getRenderTarget(),h.addEventListener("select",k),h.addEventListener("selectstart",k),h.addEventListener("selectend",k),h.addEventListener("squeeze",k),h.addEventListener("squeezestart",k),h.addEventListener("squeezeend",k),h.addEventListener("end",ee),h.addEventListener("inputsourceschange",ie),!0===T.xrCompatible){et.next=14;break}return et.next=14,o.makeXRCompatible();case 14:return void 0===h.renderState.layers||!1===r.capabilities.isWebGL2?(b=new XRWebGLLayer(h,o,{antialias:void 0!==h.renderState.layers||T.antialias,alpha:T.alpha,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:v}),h.updateRenderState({baseLayer:b}),M=new sf(b.framebufferWidth,b.framebufferHeight,{format:$a,type:tf,encoding:r.outputEncoding,stencilBuffer:T.stencil})):(ke=null,je=null,We=null,T.depth&&(We=T.stencil?35056:33190,ke=T.stencil?Mh:rf,je=T.stencil?Dh:nf),Ue={colorFormat:32856,depthFormat:We,scaleFactor:v},S=new XRWebGLBinding(h,o),R=S.createProjectionLayer(Ue),h.updateRenderState({layers:[R]}),M=new sf(R.textureWidth,R.textureHeight,{format:$a,type:tf,depthTexture:new L9(R.textureWidth,R.textureHeight,je,void 0,void 0,void 0,void 0,void 0,void 0,ke),stencilBuffer:T.stencil,encoding:r.outputEncoding,samples:T.antialias?4:0}),r.properties.get(M).__ignoreDepthValues=R.ignoreDepthValues),M.isXRRenderTarget=!0,this.setFoveation(1),_=null,et.next=20,h.requestReferenceSpace(y);case 20:g=et.sent,Ge.setContext(h),Ge.start(),f.isPresenting=!0,f.dispatchEvent({type:"sessionstart"});case 25:case"end":return et.stop()}},Ae,this)}));return function(Ae){return Se.apply(this,arguments)}}();var se=new J,ae=new J;function Ee(Se,Ae){null===Ae?Se.matrixWorld.copy(Se.matrix):Se.matrixWorld.multiplyMatrices(Ae.matrixWorld,Se.matrix),Se.matrixWorldInverse.copy(Se.matrixWorld).invert()}u.updateCamera=function(Se){if(null!==h){ne.near=W.near=P.near=Se.near,ne.far=W.far=P.far=Se.far,(le!==ne.near||ue!==ne.far)&&(h.updateRenderState({depthNear:ne.near,depthFar:ne.far}),le=ne.near,ue=ne.far);var Ae=Se.parent,he=ne.cameras;Ee(ne,Ae);for(var Xe=0;Xe<he.length;Xe++)Ee(he[Xe],Ae);ne.matrixWorld.decompose(ne.position,ne.quaternion,ne.scale),Se.matrix.copy(ne.matrix),Se.matrix.decompose(Se.position,Se.quaternion,Se.scale);for(var ke=Se.children,je=0,We=ke.length;je<We;je++)ke[je].updateMatrixWorld(!0);2===he.length?function(Se,Ae,he){se.setFromMatrixPosition(Ae.matrixWorld),ae.setFromMatrixPosition(he.matrixWorld);var Xe=se.distanceTo(ae),ke=Ae.projectionMatrix.elements,je=he.projectionMatrix.elements,We=ke[14]/(ke[10]-1),Ue=ke[14]/(ke[10]+1),it=(ke[9]+1)/ke[5],Ht=(ke[9]-1)/ke[5],et=(ke[8]-1)/ke[0],Ot=(je[8]+1)/je[0],Sn=We*et,_n=We*Ot,xt=Xe/(-et+Ot),fn=xt*-et;Ae.matrixWorld.decompose(Se.position,Se.quaternion,Se.scale),Se.translateX(fn),Se.translateZ(xt),Se.matrixWorld.compose(Se.position,Se.quaternion,Se.scale),Se.matrixWorldInverse.copy(Se.matrixWorld).invert();var Hn=We+xt,zt=Ue+xt;Se.projectionMatrix.makePerspective(Sn-fn,_n+(Xe-fn),it*Ue/zt*Hn,Ht*Ue/zt*Hn,Hn,zt)}(ne,P,W):ne.projectionMatrix.copy(P.projectionMatrix)}},u.getCamera=function(){return ne},u.getFoveation=function(){return null!==R?R.fixedFoveation:null!==b?b.fixedFoveation:void 0},u.setFoveation=function(Se){null!==R&&(R.fixedFoveation=Se),null!==b&&void 0!==b.fixedFoveation&&(b.fixedFoveation=Se)},u.getPlanes=function(){return H};var _e=null,Ge=new lF;return Ge.setAnimationLoop(function(Se,Ae){if(C=Ae.getViewerPose(_||g),E=Ae,null!==C){var he=C.views;null!==b&&(r.setRenderTargetFramebuffer(M,b.framebuffer),r.setRenderTarget(M));var Xe=!1;he.length!==ne.cameras.length&&(ne.cameras.length=0,Xe=!0);for(var ke=0;ke<he.length;ke++){var je=he[ke],We=null;if(null!==b)We=b.getViewport(je);else{var Ue=S.getViewSubImage(R,je);We=Ue.viewport,0===ke&&(r.setRenderTargetTextures(M,Ue.colorTexture,R.ignoreDepthValues?void 0:Ue.depthStencilTexture),r.setRenderTarget(M))}var it=X[ke];void 0===it&&((it=new di).layers.enable(ke),it.viewport=new Cr,X[ke]=it),it.matrix.fromArray(je.transform.matrix),it.projectionMatrix.fromArray(je.projectionMatrix),it.viewport.set(We.x,We.y,We.width,We.height),0===ke&&ne.matrix.copy(it.matrix),!0===Xe&&ne.cameras.push(it)}}for(var Ht=0;Ht<O.length;Ht++){var et=L[Ht],Ot=O[Ht];null!==et&&void 0!==Ot&&Ot.update(et,Ae,_||g)}if(_e&&_e(Se,Ae),Ae.detectedPlanes){f.dispatchEvent({type:"planesdetected",data:Ae.detectedPlanes});var xt,Sn=null,_n=Ft(H);try{for(_n.s();!(xt=_n.n()).done;){var fn=xt.value;Ae.detectedPlanes.has(fn)||(null===Sn&&(Sn=[]),Sn.push(fn))}}catch(tt){_n.e(tt)}finally{_n.f()}if(null!==Sn){var zt,Hn=Ft(Sn);try{for(Hn.s();!(zt=Hn.n()).done;){var hr=zt.value;H.delete(hr),z.delete(hr),f.dispatchEvent({type:"planeremoved",data:hr})}}catch(tt){Hn.e(tt)}finally{Hn.f()}}var re,vr=Ft(Ae.detectedPlanes);try{for(vr.s();!(re=vr.n()).done;){var q=re.value;if(H.has(q)){var De=z.get(q);q.lastChangedTime>De&&(z.set(q,q.lastChangedTime),f.dispatchEvent({type:"planechanged",data:q}))}else H.add(q),z.set(q,Ae.lastChangedTime),f.dispatchEvent({type:"planeadded",data:q})}}catch(tt){vr.e(tt)}finally{vr.f()}}E=null}),u.setAnimationLoop=function(Se){_e=Se},u.dispose=function(){},u}return t}(Ac);function N9(n,a){function o(b,E){b.opacity.value=E.opacity,E.color&&b.diffuse.value.copy(E.color),E.emissive&&b.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(b.map.value=E.map),E.alphaMap&&(b.alphaMap.value=E.alphaMap),E.bumpMap&&(b.bumpMap.value=E.bumpMap,b.bumpScale.value=E.bumpScale,1===E.side&&(b.bumpScale.value*=-1)),E.displacementMap&&(b.displacementMap.value=E.displacementMap,b.displacementScale.value=E.displacementScale,b.displacementBias.value=E.displacementBias),E.emissiveMap&&(b.emissiveMap.value=E.emissiveMap),E.normalMap&&(b.normalMap.value=E.normalMap,b.normalScale.value.copy(E.normalScale),1===E.side&&b.normalScale.value.negate()),E.specularMap&&(b.specularMap.value=E.specularMap),E.alphaTest>0&&(b.alphaTest.value=E.alphaTest);var M,O,T=a.get(E).envMap;if(T&&(b.envMap.value=T,b.flipEnvMap.value=T.isCubeTexture&&!1===T.isRenderTargetTexture?-1:1,b.reflectivity.value=E.reflectivity,b.ior.value=E.ior,b.refractionRatio.value=E.refractionRatio),E.lightMap){b.lightMap.value=E.lightMap;var D=!0!==n.physicallyCorrectLights?Math.PI:1;b.lightMapIntensity.value=E.lightMapIntensity*D}E.aoMap&&(b.aoMap.value=E.aoMap,b.aoMapIntensity.value=E.aoMapIntensity),E.map?M=E.map:E.specularMap?M=E.specularMap:E.displacementMap?M=E.displacementMap:E.normalMap?M=E.normalMap:E.bumpMap?M=E.bumpMap:E.roughnessMap?M=E.roughnessMap:E.metalnessMap?M=E.metalnessMap:E.alphaMap?M=E.alphaMap:E.emissiveMap?M=E.emissiveMap:E.clearcoatMap?M=E.clearcoatMap:E.clearcoatNormalMap?M=E.clearcoatNormalMap:E.clearcoatRoughnessMap?M=E.clearcoatRoughnessMap:E.iridescenceMap?M=E.iridescenceMap:E.iridescenceThicknessMap?M=E.iridescenceThicknessMap:E.specularIntensityMap?M=E.specularIntensityMap:E.specularColorMap?M=E.specularColorMap:E.transmissionMap?M=E.transmissionMap:E.thicknessMap?M=E.thicknessMap:E.sheenColorMap?M=E.sheenColorMap:E.sheenRoughnessMap&&(M=E.sheenRoughnessMap),void 0!==M&&(M.isWebGLRenderTarget&&(M=M.texture),!0===M.matrixAutoUpdate&&M.updateMatrix(),b.uvTransform.value.copy(M.matrix)),E.aoMap?O=E.aoMap:E.lightMap&&(O=E.lightMap),void 0!==O&&(O.isWebGLRenderTarget&&(O=O.texture),!0===O.matrixAutoUpdate&&O.updateMatrix(),b.uv2Transform.value.copy(O.matrix))}return{refreshFogUniforms:function(b,E){E.color.getRGB(b.fogColor.value,sF(n)),E.isFog?(b.fogNear.value=E.near,b.fogFar.value=E.far):E.isFogExp2&&(b.fogDensity.value=E.density)},refreshMaterialUniforms:function(b,E,T,D,M){E.isMeshBasicMaterial||E.isMeshLambertMaterial?o(b,E):E.isMeshToonMaterial?(o(b,E),function(b,E){E.gradientMap&&(b.gradientMap.value=E.gradientMap)}(b,E)):E.isMeshPhongMaterial?(o(b,E),function(b,E){b.specular.value.copy(E.specular),b.shininess.value=Math.max(E.shininess,1e-4)}(b,E)):E.isMeshStandardMaterial?(o(b,E),function(b,E){b.roughness.value=E.roughness,b.metalness.value=E.metalness,E.roughnessMap&&(b.roughnessMap.value=E.roughnessMap),E.metalnessMap&&(b.metalnessMap.value=E.metalnessMap),a.get(E).envMap&&(b.envMapIntensity.value=E.envMapIntensity)}(b,E),E.isMeshPhysicalMaterial&&function(b,E,T){b.ior.value=E.ior,E.sheen>0&&(b.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),b.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(b.sheenColorMap.value=E.sheenColorMap),E.sheenRoughnessMap&&(b.sheenRoughnessMap.value=E.sheenRoughnessMap)),E.clearcoat>0&&(b.clearcoat.value=E.clearcoat,b.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(b.clearcoatMap.value=E.clearcoatMap),E.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap),E.clearcoatNormalMap&&(b.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),b.clearcoatNormalMap.value=E.clearcoatNormalMap,1===E.side&&b.clearcoatNormalScale.value.negate())),E.iridescence>0&&(b.iridescence.value=E.iridescence,b.iridescenceIOR.value=E.iridescenceIOR,b.iridescenceThicknessMinimum.value=E.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=E.iridescenceThicknessRange[1],E.iridescenceMap&&(b.iridescenceMap.value=E.iridescenceMap),E.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=E.iridescenceThicknessMap)),E.transmission>0&&(b.transmission.value=E.transmission,b.transmissionSamplerMap.value=T.texture,b.transmissionSamplerSize.value.set(T.width,T.height),E.transmissionMap&&(b.transmissionMap.value=E.transmissionMap),b.thickness.value=E.thickness,E.thicknessMap&&(b.thicknessMap.value=E.thicknessMap),b.attenuationDistance.value=E.attenuationDistance,b.attenuationColor.value.copy(E.attenuationColor)),b.specularIntensity.value=E.specularIntensity,b.specularColor.value.copy(E.specularColor),E.specularIntensityMap&&(b.specularIntensityMap.value=E.specularIntensityMap),E.specularColorMap&&(b.specularColorMap.value=E.specularColorMap)}(b,E,M)):E.isMeshMatcapMaterial?(o(b,E),function(b,E){E.matcap&&(b.matcap.value=E.matcap)}(b,E)):E.isMeshDepthMaterial?o(b,E):E.isMeshDistanceMaterial?(o(b,E),function(b,E){b.referencePosition.value.copy(E.referencePosition),b.nearDistance.value=E.nearDistance,b.farDistance.value=E.farDistance}(b,E)):E.isMeshNormalMaterial?o(b,E):E.isLineBasicMaterial?(function(b,E){b.diffuse.value.copy(E.color),b.opacity.value=E.opacity}(b,E),E.isLineDashedMaterial&&function(b,E){b.dashSize.value=E.dashSize,b.totalSize.value=E.dashSize+E.gapSize,b.scale.value=E.scale}(b,E)):E.isPointsMaterial?function(b,E,T,D){var M;b.diffuse.value.copy(E.color),b.opacity.value=E.opacity,b.size.value=E.size*T,b.scale.value=.5*D,E.map&&(b.map.value=E.map),E.alphaMap&&(b.alphaMap.value=E.alphaMap),E.alphaTest>0&&(b.alphaTest.value=E.alphaTest),E.map?M=E.map:E.alphaMap&&(M=E.alphaMap),void 0!==M&&(!0===M.matrixAutoUpdate&&M.updateMatrix(),b.uvTransform.value.copy(M.matrix))}(b,E,T,D):E.isSpriteMaterial?function(b,E){var T;b.diffuse.value.copy(E.color),b.opacity.value=E.opacity,b.rotation.value=E.rotation,E.map&&(b.map.value=E.map),E.alphaMap&&(b.alphaMap.value=E.alphaMap),E.alphaTest>0&&(b.alphaTest.value=E.alphaTest),E.map?T=E.map:E.alphaMap&&(T=E.alphaMap),void 0!==T&&(!0===T.matrixAutoUpdate&&T.updateMatrix(),b.uvTransform.value.copy(T.matrix))}(b,E):E.isShadowMaterial?(b.color.value.copy(E.color),b.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}}}function k9(n,a,t,r){var o={},u={},f=[],h=t.isWebGL2?n.getParameter(35375):0;function S(D,M,O){var L=D.value;if(void 0===O[M]){if("number"==typeof L)O[M]=L;else{for(var H=Array.isArray(L)?L:[L],z=[],P=0;P<H.length;P++)z.push(H[P].clone());O[M]=z}return!0}if("number"==typeof L){if(O[M]!==L)return O[M]=L,!0}else for(var W=Array.isArray(O[M])?O[M]:[O[M]],X=Array.isArray(L)?L:[L],ne=0;ne<W.length;ne++){var le=W[ne];if(!1===le.equals(X[ne]))return le.copy(X[ne]),!0}return!1}function b(D){var M={boundary:0,storage:0};return"number"==typeof D?(M.boundary=4,M.storage=4):D.isVector2?(M.boundary=8,M.storage=8):D.isVector3||D.isColor?(M.boundary=16,M.storage=12):D.isVector4?(M.boundary=16,M.storage=16):D.isMatrix3?(M.boundary=48,M.storage=48):D.isMatrix4?(M.boundary=64,M.storage=64):D.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",D),M}function E(D){var M=D.target;M.removeEventListener("dispose",E);var O=f.indexOf(M.__bindingPointIndex);f.splice(O,1),n.deleteBuffer(o[M.id]),delete o[M.id],delete u[M.id]}return{bind:function(D,M){r.uniformBlockBinding(D,M.program)},update:function(D,M){var O=o[D.id];void 0===O&&(function(D){for(var M=D.uniforms,O=0,H=0,z=0,P=M.length;z<P;z++){for(var W=M[z],X={boundary:0,storage:0},ne=Array.isArray(W.value)?W.value:[W.value],le=0,ue=ne.length;le<ue;le++){var ee=b(ne[le]);X.boundary+=ee.boundary,X.storage+=ee.storage}W.__data=new Float32Array(X.storage/Float32Array.BYTES_PER_ELEMENT),W.__offset=O,z>0&&0!=(H=O%16)&&16-H-X.boundary<0&&(W.__offset=O+=16-H),O+=X.storage}(H=O%16)>0&&(O+=16-H),D.__size=O,D.__cache={}}(D),O=function(D){var M=function(){for(var D=0;D<h;D++)if(-1===f.indexOf(D))return f.push(D),D;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();D.__bindingPointIndex=M;var O=n.createBuffer(),L=D.__size,H=D.usage;return n.bindBuffer(35345,O),n.bufferData(35345,L,H),n.bindBuffer(35345,null),n.bindBufferBase(35345,M,O),O}(D),o[D.id]=O,D.addEventListener("dispose",E)),r.updateUBOMapping(D,M.program);var H=a.render.frame;u[D.id]!==H&&(function(D){var O=D.uniforms,L=D.__cache;n.bindBuffer(35345,o[D.id]);for(var H=0,z=O.length;H<z;H++){var P=O[H];if(!0===S(P,H,L)){for(var W=P.__offset,X=Array.isArray(P.value)?P.value:[P.value],ne=0,le=0;le<X.length;le++){var ue=X[le],k=b(ue);"number"==typeof ue?(P.__data[0]=ue,n.bufferSubData(35345,W+ne,P.__data)):ue.isMatrix3?(P.__data[0]=ue.elements[0],P.__data[1]=ue.elements[1],P.__data[2]=ue.elements[2],P.__data[3]=ue.elements[0],P.__data[4]=ue.elements[3],P.__data[5]=ue.elements[4],P.__data[6]=ue.elements[5],P.__data[7]=ue.elements[0],P.__data[8]=ue.elements[6],P.__data[9]=ue.elements[7],P.__data[10]=ue.elements[8],P.__data[11]=ue.elements[0]):(ue.toArray(P.__data,ne),ne+=k.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,W,P.__data)}}n.bindBuffer(35345,null)}(D),u[D.id]=H)},dispose:function(){for(var D in o)n.deleteBuffer(o[D]);f=[],o={},u={}}}}function G9(){var n=vy("canvas");return n.style.display="block",n}function gf(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var y,a=void 0!==n.canvas?n.canvas:G9(),t=void 0!==n.context?n.context:null,r=void 0===n.depth||n.depth,o=void 0===n.stencil||n.stencil,u=void 0!==n.antialias&&n.antialias,f=void 0===n.premultipliedAlpha||n.premultipliedAlpha,h=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,v=void 0!==n.powerPreference?n.powerPreference:"default",g=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;y=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;var _=null,C=null,S=[],R=[];this.domElement=a,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=of,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var b=this,E=!1,T=0,D=0,M=null,O=-1,L=null,H=new Cr,z=new Cr,P=null,W=a.width,X=a.height,ne=1,le=null,ue=null,k=new Cr(0,0,W,X),ee=new Cr(0,0,W,X),ie=!1,se=new JT,ae=!1,ge=!1,Ee=null,_e=new wn,me=new Ke,Ge=new J,Se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ae(){return null===M?ne:1}var We,Ue,it,Ht,et,Ot,Sn,_n,xt,fn,Hn,zt,hr,vr,re,q,De,tt,ct,dt,Bt,Nt,te,rt,he=t;function Xe(Z,Re){for(var Ne=0;Ne<Z.length;Ne++){var Ie=a.getContext(Z[Ne],Re);if(null!==Ie)return Ie}return null}try{var ke={alpha:!0,depth:r,stencil:o,antialias:u,premultipliedAlpha:f,preserveDrawingBuffer:h,powerPreference:v,failIfMajorPerformanceCaveat:g};if("setAttribute"in a&&a.setAttribute("data-engine","three.js r".concat(hT)),a.addEventListener("webglcontextlost",ft,!1),a.addEventListener("webglcontextrestored",at,!1),a.addEventListener("webglcontextcreationerror",Kt,!1),null===he){var je=["webgl2","webgl","experimental-webgl"];if(!0===b.isWebGL1Renderer&&je.shift(),null===(he=Xe(je,ke)))throw Xe(je)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Z){throw console.error("THREE.WebGLRenderer: "+Z.message),Z}function Dt(){We=new $5(he),Ue=new U5(he,We,n),We.init(Ue),Nt=new O9(he,We,Ue),it=new D9(he,We,Ue),Ht=new Z5,et=new v9,Ot=new M9(he,We,it,et,Ue,Nt,Ht),Sn=new j5(b),_n=new K5(b),xt=new s4(he,Ue),te=new V5(he,We,xt,Ue),fn=new X5(he,xt,Ht,te),Hn=new n8(he,fn,xt,Ht),ct=new t8(he,Ue,Ot),q=new z5(et),zt=new h9(b,Sn,_n,We,Ue,te,q),hr=new N9(b,et),vr=new m9,re=new E9(We,Ue),tt=new H5(b,Sn,_n,it,Hn,y,f),De=new T9(b,Hn,Ue),rt=new k9(he,Ht,Ue,it),dt=new W5(he,We,Ht,Ue),Bt=new J5(he,We,Ht,Ue),Ht.programs=zt.programs,b.capabilities=Ue,b.extensions=We,b.properties=et,b.renderLists=vr,b.shadowMap=De,b.state=it,b.info=Ht}Dt();var Ct=new F9(b,he);function ft(Z){Z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function at(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;var Z=Ht.autoReset,Re=De.enabled,Ne=De.autoUpdate,Ce=De.needsUpdate,Ie=De.type;Dt(),Ht.autoReset=Z,De.enabled=Re,De.autoUpdate=Ne,De.needsUpdate=Ce,De.type=Ie}function Kt(Z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Z.statusMessage)}function On(Z){var Re=Z.target;Re.removeEventListener("dispose",On),Wn(Re)}function Wn(Z){Un(Z),et.remove(Z)}function Un(Z){var Re=et.get(Z).programs;void 0!==Re&&(Re.forEach(function(Ne){zt.releaseProgram(Ne)}),Z.isShaderMaterial&&zt.releaseShaderCache(Z))}this.xr=Ct,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){var Z=We.get("WEBGL_lose_context");Z&&Z.loseContext()},this.forceContextRestore=function(){var Z=We.get("WEBGL_lose_context");Z&&Z.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(Z){void 0!==Z&&(ne=Z,this.setSize(W,X,!1))},this.getSize=function(Z){return Z.set(W,X)},this.setSize=function(Z,Re,Ne){Ct.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=Z,X=Re,a.width=Math.floor(Z*ne),a.height=Math.floor(Re*ne),!1!==Ne&&(a.style.width=Z+"px",a.style.height=Re+"px"),this.setViewport(0,0,Z,Re))},this.getDrawingBufferSize=function(Z){return Z.set(W*ne,X*ne).floor()},this.setDrawingBufferSize=function(Z,Re,Ne){W=Z,X=Re,ne=Ne,a.width=Math.floor(Z*Ne),a.height=Math.floor(Re*Ne),this.setViewport(0,0,Z,Re)},this.getCurrentViewport=function(Z){return Z.copy(H)},this.getViewport=function(Z){return Z.copy(k)},this.setViewport=function(Z,Re,Ne,Ce){Z.isVector4?k.set(Z.x,Z.y,Z.z,Z.w):k.set(Z,Re,Ne,Ce),it.viewport(H.copy(k).multiplyScalar(ne).floor())},this.getScissor=function(Z){return Z.copy(ee)},this.setScissor=function(Z,Re,Ne,Ce){Z.isVector4?ee.set(Z.x,Z.y,Z.z,Z.w):ee.set(Z,Re,Ne,Ce),it.scissor(z.copy(ee).multiplyScalar(ne).floor())},this.getScissorTest=function(){return ie},this.setScissorTest=function(Z){it.setScissorTest(ie=Z)},this.setOpaqueSort=function(Z){le=Z},this.setTransparentSort=function(Z){ue=Z},this.getClearColor=function(Z){return Z.copy(tt.getClearColor())},this.setClearColor=function(){tt.setClearColor.apply(tt,arguments)},this.getClearAlpha=function(){return tt.getClearAlpha()},this.setClearAlpha=function(){tt.setClearAlpha.apply(tt,arguments)},this.clear=function(){var Z=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],Re=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Ne=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],Ce=0;Z&&(Ce|=16384),Re&&(Ce|=256),Ne&&(Ce|=1024),he.clear(Ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){a.removeEventListener("webglcontextlost",ft,!1),a.removeEventListener("webglcontextrestored",at,!1),a.removeEventListener("webglcontextcreationerror",Kt,!1),vr.dispose(),re.dispose(),et.dispose(),Sn.dispose(),_n.dispose(),Hn.dispose(),te.dispose(),rt.dispose(),zt.dispose(),Ct.dispose(),Ct.removeEventListener("sessionstart",ot),Ct.removeEventListener("sessionend",St),Ee&&(Ee.dispose(),Ee=null),Et.stop()},this.renderBufferDirect=function(Z,Re,Ne,Ce,Ie,Gt){null===Re&&(Re=Se);var Pn=Ie.isMesh&&Ie.matrixWorld.determinant()<0,ln=ts(Z,Re,Ne,Ce,Ie);it.setMaterial(Ce,Pn);var mn=Ne.index,Pt=1;!0===Ce.wireframe&&(mn=fn.getWireframeAttribute(Ne),Pt=2);var Rt=Ne.drawRange,At=Ne.attributes.position,Qt=Rt.start*Pt,$t=(Rt.start+Rt.count)*Pt;null!==Gt&&(Qt=Math.max(Qt,Gt.start*Pt),$t=Math.min($t,(Gt.start+Gt.count)*Pt)),null!==mn?(Qt=Math.max(Qt,0),$t=Math.min($t,mn.count)):null!=At&&(Qt=Math.max(Qt,0),$t=Math.min($t,At.count));var $n=$t-Qt;if(!($n<0||$n===1/0)){te.setup(Ie,Ce,ln,Ne,mn);var cr,An=dt;if(null!==mn&&(cr=xt.get(mn),(An=Bt).setIndex(cr)),Ie.isMesh)!0===Ce.wireframe?(it.setLineWidth(Ce.wireframeLinewidth*Ae()),An.setMode(1)):An.setMode(4);else if(Ie.isLine){var Xt=Ce.linewidth;void 0===Xt&&(Xt=1),it.setLineWidth(Xt*Ae()),An.setMode(Ie.isLineSegments?1:Ie.isLineLoop?2:3)}else Ie.isPoints?An.setMode(0):Ie.isSprite&&An.setMode(4);if(Ie.isInstancedMesh)An.renderInstances(Qt,$n,Ie.count);else if(Ne.isInstancedBufferGeometry){var Ea=Math.min(Ne.instanceCount,void 0!==Ne._maxInstanceCount?Ne._maxInstanceCount:1/0);An.renderInstances(Qt,$n,Ea)}else An.render(Qt,$n)}},this.compile=function(Z,Re){function Ne(Ce,Ie,Gt){!0===Ce.transparent&&3===Ce.side?(Ce.side=1,Ce.needsUpdate=!0,er(Ce,Ie,Gt),Ce.side=0,Ce.needsUpdate=!0,er(Ce,Ie,Gt),Ce.side=3):er(Ce,Ie,Gt)}(C=re.get(Z)).init(),R.push(C),Z.traverseVisible(function(Ce){Ce.isLight&&Ce.layers.test(Re.layers)&&(C.pushLight(Ce),Ce.castShadow&&C.pushShadow(Ce))}),C.setupLights(b.physicallyCorrectLights),Z.traverse(function(Ce){var Ie=Ce.material;if(Ie)if(Array.isArray(Ie))for(var Gt=0;Gt<Ie.length;Gt++)Ne(Ie[Gt],Z,Ce);else Ne(Ie,Z,Ce)}),R.pop(),C=null};var fe=null;function wt(Z){fe&&fe(Z)}function ot(){Et.stop()}function St(){Et.start()}var Et=new lF;function bt(Z,Re,Ne,Ce){if(!1!==Z.visible){if(Z.layers.test(Re.layers))if(Z.isGroup)Ne=Z.renderOrder;else if(Z.isLOD)!0===Z.autoUpdate&&Z.update(Re);else if(Z.isLight)C.pushLight(Z),Z.castShadow&&C.pushShadow(Z);else if(Z.isSprite){if(!Z.frustumCulled||se.intersectsSprite(Z)){Ce&&Ge.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(_e);var Gt=Hn.update(Z),Pn=Z.material;Pn.visible&&_.push(Z,Gt,Pn,Ne,Ge.z,null)}}else if((Z.isMesh||Z.isLine||Z.isPoints)&&(Z.isSkinnedMesh&&Z.skeleton.frame!==Ht.render.frame&&(Z.skeleton.update(),Z.skeleton.frame=Ht.render.frame),!Z.frustumCulled||se.intersectsObject(Z))){Ce&&Ge.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(_e);var ln=Hn.update(Z),mn=Z.material;if(Array.isArray(mn))for(var Pt=ln.groups,Rt=0,At=Pt.length;Rt<At;Rt++){var Qt=Pt[Rt],$t=mn[Qt.materialIndex];$t&&$t.visible&&_.push(Z,ln,$t,Ne,Ge.z,Qt)}else mn.visible&&_.push(Z,ln,mn,Ne,Ge.z,null)}for(var $n=Z.children,cr=0,An=$n.length;cr<An;cr++)bt($n[cr],Re,Ne,Ce)}}function lr(Z,Re,Ne,Ce){var Ie=Z.opaque,Gt=Z.transmissive,Pn=Z.transparent;C.setupLightsView(Ne),Gt.length>0&&Kn(Ie,Re,Ne),Ce&&it.viewport(H.copy(Ce)),Ie.length>0&&yr(Ie,Re,Ne),Gt.length>0&&yr(Gt,Re,Ne),Pn.length>0&&yr(Pn,Re,Ne),it.buffers.depth.setTest(!0),it.buffers.depth.setMask(!0),it.buffers.color.setMask(!0),it.setPolygonOffset(!1)}function Kn(Z,Re,Ne){var Ce=Ue.isWebGL2;null===Ee&&(Ee=new sf(1,1,{generateMipmaps:!0,type:We.has("EXT_color_buffer_half_float")?cy:tf,minFilter:xc,samples:Ce&&!0===u?4:0})),b.getDrawingBufferSize(me),Ce?Ee.setSize(me.x,me.y):Ee.setSize(SS(me.x),SS(me.y));var Ie=b.getRenderTarget();b.setRenderTarget(Ee),b.clear();var Gt=b.toneMapping;b.toneMapping=0,yr(Z,Re,Ne),b.toneMapping=Gt,Ot.updateMultisampleRenderTarget(Ee),Ot.updateRenderTargetMipmap(Ee),b.setRenderTarget(Ie)}function yr(Z,Re,Ne){for(var Ce=!0===Re.isScene?Re.overrideMaterial:null,Ie=0,Gt=Z.length;Ie<Gt;Ie++){var Pn=Z[Ie],ln=Pn.object,mn=Pn.geometry,Pt=null===Ce?Pn.material:Ce,Rt=Pn.group;ln.layers.test(Ne.layers)&&Ur(ln,Re,Ne,mn,Pt,Rt)}}function Ur(Z,Re,Ne,Ce,Ie,Gt){Z.onBeforeRender(b,Re,Ne,Ce,Ie,Gt),Z.modelViewMatrix.multiplyMatrices(Ne.matrixWorldInverse,Z.matrixWorld),Z.normalMatrix.getNormalMatrix(Z.modelViewMatrix),Ie.onBeforeRender(b,Re,Ne,Ce,Z,Gt),!0===Ie.transparent&&3===Ie.side?(Ie.side=1,Ie.needsUpdate=!0,b.renderBufferDirect(Ne,Re,Ce,Ie,Z,Gt),Ie.side=0,Ie.needsUpdate=!0,b.renderBufferDirect(Ne,Re,Ce,Ie,Z,Gt),Ie.side=3):b.renderBufferDirect(Ne,Re,Ce,Ie,Z,Gt),Z.onAfterRender(b,Re,Ne,Ce,Ie,Gt)}function er(Z,Re,Ne){!0!==Re.isScene&&(Re=Se);var Ce=et.get(Z),Ie=C.state.lights,Pn=Ie.state.version,ln=zt.getParameters(Z,Ie.state,C.state.shadowsArray,Re,Ne),mn=zt.getProgramCacheKey(ln),Pt=Ce.programs;Ce.environment=Z.isMeshStandardMaterial?Re.environment:null,Ce.fog=Re.fog,Ce.envMap=(Z.isMeshStandardMaterial?_n:Sn).get(Z.envMap||Ce.environment),void 0===Pt&&(Z.addEventListener("dispose",On),Ce.programs=Pt=new Map);var Rt=Pt.get(mn);if(void 0!==Rt){if(Ce.currentProgram===Rt&&Ce.lightsStateVersion===Pn)return es(Z,ln),Rt}else ln.uniforms=zt.getUniforms(Z),Z.onBuild(Ne,ln,b),Z.onBeforeCompile(ln,b),Rt=zt.acquireProgram(ln,mn),Pt.set(mn,Rt),Ce.uniforms=ln.uniforms;var At=Ce.uniforms;(!Z.isShaderMaterial&&!Z.isRawShaderMaterial||!0===Z.clipping)&&(At.clippingPlanes=q.uniform),es(Z,ln),Ce.needsLights=eM(Z),Ce.lightsStateVersion=Pn,Ce.needsLights&&(At.ambientLightColor.value=Ie.state.ambient,At.lightProbe.value=Ie.state.probe,At.directionalLights.value=Ie.state.directional,At.directionalLightShadows.value=Ie.state.directionalShadow,At.spotLights.value=Ie.state.spot,At.spotLightShadows.value=Ie.state.spotShadow,At.rectAreaLights.value=Ie.state.rectArea,At.ltc_1.value=Ie.state.rectAreaLTC1,At.ltc_2.value=Ie.state.rectAreaLTC2,At.pointLights.value=Ie.state.point,At.pointLightShadows.value=Ie.state.pointShadow,At.hemisphereLights.value=Ie.state.hemi,At.directionalShadowMap.value=Ie.state.directionalShadowMap,At.directionalShadowMatrix.value=Ie.state.directionalShadowMatrix,At.spotShadowMap.value=Ie.state.spotShadowMap,At.spotLightMatrix.value=Ie.state.spotLightMatrix,At.spotLightMap.value=Ie.state.spotLightMap,At.pointShadowMap.value=Ie.state.pointShadowMap,At.pointShadowMatrix.value=Ie.state.pointShadowMatrix);var Qt=Rt.getUniforms(),$t=jS.seqWithValue(Qt.seq,At);return Ce.currentProgram=Rt,Ce.uniformsList=$t,Rt}function es(Z,Re){var Ne=et.get(Z);Ne.outputEncoding=Re.outputEncoding,Ne.instancing=Re.instancing,Ne.skinning=Re.skinning,Ne.morphTargets=Re.morphTargets,Ne.morphNormals=Re.morphNormals,Ne.morphColors=Re.morphColors,Ne.morphTargetsCount=Re.morphTargetsCount,Ne.numClippingPlanes=Re.numClippingPlanes,Ne.numIntersection=Re.numClipIntersection,Ne.vertexAlphas=Re.vertexAlphas,Ne.vertexTangents=Re.vertexTangents,Ne.toneMapping=Re.toneMapping}function ts(Z,Re,Ne,Ce,Ie){!0!==Re.isScene&&(Re=Se),Ot.resetTextureUnits();var Gt=Re.fog,ln=null===M?b.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:of,mn=(Ce.isMeshStandardMaterial?_n:Sn).get(Ce.envMap||(Ce.isMeshStandardMaterial?Re.environment:null)),Pt=!0===Ce.vertexColors&&!!Ne.attributes.color&&4===Ne.attributes.color.itemSize,Rt=!!Ce.normalMap&&!!Ne.attributes.tangent,At=!!Ne.morphAttributes.position,Qt=!!Ne.morphAttributes.normal,$t=!!Ne.morphAttributes.color,$n=Ce.toneMapped?b.toneMapping:0,cr=Ne.morphAttributes.position||Ne.morphAttributes.normal||Ne.morphAttributes.color,An=void 0!==cr?cr.length:0,Xt=et.get(Ce),to=C.state.lights;!0!==ae||!0!==ge&&Z===L||q.setState(Ce,Z,Z===L&&Ce.id===O);var zr=!1;Ce.version===Xt.__version?(Xt.needsLights&&Xt.lightsStateVersion!==to.state.version||Xt.outputEncoding!==ln||Ie.isInstancedMesh&&!1===Xt.instancing||!Ie.isInstancedMesh&&!0===Xt.instancing||Ie.isSkinnedMesh&&!1===Xt.skinning||!Ie.isSkinnedMesh&&!0===Xt.skinning||Xt.envMap!==mn||!0===Ce.fog&&Xt.fog!==Gt||void 0!==Xt.numClippingPlanes&&(Xt.numClippingPlanes!==q.numPlanes||Xt.numIntersection!==q.numIntersection)||Xt.vertexAlphas!==Pt||Xt.vertexTangents!==Rt||Xt.morphTargets!==At||Xt.morphNormals!==Qt||Xt.morphColors!==$t||Xt.toneMapping!==$n||!0===Ue.isWebGL2&&Xt.morphTargetsCount!==An)&&(zr=!0):(zr=!0,Xt.__version=Ce.version);var ns=Xt.currentProgram;!0===zr&&(ns=er(Ce,Re,Ie));var e_=!1,Nc=!1,gv=!1,no=ns.getUniforms(),ml=Xt.uniforms;if(it.useProgram(ns.program)&&(e_=!0,Nc=!0,gv=!0),Ce.id!==O&&(O=Ce.id,Nc=!0),e_||L!==Z){if(no.setValue(he,"projectionMatrix",Z.projectionMatrix),Ue.logarithmicDepthBuffer&&no.setValue(he,"logDepthBufFC",2/(Math.log(Z.far+1)/Math.LN2)),L!==Z&&(L=Z,Nc=!0,gv=!0),Ce.isShaderMaterial||Ce.isMeshPhongMaterial||Ce.isMeshToonMaterial||Ce.isMeshStandardMaterial||Ce.envMap){var t_=no.map.cameraPosition;void 0!==t_&&t_.setValue(he,Ge.setFromMatrixPosition(Z.matrixWorld))}(Ce.isMeshPhongMaterial||Ce.isMeshToonMaterial||Ce.isMeshLambertMaterial||Ce.isMeshBasicMaterial||Ce.isMeshStandardMaterial||Ce.isShaderMaterial)&&no.setValue(he,"isOrthographic",!0===Z.isOrthographicCamera),(Ce.isMeshPhongMaterial||Ce.isMeshToonMaterial||Ce.isMeshLambertMaterial||Ce.isMeshBasicMaterial||Ce.isMeshStandardMaterial||Ce.isShaderMaterial||Ce.isShadowMaterial||Ie.isSkinnedMesh)&&no.setValue(he,"viewMatrix",Z.matrixWorldInverse)}if(Ie.isSkinnedMesh){no.setOptional(he,Ie,"bindMatrix"),no.setOptional(he,Ie,"bindMatrixInverse");var kc=Ie.skeleton;kc&&(Ue.floatVertexTextures?(null===kc.boneTexture&&kc.computeBoneTexture(),no.setValue(he,"boneTexture",kc.boneTexture,Ot),no.setValue(he,"boneTextureSize",kc.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var Gc=Ne.morphAttributes;if((void 0!==Gc.position||void 0!==Gc.normal||void 0!==Gc.color&&!0===Ue.isWebGL2)&&ct.update(Ie,Ne,Ce,ns),(Nc||Xt.receiveShadow!==Ie.receiveShadow)&&(Xt.receiveShadow=Ie.receiveShadow,no.setValue(he,"receiveShadow",Ie.receiveShadow)),Ce.isMeshGouraudMaterial&&null!==Ce.envMap&&(ml.envMap.value=mn,ml.flipEnvMap.value=mn.isCubeTexture&&!1===mn.isRenderTargetTexture?-1:1),Nc&&(no.setValue(he,"toneMappingExposure",b.toneMappingExposure),Xt.needsLights&&vv(ml,gv),Gt&&!0===Ce.fog&&hr.refreshFogUniforms(ml,Gt),hr.refreshMaterialUniforms(ml,Ce,ne,X,Ee),jS.upload(he,Xt.uniformsList,ml,Ot)),Ce.isShaderMaterial&&!0===Ce.uniformsNeedUpdate&&(jS.upload(he,Xt.uniformsList,ml,Ot),Ce.uniformsNeedUpdate=!1),Ce.isSpriteMaterial&&no.setValue(he,"center",Ie.center),no.setValue(he,"modelViewMatrix",Ie.modelViewMatrix),no.setValue(he,"normalMatrix",Ie.normalMatrix),no.setValue(he,"modelMatrix",Ie.matrixWorld),Ce.isShaderMaterial||Ce.isRawShaderMaterial)for(var Ik=Ce.uniformsGroups,tM=0,eZ=Ik.length;tM<eZ;tM++)if(Ue.isWebGL2){var Lk=Ik[tM];rt.update(Lk,ns),rt.bind(Lk,ns)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return ns}function vv(Z,Re){Z.ambientLightColor.needsUpdate=Re,Z.lightProbe.needsUpdate=Re,Z.directionalLights.needsUpdate=Re,Z.directionalLightShadows.needsUpdate=Re,Z.pointLights.needsUpdate=Re,Z.pointLightShadows.needsUpdate=Re,Z.spotLights.needsUpdate=Re,Z.spotLightShadows.needsUpdate=Re,Z.rectAreaLights.needsUpdate=Re,Z.hemisphereLights.needsUpdate=Re}function eM(Z){return Z.isMeshLambertMaterial||Z.isMeshToonMaterial||Z.isMeshPhongMaterial||Z.isMeshStandardMaterial||Z.isShadowMaterial||Z.isShaderMaterial&&!0===Z.lights}Et.setAnimationLoop(wt),"undefined"!=typeof self&&Et.setContext(self),this.setAnimationLoop=function(Z){fe=Z,Ct.setAnimationLoop(Z),null===Z?Et.stop():Et.start()},Ct.addEventListener("sessionstart",ot),Ct.addEventListener("sessionend",St),this.render=function(Z,Re){if(void 0===Re||!0===Re.isCamera){if(!0!==E){if(!0===Z.matrixWorldAutoUpdate&&Z.updateMatrixWorld(),null===Re.parent&&!0===Re.matrixWorldAutoUpdate&&Re.updateMatrixWorld(),!0===Ct.enabled&&!0===Ct.isPresenting&&(!0===Ct.cameraAutoUpdate&&Ct.updateCamera(Re),Re=Ct.getCamera()),!0===Z.isScene&&Z.onBeforeRender(b,Z,Re,M),(C=re.get(Z,R.length)).init(),R.push(C),_e.multiplyMatrices(Re.projectionMatrix,Re.matrixWorldInverse),se.setFromProjectionMatrix(_e),ae=q.init(this.clippingPlanes,ge=this.localClippingEnabled,Re),(_=vr.get(Z,S.length)).init(),S.push(_),bt(Z,Re,0,b.sortObjects),_.finish(),!0===b.sortObjects&&_.sort(le,ue),!0===ae&&q.beginShadows(),De.render(C.state.shadowsArray,Z,Re),!0===ae&&q.endShadows(),!0===this.info.autoReset&&this.info.reset(),tt.render(_,Z),C.setupLights(b.physicallyCorrectLights),Re.isArrayCamera)for(var Ce=Re.cameras,Ie=0,Gt=Ce.length;Ie<Gt;Ie++){var Pn=Ce[Ie];lr(_,Z,Pn,Pn.viewport)}else lr(_,Z,Re);null!==M&&(Ot.updateMultisampleRenderTarget(M),Ot.updateRenderTargetMipmap(M)),!0===Z.isScene&&Z.onAfterRender(b,Z,Re),te.resetDefaultState(),O=-1,L=null,R.pop(),C=R.length>0?R[R.length-1]:null,S.pop(),_=S.length>0?S[S.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(Z,Re,Ne){et.get(Z.texture).__webglTexture=Re,et.get(Z.depthTexture).__webglTexture=Ne;var Ce=et.get(Z);Ce.__hasExternalTextures=!0,Ce.__hasExternalTextures&&(Ce.__autoAllocateDepthBuffer=void 0===Ne,Ce.__autoAllocateDepthBuffer||!0===We.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ce.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Z,Re){var Ne=et.get(Z);Ne.__webglFramebuffer=Re,Ne.__useDefaultFramebuffer=void 0===Re},this.setRenderTarget=function(Z){var Re=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Ne=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;M=Z,T=Re,D=Ne;var Ce=!0,Ie=null,Gt=!1,Pn=!1;if(Z){var ln=et.get(Z);void 0!==ln.__useDefaultFramebuffer?(it.bindFramebuffer(36160,null),Ce=!1):void 0===ln.__webglFramebuffer?Ot.setupRenderTarget(Z):ln.__hasExternalTextures&&Ot.rebindTextures(Z,et.get(Z.texture).__webglTexture,et.get(Z.depthTexture).__webglTexture);var mn=Z.texture;(mn.isData3DTexture||mn.isDataArrayTexture||mn.isCompressedArrayTexture)&&(Pn=!0);var Pt=et.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget?(Ie=Pt[Re],Gt=!0):Ie=Ue.isWebGL2&&Z.samples>0&&!1===Ot.useMultisampledRTT(Z)?et.get(Z).__webglMultisampledFramebuffer:Pt,H.copy(Z.viewport),z.copy(Z.scissor),P=Z.scissorTest}else H.copy(k).multiplyScalar(ne).floor(),z.copy(ee).multiplyScalar(ne).floor(),P=ie;var Rt=it.bindFramebuffer(36160,Ie);if(Rt&&Ue.drawBuffers&&Ce&&it.drawBuffers(Z,Ie),it.viewport(H),it.scissor(z),it.setScissorTest(P),Gt){var At=et.get(Z.texture);he.framebufferTexture2D(36160,36064,34069+Re,At.__webglTexture,Ne)}else if(Pn){var Qt=et.get(Z.texture),$t=Re||0;he.framebufferTextureLayer(36160,36064,Qt.__webglTexture,Ne||0,$t)}O=-1},this.readRenderTargetPixels=function(Z,Re,Ne,Ce,Ie,Gt,Pn){if(Z&&Z.isWebGLRenderTarget){var ln=et.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&void 0!==Pn&&(ln=ln[Pn]),ln){it.bindFramebuffer(36160,ln);try{var mn=Z.texture,Pt=mn.format,Rt=mn.type;if(Pt!==$a&&Nt.convert(Pt)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var At=Rt===cy&&(We.has("EXT_color_buffer_half_float")||Ue.isWebGL2&&We.has("EXT_color_buffer_float"));if(!(Rt===tf||Nt.convert(Rt)===he.getParameter(35738)||Rt===Rc&&(Ue.isWebGL2||We.has("OES_texture_float")||We.has("WEBGL_color_buffer_float"))||At))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Re>=0&&Re<=Z.width-Ce&&Ne>=0&&Ne<=Z.height-Ie&&he.readPixels(Re,Ne,Ce,Ie,Nt.convert(Pt),Nt.convert(Rt),Gt)}finally{var Qt=null!==M?et.get(M).__webglFramebuffer:null;it.bindFramebuffer(36160,Qt)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(Z,Re){var Ne=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Ce=Math.pow(2,-Ne),Ie=Math.floor(Re.image.width*Ce),Gt=Math.floor(Re.image.height*Ce);Ot.setTexture2D(Re,0),he.copyTexSubImage2D(3553,Ne,0,0,Z.x,Z.y,Ie,Gt),it.unbindTexture()},this.copyTextureToTexture=function(Z,Re,Ne){var Ce=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,Ie=Re.image.width,Gt=Re.image.height,Pn=Nt.convert(Ne.format),ln=Nt.convert(Ne.type);Ot.setTexture2D(Ne,0),he.pixelStorei(37440,Ne.flipY),he.pixelStorei(37441,Ne.premultiplyAlpha),he.pixelStorei(3317,Ne.unpackAlignment),Re.isDataTexture?he.texSubImage2D(3553,Ce,Z.x,Z.y,Ie,Gt,Pn,ln,Re.image.data):Re.isCompressedTexture?he.compressedTexSubImage2D(3553,Ce,Z.x,Z.y,Re.mipmaps[0].width,Re.mipmaps[0].height,Pn,Re.mipmaps[0].data):he.texSubImage2D(3553,Ce,Z.x,Z.y,Pn,ln,Re.image),0===Ce&&Ne.generateMipmaps&&he.generateMipmap(3553),it.unbindTexture()},this.copyTextureToTexture3D=function(Z,Re,Ne,Ce){var Ie=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(b.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var Rt,Gt=Z.max.x-Z.min.x+1,Pn=Z.max.y-Z.min.y+1,ln=Z.max.z-Z.min.z+1,mn=Nt.convert(Ce.format),Pt=Nt.convert(Ce.type);if(Ce.isData3DTexture)Ot.setTexture3D(Ce,0),Rt=32879;else{if(!Ce.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ot.setTexture2DArray(Ce,0),Rt=35866}he.pixelStorei(37440,Ce.flipY),he.pixelStorei(37441,Ce.premultiplyAlpha),he.pixelStorei(3317,Ce.unpackAlignment);var At=he.getParameter(3314),Qt=he.getParameter(32878),$t=he.getParameter(3316),$n=he.getParameter(3315),cr=he.getParameter(32877),An=Ne.isCompressedTexture?Ne.mipmaps[0]:Ne.image;he.pixelStorei(3314,An.width),he.pixelStorei(32878,An.height),he.pixelStorei(3316,Z.min.x),he.pixelStorei(3315,Z.min.y),he.pixelStorei(32877,Z.min.z),Ne.isDataTexture||Ne.isData3DTexture?he.texSubImage3D(Rt,Ie,Re.x,Re.y,Re.z,Gt,Pn,ln,mn,Pt,An.data):Ne.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(Rt,Ie,Re.x,Re.y,Re.z,Gt,Pn,ln,mn,An.data)):he.texSubImage3D(Rt,Ie,Re.x,Re.y,Re.z,Gt,Pn,ln,mn,Pt,An),he.pixelStorei(3314,At),he.pixelStorei(32878,Qt),he.pixelStorei(3316,$t),he.pixelStorei(3315,$n),he.pixelStorei(32877,cr),0===Ie&&Ce.generateMipmaps&&he.generateMipmap(Rt),it.unbindTexture()}},this.initTexture=function(Z){Z.isCubeTexture?Ot.setTextureCube(Z,0):Z.isData3DTexture?Ot.setTexture3D(Z,0):Z.isDataArrayTexture||Z.isCompressedArrayTexture?Ot.setTexture2DArray(Z,0):Ot.setTexture2D(Z,0),it.unbindTexture()},this.resetState=function(){T=0,D=0,M=null,it.reset(),te.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var B9=function(n){pe(t,n);var a=ve(t);function t(){return G(this,t),a.apply(this,arguments)}return t}(gf);B9.prototype.isWebGL1Renderer=!0;var Qh=function(n){pe(t,n);var a=ve(t);function t(){var r;return G(this,t),(r=a.call(this)).isScene=!0,r.type="Scene",r.background=null,r.environment=null,r.fog=null,r.backgroundBlurriness=0,r.backgroundIntensity=1,r.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:Xn(r)})),r}return j(t,[{key:"copy",value:function(o,u){return ye(ze(t.prototype),"copy",this).call(this,o,u),null!==o.background&&(this.background=o.background.clone()),null!==o.environment&&(this.environment=o.environment.clone()),null!==o.fog&&(this.fog=o.fog.clone()),this.backgroundBlurriness=o.backgroundBlurriness,this.backgroundIntensity=o.backgroundIntensity,null!==o.overrideMaterial&&(this.overrideMaterial=o.overrideMaterial.clone()),this.matrixAutoUpdate=o.matrixAutoUpdate,this}},{key:"toJSON",value:function(o){var u=ye(ze(t.prototype),"toJSON",this).call(this,o);return null!==this.fog&&(u.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(u.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(u.backgroundIntensity=this.backgroundIntensity),u}},{key:"autoUpdate",get:function(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function(o){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=o}}]),t}(go),H9=function(){function n(a,t){G(this,n),this.isInterleavedBuffer=!0,this.array=a,this.stride=t,this.count=void 0!==a?a.length/t:0,this.usage=xT,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Xa()}return j(n,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}},{key:"copyAt",value:function(t,r,o){t*=this.stride,o*=r.stride;for(var u=0,f=this.stride;u<f;u++)this.array[t+u]=r.array[o+u];return this}},{key:"set",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,r),this}},{key:"clone",value:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Xa()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var r=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),o=new this.constructor(r,this.stride);return o.setUsage(this.usage),o}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"toJSON",value:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Xa()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),n}(),No=new J,V9=function(){function n(a,t,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];G(this,n),this.isInterleavedBufferAttribute=!0,this.name="",this.data=a,this.itemSize=t,this.offset=r,this.normalized=o}return j(n,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(t){this.data.needsUpdate=t}},{key:"applyMatrix4",value:function(t){for(var r=0,o=this.data.count;r<o;r++)No.fromBufferAttribute(this,r),No.applyMatrix4(t),this.setXYZ(r,No.x,No.y,No.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var r=0,o=this.count;r<o;r++)No.fromBufferAttribute(this,r),No.applyNormalMatrix(t),this.setXYZ(r,No.x,No.y,No.z);return this}},{key:"transformDirection",value:function(t){for(var r=0,o=this.count;r<o;r++)No.fromBufferAttribute(this,r),No.transformDirection(t),this.setXYZ(r,No.x,No.y,No.z);return this}},{key:"setX",value:function(t,r){return this.normalized&&(r=pr(r,this.array)),this.data.array[t*this.data.stride+this.offset]=r,this}},{key:"setY",value:function(t,r){return this.normalized&&(r=pr(r,this.array)),this.data.array[t*this.data.stride+this.offset+1]=r,this}},{key:"setZ",value:function(t,r){return this.normalized&&(r=pr(r,this.array)),this.data.array[t*this.data.stride+this.offset+2]=r,this}},{key:"setW",value:function(t,r){return this.normalized&&(r=pr(r,this.array)),this.data.array[t*this.data.stride+this.offset+3]=r,this}},{key:"getX",value:function(t){var r=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(r=ol(r,this.array)),r}},{key:"getY",value:function(t){var r=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(r=ol(r,this.array)),r}},{key:"getZ",value:function(t){var r=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(r=ol(r,this.array)),r}},{key:"getW",value:function(t){var r=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(r=ol(r,this.array)),r}},{key:"setXY",value:function(t,r,o){return t=t*this.data.stride+this.offset,this.normalized&&(r=pr(r,this.array),o=pr(o,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=o,this}},{key:"setXYZ",value:function(t,r,o,u){return t=t*this.data.stride+this.offset,this.normalized&&(r=pr(r,this.array),o=pr(o,this.array),u=pr(u,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=o,this.data.array[t+2]=u,this}},{key:"setXYZW",value:function(t,r,o,u,f){return t=t*this.data.stride+this.offset,this.normalized&&(r=pr(r,this.array),o=pr(o,this.array),u=pr(u,this.array),f=pr(f,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=o,this.data.array[t+2]=u,this.data.array[t+3]=f,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var r=[],o=0;o<this.count;o++)for(var u=o*this.data.stride+this.offset,f=0;f<this.itemSize;f++)r.push(this.data.array[u+f]);return new Lo(new this.array.constructor(r),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new n(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var r=[],o=0;o<this.count;o++)for(var u=o*this.data.stride+this.offset,f=0;f<this.itemSize;f++)r.push(this.data.array[u+f]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),n}(),kF=new J,GF=new Cr,BF=new Cr,U9=new J,HF=new wn,z9=function(n){pe(t,n);var a=ve(t);function t(r,o){var u;return G(this,t),(u=a.call(this,r,o)).isSkinnedMesh=!0,u.type="SkinnedMesh",u.bindMode="attached",u.bindMatrix=new wn,u.bindMatrixInverse=new wn,u}return j(t,[{key:"copy",value:function(o,u){return ye(ze(t.prototype),"copy",this).call(this,o,u),this.bindMode=o.bindMode,this.bindMatrix.copy(o.bindMatrix),this.bindMatrixInverse.copy(o.bindMatrixInverse),this.skeleton=o.skeleton,this}},{key:"bind",value:function(o,u){this.skeleton=o,void 0===u&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),u=this.matrixWorld),this.bindMatrix.copy(u),this.bindMatrixInverse.copy(u).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var o=new Cr,u=this.geometry.attributes.skinWeight,f=0,h=u.count;f<h;f++){o.fromBufferAttribute(u,f);var v=1/o.manhattanLength();v!==1/0?o.multiplyScalar(v):o.set(1,0,0,0),u.setXYZW(f,o.x,o.y,o.z,o.w)}}},{key:"updateMatrixWorld",value:function(o){ye(ze(t.prototype),"updateMatrixWorld",this).call(this,o),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(o,u){var f=this.skeleton,h=this.geometry;GF.fromBufferAttribute(h.attributes.skinIndex,o),BF.fromBufferAttribute(h.attributes.skinWeight,o),kF.copy(u).applyMatrix4(this.bindMatrix),u.set(0,0,0);for(var v=0;v<4;v++){var g=BF.getComponent(v);if(0!==g){var y=GF.getComponent(v);HF.multiplyMatrices(f.bones[y].matrixWorld,f.boneInverses[y]),u.addScaledVector(U9.copy(kF).applyMatrix4(HF),g)}}return u.applyMatrix4(this.bindMatrixInverse)}}]),t}(na),VF=function(n){pe(t,n);var a=ve(t);function t(){var r;return G(this,t),(r=a.call(this)).isBone=!0,r.type="Bone",r}return t}(go),j9=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3?arguments[3]:void 0,v=arguments.length>4?arguments[4]:void 0,g=arguments.length>5?arguments[5]:void 0,y=arguments.length>6?arguments[6]:void 0,_=arguments.length>7?arguments[7]:void 0,C=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Ti,S=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ti,R=arguments.length>10?arguments[10]:void 0,b=arguments.length>11?arguments[11]:void 0;return G(this,t),(r=a.call(this,null,g,y,_,C,S,h,v,R,b)).isDataTexture=!0,r.image={data:o,width:u,height:f},r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r}return t}(_u),WF=new wn,q9=new wn,Y9=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];G(this,n),this.uuid=Xa(),this.bones=a.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return j(n,[{key:"init",value:function(){var t=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===r.length)this.calculateInverses();else if(t.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var o=0,u=this.bones.length;o<u;o++)this.boneInverses.push(new wn)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var t=0,r=this.bones.length;t<r;t++){var o=new wn;this.bones[t]&&o.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(o)}}},{key:"pose",value:function(){for(var t=0,r=this.bones.length;t<r;t++){var o=this.bones[t];o&&o.matrixWorld.copy(this.boneInverses[t]).invert()}for(var u=0,f=this.bones.length;u<f;u++){var h=this.bones[u];h&&(h.parent&&h.parent.isBone?(h.matrix.copy(h.parent.matrixWorld).invert(),h.matrix.multiply(h.matrixWorld)):h.matrix.copy(h.matrixWorld),h.matrix.decompose(h.position,h.quaternion,h.scale))}}},{key:"update",value:function(){for(var t=this.bones,r=this.boneInverses,o=this.boneMatrices,u=this.boneTexture,f=0,h=t.length;f<h;f++)WF.multiplyMatrices(t[f]?t[f].matrixWorld:q9,r[f]),WF.toArray(o,16*f);null!==u&&(u.needsUpdate=!0)}},{key:"clone",value:function(){return new n(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var t=Math.sqrt(4*this.bones.length);t=WL(t),t=Math.max(t,4);var r=new Float32Array(t*t*4);r.set(this.boneMatrices);var o=new j9(r,t,t,$a,Rc);return o.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=o,this.boneTextureSize=t,this}},{key:"getBoneByName",value:function(t){for(var r=0,o=this.bones.length;r<o;r++){var u=this.bones[r];if(u.name===t)return u}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(t,r){this.uuid=t.uuid;for(var o=0,u=t.bones.length;o<u;o++){var f=t.bones[o],h=r[f];void 0===h&&(console.warn("THREE.Skeleton: No bone found with UUID:",f),h=new VF),this.bones.push(h),this.boneInverses.push((new wn).fromArray(t.boneInverses[o]))}return this.init(),this}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;for(var r=this.bones,o=this.boneInverses,u=0,f=r.length;u<f;u++)t.bones.push(r[u].uuid),t.boneInverses.push(o[u].toArray());return t}}]),n}(),UF=function(n){pe(t,n);var a=ve(t);function t(r,o,u){var f,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return G(this,t),(f=a.call(this,r,o,u)).isInstancedBufferAttribute=!0,f.meshPerAttribute=h,f}return j(t,[{key:"copy",value:function(o){return ye(ze(t.prototype),"copy",this).call(this,o),this.meshPerAttribute=o.meshPerAttribute,this}},{key:"toJSON",value:function(){var o=ye(ze(t.prototype),"toJSON",this).call(this);return o.meshPerAttribute=this.meshPerAttribute,o.isInstancedBufferAttribute=!0,o}}]),t}(Lo),zF=new wn,jF=new wn,qS=[],K9=new wn,xy=new na,$9=function(n){pe(t,n);var a=ve(t);function t(r,o,u){var f;G(this,t),(f=a.call(this,r,o)).isInstancedMesh=!0,f.instanceMatrix=new UF(new Float32Array(16*u),16),f.instanceColor=null,f.count=u,f.frustumCulled=!1;for(var h=0;h<u;h++)f.setMatrixAt(h,K9);return f}return j(t,[{key:"copy",value:function(o,u){return ye(ze(t.prototype),"copy",this).call(this,o,u),this.instanceMatrix.copy(o.instanceMatrix),null!==o.instanceColor&&(this.instanceColor=o.instanceColor.clone()),this.count=o.count,this}},{key:"getColorAt",value:function(o,u){u.fromArray(this.instanceColor.array,3*o)}},{key:"getMatrixAt",value:function(o,u){u.fromArray(this.instanceMatrix.array,16*o)}},{key:"raycast",value:function(o,u){var f=this.matrixWorld,h=this.count;if(xy.geometry=this.geometry,xy.material=this.material,void 0!==xy.material)for(var v=0;v<h;v++){this.getMatrixAt(v,zF),jF.multiplyMatrices(f,zF),xy.matrixWorld=jF,xy.raycast(o,qS);for(var g=0,y=qS.length;g<y;g++){var _=qS[g];_.instanceId=v,_.object=this,u.push(_)}qS.length=0}}},{key:"setColorAt",value:function(o,u){null===this.instanceColor&&(this.instanceColor=new UF(new Float32Array(3*this.instanceMatrix.count),3)),u.toArray(this.instanceColor.array,3*o)}},{key:"setMatrixAt",value:function(o,u){u.toArray(this.instanceMatrix.array,16*o)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),t}(na),YS=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this)).isLineBasicMaterial=!0,o.type="LineBasicMaterial",o.color=new un(16777215),o.linewidth=1,o.linecap="round",o.linejoin="round",o.fog=!0,o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return ye(ze(t.prototype),"copy",this).call(this,o),this.color.copy(o.color),this.linewidth=o.linewidth,this.linecap=o.linecap,this.linejoin=o.linejoin,this.fog=o.fog,this}}]),t}(Cu),qF=new J,YF=new J,KF=new wn,oD=new HT,KS=new Bh,Ry=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mr,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new YS;return G(this,t),(r=a.call(this)).isLine=!0,r.type="Line",r.geometry=o,r.material=u,r.updateMorphTargets(),r}return j(t,[{key:"copy",value:function(o,u){return ye(ze(t.prototype),"copy",this).call(this,o,u),this.material=o.material,this.geometry=o.geometry,this}},{key:"computeLineDistances",value:function(){var o=this.geometry;if(null===o.index){for(var u=o.attributes.position,f=[0],h=1,v=u.count;h<v;h++)qF.fromBufferAttribute(u,h-1),YF.fromBufferAttribute(u,h),f[h]=f[h-1],f[h]+=qF.distanceTo(YF);o.setAttribute("lineDistance",new gn(f,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(o,u){var f=this.geometry,h=this.matrixWorld,v=o.params.Line.threshold,g=f.drawRange;if(null===f.boundingSphere&&f.computeBoundingSphere(),KS.copy(f.boundingSphere),KS.applyMatrix4(h),KS.radius+=v,!1!==o.ray.intersectsSphere(KS)){KF.copy(h).invert(),oD.copy(o.ray).applyMatrix4(KF);var y=v/((this.scale.x+this.scale.y+this.scale.z)/3),_=y*y,C=new J,S=new J,R=new J,b=new J,E=this.isLineSegments?2:1,T=f.index,M=f.attributes.position;if(null!==T)for(var H=Math.max(0,g.start),z=Math.min(T.count,g.start+g.count)-1;H<z;H+=E){var P=T.getX(H),W=T.getX(H+1);if(C.fromBufferAttribute(M,P),S.fromBufferAttribute(M,W),!(oD.distanceSqToSegment(C,S,b,R)>_)){b.applyMatrix4(this.matrixWorld);var ne=o.ray.origin.distanceTo(b);ne<o.near||ne>o.far||u.push({distance:ne,point:R.clone().applyMatrix4(this.matrixWorld),index:H,face:null,faceIndex:null,object:this})}}else for(var k=Math.max(0,g.start),ee=Math.min(M.count,g.start+g.count)-1;k<ee;k+=E)if(C.fromBufferAttribute(M,k),S.fromBufferAttribute(M,k+1),!(oD.distanceSqToSegment(C,S,b,R)>_)){b.applyMatrix4(this.matrixWorld);var se=o.ray.origin.distanceTo(b);se<o.near||se>o.far||u.push({distance:se,point:R.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this})}}}},{key:"updateMorphTargets",value:function(){var u=this.geometry.morphAttributes,f=Object.keys(u);if(f.length>0){var h=u[f[0]];if(void 0!==h){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var v=0,g=h.length;v<g;v++){var y=h[v].name||String(v);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=v}}}}}]),t}(go),$F=new J,XF=new J,X9=function(n){pe(t,n);var a=ve(t);function t(r,o){var u;return G(this,t),(u=a.call(this,r,o)).isLineSegments=!0,u.type="LineSegments",u}return j(t,[{key:"computeLineDistances",value:function(){var o=this.geometry;if(null===o.index){for(var u=o.attributes.position,f=[],h=0,v=u.count;h<v;h+=2)$F.fromBufferAttribute(u,h),XF.fromBufferAttribute(u,h+1),f[h]=0===h?0:f[h-1],f[h+1]=f[h]+$F.distanceTo(XF);o.setAttribute("lineDistance",new gn(f,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),t}(Ry),J9=function(n){pe(t,n);var a=ve(t);function t(r,o){var u;return G(this,t),(u=a.call(this,r,o)).isLineLoop=!0,u.type="LineLoop",u}return t}(Ry),JF=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this)).isPointsMaterial=!0,o.type="PointsMaterial",o.color=new un(16777215),o.map=null,o.alphaMap=null,o.size=1,o.sizeAttenuation=!0,o.fog=!0,o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return ye(ze(t.prototype),"copy",this).call(this,o),this.color.copy(o.color),this.map=o.map,this.alphaMap=o.alphaMap,this.size=o.size,this.sizeAttenuation=o.sizeAttenuation,this.fog=o.fog,this}}]),t}(Cu),ZF=new wn,aD=new HT,$S=new Bh,XS=new J,Z9=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mr,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new JF;return G(this,t),(r=a.call(this)).isPoints=!0,r.type="Points",r.geometry=o,r.material=u,r.updateMorphTargets(),r}return j(t,[{key:"copy",value:function(o,u){return ye(ze(t.prototype),"copy",this).call(this,o,u),this.material=o.material,this.geometry=o.geometry,this}},{key:"raycast",value:function(o,u){var f=this.geometry,h=this.matrixWorld,v=o.params.Points.threshold,g=f.drawRange;if(null===f.boundingSphere&&f.computeBoundingSphere(),$S.copy(f.boundingSphere),$S.applyMatrix4(h),$S.radius+=v,!1!==o.ray.intersectsSphere($S)){ZF.copy(h).invert(),aD.copy(o.ray).applyMatrix4(ZF);var y=v/((this.scale.x+this.scale.y+this.scale.z)/3),_=y*y,C=f.index,R=f.attributes.position;if(null!==C)for(var T=Math.max(0,g.start),D=Math.min(C.count,g.start+g.count);T<D;T++){var M=C.getX(T);XS.fromBufferAttribute(R,M),QF(XS,M,_,h,o,u,this)}else for(var H=Math.max(0,g.start),z=Math.min(R.count,g.start+g.count);H<z;H++)XS.fromBufferAttribute(R,H),QF(XS,H,_,h,o,u,this)}}},{key:"updateMorphTargets",value:function(){var u=this.geometry.morphAttributes,f=Object.keys(u);if(f.length>0){var h=u[f[0]];if(void 0!==h){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var v=0,g=h.length;v<g;v++){var y=h[v].name||String(v);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=v}}}}}]),t}(go);function QF(n,a,t,r,o,u,f){var h=aD.distanceSqToPoint(n);if(h<t){var v=new J;aD.closestPointToPoint(n,v),v.applyMatrix4(r);var g=o.ray.origin.distanceTo(v);if(g<o.near||g>o.far)return;u.push({distance:g,distanceToRay:Math.sqrt(h),point:v,index:a,face:null,object:f})}}var vD=function(n){pe(t,n);var a=ve(t);function t(){var r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;G(this,t),(r=a.call(this)).type="CircleGeometry",r.parameters={radius:o,segments:u,thetaStart:f,thetaLength:h},u=Math.max(3,u);var v=[],g=[],y=[],_=[],C=new J,S=new Ke;g.push(0,0,0),y.push(0,0,1),_.push(.5,.5);for(var R=0,b=3;R<=u;R++,b+=3){var E=f+R/u*h;C.x=o*Math.cos(E),C.y=o*Math.sin(E),g.push(C.x,C.y,C.z),y.push(0,0,1),S.x=(g[b]/o+1)/2,S.y=(g[b+1]/o+1)/2,_.push(S.x,S.y)}for(var T=1;T<=u;T++)v.push(T,T+1,0);return r.setIndex(v),r.setAttribute("position",new gn(g,3)),r.setAttribute("normal",new gn(y,3)),r.setAttribute("uv",new gn(_,2)),r}return j(t,null,[{key:"fromJSON",value:function(o){return new t(o.radius,o.segments,o.thetaStart,o.thetaLength)}}]),t}(Mr),_D=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this)).isMeshStandardMaterial=!0,o.defines={STANDARD:""},o.type="MeshStandardMaterial",o.color=new un(16777215),o.roughness=1,o.metalness=0,o.map=null,o.lightMap=null,o.lightMapIntensity=1,o.aoMap=null,o.aoMapIntensity=1,o.emissive=new un(0),o.emissiveIntensity=1,o.emissiveMap=null,o.bumpMap=null,o.bumpScale=1,o.normalMap=null,o.normalMapType=0,o.normalScale=new Ke(1,1),o.displacementMap=null,o.displacementScale=1,o.displacementBias=0,o.roughnessMap=null,o.metalnessMap=null,o.alphaMap=null,o.envMap=null,o.envMapIntensity=1,o.wireframe=!1,o.wireframeLinewidth=1,o.wireframeLinecap="round",o.wireframeLinejoin="round",o.flatShading=!1,o.fog=!0,o.setValues(r),o}return j(t,[{key:"copy",value:function(o){return ye(ze(t.prototype),"copy",this).call(this,o),this.defines={STANDARD:""},this.color.copy(o.color),this.roughness=o.roughness,this.metalness=o.metalness,this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.roughnessMap=o.roughnessMap,this.metalnessMap=o.metalnessMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.envMapIntensity=o.envMapIntensity,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.flatShading=o.flatShading,this.fog=o.fog,this}}]),t}(Cu),yf=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this)).isMeshPhysicalMaterial=!0,o.defines={STANDARD:"",PHYSICAL:""},o.type="MeshPhysicalMaterial",o.clearcoatMap=null,o.clearcoatRoughness=0,o.clearcoatRoughnessMap=null,o.clearcoatNormalScale=new Ke(1,1),o.clearcoatNormalMap=null,o.ior=1.5,Object.defineProperty(Xn(o),"reflectivity",{get:function(){return li(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(f){this.ior=(1+.4*f)/(1-.4*f)}}),o.iridescenceMap=null,o.iridescenceIOR=1.3,o.iridescenceThicknessRange=[100,400],o.iridescenceThicknessMap=null,o.sheenColor=new un(0),o.sheenColorMap=null,o.sheenRoughness=1,o.sheenRoughnessMap=null,o.transmissionMap=null,o.thickness=0,o.thicknessMap=null,o.attenuationDistance=1/0,o.attenuationColor=new un(1,1,1),o.specularIntensity=1,o.specularIntensityMap=null,o.specularColor=new un(1,1,1),o.specularColorMap=null,o._sheen=0,o._clearcoat=0,o._iridescence=0,o._transmission=0,o.setValues(r),o}return j(t,[{key:"sheen",get:function(){return this._sheen},set:function(o){this._sheen>0!=o>0&&this.version++,this._sheen=o}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(o){this._clearcoat>0!=o>0&&this.version++,this._clearcoat=o}},{key:"iridescence",get:function(){return this._iridescence},set:function(o){this._iridescence>0!=o>0&&this.version++,this._iridescence=o}},{key:"transmission",get:function(){return this._transmission},set:function(o){this._transmission>0!=o>0&&this.version++,this._transmission=o}},{key:"copy",value:function(o){return ye(ze(t.prototype),"copy",this).call(this,o),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=o.clearcoat,this.clearcoatMap=o.clearcoatMap,this.clearcoatRoughness=o.clearcoatRoughness,this.clearcoatRoughnessMap=o.clearcoatRoughnessMap,this.clearcoatNormalMap=o.clearcoatNormalMap,this.clearcoatNormalScale.copy(o.clearcoatNormalScale),this.ior=o.ior,this.iridescence=o.iridescence,this.iridescenceMap=o.iridescenceMap,this.iridescenceIOR=o.iridescenceIOR,this.iridescenceThicknessRange=kn(o.iridescenceThicknessRange),this.iridescenceThicknessMap=o.iridescenceThicknessMap,this.sheen=o.sheen,this.sheenColor.copy(o.sheenColor),this.sheenColorMap=o.sheenColorMap,this.sheenRoughness=o.sheenRoughness,this.sheenRoughnessMap=o.sheenRoughnessMap,this.transmission=o.transmission,this.transmissionMap=o.transmissionMap,this.thickness=o.thickness,this.thicknessMap=o.thicknessMap,this.attenuationDistance=o.attenuationDistance,this.attenuationColor.copy(o.attenuationColor),this.specularIntensity=o.specularIntensity,this.specularIntensityMap=o.specularIntensityMap,this.specularColor.copy(o.specularColor),this.specularColorMap=o.specularColorMap,this}}]),t}(_D);function Za(n,a,t){return CD(n)?new n.constructor(n.subarray(a,void 0!==t?t:n.length)):n.slice(a,t)}function _f(n,a,t){return!n||!t&&n.constructor===a?n:"number"==typeof a.BYTES_PER_ELEMENT?new a(n):Array.prototype.slice.call(n)}function CD(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function vN(n){for(var t=n.length,r=new Array(t),o=0;o!==t;++o)r[o]=o;return r.sort(function(u,f){return n[u]-n[f]}),r}function wD(n,a,t){for(var r=n.length,o=new n.constructor(r),u=0,f=0;f!==r;++u)for(var h=t[u]*a,v=0;v!==a;++v)o[f++]=n[h+v];return o}function SD(n,a,t,r){for(var o=1,u=n[0];void 0!==u&&void 0===u[r];)u=n[o++];if(void 0!==u){var f=u[r];if(void 0!==f)if(Array.isArray(f))do{void 0!==(f=u[r])&&(a.push(u.time),t.push.apply(t,f)),u=n[o++]}while(void 0!==u);else if(void 0!==f.toArray)do{void 0!==(f=u[r])&&(a.push(u.time),f.toArray(t,t.length)),u=n[o++]}while(void 0!==u);else do{void 0!==(f=u[r])&&(a.push(u.time),t.push(f)),u=n[o++]}while(void 0!==u)}}var Iy=function(){function n(a,t,r,o){G(this,n),this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0!==o?o:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return j(n,[{key:"evaluate",value:function(t){var r=this.parameterPositions,o=this._cachedIndex,u=r[o],f=r[o-1];e:{t:{var h;n:{r:if(!(t<u)){for(var v=o+2;;){if(void 0===u){if(t<f)break r;return this._cachedIndex=o=r.length,this.copySampleValue_(o-1)}if(o===v)break;if(f=u,t<(u=r[++o]))break t}h=r.length;break n}if(t>=f)break e;var g=r[1];t<g&&(o=2,f=g);for(var y=o-2;;){if(void 0===f)return this._cachedIndex=0,this.copySampleValue_(0);if(o===y)break;if(u=f,t>=(f=r[--o-1]))break t}h=o,o=0}for(;o<h;){var _=o+h>>>1;t<r[_]?h=_:o=_+1}if(u=r[o],void 0===(f=r[o-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===u)return this._cachedIndex=o=r.length,this.copySampleValue_(o-1)}this._cachedIndex=o,this.intervalChanged_(o,f,u)}return this.interpolate_(o,f,t,u)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(t){for(var r=this.resultBuffer,o=this.sampleValues,u=this.valueSize,f=t*u,h=0;h!==u;++h)r[h]=o[f+h];return r}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),n}(),K7=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f){var h;return G(this,t),(h=a.call(this,r,o,u,f))._weightPrev=-0,h._offsetPrev=-0,h._weightNext=-0,h._offsetNext=-0,h.DefaultSettings_={endingStart:Ph,endingEnd:Ph},h}return j(t,[{key:"intervalChanged_",value:function(o,u,f){var h=this.parameterPositions,v=o-2,g=o+1,y=h[v],_=h[g];if(void 0===y)switch(this.getSettings_().endingStart){case Ih:v=o,y=2*u-f;break;case 2402:y=u+h[v=h.length-2]-h[v+1];break;default:v=o,y=f}if(void 0===_)switch(this.getSettings_().endingEnd){case Ih:g=o,_=2*f-u;break;case 2402:g=1,_=f+h[1]-h[0];break;default:g=o-1,_=u}var C=.5*(f-u),S=this.valueSize;this._weightPrev=C/(u-y),this._weightNext=C/(_-f),this._offsetPrev=v*S,this._offsetNext=g*S}},{key:"interpolate_",value:function(o,u,f,h){for(var v=this.resultBuffer,g=this.sampleValues,y=this.valueSize,_=o*y,C=_-y,S=this._offsetPrev,R=this._offsetNext,b=this._weightPrev,E=this._weightNext,T=(f-u)/(h-u),D=T*T,M=D*T,O=-b*M+2*b*D-b*T,L=(1+b)*M+(-1.5-2*b)*D+(-.5+b)*T+1,H=(-1-E)*M+(1.5+E)*D+.5*T,z=E*M-E*D,P=0;P!==y;++P)v[P]=O*g[S+P]+L*g[C+P]+H*g[_+P]+z*g[R+P];return v}}]),t}(Iy),gN=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f){return G(this,t),a.call(this,r,o,u,f)}return j(t,[{key:"interpolate_",value:function(o,u,f,h){for(var v=this.resultBuffer,g=this.sampleValues,y=this.valueSize,_=o*y,C=_-y,S=(f-u)/(h-u),R=1-S,b=0;b!==y;++b)v[b]=g[C+b]*R+g[_+b]*S;return v}}]),t}(Iy),$7=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f){return G(this,t),a.call(this,r,o,u,f)}return j(t,[{key:"interpolate_",value:function(o){return this.copySampleValue_(o-1)}}]),t}(Iy),Eu=function(){function n(a,t,r,o){if(G(this,n),void 0===a)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a,this.times=_f(t,this.TimeBufferType),this.values=_f(r,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}return j(n,[{key:"InterpolantFactoryMethodDiscrete",value:function(t){return new $7(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodLinear",value:function(t){return new gN(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodSmooth",value:function(t){return new K7(this.times,this.values,this.getValueSize(),t)}},{key:"setInterpolation",value:function(t){var r;switch(t){case dy:r=this.InterpolantFactoryMethodDiscrete;break;case Oh:r=this.InterpolantFactoryMethodLinear;break;case 2302:r=this.InterpolantFactoryMethodSmooth}if(void 0===r){var o="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(o);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",o),this}return this.createInterpolant=r,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return dy;case this.InterpolantFactoryMethodLinear:return Oh;case this.InterpolantFactoryMethodSmooth:return 2302}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(t){if(0!==t)for(var r=this.times,o=0,u=r.length;o!==u;++o)r[o]+=t;return this}},{key:"scale",value:function(t){if(1!==t)for(var r=this.times,o=0,u=r.length;o!==u;++o)r[o]*=t;return this}},{key:"trim",value:function(t,r){for(var o=this.times,u=o.length,f=0,h=u-1;f!==u&&o[f]<t;)++f;for(;-1!==h&&o[h]>r;)--h;if(++h,0!==f||h!==u){f>=h&&(f=(h=Math.max(h,1))-1);var v=this.getValueSize();this.times=Za(o,f,h),this.values=Za(this.values,f*v,h*v)}return this}},{key:"validate",value:function(){var t=!0,r=this.getValueSize();r-Math.floor(r)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var o=this.times,u=this.values,f=o.length;0===f&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var h=null,v=0;v!==f;v++){var g=o[v];if("number"==typeof g&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,v,g),t=!1;break}if(null!==h&&h>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,v,g,h),t=!1;break}h=g}if(void 0!==u&&CD(u))for(var y=0,_=u.length;y!==_;++y){var C=u[y];if(isNaN(C)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,y,C),t=!1;break}}return t}},{key:"optimize",value:function(){for(var t=Za(this.times),r=Za(this.values),o=this.getValueSize(),u=2302===this.getInterpolation(),f=t.length-1,h=1,v=1;v<f;++v){var g=!1,y=t[v];if(y!==t[v+1]&&(1!==v||y!==t[0]))if(u)g=!0;else for(var C=v*o,S=C-o,R=C+o,b=0;b!==o;++b){var E=r[C+b];if(E!==r[S+b]||E!==r[R+b]){g=!0;break}}if(g){if(v!==h){t[h]=t[v];for(var T=v*o,D=h*o,M=0;M!==o;++M)r[D+M]=r[T+M]}++h}}if(f>0){t[h]=t[f];for(var O=f*o,L=h*o,H=0;H!==o;++H)r[L+H]=r[O+H];++h}return h!==t.length?(this.times=Za(t,0,h),this.values=Za(r,0,h*o)):(this.times=t,this.values=r),this}},{key:"clone",value:function(){var t=Za(this.times,0),r=Za(this.values,0),u=new(0,this.constructor)(this.name,t,r);return u.createInterpolant=this.createInterpolant,u}}],[{key:"toJSON",value:function(t){var o,r=t.constructor;if(r.toJSON!==this.toJSON)o=r.toJSON(t);else{o={name:t.name,times:_f(t.times,Array),values:_f(t.values,Array)};var u=t.getInterpolation();u!==t.DefaultInterpolation&&(o.interpolation=u)}return o.type=t.ValueTypeName,o}}]),n}();Eu.prototype.TimeBufferType=Float32Array,Eu.prototype.ValueBufferType=Float32Array,Eu.prototype.DefaultInterpolation=Oh;var iv=function(n){pe(t,n);var a=ve(t);function t(){return G(this,t),a.apply(this,arguments)}return t}(Eu);iv.prototype.ValueTypeName="bool",iv.prototype.ValueBufferType=Array,iv.prototype.DefaultInterpolation=dy,iv.prototype.InterpolantFactoryMethodLinear=void 0,iv.prototype.InterpolantFactoryMethodSmooth=void 0;var mN=function(n){pe(t,n);var a=ve(t);function t(){return G(this,t),a.apply(this,arguments)}return t}(Eu);mN.prototype.ValueTypeName="color";var Ly=function(n){pe(t,n);var a=ve(t);function t(){return G(this,t),a.apply(this,arguments)}return t}(Eu);Ly.prototype.ValueTypeName="number";var X7=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f){return G(this,t),a.call(this,r,o,u,f)}return j(t,[{key:"interpolate_",value:function(o,u,f,h){for(var v=this.resultBuffer,g=this.sampleValues,y=this.valueSize,_=(f-u)/(h-u),C=o*y,S=C+y;C!==S;C+=4)eo.slerpFlat(v,0,g,C-y,g,C,_);return v}}]),t}(Iy),Cf=function(n){pe(t,n);var a=ve(t);function t(){return G(this,t),a.apply(this,arguments)}return j(t,[{key:"InterpolantFactoryMethodLinear",value:function(o){return new X7(this.times,this.values,this.getValueSize(),o)}}]),t}(Eu);Cf.prototype.ValueTypeName="quaternion",Cf.prototype.DefaultInterpolation=Oh,Cf.prototype.InterpolantFactoryMethodSmooth=void 0;var ov=function(n){pe(t,n);var a=ve(t);function t(){return G(this,t),a.apply(this,arguments)}return t}(Eu);ov.prototype.ValueTypeName="string",ov.prototype.ValueBufferType=Array,ov.prototype.DefaultInterpolation=dy,ov.prototype.InterpolantFactoryMethodLinear=void 0,ov.prototype.InterpolantFactoryMethodSmooth=void 0;var Fy=function(n){pe(t,n);var a=ve(t);function t(){return G(this,t),a.apply(this,arguments)}return t}(Eu);Fy.prototype.ValueTypeName="vector";var ED=function(){function n(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;G(this,n),this.name=a,this.tracks=r,this.duration=t,this.blendMode=o,this.uuid=Xa(),this.duration<0&&this.resetDuration()}return j(n,[{key:"resetDuration",value:function(){for(var r=0,o=0,u=this.tracks.length;o!==u;++o){var f=this.tracks[o];r=Math.max(r,f.times[f.times.length-1])}return this.duration=r,this}},{key:"trim",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var t=!0,r=0;r<this.tracks.length;r++)t=t&&this.tracks[r].validate();return t}},{key:"optimize",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},{key:"clone",value:function(){for(var t=[],r=0;r<this.tracks.length;r++)t.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(t){for(var r=[],o=t.tracks,u=1/(t.fps||1),f=0,h=o.length;f!==h;++f)r.push(Z7(o[f]).scale(u));var v=new this(t.name,t.duration,r,t.blendMode);return v.uuid=t.uuid,v}},{key:"toJSON",value:function(t){for(var r=[],o=t.tracks,u={name:t.name,duration:t.duration,tracks:r,uuid:t.uuid,blendMode:t.blendMode},f=0,h=o.length;f!==h;++f)r.push(Eu.toJSON(o[f]));return u}},{key:"CreateFromMorphTargetSequence",value:function(t,r,o,u){for(var f=r.length,h=[],v=0;v<f;v++){var g=[],y=[];g.push((v+f-1)%f,v,(v+1)%f),y.push(0,1,0);var _=vN(g);g=wD(g,1,_),y=wD(y,1,_),!u&&0===g[0]&&(g.push(f),y.push(y[0])),h.push(new Ly(".morphTargetInfluences["+r[v].name+"]",g,y).scale(1/o))}return new this(t,-1,h)}},{key:"findByName",value:function(t,r){var o=t;Array.isArray(t)||(o=t.geometry&&t.geometry.animations||t.animations);for(var f=0;f<o.length;f++)if(o[f].name===r)return o[f];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(t,r,o){for(var u={},f=/^([\w-]*?)([\d]+)$/,h=0,v=t.length;h<v;h++){var g=t[h],y=g.name.match(f);if(y&&y.length>1){var _=y[1],C=u[_];C||(u[_]=C=[]),C.push(g)}}var S=[];for(var R in u)S.push(this.CreateFromMorphTargetSequence(R,u[R],r,o));return S}},{key:"parseAnimation",value:function(t,r){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var o=function(P,W,X,ne,le){if(0!==X.length){var ue=[],k=[];SD(X,ue,k,ne),0!==ue.length&&le.push(new P(W,ue,k))}},u=[],f=t.name||"default",h=t.fps||30,v=t.blendMode,g=t.length||-1,y=t.hierarchy||[],_=0;_<y.length;_++){var C=y[_].keys;if(C&&0!==C.length)if(C[0].morphTargets){var S={},R=void 0;for(R=0;R<C.length;R++)if(C[R].morphTargets)for(var b=0;b<C[R].morphTargets.length;b++)S[C[R].morphTargets[b]]=-1;for(var E in S){for(var T=[],D=[],M=0;M!==C[R].morphTargets.length;++M){var O=C[R];T.push(O.time),D.push(O.morphTarget===E?1:0)}u.push(new Ly(".morphTargetInfluence["+E+"]",T,D))}g=S.length*h}else{var L=".bones["+r[_].name+"]";o(Fy,L+".position",C,"pos",u),o(Cf,L+".quaternion",C,"rot",u),o(Fy,L+".scale",C,"scl",u)}}return 0===u.length?null:new this(f,g,u,v)}}]),n}();function Z7(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var a=function(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ly;case"vector":case"vector2":case"vector3":case"vector4":return Fy;case"color":return mN;case"quaternion":return Cf;case"bool":case"boolean":return iv;case"string":return ov}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){var t=[],r=[];SD(n.keys,t,r,"value"),n.times=t,n.values=r}return void 0!==a.parse?a.parse(n):new a(n.name,n.times,n.values,n.interpolation)}var av={enabled:!1,files:{},add:function(a,t){!1!==this.enabled&&(this.files[a]=t)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},Q7=function n(a,t,r){G(this,n);var o=this,u=!1,f=0,h=0,v=void 0,g=[];this.onStart=void 0,this.onLoad=a,this.onProgress=t,this.onError=r,this.itemStart=function(y){h++,!1===u&&void 0!==o.onStart&&o.onStart(y,f,h),u=!0},this.itemEnd=function(y){f++,void 0!==o.onProgress&&o.onProgress(y,f,h),f===h&&(u=!1,void 0!==o.onLoad&&o.onLoad())},this.itemError=function(y){void 0!==o.onError&&o.onError(y)},this.resolveURL=function(y){return v?v(y):y},this.setURLModifier=function(y){return v=y,this},this.addHandler=function(y,_){return g.push(y,_),this},this.removeHandler=function(y){var _=g.indexOf(y);return-1!==_&&g.splice(_,2),this},this.getHandler=function(y){for(var _=0,C=g.length;_<C;_+=2){var S=g[_],R=g[_+1];if(S.global&&(S.lastIndex=0),S.test(y))return R}return null}},eq=new Q7,Ny=function(){function n(a){G(this,n),this.manager=void 0!==a?a:eq,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return j(n,[{key:"load",value:function(){}},{key:"loadAsync",value:function(t,r){var o=this;return new Promise(function(u,f){o.load(t,u,r,f)})}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(t){return this.crossOrigin=t,this}},{key:"setWithCredentials",value:function(t){return this.withCredentials=t,this}},{key:"setPath",value:function(t){return this.path=t,this}},{key:"setResourcePath",value:function(t){return this.resourcePath=t,this}},{key:"setRequestHeader",value:function(t){return this.requestHeader=t,this}}]),n}(),fl={},tq=function(n){pe(t,n);var a=ve(t);function t(r,o){var u;return G(this,t),(u=a.call(this,r)).response=o,u}return t}(wr(Error)),yN=function(n){pe(t,n);var a=ve(t);function t(r){return G(this,t),a.call(this,r)}return j(t,[{key:"load",value:function(o,u,f,h){var v=this;void 0===o&&(o=""),void 0!==this.path&&(o=this.path+o),o=this.manager.resolveURL(o);var g=av.get(o);if(void 0!==g)return this.manager.itemStart(o),setTimeout(function(){u&&u(g),v.manager.itemEnd(o)},0),g;if(void 0===fl[o]){fl[o]=[],fl[o].push({onLoad:u,onProgress:f,onError:h});var y=new Request(o,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),_=this.mimeType,C=this.responseType;fetch(y).then(function(S){if(200===S.status||0===S.status){if(0===S.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===S.body||void 0===S.body.getReader)return S;var R=fl[o],b=S.body.getReader(),E=S.headers.get("Content-Length")||S.headers.get("X-File-Size"),T=E?parseInt(E):0,D=0!==T,M=0,O=new ReadableStream({start:function(H){!function z(){b.read().then(function(P){var X=P.value;if(P.done)H.close();else{for(var ne=new ProgressEvent("progress",{lengthComputable:D,loaded:M+=X.byteLength,total:T}),le=0,ue=R.length;le<ue;le++){var k=R[le];k.onProgress&&k.onProgress(ne)}H.enqueue(X),z()}})}()}});return new Response(O)}throw new tq('fetch for "'.concat(S.url,'" responded with ').concat(S.status,": ").concat(S.statusText),S)}).then(function(S){switch(C){case"arraybuffer":return S.arrayBuffer();case"blob":return S.blob();case"document":return S.text().then(function(D){return(new DOMParser).parseFromString(D,_)});case"json":return S.json();default:if(void 0===_)return S.text();var b=/charset="?([^;"\s]*)"?/i.exec(_),E=b&&b[1]?b[1].toLowerCase():void 0,T=new TextDecoder(E);return S.arrayBuffer().then(function(D){return T.decode(D)})}}).then(function(S){av.add(o,S);var R=fl[o];delete fl[o];for(var b=0,E=R.length;b<E;b++){var T=R[b];T.onLoad&&T.onLoad(S)}}).catch(function(S){var R=fl[o];if(void 0===R)throw v.manager.itemError(o),S;delete fl[o];for(var b=0,E=R.length;b<E;b++){var T=R[b];T.onError&&T.onError(S)}v.manager.itemError(o)}).finally(function(){v.manager.itemEnd(o)}),this.manager.itemStart(o)}else fl[o].push({onLoad:u,onProgress:f,onError:h})}},{key:"setResponseType",value:function(o){return this.responseType=o,this}},{key:"setMimeType",value:function(o){return this.mimeType=o,this}}]),t}(Ny),nq=function(n){pe(t,n);var a=ve(t);function t(r){return G(this,t),a.call(this,r)}return j(t,[{key:"load",value:function(o,u,f,h){void 0!==this.path&&(o=this.path+o),o=this.manager.resolveURL(o);var v=this,g=av.get(o);if(void 0!==g)return v.manager.itemStart(o),setTimeout(function(){u&&u(g),v.manager.itemEnd(o)},0),g;var y=vy("img");function _(){S(),av.add(o,this),u&&u(this),v.manager.itemEnd(o)}function C(R){S(),h&&h(R),v.manager.itemError(o),v.manager.itemEnd(o)}function S(){y.removeEventListener("load",_,!1),y.removeEventListener("error",C,!1)}return y.addEventListener("load",_,!1),y.addEventListener("error",C,!1),"data:"!==o.slice(0,5)&&void 0!==this.crossOrigin&&(y.crossOrigin=this.crossOrigin),v.manager.itemStart(o),y.src=o,y}}]),t}(Ny),rq=function(n){pe(t,n);var a=ve(t);function t(r){return G(this,t),a.call(this,r)}return j(t,[{key:"load",value:function(o,u,f,h){var v=new _u,g=new nq(this.manager);return g.setCrossOrigin(this.crossOrigin),g.setPath(this.path),g.load(o,function(y){v.image=y,v.needsUpdate=!0,void 0!==u&&u(v)},f,h),v}}]),t}(Ny),rE=function(n){pe(t,n);var a=ve(t);function t(r){var o,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return G(this,t),(o=a.call(this)).isLight=!0,o.type="Light",o.color=new un(r),o.intensity=u,o}return j(t,[{key:"dispose",value:function(){}},{key:"copy",value:function(o,u){return ye(ze(t.prototype),"copy",this).call(this,o,u),this.color.copy(o.color),this.intensity=o.intensity,this}},{key:"toJSON",value:function(o){var u=ye(ze(t.prototype),"toJSON",this).call(this,o);return u.object.color=this.color.getHex(),u.object.intensity=this.intensity,void 0!==this.groundColor&&(u.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(u.object.distance=this.distance),void 0!==this.angle&&(u.object.angle=this.angle),void 0!==this.decay&&(u.object.decay=this.decay),void 0!==this.penumbra&&(u.object.penumbra=this.penumbra),void 0!==this.shadow&&(u.object.shadow=this.shadow.toJSON()),u}}]),t}(go),bD=new wn,_N=new J,CN=new J,xD=function(){function n(a){G(this,n),this.camera=a,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ke(512,512),this.map=null,this.mapPass=null,this.matrix=new wn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new JT,this._frameExtents=new Ke(1,1),this._viewportCount=1,this._viewports=[new Cr(0,0,1,1)]}return j(n,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(t){var r=this.camera,o=this.matrix;_N.setFromMatrixPosition(t.matrixWorld),r.position.copy(_N),CN.setFromMatrixPosition(t.target.matrixWorld),r.lookAt(CN),r.updateMatrixWorld(),bD.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bD),o.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),o.multiply(bD)}},{key:"getViewport",value:function(t){return this._viewports[t]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}]),n}(),iq=function(n){pe(t,n);var a=ve(t);function t(){var r;return G(this,t),(r=a.call(this,new di(50,1,.5,500))).isSpotLightShadow=!0,r.focus=1,r}return j(t,[{key:"updateMatrices",value:function(o){var u=this.camera,f=2*py*o.angle*this.focus,h=this.mapSize.width/this.mapSize.height,v=o.distance||u.far;(f!==u.fov||h!==u.aspect||v!==u.far)&&(u.fov=f,u.aspect=h,u.far=v,u.updateProjectionMatrix()),ye(ze(t.prototype),"updateMatrices",this).call(this,o)}},{key:"copy",value:function(o){return ye(ze(t.prototype),"copy",this).call(this,o),this.focus=o.focus,this}}]),t}(xD),oq=function(n){pe(t,n);var a=ve(t);function t(r,o){var u,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return G(this,t),(u=a.call(this,r,o)).isSpotLight=!0,u.type="SpotLight",u.position.copy(go.DefaultUp),u.updateMatrix(),u.target=new go,u.distance=f,u.angle=h,u.penumbra=v,u.decay=g,u.map=null,u.shadow=new iq,u}return j(t,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(o){this.intensity=o/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(o,u){return ye(ze(t.prototype),"copy",this).call(this,o,u),this.distance=o.distance,this.angle=o.angle,this.penumbra=o.penumbra,this.decay=o.decay,this.target=o.target.clone(),this.shadow=o.shadow.clone(),this}}]),t}(rE),wN=new wn,ky=new J,RD=new J,aq=function(n){pe(t,n);var a=ve(t);function t(){var r;return G(this,t),(r=a.call(this,new di(90,1,.5,500))).isPointLightShadow=!0,r._frameExtents=new Ke(4,2),r._viewportCount=6,r._viewports=[new Cr(2,1,1,1),new Cr(0,1,1,1),new Cr(3,1,1,1),new Cr(1,1,1,1),new Cr(3,0,1,1),new Cr(1,0,1,1)],r._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],r._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)],r}return j(t,[{key:"updateMatrices",value:function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,f=this.camera,h=this.matrix,v=o.distance||f.far;v!==f.far&&(f.far=v,f.updateProjectionMatrix()),ky.setFromMatrixPosition(o.matrixWorld),f.position.copy(ky),RD.copy(f.position),RD.add(this._cubeDirections[u]),f.up.copy(this._cubeUps[u]),f.lookAt(RD),f.updateMatrixWorld(),h.makeTranslation(-ky.x,-ky.y,-ky.z),wN.multiplyMatrices(f.projectionMatrix,f.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wN)}}]),t}(xD),sq=function(n){pe(t,n);var a=ve(t);function t(r,o){var u,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return G(this,t),(u=a.call(this,r,o)).isPointLight=!0,u.type="PointLight",u.distance=f,u.decay=h,u.shadow=new aq,u}return j(t,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(o){this.intensity=o/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(o,u){return ye(ze(t.prototype),"copy",this).call(this,o,u),this.distance=o.distance,this.decay=o.decay,this.shadow=o.shadow.clone(),this}}]),t}(rE),uq=function(n){pe(t,n);var a=ve(t);function t(){var r;return G(this,t),(r=a.call(this,new ZT(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,r}return t}(xD),wf=function(n){pe(t,n);var a=ve(t);function t(r,o){var u;return G(this,t),(u=a.call(this,r,o)).isDirectionalLight=!0,u.type="DirectionalLight",u.position.copy(go.DefaultUp),u.updateMatrix(),u.target=new go,u.shadow=new uq,u}return j(t,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(o){return ye(ze(t.prototype),"copy",this).call(this,o),this.target=o.target.clone(),this.shadow=o.shadow.clone(),this}}]),t}(rE),sv=function(n){pe(t,n);var a=ve(t);function t(r,o){var u;return G(this,t),(u=a.call(this,r,o)).isAmbientLight=!0,u.type="AmbientLight",u}return t}(rE),Sf=function(){function n(){G(this,n)}return j(n,null,[{key:"decodeText",value:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var r="",o=0,u=t.length;o<u;o++)r+=String.fromCharCode(t[o]);try{return decodeURIComponent(escape(r))}catch(f){return r}}},{key:"extractUrlBase",value:function(t){var r=t.lastIndexOf("/");return-1===r?"./":t.slice(0,r+1)}},{key:"resolveURL",value:function(t,r){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(r)&&/^\//.test(t)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:r+t)}}]),n}(),lq=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this,r)).isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),o.options={premultiplyAlpha:"none"},o}return j(t,[{key:"setOptions",value:function(o){return this.options=o,this}},{key:"load",value:function(o,u,f,h){void 0===o&&(o=""),void 0!==this.path&&(o=this.path+o),o=this.manager.resolveURL(o);var v=this,g=av.get(o);if(void 0!==g)return v.manager.itemStart(o),setTimeout(function(){u&&u(g),v.manager.itemEnd(o)},0),g;var y={};y.credentials="anonymous"===this.crossOrigin?"same-origin":"include",y.headers=this.requestHeader,fetch(o,y).then(function(_){return _.blob()}).then(function(_){return createImageBitmap(_,Object.assign(v.options,{colorSpaceConversion:"none"}))}).then(function(_){av.add(o,_),u&&u(_),v.manager.itemEnd(o)}).catch(function(_){h&&h(_),v.manager.itemError(o),v.manager.itemEnd(o)}),v.manager.itemStart(o)}}]),t}(Ny),Gy=function(){function n(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];G(this,n),this.autoStart=a,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return j(n,[{key:"start",value:function(){this.startTime=SN(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var r=SN();t=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=t}return t}}]),n}();function SN(){return("undefined"==typeof performance?Date:performance).now()}var cq=function(){function n(a,t,r){var o,u,f;switch(G(this,n),this.binding=a,this.valueSize=r,t){case"quaternion":o=this._slerp,u=this._slerpAdditive,f=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":o=this._select,u=this._select,f=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:o=this._lerp,u=this._lerpAdditive,f=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=u,this._setIdentity=f,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return j(n,[{key:"accumulate",value:function(t,r){var o=this.buffer,u=this.valueSize,f=t*u+u,h=this.cumulativeWeight;if(0===h){for(var v=0;v!==u;++v)o[f+v]=o[v];h=r}else this._mixBufferRegion(o,f,0,r/(h+=r),u);this.cumulativeWeight=h}},{key:"accumulateAdditive",value:function(t){var r=this.buffer,o=this.valueSize,u=o*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(r,u,0,t,o),this.cumulativeWeightAdditive+=t}},{key:"apply",value:function(t){var r=this.valueSize,o=this.buffer,u=t*r+r,f=this.cumulativeWeight,h=this.cumulativeWeightAdditive,v=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,f<1&&this._mixBufferRegion(o,u,r*this._origIndex,1-f,r),h>0&&this._mixBufferRegionAdditive(o,u,this._addIndex*r,1,r);for(var y=r,_=r+r;y!==_;++y)if(o[y]!==o[y+r]){v.setValue(o,u);break}}},{key:"saveOriginalState",value:function(){var r=this.buffer,o=this.valueSize,u=o*this._origIndex;this.binding.getValue(r,u);for(var f=o,h=u;f!==h;++f)r[f]=r[u+f%o];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){this.binding.setValue(this.buffer,3*this.valueSize)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var t=this._addIndex*this.valueSize,r=t+this.valueSize,o=t;o<r;o++)this.buffer[o]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var t=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize,o=0;o<this.valueSize;o++)this.buffer[r+o]=this.buffer[t+o]}},{key:"_select",value:function(t,r,o,u,f){if(u>=.5)for(var h=0;h!==f;++h)t[r+h]=t[o+h]}},{key:"_slerp",value:function(t,r,o,u){eo.slerpFlat(t,r,t,r,t,o,u)}},{key:"_slerpAdditive",value:function(t,r,o,u,f){var h=this._workIndex*f;eo.multiplyQuaternionsFlat(t,h,t,r,t,o),eo.slerpFlat(t,r,t,r,t,h,u)}},{key:"_lerp",value:function(t,r,o,u,f){for(var h=1-u,v=0;v!==f;++v){var g=r+v;t[g]=t[g]*h+t[o+v]*u}}},{key:"_lerpAdditive",value:function(t,r,o,u,f){for(var h=0;h!==f;++h){var v=r+h;t[v]=t[v]+t[o+h]*u}}}]),n}(),AD="\\[\\]\\.:\\/",dq=new RegExp("["+AD+"]","g"),TD="[^"+AD+"]",fq="[^"+AD.replace("\\.","")+"]",mq=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",TD)+/(WCOD+)?/.source.replace("WCOD",fq)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",TD)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",TD)+"$"),yq=["material","materials","bones","map"],_q=function(){function n(a,t,r){G(this,n);var o=r||Pr.parseTrackName(t);this._targetGroup=a,this._bindings=a.subscribe_(t,o)}return j(n,[{key:"getValue",value:function(t,r){this.bind();var u=this._bindings[this._targetGroup.nCachedObjects_];void 0!==u&&u.getValue(t,r)}},{key:"setValue",value:function(t,r){for(var o=this._bindings,u=this._targetGroup.nCachedObjects_,f=o.length;u!==f;++u)o[u].setValue(t,r)}},{key:"bind",value:function(){for(var t=this._bindings,r=this._targetGroup.nCachedObjects_,o=t.length;r!==o;++r)t[r].bind()}},{key:"unbind",value:function(){for(var t=this._bindings,r=this._targetGroup.nCachedObjects_,o=t.length;r!==o;++r)t[r].unbind()}}]),n}(),Pr=function(){var n=function(){function a(t,r,o){G(this,a),this.path=r,this.parsedPath=o||a.parseTrackName(r),this.node=a.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return j(a,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(r,o){r[o]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(r,o){for(var u=this.resolvedProperty,f=0,h=u.length;f!==h;++f)r[o++]=u[f]}},{key:"_getValue_arrayElement",value:function(r,o){r[o]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(r,o){this.resolvedProperty.toArray(r,o)}},{key:"_setValue_direct",value:function(r,o){this.targetObject[this.propertyName]=r[o]}},{key:"_setValue_direct_setNeedsUpdate",value:function(r,o){this.targetObject[this.propertyName]=r[o],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(r,o){this.targetObject[this.propertyName]=r[o],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(r,o){for(var u=this.resolvedProperty,f=0,h=u.length;f!==h;++f)u[f]=r[o++]}},{key:"_setValue_array_setNeedsUpdate",value:function(r,o){for(var u=this.resolvedProperty,f=0,h=u.length;f!==h;++f)u[f]=r[o++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(r,o){for(var u=this.resolvedProperty,f=0,h=u.length;f!==h;++f)u[f]=r[o++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(r,o){this.resolvedProperty[this.propertyIndex]=r[o]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(r,o){this.resolvedProperty[this.propertyIndex]=r[o],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(r,o){this.resolvedProperty[this.propertyIndex]=r[o],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(r,o){this.resolvedProperty.fromArray(r,o)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(r,o){this.resolvedProperty.fromArray(r,o),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(r,o){this.resolvedProperty.fromArray(r,o),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(r,o){this.bind(),this.getValue(r,o)}},{key:"_setValue_unbound",value:function(r,o){this.bind(),this.setValue(r,o)}},{key:"bind",value:function(){var r=this.node,o=this.parsedPath,u=o.objectName,f=o.propertyName,h=o.propertyIndex;if(r||(r=a.findNode(this.rootNode,o.nodeName)||this.rootNode,this.node=r),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,r){if(u){var v=o.objectIndex;switch(u){case"materials":if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);r=r.material.materials;break;case"bones":if(!r.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);r=r.skeleton.bones;for(var g=0;g<r.length;g++)if(r[g].name===v){v=g;break}break;case"map":if("map"in r){r=r.map;break}if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);r=r.material.map;break;default:if(void 0===r[u])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);r=r[u]}if(void 0!==v){if(void 0===r[v])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,r);r=r[v]}}var y=r[f];if(void 0!==y){var C=this.Versioning.None;this.targetObject=r,void 0!==r.needsUpdate?C=this.Versioning.NeedsUpdate:void 0!==r.matrixWorldNeedsUpdate&&(C=this.Versioning.MatrixWorldNeedsUpdate);var S=this.BindingType.Direct;if(void 0!==h){if("morphTargetInfluences"===f){if(!r.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!r.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==r.morphTargetDictionary[h]&&(h=r.morphTargetDictionary[h])}S=this.BindingType.ArrayElement,this.resolvedProperty=y,this.propertyIndex=h}else void 0!==y.fromArray&&void 0!==y.toArray?(S=this.BindingType.HasFromToArray,this.resolvedProperty=y):Array.isArray(y)?(S=this.BindingType.EntireArray,this.resolvedProperty=y):this.propertyName=f;this.getValue=this.GetterByBindingType[S],this.setValue=this.SetterByBindingTypeAndVersioning[S][C]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+o.nodeName+"."+f+" but it wasn't found.",r)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(r,o,u){return r&&r.isAnimationObjectGroup?new a.Composite(r,o,u):new a(r,o,u)}},{key:"sanitizeNodeName",value:function(r){return r.replace(/\s/g,"_").replace(dq,"")}},{key:"parseTrackName",value:function(r){var o=mq.exec(r);if(null===o)throw new Error("PropertyBinding: Cannot parse trackName: "+r);var u={nodeName:o[2],objectName:o[3],objectIndex:o[4],propertyName:o[5],propertyIndex:o[6]},f=u.nodeName&&u.nodeName.lastIndexOf(".");if(void 0!==f&&-1!==f){var h=u.nodeName.substring(f+1);-1!==yq.indexOf(h)&&(u.nodeName=u.nodeName.substring(0,f),u.objectName=h)}if(null===u.propertyName||0===u.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+r);return u}},{key:"findNode",value:function(r,o){if(void 0===o||""===o||"."===o||-1===o||o===r.name||o===r.uuid)return r;if(r.skeleton){var u=r.skeleton.getBoneByName(o);if(void 0!==u)return u}if(r.children){var h=function v(g){for(var y=0;y<g.length;y++){var _=g[y];if(_.name===o||_.uuid===o)return _;var C=v(_.children);if(C)return C}return null}(r.children);if(h)return h}return null}}]),a}();return n.Composite=_q,n}();Pr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Pr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Pr.prototype.GetterByBindingType=[Pr.prototype._getValue_direct,Pr.prototype._getValue_array,Pr.prototype._getValue_arrayElement,Pr.prototype._getValue_toArray],Pr.prototype.SetterByBindingTypeAndVersioning=[[Pr.prototype._setValue_direct,Pr.prototype._setValue_direct_setNeedsUpdate,Pr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Pr.prototype._setValue_array,Pr.prototype._setValue_array_setNeedsUpdate,Pr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Pr.prototype._setValue_arrayElement,Pr.prototype._setValue_arrayElement_setNeedsUpdate,Pr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Pr.prototype._setValue_fromArray,Pr.prototype._setValue_fromArray_setNeedsUpdate,Pr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Cq=function(){function n(a,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;G(this,n),this._mixer=a,this._clip=t,this._localRoot=r,this.blendMode=o;for(var u=t.tracks,f=u.length,h=new Array(f),v={endingStart:Ph,endingEnd:Ph},g=0;g!==f;++g){var y=u[g].createInterpolant(null);h[g]=y,y.settings=v}this._interpolantSettings=v,this._interpolants=h,this._propertyBindings=new Array(f),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return j(n,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(t){return this._startTime=t,this}},{key:"setLoop",value:function(t,r){return this.loop=t,this.repetitions=r,this}},{key:"setEffectiveWeight",value:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(t){return this._scheduleFading(t,0,1)}},{key:"fadeOut",value:function(t){return this._scheduleFading(t,1,0)}},{key:"crossFadeFrom",value:function(t,r,o){if(t.fadeOut(r),this.fadeIn(r),o){var u=this._clip.duration,f=t._clip.duration,v=u/f;t.warp(1,f/u,r),this.warp(v,1,r)}return this}},{key:"crossFadeTo",value:function(t,r,o){return t.crossFadeFrom(this,r,o)}},{key:"stopFading",value:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"setEffectiveTimeScale",value:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}},{key:"syncWith",value:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}},{key:"halt",value:function(t){return this.warp(this._effectiveTimeScale,0,t)}},{key:"warp",value:function(t,r,o){var u=this._mixer,f=u.time,h=this.timeScale,v=this._timeScaleInterpolant;null===v&&(v=u._lendControlInterpolant(),this._timeScaleInterpolant=v);var g=v.parameterPositions,y=v.sampleValues;return g[0]=f,g[1]=f+o,y[0]=t/h,y[1]=r/h,this}},{key:"stopWarping",value:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(t,r,o,u){if(this.enabled){var f=this._startTime;if(null!==f){var h=(t-f)*o;h<0||0===o?r=0:(this._startTime=null,r=o*h)}r*=this._updateTimeScale(t);var v=this._updateTime(r),g=this._updateWeight(t);if(g>0){var y=this._interpolants,_=this._propertyBindings;if(2501===this.blendMode)for(var C=0,S=y.length;C!==S;++C)y[C].evaluate(v),_[C].accumulateAdditive(g);else for(var R=0,b=y.length;R!==b;++R)y[R].evaluate(v),_[R].accumulate(u,g)}}else this._updateWeight(t)}},{key:"_updateWeight",value:function(t){var r=0;if(this.enabled){r=this.weight;var o=this._weightInterpolant;if(null!==o){var u=o.evaluate(t)[0];r*=u,t>o.parameterPositions[1]&&(this.stopFading(),0===u&&(this.enabled=!1))}}return this._effectiveWeight=r,r}},{key:"_updateTimeScale",value:function(t){var r=0;if(!this.paused){r=this.timeScale;var o=this._timeScaleInterpolant;null!==o&&(r*=o.evaluate(t)[0],t>o.parameterPositions[1]&&(this.stopWarping(),0===r?this.paused=!0:this.timeScale=r))}return this._effectiveTimeScale=r,r}},{key:"_updateTime",value:function(t){var r=this._clip.duration,o=this.loop,u=this.time+t,f=this._loopCount,h=2202===o;if(0===t)return-1===f?u:h&&1==(1&f)?r-u:u;if(2200===o){-1===f&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(u>=r)u=r;else{if(!(u<0)){this.time=u;break e}u=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=u,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===f&&(t>=0?(f=0,this._setEndings(!0,0===this.repetitions,h)):this._setEndings(0===this.repetitions,!0,h)),u>=r||u<0){var v=Math.floor(u/r);u-=r*v,f+=Math.abs(v);var g=this.repetitions-f;if(g<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=u=t>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===g){var y=t<0;this._setEndings(y,!y,h)}else this._setEndings(!1,!1,h);this._loopCount=f,this.time=u,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:v})}}else this.time=u;if(h&&1==(1&f))return r-u}return u}},{key:"_setEndings",value:function(t,r,o){var u=this._interpolantSettings;o?(u.endingStart=Ih,u.endingEnd=Ih):(u.endingStart=t?this.zeroSlopeAtStart?Ih:Ph:2402,u.endingEnd=r?this.zeroSlopeAtEnd?Ih:Ph:2402)}},{key:"_scheduleFading",value:function(t,r,o){var u=this._mixer,f=u.time,h=this._weightInterpolant;null===h&&(h=u._lendControlInterpolant(),this._weightInterpolant=h);var v=h.parameterPositions,g=h.sampleValues;return v[0]=f,g[0]=r,v[1]=f+t,g[1]=o,this}}]),n}(),wq=new Float32Array(1),EN=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this))._root=r,o._initMemoryManager(),o._accuIndex=0,o.time=0,o.timeScale=1,o}return j(t,[{key:"_bindAction",value:function(o,u){var f=o._localRoot||this._root,h=o._clip.tracks,v=h.length,g=o._propertyBindings,y=o._interpolants,_=f.uuid,C=this._bindingsByRootAndName,S=C[_];void 0===S&&(C[_]=S={});for(var R=0;R!==v;++R){var b=h[R],E=b.name,T=S[E];if(void 0!==T)++T.referenceCount,g[R]=T;else{if(void 0!==(T=g[R])){null===T._cacheIndex&&(++T.referenceCount,this._addInactiveBinding(T,_,E));continue}++(T=new cq(Pr.create(f,E,u&&u._propertyBindings[R].binding.parsedPath),b.ValueTypeName,b.getValueSize())).referenceCount,this._addInactiveBinding(T,_,E),g[R]=T}y[R].resultBuffer=T.buffer}}},{key:"_activateAction",value:function(o){if(!this._isActiveAction(o)){if(null===o._cacheIndex){var u=(o._localRoot||this._root).uuid,f=o._clip.uuid,h=this._actionsByClip[f];this._bindAction(o,h&&h.knownActions[0]),this._addInactiveAction(o,f,u)}for(var v=o._propertyBindings,g=0,y=v.length;g!==y;++g){var _=v[g];0==_.useCount++&&(this._lendBinding(_),_.saveOriginalState())}this._lendAction(o)}}},{key:"_deactivateAction",value:function(o){if(this._isActiveAction(o)){for(var u=o._propertyBindings,f=0,h=u.length;f!==h;++f){var v=u[f];0==--v.useCount&&(v.restoreOriginalState(),this._takeBackBinding(v))}this._takeBackAction(o)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var o=this;this.stats={actions:{get total(){return o._actions.length},get inUse(){return o._nActiveActions}},bindings:{get total(){return o._bindings.length},get inUse(){return o._nActiveBindings}},controlInterpolants:{get total(){return o._controlInterpolants.length},get inUse(){return o._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(o){var u=o._cacheIndex;return null!==u&&u<this._nActiveActions}},{key:"_addInactiveAction",value:function(o,u,f){var h=this._actions,v=this._actionsByClip,g=v[u];if(void 0===g)g={knownActions:[o],actionByRoot:{}},o._byClipCacheIndex=0,v[u]=g;else{var y=g.knownActions;o._byClipCacheIndex=y.length,y.push(o)}o._cacheIndex=h.length,h.push(o),g.actionByRoot[f]=o}},{key:"_removeInactiveAction",value:function(o){var u=this._actions,f=u[u.length-1],h=o._cacheIndex;f._cacheIndex=h,u[h]=f,u.pop(),o._cacheIndex=null;var v=o._clip.uuid,g=this._actionsByClip,y=g[v],_=y.knownActions,C=_[_.length-1],S=o._byClipCacheIndex;C._byClipCacheIndex=S,_[S]=C,_.pop(),o._byClipCacheIndex=null,delete y.actionByRoot[(o._localRoot||this._root).uuid],0===_.length&&delete g[v],this._removeInactiveBindingsForAction(o)}},{key:"_removeInactiveBindingsForAction",value:function(o){for(var u=o._propertyBindings,f=0,h=u.length;f!==h;++f){var v=u[f];0==--v.referenceCount&&this._removeInactiveBinding(v)}}},{key:"_lendAction",value:function(o){var u=this._actions,f=o._cacheIndex,h=this._nActiveActions++,v=u[h];o._cacheIndex=h,u[h]=o,v._cacheIndex=f,u[f]=v}},{key:"_takeBackAction",value:function(o){var u=this._actions,f=o._cacheIndex,h=--this._nActiveActions,v=u[h];o._cacheIndex=h,u[h]=o,v._cacheIndex=f,u[f]=v}},{key:"_addInactiveBinding",value:function(o,u,f){var h=this._bindingsByRootAndName,v=this._bindings,g=h[u];void 0===g&&(h[u]=g={}),g[f]=o,o._cacheIndex=v.length,v.push(o)}},{key:"_removeInactiveBinding",value:function(o){var u=this._bindings,f=o.binding,h=f.rootNode.uuid,v=f.path,g=this._bindingsByRootAndName,y=g[h],_=u[u.length-1],C=o._cacheIndex;_._cacheIndex=C,u[C]=_,u.pop(),delete y[v],0===Object.keys(y).length&&delete g[h]}},{key:"_lendBinding",value:function(o){var u=this._bindings,f=o._cacheIndex,h=this._nActiveBindings++,v=u[h];o._cacheIndex=h,u[h]=o,v._cacheIndex=f,u[f]=v}},{key:"_takeBackBinding",value:function(o){var u=this._bindings,f=o._cacheIndex,h=--this._nActiveBindings,v=u[h];o._cacheIndex=h,u[h]=o,v._cacheIndex=f,u[f]=v}},{key:"_lendControlInterpolant",value:function(){var o=this._controlInterpolants,u=this._nActiveControlInterpolants++,f=o[u];return void 0===f&&((f=new gN(new Float32Array(2),new Float32Array(2),1,wq)).__cacheIndex=u,o[u]=f),f}},{key:"_takeBackControlInterpolant",value:function(o){var u=this._controlInterpolants,f=o.__cacheIndex,h=--this._nActiveControlInterpolants,v=u[h];o.__cacheIndex=h,u[h]=o,v.__cacheIndex=f,u[f]=v}},{key:"clipAction",value:function(o,u,f){var h=u||this._root,v=h.uuid,g="string"==typeof o?ED.findByName(h,o):o,y=null!==g?g.uuid:o,_=this._actionsByClip[y],C=null;if(void 0===f&&(f=null!==g?g.blendMode:2500),void 0!==_){var S=_.actionByRoot[v];if(void 0!==S&&S.blendMode===f)return S;C=_.knownActions[0],null===g&&(g=C._clip)}if(null===g)return null;var R=new Cq(this,g,u,f);return this._bindAction(R,C),this._addInactiveAction(R,y,v),R}},{key:"existingAction",value:function(o,u){var f=u||this._root,h=f.uuid,v="string"==typeof o?ED.findByName(f,o):o,y=this._actionsByClip[v?v.uuid:o];return void 0!==y&&y.actionByRoot[h]||null}},{key:"stopAllAction",value:function(){for(var o=this._actions,f=this._nActiveActions-1;f>=0;--f)o[f].stop();return this}},{key:"update",value:function(o){for(var u=this._actions,f=this._nActiveActions,h=this.time+=o*=this.timeScale,v=Math.sign(o),g=this._accuIndex^=1,y=0;y!==f;++y)u[y]._update(h,o,v,g);for(var C=this._bindings,S=this._nActiveBindings,R=0;R!==S;++R)C[R].apply(g);return this}},{key:"setTime",value:function(o){this.time=0;for(var u=0;u<this._actions.length;u++)this._actions[u].time=0;return this.update(o)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(o){var u=this._actions,f=o.uuid,h=this._actionsByClip,v=h[f];if(void 0!==v){for(var g=v.knownActions,y=0,_=g.length;y!==_;++y){var C=g[y];this._deactivateAction(C);var S=C._cacheIndex,R=u[u.length-1];C._cacheIndex=null,C._byClipCacheIndex=null,R._cacheIndex=S,u[S]=R,u.pop(),this._removeInactiveBindingsForAction(C)}delete h[f]}}},{key:"uncacheRoot",value:function(o){var u=o.uuid,f=this._actionsByClip;for(var h in f){var g=f[h].actionByRoot[u];void 0!==g&&(this._deactivateAction(g),this._removeInactiveAction(g))}var _=this._bindingsByRootAndName[u];if(void 0!==_)for(var C in _){var S=_[C];S.restoreOriginalState(),this._removeInactiveBinding(S)}}},{key:"uncacheAction",value:function(o,u){var f=this.existingAction(o,u);null!==f&&(this._deactivateAction(f),this._removeInactiveAction(f))}}]),t}(Ac),bN=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return G(this,n),this.radius=a,this.phi=t,this.theta=r,this}return j(n,[{key:"set",value:function(t,r,o){return this.radius=t,this.phi=r,this.theta=o,this}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}},{key:"makeSafe",value:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}},{key:"setFromVector3",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:"setFromCartesianCoords",value:function(t,r,o){return this.radius=Math.sqrt(t*t+r*r+o*o),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,o),this.phi=Math.acos(li(r/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}();"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:hT}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=hT);var By=function(n){pe(t,n);var a=ve(t);function t(r){var o;return G(this,t),(o=a.call(this,r)).dracoLoader=null,o.ktx2Loader=null,o.meshoptDecoder=null,o.pluginCallbacks=[],o.register(function(u){return new Oq(u)}),o.register(function(u){return new Gq(u)}),o.register(function(u){return new Bq(u)}),o.register(function(u){return new Iq(u)}),o.register(function(u){return new Lq(u)}),o.register(function(u){return new Fq(u)}),o.register(function(u){return new Nq(u)}),o.register(function(u){return new Mq(u)}),o.register(function(u){return new kq(u)}),o.register(function(u){return new Pq(u)}),o.register(function(u){return new Tq(u)}),o.register(function(u){return new Hq(u)}),o.register(function(u){return new Vq(u)}),o}return j(t,[{key:"load",value:function(o,u,f,h){var g,v=this;g=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Sf.extractUrlBase(o),this.manager.itemStart(o);var y=function(S){h?h(S):console.error(S),v.manager.itemError(o),v.manager.itemEnd(o)},_=new yN(this.manager);_.setPath(this.path),_.setResponseType("arraybuffer"),_.setRequestHeader(this.requestHeader),_.setWithCredentials(this.withCredentials),_.load(o,function(C){try{v.parse(C,g,function(S){u(S),v.manager.itemEnd(o)},y)}catch(S){y(S)}},f,y)}},{key:"setDRACOLoader",value:function(o){return this.dracoLoader=o,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(o){return this.ktx2Loader=o,this}},{key:"setMeshoptDecoder",value:function(o){return this.meshoptDecoder=o,this}},{key:"register",value:function(o){return-1===this.pluginCallbacks.indexOf(o)&&this.pluginCallbacks.push(o),this}},{key:"unregister",value:function(o){return-1!==this.pluginCallbacks.indexOf(o)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(o),1),this}},{key:"parse",value:function(o,u,f,h){var v,g={},y={};if("string"==typeof o)v=JSON.parse(o);else if(o instanceof ArrayBuffer)if(Sf.decodeText(new Uint8Array(o,0,4))===xN){try{g[Zn.KHR_BINARY_GLTF]=new Wq(o)}catch(D){return void(h&&h(D))}v=JSON.parse(g[Zn.KHR_BINARY_GLTF].content)}else v=JSON.parse(Sf.decodeText(new Uint8Array(o)));else v=o;if(void 0===v.asset||v.asset.version[0]<2)h&&h(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var C=new tY(v,{path:u||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});C.fileLoader.setRequestHeader(this.requestHeader);for(var S=0;S<this.pluginCallbacks.length;S++){var R=this.pluginCallbacks[S](C);y[R.name]=R,g[R.name]=!0}if(v.extensionsUsed)for(var b=0;b<v.extensionsUsed.length;++b){var E=v.extensionsUsed[b],T=v.extensionsRequired||[];switch(E){case Zn.KHR_MATERIALS_UNLIT:g[E]=new Dq;break;case Zn.KHR_DRACO_MESH_COMPRESSION:g[E]=new Uq(v,this.dracoLoader);break;case Zn.KHR_TEXTURE_TRANSFORM:g[E]=new zq;break;case Zn.KHR_MESH_QUANTIZATION:g[E]=new jq;break;default:T.indexOf(E)>=0&&void 0===y[E]&&console.warn('THREE.GLTFLoader: Unknown extension "'+E+'".')}}C.setExtensions(g),C.setPlugins(y),C.parse(f,h)}}},{key:"parseAsync",value:function(o,u){var f=this;return new Promise(function(h,v){f.parse(o,u,h,v)})}}]),t}(Ny);function Aq(){var n={};return{get:function(t){return n[t]},add:function(t,r){n[t]=r},remove:function(t){delete n[t]},removeAll:function(){n={}}}}var Zn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},Tq=function(){function n(a){G(this,n),this.parser=a,this.name=Zn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return j(n,[{key:"_markDefs",value:function(){for(var t=this.parser,r=this.parser.json.nodes||[],o=0,u=r.length;o<u;o++){var f=r[o];f.extensions&&f.extensions[this.name]&&void 0!==f.extensions[this.name].light&&t._addNodeRef(this.cache,f.extensions[this.name].light)}}},{key:"_loadLight",value:function(t){var r=this.parser,o="light:"+t,u=r.cache.get(o);if(u)return u;var y,f=r.json,g=((f.extensions&&f.extensions[this.name]||{}).lights||[])[t],_=new un(16777215);void 0!==g.color&&_.fromArray(g.color);var C=void 0!==g.range?g.range:0;switch(g.type){case"directional":(y=new wf(_)).target.position.set(0,0,-1),y.add(y.target);break;case"point":(y=new sq(_)).distance=C;break;case"spot":(y=new oq(_)).distance=C,g.spot=g.spot||{},g.spot.innerConeAngle=void 0!==g.spot.innerConeAngle?g.spot.innerConeAngle:0,g.spot.outerConeAngle=void 0!==g.spot.outerConeAngle?g.spot.outerConeAngle:Math.PI/4,y.angle=g.spot.outerConeAngle,y.penumbra=1-g.spot.innerConeAngle/g.spot.outerConeAngle,y.target.position.set(0,0,-1),y.add(y.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+g.type)}return y.position.set(0,0,0),y.decay=2,Lc(y,g),void 0!==g.intensity&&(y.intensity=g.intensity),y.name=r.createUniqueName(g.name||"light_"+t),u=Promise.resolve(y),r.cache.add(o,u),u}},{key:"getDependency",value:function(t,r){if("light"===t)return this._loadLight(r)}},{key:"createNodeAttachment",value:function(t){var r=this,o=this.parser,f=o.json.nodes[t],v=(f.extensions&&f.extensions[this.name]||{}).light;return void 0===v?null:this._loadLight(v).then(function(g){return o._getNodeRef(r.cache,v,g)})}}]),n}(),Dq=function(){function n(){G(this,n),this.name=Zn.KHR_MATERIALS_UNLIT}return j(n,[{key:"getMaterialType",value:function(){return dl}},{key:"extendParams",value:function(t,r,o){var u=[];t.color=new un(1,1,1),t.opacity=1;var f=r.pbrMetallicRoughness;if(f){if(Array.isArray(f.baseColorFactor)){var h=f.baseColorFactor;t.color.fromArray(h),t.opacity=h[3]}void 0!==f.baseColorTexture&&u.push(o.assignTexture(t,"map",f.baseColorTexture,Yn))}return Promise.all(u)}}]),n}(),Mq=function(){function n(a){G(this,n),this.parser=a,this.name=Zn.KHR_MATERIALS_EMISSIVE_STRENGTH}return j(n,[{key:"extendMaterialParams",value:function(t,r){var u=this.parser.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=u.extensions[this.name].emissiveStrength;return void 0!==f&&(r.emissiveIntensity=f),Promise.resolve()}}]),n}(),Oq=function(){function n(a){G(this,n),this.parser=a,this.name=Zn.KHR_MATERIALS_CLEARCOAT}return j(n,[{key:"getMaterialType",value:function(t){var o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?yf:null}},{key:"extendMaterialParams",value:function(t,r){var o=this.parser,u=o.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],h=u.extensions[this.name];if(void 0!==h.clearcoatFactor&&(r.clearcoat=h.clearcoatFactor),void 0!==h.clearcoatTexture&&f.push(o.assignTexture(r,"clearcoatMap",h.clearcoatTexture)),void 0!==h.clearcoatRoughnessFactor&&(r.clearcoatRoughness=h.clearcoatRoughnessFactor),void 0!==h.clearcoatRoughnessTexture&&f.push(o.assignTexture(r,"clearcoatRoughnessMap",h.clearcoatRoughnessTexture)),void 0!==h.clearcoatNormalTexture&&(f.push(o.assignTexture(r,"clearcoatNormalMap",h.clearcoatNormalTexture)),void 0!==h.clearcoatNormalTexture.scale)){var v=h.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new Ke(v,v)}return Promise.all(f)}}]),n}(),Pq=function(){function n(a){G(this,n),this.parser=a,this.name=Zn.KHR_MATERIALS_IRIDESCENCE}return j(n,[{key:"getMaterialType",value:function(t){var o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?yf:null}},{key:"extendMaterialParams",value:function(t,r){var o=this.parser,u=o.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],h=u.extensions[this.name];return void 0!==h.iridescenceFactor&&(r.iridescence=h.iridescenceFactor),void 0!==h.iridescenceTexture&&f.push(o.assignTexture(r,"iridescenceMap",h.iridescenceTexture)),void 0!==h.iridescenceIor&&(r.iridescenceIOR=h.iridescenceIor),void 0===r.iridescenceThicknessRange&&(r.iridescenceThicknessRange=[100,400]),void 0!==h.iridescenceThicknessMinimum&&(r.iridescenceThicknessRange[0]=h.iridescenceThicknessMinimum),void 0!==h.iridescenceThicknessMaximum&&(r.iridescenceThicknessRange[1]=h.iridescenceThicknessMaximum),void 0!==h.iridescenceThicknessTexture&&f.push(o.assignTexture(r,"iridescenceThicknessMap",h.iridescenceThicknessTexture)),Promise.all(f)}}]),n}(),Iq=function(){function n(a){G(this,n),this.parser=a,this.name=Zn.KHR_MATERIALS_SHEEN}return j(n,[{key:"getMaterialType",value:function(t){var o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?yf:null}},{key:"extendMaterialParams",value:function(t,r){var o=this.parser,u=o.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[];r.sheenColor=new un(0,0,0),r.sheenRoughness=0,r.sheen=1;var h=u.extensions[this.name];return void 0!==h.sheenColorFactor&&r.sheenColor.fromArray(h.sheenColorFactor),void 0!==h.sheenRoughnessFactor&&(r.sheenRoughness=h.sheenRoughnessFactor),void 0!==h.sheenColorTexture&&f.push(o.assignTexture(r,"sheenColorMap",h.sheenColorTexture,Yn)),void 0!==h.sheenRoughnessTexture&&f.push(o.assignTexture(r,"sheenRoughnessMap",h.sheenRoughnessTexture)),Promise.all(f)}}]),n}(),Lq=function(){function n(a){G(this,n),this.parser=a,this.name=Zn.KHR_MATERIALS_TRANSMISSION}return j(n,[{key:"getMaterialType",value:function(t){var o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?yf:null}},{key:"extendMaterialParams",value:function(t,r){var o=this.parser,u=o.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],h=u.extensions[this.name];return void 0!==h.transmissionFactor&&(r.transmission=h.transmissionFactor),void 0!==h.transmissionTexture&&f.push(o.assignTexture(r,"transmissionMap",h.transmissionTexture)),Promise.all(f)}}]),n}(),Fq=function(){function n(a){G(this,n),this.parser=a,this.name=Zn.KHR_MATERIALS_VOLUME}return j(n,[{key:"getMaterialType",value:function(t){var o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?yf:null}},{key:"extendMaterialParams",value:function(t,r){var o=this.parser,u=o.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],h=u.extensions[this.name];r.thickness=void 0!==h.thicknessFactor?h.thicknessFactor:0,void 0!==h.thicknessTexture&&f.push(o.assignTexture(r,"thicknessMap",h.thicknessTexture)),r.attenuationDistance=h.attenuationDistance||1/0;var v=h.attenuationColor||[1,1,1];return r.attenuationColor=new un(v[0],v[1],v[2]),Promise.all(f)}}]),n}(),Nq=function(){function n(a){G(this,n),this.parser=a,this.name=Zn.KHR_MATERIALS_IOR}return j(n,[{key:"getMaterialType",value:function(t){var o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?yf:null}},{key:"extendMaterialParams",value:function(t,r){var u=this.parser.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=u.extensions[this.name];return r.ior=void 0!==f.ior?f.ior:1.5,Promise.resolve()}}]),n}(),kq=function(){function n(a){G(this,n),this.parser=a,this.name=Zn.KHR_MATERIALS_SPECULAR}return j(n,[{key:"getMaterialType",value:function(t){var o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?yf:null}},{key:"extendMaterialParams",value:function(t,r){var o=this.parser,u=o.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();var f=[],h=u.extensions[this.name];r.specularIntensity=void 0!==h.specularFactor?h.specularFactor:1,void 0!==h.specularTexture&&f.push(o.assignTexture(r,"specularIntensityMap",h.specularTexture));var v=h.specularColorFactor||[1,1,1];return r.specularColor=new un(v[0],v[1],v[2]),void 0!==h.specularColorTexture&&f.push(o.assignTexture(r,"specularColorMap",h.specularColorTexture,Yn)),Promise.all(f)}}]),n}(),Gq=function(){function n(a){G(this,n),this.parser=a,this.name=Zn.KHR_TEXTURE_BASISU}return j(n,[{key:"loadTexture",value:function(t){var r=this.parser,o=r.json,u=o.textures[t];if(!u.extensions||!u.extensions[this.name])return null;var f=u.extensions[this.name],h=r.options.ktx2Loader;if(!h){if(o.extensionsRequired&&o.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(t,f.source,h)}}]),n}(),Bq=function(){function n(a){G(this,n),this.parser=a,this.name=Zn.EXT_TEXTURE_WEBP,this.isSupported=null}return j(n,[{key:"loadTexture",value:function(t){var r=this.name,o=this.parser,u=o.json,f=u.textures[t];if(!f.extensions||!f.extensions[r])return null;var h=f.extensions[r],v=u.images[h.source],g=o.textureLoader;if(v.uri){var y=o.options.manager.getHandler(v.uri);null!==y&&(g=y)}return this.detectSupport().then(function(_){if(_)return o.loadTextureImage(t,h.source,g);if(u.extensionsRequired&&u.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return o.loadTexture(t)})}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise(function(t){var r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(1===r.height)}})),this.isSupported}}]),n}(),Hq=function(){function n(a){G(this,n),this.name=Zn.EXT_MESHOPT_COMPRESSION,this.parser=a}return j(n,[{key:"loadBufferView",value:function(t){var r=this.parser.json,o=r.bufferViews[t];if(o.extensions&&o.extensions[this.name]){var u=o.extensions[this.name],f=this.parser.getDependency("buffer",u.buffer),h=this.parser.options.meshoptDecoder;if(!h||!h.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return f.then(function(v){var _=u.count,C=u.byteStride,S=new Uint8Array(v,u.byteOffset||0,u.byteLength||0);return h.decodeGltfBufferAsync?h.decodeGltfBufferAsync(_,C,S,u.mode,u.filter).then(function(R){return R.buffer}):h.ready.then(function(){var R=new ArrayBuffer(_*C);return h.decodeGltfBuffer(new Uint8Array(R),_,C,S,u.mode,u.filter),R})})}return null}}]),n}(),Vq=function(){function n(a){G(this,n),this.name=Zn.EXT_MESH_GPU_INSTANCING,this.parser=a}return j(n,[{key:"createNodeMesh",value:function(t){var r=this,o=this.parser.json,u=o.nodes[t];if(!u.extensions||!u.extensions[this.name]||void 0===u.mesh)return null;var v,h=Ft(o.meshes[u.mesh].primitives);try{for(h.s();!(v=h.n()).done;){var g=v.value;if(g.mode!==Qa.TRIANGLES&&g.mode!==Qa.TRIANGLE_STRIP&&g.mode!==Qa.TRIANGLE_FAN&&void 0!==g.mode)return null}}catch(E){h.e(E)}finally{h.f()}var _=u.extensions[this.name].attributes,C=[],S={},R=function(T){C.push(r.parser.getDependency("accessor",_[T]).then(function(D){return S[T]=D,S[T]}))};for(var b in _)R(b);return C.length<1?null:(C.push(this.parser.createNodeMesh(t)),Promise.all(C).then(function(E){var H,T=E.pop(),M=E[0].count,O=[],L=Ft(T.isGroup?T.children:[T]);try{for(L.s();!(H=L.n()).done;){for(var z=H.value,P=new wn,W=new J,X=new eo,ne=new J(1,1,1),le=new $9(z.geometry,z.material,M),ue=0;ue<M;ue++)S.TRANSLATION&&W.fromBufferAttribute(S.TRANSLATION,ue),S.ROTATION&&X.fromBufferAttribute(S.ROTATION,ue),S.SCALE&&ne.fromBufferAttribute(S.SCALE,ue),le.setMatrixAt(ue,P.compose(W,X,ne));for(var k in S)"TRANSLATION"!==k&&"ROTATION"!==k&&"SCALE"!==k&&z.geometry.setAttribute(k,S[k]);go.prototype.copy.call(le,z),le.frustumCulled=!1,r.parser.assignFinalMaterial(le),O.push(le)}}catch(ee){L.e(ee)}finally{L.f()}return T.isGroup?(T.clear(),T.add.apply(T,O),T):O[0]}))}}]),n}(),xN="glTF",Wq=function n(a){G(this,n),this.name=Zn.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(a,0,12);if(this.header={magic:Sf.decodeText(new Uint8Array(a.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==xN)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,o=new DataView(a,12),u=0;u<r;){var f=o.getUint32(u,!0),h=o.getUint32(u+=4,!0);if(u+=4,1313821514===h){var v=new Uint8Array(a,12+u,f);this.content=Sf.decodeText(v)}else if(5130562===h){var g=12+u;this.body=a.slice(g,g+f)}u+=f}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")},Uq=function(){function n(a,t){if(G(this,n),!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Zn.KHR_DRACO_MESH_COMPRESSION,this.json=a,this.dracoLoader=t,this.dracoLoader.preload()}return j(n,[{key:"decodePrimitive",value:function(t,r){var o=this.json,u=this.dracoLoader,f=t.extensions[this.name].bufferView,h=t.extensions[this.name].attributes,v={},g={},y={};for(var _ in h){var C=MD[_]||_.toLowerCase();v[C]=h[_]}for(var S in t.attributes){var R=MD[S]||S.toLowerCase();if(void 0!==h[S]){var b=o.accessors[t.attributes[S]];y[R]=uv[b.componentType].name,g[R]=!0===b.normalized}}return r.getDependency("bufferView",f).then(function(T){return new Promise(function(D){u.decodeDracoFile(T,function(M){for(var O in M.attributes){var H=g[O];void 0!==H&&(M.attributes[O].normalized=H)}D(M)},v,y)})})}}]),n}(),zq=function(){function n(){G(this,n),this.name=Zn.KHR_TEXTURE_TRANSFORM}return j(n,[{key:"extendTexture",value:function(t,r){return void 0!==r.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===r.offset&&void 0===r.rotation&&void 0===r.scale||(t=t.clone(),void 0!==r.offset&&t.offset.fromArray(r.offset),void 0!==r.rotation&&(t.rotation=r.rotation),void 0!==r.scale&&t.repeat.fromArray(r.scale),t.needsUpdate=!0),t}}]),n}(),jq=function n(){G(this,n),this.name=Zn.KHR_MESH_QUANTIZATION},AN=function(n){pe(t,n);var a=ve(t);function t(r,o,u,f){return G(this,t),a.call(this,r,o,u,f)}return j(t,[{key:"copySampleValue_",value:function(o){for(var u=this.resultBuffer,f=this.sampleValues,h=this.valueSize,v=o*h*3+h,g=0;g!==h;g++)u[g]=f[v+g];return u}},{key:"interpolate_",value:function(o,u,f,h){for(var v=this.resultBuffer,g=this.sampleValues,y=this.valueSize,_=2*y,C=3*y,S=h-u,R=(f-u)/S,b=R*R,E=b*R,T=o*C,D=T-C,M=-2*E+3*b,O=E-b,L=1-M,H=O-b+R,z=0;z!==y;z++)v[z]=L*g[D+z+y]+H*(g[D+z+_]*S)+M*g[T+z+y]+O*(g[T+z]*S);return v}}]),t}(Iy),qq=new eo,Yq=function(n){pe(t,n);var a=ve(t);function t(){return G(this,t),a.apply(this,arguments)}return j(t,[{key:"interpolate_",value:function(o,u,f,h){var v=ye(ze(t.prototype),"interpolate_",this).call(this,o,u,f,h);return qq.fromArray(v).normalize().toArray(v),v}}]),t}(AN),Qa={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},uv={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},TN={9728:Ti,9729:Po,9984:1004,9985:1007,9986:1005,9987:xc},DN={33071:ya,33648:1002,10497:ef},DD={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},MD={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ic={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Kq={CUBICSPLINE:void 0,LINEAR:Oh,STEP:dy};function $q(n){return void 0===n.DefaultMaterial&&(n.DefaultMaterial=new _D({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial}function Vy(n,a,t){for(var r in t.extensions)void 0===n[r]&&(a.userData.gltfExtensions=a.userData.gltfExtensions||{},a.userData.gltfExtensions[r]=t.extensions[r])}function Lc(n,a){void 0!==a.extras&&("object"==typeof a.extras?Object.assign(n.userData,a.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+a.extras))}function Jq(n,a){if(n.updateMorphTargets(),void 0!==a.weights)for(var t=0,r=a.weights.length;t<r;t++)n.morphTargetInfluences[t]=a.weights[t];if(a.extras&&Array.isArray(a.extras.targetNames)){var o=a.extras.targetNames;if(n.morphTargetInfluences.length===o.length){n.morphTargetDictionary={};for(var u=0,f=o.length;u<f;u++)n.morphTargetDictionary[o[u]]=u}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Zq(n){var a=n.extensions&&n.extensions[Zn.KHR_DRACO_MESH_COMPRESSION];return a?"draco:"+a.bufferView+":"+a.indices+":"+MN(a.attributes):n.indices+":"+MN(n.attributes)+":"+n.mode}function MN(n){for(var a="",t=Object.keys(n).sort(),r=0,o=t.length;r<o;r++)a+=t[r]+":"+n[t[r]]+";";return a}function PD(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var eY=new wn,tY=function(){function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};G(this,n),this.json=a,this.extensions={},this.plugins={},this.options=t,this.cache=new Aq,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var r=!1,o=!1,u=-1;"undefined"!=typeof navigator&&(r=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),u=(o=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader="undefined"==typeof createImageBitmap||r||o&&u<98?new rq(this.options.manager):new lq(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new yN(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return j(n,[{key:"setExtensions",value:function(t){this.extensions=t}},{key:"setPlugins",value:function(t){this.plugins=t}},{key:"parse",value:function(t,r){var o=this,u=this.json,f=this.extensions;this.cache.removeAll(),this._invokeAll(function(h){return h._markDefs&&h._markDefs()}),Promise.all(this._invokeAll(function(h){return h.beforeRoot&&h.beforeRoot()})).then(function(){return Promise.all([o.getDependencies("scene"),o.getDependencies("animation"),o.getDependencies("camera")])}).then(function(h){var v={scene:h[0][u.scene||0],scenes:h[0],animations:h[1],cameras:h[2],asset:u.asset,parser:o,userData:{}};Vy(f,v,u),Lc(v,u),Promise.all(o._invokeAll(function(g){return g.afterRoot&&g.afterRoot(v)})).then(function(){t(v)})}).catch(r)}},{key:"_markDefs",value:function(){for(var t=this.json.nodes||[],r=this.json.skins||[],o=this.json.meshes||[],u=0,f=r.length;u<f;u++)for(var h=r[u].joints,v=0,g=h.length;v<g;v++)t[h[v]].isBone=!0;for(var y=0,_=t.length;y<_;y++){var C=t[y];void 0!==C.mesh&&(this._addNodeRef(this.meshCache,C.mesh),void 0!==C.skin&&(o[C.mesh].isSkinnedMesh=!0)),void 0!==C.camera&&this._addNodeRef(this.cameraCache,C.camera)}}},{key:"_addNodeRef",value:function(t,r){void 0!==r&&(void 0===t.refs[r]&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}},{key:"_getNodeRef",value:function(t,r,o){var u=this;if(t.refs[r]<=1)return o;var f=o.clone();return function v(g,y){var _=u.associations.get(g);null!=_&&u.associations.set(y,_);var S,C=Ft(g.children.entries());try{for(C.s();!(S=C.n()).done;){var R=Ir(S.value,2);v(R[1],y.children[R[0]])}}catch(T){C.e(T)}finally{C.f()}}(o,f),f.name+="_instance_"+t.uses[r]++,f}},{key:"_invokeOne",value:function(t){var r=Object.values(this.plugins);r.push(this);for(var o=0;o<r.length;o++){var u=t(r[o]);if(u)return u}return null}},{key:"_invokeAll",value:function(t){var r=Object.values(this.plugins);r.unshift(this);for(var o=[],u=0;u<r.length;u++){var f=t(r[u]);f&&o.push(f)}return o}},{key:"getDependency",value:function(t,r){var o=t+":"+r,u=this.cache.get(o);if(!u){switch(t){case"scene":u=this.loadScene(r);break;case"node":u=this._invokeOne(function(f){return f.loadNode&&f.loadNode(r)});break;case"mesh":u=this._invokeOne(function(f){return f.loadMesh&&f.loadMesh(r)});break;case"accessor":u=this.loadAccessor(r);break;case"bufferView":u=this._invokeOne(function(f){return f.loadBufferView&&f.loadBufferView(r)});break;case"buffer":u=this.loadBuffer(r);break;case"material":u=this._invokeOne(function(f){return f.loadMaterial&&f.loadMaterial(r)});break;case"texture":u=this._invokeOne(function(f){return f.loadTexture&&f.loadTexture(r)});break;case"skin":u=this.loadSkin(r);break;case"animation":u=this._invokeOne(function(f){return f.loadAnimation&&f.loadAnimation(r)});break;case"camera":u=this.loadCamera(r);break;default:if(!(u=this._invokeOne(function(f){return f!=this&&f.getDependency&&f.getDependency(t,r)})))throw new Error("Unknown type: "+t)}this.cache.add(o,u)}return u}},{key:"getDependencies",value:function(t){var r=this.cache.get(t);if(!r){var o=this;r=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(f,h){return o.getDependency(t,h)})),this.cache.add(t,r)}return r}},{key:"loadBuffer",value:function(t){var r=this.json.buffers[t],o=this.fileLoader;if(r.type&&"arraybuffer"!==r.type)throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(void 0===r.uri&&0===t)return Promise.resolve(this.extensions[Zn.KHR_BINARY_GLTF].body);var u=this.options;return new Promise(function(f,h){o.load(Sf.resolveURL(r.uri,u.path),f,void 0,function(){h(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}},{key:"loadBufferView",value:function(t){var r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(o){var f=r.byteOffset||0;return o.slice(f,f+(r.byteLength||0))})}},{key:"loadAccessor",value:function(t){var r=this,o=this.json,u=this.json.accessors[t];if(void 0===u.bufferView&&void 0===u.sparse){var f=DD[u.type],v=!0===u.normalized,g=new(0,uv[u.componentType])(u.count*f);return Promise.resolve(new Lo(g,f,v))}var y=[];return y.push(void 0!==u.bufferView?this.getDependency("bufferView",u.bufferView):null),void 0!==u.sparse&&(y.push(this.getDependency("bufferView",u.sparse.indices.bufferView)),y.push(this.getDependency("bufferView",u.sparse.values.bufferView))),Promise.all(y).then(function(_){var O,L,C=_[0],S=DD[u.type],R=uv[u.componentType],b=R.BYTES_PER_ELEMENT,T=u.byteOffset||0,D=void 0!==u.bufferView?o.bufferViews[u.bufferView].byteStride:void 0,M=!0===u.normalized;if(D&&D!==b*S){var H=Math.floor(T/D),z="InterleavedBuffer:"+u.bufferView+":"+u.componentType+":"+H+":"+u.count,P=r.cache.get(z);P||(O=new R(C,H*D,u.count*D/b),P=new H9(O,D/b),r.cache.add(z,P)),L=new V9(P,S,T%D/b,M)}else O=null===C?new R(u.count*S):new R(C,T,u.count*S),L=new Lo(O,S,M);if(void 0!==u.sparse){var le=u.sparse.values.byteOffset||0,ue=new(0,uv[u.sparse.indices.componentType])(_[1],u.sparse.indices.byteOffset||0,u.sparse.count*DD.SCALAR),k=new R(_[2],le,u.sparse.count*S);null!==C&&(L=new Lo(L.array.slice(),L.itemSize,L.normalized));for(var ee=0,ie=ue.length;ee<ie;ee++){var se=ue[ee];if(L.setX(se,k[ee*S]),S>=2&&L.setY(se,k[ee*S+1]),S>=3&&L.setZ(se,k[ee*S+2]),S>=4&&L.setW(se,k[ee*S+3]),S>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return L})}},{key:"loadTexture",value:function(t){var r=this.json,f=r.textures[t].source,h=r.images[f],v=this.textureLoader;if(h.uri){var g=this.options.manager.getHandler(h.uri);null!==g&&(v=g)}return this.loadTextureImage(t,f,v)}},{key:"loadTextureImage",value:function(t,r,o){var u=this,f=this.json,h=f.textures[t],v=f.images[r],g=(v.uri||v.bufferView)+":"+h.sampler;if(this.textureCache[g])return this.textureCache[g];var y=this.loadImageSource(r,o).then(function(_){_.flipY=!1,_.name=h.name||v.name||"";var S=(f.samplers||{})[h.sampler]||{};return _.magFilter=TN[S.magFilter]||Po,_.minFilter=TN[S.minFilter]||xc,_.wrapS=DN[S.wrapS]||ef,_.wrapT=DN[S.wrapT]||ef,u.associations.set(_,{textures:t}),_}).catch(function(){return null});return this.textureCache[g]=y,y}},{key:"loadImageSource",value:function(t,r){var u=this.json,f=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(function(C){return C.clone()});var h=u.images[t],v=self.URL||self.webkitURL,g=h.uri||"",y=!1;if(void 0!==h.bufferView)g=this.getDependency("bufferView",h.bufferView).then(function(C){y=!0;var S=new Blob([C],{type:h.mimeType});return g=v.createObjectURL(S)});else if(void 0===h.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");var _=Promise.resolve(g).then(function(C){return new Promise(function(S,R){var b=S;!0===r.isImageBitmapLoader&&(b=function(T){var D=new _u(T);D.needsUpdate=!0,S(D)}),r.load(Sf.resolveURL(C,f.path),b,void 0,R)})}).then(function(C){return!0===y&&v.revokeObjectURL(g),C.userData.mimeType=h.mimeType||function(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(h.uri),C}).catch(function(C){throw console.error("THREE.GLTFLoader: Couldn't load texture",g),C});return this.sourceCache[t]=_,_}},{key:"assignTexture",value:function(t,r,o,u){var f=this;return this.getDependency("texture",o.index).then(function(h){if(!h)return null;if(void 0!==o.texCoord&&0!=o.texCoord&&!("aoMap"===r&&1==o.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+o.texCoord+" for texture "+r+" not yet supported."),f.extensions[Zn.KHR_TEXTURE_TRANSFORM]){var v=void 0!==o.extensions?o.extensions[Zn.KHR_TEXTURE_TRANSFORM]:void 0;if(v){var g=f.associations.get(h);h=f.extensions[Zn.KHR_TEXTURE_TRANSFORM].extendTexture(h,v),f.associations.set(h,g)}}return void 0!==u&&(h.encoding=u),t[r]=h,h})}},{key:"assignFinalMaterial",value:function(t){var r=t.geometry,o=t.material,u=void 0===r.attributes.tangent,f=void 0!==r.attributes.color,h=void 0===r.attributes.normal;if(t.isPoints){var v="PointsMaterial:"+o.uuid,g=this.cache.get(v);g||(g=new JF,Cu.prototype.copy.call(g,o),g.color.copy(o.color),g.map=o.map,g.sizeAttenuation=!1,this.cache.add(v,g)),o=g}else if(t.isLine){var y="LineBasicMaterial:"+o.uuid,_=this.cache.get(y);_||(_=new YS,Cu.prototype.copy.call(_,o),_.color.copy(o.color),this.cache.add(y,_)),o=_}if(u||f||h){var C="ClonedMaterial:"+o.uuid+":";u&&(C+="derivative-tangents:"),f&&(C+="vertex-colors:"),h&&(C+="flat-shading:");var S=this.cache.get(C);S||(S=o.clone(),f&&(S.vertexColors=!0),h&&(S.flatShading=!0),u&&(S.normalScale&&(S.normalScale.y*=-1),S.clearcoatNormalScale&&(S.clearcoatNormalScale.y*=-1)),this.cache.add(C,S),this.associations.set(S,this.associations.get(o))),o=S}o.aoMap&&void 0===r.attributes.uv2&&void 0!==r.attributes.uv&&r.setAttribute("uv2",r.attributes.uv),t.material=o}},{key:"getMaterialType",value:function(){return _D}},{key:"loadMaterial",value:function(t){var h,r=this,u=this.extensions,f=this.json.materials[t],v={},y=[];if((f.extensions||{})[Zn.KHR_MATERIALS_UNLIT]){var _=u[Zn.KHR_MATERIALS_UNLIT];h=_.getMaterialType(),y.push(_.extendParams(v,f,r))}else{var C=f.pbrMetallicRoughness||{};if(v.color=new un(1,1,1),v.opacity=1,Array.isArray(C.baseColorFactor)){var S=C.baseColorFactor;v.color.fromArray(S),v.opacity=S[3]}void 0!==C.baseColorTexture&&y.push(r.assignTexture(v,"map",C.baseColorTexture,Yn)),v.metalness=void 0!==C.metallicFactor?C.metallicFactor:1,v.roughness=void 0!==C.roughnessFactor?C.roughnessFactor:1,void 0!==C.metallicRoughnessTexture&&(y.push(r.assignTexture(v,"metalnessMap",C.metallicRoughnessTexture)),y.push(r.assignTexture(v,"roughnessMap",C.metallicRoughnessTexture))),h=this._invokeOne(function(E){return E.getMaterialType&&E.getMaterialType(t)}),y.push(Promise.all(this._invokeAll(function(E){return E.extendMaterialParams&&E.extendMaterialParams(t,v)})))}!0===f.doubleSided&&(v.side=2);var R=f.alphaMode||"OPAQUE";if("BLEND"===R?(v.transparent=!0,v.depthWrite=!1):(v.transparent=!1,"MASK"===R&&(v.alphaTest=void 0!==f.alphaCutoff?f.alphaCutoff:.5)),void 0!==f.normalTexture&&h!==dl&&(y.push(r.assignTexture(v,"normalMap",f.normalTexture)),v.normalScale=new Ke(1,1),void 0!==f.normalTexture.scale)){var b=f.normalTexture.scale;v.normalScale.set(b,b)}return void 0!==f.occlusionTexture&&h!==dl&&(y.push(r.assignTexture(v,"aoMap",f.occlusionTexture)),void 0!==f.occlusionTexture.strength&&(v.aoMapIntensity=f.occlusionTexture.strength)),void 0!==f.emissiveFactor&&h!==dl&&(v.emissive=(new un).fromArray(f.emissiveFactor)),void 0!==f.emissiveTexture&&h!==dl&&y.push(r.assignTexture(v,"emissiveMap",f.emissiveTexture,Yn)),Promise.all(y).then(function(){var E=new h(v);return f.name&&(E.name=f.name),Lc(E,f),r.associations.set(E,{materials:t}),f.extensions&&Vy(u,E,f),E})}},{key:"createUniqueName",value:function(t){for(var r=Pr.sanitizeNodeName(t||""),o=r,u=1;this.nodeNamesUsed[o];++u)o=r+"_"+u;return this.nodeNamesUsed[o]=!0,o}},{key:"loadGeometries",value:function(t){var r=this,o=this.extensions,u=this.primitiveCache;function f(R){return o[Zn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(R,r).then(function(b){return ON(b,R,r)})}for(var h=[],v=0,g=t.length;v<g;v++){var y=t[v],_=Zq(y),C=u[_];if(C)h.push(C.promise);else{var S;S=y.extensions&&y.extensions[Zn.KHR_DRACO_MESH_COMPRESSION]?f(y):ON(new Mr,y,r),u[_]={primitive:y,promise:S},h.push(S)}}return Promise.all(h)}},{key:"loadMesh",value:function(t){for(var r=this,u=this.extensions,f=this.json.meshes[t],h=f.primitives,v=[],g=0,y=h.length;g<y;g++){var _=void 0===h[g].material?$q(this.cache):this.getDependency("material",h[g].material);v.push(_)}return v.push(r.loadGeometries(h)),Promise.all(v).then(function(C){for(var S=C.slice(0,C.length-1),R=C[C.length-1],b=[],E=0,T=R.length;E<T;E++){var D=R[E],M=h[E],O=void 0,L=S[E];if(M.mode===Qa.TRIANGLES||M.mode===Qa.TRIANGLE_STRIP||M.mode===Qa.TRIANGLE_FAN||void 0===M.mode)!0===(O=!0===f.isSkinnedMesh?new z9(D,L):new na(D,L)).isSkinnedMesh&&!O.geometry.attributes.skinWeight.normalized&&O.normalizeSkinWeights(),M.mode===Qa.TRIANGLE_STRIP?O.geometry=PN(O.geometry,1):M.mode===Qa.TRIANGLE_FAN&&(O.geometry=PN(O.geometry,2));else if(M.mode===Qa.LINES)O=new X9(D,L);else if(M.mode===Qa.LINE_STRIP)O=new Ry(D,L);else if(M.mode===Qa.LINE_LOOP)O=new J9(D,L);else{if(M.mode!==Qa.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);O=new Z9(D,L)}Object.keys(O.geometry.morphAttributes).length>0&&Jq(O,f),O.name=r.createUniqueName(f.name||"mesh_"+t),Lc(O,f),M.extensions&&Vy(u,O,M),r.assignFinalMaterial(O),b.push(O)}for(var H=0,z=b.length;H<z;H++)r.associations.set(b[H],{meshes:t,primitives:H});if(1===b.length)return b[0];var P=new vf;r.associations.set(P,{meshes:t});for(var W=0,X=b.length;W<X;W++)P.add(b[W]);return P})}},{key:"loadCamera",value:function(t){var r,o=this.json.cameras[t],u=o[o.type];if(u)return"perspective"===o.type?r=new di(Gj.radToDeg(u.yfov),u.aspectRatio||1,u.znear||1,u.zfar||2e6):"orthographic"===o.type&&(r=new ZT(-u.xmag,u.xmag,u.ymag,-u.ymag,u.znear,u.zfar)),o.name&&(r.name=this.createUniqueName(o.name)),Lc(r,o),Promise.resolve(r);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(t){for(var r=this.json.skins[t],o=[],u=0,f=r.joints.length;u<f;u++)o.push(this.getDependency("node",r.joints[u]));return o.push(void 0!==r.inverseBindMatrices?this.getDependency("accessor",r.inverseBindMatrices):null),Promise.all(o).then(function(h){for(var v=h.pop(),g=h,y=[],_=[],C=0,S=g.length;C<S;C++){var R=g[C];if(R){y.push(R);var b=new wn;null!==v&&b.fromArray(v.array,16*C),_.push(b)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[C])}return new Y9(y,_)})}},{key:"loadAnimation",value:function(t){for(var o=this.json.animations[t],u=[],f=[],h=[],v=[],g=[],y=0,_=o.channels.length;y<_;y++){var C=o.channels[y],S=o.samplers[C.sampler],R=C.target,E=void 0!==o.parameters?o.parameters[S.input]:S.input,T=void 0!==o.parameters?o.parameters[S.output]:S.output;u.push(this.getDependency("node",R.node)),f.push(this.getDependency("accessor",E)),h.push(this.getDependency("accessor",T)),v.push(S),g.push(R)}return Promise.all([Promise.all(u),Promise.all(f),Promise.all(h),Promise.all(v),Promise.all(g)]).then(function(D){for(var M=D[0],O=D[1],L=D[2],H=D[3],z=D[4],P=[],W=function(ee,ie){var se=M[ee],ae=O[ee],ge=L[ee],Ee=H[ee],_e=z[ee];if(void 0===se)return"continue";se.updateMatrix();var me=void 0;switch(Ic[_e.path]){case Ic.weights:me=Ly;break;case Ic.rotation:me=Cf;break;default:me=Fy}var Ge=se.name?se.name:se.uuid,Se=void 0!==Ee.interpolation?Kq[Ee.interpolation]:Oh,Ae=[];Ic[_e.path]===Ic.weights?se.traverse(function(et){et.morphTargetInfluences&&Ae.push(et.name?et.name:et.uuid)}):Ae.push(Ge);var he=ge.array;if(ge.normalized){for(var Xe=PD(he.constructor),ke=new Float32Array(he.length),je=0,We=he.length;je<We;je++)ke[je]=he[je]*Xe;he=ke}for(var Ue=0,it=Ae.length;Ue<it;Ue++){var Ht=new me(Ae[Ue]+"."+Ic[_e.path],ae.array,he,Se);"CUBICSPLINE"===Ee.interpolation&&(Ht.createInterpolant=function(Ot){return new(this instanceof Cf?Yq:AN)(this.times,this.values,this.getValueSize()/3,Ot)},Ht.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),P.push(Ht)}},X=0,ne=M.length;X<ne;X++)W(X);return new ED(o.name?o.name:"animation_"+t,void 0,P)})}},{key:"createNodeMesh",value:function(t){var o=this,u=this.json.nodes[t];return void 0===u.mesh?null:o.getDependency("mesh",u.mesh).then(function(f){var h=o._getNodeRef(o.meshCache,u.mesh,f);return void 0!==u.weights&&h.traverse(function(v){if(v.isMesh)for(var g=0,y=u.weights.length;g<y;g++)v.morphTargetInfluences[g]=u.weights[g]}),h})}},{key:"loadNode",value:function(t){var o=this.extensions,u=this,f=this.json.nodes[t],h=f.name?u.createUniqueName(f.name):"";return function(){var v=[],g=u._invokeOne(function(b){return b.createNodeMesh&&b.createNodeMesh(t)});g&&v.push(g),void 0!==f.camera&&v.push(u.getDependency("camera",f.camera).then(function(b){return u._getNodeRef(u.cameraCache,f.camera,b)})),u._invokeAll(function(b){return b.createNodeAttachment&&b.createNodeAttachment(t)}).forEach(function(b){v.push(b)});for(var y=[],_=f.children||[],C=0,S=_.length;C<S;C++)y.push(u.getDependency("node",_[C]));var R=void 0===f.skin?Promise.resolve(null):u.getDependency("skin",f.skin);return Promise.all([Promise.all(v),Promise.all(y),R])}().then(function(v){var C,g=v[0],y=v[1],_=v[2];if((C=!0===f.isBone?new VF:g.length>1?new vf:1===g.length?g[0]:new go)!==g[0])for(var S=0,R=g.length;S<R;S++)C.add(g[S]);if(f.name&&(C.userData.name=f.name,C.name=h),Lc(C,f),f.extensions&&Vy(o,C,f),void 0!==f.matrix){var b=new wn;b.fromArray(f.matrix),C.applyMatrix4(b)}else void 0!==f.translation&&C.position.fromArray(f.translation),void 0!==f.rotation&&C.quaternion.fromArray(f.rotation),void 0!==f.scale&&C.scale.fromArray(f.scale);u.associations.has(C)||u.associations.set(C,{}),u.associations.get(C).nodes=t,null!==_&&C.traverse(function(D){!D.isSkinnedMesh||D.bind(_,eY)});for(var E=0,T=y.length;E<T;E++)C.add(y[E]);return C})}},{key:"loadScene",value:function(t){var r=this.extensions,o=this.json.scenes[t],u=this,f=new vf;o.name&&(f.name=u.createUniqueName(o.name)),Lc(f,o),o.extensions&&Vy(r,f,o);for(var h=o.nodes||[],v=[],g=0,y=h.length;g<y;g++)v.push(u.getDependency("node",h[g]));return Promise.all(v).then(function(_){for(var C=0,S=_.length;C<S;C++)f.add(_[C]);return u.associations=function(E){var M,T=new Map,D=Ft(u.associations);try{for(D.s();!(M=D.n()).done;){var O=Ir(M.value,2),L=O[0];(L instanceof Cu||L instanceof _u)&&T.set(L,O[1])}}catch(z){D.e(z)}finally{D.f()}return E.traverse(function(z){var P=u.associations.get(z);null!=P&&T.set(z,P)}),T}(f),f})}}]),n}();function ON(n,a,t){var r=a.attributes,o=[];function u(g,y){return t.getDependency("accessor",g).then(function(_){n.setAttribute(y,_)})}for(var f in r){var h=MD[f]||f.toLowerCase();h in n.attributes||o.push(u(r[f],h))}if(void 0!==a.indices&&!n.index){var v=t.getDependency("accessor",a.indices).then(function(g){n.setIndex(g)});o.push(v)}return Lc(n,a),function(n,a,t){var r=a.attributes,o=new Tc;if(void 0!==r.POSITION){var u=t.json.accessors[r.POSITION],f=u.min,h=u.max;if(void 0!==f&&void 0!==h){if(o.set(new J(f[0],f[1],f[2]),new J(h[0],h[1],h[2])),u.normalized){var v=PD(uv[u.componentType]);o.min.multiplyScalar(v),o.max.multiplyScalar(v)}var g=a.targets;if(void 0!==g){for(var y=new J,_=new J,C=0,S=g.length;C<S;C++){var R=g[C];if(void 0!==R.POSITION){var b=t.json.accessors[R.POSITION],E=b.min,T=b.max;if(void 0!==E&&void 0!==T){if(_.setX(Math.max(Math.abs(E[0]),Math.abs(T[0]))),_.setY(Math.max(Math.abs(E[1]),Math.abs(T[1]))),_.setZ(Math.max(Math.abs(E[2]),Math.abs(T[2]))),b.normalized){var D=PD(uv[b.componentType]);_.multiplyScalar(D)}y.max(_)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(y)}n.boundingBox=o;var M=new Bh;o.getCenter(M.center),M.radius=o.min.distanceTo(o.max)/2,n.boundingSphere=M}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(n,a,t),Promise.all(o).then(function(){return void 0!==a.targets?function(n,a,t){for(var r=!1,o=!1,u=!1,f=0,h=a.length;f<h;f++){var v=a[f];if(void 0!==v.POSITION&&(r=!0),void 0!==v.NORMAL&&(o=!0),void 0!==v.COLOR_0&&(u=!0),r&&o&&u)break}if(!r&&!o&&!u)return Promise.resolve(n);for(var g=[],y=[],_=[],C=0,S=a.length;C<S;C++){var R=a[C];if(r){var b=void 0!==R.POSITION?t.getDependency("accessor",R.POSITION):n.attributes.position;g.push(b)}if(o){var E=void 0!==R.NORMAL?t.getDependency("accessor",R.NORMAL):n.attributes.normal;y.push(E)}if(u){var T=void 0!==R.COLOR_0?t.getDependency("accessor",R.COLOR_0):n.attributes.color;_.push(T)}}return Promise.all([Promise.all(g),Promise.all(y),Promise.all(_)]).then(function(D){var O=D[1],L=D[2];return r&&(n.morphAttributes.position=D[0]),o&&(n.morphAttributes.normal=O),u&&(n.morphAttributes.color=L),n.morphTargetsRelative=!0,n})}(n,a.targets,t):n})}function PN(n,a){var t=n.getIndex();if(null===t){var r=[],o=n.getAttribute("position");if(void 0===o)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(var u=0;u<o.count;u++)r.push(u);n.setIndex(r),t=n.getIndex()}var f=t.count-2,h=[];if(2===a)for(var v=1;v<=f;v++)h.push(t.getX(0)),h.push(t.getX(v)),h.push(t.getX(v+1));else for(var g=0;g<f;g++)g%2==0?(h.push(t.getX(g)),h.push(t.getX(g+1)),h.push(t.getX(g+2))):(h.push(t.getX(g+2)),h.push(t.getX(g+1)),h.push(t.getX(g)));h.length/3!==f&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var y=n.clone();return y.setIndex(h),y}var IN={type:"change"},ID={type:"start"},LN={type:"end"},LD=function(n){pe(t,n);var a=ve(t);function t(r,o){var u,te,rt,Dt,Ct,ft,at;G(this,t),(u=a.call(this)).object=r,u.domElement=o,u.domElement.style.touchAction="none",u.enabled=!0,u.target=new J,u.minDistance=0,u.maxDistance=1/0,u.minZoom=0,u.maxZoom=1/0,u.minPolarAngle=0,u.maxPolarAngle=Math.PI,u.minAzimuthAngle=-1/0,u.maxAzimuthAngle=1/0,u.enableDamping=!1,u.dampingFactor=.05,u.enableZoom=!0,u.zoomSpeed=1,u.enableRotate=!0,u.rotateSpeed=1,u.enablePan=!0,u.panSpeed=1,u.screenSpacePanning=!0,u.keyPanSpeed=7,u.autoRotate=!1,u.autoRotateSpeed=2,u.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},u.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},u.touches={ONE:0,TWO:2},u.target0=u.target.clone(),u.position0=u.object.position.clone(),u.zoom0=u.object.zoom,u._domElementKeyEvents=null,u.getPolarAngle=function(){return y.phi},u.getAzimuthalAngle=function(){return y.theta},u.getDistance=function(){return this.object.position.distanceTo(this.target)},u.listenToKeyEvents=function(te){te.addEventListener("keydown",re),this._domElementKeyEvents=te},u.saveState=function(){f.target0.copy(f.target),f.position0.copy(f.object.position),f.zoom0=f.object.zoom},u.reset=function(){f.target.copy(f.target0),f.object.position.copy(f.position0),f.object.zoom=f.zoom0,f.object.updateProjectionMatrix(),f.dispatchEvent(IN),f.update(),v=h.NONE},u.update=(te=new J,rt=(new eo).setFromUnitVectors(r.up,new J(0,1,0)),Dt=rt.clone().invert(),Ct=new J,ft=new eo,at=2*Math.PI,function(){var On=f.object.position;te.copy(On).sub(f.target),te.applyQuaternion(rt),y.setFromVector3(te),f.autoRotate&&v===h.NONE&&le(2*Math.PI/60/60*f.autoRotateSpeed),f.enableDamping?(y.theta+=_.theta*f.dampingFactor,y.phi+=_.phi*f.dampingFactor):(y.theta+=_.theta,y.phi+=_.phi);var Wn=f.minAzimuthAngle,Un=f.maxAzimuthAngle;return isFinite(Wn)&&isFinite(Un)&&(Wn<-Math.PI?Wn+=at:Wn>Math.PI&&(Wn-=at),Un<-Math.PI?Un+=at:Un>Math.PI&&(Un-=at),y.theta=Wn<=Un?Math.max(Wn,Math.min(Un,y.theta)):y.theta>(Wn+Un)/2?Math.max(Wn,y.theta):Math.min(Un,y.theta)),y.phi=Math.max(f.minPolarAngle,Math.min(f.maxPolarAngle,y.phi)),y.makeSafe(),y.radius*=C,y.radius=Math.max(f.minDistance,Math.min(f.maxDistance,y.radius)),!0===f.enableDamping?f.target.addScaledVector(S,f.dampingFactor):f.target.add(S),te.setFromSpherical(y),te.applyQuaternion(Dt),On.copy(f.target).add(te),f.object.lookAt(f.target),!0===f.enableDamping?(_.theta*=1-f.dampingFactor,_.phi*=1-f.dampingFactor,S.multiplyScalar(1-f.dampingFactor)):(_.set(0,0,0),S.set(0,0,0)),C=1,!!(R||Ct.distanceToSquared(f.object.position)>g||8*(1-ft.dot(f.object.quaternion))>g)&&(f.dispatchEvent(IN),Ct.copy(f.object.position),ft.copy(f.object.quaternion),R=!1,!0)}),u.dispose=function(){f.domElement.removeEventListener("contextmenu",tt),f.domElement.removeEventListener("pointerdown",_n),f.domElement.removeEventListener("pointercancel",Hn),f.domElement.removeEventListener("wheel",vr),f.domElement.removeEventListener("pointermove",xt),f.domElement.removeEventListener("pointerup",fn),null!==f._domElementKeyEvents&&f._domElementKeyEvents.removeEventListener("keydown",re)};var f=Xn(u),h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},v=h.NONE,g=1e-6,y=new bN,_=new bN,C=1,S=new J,R=!1,b=new Ke,E=new Ke,T=new Ke,D=new Ke,M=new Ke,O=new Ke,L=new Ke,H=new Ke,z=new Ke,P=[],W={};function ne(){return Math.pow(.95,f.zoomSpeed)}function le(te){_.theta-=te}function ue(te){_.phi-=te}var k=function(){var te=new J;return function(Dt,Ct){te.setFromMatrixColumn(Ct,0),te.multiplyScalar(-Dt),S.add(te)}}(),ee=function(){var te=new J;return function(Dt,Ct){!0===f.screenSpacePanning?te.setFromMatrixColumn(Ct,1):(te.setFromMatrixColumn(Ct,0),te.crossVectors(f.object.up,te)),te.multiplyScalar(Dt),S.add(te)}}(),ie=function(){var te=new J;return function(Dt,Ct){var ft=f.domElement;if(f.object.isPerspectiveCamera){te.copy(f.object.position).sub(f.target);var Kt=te.length();Kt*=Math.tan(f.object.fov/2*Math.PI/180),k(2*Dt*Kt/ft.clientHeight,f.object.matrix),ee(2*Ct*Kt/ft.clientHeight,f.object.matrix)}else f.object.isOrthographicCamera?(k(Dt*(f.object.right-f.object.left)/f.object.zoom/ft.clientWidth,f.object.matrix),ee(Ct*(f.object.top-f.object.bottom)/f.object.zoom/ft.clientHeight,f.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),f.enablePan=!1)}}();function se(te){f.object.isPerspectiveCamera?C/=te:f.object.isOrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom*te)),f.object.updateProjectionMatrix(),R=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function ae(te){f.object.isPerspectiveCamera?C*=te:f.object.isOrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom/te)),f.object.updateProjectionMatrix(),R=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function ge(te){b.set(te.clientX,te.clientY)}function _e(te){D.set(te.clientX,te.clientY)}function Xe(){1===P.length?b.set(P[0].pageX,P[0].pageY):b.set(.5*(P[0].pageX+P[1].pageX),.5*(P[0].pageY+P[1].pageY))}function ke(){1===P.length?D.set(P[0].pageX,P[0].pageY):D.set(.5*(P[0].pageX+P[1].pageX),.5*(P[0].pageY+P[1].pageY))}function je(){var te=P[0].pageX-P[1].pageX,rt=P[0].pageY-P[1].pageY,Dt=Math.sqrt(te*te+rt*rt);L.set(0,Dt)}function it(te){if(1==P.length)E.set(te.pageX,te.pageY);else{var rt=Nt(te);E.set(.5*(te.pageX+rt.x),.5*(te.pageY+rt.y))}T.subVectors(E,b).multiplyScalar(f.rotateSpeed);var ft=f.domElement;le(2*Math.PI*T.x/ft.clientHeight),ue(2*Math.PI*T.y/ft.clientHeight),b.copy(E)}function Ht(te){if(1===P.length)M.set(te.pageX,te.pageY);else{var rt=Nt(te);M.set(.5*(te.pageX+rt.x),.5*(te.pageY+rt.y))}O.subVectors(M,D).multiplyScalar(f.panSpeed),ie(O.x,O.y),D.copy(M)}function et(te){var rt=Nt(te),Dt=te.pageX-rt.x,Ct=te.pageY-rt.y,ft=Math.sqrt(Dt*Dt+Ct*Ct);H.set(0,ft),z.set(0,Math.pow(H.y/L.y,f.zoomSpeed)),se(z.y),L.copy(H)}function _n(te){!1!==f.enabled&&(0===P.length&&(f.domElement.setPointerCapture(te.pointerId),f.domElement.addEventListener("pointermove",xt),f.domElement.addEventListener("pointerup",fn)),function(te){P.push(te)}(te),"touch"===te.pointerType?function(te){switch(Bt(te),P.length){case 1:switch(f.touches.ONE){case 0:if(!1===f.enableRotate)return;Xe(),v=h.TOUCH_ROTATE;break;case 1:if(!1===f.enablePan)return;ke(),v=h.TOUCH_PAN;break;default:v=h.NONE}break;case 2:switch(f.touches.TWO){case 2:if(!1===f.enableZoom&&!1===f.enablePan)return;f.enableZoom&&je(),f.enablePan&&ke(),v=h.TOUCH_DOLLY_PAN;break;case 3:if(!1===f.enableZoom&&!1===f.enableRotate)return;f.enableZoom&&je(),f.enableRotate&&Xe(),v=h.TOUCH_DOLLY_ROTATE;break;default:v=h.NONE}break;default:v=h.NONE}v!==h.NONE&&f.dispatchEvent(ID)}(te):function(te){var rt;switch(te.button){case 0:rt=f.mouseButtons.LEFT;break;case 1:rt=f.mouseButtons.MIDDLE;break;case 2:rt=f.mouseButtons.RIGHT;break;default:rt=-1}switch(rt){case 1:if(!1===f.enableZoom)return;(function(te){L.set(te.clientX,te.clientY)})(te),v=h.DOLLY;break;case 0:if(te.ctrlKey||te.metaKey||te.shiftKey){if(!1===f.enablePan)return;_e(te),v=h.PAN}else{if(!1===f.enableRotate)return;ge(te),v=h.ROTATE}break;case 2:if(te.ctrlKey||te.metaKey||te.shiftKey){if(!1===f.enableRotate)return;ge(te),v=h.ROTATE}else{if(!1===f.enablePan)return;_e(te),v=h.PAN}break;default:v=h.NONE}v!==h.NONE&&f.dispatchEvent(ID)}(te))}function xt(te){!1!==f.enabled&&("touch"===te.pointerType?function(te){switch(Bt(te),v){case h.TOUCH_ROTATE:if(!1===f.enableRotate)return;it(te),f.update();break;case h.TOUCH_PAN:if(!1===f.enablePan)return;Ht(te),f.update();break;case h.TOUCH_DOLLY_PAN:if(!1===f.enableZoom&&!1===f.enablePan)return;(function(te){f.enableZoom&&et(te),f.enablePan&&Ht(te)})(te),f.update();break;case h.TOUCH_DOLLY_ROTATE:if(!1===f.enableZoom&&!1===f.enableRotate)return;(function(te){f.enableZoom&&et(te),f.enableRotate&&it(te)})(te),f.update();break;default:v=h.NONE}}(te):function(te){switch(v){case h.ROTATE:if(!1===f.enableRotate)return;!function(te){E.set(te.clientX,te.clientY),T.subVectors(E,b).multiplyScalar(f.rotateSpeed);var rt=f.domElement;le(2*Math.PI*T.x/rt.clientHeight),ue(2*Math.PI*T.y/rt.clientHeight),b.copy(E),f.update()}(te);break;case h.DOLLY:if(!1===f.enableZoom)return;!function(te){H.set(te.clientX,te.clientY),z.subVectors(H,L),z.y>0?se(ne()):z.y<0&&ae(ne()),L.copy(H),f.update()}(te);break;case h.PAN:if(!1===f.enablePan)return;!function(te){M.set(te.clientX,te.clientY),O.subVectors(M,D).multiplyScalar(f.panSpeed),ie(O.x,O.y),D.copy(M),f.update()}(te)}}(te))}function fn(te){dt(te),0===P.length&&(f.domElement.releasePointerCapture(te.pointerId),f.domElement.removeEventListener("pointermove",xt),f.domElement.removeEventListener("pointerup",fn)),f.dispatchEvent(LN),v=h.NONE}function Hn(te){dt(te)}function vr(te){!1===f.enabled||!1===f.enableZoom||v!==h.NONE||(te.preventDefault(),f.dispatchEvent(ID),function(te){te.deltaY<0?ae(ne()):te.deltaY>0&&se(ne()),f.update()}(te),f.dispatchEvent(LN))}function re(te){!1===f.enabled||!1===f.enablePan||function(te){var rt=!1;switch(te.code){case f.keys.UP:te.ctrlKey||te.metaKey||te.shiftKey?ue(2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):ie(0,f.keyPanSpeed),rt=!0;break;case f.keys.BOTTOM:te.ctrlKey||te.metaKey||te.shiftKey?ue(-2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):ie(0,-f.keyPanSpeed),rt=!0;break;case f.keys.LEFT:te.ctrlKey||te.metaKey||te.shiftKey?le(2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):ie(f.keyPanSpeed,0),rt=!0;break;case f.keys.RIGHT:te.ctrlKey||te.metaKey||te.shiftKey?le(-2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):ie(-f.keyPanSpeed,0),rt=!0}rt&&(te.preventDefault(),f.update())}(te)}function tt(te){!1!==f.enabled&&te.preventDefault()}function dt(te){delete W[te.pointerId];for(var rt=0;rt<P.length;rt++)if(P[rt].pointerId==te.pointerId)return void P.splice(rt,1)}function Bt(te){var rt=W[te.pointerId];void 0===rt&&(rt=new Ke,W[te.pointerId]=rt),rt.set(te.pageX,te.pageY)}function Nt(te){return W[(te.pointerId===P[0].pointerId?P[1]:P[0]).pointerId]}return f.domElement.addEventListener("contextmenu",tt),f.domElement.addEventListener("pointerdown",_n),f.domElement.addEventListener("pointercancel",Hn),f.domElement.addEventListener("wheel",vr,{passive:!1}),u.update(),u}return t}(Ac),Wy=function(a){a.scene.traverse(function(t){if("Mesh"===t.type&&t.material&&t.material.userData&&t.material.userData.BlendType)switch(t.material.userData.BlendType){case"AdditiveBlending":t.material.blending=2;break;case"SubtractiveBlending":t.material.blending=3;break;case"MultiplyBlending":t.material.blending=4}})};function rY(){}function FD(n){return null==n?rY:function(){return this.querySelector(n)}}function oY(n){return null==n?[]:Array.isArray(n)?n:Array.from(n)}function aY(){return[]}function FN(n){return null==n?aY:function(){return this.querySelectorAll(n)}}function NN(n){return function(){return this.matches(n)}}function kN(n){return function(a){return a.matches(n)}}var lY=Array.prototype.find;function dY(){return this.firstElementChild}var pY=Array.prototype.filter;function hY(){return Array.from(this.children)}function GN(n){return new Array(n.length)}function oE(n,a){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=a}function _Y(n){return function(){return n}}function CY(n,a,t,r,o,u){for(var h,f=0,v=a.length,g=u.length;f<g;++f)(h=a[f])?(h.__data__=u[f],r[f]=h):t[f]=new oE(n,u[f]);for(;f<v;++f)(h=a[f])&&(o[f]=h)}function wY(n,a,t,r,o,u,f){var h,v,S,g=new Map,y=a.length,_=u.length,C=new Array(y);for(h=0;h<y;++h)(v=a[h])&&(C[h]=S=f.call(v,v.__data__,h,a)+"",g.has(S)?o[h]=v:g.set(S,v));for(h=0;h<_;++h)S=f.call(n,u[h],h,u)+"",(v=g.get(S))?(r[h]=v,v.__data__=u[h],g.delete(S)):t[h]=new oE(n,u[h]);for(h=0;h<y;++h)(v=a[h])&&g.get(C[h])===v&&(o[h]=v)}function SY(n){return n.__data__}function bY(n){return"object"==typeof n&&"length"in n?n:Array.from(n)}function MY(n,a){return n<a?-1:n>a?1:n>=a?0:NaN}oE.prototype={constructor:oE,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,t){return this._parent.insertBefore(a,t)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};var ND="http://www.w3.org/1999/xhtml",BN={svg:"http://www.w3.org/2000/svg",xhtml:ND,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function aE(n){var a=n+="",t=a.indexOf(":");return t>=0&&"xmlns"!==(a=n.slice(0,t))&&(n=n.slice(t+1)),BN.hasOwnProperty(a)?{space:BN[a],local:n}:n}function kY(n){return function(){this.removeAttribute(n)}}function GY(n){return function(){this.removeAttributeNS(n.space,n.local)}}function BY(n,a){return function(){this.setAttribute(n,a)}}function HY(n,a){return function(){this.setAttributeNS(n.space,n.local,a)}}function VY(n,a){return function(){var t=a.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}function WY(n,a){return function(){var t=a.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function HN(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function zY(n){return function(){this.style.removeProperty(n)}}function jY(n,a,t){return function(){this.style.setProperty(n,a,t)}}function qY(n,a,t){return function(){var r=a.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function lv(n,a){return n.style.getPropertyValue(a)||HN(n).getComputedStyle(n,null).getPropertyValue(a)}function KY(n){return function(){delete this[n]}}function $Y(n,a){return function(){this[n]=a}}function XY(n,a){return function(){var t=a.apply(this,arguments);null==t?delete this[n]:this[n]=t}}function VN(n){return n.trim().split(/^|\s+/)}function kD(n){return n.classList||new WN(n)}function WN(n){this._node=n,this._names=VN(n.getAttribute("class")||"")}function UN(n,a){for(var t=kD(n),r=-1,o=a.length;++r<o;)t.add(a[r])}function zN(n,a){for(var t=kD(n),r=-1,o=a.length;++r<o;)t.remove(a[r])}function ZY(n){return function(){UN(this,n)}}function QY(n){return function(){zN(this,n)}}function eK(n,a){return function(){(a.apply(this,arguments)?UN:zN)(this,n)}}function nK(){this.textContent=""}function rK(n){return function(){this.textContent=n}}function iK(n){return function(){var a=n.apply(this,arguments);this.textContent=null==a?"":a}}function aK(){this.innerHTML=""}function sK(n){return function(){this.innerHTML=n}}function uK(n){return function(){var a=n.apply(this,arguments);this.innerHTML=null==a?"":a}}function cK(){this.nextSibling&&this.parentNode.appendChild(this)}function fK(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hK(n){return function(){var a=this.ownerDocument,t=this.namespaceURI;return t===ND&&a.documentElement.namespaceURI===ND?a.createElement(n):a.createElementNS(t,n)}}function vK(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function jN(n){var a=aE(n);return(a.local?vK:hK)(a)}function mK(){return null}function _K(){var n=this.parentNode;n&&n.removeChild(this)}function wK(){var n=this.cloneNode(!1),a=this.parentNode;return a?a.insertBefore(n,this.nextSibling):n}function SK(){var n=this.cloneNode(!0),a=this.parentNode;return a?a.insertBefore(n,this.nextSibling):n}function RK(n){return n.trim().split(/^|\s+/).map(function(a){var t="",r=a.indexOf(".");return r>=0&&(t=a.slice(r+1),a=a.slice(0,r)),{type:a,name:t}})}function AK(n){return function(){var a=this.__on;if(a){for(var u,t=0,r=-1,o=a.length;t<o;++t)u=a[t],n.type&&u.type!==n.type||u.name!==n.name?a[++r]=u:this.removeEventListener(u.type,u.listener,u.options);++r?a.length=r:delete this.__on}}}function TK(n,a,t){return function(){var o,r=this.__on,u=function(n){return function(a){n.call(this,a,this.__data__)}}(a);if(r)for(var f=0,h=r.length;f<h;++f)if((o=r[f]).type===n.type&&o.name===n.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=u,o.options=t),void(o.value=a);this.addEventListener(n.type,u,t),o={type:n.type,name:n.name,value:a,listener:u,options:t},r?r.push(o):this.__on=[o]}}function qN(n,a,t){var r=HN(n),o=r.CustomEvent;"function"==typeof o?o=new o(a,t):(o=r.document.createEvent("Event"),t?(o.initEvent(a,t.bubbles,t.cancelable),o.detail=t.detail):o.initEvent(a,!1,!1)),n.dispatchEvent(o)}function MK(n,a){return function(){return qN(this,n,a)}}function OK(n,a){return function(){return qN(this,n,a.apply(this,arguments))}}WN.prototype={add:function(a){this._names.indexOf(a)<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var t=this._names.indexOf(a);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};var IK=vi.mark(YN);function YN(){var n,a,t,r,o,u,f;return vi.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:a=0,t=(n=this._groups).length;case 1:if(!(a<t)){v.next=13;break}o=0,u=(r=n[a]).length;case 3:if(!(o<u)){v.next=10;break}if(!(f=r[o])){v.next=7;break}return v.next=7,f;case 7:++o,v.next=3;break;case 10:++a,v.next=1;break;case 13:case"end":return v.stop()}},IK,this)}var KN=[null];function wa(n,a){this._groups=n,this._parents=a}function $N(){return new wa([[document.documentElement]],KN)}wa.prototype=$N.prototype=En({constructor:wa,select:function(n){"function"!=typeof n&&(n=FD(n));for(var a=this._groups,t=a.length,r=new Array(t),o=0;o<t;++o)for(var v,g,u=a[o],f=u.length,h=r[o]=new Array(f),y=0;y<f;++y)(v=u[y])&&(g=n.call(v,v.__data__,y,u))&&("__data__"in v&&(g.__data__=v.__data__),h[y]=g);return new wa(r,this._parents)},selectAll:function(n){n="function"==typeof n?function(n){return function(){return oY(n.apply(this,arguments))}}(n):FN(n);for(var a=this._groups,t=a.length,r=[],o=[],u=0;u<t;++u)for(var v,f=a[u],h=f.length,g=0;g<h;++g)(v=f[g])&&(r.push(n.call(v,v.__data__,g,f)),o.push(v));return new wa(r,o)},selectChild:function(n){return this.select(null==n?dY:function(n){return function(){return lY.call(this.children,n)}}("function"==typeof n?n:kN(n)))},selectChildren:function(n){return this.selectAll(null==n?hY:function(n){return function(){return pY.call(this.children,n)}}("function"==typeof n?n:kN(n)))},filter:function(n){"function"!=typeof n&&(n=NN(n));for(var a=this._groups,t=a.length,r=new Array(t),o=0;o<t;++o)for(var v,u=a[o],f=u.length,h=r[o]=[],g=0;g<f;++g)(v=u[g])&&n.call(v,v.__data__,g,u)&&h.push(v);return new wa(r,this._parents)},data:function(n,a){if(!arguments.length)return Array.from(this,SY);var t=a?wY:CY,r=this._parents,o=this._groups;"function"!=typeof n&&(n=_Y(n));for(var u=o.length,f=new Array(u),h=new Array(u),v=new Array(u),g=0;g<u;++g){var y=r[g],_=o[g],C=_.length,S=bY(n.call(y,y&&y.__data__,g,r)),R=S.length,b=h[g]=new Array(R),E=f[g]=new Array(R),T=v[g]=new Array(C);t(y,_,b,E,T,S,a);for(var O,L,D=0,M=0;D<R;++D)if(O=b[D]){for(D>=M&&(M=D+1);!(L=E[M])&&++M<R;);O._next=L||null}}return(f=new wa(f,r))._enter=h,f._exit=v,f},enter:function(){return new wa(this._enter||this._groups.map(GN),this._parents)},exit:function(){return new wa(this._exit||this._groups.map(GN),this._parents)},join:function(n,a,t){var r=this.enter(),o=this,u=this.exit();return"function"==typeof n?(r=n(r))&&(r=r.selection()):r=r.append(n+""),null!=a&&(o=a(o))&&(o=o.selection()),null==t?u.remove():t(u),r&&o?r.merge(o).order():o},merge:function(n){for(var a=n.selection?n.selection():n,t=this._groups,r=a._groups,o=t.length,f=Math.min(o,r.length),h=new Array(o),v=0;v<f;++v)for(var S,g=t[v],y=r[v],_=g.length,C=h[v]=new Array(_),R=0;R<_;++R)(S=g[R]||y[R])&&(C[R]=S);for(;v<o;++v)h[v]=t[v];return new wa(h,this._parents)},selection:function(){return this},order:function(){for(var n=this._groups,a=-1,t=n.length;++a<t;)for(var f,r=n[a],o=r.length-1,u=r[o];--o>=0;)(f=r[o])&&(u&&4^f.compareDocumentPosition(u)&&u.parentNode.insertBefore(f,u),u=f);return this},sort:function(n){function a(_,C){return _&&C?n(_.__data__,C.__data__):!_-!C}n||(n=MY);for(var t=this._groups,r=t.length,o=new Array(r),u=0;u<r;++u){for(var g,f=t[u],h=f.length,v=o[u]=new Array(h),y=0;y<h;++y)(g=f[y])&&(v[y]=g);v.sort(a)}return new wa(o,this._parents).order()},call:function(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var n=this._groups,a=0,t=n.length;a<t;++a)for(var r=n[a],o=0,u=r.length;o<u;++o){var f=r[o];if(f)return f}return null},size:function(){var n=0,a=Ft(this);try{for(a.s();!a.n().done;)++n}catch(o){a.e(o)}finally{a.f()}return n},empty:function(){return!this.node()},each:function(n){for(var a=this._groups,t=0,r=a.length;t<r;++t)for(var h,o=a[t],u=0,f=o.length;u<f;++u)(h=o[u])&&n.call(h,h.__data__,u,o);return this},attr:function(n,a){var t=aE(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((null==a?t.local?GY:kY:"function"==typeof a?t.local?WY:VY:t.local?HY:BY)(t,a))},style:function(n,a,t){return arguments.length>1?this.each((null==a?zY:"function"==typeof a?qY:jY)(n,a,null==t?"":t)):lv(this.node(),n)},property:function(n,a){return arguments.length>1?this.each((null==a?KY:"function"==typeof a?XY:$Y)(n,a)):this.node()[n]},classed:function(n,a){var t=VN(n+"");if(arguments.length<2){for(var r=kD(this.node()),o=-1,u=t.length;++o<u;)if(!r.contains(t[o]))return!1;return!0}return this.each(("function"==typeof a?eK:a?ZY:QY)(t,a))},text:function(n){return arguments.length?this.each(null==n?nK:("function"==typeof n?iK:rK)(n)):this.node().textContent},html:function(n){return arguments.length?this.each(null==n?aK:("function"==typeof n?uK:sK)(n)):this.node().innerHTML},raise:function(){return this.each(cK)},lower:function(){return this.each(fK)},append:function(n){var a="function"==typeof n?n:jN(n);return this.select(function(){return this.appendChild(a.apply(this,arguments))})},insert:function(n,a){var t="function"==typeof n?n:jN(n),r=null==a?mK:"function"==typeof a?a:FD(a);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(_K)},clone:function(n){return this.select(n?SK:wK)},datum:function(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function(n,a,t){var o,f,r=RK(n+""),u=r.length;if(!(arguments.length<2)){for(h=a?TK:AK,o=0;o<u;++o)this.each(h(r[o],a,t));return this}var h=this.node().__on;if(h)for(var y,v=0,g=h.length;v<g;++v)for(o=0,y=h[v];o<u;++o)if((f=r[o]).type===y.type&&f.name===y.name)return y.value},dispatch:function(n,a){return this.each(("function"==typeof a?OK:MK)(n,a))}},Symbol.iterator,YN);var Uy=$N,FK={value:function(){}};function XN(){for(var r,n=0,a=arguments.length,t={};n<a;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new sE(t)}function sE(n){this._=n}function NK(n,a){return n.trim().split(/^|\s+/).map(function(t){var r="",o=t.indexOf(".");if(o>=0&&(r=t.slice(o+1),t=t.slice(0,o)),t&&!a.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}function kK(n,a){for(var o,t=0,r=n.length;t<r;++t)if((o=n[t]).name===a)return o.value}function JN(n,a,t){for(var r=0,o=n.length;r<o;++r)if(n[r].name===a){n[r]=FK,n=n.slice(0,r).concat(n.slice(r+1));break}return null!=t&&n.push({name:a,value:t}),n}sE.prototype=XN.prototype={constructor:sE,on:function(a,t){var u,r=this._,o=NK(a+"",r),f=-1,h=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++f<h;)if(u=(a=o[f]).type)r[u]=JN(r[u],a.name,t);else if(null==t)for(u in r)r[u]=JN(r[u],a.name,null);return this}for(;++f<h;)if((u=(a=o[f]).type)&&(u=kK(r[u],a.name)))return u},copy:function(){var a={},t=this._;for(var r in t)a[r]=t[r].slice();return new sE(a)},call:function(a,t){if((u=arguments.length-2)>0)for(var u,f,r=new Array(u),o=0;o<u;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(o=0,u=(f=this._[a]).length;o<u;++o)f[o].value.apply(t,r)},apply:function(a,t,r){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var o=this._[a],u=0,f=o.length;u<f;++u)o[u].value.apply(t,r)}};var uE,qy,GK=XN,cv=0,zy=0,jy=0,lE=0,Ef=0,cE=0,Yy="object"==typeof performance&&performance.now?performance:Date,QN="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function GD(){return Ef||(QN(BK),Ef=Yy.now()+cE)}function BK(){Ef=0}function dE(){this._call=this._time=this._next=null}function ek(n,a,t){var r=new dE;return r.restart(n,a,t),r}function tk(){Ef=(lE=Yy.now())+cE,cv=zy=0;try{!function(){GD(),++cv;for(var a,n=uE;n;)(a=Ef-n._time)>=0&&n._call.call(void 0,a),n=n._next;--cv}()}finally{cv=0,function(){for(var n,t,a=uE,r=1/0;a;)a._call?(r>a._time&&(r=a._time),n=a,a=a._next):(t=a._next,a._next=null,a=n?n._next=t:uE=t);qy=n,BD(r)}(),Ef=0}}function VK(){var n=Yy.now(),a=n-lE;a>1e3&&(cE-=a,lE=n)}function BD(n){cv||(zy&&(zy=clearTimeout(zy)),n-Ef>24?(n<1/0&&(zy=setTimeout(tk,n-Yy.now()-cE)),jy&&(jy=clearInterval(jy))):(jy||(lE=Yy.now(),jy=setInterval(VK,1e3)),cv=1,QN(tk)))}function nk(n,a,t){var r=new dE;return r.restart(function(o){r.stop(),n(o+a)},a=null==a?0:+a,t),r}dE.prototype=ek.prototype={constructor:dE,restart:function(a,t,r){if("function"!=typeof a)throw new TypeError("callback is not a function");r=(null==r?GD():+r)+(null==t?0:+t),!this._next&&qy!==this&&(qy?qy._next=this:uE=this,qy=this),this._call=a,this._time=r,BD()},stop:function(){this._call&&(this._call=null,this._time=1/0,BD())}};var UK=GK("start","end","cancel","interrupt"),zK=[];function hE(n,a,t,r,o,u){var f=n.__transition;if(f){if(t in f)return}else n.__transition={};!function(n,a,t){var o,r=n.__transition;function f(g){var y,_,C,S;if(1!==t.state)return v();for(y in r)if((S=r[y]).name===t.name){if(3===S.state)return nk(f);4===S.state?(S.state=6,S.timer.stop(),S.on.call("interrupt",n,n.__data__,S.index,S.group),delete r[y]):+y<a&&(S.state=6,S.timer.stop(),S.on.call("cancel",n,n.__data__,S.index,S.group),delete r[y])}if(nk(function(){3===t.state&&(t.state=4,t.timer.restart(h,t.delay,t.time),h(g))}),t.state=2,t.on.call("start",n,n.__data__,t.index,t.group),2===t.state){for(t.state=3,o=new Array(C=t.tween.length),y=0,_=-1;y<C;++y)(S=t.tween[y].value.call(n,n.__data__,t.index,t.group))&&(o[++_]=S);o.length=_+1}}function h(g){for(var y=g<t.duration?t.ease.call(null,g/t.duration):(t.timer.restart(v),t.state=5,1),_=-1,C=o.length;++_<C;)o[_].call(n,y);5===t.state&&(t.on.call("end",n,n.__data__,t.index,t.group),v())}function v(){for(var g in t.state=6,t.timer.stop(),delete r[a],r)return;delete n.__transition}r[a]=t,t.timer=ek(function(g){t.state=1,t.timer.restart(f,t.delay,t.time),t.delay<=g&&f(g-t.delay)},0,t.time)}(n,t,{name:a,index:r,group:o,on:UK,tween:zK,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:0})}function WD(n,a){var t=Ws(n,a);if(t.state>0)throw new Error("too late; already scheduled");return t}function bu(n,a){var t=Ws(n,a);if(t.state>3)throw new Error("too late; already running");return t}function Ws(n,a){var t=n.__transition;if(!t||!(t=t[a]))throw new Error("transition not found");return t}function Fc(n,a){return n=+n,a=+a,function(t){return n*(1-t)+a*t}}var vE,ak=180/Math.PI,UD={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sk(n,a,t,r,o,u){var f,h,v;return(f=Math.sqrt(n*n+a*a))&&(n/=f,a/=f),(v=n*t+a*r)&&(t-=n*v,r-=a*v),(h=Math.sqrt(t*t+r*r))&&(t/=h,r/=h,v/=h),n*r<a*t&&(n=-n,a=-a,v=-v,f=-f),{translateX:o,translateY:u,rotate:Math.atan2(a,n)*ak,skewX:Math.atan(v)*ak,scaleX:f,scaleY:h}}function uk(n,a,t,r){function o(g){return g.length?g.pop()+" ":""}return function(g,y){var _=[],C=[];return g=n(g),y=n(y),function(g,y,_,C,S,R){if(g!==_||y!==C){var b=S.push("translate(",null,a,null,t);R.push({i:b-4,x:Fc(g,_)},{i:b-2,x:Fc(y,C)})}else(_||C)&&S.push("translate("+_+a+C+t)}(g.translateX,g.translateY,y.translateX,y.translateY,_,C),function(g,y,_,C){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),C.push({i:_.push(o(_)+"rotate(",null,r)-2,x:Fc(g,y)})):y&&_.push(o(_)+"rotate("+y+r)}(g.rotate,y.rotate,_,C),function(g,y,_,C){g!==y?C.push({i:_.push(o(_)+"skewX(",null,r)-2,x:Fc(g,y)}):y&&_.push(o(_)+"skewX("+y+r)}(g.skewX,y.skewX,_,C),function(g,y,_,C,S,R){if(g!==_||y!==C){var b=S.push(o(S)+"scale(",null,",",null,")");R.push({i:b-4,x:Fc(g,_)},{i:b-2,x:Fc(y,C)})}else(1!==_||1!==C)&&S.push(o(S)+"scale("+_+","+C+")")}(g.scaleX,g.scaleY,y.scaleX,y.scaleY,_,C),g=y=null,function(S){for(var E,R=-1,b=C.length;++R<b;)_[(E=C[R]).i]=E.x(S);return _.join("")}}}var XK=uk(function(n){var a=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(n+"");return a.isIdentity?UD:sk(a.a,a.b,a.c,a.d,a.e,a.f)},"px, ","px)","deg)"),JK=uk(function(n){return null!=n&&(vE||(vE=document.createElementNS("http://www.w3.org/2000/svg","g")),vE.setAttribute("transform",n),n=vE.transform.baseVal.consolidate())?sk((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):UD},", ",")",")");function ZK(n,a){var t,r;return function(){var o=bu(this,n),u=o.tween;if(u!==t)for(var f=0,h=(r=t=u).length;f<h;++f)if(r[f].name===a){(r=r.slice()).splice(f,1);break}o.tween=r}}function QK(n,a,t){var r,o;if("function"!=typeof t)throw new Error;return function(){var u=bu(this,n),f=u.tween;if(f!==r){o=(r=f).slice();for(var h={name:a,value:t},v=0,g=o.length;v<g;++v)if(o[v].name===a){o[v]=h;break}v===g&&o.push(h)}u.tween=o}}function zD(n,a,t){var r=n._id;return n.each(function(){var o=bu(this,r);(o.value||(o.value={}))[a]=t.apply(this,arguments)}),function(o){return Ws(o,r).value[a]}}function jD(n,a,t){n.prototype=a.prototype=t,t.constructor=n}function lk(n,a){var t=Object.create(n.prototype);for(var r in a)t[r]=a[r];return t}function Ky(){}var gE=1/.7,dv="\\s*([+-]?\\d+)\\s*",Xy="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",xu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",t$=/^#([0-9a-f]{3,8})$/,n$=new RegExp("^rgb\\("+[dv,dv,dv]+"\\)$"),r$=new RegExp("^rgb\\("+[xu,xu,xu]+"\\)$"),i$=new RegExp("^rgba\\("+[dv,dv,dv,Xy]+"\\)$"),o$=new RegExp("^rgba\\("+[xu,xu,xu,Xy]+"\\)$"),a$=new RegExp("^hsl\\("+[Xy,xu,xu]+"\\)$"),s$=new RegExp("^hsla\\("+[Xy,xu,xu,Xy]+"\\)$"),ck={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function dk(){return this.rgb().formatHex()}function fk(){return this.rgb().formatRgb()}function Jy(n){var a,t;return n=(n+"").trim().toLowerCase(),(a=t$.exec(n))?(t=a[1].length,a=parseInt(a[1],16),6===t?pk(a):3===t?new Sa(a>>8&15|a>>4&240,a>>4&15|240&a,(15&a)<<4|15&a,1):8===t?mE(a>>24&255,a>>16&255,a>>8&255,(255&a)/255):4===t?mE(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|240&a,((15&a)<<4|15&a)/255):null):(a=n$.exec(n))?new Sa(a[1],a[2],a[3],1):(a=r$.exec(n))?new Sa(255*a[1]/100,255*a[2]/100,255*a[3]/100,1):(a=i$.exec(n))?mE(a[1],a[2],a[3],a[4]):(a=o$.exec(n))?mE(255*a[1]/100,255*a[2]/100,255*a[3]/100,a[4]):(a=a$.exec(n))?gk(a[1],a[2]/100,a[3]/100,1):(a=s$.exec(n))?gk(a[1],a[2]/100,a[3]/100,a[4]):ck.hasOwnProperty(n)?pk(ck[n]):"transparent"===n?new Sa(NaN,NaN,NaN,0):null}function pk(n){return new Sa(n>>16&255,n>>8&255,255&n,1)}function mE(n,a,t,r){return r<=0&&(n=a=t=NaN),new Sa(n,a,t,r)}function l$(n){return n instanceof Ky||(n=Jy(n)),n?new Sa((n=n.rgb()).r,n.g,n.b,n.opacity):new Sa}function yE(n,a,t,r){return 1===arguments.length?l$(n):new Sa(n,a,t,null==r?1:r)}function Sa(n,a,t,r){this.r=+n,this.g=+a,this.b=+t,this.opacity=+r}function hk(){return"#"+qD(this.r)+qD(this.g)+qD(this.b)}function vk(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?")":", "+n+")")}function qD(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function gk(n,a,t,r){return r<=0?n=a=t=NaN:t<=0||t>=1?n=a=NaN:a<=0&&(n=NaN),new Ru(n,a,t,r)}function mk(n){if(n instanceof Ru)return new Ru(n.h,n.s,n.l,n.opacity);if(n instanceof Ky||(n=Jy(n)),!n)return new Ru;if(n instanceof Ru)return n;var a=(n=n.rgb()).r/255,t=n.g/255,r=n.b/255,o=Math.min(a,t,r),u=Math.max(a,t,r),f=NaN,h=u-o,v=(u+o)/2;return h?(f=a===u?(t-r)/h+6*(t<r):t===u?(r-a)/h+2:(a-t)/h+4,h/=v<.5?u+o:2-u-o,f*=60):h=v>0&&v<1?0:f,new Ru(f,h,v,n.opacity)}function Ru(n,a,t,r){this.h=+n,this.s=+a,this.l=+t,this.opacity=+r}function YD(n,a,t){return 255*(n<60?a+(t-a)*n/60:n<180?t:n<240?a+(t-a)*(240-n)/60:a)}function yk(n,a,t,r,o){var u=n*n,f=u*n;return((1-3*n+3*u-f)*a+(4-6*u+3*f)*t+(1+3*n+3*u-3*f)*r+f*o)/6}jD(Ky,Jy,{copy:function(a){return Object.assign(new this.constructor,this,a)},displayable:function(){return this.rgb().displayable()},hex:dk,formatHex:dk,formatHsl:function(){return mk(this).formatHsl()},formatRgb:fk,toString:fk}),jD(Sa,yE,lk(Ky,{brighter:function(a){return a=null==a?gE:Math.pow(gE,a),new Sa(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new Sa(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hk,formatHex:hk,formatRgb:vk,toString:vk})),jD(Ru,function(n,a,t,r){return 1===arguments.length?mk(n):new Ru(n,a,t,null==r?1:r)},lk(Ky,{brighter:function(a){return a=null==a?gE:Math.pow(gE,a),new Ru(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new Ru(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(this.h<0),t=isNaN(a)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*t,u=2*r-o;return new Sa(YD(a>=240?a-240:a+120,u,o),YD(a,u,o),YD(a<120?a+240:a-120,u,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}));var _k=function(n){return function(){return n}};function wk(n,a){var t=a-n;return t?function(n,a){return function(t){return n+t*a}}(n,t):_k(isNaN(n)?a:n)}var Sk=function n(a){var t=function(n){return 1==(n=+n)?wk:function(a,t){return t-a?function(n,a,t){return n=Math.pow(n,t),a=Math.pow(a,t)-n,t=1/t,function(r){return Math.pow(n+r*a,t)}}(a,t,n):_k(isNaN(a)?t:a)}}(a);function r(o,u){var f=t((o=yE(o)).r,(u=yE(u)).r),h=t(o.g,u.g),v=t(o.b,u.b),g=wk(o.opacity,u.opacity);return function(y){return o.r=f(y),o.g=h(y),o.b=v(y),o.opacity=g(y),o+""}}return r.gamma=n,r}(1);function Ek(n){return function(a){var f,h,t=a.length,r=new Array(t),o=new Array(t),u=new Array(t);for(f=0;f<t;++f)h=yE(a[f]),r[f]=h.r||0,o[f]=h.g||0,u[f]=h.b||0;return r=n(r),o=n(o),u=n(u),h.opacity=1,function(v){return h.r=r(v),h.g=o(v),h.b=u(v),h+""}}}Ek(function(n){var a=n.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,a-1):Math.floor(t*a),o=n[r],u=n[r+1];return yk((t-r/a)*a,r>0?n[r-1]:2*o-u,o,u,r<a-1?n[r+2]:2*u-o)}}),Ek(function(n){var a=n.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*a);return yk((t-r/a)*a,n[(r+a-1)%a],n[r%a],n[(r+1)%a],n[(r+2)%a])}});var KD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$D=new RegExp(KD.source,"g");function m$(n,a){var r,o,u,t=KD.lastIndex=$D.lastIndex=0,f=-1,h=[],v=[];for(n+="",a+="";(r=KD.exec(n))&&(o=$D.exec(a));)(u=o.index)>t&&(u=a.slice(t,u),h[f]?h[f]+=u:h[++f]=u),(r=r[0])===(o=o[0])?h[f]?h[f]+=o:h[++f]=o:(h[++f]=null,v.push({i:f,x:Fc(r,o)})),t=$D.lastIndex;return t<a.length&&(u=a.slice(t),h[f]?h[f]+=u:h[++f]=u),h.length<2?v[0]?function(n){return function(a){return n(a)+""}}(v[0].x):function(n){return function(){return n}}(a):(a=v.length,function(g){for(var _,y=0;y<a;++y)h[(_=v[y]).i]=_.x(g);return h.join("")})}function bk(n,a){var t;return("number"==typeof a?Fc:a instanceof Jy?Sk:(t=Jy(a))?(a=t,Sk):m$)(n,a)}function y$(n){return function(){this.removeAttribute(n)}}function _$(n){return function(){this.removeAttributeNS(n.space,n.local)}}function C$(n,a,t){var r,u,o=t+"";return function(){var f=this.getAttribute(n);return f===o?null:f===r?u:u=a(r=f,t)}}function w$(n,a,t){var r,u,o=t+"";return function(){var f=this.getAttributeNS(n.space,n.local);return f===o?null:f===r?u:u=a(r=f,t)}}function S$(n,a,t){var r,o,u;return function(){var f,v,h=t(this);return null==h?void this.removeAttribute(n):(f=this.getAttribute(n))===(v=h+"")?null:f===r&&v===o?u:(o=v,u=a(r=f,h))}}function E$(n,a,t){var r,o,u;return function(){var f,v,h=t(this);return null==h?void this.removeAttributeNS(n.space,n.local):(f=this.getAttributeNS(n.space,n.local))===(v=h+"")?null:f===r&&v===o?u:(o=v,u=a(r=f,h))}}function x$(n,a){return function(t){this.setAttribute(n,a.call(this,t))}}function R$(n,a){return function(t){this.setAttributeNS(n.space,n.local,a.call(this,t))}}function A$(n,a){var t,r;function o(){var u=a.apply(this,arguments);return u!==r&&(t=(r=u)&&R$(n,u)),t}return o._value=a,o}function T$(n,a){var t,r;function o(){var u=a.apply(this,arguments);return u!==r&&(t=(r=u)&&x$(n,u)),t}return o._value=a,o}function M$(n,a){return function(){WD(this,n).delay=+a.apply(this,arguments)}}function O$(n,a){return a=+a,function(){WD(this,n).delay=a}}function I$(n,a){return function(){bu(this,n).duration=+a.apply(this,arguments)}}function L$(n,a){return a=+a,function(){bu(this,n).duration=a}}function N$(n,a){if("function"!=typeof a)throw new Error;return function(){bu(this,n).ease=a}}function U$(n,a,t){var r,o,u=function(n){return(n+"").trim().split(/^|\s+/).every(function(a){var t=a.indexOf(".");return t>=0&&(a=a.slice(0,t)),!a||"start"===a})}(a)?WD:bu;return function(){var f=u(this,n),h=f.on;h!==r&&(o=(r=h).copy()).on(a,t),f.on=o}}var $$=Uy.prototype.constructor;function xk(n){return function(){this.style.removeProperty(n)}}function nX(n,a,t){return function(r){this.style.setProperty(n,a.call(this,r),t)}}function rX(n,a,t){var r,o;function u(){var f=a.apply(this,arguments);return f!==o&&(r=(o=f)&&nX(n,f,t)),r}return u._value=a,u}function uX(n){return function(a){this.textContent=n.call(this,a)}}function lX(n){var a,t;function r(){var o=n.apply(this,arguments);return o!==t&&(a=(t=o)&&uX(o)),a}return r._value=n,r}var pX=0;function hl(n,a,t,r){this._groups=n,this._parents=a,this._name=t,this._id=r}function Rk(){return++pX}var vl=Uy.prototype;hl.prototype=function(n){return Uy().transition(n)}.prototype=En({constructor:hl,select:function(n){var a=this._name,t=this._id;"function"!=typeof n&&(n=FD(n));for(var r=this._groups,o=r.length,u=new Array(o),f=0;f<o;++f)for(var y,_,h=r[f],v=h.length,g=u[f]=new Array(v),C=0;C<v;++C)(y=h[C])&&(_=n.call(y,y.__data__,C,h))&&("__data__"in y&&(_.__data__=y.__data__),g[C]=_,hE(g[C],a,t,C,g,Ws(y,t)));return new hl(u,this._parents,a,t)},selectAll:function(n){var a=this._name,t=this._id;"function"!=typeof n&&(n=FN(n));for(var r=this._groups,o=r.length,u=[],f=[],h=0;h<o;++h)for(var y,v=r[h],g=v.length,_=0;_<g;++_)if(y=v[_]){for(var S,C=n.call(y,y.__data__,_,v),R=Ws(y,t),b=0,E=C.length;b<E;++b)(S=C[b])&&hE(S,a,t,b,C,R);u.push(C),f.push(y)}return new hl(u,f,a,t)},selectChild:vl.selectChild,selectChildren:vl.selectChildren,filter:function(n){"function"!=typeof n&&(n=NN(n));for(var a=this._groups,t=a.length,r=new Array(t),o=0;o<t;++o)for(var v,u=a[o],f=u.length,h=r[o]=[],g=0;g<f;++g)(v=u[g])&&n.call(v,v.__data__,g,u)&&h.push(v);return new hl(r,this._parents,this._name,this._id)},merge:function(n){if(n._id!==this._id)throw new Error;for(var a=this._groups,t=n._groups,r=a.length,u=Math.min(r,t.length),f=new Array(r),h=0;h<u;++h)for(var C,v=a[h],g=t[h],y=v.length,_=f[h]=new Array(y),S=0;S<y;++S)(C=v[S]||g[S])&&(_[S]=C);for(;h<r;++h)f[h]=a[h];return new hl(f,this._parents,this._name,this._id)},selection:function(){return new $$(this._groups,this._parents)},transition:function(){for(var n=this._name,a=this._id,t=Rk(),r=this._groups,o=r.length,u=0;u<o;++u)for(var v,f=r[u],h=f.length,g=0;g<h;++g)if(v=f[g]){var y=Ws(v,a);hE(v,n,t,g,f,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new hl(r,this._parents,n,t)},call:vl.call,nodes:vl.nodes,node:vl.node,size:vl.size,empty:vl.empty,each:vl.each,on:function(n,a){var t=this._id;return arguments.length<2?Ws(this.node(),t).on.on(n):this.each(U$(t,n,a))},attr:function(n,a){var t=aE(n),r="transform"===t?JK:bk;return this.attrTween(n,"function"==typeof a?(t.local?E$:S$)(t,r,zD(this,"attr."+n,a)):null==a?(t.local?_$:y$)(t):(t.local?w$:C$)(t,r,a))},attrTween:function(n,a){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(null==a)return this.tween(t,null);if("function"!=typeof a)throw new Error;var r=aE(n);return this.tween(t,(r.local?A$:T$)(r,a))},style:function(n,a,t){var r="transform"==(n+="")?XK:bk;return null==a?this.styleTween(n,function(n,a){var t,r,o;return function(){var u=lv(this,n),f=(this.style.removeProperty(n),lv(this,n));return u===f?null:u===t&&f===r?o:o=a(t=u,r=f)}}(n,r)).on("end.style."+n,xk(n)):"function"==typeof a?this.styleTween(n,function(n,a,t){var r,o,u;return function(){var f=lv(this,n),h=t(this),v=h+"";return null==h&&(this.style.removeProperty(n),v=h=lv(this,n)),f===v?null:f===r&&v===o?u:(o=v,u=a(r=f,h))}}(n,r,zD(this,"style."+n,a))).each(function(n,a){var t,r,o,h,u="style."+a,f="end."+u;return function(){var v=bu(this,n),g=v.on,y=null==v.value[u]?h||(h=xk(a)):void 0;(g!==t||o!==y)&&(r=(t=g).copy()).on(f,o=y),v.on=r}}(this._id,n)):this.styleTween(n,function(n,a,t){var r,u,o=t+"";return function(){var f=lv(this,n);return f===o?null:f===r?u:u=a(r=f,t)}}(n,r,a),t).on("end.style."+n,null)},styleTween:function(n,a,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==a)return this.tween(r,null);if("function"!=typeof a)throw new Error;return this.tween(r,rX(n,a,null==t?"":t))},text:function(n){return this.tween("text","function"==typeof n?function(n){return function(){var a=n(this);this.textContent=null==a?"":a}}(zD(this,"text",n)):function(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function(n){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(null==n)return this.tween(a,null);if("function"!=typeof n)throw new Error;return this.tween(a,lX(n))},remove:function(){return this.on("end.remove",function(n){return function(){var a=this.parentNode;for(var t in this.__transition)if(+t!==n)return;a&&a.removeChild(this)}}(this._id))},tween:function(n,a){var t=this._id;if(n+="",arguments.length<2){for(var f,r=Ws(this.node(),t).tween,o=0,u=r.length;o<u;++o)if((f=r[o]).name===n)return f.value;return null}return this.each((null==a?ZK:QK)(t,n,a))},delay:function(n){var a=this._id;return arguments.length?this.each(("function"==typeof n?M$:O$)(a,n)):Ws(this.node(),a).delay},duration:function(n){var a=this._id;return arguments.length?this.each(("function"==typeof n?I$:L$)(a,n)):Ws(this.node(),a).duration},ease:function(n){var a=this._id;return arguments.length?this.each(N$(a,n)):Ws(this.node(),a).ease},easeVarying:function(n){if("function"!=typeof n)throw new Error;return this.each(function(n,a){return function(){var t=a.apply(this,arguments);if("function"!=typeof t)throw new Error;bu(this,n).ease=t}}(this._id,n))},end:function(){var n,a,t=this,r=t._id,o=t.size();return new Promise(function(u,f){var h={value:f},v={value:function(){0==--o&&u()}};t.each(function(){var g=bu(this,r),y=g.on;y!==n&&((a=(n=y).copy())._.cancel.push(h),a._.interrupt.push(h),a._.end.push(v)),g.on=a}),0===o&&u()})}},Symbol.iterator,vl[Symbol.iterator]);var gX={time:null,delay:0,duration:250,ease:function(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};function mX(n,a){for(var t;!(t=n.__transition)||!(t=t[a]);)if(!(n=n.parentNode))throw new Error("transition ".concat(a," not found"));return t}function Zy(n){return{type:n}}function hv(n,a,t){this.k=n,this.x=a,this.y=t}function LX(n,a){1&n&&(s(0,"div"),s(1,"p"),Pe(2,"Fetching..."),l(),l())}function FX(n,a){1&n&&(s(0,"div"),s(1,"p"),Pe(2,"Sorry, this app had a problem getting that info."),l(),l())}function NX(n,a){if(1&n&&c(0,"div",34),2&n){var t=Fe(2).index,r=Fe(4);Tm("width",r.DISPLAY_WIDTH,"px")("height",r.DISPLAY_HEIGHT,"px"),d("id","model_display_"+t)}}function kX(n,a){if(1&n&&(s(0,"div",35),c(1,"img",36),l()),2&n){var t=Fe().$implicit,r=Fe(5);Tm("width",r.DISPLAY_WIDTH,"px")("height",r.DISPLAY_HEIGHT,"px"),be(1),d("src",t.screenshotDataUrl,Ci)}}function GX(n,a){if(1&n&&(s(0,"div",31),gt(1,NX,1,5,"div",32),gt(2,kX,2,5,"div",33),l()),2&n){var t=a.$implicit;be(1),d("ngIf",!t.screenshotDataUrl),be(1),d("ngIf",t.screenshotDataUrl)}}function BX(n,a){if(1&n&&(s(0,"span"),Pe(1),l()),2&n){var t=Fe().$implicit;be(1),S0("\xa0@\xa0xyz(",t.x,", ",t.y,", ",t.z,")")}}function HX(n,a){if(1&n&&(s(0,"div"),s(1,"span",23),Pe(2),l(),s(3,"span"),Pe(4," ( "),c(5,"div",37),Pe(6," ) "),gt(7,BX,2,3,"span",12),l(),l()),2&n){var t=a.$implicit,r=a.index;be(2),Vr("",3==r?"G":r+1,":"),be(3),Tm("background-color","rgb("+t.r+","+t.g+","+t.b+")"),be(2),d("ngIf",null!=t.x)}}function VX(n,a){if(1&n&&(s(0,"span"),s(1,"span",23),Pe(2),l(),Pe(3),l()),2&n){var t=a.$implicit,r=a.index;be(2),Vr("",r,":"),be(1),Vr("\xa0",t.substring(0,4)," ")}}Uy.prototype.interrupt=function(n){return this.each(function(){!function(n,a){var r,o,f,t=n.__transition,u=!0;if(t){for(f in a=null==a?null:a+"",t)(r=t[f]).name===a?(o=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(o?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[f]):u=!1;u&&delete n.__transition}}(this,n)})},Uy.prototype.transition=function(n){var a,t;n instanceof hl?(a=n._id,n=n._name):(a=Rk(),(t=gX).time=GD(),n=null==n?null:n+"");for(var r=this._groups,o=r.length,u=0;u<o;++u)for(var v,f=r[u],h=f.length,g=0;g<h;++g)(v=f[g])&&hE(v,n,a,g,f,t||mX(v,a));return new hl(r,this._parents,n,a)},Math,Math,Math,["w","e"].map(Zy),["n","s"].map(Zy),["n","w","e","s","nw","ne","sw","se"].map(Zy),hv.prototype={constructor:hv,scale:function(a){return 1===a?this:new hv(this.k*a,this.x,this.y)},translate:function(a,t){return 0===a&0===t?this:new hv(this.k,this.x+this.k*a,this.y+this.k*t)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new hv(1,0,0);var Qy=function(a){return[a]},WX=function(a,t,r,o){return[a,t,r,o]};function UX(n,a){if(1&n&&(s(0,"div",26),gt(1,GX,3,2,"div",27),s(2,"div",28),s(3,"b"),Pe(4),l(),l(),c(5,"div",29),s(6,"b"),Pe(7,"Model:"),l(),Pe(8,"\xa0"),s(9,"a",30),Pe(10),l(),Pe(11," \xb7 "),s(12,"b"),Pe(13,"Scale:"),l(),Pe(14),c(15,"br"),s(16,"div",23),Pe(17,"Lights:"),l(),gt(18,HX,8,4,"div",15),s(19,"div",23),Pe(20,"Animations:"),l(),gt(21,VX,4,2,"span",15),c(22,"br"),l()),2&n){var t=a.$implicit,r=Fe(4);be(1),d("ngForOf",fh(7,Qy,r.getDisplay(t.hrcId))),be(3),Qn(t.name),be(5),Jn("href","field-model-details/",t.hrcIdShort,"",Ci),be(1),Qn(t.hrcId),be(4),Vr(" ",t.scaleString," "),be(4),d("ngForOf",rP(9,WX,t.light1,t.light2,t.light3,t.globalLight)),be(3),d("ngForOf",t.animations)}}function zX(n,a){if(1&n&&(s(0,"div",21),s(1,"div",3),Pe(2,"Model Loader Section"),l(),c(3,"div",13),s(4,"div"),Pe(5),l(),c(6,"div",22),s(7,"div",23),Pe(8,"Model Loaders"),l(),s(9,"div",24),gt(10,UX,23,14,"div",25),l(),l()),2&n){var t=a.$implicit;be(5),Vr("Scale: ",t.header.modelScale,""),be(5),d("ngForOf",t.modelLoaders)}}function jX(n,a){if(1&n){var t=I();s(0,"div",39),s(1,"div",40),s(2,"b"),Pe(3,"From Line:"),l(),Pe(4),l(),s(5,"div",40),s(6,"b"),Pe(7,"To Map:"),l(),Pe(8,"\xa0"),s(9,"a",41),oe("click",function(){var f=ys(t).$implicit;return Fe(4).onSelectFieldName(f.fieldName)}),Pe(10),l(),Pe(11," \xa0 "),s(12,"b"),Pe(13,"Position:"),l(),Pe(14),l(),l()}if(2&n){var r=a.$implicit;be(4),IR(" (",r.exitLineVertex1.x,", ",r.exitLineVertex1.y,", ",r.exitLineVertex1.z,") - (",r.exitLineVertex2.x,", ",r.exitLineVertex2.y,", ",r.exitLineVertex2.z,") "),be(6),du("",r.fieldName," (",r.fieldId,")"),be(4),S0("\xa0 (",r.destinationVertex.x,", ",r.destinationVertex.y,", ",r.destinationVertex.z,") ")}}function qX(n,a){if(1&n&&(s(0,"div",21),s(1,"div",3),Pe(2,"Triggers/Gateways Section"),l(),c(3,"div",13),s(4,"div",24),gt(5,jX,15,11,"div",38),l(),l()),2&n){var t=a.$implicit;be(5),d("ngForOf",t.gateways)}}function YX(n,a){if(1&n&&(s(0,"div",50),s(1,"div",51),Pe(2),l(),s(3,"div",52),Pe(4),l(),l()),2&n){var t=a.$implicit;be(2),Qn(t.raw),be(2),Qn(t.js)}}function KX(n,a){if(1&n&&(s(0,"div",47),s(1,"div"),s(2,"b"),Pe(3),l(),l(),c(4,"div",48),gt(5,YX,5,2,"div",49),l()),2&n){var t=a.$implicit;be(3),Vr("script ",t.index,":"),be(2),d("ngForOf",t.ops)}}function $X(n,a){if(1&n&&(s(0,"div",43),s(1,"div",44),Pe(2),s(3,"span",45),Pe(4),l(),l(),c(5,"div",22),gt(6,KX,6,2,"div",46),l()),2&n){var t=a.$implicit,r=a.index;be(2),Vr("#",r,": "),be(2),Vr('"',t.entityName,'"'),be(2),d("ngForOf",t.scripts)}}function XX(n,a){if(1&n&&(s(0,"div",21),s(1,"div",3),Pe(2,"Entities Section"),l(),c(3,"div",13),gt(4,$X,7,3,"div",42),l()),2&n){var t=a.$implicit;be(4),d("ngForOf",t)}}function JX(n,a){if(1&n&&(s(0,"div"),c(1,"div",19),gt(2,zX,11,2,"div",20),c(3,"div",19),gt(4,qX,6,1,"div",20),c(5,"div",13),gt(6,XX,5,1,"div",20),c(7,"div",13),l()),2&n){var t=Fe(2);be(2),d("ngForOf",fh(3,Qy,t.scene.model)),be(2),d("ngForOf",fh(5,Qy,t.scene.triggers)),be(2),d("ngForOf",fh(7,Qy,t.scene.script.entities))}}function ZX(n,a){if(1&n&&(s(0,"div",54),s(1,"a",55),Pe(2),l(),c(3,"br"),Pe(4),c(5,"br"),c(6,"img",18),l()),2&n){var t=Fe().$implicit,r=Fe(2);be(1),d("routerLink","/scene-details/"+t.sourceName),be(1),Qn(t.sourceName),be(2),Vr(" ",t.sourceFieldMenuName,""),be(2),d("src",r.environment.KUJATA_DATA_BASE_URL+"/metadata/makou-reactor/backgrounds/"+t.sourceName+".png",Ci)}}function QX(n,a){if(1&n&&(w(0),gt(1,ZX,7,4,"div",53),x()),2&n){var t=a.$implicit;be(1),d("ngIf","inbound"==t.direction)}}function eJ(n,a){if(1&n&&(s(0,"div",54),s(1,"a",55),Pe(2),l(),c(3,"br"),Pe(4),c(5,"br"),c(6,"img",18),l()),2&n){var t=Fe().$implicit,r=Fe(2);be(1),d("routerLink","/scene-details/"+t.targetName),be(1),Qn(t.targetName),be(2),Vr(" ",t.targetFieldMenuName,""),be(2),d("src",r.environment.KUJATA_DATA_BASE_URL+"/metadata/makou-reactor/backgrounds/"+t.targetName+".png",Ci)}}function tJ(n,a){if(1&n&&(w(0),gt(1,eJ,7,4,"div",53),x()),2&n){var t=a.$implicit;be(1),d("ngIf","outbound"==t.direction)}}function nJ(n,a){1&n&&(s(0,"div",21),s(1,"div",3),Pe(2,"Entity Script Visualization (Experimental)"),l(),c(3,"div",13),s(4,"div",56),Ut.lFrame.currentNamespace=zv,s(5,"svg",57),s(6,"style"),Pe(7," text { font-size: 8pt; } tspan { font-size: 8pt; } "),l(),l(),l(),l())}function rJ(n,a){if(1&n&&(w(0),gt(1,nJ,8,0,"div",20),x()),2&n){var t=Fe(2);be(1),d("ngForOf",fh(1,Qy,t.scene.model))}}function iJ(n,a){if(1&n&&(s(0,"div",1),s(1,"div",2),s(2,"div",3),Pe(3),l(),s(4,"div",4),Pe(5),l(),l(),s(6,"div",2),s(7,"div",5),s(8,"div",6),s(9,"div",7),Pe(10,"Background"),l(),s(11,"div",8),c(12,"img",9),l(),l(),c(13,"div",10),s(14,"div"),s(15,"div",7),Pe(16,"Walkmesh"),l(),c(17,"div",11),l(),l(),l(),gt(18,LX,3,0,"div",12),gt(19,FX,3,0,"div",12),gt(20,JX,8,9,"div",12),c(21,"div",13),s(22,"div",14),s(23,"div",3),Pe(24,"Field Links (Experimental)"),l(),s(25,"div",4),Pe(26,"(Based on Gateway data and Mapjump Ops)"),l(),c(27,"div",13),s(28,"div",5),gt(29,QX,2,1,"ng-container",15),s(30,"div",16),Pe(31,"\u2192"),l(),w(32),s(33,"div",17),s(34,"b"),Pe(35),l(),c(36,"br"),s(37,"b"),Pe(38),l(),c(39,"br"),c(40,"img",18),l(),x(),s(41,"div",16),Pe(42,"\u2192"),l(),gt(43,tJ,2,1,"ng-container",15),l(),l(),c(44,"div",13),gt(45,rJ,2,3,"ng-container",12),l()),2&n){var t=Fe();be(3),Qn(t.selectedFieldName),be(2),Qn(t.selectedFieldMenuName),be(7),d("src","https://makou-reactor-bg-images.netlify.app/"+t.selectedFieldName+".png",Ci),be(6),d("ngIf","FETCHING"==t.fetchStatus),be(1),d("ngIf","ERROR"==t.fetchStatus),be(1),d("ngIf","SUCCESS"==t.fetchStatus),be(9),d("ngForOf",t.fieldLinks),be(6),Qn(t.selectedFieldName),be(3),Qn(t.selectedFieldMenuName),be(2),d("src",t.environment.KUJATA_DATA_BASE_URL+"/metadata/makou-reactor/backgrounds/"+t.selectedFieldName+".png",Ci),be(3),d("ngForOf",t.fieldLinks),be(2),d("ngIf",t.scene)}}var oJ=function(){var n=function(){function a(t,r){G(this,a),this.route=t,this.http=r,this.fetchStatus="NONE",this.fieldLinks=null,this.environment=ir,this.mapList=null,this.sceneGraph=null,this.fieldIdToFieldMetadataMap=null,this.fieldNameToFieldMetadataMap=null,this.selectedFieldName=null,this.selectedFieldMenuName=null,this.GRID_X=150,this.GRID_Y=75,this.PSX_RES_X=320,this.PSX_RES_Y=224,this.NODE_SPACE_PROPORTION=.8,this.LABEL_LINE_LENGTH=18,this.DISPLAY_WIDTH=100,this.DISPLAY_HEIGHT=100,this.rendererGlobal=new gf({alpha:!0,antialias:!0}),this.displayMap=null,this.isDestroyed=!1,console.log("scene-details component constructor")}return j(a,[{key:"ngOnInit",value:function(){var r=this;console.log("scene-details component ngOnInit()"),this.clock=new Gy;var o=ir.KUJATA_DATA_BASE_URL+"/data/field/flevel.lgp/maplist.json";this.http.get(o).subscribe(function(u){r.mapList=u,console.log("this.mapList:",r.mapList),r.initialize()},function(u){r.fetchStatus="ERROR"}),this.http.get(o=ir.KUJATA_DATA_BASE_URL+"/metadata/scene-graph.json").subscribe(function(u){r.sceneGraph=u,r.fieldIdToFieldMetadataMap={},r.fieldNameToFieldMetadataMap={};var h,f=Ft(r.sceneGraph.nodes);try{for(f.s();!(h=f.n()).done;){var v=h.value;r.fieldIdToFieldMetadataMap[v.id]=v,r.fieldNameToFieldMetadataMap[v.fieldName]=v}}catch(g){f.e(g)}finally{f.f()}r.initialize()},function(u){r.fetchStatus="ERROR"}),this.route.paramMap.subscribe(function(u){var f=u.get("name");r.selectedFieldName=f,r.initialize()})}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0}},{key:"idToMetadata",value:function(r){return this.fieldIdToFieldMetadataMap[r]}},{key:"fieldNameToMetadata",value:function(r){return this.fieldNameToFieldMetadataMap[r]}},{key:"idFor",value:function(r){return this.fieldNameToMetadata(r).id}},{key:"fieldNameFor",value:function(r){return this.idToMetadata(r).fieldName}},{key:"getFieldMenuName",value:function(r){return""!==r.mapName?r.mapName:r.fieldName}},{key:"initialize",value:function(){var r=this;if(null!=this.mapList&&null!=this.sceneGraph&&null!=this.selectedFieldName){console.log("ready to initialize!");var o=this.fieldNameToMetadata(this.selectedFieldName),u=o.id;this.selectedFieldMenuName=this.getFieldMenuName(o),this.fieldLinks=[];var g,f={},h={},v=Ft(this.sceneGraph.links);try{for(v.s();!(g=v.n()).done;){var y=g.value;if(y.source==u){var _=this.idToMetadata(y.target);h[_.id]={direction:"outbound",sourceId:u,sourceName:this.selectedFieldName,targetId:_.id,targetName:_.fieldName,targetFieldMenuName:this.getFieldMenuName(_)}}if(y.target==u){var C=this.idToMetadata(y.source);f[C.id]={direction:"inbound",sourceId:C.id,sourceName:C.fieldName,sourceFieldMenuName:this.getFieldMenuName(C),targetId:u,targetName:this.selectedFieldName}}}}catch(O){v.e(O)}finally{v.f()}for(var S=0,R=Object.keys(f);S<R.length;S++)this.fieldLinks.push(f[R[S]]);for(var E=0,T=Object.keys(h);E<T.length;E++)this.fieldLinks.push(h[T[E]]);console.log("this.fieldLinks:",this.fieldLinks),this.fetchStatus="FETCHING",this.http.get(ir.KUJATA_DATA_BASE_URL+"/data/field/flevel.lgp/"+this.selectedFieldName+".json").subscribe(function(O){r.fetchStatus="SUCCESS",r.scene=O,r.displays=[],r.displayMap={};for(var L=r.scene.model.modelLoaders,H=0;H<L.length;H++){var z=L[H];z.hrcIdShort=z.hrcId.toLowerCase().replace(".hrc","");var X=r.createEmptyDisplay({id:z.hrcId,name:"TODO"},"model_display_"+H,200,200);r.displays.push(X),r.displayMap[z.hrcId]=X}setTimeout(function(){r.recursiveLoadSkeletonAndAddToDisplay(0)},250),setTimeout(function(){r.buildGraph()},250),r.createWalkmeshDisplay()},function(O){r.fetchStatus="ERROR"})}}},{key:"createWalkmeshDisplay",value:function(){console.log("Creating walkmesh display...");var r=document.getElementById("walkmesh-container");if(r){for(;r.firstChild;)r.removeChild(r.firstChild);var o=this.scene;console.log("flevel:",o);var u=o.cameraSection.cameras[0],f=2*Math.atan(240/(2*u.zoom))*57.29577951;this.walkmeshRenderer=new gf({alpha:!0,antialias:!0}),this.walkmeshRenderer.setSize(410,240),this.walkmeshScene=new Qh,this.walkmeshScene.background=new un(2236962),this.walkmeshCamera=new di(f,410/240,.001/4096,24.4140625);var y=-u.yAxis.x/4096,_=-u.yAxis.y/4096,C=-u.yAxis.z/4096,S=u.zAxis.x/4096,R=u.zAxis.y/4096,b=u.zAxis.z/4096,E=u.position.x/4096,T=-u.position.y/4096,D=u.position.z/4096,M=-(E*(u.xAxis.x/4096)+T*y+D*S),O=-(E*(u.xAxis.y/4096)+T*_+D*R),L=-(E*(u.xAxis.z/4096)+T*C+D*b);this.walkmeshCamera.position.x=M,this.walkmeshCamera.position.y=O,this.walkmeshCamera.position.z=L,this.walkmeshCamera.lookAt(M+S,O+R,L+b),this.walkmeshCamera.up.set(y,_,C),this.walkmeshCamera.updateProjectionMatrix(),this.walkmeshScene.add(this.walkmeshCamera);var H=new wf(16777215);H.position.set(0,0,50).normalize(),this.walkmeshScene.add(H);var z=new sv(4210752);this.walkmeshScene.add(z);for(var W=o.walkmeshSection.triangles.length,X=0;X<W;X++){var ne=o.walkmeshSection.triangles[X],le=o.walkmeshSection.accessors[X],ue=new J(ne.vertices[0].x/4096,ne.vertices[0].y/4096,ne.vertices[0].z/4096),k=new J(ne.vertices[1].x/4096,ne.vertices[1].y/4096,ne.vertices[1].z/4096),ee=new J(ne.vertices[2].x/4096,ne.vertices[2].y/4096,ne.vertices[2].z/4096),ie=function(ke,je,We,Ue){var Ht=new YS({color:-1==Ue?4491468:8947848}),et=new Mr;et.vertices.push(je),et.vertices.push(We);var Ot=new Ry(et,Ht);ke.add(Ot)};ie(this.walkmeshScene,ue,k,le[0]),ie(this.walkmeshScene,k,ee,le[1]),ie(this.walkmeshScene,ee,ue,le[2])}var ae,se=Ft(o.triggers.gateways);try{for(se.s();!(ae=se.n()).done;){var ge=ae.value,Ee=ge.exitLineVertex1,_e=ge.exitLineVertex2,me=(ue=new J(Ee.x/4096,Ee.y/4096,Ee.z/4096),k=new J(_e.x/4096,_e.y/4096,_e.z/4096),new YS({color:16711680})),Ge=new Mr;Ge.vertices.push(ue),Ge.vertices.push(k);var Se=new Ry(Ge,me);this.walkmeshScene.add(Se)}}catch(Xe){se.e(Xe)}finally{se.f()}this.walkmeshControls=new LD(this.walkmeshCamera,this.walkmeshRenderer.domElement),this.walkmeshControls.target=new J(M+S,O+R,L+b),this.walkmeshControls.panSpeed=1/4,this.walkmeshControls.rotateSpeed=1/4,this.walkmeshControls.zoomSpeed=1/4,this.walkmeshControls.update(),r.appendChild(this.walkmeshRenderer.domElement),this.walkmeshRenderer.render(this.walkmeshScene,this.walkmeshCamera);var Ae=this;!function Xe(){if(Ae&&!Ae.isDestroyed){requestAnimationFrame(Xe);var ke=Ae.clock.getDelta();Ae.walkmeshControls&&Ae.walkmeshControls.update(ke),Ae.walkmeshRenderer&&Ae.walkmeshScene&&Ae.walkmeshCamera&&Ae.walkmeshRenderer.render(Ae.walkmeshScene,Ae.walkmeshCamera)}else console.log("stopping walkmeshTick()")}()}else console.log("WARN: Could not find walkmeshContainerElement")}},{key:"createEmptyDisplay",value:function(r,o,u,f){var h={containerId:o,skeleton:r,scene:new Qh,camera:new di(45,this.DISPLAY_WIDTH/this.DISPLAY_HEIGHT,.1,1e3),renderer:null};h.containerId=o,h.scene.background=new un(5263440),h.scene.add(h.camera);var v=new wf(16777215);v.position.set(0,0,50).normalize(),h.scene.add(v);var g=new sv(4210752);return h.scene.add(g),h.camera.position.x=0,h.camera.position.y=33.53,h.camera.position.z=60,h.camera.lookAt(new J(0,13.53,0)),h}},{key:"getDisplay",value:function(r){return this.displayMap[r]}},{key:"showDisplay",value:function(r,o,u){var f=r.displays[o];f.renderer=r.rendererGlobal,f.renderer.setSize(this.DISPLAY_WIDTH,this.DISPLAY_HEIGHT);var h=document.getElementById(f.containerId);h?(h.appendChild(f.renderer.domElement),f.renderer.render(f.scene,f.camera),f.screenshotDataUrl=f.renderer.domElement.toDataURL(),f.renderer.dispose(),f.renderer=null):console.log("WARN: Could not find element by display.containerId, display: ",f)}},{key:"recursiveLoadSkeletonAndAddToDisplay",value:function(r){var o=this;if(!(r>=o.displays.length)){var u=o.displays[r],f=u.skeleton;(new By).load(ir.KUJATA_DATA_BASE_URL+"/data/field/char.lgp/"+f.id.toLowerCase()+".gltf",function(v){Wy(v);var g=v.scene,y=g.children[0];y.position.x=0,y.position.y=0,y.position.z=0,u.scene.add(g),o.showDisplay(o,r,10),o.recursiveLoadSkeletonAndAddToDisplay(r+1)},void 0,function(v){console.error("oops!",v),o.recursiveLoadSkeletonAndAddToDisplay(r+1)})}}},{key:"addNodeToGraphAndMap",value:function(r){this.graph.nodes.push(r),this.nodeMap[r.id]=r}},{key:"buildGraph",value:function(){this.graph={rows:[],nodes:[],links:[]},this.nodeMap={};for(var o=0,u=0,f=[],h=0;h<this.scene.script.entities.length;h++)for(var v=this.scene.script.entities[h],g=0;g<v.scripts.length;g++){var y=v.scripts[g];if(y.ops.length<=1)console.log("Skipping script of length <= 1, ops = ",y.ops);else{var _=[];u=0;var C={type:"scriptStart",id:"scriptStart|"+h+"|"+g,row:o,col:u++,name:h+":"+v.entityName+", Script "+g,labelLines:[]};C.labelLines=this.stringToLines(C.name,this.LABEL_LINE_LENGTH),_.push(C),this.addNodeToGraphAndMap(C);for(var S=0;S<y.ops.length;S++){var R=y.ops[S],b={type:"RET"==R.op?"scriptEnd":"op",id:"op|"+h+"|"+g+"|"+S,row:o,col:u++,name:R.js,pres:R.pres,labelLines:[]};b.labelLines=this.stringToLines(b.pres?b.pres:b.name,this.LABEL_LINE_LENGTH),_.push(b),this.addNodeToGraphAndMap(b),this.graph.links.push({source:this.graph.nodes[this.graph.nodes.length-2],target:b,type:"script"}),("REQ"==R.op||"REQSW"==R.op||"REQEW"==R.op)&&f.push({source:b,targetId:"scriptStart|"+R.e+"|"+R.f,type:"REQ"})}this.graph.rows.push(_),o++}}for(var M=0,O=f;M<O.length;M++){var L=O[M];L.targetId&&!L.target&&(L.target=this.nodeMap[L.targetId],L.target?this.graph.links.push(L):console.log("WARNING: Did not show link for execution of empty script:",L))}this.drawGraph()}},{key:"getNodeCenterX",value:function(r){return(r.col+this.NODE_SPACE_PROPORTION)*this.GRID_X}},{key:"getNodeCenterY",value:function(r){return(r.row+this.NODE_SPACE_PROPORTION)*this.GRID_Y}},{key:"getNodeWidth",value:function(r){return this.GRID_X/2*this.NODE_SPACE_PROPORTION*2}},{key:"getNodeHeight",value:function(r){return this.GRID_Y/2*this.NODE_SPACE_PROPORTION*2}},{key:"getNodeRightEdgeX",value:function(r){return this.getNodeCenterX(r)+this.getNodeWidth(r)/2}},{key:"getNodeLeftEdgeX",value:function(r){return this.getNodeCenterX(r)-this.getNodeWidth(r)/2}},{key:"lastIndexOfMulti",value:function(r,o){var h,u=-1,f=Ft(o);try{for(f.s();!(h=f.n()).done;){var g=r.lastIndexOf(h.value);g>u&&(u=g)}}catch(y){f.e(y)}finally{f.f()}return u}},{key:"stringToLines",value:function(r,o){if(!o)throw new Error("maxLineLength required");for(var u=[],f=r;u.length<10;){if(f.length<=o)return u.push(f),u;var v=f.substring(0,o),g=this.lastIndexOfMulti(v,[" ","{","("]);-1==g&&(g=o);var y=f.substring(0,g+1);u.push(y),f=f.substring(g+1)}return console.log("WARNING: maxines reached!"),u}},{key:"drawGraph",value:function(){var r=this;console.log("graph:",this.graph);var o=function(n){return new wa([[document.querySelector(n)]],[document.documentElement])}("svg");o.selectAll("g").remove();var u=o.append("g").attr("class","view"),f=u.append("g").attr("class","links").selectAll("line").data(this.graph.links).enter().append("line").attr("stroke-width",function(C){return 2}).attr("stroke",function(C){return"gray"}),h=u.append("g").attr("class","nodes").selectAll("g").data(this.graph.nodes).enter().append("g").attr("transform",function(C){return"translate("+r.getNodeCenterX(C)+" "+r.getNodeCenterY(C)+")"});f.attr("x1",function(C){return r.getNodeRightEdgeX(C.source)}).attr("y1",function(C){return r.getNodeCenterY(C.source)}).attr("x2",function(C){return r.getNodeLeftEdgeX(C.target)}).attr("y2",function(C){return r.getNodeCenterY(C.target)}),h.append("rect").attr("rx",function(C){return.05*r.GRID_X}).attr("ry",function(C){return.05*r.GRID_X}).attr("x",function(C){return-r.getNodeWidth(C)/2}).attr("y",function(C){return-r.getNodeHeight(C)/2}).attr("width",function(C){return r.getNodeWidth(C)}).attr("height",function(C){return r.getNodeHeight(C)}).attr("stroke",function(C){return"scriptStart"==C.type?"#339933":"scriptEnd"==C.type?"#993333":"gray"}).attr("stroke-width","2").attr("fill",function(C){return"white"});for(var g=h.append("text").attr("fill",function(C){return"#333"}).attr("x",0).attr("y",function(C){return C.labelLines||console.log("This does not have labelLines:",C),-C.labelLines.length/2-.5+"em"}).attr("text-anchor","middle").attr("alignment-baseline","central"),y=function(S){g.filter(function(R){return R.labelLines.length>S}).append("tspan").attr("x",0).attr("dy","1em").attr("text-anchor","middle").attr("alignment-baseline","central").text(function(R){return R.labelLines[S]})},_=0;_<10;_++)y(_)}},{key:"onSelectHrcId",value:function(r){}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(mu),lt(hu))},n.\u0275cmp=Kr({type:n,selectors:[["scene-details"]],decls:1,vars:1,consts:[["style","background-color:#c0c0c0; padding:4px;",4,"ngIf"],[2,"background-color","#c0c0c0","padding","4px"],[2,"background-color","white","padding","4px","margin-bottom","4px"],[2,"font-size","20pt","color","#404040"],[2,"font-size","16pt","color","#808080"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","font-size","10pt","background-color","#e0e0e0","padding","16px"],[2,"width","410px"],[2,"font-size","12pt","text-align","center"],[2,"width","410px","height","240px","background-color","#222222","text-align","center"],[2,"display","inline-block","max-width","410px","max-height","240px","width","auto","height","auto","padding","0px","margin","0",3,"src"],[2,"width","4px"],["id","walkmesh-container",2,"display","inline-block","width","410px","height","240px","background-color","#222222","padding","0px"],[4,"ngIf"],[2,"height","16px"],[2,"width","100%","height","100%","padding","16px","background-color","white"],[4,"ngFor","ngForOf"],[2,"padding","100px 8px 8px 8px"],[2,"width","200px","height","250px","text-align","center","background-color","white","border","solid #555 2px"],[2,"max-width","200px","max-height","200px","width","auto","height","auto",3,"src"],[2,"height","1em"],["style","background-color:white; padding:16px;",4,"ngFor","ngForOf"],[2,"background-color","white","padding","16px"],[2,"height","8px"],[2,"font-weight","bold"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","background-color","#e0e0e0","padding","16px","margin-bottom","16px"],["style","font-size:8pt; background-color:white; width:260px; height:450px; padding:16px; margin:0px 16px 16px 0px;",4,"ngFor","ngForOf"],[2,"font-size","8pt","background-color","white","width","260px","height","450px","padding","16px","margin","0px 16px 16px 0px"],["style","background-color:white; margin:16px 16px 16px 16px;",4,"ngFor","ngForOf"],[2,"font-size","10pt","margin","auto","text-align","center"],[2,"height","1.0em"],[3,"href"],[2,"background-color","white","margin","16px 16px 16px 16px"],["style","margin:auto; background-color:#808080",3,"width","height","id",4,"ngIf"],["style","margin:auto; background-color:white",3,"width","height",4,"ngIf"],[2,"margin","auto","background-color","#808080",3,"id"],[2,"margin","auto","background-color","white"],[3,"src"],[2,"display","inline-block","width","0.75em","height","0.75em","border","solid #808080 1px"],["style","font-size:8pt; border:solid #e0e0e0 1px; width:100; height:64; margin-right:16px; margin-bottom:16px; padding:16px; background-color:white;",4,"ngFor","ngForOf"],[2,"font-size","8pt","border","solid #e0e0e0 1px","width","100","height","64","margin-right","16px","margin-bottom","16px","padding","16px","background-color","white"],[2,"font-size","10pt"],[3,"routerLink","click"],["style","font-size:8pt; background-color:#e0e0e0; padding:16px; margin-bottom:16px; ",4,"ngFor","ngForOf"],[2,"font-size","8pt","background-color","#e0e0e0","padding","16px","margin-bottom","16px"],[2,"font-size","14pt","color","#404040"],[2,"font-size","12pt","color","#808080"],["style","background-color:white; padding:8px; margin-bottom:8px;",4,"ngFor","ngForOf"],[2,"background-color","white","padding","8px","margin-bottom","8px"],[2,"height","0.5em"],["style","font-size:8pt","class","kujata-font-mono",4,"ngFor","ngForOf"],[1,"kujata-font-mono",2,"font-size","8pt"],[2,"display","inline-block","width","24em"],[2,"display","inline-block"],["style","width:200px; height:250px; text-align:center;",4,"ngIf"],[2,"width","200px","height","250px","text-align","center"],[3,"routerLink"],[2,"width","100%","height","100%","padding","0","margin","0","background-color","#e0e0e0"],["width","100%","height","800",2,"margin","0","padding","0","font-family","'Fira Mono', monospace"]],template:function(t,r){1&t&&gt(0,iJ,46,12,"div",0),2&t&&d("ngIf",r.selectedFieldName)},directives:[pu,Cc,ks],styles:[""]}),n}();function aJ(n,a){if(1&n&&(s(0,"a",12),s(1,"div",13),s(2,"div",14),Pe(3,"0x"),s(4,"b"),Pe(5),l(),l(),s(6,"div",15),Pe(7),l(),l(),s(8,"div",16),s(9,"div",17),Pe(10),l(),l(),l()),2&n){var t=a.$implicit,r=Fe(3);d("routerLink","/field-op-code-details/"+t),be(5),Qn(t),be(2),Qn(r.opMetadata[t].shortName),be(3),Qn(r.opMetadata[t].description||t)}}function sJ(n,a){if(1&n&&(s(0,"div"),s(1,"div",9),Pe(2),l(),s(3,"div",10),gt(4,aJ,11,4,"a",11),l(),l()),2&n){var t=a.$implicit;be(2),Qn(t.name),be(2),d("ngForOf",t.opCodes)}}function uJ(n,a){if(1&n&&(s(0,"a",18),s(1,"div",14),Pe(2,"0x"),s(3,"b"),Pe(4),l(),l(),l()),2&n){var t=a.$implicit;d("routerLink","/field-op-code-details/"+t),be(4),Qn(t)}}function lJ(n,a){if(1&n&&(s(0,"div",4),s(1,"div",5),Pe(2,"Arranged by Category"),l(),c(3,"div",2),gt(4,sJ,5,2,"div",6),c(5,"div",2),s(6,"div",5),Pe(7,"All OpCodes in Numerical Order"),l(),c(8,"div",2),s(9,"div",7),gt(10,uJ,5,2,"a",8),l(),l()),2&n){var t=Fe();be(4),d("ngForOf",t.opCategories),be(6),d("ngForOf",t.opCodes)}}var cJ=function(){var n=function(){function a(t){G(this,a),this.http=t,this.opCategories=[],this.opCodes=[],this.Object=Object}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.http.get(ir.KUJATA_DATA_BASE_URL+"/metadata/op-categories.json").subscribe(function(u){r.opCategories=u,r.http.get(ir.KUJATA_DATA_BASE_URL+"/metadata/op-metadata.json").subscribe(function(h){r.opMetadata=h;for(var v=0,g=Object.keys(h);v<g.length;v++)r.opCodes.push(g[v]);r.opCodes.sort()})})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(hu))},n.\u0275cmp=Kr({type:n,selectors:[["field-op-codes"]],decls:5,vars:1,consts:[[2,"background-color","white","padding","4px","margin-bottom","4px"],[2,"font-size","24pt","color","#404040"],[2,"height","16px"],["style","font-size:12pt;",4,"ngIf"],[2,"font-size","12pt"],[2,"font-size","20pt","color","#404040"],[4,"ngFor","ngForOf"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","font-size","10pt"],["style","border:solid white 2px; color: #404040; margin:0px 4px 4px 0px; text-align:center; text-decoration:none; ",3,"routerLink",4,"ngFor","ngForOf"],[2,"font-size","16pt","color","#404040"],[1,"op-cards-container"],["class","op-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"op-card",3,"routerLink"],[2,"height","2em"],[1,"op-code"],[1,"op-short-name"],[2,"height","4em"],[1,"op-description"],[2,"border","solid white 2px","color","#404040","margin","0px 4px 4px 0px","text-align","center","text-decoration","none",3,"routerLink"]],template:function(t,r){1&t&&(s(0,"div",0),s(1,"div",1),Pe(2,"Field Op Codes"),l(),c(3,"div",2),gt(4,lJ,11,2,"div",3),l()),2&t&&(be(4),d("ngIf",r.opMetadata))},directives:[pu,Cc,ks],styles:[".op-cards-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:flex-start;align-content:flex-start;font-size:10pt;background-color:silver;padding:4px}.op-card[_ngcontent-%COMP%]{width:150px;height:120px;border:solid white 2px;background-color:#fff;color:#404040;margin:0 4px 4px 0;text-align:center;text-decoration:none;padding:4px}.op-card[_ngcontent-%COMP%]:hover{background-color:#fff;border:solid black 2px}.op-code[_ngcontent-%COMP%]{display:inline-block;width:50px;padding:4px;background-color:#d22;color:#fff}.op-short-name[_ngcontent-%COMP%]{display:inline-block;width:80px;padding:4px;background-color:gray;color:#fff}.op-description[_ngcontent-%COMP%]{display:inline-block;padding:4px;color:#404040}"]}),n}();function dJ(n,a){1&n&&(s(0,"div"),s(1,"p"),Pe(2,"Fetching..."),l(),l())}function fJ(n,a){1&n&&(s(0,"div"),s(1,"p"),Pe(2,"Sorry, this app had a problem getting that info."),l(),l())}function pJ(n,a){if(1&n){var t=I();s(0,"div"),s(1,"p"),s(2,"a",4),oe("click",function(){return ys(t),Fe(2).exportToCsv()}),Pe(3,"Export To CSV"),l(),l(),c(4,"ag-grid-angular",5),UR(5,"async"),l()}if(2&n){var r=Fe(2);be(4),d("gridOptions",r.gridOptions)("rowData",zR(5,3,r.rowData))("columnDefs",r.columnDefs)}}function hJ(n,a){if(1&n&&(s(0,"div",2),s(1,"h2"),Pe(2),l(),s(3,"h3"),Pe(4,"Usages"),l(),gt(5,dJ,3,0,"div",3),gt(6,fJ,3,0,"div",3),gt(7,pJ,6,5,"div",3),l()),2&n){var t=Fe();be(2),du("Op Code ",t.selectedOpCode," - ",t.selectedOpDescription,""),be(3),d("ngIf","FETCHING"==t.fetchStatus),be(1),d("ngIf","ERROR"==t.fetchStatus),be(1),d("ngIf","SUCCESS"==t.fetchStatus)}}var vJ=function(){var n=function(){function a(t,r,o){G(this,a),this.route=t,this.router=r,this.http=o,this.selectedOpCode=null,this.selectedOpDescription="...loading...",this.selectedOpMetadata=null,this.usages=[],this.fetchStatus="NONE",this.Object=Object,this.columnDefs=[],this.rowData=on([]),this.friendlyColumnNames={routerLink:"Router Link",fieldName:"Field",entityName:"Entity",scriptIndex:"Script",opIndex:"Line",raw:"Raw",mr:"Makou Reactor translation",js:"Javascript translation (experimental)",pres:"Dramatization (experimental)"},this.columnWidths={fieldName:100,entityName:100,op:100,mr:400,js:400,pres:400}}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.gridOptions={rowData:this.rowData,columnDefs:this.columnDefs,rowSelection:"single",onRowClicked:function(f){console.log("a row was clicked")},onColumnResized:function(f){console.log("a column was resized")},onGridReady:function(f){console.log("the grid is now ready")},suppressNoRowsOverlay:!0};var o=ir.KUJATA_DATA_BASE_URL+"/metadata/op-metadata.json";this.http.get(o).subscribe(function(u){r.opMetadata=u,r.initialize()}),this.http.get(o=ir.KUJATA_DATA_BASE_URL+"/metadata/op-metadata.json").subscribe(function(u){r.opMetadata=u,r.initialize()}),this.route.paramMap.subscribe(function(u){r.selectedOpCode=u.get("hex"),r.initialize()})}},{key:"addColumnDef",value:function(r,o){var u={headerName:this.friendlyColumnNames[r]||r,field:r,width:o,sortable:!0,filter:!0,resizable:!0,onCellClicked:void 0,cellStyle:void 0,cellRenderer:void 0};"fieldName"==r&&(u.cellRenderer=function(f){return'<a href="scene-details/'.concat(f.value,'">').concat(f.value,"</a>")}),this.columnDefs.push(u)}},{key:"initialize",value:function(){var r=this;this.opMetadata&&this.selectedOpCode&&(this.selectedOpMetadata=this.opMetadata[this.selectedOpCode],this.selectedOpDescription="".concat(this.selectedOpMetadata.shortName," - ").concat(this.selectedOpMetadata.description),this.fetchStatus="FETCHING",this.gridOptions.api&&this.gridOptions.api.showLoadingOverlay(),this.http.get(ir.KUJATA_DATA_BASE_URL+"/metadata/op-code-usages/"+this.selectedOpCode+".json").subscribe(function(u){if(r.fetchStatus="SUCCESS",r.usages=u,r.rowData=on(r.usages),r.columnDefs=[],r.usages.length>0)for(var f=r.usages[0],h=0,v=Object.keys(f);h<v.length;h++){var g=v[h];"op"==g&&r.addColumnDef("raw",60+6*f.raw.length),"raw"!=g&&r.addColumnDef(g,r.columnWidths[g]||75)}r.gridOptions.api&&r.gridOptions.api.hideOverlay()},function(u){r.fetchStatus="ERROR"}))}},{key:"exportToCsv",value:function(){this.gridOptions.api.exportDataAsCsv({})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(mu),lt(Oo),lt(hu))},n.\u0275cmp=Kr({type:n,selectors:[["field-op-code-details"]],decls:2,vars:1,consts:[[2,"background-color","#e0e0e0","padding","16px","margin-bottom","16px"],["style","background-color:white; padding:16px;",4,"ngIf"],[2,"background-color","white","padding","16px"],[4,"ngIf"],[3,"routerLink","click"],[1,"ag-theme-balham",2,"width","100%","height","500px",3,"gridOptions","rowData","columnDefs"]],template:function(t,r){1&t&&(s(0,"div",0),gt(1,hJ,8,5,"div",1),l()),2&t&&(be(1),d("ngIf",r.selectedOpCode))},directives:[pu,ks,nL],pipes:[RA],styles:[""]}),n}();function gJ(n,a){1&n&&c(0,"div",13),2&n&&d("id",Fe().$implicit.containerId)}function mJ(n,a){if(1&n&&(s(0,"div",14),c(1,"img",15),l()),2&n){var t=Fe().$implicit;be(1),d("src",t.screenshotDataUrl,Ci)}}function yJ(n,a){if(1&n&&(s(0,"a",7),gt(1,gJ,1,1,"div",8),gt(2,mJ,2,1,"div",9),s(3,"div",10),s(4,"div",11),s(5,"b"),Pe(6),l(),l(),s(7,"div",12),s(8,"b"),Pe(9),l(),l(),l(),l()),2&n){var t=a.$implicit;d("routerLink","/field-model-details/"+t.skeleton),be(1),d("ngIf",!t.screenshotDataUrl),be(1),d("ngIf",t.screenshotDataUrl),be(4),Qn(t.friendlyName),be(3),Qn(t.skeleton)}}function _J(n,a){if(1&n&&(s(0,"tr"),s(1,"td"),Pe(2),l(),s(3,"td"),Pe(4),l(),l()),2&n){var t=Fe().$implicit;be(2),Qn(t.id),be(2),Qn(t.name)}}function CJ(n,a){if(1&n&&(w(0),gt(1,_J,5,2,"tr",6),x()),2&n){var t=a.$implicit,r=Fe().$implicit;be(1),d("ngIf",t.numBones==r)}}function wJ(n,a){if(1&n&&(s(0,"tr"),s(1,"td"),Pe(2),l(),s(3,"td"),Pe(4),l(),l()),2&n){var t=Fe().$implicit;be(2),Qn(t.id),be(2),Qn(t.numFrames)}}function SJ(n,a){if(1&n&&(w(0),gt(1,wJ,5,2,"tr",6),x()),2&n){var t=a.$implicit,r=Fe().$implicit;be(1),d("ngIf",t.numBones==r)}}function EJ(n,a){if(1&n&&(s(0,"div",19),s(1,"h2",20),Pe(2),l(),s(3,"div",21),s(4,"div",22),s(5,"h3"),Pe(6,"Field Models"),l(),s(7,"table"),s(8,"thead"),s(9,"tr"),s(10,"th"),Pe(11,"id"),l(),s(12,"th"),Pe(13,"name"),l(),l(),l(),s(14,"tbody"),gt(15,CJ,2,1,"ng-container",23),l(),l(),l(),s(16,"div",24),s(17,"h3"),Pe(18,"Field Animations"),l(),s(19,"table"),s(20,"thead"),s(21,"tr"),s(22,"th"),Pe(23,"id"),l(),s(24,"th"),Pe(25,"numFrames"),l(),l(),l(),s(26,"tbody"),gt(27,SJ,2,1,"ng-container",23),l(),l(),l(),l(),c(28,"div",3),l()),2&n){var t=a.$implicit,r=Fe(3);be(2),Vr("Models with ",t," bones"),be(13),d("ngForOf",r.database.skeletons),be(12),d("ngForOf",r.database.animations)}}function bJ(n,a){if(1&n&&(s(0,"div",17),c(1,"div",3),gt(2,EJ,29,3,"div",18),l()),2&n){var t=Fe(2);be(2),d("ngForOf",t.uniqueBoneCounts)}}function xJ(n,a){if(1&n&&(w(0),gt(1,bJ,3,1,"div",16),x()),2&n){var t=Fe();be(1),d("ngIf",t.database)}}var RJ=function(){var n=function(){function a(t){G(this,a),this.http=t,this.environment=ir,this.rendererGlobal=new gf({alpha:!0,antialias:!0}),this.isDestroyed=!1}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.displays=[],this.status="Loading skeleton info from database...",this.http.get(ir.KUJATA_DATA_BASE_URL+"/metadata/skeleton-names-field.json").subscribe(function(o){r.modelIds=o,r.clock=new Gy,Object.keys(r.modelIds).forEach(function(f,h){var g=r.createEmptyDisplay(f,r.modelIds[f],"ff7_scene_container"+h,200,200);r.displays.push(g)}),r.recursiveLoadSkeletonAndAddToDisplay(0)})}},{key:"ngOnChanges",value:function(r){console.log("simpleChanges:",r)}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0}},{key:"showDisplay",value:function(r,o,u){var f=r.displays[o];f.renderer=r.rendererGlobal,f.renderer.setSize(150,150),f.renderer.outputEncoding=Yn,document.getElementById(f.containerId).appendChild(f.renderer.domElement),f.renderer.render(f.scene,f.camera),f.screenshotDataUrl=f.renderer.domElement.toDataURL(),f.renderer.dispose(),f.renderer=null}},{key:"createEmptyDisplay",value:function(r,o,u,f,h){var v={containerId:u,skeleton:r,friendlyName:o,scene:new Qh,camera:new di(75,f/h,.1,1e3),renderer:null};v.containerId=u,v.scene.background=new un(5263440),v.scene.add(v.camera);var g=new wf(16777215);g.position.set(0,0,50).normalize(),v.scene.add(g);var y=new sv(4210752);return v.scene.add(y),v.camera.position.x=0,v.camera.position.y=13.53,v.camera.position.z=50,v.camera.rotation.x=0*Math.PI/180,v}},{key:"recursiveLoadSkeletonAndAddToDisplay",value:function(r){var o=this;if(o&&!o.isDestroyed)if(r>=o.displays.length)this.status="Finished.";else{var u=o.displays[r],f=u.skeleton;this.status="Loading skeleton model "+f+" ("+u.friendlyName+")...",(new By).load(ir.KUJATA_DATA_BASE_URL+"/data/field/char.lgp/"+f+".hrc.gltf",function(g){if(o&&!o.isDestroyed){Wy(g);var y=g.scene,_=y.children[0];_.position.x=0,_.position.y=0,_.position.z=0,u.scene.add(y),o.showDisplay(o,r,10),o.recursiveLoadSkeletonAndAddToDisplay(r+1)}else console.log("ignoring gltf load() callback")},void 0,function(g){console.error("oops!",g),o.recursiveLoadSkeletonAndAddToDisplay(r+1)})}else console.log("stopping recursive loading")}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(hu))},n.\u0275cmp=Kr({type:n,selectors:[["field-models"]],features:[La],decls:8,vars:3,consts:[[2,"background-color","#c0c0c0"],[2,"padding","4px"],[2,"background-color","white","padding","4px","width","308px","font-size","10pt"],[2,"height","1em"],[2,"display","flex","flex-wrap","wrap"],["class","display-box",3,"routerLink",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"display-box",3,"routerLink"],["class","scene-container",3,"id",4,"ngIf"],["class","scene-container",4,"ngIf"],[2,"height","15px"],[2,"text-align","center"],[2,"text-align","center","font-size","10pt"],[1,"scene-container",3,"id"],[1,"scene-container"],[3,"src"],["style","background-color:#e0e0e0",4,"ngIf"],[2,"background-color","#e0e0e0"],["style","background-color:white; margin:8px; padding:8px; border-radius:8px;",4,"ngFor","ngForOf"],[2,"background-color","white","margin","8px","padding","8px","border-radius","8px"],[2,"margin","auto"],[2,"display","grid","grid-template-columns","50% 50%","grid-template-rows","auto auto"],[2,"grid-row","1","grid-column","1/2"],[4,"ngFor","ngForOf"],[2,"grid-row","1","grid-column","2/3"]],template:function(t,r){1&t&&(s(0,"div",0),s(1,"div",1),s(2,"div",2),Pe(3),l(),l(),c(4,"div",3),s(5,"div",4),gt(6,yJ,10,5,"a",5),l(),l(),gt(7,xJ,2,1,"ng-container",6)),2&t&&(be(3),Vr(" ",r.status," "),be(3),d("ngForOf",r.displays),be(1),d("ngIf",!1))},directives:[Cc,pu,ks],styles:[".display-box[_ngcontent-%COMP%]{width:150px;height:220px;background-color:#fff;margin:4px;color:#404040;text-decoration:none}.scene-container[_ngcontent-%COMP%]{width:150px;height:150px;margin:0;padding:0;background-color:gray}"]}),n}();function AJ(n,a){1&n&&c(0,"div",12),2&n&&d("id",Fe().$implicit.containerId)}function TJ(n,a){if(1&n&&(s(0,"div",13),c(1,"img",14),l()),2&n){var t=Fe().$implicit;be(1),d("src",t.screenshotDataUrl,Ci)}}function DJ(n,a){if(1&n&&(s(0,"a",7),gt(1,AJ,1,1,"div",8),gt(2,TJ,2,1,"div",9),s(3,"div",10),s(4,"div",11),s(5,"b"),Pe(6),l(),l(),s(7,"div",11),Pe(8),l(),l(),l()),2&n){var t=a.$implicit;d("routerLink","/battle-model-details/"+t.skeleton),be(1),d("ngIf",!t.screenshotDataUrl),be(1),d("ngIf",t.screenshotDataUrl),be(4),Qn(t.friendlyName),be(2),Qn(t.skeleton)}}function MJ(n,a){if(1&n&&(s(0,"tr"),s(1,"td"),Pe(2),l(),s(3,"td"),Pe(4),l(),l()),2&n){var t=Fe().$implicit;be(2),Qn(t.id),be(2),Qn(t.name)}}function OJ(n,a){if(1&n&&(w(0),gt(1,MJ,5,2,"tr",6),x()),2&n){var t=a.$implicit,r=Fe().$implicit;be(1),d("ngIf",t.numBones==r)}}function PJ(n,a){if(1&n&&(s(0,"tr"),s(1,"td"),Pe(2),l(),s(3,"td"),Pe(4),l(),l()),2&n){var t=Fe().$implicit;be(2),Qn(t.id),be(2),Qn(t.numFrames)}}function IJ(n,a){if(1&n&&(w(0),gt(1,PJ,5,2,"tr",6),x()),2&n){var t=a.$implicit,r=Fe().$implicit;be(1),d("ngIf",t.numBones==r)}}function LJ(n,a){if(1&n&&(s(0,"div",18),s(1,"h2",19),Pe(2),l(),s(3,"div",20),s(4,"div",21),s(5,"h3"),Pe(6,"Battle Models"),l(),s(7,"table"),s(8,"thead"),s(9,"tr"),s(10,"th"),Pe(11,"id"),l(),s(12,"th"),Pe(13,"name"),l(),l(),l(),s(14,"tbody"),gt(15,OJ,2,1,"ng-container",22),l(),l(),l(),s(16,"div",23),s(17,"h3"),Pe(18,"Battle Animations"),l(),s(19,"table"),s(20,"thead"),s(21,"tr"),s(22,"th"),Pe(23,"id"),l(),s(24,"th"),Pe(25,"numFrames"),l(),l(),l(),s(26,"tbody"),gt(27,IJ,2,1,"ng-container",22),l(),l(),l(),l(),c(28,"div",3),l()),2&n){var t=a.$implicit,r=Fe(3);be(2),Vr("Models with ",t," bones"),be(13),d("ngForOf",r.database.skeletons),be(12),d("ngForOf",r.database.animations)}}function FJ(n,a){if(1&n&&(s(0,"div",16),c(1,"div",3),gt(2,LJ,29,3,"div",17),l()),2&n){var t=Fe(2);be(2),d("ngForOf",t.uniqueBoneCounts)}}function NJ(n,a){if(1&n&&(w(0),gt(1,FJ,3,1,"div",15),x()),2&n){var t=Fe();be(1),d("ngIf",t.database)}}var kJ=function(){var n=function(){function a(t){G(this,a),this.http=t,this.environment=ir,this.rendererGlobal=new gf({alpha:!0,antialias:!0}),this.isDestroyed=!1}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.displays=[],this.status="Loading skeleton info from database...",this.http.get(ir.KUJATA_DATA_BASE_URL+"/metadata/skeleton-names-battle.json").subscribe(function(o){r.battleModelList=o,r.clock=new Gy,Object.keys(r.battleModelList).forEach(function(f,h){var g=r.createEmptyDisplay(f,r.battleModelList[f],"ff7_scene_container"+h,200,200);r.displays.push(g)}),r.recursiveLoadSkeletonAndAddToDisplay(0)})}},{key:"ngOnChanges",value:function(r){console.log("simpleChanges:",r)}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0}},{key:"showDisplay",value:function(r,o,u){var f=r.displays[o];f.renderer=r.rendererGlobal,f.renderer.setSize(150,150),f.renderer.outputEncoding=Yn,document.getElementById(f.containerId).appendChild(f.renderer.domElement),f.renderer.render(f.scene,f.camera),f.screenshotDataUrl=f.renderer.domElement.toDataURL(),f.renderer.dispose(),f.renderer=null}},{key:"createEmptyDisplay",value:function(r,o,u,f,h){var v={containerId:u,skeleton:r,friendlyName:o,scene:new Qh,camera:new di(90,f/h,.1,1e3),renderer:null};v.containerId=u,v.scene.background=new un(5263440),v.scene.add(v.camera);var g=new wf(16777215);g.position.set(0,0,50).normalize(),v.scene.add(g);var y=new sv(4210752);return v.scene.add(y),v.camera.position.x=0,v.camera.position.y=0,v.camera.position.z=0,v.camera.rotation.x=0*Math.PI/180,v}},{key:"fitCameraToCenteredObject",value:function(r,o,u,f){var h=new Tc;h.setFromObject(o),new J;var g=new J;h.getSize(g);var y=r.fov*(Math.PI/180),_=2*Math.atan(Math.tan(y/2)*r.aspect),C=g.z/2+Math.abs(g.x/2/Math.tan(_/2)),S=g.z/2+Math.abs(g.y/2/Math.tan(y/2)),R=Math.max(C,S);void 0!==u&&0!==u&&(R*=u),r.position.set(0,g.y/2,R);var b=h.min.z,E=b<0?-b+R:R-b;r.far=3*E,r.updateProjectionMatrix(),void 0!==f&&(f.target=new J(0,0,0),f.maxDistance=2*E)}},{key:"recursiveLoadSkeletonAndAddToDisplay",value:function(r){var o=this;if(o&&!o.isDestroyed)if(r>=o.displays.length)this.status="Finished.";else{var u=o.displays[r],f=u.skeleton;this.status="Loading skeleton model "+f+" ("+u.friendlyName+")...",(new By).load(ir.KUJATA_DATA_BASE_URL+"/data/battle/battle.lgp/"+f+".hrc.gltf",function(g){if(o&&!o.isDestroyed){Wy(g);var y=g.scene,_=y.children[0];_.position.x=0,_.position.y=0,_.position.z=0,u.scene.add(y),o.fitCameraToCenteredObject(u.camera,y,void 0,void 0),o.showDisplay(o,r,10),o.recursiveLoadSkeletonAndAddToDisplay(r+1)}else console.log("ignoring gltf load() callback")},void 0,function(g){console.error("oops!",g),o.recursiveLoadSkeletonAndAddToDisplay(r+1)})}else console.log("stopping recursive loading")}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(hu))},n.\u0275cmp=Kr({type:n,selectors:[["battle-models"]],features:[La],decls:8,vars:3,consts:[[2,"background-color","#c0c0c0"],[2,"padding","4px"],[2,"background-color","white","padding","4px","width","308px","font-size","10pt"],[2,"height","1em"],[2,"display","flex","flex-wrap","wrap"],["class","display-box",3,"routerLink",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"display-box",3,"routerLink"],["class","scene-container",3,"id",4,"ngIf"],["class","scene-container",4,"ngIf"],[2,"height","25px"],[2,"text-align","center"],[1,"scene-container",3,"id"],[1,"scene-container"],[3,"src"],["style","background-color:#e0e0e0",4,"ngIf"],[2,"background-color","#e0e0e0"],["style","background-color:white; margin:8px; padding:8px; border-radius:8px;",4,"ngFor","ngForOf"],[2,"background-color","white","margin","8px","padding","8px","border-radius","8px"],[2,"margin","auto"],[2,"display","grid","grid-template-columns","50% 50%","grid-template-rows","auto auto"],[2,"grid-row","1","grid-column","1/2"],[4,"ngFor","ngForOf"],[2,"grid-row","1","grid-column","2/3"]],template:function(t,r){1&t&&(s(0,"div",0),s(1,"div",1),s(2,"div",2),Pe(3),l(),l(),c(4,"div",3),s(5,"div",4),gt(6,DJ,9,5,"a",5),l(),l(),gt(7,NJ,2,1,"ng-container",6)),2&t&&(be(3),Vr(" ",r.status," "),be(3),d("ngForOf",r.displays),be(1),d("ngIf",!1))},directives:[Cc,pu,ks],styles:[".display-box[_ngcontent-%COMP%]{width:150px;height:220px;background-color:#fff;margin:4px;color:#404040;text-decoration:none}.scene-container[_ngcontent-%COMP%]{width:150px;height:150px;margin:0;padding:0;background-color:gray}"]}),n}();function GJ(n,a){if(1&n){var t=I();s(0,"div",11),oe("click",function(){var h=ys(t).$implicit;return Fe(2).onSelectAnimation(h)}),Pe(1),l()}if(2&n){var r=a.$implicit,o=Fe(2);be(1),du(" ",r," (",o.metadata.animationStats.stand[r],") ")}}function BJ(n,a){if(1&n){var t=I();s(0,"div",11),oe("click",function(){var h=ys(t).$implicit;return Fe(2).onSelectAnimation(h)}),Pe(1),l()}if(2&n){var r=a.$implicit,o=Fe(2);be(1),du(" ",r," (",o.metadata.animationStats.walk[r],") ")}}function HJ(n,a){if(1&n){var t=I();s(0,"div",11),oe("click",function(){var h=ys(t).$implicit;return Fe(2).onSelectAnimation(h)}),Pe(1),l()}if(2&n){var r=a.$implicit,o=Fe(2);be(1),du(" ",r," (",o.metadata.animationStats.run[r],") ")}}function VJ(n,a){if(1&n){var t=I();s(0,"div",11),oe("click",function(){var h=ys(t).$implicit;return Fe(2).onSelectAnimation(h)}),Pe(1),l()}if(2&n){var r=a.$implicit,o=Fe(2);be(1),du(" ",r," (",o.metadata.animationStats.other[r],") ")}}function WJ(n,a){if(1&n&&(s(0,"div",12),Pe(1),l()),2&n){var t=a.$implicit,r=Fe(2);be(1),du(" ",t," (",r.metadata.fieldStats[t],") ")}}function UJ(n,a){if(1&n&&(s(0,"div",2),s(1,"h2"),Pe(2),l(),s(3,"h3"),Pe(4),l(),s(5,"h4"),Pe(6),l(),s(7,"div",3),s(8,"div",4),s(9,"h4"),Pe(10,"Model"),l(),c(11,"div",5),l(),s(12,"div",6),s(13,"h4"),Pe(14,"Animations"),l(),s(15,"div",7),s(16,"h5"),Pe(17,"Stand"),l(),gt(18,GJ,2,2,"div",8),l(),s(19,"div",7),s(20,"h5"),Pe(21,"Walk"),l(),gt(22,BJ,2,2,"div",8),l(),s(23,"div",7),s(24,"h5"),Pe(25,"Run"),l(),gt(26,HJ,2,2,"div",8),l(),s(27,"div",7),s(28,"h5"),Pe(29,"Other"),l(),gt(30,VJ,2,2,"div",8),l(),l(),s(31,"div",9),s(32,"h4"),Pe(33,"Fields"),l(),gt(34,WJ,2,2,"div",10),l(),l(),l()),2&n){var t=Fe();be(2),Vr("HRC ID: ",t.selectedHrcId,""),be(2),Vr("Name: ",t.friendlyName,""),be(2),Vr("Used in ",t.metadata.numFieldModelLoaders," field model loaders"),be(12),d("ngForOf",t.standAnimations),be(4),d("ngForOf",t.walkAnimations),be(4),d("ngForOf",t.runAnimations),be(4),d("ngForOf",t.otherAnimations),be(4),d("ngForOf",t.Object.keys(t.metadata.fieldStats))}}var zJ=function(){var n=function(){function a(t,r){G(this,a),this.route=t,this.http=r,this.environment=ir,this.CHAR_BASE_URL=ir.KUJATA_DATA_BASE_URL+"/data/field/char.lgp/",this.SCENE_WIDTH=300,this.SCENE_HEIGHT=300,this.standAnimations=[],this.walkAnimations=[],this.runAnimations=[],this.otherAnimations=[],this.Object=Object,this.isAnimationEnabled=!1,this.isDestroyed=!1}return j(a,[{key:"ngOnInit",value:function(){var r=this,o=ir.KUJATA_DATA_BASE_URL+"/metadata/field-model-metadata.json";this.http.get(o).subscribe(function(u){r.fieldModelMetadata=u,r.initialize()}),this.http.get(o=ir.KUJATA_DATA_BASE_URL+"/metadata/skeleton-names-field.json").subscribe(function(u){r.skeletonFriendlyNames=u,r.initialize()}),this.route.paramMap.subscribe(function(u){r.selectedHrcId=u.get("hrcId"),r.initialize()})}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0,this.isAnimationEnabled=!1}},{key:"initialize",value:function(){var r=this;if(this.fieldModelMetadata&&this.skeletonFriendlyNames&&this.selectedHrcId){this.friendlyName=this.skeletonFriendlyNames[this.selectedHrcId],this.metadata=this.fieldModelMetadata[this.selectedHrcId],this.standAnimations=Object.keys(this.metadata.animationStats.stand),this.walkAnimations=Object.keys(this.metadata.animationStats.walk),this.runAnimations=Object.keys(this.metadata.animationStats.run),this.otherAnimations=Object.keys(this.metadata.animationStats.other);var o=function(v){return function(g,y){return v[y]-v[g]}};this.standAnimations.sort(o(this.metadata.animationStats.stand)),this.walkAnimations.sort(o(this.metadata.animationStats.walk)),this.runAnimations.sort(o(this.metadata.animationStats.run)),this.otherAnimations.sort(o(this.metadata.animationStats.other)),this.isAnimationEnabled=!1,this.selectedAnimId=this.standAnimations[0],this.clock=new Gy,this.renderer=new gf({alpha:!0,antialias:!0}),this.renderer.setSize(this.SCENE_WIDTH,this.SCENE_HEIGHT),this.renderer.outputEncoding=Yn,this.modelGLTF=null,this.gltf=null,this.scene=null,this.camera=new di(90,this.SCENE_WIDTH/this.SCENE_HEIGHT,.1,1e3),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=50,this.camera.rotation.x=0*Math.PI/180,this.controls=null,this.http.get(this.CHAR_BASE_URL+this.selectedHrcId+".hrc.gltf").subscribe(function(h){r.modelGLTF=h,r.fetchAnimationAndInitializeScene()},function(h){console.error("oops!",h)});var u=this;!function h(){if(u&&!u.isDestroyed){requestAnimationFrame(h);var v=u.clock.getDelta();u.controls&&u.controls.update(v),u.mixer&&u.isAnimationEnabled&&u.mixer.update(v),u.renderer&&u.scene&&u.camera&&u.renderer.render(u.scene,u.camera)}else console.log("stopping appTick()")}()}}},{key:"onSelectAnimation",value:function(r){this.selectedAnimId=r,this.fetchAnimationAndInitializeScene()}},{key:"fetchAnimationAndInitializeScene",value:function(){var r=this;this.http.get(this.CHAR_BASE_URL+this.selectedAnimId+".a.gltf").subscribe(function(o){var u=r.createCombinedGLTF(r.modelGLTF,o);r.initializeSceneWithCombinedGLTF(r,u)},function(o){console.error("oops!",o)})}},{key:"initializeSceneWithCombinedGLTF",value:function(r,o){var u=o.nodes[1].translation[1];0==u&&(u=15),0==r.camera.position.y&&(console.log("setting camera height to:"+2*u),r.camera.position.y=2*u,r.camera.position.z=Math.max(3*u,50)),console.log("modelRootHeight="+u),(new By).parse(JSON.stringify(o),r.CHAR_BASE_URL,function(h){Wy(h);var g,v=Ft(h.animations);try{for(v.s();!(g=v.n()).done;){var C,_=Ft(g.value.tracks);try{for(_.s();!(C=_.n()).done;)C.value.optimize()}catch(H){_.e(H)}finally{_.f()}}}catch(H){v.e(H)}finally{v.f()}console.log("combined gltf:",h),r.gltf=h;var R=h.scene;r.scene=new Qh,r.scene.background=new un(12312063),r.scene.add(r.camera);var E=new wf(16777215);E.position.set(0,0,50).normalize(),r.scene.add(E);var T=new sv(4210752);r.scene.add(T);var D=new dl({color:3390293,opacity:1,side:2}),M=new vD(50,32),O=new na(M,D);O.rotateX(-Math.PI/2),r.scene.add(O),r.scene.add(R),document.getElementById("scene-container").appendChild(r.renderer.domElement),r.controls=new LD(r.camera,r.renderer.domElement),r.controls.target=new J(0,u,0),r.controls.update(),r.startAnimation(),r.renderer.render(r.scene,r.camera)},void 0,function(h){console.error("oops!",h)})}},{key:"createCombinedGLTF",value:function(r,o){console.log("modelGLTF:",r),console.log("animGLTF:",o);var u=JSON.parse(JSON.stringify(r)),f=JSON.parse(JSON.stringify(o)),h=u.buffers.length,v=u.bufferViews.length,g=u.accessors.length;u.animations||(u.animations=[]);var _,y=Ft(f.buffers);try{for(y.s();!(_=y.n()).done;)u.buffers.push(_.value)}catch(W){y.e(W)}finally{y.f()}var R,S=Ft(f.bufferViews);try{for(S.s();!(R=S.n()).done;){var b=R.value;b.buffer+=h,u.bufferViews.push(b)}}catch(W){S.e(W)}finally{S.f()}var T,E=Ft(f.accessors);try{for(E.s();!(T=E.n()).done;){var D=T.value;D.bufferView+=v,u.accessors.push(D)}}catch(W){E.e(W)}finally{E.f()}var O,M=Ft(f.animations);try{for(M.s();!(O=M.n()).done;){var z,L=O.value,H=Ft(L.samplers);try{for(H.s();!(z=H.n()).done;){var P=z.value;P.input+=g,P.output+=g}}catch(W){H.e(W)}finally{H.f()}u.animations.push(L)}}catch(W){M.e(W)}finally{M.f()}return console.log("combinedGLTF:",u),u}},{key:"startAnimation",value:function(){this.isAnimationEnabled=!0,this.mixer=new EN(this.gltf.scene),this.mixer.clipAction(this.gltf.animations[0]).play()}},{key:"stopAnimation",value:function(){this.isAnimationEnabled=!1}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(mu),lt(hu))},n.\u0275cmp=Kr({type:n,selectors:[["field-model-details"]],decls:2,vars:1,consts:[[2,"background-color","#e0e0e0","padding","4px","margin-bottom","16px"],["style","background-color:white; padding:4px;",4,"ngIf"],[2,"background-color","white","padding","4px"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","font-size","12pt"],[1,"model-panel"],["id","scene-container",1,"scene-container"],[1,"animations-panel"],[1,"animation-category"],["class","animation-box",3,"click",4,"ngFor","ngForOf"],[1,"fields-panel"],["class","field-box",4,"ngFor","ngForOf"],[1,"animation-box",3,"click"],[1,"field-box"]],template:function(t,r){1&t&&(s(0,"div",0),gt(1,UJ,35,8,"div",1),l()),2&t&&(be(1),d("ngIf",r.metadata))},directives:[pu,Cc],styles:[".model-panel[_ngcontent-%COMP%]{width:360px;height:400px;background-color:#f0f0f0;margin:4px 4px 0 0;text-align:center;padding:4px}.animations-panel[_ngcontent-%COMP%], .fields-panel[_ngcontent-%COMP%]{width:360px;height:400px;background-color:#f0f0f0;margin:4px 4px 0 0;overflow-y:auto;padding:4px}.animation-category[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#f8f8f8}.animation-box[_ngcontent-%COMP%], .field-box[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#fff}"]}),n}();function jJ(n,a){if(1&n){var t=I();s(0,"div",9),oe("click",function(){var h=ys(t).$implicit;return Fe(2).onSelectAnimation(h)}),Pe(1),l()}if(2&n){var r=a.$implicit,o=Fe(2);be(1),du(" ",r," ",o.bodyAnimationIdToFriendlyNameMap[r]," ")}}function qJ(n,a){if(1&n&&(s(0,"div",2),s(1,"h2"),Pe(2),l(),s(3,"h3"),Pe(4),l(),s(5,"div",3),s(6,"div",4),s(7,"h4"),Pe(8,"Model"),l(),c(9,"div",5),l(),s(10,"div",6),s(11,"h4"),Pe(12,"Animations"),l(),s(13,"div",7),s(14,"h5"),Pe(15,"Body Animations"),l(),gt(16,jJ,2,2,"div",8),l(),l(),l(),l()),2&n){var t=Fe();be(2),Vr("HRC ID: ",t.selectedHrcId,""),be(2),Vr("Name: ",t.friendlyName,""),be(12),d("ngForOf",t.bodyAnimationIds)}}var YJ=function(){var n=function(){function a(t,r){G(this,a),this.route=t,this.http=r,this.environment=ir,this.BATTLE_LGP_BASE_URL=ir.KUJATA_DATA_BASE_URL+"/data/battle/battle.lgp/",this.SCENE_WIDTH=600,this.SCENE_HEIGHT=600,this.bodyAnimationIdToIndexMap={},this.bodyAnimationIdToFriendlyNameMap={"body-0":"battle stance","body-1":"critical status","body-2":"victory","body-3":"move to front row","body-4":"move to back row","body-5":"block","body-6":"knocked out","body-7":"running away","body-8":"frozen/defend","body-9":"use item","body-10":"throw item","body-12":"magic: pre-cast","body-13":"magic: cast","body-14":"magic: post-cast","body-15":"take damage (quick)","body-16":"take damage (sustained)","body-17":"return to battle stance","body-18":"knocked off feet","body-19":"dodge/twirl"},this.bodyAnimationNames=[],this.bodyAnimationIds=[],this.selectedAnimId=0,this.Object=Object,this.isAnimationEnabled=!1,this.isDestroyed=!1}return j(a,[{key:"ngOnInit",value:function(){var r=this;this.route.paramMap.subscribe(function(o){r.http.get(ir.KUJATA_DATA_BASE_URL+"/metadata/skeleton-names-battle.json").subscribe(function(u){r.selectedHrcId=o.get("hrcId"),r.friendlyName=u[r.selectedHrcId],console.log("friendlyName",r.friendlyName),r.initialize()})})}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy() called"),this.isDestroyed=!0,this.isAnimationEnabled=!1}},{key:"initialize",value:function(){var r=this;if(this.selectedHrcId){this.isAnimationEnabled=!1,this.clock=new Gy,this.renderer=new gf({alpha:!0,antialias:!0}),this.renderer.setSize(this.SCENE_WIDTH,this.SCENE_HEIGHT),this.renderer.outputEncoding=Yn,this.modelGLTF=null,this.gltf=null,this.scene=null,this.camera=new di(90,this.SCENE_WIDTH/this.SCENE_HEIGHT,.1,1e5),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=50,this.controls=null,this.http.get(this.BATTLE_LGP_BASE_URL+this.selectedHrcId+".hrc.gltf").subscribe(function(f){r.modelGLTF=f,r.bodyAnimationNames=[];for(var h=0;h<f.animations.length;h++){var g=f.animations[h].name;r.bodyAnimationIds.push(g),r.bodyAnimationIdToIndexMap[g]=h}r.selectedAnimId=r.bodyAnimationIds[0],r.initializeSceneWithCombinedGLTF(r,r.modelGLTF)},function(f){console.error("oops!",f)});var o=this;!function f(){if(o&&!o.isDestroyed){requestAnimationFrame(f);var h=o.clock.getDelta();o.controls&&o.controls.update(h),o.mixer&&o.isAnimationEnabled&&o.mixer.update(h),o.renderer&&o.scene&&o.camera&&o.renderer.render(o.scene,o.camera)}else console.log("stopping appTick()")}()}}},{key:"onSelectAnimation",value:function(r){this.selectedAnimId=r,this.initializeSceneWithCombinedGLTF(this,this.modelGLTF)}},{key:"initializeSceneWithCombinedGLTF",value:function(r,o){var u=o.nodes[1].translation[1];0==u&&(u=15),0==r.camera.position.y&&(console.log("setting camera height to:"+2*u),r.camera.position.y=600+1.5*u,r.camera.position.z=Math.max(2.5*u,1e3)),(new By).parse(JSON.stringify(o),r.BATTLE_LGP_BASE_URL,function(h){Wy(h);var g,v=Ft(h.animations);try{for(v.s();!(g=v.n()).done;){var C,_=Ft(g.value.tracks);try{for(_.s();!(C=_.n()).done;)C.value.optimize()}catch(L){_.e(L)}finally{_.f()}}}catch(L){v.e(L)}finally{v.f()}console.log("parsed gltf:",h),r.gltf=h;var R=h.scene;h.scene.rotation.y=-20*Math.PI/180,r.scene=new Qh,r.scene.background=new un(12312063),r.scene.add(r.camera);var b=function(H,z,P){var W=new wf(12632256);W.position.set(H,z,P).normalize(),r.scene.add(W)};b(4,2,3),b(0,-2,-3);var E=new sv(4210752);r.scene.add(E);var T=new dl({color:3390293,opacity:1,side:2}),D=new vD(50,32),M=new na(D,T);M.rotateX(-Math.PI/2),r.scene.add(M),r.scene.add(R),document.getElementById("scene-container").appendChild(r.renderer.domElement),r.controls=new LD(r.camera,r.renderer.domElement),r.controls.target=new J(0,u,0),r.controls.update(),r.startAnimation(),r.renderer.render(r.scene,r.camera)},void 0,function(h){console.error("oops!",h)})}},{key:"startAnimation",value:function(){if(this.selectedAnimId){this.isAnimationEnabled=!0,this.mixer=new EN(this.gltf.scene);var r=this.bodyAnimationIdToIndexMap[this.selectedAnimId];this.controls.target.y=this.controls.target.y+this.gltf.animations[r].tracks[0].values[1],this.mixer.clipAction(this.gltf.animations[r]).play()}}},{key:"stopAnimation",value:function(){this.isAnimationEnabled=!1}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(mu),lt(hu))},n.\u0275cmp=Kr({type:n,selectors:[["battle-model-details"]],decls:2,vars:1,consts:[[2,"background-color","#e0e0e0","padding","4px","margin-bottom","16px"],["style","background-color:white; padding:4px;",4,"ngIf"],[2,"background-color","white","padding","4px"],[2,"display","flex","flex-flow","row wrap","align-items","flex-start","align-content","flex-start","font-size","12pt"],[1,"model-panel"],["id","scene-container",1,"scene-container"],[1,"animations-panel"],[1,"animation-category"],["class","animation-box",3,"click",4,"ngFor","ngForOf"],[1,"animation-box",3,"click"]],template:function(t,r){1&t&&(s(0,"div",0),gt(1,qJ,17,3,"div",1),l()),2&t&&(be(1),d("ngIf",r.selectedHrcId))},directives:[pu,Cc],styles:[".model-panel[_ngcontent-%COMP%]{width:620px;height:660px;background-color:#f0f0f0;margin:4px 4px 0 0;text-align:center;padding:4px}.animations-panel[_ngcontent-%COMP%]{width:360px;height:660px;background-color:#f0f0f0;margin:4px 4px 0 0;overflow-y:auto;padding:4px}.fields-panel[_ngcontent-%COMP%]{width:360px;height:400px;background-color:#f0f0f0;margin:4px 4px 0 0;overflow-y:auto;padding:4px}.animation-category[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#f8f8f8}.animation-box[_ngcontent-%COMP%], .field-box[_ngcontent-%COMP%]{margin:2px;padding:4px;background-color:#fff}"]}),n}();function KJ(n,a){1&n&&(s(0,"div"),s(1,"p"),Pe(2,"Fetching..."),l(),l())}function $J(n,a){1&n&&(s(0,"div"),s(1,"p"),Pe(2,"Sorry, this app had a problem getting that info."),l(),l())}function XJ(n,a){if(1&n){var t=I();s(0,"div"),s(1,"p"),s(2,"a",3),oe("click",function(){return ys(t),Fe().exportToCsv()}),Pe(3,"Export To CSV"),l(),l(),c(4,"ag-grid-angular",4),UR(5,"async"),l()}if(2&n){var r=Fe();be(4),d("gridOptions",r.gridOptions)("rowData",zR(5,3,r.rowData))("columnDefs",r.columnDefs)}}var JJ=function(){var n=function(){function a(t,r){G(this,a),this.router=t,this.http=r,this.soundMetadata=[],this.fetchStatus="NONE",this.Object=Object,this.columnDefs=[],this.rowData=on([]),this.friendlyColumnNames={fieldName:"Field",entityName:"Entity",scriptType:"Script",lineNo:"Line",opType:"Op",direction:"Direction",soundId:"Sound ID",playSound:"Play Sound"},this.columnWidths={direction:100,soundId:150,playSound:150}}return j(a,[{key:"ngOnInit",value:function(){this.gridOptions={rowData:this.rowData,columnDefs:this.columnDefs,rowSelection:"single",onRowClicked:function(o){console.log("a row was clicked")},onColumnResized:function(o){console.log("a column was resized")},onGridReady:function(o){console.log("the grid is now ready")},suppressNoRowsOverlay:!0},this.init()}},{key:"addColumnDef",value:function(r,o){var u=this,f={headerName:this.friendlyColumnNames[r]||r,field:r,width:o,sortable:!0,filter:!0,resizable:!0,onCellClicked:void 0,cellStyle:void 0,sort:void 0,cellRenderer:void 0};"soundId"===r&&(f.sort="asc"),"fieldName"===r&&(f.cellRenderer=function(h){return'<a href="/scene-details/'.concat(h.value,'">').concat(h.value,"</a>")}),"playSound"===r&&(f.onCellClicked=function(h){u.playSound(h.data.soundId)},f.cellStyle={color:"#007bff",textDecoration:"underline",cursor:"pointer"},f.cellRenderer=function(h){return'<i class="fa fa-play-circle"></i> Play sound: '.concat(h.value)}),this.columnDefs.push(f)}},{key:"playSound",value:function(r){var o="".concat(ir.KUJATA_DATA_BASE_URL,"/media/sounds/").concat(r,".ogg");console.log("Play sound - ".concat(r," - ").concat(o)),0!==r?(this.playingSound&&(this.playingSound.pause(),this.playingSound.currentTime=0),this.playingSound=new Audio(o),this.playingSound.play()):window.alert("Play sound 0 in game actually stops current sounds playing")}},{key:"init",value:function(){var r=this;this.fetchStatus="FETCHING",this.gridOptions.api&&this.gridOptions.api.showLoadingOverlay(),this.http.get(ir.KUJATA_DATA_BASE_URL+"/metadata/sound-list.json").subscribe(function(u){if(r.soundMetadata=u,r.soundMetadata.map(function(g){delete g.entityId,delete g.scriptIndex,g.playSound=g.soundId}),console.log("soundMetadata",u),r.rowData=on(r.soundMetadata),r.fetchStatus="SUCCESS",r.soundMetadata.length>0)for(var f=0,h=Object.keys(r.friendlyColumnNames);f<h.length;f++){var v=h[f];r.addColumnDef(v,r.columnWidths[v]||75)}},function(u){r.fetchStatus="ERROR"})}}]),a}();return n.\u0275fac=function(t){return new(t||n)(lt(Oo),lt(hu))},n.\u0275cmp=Kr({type:n,selectors:[["sound-details"]],decls:9,vars:3,consts:[[2,"background-color","#e0e0e0","padding","16px","margin-bottom","16px"],[2,"background-color","white","padding","16px"],[4,"ngIf"],[3,"routerLink","click"],[1,"ag-theme-balham",2,"width","100%","height","500px",3,"gridOptions","rowData","columnDefs"]],template:function(t,r){1&t&&(s(0,"div",0),s(1,"div",1),s(2,"h2"),Pe(3,"Sound Details"),l(),s(4,"h3"),Pe(5,"Usages"),l(),gt(6,KJ,3,0,"div",2),gt(7,$J,3,0,"div",2),gt(8,XJ,6,5,"div",2),l(),l()),2&t&&(be(6),d("ngIf","FETCHING"==r.fetchStatus),be(1),d("ngIf","ERROR"==r.fetchStatus),be(1),d("ngIf","SUCCESS"==r.fetchStatus))},directives:[pu,ks,nL],pipes:[RA],styles:[""]}),n}(),ZJ=[{path:"field-scenes",component:rL},{path:"scene-details/:name",component:oJ},{path:"field-models",component:RJ},{path:"field-model-details/:hrcId",component:zJ},{path:"battle-models",component:kJ},{path:"battle-model-details/:hrcId",component:YJ},{path:"field-op-codes",component:cJ},{path:"field-op-code-details/:hex",component:vJ},{path:"sounds",component:JJ},{path:"**",component:rL}],QJ=function(){var n=function a(){G(this,a)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=mi({type:n,bootstrap:[_z]}),n.\u0275inj=Go({providers:[],imports:[[EV,az.forRoot(ZJ),qV,Eh.withComponents([])]]}),n}();wV().bootstrapModule(QJ).catch(function(n){return console.error(n)})},564:function(yl,K){"use strict";function ze(d){return null==d||""===d?null:d}function Le(d,i){return void 0===i&&(i=!1),null!=d&&(""!==d||i)}function ye(d){return!Le(d)}function Qr(d){return null==d||0===d.length}function j(d){return null!=d&&"function"==typeof d.toString?d.toString():null}function G(d){if(void 0!==d){if(null===d||""===d)return null;if("number"==typeof d)return isNaN(d)?void 0:d;var i=parseInt(d,10);return isNaN(i)?void 0:i}}function ro(d){if(void 0!==d)return null!==d&&""!==d&&("boolean"==typeof d?d:/true/i.test(d))}function Pi(d,i,e){if(null==d)return null;if(!Array.isArray(d))return Pi(ve(d),i,e);for(var l=d,c=null,p=0;p<l.length;p++){var m=l[p];if("string"==typeof i){if(m[i]===e){c=m;break}}else if(i(m)){c=m;break}}return c}function ve(d){if(d instanceof Set||d instanceof Map){var i=[];return d.forEach(function(e){return i.push(e)}),i}return Object.keys(d).map(function(e){return d[e]})}var zs=Object.freeze({__proto__:null,makeNull:ze,exists:Le,missing:ye,missingOrEmpty:Qr,toStringOrNull:j,attrToNumber:G,attrToBoolean:ro,attrToString:function(d){if(null!=d&&""!==d)return d},referenceCompare:function(d,i){return null==d&&null==i||!(null==d&&null!=i||null!=d&&null==i)&&d===i},jsonEquals:function(d,i){return(d?JSON.stringify(d):null)===(i?JSON.stringify(i):null)},defaultComparator:function(d,i,e){void 0===e&&(e=!1);var s=null==d,l=null==i;if(d&&d.toNumber&&(d=d.toNumber()),i&&i.toNumber&&(i=i.toNumber()),s&&l)return 0;if(s)return-1;if(l)return 1;function c(p,m){return p>m?1:p<m?-1:0}if("string"!=typeof d||!e)return c(d,i);try{return d.localeCompare(i)}catch(p){return c(d,i)}},find:Pi,values:ve}),fi=function(){function d(){this.existingKeys={}}return d.prototype.addExistingKeys=function(i){for(var e=0;e<i.length;e++)this.existingKeys[i[e]]=!0},d.prototype.getUniqueKey=function(i,e){i=j(i);for(var s=0;;){var l=void 0;if(i?(l=i,0!==s&&(l+="_"+s)):e?(l=e,0!==s&&(l+="_"+s)):l=""+s,!this.existingKeys[l])return this.existingKeys[l]=!0,l;s++}},d}();function Ft(){for(var d=[],i=0;i<arguments.length;i++)d[i]=arguments[i];for(var e=0;e<d.length;e++){var s=d[e];if(Le(s))return s}return null}function Vn(d){if(d&&d.length)return d[d.length-1]}function Ir(d,i,e){return null==d&&null==i||null!=d&&null!=i&&d.length===i.length&&en(d,function(s,l){return e?e(s,i[l]):i[l]===s})}function Hc(d){return d.sort(function(i,e){return i-e})}function ei(d,i){var e=d.indexOf(i);e>=0&&d.splice(e,1)}function kn(d,i){Vt(i,function(e){return ei(d,e)})}function pi(d,i,e){d.splice(e,0,i)}function wr(d,i,e){kn(d,i),Vt(i.slice().reverse(),function(s){return pi(d,s,e)})}function bn(d,i){return d.indexOf(i)>-1}function pt(d,i){null==i||null==d||Vt(i,function(e){return d.push(e)})}function nt(d,i){for(var e=0;e<d.length;e++)if(i(d[e],e,d))return e;return-1}function en(d,i){if(null==d)return!0;for(var e=0;e<d.length;e++)if(!i(d[e],e))return!1;return!0}function Yt(d,i){if(null==d)return!1;for(var e=0;e<d.length;e++)if(i(d[e],e))return!0;return!1}function Vt(d,i){if(null!=d)for(var e=0;e<d.length;e++)i(d[e],e)}function hi(d,i){if(null==d)return null;for(var e=[],s=0;s<d.length;s++)e.push(i(d[s],s));return e}function Lr(d,i){if(null==d)return null;for(var e=[],s=0;s<d.length;s++)i(d[s],s)&&e.push(d[s]);return e}var os=Object.freeze({__proto__:null,firstExistingValue:Ft,anyExists:function(d){return d&&null!=Ft(d)},existsAndNotEmpty:function(d){return null!=d&&d.length>0},last:Vn,areEqual:Ir,compareArrays:function(d,i){return Ir(d,i)},shallowCompare:function(d,i){return Ir(d,i)},sortNumerically:Hc,removeRepeatsFromArray:function(d,i){if(d)for(var e=d.length-2;e>=0;e--)d[e]===i&&d[e+1]===i&&d.splice(e+1,1)},removeFromArray:ei,removeAllFromArray:kn,insertIntoArray:pi,insertArrayIntoArray:function(d,i,e){if(null!=d&&null!=i)for(var s=i.length-1;s>=0;s--)pi(d,i[s],e)},moveInArray:wr,includes:bn,flatten:function(d){return[].concat.apply([],d)},pushAll:pt,toStrings:function(d){return hi(d,j)},findIndex:nt,fill:function(d,i,e,s){void 0===i&&(i=null),void 0===e&&(e=0),void 0===s&&(s=d.length);for(var l=e;l<s;l++)d[l]=i;return d},every:en,some:Yt,forEach:Vt,forEachReverse:function(d,i){if(null!=d)for(var e=d.length-1;e>=0;e--)i(d[e],e)},map:hi,filter:Lr,reduce:function(d,i,e){if(null==d||null==e)return null;for(var s=e,l=0;l<d.length;l++)s=i(s,d[l],l);return s},forEachSnapshotFirst:function(d,i){d&&d.slice(0).forEach(i)}});function In(d,i){null!=d&&(Array.isArray(d)?Vt(d,function(e,s){return i(""+s,e)}):Vt(Object.keys(d),function(e){return i(e,d[e])}))}function as(d){for(var i={},e=Object.keys(d),s=0;s<e.length;s++){var l=e[s];i[l]=d[l]}return i}function xf(d,i){if(d){var e=d,s={};return Object.keys(e).forEach(function(l){if(!(i&&i.indexOf(l)>=0)){var c=e[l],p=wl(c)&&c.constructor===Object;s[l]=p?xf(c):c}}),s}}function Rf(d,i){return d[i]}function Af(d,i,e){d[i]=e}function yv(d,i,e,s){var l=Rf(d,e);void 0!==l&&Af(i,e,s?s(l):l)}function Tf(d){var i={};return d.filter(function(e){return null!=e}).forEach(function(e){Vt(Object.keys(e),function(s){return i[s]=null})}),Object.keys(i)}function ba(d){if(!d)return[];var i=Object;if("function"==typeof i.values)return i.values(d);var e=[];for(var s in d)d.hasOwnProperty(s)&&d.propertyIsEnumerable(s)&&e.push(d[s]);return e}function io(d,i,e,s){void 0===e&&(e=!0),void 0===s&&(s=!1),Le(i)&&In(i,function(l,c){var p=d[l];p!==c&&(s&&null==p&&null!=c&&"object"==typeof c&&c.constructor===Object&&(d[l]=p={}),wl(c)&&wl(p)&&!Array.isArray(p)?io(p,c,e,s):(e||void 0!==c)&&(d[l]=c))})}function ti(d){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];return Vt(i,function(s){return In(s,function(l,c){return d[l]=c})}),d}function Df(d,i,e){if(i&&d){if(!e)return d[i];for(var s=i.split("."),l=d,c=0;c<s.length;c++){if(null==l)return;l=l[s[c]]}return l}}function r_(d,i){Object.keys(d).forEach(function(l){"object"==typeof d[l]&&(d[l]=void 0)});var e=Object.getPrototypeOf(d),s={};Object.keys(e).forEach(function(l){"function"==typeof e[l]&&(s[l]={value:function(){console.warn("AG Grid: "+i+" function "+l+"() cannot be called as the grid has been destroyed.\n                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't\n                     be keeping the API reference, your application has a memory leak! Remove the API reference\n                     when the grid is destroyed.")},writable:!0})}),Object.defineProperties(d,s)}function wl(d){return"object"==typeof d&&null!==d}var ss=Object.freeze({__proto__:null,iterateObject:In,cloneObject:as,deepCloneObject:function(d){return JSON.parse(JSON.stringify(d))},deepCloneDefinition:xf,getProperty:Rf,setProperty:Af,copyPropertiesIfPresent:function(d,i){for(var e=[],s=2;s<arguments.length;s++)e[s-2]=arguments[s];Vt(e,function(l){return yv(d,i,l)})},copyPropertyIfPresent:yv,getAllKeysInObjects:Tf,getAllValuesInObject:ba,mergeDeep:io,assign:ti,missingOrEmptyObject:function(d){return ye(d)||0===Object.keys(d).length},get:function(d,i,e){if(null==d)return e;for(var s=i.split("."),l=d;s.length>1;)if(null==(l=l[s.shift()]))return e;var c=l[s[0]];return null!=c?c:e},set:function(d,i,e){if(null!=d){for(var s=i.split("."),l=d;s.length>1;)if(null==(l=l[s.shift()]))return;l[s[0]]=e}},deepFreeze:function _v(d){return Object.freeze(d),Vt(ve(d),function(i){(wl(i)||"function"==typeof i)&&_v(i)}),d},getValueUsingField:Df,removeAllReferences:r_,isNonNullObject:wl}),i_=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,o_=/([^\s,]+)/g,ni={};function pn(d,i){ni[i]||(d(),ni[i]=!0)}function zn(d){if(d.name)return d.name;var i=/function\s+([^\(]+)/.exec(d.toString());return i&&2===i.length?i[1].trim():null}function Sl(d){return!!(d&&d.constructor&&d.call&&d.apply)}function Mf(d){wE(d,400)}var a_=[],Of=!1;function s_(d){a_.push(d),!Of&&(Of=!0,window.setTimeout(function(){var i=a_.slice();a_.length=0,Of=!1,i.forEach(function(e){return e()})},0))}function wE(d,i){void 0===i&&(i=0),d.length>0&&window.setTimeout(function(){return d.forEach(function(e){return e()})},i)}function Du(d,i,e){var s;return void 0===e&&(e=!1),function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var p=this,m=e&&!s;window.clearTimeout(s),s=window.setTimeout(function(){s=null,e||d.apply(p,l)},i),m&&d.apply(p,l)}}function SE(d,i,e,s){void 0===e&&(e=100);var l=(new Date).getTime(),c=null,p=!1,m=function(){var x=(new Date).getTime()-l>e;(d()||x)&&(i(),p=!0,null!=c&&(window.clearInterval(c),c=null),x&&s&&console.warn(s))};m(),p||(c=window.setInterval(m,10))}function bE(d){d&&d()}var u_=Object.freeze({__proto__:null,doOnce:pn,getFunctionName:zn,getFunctionParameters:function(d){var i=d.toString().replace(i_,"");return i.slice(i.indexOf("(")+1,i.indexOf(")")).match(o_)||[]},isFunction:Sl,executeInAWhile:Mf,executeNextVMTurn:s_,executeAfter:wE,debounce:Du,waitUntil:SE,compose:function(){for(var d=[],i=0;i<arguments.length;i++)d[i]=arguments[i];return function(e){return d.reduce(function(s,l){return l(s)},e)}},callIfPresent:bE}),xE=function(){function d(i,e){if(this.beanWrappers={},this.destroyed=!1,i&&i.beanClasses){this.contextParams=i,this.logger=e,this.logger.log(">> creating ag-Application Context"),this.createBeans();var s=this.getBeanInstances();this.wireBeans(s),this.logger.log(">> ag-Application Context ready - component is alive")}}return d.prototype.getBeanInstances=function(){return ve(this.beanWrappers).map(function(i){return i.beanInstance})},d.prototype.createBean=function(i,e){if(!i)throw Error("Can't wire to bean since it is null");return this.wireBeans([i],e),i},d.prototype.wireBeans=function(i,e){this.autoWireBeans(i),this.methodWireBeans(i),this.callLifeCycleMethods(i,"preConstructMethods"),Le(e)&&i.forEach(e),this.callLifeCycleMethods(i,"postConstructMethods")},d.prototype.createBeans=function(){var i=this;this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),In(this.beanWrappers,function(s,l){var c;l.bean.__agBeanMetaData&&l.bean.__agBeanMetaData.autowireMethods&&l.bean.__agBeanMetaData.autowireMethods.agConstructor&&(c=l.bean.__agBeanMetaData.autowireMethods.agConstructor);var p=i.getBeansForParameters(c,l.bean.name),m=function(d,i){var e=[null].concat(i);return new(d.bind.apply(d,e))}(l.bean,p);l.beanInstance=m});var e=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: "+e)},d.prototype.createBeanWrapper=function(i){var e=i.__agBeanMetaData;if(!e){var s;return s=i.prototype.constructor?zn(i.prototype.constructor):""+i,void console.error("Context item "+s+" is not a bean")}this.beanWrappers[e.beanName]={bean:i,beanInstance:null,beanName:e.beanName}},d.prototype.autoWireBeans=function(i){var e=this;i.forEach(function(s){e.forEachMetaDataInHierarchy(s,function(l,c){var p=l.agClassAttributes;!p||p.forEach(function(m){var w=e.lookupBeanInstance(c,m.beanName,m.optional);s[m.attributeName]=w})})})},d.prototype.methodWireBeans=function(i){var e=this;i.forEach(function(s){e.forEachMetaDataInHierarchy(s,function(l,c){In(l.autowireMethods,function(p,m){if("agConstructor"!==p){var w=e.getBeansForParameters(m,c);s[p].apply(s,w)}})})})},d.prototype.forEachMetaDataInHierarchy=function(i,e){for(var s=Object.getPrototypeOf(i);null!=s;){var l=s.constructor;l.hasOwnProperty("__agBeanMetaData")&&e(l.__agBeanMetaData,this.getBeanName(l)),s=Object.getPrototypeOf(s)}},d.prototype.getBeanName=function(i){if(i.__agBeanMetaData&&i.__agBeanMetaData.beanName)return i.__agBeanMetaData.beanName;var e=i.toString();return e.substring(9,e.indexOf("("))},d.prototype.getBeansForParameters=function(i,e){var s=this,l=[];return i&&In(i,function(c,p){var m=s.lookupBeanInstance(e,p);l[Number(c)]=m}),l},d.prototype.lookupBeanInstance=function(i,e,s){if(void 0===s&&(s=!1),"context"===e)return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(e))return this.contextParams.providedBeanInstances[e];var l=this.beanWrappers[e];return l?l.beanInstance:(s||console.error("AG Grid: unable to find bean reference "+e+" while initialising "+i),null)},d.prototype.callLifeCycleMethods=function(i,e){var s=this;i.forEach(function(l){return s.callLifeCycleMethodsOnBean(l,e)})},d.prototype.callLifeCycleMethodsOnBean=function(i,e,s){var l={};this.forEachMetaDataInHierarchy(i,function(p){var m=p[e];m&&m.forEach(function(w){w!=s&&(l[w]=!0)})}),Object.keys(l).forEach(function(p){return i[p]()})},d.prototype.getBean=function(i){return this.lookupBeanInstance("getBean",i,!0)},d.prototype.destroy=function(){if(!this.destroyed){this.logger.log(">> Shutting down ag-Application Context");var i=this.getBeanInstances();this.destroyBeans(i),this.contextParams.providedBeanInstances=null,this.destroyed=!0,this.logger.log(">> ag-Application Context shut down - component is dead")}},d.prototype.destroyBean=function(i){!i||this.destroyBeans([i])},d.prototype.destroyBeans=function(i){var e=this;return i?(i.forEach(function(s){e.callLifeCycleMethodsOnBean(s,"preDestroyMethods","destroy"),"function"==typeof s.destroy&&s.destroy()}),[]):[]},d}();function Cv(d,i,e){var s=El(d.constructor);s.preConstructMethods||(s.preConstructMethods=[]),s.preConstructMethods.push(i)}function Qe(d,i,e){var s=El(d.constructor);s.postConstructMethods||(s.postConstructMethods=[]),s.postConstructMethods.push(i)}function Ii(d,i,e){var s=El(d.constructor);s.preDestroyMethods||(s.preDestroyMethods=[]),s.preDestroyMethods.push(i)}function ht(d){return function(i){El(i).beanName=d}}function B(d){return function(i,e,s){RE(i,d,!1,0,e,null)}}function Ln(d){return function(i,e,s){RE(i,d,!0,0,e,null)}}function RE(d,i,e,s,l,c){if(null!==i)if("number"!=typeof c){var p=El(d.constructor);p.agClassAttributes||(p.agClassAttributes=[]),p.agClassAttributes.push({attributeName:l,beanName:i,optional:e})}else console.error("AG Grid: Autowired should be on an attribute");else console.error("AG Grid: Autowired name should not be null")}function Li(d){return function(i,e,s){var c,l="function"==typeof i?i:i.constructor;if("number"==typeof s){var p=void 0;e?(c=El(l),p=e):(c=El(l),p="agConstructor"),c.autowireMethods||(c.autowireMethods={}),c.autowireMethods[p]||(c.autowireMethods[p]={}),c.autowireMethods[p][s]=d}}}function El(d){return d.hasOwnProperty("__agBeanMetaData")||(d.__agBeanMetaData={}),d.__agBeanMetaData}var d,c_=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},wv=function(d,i){return function(e,s){i(e,s,d)}},qs=function(){function d(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}return d.prototype.setBeans=function(i,e,s,l){if(void 0===l&&(l=null),this.frameworkOverrides=s,l){var c=e.useAsyncEvents();this.addGlobalListener(l,c)}},d.prototype.getListeners=function(i,e,s){var l=e?this.allAsyncListeners:this.allSyncListeners,c=l.get(i);return!c&&s&&l.set(i,c=new Set),c},d.prototype.noRegisteredListenersExist=function(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size},d.prototype.addEventListener=function(i,e,s){void 0===s&&(s=!1),this.getListeners(i,s,!0).add(e)},d.prototype.removeEventListener=function(i,e,s){void 0===s&&(s=!1);var l=this.getListeners(i,s,!1);l&&(l.delete(e),0===l.size)&&(s?this.allAsyncListeners:this.allSyncListeners).delete(i)},d.prototype.addGlobalListener=function(i,e){void 0===e&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).add(i)},d.prototype.removeGlobalListener=function(i,e){void 0===e&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).delete(i)},d.prototype.dispatchEvent=function(i){this.dispatchToListeners(i,!0),this.dispatchToListeners(i,!1),this.firedEvents[i.type]=!0},d.prototype.dispatchEventOnce=function(i){this.firedEvents[i.type]||this.dispatchEvent(i)},d.prototype.dispatchToListeners=function(i,e){var s=this,l=i.type,p=this.getListeners(l,e,!1);p&&p.forEach(function(A){e?s.dispatchAsync(function(){return A(i)}):A(i)}),(e?this.globalAsyncListeners:this.globalSyncListeners).forEach(function(w){e?s.dispatchAsync(function(){return s.frameworkOverrides.dispatchEvent(l,function(){return w(l,i)},!0)}):s.frameworkOverrides.dispatchEvent(l,function(){return w(l,i)},!0)})},d.prototype.dispatchAsync=function(i){this.asyncFunctionsQueue.push(i),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},d.prototype.flushAsyncQueue=function(){this.scheduled=!1;var i=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],i.forEach(function(e){return e()})},c_([wv(0,Li("loggerFactory")),wv(1,Li("gridOptionsWrapper")),wv(2,Li("frameworkOverrides")),wv(3,Li("globalEventListener"))],d.prototype,"setBeans",null),c_([ht("eventService")],d)}(),ce=function(){function d(){}return d.ROW_BUFFER_SIZE=10,d.LAYOUT_INTERVAL=500,d.BATCH_WAIT_MILLIS=50,d.EXPORT_TYPE_DRAG_COPY="dragCopy",d.EXPORT_TYPE_CLIPBOARD="clipboard",d.EXPORT_TYPE_EXCEL="excel",d.EXPORT_TYPE_CSV="csv",d.ROW_MODEL_TYPE_INFINITE="infinite",d.ROW_MODEL_TYPE_VIEWPORT="viewport",d.ROW_MODEL_TYPE_CLIENT_SIDE="clientSide",d.ROW_MODEL_TYPE_SERVER_SIDE="serverSide",d.ALWAYS="always",d.ONLY_WHEN_GROUPING="onlyWhenGrouping",d.PINNED_TOP="top",d.PINNED_BOTTOM="bottom",d.DOM_LAYOUT_NORMAL="normal",d.DOM_LAYOUT_PRINT="print",d.DOM_LAYOUT_AUTO_HEIGHT="autoHeight",d.GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",d.SOURCE_PASTE="paste",d.PINNED_RIGHT="right",d.PINNED_LEFT="left",d.SORT_ASC="asc",d.SORT_DESC="desc",d.INPUT_SELECTOR="input, select, button, textarea",d.FOCUSABLE_SELECTOR="[tabindex], input, select, button, textarea",d.FOCUSABLE_EXCLUDE=".ag-hidden, .ag-hidden *, [disabled], .ag-disabled, .ag-disabled *",d}();(d=K.GXE||(K.GXE={})).CommunityCoreModule="@ag-grid-community/core",d.CommunityAllModules="@ag-grid-community/all",d.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",d.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",d.CsvExportModule="@ag-grid-community/csv-export",d.EnterpriseCoreModule="@ag-grid-enterprise/core",d.EnterpriseAllModules="@ag-grid-enterprise/all",d.RowGroupingModule="@ag-grid-enterprise/row-grouping",d.ColumnToolPanelModule="@ag-grid-enterprise/column-tool-panel",d.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",d.MenuModule="@ag-grid-enterprise/menu",d.SetFilterModule="@ag-grid-enterprise/set-filter",d.MultiFilterModule="@ag-grid-enterprise/multi-filter",d.StatusBarModule="@ag-grid-enterprise/status-bar",d.SideBarModule="@ag-grid-enterprise/side-bar",d.RangeSelectionModule="@ag-grid-enterprise/range-selection",d.MasterDetailModule="@ag-grid-enterprise/master-detail",d.RichSelectModule="@ag-grid-enterprise/rich-select",d.GridChartsModule="@ag-grid-enterprise/charts",d.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",d.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",d.ExcelExportModule="@ag-grid-enterprise/excel-export",d.ClipboardModule="@ag-grid-enterprise/clipboard",d.SparklinesModule="@ag-grid-enterprise/sparklines",d.AngularModule="@ag-grid-community/angular",d.ReactModule="@ag-grid-community/react",d.VueModule="@ag-grid-community/vue",d.PolymerModule="@ag-grid-community/polymer";var jt=function(){function d(){}return d.register=function(i,e){void 0===e&&(e=!0),d.modulesMap[i.moduleName]=i,void 0===d.moduleBased?d.moduleBased=e:d.moduleBased!==e&&pn(function(){console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")},d.registerModules=function(i,e){void 0===e&&(e=!0),i&&i.forEach(function(s){return d.register(s,e)})},d.assertRegistered=function(i,e){if(this.isRegistered(i))return!0;var l="AG Grid: unable to use "+e+" as module "+i+" is not present. Please see: https://www.ag-grid.com/javascript-grid/modules/";return pn(function(){console.warn(l)},e+i),!1},d.isRegistered=function(i){return!!d.modulesMap[i]},d.getRegisteredModules=function(){return ve(d.modulesMap)},d.isPackageBased=function(){return!d.moduleBased},d.modulesMap={},d}(),Mu=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},d_=0,Tn=function(){function d(i,e,s,l){this.instanceId=d_++,this.moving=!1,this.menuVisible=!1,this.filterActive=!1,this.eventService=new qs,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=i,this.userProvidedColDef=e,this.colId=s,this.primary=l,this.setState(i)}return d.prototype.getInstanceId=function(){return this.instanceId},d.prototype.setState=function(i){void 0!==i.sort?(i.sort===ce.SORT_ASC||i.sort===ce.SORT_DESC)&&(this.sort=i.sort):(i.initialSort===ce.SORT_ASC||i.initialSort===ce.SORT_DESC)&&(this.sort=i.initialSort);var e=G(i.sortIndex),s=G(i.initialSortIndex);void 0!==e?null!==e&&(this.sortIndex=e):null!==s&&(this.sortIndex=s);var l=ro(i.hide),c=ro(i.initialHide);this.visible=void 0!==l?!l:!c,this.setPinned(void 0!==i.pinned?i.pinned:i.initialPinned);var p=G(i.flex),m=G(i.initialFlex);void 0!==p?this.flex=p:void 0!==m&&(this.flex=m)},d.prototype.setColDef=function(i,e){this.colDef=i,this.userProvidedColDef=e,this.initMinAndMaxWidths(),this.initDotNotation()},d.prototype.getUserProvidedColDef=function(){return this.userProvidedColDef},d.prototype.setParent=function(i){this.parent=i},d.prototype.getParent=function(){return this.parent},d.prototype.setOriginalParent=function(i){this.originalParent=i},d.prototype.getOriginalParent=function(){return this.originalParent},d.prototype.initialise=function(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.validate()},d.prototype.initDotNotation=function(){var i=this.gridOptionsWrapper.isSuppressFieldDotNotation();this.fieldContainsDots=Le(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!i,this.tooltipFieldContainsDots=Le(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!i},d.prototype.initMinAndMaxWidths=function(){var i=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(i),this.maxWidth=this.columnUtils.calculateColMaxWidth(i)},d.prototype.resetActualWidth=function(i){void 0===i&&(i="api");var e=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(e,i,!0)},d.prototype.isEmptyGroup=function(){return!1},d.prototype.isRowGroupDisplayed=function(i){return!(ye(this.colDef)||ye(this.colDef.showRowGroup)||!0!==this.colDef.showRowGroup&&this.colDef.showRowGroup!==i)},d.prototype.isPrimary=function(){return this.primary},d.prototype.isFilterAllowed=function(){return this.primary&&(!!this.colDef.filter||!!this.colDef.filterFramework)},d.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},d.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},d.prototype.validate=function(){var i=this.colDef;function e(p,m,w){pn(function(){w?console.warn(p,w):pn(function(){return console.warn(p)},m)},m)}this.gridOptionsWrapper.isRowModelDefault()&&!jt.isRegistered(K.GXE.RowGroupingModule)&&["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","enableValue","pivot","pivotIndex","aggFunc"].forEach(function(p){Le(i[p])&&(jt.isPackageBased()?e("AG Grid: "+p+" is only valid in ag-grid-enterprise, your column definition should not have "+p,"ColumnRowGroupingMissing"+p):e("AG Grid: "+p+" is only valid with AG Grid Enterprise Module "+K.GXE.RowGroupingModule+" - your column definition should not have "+p,"ColumnRowGroupingMissing"+p))}),jt.isRegistered(K.GXE.RichSelectModule)||"agRichSelect"===this.colDef.cellEditor&&(jt.isPackageBased()?e("AG Grid: "+this.colDef.cellEditor+" can only be used with ag-grid-enterprise","ColumnRichSelectMissing"):e("AG Grid: "+this.colDef.cellEditor+" can only be used with AG Grid Enterprise Module "+K.GXE.RichSelectModule,"ColumnRichSelectMissing")),this.gridOptionsWrapper.isTreeData()&&["rowGroup","rowGroupIndex","pivot","pivotIndex"].forEach(function(p){Le(i[p])&&e("AG Grid: "+p+" is not possible when doing tree data, your column definition should not have "+p,"TreeDataCannotRowGroup")}),Le(this.colDef.width)&&"number"!=typeof this.colDef.width&&e("AG Grid: colDef.width should be a number, not "+typeof this.colDef.width,"ColumnCheck_asdfawef"),i.pinnedRowCellRenderer&&e("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),i.pinnedRowCellRendererParams&&e("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),i.pinnedRowCellRendererFramework&&e("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column","colDef.pinnedRowCellRenderer-deprecated"),i.pinnedRowValueGetter&&e("AG Grid: pinnedRowCellRenderer is deprecated, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue.","colDef.pinnedRowCellRenderer-deprecated")},d.prototype.addEventListener=function(i,e){this.eventService.addEventListener(i,e)},d.prototype.removeEventListener=function(i,e){this.eventService.removeEventListener(i,e)},d.prototype.createColumnFunctionCallbackParams=function(i){return{node:i,data:i.data,column:this,colDef:this.colDef,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()}},d.prototype.isSuppressNavigable=function(i){if("boolean"==typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"==typeof this.colDef.suppressNavigable){var e=this.createColumnFunctionCallbackParams(i);return(0,this.colDef.suppressNavigable)(e)}return!1},d.prototype.isCellEditable=function(i){return!(i.group&&!this.gridOptionsWrapper.isEnableGroupEdit())&&this.isColumnFunc(i,this.colDef.editable)},d.prototype.isSuppressFillHandle=function(){return!!this.colDef.suppressFillHandle},d.prototype.isRowDrag=function(i){return this.isColumnFunc(i,this.colDef.rowDrag)},d.prototype.isDndSource=function(i){return this.isColumnFunc(i,this.colDef.dndSource)},d.prototype.isCellCheckboxSelection=function(i){return this.isColumnFunc(i,this.colDef.checkboxSelection)},d.prototype.isSuppressPaste=function(i){return this.isColumnFunc(i,this.colDef?this.colDef.suppressPaste:null)},d.prototype.isResizable=function(){return!0===this.colDef.resizable},d.prototype.isColumnFunc=function(i,e){return"boolean"==typeof e?e:"function"==typeof e&&e(this.createColumnFunctionCallbackParams(i))},d.prototype.setMoving=function(i,e){void 0===e&&(e="api"),this.moving=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_MOVING_CHANGED,e))},d.prototype.createColumnEvent=function(i,e){return{api:this.gridApi,columnApi:this.columnApi,type:i,column:this,columns:[this],source:e}},d.prototype.isMoving=function(){return this.moving},d.prototype.getSort=function(){return this.sort},d.prototype.setSort=function(i,e){void 0===e&&(e="api"),this.sort!==i&&(this.sort=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_SORT_CHANGED,e)))},d.prototype.setMenuVisible=function(i,e){void 0===e&&(e="api"),this.menuVisible!==i&&(this.menuVisible=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_MENU_VISIBLE_CHANGED,e)))},d.prototype.isMenuVisible=function(){return this.menuVisible},d.prototype.isSortAscending=function(){return this.sort===ce.SORT_ASC},d.prototype.isSortDescending=function(){return this.sort===ce.SORT_DESC},d.prototype.isSortNone=function(){return ye(this.sort)},d.prototype.isSorting=function(){return Le(this.sort)},d.prototype.getSortIndex=function(){return this.sortIndex},d.prototype.setSortIndex=function(i){this.sortIndex=i},d.prototype.setAggFunc=function(i){this.aggFunc=i},d.prototype.getAggFunc=function(){return this.aggFunc},d.prototype.getLeft=function(){return this.left},d.prototype.getOldLeft=function(){return this.oldLeft},d.prototype.getRight=function(){return this.left+this.actualWidth},d.prototype.setLeft=function(i,e){void 0===e&&(e="api"),this.oldLeft=this.left,this.left!==i&&(this.left=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_LEFT_CHANGED,e)))},d.prototype.isFilterActive=function(){return this.filterActive},d.prototype.setFilterActive=function(i,e,s){void 0===e&&(e="api"),this.filterActive!==i&&(this.filterActive=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_FILTER_ACTIVE_CHANGED,e)));var l=this.createColumnEvent(d.EVENT_FILTER_CHANGED,e);s&&io(l,s),this.eventService.dispatchEvent(l)},d.prototype.setPinned=function(i){this.pinned=!0===i||i===ce.PINNED_LEFT?ce.PINNED_LEFT:i===ce.PINNED_RIGHT?ce.PINNED_RIGHT:null},d.prototype.setFirstRightPinned=function(i,e){void 0===e&&(e="api"),this.firstRightPinned!==i&&(this.firstRightPinned=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_FIRST_RIGHT_PINNED_CHANGED,e)))},d.prototype.setLastLeftPinned=function(i,e){void 0===e&&(e="api"),this.lastLeftPinned!==i&&(this.lastLeftPinned=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_LAST_LEFT_PINNED_CHANGED,e)))},d.prototype.isFirstRightPinned=function(){return this.firstRightPinned},d.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},d.prototype.isPinned=function(){return this.pinned===ce.PINNED_LEFT||this.pinned===ce.PINNED_RIGHT},d.prototype.isPinnedLeft=function(){return this.pinned===ce.PINNED_LEFT},d.prototype.isPinnedRight=function(){return this.pinned===ce.PINNED_RIGHT},d.prototype.getPinned=function(){return this.pinned},d.prototype.setVisible=function(i,e){void 0===e&&(e="api");var s=!0===i;this.visible!==s&&(this.visible=s,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_VISIBLE_CHANGED,e)))},d.prototype.isVisible=function(){return this.visible},d.prototype.getColDef=function(){return this.colDef},d.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},d.prototype.getColId=function(){return this.colId},d.prototype.getId=function(){return this.getColId()},d.prototype.getUniqueId=function(){return this.getId()},d.prototype.getDefinition=function(){return this.colDef},d.prototype.getActualWidth=function(){return this.actualWidth},d.prototype.createBaseColDefParams=function(i){return{node:i,data:i.data,colDef:this.colDef,column:this,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}},d.prototype.getColSpan=function(i){if(ye(this.colDef.colSpan))return 1;var e=this.createBaseColDefParams(i),s=this.colDef.colSpan(e);return Math.max(s,1)},d.prototype.getRowSpan=function(i){if(ye(this.colDef.rowSpan))return 1;var e=this.createBaseColDefParams(i),s=this.colDef.rowSpan(e);return Math.max(s,1)},d.prototype.setActualWidth=function(i,e,s){void 0===e&&(e="api"),void 0===s&&(s=!1),null!=this.minWidth&&(i=Math.max(i,this.minWidth)),null!=this.maxWidth&&(i=Math.min(i,this.maxWidth)),this.actualWidth!==i&&(this.actualWidth=i,this.flex&&"flex"!==e&&"gridInitializing"!==e&&(this.flex=null),s||this.fireColumnWidthChangedEvent(e))},d.prototype.fireColumnWidthChangedEvent=function(i){this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_WIDTH_CHANGED,i))},d.prototype.isGreaterThanMax=function(i){return null!=this.maxWidth&&i>this.maxWidth},d.prototype.getMinWidth=function(){return this.minWidth},d.prototype.getMaxWidth=function(){return this.maxWidth},d.prototype.getFlex=function(){return this.flex||0},d.prototype.setFlex=function(i){this.flex!==i&&(this.flex=i)},d.prototype.setMinimum=function(i){void 0===i&&(i="api"),Le(this.minWidth)&&this.setActualWidth(this.minWidth,i)},d.prototype.setRowGroupActive=function(i,e){void 0===e&&(e="api"),this.rowGroupActive!==i&&(this.rowGroupActive=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_ROW_GROUP_CHANGED,e)))},d.prototype.isRowGroupActive=function(){return this.rowGroupActive},d.prototype.setPivotActive=function(i,e){void 0===e&&(e="api"),this.pivotActive!==i&&(this.pivotActive=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_PIVOT_CHANGED,e)))},d.prototype.isPivotActive=function(){return this.pivotActive},d.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},d.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},d.prototype.setValueActive=function(i,e){void 0===e&&(e="api"),this.aggregationActive!==i&&(this.aggregationActive=i,this.eventService.dispatchEvent(this.createColumnEvent(d.EVENT_VALUE_CHANGED,e)))},d.prototype.isValueActive=function(){return this.aggregationActive},d.prototype.isAllowPivot=function(){return!0===this.colDef.enablePivot},d.prototype.isAllowValue=function(){return!0===this.colDef.enableValue},d.prototype.isAllowRowGroup=function(){return!0===this.colDef.enableRowGroup},d.prototype.getMenuTabs=function(i){var e=this.getColDef().menuTabs;return null==e&&(e=i),e},d.prototype.isLockPosition=function(){return console.warn("AG Grid: since v21, col.isLockPosition() should not be used, please use col.getColDef().lockPosition instead."),!!this.colDef&&!!this.colDef.lockPosition},d.prototype.isLockVisible=function(){return console.warn("AG Grid: since v21, col.isLockVisible() should not be used, please use col.getColDef().lockVisible instead."),!!this.colDef&&!!this.colDef.lockVisible},d.prototype.isLockPinned=function(){return console.warn("AG Grid: since v21, col.isLockPinned() should not be used, please use col.getColDef().lockPinned instead."),!!this.colDef&&!!this.colDef.lockPinned},d.EVENT_MOVING_CHANGED="movingChanged",d.EVENT_LEFT_CHANGED="leftChanged",d.EVENT_WIDTH_CHANGED="widthChanged",d.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",d.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",d.EVENT_VISIBLE_CHANGED="visibleChanged",d.EVENT_FILTER_CHANGED="filterChanged",d.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",d.EVENT_SORT_CHANGED="sortChanged",d.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",d.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",d.EVENT_PIVOT_CHANGED="columnPivotChanged",d.EVENT_VALUE_CHANGED="columnValueChanged",Mu([B("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),Mu([B("columnUtils")],d.prototype,"columnUtils",void 0),Mu([B("columnApi")],d.prototype,"columnApi",void 0),Mu([B("gridApi")],d.prototype,"gridApi",void 0),Mu([B("context")],d.prototype,"context",void 0),Mu([Qe],d.prototype,"initialise",null),d}(),ri=function(){function d(i,e,s,l){this.displayedChildren=[],this.localEventService=new qs,this.groupId=e,this.instanceId=s,this.originalColumnGroup=i,this.pinned=l}return d.createUniqueId=function(i,e){return i+"_"+e},d.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},d.prototype.getParent=function(){return this.parent},d.prototype.setParent=function(i){this.parent=i},d.prototype.getUniqueId=function(){return d.createUniqueId(this.groupId,this.instanceId)},d.prototype.isEmptyGroup=function(){return 0===this.displayedChildren.length},d.prototype.isMoving=function(){var i=this.getOriginalColumnGroup().getLeafColumns();return!(!i||0===i.length)&&i.every(function(e){return e.isMoving()})},d.prototype.checkLeft=function(){if(this.displayedChildren.forEach(function(l){l instanceof d&&l.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsWrapper.isEnableRtl()){var e=Vn(this.displayedChildren).getLeft();this.setLeft(e)}else{var s=this.displayedChildren[0].getLeft();this.setLeft(s)}else this.setLeft(null)},d.prototype.getLeft=function(){return this.left},d.prototype.getOldLeft=function(){return this.oldLeft},d.prototype.setLeft=function(i){this.oldLeft=i,this.left!==i&&(this.left=i,this.localEventService.dispatchEvent(this.createAgEvent(d.EVENT_LEFT_CHANGED)))},d.prototype.getPinned=function(){return this.pinned},d.prototype.createAgEvent=function(i){return{type:i}},d.prototype.addEventListener=function(i,e){this.localEventService.addEventListener(i,e)},d.prototype.removeEventListener=function(i,e){this.localEventService.removeEventListener(i,e)},d.prototype.getGroupId=function(){return this.groupId},d.prototype.getInstanceId=function(){return this.instanceId},d.prototype.isChildInThisGroupDeepSearch=function(i){var e=!1;return this.children.forEach(function(s){i===s&&(e=!0),s instanceof d&&s.isChildInThisGroupDeepSearch(i)&&(e=!0)}),e},d.prototype.getActualWidth=function(){var i=0;return this.displayedChildren&&this.displayedChildren.forEach(function(e){i+=e.getActualWidth()}),i},d.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var i=!1;return this.displayedChildren.forEach(function(e){e.isResizable()&&(i=!0)}),i},d.prototype.getMinWidth=function(){var i=0;return this.displayedChildren.forEach(function(e){i+=e.getMinWidth()||0}),i},d.prototype.addChild=function(i){this.children||(this.children=[]),this.children.push(i)},d.prototype.getDisplayedChildren=function(){return this.displayedChildren},d.prototype.getLeafColumns=function(){var i=[];return this.addLeafColumns(i),i},d.prototype.getDisplayedLeafColumns=function(){var i=[];return this.addDisplayedLeafColumns(i),i},d.prototype.getDefinition=function(){return this.originalColumnGroup.getColGroupDef()},d.prototype.getColGroupDef=function(){return this.originalColumnGroup.getColGroupDef()},d.prototype.isPadding=function(){return this.originalColumnGroup.isPadding()},d.prototype.isExpandable=function(){return this.originalColumnGroup.isExpandable()},d.prototype.isExpanded=function(){return this.originalColumnGroup.isExpanded()},d.prototype.setExpanded=function(i){this.originalColumnGroup.setExpanded(i)},d.prototype.addDisplayedLeafColumns=function(i){this.displayedChildren.forEach(function(e){e instanceof Tn?i.push(e):e instanceof d&&e.addDisplayedLeafColumns(i)})},d.prototype.addLeafColumns=function(i){this.children.forEach(function(e){e instanceof Tn?i.push(e):e instanceof d&&e.addLeafColumns(i)})},d.prototype.getChildren=function(){return this.children},d.prototype.getColumnGroupShow=function(){return this.originalColumnGroup.getColumnGroupShow()},d.prototype.getOriginalColumnGroup=function(){return this.originalColumnGroup},d.prototype.getPaddingLevel=function(){var i=this.getParent();return this.isPadding()&&i&&i.isPadding()?1+i.getPaddingLevel():0},d.prototype.calculateDisplayedColumns=function(){var i=this;this.displayedChildren=[];for(var e=this;null!=e&&e.isPadding();)e=e.getParent();if(!e||!e.originalColumnGroup.isExpandable())return this.displayedChildren=this.children,void this.localEventService.dispatchEvent(this.createAgEvent(d.EVENT_DISPLAYED_CHILDREN_CHANGED));this.children.forEach(function(l){if(!(l instanceof d)||l.displayedChildren&&l.displayedChildren.length)switch(l.getColumnGroupShow()){case d.HEADER_GROUP_SHOW_OPEN:e.originalColumnGroup.isExpanded()&&i.displayedChildren.push(l);break;case d.HEADER_GROUP_SHOW_CLOSED:e.originalColumnGroup.isExpanded()||i.displayedChildren.push(l);break;default:i.displayedChildren.push(l)}}),this.localEventService.dispatchEvent(this.createAgEvent(d.EVENT_DISPLAYED_CHILDREN_CHANGED))},d.HEADER_GROUP_SHOW_OPEN="open",d.HEADER_GROUP_SHOW_CLOSED="closed",d.EVENT_LEFT_CHANGED="leftChanged",d.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([B("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),d}(),gr=function(){function d(i,e,s,l){this.localEventService=new qs,this.expandable=!1,this.colGroupDef=i,this.groupId=e,this.expanded=!!i&&!!i.openByDefault,this.padding=s,this.level=l}return d.prototype.setOriginalParent=function(i){this.originalParent=i},d.prototype.getOriginalParent=function(){return this.originalParent},d.prototype.getLevel=function(){return this.level},d.prototype.isVisible=function(){return!!this.children&&this.children.some(function(i){return i.isVisible()})},d.prototype.isPadding=function(){return this.padding},d.prototype.setExpanded=function(i){this.expanded=void 0!==i&&i,this.localEventService.dispatchEvent({type:d.EVENT_EXPANDED_CHANGED})},d.prototype.isExpandable=function(){return this.expandable},d.prototype.isExpanded=function(){return this.expanded},d.prototype.getGroupId=function(){return this.groupId},d.prototype.getId=function(){return this.getGroupId()},d.prototype.setChildren=function(i){this.children=i},d.prototype.getChildren=function(){return this.children},d.prototype.getColGroupDef=function(){return this.colGroupDef},d.prototype.getLeafColumns=function(){var i=[];return this.addLeafColumns(i),i},d.prototype.addLeafColumns=function(i){!this.children||this.children.forEach(function(e){e instanceof Tn?i.push(e):e instanceof d&&e.addLeafColumns(i)})},d.prototype.getColumnGroupShow=function(){var i=this.colGroupDef;if(i)return i.columnGroupShow},d.prototype.setupExpandable=function(){var i=this;this.setExpandable(),this.getLeafColumns().forEach(function(e){return e.addEventListener(Tn.EVENT_VISIBLE_CHANGED,i.onColumnVisibilityChanged.bind(i))})},d.prototype.setExpandable=function(){if(!this.isPadding()){for(var i=!1,e=!1,s=!1,l=this.findChildrenRemovingPadding(),c=0,p=l.length;c<p;c++){var m=l[c];if(m.isVisible()){var w=m.getColumnGroupShow();w===ri.HEADER_GROUP_SHOW_OPEN?(i=!0,s=!0):w===ri.HEADER_GROUP_SHOW_CLOSED?(e=!0,s=!0):(i=!0,e=!0)}}var x=i&&e&&s;this.expandable!==x&&(this.expandable=x,this.localEventService.dispatchEvent({type:d.EVENT_EXPANDABLE_CHANGED}))}},d.prototype.findChildrenRemovingPadding=function(){var i=[];return function s(l){l.forEach(function(c){c instanceof d&&c.isPadding()?s(c.children):i.push(c)})}(this.children),i},d.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},d.prototype.addEventListener=function(i,e){this.localEventService.addEventListener(i,e)},d.prototype.removeEventListener=function(i,e){this.localEventService.removeEventListener(i,e)},d.EVENT_EXPANDED_CHANGED="expandedChanged",d.EVENT_EXPANDABLE_CHANGED="expandableChanged",d}(),p_={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},Sv="__ag_Grid_Stop_Propagation",h_=["touchstart","touchend","touchmove","touchcancel"],Pf={};function oo(d){d[Sv]=!0}function xa(d){return!0===d[Sv]}var Ev=function(){var d={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(s){if("boolean"==typeof Pf[s])return Pf[s];var l=document.createElement(d[s]||"div"),c=(s="on"+s)in l;return c||(l.setAttribute(s,"return;"),c="function"==typeof l[s]),Pf[s]=c}}();function If(d,i,e){for(var s=Ou(i);s;){var l=d.getDomData(s,e);if(l)return l;s=s.parentElement}return null}function Ou(d){return d.target||d.srcElement}function Lf(d,i){return!(!i||!d)&&bv(i).indexOf(d)>=0}function v_(d){for(var i=[],e=Ou(d);e;)i.push(e),e=e.parentElement;return i}function bv(d){var i=d;return i.deepPath?i.deepPath():i.path?i.path:i.composedPath?i.composedPath():i.__agGridEventPath?i.__agGridEventPath:v_(d)}function qr(d,i,e,s){var l=bn(h_,e);d&&d.addEventListener&&d.addEventListener(i,e,s,l?{passive:!0}:void 0)}var Wc=Object.freeze({__proto__:null,stopPropagationForAgGrid:oo,isStopPropagationForAgGrid:xa,isEventSupported:Ev,getCtrlForEvent:If,addChangeListener:function(d,i){d.addEventListener("changed",i),d.addEventListener("paste",i),d.addEventListener("input",i),d.addEventListener("keydown",i),d.addEventListener("keyup",i)},getTarget:Ou,isElementInEventPath:Lf,createEventPath:v_,addAgGridEventPath:function(d){d.__agGridEventPath=bv(d)},getEventPath:bv,addSafePassiveEventListener:qr}),_o=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ye=function(){function d(){var i=this;this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.isAlive=function(){return!i.destroyed}}return d.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},d.prototype.getContext=function(){return this.context},d.prototype.destroy=function(){this.destroyFunctions.forEach(function(i){return i()}),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:d.EVENT_DESTROYED})},d.prototype.addEventListener=function(i,e){this.localEventService||(this.localEventService=new qs),this.localEventService.addEventListener(i,e)},d.prototype.removeEventListener=function(i,e){this.localEventService&&this.localEventService.removeEventListener(i,e)},d.prototype.dispatchEventAsync=function(i){var e=this;window.setTimeout(function(){return e.dispatchEvent(i)},0)},d.prototype.dispatchEvent=function(i){this.localEventService&&this.localEventService.dispatchEvent(i)},d.prototype.addManagedListener=function(i,e,s){var l=this;if(!this.destroyed){i instanceof HTMLElement?qr(this.getFrameworkOverrides(),i,e,s):i.addEventListener(e,s);var c=function p(){return i.removeEventListener(e,s),l.destroyFunctions=l.destroyFunctions.filter(function(m){return m!==p}),null};return this.destroyFunctions.push(c),c}},d.prototype.addDestroyFunc=function(i){this.isAlive()?this.destroyFunctions.push(i):i()},d.prototype.createManagedBean=function(i,e){var s=this.createBean(i,e);return this.addDestroyFunc(this.destroyBean.bind(this,i,e)),s},d.prototype.createBean=function(i,e,s){return(e||this.getContext()).createBean(i,s)},d.prototype.destroyBean=function(i,e){return(e||this.getContext()).destroyBean(i)},d.prototype.destroyBeans=function(i,e){var s=this;return i&&Vt(i,function(l){return s.destroyBean(l,e)}),[]},d.EVENT_DESTROYED="destroyed",_o([B("frameworkOverrides")],d.prototype,"frameworkOverrides",void 0),_o([B("context")],d.prototype,"context",void 0),_o([B("eventService")],d.prototype,"eventService",void 0),_o([B("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),_o([Ii],d.prototype,"destroy",null),d}(),TE=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),xv=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Rv=function(d,i){return function(e,s){i(e,s,d)}},g_=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return TE(i,d),i.prototype.setBeans=function(e){this.logger=e.create("ColumnFactory")},i.prototype.createColumnTree=function(e,s,l){var c=new fi,p=this.extractExistingTreeData(l),m=p.existingCols,w=p.existingGroups;c.addExistingKeys(p.existingColKeys);var A=this.recursivelyCreateColumns(e,0,s,m,c,w),I=this.findMaxDept(A,0);this.logger.log("Number of levels for grouped columns is "+I);var U=this.balanceColumnTree(A,0,I,c);return this.columnUtils.depthFirstOriginalTreeSearch(null,U,function(oe,xe){oe instanceof gr&&oe.setupExpandable(),oe.setOriginalParent(xe)}),{columnTree:U,treeDept:I}},i.prototype.extractExistingTreeData=function(e){var s=[],l=[],c=[];return e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,function(p){if(p instanceof gr)l.push(p);else{var w=p;c.push(w.getId()),s.push(w)}}),{existingCols:s,existingGroups:l,existingColKeys:c}},i.prototype.createForAutoGroups=function(e,s){var l=this,c=[];return e.forEach(function(p){var m=l.createAutoGroupTreeItem(s,p);c.push(m)}),c},i.prototype.createAutoGroupTreeItem=function(e,s){for(var c=s,p=this.findDepth(e)-1;p>=0;p--){var m=new gr(null,"FAKE_PATH_"+s.getId()+"}_"+p,!0,p);this.context.createBean(m),m.setChildren([c]),c.setOriginalParent(m),c=m}return c},i.prototype.findDepth=function(e){for(var s=0,l=e;l&&l[0]&&l[0]instanceof gr;)s++,l=l[0].getChildren();return s},i.prototype.balanceColumnTree=function(e,s,l,c){for(var p=[],m=0;m<e.length;m++){var w=e[m];if(w instanceof gr){var x=w,A=this.balanceColumnTree(x.getChildren(),s+1,l,c);x.setChildren(A),p.push(x)}else{for(var I=void 0,U=void 0,Y=l-1;Y>=s;Y--){var Q=c.getUniqueKey(null,null),oe=this.createMergedColGroupDef(null),xe=new gr(oe,Q,!0,s);this.context.createBean(xe),U&&U.setChildren([xe]),U=xe,I||(I=U)}if(I&&U){if(p.push(I),e.some(function(Ve){return Ve instanceof gr})){U.setChildren([w]);continue}U.setChildren(e);break}p.push(w)}}return p},i.prototype.findMaxDept=function(e,s){for(var l=s,c=0;c<e.length;c++){var p=e[c];if(p instanceof gr){var w=this.findMaxDept(p.getChildren(),s+1);l<w&&(l=w)}}return l},i.prototype.recursivelyCreateColumns=function(e,s,l,c,p,m){var w=this,x=[];return e&&e.forEach(function(A){var I;I=w.isColumnGroup(A)?w.createColumnGroup(l,A,s,c,p,m):w.createColumn(l,A,c,p),x.push(I)}),x},i.prototype.createColumnGroup=function(e,s,l,c,p,m){var w=this.createMergedColGroupDef(s),x=p.getUniqueKey(w.groupId||null,null),A=new gr(w,x,!1,l);this.context.createBean(A);var I=this.findExistingGroup(s,m);I&&I.isExpanded()&&A.setExpanded(!0);var U=this.recursivelyCreateColumns(w.children,l+1,e,c,p,m);return A.setChildren(U),A},i.prototype.createMergedColGroupDef=function(e){var s={};return ti(s,this.gridOptionsWrapper.getDefaultColGroupDef()),ti(s,e),this.checkForDeprecatedItems(s),s},i.prototype.createColumn=function(e,s,l,c){var p=this.mergeColDefs(s);this.checkForDeprecatedItems(p);var m=this.findExistingColumn(s,l);if(m)m.setColDef(p,s),this.applyColumnState(m,p);else{var w=c.getUniqueKey(p.colId,p.field);m=new Tn(p,s,w,e),this.context.createBean(m)}return m},i.prototype.applyColumnState=function(e,s){var l=G(s.flex);if(void 0!==l&&e.setFlex(l),e.getFlex()<=0){var p=G(s.width);if(null!=p)e.setActualWidth(p);else{var m=e.getActualWidth();e.setActualWidth(m)}}void 0!==s.sort&&e.setSort(s.sort==ce.SORT_ASC||s.sort==ce.SORT_DESC?s.sort:void 0);var w=G(s.sortIndex);void 0!==w&&e.setSortIndex(w);var x=ro(s.hide);void 0!==x&&e.setVisible(!x),void 0!==s.pinned&&e.setPinned(s.pinned)},i.prototype.findExistingColumn=function(e,s){var l=Pi(s,function(c){var p=c.getUserProvidedColDef();if(!p)return!1;var w=null!=e.field;return null!=e.colId?c.getId()===e.colId:w?p.field===e.field:p===e});return s&&l&&ei(s,l),l},i.prototype.findExistingGroup=function(e,s){var l=Pi(s,function(c){return!(!c.getColGroupDef()||null==e.groupId||c.getId()!==e.groupId)});return l&&ei(s,l),l},i.prototype.mergeColDefs=function(e){var s={},l=this.gridOptionsWrapper.getDefaultColDef();io(s,l,!1,!0);var c=e.type;return c||(c=l&&l.type),c&&this.assignColumnTypes(c,s),io(s,e,!1,!0),s},i.prototype.assignColumnTypes=function(e,s){var l=[];if(e instanceof Array)e.some(function(w){return"string"!=typeof w})?console.warn("ag-grid: if colDef.type is supplied an array it should be of type 'string[]'"):l=e;else{if("string"!=typeof e)return void console.warn("ag-grid: colDef.type should be of type 'string' | 'string[]'");l=e.split(",")}var p=ti({},p_);In(this.gridOptionsWrapper.getColumnTypes()||{},function(w,x){w in p?console.warn("AG Grid: the column type '"+w+"' is a default column type and cannot be overridden."):p[w]=x}),l.forEach(function(w){var x=p[w.trim()];x?io(s,x,!1,!0):console.warn("ag-grid: colDef.type '"+w+"' does not correspond to defined gridOptions.columnTypes")})},i.prototype.checkForDeprecatedItems=function(e){if(e){var s=e;void 0!==s.group&&console.warn("ag-grid: colDef.group is invalid, please check documentation on how to do grouping as it changed in version 3"),void 0!==s.headerGroup&&console.warn("ag-grid: colDef.headerGroup is invalid, please check documentation on how to do grouping as it changed in version 3"),void 0!==s.headerGroupShow&&console.warn("ag-grid: colDef.headerGroupShow is invalid, should be columnGroupShow, please check documentation on how to do grouping as it changed in version 3"),void 0!==s.suppressRowGroup&&console.warn("ag-grid: colDef.suppressRowGroup is deprecated, please use colDef.type instead"),void 0!==s.suppressAggregation&&console.warn("ag-grid: colDef.suppressAggregation is deprecated, please use colDef.type instead"),(s.suppressRowGroup||s.suppressAggregation)&&console.warn("ag-grid: colDef.suppressAggregation and colDef.suppressRowGroup are deprecated, use allowRowGroup, allowPivot and allowValue instead"),s.displayName&&(console.warn("ag-grid: Found displayName "+s.displayName+", please use headerName instead, displayName is deprecated."),s.headerName=s.displayName)}},i.prototype.isColumnGroup=function(e){return void 0!==e.children},xv([B("columnUtils")],i.prototype,"columnUtils",void 0),xv([Rv(0,Li("loggerFactory"))],i.prototype,"setBeans",null),xv([ht("columnFactory")],i)}(Ye),$=function(){function d(){}return d.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",d.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",d.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",d.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",d.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",d.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",d.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",d.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",d.EVENT_COLUMN_MOVED="columnMoved",d.EVENT_COLUMN_VISIBLE="columnVisible",d.EVENT_COLUMN_PINNED="columnPinned",d.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",d.EVENT_COLUMN_RESIZED="columnResized",d.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",d.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",d.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",d.EVENT_ROW_GROUP_OPENED="rowGroupOpened",d.EVENT_ROW_DATA_CHANGED="rowDataChanged",d.EVENT_ROW_DATA_UPDATED="rowDataUpdated",d.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",d.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",d.EVENT_CHART_CREATED="chartCreated",d.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",d.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",d.EVENT_CHART_DESTROYED="chartDestroyed",d.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",d.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",d.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",d.EVENT_MODEL_UPDATED="modelUpdated",d.EVENT_PASTE_START="pasteStart",d.EVENT_PASTE_END="pasteEnd",d.EVENT_FILL_START="fillStart",d.EVENT_FILL_END="fillEnd",d.EVENT_CELL_CLICKED="cellClicked",d.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",d.EVENT_CELL_MOUSE_DOWN="cellMouseDown",d.EVENT_CELL_CONTEXT_MENU="cellContextMenu",d.EVENT_CELL_VALUE_CHANGED="cellValueChanged",d.EVENT_ROW_VALUE_CHANGED="rowValueChanged",d.EVENT_CELL_FOCUSED="cellFocused",d.EVENT_ROW_SELECTED="rowSelected",d.EVENT_SELECTION_CHANGED="selectionChanged",d.EVENT_CELL_KEY_DOWN="cellKeyDown",d.EVENT_CELL_KEY_PRESS="cellKeyPress",d.EVENT_CELL_MOUSE_OVER="cellMouseOver",d.EVENT_CELL_MOUSE_OUT="cellMouseOut",d.EVENT_FILTER_CHANGED="filterChanged",d.EVENT_FILTER_MODIFIED="filterModified",d.EVENT_FILTER_OPENED="filterOpened",d.EVENT_SORT_CHANGED="sortChanged",d.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",d.EVENT_ROW_CLICKED="rowClicked",d.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",d.EVENT_GRID_READY="gridReady",d.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",d.EVENT_VIEWPORT_CHANGED="viewportChanged",d.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",d.EVENT_FIRST_DATA_RENDERED="firstDataRendered",d.EVENT_DRAG_STARTED="dragStarted",d.EVENT_DRAG_STOPPED="dragStopped",d.EVENT_CHECKBOX_CHANGED="checkboxChanged",d.EVENT_ROW_EDITING_STARTED="rowEditingStarted",d.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",d.EVENT_CELL_EDITING_STARTED="cellEditingStarted",d.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",d.EVENT_BODY_SCROLL="bodyScroll",d.EVENT_BODY_SCROLL_END="bodyScrollEnd",d.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",d.EVENT_PAGINATION_CHANGED="paginationChanged",d.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",d.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",d.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",d.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",d.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",d.EVENT_FLASH_CELLS="flashCells",d.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",d.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",d.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",d.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",d.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",d.EVENT_ROW_DRAG_ENTER="rowDragEnter",d.EVENT_ROW_DRAG_MOVE="rowDragMove",d.EVENT_ROW_DRAG_LEAVE="rowDragLeave",d.EVENT_ROW_DRAG_END="rowDragEnd",d.EVENT_POPUP_TO_FRONT="popupToFront",d.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",d.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",d.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",d.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",d.EVENT_KEYBOARD_FOCUS="keyboardFocus",d.EVENT_MOUSE_FOCUS="mouseFocus",d.EVENT_STORE_UPDATED="storeUpdated",d}(),Av=function(){function d(){this.existingIds={}}return d.prototype.getInstanceIdForKey=function(i){var s,e=this.existingIds[i];return this.existingIds[i]=s="number"!=typeof e?0:e+1,s},d}(),m_=/[&<>"']/g,y_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function __(d,i){if(i=Math.floor(i),0===d.length||0===i)return"";var e=d.length*i;for(i=Math.floor(Math.log(i)/Math.log(2));i;)d+=d,i--;return d+d.substring(0,e-d.length)}function Tv(d,i,e){return d.length>i?d:((i-=d.length)>e.length&&(e+=__(e,i/e.length)),e.slice(0,i)+d)}function C_(d){return null==d?null:d.replace(/([A-Z])/g,function(i){return"-"+i[0].toLowerCase()})}function Dv(d){return null==d?null:d.replace(/-([a-z])/g,function(i){return i[1].toUpperCase()})}function w_(d){return d[0].toUpperCase()+d.substr(1).toLowerCase()}function ra(d){return null==d?null:d.toString().toString().replace(m_,function(i){return y_[i]})}function Yr(d){return d&&null!=d?d.replace(/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g,"$1$4 $2$3$5").replace("."," ").split(" ").map(function(s){return s.substring(0,1).toUpperCase()+(s.length>1?s.substring(1,s.length):"")}).join(" "):null}function Mv(d,i){return d===i||null!=d&&d.slice(0,i.length)===i}var Ff=Object.freeze({__proto__:null,utf8_encode:function(d){var i=String.fromCharCode;function l(I,U){return i(I>>U&63|128)}function c(I){if(I>=0&&I<=31&&10!==I)return"_x"+Tv(I.toString(16).toUpperCase(),4,"0")+"_";if(0==(4294967168&I))return i(I);var Q="";return 0==(4294965248&I)?Q=i(I>>6&31|192):0==(4294901760&I)?(function(I){if(I>=55296&&I<=57343)throw Error("Lone surrogate U+"+I.toString(16).toUpperCase()+" is not a scalar value")}(I),Q=i(I>>12&15|224),Q+=l(I,6)):0==(4292870144&I)&&(Q=i(I>>18&7|240),Q+=l(I,12),Q+=l(I,6)),Q+i(63&I|128)}for(var p=function(I){var U=[];if(!I)return[];for(var oe,xe,Y=I.length,Q=0;Q<Y;)(oe=I.charCodeAt(Q++))>=55296&&oe<=56319&&Q<Y?56320==(64512&(xe=I.charCodeAt(Q++)))?U.push(((1023&oe)<<10)+(1023&xe)+65536):(U.push(oe),Q--):U.push(oe);return U}(d),m=p.length,w=-1,A="";++w<m;)A+=c(p[w]);return A},stringRepeat:__,padStart:Tv,camelCaseToHyphen:C_,hyphenToCamelCase:Dv,capitalise:w_,escapeString:ra,camelCaseToHumanText:Yr,startsWith:Mv});function Ra(d){var i=new Map;return d.forEach(function(e){return i.set(e[0],e[1])}),i}var Pv=Object.freeze({__proto__:null,convertToMap:Ra,mapById:function(d,i){var e=new Map;return d.forEach(function(s){return e.set(i(s),s)}),e},keys:function(d){var i=[];return d.forEach(function(e,s){return i.push(s)}),i}}),Gn=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Fr=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ME=function(d,i){return function(e,s){i(e,s,d)}},cn=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.primaryHeaderRowCount=0,e.secondaryHeaderRowCount=0,e.secondaryColumnsPresent=!1,e.gridHeaderRowCount=0,e.displayedColumnsLeft=[],e.displayedColumnsRight=[],e.displayedColumnsCenter=[],e.displayedColumns=[],e.displayedColumnsAndGroupsMap={},e.viewportColumns=[],e.viewportColumnsCenter=[],e.autoHeightActiveAtLeastOnce=!1,e.rowGroupColumns=[],e.valueColumns=[],e.pivotColumns=[],e.ready=!1,e.autoGroupsNeedBuilding=!1,e.forceRecreateAutoGroups=!1,e.pivotMode=!1,e.bodyWidth=0,e.leftWidth=0,e.rightWidth=0,e.bodyWidthDirty=!0,e.colDefVersion=0,e.flexColsCalculatedAtLestOnce=!1,e}return Gn(i,d),i.prototype.init=function(){this.suppressColumnVirtualisation=this.gridOptionsWrapper.isSuppressColumnVirtualisation();var e=this.gridOptionsWrapper.isPivotMode();this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.addManagedListener(this.gridOptionsWrapper,"autoGroupColumnDef",this.onAutoGroupColumnDefChanged.bind(this))},i.prototype.onAutoGroupColumnDefChanged=function(){this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged")},i.prototype.getColDefVersion=function(){return this.colDefVersion},i.prototype.setColumnDefs=function(e,s){var l=this;void 0===s&&(s="api");var c=!!this.columnDefs;this.colDefVersion++;var p=this.compareColumnStatesAndRaiseEvents(s);this.columnDefs=e,this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var m=this.primaryColumns,x=this.columnFactory.createColumnTree(e,!0,this.primaryColumnTree);this.primaryColumnTree=x.columnTree,this.primaryHeaderRowCount=x.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(function(A){return l.primaryColumnsMap[A.getId()]=A}),this.extractRowGroupColumns(s,m),this.extractPivotColumns(s,m),this.extractValueColumns(s,m),this.ready=!0,this.updateGridColumns(),c&&this.gridColsArePrimary&&!this.gridOptionsWrapper.isMaintainColumnOrder()&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(s),this.checkViewportColumns(),this.dispatchEverythingChanged(s),p(),this.dispatchNewColumnsLoaded()},i.prototype.dispatchNewColumnsLoaded=function(){this.eventService.dispatchEvent({type:$.EVENT_NEW_COLUMNS_LOADED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.dispatchEverythingChanged=function(e){void 0===e&&(e="api"),this.eventService.dispatchEvent({type:$.EVENT_COLUMN_EVERYTHING_CHANGED,api:this.gridApi,columnApi:this.columnApi,source:e})},i.prototype.orderGridColumnsLikePrimary=function(){var e=this,s=this.primaryColumns;!s||this.gridColumns.sort(function(l,c){var p=s.indexOf(l),m=s.indexOf(c),w=p>=0,x=m>=0;return w&&x?p-m:w?1:x?-1:e.gridColumns.indexOf(l)-e.gridColumns.indexOf(c)})},i.prototype.getAllDisplayedAutoHeightCols=function(){return this.displayedAutoHeightCols},i.prototype.setViewport=function(){this.gridOptionsWrapper.isEnableRtl()?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},i.prototype.getDisplayedColumnsStartingAt=function(e){for(var s=e,l=[];null!=s;)l.push(s),s=this.getDisplayedColAfter(s);return l},i.prototype.checkViewportColumns=function(){if(null!=this.displayedColumnsCenter){var e=this.viewportColumns.map(function(c){return c.getId()}).join("#");this.extractViewport(),e!==this.viewportColumns.map(function(c){return c.getId()}).join("#")&&this.eventService.dispatchEvent({type:$.EVENT_VIRTUAL_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi})}},i.prototype.setViewportPosition=function(e,s){(e!==this.scrollWidth||s!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=s,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns())},i.prototype.isPivotMode=function(){return this.pivotMode},i.prototype.isPivotSettingAllowed=function(e){return!e||!this.gridOptionsWrapper.isTreeData()||(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1)},i.prototype.setPivotMode=function(e,s){void 0===s&&(s="api"),e!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)&&(this.pivotMode=e,this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(s),this.eventService.dispatchEvent({type:$.EVENT_COLUMN_PIVOT_MODE_CHANGED,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.getSecondaryPivotColumn=function(e,s){if(!this.secondaryColumnsPresent||!this.secondaryColumns)return null;var l=this.getPrimaryColumn(s),c=null;return this.secondaryColumns.forEach(function(p){var m=p.getColDef().pivotKeys,w=p.getColDef().pivotValueColumn;Ir(m,e)&&w===l&&(c=p)}),c},i.prototype.setBeans=function(e){this.logger=e.create("columnModel")},i.prototype.setFirstRightAndLastLeftPinned=function(e){var s,l;this.gridOptionsWrapper.isEnableRtl()?(s=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,l=this.displayedColumnsRight?Vn(this.displayedColumnsRight):null):(s=this.displayedColumnsLeft?Vn(this.displayedColumnsLeft):null,l=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(function(c){c.setLastLeftPinned(c===s,e),c.setFirstRightPinned(c===l,e)})},i.prototype.autoSizeColumns=function(e,s,l){var c=this;void 0===l&&(l="api"),this.animationFrameService.flushAllFrames();var p=[],m=-1;for(null==s&&(s=this.gridOptionsWrapper.isSkipHeaderOnAutoSize());0!==m;)m=0,this.actionOnGridColumns(e,function(w){if(p.indexOf(w)>=0)return!1;var x=c.autoWidthCalculator.getPreferredWidthForColumn(w,s);if(x>0){var A=c.normaliseColumnWidth(w,x);w.setActualWidth(A,l),p.push(w),m++}return!0},l);this.fireColumnResizedEvent(p,!0,"autosizeColumns")},i.prototype.fireColumnResizedEvent=function(e,s,l,c){void 0===c&&(c=null),e&&e.length&&this.eventService.dispatchEvent({type:$.EVENT_COLUMN_RESIZED,columns:e,column:1===e.length?e[0]:null,flexColumns:c,finished:s,api:this.gridApi,columnApi:this.columnApi,source:l})},i.prototype.autoSizeColumn=function(e,s,l){void 0===l&&(l="api"),e&&this.autoSizeColumns([e],s,l)},i.prototype.autoSizeAllColumns=function(e,s){void 0===s&&(s="api");var l=this.getAllDisplayedColumns();this.autoSizeColumns(l,e,s)},i.prototype.getColumnsFromTree=function(e){var s=[];return function c(p){for(var m=0;m<p.length;m++){var w=p[m];w instanceof Tn?s.push(w):w instanceof gr&&c(w.getChildren())}}(e),s},i.prototype.getAllDisplayedTrees=function(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null},i.prototype.getPrimaryColumnTree=function(){return this.primaryColumnTree},i.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},i.prototype.getDisplayedTreeLeft=function(){return this.displayedTreeLeft},i.prototype.getDisplayedTreeRight=function(){return this.displayedTreeRight},i.prototype.getDisplayedTreeCentre=function(){return this.displayedTreeCentre},i.prototype.isColumnDisplayed=function(e){return this.getAllDisplayedColumns().indexOf(e)>=0},i.prototype.getAllDisplayedColumns=function(){return this.displayedColumns},i.prototype.getViewportColumns=function(){return this.viewportColumns},i.prototype.getDisplayedLeftColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft},i.prototype.getDisplayedRightColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight},i.prototype.getDisplayedColumnsForRow=function(e,s,l,c){for(var x,p=[],m=null,w=function(U){var Me,Y=s[U],Q=s.length-U,oe=Math.min(Y.getColSpan(e),Q),xe=[Y];if(oe>1){for(var He=oe-1,Ve=1;Ve<=He;Ve++)xe.push(s[U+Ve]);U+=He}l?(Me=!1,xe.forEach(function(Fe){l(Fe)&&(Me=!0)})):Me=!0,Me&&(0===p.length&&m&&c&&c(Y)&&p.push(m),p.push(Y)),m=Y,x=U},A=0;A<s.length;A++)w(A),A=x;return p},i.prototype.getViewportCenterColumnsForRow=function(e){var s=this;if(!this.colSpanActive)return this.viewportColumnsCenter;var c=this.suppressColumnVirtualisation?null:this.isColumnInViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,c,function(m){var w=m.getLeft();return Le(w)&&w>s.viewportLeft})},i.prototype.getAriaColumnIndex=function(e){return this.getAllGridColumns().indexOf(e)+1},i.prototype.isColumnInViewport=function(e){if(e.getColDef().autoHeight)return!0;var s=e.getLeft()||0,l=s+e.getActualWidth(),c=this.viewportLeft-200,p=this.viewportRight+200;return!(s<c&&l<c||s>p&&l>p)},i.prototype.getDisplayedColumnsLeftWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsLeft)},i.prototype.getDisplayedColumnsRightWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsRight)},i.prototype.updatePrimaryColumnList=function(e,s,l,c,p,m){var w=this;if(void 0===m&&(m="api"),e&&!Qr(e)){var x=!1;e.forEach(function(I){var U=w.getPrimaryColumn(I);if(U){if(l){if(s.indexOf(U)>=0)return;s.push(U)}else{if(s.indexOf(U)<0)return;ei(s,U)}c(U),x=!0}}),x&&(this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(m),this.eventService.dispatchEvent({type:p,columns:s,column:1===s.length?s[0]:null,api:this.gridApi,columnApi:this.columnApi,source:m}))}},i.prototype.setRowGroupColumns=function(e,s){void 0===s&&(s="api"),this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.setRowGroupActive.bind(this),s)},i.prototype.setRowGroupActive=function(e,s,l){e!==s.isRowGroupActive()&&(s.setRowGroupActive(e,l),!e&&!this.gridOptionsWrapper.isSuppressMakeColumnVisibleAfterUnGroup()&&s.setVisible(!0,l))},i.prototype.addRowGroupColumn=function(e,s){void 0===s&&(s="api"),e&&this.addRowGroupColumns([e],s)},i.prototype.addRowGroupColumns=function(e,s){void 0===s&&(s="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),$.EVENT_COLUMN_ROW_GROUP_CHANGED,s)},i.prototype.removeRowGroupColumns=function(e,s){void 0===s&&(s="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),$.EVENT_COLUMN_ROW_GROUP_CHANGED,s)},i.prototype.removeRowGroupColumn=function(e,s){void 0===s&&(s="api"),e&&this.removeRowGroupColumns([e],s)},i.prototype.addPivotColumns=function(e,s){void 0===s&&(s="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!0,function(l){return l.setPivotActive(!0,s)},$.EVENT_COLUMN_PIVOT_CHANGED,s)},i.prototype.setPivotColumns=function(e,s){void 0===s&&(s="api"),this.setPrimaryColumnList(e,this.pivotColumns,$.EVENT_COLUMN_PIVOT_CHANGED,function(l,c){c.setPivotActive(l,s)},s)},i.prototype.addPivotColumn=function(e,s){void 0===s&&(s="api"),this.addPivotColumns([e],s)},i.prototype.removePivotColumns=function(e,s){void 0===s&&(s="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!1,function(l){return l.setPivotActive(!1,s)},$.EVENT_COLUMN_PIVOT_CHANGED,s)},i.prototype.removePivotColumn=function(e,s){void 0===s&&(s="api"),this.removePivotColumns([e],s)},i.prototype.setPrimaryColumnList=function(e,s,l,c,p){var m=this;s.length=0,Le(e)&&e.forEach(function(w){var x=m.getPrimaryColumn(w);x&&s.push(x)}),(this.primaryColumns||[]).forEach(function(w){var x=s.indexOf(w)>=0;c(x,w)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(p),this.fireColumnEvent(l,s,p)},i.prototype.setValueColumns=function(e,s){void 0===s&&(s="api"),this.setPrimaryColumnList(e,this.valueColumns,$.EVENT_COLUMN_VALUE_CHANGED,this.setValueActive.bind(this),s)},i.prototype.setValueActive=function(e,s,l){if(e!==s.isValueActive()&&(s.setValueActive(e,l),e&&!s.getAggFunc())){var c=this.aggFuncService.getDefaultAggFunc(s);s.setAggFunc(c)}},i.prototype.addValueColumns=function(e,s){void 0===s&&(s="api"),this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),$.EVENT_COLUMN_VALUE_CHANGED,s)},i.prototype.addValueColumn=function(e,s){void 0===s&&(s="api"),e&&this.addValueColumns([e],s)},i.prototype.removeValueColumn=function(e,s){void 0===s&&(s="api"),this.removeValueColumns([e],s)},i.prototype.removeValueColumns=function(e,s){void 0===s&&(s="api"),this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),$.EVENT_COLUMN_VALUE_CHANGED,s)},i.prototype.normaliseColumnWidth=function(e,s){var l=e.getMinWidth();Le(l)&&s<l&&(s=l);var c=e.getMaxWidth();return Le(c)&&e.isGreaterThanMax(s)&&(s=c),s},i.prototype.getPrimaryOrGridColumn=function(e){return this.getPrimaryColumn(e)||this.getGridColumn(e)},i.prototype.setColumnWidths=function(e,s,l,c){var p=this;void 0===c&&(c="api");var m=[];e.forEach(function(w){var x=p.getPrimaryOrGridColumn(w.key);if(x&&(m.push({width:w.newWidth,ratios:[1],columns:[x]}),"shift"===p.gridOptionsWrapper.getColResizeDefault()&&(s=!s),s)){var I=p.getDisplayedColAfter(x);if(!I)return;var U=x.getActualWidth()-w.newWidth,Y=I.getActualWidth()+U;m.push({width:Y,ratios:[1],columns:[I]})}}),0!==m.length&&this.resizeColumnSets(m,l,c)},i.prototype.checkMinAndMaxWidthsForSet=function(e){var l=e.width,c=0,p=0,m=!0;return e.columns.forEach(function(A){var I=A.getMinWidth();c+=I||0;var U=A.getMaxWidth();Le(U)&&U>0?p+=U:m=!1}),l>=c&&(!m||l<=p)},i.prototype.resizeColumnSets=function(e,s,l){var c=this;if(!e||e.every(function(Y){return c.checkMinAndMaxWidthsForSet(Y)})){var w=[],x=[];e.forEach(function(Y){var Q=Y.width,oe=Y.columns,xe=Y.ratios,He={},Ve={};oe.forEach(function(kt){return x.push(kt)});for(var Me=!0,Ze=0,Fe=function(){if(++Ze>1e3)return console.error("AG Grid: infinite loop in resizeColumnSets"),"break";Me=!1;var vn=[],qn=0,Jn=Q;oe.forEach(function(ur,Zi){Ve[ur.getId()]?Jn-=He[ur.getId()]:(vn.push(ur),qn+=xe[Zi])});var rr=1/qn;vn.forEach(function(ur,Zi){var Hr;Zi===vn.length-1?Hr=Jn:(Hr=Math.round(xe[Zi]*Q*rr),Jn-=Hr);var ah=ur.getMinWidth(),Vd=ur.getMaxWidth();Le(ah)&&Hr<ah?(Hr=ah,Ve[ur.getId()]=!0,Me=!0):Le(Vd)&&Vd>0&&Hr>Vd&&(Hr=Vd,Ve[ur.getId()]=!0,Me=!0),He[ur.getId()]=Hr})};Me&&"break"!==Fe(););oe.forEach(function(kt){var vn=He[kt.getId()];kt.getActualWidth()!==vn&&(kt.setActualWidth(vn,l),w.push(kt))})});var A=w.length>0,I=this.refreshFlexedColumns({resizingCols:x,skipSetLeft:!0});A&&(this.setLeftValues(l),this.updateBodyWidths(),this.checkViewportColumns());var U=x.concat(I);(A||s)&&this.fireColumnResizedEvent(U,s,l,I)}else s&&this.fireColumnResizedEvent(e&&e.length>0?e[0].columns:null,s,l)},i.prototype.setColumnAggFunc=function(e,s,l){if(void 0===l&&(l="api"),e){var c=this.getPrimaryColumn(e);!c||(c.setAggFunc(s),this.fireColumnEvent($.EVENT_COLUMN_VALUE_CHANGED,[c],l))}},i.prototype.fireColumnEvent=function(e,s,l){this.eventService.dispatchEvent({type:e,columns:s,column:s&&1==s.length?s[0]:null,api:this.gridApi,columnApi:this.columnApi,source:l})},i.prototype.moveRowGroupColumn=function(e,s,l){void 0===l&&(l="api");var c=this.rowGroupColumns[e];this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(s,0,c),this.eventService.dispatchEvent({type:$.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:this.rowGroupColumns,column:1===this.rowGroupColumns.length?this.rowGroupColumns[0]:null,api:this.gridApi,columnApi:this.columnApi,source:l})},i.prototype.moveColumns=function(e,s,l){if(void 0===l&&(l="api"),this.columnAnimationService.start(),s>this.gridColumns.length-e.length)return console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+s),void console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");var c=this.getGridColumns(e);!this.doesMovePassRules(c,s)||(wr(this.gridColumns,c,s),this.updateDisplayedColumns(l),this.eventService.dispatchEvent({type:$.EVENT_COLUMN_MOVED,columns:c,column:1===c.length?c[0]:null,toIndex:s,api:this.gridApi,columnApi:this.columnApi,source:l}),this.columnAnimationService.finish())},i.prototype.doesMovePassRules=function(e,s){var l=this.gridColumns.slice();return wr(l,e,s),!(!this.doesMovePassMarryChildren(l)||!this.doesMovePassLockedPositions(l))},i.prototype.sortColumnsLikeGridColumns=function(e){var s=this;!e||e.length<=1||e.filter(function(c){return s.gridColumns.indexOf(c)<0}).length>0||e.sort(function(c,p){return s.gridColumns.indexOf(c)-s.gridColumns.indexOf(p)})},i.prototype.doesMovePassLockedPositions=function(e){var s=!1,l=!0;return e.forEach(function(c){c.getColDef().lockPosition?s&&(l=!1):s=!0}),l},i.prototype.doesMovePassMarryChildren=function(e){var s=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(l){if(l instanceof gr){var c=l,p=c.getColGroupDef();if(p&&p.marryChildren){var w=[];c.getLeafColumns().forEach(function(Y){var Q=e.indexOf(Y);w.push(Q)}),Math.max.apply(Math,w)-Math.min.apply(Math,w)>c.getLeafColumns().length-1&&(s=!1)}}}),s},i.prototype.moveColumn=function(e,s,l){void 0===l&&(l="api"),this.moveColumns([e],s,l)},i.prototype.moveColumnByIndex=function(e,s,l){void 0===l&&(l="api"),this.moveColumn(this.gridColumns[e],s,l)},i.prototype.getColumnDefs=function(){var e=this;if(this.primaryColumns){var s=this.primaryColumns.slice();return this.gridColsArePrimary?s.sort(function(l,c){return e.gridColumns.indexOf(l)-e.gridColumns.indexOf(c)}):this.lastPrimaryOrder&&s.sort(function(l,c){return e.lastPrimaryOrder.indexOf(l)-e.lastPrimaryOrder.indexOf(c)}),this.columnDefFactory.buildColumnDefs(s,this.rowGroupColumns,this.pivotColumns)}},i.prototype.getBodyContainerWidth=function(){return this.bodyWidth},i.prototype.getContainerWidth=function(e){switch(e){case ce.PINNED_LEFT:return this.leftWidth;case ce.PINNED_RIGHT:return this.rightWidth;default:return this.bodyWidth}},i.prototype.updateBodyWidths=function(){var e=this.getWidthOfColsInList(this.displayedColumnsCenter),s=this.getWidthOfColsInList(this.displayedColumnsLeft),l=this.getWidthOfColsInList(this.displayedColumnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==s||this.rightWidth!==l)&&(this.bodyWidth=e,this.leftWidth=s,this.rightWidth=l,this.eventService.dispatchEvent({type:$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},i.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},i.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},i.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},i.prototype.getDisplayedCenterColumns=function(){return this.displayedColumnsCenter},i.prototype.getDisplayedLeftColumns=function(){return this.displayedColumnsLeft},i.prototype.getDisplayedRightColumns=function(){return this.displayedColumnsRight},i.prototype.getDisplayedColumns=function(e){switch(e){case ce.PINNED_LEFT:return this.getDisplayedLeftColumns();case ce.PINNED_RIGHT:return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},i.prototype.getAllPrimaryColumns=function(){return this.primaryColumns?this.primaryColumns.slice():null},i.prototype.getSecondaryColumns=function(){return this.secondaryColumns?this.secondaryColumns.slice():null},i.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},i.prototype.getAllGridColumns=function(){return this.gridColumns},i.prototype.isEmpty=function(){return Qr(this.gridColumns)},i.prototype.isRowGroupEmpty=function(){return Qr(this.rowGroupColumns)},i.prototype.setColumnVisible=function(e,s,l){void 0===l&&(l="api"),this.setColumnsVisible([e],s,l)},i.prototype.setColumnsVisible=function(e,s,l){var c=this;void 0===s&&(s=!1),void 0===l&&(l="api"),this.columnAnimationService.start(),this.actionOnGridColumns(e,function(p){return p.isVisible()!==s&&(p.setVisible(s,l),!0)},l,function(){return{type:$.EVENT_COLUMN_VISIBLE,visible:s,column:null,columns:null,api:c.gridApi,columnApi:c.columnApi,source:l}}),this.columnAnimationService.finish()},i.prototype.setColumnPinned=function(e,s,l){void 0===l&&(l="api"),e&&this.setColumnsPinned([e],s,l)},i.prototype.setColumnsPinned=function(e,s,l){var p,c=this;void 0===l&&(l="api"),"print"!==this.gridOptionsWrapper.getDomLayout()?(this.columnAnimationService.start(),p=!0===s||s===ce.PINNED_LEFT?ce.PINNED_LEFT:s===ce.PINNED_RIGHT?ce.PINNED_RIGHT:null,this.actionOnGridColumns(e,function(m){return m.getPinned()!==p&&(m.setPinned(p),!0)},l,function(){return{type:$.EVENT_COLUMN_PINNED,pinned:p,column:null,columns:null,api:c.gridApi,columnApi:c.columnApi,source:l}}),this.columnAnimationService.finish()):console.warn("Changing the column pinning status is not allowed with domLayout='print'")},i.prototype.actionOnGridColumns=function(e,s,l,c){var p=this;if(!Qr(e)){var m=[];if(e.forEach(function(x){var A=p.getGridColumn(x);A&&!1!==s(A)&&m.push(A)}),m.length&&(this.updateDisplayedColumns(l),Le(c)&&c)){var w=c();w.columns=m,w.column=1===m.length?m[0]:null,this.eventService.dispatchEvent(w)}}},i.prototype.getDisplayedColBefore=function(e){var s=this.getAllDisplayedColumns(),l=s.indexOf(e);return l>0?s[l-1]:null},i.prototype.getDisplayedColAfter=function(e){var s=this.getAllDisplayedColumns(),l=s.indexOf(e);return l<s.length-1?s[l+1]:null},i.prototype.getDisplayedGroupAfter=function(e){return this.getDisplayedGroupAtDirection(e,"After")},i.prototype.getDisplayedGroupBefore=function(e){return this.getDisplayedGroupAtDirection(e,"Before")},i.prototype.getDisplayedGroupAtDirection=function(e,s){for(var l=e.getOriginalColumnGroup().getLevel()+e.getPaddingLevel(),c=e.getDisplayedLeafColumns(),p="After"===s?Vn(c):c[0],m="getDisplayedCol"+s;;){var w=this[m](p);if(!w)return null;var x=this.getColumnGroupAtLevel(w,l);if(x!==e)return x}},i.prototype.getColumnGroupAtLevel=function(e,s){for(var l=e.getParent();!(l.getOriginalColumnGroup().getLevel()+l.getPaddingLevel()<=s);)l=l.getParent();return l},i.prototype.isPinningLeft=function(){return this.displayedColumnsLeft.length>0},i.prototype.isPinningRight=function(){return this.displayedColumnsRight.length>0},i.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var e=this.primaryColumns?this.primaryColumns.slice(0):[];return this.groupAutoColumns&&Le(this.groupAutoColumns)&&this.groupAutoColumns.forEach(function(s){return e.push(s)}),this.secondaryColumnsPresent&&this.secondaryColumns&&this.secondaryColumns.forEach(function(s){return e.push(s)}),e},i.prototype.createStateItemFromColumn=function(e){var s=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,l=e.isPivotActive()?this.pivotColumns.indexOf(e):null,c=e.isValueActive()?e.getAggFunc():null,p=null!=e.getSort()?e.getSort():null,m=null!=e.getSortIndex()?e.getSortIndex():null,w=null!=e.getFlex()&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:p,sortIndex:m,aggFunc:c,rowGroup:e.isRowGroupActive(),rowGroupIndex:s,pivot:e.isPivotActive(),pivotIndex:l,flex:w}},i.prototype.getColumnState=function(){if(ye(this.primaryColumns)||!this.isAlive())return[];var s=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.pivotMode||this.orderColumnStateList(s),s},i.prototype.getPrimaryAndAutoGroupCols=function(){return this.groupAutoColumns?function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],p=0,m=c.length;p<m;p++,l++)s[l]=c[p];return s}(this.primaryColumns||[],this.groupAutoColumns):this.primaryColumns},i.prototype.orderColumnStateList=function(e){var s=Ra(this.gridColumns.map(function(l,c){return[l.getColId(),c]}));e.sort(function(l,c){return(s.has(l.colId)?s.get(l.colId):-1)-(s.has(c.colId)?s.get(c.colId):-1)})},i.prototype.resetColumnState=function(e){void 0===e&&(e="api");var s=this.getColumnsFromTree(this.primaryColumnTree),l=[],c=1e3,p=1e3,m=[];this.groupAutoColumns&&(m=m.concat(this.groupAutoColumns)),s&&(m=m.concat(s)),m.forEach(function(w){var x=function(vn,qn){return null!=vn?vn:null!=qn?qn:null},A=w.getColDef(),I=x(A.sort,A.initialSort),U=x(A.sortIndex,A.initialSortIndex),Y=x(A.hide,A.initialHide),Q=x(A.pinned,A.initialPinned),oe=x(A.width,A.initialWidth),xe=x(A.flex,A.initialFlex),He=x(A.rowGroupIndex,A.initialRowGroupIndex),Ve=x(A.rowGroup,A.initialRowGroup);null==He&&(null==Ve||0==Ve)&&(He=null,Ve=null);var Me=x(A.pivotIndex,A.initialPivotIndex),Ze=x(A.pivot,A.initialPivot);null==Me&&(null==Ze||0==Ze)&&(Me=null,Ze=null);var Fe=x(A.aggFunc,A.initialAggFunc),rn={colId:w.getColId(),sort:I,sortIndex:U,hide:Y,pinned:Q,width:oe,flex:xe,rowGroup:Ve,rowGroupIndex:He,pivot:Ze,pivotIndex:Me,aggFunc:Fe};ye(He)&&Ve&&(rn.rowGroupIndex=c++),ye(Me)&&Ze&&(rn.pivotIndex=p++),l.push(rn)}),this.applyColumnState({state:l,applyOrder:!0},e)},i.prototype.applyColumnState=function(e,s){var l=this;if(void 0===s&&(s="api"),Qr(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;this.columnAnimationService.start();var c=this.compareColumnStatesAndRaiseEvents(s);this.autoGroupsNeedBuilding=!0;var p=this.primaryColumns.slice(),m=!0,w={},x={},A=[],I=this.rowGroupColumns.slice(),U=this.pivotColumns.slice();e.state&&e.state.forEach(function(xe){var Ve=xe.colId||"";if(Mv(Ve,ce.GROUP_AUTO_COLUMN_ID))A.push(xe);else{var Ze=l.getPrimaryColumn(Ve);Ze?(l.syncColumnWithStateItem(Ze,xe,e.defaultState,w,x,!1,s),ei(p,Ze)):m=!1}});var Y=function(He){return l.syncColumnWithStateItem(He,null,e.defaultState,w,x,!1,s)};p.forEach(Y);var Q=function(He,Ve,Me,Ze){var Fe=He[Me.getId()],rn=He[Ze.getId()],kt=null!=Fe,vn=null!=rn;if(kt&&vn)return Fe-rn;if(kt)return-1;if(vn)return 1;var qn=Ve.indexOf(Me),Jn=Ve.indexOf(Ze),rr=qn>=0;return rr&&Jn>=0?qn-Jn:rr?-1:1};this.rowGroupColumns.sort(Q.bind(this,w,I)),this.pivotColumns.sort(Q.bind(this,x,U)),this.updateGridColumns();var oe=this.groupAutoColumns?this.groupAutoColumns.slice():[];return A.forEach(function(xe){var He=l.getAutoColumn(xe.colId);ei(oe,He),l.syncColumnWithStateItem(He,xe,e.defaultState,null,null,!0,s)}),oe.forEach(Y),this.applyOrderAfterApplyState(e),this.updateDisplayedColumns(s),this.dispatchEverythingChanged(s),c(),this.columnAnimationService.finish(),m},i.prototype.applyOrderAfterApplyState=function(e){if(this.gridColsArePrimary&&e.applyOrder&&e.state){var s=[],l={},c={};if(this.gridColumns.forEach(function(p){return c[p.getId()]=p}),e.state.forEach(function(p){if(p.colId&&!l[p.colId]){var m=c[p.colId];m&&(s.push(m),l[p.colId]=!0)}}),this.gridColumns.forEach(function(p){l[p.getColId()]||s.push(p)}),s=this.putFixedColumnsFirst(s),!this.doesMovePassMarryChildren(s))return void console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");this.gridColumns=s}},i.prototype.compareColumnStatesAndRaiseEvents=function(e){var s=this;if(!this.columnDefs)return function(){};var c={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},p=this.getColumnState(),m={};return p.forEach(function(w){m[w.colId]=w}),function(){if(!s.gridOptionsWrapper.isSuppressColumnStateEvents()){var w=s.getPrimaryAndAutoGroupCols(),x=function(Me,Ze,Fe,rn){Ir(Ze.map(rn),Fe.map(rn))||s.eventService.dispatchEvent({type:Me,columns:Fe,column:1===Fe.length?Fe[0]:null,api:s.gridApi,columnApi:s.columnApi,source:e})},A=function(Me){var Ze=[];return(w||[]).forEach(function(Fe){var rn=m[Fe.getColId()];rn&&Me(rn,Fe)&&Ze.push(Fe)}),Ze},I=function(Me){return Me.getColId()};x($.EVENT_COLUMN_ROW_GROUP_CHANGED,c.rowGroupColumns,s.rowGroupColumns,I),x($.EVENT_COLUMN_PIVOT_CHANGED,c.pivotColumns,s.pivotColumns,I),A(function(Me,Ze){var Fe=null!=Me.aggFunc,rn=Fe!=Ze.isValueActive(),kt=Fe&&Me.aggFunc!=Ze.getAggFunc();return rn||kt}).length>0&&s.fireColumnEvent($.EVENT_COLUMN_VALUE_CHANGED,s.valueColumns,e),s.fireColumnResizedEvent(A(function(Me,Ze){return Me.width!=Ze.getActualWidth()}),!0,e),s.raiseColumnPinnedEvent(A(function(Me,Ze){return Me.pinned!=Ze.getPinned()}),e),s.raiseColumnVisibleEvent(A(function(Me,Ze){return Me.hide==Ze.isVisible()}),e),A(function(Me,Ze){return Me.sort!=Ze.getSort()||Me.sortIndex!=Ze.getSortIndex()}).length>0&&s.sortController.dispatchSortChangedEvents(),s.raiseColumnMovedEvent(p,e)}}},i.prototype.raiseColumnPinnedEvent=function(e,s){if(e.length){var l=1===e.length?e[0]:null,c=this.getCommonValue(e,function(m){return m.getPinned()});this.eventService.dispatchEvent({type:$.EVENT_COLUMN_PINNED,pinned:null!=c?c:null,columns:e,column:l,api:this.gridApi,columnApi:this.columnApi,source:s})}},i.prototype.getCommonValue=function(e,s){if(e&&0!=e.length){for(var l=s(e[0]),c=1;c<e.length;c++)if(l!==s(e[c]))return;return l}},i.prototype.raiseColumnVisibleEvent=function(e,s){if(e.length){var l=1===e.length?e[0]:null,c=this.getCommonValue(e,function(m){return m.isVisible()});this.eventService.dispatchEvent({type:$.EVENT_COLUMN_VISIBLE,visible:c,columns:e,column:l,api:this.gridApi,columnApi:this.columnApi,source:s})}},i.prototype.raiseColumnMovedEvent=function(e,s){var l=this,c=this.getColumnState(),p={};c.forEach(function(U){return p[U.colId]=U});var m={};e.forEach(function(U){p[U.colId]&&(m[U.colId]=!0)});var w=Lr(e,function(U){return m[U.colId]}),x=Lr(c,function(U){return m[U.colId]}),A=[];x.forEach(function(U,Y){var Q=w&&w[Y];if(Q&&Q.colId!==U.colId){var oe=l.getGridColumn(Q.colId);oe&&A.push(oe)}}),A.length&&this.eventService.dispatchEvent({type:$.EVENT_COLUMN_MOVED,columns:A,column:null,api:this.gridApi,columnApi:this.columnApi,source:s})},i.prototype.syncColumnWithStateItem=function(e,s,l,c,p,m,w){if(e){var x=function(Jn,rr){var ur=s,Zi=l,ea={value1:void 0,value2:void 0},Hr=!1;return ur&&(void 0!==ur[Jn]&&(ea.value1=ur[Jn],Hr=!0),Le(rr)&&void 0!==ur[rr]&&(ea.value2=ur[rr],Hr=!0)),!Hr&&Zi&&(void 0!==Zi[Jn]&&(ea.value1=Zi[Jn]),Le(rr)&&void 0!==Zi[rr]&&(ea.value2=Zi[rr])),ea},A=x("hide").value1;void 0!==A&&e.setVisible(!A,w);var I=x("pinned").value1;void 0!==I&&e.setPinned(I);var U=this.columnUtils.calculateColMinWidth(e.getColDef()),Y=x("flex").value1;if(void 0!==Y&&e.setFlex(Y),e.getFlex()<=0){var oe=x("width").value1;null!=oe&&null!=U&&oe>=U&&e.setActualWidth(oe,w)}var xe=x("sort").value1;void 0!==xe&&e.setSort(xe===ce.SORT_DESC||xe===ce.SORT_ASC?xe:void 0);var He=x("sortIndex").value1;if(void 0!==He&&e.setSortIndex(He),!m){var Ve=x("aggFunc").value1;void 0!==Ve&&("string"==typeof Ve?(e.setAggFunc(Ve),e.isValueActive()||(e.setValueActive(!0,w),this.valueColumns.push(e))):(Le(Ve)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,w),ei(this.valueColumns,e))));var Me=x("rowGroup","rowGroupIndex"),Ze=Me.value1,Fe=Me.value2;(void 0!==Ze||void 0!==Fe)&&("number"==typeof Fe||Ze?(e.isRowGroupActive()||(e.setRowGroupActive(!0,w),this.rowGroupColumns.push(e)),c&&"number"==typeof Fe&&(c[e.getId()]=Fe)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,w),ei(this.rowGroupColumns,e)));var rn=x("pivot","pivotIndex"),kt=rn.value1,vn=rn.value2;(void 0!==kt||void 0!==vn)&&("number"==typeof vn||kt?(e.isPivotActive()||(e.setPivotActive(!0,w),this.pivotColumns.push(e)),p&&"number"==typeof vn&&(p[e.getId()]=vn)):e.isPivotActive()&&(e.setPivotActive(!1,w),ei(this.pivotColumns,e)))}}},i.prototype.getGridColumns=function(e){return this.getColumns(e,this.getGridColumn.bind(this))},i.prototype.getColumns=function(e,s){var l=[];return e&&e.forEach(function(c){var p=s(c);p&&l.push(p)}),l},i.prototype.getColumnWithValidation=function(e){if(null==e)return null;var s=this.getGridColumn(e);return s||console.warn("AG Grid: could not find column "+e),s},i.prototype.getPrimaryColumn=function(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null},i.prototype.getGridColumn=function(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)},i.prototype.getColumn=function(e,s,l){if(!e)return null;if("string"==typeof e&&l[e])return l[e];for(var c=0;c<s.length;c++)if(this.columnsMatch(s[c],e))return s[c];return this.getAutoColumn(e)},i.prototype.getAutoColumn=function(e){var s=this;return this.groupAutoColumns&&Le(this.groupAutoColumns)&&!ye(this.groupAutoColumns)?Pi(this.groupAutoColumns,function(l){return s.columnsMatch(l,e)}):null},i.prototype.columnsMatch=function(e,s){var l=e===s,c=e.getColDef()===s,p=e.getColId()==s;return l||c||p},i.prototype.getDisplayNameForColumn=function(e,s,l){if(void 0===l&&(l=!1),!e)return null;var c=this.getHeaderName(e.getColDef(),e,null,null,s);return l?this.wrapHeaderNameWithAggFunc(e,c):c},i.prototype.getDisplayNameForOriginalColumnGroup=function(e,s,l){var c=s?s.getColGroupDef():null;return c?this.getHeaderName(c,null,e,s,l):null},i.prototype.getDisplayNameForColumnGroup=function(e,s){return this.getDisplayNameForOriginalColumnGroup(e,e.getOriginalColumnGroup(),s)},i.prototype.getHeaderName=function(e,s,l,c,p){var m=e.headerValueGetter;if(m){var w={colDef:e,column:s,columnGroup:l,originalColumnGroup:c,location:p,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext()};return"function"==typeof m?m(w):"string"==typeof m?this.expressionService.evaluate(m,w):(console.warn("ag-grid: headerValueGetter must be a function or a string"),"")}return null!=e.headerName?e.headerName:e.field?Yr(e.field):""},i.prototype.wrapHeaderNameWithAggFunc=function(e,s){if(this.gridOptionsWrapper.isSuppressAggFuncInHeader())return s;var m,l=e.getColDef().pivotValueColumn,p=null;if(Le(l))p=l?l.getAggFunc():null,m=!0;else{var w=e.isValueActive(),x=this.pivotMode||!this.isRowGroupEmpty();w&&x?(p=e.getAggFunc(),m=!0):m=!1}if(m){var A="string"==typeof p?p:"func";return this.gridOptionsWrapper.getLocaleTextFunc()(A,A)+"("+s+")"}return s},i.prototype.getColumnGroup=function(e,s){if(!e)return null;if(e instanceof ri)return e;var l=this.getAllDisplayedTrees(),c="number"==typeof s,p=null;return this.columnUtils.depthFirstAllColumnTreeSearch(l,function(m){if(m instanceof ri){var w=m;(c?e===w.getGroupId()&&s===w.getInstanceId():e===w.getGroupId())&&(p=w)}}),p},i.prototype.isReady=function(){return this.ready},i.prototype.extractValueColumns=function(e,s){this.valueColumns=this.extractColumns(s,this.valueColumns,function(l,c){return l.setValueActive(c,e)},function(){},function(){},function(l){var c=l.aggFunc;return null===c||""===c?null:void 0!==c?!!c:void 0},function(l){return null!=l.initialAggFunc&&""!=l.initialAggFunc}),this.valueColumns.forEach(function(l){var c=l.getColDef();null!=c.aggFunc&&""!=c.aggFunc?l.setAggFunc(c.aggFunc):l.getAggFunc()||l.setAggFunc(c.initialAggFunc)})},i.prototype.extractRowGroupColumns=function(e,s){this.rowGroupColumns=this.extractColumns(s,this.rowGroupColumns,function(l,c){return l.setRowGroupActive(c,e)},function(l){return l.rowGroupIndex},function(l){return l.initialRowGroupIndex},function(l){return l.rowGroup},function(l){return l.initialRowGroup})},i.prototype.extractColumns=function(e,s,l,c,p,m,w){void 0===e&&(e=[]),void 0===s&&(s=[]);var x=[],A=[];(this.primaryColumns||[]).forEach(function(Y){var Q=e.indexOf(Y)<0,oe=Y.getColDef(),xe=ro(m(oe)),He=ro(w(oe)),Ve=G(c(oe)),Me=G(p(oe));(void 0!==xe?xe:void 0!==Ve?null!==Ve&&Ve>=0:Q?void 0!==He?He:void 0!==Me&&null!=Me&&Me>=0:s.indexOf(Y)>=0)&&((Q?null!=Ve||null!=Me:null!=Ve)?x.push(Y):A.push(Y))});var I=function(Q){var oe=c(Q.getColDef()),xe=p(Q.getColDef());return null!=oe?oe:xe};x.sort(function(Y,Q){var oe=I(Y),xe=I(Q);return oe===xe?0:oe<xe?-1:1});var U=[].concat(x);return s.forEach(function(Y){A.indexOf(Y)>=0&&U.push(Y)}),A.forEach(function(Y){U.indexOf(Y)<0&&U.push(Y)}),s.forEach(function(Y){U.indexOf(Y)<0&&l(Y,!1)}),U.forEach(function(Y){s.indexOf(Y)<0&&l(Y,!0)}),U},i.prototype.extractPivotColumns=function(e,s){this.pivotColumns=this.extractColumns(s,this.pivotColumns,function(l,c){return l.setPivotActive(c,e)},function(l){return l.pivotIndex},function(l){return l.initialPivotIndex},function(l){return l.pivot},function(l){return l.initialPivot})},i.prototype.resetColumnGroupState=function(e){void 0===e&&(e="api");var s=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,function(l){if(l instanceof gr){var c=l.getColGroupDef(),p={groupId:l.getGroupId(),open:c?c.openByDefault:void 0};s.push(p)}}),this.setColumnGroupState(s,e)},i.prototype.getColumnGroupState=function(){var e=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(s){if(s instanceof gr){var l=s;e.push({groupId:l.getGroupId(),open:l.isExpanded()})}}),e},i.prototype.setColumnGroupState=function(e,s){var l=this;void 0===s&&(s="api"),this.columnAnimationService.start();var c=[];e.forEach(function(p){var w=p.open,x=l.getOriginalColumnGroup(p.groupId);!x||x.isExpanded()!==w&&(l.logger.log("columnGroupOpened("+x.getGroupId()+","+w+")"),x.setExpanded(w),c.push(x))}),this.updateGroupsAndDisplayedColumns(s),this.setFirstRightAndLastLeftPinned(s),c.forEach(function(p){l.eventService.dispatchEvent({type:$.EVENT_COLUMN_GROUP_OPENED,columnGroup:p,api:l.gridApi,columnApi:l.columnApi})}),this.columnAnimationService.finish()},i.prototype.setColumnGroupOpened=function(e,s,l){var c;void 0===l&&(l="api"),c=e instanceof gr?e.getId():e||"",this.setColumnGroupState([{groupId:c,open:s}],l)},i.prototype.getOriginalColumnGroup=function(e){if(e instanceof gr)return e;"string"!=typeof e&&console.error("AG Grid: group key must be a string");var s=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(l){if(l instanceof gr){var c=l;c.getId()===e&&(s=c)}}),s},i.prototype.calculateColumnsForDisplay=function(){var e=this;return this.gridColumns.filter(this.pivotMode&&!this.secondaryColumnsPresent?function(l){var c=e.groupAutoColumns&&bn(e.groupAutoColumns,l),p=e.valueColumns&&bn(e.valueColumns,l);return c||p}:function(l){return e.groupAutoColumns&&bn(e.groupAutoColumns,l)||l.isVisible()})},i.prototype.checkColSpanActiveInCols=function(e){var s=!1;return e.forEach(function(l){Le(l.getColDef().colSpan)&&(s=!0)}),s},i.prototype.calculateColumnsForGroupDisplay=function(){var e=this;this.groupDisplayColumns=[];var s=function(c){var p=c.getColDef();p&&Le(p.showRowGroup)&&e.groupDisplayColumns.push(c)};this.gridColumns.forEach(s),this.groupAutoColumns&&this.groupAutoColumns.forEach(s)},i.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},i.prototype.updateDisplayedColumns=function(e){var s=this.calculateColumnsForDisplay();this.buildDisplayedTrees(s),this.calculateColumnsForGroupDisplay(),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)},i.prototype.isSecondaryColumnsPresent=function(){return this.secondaryColumnsPresent},i.prototype.setSecondaryColumns=function(e,s){void 0===s&&(s="api");var l=e&&e.length>0;if(l||this.secondaryColumnsPresent){if(l){this.processSecondaryColumnDefinitions(e);var c=this.columnFactory.createColumnTree(e,!1);this.secondaryBalancedTree=c.columnTree,this.secondaryHeaderRowCount=c.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsPresent=!0}else this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsPresent=!1;this.updateGridColumns(),this.updateDisplayedColumns(s)}},i.prototype.processSecondaryColumnDefinitions=function(e){var s=this.gridOptionsWrapper.getProcessSecondaryColDefFunc(),l=this.gridOptionsWrapper.getProcessSecondaryColGroupDefFunc();(s||l)&&e&&function p(m){m.forEach(function(w){if(Le(w.children)){var A=w;l&&l(A),p(A.children)}else s&&s(w)})}(e)},i.prototype.updateGridColumns=function(){var e=this;this.gridColsArePrimary&&(this.lastPrimaryOrder=this.gridColumns),this.secondaryColumns&&this.secondaryBalancedTree?(this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1):this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,this.orderGridColsLikeLastPrimary()),this.addAutoGroupToGridColumns(),this.gridColumns=this.putFixedColumnsFirst(this.gridColumns),this.setupQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(function(l){return e.gridColumnsMap[l.getId()]=l}),this.setAutoHeightActive(),this.eventService.dispatchEvent({type:$.EVENT_GRID_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.setAutoHeightActive=function(){if(this.autoHeightActive=this.gridColumns.filter(function(c){return c.getColDef().autoHeight}).length>0,this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;var e=this.rowModel.getType();e!==ce.ROW_MODEL_TYPE_CLIENT_SIDE&&e!==ce.ROW_MODEL_TYPE_SERVER_SIDE&&pn(function(){return console.warn("AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.")},"autoHeightActive.wrongRowModel")}},i.prototype.orderGridColsLikeLastPrimary=function(){if(!ye(this.lastPrimaryOrder)){var e=Ra(this.lastPrimaryOrder.map(function(x,A){return[x,A]})),s=!0;if(this.gridColumns.forEach(function(x){e.has(x)&&(s=!1)}),!s){var l=Ra(this.gridColumns.map(function(x){return[x,!0]})),c=this.lastPrimaryOrder.filter(function(x){return l.has(x)}),p=Ra(c.map(function(x){return[x,!0]})),m=this.gridColumns.filter(function(x){return!p.has(x)}),w=c.slice();m.forEach(function(x){var A=x.getOriginalParent();if(A){for(var I=[];!I.length&&A;)A.getLeafColumns().forEach(function(oe){var xe=w.indexOf(oe)>=0,He=I.indexOf(oe)<0;xe&&He&&I.push(oe)}),A=A.getOriginalParent();if(I.length){var Y=I.map(function(oe){return w.indexOf(oe)}),Q=Math.max.apply(Math,Y);pi(w,x,Q+1)}else w.push(x)}else w.push(x)}),this.gridColumns=w}}},i.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},i.prototype.setupQuickFilterColumns=function(){this.groupAutoColumns?this.columnsForQuickFilter=(this.primaryColumns||[]).concat(this.groupAutoColumns):this.primaryColumns&&(this.columnsForQuickFilter=this.primaryColumns)},i.prototype.putFixedColumnsFirst=function(e){var s=e.filter(function(c){return c.getColDef().lockPosition}),l=e.filter(function(c){return!c.getColDef().lockPosition});return s.concat(l)},i.prototype.addAutoGroupToGridColumns=function(){if(this.createGroupAutoColumnsIfNeeded(),!ye(this.groupAutoColumns)){this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;var e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.gridBalancedTree=e.concat(this.gridBalancedTree)}},i.prototype.clearDisplayedAndViewportColumns=function(){this.displayedTreeLeft=[],this.displayedTreeRight=[],this.displayedTreeCentre=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[]},i.prototype.updateGroupsAndDisplayedColumns=function(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths(),this.eventService.dispatchEvent({type:$.EVENT_DISPLAYED_COLUMNS_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.deriveDisplayedColumns=function(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(function(s){return s.getColDef().autoHeight})},i.prototype.isAutoRowHeightActive=function(){return this.autoHeightActive},i.prototype.wasAutoRowHeightEverActive=function(){return this.autoHeightActiveAtLeastOnce},i.prototype.joinDisplayedColumns=function(){this.displayedColumns=this.gridOptionsWrapper.isEnableRtl()?this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)},i.prototype.setLeftValues=function(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()},i.prototype.setLeftValuesOfColumns=function(e){var s=this;if(this.primaryColumns){var l=this.primaryColumns.slice(0),c=this.gridOptionsWrapper.isEnableRtl();[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(function(p){if(c){var m=s.getWidthOfColsInList(p);p.forEach(function(x){m-=x.getActualWidth(),x.setLeft(m,e)})}else{var w=0;p.forEach(function(x){x.setLeft(w,e),w+=x.getActualWidth()})}kn(l,p)}),l.forEach(function(p){p.setLeft(null,e)})}},i.prototype.setLeftValuesOfGroups=function(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(function(e){e.forEach(function(s){s instanceof ri&&s.checkLeft()})})},i.prototype.derivedDisplayedColumnsFromDisplayedTree=function(e,s){s.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,function(l){l instanceof Tn&&s.push(l)})},i.prototype.extractViewportColumns=function(){this.viewportColumnsCenter=this.suppressColumnVirtualisation?this.displayedColumnsCenter:this.filterOutColumnsWithinViewport(),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)},i.prototype.getVirtualHeaderGroupRow=function(e,s){var l;switch(e){case ce.PINNED_LEFT:l=this.viewportRowLeft[s];break;case ce.PINNED_RIGHT:l=this.viewportRowRight[s];break;default:l=this.viewportRowCenter[s]}return ye(l)&&(l=[]),l},i.prototype.extractViewportRows=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};var e={};this.viewportColumns.forEach(function(l){return e[l.getId()]=!0});var s=function l(c,p,m){for(var w=!1,x=0;x<c.length;x++){var A=c[x],I=!1;if(A instanceof Tn)I=!0===e[A.getId()];else{var Y=A.getDisplayedChildren();Y&&(I=l(Y,p,m+1))}I&&(w=!0,p[m]||(p[m]=[]),p[m].push(A))}return w};s(this.displayedTreeLeft,this.viewportRowLeft,0),s(this.displayedTreeRight,this.viewportRowRight,0),s(this.displayedTreeCentre,this.viewportRowCenter,0)},i.prototype.extractViewport=function(){this.extractViewportColumns(),this.extractViewportRows()},i.prototype.filterOutColumnsWithinViewport=function(){return this.displayedColumnsCenter.filter(this.isColumnInViewport.bind(this))},i.prototype.refreshFlexedColumns=function(e){var s=this;void 0===e&&(e={});var l=e.source?e.source:"flex";if(null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];var c=-1;e.resizingCols&&e.resizingCols.forEach(function(Ze){var Fe=s.displayedColumnsCenter.indexOf(Ze);c<Fe&&(c=Fe)});var p=function(Fe){var rn=s.displayedColumnsCenter.indexOf(Fe)>c;return Fe.getFlex()&&rn},m=this.displayedColumnsCenter.filter(function(Ze){return!p(Ze)}),w=this.displayedColumnsCenter.filter(function(Ze){return p(Ze)}),x=[];if(!w.length)return[];var I,A=[];e:for(;;){var U=w.reduce(function(Ze,Fe){return Ze+Fe.getFlex()},0);I=this.flexViewportWidth-this.getWidthOfColsInList(m);for(var Y=0;Y<w.length;Y++){var Q=w[Y],oe=I*Q.getFlex()/U,xe=0,He=Q.getMinWidth(),Ve=Q.getMaxWidth();if(Le(He)&&oe<He?xe=He:Le(Ve)&&oe>Ve&&(xe=Ve),xe){Q.setActualWidth(xe,l),ei(w,Q),x.push(Q),m.push(Q);continue e}A[Y]=Math.round(oe)}break}var Me=I;return w.forEach(function(Ze,Fe){Ze.setActualWidth(Math.min(A[Fe],Me),l),x.push(Ze),Me-=A[Fe]}),e.skipSetLeft||this.setLeftValues(l),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.fireColumnResizedEvent(x,!0,l,w),this.flexColsCalculatedAtLestOnce||(this.gridOptionsWrapper.isRowModelDefault()&&this.rowModel.resetRowHeights(),this.flexColsCalculatedAtLestOnce=!0),w},i.prototype.sizeColumnsToFit=function(e,s,l){void 0===s&&(s="sizeColumnsToFit");var c=this.getAllDisplayedColumns();if(!(e<=0)&&c.length){var p=[],m=[];c.forEach(function(Me){!0===Me.getColDef().suppressSizeToFit?m.push(Me):p.push(Me)});var w=p.slice(0),x=!1,A=function(Ze){ei(p,Ze),m.push(Ze)};for(p.forEach(function(Me){return Me.resetActualWidth(s)});!x;){x=!0;var I=e-this.getWidthOfColsInList(m);if(I<=0)p.forEach(function(Me){Me.setMinimum(s)});else for(var U=I/this.getWidthOfColsInList(p),Y=I,Q=p.length-1;Q>=0;Q--){var oe=p[Q],xe=oe.getMinWidth(),He=oe.getMaxWidth(),Ve=Math.round(oe.getActualWidth()*U);Le(xe)&&Ve<xe?(Ve=xe,A(oe),x=!1):Le(He)&&oe.isGreaterThanMax(Ve)?(Ve=He,A(oe),x=!1):0===Q&&(Ve=Y),oe.setActualWidth(Ve,s,!0),Y-=Ve}}w.forEach(function(Me){Me.fireColumnWidthChangedEvent(s)}),this.setLeftValues(s),this.updateBodyWidths(),!l&&this.fireColumnResizedEvent(w,!0,s)}},i.prototype.buildDisplayedTrees=function(e){var s=[],l=[],c=[];e.forEach(function(m){switch(m.getPinned()){case"left":s.push(m);break;case"right":l.push(m);break;default:c.push(m)}});var p=new Av;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(s,this.gridBalancedTree,p,ce.PINNED_LEFT,this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(l,this.gridBalancedTree,p,ce.PINNED_RIGHT,this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(c,this.gridBalancedTree,p,null,this.displayedTreeCentre),this.updateDisplayedMap()},i.prototype.updateDisplayedMap=function(){var e=this;this.displayedColumnsAndGroupsMap={};var s=function(c){e.displayedColumnsAndGroupsMap[c.getUniqueId()]=c};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,s),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,s),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,s)},i.prototype.isDisplayed=function(e){return this.displayedColumnsAndGroupsMap[e.getUniqueId()]===e},i.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var e=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(e,function(s){s instanceof ri&&s.calculateDisplayedColumns()})},i.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},i.prototype.createGroupAutoColumnsIfNeeded=function(){if(this.autoGroupsNeedBuilding){this.autoGroupsNeedBuilding=!1;var e=this.gridOptionsWrapper.isGroupUseEntireRow(this.pivotMode),s=this.pivotMode?this.gridOptionsWrapper.isPivotSuppressAutoColumn():this.gridOptionsWrapper.isGroupSuppressAutoColumn();if(!(this.rowGroupColumns.length>0||this.usingTreeData)||s||e)this.groupAutoColumns=null;else{var p=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);(!this.autoColsEqual(p,this.groupAutoColumns)||this.forceRecreateAutoGroups)&&(this.groupAutoColumns=p)}}},i.prototype.autoColsEqual=function(e,s){return Ir(e,s,function(l,c){return l.getColId()===c.getColId()})},i.prototype.getWidthOfColsInList=function(e){return e.reduce(function(s,l){return s+l.getActualWidth()},0)},i.prototype.getGridBalancedTree=function(){return this.gridBalancedTree},i.prototype.hasFloatingFilters=function(){return!!this.gridColumns&&this.gridColumns.some(function(s){return s.getColDef().floatingFilter})},i.prototype.getFirstDisplayedColumn=function(){var e=this.gridOptionsWrapper.isEnableRtl(),s=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&s.reverse();for(var l=0;l<s.length;l++){var c=this[s[l]]();if(c.length)return e?Vn(c):c[0]}return null},Fr([B("expressionService")],i.prototype,"expressionService",void 0),Fr([B("columnFactory")],i.prototype,"columnFactory",void 0),Fr([B("displayedGroupCreator")],i.prototype,"displayedGroupCreator",void 0),Fr([B("autoWidthCalculator")],i.prototype,"autoWidthCalculator",void 0),Fr([B("columnUtils")],i.prototype,"columnUtils",void 0),Fr([B("columnAnimationService")],i.prototype,"columnAnimationService",void 0),Fr([B("autoGroupColService")],i.prototype,"autoGroupColService",void 0),Fr([Ln("aggFuncService")],i.prototype,"aggFuncService",void 0),Fr([Ln("valueCache")],i.prototype,"valueCache",void 0),Fr([Ln("animationFrameService")],i.prototype,"animationFrameService",void 0),Fr([B("rowModel")],i.prototype,"rowModel",void 0),Fr([B("columnApi")],i.prototype,"columnApi",void 0),Fr([B("gridApi")],i.prototype,"gridApi",void 0),Fr([B("sortController")],i.prototype,"sortController",void 0),Fr([B("columnDefFactory")],i.prototype,"columnDefFactory",void 0),Fr([Qe],i.prototype,"init",null),Fr([ME(0,Li("loggerFactory"))],i.prototype,"setBeans",null),Fr([ht("columnModel")],i)}(Ye);function Nf(d,i){return Tv(d.toString(),i,"0")}function OE(d,i){for(var e=[],s=d;s<=i;s++)e.push(s);return e}function Fi(d){return""!==d&&!isNaN(parseFloat(d))&&isFinite(d)}function PE(){return Number.MAX_SAFE_INTEGER||9007199254740991}function Fv(d){return"number"!=typeof d?"":d.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}var iM=Object.freeze({__proto__:null,padStartWidthZeros:Nf,createArrayOfNumbers:OE,isNumeric:Fi,getMaxSafeInteger:PE,cleanNumber:function(d){return"string"==typeof d&&(d=parseInt(d,10)),"number"==typeof d?Math.floor(d):null},decToHex:function(d,i){for(var e="",s=0;s<i;s++)e+=String.fromCharCode(255&d),d>>>=8;return e},formatNumberTwoDecimalPlacesAndCommas:function(d){return"number"!=typeof d?"":Fv(Math.round(100*d)/100)},formatNumberCommas:Fv,sum:function(d){return null==d?null:d.reduce(function(i,e){return i+e},0)}}),kf=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),IE=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return kf(i,d),i.prototype.calculateColMinWidth=function(e){return null!=e.minWidth?e.minWidth:this.gridOptionsWrapper.getMinColWidth()},i.prototype.calculateColMaxWidth=function(e){return null!=e.maxWidth?e.maxWidth:this.gridOptionsWrapper.getMaxColWidth()||PE()},i.prototype.calculateColInitialWidth=function(e){var c,s=this.calculateColMinWidth(e),l=this.calculateColMaxWidth(e),p=G(e.width),m=G(e.initialWidth);return c=null!=p?p:null!=m?m:this.gridOptionsWrapper.getColWidth(),Math.max(Math.min(c,l),s)},i.prototype.getOriginalPathForColumn=function(e,s){var l=[],c=!1;return function m(w,x){for(var A=0;A<w.length;A++){if(c)return;var I=w[A];I instanceof gr?(m(I.getChildren(),x+1),l[x]=I):I===e&&(c=!0)}}(s,0),c?l:null},i.prototype.depthFirstOriginalTreeSearch=function(e,s,l){var c=this;!s||s.forEach(function(p){p instanceof gr&&c.depthFirstOriginalTreeSearch(p,p.getChildren(),l),l(p,e)})},i.prototype.depthFirstAllColumnTreeSearch=function(e,s){var l=this;!e||e.forEach(function(c){c instanceof ri&&l.depthFirstAllColumnTreeSearch(c.getChildren(),s),s(c)})},i.prototype.depthFirstDisplayedColumnTreeSearch=function(e,s){var l=this;!e||e.forEach(function(c){c instanceof ri&&l.depthFirstDisplayedColumnTreeSearch(c.getDisplayedChildren(),s),s(c)})},i=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([ht("columnUtils")],i),i}(Ye),LE=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Aa=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return LE(i,d),i.prototype.createDisplayedGroups=function(e,s,l,c,p){var x,A,m=this,w=[],I=this.mapOldGroupsById(p);return e.forEach(function(U){for(var Y=m.getOriginalPathForColumn(s,U),Q=[],oe=!A,xe=0;xe<Y.length;xe++)if(oe||Y[xe]!==A[xe]){var He=m.createColumnGroup(Y[xe],l,I,c);Q[xe]=He,0==xe?w.push(He):Q[xe-1].addChild(He)}else Q[xe]=x[xe];0===Q.length?w.push(U):Vn(Q).addChild(U),x=Q,A=Y}),this.setupParentsIntoColumns(w,null),w},i.prototype.createColumnGroup=function(e,s,l,c){var p=e.getGroupId(),m=s.getInstanceIdForKey(p),x=l[ri.createUniqueId(p,m)];return x&&x.getOriginalColumnGroup()!==e&&(x=null),Le(x)?x.reset():(x=new ri(e,p,m,c),this.context.createBean(x)),x},i.prototype.mapOldGroupsById=function(e){var s={};return e&&function c(p){p.forEach(function(m){if(m instanceof ri){var w=m;s[m.getUniqueId()]=w,c(w.getChildren())}})}(e),s},i.prototype.setupParentsIntoColumns=function(e,s){var l=this;e.forEach(function(c){if(c.setParent(s),c instanceof ri){var p=c;l.setupParentsIntoColumns(p.getChildren(),p)}})},i.prototype.getOriginalPathForColumn=function(e,s){var l=[],c=!1;return function m(w,x){for(var A=0;A<w.length;A++){if(c)return;var I=w[A];I instanceof gr?(m(I.getChildren(),x+1),l[x]=I):I===s&&(c=!0)}}(e,0),c?l:(console.warn("could not get path"),null)},i=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([ht("displayedGroupCreator")],i),i}(Ye),ls=function(){function d(){}return d.STRING_PROPERTIES=["sortingOrder","rowClass","rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","quickFilterText","rowModelType","editType","domLayout","clipboardDeliminator","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","serverSideStoreType","groupDisplayType","treeDataDisplayType"],d.OBJECT_PROPERTIES=["components","frameworkComponents","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultExportParams","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","colResizeDefault","statusBar","sideBar","chartThemeOverrides","customChartThemes"],d.ARRAY_PROPERTIES=["alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes"],d.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","colWidth","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","minColWidth","maxColWidth","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","scrollbarWidth","batchUpdateWaitMillis","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"],d.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellSelection","suppressHorizontalScroll","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","angularCompileRows","angularCompileFilters","groupSuppressAutoColumn","groupSelectsChildren","groupIncludeFooter","groupIncludeTotalFooter","groupUseEntireRow","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","deprecatedEmbedFullWidthRows","suppressPaginationPanel","floatingFilter","groupHideOpenParents","groupMultiAutoColumn","pagination","stopEditingWhenGridLosesFocus","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","deltaRowDataMode","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDownAfterEdit","enterMovesDown","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressEnterpriseResetOnNewColumns","enableOldSetFilterModel","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","serverSideSortingAlwaysResets","suppressSetColumnStateEvents","suppressColumnStateEvents","enableCharts","deltaColumnMode","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","immutableData","immutableColumns","pivotSuppressAutoColumn","suppressExpandablePivotGroups","applyColumnDefOrder","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilteringAlwaysResets","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","reactUi"],d.ALL_PROPERTIES=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],p=0,m=c.length;p<m;p++,l++)s[l]=c[p];return s}(d.ARRAY_PROPERTIES,d.OBJECT_PROPERTIES,d.STRING_PROPERTIES,d.NUMBER_PROPERTIES,d.FUNCTION_PROPERTIES=["localeTextFunc","groupRowInnerRenderer","groupRowInnerRendererFramework","groupRowRenderer","groupRowRendererFramework","isExternalFilterPresent","getRowHeight","doesExternalFilterPass","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","groupRowAggNodes","getRowNodeId","isFullWidthCell","fullWidthCellRenderer","fullWidthCellRendererFramework","processSecondaryColDef","processSecondaryColGroupDef","getBusinessKeyForNode","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","loadingCellRenderer","loadingCellRendererFramework","loadingOverlayComponent","loadingOverlayComponentFramework","noRowsOverlayComponent","noRowsOverlayComponentFramework","detailCellRenderer","detailCellRendererFramework","isRowMaster","isRowSelectable","postSort","processHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","suppressKeyboardEvent","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideStoreParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","defaultGroupSortComparator","defaultGroupOrderComparator","loadingCellRendererSelector"],d.BOOLEAN_PROPERTIES),d.FRAMEWORK_PROPERTIES=["__ob__","__v_skip","__metadata__","mappedColumnProperties","hasChildColumns","toColDef","createColDefFromGridColumn"],d}(),S_=function(){return S_=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},S_.apply(this,arguments)},FE=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],p=0,m=c.length;p<m;p++,l++)s[l]=c[p];return s},ko=function(){function d(){}return d.getEventCallbacks=function(){return d.EVENT_CALLBACKS||(d.EVENT_CALLBACKS=d.EVENTS.map(function(i){return d.getCallbackForEvent(i)})),d.EVENT_CALLBACKS},d.copyAttributesToGridOptions=function(i,e,s){"object"!=typeof i&&(i={});var l=i,c=function(m){return void 0!==e[m]};return FE(d.ARRAY_PROPERTIES,d.STRING_PROPERTIES,d.OBJECT_PROPERTIES,d.FUNCTION_PROPERTIES,d.getEventCallbacks()).filter(c).forEach(function(p){return l[p]=e[p]}),d.BOOLEAN_PROPERTIES.filter(c).forEach(function(p){return l[p]=d.toBoolean(e[p])}),d.NUMBER_PROPERTIES.filter(c).forEach(function(p){return l[p]=d.toNumber(e[p])}),i},d.getCallbackForEvent=function(i){return!i||i.length<2?i:"on"+i[0].toUpperCase()+i.substr(1)},d.processOnChange=function(i,e,s,l){if(i){var c=S_({},i),p=e,m=function(I){return c[I]};FE(d.ARRAY_PROPERTIES,d.OBJECT_PROPERTIES,d.STRING_PROPERTIES,d.getEventCallbacks()).filter(m).forEach(function(A){return p[A]=c[A].currentValue}),d.BOOLEAN_PROPERTIES.filter(m).forEach(function(A){return p[A]=d.toBoolean(c[A].currentValue)}),d.NUMBER_PROPERTIES.filter(m).forEach(function(A){return p[A]=d.toNumber(c[A].currentValue)}),c.enableCellTextSelection&&(s.setEnableCellTextSelection(d.toBoolean(c.enableCellTextSelection.currentValue)),delete c.enableCellTextSelection),c.quickFilterText&&(s.setQuickFilter(c.quickFilterText.currentValue),delete c.quickFilterText),c.autoGroupColumnDef&&(s.setAutoGroupColumnDef(c.autoGroupColumnDef.currentValue,"gridOptionsChanged"),delete c.autoGroupColumnDef),c.columnDefs&&(s.setColumnDefs(c.columnDefs.currentValue,"gridOptionsChanged"),delete c.columnDefs),c.paginationPageSize&&(s.paginationSetPageSize(d.toNumber(c.paginationPageSize.currentValue)),delete c.paginationPageSize),c.pivotMode&&(l.setPivotMode(d.toBoolean(c.pivotMode.currentValue)),delete c.pivotMode),c.groupRemoveSingleChildren&&(s.setGroupRemoveSingleChildren(d.toBoolean(c.groupRemoveSingleChildren.currentValue)),delete c.groupRemoveSingleChildren),c.suppressRowDrag&&(s.setSuppressRowDrag(d.toBoolean(c.suppressRowDrag.currentValue)),delete c.suppressRowDrag),c.suppressMoveWhenRowDragging&&(s.setSuppressMoveWhenRowDragging(d.toBoolean(c.suppressMoveWhenRowDragging.currentValue)),delete c.suppressMoveWhenRowDragging),c.suppressRowClickSelection&&(s.setSuppressRowClickSelection(d.toBoolean(c.suppressRowClickSelection.currentValue)),delete c.suppressRowClickSelection),c.suppressClipboardPaste&&(s.setSuppressClipboardPaste(d.toBoolean(c.suppressClipboardPaste.currentValue)),delete c.suppressClipboardPaste),c.headerHeight&&(s.setHeaderHeight(d.toNumber(c.headerHeight.currentValue)),delete c.headerHeight);var w=s;Object.keys(c).forEach(function(A){var I="set"+A.charAt(0).toUpperCase()+A.substring(1);w[I]&&w[I](i[A].currentValue)});var x={type:$.EVENT_COMPONENT_STATE_CHANGED,api:e.api,columnApi:e.columnApi};In(i,function(A,I){x[A]=I}),s.dispatchEvent(x)}},d.toBoolean=function(i){return"boolean"==typeof i?i:"string"==typeof i&&("TRUE"===i.toUpperCase()||""==i)},d.toNumber=function(i){return"number"==typeof i?i:"string"==typeof i?Number(i):void 0},d.EVENTS=[],d.PUBLIC_EVENTS=[],d.EXCLUDED_INTERNAL_EVENTS=[],d.STRING_PROPERTIES=ls.STRING_PROPERTIES,d.OBJECT_PROPERTIES=ls.OBJECT_PROPERTIES,d.ARRAY_PROPERTIES=ls.ARRAY_PROPERTIES,d.NUMBER_PROPERTIES=ls.NUMBER_PROPERTIES,d.BOOLEAN_PROPERTIES=ls.BOOLEAN_PROPERTIES,d.FUNCTION_PROPERTIES=ls.FUNCTION_PROPERTIES,d.ALL_PROPERTIES=ls.ALL_PROPERTIES,d}();ko.EVENTS=ve($),ko.EXCLUDED_INTERNAL_EVENTS=[$.EVENT_SCROLLBAR_WIDTH_CHANGED,$.EVENT_CHECKBOX_CHANGED,$.EVENT_HEIGHT_SCALE_CHANGED,$.EVENT_BODY_HEIGHT_CHANGED,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,$.EVENT_SCROLL_VISIBILITY_CHANGED,$.EVENT_COLUMN_HOVER_CHANGED,$.EVENT_FLASH_CELLS,$.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,$.EVENT_DISPLAYED_ROWS_CHANGED,$.EVENT_LEFT_PINNED_WIDTH_CHANGED,$.EVENT_RIGHT_PINNED_WIDTH_CHANGED,$.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,$.EVENT_POPUP_TO_FRONT,$.EVENT_KEYBOARD_FOCUS,$.EVENT_MOUSE_FOCUS,$.EVENT_STORE_UPDATED,$.EVENT_COLUMN_PANEL_ITEM_DRAG_START,$.EVENT_COLUMN_PANEL_ITEM_DRAG_END,$.EVENT_FILL_START,$.EVENT_FILL_END],ko.PUBLIC_EVENTS=ko.EVENTS.filter(function(d){return!bn(ko.EXCLUDED_INTERNAL_EVENTS,d)});var sM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),kE=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.componentsMappedByName={},e}return sM(i,d),i.prototype.setupComponents=function(e){var s=this;e&&e.forEach(function(l){return s.addComponent(l)})},i.prototype.addComponent=function(e){var l=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[l]=e.componentClass},i.prototype.getComponentClass=function(e){return this.componentsMappedByName[e]},i=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([ht("agStackComponentsRegistry")],i),i}(Ye),ar=function(){function d(){}return d.STRING_PROPERTIES=["headerName","columnGroupShow","headerClass","toolPanelClass","headerValueGetter","pivotKeys","groupId","colId","sort","initialSort","field","type","tooltipComponent","tooltipField","headerTooltip","cellClass","showRowGroup","template","templateUrl","filter","initialAggFunc","aggFunc","cellRenderer","cellEditor","pinned","initialPinned","chartDataType","cellEditorPopupPosition"],d.OBJECT_PROPERTIES=["headerGroupComponent","headerGroupComponentFramework","headerGroupComponentParams","cellStyle","cellRendererParams","cellEditorFramework","cellEditorParams","pinnedRowCellRendererFramework","pinnedRowCellRendererParams","filterFramework","filterParams","pivotValueColumn","headerComponent","headerComponentFramework","headerComponentParams","floatingFilterComponent","floatingFilterComponentParams","floatingFilterComponentFramework","tooltipComponent","tooltipComponentParams","tooltipComponentFramework","refData","columnsMenuParams"],d.ARRAY_PROPERTIES=["children","sortingOrder","allowedAggFuncs","menuTabs","pivotTotalColumnIds","cellClassRules","icons"],d.NUMBER_PROPERTIES=["sortedAt","sortIndex","initialSortIndex","flex","initialFlex","width","initialWidth","minWidth","maxWidth","rowGroupIndex","initialRowGroupIndex","pivotIndex","initialPivotIndex"],d.BOOLEAN_PROPERTIES=["suppressCellFlash","suppressColumnsToolPanel","suppressFiltersToolPanel","openByDefault","marryChildren","hide","initialHide","rowGroup","initialRowGroup","pivot","initialPivot","checkboxSelection","headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","suppressMenu","suppressMovable","lockPosition","lockVisible","lockPinned","unSortIcon","suppressSizeToFit","suppressAutoSize","enableRowGroup","enablePivot","enableValue","editable","suppressPaste","suppressNavigable","enableCellChangeFlash","rowDrag","dndSource","autoHeight","wrapText","sortable","resizable","singleClickEdit","floatingFilter","cellEditorPopup","suppressFillHandle"],d.ALL_PROPERTIES=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],p=0,m=c.length;p<m;p++,l++)s[l]=c[p];return s}(d.ARRAY_PROPERTIES,d.OBJECT_PROPERTIES,d.STRING_PROPERTIES,d.NUMBER_PROPERTIES,d.FUNCTION_PROPERTIES=["dndSourceOnRowDrag","valueGetter","valueSetter","filterValueGetter","keyCreator","cellRenderer","cellRendererFramework","pinnedRowCellRenderer","valueFormatter","pinnedRowValueFormatter","valueParser","comparator","equals","pivotComparator","suppressKeyboardEvent","suppressHeaderKeyboardEvent","colSpan","rowSpan","getQuickFilterText","newValueHandler","onCellValueChanged","onCellClicked","onCellDoubleClicked","onCellContextMenu","rowDragText","tooltipValueGetter","tooltipComponent","tooltipComponentFramework","cellRendererSelector","cellEditorSelector"],d.BOOLEAN_PROPERTIES),d.FRAMEWORK_PROPERTIES=["__ob__","__v_skip","__metadata__","mappedColumnProperties","hasChildColumns","toColDef","createColDefFromGridColumn"],d}(),Uc=function(){function d(i,e,s,l){void 0===l&&(l=1),this.r=Math.min(1,Math.max(0,i||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,s||0)),this.a=Math.min(1,Math.max(0,l||0))}return d.fromString=function(i){if(i.indexOf("#")>=0)return d.fromHexString(i);var e=d.nameToHex[i];if(e)return d.fromHexString(e);if(i.indexOf("rgb")>=0)return d.fromRgbaString(i);throw new Error("Invalid color string: '"+i+"'")},d.parseHex=function(i){var e;switch((i=i.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(var s=0;s<i.length;s+=2)e.push(parseInt(""+i[s]+i[s+1],16));break;case 3:case 4:e=i.split("").map(function(l){return parseInt(l,16)}).map(function(l){return l+16*l})}if(e.length>=3&&e.every(function(l){return l>=0}))return 3===e.length&&e.push(255),e},d.fromHexString=function(i){var e=d.parseHex(i);if(e)return new d(e[0]/255,e[1]/255,e[2]/255,e[3]/255);throw new Error("Malformed hexadecimal color string: '"+i+"'")},d.stringToRgba=function(i){for(var e=[NaN,NaN],s=e[0],l=e[1],c=0;c<i.length;c++){var p=i[c];if(s||"("!==p){if(")"===p){l=c;break}}else s=c}var m=s&&l&&i.substring(s+1,l);if(m){var w=m.split(","),x=[];for(c=0;c<w.length;c++){var A=w[c],I=parseFloat(A);if(isNaN(I))return;A.indexOf("%")>=0?(I=Math.max(0,Math.min(100,I)),I/=100):3===c?I=Math.max(0,Math.min(1,I)):(I=Math.max(0,Math.min(255,I)),I/=255),x.push(I)}return x}},d.fromRgbaString=function(i){var e=d.stringToRgba(i);if(e){if(3===e.length)return new d(e[0],e[1],e[2]);if(4===e.length)return new d(e[0],e[1],e[2],e[3])}throw new Error("Malformed rgb/rgba color string: '"+i+"'")},d.fromArray=function(i){if(4===i.length)return new d(i[0],i[1],i[2],i[3]);if(3===i.length)return new d(i[0],i[1],i[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},d.fromHSB=function(i,e,s,l){void 0===l&&(l=1);var c=d.HSBtoRGB(i,e,s);return new d(c[0],c[1],c[2],l)},d.padHex=function(i){return 1===i.length?"0"+i:i},d.prototype.toHexString=function(){var i="#"+d.padHex(Math.round(255*this.r).toString(16))+d.padHex(Math.round(255*this.g).toString(16))+d.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(i+=d.padHex(Math.round(255*this.a).toString(16))),i},d.prototype.toRgbaString=function(i){void 0===i&&(i=3);var e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],s=Math.pow(10,i);return 1!==this.a?(e.push(Math.round(this.a*s)/s),"rgba("+e.join(", ")+")"):"rgb("+e.join(", ")+")"},d.prototype.toString=function(){return 1===this.a?this.toHexString():this.toRgbaString()},d.prototype.toHSB=function(){return d.RGBtoHSB(this.r,this.g,this.b)},d.RGBtoHSB=function(i,e,s){var l=Math.min(i,e,s),c=Math.max(i,e,s),m=NaN;if(l!==c){var w=c-l,x=(c-i)/w,A=(c-e)/w,I=(c-s)/w;m=i===c?I-A:e===c?2+x-I:4+A-x,(m/=6)<0&&(m+=1)}return[360*m,0!==c?(c-l)/c:0,c]},d.HSBtoRGB=function(i,e,s){isNaN(i)&&(i=0),i=(i%360+360)%360/360;var l=0,c=0,p=0;if(0===e)l=c=p=s;else{var m=6*(i-Math.floor(i)),w=m-Math.floor(m),x=s*(1-e),A=s*(1-e*w),I=s*(1-e*(1-w));switch(m>>0){case 0:l=s,c=I,p=x;break;case 1:l=A,c=s,p=x;break;case 2:l=x,c=s,p=I;break;case 3:l=x,c=A,p=s;break;case 4:l=I,c=x,p=s;break;case 5:l=s,c=x,p=A}}return[l,c,p]},d.prototype.derive=function(i,e,s,l){var c=d.RGBtoHSB(this.r,this.g,this.b),p=c[2];0==p&&s>1&&(p=.05);var m=((c[0]+i)%360+360)%360,w=Math.max(Math.min(c[1]*e,1),0);p=Math.max(Math.min(p*s,1),0);var x=Math.max(Math.min(this.a*l,1),0),A=d.HSBtoRGB(m,w,p);return A.push(x),d.fromArray(A)},d.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},d.prototype.darker=function(){return this.derive(0,1,.7,1)},d.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),d}();var an,E_,Go,zc,Gf,Nv,kv,Bf,uM=Object.freeze({__proto__:null,stringToArray:function(d,i){void 0===i&&(i=",");var e=[],s=function(Y){return"\r"===Y||"\n"===Y},l=!1;if(""===d)return[[""]];for(var p,m,w,c=function(Y,Q,oe){var xe=d[oe-1],He=d[oe],Ve=d[oe+1],Me=function(){e[Y]||(e[Y]=[]),e[Y][Q]||(e[Y][Q]="")};if(Me(),'"'===He){if(l)return'"'===Ve?(e[Y][Q]+='"',oe++):l=!1,p=Y,m=Q,w=oe,"continue";if(void 0===xe||xe===i||s(xe))return l=!0,p=Y,m=Q,w=oe,"continue"}if(!l){if(He===i)return Q++,Me(),p=Y,m=Q,w=oe,"continue";if(s(He))return Q=0,Y++,Me(),"\r"===He&&"\n"===Ve&&oe++,p=Y,m=Q,w=oe,"continue"}e[Y][Q]+=He,p=Y,m=Q,w=oe},x=0,A=0,I=0;I<d.length;I++)c(x,A,I),x=p,A=m,I=w;return e}});function zi(){return void 0===E_&&(E_=!!document.documentMode),E_}function bl(){return void 0===Go&&(Go=!zi()&&!!window.StyleMedia),Go}function jc(){return void 0===an&&(an=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),an}function qc(){if(void 0===zc){var d=window;zc=!!d.chrome&&(!!d.chrome.webstore||!!d.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return zc}function Jt(){if(void 0===Gf){var d=window;Gf=void 0!==d.InstallTrigger}return Gf}function Ys(){return void 0===Nv&&(Nv=(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream),Nv}function Hf(d){if(!d)return null;var i=d.tabIndex,e=d.getAttribute("tabIndex");return zi()&&0===i&&null===e?!0==={a:!0,body:!0,button:!0,frame:!0,iframe:!0,img:!0,input:!0,isindex:!0,object:!0,select:!0,textarea:!0}[d.nodeName.toLowerCase()]?"0":null:-1!==i||null!==e&&(""!==e||Jt())?i.toString():null}function cs(){if(!document.body)return-1;var d=1e6,i=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,e=document.createElement("div");for(document.body.appendChild(e);;){var s=2*d;if(e.style.height=s+"px",s>i||e.clientHeight!==s)break;d=s}return document.body.removeChild(e),d}function Gv(){return null==Bf&&BE(),Bf}function BE(){var d=document.body,i=document.createElement("div");i.style.width=i.style.height="100px",i.style.opacity="0",i.style.overflow="scroll",i.style.msOverflowStyle="scrollbar",i.style.position="absolute",d.appendChild(i);var e=i.offsetWidth-i.clientWidth;0===e&&0===i.clientWidth&&(e=null),i.parentNode&&i.parentNode.removeChild(i),null!=e&&(Bf=e,kv=0===e)}function ds(){return null==kv&&BE(),kv}function HE(){return document.body?document.body.clientWidth:window.innerHeight?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:-1}function VE(){return document.body?document.body.clientHeight:window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:-1}var Vf,Ta=Object.freeze({__proto__:null,isBrowserIE:zi,isBrowserEdge:bl,isBrowserSafari:jc,isBrowserChrome:qc,isBrowserFirefox:Jt,isIOSUserAgent:Ys,getTabIndex:Hf,getMaxDivHeight:cs,getScrollbarWidth:Gv,isInvisibleScrollbar:ds,hasOverflowScrolling:function(){var d=["webkit","moz","o","ms"],i=document.createElement("div"),s=!1;document.getElementsByTagName("body")[0].appendChild(i),i.setAttribute("style",d.map(function(w){return"-"+w+"-overflow-scrolling: touch"}).concat("overflow-scrolling: touch").join(";"));var c=window.getComputedStyle(i);if("touch"===c.overflowScrolling&&(s=!0),!s)for(var p=0,m=d;p<m.length;p++)if("touch"===c[m[p]+"OverflowScrolling"]){s=!0;break}return i.parentNode&&i.parentNode.removeChild(i),s},getBodyWidth:HE,getBodyHeight:VE});function Tt(d,i){if(d&&i&&0!==i.length){if(i.indexOf(" ")>=0)return void i.split(" ").forEach(function(s){return Tt(d,s)});if(d.classList)d.classList.add(i);else if(d.className&&d.className.length>0){var e=d.className.split(" ");e.indexOf(i)<0&&(e.push(i),d.setAttribute("class",e.join(" ")))}else d.setAttribute("class",i);return d}}function gi(d,i){if(d&&i&&0!==i.length){if(i.indexOf(" ")>=0)return void i.split(" ").forEach(function(s){return gi(d,s)});if(d.classList)d.classList.remove(i);else if(d.className&&d.className.length>0){var e=d.className.split(" ").filter(function(s){return s!==i}).join(" ");d.setAttribute("class",e)}}}function Lt(d,i,e){e?Tt(d,i):gi(d,i)}function fs(d,i){if(d.classList)return d.classList.contains(i);if(d.className){var e=d.className===i,s=d.className.indexOf(" "+i+" ")>=0,l=0===d.className.indexOf(i+" "),c=d.className.lastIndexOf(" "+i)===d.className.length-i.length-1;return e||s||l||c}return!1}function WE(d){var i=Element.prototype.matches||Element.prototype.msMatchesSelector,e=i.call(d,ce.INPUT_SELECTOR),s=i.call(d,ce.FOCUSABLE_EXCLUDE),l=Al(d);return e&&!s&&l}function jn(d,i){Lt(d,"ag-hidden",!i)}function nr(d,i){Lt(d,"ag-invisible",!i)}function ps(d,i){var e="disabled",s=i?function(l){return l.setAttribute(e,"")}:function(l){return l.removeAttribute(e)};s(d),Xs(d.querySelectorAll("input"),function(l){return s(l)})}function xl(d,i,e){for(var s=0;d;){if(fs(d,i))return!0;if(d=d.parentElement,e&&++s>e)break}return!1}function Pu(d){var i=window.getComputedStyle(d),s=i.width,l=i.paddingTop,c=i.paddingRight,p=i.paddingBottom,m=i.paddingLeft,w=i.marginTop,x=i.marginRight,A=i.marginBottom,I=i.marginLeft,U=i.boxSizing;return{height:parseFloat(i.height),width:parseFloat(s),paddingTop:parseFloat(l),paddingRight:parseFloat(c),paddingBottom:parseFloat(p),paddingLeft:parseFloat(m),marginTop:parseFloat(w),marginRight:parseFloat(x),marginBottom:parseFloat(A),marginLeft:parseFloat(I),boxSizing:U}}function Rl(d){var i=Pu(d);return"border-box"===i.boxSizing?i.height-i.paddingTop-i.paddingBottom:i.height}function Bo(d){var i=Pu(d);return"border-box"===i.boxSizing?i.width-i.paddingLeft-i.paddingRight:i.width}function Iu(d){var i=Pu(d);return Math.ceil(d.offsetHeight+(i.marginBottom+i.marginTop))}function Wf(d){var i=Pu(d);return Math.ceil(d.offsetWidth+(i.marginLeft+i.marginRight))}function Kr(){if("boolean"==typeof Vf)return Vf;var d=document.createElement("div");return d.style.direction="rtl",d.style.width="1px",d.style.height="1px",d.style.position="fixed",d.style.top="0px",d.style.overflow="hidden",d.dir="rtl",d.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(d),d.scrollLeft=1,Vf=0===Math.floor(d.scrollLeft),document.body.removeChild(d),Vf}function Yc(d,i){var e=d.scrollLeft;return i&&(e=Math.abs(e),qc()&&!Kr()&&(e=d.scrollWidth-d.clientWidth-e)),e}function Kc(d,i,e){e&&(Kr()?i*=-1:(jc()||qc())&&(i=d.scrollWidth-d.clientWidth-i)),d.scrollLeft=i}function ao(d){for(;d&&d.firstChild;)d.removeChild(d.firstChild)}function mi(d){d&&d.parentNode&&d.parentNode.removeChild(d)}function Al(d){return null!==d.offsetParent}function oa(d){var i=document.createElement("div");return i.innerHTML=(d||"").trim(),i.firstChild}function ii(d){return d&&d.clientHeight?d.clientHeight:0}function Da(d){return d&&d.clientWidth?d.clientWidth:0}function hs(d,i,e){e&&e.nextSibling===i||(e?e.nextSibling?d.insertBefore(i,e.nextSibling):d.appendChild(i):d.firstChild&&d.firstChild!==i&&d.insertAdjacentElement("afterbegin",i))}function uo(d,i){for(var e=0;e<i.length;e++){var s=i[e],l=d.children[e];l!==s&&d.insertBefore(s,l)}}function $c(d,i,e){e?e.insertAdjacentElement("afterend",i):d.firstChild?d.insertAdjacentElement("afterbegin",i):d.appendChild(i)}function Lu(d,i){!i||Object.keys(i).forEach(function(e){var s=Dv(e);s&&(d.style[s]=i[e])})}function Tl(d){return d.clientWidth<d.scrollWidth}function Ks(d){return d.clientHeight<d.scrollHeight}function Nr(d,i){"flex"===i?(d.style.removeProperty("width"),d.style.removeProperty("minWidth"),d.style.removeProperty("maxWidth"),d.style.flex="1 1 auto"):Ma(d,i)}function Ma(d,i){i=yn(i),d.style.width=i.toString(),d.style.maxWidth=i.toString(),d.style.minWidth=i.toString()}function st(d,i){i=yn(i),d.style.height=i.toString(),d.style.maxHeight=i.toString(),d.style.minHeight=i.toString()}function yn(d){return"number"==typeof d?d+"px":d}function dr(d){return"function"==typeof Node?d instanceof Node:d&&"object"==typeof d&&"number"==typeof d.nodeType&&"string"==typeof d.nodeName}function lo(d){return"function"==typeof HTMLElement?d instanceof HTMLElement:d&&wl(d)&&1===d.nodeType&&"string"==typeof d.nodeName}function Oa(d){return dr(d)||lo(d)}function $r(d){if(null==d)return[];var i=[];return Xs(d,function(e){return i.push(e)}),i}function $s(d,i){if(d)for(var e=0;e<d.length;e++){var s=d[e];i(s.name,s.value)}}function vs(d,i,e){null==e?d.removeAttribute(i):d.setAttribute(i,e.toString())}function Xs(d,i){if(null!=d)for(var e=0;e<d.length;e++)i(d[e])}var hn=Object.freeze({__proto__:null,addCssClass:Tt,removeCssClass:gi,addOrRemoveCssClass:Lt,radioCssClass:function(d,i,e){for(var s=d.parentElement,l=s&&s.firstChild;l;)i&&Lt(l,i,l===d),e&&Lt(l,e,l!==d),l=l.nextSibling},containsClass:fs,isFocusableFormField:WE,setDisplayed:jn,setVisible:nr,setDisabled:ps,isElementChildOfClass:xl,getElementSize:Pu,getInnerHeight:Rl,getInnerWidth:Bo,getAbsoluteHeight:Iu,getAbsoluteWidth:Wf,isRtlNegativeScroll:Kr,getScrollLeft:Yc,setScrollLeft:Kc,clearElement:ao,removeElement:function(d,i){mi(d.querySelector(i))},removeFromParent:mi,isVisible:Al,loadTemplate:oa,appendHtml:function(d,i){d.lastChild?d.insertAdjacentHTML("afterbegin",i):d.innerHTML=i},getElementAttribute:function(d,i){return d.attributes&&d.attributes[i]?d.attributes[i].value:null},offsetHeight:ii,offsetWidth:Da,ensureDomOrder:hs,setDomChildOrder:uo,insertWithDomOrder:$c,prependDC:function(d,i){Le(d.firstChild)?d.insertBefore(i,d.firstChild):d.appendChild(i)},addStylesToElement:Lu,isHorizontalScrollShowing:Tl,isVerticalScrollShowing:Ks,setElementWidth:Nr,setFixedWidth:Ma,setElementHeight:function(d,i){"flex"===i?(d.style.removeProperty("height"),d.style.removeProperty("minHeight"),d.style.removeProperty("maxHeight"),d.style.flex="1 1 auto"):st(d,i)},setFixedHeight:st,formatSize:yn,isNode:dr,isElement:lo,isNodeOrElement:Oa,copyNodeList:$r,iterateNamedNodeMap:$s,setCheckboxState:function(d,i){"boolean"==typeof i?(d.checked=i,d.indeterminate=!1):d.indeterminate=!0},addOrRemoveAttribute:vs,nodeListForEach:Xs}),Xc=Object.freeze({__proto__:null,getNameOfClass:function(d){var e=d.toString(),s=/function (.{1,})\(/.exec(e);return s&&s.length>1?s[1]:""},findLineByLeastSquares:function(d){var i=d.length,e=0;if(i<=1)return d;for(var s=0;s<d.length;s++){var l=d[s],c=l.toString().split("e-");c.length>1?e=Math.max(e,parseInt(c[1],10)):Math.floor(l)!==l&&(e=Math.max(e,l.toString().split(".")[1].length))}for(var p=0,m=0,w=0,x=0,A=0,I=0;I<i;I++)p+=I,m+=A=d[I],x+=I*I,w+=I*A;var U=(i*w-p*m)/(i*x-p*p),Y=m/i-U*p/i,Q=[];for(I=0;I<=i;I++)Q.push(parseFloat((I*U+Y).toFixed(e)));return Q},cssStyleObjectToMarkup:function(d){if(!d)return"";var i=[];return In(d,function(e,s){var l=C_(e);i.push(l+": "+s+";")}),i.join(" ")},message:function(d){var i=document.createElement("div"),e=document.querySelector("#__ag__message");i.innerHTML=d,e||(e=oa('<div id="__ag__message" style="display: inline-block; position: absolute; top: 0px; left: 0px; color: white; background-color: black; z-index: 20; padding: 2px; border: 1px solid darkred; height: 200px; overflow-y: auto;"></div>'),document.body&&document.body.appendChild(e)),e.insertBefore(i,e.children[0])},bindCellRendererToHtmlElement:function(d,i){d.then(function(e){var s=e.getGui();null!=s&&("object"==typeof s?i.appendChild(s):i.innerHTML=s)})}});function Sr(d,i,e){d.setAttribute(sr(i),e.toString())}function ki(d,i){d.removeAttribute(sr(i))}function sr(d){return"aria-"+d}function ji(d,i){i?d.setAttribute("role",i):d.removeAttribute("role")}function x_(d){return d.isSortAscending()?"ascending":d.isSortDescending()?"descending":"none"}function Vo(d){return parseInt(d.getAttribute("aria-posinset"),10)}function Ia(d,i){var e="label";i?Sr(d,e,i):ki(d,e)}function Ol(d,i){var e="labelledby";i?Sr(d,e,i):ki(d,e)}function fo(d,i){var e="describedby";i?Sr(d,e,i):ki(d,e)}function zf(d,i){Sr(d,"disabled",i)}function jf(d,i){Sr(d,"expanded",i)}function jE(d,i){Sr(d,"setsize",i)}function qE(d,i){Sr(d,"posinset",i)}function YE(d,i){Sr(d,"multiselectable",i)}function KE(d,i){Sr(d,"rowcount",i)}function R_(d,i){Sr(d,"rowindex",i)}function $E(d,i){Sr(d,"colcount",i)}function A_(d,i){Sr(d,"colindex",i)}function XE(d,i){Sr(d,"colspan",i)}function JE(d,i){Sr(d,"sort",i)}function ZE(d){ki(d,"sort")}function Jc(d,i){var e="selected";i?Sr(d,e,i):ki(d,e)}function QE(d,i){Sr(d,"checked",void 0===i?"mixed":i)}var lM=Object.freeze({__proto__:null,setAriaRole:ji,getAriaSortState:x_,getAriaLevel:function(d){return parseInt(d.getAttribute("aria-level"),10)},getAriaPosInSet:Vo,getAriaDescribedBy:function(d){return d.getAttribute("aria-describedby")||""},setAriaLabel:Ia,setAriaLabelledBy:Ol,setAriaDescribedBy:fo,setAriaLevel:function(d,i){Sr(d,"level",i)},setAriaDisabled:zf,setAriaExpanded:jf,removeAriaExpanded:function(d){ki(d,"expanded")},setAriaSetSize:jE,setAriaPosInSet:qE,setAriaMultiSelectable:YE,setAriaRowCount:KE,setAriaRowIndex:R_,setAriaColCount:$E,setAriaColIndex:A_,setAriaColSpan:XE,setAriaSort:JE,removeAriaSort:ZE,setAriaSelected:Jc,setAriaChecked:QE});function Fu(d,i,e){if(void 0===i&&(i=!0),void 0===e&&(e="-"),!d)return null;var s=[d.getFullYear(),d.getMonth()+1,d.getDate()].map(function(l){return Nf(l,2)}).join(e);return i&&(s+=" "+[d.getHours(),d.getMinutes(),d.getSeconds()].map(function(l){return Nf(l,2)}).join(":")),s}function gs(d){if(!d)return null;var i=d.split(" "),e=i[0],s=i[1];if(!e)return null;var l=e.split("-").map(function(Y){return parseInt(Y,10)});if(3!==l.filter(function(Y){return!isNaN(Y)}).length)return null;var c=l[0],p=l[1],m=l[2],w=new Date(c,p-1,m);if(w.getFullYear()!==c||w.getMonth()!==p-1||w.getDate()!==m)return null;if(!s||"00:00:00"===s)return w;var x=s.split(":").map(function(Y){return parseInt(Y,10)}),A=x[0],I=x[1],U=x[2];return A>=0&&A<24&&w.setHours(A),I>=0&&I<60&&w.setMinutes(I),U>=0&&U<60&&w.setSeconds(U),w}var Wv=Object.freeze({__proto__:null,serialiseDate:Fu,parseDateTimeFromString:gs});function eb(d,i,e){var s={},l=d.filter(function(c){return!i.some(function(p){return p===c})});return l.length>0&&l.forEach(function(c){return s[c]=tb(c,e)}),s}function tb(d,i,e,s){var l=s?D_:Js,c=i.map(function(p){return{value:p,relevance:l(d.toLowerCase(),p.toLocaleLowerCase())}});return c.sort(function(p,m){return m.relevance-p.relevance}),e&&(c=c.filter(function(p){return 0!==p.relevance})),c.map(function(p){return p.value})}function T_(d){var s,l,c,i=d.toLowerCase(),e=new Array(i.length-1);for(s=l=0,c=e.length;l<=c;s=l+=1)e[s]=i.slice(s,s+2);return e}function Js(d,i){if(0===d.length&&0===i.length)return 0;var p,m,e=T_(d),s=T_(i),l=e.length+s.length,c=0;for(p=0,m=e.length;p<m;p++){var A,w=e[p],x=void 0;for(x=0,A=s.length;x<A;x++)w===s[x]&&c++}return c>0?2*c/l:0}function D_(d,i){for(var e=d.replace(/\s/g,""),s=i.replace(/\s/g,""),l=0,c=0,p=0;p<e.length;p++){var m=s.indexOf(e[p],c);-1!==m&&(l+=100-100*(c=m)/1e4*100)}return l}var La=Object.freeze({__proto__:null,fuzzyCheckStrings:eb,fuzzySuggestions:tb,get_bigrams:T_,string_distances:Js,string_weighted_distances:D_}),Uv={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"};function Wo(d,i,e){var s=oi(d,i,e);if(s&&s.className.indexOf("ag-icon")>-1)return s;var l=document.createElement("span");return l.appendChild(s),l}function oi(d,i,e,s){var l=null,c=e&&e.getColDef().icons;if(c&&(l=c[d]),i&&!l){var p=i.getIcons();p&&(l=p[d])}if(!l){var w=document.createElement("span"),x=Uv[d];return x||(s?x=d:(console.warn("AG Grid: Did not find icon "+d),x="")),w.setAttribute("class","ag-icon ag-icon-"+x),w.setAttribute("unselectable","on"),ji(w,"presentation"),w}var m=void 0;if("function"==typeof l)m=l();else{if("string"!=typeof l)throw new Error("icon from grid options needs to be a string or a function");m=l}return"string"==typeof m?oa(m):Oa(m)?m:void console.warn("AG Grid: iconRenderer should return back a string or a dom object")}var M_=Object.freeze({__proto__:null,iconNameClassMap:Uv,createIcon:Wo,createIconNoSpan:oi});function Zc(d,i){return(d.which||d.keyCode)===i}function P_(d){if(d.altKey||d.ctrlKey||d.metaKey)return!1;var i=1===d.key.length,e=function(d){return(bl()||zi())&&"Del"===d.key&&46===d.charCode}(d);return i||e}function qi(d,i,e,s,l){var c=d.getSuppressKeyboardEventFunc(),p=s?s.getColDef().suppressKeyboardEvent:void 0;if(!c&&!p)return!1;var m={event:i,editing:l,column:s,api:d.getApi(),node:e,data:e.data,colDef:s.getColDef(),context:d.getContext(),columnApi:d.getColumnApi()};return!(!p||!p(m))||!!c&&c(m)}function zv(d,i,e,s){var l=s.getDefinition(),c=l&&l.suppressHeaderKeyboardEvent;return!!Le(c)&&!!c({api:d.getApi(),columnApi:d.getColumnApi(),context:d.getContext(),colDef:l,column:s,headerRowIndex:e,event:i})}var jv=Object.freeze({__proto__:null,isKeyPressed:Zc,isEventFromPrintableCharacter:P_,isUserSuppressingKeyboardEvent:qi,isUserSuppressingHeaderKeyboardEvent:zv});function L_(d,i,e){if(0===e)return!1;var s=Math.abs(d.clientX-i.clientX),l=Math.abs(d.clientY-i.clientY);return Math.max(s,l)<=e}var Er=Object.freeze({__proto__:null,normalizeWheel:function(d){var l=0,c=0,p=0,m=0;return"detail"in d&&(c=d.detail),"wheelDelta"in d&&(c=-d.wheelDelta/120),"wheelDeltaY"in d&&(c=-d.wheelDeltaY/120),"wheelDeltaX"in d&&(l=-d.wheelDeltaX/120),"axis"in d&&d.axis===d.HORIZONTAL_AXIS&&(l=c,c=0),p=10*l,m=10*c,"deltaY"in d&&(m=d.deltaY),"deltaX"in d&&(p=d.deltaX),(p||m)&&d.deltaMode&&(1==d.deltaMode?(p*=40,m*=40):(p*=800,m*=800)),p&&!l&&(l=p<1?-1:1),m&&!c&&(c=m<1?-1:1),{spinX:l,spinY:c,pixelX:p,pixelY:m}},isLeftClick:function(d){return"buttons"in d?1==d.buttons:1==(d.which||d.button)},areEventsNear:L_}),kr=Object.freeze({__proto__:null,sortRowNodesByOrder:function(d,i){if(d){for(var e=function(w,x){var A=i[w.id],I=i[x.id],U=void 0!==A,Y=void 0!==I;return U&&Y?A-I:U||Y?U?1:-1:w.__objectId-x.__objectId},c=!1,p=0;p<d.length-1;p++)if(e(d[p],d[p+1])>0){c=!0;break}c&&d.sort(e)}},traverseNodesWithKey:function(d,i){var e=[];!function s(l){!l||l.forEach(function(c){if(c.group||c.hasChildren()){e.push(c.key);var p=e.join("|");i(c,p),s(c.childrenAfterGroup),e.pop()}})}(d)}});function Yv(d){var i=new Set;return d.forEach(function(e){return i.add(e)}),i}var cM=Object.freeze({__proto__:null,convertToSet:Yv}),fr=function(){return fr=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},fr.apply(this,arguments)},yt=fr(fr(fr(fr(fr(fr(fr(fr(fr(fr(fr(fr(fr(fr(fr(fr(fr(fr(fr(fr({},Xc),lM),os),Ta),uM),Wv),hn),Wc),u_),La),zs),M_),jv),Pv),Er),iM),ss),kr),cM),Ff),ms=function(){function d(i,e){void 0===i&&(i=0),void 0===e&&(e=1),this.nextValue=i,this.step=e}return d.prototype.next=function(){var i=this.nextValue;return this.nextValue+=this.step,i},d.prototype.peek=function(){return this.nextValue},d.prototype.skip=function(i){this.nextValue+=i},d}();!function(d){d[d.IN_PROGRESS=0]="IN_PROGRESS",d[d.RESOLVED=1]="RESOLVED"}(K.Ws0||(K.Ws0={}));var Xr=function(){function d(i){var e=this;this.status=K.Ws0.IN_PROGRESS,this.resolution=null,this.waiters=[],i(function(s){return e.onDone(s)},function(s){return e.onReject(s)})}return d.all=function(i){return new d(function(e){var s=i.length,l=new Array(s);Vt(i,function(c,p){c.then(function(m){l[p]=m,0==--s&&e(l)})})})},d.resolve=function(i){return void 0===i&&(i=null),new d(function(e){return e(i)})},d.prototype.then=function(i){var e=this;return new d(function(s){e.status===K.Ws0.RESOLVED?s(i(e.resolution)):e.waiters.push(function(l){return s(i(l))})})},d.prototype.resolveNow=function(i,e){return this.status===K.Ws0.RESOLVED?e(this.resolution):i},d.prototype.onDone=function(i){this.status=K.Ws0.RESOLVED,this.resolution=i,Vt(this.waiters,function(e){return e(i)})},d.prototype.onReject=function(i){console.warn("TBI")},d}(),N_=(function(){function d(){this.timestamp=(new Date).getTime()}d.prototype.print=function(i){var e=(new Date).getTime()-this.timestamp;console.info(i+" = "+e),this.timestamp=(new Date).getTime()}}(),function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}()),Qc=function(){return Qc=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Qc.apply(this,arguments)},ed=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Jr=function(){return function(d){d[d.NOTHING=0]="NOTHING",d[d.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",d[d.SHOWING=2]="SHOWING"}(Jr||(Jr={})),Jr}(),qf=function(d){function i(e){var s=d.call(this)||this;return s.DEFAULT_HIDE_TOOLTIP_TIMEOUT=1e4,s.SHOW_QUICK_TOOLTIP_DIFF=1e3,s.FADE_OUT_TOOLTIP_TIMEOUT=1e3,s.state=Jr.NOTHING,s.tooltipInstanceCount=0,s.tooltipMouseTrack=!1,s.parentComp=e,s}return N_(i,d),i.prototype.postConstruct=function(){this.tooltipShowDelay=this.gridOptionsWrapper.getTooltipShowDelay()||2e3,this.tooltipMouseTrack=this.gridOptionsWrapper.isTooltipMouseTrack();var e=this.parentComp.getGui();this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this)),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this))},i.prototype.destroy=function(){this.setToDoNothing(),d.prototype.destroy.call(this)},i.prototype.onMouseEnter=function(e){if(!Ys()&&this.state==Jr.NOTHING){var s=this.isLastTooltipHiddenRecently()?200:this.tooltipShowDelay;this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),s),this.lastMouseEvent=e,this.state=Jr.WAITING_TO_SHOW}},i.prototype.onMouseLeave=function(){this.setToDoNothing()},i.prototype.onKeyDown=function(){this.setToDoNothing()},i.prototype.setToDoNothing=function(){this.state===Jr.SHOWING&&this.hideTooltip(),this.clearTimeouts(),this.state=Jr.NOTHING},i.prototype.onMouseMove=function(e){this.lastMouseEvent=e,this.tooltipMouseTrack&&this.state===Jr.SHOWING&&this.tooltipComp&&this.positionTooltipUnderLastMouseEvent()},i.prototype.onMouseDown=function(){this.setToDoNothing()},i.prototype.hideTooltip=function(){this.tooltipComp&&(this.destroyTooltipComp(),i.lastTooltipHideTime=(new Date).getTime()),this.state=Jr.NOTHING},i.prototype.destroyTooltipComp=function(){var e=this;Tt(this.tooltipComp.getGui(),"ag-tooltip-hiding");var s=this.tooltipPopupDestroyFunc,l=this.tooltipComp;window.setTimeout(function(){s(),e.getContext().destroyBean(l)},this.FADE_OUT_TOOLTIP_TIMEOUT),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0},i.prototype.isLastTooltipHiddenRecently=function(){return(new Date).getTime()-i.lastTooltipHideTime<this.SHOW_QUICK_TOOLTIP_DIFF},i.prototype.showTooltip=function(){var e=Qc({api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()},this.parentComp.getTooltipParams());if(Le(e.value)){this.state=Jr.SHOWING,this.tooltipInstanceCount++;var s=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(s)}else this.setToDoNothing()},i.prototype.newTooltipComponentCallback=function(e,s){if(this.state!==Jr.SHOWING||this.tooltipInstanceCount!==e)this.getContext().destroyBean(s);else{var c=s.getGui();this.tooltipComp=s,fs(c,"ag-tooltip")||Tt(c,"ag-tooltip-custom"),this.gridOptionsWrapper.isReactUi()&&Tt(c,"ag-tooltip-reactui");var p=this.gridOptionsWrapper.getLocaleTextFunc(),m=this.popupService.addPopup({eChild:c,ariaLabel:p("ariaLabelTooltip","Tooltip")});m&&(this.tooltipPopupDestroyFunc=m.hideFunc),this.positionTooltipUnderLastMouseEvent(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.DEFAULT_HIDE_TOOLTIP_TIMEOUT)}},i.prototype.positionTooltipUnderLastMouseEvent=function(){this.popupService.positionPopupUnderMouseEvent({type:"tooltip",mouseEvent:this.lastMouseEvent,ePopup:this.tooltipComp.getGui(),nudgeY:18})},i.prototype.clearTimeouts=function(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0),this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)},ed([B("popupService")],i.prototype,"popupService",void 0),ed([B("userComponentFactory")],i.prototype,"userComponentFactory",void 0),ed([B("columnApi")],i.prototype,"columnApi",void 0),ed([B("gridApi")],i.prototype,"gridApi",void 0),ed([Qe],i.prototype,"postConstruct",null),i}(Ye),Kv=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ut=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},dM=new ms,dn=function(d){function i(e){var s=d.call(this)||this;return s.displayed=!0,s.visible=!0,s.compId=dM.next(),s.cssClassStates={},e&&s.setTemplate(e),s}return Kv(i,d),i.prototype.preConstructOnComponent=function(){this.usingBrowserTooltips=this.gridOptionsWrapper.isEnableBrowserTooltips()},i.prototype.getCompId=function(){return this.compId},i.prototype.getTooltipParams=function(){return{value:this.tooltipText,location:"UNKNOWN"}},i.prototype.setTooltip=function(e){var s=this;this.tooltipText!=e&&(this.tooltipText&&(s.usingBrowserTooltips?s.getGui().removeAttribute("title"):s.tooltipFeature=s.destroyBean(s.tooltipFeature)),null!=e&&(this.tooltipText=e,this.tooltipText&&(s.usingBrowserTooltips?s.getGui().setAttribute("title",s.tooltipText):s.tooltipFeature=s.createBean(new qf(s)))))},i.prototype.createChildComponentsFromTags=function(e,s){var l=this;Vt($r(e.childNodes),function(p){if(p instanceof HTMLElement){var m=l.createComponentFromElement(p,function(x){x.getGui()&&l.copyAttributesFromNode(p,x.getGui())},s);if(m){if(m.addItems&&p.children.length){l.createChildComponentsFromTags(p,s);var w=Array.prototype.slice.call(p.children);m.addItems(w)}l.swapComponentForNode(m,e,p)}else p.childNodes&&l.createChildComponentsFromTags(p,s)}})},i.prototype.createComponentFromElement=function(e,s,l){var c=e.nodeName,p=l?l[e.getAttribute("ref")]:void 0,m=this.agStackComponentsRegistry.getComponentClass(c);if(m){i.elementGettingCreated=e;var w=new m(p);return w.setParentComponent(this),this.createBean(w,null,s),w}return null},i.prototype.copyAttributesFromNode=function(e,s){$s(e.attributes,function(l,c){return s.setAttribute(l,c)})},i.prototype.swapComponentForNode=function(e,s,l){var c=e.getGui();s.replaceChild(c,l),s.insertBefore(document.createComment(l.nodeName),c),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,l)},i.prototype.swapInComponentForQuerySelectors=function(e,s){var l=this;this.iterateOverQuerySelectors(function(c){l[c.attributeName]===s&&(l[c.attributeName]=e)})},i.prototype.iterateOverQuerySelectors=function(e){for(var s=Object.getPrototypeOf(this);null!=s;){var l=s.__agComponentMetaData,c=zn(s.constructor);l&&l[c]&&l[c].querySelectors&&Vt(l[c].querySelectors,function(p){return e(p)}),s=Object.getPrototypeOf(s)}},i.prototype.setTemplate=function(e,s){var l=oa(e);this.setTemplateFromElement(l,s)},i.prototype.setTemplateFromElement=function(e,s){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),s)},i.prototype.createChildComponentsPreConstruct=function(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())},i.prototype.wireQuerySelectors=function(){var e=this;if(this.eGui){var s=this;this.iterateOverQuerySelectors(function(l){var c=function(x){return s[l.attributeName]=x};if(l.refSelector&&e.eGui.getAttribute("ref")===l.refSelector)c(e.eGui);else{var m=e.eGui.querySelector(l.querySelector);m&&c(m.__agComponent||m)}})}},i.prototype.getGui=function(){return this.eGui},i.prototype.getFocusableElement=function(){return this.eGui},i.prototype.setParentComponent=function(e){this.parentComponent=e},i.prototype.getParentComponent=function(){return this.parentComponent},i.prototype.setGui=function(e){this.eGui=e},i.prototype.queryForHtmlElement=function(e){return this.eGui.querySelector(e)},i.prototype.queryForHtmlInputElement=function(e){return this.eGui.querySelector(e)},i.prototype.appendChild=function(e,s){if(s||(s=this.eGui),null!=e)if(Oa(e))s.appendChild(e);else{var l=e;s.appendChild(l.getGui()),this.addDestroyFunc(this.destroyBean.bind(this,l))}},i.prototype.isDisplayed=function(){return this.displayed},i.prototype.setVisible=function(e){e!==this.visible&&(this.visible=e,nr(this.eGui,e))},i.prototype.setDisplayed=function(e){e!==this.displayed&&(this.displayed=e,jn(this.eGui,e),this.dispatchEvent({type:i.EVENT_DISPLAYED_CHANGED,visible:this.displayed}))},i.prototype.destroy=function(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),d.prototype.destroy.call(this)},i.prototype.addGuiEventListener=function(e,s){var l=this;this.eGui.addEventListener(e,s),this.addDestroyFunc(function(){return l.eGui.removeEventListener(e,s)})},i.prototype.addCssClass=function(e){!0!==this.cssClassStates[e]&&(Tt(this.eGui,e),this.cssClassStates[e]=!0)},i.prototype.removeCssClass=function(e){!1!==this.cssClassStates[e]&&(gi(this.eGui,e),this.cssClassStates[e]=!1)},i.prototype.addOrRemoveCssClass=function(e,s){this.cssClassStates[e]!==s&&(Lt(this.eGui,e,s),this.cssClassStates[e]=s)},i.prototype.getAttribute=function(e){var s=this.eGui;return s?s.getAttribute(e):null},i.prototype.getRefElement=function(e){return this.queryForHtmlElement('[ref="'+e+'"]')},i.EVENT_DISPLAYED_CHANGED="displayedChanged",Ut([B("agStackComponentsRegistry")],i.prototype,"agStackComponentsRegistry",void 0),Ut([Cv],i.prototype,"preConstructOnComponent",null),Ut([Cv],i.prototype,"createChildComponentsPreConstruct",null),i}(Ye);function Be(d){return $v.bind(this,"[ref="+d+"]",d)}function $v(d,i,e,s,l){null!==d?"number"!=typeof l?function(d,i,e){var s=function(d,i){return d.__agComponentMetaData||(d.__agComponentMetaData={}),d.__agComponentMetaData[i]||(d.__agComponentMetaData[i]={}),d.__agComponentMetaData[i]}(d,zn(d.constructor));s[i]||(s[i]=[]),s[i].push(e)}(e,"querySelectors",{attributeName:s,querySelector:d,refSelector:i}):console.error("AG Grid: QuerySelector should be on an attribute"):console.error("AG Grid: QuerySelector selector should not be null")}var qe=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Fn=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ys=function(d){function i(){return d.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this}return qe(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(e){this.params=e;var s=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),l=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(s+" "+l("ariaFilterInput","Filter Input"))},i.prototype.onParentModelChanged=function(e){var s=this;e?this.params.parentFilterInstance(function(l){if(l.getModelAsString){var c=l.getModelAsString(e);s.eFloatingFilterText.setValue(c)}}):this.eFloatingFilterText.setValue("")},Fn([Be("eFloatingFilterText")],i.prototype,"eFloatingFilterText",void 0),Fn([B("columnModel")],i.prototype,"columnModel",void 0),i}(dn),Gr=function(){function d(i,e,s,l){var c=this;this.alive=!0,this.context=i,this.eParent=l,e.getDateCompDetails(s).newAgStackInstance().then(function(w){c.alive?(c.dateComp=w,w&&(l.appendChild(w.getGui()),w.afterGuiAttached&&w.afterGuiAttached(),c.tempValue&&w.setDate(c.tempValue),null!=c.disabled&&c.setDateCompDisabled(c.disabled))):i.destroyBean(w)})}return d.prototype.destroy=function(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)},d.prototype.getDate=function(){return this.dateComp?this.dateComp.getDate():this.tempValue},d.prototype.setDate=function(i){this.dateComp?this.dateComp.setDate(i):this.tempValue=i},d.prototype.setDisabled=function(i){this.dateComp?this.setDateCompDisabled(i):this.disabled=i},d.prototype.setDisplayed=function(i){jn(this.eParent,i)},d.prototype.setInputPlaceholder=function(i){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(i)},d.prototype.setInputAriaLabel=function(i){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(i)},d.prototype.afterGuiAttached=function(i){this.dateComp&&"function"==typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(i)},d.prototype.setDateCompDisabled=function(i){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(i)},d}(),Yf=function(){return Yf=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Yf.apply(this,arguments)},Pl=function(){function d(){this.customFilterOptions={}}return d.prototype.init=function(i,e){this.filterOptions=i.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(i),this.checkForDeprecatedParams()},d.prototype.checkForDeprecatedParams=function(){yt.some(this.filterOptions,function(i){return"string"!=typeof i&&null!=i.test})&&console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, test() has been replaced with predicate()."),yt.some(this.filterOptions,function(i){return"string"!=typeof i&&null!=i.hideFilterInput})&&console.warn("AG Grid: [IFilterOptionDef] since v26.2.0, useOfHideFilterInput has been replaced with numberOfInputs.")},d.prototype.getFilterOptions=function(){return this.filterOptions},d.prototype.mapCustomOptions=function(){var i=this;!this.filterOptions||this.filterOptions.forEach(function(e){if("string"!=typeof e){if(!en([["displayKey"],["displayName"],["predicate","test"]],function(w){return!!Yt(w,function(x){return null!=e[x]})||(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '"+w+"'"),!1)}))return void(i.filterOptions=yt.filter(i.filterOptions,function(m){return m===e})||[]);var c=e.test,p=Yf({},e);null!=c&&null==e.predicate&&(p.predicate=function(m,w){return c(m[0],w)},delete p.test),p.hideFilterInput&&null==p.numberOfInputs&&(p.numberOfInputs=0,delete p.hideFilterInput),i.customFilterOptions[e.displayKey]=p}})},d.prototype.selectDefaultItem=function(i){if(i.defaultOption)this.defaultOption=i.defaultOption;else if(this.filterOptions.length>=1){var e=this.filterOptions[0];"string"==typeof e?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")},d.prototype.getDefaultOption=function(){return this.defaultOption},d.prototype.getCustomOption=function(i){return this.customFilterOptions[i]},d}(),Fa={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose One",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},$e=function(){function d(){}return d.BACKSPACE=8,d.TAB=9,d.ENTER=13,d.SHIFT=16,d.ESCAPE=27,d.SPACE=32,d.LEFT=37,d.UP=38,d.RIGHT=39,d.DOWN=40,d.DELETE=46,d.A=65,d.C=67,d.V=86,d.D=68,d.Z=90,d.Y=89,d.F2=113,d.PAGE_UP=33,d.PAGE_DOWN=34,d.PAGE_HOME=36,d.PAGE_END=35,d}(),Xv=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),k_=function(){return k_=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},k_.apply(this,arguments)},G_=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},zo=function(d){function i(e,s){void 0===s&&(s={});var l=d.call(this)||this;return l.eFocusableElement=e,l.callbacks=s,l.callbacks=k_({shouldStopEventPropagation:function(){return!1},onTabKeyDown:function(p){if(!p.defaultPrevented){var m=l.focusService.findNextFocusableElement(l.eFocusableElement,!1,p.shiftKey);!m||(m.focus(),p.preventDefault())}}},s),l}return Xv(i,d),i.prototype.postConstruct=function(){Tt(this.eFocusableElement,i.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)},i.prototype.addKeyDownListeners=function(e){var s=this;this.addManagedListener(e,"keydown",function(l){if(!l.defaultPrevented&&!xa(l)){if(s.callbacks.shouldStopEventPropagation(l))return void oo(l);l.keyCode===$e.TAB?s.callbacks.onTabKeyDown(l):s.callbacks.handleKeyDown&&s.callbacks.handleKeyDown(l)}})},i.FOCUS_MANAGED_CLASS="ag-focus-managed",G_([B("focusService")],i.prototype,"focusService",void 0),G_([Qe],i.prototype,"postConstruct",null),i}(Ye),Kf=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Gi=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Eo=function(d){function i(e){var s=d.call(this)||this;return s.filterNameKey=e,s.applyActive=!1,s.hidePopup=null,s.appliedModel=null,s}return Kf(i,d),i.prototype.postConstruct=function(){this.resetTemplate(),this.createManagedBean(new zo(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)}))},i.prototype.handleKeyDown=function(e){},i.prototype.getFilterTitle=function(){return this.translate(this.filterNameKey)},i.prototype.onFilterChanged=function(){console.warn("AG Grid: you should not call onFilterChanged() directly on the filter, please call\n        gridApi.onFilterChanged() instead. onFilterChanged is not part of the exposed filter interface (it was\n        a method that existed on an old version of the filters that was not intended for public use."),this.providedFilterParams.filterChangedCallback()},i.prototype.isFilterActive=function(){return!!this.appliedModel},i.prototype.resetTemplate=function(e){var s='\n            <div class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-'+this.getCssIdentifier()+'-body-wrapper">\n                    '+this.createBodyTemplate()+"\n                </div>\n            </div>";this.setTemplate(s,e)},i.prototype.isReadOnly=function(){return!!this.providedFilterParams.readOnly},i.prototype.init=function(e){var s=this;this.setParams(e),this.resetUiToDefaults(!0).then(function(){s.updateUiVisibility(),s.setupOnBtApplyDebounce()})},i.prototype.setParams=function(e){i.checkForDeprecatedParams(e),this.providedFilterParams=e,this.newRowsActionKeep="keep"===e.newRowsAction||"clear"!==e.newRowsAction&&[ce.ROW_MODEL_TYPE_SERVER_SIDE,ce.ROW_MODEL_TYPE_INFINITE].indexOf(this.rowModel.getType())>=0,this.applyActive=i.isUseApplyButton(e),this.createButtonPanel()},i.prototype.createButtonPanel=function(){var e=this,s=this.providedFilterParams.buttons;if(!(!s||s.length<1||this.isReadOnly())){var l=document.createElement("div");Tt(l,"ag-filter-apply-panel"),Yv(s).forEach(function(p){return function(m){var w,x;switch(m){case"apply":w=e.translate("applyFilter"),x=function(U){return e.onBtApply(!1,!1,U)};break;case"clear":w=e.translate("clearFilter"),x=function(){return e.onBtClear()};break;case"reset":w=e.translate("resetFilter"),x=function(){return e.onBtReset()};break;case"cancel":w=e.translate("cancelFilter"),x=function(U){e.onBtCancel(U)};break;default:return void console.warn("Unknown button type specified")}var A=oa('<button\n                    type="button"\n                    ref="'+m+'FilterButton"\n                    class="ag-standard-button ag-filter-apply-panel-button"\n                >'+w+"\n                </button>");l.appendChild(A),e.addManagedListener(A,"click",x)}(p)}),this.getGui().appendChild(l)}},i.checkForDeprecatedParams=function(e){var s=e.buttons||[];if(!(s.length>0)){var l=e.applyButton,c=e.resetButton;e.clearButton&&(console.warn("AG Grid: as of AG Grid v23.2, filterParams.clearButton is deprecated. Please use filterParams.buttons instead"),s.push("clear")),c&&(console.warn("AG Grid: as of AG Grid v23.2, filterParams.resetButton is deprecated. Please use filterParams.buttons instead"),s.push("reset")),l&&(console.warn("AG Grid: as of AG Grid v23.2, filterParams.applyButton is deprecated. Please use filterParams.buttons instead"),s.push("apply")),e.apply&&(console.warn("AG Grid: as of AG Grid v21, filterParams.apply is deprecated. Please use filterParams.buttons instead"),s.push("apply")),e.buttons=s}},i.prototype.getDefaultDebounceMs=function(){return 0},i.prototype.setupOnBtApplyDebounce=function(){var e=i.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs());this.onBtApplyDebounce=Du(this.onBtApply.bind(this),e)},i.prototype.getModel=function(){return this.appliedModel},i.prototype.setModel=function(e){var s=this;return(e?this.setModelIntoUi(e):this.resetUiToDefaults()).then(function(){s.updateUiVisibility(),s.applyModel()})},i.prototype.onBtCancel=function(e){var s=this,l=this.getModel(),c=function(){s.onUiChanged(!1,"prevent"),s.providedFilterParams.closeOnApply&&s.close(e)};null!=l?this.setModelIntoUi(l).then(c):this.resetUiToDefaults().then(c)},i.prototype.onBtClear=function(){var e=this;this.resetUiToDefaults().then(function(){return e.onUiChanged()})},i.prototype.onBtReset=function(){this.onBtClear(),this.onBtApply()},i.prototype.applyModel=function(){var e=this.getModelFromUi();if(!this.isModelValid(e))return!1;var s=this.appliedModel;return this.appliedModel=e,!this.areModelsEqual(s,e)},i.prototype.isModelValid=function(e){return!0},i.prototype.onBtApply=function(e,s,l){void 0===e&&(e=!1),void 0===s&&(s=!1),this.applyModel()&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:s}),this.providedFilterParams.closeOnApply&&this.applyActive&&!e&&!s&&this.close(l)},i.prototype.onNewRowsLoaded=function(){var e=this;this.newRowsActionKeep||this.resetUiToDefaults().then(function(){return e.appliedModel=null})},i.prototype.close=function(e){if(this.hidePopup){var c,l=e&&e.key;("Enter"===l||"Space"===l)&&(c={keyboardEvent:e}),this.hidePopup(c),this.hidePopup=null}},i.prototype.isNewRowsActionKeep=function(){return this.newRowsActionKeep},i.prototype.onUiChanged=function(e,s){if(void 0===e&&(e=!1),this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly){var l=this.isModelValid(this.getModelFromUi());ps(this.getRefElement("applyFilterButton"),!l)}e&&!s||"immediately"===s?this.onBtApply(e):(!this.applyActive&&!s||"debounce"===s)&&this.onBtApplyDebounce()},i.prototype.afterGuiAttached=function(e){null!=e&&(this.hidePopup=e.hidePopup)},i.getDebounceMs=function(e,s){return i.isUseApplyButton(e)?(null!=e.debounceMs&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):null!=e.debounceMs?e.debounceMs:s},i.isUseApplyButton=function(e){return i.checkForDeprecatedParams(e),!!e.buttons&&e.buttons.indexOf("apply")>=0},i.prototype.destroy=function(){this.hidePopup=null,d.prototype.destroy.call(this)},i.prototype.translate=function(e){return this.gridOptionsWrapper.getLocaleTextFunc()(e,Fa[e])},i.prototype.getCellValue=function(e){return this.providedFilterParams.valueGetter(e)},Gi([B("rowModel")],i.prototype,"rowModel",void 0),Gi([Qe],i.prototype,"postConstruct",null),i}(dn),B_=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),aa=function(d){function i(e,s){var l=d.call(this,s)||this;return l.labelSeparator="",l.labelAlignment="left",l.label="",l.config=e||{},l}return B_(i,d),i.prototype.postConstruct=function(){Tt(this.getGui(),"ag-labeled"),Tt(this.eLabel,"ag-label");var e=this.config,s=e.labelSeparator,l=e.label,c=e.labelWidth,p=e.labelAlignment;null!=s&&this.setLabelSeparator(s),null!=l&&this.setLabel(l),null!=c&&this.setLabelWidth(c),this.setLabelAlignment(p||this.labelAlignment),this.refreshLabel()},i.prototype.refreshLabel=function(){ao(this.eLabel),"string"==typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(Tt(this.eLabel,"ag-hidden"),ji(this.eLabel,"presentation")):(gi(this.eLabel,"ag-hidden"),ji(this.eLabel,null))},i.prototype.setLabelSeparator=function(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this},i.prototype.getLabelId=function(){return this.eLabel.id=this.eLabel.id||"ag-"+this.getCompId()+"-label",this.eLabel.id},i.prototype.getLabel=function(){return this.label},i.prototype.setLabel=function(e){return this.label===e||(this.label=e,this.refreshLabel()),this},i.prototype.setLabelAlignment=function(e){var s=this.getGui();return Lt(s,"ag-label-align-left","left"===e),Lt(s,"ag-label-align-right","right"===e),Lt(s,"ag-label-align-top","top"===e),this},i.prototype.setLabelWidth=function(e){return null==this.label||Nr(this.eLabel,e),this},function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Qe],i.prototype,"postConstruct",null),i}(dn),ub=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),sa=function(d){function i(e,s,l){var c=d.call(this,e,s)||this;return c.className=l,c.disabled=!1,c}return ub(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this),this.className&&Tt(this.getGui(),this.className)},i.prototype.onValueChange=function(e){var s=this;return this.addManagedListener(this,i.EVENT_CHANGED,function(){return e(s.getValue())}),this},i.prototype.getWidth=function(){return this.getGui().clientWidth},i.prototype.setWidth=function(e){return Ma(this.getGui(),e),this},i.prototype.getPreviousValue=function(){return this.previousValue},i.prototype.getValue=function(){return this.value},i.prototype.setValue=function(e,s){return this.value===e||(this.previousValue=this.value,this.value=e,s||this.dispatchEvent({type:i.EVENT_CHANGED})),this},i.prototype.setDisabled=function(e){e=!!e;var s=this.getGui();return ps(s,e),Lt(s,"ag-disabled",e),this.disabled=e,this},i.prototype.isDisabled=function(){return!!this.disabled},i.EVENT_CHANGED="valueChange",i}(aa),lb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),$f=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Xf=function(d){function i(e,s,l,c){var p=d.call(this,e,'<div class="ag-picker-field" role="presentation">\n                <div ref="eLabel"></div>\n                <div ref="eWrapper"\n                    class="ag-wrapper ag-picker-field-wrapper"\n                    tabIndex="-1"\n                    '+(c?'aria-haspopup="'+c+'"':"")+'\n                >\n                    <div ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',s)||this;return p.pickerIcon=l,p.isPickerDisplayed=!1,p.isDestroyingPicker=!1,p.skipClick=!1,p}return lb(i,d),i.prototype.postConstruct=function(){var e=this;d.prototype.postConstruct.call(this);var s=this.getCompId()+"-display";this.eDisplayField.setAttribute("id",s),fo(this.eWrapper,s);var l=function(){e.skipClick?e.skipClick=!1:e.isDisabled()||(e.pickerComponent=e.showPicker())},c=this.getGui();if(this.addManagedListener(c,"mousedown",function(m){!e.skipClick&&e.pickerComponent&&e.pickerComponent.isAlive()&&Al(e.pickerComponent.getGui())&&c.contains(m.target)&&(e.skipClick=!0)}),this.addManagedListener(c,"keydown",function(m){switch(m.keyCode){case $e.UP:case $e.DOWN:case $e.ENTER:case $e.SPACE:l();case $e.ESCAPE:e.isPickerDisplayed&&m.preventDefault()}}),this.addManagedListener(this.eWrapper,"click",l),this.addManagedListener(this.eLabel,"click",l),this.pickerIcon){var p=oi(this.pickerIcon,this.gridOptionsWrapper);p&&this.eIcon.appendChild(p)}},i.prototype.refreshLabel=function(){Le(this.getLabel())?Ol(this.eWrapper,this.getLabelId()):this.eWrapper.removeAttribute("aria-labelledby"),d.prototype.refreshLabel.call(this)},i.prototype.setAriaLabel=function(e){return Ia(this.eWrapper,e),this},i.prototype.setInputWidth=function(e){return Nr(this.eWrapper,e),this},i.prototype.getFocusableElement=function(){return this.eWrapper},$f([Be("eLabel")],i.prototype,"eLabel",void 0),$f([Be("eWrapper")],i.prototype,"eWrapper",void 0),$f([Be("eDisplayField")],i.prototype,"eDisplayField",void 0),$f([Be("eIcon")],i.prototype,"eIcon",void 0),i}(sa),Jv=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Jf=function(d){function i(e){void 0===e&&(e="default");var s=d.call(this,'<div class="ag-list ag-'+e+'-list" role="listbox"></div>')||this;return s.cssIdentifier=e,s.options=[],s.itemEls=[],s}return Jv(i,d),i.prototype.init=function(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))},i.prototype.handleKeyDown=function(e){var s=e.keyCode;switch(s){case $e.ENTER:if(this.highlightedEl){var l=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(l)}else this.setValue(this.getValue());break;case $e.DOWN:case $e.UP:var c=s===$e.DOWN,p=void 0;if(e.preventDefault(),this.highlightedEl){var w=this.itemEls.indexOf(this.highlightedEl)+(c?1:-1);w=Math.min(Math.max(w,0),this.itemEls.length-1),p=this.itemEls[w]}else p=this.itemEls[c?0:this.itemEls.length-1];this.highlightItem(p)}},i.prototype.addOptions=function(e){var s=this;return e.forEach(function(l){return s.addOption(l)}),this},i.prototype.addOption=function(e){var s=e.value,c=ra(e.text||s);return this.options.push({value:s,text:c}),this.renderOption(s,c),this},i.prototype.renderOption=function(e,s){var l=this,c=document.createElement("div");ji(c,"option"),Tt(c,"ag-list-item"),Tt(c,"ag-"+this.cssIdentifier+"-list-item"),c.innerHTML="<span>"+s+"</span>",c.tabIndex=-1,this.itemEls.push(c),this.addManagedListener(c,"mouseover",function(){return l.highlightItem(c)}),this.addManagedListener(c,"mouseleave",function(){return l.clearHighlighted()}),this.addManagedListener(c,"click",function(){return l.setValue(e)}),this.getGui().appendChild(c)},i.prototype.setValue=function(e,s){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(),this;var l=nt(this.options,function(p){return p.value===e});if(-1!==l){var c=this.options[l];this.value=c.value,this.displayValue=null!=c.text?c.text:c.value,this.highlightItem(this.itemEls[l]),s||this.fireChangeEvent()}return this},i.prototype.setValueByIndex=function(e){return this.setValue(this.options[e].value)},i.prototype.getValue=function(){return this.value},i.prototype.getDisplayValue=function(){return this.displayValue},i.prototype.refreshHighlighted=function(){var e=this;this.clearHighlighted();var s=nt(this.options,function(l){return l.value===e.value});-1!==s&&this.highlightItem(this.itemEls[s])},i.prototype.reset=function(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()},i.prototype.highlightItem=function(e){!e.offsetParent||(this.clearHighlighted(),this.highlightedEl=e,Tt(this.highlightedEl,i.ACTIVE_CLASS),Jc(this.highlightedEl,!0),this.highlightedEl.focus())},i.prototype.clearHighlighted=function(){!this.highlightedEl||!this.highlightedEl.offsetParent||(gi(this.highlightedEl,i.ACTIVE_CLASS),Jc(this.highlightedEl,!1),this.highlightedEl=null)},i.prototype.fireChangeEvent=function(){this.dispatchEvent({type:sa.EVENT_CHANGED}),this.fireItemSelected()},i.prototype.fireItemSelected=function(){this.dispatchEvent({type:i.EVENT_ITEM_SELECTED})},i.EVENT_ITEM_SELECTED="selectedItem",i.ACTIVE_CLASS="ag-active-item",function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Qe],i.prototype,"init",null),i}(dn),cb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Zv=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ll=function(d){function i(e){return d.call(this,e,"ag-select","smallDown","listbox")||this}return cb(i,d),i.prototype.init=function(){var e=this;this.listComponent=this.createBean(new Jf("select")),this.listComponent.setParentComponent(this),this.eWrapper.tabIndex=0,this.listComponent.addManagedListener(this.listComponent,Jf.EVENT_ITEM_SELECTED,function(){e.hideList&&e.hideList()}),this.listComponent.addManagedListener(this.listComponent,sa.EVENT_CHANGED,function(){e.setValue(e.listComponent.getValue(),!1,!0),e.hideList&&e.hideList()})},i.prototype.showPicker=function(){var e=this,s=this.listComponent.getGui(),l=this.addManagedListener(document.body,"wheel",function(w){!s.contains(w.target)&&e.hideList&&e.hideList()}),c=this.addManagedListener(s,"focusout",function(w){!s.contains(w.relatedTarget)&&e.hideList&&e.hideList()}),p=this.gridOptionsWrapper.getLocaleTextFunc(),m=this.popupService.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:function(){e.hideList=null,e.isPickerDisplayed=!1,c(),l(),e.isAlive()&&e.getFocusableElement().focus()},ariaLabel:p("ariaLabelSelectField","Select Field")});return m&&(this.hideList=m.hideFunc),this.isPickerDisplayed=!0,Nr(s,Wf(this.eWrapper)),s.style.maxHeight=Rl(this.popupService.getPopupParent())+"px",s.style.position="absolute",this.popupService.positionPopupUnderComponent({type:"ag-list",eventSource:this.eWrapper,ePopup:s,keepWithinBounds:!0}),this.listComponent.refreshHighlighted(),this.listComponent},i.prototype.addOptions=function(e){var s=this;return e.forEach(function(l){return s.addOption(l)}),this},i.prototype.addOption=function(e){return this.listComponent.addOption(e),this},i.prototype.setValue=function(e,s,l){return this.value===e?this:(l||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),d.prototype.setValue.call(this,e,s)))},i.prototype.destroy=function(){this.hideList&&this.hideList(),this.destroyBean(this.listComponent),d.prototype.destroy.call(this)},Zv([B("popupService")],i.prototype,"popupService",void 0),Zv([Qe],i.prototype,"init",null),i}(Xf),V_=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Zf=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Na=function(d){function i(e,s,l,c){void 0===l&&(l="text"),void 0===c&&(c="input");var p=d.call(this,e,'\n            <div role="presentation">\n                <div ref="eLabel" class="ag-input-field-label"></div>\n                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <'+c+' ref="eInput" class="ag-input-field-input"></'+c+">\n                </div>\n            </div>",s)||this;return p.inputType=l,p.displayFieldTag=c,p}return V_(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this),this.setInputType(),Tt(this.eLabel,this.className+"-label"),Tt(this.eWrapper,this.className+"-input-wrapper"),Tt(this.eInput,this.className+"-input"),Tt(this.getGui(),"ag-input-field"),this.eInput.id=this.eInput.id||"ag-"+this.getCompId()+"-input";var e=this.config,s=e.width,l=e.value;null!=s&&this.setWidth(s),null!=l&&this.setValue(l),this.addInputListeners()},i.prototype.refreshLabel=function(){Le(this.getLabel())?Ol(this.eInput,this.getLabelId()):this.eInput.removeAttribute("aria-labelledby"),d.prototype.refreshLabel.call(this)},i.prototype.addInputListeners=function(){var e=this;this.addManagedListener(this.eInput,"input",function(s){return e.setValue(s.target.value)})},i.prototype.setInputType=function(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)},i.prototype.getInputElement=function(){return this.eInput},i.prototype.setInputWidth=function(e){return Nr(this.eWrapper,e),this},i.prototype.setInputName=function(e){return this.getInputElement().setAttribute("name",e),this},i.prototype.getFocusableElement=function(){return this.eInput},i.prototype.setMaxLength=function(e){return this.eInput.maxLength=e,this},i.prototype.setInputPlaceholder=function(e){return vs(this.eInput,"placeholder",e),this},i.prototype.setInputAriaLabel=function(e){return Ia(this.eInput,e),this},i.prototype.setDisabled=function(e){return ps(this.eInput,e),d.prototype.setDisabled.call(this,e)},Zf([Be("eLabel")],i.prototype,"eLabel",void 0),Zf([Be("eWrapper")],i.prototype,"eWrapper",void 0),Zf([Be("eInput")],i.prototype,"eInput",void 0),i}(sa),W_=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ka=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},yi=function(){return function(d){d[d.One=0]="One",d[d.Two=1]="Two"}(yi||(yi={})),yi}(),Yi=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return W_(i,d),i.prototype.getNumberOfInputs=function(e){var s=this.optionsFactory.getCustomOption(e);if(s){var l=s.numberOfInputs;return null!=l?l:1}return e===i.EMPTY?0:e===i.IN_RANGE?2:1},i.prototype.onFloatingFilterChanged=function(e,s){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(s),this.onUiChanged(!0)},i.prototype.setTypeFromFloatingFilter=function(e){this.eType1.setValue(e),this.eType2.setValue(this.optionsFactory.getDefaultOption()),(this.isDefaultOperator("AND")?this.eJoinOperatorAnd:this.eJoinOperatorOr).setValue(!0)},i.prototype.getModelFromUi=function(){return this.isConditionUiComplete(yi.One)?this.isAllowTwoConditions()&&this.isConditionUiComplete(yi.Two)?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:this.createCondition(yi.One),condition2:this.createCondition(yi.Two)}:this.createCondition(yi.One):null},i.prototype.getConditionTypes=function(){return[this.eType1.getValue(),this.eType2.getValue()]},i.prototype.getJoinOperator=function(){return!0===this.eJoinOperatorOr.getValue()?"OR":"AND"},i.prototype.areModelsEqual=function(e,s){if(!e&&!s)return!0;if(!e&&s||e&&!s)return!1;var m,l=!e.operator,c=!s.operator;if(!l&&c||l&&!c)return!1;if(l)m=this.areSimpleModelsEqual(e,s);else{var A=e,I=s;m=A.operator===I.operator&&this.areSimpleModelsEqual(A.condition1,I.condition1)&&this.areSimpleModelsEqual(A.condition2,I.condition2)}return m},i.prototype.setModelIntoUi=function(e){if(e.operator){var l=e,c="OR"===l.operator;this.eJoinOperatorAnd.setValue(!c),this.eJoinOperatorOr.setValue(c),this.eType1.setValue(l.condition1.type),this.eType2.setValue(l.condition2.type),this.setConditionIntoUi(l.condition1,yi.One),this.setConditionIntoUi(l.condition2,yi.Two)}else{var p=e;this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND")),this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR")),this.eType1.setValue(p.type),this.eType2.setValue(this.optionsFactory.getDefaultOption()),this.setConditionIntoUi(p,yi.One),this.setConditionIntoUi(null,yi.Two)}return Xr.resolve()},i.prototype.doesFilterPass=function(e){var s=this,l=this.getModel();if(null==l)return!0;var c=l.operator,p=[];return c?p.push(l.condition1,l.condition2):p.push(l),(c&&"OR"===c?Yt:en)(p,function(x){return s.individualConditionPasses(e,x)})},i.prototype.setParams=function(e){d.prototype.setParams.call(this,e),this.optionsFactory=new Pl,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.allowTwoConditions=!e.suppressAndOrCondition,this.alwaysShowBothConditions=!!e.alwaysShowBothConditions,this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.putOptionsIntoDropdown(),this.addChangedListeners()},i.prototype.getDefaultJoinOperator=function(e){return bn(["AND","OR"],e)?e:"AND"},i.prototype.putOptionsIntoDropdown=function(){var e=this,s=this.optionsFactory.getFilterOptions(),l=[this.eType1,this.eType2];Vt(s,function(c){var p="string"==typeof c?e.createBoilerplateListOption(c):e.createCustomListOption(c);Vt(l,function(m){return m.addOption(p)})}),Vt(l,function(c){return c.setDisabled(s.length<=1)})},i.prototype.createBoilerplateListOption=function(e){return{value:e,text:this.translate(e)}},i.prototype.createCustomListOption=function(e){var s=e.displayKey,l=this.optionsFactory.getCustomOption(e.displayKey);return{value:s,text:l?this.gridOptionsWrapper.getLocaleTextFunc()(l.displayKey,l.displayName):this.translate(s)}},i.prototype.isAllowTwoConditions=function(){return this.allowTwoConditions},i.prototype.createBodyTemplate=function(){return'\n            <ag-select class="ag-filter-select" ref="eOptions1"></ag-select>\n            '+this.createValueTemplate(yi.One)+'\n            <div class="ag-filter-condition" ref="eJoinOperatorPanel">\n               <ag-radio-button ref="eJoinOperatorAnd" class="ag-filter-condition-operator ag-filter-condition-operator-and"></ag-radio-button>\n               <ag-radio-button ref="eJoinOperatorOr" class="ag-filter-condition-operator ag-filter-condition-operator-or"></ag-radio-button>\n            </div>\n            <ag-select class="ag-filter-select" ref="eOptions2"></ag-select>\n            '+this.createValueTemplate(yi.Two)},i.prototype.getCssIdentifier=function(){return"simple-filter"},i.prototype.updateUiVisibility=function(){var e=this,l=[this.eCondition1Body,this.eCondition2Body];Vt([[this.eType1],[this.eType2,this.eJoinOperatorPanel,this.eJoinOperatorAnd,this.eJoinOperatorOr]],function(c,p){var m=e.isConditionVisible(p),w=e.isConditionDisabled(p);Vt(c,function(x){x instanceof Na||x instanceof Ll?(x.setDisabled(w),x.setDisplayed(m)):(ps(x,w),jn(x,m))})}),Vt(l,function(c,p){jn(c,e.isConditionBodyVisible(p))}),this.forEachInput(function(c,p,m,w){e.setElementDisplayed(c,p<w),e.setElementDisabled(c,e.isConditionDisabled(m))}),this.resetPlaceholder()},i.prototype.afterGuiAttached=function(e){if(d.prototype.afterGuiAttached.call(this,e),this.resetPlaceholder(),!e||!e.suppressFocus&&!this.isReadOnly()){var s=this.getInputs()[0][0];if(!s)return;s instanceof Na&&s.getInputElement().focus()}},i.prototype.resetPlaceholder=function(){var e=this,s=this.gridOptionsWrapper.getLocaleTextFunc();this.forEachInput(function(l,c,p,m){if(l instanceof Na){var w=0===c&&m>1?"inRangeStart":0===c?"filterOoo":"inRangeEnd",x=0===c&&m>1?s("ariaFilterFromValue","Filter from value"):0===c?s("ariaFilterValue","Filter Value"):s("ariaFilterToValue","Filter to Value");l.setInputPlaceholder(e.translate(w)),l.setInputAriaLabel(x)}})},i.prototype.setElementValue=function(e,s,l){e instanceof Na&&e.setValue(s?String(s):null,l)},i.prototype.setElementDisplayed=function(e,s){e instanceof dn&&jn(e.getGui(),s)},i.prototype.setElementDisabled=function(e,s){e instanceof dn&&ps(e.getGui(),s)},i.prototype.attachElementOnChange=function(e,s){e instanceof Na&&e.onValueChange(s)},i.prototype.forEachInput=function(e){var s=this,l=this.getInputs();this.getConditionTypes().forEach(function(c,p){for(var m=s.getNumberOfInputs(c),w=0;w<l[p].length;w++){var x=l[p][w];null!=x&&e(x,w,p,m)}})},i.prototype.isConditionVisible=function(e){return 0===e||!!this.allowTwoConditions&&(this.isReadOnly()?this.isConditionUiComplete(e):!!this.alwaysShowBothConditions||this.isConditionUiComplete(e-1))},i.prototype.isConditionDisabled=function(e){return!(!this.isReadOnly()&&this.isConditionVisible(e))||0!==e&&!this.isConditionUiComplete(e-1)},i.prototype.isConditionBodyVisible=function(e){if(!this.isConditionVisible(e))return!1;var s=this.getConditionTypes()[e];return this.getNumberOfInputs(s)>0},i.prototype.isConditionUiComplete=function(e){return!(this.getConditionTypes()[e]===i.EMPTY||yt.some(this.getValues(e),function(l){return null==l}))},i.prototype.resetUiToDefaults=function(e){var s=this,c=this.gridOptionsWrapper.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator"),p="ag-simple-filter-and-or-"+this.getCompId(),m=this.optionsFactory.getDefaultOption();return this.eType1.setValue(m,e).setAriaLabel(c).setDisabled(this.isReadOnly()),this.eType2.setValue(this.optionsFactory.getDefaultOption(),e).setAriaLabel(c).setDisabled(this.isReadOnly()),this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND"),e).setName(p).setLabel(this.translate("andCondition")).setDisabled(this.isReadOnly()),this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR"),e).setName(p).setLabel(this.translate("orCondition")).setDisabled(this.isReadOnly()),this.forEachInput(function(w){s.setElementValue(w,null,e),s.setElementDisabled(w,s.isReadOnly())}),this.resetPlaceholder(),Xr.resolve()},i.prototype.setConditionIntoUi=function(e,s){var l=this,c=this.mapValuesFromModel(e);this.forEachInput(function(p,m,w,x){w===s&&l.setElementValue(p,c[m]?c[m]:null)})},i.prototype.setValueFromFloatingFilter=function(e){var s=this;this.forEachInput(function(l,c,p,m){s.setElementValue(l,0===c&&0===p?e:null)})},i.prototype.isDefaultOperator=function(e){return e===this.defaultJoinOperator},i.prototype.addChangedListeners=function(){var e=this;if(!this.isReadOnly()){var s=function(){return e.onUiChanged()};this.eType1.onValueChange(s),this.eType2.onValueChange(s),this.eJoinOperatorOr.onValueChange(s),this.eJoinOperatorAnd.onValueChange(s),this.forEachInput(function(l){e.attachElementOnChange(l,s)})}},i.prototype.individualConditionPasses=function(e,s){var l=this.getCellValue(e.node),c=this.mapValuesFromModel(s),p=this.optionsFactory.getCustomOption(s.type),m=this.evaluateCustomFilter(p,c,l);return null!=m?m:null==l?this.evaluateNullValue(s.type):this.evaluateNonNullValue(c,l,s)},i.prototype.evaluateCustomFilter=function(e,s,l){if(null!=e){var c=e.predicate;if(null!=c&&!yt.some(s,function(p){return null==p}))return c(s,l)}},i.EMPTY="empty",i.EQUALS="equals",i.NOT_EQUAL="notEqual",i.LESS_THAN="lessThan",i.LESS_THAN_OR_EQUAL="lessThanOrEqual",i.GREATER_THAN="greaterThan",i.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",i.IN_RANGE="inRange",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.STARTS_WITH="startsWith",i.ENDS_WITH="endsWith",ka([Be("eOptions1")],i.prototype,"eType1",void 0),ka([Be("eOptions2")],i.prototype,"eType2",void 0),ka([Be("eJoinOperatorPanel")],i.prototype,"eJoinOperatorPanel",void 0),ka([Be("eJoinOperatorAnd")],i.prototype,"eJoinOperatorAnd",void 0),ka([Be("eJoinOperatorOr")],i.prototype,"eJoinOperatorOr",void 0),ka([Be("eCondition1Body")],i.prototype,"eCondition1Body",void 0),ka([Be("eCondition2Body")],i.prototype,"eCondition2Body",void 0),i}(Eo),Ki=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),br=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Ki(i,d),i.prototype.setParams=function(e){d.prototype.setParams.call(this,e),this.scalarFilterParams=e,this.checkDeprecatedParams()},i.prototype.checkDeprecatedParams=function(){this.scalarFilterParams.nullComparator&&(console.warn("AG Grid: Since v21.0, the property filterParams.nullComparator is deprecated. Please use filterParams.includeBlanksInEquals, filterParams.includeBlanksInLessThan and filterParams.includeBlanksInGreaterThan instead."),this.scalarFilterParams.includeBlanksInEquals=this.scalarFilterParams.nullComparator.equals,this.scalarFilterParams.includeBlanksInLessThan=this.scalarFilterParams.nullComparator.lessThan,this.scalarFilterParams.includeBlanksInGreaterThan=this.scalarFilterParams.nullComparator.greaterThan)},i.prototype.evaluateNullValue=function(e){switch(e){case i.EQUALS:case i.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case i.GREATER_THAN:case i.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case i.LESS_THAN:case i.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case i.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0}return!1},i.prototype.evaluateNonNullValue=function(e,s,l){var c=this.comparator(),p=c(e[0],s);switch(l.type){case i.EQUALS:return 0===p;case i.NOT_EQUAL:return 0!==p;case i.GREATER_THAN:return p>0;case i.GREATER_THAN_OR_EQUAL:return p>=0;case i.LESS_THAN:return p<0;case i.LESS_THAN_OR_EQUAL:return p<=0;case i.IN_RANGE:var m=c(e[1],s);return this.scalarFilterParams.inRangeInclusive?p>=0&&m<=0:p>0&&m<0;default:return console.warn('AG Grid: Unexpected type of filter "'+l.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}},i}(Yi),xr=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Qf=function(){return Qf=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Qf.apply(this,arguments)},td=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Qv=function(d){function i(){var e=d.call(this,"dateFilter")||this;return e.minValidYear=1e3,e.maxValidYear=1/0,e}return xr(i,d),i.prototype.afterGuiAttached=function(e){d.prototype.afterGuiAttached.call(this,e),this.dateCondition1FromComp.afterGuiAttached(e)},i.prototype.mapValuesFromModel=function(e){var s=e||{},l=s.dateFrom,c=s.dateTo,p=s.type;return[l&&gs(l)||null,c&&gs(c)||null].slice(0,this.getNumberOfInputs(p))},i.prototype.comparator=function(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)},i.prototype.defaultComparator=function(e,s){return null==s||s<e?-1:s>e?1:0},i.prototype.setParams=function(e){d.prototype.setParams.call(this,e),this.dateFilterParams=e;var s=function(c,p){if(null!=e[c]){if(!isNaN(e[c]))return null==e[c]?p:Number(e[c]);console.warn("AG Grid: DateFilter "+c+" is not a number")}return p};this.minValidYear=s("minValidYear",1e3),this.maxValidYear=s("maxValidYear",1/0),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),this.createDateComponents()},i.prototype.createDateComponents=function(){var e=this,s=function(c){return new Gr(e.getContext(),e.userComponentFactory,{onDateChanged:function(){return e.onUiChanged()},filterParams:e.dateFilterParams},c)};this.dateCondition1FromComp=s(this.eCondition1PanelFrom),this.dateCondition1ToComp=s(this.eCondition1PanelTo),this.dateCondition2FromComp=s(this.eCondition2PanelFrom),this.dateCondition2ToComp=s(this.eCondition2PanelTo),this.addDestroyFunc(function(){e.forEachInput(function(l){return l.destroy()})})},i.prototype.setElementValue=function(e,s,l){e.setDate(s)},i.prototype.setElementDisplayed=function(e,s){e.setDisplayed(s)},i.prototype.setElementDisabled=function(e,s){e.setDisabled(s)},i.prototype.getDefaultFilterOptions=function(){return i.DEFAULT_FILTER_OPTIONS},i.prototype.createValueTemplate=function(e){var s=e===yi.One?"1":"2";return'\n            <div class="ag-filter-body" ref="eCondition'+s+'Body">\n                <div class="ag-filter-from ag-filter-date-from" ref="eCondition'+s+'PanelFrom"></div>\n                <div class="ag-filter-to ag-filter-date-to" ref="eCondition'+s+'PanelTo"></div>\n            </div>'},i.prototype.isConditionUiComplete=function(e){var s=this;if(!d.prototype.isConditionUiComplete.call(this,e))return!1;var c=!0;return this.forEachInput(function(p,m,w,x){w!==e||!c||m>=x||(c=c&&function(m){return null!=m&&m.getUTCFullYear()>=s.minValidYear&&m.getUTCFullYear()<=s.maxValidYear}(p.getDate()))}),c},i.prototype.areSimpleModelsEqual=function(e,s){return e.dateFrom===s.dateFrom&&e.dateTo===s.dateTo&&e.type===s.type},i.prototype.getFilterType=function(){return"date"},i.prototype.createCondition=function(e){var s=this.getConditionTypes()[e],l={},c=this.getValues(e);return c.length>0&&(l.dateFrom=Fu(c[0])),c.length>1&&(l.dateTo=Fu(c[1])),Qf({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:s},l)},i.prototype.resetPlaceholder=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),s=this.translate("dateFormatOoo"),l=e("ariaFilterValue","Filter Value");this.forEachInput(function(c){c.setInputPlaceholder(s),c.setInputAriaLabel(l)})},i.prototype.getInputs=function(){return[[this.dateCondition1FromComp,this.dateCondition1ToComp],[this.dateCondition2FromComp,this.dateCondition2ToComp]]},i.prototype.getValues=function(e){var s=[];return this.forEachInput(function(l,c,p,m){e===p&&c<m&&s.push(l.getDate())}),s},i.DEFAULT_FILTER_OPTIONS=[br.EQUALS,br.GREATER_THAN,br.LESS_THAN,br.NOT_EQUAL,br.IN_RANGE],td([Be("eCondition1PanelFrom")],i.prototype,"eCondition1PanelFrom",void 0),td([Be("eCondition1PanelTo")],i.prototype,"eCondition1PanelTo",void 0),td([Be("eCondition2PanelFrom")],i.prototype,"eCondition2PanelFrom",void 0),td([Be("eCondition2PanelTo")],i.prototype,"eCondition2PanelTo",void 0),td([B("userComponentFactory")],i.prototype,"userComponentFactory",void 0),i}(br),db=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),nd=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return db(i,d),i.prototype.getDefaultDebounceMs=function(){return 0},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.getTextFromModel=function(e){if(!e)return null;if(null!=e.operator){var l=e,c=l||{},p=c.condition1,m=c.condition2,w=this.optionsFactory.getCustomOption(p.type),x=this.optionsFactory.getCustomOption(m.type);return[this.conditionToString(p,w),l.operator,this.conditionToString(m,x)].join(" ")}var A=e,I=this.optionsFactory.getCustomOption(A.type),U=I||{},Y=U.displayKey,Q=U.displayName;return Y&&Q&&0===U.numberOfInputs?(this.gridOptionsWrapper.getLocaleTextFunc()(Y,Q),Q):this.conditionToString(A,I)},i.prototype.isEventFromFloatingFilter=function(e){return e&&e.afterFloatingFilter},i.prototype.getLastType=function(){return this.lastType},i.prototype.isReadOnly=function(){return this.readOnly},i.prototype.setLastTypeFromModel=function(e){e?this.lastType=(e.operator?e.condition1:e).type:this.lastType=this.optionsFactory.getDefaultOption()},i.prototype.canWeEditAfterModelFromParentFilter=function(e){return e?!e.operator&&this.isTypeEditable(e.type):this.isTypeEditable(this.lastType)},i.prototype.init=function(e){this.optionsFactory=new Pl,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),this.lastType=this.optionsFactory.getDefaultOption(),this.readOnly=!!e.filterParams.readOnly;var s=this.isTypeEditable(this.lastType);this.setEditable(s)},i.prototype.doesFilterHaveSingleInput=function(e){var l=(this.optionsFactory.getCustomOption(e)||{}).numberOfInputs;return null==l||1==l},i.prototype.isTypeEditable=function(e){return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&e!==Yi.IN_RANGE&&e!==Yi.EMPTY},i}(dn),ep=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Fl=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},eg=function(d){function i(){return d.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>\n                <div ref="eDateWrapper" style="display: flex;"></div>\n            </div>')||this}return ep(i,d),i.prototype.getDefaultFilterOptions=function(){return Qv.DEFAULT_FILTER_OPTIONS},i.prototype.conditionToString=function(e,s){var l=e.type,p=l==Yi.IN_RANGE||2===(s||{}).numberOfInputs,m=gs(e.dateFrom),w=gs(e.dateTo);return p?Fu(m,!1)+"-"+Fu(w,!1):null!=m?""+Fu(m,!1):""+l},i.prototype.init=function(e){d.prototype.init.call(this,e),this.params=e,this.createDateComponent();var s=this.gridOptionsWrapper.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(s("ariaDateFilterInput","Date Filter Input"))},i.prototype.setEditable=function(e){jn(this.eDateWrapper,e),jn(this.eReadOnlyText.getGui(),!e)},i.prototype.onParentModelChanged=function(e,s){if(!this.isEventFromFloatingFilter(s)){d.prototype.setLastTypeFromModel.call(this,e);var l=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);this.setEditable(l),l?(this.dateComp.setDate(e?gs(e.dateFrom):null),this.eReadOnlyText.setValue("")):(this.eReadOnlyText.setValue(this.getTextFromModel(e)),this.dateComp.setDate(null))}},i.prototype.onDateChanged=function(){var e=this,l=Fu(this.dateComp.getDate());this.params.parentFilterInstance(function(c){c&&c.onFloatingFilterChanged(e.getLastType(),gs(l))})},i.prototype.createDateComponent=function(){var e=this,s=Eo.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),l={onDateChanged:Du(this.onDateChanged.bind(this),s),filterParams:this.params.column.getColDef().filterParams};this.dateComp=new Gr(this.getContext(),this.userComponentFactory,l,this.eDateWrapper),this.addDestroyFunc(function(){return e.dateComp.destroy()})},Fl([B("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Fl([Be("eReadOnlyText")],i.prototype,"eReadOnlyText",void 0),Fl([Be("eDateWrapper")],i.prototype,"eDateWrapper",void 0),i}(nd),j_=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Zs=function(d){function i(){return d.call(this,'\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>\n            </div>')||this}return j_(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(e){var s=this,l=this.eDateInput.getInputElement();this.shouldUseBrowserDatePicker(e)&&(zi()?console.warn("ag-grid: browserDatePicker is specified to true, but it is not supported in IE 11; reverting to text date picker"):l.type="date"),this.addManagedListener(l,"mousedown",function(){s.eDateInput.isDisabled()||l.focus()}),this.addManagedListener(l,"input",function(w){w.target===document.activeElement&&(s.eDateInput.isDisabled()||e.onDateChanged())});var c=e.filterParams||{},p=c.minValidYear,m=c.maxValidYear;p&&(l.min=p+"-01-01"),m&&(l.max=m+"-12-31")},i.prototype.getDate=function(){return gs(this.eDateInput.getValue())},i.prototype.setDate=function(e){this.eDateInput.setValue(Fu(e,!1))},i.prototype.setInputPlaceholder=function(e){this.eDateInput.setInputPlaceholder(e)},i.prototype.setDisabled=function(e){this.eDateInput.setDisabled(e)},i.prototype.afterGuiAttached=function(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()},i.prototype.shouldUseBrowserDatePicker=function(e){return e.filterParams&&null!=e.filterParams.browserDatePicker?e.filterParams.browserDatePicker:qc()||Jt()},function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Be("eDateInput")],i.prototype,"eDateInput",void 0),i}(dn),rd=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),tp=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},tg=function(d){function i(){return d.call(this,"numberFilter")||this}return rd(i,d),i.prototype.mapValuesFromModel=function(e){var s=e||{};return[s.filter||null,s.filterTo||null].slice(0,this.getNumberOfInputs(s.type))},i.prototype.getDefaultDebounceMs=function(){return 500},i.prototype.comparator=function(){return function(e,s){return e===s?0:e<s?1:-1}},i.prototype.setParams=function(e){this.numberFilterParams=e;var s=this.getAllowedCharPattern();if(s){var l={allowedCharPattern:s};this.resetTemplate({eValueFrom1:l,eValueTo1:l,eValueFrom2:l,eValueTo2:l})}d.prototype.setParams.call(this,e)},i.prototype.getDefaultFilterOptions=function(){return i.DEFAULT_FILTER_OPTIONS},i.prototype.createValueTemplate=function(e){var s=e===yi.One?"1":"2",c=this.getAllowedCharPattern()?"ag-input-text-field":"ag-input-number-field";return'\n            <div class="ag-filter-body" ref="eCondition'+s+'Body" role="presentation">\n                <'+c+' class="ag-filter-from ag-filter-filter" ref="eValue-index0-'+s+'"></'+c+">\n                <"+c+' class="ag-filter-to ag-filter-filter" ref="eValue-index1-'+s+'"></'+c+">\n            </div>"},i.prototype.getValues=function(e){var s=this,l=[];return this.forEachInput(function(c,p,m,w){e===m&&p<w&&l.push(s.stringToFloat(c.getValue()))}),l},i.prototype.areSimpleModelsEqual=function(e,s){return e.filter===s.filter&&e.filterTo===s.filterTo&&e.type===s.type},i.prototype.getFilterType=function(){return"number"},i.prototype.stringToFloat=function(e){if("number"==typeof e)return e;var s=ze(e);return null!=s&&""===s.trim()&&(s=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(s):null==s||"-"===s.trim()?null:parseFloat(s)},i.prototype.createCondition=function(e){var s=this.getConditionTypes()[e],l={filterType:this.getFilterType(),type:s},c=this.getValues(e);return c.length>0&&(l.filter=c[0]),c.length>1&&(l.filterTo=c[1]),l},i.prototype.getInputs=function(){return[[this.eValueFrom1,this.eValueTo1],[this.eValueFrom2,this.eValueTo2]]},i.prototype.getAllowedCharPattern=function(){return(this.numberFilterParams||{}).allowedCharPattern||(qc()||bl()?null:"\\d\\-\\.")},i.DEFAULT_FILTER_OPTIONS=[br.EQUALS,br.NOT_EQUAL,br.LESS_THAN,br.LESS_THAN_OR_EQUAL,br.GREATER_THAN,br.GREATER_THAN_OR_EQUAL,br.IN_RANGE],tp([Be("eValue-index0-1")],i.prototype,"eValueFrom1",void 0),tp([Be("eValue-index1-1")],i.prototype,"eValueTo1",void 0),tp([Be("eValue-index0-2")],i.prototype,"eValueFrom2",void 0),tp([Be("eValue-index1-2")],i.prototype,"eValueTo2",void 0),i}(br),id=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Nl=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},np=function(d){function i(){return d.call(this,"textFilter")||this}return id(i,d),i.trimInput=function(e){var s=e&&e.trim();return""===s?e:s},i.prototype.getDefaultDebounceMs=function(){return 500},i.prototype.setParams=function(e){d.prototype.setParams.call(this,e),this.textFilterParams=e,this.comparator=this.textFilterParams.textCustomComparator||i.DEFAULT_COMPARATOR,this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?i.DEFAULT_FORMATTER:i.DEFAULT_LOWERCASE_FORMATTER)},i.prototype.createCondition=function(e){var s=this.getConditionTypes()[e],l={filterType:this.getFilterType(),type:s},c=this.getValues(e);return c.length>0&&(l.filter=c[0]),c.length>1&&(l.filterTo=c[1]),l},i.prototype.getFilterType=function(){return"text"},i.prototype.areSimpleModelsEqual=function(e,s){return e.filter===s.filter&&e.filterTo===s.filterTo&&e.type===s.type},i.prototype.getInputs=function(){return[[this.eValueFrom1,this.eValueTo1],[this.eValueFrom2,this.eValueTo2]]},i.prototype.getValues=function(e){var s=this,l=[];return this.forEachInput(function(c,p,m,w){if(e===m&&p<w){var x=ze(c.getValue()),A=(s.textFilterParams.trimInput?i.trimInput(x):x)||null;l.push(A),c.setValue(A,!0)}}),l},i.prototype.getDefaultFilterOptions=function(){return i.DEFAULT_FILTER_OPTIONS},i.prototype.createValueTemplate=function(e){var s=e===yi.One?"1":"2";return'\n            <div class="ag-filter-body" ref="eCondition'+s+'Body" role="presentation">\n                <ag-input-text-field class=".ag-filter-from ag-filter-filter" ref="eValue-index0-'+s+'"></ag-input-text-field>\n                <ag-input-text-field class="ag-filter-to ag-filter-filter" ref="eValue-index1-'+s+'"></ag-input-text-field>\n            </div>'},i.prototype.mapValuesFromModel=function(e){var s=e||{};return[s.filter||null,s.filterTo||null].slice(0,this.getNumberOfInputs(s.type))},i.prototype.evaluateNullValue=function(e){return e===Yi.NOT_EQUAL||e===Yi.NOT_CONTAINS},i.prototype.evaluateNonNullValue=function(e,s,l){var c=this,p=yt.map(e,function(w){return c.formatter(w)})||[],m=this.formatter(s);return yt.some(p,function(w){return c.comparator(l.type,m,w)})},i.DEFAULT_FILTER_OPTIONS=[Yi.CONTAINS,Yi.NOT_CONTAINS,Yi.EQUALS,Yi.NOT_EQUAL,Yi.STARTS_WITH,Yi.ENDS_WITH],i.DEFAULT_FORMATTER=function(e){return e},i.DEFAULT_LOWERCASE_FORMATTER=function(e){return null==e?null:e.toString().toLowerCase()},i.DEFAULT_COMPARATOR=function(e,s,l){switch(e){case i.CONTAINS:return s.indexOf(l)>=0;case i.NOT_CONTAINS:return s.indexOf(l)<0;case i.EQUALS:return s===l;case i.NOT_EQUAL:return s!=l;case i.STARTS_WITH:return 0===s.indexOf(l);case i.ENDS_WITH:var c=s.lastIndexOf(l);return c>=0&&c===s.length-l.length;default:return!1}},Nl([Be("eValue-index0-1")],i.prototype,"eValueFrom1",void 0),Nl([Be("eValue-index1-1")],i.prototype,"eValueTo1",void 0),Nl([Be("eValue-index0-2")],i.prototype,"eValueFrom2",void 0),Nl([Be("eValue-index1-2")],i.prototype,"eValueTo2",void 0),i}(Yi),pb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),q_=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},hb=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return pb(i,d),i.prototype.postConstruct=function(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterInput"></ag-input-text-field>\n            </div>')},i.prototype.getDefaultDebounceMs=function(){return 500},i.prototype.onParentModelChanged=function(e,s){this.isEventFromFloatingFilter(s)||(this.setLastTypeFromModel(e),this.eFloatingFilterInput.setValue(this.getTextFromModel(e)),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)))},i.prototype.init=function(e){if(d.prototype.init.call(this,e),this.params=e,this.applyActive=Eo.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){var s=Eo.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),l=Du(this.syncUpWithParentFilter.bind(this),s),c=this.eFloatingFilterInput.getGui();this.addManagedListener(c,"input",l),this.addManagedListener(c,"keypress",l),this.addManagedListener(c,"keydown",l)}var p=e.column.getDefinition();(this.isReadOnly()||p.filterParams&&p.filterParams.filterOptions&&1===p.filterParams.filterOptions.length&&"inRange"===p.filterParams.filterOptions[0])&&this.eFloatingFilterInput.setDisabled(!0);var m=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),w=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterInput.setInputAriaLabel(m+" "+w("ariaFilterInput","Filter Input"))},i.prototype.syncUpWithParentFilter=function(e){var s=this,l=Zc(e,$e.ENTER);if(!this.applyActive||l){var c=this.eFloatingFilterInput.getValue();this.params.filterParams.trimInput&&(c=np.trimInput(c),this.eFloatingFilterInput.setValue(c,!0)),this.params.parentFilterInstance(function(p){p&&p.onFloatingFilterChanged(s.getLastType(),c||null)})}},i.prototype.conditionToString=function(e,s){return e.type==Yi.IN_RANGE||2===(s||{}).numberOfInputs?e.filter+"-"+e.filterTo:null!=e.filter?""+e.filter:""+e.type},i.prototype.setEditable=function(e){this.eFloatingFilterInput.setDisabled(!e)},q_([B("columnModel")],i.prototype,"columnModel",void 0),q_([Be("eFloatingFilterInput")],i.prototype,"eFloatingFilterInput",void 0),q_([Qe],i.prototype,"postConstruct",null),i}(nd),rp=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Y_=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return rp(i,d),i.prototype.getDefaultFilterOptions=function(){return tg.DEFAULT_FILTER_OPTIONS},i}(hb),ng=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),od=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return ng(i,d),i.prototype.getDefaultFilterOptions=function(){return np.DEFAULT_FILTER_OPTIONS},i}(hb),bo=function(){function d(i,e){var s=this;void 0===e&&(e=!1),this.destroyFuncs=[],this.touching=!1,this.eventService=new qs,this.eElement=i,this.preventMouseClick=e;var l=this.onTouchStart.bind(this),c=this.onTouchMove.bind(this),p=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",l,{passive:!0}),this.eElement.addEventListener("touchmove",c,{passive:!0}),this.eElement.addEventListener("touchend",p,{passive:!1}),this.destroyFuncs.push(function(){s.eElement.removeEventListener("touchstart",l,{passive:!0}),s.eElement.removeEventListener("touchmove",c,{passive:!0}),s.eElement.removeEventListener("touchend",p,{passive:!1})})}return d.prototype.getActiveTouch=function(i){for(var e=0;e<i.length;e++)if(i[e].identifier===this.touchStart.identifier)return i[e];return null},d.prototype.addEventListener=function(i,e){this.eventService.addEventListener(i,e)},d.prototype.removeEventListener=function(i,e){this.eventService.removeEventListener(i,e)},d.prototype.onTouchStart=function(i){var e=this;if(!this.touching){this.touchStart=i.touches[0],this.touching=!0,this.moved=!1;var s=this.touchStart;window.setTimeout(function(){e.touching&&e.touchStart===s&&!e.moved&&(e.moved=!0,e.eventService.dispatchEvent({type:d.EVENT_LONG_TAP,touchStart:e.touchStart,touchEvent:i}))},500)}},d.prototype.onTouchMove=function(i){if(this.touching){var e=this.getActiveTouch(i.touches);e&&!L_(e,this.touchStart,4)&&(this.moved=!0)}},d.prototype.onTouchEnd=function(i){this.touching&&(this.moved||(this.eventService.dispatchEvent({type:d.EVENT_TAP,touchStart:this.touchStart}),this.checkForDoubleTap()),this.preventMouseClick&&i.preventDefault(),this.touching=!1)},d.prototype.checkForDoubleTap=function(){var i=(new Date).getTime();this.lastTapTime&&this.lastTapTime>0&&i-this.lastTapTime>d.DOUBLE_TAP_MILLIS?(this.eventService.dispatchEvent({type:d.EVENT_DOUBLE_TAP,touchStart:this.touchStart}),this.lastTapTime=null):this.lastTapTime=i},d.prototype.destroy=function(){this.destroyFuncs.forEach(function(i){return i()})},d.EVENT_TAP="tap",d.EVENT_DOUBLE_TAP="doubleTap",d.EVENT_LONG_TAP="longTap",d.DOUBLE_TAP_MILLIS=500,d}(),K_=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),$i=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},vb=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.lastMovingChanged=0,e}return K_(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.refresh=function(e){return this.params=e,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&this.workOutSort()==this.currentSort&&(this.setDisplayName(e),!0)},i.prototype.workOutTemplate=function(){var e=Ft(this.params.template,i.TEMPLATE);return e&&e.trim?e.trim():e},i.prototype.init=function(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(e.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(e)},i.prototype.setDisplayName=function(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;var s=ra(this.currentDisplayName);this.eText&&(this.eText.innerHTML=s)}},i.prototype.setupIcons=function(e){this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addInIcon("menu",this.eMenu,e),this.addInIcon("filter",this.eFilter,e)},i.prototype.addInIcon=function(e,s,l){if(null!=s){var c=oi(e,this.gridOptionsWrapper,l);c&&s.appendChild(c)}},i.prototype.setupTap=function(){var e=this,s=this.gridOptionsWrapper;if(!s.isSuppressTouch()){var l=new bo(this.getGui(),!0),c=s.isSuppressMenuHide(),p=c&&Le(this.eMenu),m=p?new bo(this.eMenu,!0):l;this.params.enableMenu&&this.addManagedListener(m,bo[p?"EVENT_TAP":"EVENT_LONG_TAP"],function(U){s.getApi().showColumnMenuAfterMouseClick(e.params.column,U.touchStart)}),this.params.enableSorting&&this.addManagedListener(l,bo.EVENT_TAP,function(U){c&&e.eMenu.contains(U.touchStart.target)||e.sortController.progressSort(e.params.column,!1,"uiColumnSorted")}),this.addDestroyFunc(function(){return l.destroy()}),p&&this.addDestroyFunc(function(){return m.destroy()})}},i.prototype.workOutShowMenu=function(){var e=!this.gridOptionsWrapper.isSuppressMenuHide(),s=Ys()&&e;return this.params.enableMenu&&!s},i.prototype.setMenu=function(){var e=this;if(this.eMenu){if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return void mi(this.eMenu);var s=this.gridOptionsWrapper.isSuppressMenuHide();this.addManagedListener(this.eMenu,"click",function(){return e.showMenu(e.eMenu)}),Lt(this.eMenu,"ag-header-menu-always-show",s)}},i.prototype.showMenu=function(e){e||(e=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,e,"columnMenu")},i.prototype.removeSortIcons=function(){mi(this.eSortAsc),mi(this.eSortDesc),mi(this.eSortNone),mi(this.eSortOrder)},i.prototype.workOutSort=function(){return this.params.enableSorting},i.prototype.setupSort=function(){var e=this;if(this.currentSort=this.params.enableSorting,this.currentSort){var s=this.gridOptionsWrapper.isMultiSortKeyCtrl();this.addManagedListener(this.params.column,Tn.EVENT_MOVING_CHANGED,function(){e.lastMovingChanged=(new Date).getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",function(l){var c=e.params.column.isMoving(),p=(new Date).getTime();c||p-e.lastMovingChanged<50||e.params.progressSort(s?l.ctrlKey||l.metaKey:l.shiftKey)}),this.addManagedListener(this.params.column,Tn.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.onSortChanged(),this.addManagedListener(this.eventService,$.EVENT_SORT_CHANGED,this.setMultiSortOrder.bind(this)),this.setMultiSortOrder()}else this.removeSortIcons()},i.prototype.onSortChanged=function(){if(Lt(this.getGui(),"ag-header-cell-sorted-asc",this.params.column.isSortAscending()),Lt(this.getGui(),"ag-header-cell-sorted-desc",this.params.column.isSortDescending()),Lt(this.getGui(),"ag-header-cell-sorted-none",this.params.column.isSortNone()),this.eSortAsc&&Lt(this.eSortAsc,"ag-hidden",!this.params.column.isSortAscending()),this.eSortDesc&&Lt(this.eSortDesc,"ag-hidden",!this.params.column.isSortDescending()),this.eSortNone){var e=!this.params.column.getColDef().unSortIcon&&!this.gridOptionsWrapper.isUnSortIcon();Lt(this.eSortNone,"ag-hidden",e||!this.params.column.isSortNone())}},i.prototype.setMultiSortOrder=function(){if(this.eSortOrder){var e=this.params.column,s=this.sortController.getColumnsWithSortingOrdered(),l=s.indexOf(e),c=s.length>1,p=e.isSorting()&&c;jn(this.eSortOrder,p),l>=0?this.eSortOrder.innerHTML=(l+1).toString():ao(this.eSortOrder)}},i.prototype.setupFilterIcon=function(){!this.eFilter||(this.addManagedListener(this.params.column,Tn.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},i.prototype.onFilterChanged=function(){var e=this.params.column.isFilterActive();Lt(this.eFilter,"ag-hidden",!e)},i.TEMPLATE='<div class="ag-cell-label-container" role="presentation">\n            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n            <div ref="eLabel" class="ag-header-cell-label" role="presentation" unselectable="on">\n                <span ref="eText" class="ag-header-cell-text" unselectable="on"></span>\n                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                <span ref="eSortOrder" class="ag-header-icon ag-header-label-icon ag-sort-order" aria-hidden="true"></span>\n                <span ref="eSortAsc" class="ag-header-icon ag-header-label-icon ag-sort-ascending-icon" aria-hidden="true"></span>\n                <span ref="eSortDesc" class="ag-header-icon ag-header-label-icon ag-sort-descending-icon" aria-hidden="true"></span>\n                <span ref="eSortNone" class="ag-header-icon ag-header-label-icon ag-sort-none-icon" aria-hidden="true"></span>\n            </div>\n        </div>',$i([B("sortController")],i.prototype,"sortController",void 0),$i([B("menuFactory")],i.prototype,"menuFactory",void 0),$i([Be("eFilter")],i.prototype,"eFilter",void 0),$i([Be("eSortAsc")],i.prototype,"eSortAsc",void 0),$i([Be("eSortDesc")],i.prototype,"eSortDesc",void 0),$i([Be("eSortNone")],i.prototype,"eSortNone",void 0),$i([Be("eSortOrder")],i.prototype,"eSortOrder",void 0),$i([Be("eMenu")],i.prototype,"eMenu",void 0),$i([Be("eLabel")],i.prototype,"eLabel",void 0),$i([Be("eText")],i.prototype,"eText",void 0),i}(dn),kl=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ad=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ip=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return kl(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},i.prototype.checkWarnings=function(){this.params.template&&pn(function(){return console.warn("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")},"HeaderGroupComp.templateNotSupported")},i.prototype.setupExpandIcons=function(){var e=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var s=function(m){if(!xa(m)){var w=!e.params.columnGroup.isExpanded();e.columnModel.setColumnGroupOpened(e.params.columnGroup.getOriginalColumnGroup(),w,"uiColumnExpanded")}};this.addTouchAndClickListeners(this.eCloseIcon,s),this.addTouchAndClickListeners(this.eOpenIcon,s);var l=function(m){oo(m)};this.addManagedListener(this.eCloseIcon,"dblclick",l),this.addManagedListener(this.eOpenIcon,"dblclick",l),this.addManagedListener(this.getGui(),"dblclick",s),this.updateIconVisibility();var c=this.params.columnGroup.getOriginalColumnGroup();this.addManagedListener(c,gr.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(c,gr.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},i.prototype.addTouchAndClickListeners=function(e,s){var l=new bo(e,!0);this.addManagedListener(l,bo.EVENT_TAP,s),this.addDestroyFunc(function(){return l.destroy()}),this.addManagedListener(e,"click",s)},i.prototype.updateIconVisibility=function(){if(this.params.columnGroup.isExpandable()){var s=this.params.columnGroup.isExpanded();jn(this.eOpenIcon,s),jn(this.eCloseIcon,!s)}else jn(this.eOpenIcon,!1),jn(this.eCloseIcon,!1)},i.prototype.addInIcon=function(e,s){var l=oi(e,this.gridOptionsWrapper,null);l&&this.getRefElement(s).appendChild(l)},i.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable())return jn(this.eOpenIcon,!1),void jn(this.eCloseIcon,!1)},i.prototype.setupLabel=function(){var e=this.params.displayName;if(Le(e)){var s=ra(e);this.getRefElement("agLabel").innerHTML=s}},i.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">\n            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>',ad([B("columnModel")],i.prototype,"columnModel",void 0),ad([Be("agOpened")],i.prototype,"eOpenIcon",void 0),ad([Be("agClosed")],i.prototype,"eCloseIcon",void 0),i}(dn),gb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Nu=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return gb(i,d),i.prototype.isPopup=function(){return!0},i.prototype.setParentComponent=function(e){Tt(e.getGui(),"ag-has-popup"),d.prototype.setParentComponent.call(this,e)},i.prototype.destroy=function(){var e=this.parentComponent;e&&e.isAlive()&&gi(e.getGui(),"ag-has-popup"),d.prototype.destroy.call(this)},i}(dn),$_=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),X_=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return $_(i,d),i.prototype.init=function(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),Le(e.value)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this))},i.prototype.onKeyDown=function(e){var s=e.which||e.keyCode;(s===$e.LEFT||s===$e.UP||s===$e.RIGHT||s===$e.DOWN||e.shiftKey&&s===$e.ENTER)&&e.stopPropagation()},i.prototype.afterGuiAttached=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()},i.prototype.getValue=function(){return this.params.parseValue(this.eTextArea.getValue())},i.TEMPLATE='<div class="ag-large-text" tabindex="0">\n            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Be("eTextArea")],i.prototype,"eTextArea",void 0),i}(Nu),sd=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),op=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ud=function(d){function i(){var e=d.call(this,'<div class="ag-cell-edit-wrapper"><ag-select class="ag-cell-editor" ref="eSelect"></ag-select></div>')||this;return e.startedByEnter=!1,e}return sd(i,d),i.prototype.init=function(e){var s=this;if(this.focusAfterAttached=e.cellStartedEdit,ye(e.values))console.warn("AG Grid: no values found for select cellEditor");else{this.startedByEnter=e.keyPress===$e.ENTER;var l=!1;e.values.forEach(function(c){var p={value:c},m=s.valueFormatterService.formatValue(e.column,null,null,c);p.text=null!=m?m:c,s.eSelect.addOption(p),l=l||e.value===c}),l?this.eSelect.setValue(e.value,!0):e.values.length&&this.eSelect.setValue(e.values[0],!0),this.gridOptionsWrapper.isFullRowEdit()||this.eSelect.onValueChange(function(){return e.stopEditing()})}},i.prototype.afterGuiAttached=function(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&this.eSelect.showPicker()},i.prototype.focusIn=function(){this.eSelect.getFocusableElement().focus()},i.prototype.getValue=function(){return this.eSelect.getValue()},i.prototype.isPopup=function(){return!1},op([B("valueFormatterService")],i.prototype,"valueFormatterService",void 0),op([Be("eSelect")],i.prototype,"eSelect",void 0),i}(Nu),ap=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ld=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return ap(i,d),i.prototype.isPopup=function(){return!0},i}(ud),yb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),cd=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return yb(i,d),i.prototype.init=function(e){this.params=e;var l,s=this.eInput;e.cellStartedEdit?(this.focusAfterAttached=!0,e.keyPress===$e.BACKSPACE||e.keyPress===$e.DELETE?l="":e.charPress?l=e.charPress:(l=this.getStartValue(e),e.keyPress!==$e.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,l=this.getStartValue(e)),null!=l&&s.setValue(l,!0),this.addManagedListener(s.getGui(),"keydown",function(c){var p=c.keyCode;(p===$e.PAGE_UP||p===$e.PAGE_DOWN)&&c.preventDefault()})},i.prototype.afterGuiAttached=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),s=this.eInput;if(s.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached){jc()||s.getFocusableElement().focus();var l=s.getInputElement();if(this.highlightAllOnFocus)l.select();else{var c=s.getValue(),p=Le(c)&&c.length||0;p&&l.setSelectionRange(p,p)}}},i.prototype.focusIn=function(){var e=this.eInput,s=e.getFocusableElement(),l=e.getInputElement();s.focus(),l.select()},i.prototype.focusOut=function(){var e=this.eInput.getInputElement();zi()&&e.setSelectionRange(0,0)},i.prototype.getValue=function(){return this.params.parseValue(this.eInput.getValue())},i.prototype.getStartValue=function(e){return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value},i.prototype.isPopup=function(){return!1},i.TEMPLATE='<div class="ag-cell-edit-wrapper"><ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field></div>',function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Be("eInput")],i.prototype,"eInput",void 0),i}(Nu),Z_=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),rg=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Z_(i,d),i.prototype.isPopup=function(){return!0},i}(cd),_b=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Q_=function(d){function i(){var e=d.call(this,i.TEMPLATE)||this;return e.refreshCount=0,e}return _b(i,d),i.prototype.init=function(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e)},i.prototype.showDelta=function(e,s){var l=Math.abs(s),c=e.formatValue(l),p=Le(c)?c:l,m=s>=0;this.eDelta.innerHTML=m?"\u2191"+p:"\u2193"+p,Lt(this.eDelta,"ag-value-change-delta-up",m),Lt(this.eDelta,"ag-value-change-delta-down",!m)},i.prototype.setTimerToRemoveDelta=function(){var e=this;this.refreshCount++;var s=this.refreshCount;window.setTimeout(function(){s===e.refreshCount&&e.hideDeltaValue()},2e3)},i.prototype.hideDeltaValue=function(){gi(this.eValue,"ag-value-change-value-highlight"),ao(this.eDelta)},i.prototype.refresh=function(e){var s=e.value;return s!==this.lastValue&&(Le(e.valueFormatted)?this.eValue.innerHTML=e.valueFormatted:Le(e.value)?this.eValue.innerHTML=s:ao(this.eValue),!this.filterManager.isSuppressFlashingCellsBecauseFiltering())&&("number"==typeof s&&"number"==typeof this.lastValue&&this.showDelta(e,s-this.lastValue),this.lastValue&&Tt(this.eValue,"ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=s,!0)},i.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([B("filterManager")],i.prototype,"filterManager",void 0),i}(dn),eC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ku=function(d){function i(){var e=d.call(this,i.TEMPLATE)||this;return e.refreshCount=0,e.eCurrent=e.queryForHtmlElement(".ag-value-slide-current"),e}return eC(i,d),i.prototype.init=function(e){this.refresh(e)},i.prototype.addSlideAnimation=function(){var e=this;this.refreshCount++;var s=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=oa('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout(function(){s===e.refreshCount&&Tt(e.ePrevious,"ag-value-slide-out-end")},50),window.setTimeout(function(){s===e.refreshCount&&(e.getGui().removeChild(e.ePrevious),e.ePrevious=null)},3e3)},i.prototype.refresh=function(e){var s=e.value;return ye(s)&&(s=""),s!==this.lastValue&&!this.filterManager.isSuppressFlashingCellsBecauseFiltering()&&(this.addSlideAnimation(),this.lastValue=s,Le(e.valueFormatted)?this.eCurrent.innerHTML=e.valueFormatted:Le(e.value)?this.eCurrent.innerHTML=s:ao(this.eCurrent),!0)},i.TEMPLATE='<span>\n            <span class="ag-value-slide-current"></span>\n        </span>',function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([B("filterManager")],i.prototype,"filterManager",void 0),i}(dn);!function(d){d[d.Above=0]="Above",d[d.Below=1]="Below"}(K.oh5||(K.oh5={}));var sn=function(){function d(i){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=d.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.selected=!1,this.beans=i}return d.prototype.setData=function(i){this.setDataCommon(i,!1)},d.prototype.updateData=function(i){this.setDataCommon(i,!0)},d.prototype.setDataCommon=function(i,e){var s=this.data;this.data=i,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable();var l=this.createDataChangedEvent(i,s,e);this.dispatchLocalEvent(l)},d.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},d.prototype.createDataChangedEvent=function(i,e,s){return{type:d.EVENT_DATA_CHANGED,node:this,oldData:e,newData:i,update:s}},d.prototype.createLocalRowEvent=function(i){return{type:i,node:this}},d.prototype.getRowIndexString=function(){return this.rowPinned===ce.PINNED_TOP?"t-"+this.rowIndex:this.rowPinned===ce.PINNED_BOTTOM?"b-"+this.rowIndex:this.rowIndex.toString()},d.prototype.createDaemonNode=function(){var i=new d(this.beans);return i.id=this.id,i.data=this.data,i.daemon=!0,i.selected=this.selected,i.level=this.level,i},d.prototype.setDataAndId=function(i,e){var s=Le(this.id)?this.createDaemonNode():null,l=this.data;this.data=i,this.updateDataOnDetailNode(),this.setId(e),this.beans.selectionService.syncInRowNode(this,s),this.checkRowSelectable();var c=this.createDataChangedEvent(i,l,!1);this.dispatchLocalEvent(c)},d.prototype.checkRowSelectable=function(){var i=this.beans.gridOptionsWrapper.getIsRowSelectableFunc();this.setRowSelectable(!i||i(this))},d.prototype.setRowSelectable=function(i){this.selectable!==i&&(this.selectable=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_SELECTABLE_CHANGED)))},d.prototype.setId=function(i){var e=this.beans.gridOptionsWrapper.getRowNodeIdFunc();e?this.data?(this.id=e(this.data),this.id&&"string"==typeof this.id&&Mv(this.id,d.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row ID's cannot start with "+d.ID_PREFIX_ROW_GROUP+", this is a reserved prefix for AG Grid's row grouping feature."),this.id&&"string"!=typeof this.id&&(this.id=""+this.id)):this.id=void 0:this.id=i},d.prototype.isPixelInRange=function(i){return!(!Le(this.rowTop)||!Le(this.rowHeight))&&i>=this.rowTop&&i<this.rowTop+this.rowHeight},d.prototype.setFirstChild=function(i){this.firstChild!==i&&(this.firstChild=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_FIRST_CHILD_CHANGED)))},d.prototype.setLastChild=function(i){this.lastChild!==i&&(this.lastChild=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_LAST_CHILD_CHANGED)))},d.prototype.setChildIndex=function(i){this.childIndex!==i&&(this.childIndex=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_CHILD_INDEX_CHANGED)))},d.prototype.setRowTop=function(i){this.oldRowTop=this.rowTop,this.rowTop!==i&&(this.rowTop=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_TOP_CHANGED)),this.setDisplayed(null!==i))},d.prototype.clearRowTopAndRowIndex=function(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)},d.prototype.setDisplayed=function(i){this.displayed!==i&&(this.displayed=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_DISPLAYED_CHANGED)))},d.prototype.setDragging=function(i){this.dragging!==i&&(this.dragging=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_DRAGGING_CHANGED)))},d.prototype.setHighlighted=function(i){i!==this.highlighted&&(this.highlighted=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_HIGHLIGHT_CHANGED)))},d.prototype.setAllChildrenCount=function(i){this.allChildrenCount!==i&&(this.allChildrenCount=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},d.prototype.setMaster=function(i){this.master!==i&&(this.master&&!i&&(this.expanded=!1),this.master=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_MASTER_CHANGED)))},d.prototype.setRowHeight=function(i,e){void 0===e&&(e=!1),this.rowHeight=i,this.rowHeightEstimated=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_HEIGHT_CHANGED))},d.prototype.setRowAutoHeight=function(i,e){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[e.getId()]=i,null!=i&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=Du(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())},d.prototype.checkAutoHeights=function(){var i=!1,e=!0,s=0,l=this.__autoHeights;if(null!=l&&(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(function(m){var w=l[m.getId()];null!=w?(e=!1,w>s&&(s=w)):i=!0}),!i&&((e||s<10)&&(s=this.beans.gridOptionsWrapper.getRowHeightForNode(this).height),s!=this.rowHeight))){this.setRowHeight(s);var p=this.beans.rowModel;p.onRowHeightChanged&&p.onRowHeightChanged()}},d.prototype.setRowIndex=function(i){this.rowIndex!==i&&(this.rowIndex=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_ROW_INDEX_CHANGED)))},d.prototype.setUiLevel=function(i){this.uiLevel!==i&&(this.uiLevel=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_UI_LEVEL_CHANGED)))},d.prototype.setExpanded=function(i){if(this.expanded!==i){this.expanded=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_EXPANDED_CHANGED));var e=ti({},this.createGlobalRowEvent($.EVENT_ROW_GROUP_OPENED),{expanded:i});this.beans.rowNodeEventThrottle.dispatchExpanded(e),this.beans.gridOptionsWrapper.isGroupIncludeFooter()&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}},d.prototype.createGlobalRowEvent=function(i){return{type:i,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi()}},d.prototype.dispatchLocalEvent=function(i){this.eventService&&this.eventService.dispatchEvent(i)},d.prototype.setDataValue=function(i,e,s){var l=this.beans.columnModel.getPrimaryColumn(i),c=this.beans.valueService.getValue(l,this);this.beans.valueService.setValue(this,l,e,s),this.dispatchCellChangedEvent(l,e,c)},d.prototype.setGroupValue=function(i,e){var s=this.beans.columnModel.getGridColumn(i);ye(this.groupData)&&(this.groupData={});var l=s.getColId(),c=this.groupData[l];c!==e&&(this.groupData[l]=e,this.dispatchCellChangedEvent(s,e,c))},d.prototype.setAggData=function(i){var e=this,s=Tf([this.aggData,i]),l=this.aggData;this.aggData=i,this.eventService&&s.forEach(function(c){var p=e.beans.columnModel.getGridColumn(c);e.dispatchCellChangedEvent(p,e.aggData?e.aggData[c]:void 0,l?l[c]:void 0)})},d.prototype.updateHasChildren=function(){var i=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;i!==this.__hasChildren&&(this.__hasChildren=!!i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(d.EVENT_HAS_CHILDREN_CHANGED)))},d.prototype.hasChildren=function(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren},d.prototype.isEmptyRowGroupNode=function(){return this.group&&Qr(this.childrenAfterGroup)},d.prototype.dispatchCellChangedEvent=function(i,e,s){this.dispatchLocalEvent({type:d.EVENT_CELL_CHANGED,node:this,column:i,newValue:e,oldValue:s})},d.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},d.prototype.isExpandable=function(){return!!(this.hasChildren()&&!this.footer||this.master)},d.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},d.prototype.depthFirstSearch=function(i){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(function(e){return e.depthFirstSearch(i)}),i(this)},d.prototype.calculateSelectedFromChildren=function(){var i=!1,e=!1,s=!1;if(this.childrenAfterGroup)for(var c=0;c<this.childrenAfterGroup.length;c++){var p=this.childrenAfterGroup[c];if(p.selectable)switch(p.isSelected()){case!0:i=!0;break;case!1:e=!0;break;default:s=!0}}this.selectThisNode(s?void 0:!(!i||e)||!(!i&&e)&&void 0)},d.prototype.setSelectedInitialValue=function(i){this.selected=i},d.prototype.setSelected=function(i,e,s){void 0===e&&(e=!1),void 0===s&&(s=!1),this.setSelectedParams({newValue:i,clearSelection:e,suppressFinishActions:s,rangeSelect:!1})},d.prototype.isRowPinned=function(){return this.rowPinned===ce.PINNED_TOP||this.rowPinned===ce.PINNED_BOTTOM},d.prototype.setSelectedParams=function(i){var e=this.beans.gridOptionsWrapper.isGroupSelectsChildren(),s=!0===i.newValue,l=!0===i.clearSelection,c=!0===i.suppressFinishActions,p=!0===i.rangeSelect,m=e&&!0===i.groupSelectsFiltered;if(void 0===this.id)return console.warn("AG Grid: cannot select node until id for node is known"),0;if(this.rowPinned)return console.warn("AG Grid: cannot select pinned rows"),0;if(this.footer)return this.sibling.setSelectedParams(i);if(p&&this.beans.selectionService.getLastSelectedNode()){var w=this.beans.selectionService.getLastSelectedNode()!==this,x=this.beans.gridOptionsWrapper.isRowSelectionMulti();if(w&&x){var A=this.doRowRangeSelection(i.newValue);return this.beans.selectionService.setLastSelectedNode(this),A}}var I=0;return m&&this.group||this.selectThisNode(s)&&I++,e&&this.group&&(I+=this.selectChildNodes(s,m)),c||(s&&(l||!this.beans.gridOptionsWrapper.isRowSelectionMulti())&&(I+=this.beans.selectionService.clearOtherNodes(this)),I>0&&(this.beans.selectionService.updateGroupsFromChildrenSelections(),this.beans.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.beans.gridApi,columnApi:this.beans.columnApi})),s&&this.beans.selectionService.setLastSelectedNode(this)),I},d.prototype.doRowRangeSelection=function(i){var e=this;void 0===i&&(i=!0);var s=this.beans.gridOptionsWrapper.isGroupSelectsChildren(),l=this.beans.selectionService.getLastSelectedNode(),c=this.beans.rowModel.getNodesInRangeForSelection(this,l),p=0;return c.forEach(function(w){w.group&&s||!1===i&&e===w||w.selectThisNode(i)&&p++}),this.beans.selectionService.updateGroupsFromChildrenSelections(),this.beans.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.beans.gridApi,columnApi:this.beans.columnApi}),p},d.prototype.isParentOfNode=function(i){for(var e=this.parent;e;){if(e===i)return!0;e=e.parent}return!1},d.prototype.selectThisNode=function(i){if(!this.selectable&&i||this.selected===i)return!1;this.selected=i,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(d.EVENT_ROW_SELECTED));var l=this.createGlobalRowEvent($.EVENT_ROW_SELECTED);return this.beans.eventService.dispatchEvent(l),!0},d.prototype.selectChildNodes=function(i,e){var s=e?this.childrenAfterFilter:this.childrenAfterGroup;if(ye(s))return 0;for(var l=0,c=0;c<s.length;c++)l+=s[c].setSelectedParams({newValue:i,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:e});return l},d.prototype.addEventListener=function(i,e){this.eventService||(this.eventService=new qs),this.eventService.addEventListener(i,e)},d.prototype.removeEventListener=function(i,e){!this.eventService||(this.eventService.removeEventListener(i,e),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))},d.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(d.EVENT_MOUSE_ENTER))},d.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(d.EVENT_MOUSE_LEAVE))},d.prototype.getFirstChildOfFirstChild=function(i){for(var e=this,s=!0,l=!1,c=null;s&&!l;){var p=e.parent;Le(p)&&e.firstChild?p.rowGroupColumn===i&&(l=!0,c=p):s=!1,e=p}return l?c:null},d.prototype.isFullWidthCell=function(){var i=this.beans.gridOptionsWrapper.getIsFullWidthCellFunc();return!!i&&i(this)},d.prototype.getRoute=function(){if(null!=this.key){for(var i=[],e=this;null!=e.key;)i.push(e.key),e=e.parent;return i.reverse()}},d.ID_PREFIX_ROW_GROUP="row-group-",d.ID_PREFIX_TOP_PINNED="t-",d.ID_PREFIX_BOTTOM_PINNED="b-",d.OBJECT_ID_SEQUENCE=0,d.EVENT_ROW_SELECTED="rowSelected",d.EVENT_DATA_CHANGED="dataChanged",d.EVENT_CELL_CHANGED="cellChanged",d.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",d.EVENT_MASTER_CHANGED="masterChanged",d.EVENT_MOUSE_ENTER="mouseEnter",d.EVENT_MOUSE_LEAVE="mouseLeave",d.EVENT_HEIGHT_CHANGED="heightChanged",d.EVENT_TOP_CHANGED="topChanged",d.EVENT_DISPLAYED_CHANGED="displayedChanged",d.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",d.EVENT_LAST_CHILD_CHANGED="lastChildChanged",d.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",d.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",d.EVENT_EXPANDED_CHANGED="expandedChanged",d.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",d.EVENT_SELECTABLE_CHANGED="selectableChanged",d.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",d.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",d.EVENT_DRAGGING_CHANGED="draggingChanged",d}(),ig=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Gl=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Qs=function(d){function i(){return d.call(this,'\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')||this}return ig(i,d),i.prototype.postConstruct=function(){this.eCheckbox.setPassive(!0)},i.prototype.getCheckboxId=function(){return this.eCheckbox.getInputElement().id},i.prototype.onDataChanged=function(){this.onSelectionChanged()},i.prototype.onSelectableChanged=function(){this.showOrHideSelect()},i.prototype.onSelectionChanged=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),s=this.rowNode.isSelected(),l=void 0===s?e("ariaIndeterminate","indeterminate"):!0===s?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),c=e("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(s,!0),this.eCheckbox.setInputAriaLabel(c+" ("+l+")")},i.prototype.onCheckedClicked=function(e){var s=this.gridOptionsWrapper.isGroupSelectsFiltered();return this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:s})},i.prototype.onUncheckedClicked=function(e){var s=this.gridOptionsWrapper.isGroupSelectsFiltered();return this.rowNode.setSelectedParams({newValue:!0,rangeSelect:e.shiftKey,groupSelectsFiltered:s})},i.prototype.init=function(e){var s=this;if(this.rowNode=e.rowNode,this.column=e.column,this.onSelectionChanged(),this.addGuiEventListener("click",function(m){return oo(m)}),this.addGuiEventListener("dblclick",function(m){return oo(m)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",function(m){var w=s.eCheckbox.getValue();void 0===s.eCheckbox.getPreviousValue()?0===s.onUncheckedClicked(m||{})&&s.onCheckedClicked(m):w?s.onCheckedClicked(m):s.onUncheckedClicked(m||{})}),this.addManagedListener(this.rowNode,sn.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsWrapper.getIsRowSelectableFunc()||this.checkboxCallbackExists()){var p=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,p),this.addManagedListener(this.rowNode,sn.EVENT_DATA_CHANGED,p),this.addManagedListener(this.rowNode,sn.EVENT_CELL_CHANGED,p),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")},i.prototype.showOrHideSelect=function(){var e=this.rowNode.selectable;e&&this.checkboxCallbackExists()&&(e=this.column.isCellCheckboxSelection(this.rowNode)),this.setVisible(e)},i.prototype.checkboxCallbackExists=function(){var e=this.column?this.column.getColDef():null;return!!e&&"function"==typeof e.checkboxSelection},Gl([Be("eCheckbox")],i.prototype,"eCheckbox",void 0),Gl([Qe],i.prototype,"postConstruct",null),i}(dn),Bl=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),jo=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};(function(d){d[d.ToolPanel=0]="ToolPanel",d[d.HeaderCell=1]="HeaderCell",d[d.RowDrag=2]="RowDrag",d[d.ChartPanel=3]="ChartPanel"})(K.rvo||(K.rvo={})),function(d){d[d.Up=0]="Up",d[d.Down=1]="Down"}(K.HO_||(K.HO_={})),function(d){d[d.Left=0]="Left",d[d.Right=1]="Right"}(K.poj||(K.poj={}));var Bi=function(d){function i(){var s=null!==d&&d.apply(this,arguments)||this;return s.dragSourceAndParamsList=[],s.dropTargets=[],s}var e;return Bl(i,d),e=i,i.prototype.init=function(){this.ePinnedIcon=Wo("columnMovePin",this.gridOptionsWrapper,null),this.eHideIcon=Wo("columnMoveHide",this.gridOptionsWrapper,null),this.eMoveIcon=Wo("columnMoveMove",this.gridOptionsWrapper,null),this.eLeftIcon=Wo("columnMoveLeft",this.gridOptionsWrapper,null),this.eRightIcon=Wo("columnMoveRight",this.gridOptionsWrapper,null),this.eGroupIcon=Wo("columnMoveGroup",this.gridOptionsWrapper,null),this.eAggregateIcon=Wo("columnMoveValue",this.gridOptionsWrapper,null),this.ePivotIcon=Wo("columnMovePivot",this.gridOptionsWrapper,null),this.eDropNotAllowedIcon=Wo("dropNotAllowed",this.gridOptionsWrapper,null)},i.prototype.addDragSource=function(s,l){void 0===l&&(l=!1);var c={eElement:s.eElement,dragStartPixels:s.dragStartPixels,onDragStart:this.onDragStart.bind(this,s),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this)};this.dragSourceAndParamsList.push({params:c,dragSource:s}),this.dragService.addDragSource(c,l)},i.prototype.removeDragSource=function(s){var l=Pi(this.dragSourceAndParamsList,function(c){return c.dragSource===s});l&&(this.dragService.removeDragSource(l.params),ei(this.dragSourceAndParamsList,l))},i.prototype.clearDragSourceParamsList=function(){var s=this;this.dragSourceAndParamsList.forEach(function(l){return s.dragService.removeDragSource(l.params)}),this.dragSourceAndParamsList.length=0},i.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},i.prototype.onDragStart=function(s,l){this.dragging=!0,this.dragSource=s,this.eventLastTime=l,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()},i.prototype.onDragStop=function(s){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var l=this.createDropTargetEvent(this.lastDropTarget,s,null,null,!1);this.lastDropTarget.onDragStop(l)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},i.prototype.onDragging=function(s,l){var c=this,p=this.getHorizontalDirection(s),m=this.getVerticalDirection(s);this.eventLastTime=s,this.positionGhost(s);var w=this.dropTargets.filter(function(U){return c.isMouseOnDropTarget(s,U)}),x=w.length,A=null;if(x>0&&(A=1===x?w[0]:w.reduce(function(U,Y){if(!U)return Y;var Q=U.getContainer(),oe=Y.getContainer();return Q.contains(oe)?Y:U})),A!==this.lastDropTarget)this.leaveLastTargetIfExists(s,p,m,l),this.enterDragTargetIfExists(A,s,p,m,l),this.lastDropTarget=A;else if(A&&A.onDragging){var I=this.createDropTargetEvent(A,s,p,m,l);A.onDragging(I)}},i.prototype.enterDragTargetIfExists=function(s,l,c,p,m){if(s){if(s.onDragEnter){var w=this.createDropTargetEvent(s,l,c,p,m);s.onDragEnter(w)}this.setGhostIcon(s.getIconName?s.getIconName():null)}},i.prototype.leaveLastTargetIfExists=function(s,l,c,p){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){var m=this.createDropTargetEvent(this.lastDropTarget,s,l,c,p);this.lastDropTarget.onDragLeave(m)}this.setGhostIcon(null)}},i.prototype.getAllContainersFromDropTarget=function(s){var l=s.getSecondaryContainers?s.getSecondaryContainers():null,c=[[s.getContainer()]];return l?c.concat(l):c},i.prototype.allContainersIntersect=function(s,l){for(var c=0,p=l;c<p.length;c++){var w=p[c].getBoundingClientRect();if(0===w.width||0===w.height)return!1;if(!(s.clientX>=w.left&&s.clientX<w.right&&s.clientY>=w.top&&s.clientY<w.bottom))return!1}return!0},i.prototype.isMouseOnDropTarget=function(s,l){for(var p=!1,m=0,w=this.getAllContainersFromDropTarget(l);m<w.length;m++)if(this.allContainersIntersect(s,w[m])){p=!0;break}return p&&l.isInterestedIn(this.dragSource.type)},i.prototype.addDropTarget=function(s){this.dropTargets.push(s)},i.prototype.removeDropTarget=function(s){this.dropTargets=this.dropTargets.filter(function(l){return l.getContainer()!==s.getContainer()})},i.prototype.hasExternalDropZones=function(){return this.dropTargets.some(function(s){return s.external})},i.prototype.findExternalZone=function(s){return Pi(this.dropTargets.filter(function(c){return c.external}),function(c){return c.getContainer()===s.getContainer()})},i.prototype.getHorizontalDirection=function(s){var l=this.eventLastTime&&this.eventLastTime.clientX,c=s.clientX;return l===c?null:l>c?K.poj.Left:K.poj.Right},i.prototype.getVerticalDirection=function(s){var l=this.eventLastTime&&this.eventLastTime.clientY,c=s.clientY;return l===c?null:l>c?K.HO_.Up:K.HO_.Down},i.prototype.createDropTargetEvent=function(s,l,c,p,m){var w=s.getContainer(),x=w.getBoundingClientRect(),A=this;return{event:l,x:l.clientX-x.left,y:l.clientY-x.top,vDirection:p,hDirection:c,dragSource:A.dragSource,fromNudge:m,dragItem:A.dragItem,api:A.gridApi,columnApi:A.columnApi,dropZoneTarget:w}},i.prototype.positionGhost=function(s){var l=this.eGhost;if(l){var p=l.getBoundingClientRect().height,m=HE()-2,w=VE()-2,x=s.pageY-p/2,A=s.pageX-10,I=this.gridOptionsWrapper.getDocument(),U=window.pageYOffset||I.documentElement.scrollTop,Y=window.pageXOffset||I.documentElement.scrollLeft;m>0&&A+l.clientWidth>m+Y&&(A=m+Y-l.clientWidth),A<0&&(A=0),w>0&&x+l.clientHeight>w+U&&(x=w+U-l.clientHeight),x<0&&(x=0),l.style.left=A+"px",l.style.top=x+"px"}},i.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},i.prototype.createGhost=function(){this.eGhost=oa(e.GHOST_TEMPLATE);var s=this.environment.getTheme().theme;s&&Tt(this.eGhost,s),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var l=this.eGhost.querySelector(".ag-dnd-ghost-label"),c=this.dragSource.dragItemName;Sl(c)&&(c=c()),l.innerHTML=ra(c)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var p=this.gridOptionsWrapper.getDocument(),m=p.fullscreenElement||p.querySelector("body");this.eGhostParent=m,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")},i.prototype.setGhostIcon=function(s,l){void 0===l&&(l=!1),ao(this.eGhostIcon);var c=null;switch(s||(s=this.dragSource.defaultIconName||e.ICON_NOT_ALLOWED),s){case e.ICON_PINNED:c=this.ePinnedIcon;break;case e.ICON_MOVE:c=this.eMoveIcon;break;case e.ICON_LEFT:c=this.eLeftIcon;break;case e.ICON_RIGHT:c=this.eRightIcon;break;case e.ICON_GROUP:c=this.eGroupIcon;break;case e.ICON_AGGREGATE:c=this.eAggregateIcon;break;case e.ICON_PIVOT:c=this.ePivotIcon;break;case e.ICON_NOT_ALLOWED:c=this.eDropNotAllowedIcon;break;case e.ICON_HIDE:c=this.eHideIcon}Lt(this.eGhostIcon,"ag-shake-left-to-right",l),(c!==this.eHideIcon||!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns())&&c&&this.eGhostIcon.appendChild(c)},i.ICON_PINNED="pinned",i.ICON_MOVE="move",i.ICON_LEFT="left",i.ICON_RIGHT="right",i.ICON_GROUP="group",i.ICON_AGGREGATE="aggregate",i.ICON_PIVOT="pivot",i.ICON_NOT_ALLOWED="notAllowed",i.ICON_HIDE="hide",i.GHOST_TEMPLATE='<div class="ag-dnd-ghost ag-unselectable">\n            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n            <div class="ag-dnd-ghost-label"></div>\n        </div>',jo([B("dragService")],i.prototype,"dragService",void 0),jo([B("environment")],i.prototype,"environment",void 0),jo([B("columnApi")],i.prototype,"columnApi",void 0),jo([B("gridApi")],i.prototype,"gridApi",void 0),jo([Qe],i.prototype,"init",null),jo([Ii],i.prototype,"clearDragSourceParamsList",null),e=jo([ht("dragAndDropService")],i)}(Ye),Hl=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ga=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Vl=function(d){function i(e,s,l,c,p,m){var w=d.call(this)||this;return w.cellValueFn=e,w.rowNode=s,w.column=l,w.customGui=c,w.dragStartPixels=p,w.suppressVisibilityChange=m,w.dragSource=null,w}return Hl(i,d),i.prototype.isCustomGui=function(){return null!=this.customGui},i.prototype.postConstruct=function(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(oi("rowDrag",this.beans.gridOptionsWrapper,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){var e=this.beans.gridOptionsWrapper.isRowDragManaged()?new og(this,this.beans,this.rowNode,this.column):new Dn(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}},i.prototype.setDragElement=function(e,s){this.setTemplateFromElement(e),this.addDragSource(s)},i.prototype.getSelectedCount=function(){if(!this.beans.gridOptionsWrapper.isRowDragMultiRow())return 1;var s=this.beans.selectionService.getSelectedNodes();return-1!==s.indexOf(this.rowNode)?s.length:1},i.prototype.checkCompatibility=function(){var e=this.beans.gridOptionsWrapper.isRowDragManaged();this.beans.gridOptionsWrapper.isTreeData()&&e&&pn(function(){return console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true")},"RowDragComp.managedAndTreeData")},i.prototype.addDragSource=function(e){var s=this;void 0===e&&(e=4),this.dragSource&&this.removeDragSource();var l={rowNode:this.rowNode,columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()},c=this.column&&this.column.getColDef().rowDragText;this.dragSource={type:K.rvo.RowDrag,eElement:this.getGui(),dragItemName:function(){var m=s.getSelectedCount();return c?c(l,m):1===m?s.cellValueFn():m+" rows"},getDragItem:function(){return l},dragStartPixels:e,dragSourceDomDataKey:this.beans.gridOptionsWrapper.getDomDataKey()},this.addMouseDownListenerIfNeeded(),this.beans.dragAndDropService.addDragSource(this.dragSource,!0)},i.prototype.addMouseDownListenerIfNeeded=function(){var e=this;this.customGui||!this.column||!this.gridOptionsWrapper.isEnableCellTextSelect()||this.addManagedListener(this.getGui(),"mousedown",function(s){s.preventDefault(),e.beans.focusService.setFocusedCell(e.rowNode.rowIndex,e.column,e.rowNode.rowPinned,!0)})},i.prototype.removeDragSource=function(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null},Ga([B("beans")],i.prototype,"beans",void 0),Ga([Qe],i.prototype,"postConstruct",null),Ga([Ii],i.prototype,"removeDragSource",null),i}(dn),nC=function(d){function i(e,s,l){var c=d.call(this)||this;return c.parent=e,c.rowNode=s,c.column=l,c}return Hl(i,d),i.prototype.setDisplayedOrVisible=function(e){if(e)this.parent.setDisplayed(!1);else{var s=!0,l=!1;this.column&&(s=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),l=Sl(this.column.getColDef().rowDrag)),l?(this.parent.setDisplayed(!0),this.parent.setVisible(s)):(this.parent.setDisplayed(s),this.parent.setVisible(!0))}},i}(Ye),Dn=function(d){function i(e,s,l,c){var p=d.call(this,e,l,c)||this;return p.beans=s,p}return Hl(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()},i.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},i.prototype.workOutVisibility=function(){var e=this.beans.gridOptionsWrapper.isSuppressRowDrag();this.setDisplayedOrVisible(e)},Ga([Qe],i.prototype,"postConstruct",null),i}(nC),og=function(d){function i(e,s,l,c){var p=d.call(this,e,l,c)||this;return p.beans=s,p}return Hl(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.beans.eventService,$.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,"suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()},i.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},i.prototype.workOutVisibility=function(){var s=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),l=s&&s.shouldPreventRowMove(),c=this.beans.gridOptionsWrapper.isSuppressRowDrag(),p=this.beans.dragAndDropService.hasExternalDropZones();this.setDisplayedOrVisible(l&&!p||c)},Ga([Qe],i.prototype,"postConstruct",null),i}(nC),wb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),up=function(){return up=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},up.apply(this,arguments)},Wl=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Sb=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return wb(i,d),i.prototype.init=function(e,s,l,c,p,m,w){this.params=w,this.eGui=s,this.eCheckbox=l,this.eExpanded=c,this.eContracted=p,this.comp=e,this.compClass=m;var x=this.isTopLevelFooter(),A=this.isEmbeddedRowMismatch(),I=null==w.value,U=!1;if(this.gridOptionsWrapper.isGroupIncludeFooter()&&this.gridOptionsWrapper.isGroupHideOpenParents()){var Y=w.node;Y.footer&&(U=(w.colDef&&w.colDef.showRowGroup)!==(Y.rowGroupColumn&&Y.rowGroupColumn.getColId()))}this.cellIsBlank=!x&&(A||I||U),!this.cellIsBlank&&(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),this.addFullWidthRowDraggerIfNeeded(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent())},i.prototype.isTopLevelFooter=function(){if(!this.gridOptionsWrapper.isGroupIncludeTotalFooter()||null!=this.params.value||-1!=this.params.node.level)return!1;var e=this.params.colDef;if(null==e||!0===e.showRowGroup)return!0;var l=this.columnModel.getRowGroupColumns();return!l||0===l.length||l[0].getId()===e.showRowGroup},i.prototype.isEmbeddedRowMismatch=function(){if(!this.params.fullWidth||!this.gridOptionsWrapper.isEmbedFullWidthRows())return!1;var e=this.params.pinned===ce.PINNED_LEFT,s=this.params.pinned===ce.PINNED_RIGHT,l=!e&&!s;return this.gridOptionsWrapper.isEnableRtl()?this.columnModel.isPinningLeft()?!s:!l:this.columnModel.isPinningLeft()?!e:!l},i.prototype.findDisplayedGroupNode=function(){var e=this.params.column,s=this.params.node;if(this.showingValueForOpenedParent)for(var l=s.parent;null!=l;){if(l.rowGroupColumn&&e.isRowGroupDisplayed(l.rowGroupColumn.getId())){this.displayedGroupNode=l;break}l=l.parent}ye(this.displayedGroupNode)&&(this.displayedGroupNode=s)},i.prototype.setupShowingValueForOpenedParent=function(){var e=this.params.node,s=this.params.column;if(this.gridOptionsWrapper.isGroupHideOpenParents())if(e.groupData){if(null!=e.rowGroupColumn){var c=e.rowGroupColumn.getId();if(s.isRowGroupDisplayed(c))return void(this.showingValueForOpenedParent=!1)}var m=null!=e.groupData[s.getId()];this.showingValueForOpenedParent=m}else this.showingValueForOpenedParent=!1;else this.showingValueForOpenedParent=!1},i.prototype.addValueElement=function(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())},i.prototype.addGroupValue=function(){var e=this.adjustParamsWithDetailsFromRelatedColumn(),s=this.getInnerCompDetails(e),l=e.valueFormatted;this.comp.setInnerRenderer(s,null!=l?l:e.value)},i.prototype.adjustParamsWithDetailsFromRelatedColumn=function(){var e=this.displayedGroupNode.rowGroupColumn,s=this.params.column;if(!e)return this.params;if(null!=s&&!s.isRowGroupDisplayed(e.getId()))return this.params;var p=this.params,m=this.params,I=this.valueFormatterService.formatValue(e,m.node,m.scope,m.value);return up(up({},p),{valueFormatted:I})},i.prototype.addFooterValue=function(){var e=this.params.footerValueGetter,s="";if(e){var l=as(this.params);l.value=this.params.value,"function"==typeof e?s=e(l):"string"==typeof e?s=this.expressionService.evaluate(e,l):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else s="Total "+(null!=this.params.value?this.params.value:"");var c=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(c,s)},i.prototype.getInnerCompDetails=function(e){var s=this;if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptions.groupRowRendererParams,e);var l=this.userComponentFactory.getInnerRendererDetails(e,e),c=function(I){return I&&I.componentClass==s.compClass};if(l&&!c(l))return l;var p=this.displayedGroupNode.rowGroupColumn,m=p?p.getColDef():void 0;if(m){var w=this.userComponentFactory.getCellRendererDetails(m,e);if(w&&!c(w))return w;if(c(w)&&m.cellRendererParams&&m.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(m.cellRendererParams,e)}},i.prototype.addChildCount=function(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,sn.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},i.prototype.updateChildCount=function(){var e=this.displayedGroupNode.allChildrenCount,s=this.isShowRowGroupForThisRow();this.comp.setChildCount(s&&null!=e&&e>=0?"("+e+")":"")},i.prototype.isShowRowGroupForThisRow=function(){if(this.gridOptionsWrapper.isTreeData())return!0;var e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;var s=this.params.column;return null==s||s.isRowGroupDisplayed(e.getId())},i.prototype.addExpandAndContract=function(){var e=this.params,s=oi("groupExpanded",this.gridOptionsWrapper,null),l=oi("groupContracted",this.gridOptionsWrapper,null);s&&this.eExpanded.appendChild(s),l&&this.eContracted.appendChild(l);var c=e.eGridCell;!this.gridOptionsWrapper.isEnableGroupEdit()&&this.isExpandable()&&!e.suppressDoubleClickExpand&&this.addManagedListener(c,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(c,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(e.node,sn.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();var p=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,sn.EVENT_ALL_CHILDREN_COUNT_CHANGED,p),this.addManagedListener(this.displayedGroupNode,sn.EVENT_MASTER_CHANGED,p),this.addManagedListener(this.displayedGroupNode,sn.EVENT_HAS_CHILDREN_CHANGED,p)},i.prototype.onExpandClicked=function(e){xa(e)||(oo(e),this.onExpandOrContract())},i.prototype.onExpandOrContract=function(){var e=this.displayedGroupNode;e.setExpanded(!e.expanded)},i.prototype.isExpandable=function(){if(this.showingValueForOpenedParent)return!0;var e=this.displayedGroupNode,s=this.columnModel.isPivotMode()&&e.leafGroup;if(!e.isExpandable()||e.footer||s)return!1;var c=this.params.column;return null==c||"string"!=typeof c.getColDef().showRowGroup||this.isShowRowGroupForThisRow()},i.prototype.showExpandAndContractIcons=function(){var e=this,l=e.displayedGroupNode,c=e.columnModel,p=e.params.node,m=this.isExpandable();if(m){var w=!!this.showingValueForOpenedParent||p.expanded;this.comp.setExpandedDisplayed(w),this.comp.setContractedDisplayed(!w)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);var x=c.isPivotMode(),A=x&&l.leafGroup,I=m&&!A,U=p.footer&&-1===p.level;this.comp.addOrRemoveCssClass("ag-cell-expandable",I),this.comp.addOrRemoveCssClass("ag-row-group",I),x?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",A):U||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!I)},i.prototype.onRowNodeIsExpandableChanged=function(){this.showExpandAndContractIcons(),this.setIndent()},i.prototype.setupIndent=function(){this.params.suppressPadding||(this.addManagedListener(this.params.node,sn.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},i.prototype.setIndent=function(){if(!this.gridOptionsWrapper.isGroupHideOpenParents()){var e=this.params,s=e.node,l=!!e.colDef,c=this.gridOptionsWrapper.isTreeData(),m=!l||c||!0===e.colDef.showRowGroup?s.uiLevel:0;e.padding>=0&&pn(function(){return console.warn("AG Grid: cellRendererParams.padding no longer works, it was deprecated in since v14.2 and removed in v26, configuring padding for groupCellRenderer should be done with Sass variables and themes. Please see the AG Grid documentation page for Themes, in particular the property $row-group-indent-size.")},"groupCellRenderer->doDeprecatedWay"),this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+m,this.comp.addOrRemoveCssClass(this.indentClass,!0)}},i.prototype.addFullWidthRowDraggerIfNeeded=function(){var e=this;if(this.params.fullWidth&&this.params.rowDrag){var s=new Vl(function(){return e.params.value},this.params.node);this.createManagedBean(s,this.context),this.eGui.insertAdjacentElement("afterbegin",s.getGui())}},i.prototype.isUserWantsSelected=function(){var e=this.params.checkbox;return"function"==typeof e?e(this.params):!0===e},i.prototype.addCheckboxIfNeeded=function(){var e=this,s=this.displayedGroupNode,l=this.isUserWantsSelected()&&!s.footer&&!s.rowPinned&&!s.detail;if(l){var c=new Qs;this.getContext().createBean(c),c.init({rowNode:s,column:this.params.column}),this.eCheckbox.appendChild(c.getGui()),this.addDestroyFunc(function(){return e.getContext().destroyBean(c)})}this.comp.setCheckboxVisible(l)},i.prototype.onKeyDown=function(e){Zc(e,$e.ENTER)&&!this.params.suppressEnterExpand&&(this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract())},i.prototype.onCellDblClicked=function(e){xa(e)||Lf(this.eExpanded,e)||Lf(this.eContracted,e)||this.onExpandOrContract()},Wl([B("expressionService")],i.prototype,"expressionService",void 0),Wl([B("valueFormatterService")],i.prototype,"valueFormatterService",void 0),Wl([B("columnModel")],i.prototype,"columnModel",void 0),Wl([B("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Wl([B("gridOptions")],i.prototype,"gridOptions",void 0),i}(Ye),fM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),fd=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Gu=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return fM(i,d),i.prototype.init=function(e){var s=this,l={setInnerRenderer:function(x,A){return s.setRenderDetails(x,A)},setChildCount:function(x){return s.eChildCount.innerHTML=x},addOrRemoveCssClass:function(x,A){return s.addOrRemoveCssClass(x,A)},setContractedDisplayed:function(x){return jn(s.eContracted,x)},setExpandedDisplayed:function(x){return jn(s.eExpanded,x)},setCheckboxVisible:function(x){return Lt(s.eCheckbox,"ag-invisible",!x)}},c=this.createManagedBean(new Sb),p=!e.colDef,m=this.getGui();c.init(l,m,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),p&&ji(m,"gridcell")},i.prototype.setRenderDetails=function(e,s){var l=this;if(e){var c=e.newAgStackInstance();if(!c)return;c.then(function(p){if(p){var m=function(){return l.context.destroyBean(p)};l.isAlive()?(l.eValue.appendChild(p.getGui()),l.addDestroyFunc(m)):m()}})}else this.eValue.innerText=s},i.prototype.destroy=function(){this.getContext().destroyBean(this.innerCellRenderer),d.prototype.destroy.call(this)},i.prototype.refresh=function(){return!1},i.TEMPLATE='<span class="ag-cell-wrapper">\n            <span class="ag-group-expanded" ref="eExpanded"></span>\n            <span class="ag-group-contracted" ref="eContracted"></span>\n            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>\n            <span class="ag-group-value" ref="eValue"></span>\n            <span class="ag-group-child-count" ref="eChildCount"></span>\n        </span>',fd([B("userComponentFactory")],i.prototype,"userComponentFactory",void 0),fd([Be("eExpanded")],i.prototype,"eExpanded",void 0),fd([Be("eContracted")],i.prototype,"eContracted",void 0),fd([Be("eCheckbox")],i.prototype,"eCheckbox",void 0),fd([Be("eValue")],i.prototype,"eValue",void 0),fd([Be("eChildCount")],i.prototype,"eChildCount",void 0),i}(dn),pM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Br=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ag=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return pM(i,d),i.prototype.init=function(e){e.node.failedLoad?this.setupFailed():this.setupLoading()},i.prototype.setupFailed=function(){this.eLoadingText.innerText="ERR"},i.prototype.setupLoading=function(){var e=oi("groupLoading",this.gridOptionsWrapper,null);e&&this.eLoadingIcon.appendChild(e);var s=this.gridOptionsWrapper.getLocaleTextFunc();this.eLoadingText.innerText=s("loadingOoo","Loading")},i.prototype.refresh=function(e){return!1},i.TEMPLATE='<div class="ag-loading">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',Br([Be("eLoadingIcon")],i.prototype,"eLoadingIcon",void 0),Br([Be("eLoadingText")],i.prototype,"eLoadingText",void 0),i}(dn),pd=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),hM=function(d){function i(){return d.call(this)||this}return pd(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(e){var s=this.gridOptionsWrapper.getOverlayLoadingTemplate()?this.gridOptionsWrapper.getOverlayLoadingTemplate():i.DEFAULT_LOADING_OVERLAY_TEMPLATE,l=this.gridOptionsWrapper.getLocaleTextFunc(),c=s.replace("[LOADING...]",l("loadingOoo","Loading..."));this.setTemplate(c)},i.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',i}(dn),Eb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),qo=function(d){function i(){return d.call(this)||this}return Eb(i,d),i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.init=function(e){var s=this.gridOptionsWrapper.getOverlayNoRowsTemplate()?this.gridOptionsWrapper.getOverlayNoRowsTemplate():i.DEFAULT_NO_ROWS_TEMPLATE,l=this.gridOptionsWrapper.getLocaleTextFunc(),c=s.replace("[NO_ROWS_TO_SHOW]",l("noRowsToShow","No Rows To Show"));this.setTemplate(c)},i.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',i}(dn),Ba=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),rC=function(d){function i(){return d.call(this,'<div class="ag-tooltip"></div>')||this}return Ba(i,d),i.prototype.init=function(e){var s=e.value;this.getGui().innerHTML=ra(s)},i}(Nu),lp=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Bu=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},sg=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.agGridDefaults={agDateInput:Zs,agColumnHeader:vb,agColumnGroupHeader:ip,agTextColumnFloatingFilter:od,agNumberColumnFloatingFilter:Y_,agDateColumnFloatingFilter:eg,agReadOnlyFloatingFilter:ys,agAnimateShowChangeCellRenderer:Q_,agAnimateSlideCellRenderer:ku,agGroupCellRenderer:Gu,agGroupRowRenderer:Gu,agLoadingCellRenderer:ag,agCellEditor:cd,agTextCellEditor:cd,agSelectCellEditor:ud,agPopupTextCellEditor:rg,agPopupSelectCellEditor:ld,agLargeTextCellEditor:X_,agTextColumnFilter:np,agNumberColumnFilter:tg,agDateColumnFilter:Qv,agLoadingOverlay:hM,agNoRowsOverlay:qo,agTooltipComponent:rC},e.agDeprecatedNames={set:{newComponentName:"agSetColumnFilter",propertyHolder:"filter"},text:{newComponentName:"agTextColumnFilter",propertyHolder:"filter"},number:{newComponentName:"agNumberColumnFilter",propertyHolder:"filter"},date:{newComponentName:"agDateColumnFilter",propertyHolder:"filter"},group:{newComponentName:"agGroupCellRenderer",propertyHolder:"cellRenderer"},animateShowChange:{newComponentName:"agAnimateShowChangeCellRenderer",propertyHolder:"cellRenderer"},animateSlide:{newComponentName:"agAnimateSlideCellRenderer",propertyHolder:"cellRenderer"},select:{newComponentName:"agSelectCellEditor",propertyHolder:"cellEditor"},largeText:{newComponentName:"agLargeTextCellEditor",propertyHolder:"cellEditor"},popupSelect:{newComponentName:"agPopupSelectCellEditor",propertyHolder:"cellEditor"},popupText:{newComponentName:"agPopupTextCellEditor",propertyHolder:"cellEditor"},richSelect:{newComponentName:"agRichSelectCellEditor",propertyHolder:"cellEditor"},headerComponent:{newComponentName:"agColumnHeader",propertyHolder:"headerComponent"}},e.jsComponents={},e.frameworkComponents={},e}return lp(i,d),i.prototype.init=function(){var e=this;null!=this.gridOptions.components&&In(this.gridOptions.components,function(s,l){return e.registerComponent(s,l)}),null!=this.gridOptions.frameworkComponents&&In(this.gridOptions.frameworkComponents,function(s,l){return e.registerFwComponent(s,l)})},i.prototype.registerDefaultComponent=function(e,s){var l=this.translateIfDeprecated(e);this.agGridDefaults[l]?console.error("Trying to overwrite a default component. You should call registerComponent"):this.agGridDefaults[l]=s},i.prototype.registerComponent=function(e,s){var l=this.translateIfDeprecated(e);this.frameworkComponents[l]?console.error("Trying to register a component that you have already registered for frameworks: "+l):this.jsComponents[l]=s},i.prototype.registerFwComponent=function(e,s){var l=this.translateIfDeprecated(e);this.jsComponents[l]?console.error("Trying to register a component that you have already registered for plain javascript: "+l):this.frameworkComponents[l]=s},i.prototype.retrieve=function(e){var s=this.translateIfDeprecated(e),l=this.frameworkComponents[s]||this.getFrameworkOverrides().frameworkComponent(s);if(l)return{componentFromFramework:!0,component:l};var c=this.jsComponents[s];if(c)return{componentFromFramework:!1,component:c};var p=this.agGridDefaults[s];return p?{componentFromFramework:!1,component:p}:(Object.keys(this.agGridDefaults).indexOf(s)<0&&console.warn("AG Grid: Looking for component ["+s+"] but it wasn't found."),null)},i.prototype.translateIfDeprecated=function(e){var s=this.agDeprecatedNames[e];return null!=s?(pn(function(){console.warn("ag-grid. Since v15.0 component names have been renamed to be namespaced. You should rename "+s.propertyHolder+":"+e+" to "+s.propertyHolder+":"+s.newComponentName)},"DEPRECATE_COMPONENT_"+e),s.newComponentName):e},Bu([B("gridOptions")],i.prototype,"gridOptions",void 0),Bu([Qe],i.prototype,"init",null),Bu([ht("userComponentRegistry")],i)}(Ye),bb={propertyName:"dateComponent",isCellRenderer:function(){return!1}},xb={propertyName:"headerComponent",isCellRenderer:function(){return!1}},vM={propertyName:"headerGroupComponent",isCellRenderer:function(){return!1}},Rb={propertyName:"cellRenderer",isCellRenderer:function(){return!0}},iC={propertyName:"cellEditor",isCellRenderer:function(){return!1}},po={propertyName:"innerRenderer",isCellRenderer:function(){return!0}},ug={propertyName:"loadingOverlayComponent",isCellRenderer:function(){return!1}},Ul={propertyName:"noRowsOverlayComponent",isCellRenderer:function(){return!1}},gM={propertyName:"tooltipComponent",isCellRenderer:function(){return!1}},oC={propertyName:"filter",isCellRenderer:function(){return!1}},Ab={propertyName:"floatingFilterComponent",isCellRenderer:function(){return!1}},Tb={propertyName:"toolPanel",isCellRenderer:function(){return!1}},Db={propertyName:"statusPanel",isCellRenderer:function(){return!1}},Mb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),zl=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},lg=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Mb(i,d),i.prototype.getHeaderCompDetails=function(e,s){return this.getCompDetails(e,xb,"agColumnHeader",s)},i.prototype.getHeaderGroupCompDetails=function(e){var s=e.columnGroup.getColGroupDef();return this.getCompDetails(s,vM,"agColumnGroupHeader",e)},i.prototype.getFullWidthCellRendererDetails=function(e,s,l){return this.getCompDetails(this.gridOptions,{propertyName:s,isCellRenderer:function(){return!0}},l,e)},i.prototype.getInnerRendererDetails=function(e,s){return this.getCompDetails(e,po,null,s)},i.prototype.getFullWidthGroupRowInnerCellRenderer=function(e,s){return this.getCompDetails(e,po,null,s)},i.prototype.getCellRendererDetails=function(e,s){return this.getCompDetails(e,Rb,null,s)},i.prototype.getCellEditorDetails=function(e,s){return this.getCompDetails(e,iC,"agCellEditor",s,!0)},i.prototype.getFilterDetails=function(e,s,l){return this.getCompDetails(e,oC,l,s,!0)},i.prototype.getDateCompDetails=function(e){return this.getCompDetails(this.gridOptions,bb,"agDateInput",e,!0)},i.prototype.getLoadingOverlayCompDetails=function(e){return this.getCompDetails(this.gridOptions,ug,"agLoadingOverlay",e,!0)},i.prototype.getNoRowsOverlayCompDetails=function(e){return this.getCompDetails(this.gridOptions,Ul,"agNoRowsOverlay",e,!0)},i.prototype.getTooltipCompDetails=function(e){return this.getCompDetails(e.colDef,gM,"agTooltipComponent",e,!0)},i.prototype.getSetFilterCellRendererDetails=function(e,s){return this.getCompDetails(e,Rb,null,s)},i.prototype.getFloatingFilterCompDetails=function(e,s,l){return this.getCompDetails(e,Ab,l,s)},i.prototype.getToolPanelCompDetails=function(e,s){return this.getCompDetails(e,Tb,null,s,!0)},i.prototype.getStatusPanelCompDetails=function(e,s){return this.getCompDetails(e,Db,null,s,!0)},i.prototype.getCompDetails=function(e,s,l,c,p){var m=this;void 0===p&&(p=!1);var x,A,I,w=s.propertyName;if(e){var U=e,Y=U[w+"Selector"],Q=Y?Y(c):null;Q?(x=Q.component,A=Q.frameworkComponent,I=Q.params):(x=U[w],A=U[w+"Framework"]),!0===x&&(x=void 0)}var oe=function(rn){var kt=m.userComponentRegistry.retrieve(rn);kt?(x=kt.componentFromFramework?void 0:kt.component,A=kt.componentFromFramework?kt.component:void 0):(x=void 0,A=void 0)};if("string"==typeof x&&oe(x),null==x&&null==A&&null!=l&&oe(l),x&&!this.agComponentUtils.doesImplementIComponent(x)&&(x=this.agComponentUtils.adaptFunction(w,x)),x||A){var Ve=this.mergeParamsWithApplicationProvidedParams(e,w,c,I),Me=null==x,Ze=x||A;return{componentFromFramework:Me,componentClass:Ze,params:Ve,type:s,newAgStackInstance:function(rn){return m.newAgStackInstance(Ze,Me,Ve,s,rn)}}}p&&console.error("Could not find component "+((e?e[w]:l)||l)+", did you forget to configure this component?")},i.prototype.newAgStackInstance=function(e,s,l,c,p){var w;if(s){var A=this.componentMetadataProvider.retrieve(c.propertyName);w=this.frameworkComponentWrapper.wrap(e,A.mandatoryMethodList,A.optionalMethodList,c,p)}else w=new e;var I=this.initComponent(w,l);return null==I?Xr.resolve(w):I.then(function(){return w})},i.prototype.mergeParamsWithApplicationProvidedParams=function(e,s,l,c){void 0===c&&(c=null);var p={};io(p,l);var m=e?e[s+"Params"]:null;return null!=m&&("function"==typeof m?io(p,m(l)):"object"==typeof m&&io(p,m)),io(p,c),p},i.prototype.initComponent=function(e,s){if(this.context.createBean(e),null!=e.init)return e.init(s)},zl([B("gridOptions")],i.prototype,"gridOptions",void 0),zl([B("agComponentUtils")],i.prototype,"agComponentUtils",void 0),zl([B("componentMetadataProvider")],i.prototype,"componentMetadataProvider",void 0),zl([B("userComponentRegistry")],i.prototype,"userComponentRegistry",void 0),zl([Ln("frameworkComponentWrapper")],i.prototype,"frameworkComponentWrapper",void 0),zl([ht("userComponentFactory")],i)}(Ye),cp=function(){function d(){}return d.parse=function(i){if(!i)return null;if(!0===i)return{toolPanels:[d.DEFAULT_COLUMN_COMP,d.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if("string"==typeof i)return d.parse([i]);if(Array.isArray(i)){var e=[];return i.forEach(function(l){var c=d.DEFAULT_BY_KEY[l];c?e.push(c):console.warn("ag-grid: the key "+l+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(d.DEFAULT_BY_KEY).join(","))}),0===e.length?null:{toolPanels:e,defaultToolPanel:e[0].id}}return{toolPanels:d.parseComponents(i.toolPanels),defaultToolPanel:i.defaultToolPanel,hiddenByDefault:i.hiddenByDefault,position:i.position}},d.parseComponents=function(i){var e=[];return i&&i.forEach(function(s){var l=null;if("string"==typeof s){var c=d.DEFAULT_BY_KEY[s];if(!c)return void console.warn("ag-grid: the key "+s+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(d.DEFAULT_BY_KEY).join(","));l=c}else l=s;e.push(l)}),e},d.DEFAULT_BY_KEY={columns:d.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"},filters:d.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"}},d}(),Ha=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},aC=function(d,i){return function(e,s){i(e,s,d)}},Hu=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],p=0,m=c.length;p<m;p++,l++)s[l]=c[p];return s};function Oe(d){return!0===d||"true"===d}function sC(d){return"number"==typeof d?d:"string"==typeof d?parseInt(d,10):void 0}function dg(d,i){var e=parseInt(d,10);return Fi(e)&&e>0?e:i}var vt=function(){function d(){this.propertyEventService=new qs,this.domDataKey="__AG_"+Math.random().toString(),this.destroyed=!1}var i;return i=d,d.prototype.agWire=function(e,s){this.gridOptions.api=e,this.gridOptions.columnApi=s,this.checkForDeprecated(),this.checkForViolations()},d.prototype.destroy=function(){this.gridOptions.api=null,this.gridOptions.columnApi=null,this.destroyed=!0},d.prototype.init=function(){var e=this;!0!==this.gridOptions.suppressPropertyNamesCheck&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties()),null!=this.gridOptions.sideBar&&(this.gridOptions.sideBar=cp.parse(this.gridOptions.sideBar));var s=this.useAsyncEvents();if(this.eventService.addGlobalListener(this.globalEventHandler.bind(this),s),this.isGroupSelectsChildren()&&this.isSuppressParentsInRowNodes()&&console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work"),this.isGroupSelectsChildren()&&(this.isRowSelectionMulti()||console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.isRowModelServerSide()&&console.warn("AG Grid: group selects children is NOT support for Server Side Row Model. This is because the rows are lazy loaded, so selecting a group is not possible asthe grid has no way of knowing what the children are.")),this.isGroupRemoveSingleChildren()&&this.isGroupHideOpenParents()&&console.warn("AG Grid: groupRemoveSingleChildren and groupHideOpenParents do not work with each other, you need to pick one. And don't ask us how to us these together on our support forum either you will get the same answer!"),this.isRowModelServerSide()){var l=function(m){return"AG Grid: '"+m+"' is not supported on the Server-Side Row Model"};Le(this.gridOptions.groupDefaultExpanded)&&console.warn(l("groupDefaultExpanded")),Le(this.gridOptions.groupDefaultExpanded)&&console.warn(l("groupIncludeFooter")),Le(this.gridOptions.groupDefaultExpanded)&&console.warn(l("groupIncludeTotalFooter"))}this.isEnableRangeSelection()&&jt.assertRegistered(K.GXE.RangeSelectionModule,"enableRangeSelection"),!this.isEnableRangeSelection()&&(this.isEnableRangeHandle()||this.isEnableFillHandle())&&console.warn("AG Grid: 'enableRangeHandle' and 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");var c=function(m){e.gridOptions.icons&&e.gridOptions.icons[m]&&console.warn("gridOptions.icons."+m+" is no longer supported. For information on how to style checkboxes and radio buttons, see https://www.ag-grid.com/javascript-grid-icons/")};c("radioButtonOff"),c("radioButtonOn"),c("checkboxChecked"),c("checkboxUnchecked"),c("checkboxIndeterminate"),this.getScrollbarWidth()},d.prototype.checkColumnDefProperties=function(){var e=this;null!=this.gridOptions.columnDefs&&this.gridOptions.columnDefs.forEach(function(s){var l=Object.getOwnPropertyNames(s),c=Hu(ar.ALL_PROPERTIES,ar.FRAMEWORK_PROPERTIES);e.checkProperties(l,c,c,"colDef","https://www.ag-grid.com/javascript-grid-column-properties/")})},d.prototype.checkGridOptionsProperties=function(){var e=Object.getOwnPropertyNames(this.gridOptions),s=Hu(ls.ALL_PROPERTIES,ls.FRAMEWORK_PROPERTIES,ve($).map(function(c){return ko.getCallbackForEvent(c)})),l=Hu(s,["api","columnApi"]);this.checkProperties(e,l,s,"gridOptions","https://www.ag-grid.com/javascript-grid-properties/")},d.prototype.checkProperties=function(e,s,l,c,p){var m=eb(e,s,l);In(m,function(w,x){console.warn("ag-grid: invalid "+c+" property '"+w+"' did you mean any of these: "+x.slice(0,8).join(", "))}),Object.keys(m).length>0&&console.warn("ag-grid: to see all the valid "+c+" properties please check: "+p)},d.prototype.getDomDataKey=function(){return this.domDataKey},d.prototype.getDomData=function(e,s){var l=e[this.getDomDataKey()];return l?l[s]:void 0},d.prototype.setDomData=function(e,s,l){var c=this.getDomDataKey(),p=e[c];ye(p)&&(e[c]=p={}),p[s]=l},d.prototype.isRowSelection=function(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection},d.prototype.isSuppressRowDeselection=function(){return Oe(this.gridOptions.suppressRowDeselection)},d.prototype.isRowSelectionMulti=function(){return"multiple"===this.gridOptions.rowSelection},d.prototype.isRowMultiSelectWithClick=function(){return Oe(this.gridOptions.rowMultiSelectWithClick)},d.prototype.getContext=function(){return this.gridOptions.context},d.prototype.isPivotMode=function(){return Oe(this.gridOptions.pivotMode)},d.prototype.isSuppressExpandablePivotGroups=function(){return Oe(this.gridOptions.suppressExpandablePivotGroups)},d.prototype.getPivotColumnGroupTotals=function(){return this.gridOptions.pivotColumnGroupTotals},d.prototype.getPivotRowTotals=function(){return this.gridOptions.pivotRowTotals},d.prototype.isRowModelInfinite=function(){return this.gridOptions.rowModelType===ce.ROW_MODEL_TYPE_INFINITE},d.prototype.isRowModelViewport=function(){return this.gridOptions.rowModelType===ce.ROW_MODEL_TYPE_VIEWPORT},d.prototype.isRowModelServerSide=function(){return this.gridOptions.rowModelType===ce.ROW_MODEL_TYPE_SERVER_SIDE},d.prototype.isRowModelDefault=function(){return ye(this.gridOptions.rowModelType)||this.gridOptions.rowModelType===ce.ROW_MODEL_TYPE_CLIENT_SIDE},d.prototype.isFullRowEdit=function(){return"fullRow"===this.gridOptions.editType},d.prototype.isSuppressFocusAfterRefresh=function(){return Oe(this.gridOptions.suppressFocusAfterRefresh)},d.prototype.isSuppressBrowserResizeObserver=function(){return Oe(this.gridOptions.suppressBrowserResizeObserver)},d.prototype.isSuppressMaintainUnsortedOrder=function(){return Oe(this.gridOptions.suppressMaintainUnsortedOrder)},d.prototype.isSuppressClearOnFillReduction=function(){return Oe(this.gridOptions.suppressClearOnFillReduction)},d.prototype.isShowToolPanel=function(){return Oe(this.gridOptions.sideBar&&Array.isArray(this.getSideBar().toolPanels))},d.prototype.getSideBar=function(){return this.gridOptions.sideBar},d.prototype.isSuppressTouch=function(){return Oe(this.gridOptions.suppressTouch)},d.prototype.isMaintainColumnOrder=function(){return Oe(this.gridOptions.maintainColumnOrder)},d.prototype.isSuppressRowTransform=function(){return Oe(this.gridOptions.suppressRowTransform)},d.prototype.isSuppressColumnStateEvents=function(){return Oe(this.gridOptions.suppressColumnStateEvents)},d.prototype.isAllowDragFromColumnsToolPanel=function(){return Oe(this.gridOptions.allowDragFromColumnsToolPanel)},d.prototype.useAsyncEvents=function(){return!Oe(this.gridOptions.suppressAsyncEvents)},d.prototype.isEnableCellChangeFlash=function(){return Oe(this.gridOptions.enableCellChangeFlash)},d.prototype.getCellFlashDelay=function(){return this.gridOptions.cellFlashDelay||500},d.prototype.getCellFadeDelay=function(){return this.gridOptions.cellFadeDelay||1e3},d.prototype.isGroupSelectsChildren=function(){var e=Oe(this.gridOptions.groupSelectsChildren);return e&&this.isTreeData()?(console.warn("AG Grid: groupSelectsChildren does not work with tree data"),!1):e},d.prototype.isSuppressRowHoverHighlight=function(){return Oe(this.gridOptions.suppressRowHoverHighlight)},d.prototype.isColumnHoverHighlight=function(){return Oe(this.gridOptions.columnHoverHighlight)},d.prototype.isGroupSelectsFiltered=function(){return Oe(this.gridOptions.groupSelectsFiltered)},d.prototype.isGroupHideOpenParents=function(){return Oe(this.gridOptions.groupHideOpenParents)},d.prototype.isGroupMaintainOrder=function(){return Oe(this.gridOptions.groupMaintainOrder)},d.prototype.getAutoGroupColumnDef=function(){return this.gridOptions.autoGroupColumnDef},d.prototype.isGroupMultiAutoColumn=function(){return this.gridOptions.groupDisplayType?this.matchesGroupDisplayType("multipleColumns",this.gridOptions.groupDisplayType):Oe(this.gridOptions.groupHideOpenParents)},d.prototype.isGroupUseEntireRow=function(e){return!e&&!!this.gridOptions.groupDisplayType&&this.matchesGroupDisplayType("groupRows",this.gridOptions.groupDisplayType)},d.prototype.isGroupSuppressAutoColumn=function(){return!(!this.gridOptions.groupDisplayType||!this.matchesGroupDisplayType("custom",this.gridOptions.groupDisplayType))||!!this.gridOptions.treeDataDisplayType&&this.matchesTreeDataDisplayType("custom",this.gridOptions.treeDataDisplayType)},d.prototype.isGroupRemoveSingleChildren=function(){return Oe(this.gridOptions.groupRemoveSingleChildren)},d.prototype.isGroupRemoveLowestSingleChildren=function(){return Oe(this.gridOptions.groupRemoveLowestSingleChildren)},d.prototype.isGroupIncludeFooter=function(){return Oe(this.gridOptions.groupIncludeFooter)},d.prototype.isGroupIncludeTotalFooter=function(){return Oe(this.gridOptions.groupIncludeTotalFooter)},d.prototype.isGroupSuppressBlankHeader=function(){return Oe(this.gridOptions.groupSuppressBlankHeader)},d.prototype.isSuppressRowClickSelection=function(){return Oe(this.gridOptions.suppressRowClickSelection)},d.prototype.isSuppressCellSelection=function(){return Oe(this.gridOptions.suppressCellSelection)},d.prototype.isSuppressMultiSort=function(){return Oe(this.gridOptions.suppressMultiSort)},d.prototype.isMultiSortKeyCtrl=function(){return"ctrl"===this.gridOptions.multiSortKey},d.prototype.isPivotSuppressAutoColumn=function(){return Oe(this.gridOptions.pivotSuppressAutoColumn)},d.prototype.isSuppressDragLeaveHidesColumns=function(){return Oe(this.gridOptions.suppressDragLeaveHidesColumns)},d.prototype.isSuppressScrollOnNewData=function(){return Oe(this.gridOptions.suppressScrollOnNewData)},d.prototype.isSuppressScrollWhenPopupsAreOpen=function(){return Oe(this.gridOptions.suppressScrollWhenPopupsAreOpen)},d.prototype.isRowDragEntireRow=function(){return Oe(this.gridOptions.rowDragEntireRow)},d.prototype.isSuppressRowDrag=function(){return Oe(this.gridOptions.suppressRowDrag)},d.prototype.isRowDragManaged=function(){return Oe(this.gridOptions.rowDragManaged)},d.prototype.isSuppressMoveWhenRowDragging=function(){return Oe(this.gridOptions.suppressMoveWhenRowDragging)},d.prototype.isRowDragMultiRow=function(){return Oe(this.gridOptions.rowDragMultiRow)},d.prototype.getDomLayout=function(){var e=this.gridOptions.domLayout||ce.DOM_LAYOUT_NORMAL;return-1===[ce.DOM_LAYOUT_PRINT,ce.DOM_LAYOUT_AUTO_HEIGHT,ce.DOM_LAYOUT_NORMAL].indexOf(e)?(pn(function(){return console.warn("AG Grid: "+e+" is not valid for DOM Layout, valid values are "+ce.DOM_LAYOUT_NORMAL+", "+ce.DOM_LAYOUT_AUTO_HEIGHT+" and "+ce.DOM_LAYOUT_PRINT)},"warn about dom layout values"),ce.DOM_LAYOUT_NORMAL):e},d.prototype.isSuppressHorizontalScroll=function(){return Oe(this.gridOptions.suppressHorizontalScroll)},d.prototype.isSuppressMaxRenderedRowRestriction=function(){return Oe(this.gridOptions.suppressMaxRenderedRowRestriction)},d.prototype.isExcludeChildrenWhenTreeDataFiltering=function(){return Oe(this.gridOptions.excludeChildrenWhenTreeDataFiltering)},d.prototype.isAlwaysShowHorizontalScroll=function(){return Oe(this.gridOptions.alwaysShowHorizontalScroll)},d.prototype.isAlwaysShowVerticalScroll=function(){return Oe(this.gridOptions.alwaysShowVerticalScroll)},d.prototype.isDebounceVerticalScrollbar=function(){return Oe(this.gridOptions.debounceVerticalScrollbar)},d.prototype.isSuppressLoadingOverlay=function(){return Oe(this.gridOptions.suppressLoadingOverlay)},d.prototype.isSuppressNoRowsOverlay=function(){return Oe(this.gridOptions.suppressNoRowsOverlay)},d.prototype.isSuppressFieldDotNotation=function(){return Oe(this.gridOptions.suppressFieldDotNotation)},d.prototype.getPinnedTopRowData=function(){return this.gridOptions.pinnedTopRowData},d.prototype.getPinnedBottomRowData=function(){return this.gridOptions.pinnedBottomRowData},d.prototype.isFunctionsPassive=function(){return Oe(this.gridOptions.functionsPassive)},d.prototype.isSuppressChangeDetection=function(){return Oe(this.gridOptions.suppressChangeDetection)},d.prototype.isSuppressAnimationFrame=function(){return Oe(this.gridOptions.suppressAnimationFrame)},d.prototype.getQuickFilterText=function(){return this.gridOptions.quickFilterText},d.prototype.isCacheQuickFilter=function(){return Oe(this.gridOptions.cacheQuickFilter)},d.prototype.isUnSortIcon=function(){return Oe(this.gridOptions.unSortIcon)},d.prototype.isSuppressMenuHide=function(){return Oe(this.gridOptions.suppressMenuHide)},d.prototype.isEnterMovesDownAfterEdit=function(){return Oe(this.gridOptions.enterMovesDownAfterEdit)},d.prototype.isEnterMovesDown=function(){return Oe(this.gridOptions.enterMovesDown)},d.prototype.isUndoRedoCellEditing=function(){return Oe(this.gridOptions.undoRedoCellEditing)},d.prototype.getUndoRedoCellEditingLimit=function(){return sC(this.gridOptions.undoRedoCellEditingLimit)},d.prototype.getRowStyle=function(){return this.gridOptions.rowStyle},d.prototype.getRowClass=function(){return this.gridOptions.rowClass},d.prototype.getRowStyleFunc=function(){return this.gridOptions.getRowStyle},d.prototype.getRowClassFunc=function(){return this.gridOptions.getRowClass},d.prototype.rowClassRules=function(){return this.gridOptions.rowClassRules},d.prototype.getServerSideStoreType=function(){return this.gridOptions.serverSideStoreType},d.prototype.getServerSideStoreParamsFunc=function(){return this.gridOptions.getServerSideStoreParams},d.prototype.getCreateChartContainerFunc=function(){return this.gridOptions.createChartContainer},d.prototype.getPopupParent=function(){return this.gridOptions.popupParent},d.prototype.getBlockLoadDebounceMillis=function(){return this.gridOptions.blockLoadDebounceMillis},d.prototype.getPostProcessPopupFunc=function(){return this.gridOptions.postProcessPopup},d.prototype.getPaginationNumberFormatterFunc=function(){return this.gridOptions.paginationNumberFormatter},d.prototype.getChildCountFunc=function(){return this.gridOptions.getChildCount},d.prototype.getIsApplyServerSideTransactionFunc=function(){return this.gridOptions.isApplyServerSideTransaction},d.prototype.getDefaultGroupOrderComparator=function(){return this.gridOptions.defaultGroupOrderComparator},d.prototype.getIsFullWidthCellFunc=function(){return this.gridOptions.isFullWidthCell},d.prototype.getFullWidthCellRendererParams=function(){return this.gridOptions.fullWidthCellRendererParams},d.prototype.isEmbedFullWidthRows=function(){return Oe(this.gridOptions.embedFullWidthRows)||Oe(this.gridOptions.deprecatedEmbedFullWidthRows)},d.prototype.isDetailRowAutoHeight=function(){return Oe(this.gridOptions.detailRowAutoHeight)},d.prototype.getSuppressKeyboardEventFunc=function(){return this.gridOptions.suppressKeyboardEvent},d.prototype.getBusinessKeyForNodeFunc=function(){return this.gridOptions.getBusinessKeyForNode},d.prototype.getApi=function(){return this.gridOptions.api},d.prototype.getColumnApi=function(){return this.gridOptions.columnApi},d.prototype.isImmutableData=function(){return Oe(this.gridOptions.immutableData)},d.prototype.isEnsureDomOrder=function(){return Oe(this.gridOptions.ensureDomOrder)},d.prototype.isEnableCharts=function(){return!!Oe(this.gridOptions.enableCharts)&&jt.assertRegistered(K.GXE.GridChartsModule,"enableCharts")},d.prototype.getColResizeDefault=function(){return this.gridOptions.colResizeDefault},d.prototype.isSingleClickEdit=function(){return Oe(this.gridOptions.singleClickEdit)},d.prototype.isSuppressClickEdit=function(){return Oe(this.gridOptions.suppressClickEdit)},d.prototype.isStopEditingWhenCellsLoseFocus=function(){return Oe(this.gridOptions.stopEditingWhenCellsLoseFocus)},d.prototype.getGroupDefaultExpanded=function(){return this.gridOptions.groupDefaultExpanded},d.prototype.getMaxConcurrentDatasourceRequests=function(){return this.gridOptions.maxConcurrentDatasourceRequests},d.prototype.getMaxBlocksInCache=function(){return this.gridOptions.maxBlocksInCache},d.prototype.getCacheOverflowSize=function(){return this.gridOptions.cacheOverflowSize},d.prototype.getPaginationPageSize=function(){return sC(this.gridOptions.paginationPageSize)},d.prototype.isPaginateChildRows=function(){return!(!this.isGroupRemoveSingleChildren()&&!this.isGroupRemoveLowestSingleChildren())||Oe(this.gridOptions.paginateChildRows)},d.prototype.getCacheBlockSize=function(){return dg(this.gridOptions.cacheBlockSize)},d.prototype.getInfiniteInitialRowCount=function(){return this.gridOptions.infiniteInitialRowCount},d.prototype.isPurgeClosedRowNodes=function(){return Oe(this.gridOptions.purgeClosedRowNodes)},d.prototype.isSuppressPaginationPanel=function(){return Oe(this.gridOptions.suppressPaginationPanel)},d.prototype.getRowData=function(){return this.gridOptions.rowData},d.prototype.isEnableRtl=function(){return Oe(this.gridOptions.enableRtl)},d.prototype.getRowGroupPanelShow=function(){return this.gridOptions.rowGroupPanelShow},d.prototype.getPivotPanelShow=function(){return this.gridOptions.pivotPanelShow},d.prototype.isAngularCompileRows=function(){return Oe(this.gridOptions.angularCompileRows)},d.prototype.isAngularCompileFilters=function(){return Oe(this.gridOptions.angularCompileFilters)},d.prototype.isDebug=function(){return Oe(this.gridOptions.debug)},d.prototype.getColumnDefs=function(){return this.gridOptions.columnDefs},d.prototype.getColumnTypes=function(){return this.gridOptions.columnTypes},d.prototype.getDatasource=function(){return this.gridOptions.datasource},d.prototype.getViewportDatasource=function(){return this.gridOptions.viewportDatasource},d.prototype.getServerSideDatasource=function(){return this.gridOptions.serverSideDatasource},d.prototype.isAccentedSort=function(){return Oe(this.gridOptions.accentedSort)},d.prototype.isEnableBrowserTooltips=function(){return Oe(this.gridOptions.enableBrowserTooltips)},d.prototype.isEnableCellExpressions=function(){return Oe(this.gridOptions.enableCellExpressions)},d.prototype.isEnableGroupEdit=function(){return Oe(this.gridOptions.enableGroupEdit)},d.prototype.isSuppressMiddleClickScrolls=function(){return Oe(this.gridOptions.suppressMiddleClickScrolls)},d.prototype.isPreventDefaultOnContextMenu=function(){return Oe(this.gridOptions.preventDefaultOnContextMenu)},d.prototype.isSuppressPreventDefaultOnMouseWheel=function(){return Oe(this.gridOptions.suppressPreventDefaultOnMouseWheel)},d.prototype.isSuppressColumnVirtualisation=function(){return Oe(this.gridOptions.suppressColumnVirtualisation)},d.prototype.isSuppressContextMenu=function(){return Oe(this.gridOptions.suppressContextMenu)},d.prototype.isAllowContextMenuWithControlKey=function(){return Oe(this.gridOptions.allowContextMenuWithControlKey)},d.prototype.isSuppressCopyRowsToClipboard=function(){return Oe(this.gridOptions.suppressCopyRowsToClipboard)},d.prototype.isCopyHeadersToClipboard=function(){return Oe(this.gridOptions.copyHeadersToClipboard)},d.prototype.isSuppressClipboardPaste=function(){return Oe(this.gridOptions.suppressClipboardPaste)},d.prototype.isSuppressLastEmptyLineOnPaste=function(){return Oe(this.gridOptions.suppressLastEmptyLineOnPaste)},d.prototype.isPagination=function(){return Oe(this.gridOptions.pagination)},d.prototype.isSuppressEnterpriseResetOnNewColumns=function(){return Oe(this.gridOptions.suppressEnterpriseResetOnNewColumns)},d.prototype.getProcessDataFromClipboardFunc=function(){return this.gridOptions.processDataFromClipboard},d.prototype.getAsyncTransactionWaitMillis=function(){return Le(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:ce.BATCH_WAIT_MILLIS},d.prototype.isSuppressMovableColumns=function(){return Oe(this.gridOptions.suppressMovableColumns)},d.prototype.isAnimateRows=function(){return!this.isEnsureDomOrder()&&Oe(this.gridOptions.animateRows)},d.prototype.isSuppressColumnMoveAnimation=function(){return Oe(this.gridOptions.suppressColumnMoveAnimation)},d.prototype.isSuppressAggFuncInHeader=function(){return Oe(this.gridOptions.suppressAggFuncInHeader)},d.prototype.isSuppressAggAtRootLevel=function(){return Oe(this.gridOptions.suppressAggAtRootLevel)},d.prototype.isSuppressAggFilteredOnly=function(){return Oe(this.gridOptions.suppressAggFilteredOnly)},d.prototype.isShowOpenedGroup=function(){return Oe(this.gridOptions.showOpenedGroup)},d.prototype.isReactUi=function(){return Oe(this.gridOptions.reactUi)},d.prototype.isEnableRangeSelection=function(){return jt.isRegistered(K.GXE.RangeSelectionModule)&&Oe(this.gridOptions.enableRangeSelection)},d.prototype.isEnableRangeHandle=function(){return Oe(this.gridOptions.enableRangeHandle)},d.prototype.isEnableFillHandle=function(){return Oe(this.gridOptions.enableFillHandle)},d.prototype.getFillHandleDirection=function(){var e=this.gridOptions.fillHandleDirection;return e?"x"!==e&&"y"!==e&&"xy"!==e?(pn(function(){return console.warn("AG Grid: valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'.")},"warn invalid fill direction"),"xy"):e:"xy"},d.prototype.getFillOperation=function(){return this.gridOptions.fillOperation},d.prototype.isSuppressMultiRangeSelection=function(){return Oe(this.gridOptions.suppressMultiRangeSelection)},d.prototype.isPaginationAutoPageSize=function(){return Oe(this.gridOptions.paginationAutoPageSize)},d.prototype.isRememberGroupStateWhenNewData=function(){return Oe(this.gridOptions.rememberGroupStateWhenNewData)},d.prototype.getIcons=function(){return this.gridOptions.icons},d.prototype.getAggFuncs=function(){return this.gridOptions.aggFuncs},d.prototype.getSortingOrder=function(){return this.gridOptions.sortingOrder},d.prototype.getAlignedGrids=function(){return this.gridOptions.alignedGrids},d.prototype.isMasterDetail=function(){return!!Oe(this.gridOptions.masterDetail)&&jt.assertRegistered(K.GXE.MasterDetailModule,"masterDetail")},d.prototype.isKeepDetailRows=function(){return Oe(this.gridOptions.keepDetailRows)},d.prototype.getKeepDetailRowsCount=function(){var e=this.gridOptions.keepDetailRowsCount;return Le(e)&&e>0?this.gridOptions.keepDetailRowsCount:10},d.prototype.getIsRowMasterFunc=function(){return this.gridOptions.isRowMaster},d.prototype.getIsRowSelectableFunc=function(){return this.gridOptions.isRowSelectable},d.prototype.getGroupRowRendererParams=function(){return this.gridOptions.groupRowRendererParams},d.prototype.getOverlayLoadingTemplate=function(){return this.gridOptions.overlayLoadingTemplate},d.prototype.getOverlayNoRowsTemplate=function(){return this.gridOptions.overlayNoRowsTemplate},d.prototype.isSuppressAutoSize=function(){return Oe(this.gridOptions.suppressAutoSize)},d.prototype.isEnableCellTextSelection=function(){return Oe(this.gridOptions.enableCellTextSelection)},d.prototype.isSuppressParentsInRowNodes=function(){return Oe(this.gridOptions.suppressParentsInRowNodes)},d.prototype.isSuppressClipboardApi=function(){return Oe(this.gridOptions.suppressClipboardApi)},d.prototype.isFunctionsReadOnly=function(){return Oe(this.gridOptions.functionsReadOnly)},d.prototype.isFloatingFilter=function(){return this.gridOptions.floatingFilter},d.prototype.isEnableCellTextSelect=function(){return Oe(this.gridOptions.enableCellTextSelection)},d.prototype.isEnableOldSetFilterModel=function(){return Oe(this.gridOptions.enableOldSetFilterModel)},d.prototype.getDefaultColDef=function(){return this.gridOptions.defaultColDef},d.prototype.getDefaultColGroupDef=function(){return this.gridOptions.defaultColGroupDef},d.prototype.getDefaultExportParams=function(e){return this.gridOptions.defaultExportParams?(console.warn("AG Grid: Since v25.2 `defaultExportParams`  has been replaced by `default"+w_(e)+"ExportParams`'"),this.gridOptions.defaultExportParams):"csv"===e&&this.gridOptions.defaultCsvExportParams?this.gridOptions.defaultCsvExportParams:"excel"===e&&this.gridOptions.defaultExcelExportParams?this.gridOptions.defaultExcelExportParams:void 0},d.prototype.isSuppressCsvExport=function(){return Oe(this.gridOptions.suppressCsvExport)},d.prototype.isAllowShowChangeAfterFilter=function(){return Oe(this.gridOptions.allowShowChangeAfterFilter)},d.prototype.isSuppressExcelExport=function(){return Oe(this.gridOptions.suppressExcelExport)},d.prototype.isSuppressMakeColumnVisibleAfterUnGroup=function(){return Oe(this.gridOptions.suppressMakeColumnVisibleAfterUnGroup)},d.prototype.getDataPathFunc=function(){return this.gridOptions.getDataPath},d.prototype.getIsServerSideGroupFunc=function(){return this.gridOptions.isServerSideGroup},d.prototype.getIsServerSideGroupOpenByDefaultFunc=function(){return this.gridOptions.isServerSideGroupOpenByDefault},d.prototype.getIsGroupOpenByDefaultFunc=function(){return this.gridOptions.isGroupOpenByDefault},d.prototype.getServerSideGroupKeyFunc=function(){return this.gridOptions.getServerSideGroupKey},d.prototype.getGroupRowAggNodesFunc=function(){return this.gridOptions.groupRowAggNodes},d.prototype.getContextMenuItemsFunc=function(){return this.gridOptions.getContextMenuItems},d.prototype.getMainMenuItemsFunc=function(){return this.gridOptions.getMainMenuItems},d.prototype.getRowNodeIdFunc=function(){return this.gridOptions.getRowNodeId},d.prototype.getNavigateToNextHeaderFunc=function(){return this.gridOptions.navigateToNextHeader},d.prototype.getTabToNextHeaderFunc=function(){return this.gridOptions.tabToNextHeader},d.prototype.getNavigateToNextCellFunc=function(){return this.gridOptions.navigateToNextCell},d.prototype.getTabToNextCellFunc=function(){return this.gridOptions.tabToNextCell},d.prototype.getGridTabIndex=function(){return(this.gridOptions.tabIndex||0).toString()},d.prototype.isTreeData=function(){return!!Oe(this.gridOptions.treeData)&&jt.assertRegistered(K.GXE.RowGroupingModule,"Tree Data")},d.prototype.isValueCache=function(){return Oe(this.gridOptions.valueCache)},d.prototype.isValueCacheNeverExpires=function(){return Oe(this.gridOptions.valueCacheNeverExpires)},d.prototype.isDeltaSort=function(){return Oe(this.gridOptions.deltaSort)},d.prototype.isAggregateOnlyChangedColumns=function(){return Oe(this.gridOptions.aggregateOnlyChangedColumns)},d.prototype.getProcessSecondaryColDefFunc=function(){return this.gridOptions.processSecondaryColDef},d.prototype.getProcessSecondaryColGroupDefFunc=function(){return this.gridOptions.processSecondaryColGroupDef},d.prototype.getSendToClipboardFunc=function(){return this.gridOptions.sendToClipboard},d.prototype.getProcessRowPostCreateFunc=function(){return this.gridOptions.processRowPostCreate},d.prototype.getProcessCellForClipboardFunc=function(){return this.gridOptions.processCellForClipboard},d.prototype.getProcessHeaderForClipboardFunc=function(){return this.gridOptions.processHeaderForClipboard},d.prototype.getProcessCellFromClipboardFunc=function(){return this.gridOptions.processCellFromClipboard},d.prototype.getViewportRowModelPageSize=function(){return dg(this.gridOptions.viewportRowModelPageSize,5)},d.prototype.getViewportRowModelBufferSize=function(){return function(d,i){return d>=0?d:5}(this.gridOptions.viewportRowModelBufferSize)},d.prototype.isServerSideSortingAlwaysResets=function(){return Oe(this.gridOptions.serverSideSortingAlwaysResets)},d.prototype.isServerSideFilteringAlwaysResets=function(){return Oe(this.gridOptions.serverSideFilteringAlwaysResets)},d.prototype.getPostSortFunc=function(){return this.gridOptions.postSort},d.prototype.getChartToolbarItemsFunc=function(){return this.gridOptions.getChartToolbarItems},d.prototype.getChartThemeOverrides=function(){return this.gridOptions.chartThemeOverrides},d.prototype.getCustomChartThemes=function(){return this.gridOptions.customChartThemes},d.prototype.getChartThemes=function(){return this.gridOptions.chartThemes||["ag-default","ag-material","ag-pastel","ag-vivid","ag-solar"]},d.prototype.getClipboardDeliminator=function(){return Le(this.gridOptions.clipboardDeliminator)?this.gridOptions.clipboardDeliminator:"\t"},d.prototype.setProperty=function(e,s,l){void 0===l&&(l=!1);var c=this.gridOptions,p=c[e];(l||p!==s)&&(c[e]=s,this.propertyEventService.dispatchEvent({type:e,currentValue:s,previousValue:p}))},d.prototype.addEventListener=function(e,s){this.propertyEventService.addEventListener(e,s)},d.prototype.removeEventListener=function(e,s){this.propertyEventService.removeEventListener(e,s)},d.prototype.isSkipHeaderOnAutoSize=function(){return!!this.gridOptions.skipHeaderOnAutoSize},d.prototype.getAutoSizePadding=function(){var e=this.gridOptions.autoSizePadding;return null!=e&&e>=0?e:20},d.prototype.getHeaderHeight=function(){return"number"==typeof this.gridOptions.headerHeight?this.gridOptions.headerHeight:this.getFromTheme(25,"headerHeight")},d.prototype.getFloatingFiltersHeight=function(){return"number"==typeof this.gridOptions.floatingFiltersHeight?this.gridOptions.floatingFiltersHeight:this.getFromTheme(25,"headerHeight")},d.prototype.getGroupHeaderHeight=function(){return"number"==typeof this.gridOptions.groupHeaderHeight?this.gridOptions.groupHeaderHeight:this.getHeaderHeight()},d.prototype.getPivotHeaderHeight=function(){return"number"==typeof this.gridOptions.pivotHeaderHeight?this.gridOptions.pivotHeaderHeight:this.getHeaderHeight()},d.prototype.getPivotGroupHeaderHeight=function(){return"number"==typeof this.gridOptions.pivotGroupHeaderHeight?this.gridOptions.pivotGroupHeaderHeight:this.getGroupHeaderHeight()},d.prototype.isExternalFilterPresent=function(){return"function"==typeof this.gridOptions.isExternalFilterPresent&&this.gridOptions.isExternalFilterPresent()},d.prototype.doesExternalFilterPass=function(e){return"function"==typeof this.gridOptions.doesExternalFilterPass&&this.gridOptions.doesExternalFilterPass(e)},d.prototype.getTooltipShowDelay=function(){var e=this.gridOptions.tooltipShowDelay;return Le(e)?(e<0&&console.warn("ag-grid: tooltipShowDelay should not be lower than 0"),Math.max(200,e)):null},d.prototype.isTooltipMouseTrack=function(){return Oe(this.gridOptions.tooltipMouseTrack)},d.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(){return Oe(this.gridOptions.suppressModelUpdateAfterUpdateTransaction)},d.prototype.getDocument=function(){var e=null;return this.gridOptions.getDocument&&Le(this.gridOptions.getDocument)&&(e=this.gridOptions.getDocument()),e&&Le(e)?e:document},d.prototype.getMinColWidth=function(){var e=this.gridOptions.minColWidth;if(Le(e)&&e>i.MIN_COL_WIDTH)return this.gridOptions.minColWidth;var s=this.getFromTheme(null,"headerCellMinWidth");return Le(s)?Math.max(s,i.MIN_COL_WIDTH):i.MIN_COL_WIDTH},d.prototype.getMaxColWidth=function(){return this.gridOptions.maxColWidth&&this.gridOptions.maxColWidth>i.MIN_COL_WIDTH?this.gridOptions.maxColWidth:null},d.prototype.getColWidth=function(){return"number"!=typeof this.gridOptions.colWidth||this.gridOptions.colWidth<i.MIN_COL_WIDTH?200:this.gridOptions.colWidth},d.prototype.getRowBuffer=function(){var e=this.gridOptions.rowBuffer;return"number"==typeof e?e<0&&(pn(function(){return console.warn("AG Grid: rowBuffer should not be negative")},"warn rowBuffer negative"),this.gridOptions.rowBuffer=e=0):e=ce.ROW_BUFFER_SIZE,e},d.prototype.getRowBufferInPixels=function(){return this.getRowBuffer()*this.getRowHeightAsNumber()},d.prototype.getScrollbarWidth=function(){if(null==this.scrollbarWidth){var s="number"==typeof this.gridOptions.scrollbarWidth&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:Gv();null!=s&&(this.scrollbarWidth=s,this.eventService.dispatchEvent({type:$.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth},d.prototype.checkForDeprecated=function(){var e=this.gridOptions;e.deprecatedEmbedFullWidthRows&&console.warn("AG Grid: since v21.2, deprecatedEmbedFullWidthRows has been replaced with embedFullWidthRows."),e.enableOldSetFilterModel&&console.warn("AG Grid: since v22.x, enableOldSetFilterModel is deprecated. Please move to the new Set Filter Model as the old one may not be supported in v23 onwards."),e.floatingFilter&&(console.warn("AG Grid: since v23.1, floatingFilter on the gridOptions is deprecated. Please use floatingFilter on the colDef instead."),e.defaultColDef||(e.defaultColDef={}),null==e.defaultColDef.floatingFilter&&(e.defaultColDef.floatingFilter=!0)),e.rowDeselection&&console.warn("AG Grid: since v24.x, rowDeselection is deprecated and the behaviour is true by default. Please use `suppressRowDeselection` to prevent rows from being deselected."),e.enableMultiRowDragging&&(e.rowDragMultiRow=!0,delete e.enableMultiRowDragging,console.warn("AG Grid: since v26.1, `enableMultiRowDragging` is deprecated. Please use `rowDragMultiRow`."));var s=function(m,w,x){null!=e[m]&&(console.warn("ag-grid: since version "+x+", '"+m+"' is deprecated / renamed, please use the new property name '"+w+"' instead."),null==e[w]&&(e[w]=e[m]))};if(s("batchUpdateWaitMillis","asyncTransactionWaitMillis","23.1.x"),s("deltaRowDataMode","immutableData","23.1.x"),(e.immutableColumns||e.deltaColumnMode)&&console.warn("AG Grid: since v24.0, immutableColumns and deltaColumnMode properties are gone. The grid now works like this as default. To keep column order maintained, set grid property applyColumnDefOrder=true"),s("suppressSetColumnStateEvents","suppressColumnStateEvents","24.0.x"),e.groupRowInnerRenderer||e.groupRowInnerRendererParams||e.groupRowInnerRendererFramework){console.warn("AG Grid: since v24.0, grid properties groupRowInnerRenderer, groupRowInnerRendererFramework and groupRowInnerRendererParams are no longer used."),console.warn("  Instead use the grid properties groupRowRendererParams.innerRenderer, groupRowRendererParams.innerRendererFramework and groupRowRendererParams.innerRendererParams."),console.warn("  For example instead of this:"),console.warn('    groupRowInnerRenderer: "myRenderer"'),console.warn("    groupRowInnerRendererParams: {x: a}"),console.warn("  Replace with this:"),console.warn("    groupRowRendererParams: {"),console.warn('      innerRenderer: "myRenderer",'),console.warn("      innerRendererParams: {x: a}"),console.warn("    }"),console.warn("  We have copied the properties over for you. However to stop this error message, please change your application code."),e.groupRowRendererParams||(e.groupRowRendererParams={});var l=e.groupRowRendererParams;e.groupRowInnerRenderer&&(l.innerRenderer=e.groupRowInnerRenderer),e.groupRowInnerRendererParams&&(l.innerRendererParams=e.groupRowInnerRendererParams),e.groupRowInnerRendererFramework&&(l.innerRendererFramework=e.groupRowInnerRendererFramework)}e.rememberGroupStateWhenNewData&&console.warn("AG Grid: since v24.0, grid property rememberGroupStateWhenNewData is deprecated. This feature was provided before Transaction Updates worked (which keep group state). Now that transaction updates are possible and they keep group state, this feature is no longer needed."),e.detailCellRendererParams&&e.detailCellRendererParams.autoHeight&&(console.warn("AG Grid: since v24.1, grid property detailCellRendererParams.autoHeight is replaced with grid property detailRowAutoHeight. This allows this feature to work when you provide a custom DetailCellRenderer"),e.detailRowAutoHeight=!0),e.suppressKeyboardEvent&&console.warn("AG Grid: since v24.1 suppressKeyboardEvent in the gridOptions has been deprecated and will be removed in\n                 future versions of AG Grid. If you need this to be set for every column use the defaultColDef property."),e.suppressEnterpriseResetOnNewColumns&&console.warn("AG Grid: since v25, grid property suppressEnterpriseResetOnNewColumns is deprecated. This was a temporary property to allow changing columns in Server Side Row Model without triggering a reload. Now that it is possible to dynamically change columns in the grid, this is no longer needed."),e.suppressColumnStateEvents&&console.warn('AG Grid: since v25, grid property suppressColumnStateEvents no longer works due to a refactor that we did. It should be possible to achieve similar using event.source, which would be "api" if the event was due to setting column state via the API'),e.defaultExportParams&&console.warn("AG Grid: since v25.2, the grid property `defaultExportParams` has been replaced by `defaultCsvExportParams` and `defaultExcelExportParams`."),e.stopEditingWhenGridLosesFocus&&(console.warn("AG Grid: since v25.2.2, the grid property `stopEditingWhenGridLosesFocus` has been replaced by `stopEditingWhenCellsLoseFocus`."),e.stopEditingWhenCellsLoseFocus=!0),e.applyColumnDefOrder&&console.warn("AG Grid: since v26.0, the grid property `applyColumnDefOrder` is no longer needed, as this is the default behaviour. To turn this behaviour off, set maintainColumnOrder=true"),e.groupMultiAutoColumn&&(console.warn("AG Grid: since v26.0, the grid property `groupMultiAutoColumn` has been replaced by `groupDisplayType = 'multipleColumns'`"),e.groupDisplayType="multipleColumns"),e.groupUseEntireRow&&(console.warn("AG Grid: since v26.0, the grid property `groupUseEntireRow` has been replaced by `groupDisplayType = 'groupRows'`"),e.groupDisplayType="groupRows"),e.groupSuppressAutoColumn&&(console.warn("AG Grid: since v26.0, the grid property `groupSuppressAutoColumn` has been replaced by `"+(e.treeData?"treeDataDisplayType":"groupDisplayType")+" = 'custom'`"),e.groupDisplayType="custom"),e.defaultGroupSortComparator&&(console.warn("AG Grid: since v26.0, the grid property `defaultGroupSortComparator` has been replaced by `defaultGroupOrderComparator`"),e.defaultGroupOrderComparator=e.defaultGroupSortComparator),e.colWidth&&console.warn("AG Grid: since v26.1, the grid property `colWidth` is deprecated and should be set via `defaultColDef.width`."),e.minColWidth&&console.warn("AG Grid: since v26.1, the grid property `minColWidth` is deprecated and should be set via `defaultColDef.minWidth`."),e.maxColWidth&&console.warn("AG Grid: since v26.1, the grid property `maxColWidth` is deprecated and should be set via `defaultColDef.maxWidth`.")},d.prototype.checkForViolations=function(){this.isTreeData()&&this.treeDataViolations()},d.prototype.treeDataViolations=function(){this.isRowModelDefault()&&ye(this.getDataPathFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data."),this.isRowModelServerSide()&&(ye(this.getIsServerSideGroupFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data."),ye(this.getServerSideGroupKeyFunc())&&console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data."))},d.prototype.getLocaleTextFunc=function(){if(this.gridOptions.localeTextFunc)return this.gridOptions.localeTextFunc;var e=this.gridOptions.localeText;return function(s,l){return e&&e[s]?e[s]:l}},d.prototype.globalEventHandler=function(e,s){if(!this.destroyed){var l=ko.getCallbackForEvent(e);"function"==typeof this.gridOptions[l]&&this.gridOptions[l](s)}},d.prototype.getRowHeightAsNumber=function(){return!this.gridOptions.rowHeight||ye(this.gridOptions.rowHeight)?this.getDefaultRowHeight():this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:(console.warn("AG Grid row height must be a number if not using standard row model"),this.getDefaultRowHeight())},d.prototype.getRowHeightForNode=function(e,s,l){if(void 0===s&&(s=!1),null==l&&(l=this.getDefaultRowHeight()),"function"==typeof this.gridOptions.getRowHeight){if(s)return{height:this.getDefaultRowHeight(),estimated:!0};var p=this.gridOptions.getRowHeight({node:e,data:e.data,api:this.gridOptions.api,context:this.gridOptions.context});if(this.isNumeric(p))return 0===p&&pn(function(){return console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.")},"invalidRowHeight"),{height:Math.max(1,p),estimated:!1}}return e.detail&&this.isMasterDetail()?this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}:{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:l,estimated:!1}},d.prototype.isDynamicRowHeight=function(){return"function"==typeof this.gridOptions.getRowHeight},d.prototype.getListItemHeight=function(){return this.getFromTheme(20,"listItemHeight")},d.prototype.chartMenuPanelWidth=function(){return this.environment.chartMenuPanelWidth()},d.prototype.isNumeric=function(e){return!isNaN(e)&&"number"==typeof e&&isFinite(e)},d.prototype.getFromTheme=function(e,s){var l=this.environment.getTheme().theme;return l&&0===l.indexOf("ag-theme")?this.environment.getSassVariable(l,s):e},d.prototype.getDefaultRowHeight=function(){return this.getFromTheme(25,"rowHeight")},d.prototype.matchesGroupDisplayType=function(e,s){var l=["groupRows","multipleColumns","custom","singleColumn"];return l.indexOf(s)<0?(console.warn("AG Grid: '"+s+"' is not a valid groupDisplayType value - possible values are: '"+l.join("', '")+"'"),!1):s===e},d.prototype.matchesTreeDataDisplayType=function(e,s){var l=["auto","custom"];return l.indexOf(s)<0?(console.warn("AG Grid: '"+s+"' is not a valid treeDataDisplayType value - possible values are: '"+l.join("', '")+"'"),!1):s===e},d.MIN_COL_WIDTH=10,d.PROP_HEADER_HEIGHT="headerHeight",d.PROP_GROUP_REMOVE_SINGLE_CHILDREN="groupRemoveSingleChildren",d.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN="groupRemoveLowestSingleChildren",d.PROP_PIVOT_HEADER_HEIGHT="pivotHeaderHeight",d.PROP_SUPPRESS_CLIPBOARD_PASTE="suppressClipboardPaste",d.PROP_GROUP_HEADER_HEIGHT="groupHeaderHeight",d.PROP_PIVOT_GROUP_HEADER_HEIGHT="pivotGroupHeaderHeight",d.PROP_NAVIGATE_TO_NEXT_CELL="navigateToNextCell",d.PROP_TAB_TO_NEXT_CELL="tabToNextCell",d.PROP_NAVIGATE_TO_NEXT_HEADER="navigateToNextHeader",d.PROP_TAB_TO_NEXT_HEADER="tabToNextHeader",d.PROP_IS_EXTERNAL_FILTER_PRESENT="isExternalFilterPresent",d.PROP_DOES_EXTERNAL_FILTER_PASS="doesExternalFilterPass",d.PROP_FLOATING_FILTERS_HEIGHT="floatingFiltersHeight",d.PROP_SUPPRESS_ROW_CLICK_SELECTION="suppressRowClickSelection",d.PROP_SUPPRESS_ROW_DRAG="suppressRowDrag",d.PROP_SUPPRESS_MOVE_WHEN_ROW_DRAG="suppressMoveWhenRowDragging",d.PROP_GET_ROW_CLASS="getRowClass",d.PROP_GET_ROW_STYLE="getRowStyle",d.PROP_GET_ROW_HEIGHT="getRowHeight",d.PROP_POPUP_PARENT="popupParent",d.PROP_DOM_LAYOUT="domLayout",d.PROP_FILL_HANDLE_DIRECTION="fillHandleDirection",d.PROP_GROUP_ROW_AGG_NODES="groupRowAggNodes",d.PROP_GET_BUSINESS_KEY_FOR_NODE="getBusinessKeyForNode",d.PROP_GET_CHILD_COUNT="getChildCount",d.PROP_PROCESS_ROW_POST_CREATE="processRowPostCreate",d.PROP_GET_ROW_NODE_ID="getRowNodeId",d.PROP_IS_FULL_WIDTH_CELL="isFullWidthCell",d.PROP_IS_ROW_SELECTABLE="isRowSelectable",d.PROP_IS_ROW_MASTER="isRowMaster",d.PROP_POST_SORT="postSort",d.PROP_GET_DOCUMENT="getDocument",d.PROP_POST_PROCESS_POPUP="postProcessPopup",d.PROP_DEFAULT_GROUP_ORDER_COMPARATOR="defaultGroupOrderComparator",d.PROP_PAGINATION_NUMBER_FORMATTER="paginationNumberFormatter",d.PROP_GET_CONTEXT_MENU_ITEMS="getContextMenuItems",d.PROP_GET_MAIN_MENU_ITEMS="getMainMenuItems",d.PROP_PROCESS_CELL_FOR_CLIPBOARD="processCellForClipboard",d.PROP_PROCESS_CELL_FROM_CLIPBOARD="processCellFromClipboard",d.PROP_SEND_TO_CLIPBOARD="sendToClipboard",d.PROP_PROCESS_TO_SECONDARY_COLDEF="processSecondaryColDef",d.PROP_PROCESS_SECONDARY_COL_GROUP_DEF="processSecondaryColGroupDef",d.PROP_GET_CHART_TOOLBAR_ITEMS="getChartToolbarItems",d.PROP_GET_SERVER_SIDE_STORE_PARAMS="getServerSideStoreParams",d.PROP_IS_SERVER_SIDE_GROUPS_OPEN_BY_DEFAULT="isServerSideGroupOpenByDefault",d.PROP_IS_APPLY_SERVER_SIDE_TRANSACTION="isApplyServerSideTransaction",d.PROP_IS_SERVER_SIDE_GROUP="isServerSideGroup",d.PROP_GET_SERVER_SIDE_GROUP_KEY="getServerSideGroupKey",Ha([B("gridOptions")],d.prototype,"gridOptions",void 0),Ha([B("eventService")],d.prototype,"eventService",void 0),Ha([B("environment")],d.prototype,"environment",void 0),Ha([aC(0,Li("gridApi")),aC(1,Li("columnApi"))],d.prototype,"agWire",null),Ha([Ii],d.prototype,"destroy",null),Ha([Qe],d.prototype,"init",null),i=Ha([ht("gridOptionsWrapper")],d)}(),Mt=function(){function d(i,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=i,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}return d.prototype.setInactive=function(){this.active=!1},d.prototype.isActive=function(){return this.active},d.prototype.depthFirstSearchChangedPath=function(i,e){if(i.children)for(var s=0;s<i.children.length;s++)this.depthFirstSearchChangedPath(i.children[s],e);e(i.rowNode)},d.prototype.depthFirstSearchEverything=function(i,e,s){if(i.childrenAfterGroup)for(var l=0;l<i.childrenAfterGroup.length;l++){var c=i.childrenAfterGroup[l];c.childrenAfterGroup?this.depthFirstSearchEverything(i.childrenAfterGroup[l],e,s):s&&e(c)}e(i)},d.prototype.forEachChangedNodeDepthFirst=function(i,e){void 0===e&&(e=!1),this.active?this.depthFirstSearchChangedPath(this.pathRoot,i):this.depthFirstSearchEverything(this.pathRoot.rowNode,i,e)},d.prototype.executeFromRootNode=function(i){i(this.pathRoot.rowNode)},d.prototype.createPathItems=function(i){for(var e=i,s=0;!this.mapToItems[e.id];)this.mapToItems[e.id]={rowNode:e,children:null},s++,e=e.parent;return s},d.prototype.populateColumnsMap=function(i,e){var s=this;if(this.keepingColumns&&e)for(var l=i;l;)this.nodeIdsToColumns[l.id]||(this.nodeIdsToColumns[l.id]={}),e.forEach(function(c){return s.nodeIdsToColumns[l.id][c.getId()]=!0}),l=l.parent},d.prototype.linkPathItems=function(i,e){for(var s=i,l=0;l<e;l++){var c=this.mapToItems[s.id],p=this.mapToItems[s.parent.id];p.children||(p.children=[]),p.children.push(c),s=s.parent}},d.prototype.addParentNode=function(i,e){if(i&&!i.isRowPinned()){var s=this.createPathItems(i);this.linkPathItems(i,s),this.populateColumnsMap(i,e)}},d.prototype.canSkip=function(i){return this.active&&!this.mapToItems[i.id]},d.prototype.getValueColumnsForNode=function(i,e){if(!this.keepingColumns)return e;var s=this.nodeIdsToColumns[i.id];return e.filter(function(c){return s[c.getId()]})},d.prototype.getNotValueColumnsForNode=function(i,e){if(!this.keepingColumns)return null;var s=this.nodeIdsToColumns[i.id];return e.filter(function(c){return!s[c.getId()]})},d}(),uC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),vd=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},fg=function(d,i){return function(e,s){i(e,s,d)}},jl=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return uC(i,d),i.prototype.setBeans=function(e){this.logger=e.create("selectionService"),this.reset(),this.gridOptionsWrapper.isRowModelDefault()&&this.addManagedListener(this.eventService,$.EVENT_ROW_DATA_CHANGED,this.reset.bind(this))},i.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.addManagedListener(this.eventService,$.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},i.prototype.setLastSelectedNode=function(e){this.lastSelectedNode=e},i.prototype.getLastSelectedNode=function(){return this.lastSelectedNode},i.prototype.getSelectedNodes=function(){var e=[];return In(this.selectedNodes,function(s,l){l&&e.push(l)}),e},i.prototype.getSelectedRows=function(){var e=[];return In(this.selectedNodes,function(s,l){l&&l.data&&e.push(l.data)}),e},i.prototype.removeGroupsFromSelection=function(){var e=this;In(this.selectedNodes,function(s,l){l&&l.group&&(e.selectedNodes[l.id]=void 0)})},i.prototype.updateGroupsFromChildrenSelections=function(e){if(this.gridOptionsWrapper.isGroupSelectsChildren()&&this.rowModel.getType()===ce.ROW_MODEL_TYPE_CLIENT_SIDE){var l=this.rowModel.getRootNode();e||(e=new Mt(!0,l)).setInactive(),e.forEachChangedNodeDepthFirst(function(c){c!==l&&c.calculateSelectedFromChildren()})}},i.prototype.getNodeForIdIfSelected=function(e){return this.selectedNodes[e]},i.prototype.clearOtherNodes=function(e){var s=this,l={},c=0;return In(this.selectedNodes,function(p,m){m&&m.id!==e.id&&(c+=s.selectedNodes[m.id].setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0}),s.groupSelectsChildren&&m.parent&&(l[m.parent.id]=m.parent))}),In(l,function(p,m){m.calculateSelectedFromChildren()}),c},i.prototype.onRowSelected=function(e){var s=e.node;this.groupSelectsChildren&&s.group||(this.selectedNodes[s.id]=s.isSelected()?s:void 0)},i.prototype.syncInRowNode=function(e,s){this.syncInOldRowNode(e,s),this.syncInNewRowNode(e)},i.prototype.syncInOldRowNode=function(e,s){Le(s)&&e.id!==s.id&&s&&this.selectedNodes[s.id]==e&&(this.selectedNodes[s.id]=s)},i.prototype.syncInNewRowNode=function(e){Le(this.selectedNodes[e.id])?(e.setSelectedInitialValue(!0),this.selectedNodes[e.id]=e):e.setSelectedInitialValue(!1)},i.prototype.reset=function(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null},i.prototype.getBestCostNodeSelection=function(){if(this.rowModel.getType()===ce.ROW_MODEL_TYPE_CLIENT_SIDE){var s=this.rowModel.getTopLevelNodes();if(null!==s){var l=[];return function c(p){for(var m=0,w=p.length;m<w;m++){var x=p[m];x.isSelected()?l.push(x):x.group&&x.children&&c(x.children)}}(s),l}console.warn("selectAll not available doing rowModel=virtual")}else console.warn("getBestCostNodeSelection is only available when using normal row model")},i.prototype.setRowModel=function(e){this.rowModel=e},i.prototype.isEmpty=function(){var e=0;return In(this.selectedNodes,function(s,l){l&&e++}),0===e},i.prototype.deselectAllRowNodes=function(e){void 0===e&&(e=!1);var s=function(w){return w.selectThisNode(!1)},l=this.rowModel.getType()===ce.ROW_MODEL_TYPE_CLIENT_SIDE;if(e){if(!l)return void console.error("AG Grid: selecting just filtered only works with In Memory Row Model");this.rowModel.forEachNodeAfterFilter(s)}else In(this.selectedNodes,function(m,w){w&&s(w)}),this.reset();l&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(),this.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.selectAllRowNodes=function(e){if(void 0===e&&(e=!1),this.rowModel.getType()!==ce.ROW_MODEL_TYPE_CLIENT_SIDE)throw new Error("selectAll only available with normal row model, ie not "+this.rowModel.getType());var s=this.rowModel,l=function(m){return m.selectThisNode(!0)};e?s.forEachNodeAfterFilter(l):s.forEachNode(l),this.rowModel.getType()===ce.ROW_MODEL_TYPE_CLIENT_SIDE&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(),this.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.selectNode=function(e,s){e&&e.setSelectedParams({newValue:!0,clearSelection:!s})},i.prototype.deselectIndex=function(e){var s=this.rowModel.getRow(e);this.deselectNode(s)},i.prototype.deselectNode=function(e){e&&e.setSelectedParams({newValue:!1,clearSelection:!1})},i.prototype.selectIndex=function(e,s){var l=this.rowModel.getRow(e);this.selectNode(l,s)},vd([B("rowModel")],i.prototype,"rowModel",void 0),vd([B("columnApi")],i.prototype,"columnApi",void 0),vd([B("gridApi")],i.prototype,"gridApi",void 0),vd([fg(0,Li("loggerFactory"))],i.prototype,"setBeans",null),vd([Qe],i.prototype,"init",null),vd([ht("selectionService")],i)}(Ye),pg=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},lC=function(){function d(){}return d.prototype.sizeColumnsToFit=function(i){void 0===i&&console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)"),this.columnModel.sizeColumnsToFit(i,"api")},d.prototype.setColumnGroupOpened=function(i,e){this.columnModel.setColumnGroupOpened(i,e,"api")},d.prototype.getColumnGroup=function(i,e){return this.columnModel.getColumnGroup(i,e)},d.prototype.getOriginalColumnGroup=function(i){return this.columnModel.getOriginalColumnGroup(i)},d.prototype.getDisplayNameForColumn=function(i,e){return this.columnModel.getDisplayNameForColumn(i,e)||""},d.prototype.getDisplayNameForColumnGroup=function(i,e){return this.columnModel.getDisplayNameForColumnGroup(i,e)||""},d.prototype.getColumn=function(i){return this.columnModel.getPrimaryColumn(i)},d.prototype.applyColumnState=function(i){return this.columnModel.applyColumnState(i,"api")},d.prototype.getColumnState=function(){return this.columnModel.getColumnState()},d.prototype.resetColumnState=function(){this.columnModel.resetColumnState("api")},d.prototype.getColumnGroupState=function(){return this.columnModel.getColumnGroupState()},d.prototype.setColumnGroupState=function(i){this.columnModel.setColumnGroupState(i,"api")},d.prototype.resetColumnGroupState=function(){this.columnModel.resetColumnGroupState("api")},d.prototype.isPinning=function(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()},d.prototype.isPinningLeft=function(){return this.columnModel.isPinningLeft()},d.prototype.isPinningRight=function(){return this.columnModel.isPinningRight()},d.prototype.getDisplayedColAfter=function(i){return this.columnModel.getDisplayedColAfter(i)},d.prototype.getDisplayedColBefore=function(i){return this.columnModel.getDisplayedColBefore(i)},d.prototype.setColumnVisible=function(i,e){this.columnModel.setColumnVisible(i,e,"api")},d.prototype.setColumnsVisible=function(i,e){this.columnModel.setColumnsVisible(i,e,"api")},d.prototype.setColumnPinned=function(i,e){this.columnModel.setColumnPinned(i,e,"api")},d.prototype.setColumnsPinned=function(i,e){this.columnModel.setColumnsPinned(i,e,"api")},d.prototype.getAllColumns=function(){return this.columnModel.getAllPrimaryColumns()},d.prototype.getAllGridColumns=function(){return this.columnModel.getAllGridColumns()},d.prototype.getDisplayedLeftColumns=function(){return this.columnModel.getDisplayedLeftColumns()},d.prototype.getDisplayedCenterColumns=function(){return this.columnModel.getDisplayedCenterColumns()},d.prototype.getDisplayedRightColumns=function(){return this.columnModel.getDisplayedRightColumns()},d.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},d.prototype.getAllDisplayedVirtualColumns=function(){return this.columnModel.getViewportColumns()},d.prototype.moveColumn=function(i,e){"number"==typeof i?(console.warn("AG Grid: you are using moveColumn(fromIndex, toIndex) - moveColumn takes a column key and a destination index, not two indexes, to move with indexes use moveColumnByIndex(from,to) instead"),this.columnModel.moveColumnByIndex(i,e,"api")):this.columnModel.moveColumn(i,e,"api")},d.prototype.moveColumnByIndex=function(i,e){this.columnModel.moveColumnByIndex(i,e,"api")},d.prototype.moveColumns=function(i,e){this.columnModel.moveColumns(i,e,"api")},d.prototype.moveRowGroupColumn=function(i,e){this.columnModel.moveRowGroupColumn(i,e)},d.prototype.setColumnAggFunc=function(i,e){this.columnModel.setColumnAggFunc(i,e)},d.prototype.setColumnWidth=function(i,e,s,l){void 0===s&&(s=!0),this.columnModel.setColumnWidths([{key:i,newWidth:e}],!1,s,l)},d.prototype.setColumnWidths=function(i,e,s){void 0===e&&(e=!0),this.columnModel.setColumnWidths(i,!1,e,s)},d.prototype.setPivotMode=function(i){this.columnModel.setPivotMode(i)},d.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},d.prototype.getSecondaryPivotColumn=function(i,e){return this.columnModel.getSecondaryPivotColumn(i,e)},d.prototype.setValueColumns=function(i){this.columnModel.setValueColumns(i,"api")},d.prototype.getValueColumns=function(){return this.columnModel.getValueColumns()},d.prototype.removeValueColumn=function(i){this.columnModel.removeValueColumn(i,"api")},d.prototype.removeValueColumns=function(i){this.columnModel.removeValueColumns(i,"api")},d.prototype.addValueColumn=function(i){this.columnModel.addValueColumn(i,"api")},d.prototype.addValueColumns=function(i){this.columnModel.addValueColumns(i,"api")},d.prototype.setRowGroupColumns=function(i){this.columnModel.setRowGroupColumns(i,"api")},d.prototype.removeRowGroupColumn=function(i){this.columnModel.removeRowGroupColumn(i,"api")},d.prototype.removeRowGroupColumns=function(i){this.columnModel.removeRowGroupColumns(i,"api")},d.prototype.addRowGroupColumn=function(i){this.columnModel.addRowGroupColumn(i,"api")},d.prototype.addRowGroupColumns=function(i){this.columnModel.addRowGroupColumns(i,"api")},d.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},d.prototype.setPivotColumns=function(i){this.columnModel.setPivotColumns(i,"api")},d.prototype.removePivotColumn=function(i){this.columnModel.removePivotColumn(i,"api")},d.prototype.removePivotColumns=function(i){this.columnModel.removePivotColumns(i,"api")},d.prototype.addPivotColumn=function(i){this.columnModel.addPivotColumn(i,"api")},d.prototype.addPivotColumns=function(i){this.columnModel.addPivotColumns(i,"api")},d.prototype.getPivotColumns=function(){return this.columnModel.getPivotColumns()},d.prototype.getLeftDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeLeft()},d.prototype.getCenterDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeCentre()},d.prototype.getRightDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeRight()},d.prototype.getAllDisplayedColumnGroups=function(){return this.columnModel.getAllDisplayedTrees()},d.prototype.autoSizeColumn=function(i,e){return this.columnModel.autoSizeColumn(i,e,"api")},d.prototype.autoSizeColumns=function(i,e){return this.columnModel.autoSizeColumns(i,e,"api")},d.prototype.autoSizeAllColumns=function(i){this.columnModel.autoSizeAllColumns(i,"api")},d.prototype.setSecondaryColumns=function(i){this.columnModel.setSecondaryColumns(i,"api")},d.prototype.getSecondaryColumns=function(){return this.columnModel.getSecondaryColumns()},d.prototype.getPrimaryColumns=function(){return this.columnModel.getAllPrimaryColumns()},d.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(yt.removeAllReferences.bind(window,this,"Column API"),100)},d.prototype.columnGroupOpened=function(i,e){console.error("AG Grid: columnGroupOpened no longer exists, use setColumnGroupOpened"),this.setColumnGroupOpened(i,e)},d.prototype.hideColumns=function(i,e){console.error("AG Grid: hideColumns is deprecated, use setColumnsVisible"),this.columnModel.setColumnsVisible(i,!e,"api")},d.prototype.hideColumn=function(i,e){console.error("AG Grid: hideColumn is deprecated, use setColumnVisible"),this.columnModel.setColumnVisible(i,!e,"api")},d.prototype.setState=function(i){return console.error("AG Grid: setState is deprecated, use setColumnState"),this.setColumnState(i)},d.prototype.getState=function(){return console.error("AG Grid: getState is deprecated, use getColumnState"),this.getColumnState()},d.prototype.resetState=function(){console.error("AG Grid: resetState is deprecated, use resetColumnState"),this.resetColumnState()},d.prototype.getAggregationColumns=function(){return console.error("AG Grid: getAggregationColumns is deprecated, use getValueColumns"),this.columnModel.getValueColumns()},d.prototype.removeAggregationColumn=function(i){console.error("AG Grid: removeAggregationColumn is deprecated, use removeValueColumn"),this.columnModel.removeValueColumn(i,"api")},d.prototype.removeAggregationColumns=function(i){console.error("AG Grid: removeAggregationColumns is deprecated, use removeValueColumns"),this.columnModel.removeValueColumns(i,"api")},d.prototype.addAggregationColumn=function(i){console.error("AG Grid: addAggregationColumn is deprecated, use addValueColumn"),this.columnModel.addValueColumn(i,"api")},d.prototype.addAggregationColumns=function(i){console.error("AG Grid: addAggregationColumns is deprecated, use addValueColumns"),this.columnModel.addValueColumns(i,"api")},d.prototype.setColumnAggFunction=function(i,e){console.error("AG Grid: setColumnAggFunction is deprecated, use setColumnAggFunc"),this.columnModel.setColumnAggFunc(i,e,"api")},d.prototype.getDisplayNameForCol=function(i){return console.error("AG Grid: getDisplayNameForCol is deprecated, use getDisplayNameForColumn"),this.getDisplayNameForColumn(i,null)},d.prototype.setColumnState=function(i){return console.error("AG Grid: setColumnState is deprecated, use applyColumnState"),this.columnModel.applyColumnState({state:i,applyOrder:!0},"api")},pg([B("columnModel")],d.prototype,"columnModel",void 0),pg([Ii],d.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),pg([ht("columnApi")],d)}();(function(d){d[d.FILL=0]="FILL",d[d.RANGE=1]="RANGE"})(K.Lm6||(K.Lm6={})),function(d){d[d.VALUE=0]="VALUE",d[d.DIMENSION=1]="DIMENSION"}(K.StC||(K.StC={}));var gd="ag-cell-range-selected",fC=function(){function d(i,e){this.beans=i,this.cellCtrl=e}return d.prototype.setComp=function(i){this.cellComp=i,this.onRangeSelectionChanged()},d.prototype.onRangeSelectionChanged=function(){this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(gd,0!==this.rangeCount),this.cellComp.addOrRemoveCssClass(gd+"-1",1===this.rangeCount),this.cellComp.addOrRemoveCssClass(gd+"-2",2===this.rangeCount),this.cellComp.addOrRemoveCssClass(gd+"-3",3===this.rangeCount),this.cellComp.addOrRemoveCssClass(gd+"-4",this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),this.cellComp.setAriaSelected(this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle()},d.prototype.updateRangeBorders=function(){var i=this.getRangeBorders(),e=this.isSingleCell(),l=!e&&i.right,c=!e&&i.bottom,p=!e&&i.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",!e&&i.top),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",l),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",c),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",p)},d.prototype.isSingleCell=function(){var i=this.beans.rangeService;return 1===this.rangeCount&&i&&!i.isMoreThanOneCell()},d.prototype.getHasChartRange=function(){var i=this.beans.rangeService;if(!this.rangeCount||!i)return!1;var e=i.getCellRanges();return e.length>0&&e.every(function(s){return bn([K.StC.DIMENSION,K.StC.VALUE],s.type)})},d.prototype.updateRangeBordersIfRangeCount=function(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())},d.prototype.getRangeBorders=function(){var I,U,i=this,e=this.beans.gridOptionsWrapper.isEnableRtl(),s=!1,l=!1,c=!1,p=!1,m=this.cellCtrl.getCellPosition().column,w=this.beans,x=w.rangeService,A=w.columnModel;e?(I=A.getDisplayedColAfter(m),U=A.getDisplayedColBefore(m)):(I=A.getDisplayedColBefore(m),U=A.getDisplayedColAfter(m));var Y=x.getCellRanges().filter(function(Ve){return x.isCellInSpecificRange(i.cellCtrl.getCellPosition(),Ve)});I||(p=!0),U||(l=!0);for(var Q=0;Q<Y.length&&!(s&&l&&c&&p);Q++){var oe=Y[Q],xe=x.getRangeStartRow(oe),He=x.getRangeEndRow(oe);!s&&this.beans.rowPositionUtils.sameRow(xe,this.cellCtrl.getCellPosition())&&(s=!0),!c&&this.beans.rowPositionUtils.sameRow(He,this.cellCtrl.getCellPosition())&&(c=!0),!p&&I&&oe.columns.indexOf(I)<0&&(p=!0),!l&&U&&oe.columns.indexOf(U)<0&&(l=!0)}return{top:s,right:l,bottom:c,left:p}},d.prototype.refreshHandle=function(){if(this.beans.rangeService){var i=this.shouldHaveSelectionHandle();this.selectionHandle&&!i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),i&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}},d.prototype.shouldHaveSelectionHandle=function(){var i=this.beans,e=i.gridOptionsWrapper,s=i.rangeService,l=s.getCellRanges(),c=l.length;if(this.rangeCount<1||c<1)return!1;var p=Vn(l),m=this.cellCtrl.getCellPosition(),w=e.isEnableFillHandle()&&!this.cellCtrl.isSuppressFillHandle(),x=e.isEnableRangeHandle(),A=1===c&&!this.cellCtrl.isEditing()&&(w||x);if(this.hasChartRange){var U=l[0].type===K.StC.DIMENSION&&s.isCellInSpecificRange(m,l[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",U),A=p.type===K.StC.VALUE}return A&&null!=p.endRow&&s.isContiguousRange(p)&&s.isBottomRightCell(p,m)},d.prototype.addSelectionHandle=function(){var i=this.beans,e=i.gridOptionsWrapper,l=Vn(i.rangeService.getCellRanges()).type,p=e.isEnableFillHandle()&&ye(l)?K.Lm6.FILL:K.Lm6.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==p&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(p)),this.selectionHandle.refresh(this.cellCtrl)},d.prototype.destroy=function(){this.beans.context.destroyBean(this.selectionHandle)},d}(),Fb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Nb=function(d){function i(e,s){var l=d.call(this)||this;return l.cellCtrl=e,l.beans=s,l.column=e.getColumn(),l.rowNode=e.getRowNode(),l.setupColSpan(),l.setupRowSpan(),l}return Fb(i,d),i.prototype.setupRowSpan=function(){this.rowSpan=this.column.getRowSpan(this.rowNode)},i.prototype.setComp=function(e){this.cellComp=e,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()},i.prototype.onDisplayColumnsChanged=function(){var e=this.getColSpanningList();Ir(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())},i.prototype.setupColSpan=function(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))},i.prototype.onWidthChanged=function(){if(this.cellComp){var e=this.getCellWidth();this.cellComp.setWidth(e+"px")}},i.prototype.getCellWidth=function(){return this.colsSpanning?this.colsSpanning.reduce(function(e,s){return e+s.getActualWidth()},0):this.column.getActualWidth()},i.prototype.getColSpanningList=function(){var e=this.column.getColSpan(this.rowNode),s=[];if(1===e)s.push(this.column);else for(var l=this.column,c=this.column.getPinned(),p=0;l&&p<e&&(s.push(l),(l=this.beans.columnModel.getDisplayedColAfter(l))&&!ye(l)&&c===l.getPinned());p++);return s},i.prototype.onLeftChanged=function(){if(this.cellComp){var e=this.modifyLeftForPrintLayout(this.getCellLeft());this.cellComp.setLeft(e+"px")}},i.prototype.getCellLeft=function(){return(this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?Vn(this.colsSpanning):this.column).getLeft()},i.prototype.modifyLeftForPrintLayout=function(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()===ce.PINNED_LEFT)return e;var s=this.beans.columnModel.getDisplayedColumnsLeftWidth();return this.column.getPinned()===ce.PINNED_RIGHT?s+this.beans.columnModel.getBodyContainerWidth()+(e||0):s+(e||0)},i.prototype.applyRowSpan=function(){if(1!==this.rowSpan){var e=this.beans.gridOptionsWrapper.getRowHeightAsNumber();this.cellComp.setHeight(e*this.rowSpan+"px"),this.cellComp.setZIndex("1")}},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i}(Ye),Yl=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),yd=function(d){function i(e,s){var l=d.call(this)||this;return l.staticClasses=[],l.cellCtrl=e,l.beans=s,l.column=e.getColumn(),l.rowNode=e.getRowNode(),l}return Yl(i,d),i.prototype.setComp=function(e,s){this.cellComp=e,this.scope=s,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()},i.prototype.applyCellClassRules=function(){var e=this,s=this.column.getColDef(),l={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:s,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),$scope:this.scope,context:this.beans.gridOptionsWrapper.getContext()};this.beans.stylingService.processClassRules(s.cellClassRules,l,function(c){return e.cellComp.addOrRemoveCssClass(c,!0)},function(c){return e.cellComp.addOrRemoveCssClass(c,!1)})},i.prototype.applyUserStyles=function(){var e=this.column.getColDef();if(e.cellStyle){var s;if("function"==typeof e.cellStyle){var l={column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,$scope:this.scope,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()};s=(0,e.cellStyle)(l)}else s=e.cellStyle;this.cellComp.setUserStyles(s)}},i.prototype.applyClassesFromColDef=function(){var e=this,s=this.column.getColDef(),l={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:s,rowIndex:this.rowNode.rowIndex,$scope:this.scope,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()};this.staticClasses.length&&this.staticClasses.forEach(function(c){return e.cellComp.addOrRemoveCssClass(c,!1)}),this.staticClasses=this.beans.stylingService.getStaticCellClasses(s,l),this.staticClasses.length&&this.staticClasses.forEach(function(c){return e.cellComp.addOrRemoveCssClass(c,!0)})},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i}(Ye),kb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),pC=function(d){function i(e,s){var l=d.call(this)||this;return l.ctrl=e,l.beans=s,l}return kb(i,d),i.prototype.setComp=function(e){this.comp=e,this.setupTooltip()},i.prototype.setupTooltip=function(){this.browserTooltips=this.beans.gridOptionsWrapper.isEnableBrowserTooltips(),this.updateTooltipText(),this.browserTooltips?this.comp.setTitle(null!=this.tooltipSanatised?this.tooltipSanatised:void 0):this.createTooltipFeatureIfNeeded()},i.prototype.updateTooltipText=function(){this.tooltip=this.ctrl.getTooltipValue(),this.tooltipSanatised=ra(this.tooltip)},i.prototype.createTooltipFeatureIfNeeded=function(){var e=this;null==this.genericTooltipFeature&&(this.genericTooltipFeature=this.createManagedBean(new qf({getTooltipParams:function(){return e.getTooltipParams()},getGui:function(){return e.ctrl.getGui()}}),this.beans.context))},i.prototype.refreshToolTip=function(){this.updateTooltipText(),this.browserTooltips&&this.comp.setTitle(null!=this.tooltipSanatised?this.tooltipSanatised:void 0)},i.prototype.getTooltipParams=function(){var e=this.ctrl,s=e.getColumn?e.getColumn():void 0,l=e.getColDef?e.getColDef():void 0,c=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:l,column:s,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:c,data:c?c.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0}},i.prototype.getTooltipText=function(){return this.tooltip},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i}(Ye),Zt=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},vg=function(){function d(){}return d.prototype.postConstruct=function(){this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail(),this.gridOptionsWrapper.isRowModelDefault()&&(this.clientSideRowModel=this.rowModel),this.gridOptionsWrapper.isRowModelServerSide()&&(this.serverSideRowModel=this.rowModel)},Zt([B("resizeObserverService")],d.prototype,"resizeObserverService",void 0),Zt([B("paginationProxy")],d.prototype,"paginationProxy",void 0),Zt([B("context")],d.prototype,"context",void 0),Zt([B("columnApi")],d.prototype,"columnApi",void 0),Zt([B("gridApi")],d.prototype,"gridApi",void 0),Zt([B("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),Zt([B("expressionService")],d.prototype,"expressionService",void 0),Zt([B("rowRenderer")],d.prototype,"rowRenderer",void 0),Zt([B("$compile")],d.prototype,"$compile",void 0),Zt([B("templateService")],d.prototype,"templateService",void 0),Zt([B("valueService")],d.prototype,"valueService",void 0),Zt([B("eventService")],d.prototype,"eventService",void 0),Zt([B("columnModel")],d.prototype,"columnModel",void 0),Zt([B("headerNavigationService")],d.prototype,"headerNavigationService",void 0),Zt([B("navigationService")],d.prototype,"navigationService",void 0),Zt([B("columnAnimationService")],d.prototype,"columnAnimationService",void 0),Zt([Ln("rangeService")],d.prototype,"rangeService",void 0),Zt([B("focusService")],d.prototype,"focusService",void 0),Zt([Ln("contextMenuFactory")],d.prototype,"contextMenuFactory",void 0),Zt([B("popupService")],d.prototype,"popupService",void 0),Zt([B("valueFormatterService")],d.prototype,"valueFormatterService",void 0),Zt([B("stylingService")],d.prototype,"stylingService",void 0),Zt([B("columnHoverService")],d.prototype,"columnHoverService",void 0),Zt([B("userComponentFactory")],d.prototype,"userComponentFactory",void 0),Zt([B("userComponentRegistry")],d.prototype,"userComponentRegistry",void 0),Zt([B("animationFrameService")],d.prototype,"animationFrameService",void 0),Zt([B("dragAndDropService")],d.prototype,"dragAndDropService",void 0),Zt([B("sortController")],d.prototype,"sortController",void 0),Zt([B("filterManager")],d.prototype,"filterManager",void 0),Zt([B("rowContainerHeightService")],d.prototype,"rowContainerHeightService",void 0),Zt([B("frameworkOverrides")],d.prototype,"frameworkOverrides",void 0),Zt([B("cellPositionUtils")],d.prototype,"cellPositionUtils",void 0),Zt([B("rowPositionUtils")],d.prototype,"rowPositionUtils",void 0),Zt([B("selectionService")],d.prototype,"selectionService",void 0),Zt([Ln("selectionHandleFactory")],d.prototype,"selectionHandleFactory",void 0),Zt([B("rowCssClassCalculator")],d.prototype,"rowCssClassCalculator",void 0),Zt([B("rowModel")],d.prototype,"rowModel",void 0),Zt([B("ctrlsService")],d.prototype,"ctrlsService",void 0),Zt([B("ctrlsFactory")],d.prototype,"ctrlsFactory",void 0),Zt([B("agStackComponentsRegistry")],d.prototype,"agStackComponentsRegistry",void 0),Zt([B("valueCache")],d.prototype,"valueCache",void 0),Zt([B("rowNodeEventThrottle")],d.prototype,"rowNodeEventThrottle",void 0),Zt([Qe],d.prototype,"postConstruct",null),Zt([ht("beans")],d)}(),mM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Gb=function(d){function i(e,s,l){var c=d.call(this)||this;return c.cellCtrl=e,c.beans=s,c.column=l,c}return mM(i,d),i.prototype.onMouseEvent=function(e,s){if(!xa(s))switch(e){case"click":this.onCellClicked(s);break;case"mousedown":case"touchstart":this.onMouseDown(s);break;case"dblclick":this.onCellDoubleClicked(s);break;case"mouseout":this.onMouseOut(s);break;case"mouseover":this.onMouseOver(s)}},i.prototype.onCellClicked=function(e){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(e),void e.preventDefault();var s=this.beans,l=s.eventService,c=s.gridOptionsWrapper,p=this.cellCtrl.createEvent(e,$.EVENT_CELL_CLICKED);l.dispatchEvent(p);var m=this.column.getColDef();m.onCellClicked&&window.setTimeout(function(){return m.onCellClicked(p)},0),(c.isSingleClickEdit()||m.singleClickEdit)&&!c.isSuppressClickEdit()&&this.cellCtrl.startRowOrCellEdit()},i.prototype.isDoubleClickOnIPad=function(){if(!Ys()||Ev("dblclick"))return!1;var e=(new Date).getTime(),s=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,s},i.prototype.onCellDoubleClicked=function(e){var s=this.column.getColDef(),l=this.cellCtrl.createEvent(e,$.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(l),"function"==typeof s.onCellDoubleClicked&&window.setTimeout(function(){return s.onCellDoubleClicked(l)},0),!this.beans.gridOptionsWrapper.isSingleClickEdit()&&!this.beans.gridOptionsWrapper.isSuppressClickEdit()&&this.cellCtrl.startRowOrCellEdit()},i.prototype.onMouseDown=function(e){var s=e.ctrlKey,l=e.metaKey,c=e.shiftKey,p=e.target,m=this.beans,w=m.eventService,x=m.rangeService;if(!this.isRightClickInExistingRange(e)){var A=x&&0!=x.getCellRanges().length;if(!c||!A){var I=(zi()||bl())&&!this.cellCtrl.isEditing()&&!WE(p);this.cellCtrl.focusCell(I)}if(c&&A&&e.preventDefault(),!this.containsWidget(p)){if(x){var U=this.cellCtrl.getCellPosition();c?x.extendLatestRangeToCell(U):x.setRangeToCell(U,s||l)}w.dispatchEvent(this.cellCtrl.createEvent(e,$.EVENT_CELL_MOUSE_DOWN))}}},i.prototype.isRightClickInExistingRange=function(e){var s=this.beans.rangeService;return!(!s||!s.isCellInAnyRange(this.cellCtrl.getCellPosition())||2!==e.button)},i.prototype.containsWidget=function(e){return xl(e,"ag-selection-checkbox",3)},i.prototype.onMouseOut=function(e){if(!this.mouseStayingInsideCell(e)){var s=this.cellCtrl.createEvent(e,$.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(s),this.beans.columnHoverService.clearMouseOver()}},i.prototype.onMouseOver=function(e){if(!this.mouseStayingInsideCell(e)){var s=this.cellCtrl.createEvent(e,$.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(s),this.beans.columnHoverService.setMouseOver([this.column])}},i.prototype.mouseStayingInsideCell=function(e){if(!e.target||!e.relatedTarget)return!1;var s=this.cellCtrl.getGui(),l=s.contains(e.target),c=s.contains(e.relatedTarget);return l&&c},i.prototype.destroy=function(){},i}(vg),Bb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Hb=function(d){function i(e,s,l,c,p,m){var w=d.call(this)||this;return w.cellCtrl=e,w.beans=s,w.column=l,w.rowNode=c,w.rowCtrl=m,w}return Bb(i,d),i.prototype.setComp=function(e){this.eGui=e},i.prototype.onKeyDown=function(e){var s=e.which||e.keyCode;switch(s){case $e.ENTER:this.onEnterKeyDown(e);break;case $e.F2:this.onF2KeyDown();break;case $e.ESCAPE:this.onEscapeKeyDown();break;case $e.TAB:this.onTabKeyDown(e);break;case $e.BACKSPACE:case $e.DELETE:this.onBackspaceOrDeleteKeyPressed(s);break;case $e.DOWN:case $e.UP:case $e.RIGHT:case $e.LEFT:this.onNavigationKeyPressed(e,s)}},i.prototype.onNavigationKeyPressed=function(e,s){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(s):this.beans.navigationService.navigateToNextCell(e,s,this.cellCtrl.getCellPosition(),!0),e.preventDefault())},i.prototype.onShiftRangeSelect=function(e){if(this.beans.rangeService){var s=this.beans.rangeService.extendLatestRangeInDirection(e);s&&this.beans.navigationService.ensureCellVisible(s)}},i.prototype.onTabKeyDown=function(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)},i.prototype.onBackspaceOrDeleteKeyPressed=function(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(e)},i.prototype.onEnterKeyDown=function(e){this.cellCtrl.isEditing()||this.rowCtrl.isEditing()?this.cellCtrl.stopEditingAndFocus():this.beans.gridOptionsWrapper.isEnterMovesDown()?this.beans.navigationService.navigateToNextCell(null,$e.DOWN,this.cellCtrl.getCellPosition(),!1):(this.cellCtrl.startRowOrCellEdit($e.ENTER),this.cellCtrl.isEditing()&&e.preventDefault())},i.prototype.onF2KeyDown=function(){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit($e.F2)},i.prototype.onEscapeKeyDown=function(){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))},i.prototype.onKeyPress=function(e){if(Ou(e)===this.eGui&&!this.cellCtrl.isEditing()){var c=String.fromCharCode(e.charCode);" "===c?this.onSpaceKeyPressed(e):P_(e)&&(this.cellCtrl.startRowOrCellEdit(null,c),e.preventDefault())}},i.prototype.onSpaceKeyPressed=function(e){var s=this.beans.gridOptionsWrapper;if(!this.cellCtrl.isEditing()&&s.isRowSelection()){var l=this.rowNode.isSelected(),c=!l;if(c||!s.isSuppressRowDeselection()){var p=this.beans.gridOptionsWrapper.isGroupSelectsFiltered(),m=this.rowNode.setSelectedParams({newValue:c,rangeSelect:e.shiftKey,groupSelectsFiltered:p});void 0===l&&0===m&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:p})}}e.preventDefault()},i.prototype.destroy=function(){},i}(Ye),pp=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Kl=function(d){function i(e,s,l,c){var p=d.call(this,'<div class="ag-drag-handle ag-row-drag" draggable="true"></div>')||this;return p.rowNode=e,p.column=s,p.beans=l,p.eCell=c,p}return pp(i,d),i.prototype.postConstruct=function(){this.getGui().appendChild(oi("rowDrag",this.beans.gridOptionsWrapper,null)),this.addGuiEventListener("mousedown",function(s){s.stopPropagation()}),this.addDragSource(),this.checkVisibility()},i.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},i.prototype.onDragStart=function(e){var s=this,l=this.column.getColDef().dndSourceOnRowDrag,c=zi();c||e.dataTransfer.setDragImage(this.eCell,0,0),l?l({rowNode:this.rowNode,dragEvent:e}):function(){try{var w=JSON.stringify(s.rowNode.data);c?e.dataTransfer.setData("text",w):(e.dataTransfer.setData("application/json",w),e.dataTransfer.setData("text/plain",w))}catch(x){}}()},i.prototype.checkVisibility=function(){var e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)},function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Qe],i.prototype,"postConstruct",null),i}(dn),Vb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),hp=function(){return hp=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},hp.apply(this,arguments)},yg="ag-cell-not-inline-editing",qb=0,Xi=function(d){function i(e,s,l,c){var p=d.call(this)||this;return p.suppressRefreshCell=!1,p.column=e,p.rowNode=s,p.beans=l,p.rowCtrl=c,p.instanceId=e.getId()+"-"+qb++,p.createCellPosition(),p.addFeatures(),p}return Vb(i,d),i.prototype.addFeatures=function(){var e=this;this.cellPositionFeature=new Nb(this,this.beans),this.addDestroyFunc(function(){return e.cellPositionFeature.destroy()}),this.cellCustomStyleFeature=new yd(this,this.beans),this.addDestroyFunc(function(){return e.cellCustomStyleFeature.destroy()}),this.cellMouseListenerFeature=new Gb(this,this.beans,this.column),this.addDestroyFunc(function(){return e.cellMouseListenerFeature.destroy()}),this.cellKeyboardListenerFeature=new Hb(this,this.beans,this.column,this.rowNode,this.scope,this.rowCtrl),this.addDestroyFunc(function(){return e.cellKeyboardListenerFeature.destroy()}),this.beans.rangeService&&this.beans.gridOptionsWrapper.isEnableRangeSelection()&&(this.cellRangeFeature=new fC(this.beans,this),this.addDestroyFunc(function(){return e.cellRangeFeature.destroy()})),this.addTooltipFeature()},i.prototype.addTooltipFeature=function(){var e=this;this.tooltipFeature=new pC({getColumn:function(){return e.column},getColDef:function(){return e.column.getColDef()},getRowIndex:function(){return e.cellPosition.rowIndex},getRowNode:function(){return e.rowNode},getGui:function(){return e.getGui()},getLocation:function(){return"cell"},getTooltipValue:function(){var p=e.column.getColDef(),m=e.rowNode.data;if(p.tooltipField&&Le(m))return Df(m,p.tooltipField,e.column.isTooltipFieldContainsDots());var w=p.tooltipValueGetter;return w?w({location:"cell",api:e.beans.gridOptionsWrapper.getApi(),columnApi:e.beans.gridOptionsWrapper.getColumnApi(),context:e.beans.gridOptionsWrapper.getContext(),colDef:e.column.getColDef(),column:e.column,rowIndex:e.cellPosition.rowIndex,node:e.rowNode,data:e.rowNode.data,value:e.value,valueFormatted:e.valueFormatted}):null},getValueFormatted:function(){return e.valueFormatted}},this.beans),this.addDestroyFunc(function(){return e.tooltipFeature.destroy()})},i.prototype.setComp=function(e,s,l,c,p){this.cellComp=e,this.gow=this.beans.gridOptionsWrapper,this.scope=s,this.eGui=l,this.printLayout=c,this.updateAndFormatValue(!0),this.addDomData(),this.onCellFocused(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAriaExpanded(),this.setupAutoHeight();var m=ra(this.column.getId()),w=this.beans.columnModel.getAriaColumnIndex(this.column);this.cellComp.setTabIndex(-1),this.cellComp.setRole("gridcell"),this.cellComp.setAriaColIndex(w),this.cellComp.setColId(m),this.cellComp.setUnselectable(this.beans.gridOptionsWrapper.isEnableCellTextSelection()?null:"on"),this.cellPositionFeature.setComp(e),this.cellCustomStyleFeature.setComp(e,s),this.tooltipFeature.setComp(e),this.cellKeyboardListenerFeature.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e),p&&this.isCellEditable()?this.startEditing():this.showValue()},i.prototype.setupAutoHeight=function(){var e=this;if(this.column.getColDef().autoHeight){var s=function p(m){var w=e.beans.gridOptionsWrapper.getDocument();w&&w.contains(e.eGui)||!(m<5)?e.rowNode.setRowAutoHeight(e.eGui.offsetHeight,e.column):e.beans.frameworkOverrides.setTimeout(function(){return p(m++)},0)},l=function(){return s(0)};l();var c=this.beans.resizeObserverService.observeResize(this.eGui,l);this.addDestroyFunc(function(){c(),e.rowNode.setRowAutoHeight(void 0,e.column)})}},i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.showValue=function(e){void 0===e&&(e=!1);var s=null!=this.valueFormatted?this.valueFormatted:this.value,l=this.createCellRendererParams(),c=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),l);this.cellComp.setRenderDetails(c,s,e),this.refreshHandle()},i.prototype.setupControlComps=function(){var e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource);var s=this.beans.gridOptionsWrapper.isEnableCellTextSelection()||1==this.column.getColDef().autoHeight;this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag),this.cellComp.setForceWrapper(s)},i.prototype.isIncludeControl=function(e){return!(null!=this.rowNode.rowPinned||"function"!=typeof e&&!0!==e)},i.prototype.setupAriaExpanded=function(){var e=this,s=this.column.getColDef();if(this.rowNode.isExpandable()){var l=s.showRowGroup,c=this.rowNode.rowGroupColumn,p=!0===l,m=c&&c.getColId()===l;if(p||m){var x=function(){e.cellComp.setAriaExpanded(!!e.rowNode.expanded)};this.addManagedListener(this.rowNode,sn.EVENT_EXPANDED_CHANGED,x),x()}}},i.prototype.refreshShouldDestroy=function(){var e=this.column.getColDef(),s=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),l=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),c=this.includeDndSource!=this.isIncludeControl(e.dndSource);return s||l||c},i.prototype.startEditing=function(e,s,l){if(void 0===e&&(e=null),void 0===s&&(s=null),void 0===l&&(l=!1),this.isCellEditable()&&!this.editing){var c=this.createCellEditorParams(e,s,l),p=this.column.getColDef(),m=this.beans.userComponentFactory.getCellEditorDetails(p,c),w=!!p.cellEditorPopup,x=p.cellEditorPopupPosition;this.setEditing(!0,w),this.cellComp.setEditDetails(m,w,x);var A=this.createEvent(null,$.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(A)}},i.prototype.setEditing=function(e,s){void 0===s&&(s=!1),this.editing!==e&&(this.editing=e,this.editingInPopup=s,this.setInlineEditingClass())},i.prototype.stopRowOrCellEdit=function(e){void 0===e&&(e=!1),this.beans.gridOptionsWrapper.isFullRowEdit()?this.rowCtrl.stopRowEditing(e):this.stopEditing(e)},i.prototype.onPopupEditorClosed=function(){!this.isEditing()||this.stopEditingAndFocus()},i.prototype.takeValueFromCellEditor=function(e){var s={newValueExists:!1};if(e)return s;var l=this.cellComp.getCellEditor();return l?l.isCancelAfterEnd&&l.isCancelAfterEnd()?s:{newValue:l.getValue(),newValueExists:!0}:s},i.prototype.saveNewValue=function(e,s){s!==e&&(this.suppressRefreshCell=!0,this.rowNode.setDataValue(this.column,s),this.suppressRefreshCell=!1)},i.prototype.stopEditing=function(e){if(void 0===e&&(e=!1),this.editing){var s=this.takeValueFromCellEditor(e),l=s.newValue,c=s.newValueExists,p=this.getValueFromValueService();c&&this.saveNewValue(p,l),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(p,l)}},i.prototype.dispatchEditingStoppedEvent=function(e,s){var l=hp(hp({},this.createEvent(null,$.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:s});this.beans.eventService.dispatchEvent(l)},i.prototype.setInlineEditingClass=function(){if(this.isAlive()){var e=this.editing&&!this.editingInPopup,s=this.editing&&this.editingInPopup;this.cellComp.addOrRemoveCssClass("ag-cell-inline-editing",e),this.cellComp.addOrRemoveCssClass(yg,!e),this.cellComp.addOrRemoveCssClass("ag-cell-popup-editing",s),this.rowCtrl.setInlineEditingCss(this.editing)}},i.prototype.hackSayEditingInPopup=function(){this.editingInPopup||(this.editingInPopup=!0,this.setInlineEditingClass())},i.prototype.createCellEditorParams=function(e,s,l){var c={value:this.getValueFromValueService(),keyPress:e,charPress:s,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsWrapper.getApi(),cellStartedEdit:l,columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)};return this.scope&&(c.$scope=this.scope),c},i.prototype.createCellRendererParams=function(){var e=this,l={value:this.value,valueFormatted:this.valueFormatted,getValue:this.getValueFromValueService.bind(this),setValue:function(p){return e.beans.valueService.setValue(e.rowNode,e.column,p)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:function(p,m,w,x){return e.registerRowDragger(p,m,x)},addRowCompListener:function(p,m){console.warn("AG Grid: since AG Grid v26, params.addRowCompListener() is deprecated. If you need this functionality, please contact AG Grid support and advise why so that we can revert with an appropriate workaround, as we dont have any valid use cases for it. This method was originally provided as a work around to know when cells were destroyed in AG Grid before custom Cell Renderers could be provided."),e.rowCtrl.addEventListener(p,m)}};return this.scope&&(l.$scope=this.scope),l},i.prototype.parseValue=function(e){var s=this.column.getColDef(),l={node:this.rowNode,data:this.rowNode.data,oldValue:this.getValue(),newValue:e,colDef:s,column:this.column,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()},c=s.valueParser;return Le(c)?this.beans.expressionService.evaluate(c,l):e},i.prototype.setFocusOutOnEditor=function(){if(this.editing){var e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}},i.prototype.setFocusInOnEditor=function(){if(this.editing){var e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}},i.prototype.onCellChanged=function(e){e.column===this.column&&this.refreshCell({})},i.prototype.refreshCell=function(e){if(!this.suppressRefreshCell&&!this.editing){var s=this.column.getColDef(),l=null!=e&&!!e.newData,c=null!=e&&!!e.suppressFlash||!!s.suppressCellFlash,m=e&&e.forceRefresh||null==s.field&&null==s.valueGetter&&null==s.showRowGroup||l,w=this.updateAndFormatValue();if(m||w){this.showValue(l);var A=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!c&&!A&&(this.beans.gridOptionsWrapper.isEnableCellChangeFlash()||s.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature.applyUserStyles(),this.cellCustomStyleFeature.applyClassesFromColDef()}this.refreshToolTip(),this.cellCustomStyleFeature.applyCellClassRules()}},i.prototype.stopEditingAndFocus=function(e){void 0===e&&(e=!1),this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit()},i.prototype.navigateAfterEdit=function(){this.beans.gridOptionsWrapper.isFullRowEdit()||this.beans.gridOptionsWrapper.isEnterMovesDownAfterEdit()&&this.beans.navigationService.navigateToNextCell(null,$e.DOWN,this.getCellPosition(),!1)},i.prototype.flashCell=function(e){this.animateCell("data-changed",e&&e.flashDelay,e&&e.fadeDelay)},i.prototype.animateCell=function(e,s,l){var c=this,p="ag-cell-"+e,m="ag-cell-"+e+"-animation",w=this.beans.gridOptionsWrapper;s||(s=w.getCellFlashDelay()),Le(l)||(l=w.getCellFadeDelay()),this.cellComp.addOrRemoveCssClass(p,!0),this.cellComp.addOrRemoveCssClass(m,!1),window.setTimeout(function(){c.cellComp.addOrRemoveCssClass(p,!1),c.cellComp.addOrRemoveCssClass(m,!0),c.cellComp.setTransition("background-color "+l+"ms"),window.setTimeout(function(){c.cellComp.addOrRemoveCssClass(m,!1),c.cellComp.setTransition("transition")},l)},s)},i.prototype.onFlashCells=function(e){var s=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[s]&&this.animateCell("highlight")},i.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},i.prototype.isSuppressFillHandle=function(){return this.column.isSuppressFillHandle()},i.prototype.formatValue=function(e){var s=this.callValueFormatter(e);return null!=s?s:e},i.prototype.callValueFormatter=function(e){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,this.scope,e)},i.prototype.updateAndFormatValue=function(e){void 0===e&&(e=!1);var s=this.value,l=this.valueFormatted;return this.value=this.getValueFromValueService(),this.valueFormatted=this.callValueFormatter(this.value),!!e||!this.valuesAreEqual(s,this.value)||this.valueFormatted!=l},i.prototype.valuesAreEqual=function(e,s){var l=this.column.getColDef();return l.equals?l.equals(e,s):e===s},i.prototype.getComp=function(){return this.cellComp},i.prototype.getValueFromValueService=function(){var e=this.rowNode.leafGroup&&this.beans.columnModel.isPivotMode(),s=this.rowNode.group&&this.rowNode.expanded&&!this.rowNode.footer&&!e,l=this.beans.gridOptionsWrapper.isGroupIncludeFooter(),c=this.beans.gridOptionsWrapper.isGroupSuppressBlankHeader();return this.beans.valueService.getValue(this.column,this.rowNode,!1,s&&l&&!c)},i.prototype.getValue=function(){return this.value},i.prototype.getValueFormatted=function(){return this.valueFormatted},i.prototype.addDomData=function(){var e=this,s=this.getGui();this.beans.gridOptionsWrapper.setDomData(s,i.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(function(){return e.beans.gridOptionsWrapper.setDomData(s,i.DOM_DATA_KEY_CELL_CTRL,null)})},i.prototype.createEvent=function(e,s){var l={type:s,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex};return this.scope&&(l.$scope=this.scope),l},i.prototype.onKeyPress=function(e){this.cellKeyboardListenerFeature.onKeyPress(e)},i.prototype.onKeyDown=function(e){this.cellKeyboardListenerFeature.onKeyDown(e)},i.prototype.onMouseEvent=function(e,s){this.cellMouseListenerFeature.onMouseEvent(e,s)},i.prototype.getGui=function(){return this.eGui},i.prototype.refreshToolTip=function(){this.tooltipFeature.refreshToolTip()},i.prototype.getColSpanningList=function(){return this.cellPositionFeature.getColSpanningList()},i.prototype.onLeftChanged=function(){this.cellPositionFeature.onLeftChanged(),this.refreshAriaIndex()},i.prototype.refreshAriaIndex=function(){var e=this.beans.columnModel.getAriaColumnIndex(this.column);this.cellComp.setAriaColIndex(e)},i.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},i.prototype.onWidthChanged=function(){return this.cellPositionFeature.onWidthChanged()},i.prototype.getColumn=function(){return this.column},i.prototype.getRowNode=function(){return this.rowNode},i.prototype.getBeans=function(){return this.beans},i.prototype.isPrintLayout=function(){return this.printLayout},i.prototype.appendChild=function(e){this.eGui.appendChild(e)},i.prototype.refreshHandle=function(){this.editing||this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()},i.prototype.getCellPosition=function(){return this.cellPosition},i.prototype.isEditing=function(){return this.editing},i.prototype.startRowOrCellEdit=function(e,s){this.beans.gridOptionsWrapper.isFullRowEdit()?this.rowCtrl.startRowEditing(e,s,this):this.startEditing(e,s,!0)},i.prototype.getRowCtrl=function(){return this.rowCtrl},i.prototype.getRowPosition=function(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}},i.prototype.updateRangeBordersIfRangeCount=function(){this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()},i.prototype.onRangeSelectionChanged=function(){this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},i.prototype.isRangeSelectionEnabled=function(){return null!=this.cellRangeFeature},i.prototype.focusCell=function(e){void 0===e&&(e=!1),this.beans.focusService.setFocusedCell(this.getCellPosition().rowIndex,this.column,this.rowNode.rowPinned,e)},i.prototype.onRowIndexChanged=function(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},i.prototype.onFirstRightPinnedChanged=function(){if(this.cellComp){var e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",e)}},i.prototype.onLastLeftPinnedChanged=function(){if(this.cellComp){var e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",e)}},i.prototype.onCellFocused=function(e){if(this.cellComp){var s=this.beans.focusService.isCellFocused(this.cellPosition);if(this.gow.isSuppressCellSelection()||this.cellComp.addOrRemoveCssClass("ag-cell-focus",s),s&&e&&e.forceBrowserFocus){var l=this.cellComp.getFocusableElement();l.focus(),(!document.activeElement||document.activeElement===document.body)&&l.focus()}var c=this.beans.gridOptionsWrapper.isFullRowEdit();!s&&!c&&this.editing&&this.stopRowOrCellEdit()}},i.prototype.createCellPosition=function(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,column:this.column}},i.prototype.applyStaticCssClasses=function(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass(yg,!0);var e=1==this.column.getColDef().autoHeight;this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",e),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!e)},i.prototype.onColumnHover=function(){if(this.cellComp&&this.beans.gridOptionsWrapper.isColumnHoverHighlight()){var e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",e)}},i.prototype.onNewColumnsLoaded=function(){!this.cellComp||(this.setWrapText(),this.editing||this.refreshCell({forceRefresh:!0,suppressFlash:!0}))},i.prototype.setWrapText=function(){var e=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",e)},i.prototype.dispatchCellContextMenuEvent=function(e){var s=this.column.getColDef(),l=this.createEvent(e,$.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(l),s.onCellContextMenu&&window.setTimeout(function(){return s.onCellContextMenu(l)},0)},i.prototype.getCellRenderer=function(){return this.cellComp?this.cellComp.getCellRenderer():null},i.prototype.getCellEditor=function(){return this.cellComp?this.cellComp.getCellEditor():null},i.prototype.destroy=function(){d.prototype.destroy.call(this)},i.prototype.createSelectionCheckbox=function(){var e=new Qs;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e},i.prototype.createDndSource=function(){var e=new Kl(this.rowNode,this.column,this.beans,this.eGui);return this.beans.context.createBean(e),e},i.prototype.registerRowDragger=function(e,s,l){var c=this;if(this.customRowDragComp)this.customRowDragComp.setDragElement(e,s);else{var p=this.createRowDragComp(e,s,l);p&&(this.customRowDragComp=p,this.addDestroyFunc(function(){return c.beans.context.destroyBean(p)}))}},i.prototype.createRowDragComp=function(e,s,l){var c=this,p=this.beans.gridOptionsWrapper.isPagination(),m=this.beans.gridOptionsWrapper.isRowDragManaged(),w=this.beans.gridOptionsWrapper.isRowModelDefault();if(m){if(!w)return void pn(function(){return console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model")},"CellComp.addRowDragging");if(p)return void pn(function(){return console.warn("AG Grid: managed row dragging is not possible when doing pagination")},"CellComp.addRowDragging")}var x=new Vl(function(){return c.value},this.rowNode,this.column,e,s,l);return this.beans.context.createBean(x),x},i.DOM_DATA_KEY_CELL_CTRL="cellCtrl",i}(Ye),Vu=function(){return Vu=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Vu.apply(this,arguments)},Yb=function(){function d(){}return d.createChildScopeOrNull=function(i,e,s){if(!s.isAngularCompileRows())return null;var c=e.$new();return c.data=Vu({},i.data),c.rowNode=i,c.context=s.getContext(),{scope:c,scopeDestroyFunc:function(){c.$destroy(),c.data=null,c.rowNode=null,c.context=null}}},d}(),_M=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),_i=function(){return function(d){d.Normal="Normal",d.FullWidth="FullWidth",d.FullWidthLoading="FullWidthLoading",d.FullWidthGroup="FullWidthGroup",d.FullWidthDetail="FullWidthDetail"}(_i||(_i={})),_i}(),wM=Ra([[_i.FullWidthLoading,"agLoadingCellRenderer"],[_i.FullWidthGroup,"agGroupRowRenderer"],[_i.FullWidthDetail,"agDetailCellRenderer"]]),SM=Ra([[_i.FullWidth,"fullWidthCellRenderer"],[_i.FullWidthLoading,"loadingCellRenderer"],[_i.FullWidthGroup,"groupRowRenderer"],[_i.FullWidthDetail,"detailCellRenderer"]]),mC=0,eu=function(d){function i(e,s,l,c,p,m){var w=d.call(this)||this;return w.allRowGuis=[],w.active=!0,w.centerCellCtrls={list:[],map:{}},w.leftCellCtrls={list:[],map:{}},w.rightCellCtrls={list:[],map:{}},w.lastMouseDownOnDragger=!1,w.updateColumnListsPending=!1,w.parentScope=e,w.beans=l,w.rowNode=s,w.paginationPage=w.beans.paginationProxy.getCurrentPage(),w.useAnimationFrameForCreate=p,w.printLayout=m,w.instanceId=s.id+"-"+mC++,w.setAnimateFlags(c),w.rowFocused=w.beans.focusService.isRowFocused(w.rowNode.rowIndex,w.rowNode.rowPinned),w.setupAngular1Scope(),w.rowLevel=w.beans.rowCssClassCalculator.calculateRowLevel(w.rowNode),w.setRowType(),w.addListeners(),w.setInitialRowTop(),w}return _M(i,d),i.prototype.getBeans=function(){return this.beans},i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.setComp=function(e,s,l){var c={rowComp:e,element:s,pinned:l};this.allRowGuis.push(c),l===ce.PINNED_LEFT?this.leftGui=c:l===ce.PINNED_RIGHT?this.rightGui=c:this.isFullWidth()&&!this.beans.gridOptionsWrapper.isEmbedFullWidthRows()?this.fullWidthGui=c:this.centerGui=c,(null!=this.leftGui&&null!=this.rightGui&&null!=this.centerGui||null!=this.fullWidthGui)&&this.initialiseRowComps()},i.prototype.isCacheable=function(){return this.rowType===_i.FullWidthDetail&&this.beans.gridOptionsWrapper.isKeepDetailRows()},i.prototype.setCached=function(e){var s=e?"none":void 0;this.allRowGuis.forEach(function(l){return l.rowComp.setDisplay(s)})},i.prototype.initialiseRowComps=function(){var e=this,s=this.beans.gridOptionsWrapper;this.onRowHeightChanged(),this.updateRowIndexes(),this.setFocusedClasses(),this.setStylesFromGridOptions(),s.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(),this.updateColumnLists(!this.useAnimationFrameForCreate),this.slideRowIn&&s_(this.onTopChanged.bind(this)),this.fadeRowIn&&s_(function(){e.allRowGuis.forEach(function(m){return m.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)})});var l=this.getRowBusinessKey(),c=ra(this.rowNode.id),p=ra(l);this.allRowGuis.forEach(function(m){var w=m.rowComp;w.setRole("row"),e.getInitialRowClasses(m.pinned).forEach(function(A){return w.addOrRemoveCssClass(A,!0)}),e.rowNode.group&&w.setAriaExpanded(1==e.rowNode.expanded),null!=c&&w.setRowId(c),null!=p&&w.setRowBusinessKey(p),e.isFullWidth()&&w.setTabIndex(-1),s.setDomData(m.element,i.DOM_DATA_KEY_ROW_CTRL,e),e.addDestroyFunc(function(){return s.setDomData(m.element,i.DOM_DATA_KEY_ROW_CTRL,null)}),e.useAnimationFrameForCreate?e.beans.animationFrameService.createTask(e.addHoverFunctionality.bind(e,m.element),e.rowNode.rowIndex,"createTasksP2"):e.addHoverFunctionality(m.element),e.isFullWidth()&&e.setupFullWidth(m),s.isRowDragEntireRow()&&e.addRowDraggerToRow(m),e.beans.animationFrameService.addDestroyTask(function(){e.isAlive()&&m.rowComp.addOrRemoveCssClass("ag-after-created",!0)})}),this.executeProcessRowPostCreateFunc()},i.prototype.addRowDraggerToRow=function(e){if(this.beans.gridOptionsWrapper.isEnableRangeSelection())pn(function(){console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`")},"rowDragAndRangeSelectionEnabled");else{var l=new Vl(function(){return"1 row"},this.rowNode,void 0,e.element,void 0,!0);this.createManagedBean(l,this.beans.context)}},i.prototype.getFullWidthCellRendererType=function(){return SM.get(this.rowType)},i.prototype.getFullWidthCellRendererName=function(){return wM.get(this.rowType)},i.prototype.setupFullWidth=function(e){var s=this.createFullWidthParams(e.element,e.pinned),l=this.getFullWidthCellRendererType(),c=this.getFullWidthCellRendererName(),p=this.beans.userComponentFactory.getFullWidthCellRendererDetails(s,l,c);if(p)e.rowComp.showFullWidth(p);else{var m=jt.isRegistered(K.GXE.MasterDetailModule);"agDetailCellRenderer"!==c||m?console.error("AG Grid: fullWidthCellRenderer "+c+" not found"):console.warn("AG Grid: cell renderer agDetailCellRenderer (for master detail) not found. Did you forget to include the master detail module?")}},i.prototype.getScope=function(){return this.scope},i.prototype.isPrintLayout=function(){return this.printLayout},i.prototype.setupAngular1Scope=function(){var e=Yb.createChildScopeOrNull(this.rowNode,this.parentScope,this.beans.gridOptionsWrapper);e&&(this.scope=e.scope,this.addDestroyFunc(e.scopeDestroyFunc))},i.prototype.getCellElement=function(e){var s=this.getCellCtrl(e);return s?s.getGui():null},i.prototype.executeProcessRowPostCreateFunc=function(){var e=this.beans.gridOptionsWrapper.getProcessRowPostCreateFunc();e&&e({eRow:this.centerGui?this.centerGui.element:void 0,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,api:this.beans.gridOptionsWrapper.getApi(),rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()})},i.prototype.setRowType=function(){var e=this.rowNode.stub,s=this.rowNode.isFullWidthCell(),l=this.beans.doingMasterDetail&&this.rowNode.detail,c=this.beans.columnModel.isPivotMode(),m=!!this.rowNode.group&&!this.rowNode.footer&&this.beans.gridOptionsWrapper.isGroupUseEntireRow(c);this.rowType=e?_i.FullWidthLoading:l?_i.FullWidthDetail:s?_i.FullWidth:m?_i.FullWidthGroup:_i.Normal},i.prototype.updateColumnLists=function(e){var s=this;if(void 0===e&&(e=!1),!this.isFullWidth()){if(e||this.beans.gridOptionsWrapper.isSuppressAnimationFrame()||this.printLayout)return void this.updateColumnListsImpl();this.updateColumnListsPending||(this.beans.animationFrameService.createTask(function(){!s.active||s.updateColumnListsImpl()},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}},i.prototype.createCellCtrls=function(e,s,l){var c=this;void 0===l&&(l=null);var p={list:[],map:{}},m=function(x,A){p.list.push(A),p.map[x]=A};return s.forEach(function(w){var x=w.getInstanceId(),A=e.map[x];A||(A=new Xi(w,c.rowNode,c.beans,c)),m(x,A)}),e.list.forEach(function(w){if(null==p.map[w.getColumn().getInstanceId()]){if(!c.isCellEligibleToBeRemoved(w,l))return void m(w.getColumn().getInstanceId(),w);w.destroy()}}),p},i.prototype.updateColumnListsImpl=function(){var e=this;this.updateColumnListsPending=!1;var s=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,s.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{var l=s.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,l);var c=s.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,c,ce.PINNED_LEFT);var p=s.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,p,ce.PINNED_RIGHT)}this.allRowGuis.forEach(function(m){m.rowComp.setCellCtrls((m.pinned===ce.PINNED_LEFT?e.leftCellCtrls:m.pinned===ce.PINNED_RIGHT?e.rightCellCtrls:e.centerCellCtrls).list)})},i.prototype.isCellEligibleToBeRemoved=function(e,s){var l=!0;if(e.getColumn().getPinned()!=s)return l;var m=e.isEditing(),w=this.beans.focusService.isCellFocused(e.getCellPosition());if(m||w){var A=e.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(A)>=0)&&l}return l},i.prototype.setAnimateFlags=function(e){if(e){var s=Le(this.rowNode.oldRowTop);this.slideRowIn=s,this.fadeRowIn=!s}else this.slideRowIn=!1,this.fadeRowIn=!1},i.prototype.isEditing=function(){return this.editingRow},i.prototype.stopRowEditing=function(e){this.stopEditing(e)},i.prototype.isFullWidth=function(){return this.rowType!==_i.Normal},i.prototype.getRowType=function(){return this.rowType},i.prototype.refreshFullWidth=function(){var e=this,s=function(A,I){if(!A)return!0;var U=A.rowComp.getFullWidthCellRenderer();if(!U||!U.refresh)return!1;var Y=e.createFullWidthParams(A.element,I);return U.refresh(Y)},l=s(this.fullWidthGui,null),c=s(this.centerGui,null),p=s(this.leftGui,ce.PINNED_LEFT),m=s(this.rightGui,ce.PINNED_RIGHT);return l&&c&&p&&m},i.prototype.addListeners=function(){this.addManagedListener(this.rowNode,sn.EVENT_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_ROW_SELECTED,this.onRowSelected.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,sn.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));var e=this.beans.eventService;this.addManagedListener(e,$.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(e,$.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(e,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(e,$.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(e,$.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,$.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(e,$.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(e,$.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addListenersForCellComps()},i.prototype.onColumnMoved=function(){this.updateColumnLists()},i.prototype.addListenersForCellComps=function(){var e=this;this.addManagedListener(this.rowNode,sn.EVENT_ROW_INDEX_CHANGED,function(){e.getAllCellCtrls().forEach(function(s){return s.onRowIndexChanged()})}),this.addManagedListener(this.rowNode,sn.EVENT_CELL_CHANGED,function(s){e.getAllCellCtrls().forEach(function(l){return l.onCellChanged(s)})})},i.prototype.onRowNodeDataChanged=function(e){this.getAllCellCtrls().forEach(function(s){return s.refreshCell({suppressFlash:!e.update,newData:!e.update})}),this.onRowSelected(),this.postProcessCss()},i.prototype.onRowNodeCellChanged=function(){this.postProcessCss()},i.prototype.postProcessCss=function(){this.setStylesFromGridOptions(),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},i.prototype.onRowNodeHighlightChanged=function(){var e=this.rowNode.highlighted;this.allRowGuis.forEach(function(s){var c=e===K.oh5.Below;s.rowComp.addOrRemoveCssClass("ag-row-highlight-above",e===K.oh5.Above),s.rowComp.addOrRemoveCssClass("ag-row-highlight-below",c)})},i.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()},i.prototype.postProcessRowDragging=function(){var e=this.rowNode.dragging;this.allRowGuis.forEach(function(s){return s.rowComp.addOrRemoveCssClass("ag-row-dragging",e)})},i.prototype.updateExpandedCss=function(){var e=this.rowNode.isExpandable(),s=1==this.rowNode.expanded;this.allRowGuis.forEach(function(l){l.rowComp.addOrRemoveCssClass("ag-row-group",e),l.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&s),l.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!s),l.rowComp.setAriaExpanded(e&&s)})},i.prototype.onDisplayedColumnsChanged=function(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()},i.prototype.onVirtualColumnsChanged=function(){this.updateColumnLists()},i.prototype.getRowPosition=function(){return{rowPinned:this.rowNode.rowPinned,rowIndex:this.rowNode.rowIndex}},i.prototype.onKeyboardNavigate=function(e){var s=Pi(this.allRowGuis,function(x){return x.element.contains(e.target)});if((s?s.element:null)===e.target){var p=this.rowNode,m=this.beans.focusService.getFocusedCell();this.beans.navigationService.navigateToNextCell(e,e.keyCode,{rowIndex:p.rowIndex,rowPinned:p.rowPinned,column:m&&m.column},!0),e.preventDefault()}},i.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented&&!xa(e)){var s=Pi(this.allRowGuis,function(m){return m.element.contains(e.target)}),l=s?s.element:null,c=l===e.target,p=null;c||(p=this.beans.focusService.findNextFocusableElement(l,!1,e.shiftKey)),(this.isFullWidth()&&c||!p)&&this.beans.navigationService.onTabKeyDown(this,e)}},i.prototype.onFullWidthRowFocused=function(e){var s=this.rowNode,l=this.isFullWidth()&&e.rowIndex===s.rowIndex&&e.rowPinned==s.rowPinned,c=this.fullWidthGui?this.fullWidthGui.element:this.centerGui.element;Lt(c,"ag-full-width-focus",l),l&&c.focus({preventScroll:!0})},i.prototype.refreshCell=function(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),this.updateColumnLists()},i.prototype.removeCellCtrl=function(e,s){var l={list:[],map:{}};return e.list.forEach(function(c){c!==s&&(l.list.push(c),l.map[c.getInstanceId()]=c)}),l},i.prototype.onMouseEvent=function(e,s){switch(e){case"dblclick":this.onRowDblClick(s);break;case"click":this.onRowClick(s);break;case"touchstart":case"mousedown":this.onRowMouseDown(s)}},i.prototype.createRowEvent=function(e,s){return{type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.beans.gridOptionsWrapper.getContext(),api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),event:s}},i.prototype.createRowEventWithSource=function(e,s){var l=this.createRowEvent(e,s);return l.source=this,l},i.prototype.onRowDblClick=function(e){if(!xa(e)){var s=this.createRowEventWithSource($.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(s)}},i.prototype.onRowMouseDown=function(e){if(this.lastMouseDownOnDragger=xl(e.target,"ag-row-drag",3),this.isFullWidth()){var s=this.rowNode;this.beans.focusService.setFocusedCell(s.rowIndex,this.beans.columnModel.getAllDisplayedColumns()[0],s.rowPinned,!0)}},i.prototype.onRowClick=function(e){if(!xa(e)&&!this.lastMouseDownOnDragger){var l=this.createRowEventWithSource($.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(l);var c=e.ctrlKey||e.metaKey,p=e.shiftKey;if(!(this.beans.gridOptionsWrapper.isGroupSelectsChildren()&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.beans.gridOptionsWrapper.isRowSelection()||this.beans.gridOptionsWrapper.isSuppressRowClickSelection())){var w=this.beans.gridOptionsWrapper.isRowMultiSelectWithClick(),x=!this.beans.gridOptionsWrapper.isSuppressRowDeselection();this.rowNode.isSelected()?w?this.rowNode.setSelectedParams({newValue:!1}):c?x&&this.rowNode.setSelectedParams({newValue:!1}):this.rowNode.setSelectedParams({newValue:!p,clearSelection:!p,rangeSelect:p}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!w&&!c,rangeSelect:p})}}},i.prototype.setupDetailRowAutoHeight=function(e){var s=this;if(this.beans.gridOptionsWrapper.isDetailRowAutoHeight()){var l=function(){var m=e.clientHeight;null!=m&&m>0&&s.beans.frameworkOverrides.setTimeout(function(){s.rowNode.setRowHeight(m),s.beans.clientSideRowModel?s.beans.clientSideRowModel.onRowHeightChanged():s.beans.serverSideRowModel&&s.beans.serverSideRowModel.onRowHeightChanged()},0)},c=this.beans.resizeObserverService.observeResize(e,l);this.addDestroyFunc(c),l()}},i.prototype.createFullWidthParams=function(e,s){var l=this;return{fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,$scope:this.scope?this.scope:this.parentScope,$compile:this.beans.$compile,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext(),eGridCell:e,eParentOfValue:e,pinned:s,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:function(m,w,x,A){return l.addFullWidthRowDragging(m,w,x,A)}}},i.prototype.addFullWidthRowDragging=function(e,s,l,c){if(void 0===l&&(l=""),this.isFullWidth()){var p=new Vl(function(){return l},this.rowNode,void 0,e,s,c);this.createManagedBean(p,this.beans.context)}},i.prototype.onUiLevelChanged=function(){var e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){var s="ag-row-level-"+e,l="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(function(c){c.rowComp.addOrRemoveCssClass(s,!0),c.rowComp.addOrRemoveCssClass(l,!1)})}this.rowLevel=e},i.prototype.isFirstRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()},i.prototype.isLastRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()},i.prototype.onModelUpdated=function(){var e=this.isFirstRowOnPage(),s=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass("ag-row-first",e)})),this.lastRowOnPage!==s&&(this.lastRowOnPage=s,this.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass("ag-row-last",s)}))},i.prototype.stopEditing=function(e){if(void 0===e&&(e=!1),this.getAllCellCtrls().forEach(function(l){return l.stopEditing(e)}),this.editingRow){if(!e){var s=this.createRowEvent($.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(s)}this.setEditingRow(!1)}},i.prototype.setInlineEditingCss=function(e){this.allRowGuis.forEach(function(s){s.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),s.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})},i.prototype.setEditingRow=function(e){this.editingRow=e,this.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass("ag-row-editing",e)});var s=this.createRowEvent(e?$.EVENT_ROW_EDITING_STARTED:$.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(s)},i.prototype.startRowEditing=function(e,s,l){void 0===e&&(e=null),void 0===s&&(s=null),void 0===l&&(l=null),!this.editingRow&&(this.getAllCellCtrls().forEach(function(c){var p=c===l;p?c.startEditing(e,s,p):c.startEditing(null,null,p)}),this.setEditingRow(!0))},i.prototype.getAllCellCtrls=function(){var e=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],p=0,m=c.length;p<m;p++,l++)s[l]=c[p];return s}(this.centerCellCtrls.list,this.leftCellCtrls.list,this.rightCellCtrls.list);return e},i.prototype.postProcessClassesFromGridOptions=function(){var e=this,s=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode,this.scope);!s||!s.length||s.forEach(function(l){e.allRowGuis.forEach(function(c){return c.rowComp.addOrRemoveCssClass(l,!0)})})},i.prototype.postProcessRowClassRules=function(){var e=this;this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,this.scope,function(s){e.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass(s,!0)})},function(s){e.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass(s,!1)})})},i.prototype.setStylesFromGridOptions=function(){var e=this.processStylesFromGridOptions();this.allRowGuis.forEach(function(s){return s.rowComp.setUserStyles(e)})},i.prototype.getRowBusinessKey=function(){var e=this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc();if("function"==typeof e)return e(this.rowNode)},i.prototype.getInitialRowClasses=function(e){var s={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeRowIn,rowIsEven:this.rowNode.rowIndex%2==0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),scope:this.scope,pinned:e};return this.beans.rowCssClassCalculator.getInitialRowClasses(s)},i.prototype.processStylesFromGridOptions=function(){var e=this.beans.gridOptionsWrapper.getRowStyle();if(!e||"function"!=typeof e){var l,s=this.beans.gridOptionsWrapper.getRowStyleFunc();return s&&(l=s({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,$scope:this.scope,api:this.beans.gridOptionsWrapper.getApi(),columnApi:this.beans.gridOptionsWrapper.getColumnApi(),context:this.beans.gridOptionsWrapper.getContext()})),ti({},e,l)}console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead")},i.prototype.onRowSelected=function(){var e=this,s=this.rowNode.isSelected();this.allRowGuis.forEach(function(l){l.rowComp.setAriaSelected(!!s||void 0),l.rowComp.addOrRemoveCssClass("ag-row-selected",s),l.rowComp.setAriaLabel(e.createAriaLabel())})},i.prototype.createAriaLabel=function(){var e=this.rowNode.isSelected();if(!e||!this.beans.gridOptionsWrapper.isSuppressRowDeselection())return this.beans.gridOptionsWrapper.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect","Press SPACE to "+(e?"deselect":"select")+" this row.")},i.prototype.isUseAnimationFrameForCreate=function(){return this.useAnimationFrameForCreate},i.prototype.addHoverFunctionality=function(e){var s=this;!this.active||(this.addManagedListener(e,"mouseenter",function(){return s.rowNode.onMouseEnter()}),this.addManagedListener(e,"mouseleave",function(){return s.rowNode.onMouseLeave()}),this.addManagedListener(this.rowNode,sn.EVENT_MOUSE_ENTER,function(){s.beans.gridOptionsWrapper.isSuppressRowHoverHighlight()||Tt(e,"ag-row-hover")}),this.addManagedListener(this.rowNode,sn.EVENT_MOUSE_LEAVE,function(){gi(e,"ag-row-hover")}))},i.prototype.roundRowTopToBounds=function(e){var l=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),c=this.applyPaginationOffset(l.top,!0)-100,p=this.applyPaginationOffset(l.bottom,!0)+100;return Math.min(Math.max(c,e),p)},i.prototype.getFrameworkOverrides=function(){return this.beans.frameworkOverrides},i.prototype.onRowHeightChanged=function(){if(Le(this.rowNode.rowHeight)){var e=this.rowNode.rowHeight+"px";this.allRowGuis.forEach(function(s){return s.rowComp.setHeight(e)})}},i.prototype.addEventListener=function(e,s){("renderedRowRemoved"===e||"rowRemoved"===e)&&(e=$.EVENT_VIRTUAL_ROW_REMOVED,console.warn("AG Grid: Since version 11, event renderedRowRemoved is now called "+$.EVENT_VIRTUAL_ROW_REMOVED)),d.prototype.addEventListener.call(this,e,s)},i.prototype.removeEventListener=function(e,s){("renderedRowRemoved"===e||"rowRemoved"===e)&&(e=$.EVENT_VIRTUAL_ROW_REMOVED,console.warn("AG Grid: Since version 11, event renderedRowRemoved and rowRemoved is now called "+$.EVENT_VIRTUAL_ROW_REMOVED)),d.prototype.removeEventListener.call(this,e,s)},i.prototype.destroyFirstPass=function(){this.active=!1,this.setupRemoveAnimation();var e=this.createRowEvent($.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(e),this.beans.eventService.dispatchEvent(e),d.prototype.destroy.call(this)},i.prototype.setupRemoveAnimation=function(){if(null!=this.rowNode.rowTop){var s=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(function(l){return l.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)})},i.prototype.destroySecondPass=function(){this.allRowGuis.length=0;var e=function(l){return l.list.forEach(function(c){return c.destroy()}),{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)},i.prototype.setFocusedClasses=function(){var e=this;this.allRowGuis.forEach(function(s){s.rowComp.addOrRemoveCssClass("ag-row-focus",e.rowFocused),s.rowComp.addOrRemoveCssClass("ag-row-no-focus",!e.rowFocused)})},i.prototype.onCellFocusChanged=function(){var e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)},i.prototype.onPaginationChanged=function(){var e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged())},i.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},i.prototype.onPaginationPixelOffsetChanged=function(){this.onTopChanged()},i.prototype.applyPaginationOffset=function(e,s){return void 0===s&&(s=!1),this.rowNode.isRowPinned()?e:e+this.beans.paginationProxy.getPixelOffset()*(s?1:-1)},i.prototype.setRowTop=function(e){if(!this.printLayout&&Le(e)){var s=this.applyPaginationOffset(e),l=this.rowNode.isRowPinned()?s:this.beans.rowContainerHeightService.getRealPixelPosition(s);this.setRowTopStyle(l+"px")}},i.prototype.getInitialRowTop=function(){return this.initialTop},i.prototype.getInitialTransform=function(){return this.initialTransform},i.prototype.setInitialRowTop=function(){if(this.printLayout)return"";var e=this.slideRowIn?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,s=this.applyPaginationOffset(e),c=(this.rowNode.isRowPinned()?s:this.beans.rowContainerHeightService.getRealPixelPosition(s))+"px";this.beans.gridOptionsWrapper.isSuppressRowTransform()?this.initialTop=c:this.initialTransform="translateY("+c+")"},i.prototype.setRowTopStyle=function(e){var s=this.beans.gridOptionsWrapper.isSuppressRowTransform();this.allRowGuis.forEach(function(l){return s?l.rowComp.setTop(e):l.rowComp.setTransform("translateY("+e+")")})},i.prototype.getRowNode=function(){return this.rowNode},i.prototype.getCellCtrl=function(e){var s=null;return this.getAllCellCtrls().forEach(function(l){l.getColumn()==e&&(s=l)}),null!=s||this.getAllCellCtrls().forEach(function(l){l.getColSpanningList().indexOf(e)>=0&&(s=l)}),s},i.prototype.onRowIndexChanged=function(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes())},i.prototype.updateRowIndexes=function(){var e=this,s=this.rowNode.getRowIndexString(),l=this.beans.headerNavigationService.getHeaderRowCount(),c=this.rowNode.rowIndex%2==0;this.allRowGuis.forEach(function(p){p.rowComp.setRowIndex(s),p.rowComp.setAriaRowIndex(l+e.rowNode.rowIndex+1),p.rowComp.addOrRemoveCssClass("ag-row-even",c),p.rowComp.addOrRemoveCssClass("ag-row-odd",!c)})},i.prototype.getPinnedLeftRowElement=function(){return this.leftGui?this.leftGui.element:void 0},i.prototype.getPinnedRightRowElement=function(){return this.rightGui?this.rightGui.element:void 0},i.prototype.getBodyRowElement=function(){return this.centerGui?this.centerGui.element:void 0},i.prototype.getFullWidthRowElement=function(){return this.fullWidthGui?this.fullWidthGui.element:void 0},i.DOM_DATA_KEY_ROW_CTRL="renderedRow",i}(Ye),Kb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),xo=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},yC=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],p=0,m=c.length;p<m;p++,l++)s[l]=c[p];return s},$b=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.destroyFuncsForColumnListeners=[],e.rowCtrlsByRowIndex={},e.zombieRowCtrls={},e.allRowCtrls=[],e.topRowCtrls=[],e.bottomRowCtrls=[],e.refreshInProgress=!1,e}return Kb(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl(),e.initialise()})},i.prototype.initialise=function(){this.addManagedListener(this.eventService,$.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,$.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_BODY_SCROLL,this.redrawAfterScroll.bind(this)),this.addManagedListener(this.eventService,$.EVENT_BODY_HEIGHT_CHANGED,this.redrawAfterScroll.bind(this)),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_DOM_LAYOUT,this.onDomLayoutChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsWrapper.getDomLayout()===ce.DOM_LAYOUT_PRINT,this.embedFullWidthRows=this.printLayout||this.gridOptionsWrapper.isEmbedFullWidthRows(),this.redrawAfterModelUpdate()},i.prototype.initialiseCache=function(){if(this.gridOptionsWrapper.isKeepDetailRows()){var e=this.gridOptionsWrapper.getKeepDetailRowsCount();this.cachedRowCtrls=new Xb(null!=e?e:3)}},i.prototype.getRowCtrls=function(){return this.allRowCtrls},i.prototype.updateAllRowCtrls=function(){var e=ba(this.rowCtrlsByRowIndex);this.beans.gridOptionsWrapper.isEnsureDomOrder()&&e.sort(function(c,p){return c.getRowNode().rowIndex-p.getRowNode.rowIndex});var s=ba(this.zombieRowCtrls),l=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];this.allRowCtrls=yC(e,s,l)},i.prototype.registerCellEventListeners=function(){var e=this;this.addManagedListener(this.eventService,$.EVENT_CELL_FOCUSED,function(l){e.getAllCellCtrls().forEach(function(c){return c.onCellFocused(l)}),e.getAllRowCtrls().forEach(function(c){c.isFullWidth()&&c.onFullWidthRowFocused(l)})}),this.addManagedListener(this.eventService,$.EVENT_FLASH_CELLS,function(l){e.getAllCellCtrls().forEach(function(c){return c.onFlashCells(l)})}),this.addManagedListener(this.eventService,$.EVENT_COLUMN_HOVER_CHANGED,function(){e.getAllCellCtrls().forEach(function(l){return l.onColumnHover()})}),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){e.printLayout&&e.getAllCellCtrls().forEach(function(l){return l.onLeftChanged()})}),this.gridOptionsWrapper.isEnableRangeSelection()&&(this.addManagedListener(this.eventService,$.EVENT_RANGE_SELECTION_CHANGED,function(){e.getAllCellCtrls().forEach(function(l){return l.onRangeSelectionChanged()})}),this.addManagedListener(this.eventService,$.EVENT_COLUMN_MOVED,function(){e.getAllCellCtrls().forEach(function(l){return l.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PINNED,function(){e.getAllCellCtrls().forEach(function(l){return l.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VISIBLE,function(){e.getAllCellCtrls().forEach(function(l){return l.updateRangeBordersIfRangeCount()})})),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,$.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))},i.prototype.removeGridColumnListeners=function(){this.destroyFuncsForColumnListeners.forEach(function(e){return e()}),this.destroyFuncsForColumnListeners.length=0},i.prototype.refreshListenersToColumnsForCellComps=function(){var e=this;this.removeGridColumnListeners();var s=this.columnModel.getAllGridColumns();!s||s.forEach(function(l){var c=function(I){e.getAllCellCtrls().forEach(function(U){U.getColumn()===l&&I(U)})},p=function(){c(function(I){return I.onLeftChanged()})},m=function(){c(function(I){return I.onWidthChanged()})},w=function(){c(function(I){return I.onFirstRightPinnedChanged()})},x=function(){c(function(I){return I.onLastLeftPinnedChanged()})};l.addEventListener(Tn.EVENT_LEFT_CHANGED,p),l.addEventListener(Tn.EVENT_WIDTH_CHANGED,m),l.addEventListener(Tn.EVENT_FIRST_RIGHT_PINNED_CHANGED,w),l.addEventListener(Tn.EVENT_LAST_LEFT_PINNED_CHANGED,x),e.destroyFuncsForColumnListeners.push(function(){l.removeEventListener(Tn.EVENT_LEFT_CHANGED,p),l.removeEventListener(Tn.EVENT_WIDTH_CHANGED,m),l.removeEventListener(Tn.EVENT_FIRST_RIGHT_PINNED_CHANGED,w),l.removeEventListener(Tn.EVENT_LAST_LEFT_PINNED_CHANGED,x)})})},i.prototype.onDomLayoutChanged=function(){var e=this.gridOptionsWrapper.getDomLayout()===ce.DOM_LAYOUT_PRINT,s=e||this.gridOptionsWrapper.isEmbedFullWidthRows(),l=s!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=s,l&&this.redrawAfterModelUpdate()},i.prototype.datasourceChanged=function(){this.firstRenderedRow=0,this.lastRenderedRow=-1;var e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)},i.prototype.onPageLoaded=function(e){this.redrawAfterModelUpdate({recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0})},i.prototype.getAllCellsForColumn=function(e){var s=[];return this.getAllRowCtrls().forEach(function(l){var c=l.getCellElement(e);c&&s.push(c)}),s},i.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())},i.prototype.getTopRowCtrls=function(){return this.topRowCtrls},i.prototype.getBottomRowCtrls=function(){return this.bottomRowCtrls},i.prototype.refreshFloatingRows=function(e,s){var l=this;e.forEach(function(c){c.destroyFirstPass(),c.destroySecondPass()}),e.length=0,s&&s.forEach(function(c){var p=new eu(l.$scope,c,l.beans,!1,!1,l.printLayout);e.push(p)})},i.prototype.onPinnedRowDataChanged=function(){this.redrawAfterModelUpdate({recycleRows:!0})},i.prototype.getRenderedIndexesForRowNodes=function(e){var s=[];return ye(e)||In(this.rowCtrlsByRowIndex,function(l,c){var p=c.getRowNode();e.indexOf(p)>=0&&s.push(l)}),s},i.prototype.redrawRows=function(e){var s=null!=e&&e.length>0;if(s){var l=this.getRenderedIndexesForRowNodes(e);this.removeRowCtrls(l)}this.redrawAfterModelUpdate({recycleRows:s})},i.prototype.getCellToRestoreFocusToAfterRefresh=function(e){var s=e.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==s)return null;var l=document.activeElement,c=this.gridOptionsWrapper.getDomData(l,Xi.DOM_DATA_KEY_CELL_CTRL),p=this.gridOptionsWrapper.getDomData(l,eu.DOM_DATA_KEY_ROW_CTRL);return c||p?s:null},i.prototype.redrawAfterModelUpdate=function(e){void 0===e&&(e={}),this.getLockOnRefresh();var s=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);var l=!this.printLayout&&!!e.recycleRows,c=e.animate&&this.gridOptionsWrapper.isAnimateRows(),p=l?this.recycleRows():null;l||this.removeAllRowComps();var w=function(){if(null==s||null==p)return!1;var A=!1;return In(p,function(I,U){var Y=U.getRowNode();Y.rowIndex==s.rowIndex&&Y.rowPinned==s.rowPinned&&(A=!0)}),A}();this.redraw(p,c),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),w||this.restoreFocusedCell(s),this.releaseLockOnRefresh()},i.prototype.scrollToTopIfNewData=function(e){var s=e.newData||e.newPage,l=this.gridOptionsWrapper.isSuppressScrollOnNewData();s&&!l&&this.gridBodyCtrl.getScrollFeature().scrollToTop()},i.prototype.updateContainerHeights=function(){if(this.printLayout)this.rowContainerHeightService.setModelHeight(null);else{var e=this.paginationProxy.getCurrentPageHeight();0===e&&(e=1),this.rowContainerHeightService.setModelHeight(e)}},i.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.refreshView(), call setTimeout(function() { api.refreshView(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},i.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},i.prototype.restoreFocusedCell=function(e){e&&this.focusService.setFocusedCell(e.rowIndex,e.column,e.rowPinned,!0)},i.prototype.stopEditing=function(e){void 0===e&&(e=!1),this.getAllRowCtrls().forEach(function(s){s.stopEditing(e)})},i.prototype.onNewColumnsLoaded=function(){this.getAllCellCtrls().forEach(function(e){return e.onNewColumnsLoaded()})},i.prototype.getAllCellCtrls=function(){var e=[];return this.getAllRowCtrls().forEach(function(s){return e=e.concat(s.getAllCellCtrls())}),e},i.prototype.getAllRowCtrls=function(){var e=this,s=yC(this.topRowCtrls,this.bottomRowCtrls);return Object.keys(this.rowCtrlsByRowIndex).forEach(function(l){return s.push(e.rowCtrlsByRowIndex[l])}),s},i.prototype.addRenderedRowListener=function(e,s,l){var c=this.rowCtrlsByRowIndex[s];c&&c.addEventListener(e,l)},i.prototype.flashCells=function(e){void 0===e&&(e={});var s=e.flashDelay,l=e.fadeDelay;this.getCellCtrls(e.rowNodes,e.columns).forEach(function(c){return c.flashCell({flashDelay:s,fadeDelay:l})})},i.prototype.refreshCells=function(e){void 0===e&&(e={});var s={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach(function(l){if(l.refreshShouldDestroy()){var c=l.getRowCtrl();c&&c.refreshCell(l)}else l.refreshCell(s)})},i.prototype.getCellRendererInstances=function(e){return this.getCellCtrls(e.rowNodes,e.columns).map(function(l){return l.getCellRenderer()}).filter(function(l){return null!=l})},i.prototype.getCellEditorInstances=function(e){var s=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(function(l){var c=l.getCellEditor();c&&s.push(c)}),s},i.prototype.getEditingCells=function(){var e=[];return this.getAllCellCtrls().forEach(function(s){if(s.isEditing()){var l=s.getCellPosition();e.push(l)}}),e},i.prototype.getCellCtrls=function(e,s){var c,m,l=this,p=[];Le(e)&&(c={top:{},bottom:{},normal:{}},e.forEach(function(x){var A=x.id;x.rowPinned===ce.PINNED_TOP?c.top[A]=!0:x.rowPinned===ce.PINNED_BOTTOM?c.bottom[A]=!0:c.normal[A]=!0})),Le(s)&&(m={},s.forEach(function(x){var A=l.columnModel.getGridColumn(x);Le(A)&&(m[A.getId()]=!0)}));var w=function(A){var I=A.getRowNode(),U=I.id,Y=I.rowPinned;if(Le(c))if(Y===ce.PINNED_BOTTOM){if(!c.bottom[U])return}else if(Y===ce.PINNED_TOP){if(!c.top[U])return}else if(!c.normal[U])return;A.getAllCellCtrls().forEach(function(Q){var oe=Q.getColumn().getId();m&&!m[oe]||p.push(Q)})};return In(this.rowCtrlsByRowIndex,function(x,A){w(A)}),this.topRowCtrls&&this.topRowCtrls.forEach(w),this.bottomRowCtrls&&this.bottomRowCtrls.forEach(w),p},i.prototype.destroy=function(){this.removeAllRowComps(),d.prototype.destroy.call(this)},i.prototype.removeAllRowComps=function(){var e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)},i.prototype.recycleRows=function(){var e=[];In(this.rowCtrlsByRowIndex,function(l,c){null==c.getRowNode().id&&e.push(l)}),this.removeRowCtrls(e);var s={};return In(this.rowCtrlsByRowIndex,function(l,c){var p=c.getRowNode();s[p.id]=c}),this.rowCtrlsByRowIndex={},s},i.prototype.removeRowCtrls=function(e){var s=this;e.forEach(function(l){var c=s.rowCtrlsByRowIndex[l];c&&(c.destroyFirstPass(),c.destroySecondPass()),delete s.rowCtrlsByRowIndex[l]})},i.prototype.redrawAfterScroll=function(){this.getLockOnRefresh(),this.redraw(null,!1,!0),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged()},i.prototype.removeRowCompsNotToDraw=function(e){var s={};e.forEach(function(p){return s[p]=!0});var c=Object.keys(this.rowCtrlsByRowIndex).filter(function(p){return!s[p]});this.removeRowCtrls(c)},i.prototype.calculateIndexesToDraw=function(e){var s=this,l=OE(this.firstRenderedRow,this.lastRenderedRow),c=function(m,w){var x=w.getRowNode().rowIndex;null!=x&&(x<s.firstRenderedRow||x>s.lastRenderedRow)&&s.doNotUnVirtualiseRow(w)&&l.push(x)};return In(this.rowCtrlsByRowIndex,c),In(e,c),l.sort(function(p,m){return p-m}),l},i.prototype.redraw=function(e,s,l){var c=this;void 0===s&&(s=!1),void 0===l&&(l=!1),this.rowContainerHeightService.updateOffset(),this.workOutFirstAndLastRowsToRender();var p=this.calculateIndexesToDraw(e);this.removeRowCompsNotToDraw(p),this.printLayout&&(s=!1),p.forEach(function(w){Le(c.createOrUpdateRowCtrl(w,e,s,l))}),e&&(!l||this.gridOptionsWrapper.isSuppressAnimationFrame()||this.printLayout?this.destroyRowCtrls(e,s):this.beans.animationFrameService.addDestroyTask(function(){c.destroyRowCtrls(e,s),c.updateAllRowCtrls(),c.dispatchDisplayedRowsChanged()})),this.updateAllRowCtrls(),this.checkAngularCompile(),this.gridBodyCtrl.updateRowCount()},i.prototype.dispatchDisplayedRowsChanged=function(){this.eventService.dispatchEvent({type:$.EVENT_DISPLAYED_ROWS_CHANGED})},i.prototype.onDisplayedColumnsChanged=function(){var e=this.columnModel.isPinningLeft(),s=this.columnModel.isPinningRight();(this.pinningLeft!==e||s!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=s,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())},i.prototype.redrawFullWidthEmbeddedRows=function(){var e=[];In(this.rowCtrlsByRowIndex,function(s,l){if(l.isFullWidth()){var c=l.getRowNode().rowIndex;e.push(c.toString())}}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redrawAfterScroll()},i.prototype.refreshFullWidthRows=function(e){var s=[],l=!!e,c=l?{}:void 0;l&&c&&e.forEach(function(p){return c[p.id]=!0}),In(this.rowCtrlsByRowIndex,function(p,m){if(m.isFullWidth()){var w=m.getRowNode();if(l&&c&&!c[w.id]&&!c[w.level>0&&w.parent?w.parent.id:void 0])return;if(!m.refreshFullWidth()){var U=m.getRowNode().rowIndex;s.push(U.toString())}}}),this.removeRowCtrls(s),this.redrawAfterScroll()},i.prototype.createOrUpdateRowCtrl=function(e,s,l,c){var p,m=this.rowCtrlsByRowIndex[e];if(m||Le(p=this.paginationProxy.getRow(e))&&Le(s)&&s[p.id]&&p.alreadyRendered&&(m=s[p.id],s[p.id]=null),!m){if(p||(p=this.paginationProxy.getRow(e)),!Le(p))return;m=this.createRowCon(p,l,c)}return p&&(p.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=m,m},i.prototype.destroyRowCtrls=function(e,s){var l=this,c=[];In(e,function(p,m){if(m){if(l.cachedRowCtrls&&m.isCacheable())return void l.cachedRowCtrls.addRow(m);m.destroyFirstPass(),s?(l.zombieRowCtrls[m.getInstanceId()]=m,c.push(function(){m.destroySecondPass(),delete l.zombieRowCtrls[m.getInstanceId()]})):m.destroySecondPass()}}),s&&(c.push(function(){l.updateAllRowCtrls(),l.dispatchDisplayedRowsChanged()}),Mf(c))},i.prototype.checkAngularCompile=function(){var e=this;this.gridOptionsWrapper.isAngularCompileRows()&&window.setTimeout(function(){e.$scope.$apply()},0)},i.prototype.workOutFirstAndLastRowsToRender=function(){var s,l,e=this;if(this.paginationProxy.isRowsToRender())if(this.printLayout)s=this.paginationProxy.getPageFirstRow(),l=this.paginationProxy.getPageLastRow();else{var c=this.gridOptionsWrapper.getRowBufferInPixels(),p=this.ctrlsService.getGridBodyCtrl(),m=!1,w=void 0,x=void 0;do{var A=this.paginationProxy.getPixelOffset(),I=this.paginationProxy.getCurrentPagePixelRange(),U=I.pageFirstPixel,Y=I.pageLastPixel,Q=this.rowContainerHeightService.getDivStretchOffset(),oe=p.getScrollFeature().getVScrollPosition(),He=oe.bottom;w=Math.max(oe.top+A-c,U)+Q,x=Math.min(He+A+c,Y)+Q,m=this.ensureAllRowsInRangeHaveHeightsCalculated(w,x)}while(m);var Ve=this.paginationProxy.getRowIndexAtPixel(w),Me=this.paginationProxy.getRowIndexAtPixel(x),Ze=this.paginationProxy.getPageFirstRow(),Fe=this.paginationProxy.getPageLastRow();Ve<Ze&&(Ve=Ze),Me>Fe&&(Me=Fe),s=Ve,l=Me}else s=0,l=-1;var rn=this.gridOptionsWrapper.getDomLayout()===ce.DOM_LAYOUT_NORMAL,kt=this.gridOptionsWrapper.isSuppressMaxRenderedRowRestriction(),vn=Math.max(this.gridOptionsWrapper.getRowBuffer(),500);if(rn&&!kt&&l-s>vn&&(l=s+vn),(s!==this.firstRenderedRow||l!==this.lastRenderedRow)&&(this.firstRenderedRow=s,this.lastRenderedRow=l,this.eventService.dispatchEvent({type:$.EVENT_VIEWPORT_CHANGED,firstRow:s,lastRow:l,api:this.gridApi,columnApi:this.columnApi})),this.paginationProxy.isRowsToRender()){var ur={type:$.EVENT_FIRST_DATA_RENDERED,firstRow:s,lastRow:l,api:this.gridApi,columnApi:this.columnApi};window.setTimeout(function(){return e.eventService.dispatchEventOnce(ur)},50)}},i.prototype.ensureAllRowsInRangeHaveHeightsCalculated=function(e,s){var l=this.paginationProxy.ensureRowHeightsValid(e,s,-1,-1);return l&&this.updateContainerHeights(),l},i.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},i.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},i.prototype.doNotUnVirtualiseRow=function(e){var c=e.getRowNode(),p=this.focusService.isRowNodeFocused(c),m=e.isEditing();return!!(p||m||c.detail)&&!!this.paginationProxy.isRowPresent(c)},i.prototype.createRowCon=function(e,s,l){var c=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(c)return c;var p=this.gridOptionsWrapper.isSuppressAnimationFrame();return new eu(this.$scope,e,this.beans,s,l&&!p&&!this.printLayout,this.printLayout)},i.prototype.getRenderedNodes=function(){var e=this.rowCtrlsByRowIndex;return Object.keys(e).map(function(s){return e[s].getRowNode()})},i.prototype.getRowByPosition=function(e){var s;switch(e.rowPinned){case ce.PINNED_TOP:s=this.topRowCtrls[e.rowIndex];break;case ce.PINNED_BOTTOM:s=this.bottomRowCtrls[e.rowIndex];break;default:s=this.rowCtrlsByRowIndex[e.rowIndex]}return s},i.prototype.getRowNode=function(e){switch(e.rowPinned){case ce.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case ce.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},i.prototype.isRangeInRenderedViewport=function(e,s){return!(null==e||null==s||s<this.firstRenderedRow||e>this.lastRenderedRow)},xo([B("paginationProxy")],i.prototype,"paginationProxy",void 0),xo([B("columnModel")],i.prototype,"columnModel",void 0),xo([B("$scope")],i.prototype,"$scope",void 0),xo([B("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),xo([B("rowModel")],i.prototype,"rowModel",void 0),xo([B("focusService")],i.prototype,"focusService",void 0),xo([B("columnApi")],i.prototype,"columnApi",void 0),xo([B("gridApi")],i.prototype,"gridApi",void 0),xo([B("beans")],i.prototype,"beans",void 0),xo([B("rowContainerHeightService")],i.prototype,"rowContainerHeightService",void 0),xo([Ln("ctrlsService")],i.prototype,"ctrlsService",void 0),xo([Qe],i.prototype,"postConstruct",null),xo([ht("rowRenderer")],i)}(Ye),Xb=function(){function d(i){this.entriesMap={},this.entriesList=[],this.maxCount=i}return d.prototype.toString=function(){return this.entriesList.map(function(i){return i.getRowNode().data.name}).join(", ")},d.prototype.addRow=function(i){if(this.entriesMap[i.getRowNode().id]=i,this.entriesList.push(i),i.setCached(!0),this.entriesList.length>this.maxCount){var e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}},d.prototype.getRow=function(i){if(null==i||null==i.id)return null;var e=this.entriesMap[i.id];return e?(this.removeFromCache(e),e.setCached(!1),e.getRowNode()!=i?null:e):null},d.prototype.removeFromCache=function(i){var e=i.getRowNode().id;delete this.entriesMap[e],ei(this.entriesList,i)},d.prototype.getEntries=function(){return this.entriesList},d}(),gp=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),mp=function(d){function i(e,s){var l=d.call(this,e)||this;return l.ctrl=s,l}return gp(i,d),i.prototype.getCtrl=function(){return this.ctrl},i}(dn),Wa=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Wu=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},_C=function(d){function i(e){var s=d.call(this,i.TEMPLATE,e)||this;return s.headerCompVersion=0,s.column=e.getColumnGroupChild(),s.pinned=e.getPinned(),s}return Wa(i,d),i.prototype.postConstruct=function(){var e=this,s=this.getGui(),l=function(w,x,A){var I=A||s;null!=x&&""!=x?I.setAttribute(w,x):I.removeAttribute(w)};this.ctrl.setComp({setWidth:function(w){return s.style.width=w},addOrRemoveCssClass:function(w,x){return e.addOrRemoveCssClass(w,x)},setAriaSort:function(w){return w?JE(s,w):ZE(s)},setColId:function(w){return l("col-id",w)},setTitle:function(w){return l("title",w)},setAriaDescribedBy:function(w){return fo(s,w)},setUserCompDetails:function(w){return e.setUserCompDetails(w)},getUserCompInstance:function(){return e.headerComp}},this.getGui(),this.eResize);var p=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",p)},i.prototype.destroyHeaderComp=function(){this.headerComp&&(this.getGui().removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)},i.prototype.setUserCompDetails=function(e){var s=this;this.headerCompVersion++;var l=this.headerCompVersion;e.newAgStackInstance().then(function(c){return s.afterCompCreated(l,c)})},i.prototype.afterCompCreated=function(e,s){e==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=s,this.headerCompGui=s.getGui(),this.getGui().appendChild(this.headerCompGui),this.ctrl.setDragSource(this.headerCompGui)):this.destroyBean(s)},i.TEMPLATE='<div class="ag-header-cell" role="columnheader" unselectable="on" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',Wu([Be("eResize")],i.prototype,"eResize",void 0),Wu([Qe],i.prototype,"postConstruct",null),Wu([Ii],i.prototype,"destroyHeaderComp",null),i}(mp),CC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),yp=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Jb=function(d){function i(e){return d.call(this,i.TEMPLATE,e)||this}return CC(i,d),i.prototype.postConstruct=function(){var e=this,s=this.getGui(),l=function(m,w){return null!=w?s.setAttribute(m,w):s.removeAttribute(m)};this.ctrl.setComp({addOrRemoveCssClass:function(m,w){return e.addOrRemoveCssClass(m,w)},addOrRemoveResizableCssClass:function(m,w){return Lt(e.eResize,m,w)},setWidth:function(m){return s.style.width=m},setColId:function(m){return s.setAttribute("col-id",m)},setAriaExpanded:function(m){return l("aria-expanded",m)},setTitle:function(m){return l("title",m)},setUserCompDetails:function(m){return e.setUserCompDetails(m)}},s,this.eResize)},i.prototype.setUserCompDetails=function(e){var s=this;e.newAgStackInstance().then(function(l){return s.afterHeaderCompCreated(l)})},i.prototype.afterHeaderCompCreated=function(e){var s=this,l=function(){return s.destroyBean(e)};this.isAlive()?(this.getGui().appendChild(e.getGui()),this.addDestroyFunc(l),this.ctrl.setDragSource(e.getGui())):l()},i.TEMPLATE='<div class="ag-header-group-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',yp([B("userComponentFactory")],i.prototype,"userComponentFactory",void 0),yp([Be("eResize")],i.prototype,"eResize",void 0),yp([Qe],i.prototype,"postConstruct",null),i}(mp),Zb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),_p=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Cp=function(d){function i(e){return d.call(this,i.TEMPLATE,e)||this}return Zb(i,d),i.prototype.postConstruct=function(){var e=this,s=this.getGui();this.ctrl.setComp({addOrRemoveCssClass:function(p,m){return e.addOrRemoveCssClass(p,m)},addOrRemoveBodyCssClass:function(p,m){return Lt(e.eFloatingFilterBody,p,m)},addOrRemoveButtonWrapperCssClass:function(p,m){return Lt(e.eButtonWrapper,p,m)},setCompDetails:function(p){return e.setCompDetails(p)},getFloatingFilterComp:function(){return e.compPromise},setWidth:function(p){return s.style.width=p},setMenuIcon:function(p){return e.eButtonShowMainFilter.appendChild(p)}},s,this.eButtonShowMainFilter,this.eFloatingFilterBody)},i.prototype.setCompDetails=function(e){var s=this;this.compPromise=e.newAgStackInstance(),this.compPromise.then(function(l){return s.afterCompCreated(l)})},i.prototype.afterCompCreated=function(e){var s=this;!e||(this.addDestroyFunc(function(){return s.context.destroyBean(e)}),this.isAlive()&&(this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()))},i.TEMPLATE='<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">\n            <div ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">\n                <button type="button" aria-label="Open Filter Menu" class="ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',_p([Be("eFloatingFilterBody")],i.prototype,"eFloatingFilterBody",void 0),_p([Be("eButtonWrapper")],i.prototype,"eButtonWrapper",void 0),_p([Be("eButtonShowMainFilter")],i.prototype,"eButtonShowMainFilter",void 0),_p([Qe],i.prototype,"postConstruct",null),i}(mp),_g=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),wp=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};!function(d){d.COLUMN_GROUP="group",d.COLUMN="column",d.FLOATING_FILTER="filter"}(K.A6C||(K.A6C={}));var wC=function(d){function i(e){var s=d.call(this)||this;s.headerComps={};var l=e.getType()==K.A6C.COLUMN_GROUP?"ag-header-row-column-group":e.getType()==K.A6C.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";return s.setTemplate('<div class="ag-header-row '+l+'" role="row"></div>'),s.ctrl=e,s}return _g(i,d),i.prototype.init=function(){var e=this;this.ctrl.setComp({setTransform:function(c){return e.getGui().style.transform=c},setHeight:function(c){return e.getGui().style.height=c},setTop:function(c){return e.getGui().style.top=c},setHeaderCtrls:function(c){return e.setHeaderCtrls(c)},setWidth:function(c){return e.getGui().style.width=c},setAriaRowIndex:function(c){return R_(e.getGui(),c)}})},i.prototype.destroyHeaderCtrls=function(){this.setHeaderCtrls([])},i.prototype.setHeaderCtrls=function(e){var s=this;if(this.isAlive()){var l=this.headerComps;if(this.headerComps={},e.forEach(function(w){var x=w.getInstanceId(),A=l[x];delete l[x],null==A&&(A=s.createHeaderComp(w),s.getGui().appendChild(A.getGui())),s.headerComps[x]=A}),In(l,function(w,x){s.getGui().removeChild(x.getGui()),s.destroyBean(x)}),this.gridOptionsWrapper.isEnsureDomOrder()){var p=ba(this.headerComps);p.sort(function(w,x){return w.getCtrl().getColumnGroupChild().getLeft()-x.getCtrl().getColumnGroupChild().getLeft()});var m=p.map(function(w){return w.getGui()});uo(this.getGui(),m)}}},i.prototype.createHeaderComp=function(e){var s;switch(this.ctrl.getType()){case K.A6C.COLUMN_GROUP:s=new Jb(e);break;case K.A6C.FLOATING_FILTER:s=new Cp(e);break;default:s=new _C(e)}return this.createBean(s),s.setParentComponent(this),s},wp([Qe],i.prototype,"init",null),wp([Ii],i.prototype,"destroyHeaderCtrls",null),i}(dn),Qb=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Uu=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};!function(d){d[d.UP=0]="UP",d[d.DOWN=1]="DOWN",d[d.LEFT=2]="LEFT",d[d.RIGHT=3]="RIGHT"}(K.Y8R||(K.Y8R={}));var SC=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Qb(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(s){e.gridBodyCon=s.gridBodyCtrl})},i.prototype.getHeaderRowCount=function(){var e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0},i.prototype.getHeaderRowType=function(e){var s=this.ctrlsService.getHeaderRowContainerCtrl();if(s)return s.getRowType(e)},i.prototype.navigateVertically=function(e,s,l){if(s||(s=this.focusService.getFocusedHeader()),!s)return!1;var c=s.headerRowIndex,p=s.column,m=this.getHeaderRowCount(),w=e===K.Y8R.UP,x=w?c-1:c+1,A=null,I=!1;x<0&&(x=0,A=p,I=!0),x>=m&&(x=-1);var U=this.getHeaderRowType(c);if(!I){if(U===K.A6C.COLUMN_GROUP){var Y=p;A=w?p.getParent():Y.getDisplayedChildren()[0]}else U===K.A6C.FLOATING_FILTER?A=p:(Y=p,A=w?Y.getParent():Y);if(!A)return!1}return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:x,column:A},allowUserOverride:!0,event:l})},i.prototype.navigateHorizontally=function(e,s,l){void 0===s&&(s=!1);var w,x,c=this.focusService.getFocusedHeader();return(w=e===K.Y8R.LEFT!==this.gridOptionsWrapper.isEnableRtl()?this.headerPositionUtils.findHeader(c,x="Before"):this.headerPositionUtils.findHeader(c,x="After"))?this.focusService.focusHeaderPosition({headerPosition:w,direction:x,fromTab:s,allowUserOverride:!0,event:l}):!s||this.focusNextHeaderRow(c,x,l)},i.prototype.focusNextHeaderRow=function(e,s,l){var c=e.headerRowIndex,p=null;return"Before"===s?c>0&&(p=this.headerPositionUtils.findColAtEdgeForHeaderRow(c-1,"end")):p=this.headerPositionUtils.findColAtEdgeForHeaderRow(c+1,"start"),this.focusService.focusHeaderPosition({headerPosition:p,direction:s,fromTab:!0,allowUserOverride:!0,event:l})},i.prototype.scrollToColumn=function(e,s){if(void 0===s&&(s="After"),!e.getPinned()){var l;if(e instanceof ri){var c=e.getDisplayedLeafColumns();l="Before"===s?Vn(c):c[0]}else l=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(l),this.gridBodyCon.getScrollFeature().horizontallyScrollHeaderCenterAndFloatingCenter(),this.animationFrameService.flushAllFrames()}},Uu([B("focusService")],i.prototype,"focusService",void 0),Uu([B("headerPositionUtils")],i.prototype,"headerPositionUtils",void 0),Uu([B("animationFrameService")],i.prototype,"animationFrameService",void 0),Uu([B("ctrlsService")],i.prototype,"ctrlsService",void 0),Uu([Qe],i.prototype,"postConstruct",null),Uu([ht("headerNavigationService")],i)}(Ye),ex=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Sp=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},EC=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return ex(i,d),i.prototype.setComp=function(e,s,l){this.comp=e,this.eGui=s,this.createManagedBean(new zo(l,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)},i.prototype.setupHeaderHeight=function(){var e=this.setHeaderHeight.bind(this);e(),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_HEADER_HEIGHT,e),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_PIVOT_HEADER_HEIGHT,e),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_GROUP_HEADER_HEIGHT,e),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_PIVOT_GROUP_HEADER_HEIGHT,e),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_FLOATING_FILTERS_HEIGHT,e),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,e)},i.prototype.setHeaderHeight=function(){var m,w,x,s=this.columnModel,l=this.gridOptionsWrapper,c=0,p=s.getHeaderRowCount();s.isPivotMode()?(w=l.getPivotGroupHeaderHeight(),x=l.getPivotHeaderHeight()):(s.hasFloatingFilters()&&(p++,c=1),w=l.getGroupHeaderHeight(),x=l.getHeaderHeight());var U=p-(1+c);m=c*l.getFloatingFiltersHeight(),m+=U*w,this.comp.setHeightAndMinHeight((m+=x)+1+"px")},i.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)},i.prototype.onTabKeyDown=function(e){var s=this.gridOptionsWrapper.isEnableRtl();(this.headerNavigationService.navigateHorizontally(e.shiftKey!==s?K.Y8R.LEFT:K.Y8R.RIGHT,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()},i.prototype.handleKeyDown=function(e){var s=null;switch(e.keyCode){case $e.LEFT:s=K.Y8R.LEFT;case $e.RIGHT:Le(s)||(s=K.Y8R.RIGHT),this.headerNavigationService.navigateHorizontally(s,!1,e);break;case $e.UP:s=K.Y8R.UP;case $e.DOWN:Le(s)||(s=K.Y8R.DOWN),this.headerNavigationService.navigateVertically(s,null,e)&&e.preventDefault();break;default:return}},i.prototype.onFocusOut=function(e){var s=e.relatedTarget;!s&&this.eGui.contains(document.activeElement)||this.eGui.contains(s)||this.focusService.clearFocusedHeader()},Sp([B("headerNavigationService")],i.prototype,"headerNavigationService",void 0),Sp([B("focusService")],i.prototype,"focusService",void 0),Sp([B("columnModel")],i.prototype,"columnModel",void 0),Sp([B("ctrlsService")],i.prototype,"ctrlsService",void 0),i}(Ye),bC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),_d=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Cg=function(d){function i(e){var s=d.call(this)||this;return s.callback=e,s}return bC(i,d),i.prototype.postConstruct=function(){var e=this.setWidth.bind(this);this.addManagedListener(this.gridOptionsWrapper,vt.PROP_DOM_LAYOUT,e),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.setWidth()},i.prototype.setWidth=function(){var e=this.columnModel,s=this.gridOptionsWrapper.getDomLayout()===ce.DOM_LAYOUT_PRINT,l=e.getBodyContainerWidth(),c=e.getDisplayedColumnsLeftWidth(),p=e.getDisplayedColumnsRightWidth();this.callback(s?l+c+p:l)},_d([B("columnModel")],i.prototype,"columnModel",void 0),_d([Qe],i.prototype,"postConstruct",null),i}(Ye),zu=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},xC=function(){function d(i,e){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.pinned=i,this.eContainer=e,this.centerContainer=!Le(i)}return d.prototype.init=function(){var i=this;this.ctrlsService.whenReady(function(){i.gridBodyCon=i.ctrlsService.getGridBodyCtrl()})},d.prototype.getIconName=function(){return this.pinned?Bi.ICON_PINNED:Bi.ICON_MOVE},d.prototype.onDragEnter=function(i){var e=i.dragItem.columns;if(i.dragSource.type===K.rvo.ToolPanel)this.setColumnsVisible(e,!0,"uiColumnDragged");else{var l=i.dragItem.visibleState,c=(e||[]).filter(function(p){return l[p.getId()]});this.setColumnsVisible(c,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(i,!0)},d.prototype.onDragLeave=function(i){if(!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()&&!i.fromNudge){var s=i.dragSource.getDragItem();this.setColumnsVisible(s.columns,!1,"uiColumnDragged")}this.ensureIntervalCleared()},d.prototype.setColumnsVisible=function(i,e,s){if(void 0===s&&(s="api"),i){var l=i.filter(function(c){return!c.getColDef().lockVisible});this.columnModel.setColumnsVisible(l,e,s)}},d.prototype.setColumnsPinned=function(i,e,s){if(void 0===s&&(s="api"),i){var l=i.filter(function(c){return!c.getColDef().lockPinned});this.columnModel.setColumnsPinned(l,e,s)}},d.prototype.onDragStop=function(){this.ensureIntervalCleared()},d.prototype.normaliseX=function(i){return this.gridOptionsWrapper.isEnableRtl()&&(i=this.eContainer.clientWidth-i),this.centerContainer&&(i+=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),i},d.prototype.checkCenterForScrolling=function(i){if(this.centerContainer){var e=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),s=e+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsWrapper.isEnableRtl()?(this.needToMoveRight=i<e+50,this.needToMoveLeft=i>s-50):(this.needToMoveLeft=i<e+50,this.needToMoveRight=i>s-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},d.prototype.onDragging=function(i,e){var s=this;if(void 0===e&&(e=!1),this.lastDraggingEvent=i,!ye(i.hDirection)){var l=this.normaliseX(i.x);e||this.checkCenterForScrolling(l);var c=this.normaliseDirection(i.hDirection),p=i.dragSource.type,m=i.dragSource.getDragItem().columns;m=m.filter(function(w){return!w.getColDef().lockPinned||w.getPinned()==s.pinned}),this.attemptMoveColumns(p,m,c,l,e)}},d.prototype.normaliseDirection=function(i){if(!this.gridOptionsWrapper.isEnableRtl())return i;switch(i){case K.poj.Left:return K.poj.Right;case K.poj.Right:return K.poj.Left;default:console.error("AG Grid: Unknown direction "+i)}},d.prototype.calculateOldIndex=function(i){var e=this.columnModel.getAllGridColumns(),s=Hc(i.map(function(w){return e.indexOf(w)})),l=s[0];return Vn(s)-l!=s.length-1?null:l},d.prototype.attemptMoveColumns=function(i,e,s,l,c){var p=s===K.poj.Left,m=s===K.poj.Right,w=e.slice();this.columnModel.sortColumnsLikeGridColumns(w);var x=this.calculateValidMoves(w,m,l),A=this.calculateOldIndex(w);if(0!==x.length){var I=x[0],U=null!==A&&!c;if(i==K.rvo.HeaderCell&&(U=null!==A),!U||!(p&&I>=A||m&&I<=A))for(var Y=0;Y<x.length;Y++){var Q=x[Y];if(this.columnModel.doesMovePassRules(w,Q))return void this.columnModel.moveColumns(w,Q,"uiColumnDragged")}}},d.prototype.calculateValidMoves=function(i,e,s){if(this.gridOptionsWrapper.isSuppressMovableColumns()||i.some(function(kt){return kt.getColDef().suppressMovable}))return[];var oe,c=this.columnModel.getDisplayedColumns(this.pinned),p=this.columnModel.getAllGridColumns(),m=c.filter(function(kt){return bn(i,kt)}),w=c.filter(function(kt){return!bn(i,kt)}),x=p.filter(function(kt){return!bn(i,kt)}),A=0,I=s;if(e){var U=0;m.forEach(function(kt){return U+=kt.getActualWidth()}),I-=U}if(I>0){for(var Y=0;Y<w.length&&!((I-=w[Y].getActualWidth())<0);Y++)A++;e&&A++}A>0?oe=x.indexOf(w[A-1])+1:-1===(oe=x.indexOf(w[0]))&&(oe=0);var He=[oe],Ve=function(vn,qn){return vn-qn};if(e){for(var Me=oe+1,Ze=p.length-1;Me<=Ze;)He.push(Me),Me++;He.sort(Ve)}else{Ze=p.length-1;for(var Fe=p[Me=oe];Me<=Ze&&this.isColumnHidden(c,Fe);)Me++,He.push(Me),Fe=p[Me];for(Me=oe-1;Me>=0;)He.push(Me),Me--;He.sort(Ve).reverse()}return He},d.prototype.isColumnHidden=function(i,e){return i.indexOf(e)<0},d.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.setGhostIcon(this.needToMoveLeft?Bi.ICON_LEFT:Bi.ICON_RIGHT,!0))},d.prototype.ensureIntervalCleared=function(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(Bi.ICON_MOVE))},d.prototype.moveInterval=function(){var i;this.intervalCount++,(i=10+5*this.intervalCount)>100&&(i=100);var e=null,s=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=s.scrollHorizontally(-i):this.needToMoveRight&&(e=s.scrollHorizontally(i)),0!==e)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var c=this.lastDraggingEvent.dragItem.columns.filter(function(m){return!m.getColDef().lockPinned});c.length>0&&(this.dragAndDropService.setGhostIcon(Bi.ICON_PINNED),this.failedMoveAttempts>7)&&(this.setColumnsPinned(c,this.needToMoveLeft?ce.PINNED_LEFT:ce.PINNED_RIGHT,"uiColumnDragged"),this.dragAndDropService.nudge())}},zu([B("columnModel")],d.prototype,"columnModel",void 0),zu([B("dragAndDropService")],d.prototype,"dragAndDropService",void 0),zu([B("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),zu([B("ctrlsService")],d.prototype,"ctrlsService",void 0),zu([Qe],d.prototype,"init",null),d}(),Tr=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},RC=function(){function d(i){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=i}return d.prototype.onDragEnter=function(i){var e=this;if(this.clearColumnsList(),!this.gridOptionsWrapper.isFunctionsReadOnly()){var s=i.dragItem.columns;!s||s.forEach(function(l){!l.isPrimary()||l.isAnyFunctionActive()||(l.isAllowValue()?e.columnsToAggregate.push(l):l.isAllowRowGroup()?e.columnsToGroup.push(l):l.isAllowPivot()&&e.columnsToPivot.push(l))})}},d.prototype.getIconName=function(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?Bi.ICON_PINNED:Bi.ICON_MOVE:null},d.prototype.onDragLeave=function(i){this.clearColumnsList()},d.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},d.prototype.onDragging=function(i){},d.prototype.onDragStop=function(i){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},Tr([B("columnModel")],d.prototype,"columnModel",void 0),Tr([B("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),d}(),tx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ci=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},wg=function(d){function i(e,s){var l=d.call(this)||this;return l.pinned=e,l.eContainer=s,l}return tx(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(s){switch(e.pinned){case ce.PINNED_LEFT:e.eSecondaryContainers=[[s.gridBodyCtrl.getBodyViewportElement(),s.leftRowContainerCtrl.getContainerElement()],[s.bottomLeftRowContainerCtrl.getContainerElement()],[s.topLeftRowContainerCtrl.getContainerElement()]];break;case ce.PINNED_RIGHT:e.eSecondaryContainers=[[s.gridBodyCtrl.getBodyViewportElement(),s.rightRowContainerCtrl.getContainerElement()],[s.bottomRightRowContainerCtrl.getContainerElement()],[s.topRightRowContainerCtrl.getContainerElement()]];break;default:e.eSecondaryContainers=[[s.gridBodyCtrl.getBodyViewportElement(),s.centerRowContainerCtrl.getViewportElement()],[s.bottomCenterRowContainerCtrl.getViewportElement()],[s.topCenterRowContainerCtrl.getViewportElement()]]}})},i.prototype.isInterestedIn=function(e){return e===K.rvo.HeaderCell||e===K.rvo.ToolPanel&&this.gridOptionsWrapper.isAllowDragFromColumnsToolPanel()},i.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},i.prototype.getContainer=function(){return this.eContainer},i.prototype.init=function(){this.moveColumnFeature=this.createManagedBean(new xC(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new RC(this.pinned)),this.dragAndDropService.addDropTarget(this)},i.prototype.getIconName=function(){return this.currentDropListener.getIconName()},i.prototype.isDropColumnInPivotMode=function(e){return this.columnModel.isPivotMode()&&e.dragSource.type===K.rvo.ToolPanel},i.prototype.onDragEnter=function(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)},i.prototype.onDragLeave=function(e){this.currentDropListener.onDragLeave(e)},i.prototype.onDragging=function(e){this.currentDropListener.onDragging(e)},i.prototype.onDragStop=function(e){this.currentDropListener.onDragStop(e)},Ci([B("dragAndDropService")],i.prototype,"dragAndDropService",void 0),Ci([B("columnModel")],i.prototype,"columnModel",void 0),Ci([B("ctrlsService")],i.prototype,"ctrlsService",void 0),Ci([Qe],i.prototype,"postConstruct",null),Ci([Qe],i.prototype,"init",null),i}(Ye),nx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ix=0,Cd=function(d){function i(e,s){var l=d.call(this)||this;return l.lastFocusEvent=null,l.columnGroupChild=e,l.parentRowCtrl=s,l.instanceId=e.getUniqueId()+"-"+ix++,l}return nx(i,d),i.prototype.shouldStopEventPropagation=function(e){var s=this.focusService.getFocusedHeader();return zv(this.gridOptionsWrapper,e,s.headerRowIndex,s.column)},i.prototype.setGui=function(e){this.eGui=e,this.addDomData()},i.prototype.addDomData=function(){var e=this,s=i.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsWrapper.setDomData(this.eGui,s,this),this.addDestroyFunc(function(){return e.gridOptionsWrapper.setDomData(e.eGui,s,null)})},i.prototype.focus=function(e){return!!this.eGui&&(this.lastFocusEvent=e||null,this.eGui.focus(),!0)},i.prototype.getRowIndex=function(){return this.parentRowCtrl.getRowIndex()},i.prototype.getParentRowCtrl=function(){return this.parentRowCtrl},i.prototype.getPinned=function(){return this.parentRowCtrl.getPinned()},i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.getColumnGroupChild=function(){return this.columnGroupChild},i.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([B("focusService")],i.prototype,"focusService",void 0),i}(Ye),AC=function(){function d(){}return d.getFloatingFilterType=function(i){return this.filterToFloatingFilterMapping[i]},d.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},d}(),EM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),tu=function(d){function i(e,s,l,c){var p=d.call(this)||this;return p.columnOrGroup=e,p.eCell=s,p.ariaEl=p.eCell.querySelector("[role=columnheader]")||p.eCell,p.colsSpanning=c,p.beans=l,p}return EM(i,d),i.prototype.setColsSpanning=function(e){this.colsSpanning=e,this.onLeftChanged()},i.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?Vn(this.colsSpanning):this.columnOrGroup},i.prototype.postConstruct=function(){this.addManagedListener(this.columnOrGroup,Tn.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,vt.PROP_DOM_LAYOUT,this.onLeftChanged.bind(this))},i.prototype.setLeftFirstTime=function(){var e=this.beans.gridOptionsWrapper.isSuppressColumnMoveAnimation(),s=Le(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&s&&!e?this.animateInLeft():this.onLeftChanged()},i.prototype.animateInLeft=function(){var e=this,s=this.getColumnOrGroup(),l=s.getLeft(),c=s.getOldLeft(),p=this.modifyLeftForPrintLayout(s,c),m=this.modifyLeftForPrintLayout(s,l);this.setLeft(p),this.actualLeft=m,this.beans.columnAnimationService.executeNextVMTurn(function(){e.actualLeft===m&&e.setLeft(m)})},i.prototype.onLeftChanged=function(){var e=this.getColumnOrGroup(),s=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,s),this.setLeft(this.actualLeft)},i.prototype.modifyLeftForPrintLayout=function(e,s){if(this.beans.gridOptionsWrapper.getDomLayout()!==ce.DOM_LAYOUT_PRINT||e.getPinned()===ce.PINNED_LEFT)return s;var c=this.beans.columnModel.getDisplayedColumnsLeftWidth();return e.getPinned()===ce.PINNED_RIGHT?c+this.beans.columnModel.getBodyContainerWidth()+s:c+s},i.prototype.setLeft=function(e){var s;if(Le(e)&&(this.eCell.style.left=e+"px"),this.columnOrGroup instanceof Tn)s=this.columnOrGroup;else{var c=this.columnOrGroup.getLeafColumns();if(!c.length)return;c.length>1&&XE(this.ariaEl,c.length),s=c[0]}var p=this.beans.columnModel.getAriaColumnIndex(s);A_(this.ariaEl,p)},function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Qe],i.prototype,"postConstruct",null),i}(Ye),Yo=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ep=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},bp=function(d){function i(e,s){var l=d.call(this)||this;return l.columns=e,l.element=s,l}return Yo(i,d),i.prototype.postConstruct=function(){this.gridOptionsWrapper.isColumnHoverHighlight()&&this.addMouseHoverListeners()},i.prototype.addMouseHoverListeners=function(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))},i.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},i.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},Ep([B("columnHoverService")],i.prototype,"columnHoverService",void 0),Ep([Qe],i.prototype,"postConstruct",null),i}(Ye),TC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Rr=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},$l=function(d){function i(e,s){var l=d.call(this,e,s)||this;return l.column=e,l}return TC(i,d),i.prototype.setComp=function(e,s,l,c){d.prototype.setGui.call(this,s),this.comp=e,this.eButtonShowMainFilter=l,this.eFloatingFilterBody=c;var p=this.column.getColDef();this.active=!(!p.filter&&!p.filterFramework||!p.floatingFilter),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this))},i.prototype.setupUi=function(){if(this.comp.addOrRemoveButtonWrapperCssClass("ag-hidden",!this.active||this.suppressFilterButton),this.active){this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton);var e=oi("filter",this.gridOptionsWrapper,this.column);e&&this.eButtonShowMainFilter.appendChild(e)}},i.prototype.setupFocus=function(){this.createManagedBean(new zo(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},i.prototype.onTabKeyDown=function(e){if(document.activeElement!==this.eGui){var c=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);c&&(e.preventDefault(),c.focus())}},i.prototype.handleKeyDown=function(e){var l=document.activeElement===this.eGui;switch(e.keyCode){case $e.UP:case $e.DOWN:l||e.preventDefault();case $e.LEFT:case $e.RIGHT:if(l)return;e.stopPropagation();case $e.ENTER:l&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case $e.ESCAPE:l||this.eGui.focus()}},i.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var l=this.focusService.isKeyboardMode(),c=!!e.relatedTarget&&!fs(e.relatedTarget,"ag-floating-filter"),p=!!e.relatedTarget&&xl(e.relatedTarget,"ag-floating-filter");if(l&&c&&p&&e.target===this.eGui){var m=this.lastFocusEvent;if(m&&m&&m.keyCode===$e.TAB){var x=this.beans.focusService.getFocusedHeader(),A=this.beans.columnModel.getDisplayedColAfter(this.column);this.focusService.focusInto(this.eGui,!!(l&&m.shiftKey&&x&&A===x.column))}}var Y=this.getRowIndex();this.beans.focusService.setFocusedHeader(Y,this.column)}},i.prototype.setupHover=function(){var e=this;this.createManagedBean(new bp([this.column],this.eGui));var s=function(){if(e.gridOptionsWrapper.isColumnHoverHighlight()){var c=e.columnHoverService.isHovered(e.column);e.comp.addOrRemoveCssClass("ag-column-hover",c)}};this.addManagedListener(this.eventService,$.EVENT_COLUMN_HOVER_CHANGED,s),s()},i.prototype.setupLeft=function(){var e=new tu(this.column,this.eGui,this.beans);this.createManagedBean(e)},i.prototype.setupUserComp=function(){if(this.active){var e=this.column.getColDef(),s=this.filterManager.createFilterParams(this.column,e),l=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(e,"filter",s),c=i.getDefaultFloatingFilterType(e);null==c&&(c="agReadOnlyFloatingFilter");var p={api:this.gridApi,column:this.column,filterParams:l,currentParentModel:this.currentParentModel.bind(this),parentFilterInstance:this.parentFilterInstance.bind(this),showParentFilter:this.showParentFilter.bind(this),onFloatingFilterChanged:this.onFloatingFilterChanged.bind(this),suppressFilterButton:!1};this.suppressFilterButton=!!e.floatingFilterComponentParams&&!!e.floatingFilterComponentParams.suppressFilterButton;var m=this.userComponentFactory.getFloatingFilterCompDetails(e,p,c);m&&this.comp.setCompDetails(m)}},i.getDefaultFloatingFilterType=function(e){if(null==e)return null;var s=null;return"string"==typeof e.filter?s=AC.getFloatingFilterType(e.filter):e.filterFramework||!0===e.filter&&(s=jt.isRegistered(K.GXE.SetFilterModule)?"agSetColumnFloatingFilter":"agTextColumnFloatingFilter"),s},i.prototype.currentParentModel=function(){var e=this.getFilterComponent(!1);return e?e.resolveNow(null,function(s){return s&&s.getModel()}):null},i.prototype.getFilterComponent=function(e){return void 0===e&&(e=!0),this.filterManager.getFilterComponent(this.column,"NO_UI",e)},i.prototype.onFloatingFilterChanged=function(){console.warn("AG Grid: since version 21.x, how floating filters are implemented has changed. Instead of calling params.onFloatingFilterChanged(), get a reference to the main filter via params.parentFilterInstance() and then set a value on the parent filter directly.")},i.prototype.parentFilterInstance=function(e){var s=this,l=this.getFilterComponent();l&&l.then(function(c){var p=s.frameworkComponentWrapper?s.frameworkComponentWrapper.unwrap(c):c;e(p)})},i.prototype.showParentFilter=function(){this.menuFactory.showMenuAfterButtonClick(this.column,this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter,"floatingFilter","filterMenuTab",["filterMenuTab"])},i.prototype.setupSyncWithFilter=function(){var e=this;if(this.active){var s=function(c){var p=e.comp.getFloatingFilterComp();if(p){var m=e.currentParentModel();p.then(function(w){return w&&w.onParentModelChanged(m,c)})}};this.addManagedListener(this.column,Tn.EVENT_FILTER_CHANGED,s),this.filterManager.isFilterActive(this.column)&&s(null)}},i.prototype.setupWidth=function(){var e=this,s=function(){var c=e.column.getActualWidth()+"px";e.comp.setWidth(c)};this.addManagedListener(this.column,Tn.EVENT_WIDTH_CHANGED,s),s()},Rr([B("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Rr([B("filterManager")],i.prototype,"filterManager",void 0),Rr([B("columnHoverService")],i.prototype,"columnHoverService",void 0),Rr([B("gridApi")],i.prototype,"gridApi",void 0),Rr([B("menuFactory")],i.prototype,"menuFactory",void 0),Rr([B("beans")],i.prototype,"beans",void 0),Rr([Ln("frameworkComponentWrapper")],i.prototype,"frameworkComponentWrapper",void 0),i}(Cd),wd=function(){function d(){}return d.getHeaderClassesFromColDef=function(i,e,s,l){return ye(i)?[]:this.getColumnClassesFromCollDef(i.headerClass,i,e,s,l)},d.getToolPanelClassesFromColDef=function(i,e,s,l){return ye(i)?[]:this.getColumnClassesFromCollDef(i.toolPanelClass,i,e,s,l)},d.getColumnClassesFromCollDef=function(i,e,s,l,c){return ye(i)?[]:"string"==typeof(p="function"==typeof i?i({colDef:e,column:l,columnGroup:c,context:s.getContext(),api:s.getApi()}):i)?[p]:Array.isArray(p)?p:[];var p},d}(),ox=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Sg=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},DC=function(d){function i(e,s,l,c,p){var m=d.call(this)||this;return m.pinned=e,m.column=s,m.eResize=l,m.comp=c,m.ctrl=p,m}return ox(i,d),i.prototype.postConstruct=function(){var c,p,e=this,s=this.column.getColDef(),l=[],w=function(){l.forEach(function(I){return I()}),l.length=0},x=function(){var I=e.column.isResizable(),U=!e.gridOptionsWrapper.isSuppressAutoSize()&&!s.suppressAutoSize;(I!==c||U!==p)&&(c=I,p=U,w(),function(){if(jn(e.eResize,c),c){var I=e.horizontalResizeService.addResizeBar({eResizeBar:e.eResize,onResizeStart:e.onResizeStart.bind(e),onResizing:e.onResizing.bind(e,!1),onResizeEnd:e.onResizing.bind(e,!0)});if(l.push(I),p){var U=e.gridOptionsWrapper.isSkipHeaderOnAutoSize(),Y=function(){e.columnModel.autoSizeColumn(e.column,U,"uiColumnResized")};e.eResize.addEventListener("dblclick",Y);var Q=new bo(e.eResize);Q.addEventListener(bo.EVENT_DOUBLE_TAP,Y),e.addDestroyFunc(function(){e.eResize.removeEventListener("dblclick",Y),Q.removeEventListener(bo.EVENT_DOUBLE_TAP,Y),Q.destroy()})}}}())};x(),this.addDestroyFunc(w),this.ctrl.addRefreshFunction(x)},i.prototype.onResizing=function(e,s){var l=this.normaliseResizeAmount(s);this.columnModel.setColumnWidths([{key:this.column,newWidth:this.resizeStartWidth+l}],this.resizeWithShiftKey,e,"uiColumnDragged"),e&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},i.prototype.onResizeStart=function(e){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=e,this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},i.prototype.normaliseResizeAmount=function(e){var s=e,l=this.pinned!==ce.PINNED_LEFT,c=this.pinned===ce.PINNED_RIGHT;return this.gridOptionsWrapper.isEnableRtl()?l&&(s*=-1):c&&(s*=-1),s},Sg([B("horizontalResizeService")],i.prototype,"horizontalResizeService",void 0),Sg([B("columnModel")],i.prototype,"columnModel",void 0),Sg([Qe],i.prototype,"postConstruct",null),i}(Ye),ax=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ju=function(d){function i(e,s,l){void 0===s&&(s="ag-checkbox"),void 0===l&&(l="checkbox");var c=d.call(this,e,s,l)||this;return c.labelAlignment="right",c.selected=!1,c.readOnly=!1,c.passive=!1,c}return ax(i,d),i.prototype.addInputListeners=function(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))},i.prototype.getNextValue=function(){return void 0===this.selected||!this.selected},i.prototype.setPassive=function(e){this.passive=e},i.prototype.isReadOnly=function(){return this.readOnly},i.prototype.setReadOnly=function(e){Lt(this.eWrapper,"ag-disabled",e),this.eInput.disabled=e,this.readOnly=e},i.prototype.setDisabled=function(e){return Lt(this.eWrapper,"ag-disabled",e),d.prototype.setDisabled.call(this,e)},i.prototype.toggle=function(){if(!this.eInput.disabled){var e=this.isSelected(),s=this.getNextValue();this.passive?this.dispatchChange(s,e):this.setValue(s)}},i.prototype.getValue=function(){return this.isSelected()},i.prototype.setValue=function(e,s){return this.refreshSelectedClass(e),this.setSelected(e,s),this},i.prototype.setName=function(e){return this.getInputElement().name=e,this},i.prototype.isSelected=function(){return this.selected},i.prototype.setSelected=function(e,s){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected="boolean"==typeof e?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=void 0===e,s||this.dispatchChange(this.selected,this.previousValue))},i.prototype.dispatchChange=function(e,s,l){this.dispatchEvent({type:i.EVENT_CHANGED,selected:e,previousValue:s,event:l});var c=this.getInputElement();this.eventService.dispatchEvent({type:$.EVENT_CHECKBOX_CHANGED,id:c.id,name:c.name,selected:e,previousValue:s})},i.prototype.onCheckboxClick=function(e){if(!this.passive&&!this.eInput.disabled){var s=this.isSelected(),l=this.selected=e.target.checked;this.refreshSelectedClass(l),this.dispatchChange(l,s,e)}},i.prototype.refreshSelectedClass=function(e){Lt(this.eWrapper,"ag-checked",!0===e),Lt(this.eWrapper,"ag-indeterminate",null==e)},i}(Na),sx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Sd=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ux=function(d){function i(e){var s=d.call(this)||this;s.cbSelectAllVisible=!1,s.processingEventFromCheckbox=!1,s.column=e;var l=e.getColDef();return s.filteredOnly=!!l&&!!l.headerCheckboxSelectionFilteredOnly,s}return sx(i,d),i.prototype.onSpaceKeyPressed=function(e){var s=this.cbSelectAll;s.isDisplayed()&&!s.getGui().contains(document.activeElement)&&(e.preventDefault(),s.setValue(!s.getValue()))},i.prototype.getCheckboxGui=function(){return this.cbSelectAll.getGui()},i.prototype.setComp=function(e){this.comp=e,this.cbSelectAll=this.createManagedBean(new ju),this.cbSelectAll.addCssClass("ag-header-select-all"),ji(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,$.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,ju.EVENT_CHANGED,this.onCbSelectAll.bind(this)),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()},i.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType(),this.updateStateOfCheckbox()),this.refreshHeaderAriaDescribedBy(this.cbSelectAllVisible)},i.prototype.refreshHeaderAriaDescribedBy=function(e){var s=e?this.cbSelectAll.getInputElement().id:void 0;this.comp.setAriaDescribedBy(s)},i.prototype.onModelChanged=function(){!this.cbSelectAllVisible||this.updateStateOfCheckbox()},i.prototype.onSelectionChanged=function(){!this.cbSelectAllVisible||this.updateStateOfCheckbox()},i.prototype.getNextCheckboxState=function(e){return(0!==e.selected||0!==e.notSelected)&&(e.selected>0&&e.notSelected>0?null:e.selected>0)},i.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var e=this.getSelectionCount(),s=this.getNextCheckboxState(e);this.cbSelectAll.setValue(s),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}},i.prototype.refreshSelectAllLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),l=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),c=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAll.setInputAriaLabel(c+" ("+l+")")},i.prototype.getSelectionCount=function(){var e=this,s=0,l=0,c=function(m){e.gridOptionsWrapper.isGroupSelectsChildren()&&m.group||(m.isSelected()?s++:m.selectable&&l++)};return this.filteredOnly?this.gridApi.forEachNodeAfterFilter(c):this.gridApi.forEachNode(c),{notSelected:l,selected:s}},i.prototype.checkRightRowModelType=function(){var e=this.rowModel.getType();e===ce.ROW_MODEL_TYPE_CLIENT_SIDE||console.warn("AG Grid: selectAllCheckbox is only available if using normal row model, you are using "+e)},i.prototype.onCbSelectAll=function(){!this.processingEventFromCheckbox&&this.cbSelectAllVisible&&(this.cbSelectAll.getValue()?this.selectionService.selectAllRowNodes(this.filteredOnly):this.selectionService.deselectAllRowNodes(this.filteredOnly))},i.prototype.isCheckboxSelection=function(){var e=this.column.getColDef().headerCheckboxSelection;return"function"==typeof e&&(e=e({column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi})),!(!e||(this.gridOptionsWrapper.isRowModelServerSide()?(console.warn("headerCheckboxSelection is not supported for Server Side Row Model"),1):this.gridOptionsWrapper.isRowModelInfinite()?(console.warn("headerCheckboxSelection is not supported for Infinite Row Model"),1):this.gridOptionsWrapper.isRowModelViewport()&&(console.warn("headerCheckboxSelection is not supported for Viewport Row Model"),1)))},Sd([B("gridApi")],i.prototype,"gridApi",void 0),Sd([B("columnApi")],i.prototype,"columnApi",void 0),Sd([B("rowModel")],i.prototype,"rowModel",void 0),Sd([B("selectionService")],i.prototype,"selectionService",void 0),i}(Ye),lx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ua=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},xp=function(d){function i(e,s){var l=d.call(this,e,s)||this;return l.refreshFunctions=[],l.userHeaderClasses=new Set,l.column=e,l}return lx(i,d),i.prototype.setComp=function(e,s,l){var c=this;d.prototype.setGui.call(this,s),this.comp=e,this.colDefVersion=this.columnModel.getColDefVersion(),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.addColumnHoverListener(),this.setupFilterCss(),this.setupColId(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.createManagedBean(new DC(this.getPinned(),this.column,l,e,this)),this.createManagedBean(new bp([this.column],s)),this.createManagedBean(new tu(this.column,s,this.beans)),this.createManagedBean(new zo(s,{shouldStopEventPropagation:function(m){return c.shouldStopEventPropagation(m)},onTabKeyDown:function(){return null},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this))},i.prototype.setupUserComp=function(){var e=this.lookupUserCompDetails();this.setCompDetails(e)},i.prototype.setCompDetails=function(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)},i.prototype.lookupUserCompDetails=function(){var e=this.createParams(),s=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(s,e)},i.prototype.createParams=function(){var e=this,s=this.column.getColDef();return{column:this.column,displayName:this.displayName,enableSorting:s.sortable,enableMenu:this.menuEnabled,showColumnMenu:function(p){e.gridApi.showColumnMenuAfterButtonClick(e.column,p)},progressSort:function(p){e.sortController.progressSort(e.column,!!p,"uiColumnSorted")},setSort:function(p,m){e.sortController.setSortForColumn(e.column,p,!!m,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext(),eGridHeader:this.getGui()}},i.prototype.setupSelectAll=function(){this.selectAllFeature=this.createManagedBean(new ux(this.column)),this.selectAllFeature.setComp(this.comp)},i.prototype.getSelectAllGui=function(){return this.selectAllFeature.getCheckboxGui()},i.prototype.handleKeyDown=function(e){e.keyCode===$e.SPACE&&this.selectAllFeature.onSpaceKeyPressed(e),e.keyCode===$e.ENTER&&this.onEnterKeyPressed(e)},i.prototype.onEnterKeyPressed=function(e){var s=this.comp.getUserCompInstance();s&&(e.ctrlKey||e.metaKey?this.menuEnabled&&s.showMenu&&(e.preventDefault(),s.showMenu()):this.sortable&&this.sortController.progressSort(this.column,e.shiftKey,"uiColumnSorted"))},i.prototype.isMenuEnabled=function(){return this.menuEnabled},i.prototype.onFocusIn=function(e){if(!this.getGui().contains(e.relatedTarget)){var s=this.getRowIndex();this.focusService.setFocusedHeader(s,this.column)}this.setActiveHeader(!0)},i.prototype.onFocusOut=function(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)},i.prototype.setupTooltip=function(){var e=this,l=this.createManagedBean(new pC({getColumn:function(){return e.column},getColDef:function(){return e.column.getColDef()},getGui:function(){return e.eGui},getLocation:function(){return"header"},getTooltipValue:function(){return e.column.getColDef().headerTooltip}},this.beans));l.setComp(this.comp),this.refreshFunctions.push(function(){return l.refreshToolTip()})},i.prototype.setupClassesFromColDef=function(){var e=this,s=function(){var c=e.column.getColDef(),m=wd.getHeaderClassesFromColDef(c,e.gridOptionsWrapper,e.column,null),w=e.userHeaderClasses;e.userHeaderClasses=new Set(m),m.forEach(function(x){w.has(x)?w.delete(x):e.comp.addOrRemoveCssClass(x,!0)}),w.forEach(function(x){return e.comp.addOrRemoveCssClass(x,!1)})};this.refreshFunctions.push(s),s()},i.prototype.getGui=function(){return this.eGui},i.prototype.setDragSource=function(e){var s=this;this.dragSourceElement=e,this.removeDragSource(),e&&(!this.draggable||(this.moveDragSource={type:K.rvo.HeaderCell,eElement:e,defaultIconName:Bi.ICON_HIDE,getDragItem:function(){return s.createDragItem()},dragItemName:this.displayName,onDragStarted:function(){return s.column.setMoving(!0,"uiColumnMoved")},onDragStopped:function(){return s.column.setMoving(!1,"uiColumnMoved")}},this.dragAndDropService.addDragSource(this.moveDragSource,!0)))},i.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},i.prototype.removeDragSource=function(){this.moveDragSource&&(this.dragAndDropService.removeDragSource(this.moveDragSource),this.moveDragSource=void 0)},i.prototype.onNewColumnsLoaded=function(){var e=this.columnModel.getColDefVersion();e!=this.colDefVersion&&(this.colDefVersion=e,this.refresh())},i.prototype.updateState=function(){var e=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!e.suppressMenu,this.sortable=e.sortable,this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()},i.prototype.addRefreshFunction=function(e){this.refreshFunctions.push(e)},i.prototype.refresh=function(){this.updateState(),this.refreshHeaderComp(),this.refreshFunctions.forEach(function(e){return e()})},i.prototype.refreshHeaderComp=function(){var e=this.lookupUserCompDetails();null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)},i.prototype.attemptHeaderCompRefresh=function(e){var s=this.comp.getUserCompInstance();return!(!s||!s.refresh)&&s.refresh(e)},i.prototype.calculateDisplayName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)},i.prototype.checkDisplayName=function(){this.displayName!==this.calculateDisplayName()&&this.refresh()},i.prototype.workOutDraggable=function(){var e=this.column.getColDef();return!(this.gridOptionsWrapper.isSuppressMovableColumns()||e.suppressMovable||e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot},i.prototype.onColumnRowGroupChanged=function(){this.checkDisplayName()},i.prototype.onColumnPivotChanged=function(){this.checkDisplayName()},i.prototype.onColumnValueChanged=function(){this.checkDisplayName()},i.prototype.setupWidth=function(){var e=this,s=function(){e.comp.setWidth(e.column.getActualWidth()+"px")};this.addManagedListener(this.column,Tn.EVENT_WIDTH_CHANGED,s),s()},i.prototype.setupMovingCss=function(){var e=this,s=function(){e.comp.addOrRemoveCssClass("ag-header-cell-moving",e.column.isMoving())};this.addManagedListener(this.column,Tn.EVENT_MOVING_CHANGED,s),s()},i.prototype.setupMenuClass=function(){var e=this,s=function(){e.comp.addOrRemoveCssClass("ag-column-menu-visible",e.column.isMenuVisible())};this.addManagedListener(this.column,Tn.EVENT_MENU_VISIBLE_CHANGED,s),s()},i.prototype.setupSortableClass=function(){var e=this,s=function(){e.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!e.sortable)},l=function(){e.comp.setAriaSort(e.sortable?x_(e.column):void 0)};s(),l(),this.addRefreshFunction(s),this.addRefreshFunction(l),this.addManagedListener(this.column,Tn.EVENT_SORT_CHANGED,l)},i.prototype.addColumnHoverListener=function(){var e=this,s=function(){if(e.gridOptionsWrapper.isColumnHoverHighlight()){var c=e.columnHoverService.isHovered(e.column);e.comp.addOrRemoveCssClass("ag-column-hover",c)}};this.addManagedListener(this.eventService,$.EVENT_COLUMN_HOVER_CHANGED,s),s()},i.prototype.setupFilterCss=function(){var e=this,s=function(){e.comp.addOrRemoveCssClass("ag-header-cell-filtered",e.column.isFilterActive())};this.addManagedListener(this.column,Tn.EVENT_FILTER_ACTIVE_CHANGED,s),s()},i.prototype.setupColId=function(){this.comp.setColId(this.column.getColId())},i.prototype.addActiveHeaderMouseListeners=function(){var e=this,s=function(c){return e.setActiveHeader("mouseenter"===c.type)};this.addManagedListener(this.getGui(),"mouseenter",s),this.addManagedListener(this.getGui(),"mouseleave",s)},i.prototype.setActiveHeader=function(e){this.comp.addOrRemoveCssClass("ag-header-active",e)},Ua([B("columnModel")],i.prototype,"columnModel",void 0),Ua([B("columnHoverService")],i.prototype,"columnHoverService",void 0),Ua([B("beans")],i.prototype,"beans",void 0),Ua([B("sortController")],i.prototype,"sortController",void 0),Ua([B("menuFactory")],i.prototype,"menuFactory",void 0),Ua([B("dragAndDropService")],i.prototype,"dragAndDropService",void 0),Ua([B("gridApi")],i.prototype,"gridApi",void 0),Ua([B("columnApi")],i.prototype,"columnApi",void 0),Ua([B("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Ua([Ii],i.prototype,"removeDragSource",null),i}(Cd),cx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Eg=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},xM=function(d){function i(e,s,l,c){var p=d.call(this)||this;return p.eResize=s,p.comp=e,p.pinned=l,p.columnGroup=c,p}return cx(i,d),i.prototype.postConstruct=function(){var e=this;if(this.columnGroup.isResizable()){var s=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(s),!this.gridOptionsWrapper.isSuppressAutoSize()){var l=this.gridOptionsWrapper.isSkipHeaderOnAutoSize();this.eResize.addEventListener("dblclick",function(c){var p=[];e.columnGroup.getDisplayedLeafColumns().forEach(function(m){m.getColDef().suppressAutoSize||p.push(m.getColId())}),p.length>0&&e.columnModel.autoSizeColumns(p,l,"uiColumnResized")})}}else this.comp.addOrRemoveResizableCssClass("ag-hidden",!0)},i.prototype.onResizeStart=function(e){var s=this,l=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=l.filter(function(m){return m.isResizable()}),this.resizeStartWidth=0,this.resizeCols.forEach(function(m){return s.resizeStartWidth+=m.getActualWidth()}),this.resizeRatios=[],this.resizeCols.forEach(function(m){return s.resizeRatios.push(m.getActualWidth()/s.resizeStartWidth)});var c=null;if(e&&(c=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),c){var p=c.getDisplayedLeafColumns();this.resizeTakeFromCols=p.filter(function(m){return m.isResizable()}),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach(function(m){return s.resizeTakeFromStartWidth+=m.getActualWidth()}),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach(function(m){return s.resizeTakeFromRatios.push(m.getActualWidth()/s.resizeTakeFromStartWidth)})}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null;this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},i.prototype.onResizing=function(e,s){var l=[],c=this.normaliseDragChange(s);l.push({columns:this.resizeCols,ratios:this.resizeRatios,width:this.resizeStartWidth+c}),this.resizeTakeFromCols&&l.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-c}),this.columnModel.resizeColumnSets(l,e,"uiColumnDragged"),e&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},i.prototype.normaliseDragChange=function(e){var s=e;return this.gridOptionsWrapper.isEnableRtl()?this.pinned!==ce.PINNED_LEFT&&(s*=-1):this.pinned===ce.PINNED_RIGHT&&(s*=-1),s},Eg([B("horizontalResizeService")],i.prototype,"horizontalResizeService",void 0),Eg([B("columnModel")],i.prototype,"columnModel",void 0),Eg([Qe],i.prototype,"postConstruct",null),i}(Ye),bg=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),fx=function(d){function i(e,s){var l=d.call(this)||this;return l.removeChildListenersFuncs=[],l.columnGroup=s,l.comp=e,l}return bg(i,d),i.prototype.postConstruct=function(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,ri.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))},i.prototype.addListenersToChildrenColumns=function(){var e=this;this.removeListenersOnChildrenColumns();var s=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(function(l){l.addEventListener(Tn.EVENT_WIDTH_CHANGED,s),l.addEventListener(Tn.EVENT_VISIBLE_CHANGED,s),e.removeChildListenersFuncs.push(function(){l.removeEventListener(Tn.EVENT_WIDTH_CHANGED,s),l.removeEventListener(Tn.EVENT_VISIBLE_CHANGED,s)})})},i.prototype.removeListenersOnChildrenColumns=function(){this.removeChildListenersFuncs.forEach(function(e){return e()}),this.removeChildListenersFuncs=[]},i.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},i.prototype.onWidthChanged=function(){this.comp.setWidth(this.columnGroup.getActualWidth()+"px")},function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Qe],i.prototype,"postConstruct",null),i}(Ye),Xl=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Jl=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},MC=function(d){function i(e,s){var l=d.call(this,e,s)||this;return l.columnGroup=e,l}return Xl(i,d),i.prototype.setComp=function(e,s,l){d.prototype.setGui.call(this,s),this.comp=e,this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.columnGroup,"header"),this.addClasses(),this.addAttributes(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();var c=this.getParentRowCtrl().getPinned(),p=this.columnGroup.getOriginalColumnGroup().getLeafColumns();this.createManagedBean(new bp(p,s)),this.createManagedBean(new tu(this.columnGroup,s,this.beans)),this.createManagedBean(new xM(e,l,c,this.columnGroup)),this.createManagedBean(new fx(e,this.columnGroup)),this.createManagedBean(new zo(s,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:function(){},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},i.prototype.setupUserComp=function(){var e=this,s=this.displayName,l={displayName:this.displayName,columnGroup:this.columnGroup,setExpanded:function(A){e.columnModel.setColumnGroupOpened(e.columnGroup.getOriginalColumnGroup(),A,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};if(!s){for(var c=this.columnGroup,p=c.getLeafColumns();c.getParent()&&c.getParent().getLeafColumns().length===p.length;)c=c.getParent();var m=c.getColGroupDef();m&&(s=m.headerName),s||(s=p?this.columnModel.getDisplayNameForColumn(p[0],"header",!0):"")}var w=this.userComponentFactory.getHeaderGroupCompDetails(l);this.comp.setUserCompDetails(w)},i.prototype.setupTooltip=function(){var e=this,s=this.columnGroup.getColGroupDef(),l={getColumn:function(){return e.columnGroup},getGui:function(){return e.eGui},getLocation:function(){return"headerGroup"},getTooltipValue:function(){return s&&s.headerTooltip}};s&&(l.getColDef=function(){return s}),this.createManagedBean(new pC(l,this.beans)).setComp(this.comp)},i.prototype.setupExpandable=function(){var e=this.columnGroup.getOriginalColumnGroup();this.refreshExpanded(),this.addManagedListener(e,gr.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,gr.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))},i.prototype.refreshExpanded=function(){var e=this.columnGroup;this.expandable=e.isExpandable();var s=e.isExpanded();this.comp.setAriaExpanded(this.expandable?s?"true":"false":void 0)},i.prototype.addAttributes=function(){this.comp.setColId(this.columnGroup.getUniqueId())},i.prototype.addClasses=function(){var e=this,s=this.columnGroup.getColGroupDef(),l=wd.getHeaderClassesFromColDef(s,this.gridOptionsWrapper,null,this.columnGroup);l.push(this.columnGroup.isPadding()?"ag-header-group-cell-no-group":"ag-header-group-cell-with-group"),l.forEach(function(c){return e.comp.addOrRemoveCssClass(c,!0)})},i.prototype.setupMovingCss=function(){var e=this,l=this.columnGroup.getOriginalColumnGroup().getLeafColumns(),c=function(){return e.comp.addOrRemoveCssClass("ag-header-cell-moving",e.columnGroup.isMoving())};l.forEach(function(p){e.addManagedListener(p,Tn.EVENT_MOVING_CHANGED,c)}),c()},i.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.columnGroup)}},i.prototype.handleKeyDown=function(e){var s=document.activeElement;if(this.expandable&&s===this.eGui&&e.keyCode===$e.ENTER){var c=this.columnGroup,p=!c.isExpanded();this.columnModel.setColumnGroupOpened(c.getOriginalColumnGroup(),p,"uiColumnExpanded")}},i.prototype.setDragSource=function(e){var s=this;if(!this.isSuppressMoving()){var l=this.columnGroup.getOriginalColumnGroup().getLeafColumns(),c={type:K.rvo.HeaderCell,eElement:e,defaultIconName:Bi.ICON_HIDE,dragItemName:this.displayName,getDragItem:this.getDragItemForGroup.bind(this),onDragStarted:function(){return l.forEach(function(m){return m.setMoving(!0,"uiColumnDragged")})},onDragStopped:function(){return l.forEach(function(m){return m.setMoving(!1,"uiColumnDragged")})}};this.dragAndDropService.addDragSource(c,!0),this.addDestroyFunc(function(){return s.dragAndDropService.removeDragSource(c)})}},i.prototype.getDragItemForGroup=function(){var e=this.columnGroup.getOriginalColumnGroup().getLeafColumns(),s={};e.forEach(function(c){return s[c.getId()]=c.isVisible()});var l=[];return this.columnModel.getAllDisplayedColumns().forEach(function(c){e.indexOf(c)>=0&&(l.push(c),ei(e,c))}),e.forEach(function(c){return l.push(c)}),{columns:l,visibleState:s}},i.prototype.isSuppressMoving=function(){var e=!1;return this.columnGroup.getLeafColumns().forEach(function(l){(l.getColDef().suppressMovable||l.getColDef().lockPosition)&&(e=!0)}),e||this.gridOptionsWrapper.isSuppressMovableColumns()},Jl([B("beans")],i.prototype,"beans",void 0),Jl([B("columnModel")],i.prototype,"columnModel",void 0),Jl([B("dragAndDropService")],i.prototype,"dragAndDropService",void 0),Jl([B("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Jl([B("gridApi")],i.prototype,"gridApi",void 0),Jl([B("columnApi")],i.prototype,"columnApi",void 0),i}(Cd),px=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),OC=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},hx=0,Ed=function(d){function i(e,s,l){var c=d.call(this)||this;return c.instanceId=hx++,c.headerCellCtrls={},c.rowIndex=e,c.pinned=s,c.type=l,c}return px(i,d),i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.setComp=function(e){this.comp=e,this.onRowHeightChanged(),this.onVirtualColumnsChanged(),this.setWidth(),this.addEventListeners(),jc()&&this.comp.setTransform("translateZ(0)"),e.setAriaRowIndex(this.rowIndex+1)},i.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,$.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_DOM_LAYOUT,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_PIVOT_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_PIVOT_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_FLOATING_FILTERS_HEIGHT,this.onRowHeightChanged.bind(this))},i.prototype.getHtmlElementForColumnHeader=function(e){if(this.type==K.A6C.COLUMN){var s=Pi(this.headerCellCtrls,function(c){return c.getColumnGroupChild()==e});if(s)return s.getGui()}},i.prototype.onDisplayedColumnsChanged=function(){this.onVirtualColumnsChanged(),this.setWidth()},i.prototype.getType=function(){return this.type},i.prototype.onColumnResized=function(){this.setWidth()},i.prototype.setWidth=function(){var e=this.getWidthForRow();this.comp.setWidth(e+"px")},i.prototype.getWidthForRow=function(){return this.gridOptionsWrapper.getDomLayout()===ce.DOM_LAYOUT_PRINT?null!=this.pinned?0:this.columnModel.getContainerWidth(ce.PINNED_RIGHT)+this.columnModel.getContainerWidth(ce.PINNED_LEFT)+this.columnModel.getContainerWidth(null):this.columnModel.getContainerWidth(this.pinned)},i.prototype.onRowHeightChanged=function(){var c,p,e=this.columnModel.getHeaderRowCount(),s=[],l=0;this.columnModel.isPivotMode()?(c=this.gridOptionsWrapper.getPivotGroupHeaderHeight(),p=this.gridOptionsWrapper.getPivotHeaderHeight()):(this.columnModel.hasFloatingFilters()&&(e++,l=1),c=this.gridOptionsWrapper.getGroupHeaderHeight(),p=this.gridOptionsWrapper.getHeaderHeight());for(var w=e-(1+l),x=0;x<w;x++)s.push(c);for(s.push(p),x=0;x<l;x++)s.push(this.gridOptionsWrapper.getFloatingFiltersHeight());var A=0;for(x=0;x<this.rowIndex;x++)A+=s[x];this.comp.setTop(A+"px"),this.comp.setHeight(s[this.rowIndex]+"px")},i.prototype.getPinned=function(){return this.pinned},i.prototype.getRowIndex=function(){return this.rowIndex},i.prototype.onVirtualColumnsChanged=function(){var e=this,s=this.headerCellCtrls;this.headerCellCtrls={},this.getColumnsInViewport().forEach(function(m){if(!m.isEmptyGroup()){var w=m.getUniqueId(),x=s[w];if(delete s[w],x&&x.getColumnGroupChild()!=m&&(e.destroyBean(x),x=void 0),null==x)switch(e.type){case K.A6C.FLOATING_FILTER:x=e.createBean(new $l(m,e));break;case K.A6C.COLUMN_GROUP:x=e.createBean(new MC(m,e));break;default:x=e.createBean(new xp(m,e))}e.headerCellCtrls[w]=x}}),In(s,function(m,w){var x=function(w){return!!e.focusService.isHeaderWrapperFocused(w)&&e.columnModel.isDisplayed(w.getColumnGroupChild())}(w);x?e.headerCellCtrls[m]=w:e.destroyBean(w)});var p=ba(this.headerCellCtrls);this.comp.setHeaderCtrls(p)},i.prototype.getColumnsInViewport=function(){return this.gridOptionsWrapper.getDomLayout()===ce.DOM_LAYOUT_PRINT?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()},i.prototype.getColumnsInViewportPrintLayout=function(){var e=this;if(null!=this.pinned)return[];var s=[],l=this.getActualDepth();return[ce.PINNED_LEFT,null,ce.PINNED_RIGHT].forEach(function(c){var p=e.columnModel.getVirtualHeaderGroupRow(c,l);s=s.concat(p)}),s},i.prototype.getActualDepth=function(){return this.type==K.A6C.FLOATING_FILTER?this.rowIndex-1:this.rowIndex},i.prototype.getColumnsInViewportNormalLayout=function(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())},i.prototype.focusHeader=function(e,s){var c=Pi(ba(this.headerCellCtrls),function(p){return p.getColumnGroupChild()==e});return!!c&&(c.focus(s),!0)},OC([B("columnModel")],i.prototype,"columnModel",void 0),OC([B("focusService")],i.prototype,"focusService",void 0),i}(Ye),vx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),bd=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},PC=function(d){function i(e){var s=d.call(this)||this;return s.groupsRowCtrls=[],s.pinned=e,s}return vx(i,d),i.prototype.setComp=function(e,s){this.comp=e,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(s),this.addManagedListener(this.eventService,$.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()},i.prototype.setupDragAndDrop=function(e){var s=new wg(this.pinned,e);this.createManagedBean(s)},i.prototype.refresh=function(e){var s=this;void 0===e&&(e=!1);var I,l=new ms,c=this.focusService.getFocusHeaderToUseAfterRefresh();(function(){var I=s.columnModel.getHeaderRowCount()-1;s.groupsRowCtrls=s.destroyBeans(s.groupsRowCtrls);for(var U=0;U<I;U++){var Y=s.createBean(new Ed(l.next(),s.pinned,K.A6C.COLUMN_GROUP));s.groupsRowCtrls.push(Y)}})(),I=l.next(),(null==s.columnsRowCtrl||!e||s.columnsRowCtrl.getRowIndex()!==I)&&(s.destroyBean(s.columnsRowCtrl),s.columnsRowCtrl=s.createBean(new Ed(I,s.pinned,K.A6C.COLUMN))),function(){var U=function(){s.filtersRowCtrl=s.destroyBean(s.filtersRowCtrl)};if(!s.columnModel.isPivotMode()&&s.columnModel.hasFloatingFilters()){var Y=l.next();if(s.filtersRowCtrl){var Q=s.filtersRowCtrl.getRowIndex()!==Y;(!e||Q)&&U()}s.filtersRowCtrl||(s.filtersRowCtrl=s.createBean(new Ed(Y,s.pinned,K.A6C.FLOATING_FILTER)))}else U()}();var x=this.getAllCtrls();this.comp.setCtrls(x),this.restoreFocusOnHeader(c)},i.prototype.restoreFocusOnHeader=function(e){null==e||e.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:e})},i.prototype.getAllCtrls=function(){var e=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],p=0,m=c.length;p<m;p++,l++)s[l]=c[p];return s}(this.groupsRowCtrls,[this.columnsRowCtrl]);return this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e},i.prototype.onGridColumnsChanged=function(){this.refresh(!0)},i.prototype.setupCenterWidth=function(){var e=this;null==this.pinned&&this.createManagedBean(new Cg(function(s){return e.comp.setCenterWidth(s+"px")}))},i.prototype.setHorizontalScroll=function(e){this.comp.setContainerTransform("translateX("+e+"px)")},i.prototype.setupPinnedWidth=function(){var e=this;if(null!=this.pinned){var s=this.pinned===ce.PINNED_LEFT,l=this.pinned===ce.PINNED_RIGHT,c=function(){var m=s?e.pinnedWidthService.getPinnedLeftWidth():e.pinnedWidthService.getPinnedRightWidth();if(null!=m){var w=0==m,x=e.gridOptionsWrapper.isEnableRtl(),A=e.gridOptionsWrapper.getScrollbarWidth(),I=e.scrollVisibleService.isVerticalScrollShowing()&&(x&&s||!x&&l);e.comp.setPinnedContainerWidth((I?m+A:m)+"px"),e.comp.addOrRemoveCssClass("ag-hidden",w)}};this.addManagedListener(this.eventService,$.EVENT_LEFT_PINNED_WIDTH_CHANGED,c),this.addManagedListener(this.eventService,$.EVENT_RIGHT_PINNED_WIDTH_CHANGED,c),this.addManagedListener(this.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,c),this.addManagedListener(this.eventService,$.EVENT_SCROLLBAR_WIDTH_CHANGED,c)}},i.prototype.getHtmlElementForColumnHeader=function(e){if(this.columnsRowCtrl)return this.columnsRowCtrl.getHtmlElementForColumnHeader(e)},i.prototype.getRowType=function(e){var l=this.getAllCtrls()[e];return l?l.getType():void 0},i.prototype.focusHeader=function(e,s,l){var p=this.getAllCtrls()[e];return!!p&&p.focusHeader(s,l)},i.prototype.getRowCount=function(){return this.getAllCtrls().length},bd([B("ctrlsService")],i.prototype,"ctrlsService",void 0),bd([B("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),bd([B("pinnedWidthService")],i.prototype,"pinnedWidthService",void 0),bd([B("columnModel")],i.prototype,"columnModel",void 0),bd([B("focusService")],i.prototype,"focusService",void 0),i}(Ye),IC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),xg=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Rp=function(d){function i(e){var s=d.call(this)||this;return s.headerRowComps={},s.rowCompsList=[],s.pinned=e,s}return IC(i,d),i.prototype.init=function(){var e=this;this.selectAndSetTemplate();var s={addOrRemoveCssClass:function(p,m){return e.addOrRemoveCssClass(p,m)},setCtrls:function(p){return e.setCtrls(p)},setCenterWidth:function(p){return e.eCenterContainer.style.width=p},setContainerTransform:function(p){return e.eCenterContainer.style.transform=p},setPinnedContainerWidth:function(p){var m=e.getGui();m.style.width=p,m.style.maxWidth=p,m.style.minWidth=p}};this.createManagedBean(new PC(this.pinned)).setComp(s,this.getGui())},i.prototype.selectAndSetTemplate=function(){this.setTemplate(this.pinned==ce.PINNED_LEFT?i.PINNED_LEFT_TEMPLATE:this.pinned==ce.PINNED_RIGHT?i.PINNED_RIGHT_TEMPLATE:i.CENTER_TEMPLATE),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()},i.prototype.destroyRowComps=function(){this.setCtrls([])},i.prototype.destroyRowComp=function(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())},i.prototype.setCtrls=function(e){var c,s=this,l=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[],e.forEach(function(m){var w=m.getInstanceId(),x=l[w];delete l[w];var A=x||s.createBean(new wC(m));s.headerRowComps[w]=A,s.rowCompsList.push(A),function(w){var x=w.getGui();x.parentElement!=s.eRowContainer&&s.eRowContainer.appendChild(x),c&&hs(s.eRowContainer,x,c),c=x}(A)}),ba(l).forEach(function(m){return s.destroyRowComp(m)})},i.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"/>',i.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"/>',i.CENTER_TEMPLATE='<div class="ag-header-viewport" role="presentation">\n            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>\n        </div>',xg([Be("eCenterContainer")],i.prototype,"eCenterContainer",void 0),xg([Qe],i.prototype,"init",null),xg([Ii],i.prototype,"destroyRowComps",null),i}(dn),mx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ua=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return mx(i,d),i.prototype.postConstruct=function(){var e=this,s={addOrRemoveCssClass:function(m,w){return e.addOrRemoveCssClass(m,w)},setHeightAndMinHeight:function(m){e.getGui().style.height=m,e.getGui().style.minHeight=m}};this.createManagedBean(new EC).setComp(s,this.getGui(),this.getFocusableElement());var c=function(m){e.createManagedBean(m),e.appendChild(m)};c(new Rp(ce.PINNED_LEFT)),c(new Rp(null)),c(new Rp(ce.PINNED_RIGHT))},i.TEMPLATE='<div class="ag-header" role="presentation" unselectable="on"/>',function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Qe],i.prototype,"postConstruct",null),i}(dn),RM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Rg=function(){return Rg=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Rg.apply(this,arguments)},Ko=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},yx=function(d){function i(){var s=null!==d&&d.apply(this,arguments)||this;return s.allAdvancedFilters=new Map,s.activeAdvancedFilters=[],s.quickFilter=null,s.quickFilterParts=null,s.processingFilterChange=!1,s}var e;return RM(i,d),e=i,i.prototype.init=function(){this.addManagedListener(this.eventService,$.EVENT_ROW_DATA_CHANGED,this.onNewRowsLoaded.bind(this)),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.quickFilter=this.parseQuickFilter(this.gridOptionsWrapper.getQuickFilterText()),this.setQuickFilterParts(),this.allowShowChangeAfterFilter=this.gridOptionsWrapper.isAllowShowChangeAfterFilter()},i.prototype.setQuickFilterParts=function(){this.quickFilterParts=this.quickFilter?this.quickFilter.split(" "):null},i.prototype.setFilterModel=function(s){var l=this,c=[],p=this.getFilterModel();if(s){var m=Yv(Object.keys(s));this.allAdvancedFilters.forEach(function(w,x){c.push(l.setModelOnFilterWrapper(w.filterPromise,s[x])),m.delete(x)}),m.forEach(function(w){var x=l.columnModel.getPrimaryColumn(w);if(x)if(x.isFilterAllowed()){var A=l.getOrCreateFilterWrapper(x,"NO_UI");c.push(l.setModelOnFilterWrapper(A.filterPromise,s[w]))}else console.warn("AG-Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+w);else console.warn("AG-Grid: setFilterModel() - no column found for colId: "+w)})}else this.allAdvancedFilters.forEach(function(w){c.push(l.setModelOnFilterWrapper(w.filterPromise,null))});Xr.all(c).then(function(){var w=l.getFilterModel(),x=[];l.allAdvancedFilters.forEach(function(A,I){yt.jsonEquals(p?p[I]:null,w?w[I]:null)||x.push(A.column)}),x.length>0&&l.onFilterChanged({columns:x})})},i.prototype.setModelOnFilterWrapper=function(s,l){return new Xr(function(c){s.then(function(p){"function"!=typeof p.setModel&&(console.warn("Warning ag-grid - filter missing setModel method, which is needed for setFilterModel"),c()),(p.setModel(l)||Xr.resolve()).then(function(){return c()})})})},i.prototype.getFilterModel=function(){var s={};return this.allAdvancedFilters.forEach(function(l,c){var m=l.filterPromise.resolveNow(null,function(x){return x});if(null==m)return null;if("function"==typeof m.getModel){var w=m.getModel();Le(w)&&(s[c]=w)}else console.warn("Warning ag-grid - filter API missing getModel method, which is needed for getFilterModel")}),s},i.prototype.isAdvancedFilterPresent=function(){return this.activeAdvancedFilters.length>0},i.prototype.updateActiveFilters=function(){var s=this;this.activeAdvancedFilters.length=0;var l=function(p){return!!p&&(p.isFilterActive?p.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1))};this.allAdvancedFilters.forEach(function(c){if(c.filterPromise.resolveNow(!1,l)){var p=c.filterPromise.resolveNow(null,function(m){return m});s.activeAdvancedFilters.push(p)}})},i.prototype.updateFilterFlagInColumns=function(s,l){this.allAdvancedFilters.forEach(function(c){var p=c.filterPromise.resolveNow(!1,function(m){return m.isFilterActive()});c.column.setFilterActive(p,s,l)})},i.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.isAdvancedFilterPresent()||this.gridOptionsWrapper.isExternalFilterPresent()},i.prototype.doAdvancedFiltersPass=function(s,l){for(var c=s.data,p=0;p<this.activeAdvancedFilters.length;p++){var m=this.activeAdvancedFilters[p];if(null!=m&&m!==l){if("function"!=typeof m.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!m.doesFilterPass({node:s,data:c}))return!1}}return!0},i.prototype.parseQuickFilter=function(s){return Le(s)?this.gridOptionsWrapper.isRowModelDefault()?s.toUpperCase():(console.warn("ag-grid: quick filtering only works with the Client-Side Row Model"),null):null},i.prototype.setQuickFilter=function(s){var l=this.parseQuickFilter(s);this.quickFilter!==l&&(this.quickFilter=l,this.setQuickFilterParts(),this.onFilterChanged())},i.prototype.onFilterChanged=function(s){void 0===s&&(s={});var l=s.filterInstance,c=s.additionalEventAttributes,p=s.columns;this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",c),this.allAdvancedFilters.forEach(function(w){!w.filterPromise||w.filterPromise.then(function(x){x&&x!==l&&x.onAnyFilterChanged&&x.onAnyFilterChanged()})});var m={type:$.EVENT_FILTER_CHANGED,api:this.gridApi,columnApi:this.columnApi,columns:p||[]};c&&io(m,c),this.processingFilterChange=!0,this.eventService.dispatchEvent(m),this.processingFilterChange=!1},i.prototype.isSuppressFlashingCellsBecauseFiltering=function(){return!this.allowShowChangeAfterFilter&&this.processingFilterChange},i.prototype.isQuickFilterPresent=function(){return null!==this.quickFilter},i.prototype.doesRowPassOtherFilters=function(s,l){return this.doesRowPassFilter({rowNode:l,filterInstanceToSkip:s})},i.prototype.doesRowPassQuickFilterNoCache=function(s,l){var c=this;return Yt(this.columnModel.getAllColumnsForQuickFilter(),function(m){var w=c.getQuickFilterTextForColumn(m,s);return Le(w)&&w.indexOf(l)>=0})},i.prototype.doesRowPassQuickFilterCache=function(s,l){return s.quickFilterAggregateText||this.aggregateRowForQuickFilter(s),s.quickFilterAggregateText.indexOf(l)>=0},i.prototype.doesRowPassQuickFilter=function(s){var l=this,c=this.gridOptionsWrapper.isCacheQuickFilter();return en(this.quickFilterParts,function(p){return c?l.doesRowPassQuickFilterCache(s,p):l.doesRowPassQuickFilterNoCache(s,p)})},i.prototype.doesRowPassFilter=function(s){return!(this.isQuickFilterPresent()&&!this.doesRowPassQuickFilter(s.rowNode)||this.gridOptionsWrapper.isExternalFilterPresent()&&!this.gridOptionsWrapper.doesExternalFilterPass(s.rowNode)||this.isAdvancedFilterPresent()&&!this.doAdvancedFiltersPass(s.rowNode,s.filterInstanceToSkip))},i.prototype.getQuickFilterTextForColumn=function(s,l){var c=this.valueService.getValue(s,l,!0),p=s.getColDef();if(p.getQuickFilterText){var m={value:c,node:l,data:l.data,column:s,colDef:p,context:this.gridOptionsWrapper.getContext()};c=p.getQuickFilterText(m)}return Le(c)?c.toString().toUpperCase():null},i.prototype.aggregateRowForQuickFilter=function(s){var l=this,c=[];Vt(this.columnModel.getAllColumnsForQuickFilter(),function(m){var w=l.getQuickFilterTextForColumn(m,s);Le(w)&&c.push(w)}),s.quickFilterAggregateText=c.join(e.QUICK_FILTER_SEPARATOR)},i.prototype.onNewRowsLoaded=function(s){this.allAdvancedFilters.forEach(function(l){l.filterPromise.then(function(c){c.onNewRowsLoaded&&c.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(s),this.updateActiveFilters()},i.prototype.createValueGetter=function(s){var l=this;return function(c){return l.valueService.getValue(s,c,!0)}},i.prototype.getFilterComponent=function(s,l,c){if(void 0===c&&(c=!0),c)return this.getOrCreateFilterWrapper(s,l).filterPromise;var p=this.cachedFilter(s);return p?p.filterPromise:null},i.prototype.isFilterActive=function(s){var l=this.cachedFilter(s);return!!l&&l.filterPromise.resolveNow(!1,function(c){return c.isFilterActive()})},i.prototype.getOrCreateFilterWrapper=function(s,l){var c=this.cachedFilter(s);return c?"NO_UI"!==l&&this.putIntoGui(c,l):(c=this.createFilterWrapper(s,l),this.allAdvancedFilters.set(s.getColId(),c)),c},i.prototype.cachedFilter=function(s){return this.allAdvancedFilters.get(s.getColId())},i.prototype.createFilterInstance=function(s,l){var w,c=this,p=jt.isRegistered(K.GXE.SetFilterModule)?"agSetColumnFilter":"agTextColumnFilter",m=s.getColDef(),x=Rg(Rg({},this.createFilterParams(s,m,l)),{filterModifiedCallback:function(){c.eventService.dispatchEvent({type:$.EVENT_FILTER_MODIFIED,api:c.gridApi,columnApi:c.columnApi,column:s,filterInstance:w})},filterChangedCallback:function(Y){return c.onFilterChanged({filterInstance:w,additionalEventAttributes:Y,columns:[s]})},doesRowPassOtherFilter:function(Y){return c.doesRowPassOtherFilters(w,Y)}}),A=this.userComponentFactory.getFilterDetails(m,x,p);if(!A)return null;var I=A.newAgStackInstance();return I&&I.then(function(U){return w=U}),I},i.prototype.createFilterParams=function(s,l,c){void 0===c&&(c=null);var p={api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),column:s,colDef:as(l),rowModel:this.rowModel,filterChangedCallback:function(){},filterModifiedCallback:function(){},valueGetter:this.createValueGetter(s),context:this.gridOptionsWrapper.getContext(),doesRowPassOtherFilter:function(){return!0}};return c&&(p.$scope=c),p},i.prototype.createFilterWrapper=function(s,l){var c={column:s,filterPromise:null,scope:null,compiledElement:null,guiPromise:Xr.resolve(null)};return c.scope=this.gridOptionsWrapper.isAngularCompileFilters()?this.$scope.$new():null,c.filterPromise=this.createFilterInstance(s,c.scope),c.filterPromise&&this.putIntoGui(c,l),c},i.prototype.putIntoGui=function(s,l){var c=this,p=document.createElement("div");p.className="ag-filter",s.guiPromise=new Xr(function(m){s.filterPromise.then(function(w){var x=w.getGui();if(Le(x)||console.warn("getGui method from filter returned "+x+", it should be a DOM element or an HTML template string."),"string"==typeof x&&(x=oa(x)),p.appendChild(x),s.scope){var A=c.$compile(p)(s.scope);s.compiledElement=A,window.setTimeout(function(){return s.scope.$apply()},0)}m(p),c.eventService.dispatchEvent({type:$.EVENT_FILTER_OPENED,column:s.column,source:l,eGui:p,api:c.gridApi,columnApi:c.columnApi})})})},i.prototype.onNewColumnsLoaded=function(){var s=this,l=!1,c=[];this.allAdvancedFilters.forEach(function(p){!s.columnModel.getPrimaryColumn(p.column)&&(l=!0,c.push(p.column),s.disposeFilterWrapper(p,"filterDestroyed"))}),l&&this.onFilterChanged({columns:c})},i.prototype.destroyFilter=function(s,l){void 0===l&&(l="api");var c=this.allAdvancedFilters.get(s.getColId());c&&(this.disposeFilterWrapper(c,l),this.onFilterChanged({columns:[s]}))},i.prototype.disposeFilterWrapper=function(s,l){var c=this;s.filterPromise.then(function(p){(p.setModel(null)||Xr.resolve()).then(function(){c.getContext().destroyBean(p),s.column.setFilterActive(!1,l),s.scope&&(s.compiledElement&&s.compiledElement.remove(),s.scope.$destroy()),c.allAdvancedFilters.delete(s.column.getColId())})})},i.prototype.destroy=function(){var s=this;d.prototype.destroy.call(this),this.allAdvancedFilters.forEach(function(l){return s.disposeFilterWrapper(l,"filterDestroyed")})},i.QUICK_FILTER_SEPARATOR="\n",Ko([B("$compile")],i.prototype,"$compile",void 0),Ko([B("$scope")],i.prototype,"$scope",void 0),Ko([B("valueService")],i.prototype,"valueService",void 0),Ko([B("columnModel")],i.prototype,"columnModel",void 0),Ko([B("rowModel")],i.prototype,"rowModel",void 0),Ko([B("columnApi")],i.prototype,"columnApi",void 0),Ko([B("gridApi")],i.prototype,"gridApi",void 0),Ko([B("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Ko([Qe],i.prototype,"init",null),Ko([Ii],i.prototype,"destroy",null),e=Ko([ht("filterManager")],i)}(Ye),Ro=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),qu=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ap=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.initialised=!1,e}return Ro(i,d),i.prototype.init=function(){this.cellExpressions=this.gridOptionsWrapper.isEnableCellExpressions(),this.initialised=!0},i.prototype.getValue=function(e,s,l,c){if(void 0===l&&(l=!1),void 0===c&&(c=!1),this.initialised||this.init(),s){var A,p=e.getColDef(),m=p.field,w=e.getId(),x=s.data,I=s.groupData&&void 0!==s.groupData[w],U=!c&&s.aggData&&void 0!==s.aggData[w];if(l&&p.filterValueGetter?A=this.executeFilterValueGetter(p.filterValueGetter,x,e,s):this.gridOptionsWrapper.isTreeData()&&U?A=s.aggData[w]:this.gridOptionsWrapper.isTreeData()&&p.valueGetter?A=this.executeValueGetter(p.valueGetter,x,e,s):this.gridOptionsWrapper.isTreeData()&&m&&x?A=Df(x,m,e.isFieldContainsDots()):I?A=s.groupData[w]:U?A=s.aggData[w]:p.valueGetter?A=this.executeValueGetter(p.valueGetter,x,e,s):m&&x&&(A=Df(x,m,e.isFieldContainsDots())),this.cellExpressions&&"string"==typeof A&&0===A.indexOf("=")){var Y=A.substring(1);A=this.executeValueGetter(Y,x,e,s)}if(null==A){var Q=this.getOpenedGroup(s,e);if(null!=Q)return Q}return A}},i.prototype.getOpenedGroup=function(e,s){if(this.gridOptionsWrapper.isShowOpenedGroup()&&s.getColDef().showRowGroup)for(var c=s.getColDef().showRowGroup,p=e.parent;null!=p;){if(p.rowGroupColumn&&(!0===c||c===p.rowGroupColumn.getId()))return p.key;p=p.parent}},i.prototype.setValue=function(e,s,l,c){var p=this.columnModel.getPrimaryColumn(s);if(e&&p){ye(e.data)&&(e.data={});var m=p.getColDef(),w=m.field,x=m.newValueHandler,A=m.valueSetter;if(ye(w)&&ye(x)&&ye(A))return void console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work");var U,I={node:e,data:e.data,oldValue:this.getValue(p,e),newValue:l,colDef:p.getColDef(),column:p,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};if(I.newValue=l,void 0===(U=x&&Le(x)?x(I):Le(A)?this.expressionService.evaluate(A,I):this.setValueUsingField(e.data,w,l,p.isFieldContainsDots()))&&(U=!0),U){e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),I.newValue=this.getValue(p,e);var Y=p.getColDef().onCellValueChanged;"function"==typeof Y&&setTimeout(function(){return Y(I)},0),this.eventService.dispatchEvent({type:$.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:I.column,api:I.api,columnApi:I.columnApi,colDef:I.colDef,context:I.context,data:e.data,node:e,oldValue:I.oldValue,newValue:I.newValue,value:I.newValue,source:c})}}},i.prototype.setValueUsingField=function(e,s,l,c){if(!s)return!1;if(c)for(var m=s.split("."),w=e;m.length>0&&w;){var x=m.shift();0===m.length?w[x]=l:w=w[x]}else e[s]=l;return!0},i.prototype.executeFilterValueGetter=function(e,s,l,c){var p={data:s,node:c,column:l,colDef:l.getColDef(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),getValue:this.getValueCallback.bind(this,c)};return this.expressionService.evaluate(e,p)},i.prototype.executeValueGetter=function(e,s,l,c){var p=l.getId(),m=this.valueCache.getValue(c,p);if(void 0!==m)return m;var w={data:s,node:c,column:l,colDef:l.getColDef(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),getValue:this.getValueCallback.bind(this,c)},x=this.expressionService.evaluate(e,w);return this.valueCache.setValue(c,p,x),x},i.prototype.getValueCallback=function(e,s){var l=this.columnModel.getPrimaryColumn(s);return l?this.getValue(l,e):null},i.prototype.getKeyForNode=function(e,s){var l=this.getValue(e,s),c=e.getColDef().keyCreator,p=l;return c&&(p=c({value:l,colDef:e.getColDef(),column:e,node:s,data:s.data,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()})),"string"==typeof p||null==p||"[object Object]"===(p=String(p))&&pn(function(){console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")},"getKeyForNode - warn about [object,object]"),p},qu([B("expressionService")],i.prototype,"expressionService",void 0),qu([B("columnModel")],i.prototype,"columnModel",void 0),qu([B("valueCache")],i.prototype,"valueCache",void 0),qu([Qe],i.prototype,"init",null),qu([ht("valueService")],i)}(Ye),_x=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ag=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};!function(d){d.AUTO_HEIGHT="ag-layout-auto-height",d.NORMAL="ag-layout-normal",d.PRINT="ag-layout-print"}(K.LBn||(K.LBn={}));var Yu=function(d){function i(e){var s=d.call(this)||this;return s.view=e,s}return _x(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.gridOptionsWrapper,vt.PROP_DOM_LAYOUT,this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()},i.prototype.updateLayoutClasses=function(){var e=this.gridOptionsWrapper.getDomLayout(),s={autoHeight:e===ce.DOM_LAYOUT_AUTO_HEIGHT,normal:e===ce.DOM_LAYOUT_NORMAL,print:e===ce.DOM_LAYOUT_PRINT};this.view.updateLayoutClasses(s.autoHeight?K.LBn.AUTO_HEIGHT:s.print?K.LBn.PRINT:K.LBn.NORMAL,s)},Ag([B("gridOptionsWrapper")],i.prototype,"gridOptionsWrapper",void 0),Ag([Qe],i.prototype,"postConstruct",null),i}(Ye),LC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),la=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Tg=function(d){function i(e){var s=d.call(this)||this;return s.scrollLeft=-1,s.nextScrollTop=-1,s.scrollTop=-1,s.eBodyViewport=e,s.resetLastHorizontalScrollElementDebounced=Du(s.resetLastHorizontalScrollElement.bind(s),500),s}return LC(i,d),i.prototype.postConstruct=function(){var e=this;this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(function(s){e.centerRowContainerCon=s.centerRowContainerCtrl,e.onDisplayedColumnsWidthChanged(),e.addScrollListener()})},i.prototype.addScrollListener=function(){var e=this.ctrlsService.getFakeHScrollCtrl();this.addManagedListener(this.centerRowContainerCon.getViewportElement(),"scroll",this.onCenterViewportScroll.bind(this)),this.addManagedListener(e.getViewport(),"scroll",this.onFakeHorizontalScroll.bind(this));var s=this.gridOptionsWrapper.isDebounceVerticalScrollbar()?Du(this.onVerticalScroll.bind(this),100):this.onVerticalScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",s)},i.prototype.onDisplayedColumnsWidthChanged=function(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},i.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(e){void 0===e&&(e=this.centerRowContainerCon.getCenterViewportScrollLeft());var s=this.enableRtl?e:-e,l=this.ctrlsService.getTopCenterRowContainerCtrl(),c=this.ctrlsService.getBottomCenterRowContainerCtrl(),p=this.ctrlsService.getFakeHScrollCtrl();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(s),c.setContainerTranslateX(s),l.setContainerTranslateX(s),Kc(this.lastHorizontalScrollElement===this.centerRowContainerCon.getViewportElement()?p.getViewport():this.centerRowContainerCon.getViewportElement(),Math.abs(e),this.enableRtl)},i.prototype.isControllingScroll=function(e){return this.lastHorizontalScrollElement?e===this.lastHorizontalScrollElement:(this.lastHorizontalScrollElement=e,!0)},i.prototype.onFakeHorizontalScroll=function(){var e=this.ctrlsService.getFakeHScrollCtrl().getViewport();!this.isControllingScroll(e)||this.onBodyHorizontalScroll(e)},i.prototype.onCenterViewportScroll=function(){var e=this.centerRowContainerCon.getViewportElement();!this.isControllingScroll(e)||this.onBodyHorizontalScroll(e)},i.prototype.onBodyHorizontalScroll=function(e){var s=this.centerRowContainerCon.getViewportElement();this.shouldBlockScrollUpdate("horizontal",s.scrollLeft,!0)||(this.doHorizontalScroll(Math.round(Yc(e,this.enableRtl))),this.resetLastHorizontalScrollElementDebounced())},i.prototype.onVerticalScroll=function(){var e=this.eBodyViewport.scrollTop;this.shouldBlockScrollUpdate("vertical",e,!0)||(this.animationFrameService.setScrollTop(e),this.nextScrollTop=e,this.gridOptionsWrapper.isSuppressAnimationFrame()?(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()):this.animationFrameService.schedule())},i.prototype.resetLastHorizontalScrollElement=function(){this.lastHorizontalScrollElement=null},i.prototype.doHorizontalScroll=function(e){var l=Yc(this.ctrlsService.getFakeHScrollCtrl().getViewport(),this.enableRtl);this.scrollLeft===e&&e===l||(this.scrollLeft=e,this.fireScrollEvent("horizontal"),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.onHorizontalViewportChanged())},i.prototype.fireScrollEvent=function(e){var s=this,l={type:$.EVENT_BODY_SCROLL,api:this.gridApi,columnApi:this.columnApi,direction:e,left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(l),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(function(){var c=ti({},l,{type:$.EVENT_BODY_SCROLL_END});s.eventService.dispatchEvent(c)},100)},i.prototype.shouldBlockScrollUpdate=function(e,s,l){if(void 0===l&&(l=!1),l&&!Ys())return!1;if("vertical"===e){var c=Rl(this.eBodyViewport);if(s<0||s+c>this.eBodyViewport.scrollHeight)return!0}if("horizontal"===e){var m=this.centerRowContainerCon.getCenterWidth(),w=this.centerRowContainerCon.getViewportElement().scrollWidth;if(this.enableRtl&&Kr()){if(s>0)return!0}else if(s<0)return!0;if(Math.abs(s)+m>w)return!0}return!1},i.prototype.redrawRowsAfterScroll=function(){this.fireScrollEvent("vertical")},i.prototype.onHorizontalViewportChanged=function(){this.centerRowContainerCon.onHorizontalViewportChanged()},i.prototype.checkScrollLeft=function(){this.scrollLeft!==this.centerRowContainerCon.getCenterViewportScrollLeft()&&this.onBodyHorizontalScroll(this.centerRowContainerCon.getViewportElement())},i.prototype.executeAnimationFrameScroll=function(){var e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e},i.prototype.setHorizontalScrollPosition=function(e){var l=this.centerRowContainerCon.getViewportElement().scrollWidth-this.centerRowContainerCon.getCenterWidth();this.shouldBlockScrollUpdate("horizontal",e)&&(e=this.enableRtl&&Kr()?e>0?0:l:Math.min(Math.max(e,0),l)),Kc(this.centerRowContainerCon.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)},i.prototype.setVerticalScrollPosition=function(e){this.eBodyViewport.scrollTop=e},i.prototype.getVScrollPosition=function(){return{top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight}},i.prototype.getHScrollPosition=function(){return this.centerRowContainerCon.getHScrollPosition()},i.prototype.isHorizontalScrollShowing=function(){return this.centerRowContainerCon.isHorizontalScrollShowing()},i.prototype.scrollHorizontally=function(e){var s=this.centerRowContainerCon.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(s+e),this.centerRowContainerCon.getViewportElement().scrollLeft-s},i.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},i.prototype.ensureNodeVisible=function(e,s){void 0===s&&(s=null);for(var l=this.rowModel.getRowCount(),c="function"==typeof e,p=-1,m=0;m<l;m++){var w=this.rowModel.getRow(m);if(c){if(e(w)){p=m;break}}else if(e===w||e===w.data){p=m;break}}p>=0&&this.ensureIndexVisible(p,s)},i.prototype.ensureIndexVisible=function(e,s){if(this.gridOptionsWrapper.getDomLayout()!==ce.DOM_LAYOUT_PRINT){var l=this.paginationProxy.getRowCount();if("number"!=typeof e||e<0||e>=l)return void console.warn("invalid row index for ensureIndexVisible: "+e);this.gridOptionsWrapper.isPagination()&&!this.gridOptionsWrapper.isSuppressPaginationPanel()||this.paginationProxy.goToPageWithIndex(e);var w,m=this.paginationProxy.getRow(e);do{var x=m.rowTop,A=m.rowHeight,I=this.paginationProxy.getPixelOffset(),U=m.rowTop-I,Y=U+m.rowHeight,Q=this.getVScrollPosition(),oe=this.heightScaler.getDivStretchOffset(),xe=Q.top+oe,He=Q.bottom+oe,Ve=He-xe,Me=this.heightScaler.getScrollPositionForPixel(U),Ze=this.heightScaler.getScrollPositionForPixel(Y-Ve),Fe=Math.min((Me+Ze)/2,U),vn=null;"top"===s?vn=Me:"bottom"===s?vn=Ze:"middle"===s?vn=Fe:xe>U?vn=Me:He<Y&&(vn=Ze),null!==vn&&(this.eBodyViewport.scrollTop=vn,this.rowRenderer.redrawAfterScroll()),w=x!==m.rowTop||A!==m.rowHeight}while(w);this.animationFrameService.flushAllFrames()}},i.prototype.ensureColumnVisible=function(e){var s=this.columnModel.getGridColumn(e);if(s&&!s.isPinned()&&this.columnModel.isColumnDisplayed(s)){var x,A,l=s.getLeft(),c=l+s.getActualWidth(),p=this.centerRowContainerCon.getCenterWidth(),m=this.centerRowContainerCon.getCenterViewportScrollLeft(),w=this.columnModel.getBodyContainerWidth();this.enableRtl?(x=w-m-p,A=w-m):(x=m,A=p+m);var I=x>l,U=A<c,Y=p<s.getActualWidth(),Q=I||Y;(Q||U)&&this.centerRowContainerCon.setCenterViewportScrollLeft(this.enableRtl?Q?w-p-l:w-c:Q?l:c-p),this.centerRowContainerCon.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}},la([B("ctrlsService")],i.prototype,"ctrlsService",void 0),la([B("animationFrameService")],i.prototype,"animationFrameService",void 0),la([B("columnApi")],i.prototype,"columnApi",void 0),la([B("gridApi")],i.prototype,"gridApi",void 0),la([B("paginationProxy")],i.prototype,"paginationProxy",void 0),la([B("rowModel")],i.prototype,"rowModel",void 0),la([B("rowContainerHeightService")],i.prototype,"heightScaler",void 0),la([B("rowRenderer")],i.prototype,"rowRenderer",void 0),la([B("columnModel")],i.prototype,"columnModel",void 0),la([Qe],i.prototype,"postConstruct",null),i}(Ye),Tp=function(){function d(i){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=i.scrollContainer,this.scrollHorizontally=-1!==i.scrollAxis.indexOf("x"),this.scrollVertically=-1!==i.scrollAxis.indexOf("y"),this.scrollByTick=null!=i.scrollByTick?i.scrollByTick:20,i.onScrollCallback&&(this.onScrollCallback=i.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=i.getVerticalPosition,this.setVerticalPosition=i.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=i.getHorizontalPosition,this.setHorizontalPosition=i.setHorizontalPosition),this.shouldSkipVerticalScroll=i.shouldSkipVerticalScroll||function(){return!1},this.shouldSkipHorizontalScroll=i.shouldSkipHorizontalScroll||function(){return!1}}return d.prototype.check=function(i,e){void 0===e&&(e=!1);var s=e||this.shouldSkipVerticalScroll();if(!s||!this.shouldSkipHorizontalScroll()){var l=this.scrollContainer.getBoundingClientRect(),c=this.scrollByTick;this.tickLeft=i.clientX<l.left+c,this.tickRight=i.clientX>l.right-c,this.tickUp=i.clientY<l.top+c&&!s,this.tickDown=i.clientY>l.bottom-c&&!s,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}},d.prototype.ensureTickingStarted=function(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)},d.prototype.doTick=function(){var i;if(this.tickCount++,i=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){var e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-i),this.tickDown&&this.setVerticalPosition(e+i)}if(this.scrollHorizontally){var s=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(s-i),this.tickRight&&this.setHorizontalPosition(s+i)}this.onScrollCallback&&this.onScrollCallback()},d.prototype.ensureCleared=function(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)},d}(),FC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),NC=function(){return NC=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},NC.apply(this,arguments)},wi=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Dp=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],p=0,m=c.length;p<m;p++,l++)s[l]=c[p];return s},kC=function(d){function i(e){var s=d.call(this)||this;return s.isMultiRowDrag=!1,s.isGridSorted=!1,s.isGridFiltered=!1,s.isRowGroupActive=!1,s.eContainer=e,s}return FC(i,d),i.prototype.postConstruct=function(){var e=this;this.gridOptionsWrapper.isRowModelDefault()&&(this.clientSideRowModel=this.rowModel);var s=function(){e.onSortChanged(),e.onFilterChanged(),e.onRowGroupChanged()};this.addManagedListener(this.eventService,$.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_MODEL_UPDATED,function(){s()}),s(),this.ctrlsService.whenReady(function(){var l=e.ctrlsService.getGridBodyCtrl();e.autoScrollService=new Tp({scrollContainer:l.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:function(){return l.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(p){return l.getScrollFeature().setVerticalScrollPosition(p)},onScrollCallback:function(){e.onDragging(e.lastDraggingEvent)}})})},i.prototype.onSortChanged=function(){this.isGridSorted=this.sortController.isSortActive()},i.prototype.onFilterChanged=function(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()},i.prototype.onRowGroupChanged=function(){var e=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!Qr(e)},i.prototype.getContainer=function(){return this.eContainer},i.prototype.isInterestedIn=function(e){return e===K.rvo.RowDrag},i.prototype.getIconName=function(){return this.gridOptionsWrapper.isRowDragManaged()&&this.shouldPreventRowMove()?Bi.ICON_NOT_ALLOWED:Bi.ICON_MOVE},i.prototype.shouldPreventRowMove=function(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive},i.prototype.getRowNodes=function(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];var s=this.gridOptionsWrapper.isRowDragMultiRow(),l=this.selectionService.getSelectedNodes(),c=e.dragItem.rowNode;return s&&-1!==l.indexOf(c)?(this.isMultiRowDrag=!0,Dp(l)):(this.isMultiRowDrag=!1,[c])},i.prototype.onDragEnter=function(e){this.dispatchGridEvent($.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach(function(s){s.setDragging(!0)}),this.onEnterOrDragging(e)},i.prototype.onDragging=function(e){this.onEnterOrDragging(e)},i.prototype.isFromThisGrid=function(e){return e.dragSource.dragSourceDomDataKey===this.gridOptionsWrapper.getDomDataKey()},i.prototype.isDropZoneWithinThisGrid=function(e){return!this.ctrlsService.getGridBodyCtrl().getGui().contains(e.dropZoneTarget)},i.prototype.onEnterOrDragging=function(e){this.dispatchGridEvent($.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;var s=this.mouseEventService.getNormalisedPosition(e).y;this.gridOptionsWrapper.isRowDragManaged()&&this.doManagedDrag(e,s),this.autoScrollService.check(e.event)},i.prototype.doManagedDrag=function(e,s){var c,l=this,p=this.isFromThisGrid(e);p?(c=[e.dragItem.rowNode],this.isMultiRowDrag&&(c=Dp(this.selectionService.getSelectedNodes()).sort(function(w,x){return l.getRowIndexNumber(w)-l.getRowIndexNumber(x)})),e.dragItem.rowNodes=c):c=e.dragItem.rowNodes,this.gridOptionsWrapper.isRowDragManaged()&&this.shouldPreventRowMove()||(this.gridOptionsWrapper.isSuppressMoveWhenRowDragging()||!p?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(c[0],s):this.moveRows(c,s))},i.prototype.getRowIndexNumber=function(e){return parseInt(Vn(e.getRowIndexString().split("-")),10)},i.prototype.moveRowAndClearHighlight=function(e){var s=this,l=this.clientSideRowModel.getLastHighlightedRowNode(),c=l&&l.highlighted===K.oh5.Below,p=this.mouseEventService.getNormalisedPosition(e).y,m=e.dragItem.rowNodes,w=c?1:0;if(this.isFromThisGrid(e))m.forEach(function(I){I.rowTop<p&&(w-=1)}),this.moveRows(m,p,w);else{var x=this.gridOptionsWrapper.getRowNodeIdFunc(),A=this.clientSideRowModel.getRowIndexAtPixel(p)+1;this.clientSideRowModel.getHighlightPosition(p)===K.oh5.Above&&A--,this.clientSideRowModel.updateRowData({add:m.map(function(I){return I.data}).filter(function(I){return!s.clientSideRowModel.getRowNode(x?x(I):I.id)}),addIndex:A})}this.clearRowHighlight()},i.prototype.clearRowHighlight=function(){this.clientSideRowModel.highlightRowAtPixel(null)},i.prototype.moveRows=function(e,s,l){void 0===l&&(l=0),this.clientSideRowModel.ensureRowsAtPixel(e,s,l)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())},i.prototype.addRowDropZone=function(e){var s=this;if(e.getContainer())if(this.dragAndDropService.findExternalZone(e))console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");else{var l={getContainer:e.getContainer};e.fromGrid?(e.fromGrid=void 0,l=e):(e.onDragEnter&&(l.onDragEnter=function(c){e.onDragEnter(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_ENTER,c))}),e.onDragLeave&&(l.onDragLeave=function(c){e.onDragLeave(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_LEAVE,c))}),e.onDragging&&(l.onDragging=function(c){e.onDragging(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_MOVE,c))}),e.onDragStop&&(l.onDragStop=function(c){e.onDragStop(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_END,c))})),this.dragAndDropService.addDropTarget(NC({isInterestedIn:function(p){return p===K.rvo.RowDrag},getIconName:function(){return Bi.ICON_MOVE},external:!0},l))}else pn(function(){return console.warn("AG Grid: addRowDropZone - A container target needs to be provided")},"add-drop-zone-empty-target")},i.prototype.getRowDropZone=function(e){var s=this,l=this.getContainer.bind(this),c=this.onDragEnter.bind(this),p=this.onDragLeave.bind(this),m=this.onDragging.bind(this),w=this.onDragStop.bind(this);return e?{getContainer:l,onDragEnter:e.onDragEnter?function(x){c(x),e.onDragEnter(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_ENTER,x))}:c,onDragLeave:e.onDragLeave?function(x){p(x),e.onDragLeave(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_LEAVE,x))}:p,onDragging:e.onDragging?function(x){m(x),e.onDragging(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_MOVE,x))}:m,onDragStop:e.onDragStop?function(x){w(x),e.onDragStop(s.draggingToRowDragEvent($.EVENT_ROW_DRAG_END,x))}:w,fromGrid:!0}:{getContainer:l,onDragEnter:c,onDragLeave:p,onDragging:m,onDragStop:w,fromGrid:!0}},i.prototype.draggingToRowDragEvent=function(e,s){var m,w,l=this.mouseEventService.getNormalisedPosition(s).y,p=-1;switch(l>this.paginationProxy.getCurrentPageHeight()||(p=this.rowModel.getRowIndexAtPixel(l),m=this.rowModel.getRow(p)),s.vDirection){case K.HO_.Down:w="down";break;case K.HO_.Up:w="up";break;default:w=null}return{type:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),event:s.event,node:s.dragItem.rowNode,nodes:s.dragItem.rowNodes,overIndex:p,overNode:m,y:l,vDirection:w}},i.prototype.dispatchGridEvent=function(e,s){var l=this.draggingToRowDragEvent(e,s);this.eventService.dispatchEvent(l)},i.prototype.onDragLeave=function(e){this.dispatchGridEvent($.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gridOptionsWrapper.isRowDragManaged()&&this.clearRowHighlight(),this.isFromThisGrid(e)&&(this.isMultiRowDrag=!1)},i.prototype.onDragStop=function(e){this.dispatchGridEvent($.EVENT_ROW_DRAG_END,e),this.stopDragging(e),this.gridOptionsWrapper.isRowDragManaged()&&(this.gridOptionsWrapper.isSuppressMoveWhenRowDragging()||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)},i.prototype.stopDragging=function(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(function(s){s.setDragging(!1)})},wi([B("dragAndDropService")],i.prototype,"dragAndDropService",void 0),wi([B("rowModel")],i.prototype,"rowModel",void 0),wi([B("paginationProxy")],i.prototype,"paginationProxy",void 0),wi([B("columnModel")],i.prototype,"columnModel",void 0),wi([B("focusService")],i.prototype,"focusService",void 0),wi([B("sortController")],i.prototype,"sortController",void 0),wi([B("filterManager")],i.prototype,"filterManager",void 0),wi([B("selectionService")],i.prototype,"selectionService",void 0),wi([B("mouseEventService")],i.prototype,"mouseEventService",void 0),wi([B("ctrlsService")],i.prototype,"ctrlsService",void 0),wi([Ln("rangeService")],i.prototype,"rangeService",void 0),wi([Qe],i.prototype,"postConstruct",null),i}(Ye),Cx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ji=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};!function(d){d.ANIMATION_ON="ag-row-animation",d.ANIMATION_OFF="ag-row-no-animation"}(K.SJN||(K.SJN={}));var GC="ag-selectable",BC="ag-force-vertical-scroll",HC="ag-column-moving",VC=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.angularApplyTriggered=!1,e}return Cx(i,d),i.prototype.getScrollFeature=function(){return this.bodyScrollFeature},i.prototype.getBodyViewportElement=function(){return this.eBodyViewport},i.prototype.setComp=function(e,s,l,c,p){this.comp=e,this.eGridBody=s,this.eBodyViewport=l,this.eTop=c,this.eBottom=p,this.setCellTextSelection(this.gridOptionsWrapper.isEnableCellTextSelect()),this.createManagedBean(new Yu(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Tg(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.ctrlsService.registerGridBodyCtrl(this),this.addEventListeners(),this.addFocusListeners([c,l,p]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.$scope&&this.addAngularApplyCheck()},i.prototype.getComp=function(){return this.comp},i.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,$.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_PINNED_ROW_DATA_CHANGED,this.setFloatingHeights.bind(this))},i.prototype.addFocusListeners=function(e){var s=this;e.forEach(function(l){s.addManagedListener(l,"focusin",function(){Tt(l,"ag-has-focus")}),s.addManagedListener(l,"focusout",function(c){l.contains(c.relatedTarget)||gi(l,"ag-has-focus")})})},i.prototype.setColumnMovingCss=function(e){this.comp.setColumnMovingCss(e?HC:null,e)},i.prototype.setCellTextSelection=function(e){void 0===e&&(e=!1),this.comp.setCellSelectableCss(e?GC:null,e)},i.prototype.onScrollVisibilityChanged=function(){var e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e)},i.prototype.onGridColumnsChanged=function(){var e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e?e.length:0)},i.prototype.disableBrowserDragging=function(){this.addManagedListener(this.eGridBody,"dragstart",function(e){if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})},i.prototype.addStopEditingWhenGridLosesFocus=function(){var e=this;if(this.gridOptionsWrapper.isStopEditingWhenCellsLoseFocus()){var s=function(p){var m=p.relatedTarget;if(null!==Hf(m)){var w=l.some(function(A){return A.contains(m)})&&e.mouseEventService.isElementInThisGrid(m);if(!w){var x=e.popupService;w=x.getActivePopups().some(function(A){return A.contains(m)})||x.isElementWithinCustomPopup(m)}w||e.rowRenderer.stopEditing()}else e.rowRenderer.stopEditing()},l=[this.eBodyViewport,this.eBottom,this.eTop];l.forEach(function(c){return e.addManagedListener(c,"focusout",s)})}},i.prototype.updateRowCount=function(){var e=this.headerNavigationService.getHeaderRowCount(),s=this.paginationProxy.getType(),l=-1;s===ce.ROW_MODEL_TYPE_CLIENT_SIDE&&(l=0,this.paginationProxy.forEachNode(function(p){p.group||l++})),this.comp.setRowCount(-1===l?-1:e+l)},i.prototype.registerBodyViewportResizeListener=function(e){this.comp.registerBodyViewportResizeListener(e)},i.prototype.setVerticalScrollPaddingVisible=function(e){this.comp.setPinnedTopBottomOverflowY(e?"scroll":"hidden")},i.prototype.isVerticalScrollShowing=function(){var e=this.gridOptionsWrapper.isAlwaysShowVerticalScroll();return this.comp.setAlwaysVerticalScrollClass(e?BC:null,e),e||Ks(this.eBodyViewport)},i.prototype.setupRowAnimationCssClass=function(){var e=this,s=function(){var c=e.gridOptionsWrapper.isAnimateRows()&&!e.rowContainerHeightService.isStretching();e.comp.setRowAnimationCssOnBodyViewport(c?K.SJN.ANIMATION_ON:K.SJN.ANIMATION_OFF,c)};s(),this.addManagedListener(this.eventService,$.EVENT_HEIGHT_SCALE_CHANGED,s)},i.prototype.getGridBodyElement=function(){return this.eGridBody},i.prototype.addBodyViewportListener=function(){var e=this;this.addManagedListener(this.eBodyViewport,"contextmenu",function(c){e.gridOptionsWrapper.isPreventDefaultOnContextMenu()&&c.preventDefault();var p=Ou(c);(p===e.eBodyViewport||p===e.ctrlsService.getCenterRowContainerCtrl().getViewportElement())&&e.contextMenuFactory&&e.contextMenuFactory.onContextMenu(c,null,null,null,null,e.eGridBody)}),this.addManagedListener(this.eBodyViewport,"wheel",this.onWheel.bind(this))},i.prototype.onWheel=function(e){!this.gridOptionsWrapper.isSuppressScrollWhenPopupsAreOpen()||this.popupService.hasAnchoredPopup()&&e.preventDefault()},i.prototype.getGui=function(){return this.eGridBody},i.prototype.scrollVertically=function(e){var s=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(s+e),this.eBodyViewport.scrollTop-s},i.prototype.addRowDragListener=function(){this.rowDragFeature=this.createManagedBean(new kC(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)},i.prototype.getRowDragFeature=function(){return this.rowDragFeature},i.prototype.setFloatingHeights=function(){var e=this.pinnedRowModel,s=e.getPinnedTopTotalHeight();s&&(s+=1);var l=e.getPinnedBottomTotalHeight();l&&(l+=1),this.comp.setTopHeight(s),this.comp.setBottomHeight(l),this.comp.setTopDisplay(s?"inherit":"none"),this.comp.setBottomDisplay(l?"inherit":"none")},i.prototype.sizeColumnsToFit=function(e){var s=this,c=this.isVerticalScrollShowing()&&!zi()?this.gridOptionsWrapper.getScrollbarWidth():0,m=Bo(this.eBodyViewport)-c;m>0?this.columnModel.sizeColumnsToFit(m,"sizeColumnsToFit"):void 0===e?window.setTimeout(function(){s.sizeColumnsToFit(100)},0):100===e?window.setTimeout(function(){s.sizeColumnsToFit(500)},100):500===e?window.setTimeout(function(){s.sizeColumnsToFit(-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},i.prototype.addScrollEventListener=function(e){this.eBodyViewport.addEventListener("scroll",e)},i.prototype.removeScrollEventListener=function(e){this.eBodyViewport.removeEventListener("scroll",e)},i.prototype.requestAngularApply=function(){var e=this;this.angularApplyTriggered||(this.angularApplyTriggered=!0,window.setTimeout(function(){e.angularApplyTriggered=!1,e.$scope.$apply()},0))},i.prototype.addAngularApplyCheck=function(){var e=this;this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){return e.requestAngularApply()}),this.addManagedListener(this.eventService,$.EVENT_VIRTUAL_COLUMNS_CHANGED,function(){return e.requestAngularApply()})},Ji([B("rowContainerHeightService")],i.prototype,"rowContainerHeightService",void 0),Ji([B("ctrlsService")],i.prototype,"ctrlsService",void 0),Ji([B("columnModel")],i.prototype,"columnModel",void 0),Ji([B("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),Ji([Ln("contextMenuFactory")],i.prototype,"contextMenuFactory",void 0),Ji([B("headerNavigationService")],i.prototype,"headerNavigationService",void 0),Ji([B("paginationProxy")],i.prototype,"paginationProxy",void 0),Ji([B("dragAndDropService")],i.prototype,"dragAndDropService",void 0),Ji([B("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Ji([B("rowRenderer")],i.prototype,"rowRenderer",void 0),Ji([B("popupService")],i.prototype,"popupService",void 0),Ji([B("mouseEventService")],i.prototype,"mouseEventService",void 0),Ji([B("$scope")],i.prototype,"$scope",void 0),i}(Ye),wx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ao=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},WC=function(d){function i(e){var s=d.call(this)||this;return s.element=e,s}return wx(i,d),i.prototype.postConstruct=function(){this.addMouseListeners(),this.mockContextMenuForIPad(),this.addKeyboardEvents()},i.prototype.addKeyboardEvents=function(){var e=this;["keydown","keypress"].forEach(function(l){var c=e.processKeyboardEvent.bind(e,l);e.addManagedListener(e.element,l,c)})},i.prototype.addMouseListeners=function(){var e=this;["dblclick","contextmenu","mouseover","mouseout","click",Ev("touchstart")?"touchstart":"mousedown"].forEach(function(c){var p=e.processMouseEvent.bind(e,c);e.addManagedListener(e.element,c,p)})},i.prototype.processMouseEvent=function(e,s){if(this.mouseEventService.isEventFromThisGrid(s)&&!xa(s)){var l=this.getRowForEvent(s),c=this.mouseEventService.getRenderedCellForEvent(s);"contextmenu"===e?this.handleContextMenuMouseEvent(s,null,l,c):(c&&c.onMouseEvent(e,s),l&&l.onMouseEvent(e,s))}},i.prototype.mockContextMenuForIPad=function(){var e=this;if(Ys()){var s=new bo(this.element);this.addManagedListener(s,bo.EVENT_LONG_TAP,function(p){var m=e.getRowForEvent(p.touchEvent),w=e.mouseEventService.getRenderedCellForEvent(p.touchEvent);e.handleContextMenuMouseEvent(null,p.touchEvent,m,w)}),this.addDestroyFunc(function(){return s.destroy()})}},i.prototype.getRowForEvent=function(e){for(var s=Ou(e);s;){var l=this.gridOptionsWrapper.getDomData(s,eu.DOM_DATA_KEY_ROW_CTRL);if(l)return l;s=s.parentElement}return null},i.prototype.handleContextMenuMouseEvent=function(e,s,l,c){var p=l?l.getRowNode():null,m=c?c.getColumn():null,w=null;m&&(c.dispatchCellContextMenuEvent(e||s),w=this.valueService.getValue(m,p));var A=this.ctrlsService.getGridBodyCtrl(),I=c?c.getGui():A.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(e,s,p,m,w,I)},i.prototype.processKeyboardEvent=function(e,s){var l=If(this.gridOptionsWrapper,s,Xi.DOM_DATA_KEY_CELL_CTRL),c=If(this.gridOptionsWrapper,s,eu.DOM_DATA_KEY_ROW_CTRL);s.defaultPrevented||(l?this.processCellKeyboardEvent(l,e,s):c&&c.isFullWidth()&&this.processFullWidthRowKeyboardEvent(c,e,s))},i.prototype.processCellKeyboardEvent=function(e,s,l){var c=e.getRowNode(),p=e.getColumn(),m=e.isEditing();if(!qi(this.gridOptionsWrapper,l,c,p,m))switch(s){case"keydown":!m&&this.navigationService.handlePageScrollingKey(l)||e.onKeyDown(l),this.doGridOperations(l,e.isEditing());break;case"keypress":e.onKeyPress(l)}if("keydown"===s){var A=e.createEvent(l,$.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(A)}if("keypress"===s){var I=e.createEvent(l,$.EVENT_CELL_KEY_PRESS);this.eventService.dispatchEvent(I)}},i.prototype.processFullWidthRowKeyboardEvent=function(e,s,l){var c=e.getRowNode(),p=this.focusService.getFocusedCell();if(!qi(this.gridOptionsWrapper,l,c,p&&p.column,!1)&&"keydown"===s)switch(l.keyCode){case $e.UP:case $e.DOWN:e.onKeyboardNavigate(l);break;case $e.TAB:e.onTabKeyDown(l)}if("keydown"===s){var A=e.createRowEvent($.EVENT_CELL_KEY_DOWN,l);this.eventService.dispatchEvent(A)}if("keypress"===s){var I=e.createRowEvent($.EVENT_CELL_KEY_PRESS,l);this.eventService.dispatchEvent(I)}},i.prototype.doGridOperations=function(e,s){if((e.ctrlKey||e.metaKey)&&!s&&this.mouseEventService.isEventFromThisGrid(e))switch(e.which){case $e.A:return this.onCtrlAndA(e);case $e.C:return this.onCtrlAndC(e);case $e.V:return this.onCtrlAndV();case $e.D:return this.onCtrlAndD(e);case $e.Z:return e.shiftKey?this.undoRedoService.redo():this.undoRedoService.undo();case $e.Y:return this.undoRedoService.redo()}},i.prototype.onCtrlAndA=function(e){var s=this,l=s.pinnedRowModel,p=s.rangeService,m=ce.PINNED_BOTTOM,w=ce.PINNED_TOP;if(p&&s.paginationProxy.isRowsToRender()){var x=[l.isEmpty(w),l.isEmpty(m)],U=x[0]?null:w,Y=void 0,Q=void 0;x[1]?(Y=null,Q=this.paginationProxy.getRowCount()-1):(Y=m,Q=l.getPinnedBottomRowData().length-1);var oe=this.columnModel.getAllDisplayedColumns();if(Qr(oe))return;p.setCellRange({rowStartIndex:0,rowStartPinned:U,rowEndIndex:Q,rowEndPinned:Y,columnStart:oe[0],columnEnd:Vn(oe)})}e.preventDefault()},i.prototype.onCtrlAndC=function(e){!this.clipboardService||this.gridOptionsWrapper.isEnableCellTextSelection()||(this.clipboardService.copyToClipboard(),e.preventDefault())},i.prototype.onCtrlAndV=function(){jt.isRegistered(K.GXE.ClipboardModule)&&!this.gridOptionsWrapper.isSuppressClipboardPaste()&&this.clipboardService.pasteFromClipboard()},i.prototype.onCtrlAndD=function(e){jt.isRegistered(K.GXE.ClipboardModule)&&!this.gridOptionsWrapper.isSuppressClipboardPaste()&&this.clipboardService.copyRangeDown(),e.preventDefault()},Ao([B("mouseEventService")],i.prototype,"mouseEventService",void 0),Ao([B("valueService")],i.prototype,"valueService",void 0),Ao([Ln("contextMenuFactory")],i.prototype,"contextMenuFactory",void 0),Ao([B("ctrlsService")],i.prototype,"ctrlsService",void 0),Ao([B("navigationService")],i.prototype,"navigationService",void 0),Ao([B("focusService")],i.prototype,"focusService",void 0),Ao([B("undoRedoService")],i.prototype,"undoRedoService",void 0),Ao([B("columnModel")],i.prototype,"columnModel",void 0),Ao([B("paginationProxy")],i.prototype,"paginationProxy",void 0),Ao([B("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Ao([Ln("rangeService")],i.prototype,"rangeService",void 0),Ao([Ln("clipboardService")],i.prototype,"clipboardService",void 0),Ao([Qe],i.prototype,"postConstruct",null),i}(Ye),Dg=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ku=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Mg=function(d){function i(e){var s=d.call(this)||this;return s.centerContainerCon=e,s}return Dg(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(){e.gridBodyCon=e.ctrlsService.getGridBodyCtrl(),e.listenForResize()}),this.addManagedListener(this.eventService,$.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this))},i.prototype.listenForResize=function(){var e=this.onCenterViewportResized.bind(this);this.centerContainerCon.registerViewportResizeListener(e),this.gridBodyCon.registerBodyViewportResizeListener(e)},i.prototype.onScrollbarWidthChanged=function(){this.checkViewportAndScrolls()},i.prototype.onCenterViewportResized=function(){if(this.centerContainerCon.isViewportVisible()){this.checkViewportAndScrolls();var e=this.centerContainerCon.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0},i.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCon.getScrollFeature().checkScrollLeft()},i.prototype.getBodyHeight=function(){return this.bodyHeight},i.prototype.checkBodyHeight=function(){var s=Rl(this.gridBodyCon.getBodyViewportElement());this.bodyHeight!==s&&(this.bodyHeight=s,this.eventService.dispatchEvent({type:$.EVENT_BODY_HEIGHT_CHANGED,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.updateScrollVisibleService=function(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)},i.prototype.updateScrollVisibleServiceImpl=function(){var e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCon.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e),this.gridBodyCon.setVerticalScrollPaddingVisible(e.verticalScrollShowing)},i.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsWrapper.isAlwaysShowHorizontalScroll()||this.centerContainerCon.isViewportHScrollShowing()},i.prototype.onHorizontalViewportChanged=function(){var e=this.centerContainerCon.getCenterWidth(),s=this.centerContainerCon.getViewportScrollLeft();this.columnModel.setViewportPosition(e,s)},Ku([B("ctrlsService")],i.prototype,"ctrlsService",void 0),Ku([B("columnModel")],i.prototype,"columnModel",void 0),Ku([B("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),Ku([B("columnApi")],i.prototype,"columnApi",void 0),Ku([B("gridApi")],i.prototype,"gridApi",void 0),Ku([Qe],i.prototype,"postConstruct",null),i}(Ye),Sx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),UC=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},zC=function(d){function i(e){var s=d.call(this)||this;return s.element=e,s}return Sx(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))},i.prototype.onPinnedLeftWidthChanged=function(){var e=this.pinnedWidthService.getPinnedLeftWidth(),s=e>0;jn(this.element,s),s&&Ma(this.element,e)},UC([B("pinnedWidthService")],i.prototype,"pinnedWidthService",void 0),UC([Qe],i.prototype,"postConstruct",null),i}(Ye),jC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),nu=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},qC=function(d){function i(e){var s=d.call(this)||this;return s.element=e,s}return jC(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))},i.prototype.onPinnedRightWidthChanged=function(){var e=this.pinnedWidthService.getPinnedRightWidth(),s=e>0;jn(this.element,s),s&&Ma(this.element,e)},nu([B("pinnedWidthService")],i.prototype,"pinnedWidthService",void 0),nu([Qe],i.prototype,"postConstruct",null),i}(Ye),YC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),KC=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Mp=function(d){function i(e,s){var l=d.call(this)||this;return l.eContainer=e,l.eWrapper=s,l}return YC(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))},i.prototype.onHeightChanged=function(){var e=this.maxDivHeightScaler.getUiContainerHeight(),s=null!=e?e+"px":"";this.eContainer.style.height=s,this.eWrapper&&(this.eWrapper.style.height=s)},KC([B("rowContainerHeightService")],i.prototype,"maxDivHeightScaler",void 0),KC([Qe],i.prototype,"postConstruct",null),i}(Ye),Ex=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Op=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},$C=function(d){function i(e){var s=d.call(this)||this;return s.eContainer=e,s}return Ex(i,d),i.prototype.postConstruct=function(){var e=this;if(this.gridOptionsWrapper.isEnableRangeSelection()&&!ye(this.rangeService)){var s={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)};this.dragService.addDragSource(s),this.addDestroyFunc(function(){return e.dragService.removeDragSource(s)})}},Op([Ln("rangeService")],i.prototype,"rangeService",void 0),Op([B("dragService")],i.prototype,"dragService",void 0),Op([Qe],i.prototype,"postConstruct",null),i}(Ye),XC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),_s=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};!function(d){d.LEFT="left",d.RIGHT="right",d.CENTER="center",d.FULL_WIDTH="fullWidth",d.TOP_LEFT="topLeft",d.TOP_RIGHT="topRight",d.TOP_CENTER="topCenter",d.TOP_FULL_WITH="topFullWidth",d.BOTTOM_LEFT="bottomLeft",d.BOTTOM_RIGHT="bottomRight",d.BOTTOM_CENTER="bottomCenter",d.BOTTOM_FULL_WITH="bottomFullWidth"}(K.hA6||(K.hA6={}));var Pp=Ra([[K.hA6.CENTER,"ag-center-cols-container"],[K.hA6.LEFT,"ag-pinned-left-cols-container"],[K.hA6.RIGHT,"ag-pinned-right-cols-container"],[K.hA6.FULL_WIDTH,"ag-full-width-container"],[K.hA6.TOP_CENTER,"ag-floating-top-container"],[K.hA6.TOP_LEFT,"ag-pinned-left-floating-top"],[K.hA6.TOP_RIGHT,"ag-pinned-right-floating-top"],[K.hA6.TOP_FULL_WITH,"ag-floating-top-full-width-container"],[K.hA6.BOTTOM_CENTER,"ag-floating-bottom-container"],[K.hA6.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[K.hA6.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[K.hA6.BOTTOM_FULL_WITH,"ag-floating-bottom-full-width-container"]]),Ip=Ra([[K.hA6.CENTER,"ag-center-cols-viewport"],[K.hA6.TOP_CENTER,"ag-floating-top-viewport"],[K.hA6.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),ZC=Ra([[K.hA6.CENTER,"ag-center-cols-clipper"]]),Ql=function(d){function i(e){var s=d.call(this)||this;return s.name=e,s}return XC(i,d),i.getRowContainerCssClasses=function(e){return{container:Pp.get(e),viewport:Ip.get(e),wrapper:ZC.get(e)}},i.getPinned=function(e){switch(e){case K.hA6.BOTTOM_LEFT:case K.hA6.TOP_LEFT:case K.hA6.LEFT:return ce.PINNED_LEFT;case K.hA6.BOTTOM_RIGHT:case K.hA6.TOP_RIGHT:case K.hA6.RIGHT:return ce.PINNED_RIGHT;default:return null}},i.prototype.postConstruct=function(){var e=this;this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.embedFullWidthRows=this.gridOptionsWrapper.isEmbedFullWidthRows(),this.addManagedListener(this.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_ROWS_CHANGED,this.onDisplayedRowsChanged.bind(this)),this.forContainers([K.hA6.CENTER],function(){return e.viewportSizeFeature=e.createManagedBean(new Mg(e))}),this.registerWithCtrlsService()},i.prototype.registerWithCtrlsService=function(){switch(this.name){case K.hA6.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case K.hA6.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case K.hA6.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case K.hA6.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case K.hA6.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case K.hA6.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case K.hA6.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case K.hA6.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case K.hA6.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this)}},i.prototype.forContainers=function(e,s){e.indexOf(this.name)>=0&&s()},i.prototype.getContainerElement=function(){return this.eContainer},i.prototype.getViewportSizeFeature=function(){return this.viewportSizeFeature},i.prototype.setComp=function(e,s,l,c){var p=this;this.comp=e,this.eContainer=s,this.eViewport=l,this.eWrapper=c,this.createManagedBean(new WC(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();var A=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],p=0,m=c.length;p<m;p++,l++)s[l]=c[p];return s}([K.hA6.TOP_CENTER,K.hA6.TOP_LEFT,K.hA6.TOP_RIGHT],[K.hA6.BOTTOM_CENTER,K.hA6.BOTTOM_LEFT,K.hA6.BOTTOM_RIGHT],[K.hA6.CENTER,K.hA6.LEFT,K.hA6.RIGHT]),I=[K.hA6.CENTER,K.hA6.LEFT,K.hA6.RIGHT,K.hA6.FULL_WIDTH],U=[K.hA6.CENTER,K.hA6.TOP_CENTER,K.hA6.BOTTOM_CENTER],Q=[K.hA6.RIGHT,K.hA6.BOTTOM_RIGHT,K.hA6.TOP_RIGHT];this.forContainers([K.hA6.LEFT,K.hA6.BOTTOM_LEFT,K.hA6.TOP_LEFT],function(){return p.createManagedBean(new zC(p.eContainer))}),this.forContainers(Q,function(){return p.createManagedBean(new qC(p.eContainer))}),this.forContainers(I,function(){return p.createManagedBean(new Mp(p.eContainer,p.eWrapper))}),this.forContainers(A,function(){return p.createManagedBean(new $C(p.eContainer))}),this.forContainers(U,function(){return p.createManagedBean(new Cg(function(oe){return p.comp.setContainerWidth(oe+"px")}))})},i.prototype.listenOnDomOrder=function(){var e=this,s=function(){return e.comp.setDomOrder(e.gridOptionsWrapper.isEnsureDomOrder())};this.addManagedListener(this.gridOptionsWrapper,vt.PROP_DOM_LAYOUT,s),s()},i.prototype.stopHScrollOnPinnedRows=function(){var e=this;this.forContainers([K.hA6.TOP_CENTER,K.hA6.BOTTOM_CENTER],function(){e.addManagedListener(e.eViewport,"scroll",function(){return e.eViewport.scrollLeft=0})})},i.prototype.onDisplayedColumnsChanged=function(){var e=this;this.forContainers([K.hA6.CENTER],function(){return e.onHorizontalViewportChanged()})},i.prototype.onDisplayedColumnsWidthChanged=function(){var e=this;this.forContainers([K.hA6.CENTER],function(){return e.onHorizontalViewportChanged()})},i.prototype.onScrollVisibilityChanged=function(){if(this.name===K.hA6.CENTER){var s=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gridOptionsWrapper.getScrollbarWidth()||0;this.comp.setViewportHeight(0==s?"100%":"calc(100% + "+s+"px)")}},i.prototype.addPreventScrollWhileDragging=function(){var e=this,s=function(c){e.dragService.isDragging()&&c.cancelable&&c.preventDefault()};this.eContainer.addEventListener("touchmove",s,{passive:!1}),this.addDestroyFunc(function(){return e.eContainer.removeEventListener("touchmove",s)})},i.prototype.onHorizontalViewportChanged=function(){var e=this.getCenterWidth(),s=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(e,s)},i.prototype.getCenterWidth=function(){return Bo(this.eViewport)},i.prototype.getCenterViewportScrollLeft=function(){return Yc(this.eViewport,this.enableRtl)},i.prototype.registerViewportResizeListener=function(e){var s=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(function(){return s()})},i.prototype.isViewportVisible=function(){return Al(this.eViewport)},i.prototype.isViewportHScrollShowing=function(){return Tl(this.eViewport)},i.prototype.getViewportScrollLeft=function(){return Yc(this.eViewport,this.enableRtl)},i.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsWrapper.isAlwaysShowHorizontalScroll()||Tl(this.eViewport)},i.prototype.getViewportElement=function(){return this.eViewport},i.prototype.setContainerTranslateX=function(e){this.eContainer.style.transform="translateX("+e+"px)"},i.prototype.getHScrollPosition=function(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}},i.prototype.setCenterViewportScrollLeft=function(e){Kc(this.eViewport,e,this.enableRtl)},i.prototype.onDisplayedRowsChanged=function(){var e=this,s=this.name===K.hA6.TOP_FULL_WITH||this.name===K.hA6.BOTTOM_FULL_WITH||this.name===K.hA6.FULL_WIDTH,p=this.getRowCtrls().filter(function(w){var x=w.isFullWidth(),A=e.gridOptionsWrapper.getDomLayout()===ce.DOM_LAYOUT_PRINT,I=e.embedFullWidthRows||A;return s?!I&&x:I||!x});this.comp.setRowCtrls(p)},i.prototype.getRowCtrls=function(){switch(this.name){case K.hA6.TOP_CENTER:case K.hA6.TOP_LEFT:case K.hA6.TOP_RIGHT:case K.hA6.TOP_FULL_WITH:return this.rowRenderer.getTopRowCtrls();case K.hA6.BOTTOM_CENTER:case K.hA6.BOTTOM_LEFT:case K.hA6.BOTTOM_RIGHT:case K.hA6.BOTTOM_FULL_WITH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getRowCtrls()}},_s([B("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),_s([B("dragService")],i.prototype,"dragService",void 0),_s([B("ctrlsService")],i.prototype,"ctrlsService",void 0),_s([B("columnModel")],i.prototype,"columnModel",void 0),_s([B("resizeObserverService")],i.prototype,"resizeObserverService",void 0),_s([B("rowRenderer")],i.prototype,"rowRenderer",void 0),_s([Qe],i.prototype,"postConstruct",null),i}(Ye),QC=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Cs=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},xd='<div class="ag-root ag-unselectable" role="grid" unselectable="on">\n        <ag-header-root ref="gridHeader" unselectable="on"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation" unselectable="on">\n            <ag-row-container ref="topLeftContainer" name="'+K.hA6.TOP_LEFT+'"></ag-row-container>\n            <ag-row-container ref="topCenterContainer" name="'+K.hA6.TOP_CENTER+'"></ag-row-container>\n            <ag-row-container ref="topRightContainer" name="'+K.hA6.TOP_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="topFullWidthContainer" name="'+K.hA6.TOP_FULL_WITH+'"></ag-row-container>\n        </div>\n        <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n            <ag-row-container ref="leftContainer" name="'+K.hA6.LEFT+'"></ag-row-container>\n            <ag-row-container ref="centerContainer" name="'+K.hA6.CENTER+'"></ag-row-container>\n            <ag-row-container ref="rightContainer" name="'+K.hA6.RIGHT+'"></ag-row-container>\n            <ag-row-container ref="fullWidthContainer" name="'+K.hA6.FULL_WIDTH+'"></ag-row-container>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation" unselectable="on">\n            <ag-row-container ref="bottomLeftContainer" name="'+K.hA6.BOTTOM_LEFT+'"></ag-row-container>\n            <ag-row-container ref="bottomCenterContainer" name="'+K.hA6.BOTTOM_CENTER+'"></ag-row-container>\n            <ag-row-container ref="bottomRightContainer" name="'+K.hA6.BOTTOM_RIGHT+'"></ag-row-container>\n            <ag-row-container ref="bottomFullWidthContainer" name="'+K.hA6.BOTTOM_FULL_WITH+'"></ag-row-container>\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>',ew=function(d){function i(){return d.call(this,xd)||this}return QC(i,d),i.prototype.init=function(){var e=this,s=function(p,m){var w=p+"px";m.style.minHeight=w,m.style.height=w},l={setRowAnimationCssOnBodyViewport:function(p,m){return e.setRowAnimationCssOnBodyViewport(p,m)},setColumnCount:function(p){return $E(e.getGui(),p)},setRowCount:function(p){return KE(e.getGui(),p)},setTopHeight:function(p){return s(p,e.eTop)},setBottomHeight:function(p){return s(p,e.eBottom)},setTopDisplay:function(p){return e.eTop.style.display=p},setBottomDisplay:function(p){return e.eBottom.style.display=p},setColumnMovingCss:function(p,m){return e.addOrRemoveCssClass(HC,m)},updateLayoutClasses:function(p,m){Lt(e.eBodyViewport,K.LBn.AUTO_HEIGHT,m.autoHeight),Lt(e.eBodyViewport,K.LBn.NORMAL,m.normal),Lt(e.eBodyViewport,K.LBn.PRINT,m.print),e.addOrRemoveCssClass(K.LBn.AUTO_HEIGHT,m.autoHeight),e.addOrRemoveCssClass(K.LBn.NORMAL,m.normal),e.addOrRemoveCssClass(K.LBn.PRINT,m.print)},setAlwaysVerticalScrollClass:function(p,m){return Lt(e.eBodyViewport,BC,m)},registerBodyViewportResizeListener:function(p){var m=e.resizeObserverService.observeResize(e.eBodyViewport,p);e.addDestroyFunc(function(){return m()})},setPinnedTopBottomOverflowY:function(p){return e.eTop.style.overflowY=e.eBottom.style.overflowY=p},setCellSelectableCss:function(p,m){[e.eTop,e.eBodyViewport,e.eBottom].forEach(function(w){return Lt(w,GC,m)})}};this.ctrl=this.createManagedBean(new VC),this.ctrl.setComp(l,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom),(this.rangeService||this.gridOptionsWrapper.isRowSelectionMulti())&&YE(this.getGui(),!0)},i.prototype.setRowAnimationCssOnBodyViewport=function(e,s){Lt(this.eBodyViewport,K.SJN.ANIMATION_ON,s),Lt(this.eBodyViewport,K.SJN.ANIMATION_OFF,!s)},i.prototype.getFloatingTopBottom=function(){return[this.eTop,this.eBottom]},Cs([B("resizeObserverService")],i.prototype,"resizeObserverService",void 0),Cs([Ln("rangeService")],i.prototype,"rangeService",void 0),Cs([Be("eBodyViewport")],i.prototype,"eBodyViewport",void 0),Cs([Be("eTop")],i.prototype,"eTop",void 0),Cs([Be("eBottom")],i.prototype,"eBottom",void 0),Cs([Be("gridHeader")],i.prototype,"headerRootComp",void 0),Cs([Qe],i.prototype,"init",null),i}(dn);!function(d){d[d.SINGLE_SHEET=0]="SINGLE_SHEET",d[d.MULTI_SHEET=1]="MULTI_SHEET"}(K.nPL||(K.nPL={})),function(d){d.EVERYTHING="group",d.FILTER="filter",d.SORT="sort",d.MAP="map",d.AGGREGATE="aggregate",d.PIVOT="pivot",d.NOTHING="nothing"}(K.j_r||(K.j_r={}));var xn=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},tw=function(){function d(){this.detailGridInfoMap={},this.destroyCalled=!1}return d.prototype.registerOverlayWrapperComp=function(i){this.overlayWrapperComp=i},d.prototype.registerSideBarComp=function(i){this.sideBarComp=i},d.prototype.init=function(){var i=this;switch(this.rowModel.getType()){case ce.ROW_MODEL_TYPE_CLIENT_SIDE:this.clientSideRowModel=this.rowModel;break;case ce.ROW_MODEL_TYPE_INFINITE:this.infiniteRowModel=this.rowModel;break;case ce.ROW_MODEL_TYPE_SERVER_SIDE:this.serverSideRowModel=this.rowModel}this.ctrlsService.whenReady(function(){i.gridBodyCon=i.ctrlsService.getGridBodyCtrl()})},d.prototype.__getAlignedGridService=function(){return this.alignedGridsService},d.prototype.addDetailGridInfo=function(i,e){this.detailGridInfoMap[i]=e},d.prototype.removeDetailGridInfo=function(i){this.detailGridInfoMap[i]=void 0},d.prototype.getDetailGridInfo=function(i){return this.detailGridInfoMap[i]},d.prototype.forEachDetailGridInfo=function(i){var e=0;In(this.detailGridInfoMap,function(s,l){Le(l)&&(i(l,e),e++)})},d.prototype.getDataAsCsv=function(i){if(jt.assertRegistered(K.GXE.CsvExportModule,"api.getDataAsCsv"))return this.csvCreator.getDataAsCsv(i)},d.prototype.exportDataAsCsv=function(i){jt.assertRegistered(K.GXE.CsvExportModule,"api.exportDataAsCSv")&&this.csvCreator.exportDataAsCsv(i)},d.prototype.getDataAsExcel=function(i){if(jt.assertRegistered(K.GXE.ExcelExportModule,"api.getDataAsExcel"))return this.excelCreator.getFactoryMode(i&&i.exportMode||"xlsx")===K.nPL.MULTI_SHEET?void console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling `api.getMultipleSheetAsExcel()` or `api.exportMultipleSheetsAsExcel()`"):this.excelCreator.getDataAsExcel(i)},d.prototype.exportDataAsExcel=function(i){if(jt.assertRegistered(K.GXE.ExcelExportModule,"api.exportDataAsExcel")){if(this.excelCreator.getFactoryMode(i&&i.exportMode||"xlsx")===K.nPL.MULTI_SHEET)return void console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling `api.getMultipleSheetAsExcel()` or `api.exportMultipleSheetsAsExcel()`");this.excelCreator.exportDataAsExcel(i)}},d.prototype.getSheetDataForExcel=function(i){if(jt.assertRegistered(K.GXE.ExcelExportModule,"api.getSheetDataForExcel"))return this.excelCreator.setFactoryMode(K.nPL.MULTI_SHEET,i&&i.exportMode||"xlsx"),this.excelCreator.getSheetDataForExcel(i)},d.prototype.getMultipleSheetsAsExcel=function(i){if(jt.assertRegistered(K.GXE.ExcelExportModule,"api.getMultipleSheetsAsExcel"))return this.excelCreator.getMultipleSheetsAsExcel(i)},d.prototype.exportMultipleSheetsAsExcel=function(i){if(jt.assertRegistered(K.GXE.ExcelExportModule,"api.exportMultipleSheetsAsExcel"))return this.excelCreator.exportMultipleSheetsAsExcel(i)},d.prototype.setEnterpriseDatasource=function(i){console.warn("ag-grid: since version 18.x, api.setEnterpriseDatasource() should be replaced with api.setServerSideDatasource()"),this.setServerSideDatasource(i)},d.prototype.setGridAriaProperty=function(i,e){if(i){var s=this.ctrlsService.getGridBodyCtrl().getGui(),l="aria-"+i;null===e?s.removeAttribute(l):s.setAttribute(l,e)}},d.prototype.setServerSideDatasource=function(i){this.serverSideRowModel?this.serverSideRowModel.setDatasource(i):console.warn("AG Grid: you can only use an enterprise datasource when gridOptions.rowModelType is '"+ce.ROW_MODEL_TYPE_SERVER_SIDE+"'")},d.prototype.setDatasource=function(i){this.gridOptionsWrapper.isRowModelInfinite()?this.rowModel.setDatasource(i):console.warn("AG Grid: you can only use a datasource when gridOptions.rowModelType is '"+ce.ROW_MODEL_TYPE_INFINITE+"'")},d.prototype.setViewportDatasource=function(i){this.gridOptionsWrapper.isRowModelViewport()?this.rowModel.setViewportDatasource(i):console.warn("AG Grid: you can only use a viewport datasource when gridOptions.rowModelType is '"+ce.ROW_MODEL_TYPE_VIEWPORT+"'")},d.prototype.setRowData=function(i){if(this.gridOptionsWrapper.isRowModelDefault())if(this.gridOptionsWrapper.isImmutableData()){var e=this.immutableService.createTransactionForRowData(i);if(!e)return;var c=this.clientSideRowModel.updateRowData(e[0],e[1]);c&&this.rowRenderer.refreshFullWidthRows(c.update)}else this.selectionService.reset(),this.clientSideRowModel.setRowData(i);else console.warn("cannot call setRowData unless using normal row model")},d.prototype.setFloatingTopRowData=function(i){console.warn("AG Grid: since v12, api.setFloatingTopRowData() is now api.setPinnedTopRowData()"),this.setPinnedTopRowData(i)},d.prototype.setFloatingBottomRowData=function(i){console.warn("AG Grid: since v12, api.setFloatingBottomRowData() is now api.setPinnedBottomRowData()"),this.setPinnedBottomRowData(i)},d.prototype.getFloatingTopRowCount=function(){return console.warn("AG Grid: since v12, api.getFloatingTopRowCount() is now api.getPinnedTopRowCount()"),this.getPinnedTopRowCount()},d.prototype.getFloatingBottomRowCount=function(){return console.warn("AG Grid: since v12, api.getFloatingBottomRowCount() is now api.getPinnedBottomRowCount()"),this.getPinnedBottomRowCount()},d.prototype.getFloatingTopRow=function(i){return console.warn("AG Grid: since v12, api.getFloatingTopRow() is now api.getPinnedTopRow()"),this.getPinnedTopRow(i)},d.prototype.getFloatingBottomRow=function(i){return console.warn("AG Grid: since v12, api.getFloatingBottomRow() is now api.getPinnedBottomRow()"),this.getPinnedBottomRow(i)},d.prototype.setPinnedTopRowData=function(i){this.pinnedRowModel.setPinnedTopRowData(i)},d.prototype.setPinnedBottomRowData=function(i){this.pinnedRowModel.setPinnedBottomRowData(i)},d.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},d.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},d.prototype.getPinnedTopRow=function(i){return this.pinnedRowModel.getPinnedTopRow(i)},d.prototype.getPinnedBottomRow=function(i){return this.pinnedRowModel.getPinnedBottomRow(i)},d.prototype.setColumnDefs=function(i,e){void 0===e&&(e="api"),this.columnModel.setColumnDefs(i,e)},d.prototype.setAutoGroupColumnDef=function(i,e){this.gridOptionsWrapper.setProperty("autoGroupColumnDef",i,!0)},d.prototype.expireValueCache=function(){this.valueCache.expire()},d.prototype.getVerticalPixelRange=function(){return this.gridBodyCon.getScrollFeature().getVScrollPosition()},d.prototype.getHorizontalPixelRange=function(){return this.gridBodyCon.getScrollFeature().getHScrollPosition()},d.prototype.setAlwaysShowHorizontalScroll=function(i){this.gridOptionsWrapper.setProperty("alwaysShowHorizontalScroll",i)},d.prototype.setAlwaysShowVerticalScroll=function(i){this.gridOptionsWrapper.setProperty("alwaysShowVerticalScroll",i)},d.prototype.refreshToolPanel=function(){!this.sideBarComp||this.sideBarComp.refresh()},d.prototype.refreshCells=function(i){void 0===i&&(i={}),Array.isArray(i)?console.warn("since AG Grid v11.1, refreshCells() now takes parameters, please see the documentation."):this.rowRenderer.refreshCells(i)},d.prototype.flashCells=function(i){void 0===i&&(i={}),this.rowRenderer.flashCells(i)},d.prototype.redrawRows=function(i){void 0===i&&(i={}),this.rowRenderer.redrawRows(i?i.rowNodes:void 0)},d.prototype.refreshView=function(){console.warn("AG Grid: since v11.1, refreshView() is deprecated, please call refreshCells() or redrawRows() instead"),this.redrawRows()},d.prototype.refreshRows=function(i){console.warn("since AG Grid v11.1, refreshRows() is deprecated, please use refreshCells({rowNodes: rows}) or redrawRows({rowNodes: rows}) instead"),this.refreshCells({rowNodes:i})},d.prototype.rowDataChanged=function(i){console.warn("AG Grid: rowDataChanged is deprecated, either call refreshView() to refresh everything, or call rowNode.setRowData(newData) to set value on a particular node"),this.redrawRows()},d.prototype.softRefreshView=function(){console.error("AG Grid: since v16, softRefreshView() is no longer supported. Please check the documentation on how to refresh.")},d.prototype.refreshGroupRows=function(){console.warn("AG Grid: since v11.1, refreshGroupRows() is no longer supported, call refreshCells() instead. Because refreshCells() now does dirty checking, it will only refresh cells that have changed, so it should not be necessary to only refresh the group rows."),this.refreshCells()},d.prototype.setFunctionsReadOnly=function(i){this.gridOptionsWrapper.setProperty("functionsReadOnly",i)},d.prototype.refreshHeader=function(){this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(i){return i.refresh()})},d.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},d.prototype.isAdvancedFilterPresent=function(){return console.warn("AG Grid: isAdvancedFilterPresent() is deprecated, please use isColumnFilterPresent()"),this.isColumnFilterPresent()},d.prototype.isColumnFilterPresent=function(){return this.filterManager.isAdvancedFilterPresent()},d.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},d.prototype.getModel=function(){return this.rowModel},d.prototype.setRowNodeExpanded=function(i,e){i&&i.setExpanded(e)},d.prototype.onGroupExpandedOrCollapsed=function(i){ye(this.clientSideRowModel)&&console.warn("AG Grid: cannot call onGroupExpandedOrCollapsed unless using normal row model"),Le(i)&&console.warn("AG Grid: api.onGroupExpandedOrCollapsed - refreshFromIndex parameter is no longer used, the grid will refresh all rows"),this.clientSideRowModel.refreshModel({step:K.j_r.MAP})},d.prototype.refreshInMemoryRowModel=function(i){console.warn("ag-grid: since version 18.x, api.refreshInMemoryRowModel() should be replaced with api.refreshClientSideRowModel()"),this.refreshClientSideRowModel(i)},d.prototype.refreshClientSideRowModel=function(i){ye(this.clientSideRowModel)&&console.warn("cannot call refreshClientSideRowModel unless using normal row model");var e=K.j_r.EVERYTHING,s={group:K.j_r.EVERYTHING,filter:K.j_r.FILTER,map:K.j_r.MAP,aggregate:K.j_r.AGGREGATE,sort:K.j_r.SORT,pivot:K.j_r.PIVOT};Le(i)&&(e=s[i]),ye(e)?console.error("AG Grid: invalid step "+i+", available steps are "+Object.keys(s).join(", ")):this.clientSideRowModel.refreshModel({step:e,keepRenderedRows:!0,animate:!0,keepEditingRows:!0})},d.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},d.prototype.flushAllAnimationFrames=function(){this.animationFrameService.flushAllFrames()},d.prototype.getRowNode=function(i){return this.rowModel.getRowNode(i)},d.prototype.getSizesForCurrentTheme=function(){return{rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),headerHeight:this.gridOptionsWrapper.getHeaderHeight()}},d.prototype.expandAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!0):this.serverSideRowModel?this.serverSideRowModel.expandAll(!0):console.warn("AG Grid: expandAll only works with Client Side Row Model and Server Side Row Model")},d.prototype.collapseAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!1):this.serverSideRowModel?this.serverSideRowModel.expandAll(!1):console.warn("AG Grid: collapseAll only works with Client Side Row Model and Server Side Row Model")},d.prototype.getToolPanelInstance=function(i){if(this.sideBarComp){var e=this.sideBarComp.getToolPanelInstance(i);return this.frameworkComponentWrapper?this.frameworkComponentWrapper.unwrap(e):e}console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise")},d.prototype.addVirtualRowListener=function(i,e,s){"string"!=typeof i&&console.warn("AG Grid: addVirtualRowListener is deprecated, please use addRenderedRowListener."),this.addRenderedRowListener(i,e,s)},d.prototype.addRenderedRowListener=function(i,e,s){"virtualRowSelected"===i&&console.warn("AG Grid: event virtualRowSelected is deprecated, to register for individual row\n                selection events, add a listener directly to the row node."),this.rowRenderer.addRenderedRowListener(i,e,s)},d.prototype.setQuickFilter=function(i){this.filterManager.setQuickFilter(i)},d.prototype.selectIndex=function(i,e,s){console.warn("AG Grid: do not use api for selection, call node.setSelected(value) instead"),s&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionService.selectIndex(i,e)},d.prototype.deselectIndex=function(i,e){void 0===e&&(e=!1),console.warn("AG Grid: do not use api for selection, call node.setSelected(value) instead"),e&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionService.deselectIndex(i)},d.prototype.selectNode=function(i,e,s){void 0===e&&(e=!1),void 0===s&&(s=!1),console.warn("AG Grid: API for selection is deprecated, call node.setSelected(value) instead"),s&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),i.setSelectedParams({newValue:!0,clearSelection:!e})},d.prototype.deselectNode=function(i,e){void 0===e&&(e=!1),console.warn("AG Grid: API for selection is deprecated, call node.setSelected(value) instead"),e&&console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),i.setSelectedParams({newValue:!1})},d.prototype.selectAll=function(){this.selectionService.selectAllRowNodes()},d.prototype.deselectAll=function(){this.selectionService.deselectAllRowNodes()},d.prototype.selectAllFiltered=function(){this.selectionService.selectAllRowNodes(!0)},d.prototype.deselectAllFiltered=function(){this.selectionService.deselectAllRowNodes(!0)},d.prototype.recomputeAggregates=function(){ye(this.clientSideRowModel)&&console.warn("cannot call recomputeAggregates unless using normal row model"),console.warn("recomputeAggregates is deprecated, please call api.refreshClientSideRowModel('aggregate') instead"),this.clientSideRowModel.refreshModel({step:K.j_r.AGGREGATE})},d.prototype.sizeColumnsToFit=function(){this.gridBodyCon.sizeColumnsToFit()},d.prototype.showLoadingOverlay=function(){this.overlayWrapperComp.showLoadingOverlay()},d.prototype.showNoRowsOverlay=function(){this.overlayWrapperComp.showNoRowsOverlay()},d.prototype.hideOverlay=function(){this.overlayWrapperComp.hideOverlay()},d.prototype.isNodeSelected=function(i){return console.warn("AG Grid: no need to call api.isNodeSelected(), just call node.isSelected() instead"),i.isSelected()},d.prototype.getSelectedNodesById=function(){return console.error("AG Grid: since version 3.4, getSelectedNodesById no longer exists, use getSelectedNodes() instead"),null},d.prototype.getSelectedNodes=function(){return this.selectionService.getSelectedNodes()},d.prototype.getSelectedRows=function(){return this.selectionService.getSelectedRows()},d.prototype.getBestCostNodeSelection=function(){return this.selectionService.getBestCostNodeSelection()},d.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},d.prototype.ensureColIndexVisible=function(i){console.warn("AG Grid: ensureColIndexVisible(index) no longer supported, use ensureColumnVisible(colKey) instead.")},d.prototype.ensureColumnVisible=function(i){this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)},d.prototype.ensureIndexVisible=function(i,e){this.gridBodyCon.getScrollFeature().ensureIndexVisible(i,e)},d.prototype.ensureNodeVisible=function(i,e){void 0===e&&(e=null),this.gridBodyCon.getScrollFeature().ensureNodeVisible(i,e)},d.prototype.forEachLeafNode=function(i){ye(this.clientSideRowModel)&&console.warn("cannot call forEachNode unless using normal row model"),this.clientSideRowModel.forEachLeafNode(i)},d.prototype.forEachNode=function(i){this.rowModel.forEachNode(i)},d.prototype.forEachNodeAfterFilter=function(i){ye(this.clientSideRowModel)&&console.warn("cannot call forEachNodeAfterFilter unless using normal row model"),this.clientSideRowModel.forEachNodeAfterFilter(i)},d.prototype.forEachNodeAfterFilterAndSort=function(i){ye(this.clientSideRowModel)&&console.warn("cannot call forEachNodeAfterFilterAndSort unless using normal row model"),this.clientSideRowModel.forEachNodeAfterFilterAndSort(i)},d.prototype.getFilterApiForColDef=function(i){return console.warn("ag-grid API method getFilterApiForColDef deprecated, use getFilterInstance instead"),this.getFilterInstance(i)},d.prototype.getFilterInstance=function(i,e){var s=this,l=this.columnModel.getPrimaryColumn(i);if(l){var c=this.filterManager.getFilterComponent(l,"NO_UI"),p=c&&c.resolveNow(null,function(w){return w}),m=this.frameworkComponentWrapper?this.frameworkComponentWrapper.unwrap(p):p;return e&&(m?setTimeout(e,0,m):c&&c.then(function(w){var x=s.frameworkComponentWrapper?s.frameworkComponentWrapper.unwrap(w):w;e(x)})),m}},d.prototype.getFilterApi=function(i){return console.warn("AG Grid: getFilterApi is deprecated, use getFilterInstance instead"),this.getFilterInstance(i)},d.prototype.destroyFilter=function(i){var e=this.columnModel.getPrimaryColumn(i);if(e)return this.filterManager.destroyFilter(e,"filterDestroyed")},d.prototype.getStatusPanel=function(i){if(this.statusBarService){var e=this.statusBarService.getStatusPanel(i);return this.frameworkComponentWrapper?this.frameworkComponentWrapper.unwrap(e):e}},d.prototype.getColumnDef=function(i){var e=this.columnModel.getPrimaryColumn(i);return e?e.getColDef():null},d.prototype.getColumnDefs=function(){return this.columnModel.getColumnDefs()},d.prototype.onFilterChanged=function(){this.filterManager.onFilterChanged()},d.prototype.onSortChanged=function(){this.sortController.onSortChanged()},d.prototype.setSortModel=function(i,e){console.warn("AG Grid: as of version 24.0.0, setSortModel() is deprecated, sort information is now part of Column State. Please use columnApi.applyColumnState() instead.");var s=[];i&&i.forEach(function(l,c){s.push({colId:l.colId,sort:l.sort,sortIndex:c})}),this.columnModel.applyColumnState({state:s,defaultState:{sort:null}})},d.prototype.getSortModel=function(){console.warn("AG Grid: as of version 24.0.0, getSortModel() is deprecated, sort information is now part of Column State. Please use columnApi.getColumnState() instead.");var e=this.columnModel.getColumnState().filter(function(c){return null!=c.sort}),s={};e.forEach(function(c){s[c.colId]=c.sortIndex});var l=e.map(function(c){return{colId:c.colId,sort:c.sort}});return l.sort(function(c,p){return s[c.colId]-s[p.colId]}),l},d.prototype.setFilterModel=function(i){this.filterManager.setFilterModel(i)},d.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},d.prototype.getFocusedCell=function(){return this.focusService.getFocusedCell()},d.prototype.clearFocusedCell=function(){return this.focusService.clearFocusedCell()},d.prototype.setFocusedCell=function(i,e,s){this.focusService.setFocusedCell(i,e,s,!0)},d.prototype.setSuppressRowDrag=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_SUPPRESS_ROW_DRAG,i)},d.prototype.setSuppressMoveWhenRowDragging=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_SUPPRESS_MOVE_WHEN_ROW_DRAG,i)},d.prototype.setSuppressRowClickSelection=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_SUPPRESS_ROW_CLICK_SELECTION,i)},d.prototype.addRowDropZone=function(i){this.gridBodyCon.getRowDragFeature().addRowDropZone(i)},d.prototype.removeRowDropZone=function(i){var e=this.dragAndDropService.findExternalZone(i);e&&this.dragAndDropService.removeDropTarget(e)},d.prototype.getRowDropZoneParams=function(i){return this.gridBodyCon.getRowDragFeature().getRowDropZone(i)},d.prototype.setHeaderHeight=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_HEADER_HEIGHT,i)},d.prototype.setDomLayout=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_DOM_LAYOUT,i)},d.prototype.setEnableCellTextSelection=function(i){this.gridBodyCon.setCellTextSelection(i)},d.prototype.setFillHandleDirection=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_FILL_HANDLE_DIRECTION,i)},d.prototype.setGroupHeaderHeight=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GROUP_HEADER_HEIGHT,i)},d.prototype.setFloatingFiltersHeight=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_FLOATING_FILTERS_HEIGHT,i)},d.prototype.setPivotGroupHeaderHeight=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_PIVOT_GROUP_HEADER_HEIGHT,i)},d.prototype.setIsExternalFilterPresent=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_IS_EXTERNAL_FILTER_PRESENT,i)},d.prototype.setDoesExternalFilterPass=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_DOES_EXTERNAL_FILTER_PASS,i)},d.prototype.setNavigateToNextCell=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_NAVIGATE_TO_NEXT_CELL,i)},d.prototype.setTabToNextCell=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_TAB_TO_NEXT_CELL,i)},d.prototype.setTabToNextHeader=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_TAB_TO_NEXT_HEADER,i)},d.prototype.setNavigateToNextHeader=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_NAVIGATE_TO_NEXT_HEADER,i)},d.prototype.setGroupRowAggNodes=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GROUP_ROW_AGG_NODES,i)},d.prototype.setGetBusinessKeyForNode=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GET_BUSINESS_KEY_FOR_NODE,i)},d.prototype.setGetChildCount=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GET_CHILD_COUNT,i)},d.prototype.setProcessRowPostCreate=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_PROCESS_ROW_POST_CREATE,i)},d.prototype.setGetRowNodeId=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GET_ROW_NODE_ID,i)},d.prototype.setGetRowClass=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GET_ROW_CLASS,i)},d.prototype.setIsFullWidthCell=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_IS_FULL_WIDTH_CELL,i)},d.prototype.setIsRowSelectable=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_IS_ROW_SELECTABLE,i)},d.prototype.setIsRowMaster=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_IS_ROW_MASTER,i)},d.prototype.setPostSort=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_POST_SORT,i)},d.prototype.setGetDocument=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GET_DOCUMENT,i)},d.prototype.setGetContextMenuItems=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GET_CONTEXT_MENU_ITEMS,i)},d.prototype.setGetMainMenuItems=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GET_MAIN_MENU_ITEMS,i)},d.prototype.setProcessCellForClipboard=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_PROCESS_CELL_FOR_CLIPBOARD,i)},d.prototype.setSendToClipboard=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_SEND_TO_CLIPBOARD,i)},d.prototype.setProcessCellFromClipboard=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_PROCESS_CELL_FROM_CLIPBOARD,i)},d.prototype.setProcessSecondaryColDef=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_PROCESS_TO_SECONDARY_COLDEF,i)},d.prototype.setProcessSecondaryColGroupDef=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_PROCESS_SECONDARY_COL_GROUP_DEF,i)},d.prototype.setPostProcessPopup=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_POST_PROCESS_POPUP,i)},d.prototype.setDefaultGroupOrderComparator=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_DEFAULT_GROUP_ORDER_COMPARATOR,i)},d.prototype.setGetChartToolbarItems=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GET_CHART_TOOLBAR_ITEMS,i)},d.prototype.setPaginationNumberFormatter=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_PAGINATION_NUMBER_FORMATTER,i)},d.prototype.setGetServerSideStoreParams=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GET_SERVER_SIDE_STORE_PARAMS,i)},d.prototype.setIsServerSideGroupOpenByDefault=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_IS_SERVER_SIDE_GROUPS_OPEN_BY_DEFAULT,i)},d.prototype.setIsApplyServerSideTransaction=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_IS_APPLY_SERVER_SIDE_TRANSACTION,i)},d.prototype.setIsServerSideGroup=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_IS_SERVER_SIDE_GROUP,i)},d.prototype.setGetServerSideGroupKey=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GET_SERVER_SIDE_GROUP_KEY,i)},d.prototype.setGetRowStyle=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GET_ROW_STYLE,i)},d.prototype.setGetRowHeight=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GET_ROW_HEIGHT,i)},d.prototype.setPivotHeaderHeight=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_PIVOT_HEADER_HEIGHT,i)},d.prototype.isSideBarVisible=function(){return!!this.sideBarComp&&this.sideBarComp.isDisplayed()},d.prototype.setSideBarVisible=function(i){this.sideBarComp?this.sideBarComp.setDisplayed(i):i&&console.warn("AG Grid: sideBar is not loaded")},d.prototype.setSideBarPosition=function(i){this.sideBarComp?this.sideBarComp.setSideBarPosition(i):console.warn("AG Grid: sideBar is not loaded")},d.prototype.openToolPanel=function(i){this.sideBarComp?this.sideBarComp.openToolPanel(i):console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise")},d.prototype.closeToolPanel=function(){this.sideBarComp?this.sideBarComp.close():console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise")},d.prototype.getOpenedToolPanel=function(){return this.sideBarComp?this.sideBarComp.openedItem():null},d.prototype.getSideBar=function(){return this.gridOptionsWrapper.getSideBar()},d.prototype.setSideBar=function(i){this.gridOptionsWrapper.setProperty("sideBar",cp.parse(i))},d.prototype.setSuppressClipboardPaste=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_SUPPRESS_CLIPBOARD_PASTE,i)},d.prototype.isToolPanelShowing=function(){return this.sideBarComp.isToolPanelShowing()},d.prototype.doLayout=function(){pn(function(){return console.warn("AG Grid - since version 25.1, doLayout was taken out, as it's not needed. The grid responds to grid size changes automatically")},"doLayoutDeprecated")},d.prototype.resetRowHeights=function(){Le(this.clientSideRowModel)&&this.clientSideRowModel.resetRowHeights()},d.prototype.setGroupRemoveSingleChildren=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GROUP_REMOVE_SINGLE_CHILDREN,i)},d.prototype.setGroupRemoveLowestSingleChildren=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,i)},d.prototype.onRowHeightChanged=function(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()},d.prototype.getValue=function(i,e){var s=this.columnModel.getPrimaryColumn(i);return ye(s)&&(s=this.columnModel.getGridColumn(i)),ye(s)?null:this.valueService.getValue(s,e)},d.prototype.addEventListener=function(i,e){var s=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addEventListener(i,e,s)},d.prototype.addGlobalListener=function(i){var e=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addGlobalListener(i,e)},d.prototype.removeEventListener=function(i,e){var s=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeEventListener(i,e,s)},d.prototype.removeGlobalListener=function(i){var e=this.gridOptionsWrapper.useAsyncEvents();this.eventService.removeGlobalListener(i,e)},d.prototype.dispatchEvent=function(i){this.eventService.dispatchEvent(i)},d.prototype.destroy=function(){if(!this.destroyCalled){this.destroyCalled=!0;var i=this.ctrlsService.getGridCtrl();i&&i.destroyGridUi(),this.context.destroy()}},d.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(r_.bind(window,this,"Grid API"),100)},d.prototype.warnIfDestroyed=function(i){return this.destroyCalled&&console.warn("AG Grid: Grid API method "+i+" was called on a grid that was destroyed."),this.destroyCalled},d.prototype.resetQuickFilter=function(){this.warnIfDestroyed("resetQuickFilter")||this.rowModel.forEachNode(function(i){return i.quickFilterAggregateText=null})},d.prototype.getRangeSelections=function(){return console.warn("AG Grid: in v20.1.x, api.getRangeSelections() is gone, please use getCellRanges() instead.\n        We had to change how cell selections works a small bit to allow charting to integrate. The return type of\n        getCellRanges() is a bit different, please check the AG Grid documentation."),null},d.prototype.getCellRanges=function(){return this.rangeService?this.rangeService.getCellRanges():(console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),null)},d.prototype.camelCaseToHumanReadable=function(i){return Yr(i)},d.prototype.addRangeSelection=function(i){console.warn("AG Grid: As of version 21.x, range selection changed slightly to allow charting integration. Please call api.addCellRange() instead of api.addRangeSelection()")},d.prototype.addCellRange=function(i){this.rangeService||console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),this.rangeService.addCellRange(i)},d.prototype.clearRangeSelection=function(){this.rangeService||console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise"),this.rangeService.removeAllCellRanges()},d.prototype.undoCellEditing=function(){this.undoRedoService.undo()},d.prototype.redoCellEditing=function(){this.undoRedoService.redo()},d.prototype.getCurrentUndoSize=function(){return this.undoRedoService.getCurrentUndoStackSize()},d.prototype.getCurrentRedoSize=function(){return this.undoRedoService.getCurrentRedoStackSize()},d.prototype.getChartModels=function(){if(jt.assertRegistered(K.GXE.RangeSelectionModule,"api.getChartModels")&&jt.assertRegistered(K.GXE.GridChartsModule,"api.getChartModels"))return this.chartService.getChartModels()},d.prototype.getChartRef=function(i){if(jt.assertRegistered(K.GXE.RangeSelectionModule,"api.getChartRef")&&jt.assertRegistered(K.GXE.GridChartsModule,"api.getChartRef"))return this.chartService.getChartRef(i)},d.prototype.getChartImageDataURL=function(i){if(jt.assertRegistered(K.GXE.RangeSelectionModule,"api.getChartImageDataURL")&&jt.assertRegistered(K.GXE.GridChartsModule,"api.getChartImageDataURL"))return this.chartService.getChartImageDataURL(i)},d.prototype.createRangeChart=function(i){if(jt.assertRegistered(K.GXE.RangeSelectionModule,"api.createRangeChart")&&jt.assertRegistered(K.GXE.GridChartsModule,"api.createRangeChart"))return this.chartService.createRangeChart(i)},d.prototype.createCrossFilterChart=function(i){if(jt.assertRegistered(K.GXE.RangeSelectionModule,"api.createCrossFilterChart")&&jt.assertRegistered(K.GXE.GridChartsModule,"api.createCrossFilterChart"))return this.chartService.createCrossFilterChart(i)},d.prototype.restoreChart=function(i,e){if(jt.assertRegistered(K.GXE.RangeSelectionModule,"api.restoreChart")&&jt.assertRegistered(K.GXE.GridChartsModule,"api.restoreChart"))return this.chartService.restoreChart(i,e)},d.prototype.createPivotChart=function(i){if(jt.assertRegistered(K.GXE.RangeSelectionModule,"api.createPivotChart")&&jt.assertRegistered(K.GXE.GridChartsModule,"api.createPivotChart"))return this.chartService.createPivotChart(i)},d.prototype.copySelectedRowsToClipboard=function(i,e){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copySelectedRowsToClipboard(i,e)},d.prototype.copySelectedRangeToClipboard=function(i){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copySelectedRangeToClipboard(i)},d.prototype.copySelectedRangeDown=function(){this.clipboardService||console.warn("AG Grid: clipboard is only available in AG Grid Enterprise"),this.clipboardService.copyRangeDown()},d.prototype.showColumnMenuAfterButtonClick=function(i,e){var s=this.columnModel.getGridColumn(i);this.menuFactory.showMenuAfterButtonClick(s,e,"columnMenu")},d.prototype.showColumnMenuAfterMouseClick=function(i,e){var s=this.columnModel.getGridColumn(i);s||(s=this.columnModel.getPrimaryColumn(i)),s?this.menuFactory.showMenuAfterMouseEvent(s,e):console.error("AG Grid: column '"+i+"' not found")},d.prototype.hidePopupMenu=function(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()},d.prototype.setPopupParent=function(i){this.gridOptionsWrapper.setProperty(vt.PROP_POPUP_PARENT,i)},d.prototype.tabToNextCell=function(){return this.navigationService.tabToNextCell(!1)},d.prototype.tabToPreviousCell=function(){return this.navigationService.tabToNextCell(!0)},d.prototype.getCellRendererInstances=function(i){return void 0===i&&(i={}),this.rowRenderer.getCellRendererInstances(i)},d.prototype.getCellEditorInstances=function(i){return void 0===i&&(i={}),this.rowRenderer.getCellEditorInstances(i)},d.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},d.prototype.stopEditing=function(i){void 0===i&&(i=!1),this.rowRenderer.stopEditing(i)},d.prototype.startEditingCell=function(i){var e=this.columnModel.getGridColumn(i.colKey);if(e){var s={rowIndex:i.rowIndex,rowPinned:i.rowPinned||null,column:e};null==i.rowPinned&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(i.rowIndex);var c=this.navigationService.getCellByPosition(s);!c||c.startRowOrCellEdit(i.keyPress,i.charPress)}else console.warn("AG Grid: no column found for "+i.colKey)},d.prototype.addAggFunc=function(i,e){this.aggFuncService&&this.aggFuncService.addAggFunc(i,e)},d.prototype.addAggFuncs=function(i){this.aggFuncService&&this.aggFuncService.addAggFuncs(i)},d.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},d.prototype.applyServerSideTransaction=function(i){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransaction(i);console.warn("AG Grid: Cannot apply Server Side Transaction if not using the Server Side Row Model.")},d.prototype.applyServerSideTransactionAsync=function(i,e){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransactionAsync(i,e);console.warn("AG Grid: Cannot apply Server Side Transaction if not using the Server Side Row Model.")},d.prototype.retryServerSideLoads=function(){this.serverSideRowModel?this.serverSideRowModel.retryLoads():console.warn("AG Grid: API retryServerSideLoads() can only be used when using Server-Side Row Model.")},d.prototype.flushServerSideAsyncTransactions=function(){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.flushAsyncTransactions();console.warn("AG Grid: Cannot flush Server Side Transaction if not using the Server Side Row Model.")},d.prototype.applyTransaction=function(i){if(this.clientSideRowModel){var e=this.clientSideRowModel.updateRowData(i);return this.rowRenderer.refreshFullWidthRows(e.update),this.gridOptionsWrapper.isSuppressChangeDetection()||this.rowRenderer.refreshCells(),e}console.error("AG Grid: updateRowData() only works with ClientSideRowModel. Working with InfiniteRowModel was deprecated in v23.1 and removed in v24.1")},d.prototype.updateRowData=function(i){return pn(function(){return console.warn("AG Grid: as of v23.1, grid API updateRowData(transaction) is now called applyTransaction(transaction). updateRowData is deprecated and will be removed in a future major release.")},"updateRowData deprecated"),this.applyTransaction(i)},d.prototype.applyTransactionAsync=function(i,e){this.clientSideRowModel?this.clientSideRowModel.batchUpdateRowData(i,e):console.error("AG Grid: api.applyTransactionAsync() only works with ClientSideRowModel.")},d.prototype.flushAsyncTransactions=function(){this.clientSideRowModel?this.clientSideRowModel.flushAsyncTransactions():console.error("AG Grid: api.applyTransactionAsync() only works with ClientSideRowModel.")},d.prototype.batchUpdateRowData=function(i,e){pn(function(){return console.warn("AG Grid: as of v23.1, grid API batchUpdateRowData(transaction, callback) is now called applyTransactionAsync(transaction, callback). batchUpdateRowData is deprecated and will be removed in a future major release.")},"batchUpdateRowData deprecated"),this.applyTransactionAsync(i,e)},d.prototype.insertItemsAtIndex=function(i,e,s){console.warn("AG Grid: insertItemsAtIndex() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:e,addIndex:i,update:null,remove:null})},d.prototype.removeItems=function(i,e){console.warn("AG Grid: removeItems() is deprecated, use updateRowData(transaction) instead.");var s=i.map(function(l){return l.data});this.updateRowData({add:null,addIndex:null,update:null,remove:s})},d.prototype.addItems=function(i,e){console.warn("AG Grid: addItems() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:i,addIndex:null,update:null,remove:null})},d.prototype.refreshVirtualPageCache=function(){console.warn("AG Grid: refreshVirtualPageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},d.prototype.refreshInfinitePageCache=function(){console.warn("AG Grid: refreshInfinitePageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},d.prototype.refreshInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():console.warn("AG Grid: api.refreshInfiniteCache is only available when rowModelType='infinite'.")},d.prototype.purgeVirtualPageCache=function(){console.warn("AG Grid: purgeVirtualPageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfinitePageCache()},d.prototype.purgeInfinitePageCache=function(){console.warn("AG Grid: purgeInfinitePageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfiniteCache()},d.prototype.purgeInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():console.warn("AG Grid: api.purgeInfiniteCache is only available when rowModelType='infinite'.")},d.prototype.purgeEnterpriseCache=function(i){console.warn("ag-grid: since version 18.x, api.purgeEnterpriseCache() should be replaced with api.purgeServerSideCache()"),this.purgeServerSideCache(i)},d.prototype.purgeServerSideCache=function(i){void 0===i&&(i=[]),this.serverSideRowModel?(console.warn("AG Grid: since v25.0, api.purgeServerSideCache is deprecated. Please use api.refreshServerSideStore({purge: true}) instead."),this.refreshServerSideStore({route:i,purge:!0})):console.warn("AG Grid: api.purgeServerSideCache is only available when rowModelType='serverSide'.")},d.prototype.refreshServerSideStore=function(i){this.serverSideRowModel?this.serverSideRowModel.refreshStore(i):console.warn("AG Grid: api.refreshServerSideStore is only available when rowModelType='serverSide'.")},d.prototype.getServerSideStoreState=function(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(console.warn("AG Grid: api.getServerSideStoreState is only available when rowModelType='serverSide'."),[])},d.prototype.getVirtualRowCount=function(){return console.warn("AG Grid: getVirtualRowCount() is now called getInfiniteRowCount(), please call getInfiniteRowCount() instead"),this.getInfiniteRowCount()},d.prototype.getInfiniteRowCount=function(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();console.warn("AG Grid: api.getVirtualRowCount is only available when rowModelType='virtual'.")},d.prototype.isMaxRowFound=function(){return console.warn("AG Grid: api.isLastRowIndexKnown is deprecated, please use api.isLastRowIndexKnown()"),this.isLastRowIndexKnown()},d.prototype.isLastRowIndexKnown=function(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();console.warn("AG Grid: api.isMaxRowFound is only available when rowModelType='virtual'.")},d.prototype.setVirtualRowCount=function(i,e){console.warn("AG Grid: setVirtualRowCount() is now called setInfiniteRowCount(), please call setInfiniteRowCount() instead"),this.setRowCount(i,e)},d.prototype.setInfiniteRowCount=function(i,e){console.warn("AG Grid: setInfiniteRowCount() is now called setRowCount(), please call setRowCount() instead"),this.setRowCount(i,e)},d.prototype.setRowCount=function(i,e){this.infiniteRowModel?this.infiniteRowModel.setRowCount(i,e):console.warn("AG Grid: api.setRowCount is only available for Infinite Row Model.")},d.prototype.getVirtualPageState=function(){return console.warn("AG Grid: getVirtualPageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},d.prototype.getInfinitePageState=function(){return console.warn("AG Grid: getInfinitePageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},d.prototype.getCacheBlockState=function(){return this.rowNodeBlockLoader.getBlockState()},d.prototype.checkGridSize=function(){console.warn("in AG Grid v25.2.0, checkGridSize() was removed, as it was legacy and didn't do anything uesful.")},d.prototype.getFirstRenderedRow=function(){return console.warn("in AG Grid v12, getFirstRenderedRow() was renamed to getFirstDisplayedRow()"),this.getFirstDisplayedRow()},d.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},d.prototype.getLastRenderedRow=function(){return console.warn("in AG Grid v12, getLastRenderedRow() was renamed to getLastDisplayedRow()"),this.getLastDisplayedRow()},d.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},d.prototype.getDisplayedRowAtIndex=function(i){return this.rowModel.getRow(i)},d.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},d.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},d.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},d.prototype.paginationSetPageSize=function(i){this.gridOptionsWrapper.setProperty("paginationPageSize",i)},d.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},d.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},d.prototype.paginationGetRowCount=function(){return this.paginationProxy.getMasterRowCount()},d.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},d.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},d.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},d.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},d.prototype.paginationGoToPage=function(i){this.paginationProxy.goToPage(i)},xn([Ln("immutableService")],d.prototype,"immutableService",void 0),xn([Ln("csvCreator")],d.prototype,"csvCreator",void 0),xn([Ln("excelCreator")],d.prototype,"excelCreator",void 0),xn([B("rowRenderer")],d.prototype,"rowRenderer",void 0),xn([B("navigationService")],d.prototype,"navigationService",void 0),xn([B("filterManager")],d.prototype,"filterManager",void 0),xn([B("columnModel")],d.prototype,"columnModel",void 0),xn([B("selectionService")],d.prototype,"selectionService",void 0),xn([B("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),xn([B("valueService")],d.prototype,"valueService",void 0),xn([B("alignedGridsService")],d.prototype,"alignedGridsService",void 0),xn([B("eventService")],d.prototype,"eventService",void 0),xn([B("pinnedRowModel")],d.prototype,"pinnedRowModel",void 0),xn([B("context")],d.prototype,"context",void 0),xn([B("rowModel")],d.prototype,"rowModel",void 0),xn([B("sortController")],d.prototype,"sortController",void 0),xn([B("paginationProxy")],d.prototype,"paginationProxy",void 0),xn([B("focusService")],d.prototype,"focusService",void 0),xn([B("dragAndDropService")],d.prototype,"dragAndDropService",void 0),xn([Ln("rangeService")],d.prototype,"rangeService",void 0),xn([Ln("clipboardService")],d.prototype,"clipboardService",void 0),xn([Ln("aggFuncService")],d.prototype,"aggFuncService",void 0),xn([B("menuFactory")],d.prototype,"menuFactory",void 0),xn([Ln("contextMenuFactory")],d.prototype,"contextMenuFactory",void 0),xn([B("valueCache")],d.prototype,"valueCache",void 0),xn([B("animationFrameService")],d.prototype,"animationFrameService",void 0),xn([Ln("statusBarService")],d.prototype,"statusBarService",void 0),xn([Ln("chartService")],d.prototype,"chartService",void 0),xn([Ln("undoRedoService")],d.prototype,"undoRedoService",void 0),xn([Ln("rowNodeBlockLoader")],d.prototype,"rowNodeBlockLoader",void 0),xn([Ln("ssrmTransactionManager")],d.prototype,"serverSideTransactionManager",void 0),xn([B("ctrlsService")],d.prototype,"ctrlsService",void 0),xn([Ln("frameworkComponentWrapper")],d.prototype,"frameworkComponentWrapper",void 0),xn([Qe],d.prototype,"init",null),xn([Ii],d.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),xn([ht("gridApi")],d)}(),bx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Og=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Pg=function(d,i){return function(e,s){i(e,s,d)}},Ig=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.expressionToFunctionCache={},e}return bx(i,d),i.prototype.setBeans=function(e){this.logger=e.create("ExpressionService")},i.prototype.evaluate=function(e,s){return"function"==typeof e?e(s):"string"==typeof e?this.evaluateExpression(e,s):void console.error("AG Grid: value should be either a string or a function",e)},i.prototype.evaluateExpression=function(e,s){try{return this.createExpressionFunction(e)(s.value,s.context,s.oldValue,s.newValue,s.value,s.node,s.data,s.colDef,s.rowIndex,s.api,s.columnApi,s.getValue,s.column,s.columnGroup)}catch(p){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",s),console.log("Exception = "+p),null}},i.prototype.createExpressionFunction=function(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];var s=this.createFunctionBody(e),l=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",s);return this.expressionToFunctionCache[e]=l,l},i.prototype.createFunctionBody=function(e){return e.indexOf("return")>=0?e:"return "+e+";"},Og([Pg(0,Li("loggerFactory"))],i.prototype,"setBeans",null),Og([ht("expressionService")],i)}(Ye),AM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Lg=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},nw=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.templateCache={},e.waitingCallbacks={},e}return AM(i,d),i.prototype.getTemplate=function(e,s){var l=this.templateCache[e];if(l)return l;var c=this.waitingCallbacks[e],p=this;if(!c){this.waitingCallbacks[e]=c=[];var m=new XMLHttpRequest;m.onload=function(){p.handleHttpResult(this,e)},m.open("GET",e),m.send()}return s&&c.push(s),null},i.prototype.handleHttpResult=function(e,s){if(200===e.status&&null!==e.response){this.templateCache[s]=e.response||e.responseText;for(var l=this.waitingCallbacks[s],c=0;c<l.length;c++)(0,l[c])();if(this.$scope){var m=this;window.setTimeout(function(){m.$scope.$apply()},0)}}else console.warn("Unable to get template error "+e.status+" - "+s)},Lg([B("$scope")],i.prototype,"$scope",void 0),Lg([ht("templateService")],i)}(Ye),rw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ca=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Hi=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}var e;return rw(i,d),e=i,i.addKeyboardModeEvents=function(s,l){var c=e.instancesMonitored.get(s);c&&c.length>0?-1===c.indexOf(l)&&c.push(l):(e.instancesMonitored.set(s,[l]),s.addEventListener("keydown",e.toggleKeyboardMode),s.addEventListener("mousedown",e.toggleKeyboardMode))},i.removeKeyboardModeEvents=function(s,l){var c=e.instancesMonitored.get(s),p=[];c&&c.length&&(p=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],p=0,m=c.length;p<m;p++,l++)s[l]=c[p];return s}(c).filter(function(m){return m!==l}),e.instancesMonitored.set(s,p)),0===p.length&&(s.removeEventListener("keydown",e.toggleKeyboardMode),s.removeEventListener("mousedown",e.toggleKeyboardMode))},i.toggleKeyboardMode=function(s){var l=e.keyboardModeActive,c="keydown"===s.type;if(!(c&&(s.ctrlKey||s.metaKey||s.altKey)||l&&c||!l&&!c)){e.keyboardModeActive=c;var p=s.target.ownerDocument;if(p){var m=e.instancesMonitored.get(p);m&&m.forEach(function(w){w.dispatchEvent({type:c?$.EVENT_KEYBOARD_FOCUS:$.EVENT_MOUSE_FOCUS})})}}},i.prototype.init=function(){var s=this,l=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_MODE_CHANGED,l),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_GROUP_OPENED,l),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,l),this.ctrlsService.whenReady(function(c){s.gridCtrl=c.gridCtrl;var p=s.gridOptionsWrapper.getDocument();e.addKeyboardModeEvents(p,s.gridCtrl),s.addDestroyFunc(function(){return s.unregisterGridCompController(s.gridCtrl)})})},i.prototype.unregisterGridCompController=function(s){var l=this.gridOptionsWrapper.getDocument();e.removeKeyboardModeEvents(l,s)},i.prototype.onColumnEverythingChanged=function(){if(this.focusedCellPosition){var s=this.focusedCellPosition.column,l=this.columnModel.getGridColumn(s.getId());s!==l&&this.clearFocusedCell()}},i.prototype.isKeyboardMode=function(){return e.keyboardModeActive},i.prototype.getFocusCellToUseAfterRefresh=function(){return this.gridOptionsWrapper.isSuppressFocusAfterRefresh()||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(document.activeElement,eu.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition},i.prototype.getFocusHeaderToUseAfterRefresh=function(){return this.gridOptionsWrapper.isSuppressFocusAfterRefresh()||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(document.activeElement,Cd.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition},i.prototype.isDomDataMissingInHierarchy=function(s,l){for(var c=s;c;){if(this.gridOptionsWrapper.getDomData(c,l))return!1;c=c.parentNode}return!0},i.prototype.clearFocusedCell=function(){this.focusedCellPosition=null,this.onCellFocused(!1)},i.prototype.getFocusedCell=function(){return this.focusedCellPosition},i.prototype.setFocusedCell=function(s,l,c,p){void 0===p&&(p=!1);var m=this.columnModel.getGridColumn(l);m?(this.focusedCellPosition=m?{rowIndex:s,rowPinned:ze(c),column:m}:null,this.onCellFocused(p)):this.focusedCellPosition=null},i.prototype.isCellFocused=function(s){return null!=this.focusedCellPosition&&this.focusedCellPosition.column===s.column&&this.isRowFocused(s.rowIndex,s.rowPinned)},i.prototype.isRowNodeFocused=function(s){return this.isRowFocused(s.rowIndex,s.rowPinned)},i.prototype.isHeaderWrapperFocused=function(s){if(null==this.focusedHeaderPosition)return!1;var l=s.getColumnGroupChild(),c=s.getRowIndex(),p=s.getPinned(),m=this.focusedHeaderPosition,w=m.column;return l===w&&c===m.headerRowIndex&&p==w.getPinned()},i.prototype.clearFocusedHeader=function(){this.focusedHeaderPosition=null},i.prototype.getFocusedHeader=function(){return this.focusedHeaderPosition},i.prototype.setFocusedHeader=function(s,l){this.focusedHeaderPosition={headerRowIndex:s,column:l}},i.prototype.focusHeaderPosition=function(s){var l=s.direction,c=s.fromTab,m=s.event,w=s.headerPosition;if(s.allowUserOverride){var U,x=this.gridOptionsWrapper,A=this.getFocusedHeader(),I=this.headerNavigationService.getHeaderRowCount();c?(U=x.getTabToNextHeaderFunc())&&(w=U({backwards:"Before"===l,previousHeaderPosition:A,nextHeaderPosition:w,headerRowCount:I,api:x.getApi(),columnApi:x.getColumnApi()})):(U=x.getNavigateToNextHeaderFunc())&&m&&(w=U({key:m.key,previousHeaderPosition:A,nextHeaderPosition:w,headerRowCount:I,event:m,api:x.getApi(),columnApi:x.getColumnApi()}))}return!!w&&(-1===w.headerRowIndex?this.focusGridView(w.column):(this.headerNavigationService.scrollToColumn(w.column,l),this.ctrlsService.getHeaderRowContainerCtrl(w.column.getPinned()).focusHeader(w.headerRowIndex,w.column,m)))},i.prototype.isAnyCellFocused=function(){return!!this.focusedCellPosition},i.prototype.isRowFocused=function(s,l){return null!=this.focusedCellPosition&&this.focusedCellPosition.rowIndex===s&&this.focusedCellPosition.rowPinned===ze(l)},i.prototype.findFocusableElements=function(s,l,c){void 0===c&&(c=!1);var m=ce.FOCUSABLE_EXCLUDE;l&&(m+=", "+l),c&&(m+=', [tabindex="-1"]');var Y,w=Array.prototype.slice.apply(s.querySelectorAll(ce.FOCUSABLE_SELECTOR)),x=Array.prototype.slice.apply(s.querySelectorAll(m));return x.length?(Y=x,w.filter(function(Q){return-1===Y.indexOf(Q)})):w},i.prototype.focusInto=function(s,l,c){void 0===l&&(l=!1),void 0===c&&(c=!1);var p=this.findFocusableElements(s,null,c),m=l?Vn(p):p[0];return!!m&&(m.focus(),!0)},i.prototype.findNextFocusableElement=function(s,l,c){var p=this.findFocusableElements(s,l?':not([tabindex="-1"])':null),w=(l?nt(p,function(x){return x.contains(document.activeElement)}):p.indexOf(document.activeElement))+(c?-1:1);return w<0||w>=p.length?null:p[w]},i.prototype.isFocusUnderManagedComponent=function(s){var l=s.querySelectorAll("."+zo.FOCUS_MANAGED_CLASS);if(!l.length)return!1;for(var c=0;c<l.length;c++)if(l[c].contains(document.activeElement))return!0;return!1},i.prototype.findTabbableParent=function(s,l){void 0===l&&(l=5);for(var c=0;s&&null===Hf(s)&&++c<=l;)s=s.parentElement;return null===Hf(s)?null:s},i.prototype.onCellFocused=function(s){var l={type:$.EVENT_CELL_FOCUSED,forceBrowserFocus:s,rowIndex:null,column:null,floating:null,api:this.gridApi,columnApi:this.columnApi,rowPinned:null,isFullWidthCell:!1};if(this.focusedCellPosition){var c=l.rowIndex=this.focusedCellPosition.rowIndex,p=l.rowPinned=this.focusedCellPosition.rowPinned;l.column=this.focusedCellPosition.column;var m=this.rowRenderer.getRowByPosition({rowIndex:c,rowPinned:p});m&&(l.isFullWidthCell=m.isFullWidth())}this.eventService.dispatchEvent(l)},i.prototype.focusGridView=function(s,l){var c=l?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!c)return!1;var p=c.rowIndex,m=c.rowPinned,w=this.getFocusedHeader();return!s&&w&&(s=w.column),!(null==p||!s)&&(this.navigationService.ensureCellVisible({rowIndex:p,column:s,rowPinned:m}),this.setFocusedCell(p,s,ze(m),!0),this.rangeService&&this.rangeService.setRangeToCell({rowIndex:p,rowPinned:m,column:s}),!0)},i.prototype.focusNextGridCoreContainer=function(s){return!!this.gridCtrl.focusNextInnerContainer(s)||(s||this.gridCtrl.forceFocusOutOfContainer(),!1)},i.AG_KEYBOARD_FOCUS="ag-keyboard-focus",i.keyboardModeActive=!1,i.instancesMonitored=new Map,ca([B("columnModel")],i.prototype,"columnModel",void 0),ca([B("headerNavigationService")],i.prototype,"headerNavigationService",void 0),ca([B("columnApi")],i.prototype,"columnApi",void 0),ca([B("gridApi")],i.prototype,"gridApi",void 0),ca([B("rowRenderer")],i.prototype,"rowRenderer",void 0),ca([B("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),ca([Ln("rangeService")],i.prototype,"rangeService",void 0),ca([B("navigationService")],i.prototype,"navigationService",void 0),ca([B("ctrlsService")],i.prototype,"ctrlsService",void 0),ca([Qe],i.prototype,"init",null),e=ca([ht("focusService")],i)}(Ye),Rx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ec=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ws=function(){return function(d){d[d.vertical=0]="vertical",d[d.horizontal=1]="horizontal"}(ws||(ws={})),ws}(),Ax=0,iw=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.popupList=[],e}return Rx(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(s){e.gridCtrl=s.gridCtrl,e.addManagedListener(e.gridCtrl,$.EVENT_KEYBOARD_FOCUS,function(){Vt(e.popupList,function(l){return Tt(l.element,Hi.AG_KEYBOARD_FOCUS)})}),e.addManagedListener(e.gridCtrl,$.EVENT_MOUSE_FOCUS,function(){Vt(e.popupList,function(l){return gi(l.element,Hi.AG_KEYBOARD_FOCUS)})})})},i.prototype.getPopupParent=function(){return this.gridOptionsWrapper.getPopupParent()||this.gridCtrl.getGui()},i.prototype.positionPopupForMenu=function(e){var s=e.eventSource.getBoundingClientRect(),l=this.getParentRect(),c=this.keepXYWithinBounds(e.ePopup,s.top-l.top,ws.vertical),p=e.ePopup.clientWidth>0?e.ePopup.clientWidth:200;e.ePopup.style.minWidth=p+"px";var x,w=l.right-l.left-p;function A(){return s.right-l.left-2}function I(){return s.left-l.left-p}this.gridOptionsWrapper.isEnableRtl()?((x=I())<0&&(x=A()),x>w&&(x=0)):((x=A())>w&&(x=I()),x<0&&(x=0)),e.ePopup.style.left=x+"px",e.ePopup.style.top=c+"px"},i.prototype.positionPopupUnderMouseEvent=function(e){var s=e.ePopup,l=e.nudgeX,c=e.nudgeY,p=this.calculatePointerAlign(e.mouseEvent);this.positionPopup({ePopup:s,x:p.x,y:p.y,nudgeX:l,nudgeY:c,keepWithinBounds:!0}),this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)},i.prototype.calculatePointerAlign=function(e){var s=this.getParentRect();return{x:e.clientX-s.left,y:e.clientY-s.top}},i.prototype.positionPopupUnderComponent=function(e){var s=e.eventSource.getBoundingClientRect(),l=e.alignSide||"left",c=this.getParentRect(),p=s.left-c.left;"right"===l&&(p-=e.ePopup.offsetWidth-s.width),this.positionPopup({ePopup:e.ePopup,nudgeX:e.nudgeX,nudgeY:e.nudgeY,x:p,y:s.top-c.top+s.height,keepWithinBounds:e.keepWithinBounds}),this.callPostProcessPopup(e.type,e.ePopup,e.eventSource,null,e.column,e.rowNode)},i.prototype.positionPopupOverComponent=function(e){var s=e.eventSource.getBoundingClientRect(),l=this.getParentRect();this.positionPopup({ePopup:e.ePopup,nudgeX:e.nudgeX,nudgeY:e.nudgeY,x:s.left-l.left,y:s.top-l.top,keepWithinBounds:e.keepWithinBounds}),this.callPostProcessPopup(e.type,e.ePopup,e.eventSource,null,e.column,e.rowNode)},i.prototype.callPostProcessPopup=function(e,s,l,c,p,m){var w=this.gridOptionsWrapper.getPostProcessPopupFunc();w&&w({column:p,rowNode:m,ePopup:s,type:e,eventSource:l,mouseEvent:c})},i.prototype.positionPopup=function(e){var s=e.ePopup,c=e.nudgeX,p=e.nudgeY,m=e.x,w=e.y;c&&(m+=c),p&&(w+=p),e.keepWithinBounds&&(m=this.keepXYWithinBounds(s,m,ws.horizontal),w=this.keepXYWithinBounds(s,w,ws.vertical)),s.style.left=m+"px",s.style.top=w+"px"},i.prototype.getActivePopups=function(){return this.popupList.map(function(e){return e.element})},i.prototype.getPopupList=function(){return this.popupList},i.prototype.getParentRect=function(){var e=this.gridOptionsWrapper.getDocument(),s=this.getPopupParent();s===e.body&&(s=e.documentElement);var l=getComputedStyle(s),c=s.getBoundingClientRect();return{top:c.top+parseFloat(l.borderTopWidth)||0,left:c.left+parseFloat(l.borderLeftWidth)||0,right:c.right+parseFloat(l.borderRightWidth)||0,bottom:c.bottom+parseFloat(l.borderBottomWidth)||0}},i.prototype.keepXYWithinBounds=function(e,s,l){var c=l===ws.vertical,p=c?"clientHeight":"clientWidth",m=c?"top":"left",w=c?"offsetHeight":"offsetWidth",x=c?"scrollTop":"scrollLeft",A=this.gridOptionsWrapper.getDocument(),I=A.documentElement,U=this.getPopupParent(),Y=U.getBoundingClientRect(),Q=A.documentElement.getBoundingClientRect(),oe=U===A.body,xe=e[w],Ve=oe?(c?Iu:Wf)(I)+I[x]:U[p];oe&&(Ve-=Math.abs(Q[m]-Y[m]));var Me=Ve-xe;return Math.min(Math.max(s,0),Math.abs(Me))},i.prototype.keepPopupPositionedRelativeTo=function(e){var s=this,l=this.getPopupParent(),c=l.getBoundingClientRect(),p=e.element.getBoundingClientRect(),m=c.top-p.top,w=c.left-p.left,x=m,A=w,I=e.ePopup.style.top,U=parseInt(I.substring(0,I.length-1),10),Y=e.ePopup.style.left,Q=parseInt(Y.substring(0,Y.length-1),10);return new Xr(function(oe){s.getFrameworkOverrides().setInterval(function(){var xe=l.getBoundingClientRect(),He=e.element.getBoundingClientRect();if(0==He.top&&0==He.left&&0==He.height&&0==He.width)e.hidePopup();else{var Me=xe.top-He.top;if(Me!=x){var Ze=s.keepXYWithinBounds(e.ePopup,U+m-Me,ws.vertical);e.ePopup.style.top=Ze+"px"}x=Me;var Fe=xe.left-He.left;if(Fe!=A){var rn=s.keepXYWithinBounds(e.ePopup,Q+w-Fe,ws.horizontal);e.ePopup.style.left=rn+"px"}A=Fe}},200).then(function(xe){oe(function(){null!=xe&&window.clearInterval(xe)})})})},i.prototype.addPopup=function(e){var s=this,l=e.modal,c=e.eChild,p=e.closeOnEsc,m=e.closedCallback,w=e.click,x=e.alwaysOnTop,A=e.afterGuiAttached,I=e.positionCallback,U=e.anchorToElement,Y=e.ariaLabel,Q=this.gridOptionsWrapper.getDocument(),oe=new Xr(function(Jn){return Jn(function(){})});if(!Q)return console.warn("ag-grid: could not find the document, document is empty"),{hideFunc:function(){},stopAnchoringPromise:oe};var xe=nt(this.popupList,function(Jn){return Jn.element===c});if(-1!==xe){var He=this.popupList[xe];return{hideFunc:He.hideFunc,stopAnchoringPromise:He.stopAnchoringPromise}}var Ve=this.getPopupParent();null==c.style.top&&(c.style.top="0px"),null==c.style.left&&(c.style.left="0px");var Me=document.createElement("div"),Ze=this.environment.getTheme().theme;Ze&&Tt(Me,Ze),Tt(Me,"ag-popup"),Tt(c,this.gridOptionsWrapper.isEnableRtl()?"ag-rtl":"ag-ltr"),Tt(c,"ag-popup-child"),ji(c,"dialog"),Ia(c,Y),this.focusService.isKeyboardMode()&&Tt(c,Hi.AG_KEYBOARD_FOCUS),Me.appendChild(c),Ve.appendChild(Me),x?this.setAlwaysOnTop(Me,!0):this.bringPopupToFront(Me);var Fe=!1,rn=function(rr){Me.contains(document.activeElement)&&(rr.which||rr.keyCode)===$e.ESCAPE&&qn({keyboardEvent:rr})},kt=function(rr){return qn({mouseEvent:rr})},vn=function(rr){return qn({touchEvent:rr})},qn=function(rr){void 0===rr&&(rr={});var ur=rr.mouseEvent,Zi=rr.touchEvent,ea=rr.keyboardEvent;s.isEventFromCurrentPopup({mouseEvent:ur,touchEvent:Zi},c)||s.isEventSameChainAsOriginalEvent({originalMouseEvent:w,mouseEvent:ur,touchEvent:Zi})||Fe||(Fe=!0,Ve.removeChild(Me),Q.removeEventListener("keydown",rn),Q.removeEventListener("mousedown",kt),Q.removeEventListener("touchstart",vn),Q.removeEventListener("contextmenu",kt),s.eventService.removeEventListener($.EVENT_DRAG_STARTED,kt),m&&m(ur||Zi||ea),s.popupList=s.popupList.filter(function(Hr){return Hr.element!==c}),oe&&oe.then(function(Hr){return Hr&&Hr()}))};return A&&A({hidePopup:qn}),window.setTimeout(function(){p&&Q.addEventListener("keydown",rn),l&&(Q.addEventListener("mousedown",kt),s.eventService.addEventListener($.EVENT_DRAG_STARTED,kt),Q.addEventListener("touchstart",vn),Q.addEventListener("contextmenu",kt))},0),I&&I(),U&&(oe=this.keepPopupPositionedRelativeTo({element:U,ePopup:c,hidePopup:qn})),this.popupList.push({element:c,wrapper:Me,hideFunc:qn,stopAnchoringPromise:oe,instanceId:Ax++,isAnchored:!!U}),{hideFunc:qn,stopAnchoringPromise:oe}},i.prototype.hasAnchoredPopup=function(){return Yt(this.popupList,function(e){return e.isAnchored})},i.prototype.isEventFromCurrentPopup=function(e,s){var p=e.mouseEvent||e.touchEvent;if(!p)return!1;var m=nt(this.popupList,function(A){return A.element===s});if(-1===m)return!1;for(var w=m;w<this.popupList.length;w++)if(Lf(this.popupList[w].element,p))return!0;return this.isElementWithinCustomPopup(p.target)},i.prototype.isElementWithinCustomPopup=function(e){for(;e&&e!==document.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1},i.prototype.isEventSameChainAsOriginalEvent=function(e){var s=e.originalMouseEvent,l=e.mouseEvent,c=e.touchEvent,p=null;if(l?p=l:c&&(p=c.touches[0]),p&&s){var w=l?l.screenY:0,x=Math.abs(s.screenX-(l?l.screenX:0))<5,A=Math.abs(s.screenY-w)<5;if(x&&A)return!0}return!1},i.prototype.getWrapper=function(e){for(;!fs(e,"ag-popup")&&e.parentElement;)e=e.parentElement;return fs(e,"ag-popup")?e:null},i.prototype.setAlwaysOnTop=function(e,s){var l=this.getWrapper(e);!l||(Lt(l,"ag-always-on-top",!!s),s&&this.bringPopupToFront(l))},i.prototype.bringPopupToFront=function(e){var s=this.getPopupParent(),l=Array.prototype.slice.call(s.querySelectorAll(".ag-popup")),c=l.length,p=Array.prototype.slice.call(s.querySelectorAll(".ag-popup.ag-always-on-top")),m=p.length,w=this.getWrapper(e);if(w&&!(c<=1)&&s.contains(e)){var x=l.indexOf(w);m?fs(w,"ag-always-on-top")?x!==c-1&&Vn(p).insertAdjacentElement("afterend",w):x!==c-m-1&&p[0].insertAdjacentElement("beforebegin",w):x!==c-1&&Vn(l).insertAdjacentElement("afterend",w);var I={type:"popupToFront",api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),eWrapper:w};this.eventService.dispatchEvent(I)}},ec([B("environment")],i.prototype,"environment",void 0),ec([B("focusService")],i.prototype,"focusService",void 0),ec([B("ctrlsService")],i.prototype,"ctrlsService",void 0),ec([Qe],i.prototype,"postConstruct",null),ec([ht("popupService")],i)}(Ye),Tx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Fg=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Dx=function(d,i){return function(e,s){i(e,s,d)}},ow=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Tx(i,d),i.prototype.setBeans=function(e){this.logging=e.isDebug()},i.prototype.create=function(e){return new Lp(e,this.isLogging.bind(this))},i.prototype.isLogging=function(){return this.logging},Fg([Dx(0,Li("gridOptionsWrapper"))],i.prototype,"setBeans",null),Fg([ht("loggerFactory")],i)}(Ye),Lp=function(){function d(i,e){this.name=i,this.isLoggingFunc=e}return d.prototype.isLogging=function(){return this.isLoggingFunc()},d.prototype.log=function(i){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+i)},d}(),nn=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),be=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ng=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return nn(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(s){e.centerRowContainerCon=s.centerRowContainerCtrl})},i.prototype.getPreferredWidthForColumn=function(e,s){var l=this.getHeaderCellForColumn(e);if(!l)return-1;var c=document.createElement("span");c.style.position="fixed";var p=this.centerRowContainerCon.getContainerElement();p.appendChild(c),this.putRowCellsIntoDummyContainer(e,c),s||this.cloneItemIntoDummy(l,c);var m=c.offsetWidth;return p.removeChild(c),m+this.gridOptionsWrapper.getAutoSizePadding()},i.prototype.getHeaderCellForColumn=function(e){var s=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(l){var c=l.getHtmlElementForColumnHeader(e);null!=c&&(s=c)}),s},i.prototype.putRowCellsIntoDummyContainer=function(e,s){var l=this;this.rowRenderer.getAllCellsForColumn(e).forEach(function(p){return l.cloneItemIntoDummy(p,s)})},i.prototype.cloneItemIntoDummy=function(e,s){var l=e.cloneNode(!0);l.style.width="",l.style.position="static",l.style.left="";var c=document.createElement("div");fs(l,"ag-header-cell")?(Tt(c,"ag-header"),Tt(c,"ag-header-row"),c.style.position="static"):Tt(c,"ag-row");for(var p=e.parentElement;p;){if(p.classList.contains("ag-header-row")||p.classList.contains("ag-row")){for(var m=0;m<p.classList.length;m++){var w=p.classList[m];"ag-row-position-absolute"!=w&&Tt(c,w)}break}p=p.parentElement}c.style.display="table-row",c.appendChild(l),s.appendChild(c)},be([B("rowRenderer")],i.prototype,"rowRenderer",void 0),be([B("ctrlsService")],i.prototype,"ctrlsService",void 0),be([B("rowCssClassCalculator")],i.prototype,"rowCssClassCalculator",void 0),be([Qe],i.prototype,"postConstruct",null),be([ht("autoWidthCalculator")],i)}(Ye),aw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),tc=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},$o=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return aw(i,d),i.prototype.addResizeBar=function(e){var s=this,l={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e)};return this.dragService.addDragSource(l,!0),function(){return s.dragService.removeDragSource(l)}},i.prototype.onDragStart=function(e,s){this.dragStartX=s.clientX,this.setResizeIcons();var l=s instanceof MouseEvent&&!0===s.shiftKey;e.onResizeStart(l)},i.prototype.setResizeIcons=function(){var e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!0),e.disableUserSelect(!0)},i.prototype.onDragStop=function(e,s){e.onResizeEnd(this.resizeAmount),this.resetIcons()},i.prototype.resetIcons=function(){var e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!1),e.disableUserSelect(!1)},i.prototype.onDragging=function(e,s){this.resizeAmount=s.clientX-this.dragStartX,e.onResizing(this.resizeAmount)},tc([B("dragService")],i.prototype,"dragService",void 0),tc([B("ctrlsService")],i.prototype,"ctrlsService",void 0),tc([ht("horizontalResizeService")],i)}(Ye),sw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ru=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Fp=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return sw(i,d),i.prototype.postConstruct=function(){this.ctrlsService.registerGridCtrl(this)},i.prototype.setComp=function(e,s,l){var c=this;this.view=e,this.eGridHostDiv=s,this.eGui=l,this.mouseEventService.stampTopLevelGridCompWithGridInstance(s),this.createManagedBean(new Yu(this.view)),this.addRtlSupport(),this.addManagedListener(this,$.EVENT_KEYBOARD_FOCUS,function(){c.view.addOrRemoveKeyboardFocusClass(!0)}),this.addManagedListener(this,$.EVENT_MOUSE_FOCUS,function(){c.view.addOrRemoveKeyboardFocusClass(!1)});var p=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(function(){return p()})},i.prototype.showDropZones=function(){return jt.isRegistered(K.GXE.RowGroupingModule)},i.prototype.showSideBar=function(){return jt.isRegistered(K.GXE.SideBarModule)},i.prototype.showStatusBar=function(){return jt.isRegistered(K.GXE.StatusBarModule)},i.prototype.showWatermark=function(){return jt.isRegistered(K.GXE.EnterpriseCoreModule)},i.prototype.onGridSizeChanged=function(){this.eventService.dispatchEvent({type:$.EVENT_GRID_SIZE_CHANGED,api:this.gridApi,columnApi:this.columnApi,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})},i.prototype.addRtlSupport=function(){var e=this.gridOptionsWrapper.isEnableRtl()?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)},i.prototype.destroyGridUi=function(){this.view.destroyGridUi()},i.prototype.getGui=function(){return this.eGui},i.prototype.setResizeCursor=function(e){this.view.setCursor(e?"ew-resize":null)},i.prototype.disableUserSelect=function(e){this.view.setUserSelect(e?"none":null)},i.prototype.focusNextInnerContainer=function(e){var s=this.view.getFocusableContainers(),c=nt(s,function(p){return p.contains(document.activeElement)})+(e?-1:1);return!(c<0||c>=s.length)&&(0===c?this.focusGridHeader():this.focusService.focusInto(s[c]))},i.prototype.focusInnerElement=function(e){var s=this.view.getFocusableContainers();if(e){if(s.length>1)return this.focusService.focusInto(Vn(s),!0);var l=Vn(this.columnModel.getAllDisplayedColumns());if(this.focusService.focusGridView(l,!0))return!0}return this.focusGridHeader()},i.prototype.focusGridHeader=function(){var e=this.columnModel.getAllDisplayedColumns()[0];return!!e&&(e.getParent()&&(e=this.columnModel.getColumnGroupAtLevel(e,0)),this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:e}}),!0)},i.prototype.forceFocusOutOfContainer=function(e){void 0===e&&(e=!1),this.view.forceFocusOutOfContainer(e)},ru([B("columnApi")],i.prototype,"columnApi",void 0),ru([B("gridApi")],i.prototype,"gridApi",void 0),ru([B("focusService")],i.prototype,"focusService",void 0),ru([B("resizeObserverService")],i.prototype,"resizeObserverService",void 0),ru([B("columnModel")],i.prototype,"columnModel",void 0),ru([B("ctrlsService")],i.prototype,"ctrlsService",void 0),ru([B("mouseEventService")],i.prototype,"mouseEventService",void 0),ru([Qe],i.prototype,"postConstruct",null),i}(Ye),Ss=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Np=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},kg=function(d){function i(e){var s=d.call(this)||this;s.skipTabGuardFocus=!1;var c=e.eTopGuard,p=e.eBottomGuard,m=e.focusInnerElement,w=e.onFocusIn,x=e.onFocusOut,A=e.shouldStopEventPropagation,I=e.onTabKeyDown,U=e.handleKeyDown,Y=e.eFocusableElement;return s.comp=e.comp,s.eTopGuard=c,s.eBottomGuard=p,s.providedFocusInnerElement=m,s.eFocusableElement=Y,s.providedFocusIn=w,s.providedFocusOut=x,s.providedShouldStopEventPropagation=A,s.providedOnTabKeyDown=I,s.providedHandleKeyDown=U,s}return Ss(i,d),i.prototype.postConstruct=function(){var e=this;this.createManagedBean(new zo(this.eFocusableElement,{shouldStopEventPropagation:function(){return e.shouldStopEventPropagation()},onTabKeyDown:function(l){return e.onTabKeyDown(l)},handleKeyDown:function(l){return e.handleKeyDown(l)},onFocusIn:function(l){return e.onFocusIn(l)},onFocusOut:function(l){return e.onFocusOut(l)}})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(function(s){return e.addManagedListener(s,"focus",e.onFocus.bind(e))})},i.prototype.handleKeyDown=function(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)},i.prototype.tabGuardsAreActive=function(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")},i.prototype.shouldStopEventPropagation=function(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()},i.prototype.activateTabGuards=function(){this.comp.setTabIndex(this.getGridTabIndex())},i.prototype.deactivateTabGuards=function(){this.comp.setTabIndex()},i.prototype.onFocus=function(e){if(this.skipTabGuardFocus)this.skipTabGuardFocus=!1;else{var s=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(s):this.focusInnerElement(s)}},i.prototype.onFocusIn=function(e){this.providedFocusIn&&this.providedFocusIn(e)||this.deactivateTabGuards()},i.prototype.onFocusOut=function(e){this.providedFocusOut&&this.providedFocusOut(e)||this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards()},i.prototype.onTabKeyDown=function(e){var s=this;if(this.providedOnTabKeyDown)this.providedOnTabKeyDown(e);else if(!e.defaultPrevented){var l=this.tabGuardsAreActive();l&&this.deactivateTabGuards();var c=this.getNextFocusableElement(e.shiftKey);l&&setTimeout(function(){return s.activateTabGuards()},0),c&&(c.focus(),e.preventDefault())}},i.prototype.getGridTabIndex=function(){return this.gridOptionsWrapper.getGridTabIndex()},i.prototype.focusInnerElement=function(e){void 0===e&&(e=!1);var s=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(s.splice(0,1),s.splice(s.length-1,1)),s.length&&s[e?s.length-1:0].focus()},i.prototype.getNextFocusableElement=function(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)},i.prototype.forceFocusOutOfContainer=function(e){void 0===e&&(e=!1);var s=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,s.focus()},Np([B("focusService")],i.prototype,"focusService",void 0),Np([Qe],i.prototype,"postConstruct",null),i}(Ye),Gg=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),uw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Gg(i,d),i.prototype.initialiseTabGuard=function(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();var s=[this.eTopGuard,this.eBottomGuard],l={setTabIndex:function(p){s.forEach(function(m){return null!=p?m.setAttribute("tabIndex",p):m.removeAttribute("tabIndex")})}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new kg({comp:l,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation}))},i.prototype.createTabGuard=function(e){var s=document.createElement("div");return s.classList.add("ag-tab-guard"),s.classList.add("ag-tab-guard-"+e),ji(s,"presentation"),s},i.prototype.addTabGuards=function(e,s){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",s)},i.prototype.removeAllChildrenExceptTabGuards=function(){var e=[this.eTopGuard,this.eBottomGuard];ao(this.getFocusableElement()),this.addTabGuards.apply(this,e)},i.prototype.forceFocusOutOfContainer=function(e){void 0===e&&(e=!1),this.tabGuardCtrl.forceFocusOutOfContainer(e)},i.prototype.appendChild=function(e,s){Oa(e)||(e=e.getGui());var l=this.eBottomGuard;l?l.insertAdjacentElement("beforebegin",e):d.prototype.appendChild.call(this,e,s)},i}(dn),lw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),kp=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Rd=function(d){function i(e){var s=d.call(this,void 0)||this;return s.eGridDiv=e,s}return lw(i,d),i.prototype.postConstruct=function(){var e=this;this.logger=this.loggerFactory.create("GridComp");var s={destroyGridUi:function(){return e.destroyBean(e)},setRtlClass:function(p){return Tt(e.getGui(),p)},addOrRemoveKeyboardFocusClass:function(p){return e.addOrRemoveCssClass(Hi.AG_KEYBOARD_FOCUS,p)},forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:function(p){e.getGui().style.userSelect=null!=p?p:"",e.getGui().style.webkitUserSelect=null!=p?p:""},setCursor:function(p){e.getGui().style.cursor=null!=p?p:""}};this.ctrl=this.createManagedBean(new Fp);var l=this.createTemplate();this.setTemplate(l),this.ctrl.setComp(s,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:function(){},focusInnerElement:function(p){return e.ctrl.focusInnerElement(p)}})},i.prototype.insertGridIntoDom=function(){var e=this,s=this.getGui();this.eGridDiv.appendChild(s),this.addDestroyFunc(function(){e.eGridDiv.removeChild(s),e.logger.log("Grid removed from DOM")})},i.prototype.updateLayoutClasses=function(e,s){Lt(this.eRootWrapperBody,K.LBn.AUTO_HEIGHT,s.autoHeight),Lt(this.eRootWrapperBody,K.LBn.NORMAL,s.normal),Lt(this.eRootWrapperBody,K.LBn.PRINT,s.print),this.addOrRemoveCssClass(K.LBn.AUTO_HEIGHT,s.autoHeight),this.addOrRemoveCssClass(K.LBn.NORMAL,s.normal),this.addOrRemoveCssClass(K.LBn.PRINT,s.print)},i.prototype.createTemplate=function(){return'<div class="ag-root-wrapper">\n                '+(this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"")+'\n                <div class="ag-root-wrapper-body" ref="rootWrapperBody">\n                    <ag-grid-body ref="gridBody"></ag-grid-body>\n                    '+(this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"")+"\n                </div>\n                "+(this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"")+"\n                <ag-pagination></ag-pagination>\n                "+(this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"")+"\n            </div>"},i.prototype.getFocusableElement=function(){return this.eRootWrapperBody},i.prototype.getFocusableContainers=function(){var e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter(function(s){return Al(s)})},kp([B("loggerFactory")],i.prototype,"loggerFactory",void 0),kp([Be("gridBody")],i.prototype,"gridBodyComp",void 0),kp([Be("sideBar")],i.prototype,"sideBarComp",void 0),kp([Be("rootWrapperBody")],i.prototype,"eRootWrapperBody",void 0),kp([Qe],i.prototype,"postConstruct",null),i}(uw),Gp=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),iu=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Bp=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.dragEndFunctions=[],e.dragSources=[],e}return Gp(i,d),i.prototype.init=function(){this.logger=this.loggerFactory.create("DragService")},i.prototype.removeAllListeners=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},i.prototype.removeListener=function(e){var s=e.dragSource.eElement;s.removeEventListener("mousedown",e.mouseDownListener),e.touchEnabled&&s.removeEventListener("touchstart",e.touchStartListener,{passive:!0})},i.prototype.removeDragSource=function(e){var s=Pi(this.dragSources,function(l){return l.dragSource===e});!s||(this.removeListener(s),ei(this.dragSources,s))},i.prototype.isDragging=function(){return this.dragging},i.prototype.addDragSource=function(e,s){var l=this;void 0===s&&(s=!1);var c=this.onMouseDown.bind(this,e);e.eElement.addEventListener("mousedown",c);var p=null,m=this.gridOptionsWrapper.isSuppressTouch();s&&!m&&e.eElement.addEventListener("touchstart",p=function(x){x.preventDefault(),l.onTouchStart(e,x)},{passive:!0}),this.dragSources.push({dragSource:e,mouseDownListener:c,touchStartListener:p,touchEnabled:s})},i.prototype.onTouchStart=function(e,s){var l=this;this.currentDragParams=e,this.dragging=!1;var c=s.touches[0];this.touchLastTime=c,this.touchStart=c;var m=function(U){return l.onTouchUp(U,e.eElement)},x=e.eElement,A=[{target:document,type:"touchmove",listener:function(U){U.cancelable&&U.preventDefault()},options:{passive:!1}},{target:x,type:"touchmove",listener:function(U){return l.onTouchMove(U,e.eElement)},options:{passive:!0}},{target:x,type:"touchend",listener:m,options:{passive:!0}},{target:x,type:"touchcancel",listener:m,options:{passive:!0}}];this.addTemporaryEvents(A),0===e.dragStartPixels&&this.onCommonMove(c,this.touchStart,e.eElement)},i.prototype.onMouseDown=function(e,s){var l=this,c=s;if(!(e.skipMouseEvent&&e.skipMouseEvent(s)||c._alreadyProcessedByDragService||(c._alreadyProcessedByDragService=!0,0!==s.button))){this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=s;var p=this.gridOptionsWrapper.getDocument();this.addTemporaryEvents([{target:p,type:"mousemove",listener:function(Y){return l.onMouseMove(Y,e.eElement)}},{target:p,type:"mouseup",listener:function(Y){return l.onMouseUp(Y,e.eElement)}},{target:p,type:"contextmenu",listener:function(Y){return Y.preventDefault()}}]),0===e.dragStartPixels&&this.onMouseMove(s,e.eElement)}},i.prototype.addTemporaryEvents=function(e){e.forEach(function(s){s.target.addEventListener(s.type,s.listener,s.options)}),this.dragEndFunctions.push(function(){e.forEach(function(s){s.target.removeEventListener(s.type,s.listener,s.options)})})},i.prototype.isEventNearStartEvent=function(e,s){var l=this.currentDragParams.dragStartPixels;return L_(e,s,Le(l)?l:4)},i.prototype.getFirstActiveTouch=function(e){for(var s=0;s<e.length;s++)if(e[s].identifier===this.touchStart.identifier)return e[s];return null},i.prototype.onCommonMove=function(e,s,l){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,s))return;this.dragging=!0,this.eventService.dispatchEvent({type:$.EVENT_DRAG_STARTED,api:this.gridApi,columnApi:this.columnApi,target:l}),this.currentDragParams.onDragStart(s),this.currentDragParams.onDragging(s)}this.currentDragParams.onDragging(e)},i.prototype.onTouchMove=function(e,s){var l=this.getFirstActiveTouch(e.touches);!l||this.onCommonMove(l,this.touchStart,s)},i.prototype.onMouseMove=function(e,s){this.onCommonMove(e,this.mouseStartEvent,s)},i.prototype.onTouchUp=function(e,s){var l=this.getFirstActiveTouch(e.changedTouches);l||(l=this.touchLastTime),this.onUpCommon(l,s)},i.prototype.onMouseUp=function(e,s){this.onUpCommon(e,s)},i.prototype.onUpCommon=function(e,s){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:$.EVENT_DRAG_STOPPED,api:this.gridApi,columnApi:this.columnApi,target:s})),this.mouseStartEvent=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(function(c){return c()}),this.dragEndFunctions.length=0},iu([B("loggerFactory")],i.prototype,"loggerFactory",void 0),iu([B("columnApi")],i.prototype,"columnApi",void 0),iu([B("gridApi")],i.prototype,"gridApi",void 0),iu([Qe],i.prototype,"init",null),iu([Ii],i.prototype,"removeAllListeners",null),iu([ht("dragService")],i)}(Ye),Bg=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Hg=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},cw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}var e;return Bg(i,d),e=i,i.prototype.progressSort=function(s,l,c){void 0===c&&(c="api");var p=this.getNextSortDirection(s);this.setSortForColumn(s,p,l,c)},i.prototype.setSortForColumn=function(s,l,c,p){void 0===p&&(p="api"),l!==ce.SORT_ASC&&l!==ce.SORT_DESC&&(l=null),s.setSort(l,p),c&&!this.gridOptionsWrapper.isSuppressMultiSort()||this.clearSortBarThisColumn(s,p),this.updateSortIndex(s),this.dispatchSortChangedEvents()},i.prototype.updateSortIndex=function(s){var l=this.getColumnsWithSortingOrdered(),c=0;l.forEach(function(m){m!==s&&(m.setSortIndex(c),c++)}),s.getSort()&&s.setSortIndex(c),this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(m){return null==m.getSort()}).forEach(function(m){return m.setSortIndex()})},i.prototype.onSortChanged=function(){this.dispatchSortChangedEvents()},i.prototype.isSortActive=function(){var l=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(c){return!!c.getSort()});return l&&l.length>0},i.prototype.dispatchSortChangedEvents=function(){this.eventService.dispatchEvent({type:$.EVENT_SORT_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.clearSortBarThisColumn=function(s,l){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(c){c!==s&&c.setSort(void 0,l)})},i.prototype.getNextSortDirection=function(s){var l;if(l=s.getColDef().sortingOrder?s.getColDef().sortingOrder:this.gridOptionsWrapper.getSortingOrder()?this.gridOptionsWrapper.getSortingOrder():e.DEFAULT_SORTING_ORDER,!Array.isArray(l)||l.length<=0)return console.warn("ag-grid: sortingOrder must be an array with at least one element, currently it's "+l),null;var w,c=l.indexOf(s.getSort());return e.DEFAULT_SORTING_ORDER.indexOf(w=c<0||c==l.length-1?l[0]:l[c+1])<0?(console.warn("ag-grid: invalid sort type "+w),null):w},i.prototype.getColumnsWithSortingOrdered=function(){var s=this.columnModel.getPrimaryAndSecondaryAndAutoColumns(),l=s.filter(function(p){return!!p.getSort()}),c={};return s.forEach(function(p,m){return c[p.getId()]=m}),l.sort(function(p,m){var w=p.getSortIndex(),x=m.getSortIndex();return null!=w&&null!=x?w-x:null==w&&null==x?c[p.getId()]>c[m.getId()]?1:-1:null==x?-1:1}),l},i.prototype.getSortModel=function(){return this.getColumnsWithSortingOrdered().map(function(s){return{sort:s.getSort(),colId:s.getId()}})},i.prototype.getSortOptions=function(){return this.getColumnsWithSortingOrdered().map(function(s){return{sort:s.getSort(),column:s}})},i.DEFAULT_SORTING_ORDER=[ce.SORT_ASC,ce.SORT_DESC,null],Hg([B("columnModel")],i.prototype,"columnModel",void 0),Hg([B("columnApi")],i.prototype,"columnApi",void 0),Hg([B("gridApi")],i.prototype,"gridApi",void 0),e=Hg([ht("sortController")],i)}(Ye),Mx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),dw=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},fw=function(d){function i(){var s=null!==d&&d.apply(this,arguments)||this;return s.gridInstanceId=e.gridInstanceSequence.next(),s}var e;return Mx(i,d),e=i,i.prototype.stampTopLevelGridCompWithGridInstance=function(s){s[e.GRID_DOM_KEY]=this.gridInstanceId},i.prototype.getRenderedCellForEvent=function(s){return If(this.gridOptionsWrapper,s,Xi.DOM_DATA_KEY_CELL_CTRL)},i.prototype.isEventFromThisGrid=function(s){return this.isElementInThisGrid(s.target)},i.prototype.isElementInThisGrid=function(s){for(var l=s;l;){var c=l[e.GRID_DOM_KEY];if(Le(c))return c===this.gridInstanceId;l=l.parentElement}return!1},i.prototype.getCellPositionForEvent=function(s){var l=this.getRenderedCellForEvent(s);return l?l.getCellPosition():null},i.prototype.getNormalisedPosition=function(s){var p,m,l=this.gridOptionsWrapper.getDomLayout()===ce.DOM_LAYOUT_NORMAL;if(null!=s.clientX||null!=s.clientY?(p=s.clientX,m=s.clientY):(p=s.x,m=s.y),l){var w=this.ctrlsService.getGridBodyCtrl(),x=w.getScrollFeature().getVScrollPosition();p+=w.getScrollFeature().getHScrollPosition().left,m+=x.top}return{x:p,y:m}},i.gridInstanceSequence=new ms,i.GRID_DOM_KEY="__ag_grid_instance",dw([B("ctrlsService")],i.prototype,"ctrlsService",void 0),e=dw([ht("mouseEventService")],i)}(Ye),pw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Hp=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},hw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return pw(i,d),i.prototype.getNextCellToFocus=function(e,s){for(var l=s,c=!1;!c;){switch(e){case $e.UP:l=this.getCellAbove(l);break;case $e.DOWN:l=this.getCellBelow(l);break;case $e.RIGHT:l=this.gridOptionsWrapper.isEnableRtl()?this.getCellToLeft(l):this.getCellToRight(l);break;case $e.LEFT:l=this.gridOptionsWrapper.isEnableRtl()?this.getCellToRight(l):this.getCellToLeft(l);break;default:l=null,console.warn("AG Grid: unknown key for navigation "+e)}c=!l||this.isCellGoodToFocusOn(l)}return l},i.prototype.isCellGoodToFocusOn=function(e){var l,s=e.column;switch(e.rowPinned){case ce.PINNED_TOP:l=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case ce.PINNED_BOTTOM:l=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:l=this.rowModel.getRow(e.rowIndex)}return!!l&&!s.isSuppressNavigable(l)},i.prototype.getCellToLeft=function(e){if(!e)return null;var s=this.columnModel.getDisplayedColBefore(e.column);return s?{rowIndex:e.rowIndex,column:s,rowPinned:e.rowPinned}:null},i.prototype.getCellToRight=function(e){if(!e)return null;var s=this.columnModel.getDisplayedColAfter(e.column);return s?{rowIndex:e.rowIndex,column:s,rowPinned:e.rowPinned}:null},i.prototype.getRowBelow=function(e){var s=e.rowIndex,l=e.rowPinned;if(this.isLastRowInContainer(e))switch(l){case ce.PINNED_BOTTOM:return null;case ce.PINNED_TOP:return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender(ce.PINNED_BOTTOM)?{rowIndex:0,rowPinned:ce.PINNED_BOTTOM}:null;default:return this.pinnedRowModel.isRowsToRender(ce.PINNED_BOTTOM)?{rowIndex:0,rowPinned:ce.PINNED_BOTTOM}:null}return{rowIndex:s+1,rowPinned:l}},i.prototype.getCellBelow=function(e){if(!e)return null;var s=this.getRowBelow(e);return s?{rowIndex:s.rowIndex,column:e.column,rowPinned:s.rowPinned}:null},i.prototype.isLastRowInContainer=function(e){var s=e.rowPinned,l=e.rowIndex;return s===ce.PINNED_TOP?this.pinnedRowModel.getPinnedTopRowData().length-1<=l:s===ce.PINNED_BOTTOM?this.pinnedRowModel.getPinnedBottomRowData().length-1<=l:this.paginationProxy.getPageLastRow()<=l},i.prototype.getRowAbove=function(e){var s=e.rowIndex,l=e.rowPinned;return(l?0===s:s===this.paginationProxy.getPageFirstRow())?l===ce.PINNED_TOP?null:l&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender(ce.PINNED_TOP)?this.getLastFloatingTopRow():null:{rowIndex:s-1,rowPinned:l}},i.prototype.getCellAbove=function(e){if(!e)return null;var s=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return s?{rowIndex:s.rowIndex,column:e.column,rowPinned:s.rowPinned}:null},i.prototype.getLastBodyCell=function(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}},i.prototype.getLastFloatingTopRow=function(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:ce.PINNED_TOP}},i.prototype.getNextTabbedCell=function(e,s){return s?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)},i.prototype.getNextTabbedCellForwards=function(e){var s=this.columnModel.getAllDisplayedColumns(),l=e.rowIndex,c=e.rowPinned,p=this.columnModel.getDisplayedColAfter(e.column);if(!p){p=s[0];var m=this.getRowBelow(e);if(ye(m)||!m.rowPinned&&!this.paginationProxy.isRowInPage(m))return null;l=m?m.rowIndex:null,c=m?m.rowPinned:null}return{rowIndex:l,column:p,rowPinned:c}},i.prototype.getNextTabbedCellBackwards=function(e){var s=this.columnModel.getAllDisplayedColumns(),l=e.rowIndex,c=e.rowPinned,p=this.columnModel.getDisplayedColBefore(e.column);if(!p){p=Vn(s);var m=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(ye(m)||!m.rowPinned&&!this.paginationProxy.isRowInPage(m))return null;l=m?m.rowIndex:null,c=m?m.rowPinned:null}return{rowIndex:l,column:p,rowPinned:c}},Hp([B("columnModel")],i.prototype,"columnModel",void 0),Hp([B("rowModel")],i.prototype,"rowModel",void 0),Hp([B("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Hp([B("paginationProxy")],i.prototype,"paginationProxy",void 0),Hp([ht("cellNavigationService")],i)}(Ye),TM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Vg=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Wg=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return TM(i,d),i.prototype.formatValue=function(e,s,l,c,p,m){void 0===m&&(m=!0);var x,w=null,A=e.getColDef();if(p?x=p:m&&(x=s&&s.rowPinned&&A.pinnedRowValueFormatter?A.pinnedRowValueFormatter:A.valueFormatter),x){var I={value:c,node:s,data:s?s.data:null,colDef:A,column:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};I.$scope=l,w=this.expressionService.evaluate(x,I)}else if(A.refData)return A.refData[c]||"";return null==w&&Array.isArray(c)&&(w=c.join(", ")),w},Vg([B("expressionService")],i.prototype,"expressionService",void 0),Vg([ht("valueFormatterService")],i)}(Ye),Ox=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Vp=function(d){function i(e){return d.call(this,e,"ag-radio-button","radio")||this}return Ox(i,d),i.prototype.isSelected=function(){return this.eInput.checked},i.prototype.toggle=function(){this.eInput.disabled||this.isSelected()||this.setValue(!0)},i.prototype.addInputListeners=function(){d.prototype.addInputListeners.call(this),this.addManagedListener(this.eventService,$.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))},i.prototype.onChange=function(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)},i}(ju),DM=["mouseover","mouseout","mouseenter","mouseleave"],Px=function(){function d(){this.isOutsideAngular=function(i){return bn(DM,i)}}return d.prototype.setTimeout=function(i,e){window.setTimeout(i,e)},d.prototype.setInterval=function(i,e){return new Xr(function(s){s(window.setInterval(i,e))})},d.prototype.addEventListener=function(i,e,s,l){i.addEventListener(e,s,l)},d.prototype.dispatchEvent=function(i,e,s){e()},d.prototype.frameworkComponent=function(i){return null},d}(),MM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Wp=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ix=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return MM(i,d),i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))},i.prototype.onDisplayedColumnsChanged=function(){this.update()},i.prototype.onDisplayedColumnsWidthChanged=function(){this.update()},i.prototype.update=function(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)},i.prototype.updateImpl=function(){var e=this.ctrlsService.getCenterRowContainerCtrl();if(e){var s={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(s)}},i.prototype.setScrollsVisible=function(e){this.horizontalScrollShowing===e.horizontalScrollShowing&&this.verticalScrollShowing===e.verticalScrollShowing||(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:$.EVENT_SCROLL_VISIBILITY_CHANGED,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.isHorizontalScrollShowing=function(){return this.horizontalScrollShowing},i.prototype.isVerticalScrollShowing=function(){return this.verticalScrollShowing},Wp([B("columnApi")],i.prototype,"columnApi",void 0),Wp([B("gridApi")],i.prototype,"gridApi",void 0),Wp([B("ctrlsService")],i.prototype,"ctrlsService",void 0),Wp([Qe],i.prototype,"postConstruct",null),Wp([ht("scrollVisibleService")],i)}(Ye),OM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Lx=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Fx=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return OM(i,d),i.prototype.processAllCellClasses=function(e,s,l,c){this.processClassRules(e.cellClassRules,s,l,c),this.processStaticCellClasses(e,s,l)},i.prototype.processClassRules=function(e,s,l,c){if(null!=e)for(var p=Object.keys(e),m={},w={},x=function(Y){var xe,Q=p[Y],oe=e[Q];"string"==typeof oe?xe=A.expressionService.evaluate(oe,s):"function"==typeof oe&&(xe=oe(s)),Q.split(" ").forEach(function(He){null==He||""==He.trim()||(xe?m[He]=!0:w[He]=!0)}),c&&Object.keys(w).forEach(c),Object.keys(m).forEach(l)},A=this,I=0;I<p.length;I++)x(I)},i.prototype.getStaticCellClasses=function(e,s){var c,l=e.cellClass;return l?("string"==typeof(c="function"==typeof l?(0,e.cellClass)(s):l)&&(c=[c]),c):[]},i.prototype.processStaticCellClasses=function(e,s,l){this.getStaticCellClasses(e,s).forEach(function(p){l(p)})},Lx([B("expressionService")],i.prototype,"expressionService",void 0),Lx([ht("stylingService")],i)}(Ye),PM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),vw=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ou=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return PM(i,d),i.prototype.setMouseOver=function(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:$.EVENT_COLUMN_HOVER_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.clearMouseOver=function(){this.selectedColumns=null,this.eventService.dispatchEvent({type:$.EVENT_COLUMN_HOVER_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.isHovered=function(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0},vw([B("columnApi")],i.prototype,"columnApi",void 0),vw([B("gridApi")],i.prototype,"gridApi",void 0),vw([ht("columnHoverService")],i)}(Ye),Ug=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),zg=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},gw=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.executeNextFuncs=[],e.executeLaterFuncs=[],e.active=!1,e.animationThreadCount=0,e}return Ug(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(s){return e.gridBodyCtrl=s.gridBodyCtrl})},i.prototype.isActive=function(){return this.active},i.prototype.start=function(){this.active||this.gridOptionsWrapper.isSuppressColumnMoveAnimation()||this.gridOptionsWrapper.isEnableRtl()||(this.ensureAnimationCssClassPresent(),this.active=!0)},i.prototype.finish=function(){!this.active||(this.flush(),this.active=!1)},i.prototype.executeNextVMTurn=function(e){this.active?this.executeNextFuncs.push(e):e()},i.prototype.executeLaterVMTurn=function(e){this.active?this.executeLaterFuncs.push(e):e()},i.prototype.ensureAnimationCssClassPresent=function(){var e=this;this.animationThreadCount++;var s=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(function(){e.animationThreadCount===s&&e.gridBodyCtrl.setColumnMovingCss(!1)})},i.prototype.flush=function(){var e=this.executeNextFuncs;this.executeNextFuncs=[];var s=this.executeLaterFuncs;this.executeLaterFuncs=[],(0!==e.length||0!==s.length)&&(window.setTimeout(function(){return e.forEach(function(l){return l()})},0),window.setTimeout(function(){return s.forEach(function(l){return l()})},300))},zg([B("ctrlsService")],i.prototype,"ctrlsService",void 0),zg([Qe],i.prototype,"postConstruct",null),zg([ht("columnAnimationService")],i)}(Ye),jg=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Up=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},qg=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}var e;return jg(i,d),e=i,i.prototype.createAutoGroupColumns=function(s){var l=this,c=[],p=this.gridOptionsWrapper.isTreeData(),m=this.gridOptionsWrapper.isGroupMultiAutoColumn();return p&&m&&(console.warn("AG Grid: you cannot mix groupMultiAutoColumn with treeData, only one column can be used to display groups when doing tree data"),m=!1),m?s.forEach(function(w,x){c.push(l.createOneAutoGroupColumn(w,x))}):c.push(this.createOneAutoGroupColumn()),c},i.prototype.createOneAutoGroupColumn=function(s,l){var p,c=this.generateDefaultColDef(s);p=s?ce.GROUP_AUTO_COLUMN_ID+"-"+s.getId():e.GROUP_AUTO_COLUMN_BUNDLE_ID,io(c,this.gridOptionsWrapper.getAutoGroupColumnDef()),(c=this.columnFactory.mergeColDefs(c)).colId=p,this.gridOptionsWrapper.isTreeData()||ye(c.field)&&ye(c.valueGetter)&&ye(c.filterValueGetter)&&(c.filter=!1),l&&l>0&&(c.headerCheckboxSelection=!1);var x=new Tn(c,null,p,!0);return this.context.createBean(x),x},i.prototype.generateDefaultColDef=function(s){var l=this.gridOptionsWrapper.getAutoGroupColumnDef(),p={headerName:this.gridOptionsWrapper.getLocaleTextFunc()("group","Group")};if(l&&(l.cellRenderer||l.cellRendererFramework||l.cellRendererSelector)||(p.cellRenderer="agGroupCellRenderer"),s){var w=s.getColDef();ti(p,{headerName:this.columnModel.getDisplayNameForColumn(s,"header"),headerValueGetter:w.headerValueGetter}),w.cellRenderer&&ti(p,{cellRendererParams:{innerRenderer:w.cellRenderer,innerRendererParams:w.cellRendererParams}}),p.showRowGroup=s.getColId()}else p.showRowGroup=!0;return p},i.GROUP_AUTO_COLUMN_BUNDLE_ID=ce.GROUP_AUTO_COLUMN_ID,Up([B("columnModel")],i.prototype,"columnModel",void 0),Up([B("columnFactory")],i.prototype,"columnFactory",void 0),e=Up([ht("autoGroupColService")],i)}(Ye),Nx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Xo=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Yg=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.currentPage=0,e.topDisplayedRowIndex=0,e.bottomDisplayedRowIndex=0,e.pixelOffset=0,e.masterRowCount=0,e}return Nx(i,d),i.prototype.postConstruct=function(){this.active=this.gridOptionsWrapper.isPagination(),this.paginateChildRows=this.gridOptionsWrapper.isPaginateChildRows(),this.addManagedListener(this.eventService,$.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(this.gridOptionsWrapper,"paginationPageSize",this.onPaginationPageSizeChanged.bind(this)),this.onModelUpdated()},i.prototype.ensureRowHeightsValid=function(e,s,l,c){var p=this.rowModel.ensureRowHeightsValid(e,s,this.getPageFirstRow(),this.getPageLastRow());return p&&this.calculatePages(),p},i.prototype.onModelUpdated=function(e){this.calculatePages(),this.eventService.dispatchEvent({type:$.EVENT_PAGINATION_CHANGED,animate:!!e&&e.animate,newData:!!e&&e.newData,newPage:!!e&&e.newPage,keepRenderedRows:!!e&&e.keepRenderedRows,api:this.gridApi,columnApi:this.columnApi})},i.prototype.onPaginationPageSizeChanged=function(){this.calculatePages(),this.eventService.dispatchEvent({type:$.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,keepRenderedRows:!0,api:this.gridApi,columnApi:this.columnApi})},i.prototype.goToPage=function(e){this.active&&this.currentPage!==e&&(this.currentPage=e,this.onModelUpdated({type:$.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0,api:this.gridApi,columnApi:this.columnApi}))},i.prototype.getPixelOffset=function(){return this.pixelOffset},i.prototype.getRow=function(e){return this.rowModel.getRow(e)},i.prototype.getRowNode=function(e){return this.rowModel.getRowNode(e)},i.prototype.getRowIndexAtPixel=function(e){return this.rowModel.getRowIndexAtPixel(e)},i.prototype.getCurrentPageHeight=function(){return ye(this.topRowBounds)||ye(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)},i.prototype.getCurrentPagePixelRange=function(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}},i.prototype.isRowPresent=function(e){return!!this.rowModel.isRowPresent(e)&&e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex},i.prototype.isEmpty=function(){return this.rowModel.isEmpty()},i.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},i.prototype.getNodesInRangeForSelection=function(e,s){return this.rowModel.getNodesInRangeForSelection(e,s)},i.prototype.forEachNode=function(e){return this.rowModel.forEachNode(e)},i.prototype.getType=function(){return this.rowModel.getType()},i.prototype.getRowBounds=function(e){var s=this.rowModel.getRowBounds(e);return s.rowIndex=e,s},i.prototype.getPageFirstRow=function(){return this.topRowBounds?this.topRowBounds.rowIndex:-1},i.prototype.getPageLastRow=function(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1},i.prototype.getRowCount=function(){return this.rowModel.getRowCount()},i.prototype.getPageForIndex=function(e){return Math.floor(e/this.pageSize)},i.prototype.goToPageWithIndex=function(e){if(this.active){var s=this.getPageForIndex(e);this.goToPage(s)}},i.prototype.isRowInPage=function(e){return!this.active||this.getPageForIndex(e.rowIndex)===this.currentPage},i.prototype.isLastPageFound=function(){return this.rowModel.isLastRowIndexKnown()},i.prototype.getCurrentPage=function(){return this.currentPage},i.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},i.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},i.prototype.goToFirstPage=function(){this.goToPage(0)},i.prototype.goToLastPage=function(){var e=this.rowModel.getRowCount(),s=Math.floor(e/this.pageSize);this.goToPage(s)},i.prototype.getPageSize=function(){return this.pageSize},i.prototype.getTotalPages=function(){return this.totalPages},i.prototype.setPageSize=function(){this.pageSize=this.gridOptionsWrapper.getPaginationPageSize(),(null==this.pageSize||this.pageSize<1)&&(this.pageSize=100)},i.prototype.calculatePages=function(){this.active?(this.setPageSize(),this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly()):this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(Le(this.topRowBounds)?this.topRowBounds.rowTop:0)},i.prototype.setPixelOffset=function(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:$.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))},i.prototype.setZeroRows=function(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0},i.prototype.calculatePagesMasterRowsOnly=function(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)this.setZeroRows();else{var e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!Fi(this.currentPage)||this.currentPage<0)&&(this.currentPage=0);var l=this.pageSize*(this.currentPage+1)-1;if(l>e&&(l=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(this.pageSize*this.currentPage),l===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{var c=this.rowModel.getTopLevelRowDisplayedIndex(l+1);this.bottomDisplayedRowIndex=c-1}}},i.prototype.getMasterRowCount=function(){return this.masterRowCount},i.prototype.calculatePagesAllRows=function(){if(this.masterRowCount=this.rowModel.getRowCount(),0!==this.masterRowCount){var e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!Fi(this.currentPage)||this.currentPage<0)&&(this.currentPage=0),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}else this.setZeroRows()},i.prototype.calculatedPagesNotActive=function(){this.pageSize=this.rowModel.getRowCount(),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1},Xo([B("rowModel")],i.prototype,"rowModel",void 0),Xo([B("columnApi")],i.prototype,"columnApi",void 0),Xo([B("gridApi")],i.prototype,"gridApi",void 0),Xo([Qe],i.prototype,"postConstruct",null),Xo([ht("paginationProxy")],i)}(Ye),kx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ad=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Gx=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return kx(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(s){e.centerRowContainerCon=s.centerRowContainerCtrl,e.addManagedListener(e.eventService,$.EVENT_BODY_HEIGHT_CHANGED,e.onBodyHeightChanged.bind(e)),e.addManagedListener(e.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,e.onScrollVisibilityChanged.bind(e)),e.checkPageSize()})},i.prototype.notActive=function(){return!this.gridOptionsWrapper.isPaginationAutoPageSize()},i.prototype.onScrollVisibilityChanged=function(){this.checkPageSize()},i.prototype.onBodyHeightChanged=function(){this.checkPageSize()},i.prototype.checkPageSize=function(){if(!this.notActive()){var e=this.gridOptionsWrapper.getRowHeightAsNumber(),s=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(s>0){var l=Math.floor(s/e);this.gridOptionsWrapper.setProperty("paginationPageSize",l)}}},Ad([B("ctrlsService")],i.prototype,"ctrlsService",void 0),Ad([Qe],i.prototype,"postConstruct",null),Ad([ht("paginationAutoPageSizeService")],i)}(Ye),mw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),yw=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},_w=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.cacheVersion=0,e}return mw(i,d),i.prototype.init=function(){this.active=this.gridOptionsWrapper.isValueCache(),this.neverExpires=this.gridOptionsWrapper.isValueCacheNeverExpires()},i.prototype.onDataChanged=function(){this.neverExpires||this.expire()},i.prototype.expire=function(){this.cacheVersion++},i.prototype.setValue=function(e,s,l){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[s]=l)},i.prototype.getValue=function(e,s){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[s]},yw([Qe],i.prototype,"init",null),yw([ht("valueCache")],i)}(Ye),Td=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Es=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Kg=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Td(i,d),i.prototype.init=function(){this.rowModel.getType()===ce.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,$.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},i.prototype.onCellValueChanged=function(e){e.source!==ce.SOURCE_PASTE&&this.doChangeDetection(e.node,e.column)},i.prototype.doChangeDetection=function(e,s){if(!this.gridOptionsWrapper.isSuppressChangeDetection()){if(this.clientSideRowModel&&!e.isRowPinned()){var l=this.gridOptionsWrapper.isAggregateOnlyChangedColumns(),c=new Mt(l,this.clientSideRowModel.getRootNode());c.addParentNode(e.parent,[s]),this.clientSideRowModel.doAggregate(c)}this.rowRenderer.refreshCells()}},Es([B("rowModel")],i.prototype,"rowModel",void 0),Es([B("rowRenderer")],i.prototype,"rowRenderer",void 0),Es([Qe],i.prototype,"init",null),Es([ht("changeDetectionService")],i)}(Ye),nc=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),bs=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},rc=function(d,i){return function(e,s){i(e,s,d)}},Cw=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.consuming=!1,e}return nc(i,d),i.prototype.setBeans=function(e){this.logger=e.create("AlignedGridsService")},i.prototype.init=function(){this.addManagedListener(this.eventService,$.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,$.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},i.prototype.fireEvent=function(e){if(!this.consuming){var s=this.gridOptionsWrapper.getAlignedGrids();s&&s.forEach(function(l){if(l.api){var c=l.api.__getAlignedGridService();e(c)}})}},i.prototype.onEvent=function(e){this.consuming=!0,e(),this.consuming=!1},i.prototype.fireColumnEvent=function(e){this.fireEvent(function(s){s.onColumnEvent(e)})},i.prototype.fireScrollEvent=function(e){"horizontal"===e.direction&&this.fireEvent(function(s){s.onScrollEvent(e)})},i.prototype.onScrollEvent=function(e){var s=this;this.onEvent(function(){s.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left)})},i.prototype.getMasterColumns=function(e){var s=[];return e.columns?e.columns.forEach(function(l){s.push(l)}):e.column&&s.push(e.column),s},i.prototype.getColumnIds=function(e){var s=[];return e.columns?e.columns.forEach(function(l){s.push(l.getColId())}):e.column&&s.push(e.column.getColId()),s},i.prototype.onColumnEvent=function(e){var s=this;this.onEvent(function(){switch(e.type){case $.EVENT_COLUMN_MOVED:case $.EVENT_COLUMN_VISIBLE:case $.EVENT_COLUMN_PINNED:case $.EVENT_COLUMN_RESIZED:s.processColumnEvent(e);break;case $.EVENT_COLUMN_GROUP_OPENED:s.processGroupOpenedEvent(e);break;case $.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}})},i.prototype.processGroupOpenedEvent=function(e){var s=e.columnGroup,l=null;if(s){var c=s.getGroupId();l=this.columnModel.getOriginalColumnGroup(c)}s&&!l||(this.logger.log("onColumnEvent-> processing "+e+" expanded = "+s.isExpanded()),this.columnModel.setColumnGroupOpened(l,s.isExpanded(),"alignedGridChanged"))},i.prototype.processColumnEvent=function(e){var s=this,l=e.column,c=null;if(l&&(c=this.columnModel.getPrimaryColumn(l.getColId())),!l||c){var p=this.getMasterColumns(e);switch(e.type){case $.EVENT_COLUMN_MOVED:var m=e,x=e.columnApi.getColumnState().map(function(xe){return{colId:xe.colId}});this.columnModel.applyColumnState({state:x,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" toIndex = "+m.toIndex);break;case $.EVENT_COLUMN_VISIBLE:var A=e;x=e.columnApi.getColumnState().map(function(Ve){return{colId:Ve.colId,hide:Ve.hide}}),this.columnModel.applyColumnState({state:x},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" visible = "+A.visible);break;case $.EVENT_COLUMN_PINNED:var I=e;x=e.columnApi.getColumnState().map(function(Ve){return{colId:Ve.colId,pinned:Ve.pinned}}),this.columnModel.applyColumnState({state:x},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" pinned = "+I.pinned);break;case $.EVENT_COLUMN_RESIZED:var U=e;p.forEach(function(xe){s.logger.log("onColumnEvent-> processing "+e.type+" actualWidth = "+xe.getActualWidth());var He=[{key:xe.getColId(),newWidth:xe.getActualWidth()}];s.columnModel.setColumnWidths(He,!1,U.finished,"alignedGridChanged")})}var Q=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing(),oe=this.gridOptionsWrapper.getAlignedGrids();oe&&oe.forEach(function(xe){xe.api&&xe.api.setAlwaysShowVerticalScroll(Q)})}},bs([B("columnModel")],i.prototype,"columnModel",void 0),bs([B("ctrlsService")],i.prototype,"ctrlsService",void 0),bs([rc(0,Li("loggerFactory"))],i.prototype,"setBeans",null),bs([Qe],i.prototype,"init",null),bs([ht("alignedGridsService")],i)}(Ye),ww=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),$g=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Xg=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return ww(i,d),i.prototype.adaptFunction=function(e,s){var l=this.componentMetadataProvider.retrieve(e);return l&&l.functionAdapter?l.functionAdapter(s):null},i.prototype.adaptCellRendererFunction=function(e){return function(){function l(){}return l.prototype.refresh=function(c){return!1},l.prototype.getGui=function(){var c=e(this.params),p=typeof c;return"string"===p||"number"===p||"boolean"===p?oa("<span>"+c+"</span>"):null==c?oa("<span></span>"):c},l.prototype.init=function(c){this.params=c},l}()},i.prototype.doesImplementIComponent=function(e){return!!e&&e.prototype&&"getGui"in e.prototype},$g([B("componentMetadataProvider")],i.prototype,"componentMetadataProvider",void 0),$g([ht("agComponentUtils")],i)}(Ye),Jg=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),zp=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},jp=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Jg(i,d),i.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},pinnedRowCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}},i.prototype.retrieve=function(e){return this.componentMetaData[e]},zp([B("agComponentUtils")],i.prototype,"agComponentUtils",void 0),zp([Qe],i.prototype,"postConstruct",null),zp([ht("componentMetadataProvider")],i)}(Ye),Bx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Zg=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},bw={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:20,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:56,headerCellMinWidth:48,listItemHeight:32,rowHeight:48,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:32,headerCellMinWidth:24,listItemHeight:24,rowHeight:28,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:48,headerCellMinWidth:36,listItemHeight:24,rowHeight:42,chartMenuPanelWidth:240}},xw={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},Dd={},ho=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Bx(i,d),i.prototype.getSassVariable=function(e,s){var l="ag-theme-"+(e.match("material")?"material":e.match("balham")?"balham":e.match("alpine")?"alpine":"custom"),c=bw[l][s],p=0;Dd[e]||(Dd[e]={});var m=Dd[e][s];if(null!=m)return m;if(xw[s]){var w=xw[s],x=document.createElement("div");Tt(x,e),x.style.position="absolute";var A=w.reduce(function(U,Y){var Q=document.createElement("div");return Q.style.position="static",Tt(Q,Y),U.appendChild(Q),Q},x);if(document.body){document.body.appendChild(x);var I=-1!==s.toLowerCase().indexOf("height")?"height":"width";p=parseInt(window.getComputedStyle(A)[I],10),document.body.removeChild(x)}}return Dd[e][s]=p||c,Dd[e][s]},i.prototype.isThemeDark=function(){var e=this.getTheme().theme;return!!e&&e.indexOf("dark")>=0},i.prototype.chartMenuPanelWidth=function(){var e=this.getTheme().themeFamily;return this.getSassVariable(e,"chartMenuPanelWidth")},i.prototype.getTheme=function(){for(var e=/\bag-(material|(?:theme-([\w\-]*)))\b/,s=this.eGridDiv,l=null;s&&!(l=e.exec(s.className));)s=s.parentElement||void 0;if(!l)return{};var c=l[0];if(void 0===l[2]){var m=c.replace("ag-","ag-theme-");pn(function(){return console.warn("AG Grid: As of v19 old theme are no longer provided. Please replace "+c+" with "+m+".")},"using-old-theme")}return{theme:c,el:s,themeFamily:c.replace(/-dark$/,"")}},Zg([B("eGridDiv")],i.prototype,"eGridDiv",void 0),Zg([ht("environment")],i)}(Ye),Hx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),em=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Vx=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.createTasksP1={list:[],sorted:!1},e.createTasksP2={list:[],sorted:!1},e.destroyTasks=[],e.ticking=!1,e.scrollGoingDown=!0,e.lastScrollTop=0,e.taskCount=0,e.cancelledTasks=new Set,e}return Hx(i,d),i.prototype.setScrollTop=function(e){this.scrollGoingDown=e>this.lastScrollTop,this.lastScrollTop=e},i.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsWrapper.isSuppressAnimationFrame()},i.prototype.isOn=function(){return this.useAnimationFrame},i.prototype.verifyAnimationFrameOn=function(e){!1===this.useAnimationFrame&&console.warn("AG Grid: AnimationFrameService."+e+" called but animation frames are off")},i.prototype.createTask=function(e,s,l){this.verifyAnimationFrameOn(l);var c={task:e,index:s,createOrder:++this.taskCount};this.addTaskToList(this[l],c),this.schedule()},i.prototype.cancelTask=function(e){this.cancelledTasks.add(e)},i.prototype.addTaskToList=function(e,s){e.list.push(s),e.sorted=!1},i.prototype.sortTaskList=function(e){if(!e.sorted){var s=this.scrollGoingDown?1:-1;e.list.sort(function(l,c){return l.index!==c.index?s*(c.index-l.index):c.createOrder-l.createOrder}),e.sorted=!0}},i.prototype.addDestroyTask=function(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()},i.prototype.executeFrame=function(e){this.verifyAnimationFrameOn("executeFrame");for(var s=this.createTasksP1,l=s.list,c=this.createTasksP2,p=c.list,m=this.destroyTasks,w=(new Date).getTime(),x=(new Date).getTime()-w,A=e<=0,I=this.ctrlsService.getGridBodyCtrl();A||x<e;){if(!I.getScrollFeature().executeAnimationFrameScroll()){var Y=void 0;if(l.length)this.sortTaskList(s),Y=l.pop().task;else if(p.length)this.sortTaskList(c),Y=p.pop().task;else{if(!m.length){this.cancelledTasks.clear();break}Y=m.pop()}this.cancelledTasks.has(Y)||Y()}x=(new Date).getTime()-w}l.length||p.length||m.length?this.requestFrame():this.stopTicking()},i.prototype.stopTicking=function(){this.ticking=!1},i.prototype.flushAllFrames=function(){!this.useAnimationFrame||this.executeFrame(-1)},i.prototype.schedule=function(){!this.useAnimationFrame||this.ticking||(this.ticking=!0,this.requestFrame())},i.prototype.requestFrame=function(){var e=this.executeFrame.bind(this,60);window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):window.setTimeout(e,0)},i.prototype.isQueueEmpty=function(){return!this.ticking},i.prototype.debounce=function(e){var s=this,l=!1;return function(){s.isOn()?l||(l=!0,s.addDestroyTask(function(){l=!1,e()})):s.getFrameworkOverrides().setTimeout(e,0)}},em([B("ctrlsService")],i.prototype,"ctrlsService",void 0),em([Qe],i.prototype,"init",null),em([ht("animationFrameService")],i)}(Ye),IM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Md=function(){return Md=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Md.apply(this,arguments)},To=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Rw=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.timeLastPageEventProcessed=0,e}return IM(i,d),i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(s){e.gridBodyCon=s.gridBodyCtrl})},i.prototype.handlePageScrollingKey=function(e){var s=e.which||e.keyCode,l=e.altKey,c=e.ctrlKey||e.metaKey,p=this.mouseEventService.getCellPositionForEvent(e);if(!p)return!1;var m=!1;switch(s){case $e.PAGE_HOME:case $e.PAGE_END:!c&&!l&&(this.onHomeOrEndKey(s),m=!0);break;case $e.LEFT:case $e.RIGHT:c&&!l&&(this.onCtrlLeftOrRight(s,p),m=!0);break;case $e.UP:case $e.DOWN:c&&!l&&(this.onCtrlUpOrDown(s,p),m=!0);break;case $e.PAGE_DOWN:!c&&!l&&(this.onPageDown(p),m=!0);break;case $e.PAGE_UP:!c&&!l&&(this.onPageUp(p),m=!0)}return m&&e.preventDefault(),m},i.prototype.isTimeSinceLastPageEventToRecent=function(){return(new Date).getTime()-this.timeLastPageEventProcessed<100},i.prototype.setTimeLastPageEventProcessed=function(){this.timeLastPageEventProcessed=(new Date).getTime()},i.prototype.navigateTo=function(e){var s=e.scrollIndex,l=e.scrollType,c=e.scrollColumn,p=e.focusIndex,m=e.focusColumn;Le(c)&&!c.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(c),Le(s)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(s,l),this.animationFrameService.flushAllFrames(),this.focusService.setFocusedCell(p,m,null,!0),this.rangeService&&this.rangeService.setRangeToCell({rowIndex:p,rowPinned:null,column:m})},i.prototype.onPageDown=function(e){if(!this.isTimeSinceLastPageEventToRecent()){var l=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),c=this.gridOptionsWrapper.getScrollbarWidth(),p=l.bottom-l.top;this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(p-=c);var m=this.paginationProxy.getPixelOffset(),A=this.paginationProxy.getRowIndexAtPixel(l.top+p+m),I=this.paginationProxy.getRow(e.rowIndex).rowTop,Y=this.paginationProxy.getRowIndexAtPixel(I+p-m+m),Q=this.paginationProxy.getPageLastRow();Y>Q&&(Y=Q),A>Q&&(A=Q),this.navigateTo({scrollIndex:A,scrollType:"top",scrollColumn:null,focusIndex:Y,focusColumn:e.column}),this.setTimeLastPageEventProcessed()}},i.prototype.onPageUp=function(e){if(!this.isTimeSinceLastPageEventToRecent()){var l=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),c=this.gridOptionsWrapper.getScrollbarWidth(),p=l.bottom-l.top;this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(p-=c);var m=this.paginationProxy.getPixelOffset(),A=this.paginationProxy.getRowIndexAtPixel(l.top+m),I=this.paginationProxy.getRow(e.rowIndex),Y=this.paginationProxy.getRowIndexAtPixel(I.rowTop+I.rowHeight-p-m+m),Q=this.paginationProxy.getPageFirstRow();Y<Q&&(Y=Q),A<Q&&(A=Q),this.navigateTo({scrollIndex:A,scrollType:"bottom",scrollColumn:null,focusIndex:Y,focusColumn:e.column}),this.setTimeLastPageEventProcessed()}},i.prototype.getIndexToFocus=function(e,s){var l=e;if(s){var c=this.paginationProxy.getRow(e);c&&c.stub&&(l-=1)}return l},i.prototype.onCtrlUpOrDown=function(e,s){var l=e===$e.UP,c=l?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:c,scrollType:null,scrollColumn:s.column,focusIndex:this.getIndexToFocus(c,!l),focusColumn:s.column})},i.prototype.onCtrlLeftOrRight=function(e,s){var l=e===$e.LEFT,c=this.columnModel.getAllDisplayedColumns(),m=l!==this.gridOptionsWrapper.isEnableRtl()?c[0]:Vn(c);this.navigateTo({scrollIndex:s.rowIndex,scrollType:null,scrollColumn:m,focusIndex:s.rowIndex,focusColumn:m})},i.prototype.onHomeOrEndKey=function(e){var s=e===$e.PAGE_HOME,l=this.columnModel.getAllDisplayedColumns(),c=s?l[0]:Vn(l),p=s?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:p,scrollType:null,scrollColumn:c,focusIndex:this.getIndexToFocus(p,!s),focusColumn:c})},i.prototype.onTabKeyDown=function(e,s){var l=s.shiftKey;if(this.tabToNextCellCommon(e,l))s.preventDefault();else if(l){var p=e.getRowPosition(),m=p.rowIndex;if(p.rowPinned?0===m:m===this.paginationProxy.getPageFirstRow()){s.preventDefault();var A=this.headerNavigationService.getHeaderRowCount()-1,I=Vn(this.columnModel.getAllDisplayedColumns());this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:A,column:I},event:s})}}else e instanceof Xi&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(!1)&&s.preventDefault()},i.prototype.tabToNextCell=function(e){var s=this.focusService.getFocusedCell();if(!s)return!1;var l=this.getCellByPosition(s);return!!(l||(l=this.rowRenderer.getRowByPosition(s),l&&l.isFullWidth()))&&this.tabToNextCellCommon(l,e)},i.prototype.tabToNextCellCommon=function(e,s){var l=e.isEditing();if(!l&&e instanceof Xi){var p=e.getRowCtrl();p&&(l=p.isEditing())}return(l?this.gridOptionsWrapper.isFullRowEdit()?this.moveToNextEditingRow(e,s):this.moveToNextEditingCell(e,s):this.moveToNextCellNotEditing(e,s))||!!this.focusService.getFocusedHeader()},i.prototype.moveToNextEditingCell=function(e,s){var l=e.getCellPosition();e.stopEditing();var c=this.findNextCellToFocusOn(l,s,!0);return null!=c&&(c.startEditing(null,null,!0),c.focusCell(!1),!0)},i.prototype.moveToNextEditingRow=function(e,s){var l=e.getCellPosition(),c=this.findNextCellToFocusOn(l,s,!0);if(null==c)return!1;var p=c.getCellPosition(),m=this.isCellEditable(l),w=this.isCellEditable(p),x=p&&l.rowIndex===p.rowIndex&&l.rowPinned===p.rowPinned;return m&&e.setFocusOutOnEditor(),x||(e.getRowCtrl().stopEditing(),c.getRowCtrl().startRowEditing()),w?(c.setFocusInOnEditor(),c.focusCell()):c.focusCell(!0),!0},i.prototype.moveToNextCellNotEditing=function(e,s){var c,l=this.columnModel.getAllDisplayedColumns();c=e instanceof eu?Md(Md({},e.getRowPosition()),{column:s?l[0]:Vn(l)}):e.getCellPosition();var p=this.findNextCellToFocusOn(c,s,!1);if(p instanceof Xi)p.focusCell(!0);else if(p)return this.tryToFocusFullWidthRow(p.getRowPosition(),s);return Le(p)},i.prototype.findNextCellToFocusOn=function(e,s,l){for(var c=e;;){s||(c=this.getLastCellOfColSpan(c)),c=this.cellNavigationService.getNextTabbedCell(c,s);var p=this.gridOptionsWrapper.getTabToNextCellFunc();if(Le(p)){var w=p({backwards:s,editing:l,previousCellPosition:e,nextCellPosition:c||null,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()});Le(w)?(w.floating&&(pn(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),w.rowPinned=w.floating),c={rowIndex:w.rowIndex,column:w.column,rowPinned:w.rowPinned}):c=null}if(!c)return null;if(c.rowIndex<0){var x=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:x+c.rowIndex,column:c.column}}),null}var A=this.gridOptionsWrapper.isFullRowEdit();if(!l||A||this.isCellEditable(c)){this.ensureCellVisible(c);var U=this.getCellByPosition(c);if(!U){var Y=this.rowRenderer.getRowByPosition(c);if(!Y||!Y.isFullWidth())continue;return Y}if(!U.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(c),U}}},i.prototype.isCellEditable=function(e){var s=this.lookupRowNodeForCell(e);return!!s&&e.column.isCellEditable(s)},i.prototype.getCellByPosition=function(e){var s=this.rowRenderer.getRowByPosition(e);return s?s.getCellCtrl(e.column):null},i.prototype.lookupRowNodeForCell=function(e){return e.rowPinned===ce.PINNED_TOP?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned===ce.PINNED_BOTTOM?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)},i.prototype.navigateToNextCell=function(e,s,l,c){for(var p=l,m=!1;p&&(p===l||!this.isValidNavigateCell(p));)this.gridOptionsWrapper.isEnableRtl()?s===$e.LEFT&&(p=this.getLastCellOfColSpan(p)):s===$e.RIGHT&&(p=this.getLastCellOfColSpan(p)),m=ye(p=this.cellNavigationService.getNextCellToFocus(s,p));if(m&&e&&e.keyCode===$e.UP&&(p={rowIndex:-1,rowPinned:null,column:l.column}),c){var w=this.gridOptionsWrapper.getNavigateToNextCellFunc();if(Le(w)){var A=w({key:s,previousCellPosition:l,nextCellPosition:p||null,event:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()});Le(A)?(A.floating&&(pn(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),A.rowPinned=A.floating),p={rowPinned:A.rowPinned,rowIndex:A.rowIndex,column:A.column}):p=null}}if(p){if(p.rowIndex<0){var I=this.headerNavigationService.getHeaderRowCount();return void this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:I+p.rowIndex,column:l.column},event:e||void 0})}var U=this.getNormalisedPosition(p);U?this.focusPosition(U):this.tryToFocusFullWidthRow(p)}},i.prototype.getNormalisedPosition=function(e){this.ensureCellVisible(e);var s=this.getCellByPosition(e);return s?(e=s.getCellPosition(),this.ensureCellVisible(e),e):null},i.prototype.tryToFocusFullWidthRow=function(e,s){void 0===s&&(s=!1);var l=this.columnModel.getAllDisplayedColumns(),c=this.rowRenderer.getRowByPosition(e);if(!c||!c.isFullWidth())return!1;var p={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(s?Vn(l):l[0])};return this.focusPosition(p),!0},i.prototype.focusPosition=function(e){this.focusService.setFocusedCell(e.rowIndex,e.column,e.rowPinned,!0),this.rangeService&&this.rangeService.setRangeToCell(e)},i.prototype.isValidNavigateCell=function(e){return!!this.rowPositionUtils.getRowNode(e)},i.prototype.getLastCellOfColSpan=function(e){var s=this.getCellByPosition(e);if(!s)return e;var l=s.getColSpanningList();return 1===l.length?e:{rowIndex:e.rowIndex,column:Vn(l),rowPinned:e.rowPinned}},i.prototype.ensureCellVisible=function(e){ye(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column),this.gridBodyCon.getScrollFeature().horizontallyScrollHeaderCenterAndFloatingCenter(),this.animationFrameService.flushAllFrames()},To([B("mouseEventService")],i.prototype,"mouseEventService",void 0),To([B("paginationProxy")],i.prototype,"paginationProxy",void 0),To([B("focusService")],i.prototype,"focusService",void 0),To([B("animationFrameService")],i.prototype,"animationFrameService",void 0),To([Ln("rangeService")],i.prototype,"rangeService",void 0),To([B("columnModel")],i.prototype,"columnModel",void 0),To([B("ctrlsService")],i.prototype,"ctrlsService",void 0),To([B("rowRenderer")],i.prototype,"rowRenderer",void 0),To([B("headerNavigationService")],i.prototype,"headerNavigationService",void 0),To([B("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),To([B("cellNavigationService")],i.prototype,"cellNavigationService",void 0),To([B("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),To([Qe],i.prototype,"postConstruct",null),To([ht("navigationService")],i)}(Ye),tm=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Od=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Wx=function(d,i){return function(e,s){i(e,s,d)}},Ux=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.scrollY=0,e.uiBodyHeight=0,e}return tm(i,d),i.prototype.agWire=function(e){this.logger=e.create("RowContainerHeightService")},i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,$.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=cs(),this.logger.log("maxDivHeight = "+this.maxDivHeight)},i.prototype.isStretching=function(){return this.stretching},i.prototype.getDivStretchOffset=function(){return this.divStretchOffset},i.prototype.updateOffset=function(){if(this.stretching){var s=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,l=this.getUiBodyHeight();(s!==this.scrollY||l!==this.uiBodyHeight)&&(this.scrollY=s,this.uiBodyHeight=l,this.calculateOffset())}},i.prototype.calculateOffset=function(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var e=this.scrollY/this.maxScrollY,s=e*this.pixelsToShave;this.logger.log("Div Stretch Offset = "+s+" ("+this.pixelsToShave+" * "+e+")"),this.setDivStretchOffset(s)},i.prototype.setUiContainerHeight=function(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:$.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))},i.prototype.clearOffset=function(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)},i.prototype.setDivStretchOffset=function(e){var s="number"==typeof e?Math.floor(e):null;this.divStretchOffset!==s&&(this.divStretchOffset=s,this.eventService.dispatchEvent({type:$.EVENT_HEIGHT_SCALE_CHANGED}))},i.prototype.setModelHeight=function(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()},i.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},i.prototype.getRealPixelPosition=function(e){return e-this.divStretchOffset},i.prototype.getUiBodyHeight=function(){var s=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return s.bottom-s.top},i.prototype.getScrollPositionForPixel=function(e){if(this.pixelsToShave<=0)return e;var s=this.modelHeight-this.getUiBodyHeight();return this.maxScrollY*(e/s)},Od([B("ctrlsService")],i.prototype,"ctrlsService",void 0),Od([Wx(0,Li("loggerFactory"))],i.prototype,"agWire",null),Od([Qe],i.prototype,"postConstruct",null),Od([ht("rowContainerHeightService")],i)}(Ye),zx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),nm=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Aw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return zx(i,d),i.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.isRowSelectableFunc=this.gridOptionsWrapper.getIsRowSelectableFunc()},i.prototype.updateSelectableAfterGrouping=function(e){this.isRowSelectableFunc&&this.recurseDown(e.childrenAfterGroup,function(c){return c.childrenAfterGroup})},i.prototype.updateSelectableAfterFiltering=function(e){this.isRowSelectableFunc&&this.recurseDown(e.childrenAfterGroup,function(c){return c.childrenAfterFilter})},i.prototype.recurseDown=function(e,s){var l=this;!e||e.forEach(function(c){var p;c.group&&(c.hasChildren()&&l.recurseDown(s(c),s),p=l.groupSelectsChildren?Le(Pi(s(c),"selectable",!0)):!!l.isRowSelectableFunc&&l.isRowSelectableFunc(c),c.setRowSelectable(p))})},nm([Qe],i.prototype,"init",null),nm([ht("selectableService")],i)}(Ye),Tw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Jo=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},jx=function(d){function i(){var e=d.call(this)||this;return e.previousAndFirstButtonsDisabled=!1,e.nextButtonDisabled=!1,e.lastButtonDisabled=!1,e}return Tw(i,d),i.prototype.postConstruct=function(){var e=this,s=this.gridOptionsWrapper.isEnableRtl();this.setTemplate(this.getTemplate()),this.btFirst.insertAdjacentElement("afterbegin",oi(s?"last":"first",this.gridOptionsWrapper)),this.btPrevious.insertAdjacentElement("afterbegin",oi(s?"next":"previous",this.gridOptionsWrapper)),this.btNext.insertAdjacentElement("afterbegin",oi(s?"previous":"next",this.gridOptionsWrapper)),this.btLast.insertAdjacentElement("afterbegin",oi(s?"first":"last",this.gridOptionsWrapper)),this.gridOptionsWrapper.isPagination()&&!this.gridOptionsWrapper.isSuppressPaginationPanel()?(this.addManagedListener(this.eventService,$.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(function(p){var m=p.el,w=p.fn;e.addManagedListener(m,"click",w),e.addManagedListener(m,"keydown",function(x){(x.keyCode===$e.ENTER||x.keyCode===$e.SPACE)&&(x.preventDefault(),w())})}),this.onPaginationChanged()):this.setDisplayed(!1)},i.prototype.onPaginationChanged=function(){this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels()},i.prototype.onBtFirst=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()},i.prototype.setCurrentPageLabel=function(){var e=this.paginationProxy.getTotalPages()>0,s=this.paginationProxy.getCurrentPage();this.lbCurrent.innerHTML=this.formatNumber(e?s+1:0)},i.prototype.formatNumber=function(e){var s=this.gridOptionsWrapper.getPaginationNumberFormatterFunc();return s?s({value:e}):Fv(e)},i.prototype.getTemplate=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),s=e("page","Page"),l=e("to","to"),c=e("of","of"),p=e("firstPage","First Page"),m=e("previousPage","Previous Page"),w=e("nextPage","Next Page"),x=e("lastPage","Last Page"),A=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'+A+'">\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-'+A+'-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+A+'-to">'+l+'</span>\n                    <span id="ag-'+A+'-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-'+A+'-of">'+c+'</span>\n                    <span id="ag-'+A+'-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div ref="btFirst" class="ag-paging-button" role="button" aria-label="'+p+'" tabindex="0"></div>\n                    <div ref="btPrevious" class="ag-paging-button" role="button" aria-label="'+m+'" tabindex="0"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-'+A+'-start-page">'+s+'</span>\n                        <span id="ag-'+A+'-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-'+A+'-of-page">'+c+'</span>\n                        <span id="ag-'+A+'-of-page-number" ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div ref="btNext" class="ag-paging-button" role="button" aria-label="'+w+'" tabindex="0"></div>\n                    <div ref="btLast" class="ag-paging-button" role="button" aria-label="'+x+'" tabindex="0"></div>\n                </span>\n            </div>'},i.prototype.onBtNext=function(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()},i.prototype.onBtPrevious=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()},i.prototype.onBtLast=function(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()},i.prototype.enableOrDisableButtons=function(){var e=this.paginationProxy.getCurrentPage(),s=this.paginationProxy.isLastPageFound(),l=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,Lt(this.btFirst,"ag-disabled",this.previousAndFirstButtonsDisabled),zf(this.btFirst,this.previousAndFirstButtonsDisabled),Lt(this.btPrevious,"ag-disabled",this.previousAndFirstButtonsDisabled),zf(this.btPrevious,this.previousAndFirstButtonsDisabled);var c=this.isZeroPagesToDisplay();this.nextButtonDisabled=s&&e===l-1||c,Lt(this.btNext,"ag-disabled",this.nextButtonDisabled),zf(this.btNext,this.nextButtonDisabled),this.lastButtonDisabled=!s||c||e===l-1,Lt(this.btLast,"ag-disabled",this.lastButtonDisabled),zf(this.btLast,this.lastButtonDisabled)},i.prototype.updateRowLabels=function(){var p,m,e=this.paginationProxy.getCurrentPage(),s=this.paginationProxy.getPageSize(),l=this.paginationProxy.isLastPageFound(),c=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;this.isZeroPagesToDisplay()?p=m=0:(m=(p=s*e+1)+s-1,l&&m>c&&(m=c)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(p),this.lbLastRowOnPage.innerHTML=this.rowNodeBlockLoader.isLoading()?"?":this.formatNumber(m)},i.prototype.isZeroPagesToDisplay=function(){var e=this.paginationProxy.isLastPageFound(),s=this.paginationProxy.getTotalPages();return e&&0===s},i.prototype.setTotalLabels=function(){var e=this.paginationProxy.isLastPageFound(),s=this.paginationProxy.getTotalPages(),l=e?this.paginationProxy.getMasterRowCount():null;if(1===l){var c=this.paginationProxy.getRow(0);if(c&&c.group&&!c.groupData&&!c.aggData)return void this.setTotalLabelsToZero()}if(e)this.lbTotal.innerHTML=this.formatNumber(s),this.lbRecordCount.innerHTML=this.formatNumber(l);else{var m=this.gridOptionsWrapper.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=m,this.lbRecordCount.innerHTML=m}},i.prototype.setTotalLabelsToZero=function(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)},Jo([B("paginationProxy")],i.prototype,"paginationProxy",void 0),Jo([B("rowNodeBlockLoader")],i.prototype,"rowNodeBlockLoader",void 0),Jo([Be("btFirst")],i.prototype,"btFirst",void 0),Jo([Be("btPrevious")],i.prototype,"btPrevious",void 0),Jo([Be("btNext")],i.prototype,"btNext",void 0),Jo([Be("btLast")],i.prototype,"btLast",void 0),Jo([Be("lbRecordCount")],i.prototype,"lbRecordCount",void 0),Jo([Be("lbFirstRowOnPage")],i.prototype,"lbFirstRowOnPage",void 0),Jo([Be("lbLastRowOnPage")],i.prototype,"lbLastRowOnPage",void 0),Jo([Be("lbCurrent")],i.prototype,"lbCurrent",void 0),Jo([Be("lbTotal")],i.prototype,"lbTotal",void 0),Jo([Qe],i.prototype,"postConstruct",null),i}(dn),Dw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),da=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.polyfillFunctions=[],e}return Dw(i,d),i.prototype.observeResize=function(e,s){var I,l=this,c=Du(s,50),w=this.gridOptionsWrapper.isSuppressBrowserResizeObserver();return window.ResizeObserver&&!w?((I=new window.ResizeObserver(c)).observe(e),function(){return I.disconnect()}):function(){var I=Da(e),U=ii(e),Y=!0;return function oe(){if(Y){var xe=Da(e),He=ii(e);(xe!==I||He!==U)&&(I=xe,U=He,s()),l.doNextPolyfillTurn(oe)}}(),function(){return Y=!1}}()},i.prototype.doNextPolyfillTurn=function(e){this.polyfillFunctions.push(e),this.schedulePolyfill()},i.prototype.schedulePolyfill=function(){var e=this;this.polyfillScheduled||(this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout(function(){var c=e.polyfillFunctions;e.polyfillScheduled=!1,e.polyfillFunctions=[],c.forEach(function(p){return p()})},50))},i=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([ht("resizeObserverService")],i),i}(Ye),rm=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ic=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},$u=function(){return function(d){d[d.Loading=0]="Loading",d[d.NoRows=1]="NoRows"}($u||($u={})),$u}(),LM=function(d){function i(){var e=d.call(this,i.TEMPLATE)||this;return e.inProgress=!1,e.destroyRequested=!1,e}return rm(i,d),i.prototype.updateLayoutClasses=function(e,s){Lt(this.eOverlayWrapper,K.LBn.AUTO_HEIGHT,s.autoHeight),Lt(this.eOverlayWrapper,K.LBn.NORMAL,s.normal),Lt(this.eOverlayWrapper,K.LBn.PRINT,s.print)},i.prototype.postConstruct=function(){this.createManagedBean(new Yu(this)),this.setDisplayed(!1),this.addManagedListener(this.eventService,$.EVENT_ROW_DATA_CHANGED,this.onRowDataChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_ROW_DATA_UPDATED,this.onRowDataChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.gridOptionsWrapper.isRowModelDefault()&&!this.gridOptionsWrapper.getRowData()&&this.showLoadingOverlay(),this.gridApi.registerOverlayWrapperComp(this)},i.prototype.setWrapperTypeClass=function(e){Lt(this.eOverlayWrapper,"ag-overlay-loading-wrapper",e===$u.Loading),Lt(this.eOverlayWrapper,"ag-overlay-no-rows-wrapper",e===$u.NoRows)},i.prototype.showLoadingOverlay=function(){if(!this.gridOptionsWrapper.isSuppressLoadingOverlay()){var e={api:this.gridOptionsWrapper.getApi()},l=this.userComponentFactory.getLoadingOverlayCompDetails(e).newAgStackInstance();this.showOverlay(l,$u.Loading)}},i.prototype.showNoRowsOverlay=function(){if(!this.gridOptionsWrapper.isSuppressNoRowsOverlay()){var e={api:this.gridOptionsWrapper.getApi()},l=this.userComponentFactory.getNoRowsOverlayCompDetails(e).newAgStackInstance();this.showOverlay(l,$u.NoRows)}},i.prototype.showOverlay=function(e,s){var l=this;this.inProgress||(this.setWrapperTypeClass(s),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(function(c){l.inProgress=!1,l.eOverlayWrapper.appendChild(c.getGui()),l.activeOverlay=c,l.destroyRequested&&(l.destroyRequested=!1,l.destroyActiveOverlay())}),this.setDisplayed(!0))},i.prototype.destroyActiveOverlay=function(){this.inProgress?this.destroyRequested=!0:!this.activeOverlay||(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),ao(this.eOverlayWrapper))},i.prototype.hideOverlay=function(){this.destroyActiveOverlay(),this.setDisplayed(!1)},i.prototype.destroy=function(){this.destroyActiveOverlay(),d.prototype.destroy.call(this)},i.prototype.showOrHideOverlay=function(){var e=this.paginationProxy.isEmpty(),s=this.gridOptionsWrapper.isSuppressNoRowsOverlay();e&&!s?this.showNoRowsOverlay():this.hideOverlay()},i.prototype.onRowDataChanged=function(){this.showOrHideOverlay()},i.prototype.onNewColumnsLoaded=function(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&this.hideOverlay()},i.TEMPLATE='\n        <div class="ag-overlay" aria-hidden="true">\n            <div class="ag-overlay-panel">\n                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>\n            </div>\n        </div>',ic([B("userComponentFactory")],i.prototype,"userComponentFactory",void 0),ic([B("paginationProxy")],i.prototype,"paginationProxy",void 0),ic([B("gridApi")],i.prototype,"gridApi",void 0),ic([B("columnModel")],i.prototype,"columnModel",void 0),ic([Be("eOverlayWrapper")],i.prototype,"eOverlayWrapper",void 0),ic([Qe],i.prototype,"postConstruct",null),i}(dn),Pw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),au=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Iw=function(d){function i(e){void 0===e&&(e={});var s=d.call(this,i.getTemplate(e))||this;s.suppressEnabledCheckbox=!0,s.suppressOpenCloseIcons=!1;var c=e.enabled,p=e.items,m=e.suppressEnabledCheckbox,w=e.suppressOpenCloseIcons;return s.title=e.title,s.cssIdentifier=e.cssIdentifier||"default",s.enabled=null==c||c,s.items=p||[],s.alignItems=e.alignItems||"center",null!=m&&(s.suppressEnabledCheckbox=m),null!=w&&(s.suppressOpenCloseIcons=w),s}return Pw(i,d),i.getTemplate=function(e){var s=e.cssIdentifier||"default";return'<div class="ag-group ag-'+s+'-group" role="presentation">\n            <div class="ag-group-title-bar ag-'+s+'-group-title-bar ag-unselectable" ref="eTitleBar" role="button">\n                <span class="ag-group-title-bar-icon ag-'+s+'-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>\n                <span class="ag-group-title-bar-icon ag-'+s+'-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>\n                <span ref="eTitle" class="ag-group-title ag-'+s+'-group-title"></span>\n            </div>\n            <div ref="eToolbar" class="ag-group-toolbar ag-'+s+'-group-toolbar">\n                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>\n            </div>\n            <div ref="eContainer" class="ag-group-container ag-group-container-'+(e.direction||"vertical")+" ag-"+s+'-group-container"></div>\n        </div>'},i.prototype.postConstruct=function(){if(this.items.length){var e=this.items;this.items=[],this.addItems(e)}var s=this.gridOptionsWrapper.getLocaleTextFunc();this.cbGroupEnabled.setLabel(s("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()},i.prototype.setupExpandContract=function(){var e=this;this.eGroupClosedIcon.appendChild(Wo("columnSelectClosed",this.gridOptionsWrapper,null)),this.eGroupOpenedIcon.appendChild(Wo("columnSelectOpen",this.gridOptionsWrapper,null)),this.addManagedListener(this.eTitleBar,"click",function(){return e.toggleGroupExpand()}),this.addManagedListener(this.eTitleBar,"keydown",function(s){switch(s.keyCode){case $e.ENTER:case $e.SPACE:s.preventDefault(),e.toggleGroupExpand();break;case $e.RIGHT:case $e.LEFT:s.preventDefault(),e.toggleGroupExpand(s.keyCode===$e.RIGHT)}})},i.prototype.refreshAriaStatus=function(){this.suppressOpenCloseIcons||jf(this.eTitleBar,this.expanded)},i.prototype.refreshChildDisplay=function(){var e=!this.suppressOpenCloseIcons;jn(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),jn(this.eGroupOpenedIcon,e&&this.expanded),jn(this.eGroupClosedIcon,e&&!this.expanded)},i.prototype.isExpanded=function(){return this.expanded},i.prototype.setAlignItems=function(e){var s=this.getGui();return this.alignItems!==e&&gi(s,"ag-group-item-alignment-"+this.alignItems),this.alignItems=e,Tt(s,"ag-group-item-alignment-"+this.alignItems),this},i.prototype.toggleGroupExpand=function(e){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),jn(this.eContainer,!0),this):(this.expanded===(e=null!=e?e:!this.expanded)||(this.expanded=e,this.refreshAriaStatus(),this.refreshChildDisplay(),jn(this.eContainer,e),this.dispatchEvent({type:this.expanded?i.EVENT_EXPANDED:i.EVENT_COLLAPSED})),this)},i.prototype.addItems=function(e){var s=this;e.forEach(function(l){return s.addItem(l)})},i.prototype.addItem=function(e){var s=this.eContainer,l=e instanceof dn?e.getGui():e;Tt(l,"ag-group-item"),Tt(l,"ag-"+this.cssIdentifier+"-group-item"),s.appendChild(l),this.items.push(l)},i.prototype.hideItem=function(e,s){Lt(this.items[s],"ag-hidden",e)},i.prototype.setTitle=function(e){return this.eTitle.innerText=e,this},i.prototype.addCssClassToTitleBar=function(e){Tt(this.eTitleBar,e)},i.prototype.setEnabled=function(e,s){return this.enabled=e,this.refreshDisabledStyles(),this.toggleGroupExpand(e),s||this.cbGroupEnabled.setValue(e),this},i.prototype.isEnabled=function(){return this.enabled},i.prototype.onEnableChange=function(e){var s=this;return this.cbGroupEnabled.onValueChange(function(l){s.setEnabled(l,!0),e(l)}),this},i.prototype.hideEnabledCheckbox=function(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this},i.prototype.hideOpenCloseIcons=function(e){return this.suppressOpenCloseIcons=e,e&&this.toggleGroupExpand(!0),this},i.prototype.refreshDisabledStyles=function(){Lt(this.getGui(),"ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(Tt(this.eTitleBar,"ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(gi(this.eTitleBar,"ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),Lt(this.eContainer,"ag-disabled-group-container",!this.enabled)},i.EVENT_EXPANDED="expanded",i.EVENT_COLLAPSED="collapsed",au([Be("eTitleBar")],i.prototype,"eTitleBar",void 0),au([Be("eGroupOpenedIcon")],i.prototype,"eGroupOpenedIcon",void 0),au([Be("eGroupClosedIcon")],i.prototype,"eGroupClosedIcon",void 0),au([Be("eToolbar")],i.prototype,"eToolbar",void 0),au([Be("cbGroupEnabled")],i.prototype,"cbGroupEnabled",void 0),au([Be("eTitle")],i.prototype,"eTitle",void 0),au([Be("eContainer")],i.prototype,"eContainer",void 0),au([Qe],i.prototype,"postConstruct",null),i}(dn),qx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Yp=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Pd=function(d){function i(e,s){var l=d.call(this)||this;return l.element=e,l.dragStartPosition={x:0,y:0},l.position={x:0,y:0},l.lastSize={width:-1,height:-1},l.positioned=!1,l.resizersAdded=!1,l.resizeListeners=[],l.boundaryEl=null,l.isResizing=!1,l.isMoving=!1,l.resizable={},l.movable=!1,l.currentResizer=null,l.config=ti({},{popup:!1},s),l}return qx(i,d),i.prototype.center=function(){var e=this.offsetParent,s=e.clientHeight,c=e.clientWidth/2-this.getWidth()/2,p=s/2-this.getHeight()/2;this.offsetElement(c,p)},i.prototype.initialisePosition=function(){var e=this.config,s=e.centered,l=e.forcePopupParentAsOffsetParent,c=e.minWidth,p=e.width,m=e.minHeight,w=e.height,x=e.x,A=e.y;this.offsetParent||this.setOffsetParent();var I=0,U=0,Y=!!this.element.offsetParent;if(Y){var Q=this.findBoundaryElement(),oe=window.getComputedStyle(Q);if(null!=oe.minWidth){var xe=Q.offsetWidth-this.element.offsetWidth;U=parseInt(oe.minWidth,10)-xe}if(null!=oe.minHeight){var He=Q.offsetHeight-this.element.offsetHeight;I=parseInt(oe.minHeight,10)-He}}if(this.minHeight=m||I,this.minWidth=c||U,p&&this.setWidth(p),w&&this.setHeight(w),(!p||!w)&&this.refreshSize(),s)this.center();else if(x||A)this.offsetElement(x,A);else if(Y&&l&&this.boundaryEl){var Ve=parseFloat(this.boundaryEl.style.top),Me=parseFloat(this.boundaryEl.style.left);this.offsetElement(isNaN(Me)?0:Me,isNaN(Ve)?0:Ve)}this.positioned=!!this.offsetParent},i.prototype.isPositioned=function(){return this.positioned},i.prototype.getPosition=function(){return this.position},i.prototype.setMovable=function(e,s){if(this.config.popup&&e!==this.movable){this.movable=e;var l=this.moveElementDragListener||{eElement:s,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(l),this.moveElementDragListener=l):(this.dragService.removeDragSource(l),this.moveElementDragListener=void 0)}},i.prototype.setResizable=function(e){var s=this;if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"==typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(function(l){var p=!!e[l],m=s.getResizerElement(l),w={dragStartPixels:0,eElement:m,onDragStart:function(A){return s.onResizeStart(A,l)},onDragging:s.onResize.bind(s),onDragStop:function(A){return s.onResizeEnd(A,l)}};(!!s.resizable[l]!==p||!s.isAlive()&&!p)&&(p?(s.dragService.addDragSource(w),s.resizeListeners.push(w),m.style.pointerEvents="all"):m.style.pointerEvents="none")})},i.prototype.removeSizeFromEl=function(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")},i.prototype.restoreLastSize=function(){this.element.style.flex="0 0 auto";var e=this.lastSize,s=e.height,l=e.width;-1!==l&&(this.element.style.width=l+"px"),-1!==s&&(this.element.style.height=s+"px")},i.prototype.getHeight=function(){return this.element.offsetHeight},i.prototype.setHeight=function(e){var s=this.config.popup,l=this.element,c=!1;if("string"==typeof e&&-1!==e.indexOf("%"))st(l,e),e=Iu(l),c=!0;else if(this.positioned){var p=this.element.getBoundingClientRect(),m=this.offsetParent.getBoundingClientRect();e=Math.max(this.minHeight,e);var w=this.offsetParent.clientHeight,x=s?this.position.y:p.top;w&&e+x>w+(s?0:m.top)&&(e=w-x)}this.getHeight()!==e&&(c?(l.style.maxHeight="unset",l.style.minHeight="unset"):s?st(l,e):(l.style.height=e+"px",l.style.flex="0 0 auto",this.lastSize.height="number"==typeof e?e:parseFloat(e)))},i.prototype.getWidth=function(){return this.element.offsetWidth},i.prototype.setWidth=function(e){var s=this.element,l=this.config.popup,c=!1;if("string"==typeof e&&-1!==e.indexOf("%"))Ma(s,e),e=Wf(s),c=!0;else if(this.positioned){e=Math.max(this.minWidth,e);var p=this.offsetParent.clientWidth,m=l?this.position.x:this.element.getBoundingClientRect().left;p&&e+m>p&&(e=p-m)}this.getWidth()!==e&&(c?(s.style.maxWidth="unset",s.style.minWidth="unset"):this.config.popup?Ma(s,e):(s.style.width=e+"px",s.style.flex=" unset",this.lastSize.width="number"==typeof e?e:parseFloat(e)))},i.prototype.offsetElement=function(e,s){void 0===e&&(e=0),void 0===s&&(s=0);var l=this.config.forcePopupParentAsOffsetParent?this.boundaryEl:this.element;this.popupService.positionPopup({ePopup:l,x:e,y:s,keepWithinBounds:!0}),this.setPosition(parseFloat(l.style.left),parseFloat(l.style.top))},i.prototype.setPosition=function(e,s){this.position.x=e,this.position.y=s},i.prototype.updateDragStartPosition=function(e,s){this.dragStartPosition={x:e,y:s}},i.prototype.calculateMouseMovement=function(e){var s=e.e,c=e.isTop,m=e.topBuffer,w=s.clientX-this.dragStartPosition.x,x=s.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(s,!!e.isLeft,!!e.anywhereWithin,w)?0:w,movementY:this.shouldSkipY(s,!!c,m,x)?0:x}},i.prototype.shouldSkipX=function(e,s,l,c){var p=this.element.getBoundingClientRect(),m=this.offsetParent.getBoundingClientRect(),w=this.boundaryEl.getBoundingClientRect(),x=this.config.popup?this.position.x:p.left,A=x<=0&&m.left>=e.clientX||m.right<=e.clientX&&m.right<=w.right;return!!A||(s?c<0&&e.clientX>x+m.left||c>0&&e.clientX<x+m.left:l?c<0&&e.clientX>w.right||c>0&&e.clientX<x+m.left:c<0&&e.clientX>w.right||c>0&&e.clientX<w.right)},i.prototype.shouldSkipY=function(e,s,l,c){void 0===l&&(l=0);var p=this.element.getBoundingClientRect(),m=this.offsetParent.getBoundingClientRect(),w=this.boundaryEl.getBoundingClientRect(),x=this.config.popup?this.position.y:p.top,A=x<=0&&m.top>=e.clientY||m.bottom<=e.clientY&&m.bottom<=w.bottom;return!!A||(s?c<0&&e.clientY>x+m.top+l||c>0&&e.clientY<x+m.top:c<0&&e.clientY>w.bottom||c>0&&e.clientY<w.bottom)},i.prototype.createResizeMap=function(){var e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}},i.prototype.addResizers=function(){if(!this.resizersAdded){var e=this.element;if(e){var l=(new DOMParser).parseFromString('<div class="ag-resizer-wrapper">\n        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>',"text/html").body;e.appendChild(l.firstChild),this.createResizeMap(),this.resizersAdded=!0}}},i.prototype.removeResizers=function(){this.resizerMap=void 0;var e=this.element.querySelector(".ag-resizer-wrapper");e&&this.element.removeChild(e),this.resizersAdded=!1},i.prototype.getResizerElement=function(e){return this.resizerMap[e].element},i.prototype.onResizeStart=function(e,s){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!s.match(/top/i),isRight:!!s.match(/right/i),isBottom:!!s.match(/bottom/i),isLeft:!!s.match(/left/i)},Tt(this.element,"ag-resizing"),Tt(this.resizerMap[s].element,"ag-active");var l=this.config;!l.popup&&!l.forcePopupParentAsOffsetParent&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)},i.prototype.getSiblings=function(){var s=this.element.parentElement;return s?Array.prototype.slice.call(s.children).filter(function(l){return!fs(l,"ag-hidden")}):null},i.prototype.getMinSizeOfSiblings=function(){for(var e=this.getSiblings()||[],s=0,l=0,c=0;c<e.length;c++){var p=e[c];if(p!==this.element){var w=this.minHeight||0,x=this.minWidth||0;if(p.style.flex&&"0 0 auto"!==p.style.flex){var A=window.getComputedStyle(p);A.minHeight&&(w=parseInt(A.minHeight,10)),A.minWidth&&(x=parseInt(A.minWidth,10))}else w=p.offsetHeight,x=p.offsetWidth;s+=w,l+=x}}return{height:s,width:l}},i.prototype.applySizeToSiblings=function(e){var s=null,l=this.getSiblings();if(l){for(var c=0;c<l.length;c++){var p=l[c];p!==s&&(e?p.style.height=p.offsetHeight+"px":p.style.width=p.offsetWidth+"px",p.style.flex="0 0 auto",p===this.element&&(s=l[c+1]))}s&&(s.style.removeProperty("height"),s.style.removeProperty("min-height"),s.style.removeProperty("max-height"),s.style.flex="1 1 auto")}},i.prototype.onResize=function(e){if(this.isResizing&&this.currentResizer){var s=this.config,l=s.popup,c=s.forcePopupParentAsOffsetParent,p=this.currentResizer,m=p.isTop,A=p.isLeft,I=p.isRight||A,U=p.isBottom||m,Y=this.calculateMouseMovement({e:e,isLeft:A,isTop:m}),Q=Y.movementX,oe=Y.movementY,xe=this.position.x,He=this.position.y,Ve=0,Me=0;if(I&&Q){var Ze=A?-1:1,Fe=this.getWidth(),rn=Fe+Q*Ze,kt=!1;A&&(xe+(Ve=Fe-rn)<=0||rn<=this.minWidth)&&(kt=!0,Ve=0),kt||this.setWidth(rn)}if(U&&oe){Ze=m?-1:1;var vn=this.getHeight(),qn=vn+oe*Ze,Jn=!1;m?(He+(Me=vn-qn)<=0||qn<=this.minHeight)&&(Jn=!0,Me=0):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&vn<qn&&this.getMinSizeOfSiblings().height+qn>this.element.parentElement.offsetHeight&&(Jn=!0),Jn||this.setHeight(qn)}this.updateDragStartPosition(e.clientX,e.clientY),((l||c)&&Ve||Me)&&this.offsetElement(xe+Ve,He+Me)}},i.prototype.onResizeEnd=function(e,s){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;var l={type:"resize",api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()};gi(this.element,"ag-resizing"),gi(this.resizerMap[s].element,"ag-active"),this.dispatchEvent(l)},i.prototype.refreshSize=function(){var e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))},i.prototype.onMoveStart=function(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,Tt(this.element,"ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)},i.prototype.onMove=function(e){if(this.isMoving){var p,s=this.position,l=s.x,c=s.y;this.config.calculateTopBuffer&&(p=this.config.calculateTopBuffer());var m=this.calculateMouseMovement({e:e,isTop:!0,anywhereWithin:!0,topBuffer:p});this.offsetElement(l+m.movementX,c+m.movementY),this.updateDragStartPosition(e.clientX,e.clientY)}},i.prototype.onMoveEnd=function(){this.isMoving=!1,this.boundaryEl=null,gi(this.element,"ag-moving")},i.prototype.setOffsetParent=function(){this.offsetParent=this.config.forcePopupParentAsOffsetParent?this.popupService.getPopupParent():this.element.offsetParent},i.prototype.findBoundaryElement=function(){for(var e=this.element;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element},i.prototype.clearResizeListeners=function(){for(;this.resizeListeners.length;){var e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}},i.prototype.destroy=function(){d.prototype.destroy.call(this),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.clearResizeListeners(),this.removeResizers()},Yp([B("popupService")],i.prototype,"popupService",void 0),Yp([B("dragService")],i.prototype,"dragService",void 0),i}(Ye),im=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Id=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ld=function(d){function i(e){var s=d.call(this,i.getTemplate(e))||this;return s.closable=!0,s.config=e,s}return im(i,d),i.getTemplate=function(e){var s=e&&e.cssIdentifier||"default";return'<div class="ag-panel ag-'+s+'-panel" tabindex="-1">\n            <div ref="eTitleBar" class="ag-panel-title-bar ag-'+s+'-panel-title-bar ag-unselectable">\n                <span ref="eTitle" class="ag-panel-title-bar-title ag-'+s+'-panel-title-bar-title"></span>\n                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-'+s+'-panel-title-bar-buttons"></div>\n            </div>\n            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-'+s+'-panel-content-wrapper"></div>\n        </div>'},i.prototype.postConstruct=function(){var e=this,s=this.config,l=s.component,c=s.closable,p=s.hideTitleBar,m=s.title,w=s.minWidth,x=void 0===w?250:w,A=s.width,I=s.minHeight,U=void 0===I?250:I,Y=s.height,Q=s.centered,oe=s.popup,xe=s.x,He=s.y;this.positionableFeature=new Pd(this.getGui(),{minWidth:x,width:A,minHeight:U,height:Y,centered:Q,x:xe,y:He,popup:oe,calculateTopBuffer:function(){return e.positionableFeature.getHeight()-e.getBodyHeight()}}),this.createManagedBean(this.positionableFeature);var Ve=this.getGui();l&&this.setBodyComponent(l),p?Tt(this.eTitleBar,"ag-hidden"):(m&&this.setTitle(m),this.setClosable(null!=c?c:this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",function(Me){if(Ve.contains(Me.relatedTarget)||Ve.contains(document.activeElement)||e.eTitleBarButtons.contains(Me.target))Me.preventDefault();else{var Ze=e.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");Ze&&Ze.focus()}}),(!oe||!this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")},i.prototype.renderComponent=function(){var e=this,s=this.getGui();s.focus(),this.close=function(){s.parentElement.removeChild(s),e.destroy()}},i.prototype.getHeight=function(){return this.positionableFeature.getHeight()},i.prototype.setHeight=function(e){this.positionableFeature.setHeight(e)},i.prototype.getWidth=function(){return this.positionableFeature.getWidth()},i.prototype.setWidth=function(e){this.positionableFeature.setWidth(e)},i.prototype.setClosable=function(e){if(e!==this.closable&&(this.closable=e),e){var s=this.closeButtonComp=new dn(i.CLOSE_BTN_TEMPLATE);this.getContext().createBean(s),(l=s.getGui()).appendChild(Tt(oi("close",this.gridOptionsWrapper),"ag-panel-title-bar-button-icon")),this.addTitleBarButton(s),s.addManagedListener(l,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){var l;(l=this.closeButtonComp.getGui()).parentElement.removeChild(l),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}},i.prototype.setBodyComponent=function(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())},i.prototype.addTitleBarButton=function(e,s){var l=this.eTitleBarButtons,c=l.children,p=c.length;null==s&&(s=p),s=Math.max(0,Math.min(s,p));var m=e.getGui();Tt(m,"ag-panel-title-bar-button"),0===s?l.insertAdjacentElement("afterbegin",m):s===p?l.insertAdjacentElement("beforeend",m):c[s-1].insertAdjacentElement("afterend",m),e.setParentComponent(this)},i.prototype.getBodyHeight=function(){return Rl(this.eContentWrapper)},i.prototype.getBodyWidth=function(){return Bo(this.eContentWrapper)},i.prototype.setTitle=function(e){this.eTitle.innerText=e},i.prototype.onBtClose=function(){this.close()},i.prototype.destroy=function(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));var e=this.getGui();e&&e.offsetParent&&this.close(),d.prototype.destroy.call(this)},i.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',Id([Be("eContentWrapper")],i.prototype,"eContentWrapper",void 0),Id([Be("eTitleBar")],i.prototype,"eTitleBar",void 0),Id([Be("eTitleBarButtons")],i.prototype,"eTitleBarButtons",void 0),Id([Be("eTitle")],i.prototype,"eTitle",void 0),Id([Qe],i.prototype,"postConstruct",null),i}(dn),om=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Fd=function(){return Fd=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},Fd.apply(this,arguments)},am=function(d){function i(e){var s=d.call(this,Fd(Fd({},e),{popup:!0}))||this;return s.isMaximizable=!1,s.isMaximized=!1,s.maximizeListeners=[],s.resizeListenerDestroy=null,s.lastPosition={x:0,y:0,width:0,height:0},s}return om(i,d),i.prototype.postConstruct=function(){var e=this,s=this.getGui(),l=this.config,c=l.movable,p=l.resizable,m=l.maximizable;Tt(s,"ag-dialog"),d.prototype.postConstruct.call(this),this.addManagedListener(s,"focusin",function(w){s.contains(w.relatedTarget)||e.popupService.bringPopupToFront(s)}),c&&this.setMovable(c),m&&this.setMaximizable(m),p&&this.setResizable(p)},i.prototype.renderComponent=function(){var e=this.getGui(),s=this.config,l=s.alwaysOnTop,c=s.modal,p=s.title,m=this.gridOptionsWrapper.getLocaleTextFunc(),w=this.popupService.addPopup({modal:c,eChild:e,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop:l,ariaLabel:p||m("ariaLabelDialog","Dialog")});w&&(this.close=w.hideFunc)},i.prototype.toggleMaximize=function(){var e=this.positionableFeature.getPosition();if(this.isMaximized){var s=this.lastPosition,l=s.x,c=s.y,m=s.height;this.setWidth(s.width),this.setHeight(m),this.positionableFeature.offsetElement(l,c)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},i.prototype.refreshMaximizeIcon=function(){jn(this.maximizeIcon,!this.isMaximized),jn(this.minimizeIcon,this.isMaximized)},i.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(function(e){return e()}),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},i.prototype.destroy=function(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),d.prototype.destroy.call(this)},i.prototype.setResizable=function(e){this.positionableFeature.setResizable(e)},i.prototype.setMovable=function(e){this.positionableFeature.setMovable(e,this.eTitleBar)},i.prototype.setMaximizable=function(e){var s=this;if(!e)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));var l=this.eTitleBar;if(l&&e!==this.isMaximizable){var c=this.maximizeButtonComp=this.createBean(new dn('<div class="ag-dialog-button"></span>')),p=c.getGui();p.appendChild(this.maximizeIcon=oi("maximize",this.gridOptionsWrapper)),Tt(this.maximizeIcon,"ag-panel-title-bar-button-icon"),p.appendChild(this.minimizeIcon=oi("minimize",this.gridOptionsWrapper)),Tt(this.minimizeIcon,"ag-panel-title-bar-button-icon"),Tt(this.minimizeIcon,"ag-hidden"),c.addManagedListener(p,"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(c,0),this.maximizeListeners.push(this.addManagedListener(l,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",function(){s.isMaximized=!1,s.refreshMaximizeIcon()})}},function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([B("popupService")],i.prototype,"popupService",void 0),i}(Ld),sm=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Fw=function(d){function i(e,s,l){return void 0===s&&(s="ag-text-field"),void 0===l&&(l="text"),d.call(this,e,s,l)||this}return sm(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this),this.config.allowedCharPattern&&this.preventDisallowedCharacters()},i.prototype.setValue=function(e,s){var l=d.prototype.setValue.call(this,e,s);return this.eInput.value!==e&&(this.eInput.value=Le(e)?e:""),l},i.prototype.preventDisallowedCharacters=function(){var e=new RegExp("["+this.config.allowedCharPattern+"]");this.addManagedListener(this.eInput,"keypress",function(c){c.key&&!e.test(c.key)&&c.preventDefault()}),this.addManagedListener(this.eInput,"paste",function(l){Yt(l.clipboardData.getData("text"),function(p){return!e.test(p)})&&l.preventDefault()})},i}(Na),$x=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),um=function(d){function i(e){return d.call(this,e,"ag-text-area",null,"textarea")||this}return $x(i,d),i.prototype.setValue=function(e,s){var l=d.prototype.setValue.call(this,e,s);return this.eInput.value=e,l},i.prototype.setCols=function(e){return this.eInput.cols=e,this},i.prototype.setRows=function(e){return this.eInput.rows=e,this},i}(Na),Nw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Nd=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},lm=function(d){function i(e){var s=d.call(this,e,i.TEMPLATE)||this;return s.labelAlignment="top",s}return Nw(i,d),i.prototype.init=function(){Tt(this.eSlider.getGui(),"ag-slider-field")},i.prototype.onValueChange=function(e){var s=this,l=sa.EVENT_CHANGED;return this.addManagedListener(this.eText,l,function(){var c=parseFloat(s.eText.getValue());s.eSlider.setValue(c.toString(),!0),e(c||0)}),this.addManagedListener(this.eSlider,l,function(){var c=s.eSlider.getValue();s.eText.setValue(c,!0),e(parseFloat(c))}),this},i.prototype.setSliderWidth=function(e){return this.eSlider.setWidth(e),this},i.prototype.setTextFieldWidth=function(e){return this.eText.setWidth(e),this},i.prototype.setMinValue=function(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this},i.prototype.setMaxValue=function(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this},i.prototype.getValue=function(){return this.eText.getValue()},i.prototype.setValue=function(e){return this.getValue()===e||(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),this.dispatchEvent({type:sa.EVENT_CHANGED})),this},i.prototype.setStep=function(e){return this.eSlider.setStep(e),this.eText.setStep(e),this},i.TEMPLATE='<div class="ag-slider">\n            <label ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range ref="eSlider"></ag-input-range>\n                <ag-input-number-field ref="eText"></ag-input-number-field>\n            </div>\n        </div>',Nd([Be("eLabel")],i.prototype,"eLabel",void 0),Nd([Be("eSlider")],i.prototype,"eSlider",void 0),Nd([Be("eText")],i.prototype,"eText",void 0),Nd([Qe],i.prototype,"init",null),i}(aa),kw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Si=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Kp=function(d){function i(e){var s=d.call(this,i.TEMPLATE)||this;return s.H=1,s.S=1,s.B=1,s.A=1,s.isSpectrumDragging=!1,s.isSpectrumHueDragging=!1,s.isSpectrumAlphaDragging=!1,s.colorChanged=!1,s.picker=e.picker,s}return kw(i,d),i.prototype.postConstruct=function(){var e=this.getGui();this.initRecentColors(),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(e,"mousemove",this.onSpectrumDraggerMove.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(e,"mousemove",this.onSpectrumHueMove.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addManagedListener(e,"mousemove",this.onSpectrumAlphaMove.bind(this)),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this))},i.prototype.refreshSpectrumRect=function(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()},i.prototype.refreshHueRect=function(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()},i.prototype.refreshAlphaRect=function(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()},i.prototype.onSpectrumDraggerDown=function(e){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)},i.prototype.onSpectrumDraggerMove=function(e){this.isSpectrumDragging&&this.moveDragger(e)},i.prototype.onSpectrumHueDown=function(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)},i.prototype.onSpectrumHueMove=function(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)},i.prototype.onSpectrumAlphaDown=function(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)},i.prototype.onSpectrumAlphaMove=function(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)},i.prototype.onMouseUp=function(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1},i.prototype.moveDragger=function(e){var s=this.spectrumValRect;if(s){var l=e.clientX-s.left,c=e.clientY-s.top;l=Math.max(l,0),l=Math.min(l,s.width),c=Math.max(c,0),c=Math.min(c,s.height),this.setSpectrumValue(l/s.width,1-c/s.height)}},i.prototype.moveHueSlider=function(e){var s=this.spectrumHueRect;if(s){var l=this.spectrumHueSlider,c=l.getBoundingClientRect(),p=e.clientX-s.left;p=Math.max(p,0),p=Math.min(p,s.width),this.H=1-p/s.width,l.style.left=p+c.width/2+"px",this.update()}},i.prototype.moveAlphaSlider=function(e){var s=this.spectrumAlphaRect;if(s){var l=this.spectrumAlphaSlider,c=l.getBoundingClientRect(),p=e.clientX-s.left;p=Math.max(p,0),p=Math.min(p,s.width),this.A=p/s.width,l.style.left=p+c.width/2+"px",this.update()}},i.prototype.update=function(){var e=Uc.fromHSB(360*this.H,this.S,this.B,this.A),s=Uc.fromHSB(360*this.H,1,1),l=e.toRgbaString(),c=this.picker;Uc.fromString(c.getValue()).toRgbaString()!==l&&(this.colorChanged=!0),c.setValue(l),this.spectrumColor.style.backgroundColor=s.toRgbaString(),this.spectrumDragger.style.backgroundColor=l},i.prototype.setSpectrumValue=function(e,s){var l=this.spectrumValRect||this.refreshSpectrumRect();if(l){var c=this.spectrumDragger,p=c.getBoundingClientRect();e=Math.max(0,e),e=Math.min(1,e),s=Math.max(0,s),s=Math.min(1,s),this.S=e,this.B=s,c.style.left=e*l.width-p.width/2+"px",c.style.top=(1-s)*l.height-p.height/2+"px",this.update()}},i.prototype.initRecentColors=function(){var s=i.recentColors.map(function(l,c){return'<div class="ag-recent-color" id='+c+' style="background-color: '+l+'; width: 15px; height: 15px;" recent-color="'+l+'"></div>'});this.recentColors.innerHTML=s.join("")},i.prototype.setValue=function(e){var s=Uc.fromString(e),l=s.toHSB(),c=l[0],p=l[1],m=l[2];this.H=(isNaN(c)?0:c)/360,this.A=s.a;var w=this.spectrumHueRect||this.refreshHueRect(),x=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=(this.H-1)*-w.width+"px",this.spectrumAlphaSlider.style.left=this.A*x.width+"px",this.setSpectrumValue(p,m)},i.prototype.onRecentColorClick=function(e){var s=e.target;if(Le(s.id)){var l=parseInt(s.id,10);this.setValue(i.recentColors[l]),this.destroy()}},i.prototype.addRecentColor=function(){var s=Uc.fromHSB(360*this.H,this.S,this.B,this.A).toRgbaString(),l=i.recentColors;!this.colorChanged||l[0]===s||(l=l.filter(function(c){return c!=s}),(l=[s].concat(l)).length>i.maxRecentColors&&(l=l.slice(0,i.maxRecentColors)),i.recentColors=l)},i.prototype.destroy=function(){this.addRecentColor(),d.prototype.destroy.call(this)},i.maxRecentColors=8,i.recentColors=[],i.TEMPLATE='<div class="ag-color-panel">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>',Si([Be("spectrumColor")],i.prototype,"spectrumColor",void 0),Si([Be("spectrumVal")],i.prototype,"spectrumVal",void 0),Si([Be("spectrumDragger")],i.prototype,"spectrumDragger",void 0),Si([Be("spectrumHue")],i.prototype,"spectrumHue",void 0),Si([Be("spectrumHueSlider")],i.prototype,"spectrumHueSlider",void 0),Si([Be("spectrumAlpha")],i.prototype,"spectrumAlpha",void 0),Si([Be("spectrumAlphaSlider")],i.prototype,"spectrumAlphaSlider",void 0),Si([Be("recentColors")],i.prototype,"recentColors",void 0),Si([Qe],i.prototype,"postConstruct",null),i}(dn),Xx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Gw=function(d){function i(e){var s=d.call(this,e,"ag-color-picker","colorPicker")||this;return e&&e.color&&(s.value=e.color),s}return Xx(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this),this.value&&this.setValue(this.value)},i.prototype.showPicker=function(){var e=this,s=this.getGui().getBoundingClientRect(),l=this.createBean(new am({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:s.right-190,y:s.top-250}));this.isPickerDisplayed=!0,Tt(l.getGui(),"ag-color-dialog");var c=this.createBean(new Kp({picker:this}));return c.addDestroyFunc(function(){l.isAlive()&&e.destroyBean(l)}),l.setParentComponent(this),l.setBodyComponent(c),c.setValue(this.getValue()),l.addDestroyFunc(function(){e.isDestroyingPicker?e.isDestroyingPicker=!1:(e.isDestroyingPicker=!0,c.isAlive()&&e.destroyBean(c)),e.isAlive()&&e.getFocusableElement().focus(),e.isPickerDisplayed=!1}),l},i.prototype.setValue=function(e){return this.value===e?this:(this.eDisplayField.style.backgroundColor=e,d.prototype.setValue.call(this,e))},i.prototype.getValue=function(){return this.value},i}(Xf),FM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),$p=function(d){function i(e){return d.call(this,e,"ag-number-field","number")||this}return FM(i,d),i.prototype.postConstruct=function(){var e=this;d.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"blur",function(){var s=parseFloat(e.eInput.value),l=isNaN(s)?"":e.normalizeValue(s.toString());e.value!==l&&e.setValue(l)})},i.prototype.normalizeValue=function(e){if(""===e)return"";this.precision&&(e=this.adjustPrecision(e));var s=parseFloat(e);return null!=this.min&&s<this.min?e=this.min.toString():null!=this.max&&s>this.max&&(e=this.max.toString()),e},i.prototype.adjustPrecision=function(e){if(this.precision){var s=parseFloat(e).toFixed(this.precision);e=parseFloat(s).toString()}return e},i.prototype.setMin=function(e){return this.min===e||(this.min=e,vs(this.eInput,"min",e)),this},i.prototype.setMax=function(e){return this.max===e||(this.max=e,vs(this.eInput,"max",e)),this},i.prototype.setPrecision=function(e){return this.precision=e,this},i.prototype.setStep=function(e){return this.step===e||(this.step=e,vs(this.eInput,"step",e)),this},i.prototype.setValue=function(e,s){return(e=this.adjustPrecision(e))!=this.normalizeValue(e)?this:d.prototype.setValue.call(this,e,s)},i}(Fw),Bw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Xp=function(d){function i(e){return d.call(this,e,"ag-range-field","range")||this}return Bw(i,d),i.prototype.postConstruct=function(){d.prototype.postConstruct.call(this);var e=this.config,s=e.min,l=e.max,c=e.step;null!=s&&this.setMinValue(s),null!=l&&this.setMaxValue(l),this.setStep(c||1)},i.prototype.addInputListeners=function(){var e=this,s=zi();this.addManagedListener(this.eInput,s?"change":"input",function(c){e.setValue(c.target.value)})},i.prototype.setMinValue=function(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this},i.prototype.setMaxValue=function(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this},i.prototype.setStep=function(e){return this.eInput.setAttribute("step",e.toString()),this},i.prototype.setValue=function(e,s){null!=this.min&&(e=Math.max(parseFloat(e),this.min).toString()),null!=this.max&&(e=Math.min(parseFloat(e),this.max).toString());var l=d.prototype.setValue.call(this,e,s);return this.eInput.value=e,l},i}(Na),kd=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Gd=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Jp=function(d){function i(e){var s=d.call(this,e,i.TEMPLATE)||this;return s.radius=0,s.offsetX=0,s.offsetY=0,s}return kd(i,d),i.prototype.postConstruct=function(){var e=this;d.prototype.postConstruct.call(this),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:function(l){e.parentCircleRect=e.eParentCircle.getBoundingClientRect()},onDragging:function(l){return e.calculateAngleDrag(l)},onDragStop:function(){}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(""+this.degrees).onValueChange(function(s){(null==s||""===s)&&(s="0"),s=e.eAngleValue.normalizeValue(s);var l=parseFloat(s);l>180&&(l-=360),e.setValue(l)}),this.updateNumberInput(),Le(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,sa.EVENT_CHANGED,function(){e.eAngleValue.getInputElement().contains(document.activeElement)||e.updateNumberInput()})},i.prototype.updateNumberInput=function(){var e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())},i.prototype.positionChildCircle=function(e){var s=this.parentCircleRect||{width:24,height:24},l=this.eChildCircle,p=s.height/2;l.style.left=s.width/2+8*Math.cos(e)+"px",l.style.top=p+8*Math.sin(e)+"px"},i.prototype.calculatePolar=function(){var e=this.offsetX,s=this.offsetY,l=Math.atan2(s,e);this.degrees=this.toDegrees(l),this.radius=Math.sqrt(e*e+s*s),this.positionChildCircle(l)},i.prototype.calculateCartesian=function(){var e=this.toRadians(this.getValue()),s=this.getRadius();this.setOffsetX(Math.cos(e)*s).setOffsetY(Math.sin(e)*s)},i.prototype.setOffsetX=function(e){return this.offsetX!==e&&(this.offsetX=e,this.calculatePolar()),this},i.prototype.setOffsetY=function(e){return this.offsetY!==e&&(this.offsetY=e,this.calculatePolar()),this},i.prototype.calculateAngleDrag=function(e){var s=this.parentCircleRect,A=Math.atan2(e.clientY-s.top-s.height/2,e.clientX-s.left-s.width/2);this.setValue(A,!0)},i.prototype.toDegrees=function(e){return e/Math.PI*180},i.prototype.toRadians=function(e){return e/180*Math.PI},i.prototype.normalizeNegativeValue=function(e){return e<0?360+e:e},i.prototype.normalizeAngle180=function(e){return(e%=2*Math.PI)<-Math.PI?e+=2*Math.PI:e>=Math.PI&&(e-=2*Math.PI),e},i.prototype.getRadius=function(){return this.radius},i.prototype.setRadius=function(e){return this.radius===e||(this.radius=e,this.calculateCartesian()),this},i.prototype.onValueChange=function(e){var s=this;return this.addManagedListener(this,sa.EVENT_CHANGED,function(){e(s.degrees)}),this},i.prototype.getValue=function(e){return e?this.toRadians(this.degrees):this.degrees},i.prototype.setValue=function(e,s){var l;return l=s?e:this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(l),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(l),this.dispatchEvent({type:sa.EVENT_CHANGED})),this},i.prototype.setWidth=function(e){return Ma(this.getGui(),e),this},i.prototype.destroy=function(){this.dragService.removeDragSource(this.dragListener),d.prototype.destroy.call(this)},i.TEMPLATE='<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>',Gd([Be("eLabel")],i.prototype,"eLabel",void 0),Gd([Be("eParentCircle")],i.prototype,"eParentCircle",void 0),Gd([Be("eChildCircle")],i.prototype,"eChildCircle",void 0),Gd([Be("eAngleValue")],i.prototype,"eAngleValue",void 0),Gd([B("dragService")],i.prototype,"dragService",void 0),i}(aa),Hw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),cm=function(d){function i(e){return d.call(this,e,"ag-toggle-button")||this}return Hw(i,d),i.prototype.setValue=function(e,s){return d.prototype.setValue.call(this,e,s),Lt(this.getGui(),"ag-selected",this.getValue()),this},i}(ju),Vw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Zp=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Qp=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Vw(i,d),i.prototype.getFirstRow=function(){var s,e=0;return this.pinnedRowModel.getPinnedTopRowCount()?s=ce.PINNED_TOP:this.rowModel.getRowCount()?(s=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(s=ce.PINNED_BOTTOM),void 0===s?null:{rowIndex:e,rowPinned:s}},i.prototype.getLastRow=function(){var e,s=null,l=this.pinnedRowModel.getPinnedBottomRowCount(),c=this.pinnedRowModel.getPinnedTopRowCount();return l?(s=ce.PINNED_BOTTOM,e=l-1):this.rowModel.getRowCount()?(s=null,e=this.paginationProxy.getPageLastRow()):c&&(s=ce.PINNED_TOP,e=c-1),void 0===e?null:{rowIndex:e,rowPinned:s}},i.prototype.getRowNode=function(e){switch(e.rowPinned){case ce.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case ce.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},i.prototype.sameRow=function(e,s){return!e&&!s||!(e&&!s||!e&&s)&&e.rowIndex===s.rowIndex&&e.rowPinned==s.rowPinned},i.prototype.before=function(e,s){switch(e.rowPinned){case ce.PINNED_TOP:if(s.rowPinned!==ce.PINNED_TOP)return!0;break;case ce.PINNED_BOTTOM:if(s.rowPinned!==ce.PINNED_BOTTOM)return!1;break;default:if(Le(s.rowPinned))return s.rowPinned!==ce.PINNED_TOP}return e.rowIndex<s.rowIndex},Zp([B("rowModel")],i.prototype,"rowModel",void 0),Zp([B("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Zp([B("paginationProxy")],i.prototype,"paginationProxy",void 0),Zp([ht("rowPositionUtils")],i)}(Ye),Jx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),dm=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return Jx(i,d),i.prototype.createId=function(e){return this.createIdFromValues(e.rowIndex,e.column,e.rowPinned)},i.prototype.createIdFromValues=function(e,s,l){return e+"."+(null==l?"null":l)+"."+s.getId()},i.prototype.equals=function(e,s){return e.column===s.column&&e.rowPinned===s.rowPinned&&e.rowIndex===s.rowIndex},i=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([ht("cellPositionUtils")],i),i}(Ye),oc=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ac=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ww=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return oc(i,d),i.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsWrapper.getPinnedTopRowData()),this.setPinnedBottomRowData(this.gridOptionsWrapper.getPinnedBottomRowData())},i.prototype.isEmpty=function(e){return Qr(e===ce.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows)},i.prototype.isRowsToRender=function(e){return!this.isEmpty(e)},i.prototype.getRowAtPixel=function(e,s){var l=s===ce.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows;if(Qr(l))return 0;for(var c=0;c<l.length;c++){var p=l[c];if(p.rowTop+p.rowHeight-1>=e)return c}return l.length-1},i.prototype.setPinnedTopRowData=function(e){this.pinnedTopRows=this.createNodesFromData(e,!0),this.eventService.dispatchEvent({type:$.EVENT_PINNED_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.setPinnedBottomRowData=function(e){this.pinnedBottomRows=this.createNodesFromData(e,!1),this.eventService.dispatchEvent({type:$.EVENT_PINNED_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.createNodesFromData=function(e,s){var l=this,c=[];if(e){var p=0;e.forEach(function(m,w){var x=new sn(l.beans);x.data=m,x.id=(s?sn.ID_PREFIX_TOP_PINNED:sn.ID_PREFIX_BOTTOM_PINNED)+w,x.rowPinned=s?ce.PINNED_TOP:ce.PINNED_BOTTOM,x.setRowTop(p),x.setRowHeight(l.gridOptionsWrapper.getRowHeightForNode(x).height),x.setRowIndex(w),p+=x.rowHeight,c.push(x)})}return c},i.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},i.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},i.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},i.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},i.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},i.prototype.getPinnedTopRow=function(e){return this.pinnedTopRows[e]},i.prototype.getPinnedBottomRow=function(e){return this.pinnedBottomRows[e]},i.prototype.forEachPinnedTopRow=function(e){Qr(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)},i.prototype.forEachPinnedBottomRow=function(e){Qr(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)},i.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},i.prototype.getTotalHeight=function(e){if(!e||0===e.length)return 0;var s=Vn(e);return s.rowTop+s.rowHeight},ac([B("columnApi")],i.prototype,"columnApi",void 0),ac([B("gridApi")],i.prototype,"gridApi",void 0),ac([B("beans")],i.prototype,"beans",void 0),ac([Qe],i.prototype,"init",null),ac([ht("pinnedRowModel")],i)}(Ye),Qx=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),xs=function(i){this.cellValueChanges=i},fm=function(d){function i(e,s,l){var c=d.call(this,e)||this;return c.initialRange=s,c.finalRange=l,c}return Qx(i,d),i}(xs),Uw=function(){function d(i){this.actionStack=[],this.maxStackSize=i||d.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}return d.prototype.pop=function(){return this.actionStack.pop()},d.prototype.push=function(i){!(i.cellValueChanges&&i.cellValueChanges.length>0)||(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(i))},d.prototype.clear=function(){this.actionStack=[]},d.prototype.getCurrentStackSize=function(){return this.actionStack.length},d.DEFAULT_STACK_SIZE=10,d}(),eR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),su=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Vi=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.cellValueChanges=[],e.activeCellEdit=null,e.activeRowEdit=null,e.isPasting=!1,e.isFilling=!1,e.onCellValueChanged=function(s){var l={column:s.column,rowIndex:s.rowIndex,rowPinned:s.rowPinned},c=null!==e.activeCellEdit&&e.cellPositionUtils.equals(e.activeCellEdit,l),p=null!==e.activeRowEdit&&e.rowPositionUtils.sameRow(e.activeRowEdit,l);if(c||p||e.isPasting||e.isFilling){var I=s.oldValue,U=s.value,Y={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:s.column.getColId(),newValue:U,oldValue:I};e.cellValueChanges.push(Y)}},e.clearStacks=function(){e.undoStack.clear(),e.redoStack.clear()},e}return eR(i,d),i.prototype.init=function(){if(this.gridOptionsWrapper.isUndoRedoCellEditing()){var e=this.gridOptionsWrapper.getUndoRedoCellEditingLimit();e<=0||(this.undoStack=new Uw(e),this.redoStack=new Uw(e),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addManagedListener(this.eventService,$.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,$.EVENT_MODEL_UPDATED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,$.EVENT_ROW_DRAG_END,this.clearStacks))}},i.prototype.getCurrentUndoStackSize=function(){return this.undoStack?this.undoStack.getCurrentStackSize():0},i.prototype.getCurrentRedoStackSize=function(){return this.redoStack?this.redoStack.getCurrentStackSize():0},i.prototype.undo=function(){if(this.undoStack){var e=this.undoStack.pop();!e||!e.cellValueChanges||(this.processAction(e,function(s){return s.oldValue}),e instanceof fm?this.processRangeAndCellFocus(e.cellValueChanges,e.initialRange):this.processRangeAndCellFocus(e.cellValueChanges),this.redoStack.push(e))}},i.prototype.redo=function(){if(this.redoStack){var e=this.redoStack.pop();!e||!e.cellValueChanges||(this.processAction(e,function(s){return s.newValue}),e instanceof fm?this.processRangeAndCellFocus(e.cellValueChanges,e.finalRange):this.processRangeAndCellFocus(e.cellValueChanges),this.undoStack.push(e))}},i.prototype.processAction=function(e,s){var l=this;e.cellValueChanges.forEach(function(c){var w=c.columnId,A=l.getRowNode({rowIndex:c.rowIndex,rowPinned:c.rowPinned});!A.displayed||A.setDataValue(w,s(c))})},i.prototype.processRangeAndCellFocus=function(e,s){var l;if(s){var c=s.startRow,p=s.endRow;return l={rowPinned:c.rowPinned,rowIndex:c.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(l),void this.gridApi.addCellRange({rowStartIndex:c.rowIndex,rowStartPinned:c.rowPinned,rowEndIndex:p.rowIndex,rowEndPinned:p.rowPinned,columnStart:s.startColumn,columns:s.columns})}var w=e[0],U=this.getRowNode({rowIndex:w.rowIndex,rowPinned:w.rowPinned});this.setLastFocusedCell(l={rowPinned:w.rowPinned,rowIndex:U.rowIndex,columnId:w.columnId})},i.prototype.setLastFocusedCell=function(e){var s=e.rowIndex,l=e.columnId,c=e.rowPinned;this.gridApi.ensureIndexVisible(s),this.gridApi.ensureColumnVisible(l),jt.isRegistered(K.GXE.RangeSelectionModule)&&this.gridApi.clearRangeSelection(),this.focusService.setFocusedCell(s,l,c,!0)},i.prototype.addRowEditingListeners=function(){var e=this;this.addManagedListener(this.eventService,$.EVENT_ROW_EDITING_STARTED,function(s){e.activeRowEdit={rowIndex:s.rowIndex,rowPinned:s.rowPinned}}),this.addManagedListener(this.eventService,$.EVENT_ROW_EDITING_STOPPED,function(){var s=new xs(e.cellValueChanges);e.pushActionsToUndoStack(s),e.activeRowEdit=null})},i.prototype.addCellEditingListeners=function(){var e=this;this.addManagedListener(this.eventService,$.EVENT_CELL_EDITING_STARTED,function(s){e.activeCellEdit={column:s.column,rowIndex:s.rowIndex,rowPinned:s.rowPinned}}),this.addManagedListener(this.eventService,$.EVENT_CELL_EDITING_STOPPED,function(){if(e.activeCellEdit=null,!e.activeRowEdit&&!e.isPasting&&!e.isFilling){var l=new xs(e.cellValueChanges);e.pushActionsToUndoStack(l)}})},i.prototype.addPasteListeners=function(){var e=this;this.addManagedListener(this.eventService,$.EVENT_PASTE_START,function(){e.isPasting=!0}),this.addManagedListener(this.eventService,$.EVENT_PASTE_END,function(){var s=new xs(e.cellValueChanges);e.pushActionsToUndoStack(s),e.isPasting=!1})},i.prototype.addFillListeners=function(){var e=this;this.addManagedListener(this.eventService,$.EVENT_FILL_START,function(){e.isFilling=!0}),this.addManagedListener(this.eventService,$.EVENT_FILL_END,function(s){var l=new fm(e.cellValueChanges,s.initialRange,s.finalRange);e.pushActionsToUndoStack(l),e.isFilling=!1})},i.prototype.pushActionsToUndoStack=function(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()},i.prototype.getRowNode=function(e){switch(e.rowPinned){case ce.PINNED_TOP:return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case ce.PINNED_BOTTOM:return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},su([B("focusService")],i.prototype,"focusService",void 0),su([B("gridApi")],i.prototype,"gridApi",void 0),su([B("rowModel")],i.prototype,"rowModel",void 0),su([B("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),su([B("cellPositionUtils")],i.prototype,"cellPositionUtils",void 0),su([B("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),su([Qe],i.prototype,"init",null),su([ht("undoRedoService")],i)}(Ye),tR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),pm=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},zw=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return tR(i,d),i.prototype.findHeader=function(e,s){var l;if(l=e.column instanceof ri?this.columnModel["getDisplayedGroup"+s](e.column):this.columnModel["getDisplayedCol"+s](e.column))return{column:l,headerRowIndex:e.headerRowIndex}},i.prototype.findColAtEdgeForHeaderRow=function(e,s){var l=this.columnModel.getAllDisplayedColumns(),c=l["start"===s?0:l.length-1];if(c){var m=this.ctrlsService.getHeaderRowContainerCtrl(c.getPinned()).getRowType(e);return console.log("level="+e+" type = "+m),m==K.A6C.COLUMN_GROUP?{headerRowIndex:e,column:this.columnModel.getColumnGroupAtLevel(c,e)}:{headerRowIndex:null==m?-1:e,column:c}}},pm([B("columnModel")],i.prototype,"columnModel",void 0),pm([B("ctrlsService")],i.prototype,"ctrlsService",void 0),pm([ht("headerPositionUtils")],i)}(Ye),nR=function(){function d(){}return d.prototype.buildColumnDefs=function(i,e,s){var l=this,c=[],p={};return i.forEach(function(m){for(var x=!0,A=l.createDefFromColumn(m,e,s),I=m.getOriginalParent();I;){var U=null;if(I.isPadding())I=I.getOriginalParent();else{var Y=p[I.getGroupId()];if(Y){Y.children.push(A),x=!1;break}(U=l.createDefFromGroup(I))&&(U.children=[A],p[U.groupId]=U,A=U,I=I.getOriginalParent())}}x&&c.push(A)}),c},d.prototype.createDefFromGroup=function(i){var e=xf(i.getColGroupDef(),["children"]);return e&&(e.groupId=i.getGroupId()),e},d.prototype.createDefFromColumn=function(i,e,s){var l=xf(i.getColDef());return l.colId=i.getColId(),l.width=i.getActualWidth(),l.rowGroup=i.isRowGroupActive(),l.rowGroupIndex=i.isRowGroupActive()?e.indexOf(i):null,l.pivot=i.isPivotActive(),l.pivotIndex=i.isPivotActive()?s.indexOf(i):null,l.aggFunc=i.isValueActive()?i.getAggFunc():null,l.hide=!i.isVisible()||void 0,l.pinned=i.isPinned()?i.getPinned():null,l.sort=i.getSort()?i.getSort():null,l.sortIndex=null!=i.getSortIndex()?i.getSortIndex():null,l},d=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([ht("columnDefFactory")],d),d}(),qw=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},rR=function(){function d(){}return d.prototype.getInitialRowClasses=function(i){var e=[];return Le(i.extraCssClass)&&e.push(i.extraCssClass),e.push("ag-row"),e.push(i.rowFocused?"ag-row-focus":"ag-row-no-focus"),i.fadeRowIn&&e.push("ag-opacity-zero"),e.push(i.rowIsEven?"ag-row-even":"ag-row-odd"),i.rowNode.isRowPinned()&&e.push("ag-row-pinned"),i.rowNode.isSelected()&&e.push("ag-row-selected"),i.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+i.rowLevel),i.rowNode.stub&&e.push("ag-row-loading"),i.fullWidthRow&&e.push("ag-full-width-row"),i.expandable&&(e.push("ag-row-group"),e.push(i.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),i.rowNode.dragging&&e.push("ag-row-dragging"),pt(e,this.processClassesFromGridOptions(i.rowNode,i.scope)),pt(e,this.preProcessRowClassRules(i.rowNode,i.scope)),e.push(i.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),i.firstRowOnPage&&e.push("ag-row-first"),i.lastRowOnPage&&e.push("ag-row-last"),i.fullWidthRow&&(i.pinned===ce.PINNED_LEFT&&e.push("ag-cell-last-left-pinned"),i.pinned===ce.PINNED_RIGHT&&e.push("ag-cell-first-right-pinned")),e},d.prototype.processClassesFromGridOptions=function(i,e){var s=[],l=function(A){"string"==typeof A?s.push(A):Array.isArray(A)&&A.forEach(function(I){return s.push(I)})},c=this.gridOptionsWrapper.getRowClass();if(c){if("function"==typeof c)return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];l(c)}var p=this.gridOptionsWrapper.getRowClassFunc();return p&&l(p({data:i.data,node:i,rowIndex:i.rowIndex,$scope:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()})),s},d.prototype.preProcessRowClassRules=function(i,e){var s=[];return this.processRowClassRules(i,e,function(l){s.push(l)},function(l){}),s},d.prototype.processRowClassRules=function(i,e,s,l){var c={data:i.data,node:i,rowIndex:i.rowIndex,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),$scope:e,context:this.gridOptionsWrapper.getContext()};this.stylingService.processClassRules(this.gridOptionsWrapper.rowClassRules(),c,s,l)},d.prototype.calculateRowLevel=function(i){return i.group?i.level:i.parent?i.parent.level+1:0},qw([B("stylingService")],d.prototype,"stylingService",void 0),qw([B("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),qw([ht("rowCssClassCalculator")],d)}(),iR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),hm=function(d){function i(e){var s=d.call(this)||this;return s.state=i.STATE_WAITING_TO_LOAD,s.version=0,s.id=e,s}return iR(i,d),i.prototype.getId=function(){return this.id},i.prototype.load=function(){this.state=i.STATE_LOADING,this.loadFromDatasource()},i.prototype.getVersion=function(){return this.version},i.prototype.setStateWaitingToLoad=function(){this.version++,this.state=i.STATE_WAITING_TO_LOAD},i.prototype.getState=function(){return this.state},i.prototype.pageLoadFailed=function(e){this.isRequestMostRecentAndLive(e)&&(this.state=i.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)},i.prototype.success=function(e,s){this.successCommon(e,s)},i.prototype.pageLoaded=function(e,s,l){this.successCommon(e,{rowData:s,rowCount:l})},i.prototype.isRequestMostRecentAndLive=function(e){var s=e===this.version,l=this.isAlive();return s&&l},i.prototype.successCommon=function(e,s){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state=i.STATE_LOADED,this.processServerResult(s))},i.prototype.dispatchLoadCompleted=function(e){void 0===e&&(e=!0),this.dispatchEvent({type:i.EVENT_LOAD_COMPLETE,success:e,block:this})},i.EVENT_LOAD_COMPLETE="loadComplete",i.STATE_WAITING_TO_LOAD="needsLoading",i.STATE_LOADING="loading",i.STATE_LOADED="loaded",i.STATE_FAILED="failed",i}(Ye),Yw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Kw=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},oR=function(d,i){return function(e,s){i(e,s,d)}},$w=function(d){function i(){var s=null!==d&&d.apply(this,arguments)||this;return s.activeBlockLoadsCount=0,s.blocks=[],s.active=!0,s}var e;return Yw(i,d),e=i,i.prototype.postConstruct=function(){this.maxConcurrentRequests=this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();var s=this.gridOptionsWrapper.getBlockLoadDebounceMillis();s&&s>0&&(this.checkBlockToLoadDebounce=yt.debounce(this.performCheckBlocksToLoad.bind(this),s))},i.prototype.setBeans=function(s){this.logger=s.create("RowNodeBlockLoader")},i.prototype.addBlock=function(s){this.blocks.push(s),s.addEventListener(hm.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()},i.prototype.removeBlock=function(s){yt.removeFromArray(this.blocks,s)},i.prototype.destroy=function(){d.prototype.destroy.call(this),this.active=!1},i.prototype.loadComplete=function(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),0==this.activeBlockLoadsCount&&this.dispatchEvent({type:e.BLOCK_LOADER_FINISHED_EVENT})},i.prototype.checkBlockToLoad=function(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()},i.prototype.performCheckBlocksToLoad=function(){if(this.active){if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void this.logger.log("checkBlockToLoad: max loads exceeded");var s=null;this.blocks.forEach(function(l){l.getState()===hm.STATE_WAITING_TO_LOAD&&(s=l)}),s&&(s.load(),this.activeBlockLoadsCount++,this.printCacheStatus())}},i.prototype.getBlockState=function(){var s={};return this.blocks.forEach(function(l){var c=l.getBlockStateJson();s[c.id]=c.state}),s},i.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+", blocks = "+JSON.stringify(this.getBlockState()))},i.prototype.isLoading=function(){return this.activeBlockLoadsCount>0},i.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",Kw([Qe],i.prototype,"postConstruct",null),Kw([oR(0,Li("loggerFactory"))],i.prototype,"setBeans",null),e=Kw([ht("rowNodeBlockLoader")],i)}(Ye),eh=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},aR=function(){function d(){}return d.prototype.doFullSort=function(i,e){var l=i.map(function(p,m){return{currentPos:m,rowNode:p}});return l.sort(this.compareRowNodes.bind(this,e)),l.map(function(c){return c.rowNode})},d.prototype.compareRowNodes=function(i,e,s){for(var l=e.rowNode,c=s.rowNode,p=0,m=i.length;p<m;p++){var U,w=i[p],x=w.sort===ce.SORT_DESC,A=this.getValue(l,w.column),I=this.getValue(c,w.column),Y=this.getComparator(w,l);if(U=Y?Y(A,I,l,c,x):yt.defaultComparator(A,I,this.gridOptionsWrapper.isAccentedSort()),!isNaN(U)&&0!==U)return w.sort===ce.SORT_ASC?U:-1*U}return e.currentPos-s.currentPos},d.prototype.getComparator=function(i,e){var s=i.column,l=s.getColDef().comparator;if(null!=l)return l;if(e.rowGroupColumn)return e.rowGroupColumn.getColDef().comparator;if(s.getColDef().showRowGroup){var c=!e.group&&s.getColDef().field;if(c){var p=this.columnModel.getPrimaryColumn(c);if(p)return p.getColDef().comparator}}},d.prototype.getValue=function(i,e){return this.valueService.getValue(e,i,!1,!1)},eh([B("gridOptionsWrapper")],d.prototype,"gridOptionsWrapper",void 0),eh([B("valueService")],d.prototype,"valueService",void 0),eh([B("columnModel")],d.prototype,"columnModel",void 0),eh([ht("rowNodeSorter")],d)}(),NM=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Xw=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.ready=!1,e.readyCallbacks=[],e}return NM(i,d),i.prototype.checkReady=function(){if(this.ready=null!=this.gridCtrl&&null!=this.gridBodyCtrl&&null!=this.centerRowContainerCtrl&&null!=this.leftRowContainerCtrl&&null!=this.rightRowContainerCtrl&&null!=this.bottomCenterRowContainerCtrl&&null!=this.bottomLeftRowContainerCtrl&&null!=this.bottomRightRowContainerCtrl&&null!=this.topCenterRowContainerCtrl&&null!=this.topLeftRowContainerCtrl&&null!=this.topRightRowContainerCtrl&&null!=this.centerHeaderRowContainerCtrl&&null!=this.leftHeaderRowContainerCtrl&&null!=this.rightHeaderRowContainerCtrl&&null!=this.fakeHScrollCtrl&&null!=this.gridHeaderCtrl,this.ready){var e=this.createReadyParams();this.readyCallbacks.forEach(function(s){return s(e)}),this.readyCallbacks.length=0}},i.prototype.whenReady=function(e){this.ready?e(this.createReadyParams()):this.readyCallbacks.push(e)},i.prototype.createReadyParams=function(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollCtrl:this.fakeHScrollCtrl,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}},i.prototype.registerFakeHScrollCtrl=function(e){this.fakeHScrollCtrl=e,this.checkReady()},i.prototype.registerGridHeaderCtrl=function(e){this.gridHeaderCtrl=e,this.checkReady()},i.prototype.registerCenterRowContainerCtrl=function(e){this.centerRowContainerCtrl=e,this.checkReady()},i.prototype.registerLeftRowContainerCtrl=function(e){this.leftRowContainerCtrl=e,this.checkReady()},i.prototype.registerRightRowContainerCtrl=function(e){this.rightRowContainerCtrl=e,this.checkReady()},i.prototype.registerTopCenterRowContainerCtrl=function(e){this.topCenterRowContainerCtrl=e,this.checkReady()},i.prototype.registerTopLeftRowContainerCon=function(e){this.topLeftRowContainerCtrl=e,this.checkReady()},i.prototype.registerTopRightRowContainerCtrl=function(e){this.topRightRowContainerCtrl=e,this.checkReady()},i.prototype.registerBottomCenterRowContainerCtrl=function(e){this.bottomCenterRowContainerCtrl=e,this.checkReady()},i.prototype.registerBottomLeftRowContainerCtrl=function(e){this.bottomLeftRowContainerCtrl=e,this.checkReady()},i.prototype.registerBottomRightRowContainerCtrl=function(e){this.bottomRightRowContainerCtrl=e,this.checkReady()},i.prototype.registerHeaderContainer=function(e,s){switch(s){case ce.PINNED_LEFT:this.leftHeaderRowContainerCtrl=e;break;case ce.PINNED_RIGHT:this.rightHeaderRowContainerCtrl=e;break;default:this.centerHeaderRowContainerCtrl=e}this.checkReady()},i.prototype.registerGridBodyCtrl=function(e){this.gridBodyCtrl=e,this.checkReady()},i.prototype.registerGridCtrl=function(e){this.gridCtrl=e,this.checkReady()},i.prototype.getFakeHScrollCtrl=function(){return this.fakeHScrollCtrl},i.prototype.getGridHeaderCtrl=function(){return this.gridHeaderCtrl},i.prototype.getGridCtrl=function(){return this.gridCtrl},i.prototype.getCenterRowContainerCtrl=function(){return this.centerRowContainerCtrl},i.prototype.getTopCenterRowContainerCtrl=function(){return this.topCenterRowContainerCtrl},i.prototype.getBottomCenterRowContainerCtrl=function(){return this.bottomCenterRowContainerCtrl},i.prototype.getGridBodyCtrl=function(){return this.gridBodyCtrl},i.prototype.getHeaderRowContainerCtrls=function(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]},i.prototype.getHeaderRowContainerCtrl=function(e){switch(e){case ce.PINNED_LEFT:return this.leftHeaderRowContainerCtrl;case ce.PINNED_RIGHT:return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}},i=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([ht("ctrlsService")],i),i}(Ye),Jw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),kM=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.registry={},e}return Jw(i,d),i.prototype.register=function(e){this.registry[e.controllerName]=e.controllerClass},i.prototype.getInstance=function(e){var s=this.registry[e];if(null!=s)return new s},i=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c}([ht("ctrlsFactory")],i),i}(Ye),fa=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),gm=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},GM=function(d){function i(){return d.call(this)||this}return fa(i,d),i.prototype.setComp=function(e,s,l,c){this.view=e,this.eViewport=l,this.eContainer=c,this.eGui=s,this.addManagedListener(this.eventService,$.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged();var p=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,p),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,p),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_DOM_LAYOUT,p),this.setFakeHScrollSpacerWidths(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()),this.ctrlsService.registerFakeHScrollCtrl(this)},i.prototype.addActiveListenerToggles=function(){var e=this;["mouseenter","mousedown","touchstart"].forEach(function(c){return e.addManagedListener(e.eGui,c,function(){return e.view.addOrRemoveCssClass("ag-scrollbar-active",!0)})}),["mouseleave","mouseup","touchend"].forEach(function(c){return e.addManagedListener(e.eGui,c,function(){return e.view.addOrRemoveCssClass("ag-scrollbar-active",!1)})})},i.prototype.postConstruct=function(){this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.invisibleScrollbar=ds()},i.prototype.onScrollVisibilityChanged=function(){this.setScrollVisible(),this.setFakeHScrollSpacerWidths()},i.prototype.hideAndShowInvisibleScrollAsNeeded=function(){var e=this;this.addManagedListener(this.eventService,$.EVENT_BODY_SCROLL,function(s){"horizontal"===s.direction&&e.view.addOrRemoveCssClass("ag-scrollbar-scrolling",!0)}),this.addManagedListener(this.eventService,$.EVENT_BODY_SCROLL_END,function(){return e.view.addOrRemoveCssClass("ag-scrollbar-scrolling",!1)})},i.prototype.setFakeHScrollSpacerWidths=function(){var e=this.scrollVisibleService.isVerticalScrollShowing(),s=this.columnModel.getDisplayedColumnsRightWidth(),l=!this.enableRtl&&e,c=this.gridOptionsWrapper.getScrollbarWidth();l&&(s+=c),this.view.setRightSpacerFixedWidth(s),this.view.includeRightSpacerScrollerCss("ag-scroller-corner",s<=c);var p=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(p+=c),this.view.setLeftSpacerFixedWidth(p),this.view.includeLeftSpacerScrollerCss("ag-scroller-corner",p<=c)},i.prototype.setScrollVisible=function(){var e=this.scrollVisibleService.isHorizontalScrollShowing(),s=this.invisibleScrollbar,l=this.gridOptionsWrapper.isSuppressHorizontalScroll(),c=e&&this.gridOptionsWrapper.getScrollbarWidth()||0,m=l?0:0===c&&s?15:c,w=zi()&&e;this.view.addOrRemoveCssClass("ag-scrollbar-invisible",s),this.view.setHeight(m),this.view.setViewportHeight(m+(w?1:0)),this.view.setContainerHeight(m)},i.prototype.getViewport=function(){return this.eViewport},i.prototype.getContainer=function(){return this.eContainer},gm([B("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),gm([B("columnModel")],i.prototype,"columnModel",void 0),gm([B("ctrlsService")],i.prototype,"ctrlsService",void 0),gm([Qe],i.prototype,"postConstruct",null),i}(Ye),Qw=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),sc=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},e0=function(d){function i(){return d.call(this,i.TEMPLATE)||this}return Qw(i,d),i.prototype.postConstruct=function(){var e=this,s={addOrRemoveCssClass:function(p,m){return e.addOrRemoveCssClass(p,m)},setHeight:function(p){return st(e.getGui(),p)},setContainerHeight:function(p){return st(e.eContainer,p)},setViewportHeight:function(p){return st(e.eViewport,p)},setRightSpacerFixedWidth:function(p){return Ma(e.eRightSpacer,p)},setLeftSpacerFixedWidth:function(p){return Ma(e.eLeftSpacer,p)},includeLeftSpacerScrollerCss:function(p,m){return Lt(e.eLeftSpacer,p,m)},includeRightSpacerScrollerCss:function(p,m){return Lt(e.eRightSpacer,p,m)}};this.createManagedBean(new GM).setComp(s,this.getGui(),this.eViewport,this.eContainer),this.createManagedBean(new Cg(function(c){return e.eContainer.style.width=c+"px"}))},i.TEMPLATE='<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>\n        </div>',sc([Be("eLeftSpacer")],i.prototype,"eLeftSpacer",void 0),sc([Be("eRightSpacer")],i.prototype,"eRightSpacer",void 0),sc([Be("eViewport")],i.prototype,"eViewport",void 0),sc([Be("eContainer")],i.prototype,"eContainer",void 0),sc([Qe],i.prototype,"postConstruct",null),i}(dn),sR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),t0=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},n0=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return sR(i,d),i.prototype.postConstruct=function(){var e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,$.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_DOM_LAYOUT,e)},i.prototype.checkContainerWidths=function(){var e=this.gridOptionsWrapper.getDomLayout()===ce.DOM_LAYOUT_PRINT,s=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),l=e?0:this.columnModel.getDisplayedColumnsRightWidth();s!=this.leftWidth&&(this.leftWidth=s,this.eventService.dispatchEvent({type:$.EVENT_LEFT_PINNED_WIDTH_CHANGED})),l!=this.rightWidth&&(this.rightWidth=l,this.eventService.dispatchEvent({type:$.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))},i.prototype.getPinnedRightWidth=function(){return this.rightWidth},i.prototype.getPinnedLeftWidth=function(){return this.leftWidth},t0([B("columnModel")],i.prototype,"columnModel",void 0),t0([Qe],i.prototype,"postConstruct",null),t0([ht("pinnedWidthService")],i)}(Ye),r0=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),th=function(d){function i(e){var s=d.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return s.params=e,s}return r0(i,d),i.prototype.postConstruct=function(){this.gridOptionsWrapper.setDomData(this.getGui(),i.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()},i.prototype.addKeyDownListener=function(){var e=this,s=this.getGui(),l=this.params;this.addManagedListener(s,"keydown",function(m){qi(e.gridOptionsWrapper,m,l.node,l.column,!0)||l.onKeyDown(m)})},i.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);l>3&&c&&Object.defineProperty(i,e,c)}([Qe],i.prototype,"postConstruct",null),i}(Nu),lR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),mm=function(){return mm=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},mm.apply(this,arguments)},o0=function(d){function i(e,s,l,c,p,m,w){var x=d.call(this)||this;x.scope=null,x.rendererVersion=0,x.editorVersion=0,x.scope=e,x.beans=s,x.column=l.getColumn(),x.rowNode=l.getRowNode(),x.rowCtrl=l.getRowCtrl(),x.autoHeightCell=c,x.eRow=m,x.setTemplate('<div comp-id="'+x.getCompId()+'"/>');var A=x.getGui(),I=A.style;x.eCellValue=A;var U=function(oe,xe,He){var Ve=He||A;null!=xe&&""!=xe?Ve.setAttribute(oe,xe):Ve.removeAttribute(oe)},Y={addOrRemoveCssClass:function(oe,xe){return x.addOrRemoveCssClass(oe,xe)},setUserStyles:function(oe){return Lu(A,oe)},setAriaSelected:function(oe){return Jc(A,oe)},setAriaExpanded:function(oe){return jf(A,oe)},getFocusableElement:function(){return x.getFocusableElement()},setLeft:function(oe){return I.left=oe},setWidth:function(oe){return I.width=oe},setAriaColIndex:function(oe){return A_(x.getGui(),oe)},setHeight:function(oe){return I.height=oe},setZIndex:function(oe){return I.zIndex=oe},setTabIndex:function(oe){return U("tabindex",oe.toString())},setRole:function(oe){return ji(A,oe)},setColId:function(oe){return U("col-id",oe)},setTitle:function(oe){return U("title",oe)},setUnselectable:function(oe){return U("unselectable",oe,x.eCellValue)},setTransition:function(oe){return I.transition=oe||""},setIncludeSelection:function(oe){return x.includeSelection=oe},setIncludeRowDrag:function(oe){return x.includeRowDrag=oe},setIncludeDndSource:function(oe){return x.includeDndSource=oe},setForceWrapper:function(oe){return x.forceWrapper=oe},setRenderDetails:function(oe,xe,He){return x.setRenderDetails(oe,xe,He)},setEditDetails:function(oe,xe,He){return x.setEditDetails(oe,xe,He)},getCellEditor:function(){return x.cellEditor||null},getCellRenderer:function(){return x.cellRenderer||null},getParentOfValue:function(){return x.eCellValue}};return x.cellCtrl=l,l.setComp(Y,x.scope,x.getGui(),p,w),x}return lR(i,d),i.prototype.setRenderDetails=function(e,s,l){if(!this.cellEditor||this.cellEditorPopupWrapper){this.firstRender=null==this.firstRender;var p=this.isUsingAngular1Template(),m=this.setupControlsWrapper();e?!l&&!m&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),p?this.insertValueUsingAngular1Template():this.insertValueWithoutCellRenderer(s))}},i.prototype.setEditDetails=function(e,s,l){e?this.createCellEditorInstance(e,s,l):this.destroyEditor()},i.prototype.removeControlsWrapper=function(){this.eCellValue=this.getGui(),this.eCellWrapper=null,this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)},i.prototype.setupControlsWrapper=function(){var e=this.includeRowDrag||this.includeDndSource||this.includeSelection||this.forceWrapper;return this.addOrRemoveCssClass("ag-cell-value",!e),e&&!this.eCellWrapper?(this.addControlsWrapper(),!0):!(e||!this.eCellWrapper||(this.removeControlsWrapper(),0))},i.prototype.addControlsWrapper=function(){this.getGui().innerHTML='<div ref="eCellWrapper" class="ag-cell-wrapper" role="presentation">\n                <span ref="eCellValue" class="ag-cell-value" role="presentation"></span>\n            </div>',this.eCellValue=this.getRefElement("eCellValue"),this.eCellWrapper=this.getRefElement("eCellWrapper"),this.forceWrapper||this.eCellValue.setAttribute("unselectable","on");var s=this.eCellValue.id="cell-"+this.getCompId(),l=[];this.includeRowDrag&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue),l.push(this.checkboxSelectionComp.getCheckboxId())),l.push(s),fo(this.getGui(),l.join(" "))},i.prototype.createCellEditorInstance=function(e,s,l){var c=this,p=this.editorVersion,m=e.newAgStackInstance();if(m){var w=e.params;m.then(function(A){return c.afterCellEditorCreated(p,A,w,s,l)}),ye(this.cellEditor)&&w.cellStartedEdit&&this.cellCtrl.focusCell(!0)}},i.prototype.insertValueWithoutCellRenderer=function(e){var s=null!=e?ra(e):null;null!=s?this.eCellValue.innerHTML=s:ao(this.eCellValue)},i.prototype.insertValueUsingAngular1Template=function(){var p,e=this,s=this.column.getColDef(),l=s.template,c=s.templateUrl;null!=l?p=l:null!=c&&(p=this.beans.templateService.getTemplate(c,function(){return e.cellCtrl.refreshCell({forceRefresh:!0})})),null!=p&&(this.eCellValue.innerHTML=p,this.updateAngular1ScopeAndCompile())},i.prototype.destroyEditorAndRenderer=function(){this.destroyRenderer(),this.destroyEditor()},i.prototype.destroyRenderer=function(){this.cellRenderer=this.beans.context.destroyBean(this.cellRenderer),mi(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++},i.prototype.destroyEditor=function(){var e=this.beans.context;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),mi(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++},i.prototype.refreshCellRenderer=function(e){if(null==this.cellRenderer||null==this.cellRenderer.refresh||this.cellRendererClass!==e.componentClass)return!1;var s=this.cellRenderer.refresh(e.params);return!0===s||void 0===s},i.prototype.createCellRendererInstance=function(e){var s=this,l=this.beans.gridOptionsWrapper.isAngularCompileRows(),c=this.beans.gridOptionsWrapper.isSuppressAnimationFrame(),m=this.rendererVersion,w=e.componentClass,x=function(){if(s.rendererVersion===m&&s.isAlive()){var U=e.newAgStackInstance(),Y=s.afterCellRendererCreated.bind(s,m,w);U&&U.then(Y)}};l||c||this.autoHeightCell||!this.firstRender?x():this.beans.animationFrameService.createTask(x,this.rowNode.rowIndex,"createTasksP2")},i.prototype.isUsingAngular1Template=function(){var e=this.column.getColDef();return null!=e.template||null!=e.templateUrl},i.prototype.getCtrl=function(){return this.cellCtrl},i.prototype.getRowCtrl=function(){return this.rowCtrl},i.prototype.getCellRenderer=function(){return this.cellRenderer},i.prototype.getCellEditor=function(){return this.cellEditor},i.prototype.afterCellRendererCreated=function(e,s,l){this.isAlive()&&e===this.rendererVersion?(this.cellRenderer=l,this.cellRendererClass=s,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui&&(ao(this.eCellValue),this.eCellValue.appendChild(this.cellRendererGui),this.updateAngular1ScopeAndCompile())):this.beans.context.destroyBean(l)},i.prototype.afterCellEditorCreated=function(e,s,l,c,p){if(e!==this.editorVersion)this.beans.context.destroyBean(s);else{if(s.isCancelBeforeStart&&s.isCancelBeforeStart())return this.beans.context.destroyBean(s),void this.cellCtrl.stopEditing();if(!s.getGui)return console.warn("AG Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method"),void this.beans.context.destroyBean(s);this.cellEditor=s,this.cellEditorGui=s.getGui(),c||void 0!==s.isPopup&&s.isPopup()?(c||this.cellCtrl.hackSayEditingInPopup(),this.addPopupCellEditor(l,p)):this.addInCellEditor(),s.afterGuiAttached&&s.afterGuiAttached()}},i.prototype.addInCellEditor=function(){var e=this.getGui();e.contains(document.activeElement)&&e.focus(),this.destroyRenderer(),this.removeControlsWrapper(),this.clearCellElement(),this.cellEditorGui&&e.appendChild(this.cellEditorGui)},i.prototype.addPopupCellEditor=function(e,s){var l=this;this.beans.gridOptionsWrapper.isFullRowEdit()&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var c=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new th(e));var p=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&p.appendChild(this.cellEditorGui);var m=this.beans.popupService,w=this.beans.gridOptionsWrapper.isStopEditingWhenCellsLoseFocus(),A=(null!=s||c.getPopupPosition&&c.getPopupPosition(),{column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),ePopup:p,keepWithinBounds:!0}),I="under"===s?m.positionPopupUnderComponent.bind(m,A):m.positionPopupOverComponent.bind(m,A),U=this.beans.gridOptionsWrapper.getLocaleTextFunc(),Y=m.addPopup({modal:w,eChild:p,closeOnEsc:!0,closedCallback:function(){l.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:I,ariaLabel:U("ariaLabelCellEditor","Cell Editor")});Y&&(this.hideEditorPopup=Y.hideFunc)},i.prototype.detach=function(){this.eRow.removeChild(this.getGui())},i.prototype.destroy=function(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControlsWrapper(),this.angularCompiledElement&&(this.angularCompiledElement.remove(),this.angularCompiledElement=void 0),d.prototype.destroy.call(this)},i.prototype.clearCellElement=function(){var e=this.getGui();e.contains(document.activeElement)&&!zi()&&e.focus({preventScroll:!0}),ao(e)},i.prototype.updateAngular1ScopeAndCompile=function(){this.beans.gridOptionsWrapper.isAngularCompileRows()&&this.scope&&(this.scope.data=mm({},this.rowNode.data),this.angularCompiledElement&&this.angularCompiledElement.remove(),this.angularCompiledElement=this.beans.$compile(this.eCellValue.children)(this.scope),this.beans.ctrlsService.getGridBodyCtrl().requestAngularApply())},i}(dn),cR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),dR=function(d){function i(e,s,l){var c=d.call(this)||this;c.cellComps={},c.beans=s,c.rowCtrl=e,c.setTemplate('<div comp-id="'+c.getCompId()+'" style="'+c.getInitialStyle()+'"/>');var p=c.getGui(),m=p.style;return e.setComp({setDisplay:function(A){null==A?m.removeProperty("display"):m.setProperty("display","none")},setDomOrder:function(A){return c.domOrder=A},setCellCtrls:function(A){return c.setCellCtrls(A)},showFullWidth:function(A){return c.showFullWidth(A)},getFullWidthCellRenderer:function(){return c.getFullWidthCellRenderer()},addOrRemoveCssClass:function(A,I){return c.addOrRemoveCssClass(A,I)},setAriaExpanded:function(A){return jf(p,A)},setUserStyles:function(A){return Lu(p,A)},setAriaSelected:function(A){return Jc(p,A)},setAriaLabel:function(A){Ia(p,null==A?"":A)},setHeight:function(A){return m.height=A},setTop:function(A){return m.top=A},setTransform:function(A){return m.transform=A},setRowIndex:function(A){return p.setAttribute("row-index",A)},setRole:function(A){return ji(p,A)},setAriaRowIndex:function(A){return R_(c.getGui(),A)},setRowId:function(A){return p.setAttribute("row-id",A)},setRowBusinessKey:function(A){return p.setAttribute("row-business-key",A)},setTabIndex:function(A){return p.setAttribute("tabindex",A.toString())}},c.getGui(),l),c}return cR(i,d),i.prototype.getInitialStyle=function(){var e=this.rowCtrl.getInitialTransform(),s=this.rowCtrl.getInitialRowTop();return e?"transform: "+e:"top: "+s},i.prototype.showFullWidth=function(e){var s=this,c=e.newAgStackInstance(this.rowCtrl.getFullWidthCellRendererType());!c||c.then(function(m){if(s.isAlive()){var w=m.getGui();s.getGui().appendChild(w),s.rowCtrl.getRowType()===_i.FullWidthDetail&&s.rowCtrl.setupDetailRowAutoHeight(w),s.setFullWidthRowComp(m)}else s.beans.context.destroyBean(m)})},i.prototype.setCellCtrls=function(e){var s=this,l=ti({},this.cellComps);e.forEach(function(p){var m=p.getInstanceId();null==s.cellComps[m]?s.newCellComp(p):l[m]=null});var c=ba(l).filter(function(p){return null!=p});this.destroyCells(c),this.ensureDomOrder(e)},i.prototype.ensureDomOrder=function(e){var s=this;if(this.domOrder){var l=[];e.forEach(function(c){var p=s.cellComps[c.getInstanceId()];p&&l.push(p.getGui())}),uo(this.getGui(),l)}},i.prototype.newCellComp=function(e){var s=new o0(this.rowCtrl.getScope(),this.beans,e,!1,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=s,this.getGui().appendChild(s.getGui())},i.prototype.destroy=function(){d.prototype.destroy.call(this),this.destroyAllCells()},i.prototype.destroyAllCells=function(){var e=ba(this.cellComps).filter(function(s){return null!=s});this.destroyCells(e)},i.prototype.setFullWidthRowComp=function(e){var s=this;this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(function(){s.fullWidthCellRenderer=s.beans.context.destroyBean(s.fullWidthCellRenderer)})},i.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},i.prototype.destroyCells=function(e){var s=this;e.forEach(function(l){if(l){var c=l.getCtrl().getInstanceId();s.cellComps[c]===l&&(l.detach(),l.destroy(),s.cellComps[c]=null)}})},i}(dn),fR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),uc=function(){return uc=Object.assign||function(d){for(var i,e=1,s=arguments.length;e<s;e++)for(var l in i=arguments[e])Object.prototype.hasOwnProperty.call(i,l)&&(d[l]=i[l]);return d},uc.apply(this,arguments)},pa=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},lc=function(d){function i(){var e=d.call(this,function(){var d=dn.elementGettingCreated.getAttribute("name"),i=Ql.getRowContainerCssClasses(d);return d===K.hA6.CENTER?'<div class="'+i.wrapper+'" ref="eWrapper" role="presentation" unselectable="on">\n                <div class="'+i.viewport+'" ref="eViewport" role="presentation">\n                    <div class="'+i.container+'" ref="eContainer" role="rowgroup" unselectable="on"></div>\n                </div>\n            </div>':d===K.hA6.TOP_CENTER||d===K.hA6.BOTTOM_CENTER?'<div class="'+i.viewport+'" ref="eViewport" role="presentation" unselectable="on">\n                <div class="'+i.container+'" ref="eContainer" role="presentation" unselectable="on"></div>\n            </div>':'<div class="'+i.container+'" ref="eContainer" role="presentation" unselectable="on"></div>'}())||this;return e.rowComps={},e.name=dn.elementGettingCreated.getAttribute("name"),e}return fR(i,d),i.prototype.postConstruct=function(){var e=this,s={setViewportHeight:function(p){return e.eViewport.style.height=p},setRowCtrls:function(p){return e.setRowCtrls(p)},setDomOrder:function(p){e.domOrder=p},setContainerWidth:function(p){return e.eContainer.style.width=p}};this.createManagedBean(new Ql(this.name)).setComp(s,this.eContainer,this.eViewport,this.eWrapper)},i.prototype.preDestroy=function(){this.setRowCtrls([])},i.prototype.setRowCtrls=function(e){var s=this,l=uc({},this.rowComps);this.rowComps={},this.lastPlacedElement=null,e.forEach(function(m){var w=m.getInstanceId(),x=l[w];if(x)s.rowComps[w]=x,delete l[w],s.ensureDomOrder(x.getGui());else{var A=s.newRowComp(m);s.rowComps[w]=A,s.appendRow(A.getGui())}}),ba(l).forEach(function(p){s.eContainer.removeChild(p.getGui()),p.destroy()})},i.prototype.appendRow=function(e){this.domOrder?$c(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e},i.prototype.ensureDomOrder=function(e){this.domOrder&&(hs(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)},i.prototype.newRowComp=function(e){var s=Ql.getPinned(this.name);return new dR(e,this.beans,s)},pa([B("beans")],i.prototype,"beans",void 0),pa([Be("eViewport")],i.prototype,"eViewport",void 0),pa([Be("eContainer")],i.prototype,"eContainer",void 0),pa([Be("eWrapper")],i.prototype,"eWrapper",void 0),pa([Qe],i.prototype,"postConstruct",null),pa([Ii],i.prototype,"preDestroy",null),i}(dn),hR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),nh=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},ym=function(d){function i(){var e=null!==d&&d.apply(this,arguments)||this;return e.events=[],e}return hR(i,d),i.prototype.postConstruct=function(){this.rowModel.getType()==ce.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel)},i.prototype.dispatchExpanded=function(e){var s=this;this.events.push(e),null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(function(){s.clientSideRowModel&&s.clientSideRowModel.onRowGroupOpened(),s.events.forEach(function(l){return s.eventService.dispatchEvent(l)}),s.events=[]})),this.dispatchExpandedDebounced()},nh([B("animationFrameService")],i.prototype,"animationFrameService",void 0),nh([B("rowModel")],i.prototype,"rowModel",void 0),nh([Qe],i.prototype,"postConstruct",null),nh([ht("rowNodeEventThrottle")],i)}(Ye),za=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Rs=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Ei=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return za(i,d),i.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},i.prototype.showMenuAfterMouseEvent=function(e,s){var l=this;this.showPopup(e,function(c){l.popupService.positionPopupUnderMouseEvent({column:e,type:"columnMenu",mouseEvent:s,ePopup:c})},s.target)},i.prototype.showMenuAfterButtonClick=function(e,s,l){var c=this;this.showPopup(e,function(p){c.popupService.positionPopupUnderComponent({type:l,eventSource:s,ePopup:p,keepWithinBounds:!0,column:e})},s)},i.prototype.showPopup=function(e,s,l){var c=this,p=this.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU"),m=document.createElement("div");ji(m,"presentation"),Tt(m,"ag-menu"),this.tabListener=this.addManagedListener(m,"keydown",function(Y){return c.trapFocusWithin(Y,m)}),p.guiPromise.then(function(Y){return m.appendChild(Y)});var w,x=l||this.ctrlsService.getGridBodyCtrl().getGui(),I=this.gridOptionsWrapper.getLocaleTextFunc(),U=this.popupService.addPopup({modal:!0,eChild:m,closeOnEsc:!0,closedCallback:function(Q){e.setMenuVisible(!1,"contextMenu");var oe=Q instanceof KeyboardEvent;if(c.tabListener&&(c.tabListener=c.tabListener()),oe&&l&&Al(l)){var xe=c.focusService.findTabbableParent(l);xe&&xe.focus()}},positionCallback:function(){return s(m)},anchorToElement:x,ariaLabel:I("ariaLabelColumnMenu","Column Menu")});U&&(this.hidePopup=w=U.hideFunc),p.filterPromise.then(function(Y){s(m),Y.afterGuiAttached&&Y.afterGuiAttached({container:"columnMenu",hidePopup:w})}),e.setMenuVisible(!0,"contextMenu")},i.prototype.trapFocusWithin=function(e,s){e.keyCode!==$e.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(s,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(s,e.shiftKey))},i.prototype.isMenuEnabled=function(e){return e.isFilterAllowed()},Rs([B("filterManager")],i.prototype,"filterManager",void 0),Rs([B("popupService")],i.prototype,"popupService",void 0),Rs([B("focusService")],i.prototype,"focusService",void 0),Rs([B("ctrlsService")],i.prototype,"ctrlsService",void 0),Rs([ht("menuFactory")],i)}(Ye),As=function(){function d(i,e,s){e?(this.gridOptions=e,(new Bd).create(i,e,function(l){var c=new Rd(i);l.createBean(c)},s)):console.error("AG Grid: no gridOptions provided to the grid")}return d.prototype.destroy=function(){this.gridOptions&&this.gridOptions.api&&this.gridOptions.api.destroy()},d}(),Bd=function(){function d(){}return d.prototype.create=function(i,e,s,l){var c=this,p=!!e.debug,m=this.getRegisteredModules(l),w=this.createBeansList(e.rowModelType,m),x=this.createProvidedBeans(i,e,l);if(w){var A={providedBeanInstances:x,beanClasses:w,debug:p},I=new Lp("AG Grid",function(){return e.debug}),U=new Lp("Context",function(){return A.debug}),Y=new xE(A,U),Q=Y.getBean("beans");this.registerModuleUserComponents(Q,m),this.registerStackComponents(Q,m),this.registerControllers(Q,m),s(Y),Q.ctrlsService.whenReady(function(){c.setColumnsAndData(Q),c.dispatchGridReadyEvent(Q,e);var oe=jt.isRegistered(K.GXE.EnterpriseCoreModule);I.log("initialised successfully, enterprise = "+oe)})}},d.prototype.registerControllers=function(i,e){e.forEach(function(s){s.controllers&&s.controllers.forEach(function(l){return i.ctrlsFactory.register(l)})})},d.prototype.registerStackComponents=function(i,e){var s=this.createAgStackComponentsList(e);i.agStackComponentsRegistry.setupComponents(s)},d.prototype.getRegisteredModules=function(i){var e=i?i.modules:null,s=jt.getRegisteredModules(),l=[],c={};function p(m,w){var A;c[(A=w).moduleName]||(c[A.moduleName]=!0,l.push(A),jt.register(A,m)),w.dependantModules&&w.dependantModules.forEach(p.bind(null,m))}return e&&e.forEach(p.bind(null,!0)),s&&s.forEach(p.bind(null,!jt.isPackageBased())),l},d.prototype.registerModuleUserComponents=function(i,e){this.extractModuleEntity(e,function(l){return l.userComponents?l.userComponents:[]}).forEach(function(l){i.userComponentRegistry.registerDefaultComponent(l.componentName,l.componentClass)})},d.prototype.createProvidedBeans=function(i,e,s){var l=s?s.frameworkOverrides:null;ye(l)&&(l=new Px);var c={gridOptions:e,eGridDiv:i,$scope:s?s.$scope:null,$compile:s?s.$compile:null,globalEventListener:s?s.globalEventListener:null,frameworkOverrides:l};return s&&s.providedBeanInstances&&ti(c,s.providedBeanInstances),c},d.prototype.createAgStackComponentsList=function(i){var e=[{componentName:"AgCheckbox",componentClass:ju},{componentName:"AgRadioButton",componentClass:Vp},{componentName:"AgToggleButton",componentClass:cm},{componentName:"AgInputTextField",componentClass:Fw},{componentName:"AgInputTextArea",componentClass:um},{componentName:"AgInputNumberField",componentClass:$p},{componentName:"AgInputRange",componentClass:Xp},{componentName:"AgSelect",componentClass:Ll},{componentName:"AgSlider",componentClass:lm},{componentName:"AgAngleSelect",componentClass:Jp},{componentName:"AgColorPicker",componentClass:Gw},{componentName:"AgGridBody",componentClass:ew},{componentName:"AgHeaderRoot",componentClass:ua},{componentName:"AgPagination",componentClass:jx},{componentName:"AgOverlayWrapper",componentClass:LM},{componentName:"AgGroupComponent",componentClass:Iw},{componentName:"AgPanel",componentClass:Ld},{componentName:"AgDialog",componentClass:am},{componentName:"AgRowContainer",componentClass:lc},{componentName:"AgFakeHorizontalScroll",componentClass:e0}],s=this.extractModuleEntity(i,function(l){return l.agStackComponents?l.agStackComponents:[]});return e.concat(s)},d.prototype.createBeansList=function(i,e){var s=this.getRowModelClass(i,e);if(s){var l=[s,vg,Qp,dm,zw,Gx,tw,sg,Xg,jp,da,lg,Ux,$o,Ww,Bp,Aa,qs,vt,iw,jl,yx,cn,SC,Yg,$b,Ig,g_,nw,Cw,Rw,_w,Ap,ow,IE,Ng,Ei,Bi,lC,Hi,fw,ho,hw,Wg,Fx,Ix,cw,ou,gw,Aw,qg,Kg,Vx,Vi,kE,nR,rR,$w,aR,Xw,n0,ym,kM],c=this.extractModuleEntity(e,function(m){return m.beans?m.beans:[]});l.push.apply(l,c);var p=[];return l.forEach(function(m){p.indexOf(m)<0&&p.push(m)}),p}},d.prototype.extractModuleEntity=function(i,e){return[].concat.apply([],i.map(e))},d.prototype.setColumnsAndData=function(i){var e=i.gridOptionsWrapper.getColumnDefs();i.columnModel.setColumnDefs(e||[],"gridInitializing"),i.rowModel.start()},d.prototype.dispatchGridReadyEvent=function(i,e){i.eventService.dispatchEvent({type:$.EVENT_GRID_READY,api:e.api,columnApi:e.columnApi})},d.prototype.getRowModelClass=function(i,e){i||(i=ce.ROW_MODEL_TYPE_CLIENT_SIDE);var s={};e.forEach(function(c){In(c.rowModels,function(p,m){s[p]=m})});var l=s[i];if(Le(l))return l;i===ce.ROW_MODEL_TYPE_INFINITE&&console.error('AG Grid: Row Model "Infinite" not found. Please ensure the '+K.GXE.InfiniteRowModelModule+" is registered.';"),console.error("AG Grid: could not find matching row model for rowModelType "+i),i===ce.ROW_MODEL_TYPE_VIEWPORT&&console.error('AG Grid: Row Model "Viewport" not found. Please ensure the AG Grid Enterprise Module '+K.GXE.ViewportRowModelModule+" is registered.';"),i===ce.ROW_MODEL_TYPE_SERVER_SIDE&&console.error('AG Grid: Row Model "Server Side" not found. Please ensure the AG Grid Enterprise Module '+K.GXE.ServerSideRowModelModule+" is registered.';"),i===ce.ROW_MODEL_TYPE_CLIENT_SIDE&&console.error('AG Grid: Row Model "Client Side" not found. Please ensure the '+K.GXE.ClientSideRowModelModule+" is registered.';")},d}();var fc=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ts=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};!function(d){function i(e){var s=d.call(this,i.getTemplate(e.cssClass))||this;return s.items=[],s.params=e,e.items&&e.items.forEach(function(l){return s.addItem(l)}),s}fc(i,d),i.prototype.postConstruct=function(){this.createManagedBean(new zo(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},i.getTemplate=function(e){return'<div class="ag-tabs '+e+'">\n            <div ref="eHeader" role="tablist" class="ag-tabs-header '+(e?e+"-header":"")+'"></div>\n            <div ref="eBody" role="presentation" class="ag-tabs-body '+(e?e+"-body":"")+'"></div>\n        </div>'},i.prototype.handleKeyDown=function(e){switch(e.keyCode){case $e.RIGHT:case $e.LEFT:if(!this.eHeader.contains(document.activeElement))return;var s=this.items.indexOf(this.activeItem),l=e.keyCode===$e.RIGHT?Math.min(s+1,this.items.length-1):Math.max(s-1,0);if(s===l)return;e.preventDefault();var c=this.items[l];this.showItemWrapper(c),c.eHeaderButton.focus();break;case $e.UP:case $e.DOWN:e.stopPropagation()}},i.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var s=this,l=s.focusService,c=s.eHeader,p=s.eBody,m=s.activeItem,w=document.activeElement;if(e.preventDefault(),c.contains(w))l.focusInto(p,e.shiftKey);else if(l.isFocusUnderManagedComponent(p))m.eHeaderButton.focus();else{var x=l.findNextFocusableElement(p,!1,e.shiftKey);x?x.focus():m.eHeaderButton.focus()}}},i.prototype.setAfterAttachedParams=function(e){this.afterAttachedParams=e},i.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},i.prototype.addItem=function(e){var s=document.createElement("span");ji(s,"tab"),s.setAttribute("tabIndex","-1"),s.appendChild(e.title),Tt(s,"ag-tab"),this.eHeader.appendChild(s),Ia(s,e.titleLabel);var l={tabbedItem:e,eHeaderButton:s};this.items.push(l),s.addEventListener("click",this.showItemWrapper.bind(this,l))},i.prototype.showItem=function(e){var s=Pi(this.items,function(l){return l.tabbedItem===e});s&&this.showItemWrapper(s)},i.prototype.showItemWrapper=function(e){var s=this;this.params.onItemClicked&&this.params.onItemClicked({item:e.tabbedItem}),this.activeItem!==e?(ao(this.eBody),e.tabbedItem.bodyPromise.then(function(l){s.eBody.appendChild(l);var c=!s.focusService.isKeyboardMode();s.focusService.focusInto(s.eBody,!1,c),e.tabbedItem.afterAttachedCallback&&e.tabbedItem.afterAttachedCallback(s.afterAttachedParams)}),this.activeItem&&gi(this.activeItem.eHeaderButton,"ag-tab-selected"),Tt(e.eHeaderButton,"ag-tab-selected"),this.activeItem=e):bE(this.params.onActiveItemClicked)},Ts([B("focusService")],i.prototype,"focusService",void 0),Ts([Be("eHeader")],i.prototype,"eHeader",void 0),Ts([Be("eBody")],i.prototype,"eBody",void 0),Ts([Qe],i.prototype,"postConstruct",null)}(dn);!function(d){d.Applied="Applied",d.StoreNotFound="StoreNotFound",d.StoreLoading="StoreLoading",d.StoreWaitingToLoad="StoreWaitingToLoad",d.StoreLoadingFailed="StoreLoadingFailed",d.StoreWrongType="StoreWrongType",d.Cancelled="Cancelled"}(K.Qk6||(K.Qk6={}));var vc=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ds=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},u0=(function(d){function i(e,s,l){void 0===e&&(e="default"),void 0===s&&(s="listbox");var c=d.call(this,i.getTemplate(e))||this;return c.cssIdentifier=e,c.ariaRole=s,c.listName=l,c.renderedRows=new Map,c.rowHeight=20,c.isDestroyed=!1,c}vc(i,d),i.prototype.postConstruct=function(){var e=this;this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:function(l){return e.onFocusIn(l)},onFocusOut:function(l){return e.onFocusOut(l)},focusInnerElement:function(l){return e.focusInnerElement(l)},onTabKeyDown:function(l){return e.onTabKeyDown(l)},handleKeyDown:function(l){return e.handleKeyDown(l)}}),this.setAriaProperties()},i.prototype.setAriaProperties=function(){var s=this.gridOptionsWrapper.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),l=this.eContainer;ji(l,this.ariaRole),Ia(l,s)},i.prototype.addResizeObserver=function(){var e=this.drawVirtualRows.bind(this),s=this.resizeObserverService.observeResize(this.getGui(),e);this.addDestroyFunc(s)},i.prototype.focusInnerElement=function(e){this.focusRow(e?this.model.getRowCount()-1:0)},i.prototype.onFocusIn=function(e){var s=e.target;return fs(s,"ag-virtual-list-item")&&(this.lastFocusedRowIndex=Vo(s)-1),!1},i.prototype.onFocusOut=function(e){return this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null),!1},i.prototype.handleKeyDown=function(e){switch(e.keyCode){case $e.UP:case $e.DOWN:this.navigate(e.keyCode===$e.UP)&&e.preventDefault()}},i.prototype.onTabKeyDown=function(e){this.navigate(e.shiftKey)?e.preventDefault():this.focusService.focusInto(this.getGui(),!e.shiftKey)},i.prototype.navigate=function(e){if(null==this.lastFocusedRowIndex)return!1;var s=this.lastFocusedRowIndex+(e?-1:1);return!(s<0||s>=this.model.getRowCount()||(this.focusRow(s),0))},i.prototype.getLastFocusedRow=function(){return this.lastFocusedRowIndex},i.prototype.focusRow=function(e){var s=this;this.ensureIndexVisible(e),window.setTimeout(function(){var l=s.renderedRows.get(e);l&&l.eDiv.focus()},10)},i.prototype.getComponentAt=function(e){var s=this.renderedRows.get(e);return s&&s.rowComponent},i.getTemplate=function(e){return'\n            <div class="ag-virtual-list-viewport ag-'+e+'-virtual-list-viewport" role="presentation">\n                <div class="ag-virtual-list-container ag-'+e+'-virtual-list-container" ref="eContainer"></div>\n            </div>'},i.prototype.getItemHeight=function(){return this.gridOptionsWrapper.getListItemHeight()},i.prototype.ensureIndexVisible=function(e){var s=this.model.getRowCount();if("number"!=typeof e||e<0||e>=s)console.warn("invalid row index for ensureIndexVisible: "+e);else{var l=e*this.rowHeight,c=l+this.rowHeight,p=this.getGui(),m=p.scrollTop,w=p.offsetHeight,I=m+w<c;m>l?p.scrollTop=l:I&&(p.scrollTop=c-w)}},i.prototype.setComponentCreator=function(e){this.componentCreator=e},i.prototype.getRowHeight=function(){return this.rowHeight},i.prototype.getScrollTop=function(){return this.getGui().scrollTop},i.prototype.setRowHeight=function(e){this.rowHeight=e,this.refresh()},i.prototype.refresh=function(){var e=this;if(null!=this.model&&!this.isDestroyed){var s=this.model.getRowCount();this.eContainer.style.height=s*this.rowHeight+"px",SE(function(){return e.eContainer.clientHeight>=s*e.rowHeight},function(){e.isDestroyed||(e.clearVirtualRows(),e.drawVirtualRows())})}},i.prototype.clearVirtualRows=function(){var e=this;this.renderedRows.forEach(function(s,l){return e.removeRow(l)})},i.prototype.drawVirtualRows=function(){var e=this.getGui(),s=e.scrollTop,l=s+e.offsetHeight,c=Math.floor(s/this.rowHeight),p=Math.floor(l/this.rowHeight);this.ensureRowsRendered(c,p)},i.prototype.ensureRowsRendered=function(e,s){var l=this;this.renderedRows.forEach(function(p,m){(m<e||m>s)&&m!==l.lastFocusedRowIndex&&l.removeRow(m)});for(var c=e;c<=s;c++)this.renderedRows.has(c)||c<this.model.getRowCount()&&this.insertRow(c)},i.prototype.insertRow=function(e){var s=this,l=this.model.getRow(e),c=document.createElement("div");if(Tt(c,"ag-virtual-list-item"),Tt(c,"ag-"+this.cssIdentifier+"-virtual-list-item"),ji(c,"tree"===this.ariaRole?"treeitem":"option"),jE(c,this.model.getRowCount()),qE(c,e+1),c.setAttribute("tabindex","-1"),"function"==typeof this.model.isRowSelected){var p=this.model.isRowSelected(e);Jc(c,!!p),QE(c,p)}c.style.height=this.rowHeight+"px",c.style.top=this.rowHeight*e+"px";var m=this.componentCreator(l,c);m.addGuiEventListener("focusin",function(){return s.lastFocusedRowIndex=e}),c.appendChild(m.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",c):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",c):this.eContainer.appendChild(c),this.renderedRows.set(e,{rowComponent:m,eDiv:c})},i.prototype.removeRow=function(e){var s=this.renderedRows.get(e);this.eContainer.removeChild(s.eDiv),this.destroyBean(s.rowComponent),this.renderedRows.delete(e)},i.prototype.addScrollListener=function(){var e=this;this.addGuiEventListener("scroll",function(){return e.drawVirtualRows()})},i.prototype.setModel=function(e){this.model=e},i.prototype.destroy=function(){this.isDestroyed||(this.clearVirtualRows(),this.isDestroyed=!0,d.prototype.destroy.call(this))},Ds([B("resizeObserverService")],i.prototype,"resizeObserverService",void 0),Ds([B("focusService")],i.prototype,"focusService",void 0),Ds([Be("eContainer")],i.prototype,"eContainer",void 0),Ds([Qe],i.prototype,"postConstruct",null)}(uw),function(){function d(){}return d.prototype.wrap=function(i,e,s,l,c){var p=this;void 0===s&&(s=[]);var m=this.createWrapper(i,l,c);return e.forEach(function(w){p.createMethod(m,w,!0)}),s.forEach(function(w){p.createMethod(m,w,!1)}),m},d.prototype.unwrap=function(i){return i},d.prototype.createMethod=function(i,e,s){i.addMethod(e,this.createMethodProxy(i,e,s))},d.prototype.createMethodProxy=function(i,e,s){return function(){return i.hasMethod(e)?i.callMethod(e,arguments):(s&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}},d}());!function(d){d.Column="column",d.GroupedColumn="groupedColumn",d.StackedColumn="stackedColumn",d.NormalizedColumn="normalizedColumn",d.Bar="bar",d.GroupedBar="groupedBar",d.StackedBar="stackedBar",d.NormalizedBar="normalizedBar",d.Line="line",d.Scatter="scatter",d.Bubble="bubble",d.Pie="pie",d.Doughnut="doughnut",d.Area="area",d.StackedArea="stackedArea",d.NormalizedArea="normalizedArea",d.Histogram="histogram"}(K.oXM||(K.oXM={}));var Ju="undefined"==typeof global?{}:global;Ju.HTMLElement="undefined"==typeof HTMLElement?{}:HTMLElement,Ju.HTMLButtonElement="undefined"==typeof HTMLButtonElement?{}:HTMLButtonElement,Ju.HTMLSelectElement="undefined"==typeof HTMLSelectElement?{}:HTMLSelectElement,Ju.HTMLInputElement="undefined"==typeof HTMLInputElement?{}:HTMLInputElement,Ju.Node="undefined"==typeof Node?{}:Node,Ju.MouseEvent="undefined"==typeof MouseEvent?{}:MouseEvent;var Cm=function(){for(var d=0,i=0,e=arguments.length;i<e;i++)d+=arguments[i].length;var s=Array(d),l=0;for(i=0;i<e;i++)for(var c=arguments[i],p=0,m=c.length;p<m;p++,l++)s[l]=c[p];return s},l0=function(){function d(i,e,s,l,c,p,m,w){this.nextId=0,this.allNodesMap={},this.rootNode=i,this.gridOptionsWrapper=e,this.eventService=s,this.columnModel=l,this.gridApi=c,this.columnApi=p,this.beans=w,this.selectionService=m,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=d.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}return d.prototype.postConstruct=function(){this.suppressParentsInRowNodes=this.gridOptionsWrapper.isSuppressParentsInRowNodes(),this.isRowMasterFunc=this.gridOptionsWrapper.getIsRowMasterFunc(),this.doingTreeData=this.gridOptionsWrapper.isTreeData(),this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail()},d.prototype.getCopyOfNodesMap=function(){return yt.cloneObject(this.allNodesMap)},d.prototype.getRowNode=function(i){return this.allNodesMap[i]},d.prototype.setRowData=function(i){var e=this;if("string"!=typeof i){var s=this.rootNode,l=this.rootNode.sibling;s.childrenAfterFilter=null,s.childrenAfterGroup=null,s.childrenAfterSort=null,s.childrenMapped=null,s.updateHasChildren(),this.nextId=0,this.allNodesMap={},i?s.allLeafChildren=i.map(function(c){return e.createNode(c,e.rootNode,d.TOP_LEVEL)}):(s.allLeafChildren=[],s.childrenAfterGroup=[]),l&&(l.childrenAfterFilter=s.childrenAfterFilter,l.childrenAfterGroup=s.childrenAfterGroup,l.childrenAfterSort=s.childrenAfterSort,l.childrenMapped=s.childrenMapped,l.allLeafChildren=s.allLeafChildren)}else console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first")},d.prototype.updateRowData=function(i,e){var s={remove:[],update:[],add:[]},l=[];return this.executeRemove(i,s,l),this.executeUpdate(i,s,l),this.executeAdd(i,s),this.updateSelection(l),e&&yt.sortRowNodesByOrder(this.rootNode.allLeafChildren,e),s},d.prototype.updateSelection=function(i){var e=i.length>0;e&&i.forEach(function(l){l.setSelected(!1,!1,!0)}),this.selectionService.updateGroupsFromChildrenSelections(),e&&this.eventService.dispatchEvent({type:$.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi})},d.prototype.executeAdd=function(i,e){var s=this,l=i.add,c=i.addIndex;if(!yt.missingOrEmpty(l)){var p=l.map(function(I){return s.createNode(I,s.rootNode,d.TOP_LEVEL)});if("number"==typeof c&&c>=0){var w=this.rootNode.allLeafChildren,x=w.slice(0,c),A=w.slice(c,w.length);this.rootNode.allLeafChildren=Cm(x,p,A)}else this.rootNode.allLeafChildren=Cm(this.rootNode.allLeafChildren,p);this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),e.add=p}},d.prototype.executeRemove=function(i,e,s){var l=this,c=i.remove;if(!yt.missingOrEmpty(c)){var p={};c.forEach(function(m){var w=l.lookupRowNode(m);!w||(w.isSelected()&&s.push(w),w.clearRowTopAndRowIndex(),p[w.id]=!0,delete l.allNodesMap[w.id],e.remove.push(w))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(function(m){return!p[m.id]}),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},d.prototype.executeUpdate=function(i,e,s){var l=this,c=i.update;yt.missingOrEmpty(c)||c.forEach(function(p){var m=l.lookupRowNode(p);!m||(m.updateData(p),!m.selectable&&m.isSelected()&&s.push(m),l.setMasterForRow(m,p,d.TOP_LEVEL,!1),e.update.push(m))})},d.prototype.lookupRowNode=function(i){var s,e=this.gridOptionsWrapper.getRowNodeIdFunc();if(yt.exists(e)){var l=e(i);if(!(s=this.allNodesMap[l]))return console.error("AG Grid: could not find row id="+l+", data item was not found for this id"),null}else if(!(s=yt.find(this.rootNode.allLeafChildren,function(c){return c.data===i})))return console.error("AG Grid: could not find data item as object was not found",i),console.error("Consider using getRowNodeId to help the Grid find matching row data"),null;return s},d.prototype.createNode=function(i,e,s){var l=new sn(this.beans);return l.group=!1,this.setMasterForRow(l,i,s,!0),e&&!this.suppressParentsInRowNodes&&(l.parent=e),l.level=s,l.setDataAndId(i,this.nextId.toString()),this.allNodesMap[l.id]&&console.warn("ag-grid: duplicate node id '"+l.id+"' detected from getRowNodeId callback, this could cause issues in your grid."),this.allNodesMap[l.id]=l,this.nextId++,l},d.prototype.setMasterForRow=function(i,e,s,l){if(this.doingTreeData)i.setMaster(!1),l&&(i.expanded=!1);else if(i.setMaster(!!this.doingMasterDetail&&(!this.isRowMasterFunc||this.isRowMasterFunc(e))),l){var c=this.columnModel.getRowGroupColumns();i.expanded=!!i.master&&this.isExpanded(s+(c?c.length:0))}},d.prototype.isExpanded=function(i){var e=this.gridOptionsWrapper.getGroupDefaultExpanded();return-1===e||i<e},d.TOP_LEVEL=0,d.ROOT_NODE_ID="ROOT_NODE_ID",d}(),c0=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),bi=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Qo=function(){return function(d){d[d.Normal=0]="Normal",d[d.AfterFilter=1]="AfterFilter",d[d.AfterFilterAndSort=2]="AfterFilterAndSort",d[d.PivotNodes=3]="PivotNodes"}(Qo||(Qo={})),Qo}(),vR=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return c0(i,d),i.prototype.init=function(){var e=this.refreshModel.bind(this,{step:K.j_r.EVERYTHING}),s=this.refreshModel.bind(this,{step:K.j_r.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:!0});this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,s),this.addManagedListener(this.eventService,$.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,$.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:K.j_r.PIVOT})),this.addManagedListener(this.eventService,$.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_COLUMN_PIVOT_MODE_CHANGED,e);var l=this.refreshModel.bind(this,{step:K.j_r.MAP,keepRenderedRows:!0,animate:!0});this.addManagedListener(this.gridOptionsWrapper,vt.PROP_GROUP_REMOVE_SINGLE_CHILDREN,l),this.addManagedListener(this.gridOptionsWrapper,vt.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,l),this.rootNode=new sn(this.beans),this.nodeManager=new l0(this.rootNode,this.gridOptionsWrapper,this.eventService,this.columnModel,this.gridApi,this.columnApi,this.selectionService,this.beans)},i.prototype.start=function(){var e=this.gridOptionsWrapper.getRowData();e&&this.setRowData(e)},i.prototype.ensureRowHeightsValid=function(e,s,l,c){var p,m=!1;do{p=!1;for(var w=this.getRowIndexAtPixel(e),x=this.getRowIndexAtPixel(s),A=Math.max(w,l),I=Math.min(x,c),U=A;U<=I;U++){var Y=this.getRow(U);if(Y.rowHeightEstimated){var Q=this.gridOptionsWrapper.getRowHeightForNode(Y);Y.setRowHeight(Q.height),p=!0,m=!0}}p&&this.setRowTopAndRowIndex()}while(p);return m},i.prototype.setRowTopAndRowIndex=function(){for(var e=this.gridOptionsWrapper.getDefaultRowHeight(),s=0,l=new Set,c=this.gridOptionsWrapper.getDomLayout()===ce.DOM_LAYOUT_NORMAL,p=0;p<this.rowsToDisplay.length;p++){var m=this.rowsToDisplay[p];if(null!=m.id&&l.add(m.id),null==m.rowHeight){var w=this.gridOptionsWrapper.getRowHeightForNode(m,c,e);m.setRowHeight(w.height,w.estimated)}m.setRowTop(s),m.setRowIndex(p),s+=m.rowHeight}return l},i.prototype.clearRowTopAndRowIndex=function(e,s){var l=e.isActive(),c=function(w){w&&null!=w.id&&!s.has(w.id)&&w.clearRowTopAndRowIndex()};!function m(w){c(w),c(w.detailNode),c(w.sibling),w.hasChildren()&&w.childrenAfterGroup&&(l&&-1!=w.level&&!w.expanded||w.childrenAfterGroup.forEach(m))}(this.rootNode)},i.prototype.ensureRowsAtPixel=function(e,s,l){var c=this;void 0===l&&(l=0);var p=this.getRowIndexAtPixel(s);return this.getRow(p)!==e[0]&&(e.forEach(function(w){yt.removeFromArray(c.rootNode.allLeafChildren,w)}),e.forEach(function(w,x){yt.insertIntoArray(c.rootNode.allLeafChildren,w,Math.max(p+l,0)+x)}),this.refreshModel({step:K.j_r.EVERYTHING,keepRenderedRows:!0,animate:!0,keepEditingRows:!0}),!0)},i.prototype.highlightRowAtPixel=function(e,s){var l=null!=s?this.getRowIndexAtPixel(s):null,c=null!=l?this.getRow(l):null;if(c&&e&&c!==e&&null!=s){var p=this.getHighlightPosition(s,c);this.lastHighlightedRow&&this.lastHighlightedRow!==c&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),c.setHighlighted(p),this.lastHighlightedRow=c}else this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)},i.prototype.getHighlightPosition=function(e,s){if(!s){var l=this.getRowIndexAtPixel(e);if(!(s=this.getRow(l||0)))return K.oh5.Below}return e-s.rowTop<s.rowHeight/2?K.oh5.Above:K.oh5.Below},i.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},i.prototype.isLastRowIndexKnown=function(){return!0},i.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},i.prototype.getTopLevelRowCount=function(){return this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode?1:this.rootNode.childrenAfterFilter?this.rootNode.childrenAfterFilter.length:0},i.prototype.getTopLevelRowDisplayedIndex=function(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;var l=this.rootNode.childrenAfterSort[e];if(this.gridOptionsWrapper.isGroupHideOpenParents())for(;l.expanded&&l.childrenAfterSort&&l.childrenAfterSort.length>0;)l=l.childrenAfterSort[0];return l.rowIndex},i.prototype.getRowBounds=function(e){if(yt.missing(this.rowsToDisplay))return null;var s=this.rowsToDisplay[e];return s?{rowTop:s.rowTop,rowHeight:s.rowHeight}:null},i.prototype.onRowGroupOpened=function(){var e=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:K.j_r.MAP,keepRenderedRows:!0,animate:e})},i.prototype.onFilterChanged=function(e){if(!e.afterDataChange){var s=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:K.j_r.FILTER,keepRenderedRows:!0,animate:s})}},i.prototype.onSortChanged=function(){var e=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:K.j_r.SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0})},i.prototype.getType=function(){return ce.ROW_MODEL_TYPE_CLIENT_SIDE},i.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:K.j_r.PIVOT}):this.refreshModel({step:K.j_r.AGGREGATE})},i.prototype.createChangePath=function(e){var s=yt.missingOrEmpty(e),l=new Mt(!1,this.rootNode);return(s||this.gridOptionsWrapper.isTreeData())&&l.setInactive(),l},i.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(e){if(!this.gridOptionsWrapper.isSuppressModelUpdateAfterUpdateTransaction()||null==e.rowNodeTransactions)return!1;var s=yt.filter(e.rowNodeTransactions,function(c){return null!=c.add&&c.add.length>0||null!=c.remove&&c.remove.length>0});return null==s||0==s.length},i.prototype.refreshModel=function(e){var s=this;if(!this.isSuppressModelUpdateAfterUpdateTransaction(e)){var l=this.createChangePath(e.rowNodeTransactions);switch(e.step){case K.j_r.EVERYTHING:this.doRowGrouping(e.groupState,e.rowNodeTransactions,e.rowNodeOrder,l,!!e.afterColumnsChanged);case K.j_r.FILTER:this.doFilter(l);case K.j_r.PIVOT:this.doPivot(l);case K.j_r.AGGREGATE:this.doAggregate(l);case K.j_r.SORT:this.doSort(e.rowNodeTransactions,l);case K.j_r.MAP:this.doRowsToDisplay()}var c=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(l,c),this.eventService.dispatchEvent({type:$.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1}),this.$scope&&window.setTimeout(function(){s.$scope.$apply()},0)}},i.prototype.isEmpty=function(){var e=yt.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return yt.missing(this.rootNode)||e||!this.columnModel.isReady()},i.prototype.isRowsToRender=function(){return yt.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},i.prototype.getNodesInRangeForSelection=function(e,s){var p,l=!s,c=!1,m=[],w=this.gridOptionsWrapper.isGroupSelectsChildren();return this.forEachNodeAfterFilterAndSort(function(x){var A=l&&!c;if(l||(x===s||x===e)&&(l=!0),!x.group||!w){var U=l&&!c,Y=x.isParentOfNode(p);(U||Y)&&m.push(x)}A&&(x===s||x===e)&&(c=!0,p=x===s?s:e)}),m},i.prototype.setDatasource=function(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")},i.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},i.prototype.getRootNode=function(){return this.rootNode},i.prototype.getRow=function(e){return this.rowsToDisplay[e]},i.prototype.isRowPresent=function(e){return this.rowsToDisplay.indexOf(e)>=0},i.prototype.getRowIndexAtPixel=function(e){if(this.isEmpty())return-1;var s=0,l=this.rowsToDisplay.length-1;if(e<=0)return 0;if(yt.last(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;for(;;){var p=Math.floor((s+l)/2),m=this.rowsToDisplay[p];if(this.isRowInPixel(m,e))return p;m.rowTop<e?s=p+1:m.rowTop>e&&(l=p-1)}},i.prototype.isRowInPixel=function(e,s){return e.rowTop<=s&&e.rowTop+e.rowHeight>s},i.prototype.forEachLeafNode=function(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(s,l){return e(s,l)})},i.prototype.forEachNode=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterGroup,e,Qo.Normal,0)},i.prototype.forEachNodeAfterFilter=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterFilter,e,Qo.AfterFilter,0)},i.prototype.forEachNodeAfterFilterAndSort=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterSort,e,Qo.AfterFilterAndSort,0)},i.prototype.forEachPivotNode=function(e){this.recursivelyWalkNodesAndCallback([this.rootNode],e,Qo.PivotNodes,0)},i.prototype.recursivelyWalkNodesAndCallback=function(e,s,l,c){if(!e)return c;for(var p=0;p<e.length;p++){var m=e[p];if(s(m,c++),m.hasChildren()){var w=null;switch(l){case Qo.Normal:w=m.childrenAfterGroup;break;case Qo.AfterFilter:w=m.childrenAfterFilter;break;case Qo.AfterFilterAndSort:w=m.childrenAfterSort;break;case Qo.PivotNodes:w=m.leafGroup?null:m.childrenAfterSort}w&&(c=this.recursivelyWalkNodesAndCallback(w,s,l,c))}}return c},i.prototype.doAggregate=function(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})},i.prototype.expandOrCollapseAll=function(e){var s=this.gridOptionsWrapper.isTreeData();this.rootNode&&function l(m){!m||m.forEach(function(w){(s?yt.exists(w.childrenAfterGroup):w.group)&&(w.expanded=e,l(w.childrenAfterGroup))})}(this.rootNode.childrenAfterGroup),this.refreshModel({step:K.j_r.MAP}),this.eventService.dispatchEvent({api:this.gridApi,columnApi:this.columnApi,type:$.EVENT_EXPAND_COLLAPSE_ALL,source:e?"expandAll":"collapseAll"})},i.prototype.doSort=function(e,s){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:s})},i.prototype.doRowGrouping=function(e,s,l,c,p){this.groupStage?(s?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:s,rowNodeOrder:l,changedPath:c}):(this.groupStage.execute({rowNode:this.rootNode,changedPath:c,afterColumnsChanged:p}),this.restoreGroupState(e)),this.gridOptionsWrapper.isGroupSelectsChildren()&&this.selectionService.updateGroupsFromChildrenSelections(c)):(this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren())},i.prototype.restoreGroupState=function(e){!e||yt.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(s,l){"boolean"==typeof e[l]&&(s.expanded=e[l])})},i.prototype.doFilter=function(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})},i.prototype.doPivot=function(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})},i.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsWrapper.isRememberGroupStateWhenNewData())return null;var e={};return yt.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(s,l){return e[l]=s.expanded}),e},i.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},i.prototype.getRowNode=function(e){if("string"==typeof e&&0==e.indexOf(sn.ID_PREFIX_ROW_GROUP)){var l=void 0;return this.forEachNode(function(c){c.id===e&&(l=c)}),l}return this.nodeManager.getRowNode(e)},i.prototype.setRowData=function(e){var s=this.getGroupState();this.nodeManager.setRowData(e),this.eventService.dispatchEvent({type:$.EVENT_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi}),this.refreshModel({step:K.j_r.EVERYTHING,groupState:s,newData:!0})},i.prototype.batchUpdateRowData=function(e,s){var l=this;if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];var c=this.gridOptionsWrapper.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(function(){l.executeBatchUpdateRowData()},c)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:s})},i.prototype.flushAsyncTransactions=function(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},i.prototype.executeBatchUpdateRowData=function(){var e=this;this.valueCache.onDataChanged();var s=[],l=[],c=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(function(m){var w=e.nodeManager.updateRowData(m.rowDataTransaction,void 0);l.push(w),m.callback&&s.push(m.callback.bind(null,w)),"number"==typeof m.rowDataTransaction.addIndex&&(c=!0)}),this.commonUpdateRowData(l,void 0,c),s.length>0&&window.setTimeout(function(){s.forEach(function(m){return m()})},0),l.length>0){var p={api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),type:$.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:l};this.eventService.dispatchEvent(p)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},i.prototype.updateRowData=function(e,s){this.valueCache.onDataChanged();var l=this.nodeManager.updateRowData(e,s);return this.commonUpdateRowData([l],s,"number"==typeof e.addIndex),l},i.prototype.createRowNodeOrder=function(){if(!this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder()){var s={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var l=0;l<this.rootNode.allLeafChildren.length;l++)s[this.rootNode.allLeafChildren[l].id]=l;return s}},i.prototype.commonUpdateRowData=function(e,s,l){l&&(s=this.createRowNodeOrder()),this.refreshModel({step:K.j_r.EVERYTHING,rowNodeTransactions:e,rowNodeOrder:s,keepRenderedRows:!0,animate:!0,keepEditingRows:!0}),this.eventService.dispatchEvent({type:$.EVENT_ROW_DATA_UPDATED,api:this.gridApi,columnApi:this.columnApi})},i.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},i.prototype.onRowHeightChanged=function(){this.refreshModel({step:K.j_r.MAP,keepRenderedRows:!0,keepEditingRows:!0})},i.prototype.resetRowHeights=function(){var e=!1;this.forEachNode(function(s){s.setRowHeight(s.rowHeight,!0);var l=s.detailNode;l&&l.setRowHeight(l.rowHeight,!0),e=!0}),e&&this.onRowHeightChanged()},bi([B("columnModel")],i.prototype,"columnModel",void 0),bi([B("$scope")],i.prototype,"$scope",void 0),bi([B("selectionService")],i.prototype,"selectionService",void 0),bi([B("valueCache")],i.prototype,"valueCache",void 0),bi([B("columnApi")],i.prototype,"columnApi",void 0),bi([B("gridApi")],i.prototype,"gridApi",void 0),bi([B("animationFrameService")],i.prototype,"animationFrameService",void 0),bi([B("beans")],i.prototype,"beans",void 0),bi([B("filterStage")],i.prototype,"filterStage",void 0),bi([B("sortStage")],i.prototype,"sortStage",void 0),bi([B("flattenStage")],i.prototype,"flattenStage",void 0),bi([Ln("groupStage")],i.prototype,"groupStage",void 0),bi([Ln("aggregationStage")],i.prototype,"aggregationStage",void 0),bi([Ln("pivotStage")],i.prototype,"pivotStage",void 0),bi([Qe],i.prototype,"init",null),bi([ht("rowModel")],i)}(Ye),gt=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),wm=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},gR=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return gt(i,d),i.prototype.execute=function(e){var s=e.rowNode;this.filterService.filter(e.changedPath),this.selectableService.updateSelectableAfterFiltering(s)},wm([B("selectableService")],i.prototype,"selectableService",void 0),wm([B("filterService")],i.prototype,"filterService",void 0),wm([ht("filterStage")],i)}(Ye),d0=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),rh=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},mR=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return d0(i,d),i.prototype.execute=function(e){var s=this.sortController.getSortOptions(),l=yt.exists(s)&&s.length>0,c=l&&yt.exists(e.rowNodeTransactions)&&this.gridOptionsWrapper.isDeltaSort(),p=c?this.calculateDirtyNodes(e.rowNodeTransactions):null,m=yt.missingOrEmpty(this.columnModel.getValueColumns()),w=yt.some(s,function(x){return!!x.column.getColDef().showRowGroup});this.sortService.sort(s,l,c,p,e.changedPath,m,w)},i.prototype.calculateDirtyNodes=function(e){var s={},l=function(p){p&&p.forEach(function(m){return s[m.id]=!0})};return e&&e.forEach(function(c){l(c.add),l(c.update),l(c.remove)}),s},rh([B("sortService")],i.prototype,"sortService",void 0),rh([B("sortController")],i.prototype,"sortController",void 0),rh([B("columnModel")],i.prototype,"columnModel",void 0),rh([ht("sortStage")],i)}(Ye),f0=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Sm=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},p0=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return f0(i,d),i.prototype.execute=function(e){var s=e.rowNode,l=[],c={value:0},p=this.columnModel.isPivotMode(),m=p&&s.leafGroup;return this.recursivelyAddToRowsToDisplay(m?[s]:s.childrenAfterSort,l,c,p,0),!m&&l.length>0&&this.gridOptionsWrapper.isGroupIncludeTotalFooter()&&(this.ensureFooterNodeExists(s),this.addRowNodeToRowsToDisplay(s.sibling,l,c,0)),l},i.prototype.recursivelyAddToRowsToDisplay=function(e,s,l,c,p){if(!yt.missingOrEmpty(e))for(var m=this.gridOptionsWrapper.isGroupHideOpenParents(),w=this.gridOptionsWrapper.isGroupRemoveSingleChildren(),x=!w&&this.gridOptionsWrapper.isGroupRemoveLowestSingleChildren(),A=0;A<e.length;A++){var I=e[A],U=I.hasChildren(),Q=w&&U&&1===I.childrenAfterGroup.length,oe=x&&U&&I.leafGroup&&1===I.childrenAfterGroup.length;if(!(c&&!U||m&&I.expanded&&(!c||!I.leafGroup)||Q||oe)&&this.addRowNodeToRowsToDisplay(I,s,l,p),!c||!I.leafGroup)if(U){var Me=Q||oe;(I.expanded||Me)&&(this.recursivelyAddToRowsToDisplay(I.childrenAfterSort,s,l,c,Me?p:p+1),this.gridOptionsWrapper.isGroupIncludeFooter()&&(this.ensureFooterNodeExists(I),this.addRowNodeToRowsToDisplay(I.sibling,s,l,p)))}else if(I.master&&I.expanded){var Fe=this.createDetailNode(I);this.addRowNodeToRowsToDisplay(Fe,s,l,p)}}},i.prototype.addRowNodeToRowsToDisplay=function(e,s,l,c){var p=this.gridOptionsWrapper.isGroupMultiAutoColumn();s.push(e),e.setUiLevel(p?0:c)},i.prototype.ensureFooterNodeExists=function(e){if(!yt.exists(e.sibling)){var s=new sn(this.beans);Object.keys(e).forEach(function(l){s[l]=e[l]}),s.footer=!0,s.setRowTop(null),s.setRowIndex(null),s.oldRowTop=null,yt.exists(s.id)&&(s.id="rowGroupFooter_"+s.id),s.sibling=e,e.sibling=s}},i.prototype.createDetailNode=function(e){if(yt.exists(e.detailNode))return e.detailNode;var s=new sn(this.beans);return s.detail=!0,s.selectable=!1,s.parent=e,yt.exists(e.id)&&(s.id="detail_"+e.id),s.data=e.data,s.level=e.level+1,e.detailNode=s,s},Sm([B("columnModel")],i.prototype,"columnModel",void 0),Sm([B("beans")],i.prototype,"beans",void 0),Sm([ht("flattenStage")],i)}(Ye),yR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ih=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},BM=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return yR(i,d),i.prototype.init=function(){this.postSortFunc=this.gridOptionsWrapper.getPostSortFunc()},i.prototype.sort=function(e,s,l,c,p,m,w){var x=this,A=this.gridOptionsWrapper.isGroupMaintainOrder(),I=yt.some(this.columnModel.getAllGridColumns(),function(Y){return Y.isRowGroupActive()});p&&p.forEachChangedNodeDepthFirst(function(Q){x.pullDownGroupDataForHideOpenParents(Q.childrenAfterFilter,!0),Q.childrenAfterSort=s?A&&I&&!Q.leafGroup&&!w?Q.childrenAfterFilter.slice(0):l?x.doDeltaSort(Q,e,c,p,m):x.rowNodeSorter.doFullSort(Q.childrenAfterFilter,e):Q.childrenAfterFilter.slice(0),Q.sibling&&(Q.sibling.childrenAfterSort=Q.childrenAfterSort),x.updateChildIndexes(Q),x.postSortFunc&&x.postSortFunc(Q.childrenAfterSort)}),this.updateGroupDataForHideOpenParents(p)},i.prototype.mapNodeToSortedNode=function(e,s){return{currentPos:s,rowNode:e}},i.prototype.doDeltaSort=function(e,s,l,c,p){var m=e.childrenAfterSort.filter(function(I){var U=!l[I.id],Y=p||c&&c.canSkip(I);return U&&Y}).map(this.mapNodeToSortedNode.bind(this)),w={};m.forEach(function(I){return w[I.rowNode.id]=I.rowNode});var x=e.childrenAfterFilter.filter(function(I){return!w[I.id]}).map(this.mapNodeToSortedNode.bind(this));return x.sort(this.rowNodeSorter.compareRowNodes.bind(this,s)),(0===x.length?m:0===m.length?x:this.mergeSortedArrays(s,m,x)).map(function(I){return I.rowNode})},i.prototype.mergeSortedArrays=function(e,s,l){for(var c=[],p=0,m=0;p<s.length&&m<l.length;){var w=this.rowNodeSorter.compareRowNodes(e,s[p],l[m]);c.push(w<0?s[p++]:l[m++])}for(;p<s.length;)c.push(s[p++]);for(;m<l.length;)c.push(l[m++]);return c},i.prototype.updateChildIndexes=function(e){if(!yt.missing(e.childrenAfterSort))for(var s=e.childrenAfterSort,l=0;l<s.length;l++){var c=s[l],m=l===e.childrenAfterSort.length-1;c.setFirstChild(0===l),c.setLastChild(m),c.setChildIndex(l)}},i.prototype.updateGroupDataForHideOpenParents=function(e){var s=this;if(this.gridOptionsWrapper.isGroupHideOpenParents()){if(this.gridOptionsWrapper.isTreeData())return yt.doOnce(function(){return console.warn("AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).")},"sortService.hideOpenParentsWithTreeData"),!1;var c=function p(m){s.pullDownGroupDataForHideOpenParents(m.childrenAfterSort,!1),m.childrenAfterSort.forEach(function(w){w.hasChildren()&&p(w)})};e&&e.executeFromRootNode(function(p){return c(p)})}},i.prototype.pullDownGroupDataForHideOpenParents=function(e,s){var l=this;!this.gridOptionsWrapper.isGroupHideOpenParents()||yt.missing(e)||e.forEach(function(c){l.columnModel.getGroupDisplayColumns().forEach(function(m){var w=m.getColDef().showRowGroup;if("string"==typeof w){var A=l.columnModel.getPrimaryColumn(w);if(A!==c.rowGroupColumn)if(s)c.setGroupValue(m.getId(),void 0);else{var U=c.getFirstChildOfFirstChild(A);U&&c.setGroupValue(m.getId(),U.key)}}else console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup")})})},ih([B("columnModel")],i.prototype,"columnModel",void 0),ih([B("rowNodeSorter")],i.prototype,"rowNodeSorter",void 0),ih([Qe],i.prototype,"init",null),ih([ht("sortService")],i)}(Ye),_R=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Hd=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},Em=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return _R(i,d),i.prototype.postConstruct=function(){this.doingTreeData=this.gridOptionsWrapper.isTreeData()},i.prototype.filter=function(e){var s=this.filterManager.isAnyFilterPresent();this.filterNodes(s,e)},i.prototype.filterNodes=function(e,s){var l=this,c=function(A,I){A.hasChildren()?(A.childrenAfterFilter=e&&!I?A.childrenAfterGroup.filter(function(U){var Y=U.childrenAfterFilter&&U.childrenAfterFilter.length>0,Q=U.data&&l.filterManager.doesRowPassFilter({rowNode:U});return Y||Q}):A.childrenAfterGroup,l.setAllChildrenCount(A)):(A.childrenAfterFilter=A.childrenAfterGroup,A.setAllChildrenCount(null)),A.sibling&&(A.sibling.childrenAfterFilter=A.childrenAfterFilter)};if(this.doingTreeDataFiltering()){var p=function x(A,I){if(A.childrenAfterGroup)for(var U=0;U<A.childrenAfterGroup.length;U++){var Y=A.childrenAfterGroup[U],Q=I||l.filterManager.doesRowPassFilter({rowNode:Y});Y.childrenAfterGroup?x(A.childrenAfterGroup[U],Q):c(Y,Q)}c(A,I)};s.executeFromRootNode(function(A){return p(A,!1)})}else s.forEachChangedNodeDepthFirst(function(A){return c(A,!1)},!0)},i.prototype.setAllChildrenCountTreeData=function(e){var s=0;e.childrenAfterFilter.forEach(function(l){s++,s+=l.allChildrenCount}),e.setAllChildrenCount(s)},i.prototype.setAllChildrenCountGridGrouping=function(e){var s=0;e.childrenAfterFilter.forEach(function(l){l.group?s+=l.allChildrenCount:s++}),e.setAllChildrenCount(s)},i.prototype.setAllChildrenCount=function(e){this.doingTreeData?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e)},i.prototype.doingTreeDataFiltering=function(){return this.gridOptionsWrapper.isTreeData()&&!this.gridOptionsWrapper.isExcludeChildrenWhenTreeDataFiltering()},Hd([B("filterManager")],i.prototype,"filterManager",void 0),Hd([Qe],i.prototype,"postConstruct",null),Hd([ht("filterService")],i)}(Ye),CR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),h0=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},HM=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return CR(i,d),i.prototype.postConstruct=function(){this.rowModel.getType()===ce.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel)},i.prototype.createTransactionForRowData=function(e){if(yt.missing(this.clientSideRowModel))console.error("AG Grid: ImmutableService only works with ClientSideRowModel");else{var s=this.gridOptionsWrapper.getRowNodeIdFunc();if(s&&!yt.missing(s)){var l={remove:[],update:[],add:[]},c=this.clientSideRowModel.getCopyOfNodesMap(),m=this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder()?null:{};return yt.exists(e)&&e.forEach(function(w,x){var A=s(w),I=c[A];m&&(m[A]=x),I?(I.data!==w&&l.update.push(w),c[A]=void 0):l.add.push(w)}),yt.iterateObject(c,function(w,x){x&&l.remove.push(x.data)}),[l,m]}console.error("AG Grid: ImmutableService requires getRowNodeId() callback to be implemented, your row data need IDs!")}},h0([B("rowModel")],i.prototype,"rowModel",void 0),h0([Qe],i.prototype,"postConstruct",null),h0([ht("immutableService")],i)}(Ye),VM={moduleName:K.GXE.ClientSideRowModelModule,beans:[gR,mR,p0,BM,Em,HM],rowModels:{clientSide:vR}},wR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),oh=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},SR=function(d){function i(e,s,l){var c=d.call(this,e)||this;return c.parentCache=s,c.params=l,c.startRow=e*l.blockSize,c.endRow=c.startRow+l.blockSize,c}return wR(i,d),i.prototype.postConstruct=function(){this.createRowNodes()},i.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},i.prototype.setDataAndId=function(e,s,l){!e.id&&e.alreadyRendered&&(e.alreadyRendered=!1),yt.exists(s)?e.setDataAndId(s,l.toString()):e.setDataAndId(void 0,void 0)},i.prototype.loadFromDatasource=function(){var e=this,s=this.createLoadParams();yt.missing(this.params.datasource.getRows)?console.warn("AG Grid: datasource is missing getRows method"):window.setTimeout(function(){e.params.datasource.getRows(s)},0)},i.prototype.processServerFail=function(){},i.prototype.createLoadParams=function(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsWrapper.getContext()}},i.prototype.forEachNode=function(e,s,l){var c=this;this.rowNodes.forEach(function(p,m){c.startRow+m<l&&e(p,s.next())})},i.prototype.getLastAccessed=function(){return this.lastAccessed},i.prototype.getRow=function(e,s){return void 0===s&&(s=!1),s||(this.lastAccessed=this.params.lastAccessedSequence.next()),this.rowNodes[e-this.startRow]},i.prototype.getStartRow=function(){return this.startRow},i.prototype.getEndRow=function(){return this.endRow},i.prototype.createRowNodes=function(){this.rowNodes=[];for(var e=0;e<this.params.blockSize;e++){var s=this.startRow+e,l=new sn(this.beans);l.setRowHeight(this.params.rowHeight),l.uiLevel=0,l.setRowIndex(s),l.setRowTop(this.params.rowHeight*s),this.rowNodes.push(l)}},i.prototype.processServerResult=function(e){var s=this;this.rowNodes.forEach(function(c,p){s.setDataAndId(c,e.rowData?e.rowData[p]:void 0,s.startRow+p)}),this.parentCache.pageLoaded(this,null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0)},i.prototype.destroyRowNodes=function(){this.rowNodes.forEach(function(e){e.clearRowTopAndRowIndex()})},oh([B("beans")],i.prototype,"beans",void 0),oh([Qe],i.prototype,"postConstruct",null),oh([Ii],i.prototype,"destroyRowNodes",null),i}(hm),ER=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ms=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},bR=function(d,i){return function(e,s){i(e,s,d)}},v0=function(d){function i(e){var s=d.call(this)||this;return s.lastRowIndexKnown=!1,s.blocks={},s.blockCount=0,s.rowCount=e.initialRowCount,s.params=e,s}return ER(i,d),i.prototype.setBeans=function(e){this.logger=e.create("InfiniteCache")},i.prototype.getRow=function(e,s){void 0===s&&(s=!1);var l=Math.floor(e/this.params.blockSize),c=this.blocks[l];if(!c){if(s)return;c=this.createBlock(l)}return c.getRow(e)},i.prototype.createBlock=function(e){var s=this.createBean(new SR(e,this,this.params));return this.blocks[s.getId()]=s,this.blockCount++,this.purgeBlocksIfNeeded(s),this.params.rowNodeBlockLoader.addBlock(s),s},i.prototype.refreshCache=function(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach(function(s){return s.setStateWaitingToLoad()}),this.params.rowNodeBlockLoader.checkBlockToLoad())},i.prototype.destroyAllBlocks=function(){var e=this;this.getBlocksInOrder().forEach(function(s){return e.destroyBlock(s)})},i.prototype.getRowCount=function(){return this.rowCount},i.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},i.prototype.pageLoaded=function(e,s){!this.isAlive()||(this.logger.log("onPageLoaded: page = "+e.getId()+", lastRow = "+s),this.checkRowCount(e,s),this.onCacheUpdated())},i.prototype.purgeBlocksIfNeeded=function(e){var s=this,l=this.getBlocksInOrder().filter(function(x){return x!=e});l.sort(function(A,I){return I.getLastAccessed()-A.getLastAccessed()});var p=this.params.maxBlocksInCache>0,m=p?this.params.maxBlocksInCache-1:null,w=i.MAX_EMPTY_BLOCKS_TO_KEEP-1;l.forEach(function(x,A){if(x.getState()===SR.STATE_WAITING_TO_LOAD&&A>=w||p&&A>=m){if(s.isBlockCurrentlyDisplayed(x)||s.isBlockFocused(x))return;s.removeBlockFromCache(x)}})},i.prototype.isBlockFocused=function(e){var s=this.focusService.getFocusCellToUseAfterRefresh();if(!s||null!=s.rowPinned)return!1;var l=e.getStartRow(),c=e.getEndRow();return s.rowIndex>=l&&s.rowIndex<c},i.prototype.isBlockCurrentlyDisplayed=function(e){var s=e.getStartRow(),l=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(s,l)},i.prototype.removeBlockFromCache=function(e){!e||this.destroyBlock(e)},i.prototype.checkRowCount=function(e,s){if("number"==typeof s&&s>=0)this.rowCount=s,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var c=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<c&&(this.rowCount=c)}},i.prototype.setRowCount=function(e,s){this.rowCount=e,yt.exists(s)&&(this.lastRowIndexKnown=s),this.lastRowIndexKnown||this.rowCount%this.params.blockSize==0&&this.rowCount++,this.onCacheUpdated()},i.prototype.forEachNodeDeep=function(e){var s=this,l=new ms;this.getBlocksInOrder().forEach(function(c){return c.forEachNode(e,l,s.rowCount)})},i.prototype.getBlocksInOrder=function(){return yt.getAllValuesInObject(this.blocks).sort(function(c,p){return c.getId()-p.getId()})},i.prototype.destroyBlock=function(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)},i.prototype.onCacheUpdated=function(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:$.EVENT_STORE_UPDATED}))},i.prototype.destroyAllBlocksPastVirtualRowCount=function(){var e=this,s=[];this.getBlocksInOrder().forEach(function(l){l.getId()*e.params.blockSize>=e.rowCount&&s.push(l)}),s.length>0&&s.forEach(function(l){return e.destroyBlock(l)})},i.prototype.purgeCache=function(){var e=this;this.getBlocksInOrder().forEach(function(s){return e.removeBlockFromCache(s)}),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},i.prototype.getRowNodesInRange=function(e,s){var l=this,c=[],p=-1,m=!1,w=new ms;yt.missing(e)&&(m=!0);var x=!1;return this.getBlocksInOrder().forEach(function(I){if(!x){if(m&&p+1!==I.getId())return void(x=!0);p=I.getId(),I.forEachNode(function(U){var Y=U===e||U===s;(m||Y)&&c.push(U),Y&&(m=!m)},w,l.rowCount)}}),x||m?[]:c},i.MAX_EMPTY_BLOCKS_TO_KEEP=2,Ms([B("rowRenderer")],i.prototype,"rowRenderer",void 0),Ms([B("focusService")],i.prototype,"focusService",void 0),Ms([bR(0,Li("loggerFactory"))],i.prototype,"setBeans",null),Ms([Ii],i.prototype,"destroyAllBlocks",null),i}(Ye),xR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),ha=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},g0=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return xR(i,d),i.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}},i.prototype.ensureRowHeightsValid=function(e,s,l,c){return!1},i.prototype.init=function(){var e=this;!this.gridOptionsWrapper.isRowModelInfinite()||(this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(function(){return e.destroyCache()}),this.verifyProps())},i.prototype.verifyProps=function(){null!=this.gridOptionsWrapper.getDefaultGroupOrderComparator()&&yt.doOnce(function(){return console.warn("AG Grid: defaultGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.")},"IRM.DefaultGroupOrderComparator")},i.prototype.start=function(){this.setDatasource(this.gridOptionsWrapper.getDatasource())},i.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},i.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,$.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,$.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,$.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this))},i.prototype.onFilterChanged=function(){this.reset()},i.prototype.onSortChanged=function(){this.reset()},i.prototype.onColumnEverything=function(){(!this.cacheParams||this.isSortModelDifferent())&&this.reset()},i.prototype.isSortModelDifferent=function(){return!yt.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},i.prototype.getType=function(){return ce.ROW_MODEL_TYPE_INFINITE},i.prototype.setDatasource=function(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()},i.prototype.isEmpty=function(){return!this.infiniteCache},i.prototype.isRowsToRender=function(){return!!this.infiniteCache},i.prototype.getNodesInRangeForSelection=function(e,s){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,s):[]},i.prototype.reset=function(){if(this.datasource){yt.exists(this.gridOptionsWrapper.getRowNodeIdFunc())||this.selectionService.reset(),this.resetCache();var s=this.createModelUpdatedEvent();this.eventService.dispatchEvent(s)}},i.prototype.createModelUpdatedEvent=function(){return{type:$.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,newPage:!1,newData:!1,keepRenderedRows:!0,animate:!1}},i.prototype.resetCache=function(){this.destroyCache();var e=this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,maxConcurrentRequests:this.defaultIfInvalid(e,2),initialRowCount:this.defaultIfInvalid(this.gridOptionsWrapper.getInfiniteInitialRowCount(),1),maxBlocksInCache:this.gridOptionsWrapper.getMaxBlocksInCache(),rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),overflowSize:this.defaultIfInvalid(this.gridOptionsWrapper.getCacheOverflowSize(),1),blockSize:this.defaultIfInvalid(this.gridOptionsWrapper.getCacheBlockSize(),100),lastAccessedSequence:new ms},this.infiniteCache=this.createBean(new v0(this.cacheParams))},i.prototype.defaultIfInvalid=function(e,s){return e>0?e:s},i.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},i.prototype.onCacheUpdated=function(){var e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)},i.prototype.getRow=function(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)},i.prototype.getRowNode=function(e){var s=void 0;return this.forEachNode(function(l){l.id===e&&(s=l)}),s},i.prototype.forEachNode=function(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)},i.prototype.getTopLevelRowCount=function(){return this.getRowCount()},i.prototype.getTopLevelRowDisplayedIndex=function(e){return e},i.prototype.getRowIndexAtPixel=function(e){if(0!==this.rowHeight){var s=Math.floor(e/this.rowHeight),l=this.getRowCount()-1;return s>l?l:s}return 0},i.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},i.prototype.isRowPresent=function(e){return!!this.getRowNode(e.id)},i.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},i.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},i.prototype.isLastRowIndexKnown=function(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()},i.prototype.setRowCount=function(e,s){this.infiniteCache&&this.infiniteCache.setRowCount(e,s)},ha([B("filterManager")],i.prototype,"filterManager",void 0),ha([B("sortController")],i.prototype,"sortController",void 0),ha([B("selectionService")],i.prototype,"selectionService",void 0),ha([B("gridApi")],i.prototype,"gridApi",void 0),ha([B("columnApi")],i.prototype,"columnApi",void 0),ha([B("rowRenderer")],i.prototype,"rowRenderer",void 0),ha([B("rowNodeBlockLoader")],i.prototype,"rowNodeBlockLoader",void 0),ha([Qe],i.prototype,"init",null),ha([Ii],i.prototype,"destroyDatasource",null),ha([ht("rowModel")],i)}(Ye),RR={moduleName:K.GXE.InfiniteRowModelModule,rowModels:{infinite:g0}},bm=function(){function d(){}return d.prototype.setBeans=function(i){this.beans=i},d.prototype.getFileName=function(i){var e=this.getDefaultFileExtension();return(null==i||!i.length)&&(i=this.getDefaultFileName()),-1===i.indexOf(".")?i+"."+e:i},d.prototype.getMergedParamsAndData=function(i){var e=this.mergeDefaultParams(i);return{mergedParams:e,data:this.beans.gridSerializer.serialize(this.createSerializingSession(e),e)}},d.prototype.mergeDefaultParams=function(i){var e=this.getDefaultExportParams(),s={};return yt.assign(s,e),yt.assign(s,i),s},d}(),m0=function(){function d(i){this.groupColumns=[];var s=i.valueService,l=i.gridOptionsWrapper,c=i.processCellCallback,p=i.processHeaderCallback,m=i.processGroupHeaderCallback,w=i.processRowGroupCallback;this.columnModel=i.columnModel,this.valueService=s,this.gridOptionsWrapper=l,this.processCellCallback=c,this.processHeaderCallback=p,this.processGroupHeaderCallback=m,this.processRowGroupCallback=w}return d.prototype.prepare=function(i){this.groupColumns=yt.filter(i,function(e){return!!e.getColDef().showRowGroup})},d.prototype.extractHeaderValue=function(i){var e=this.getHeaderName(this.processHeaderCallback,i);return null!=e?e:""},d.prototype.extractRowCellValue=function(i,e,s,l,c){var w,p=this.gridOptionsWrapper.isGroupMultiAutoColumn()?c.rowGroupIndex:0;w=c&&c.group&&(e===p&&-1!==this.groupColumns.indexOf(i)||0===e&&this.gridOptionsWrapper.isGroupUseEntireRow(this.columnModel.isPivotMode()))?this.createValueForGroupNode(c):this.valueService.getValue(i,c);var x=this.processCell(s,c,i,w,this.processCellCallback,l);return null!=x?x:""},d.prototype.getHeaderName=function(i,e){return i?i({column:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}):this.columnModel.getDisplayNameForColumn(e,"csv",!0)},d.prototype.createValueForGroupNode=function(i){if(this.processRowGroupCallback)return this.processRowGroupCallback({node:i,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()});var e=[i.key];if(!this.gridOptionsWrapper.isGroupMultiAutoColumn())for(;i.parent;)e.push((i=i.parent).key);return e.reverse().join(" -> ")},d.prototype.processCell=function(i,e,s,l,c,p){return c?c({accumulatedRowIndex:i,column:s,node:e,value:l,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),type:p}):null!=l?l:""},d}(),y0=function(){function d(){}return d.download=function(i,e){var s=document.defaultView||window;if(s)if(s.navigator.msSaveOrOpenBlob)s.navigator.msSaveOrOpenBlob(e,i);else{var l=document.createElement("a"),c=s.URL.createObjectURL(e);l.setAttribute("href",c),l.setAttribute("download",i),l.style.display="none",document.body.appendChild(l),l.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:s})),document.body.removeChild(l),s.setTimeout(function(){s.URL.revokeObjectURL(c)},0)}else console.warn("AG Grid: There is no `window` associated with the current `document`")},d}(),AR=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),DR=function(d){function i(e){var s=d.call(this,e)||this;s.isFirstLine=!0,s.result="";var c=e.columnSeparator;return s.suppressQuotes=e.suppressQuotes,s.columnSeparator=c,s}return AR(i,d),i.prototype.addCustomContent=function(e){var s=this;!e||("string"==typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach(function(l){s.beginNewLine(),l.forEach(function(c,p){0!==p&&(s.result+=s.columnSeparator),s.result+=s.putInQuotes(c.data.value||""),c.mergeAcross&&s.appendEmptyCells(c.mergeAcross)})}))},i.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},i.prototype.onNewHeaderGroupingRowColumn=function(e,s,l){0!=s&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e),this.appendEmptyCells(l)},i.prototype.appendEmptyCells=function(e){for(var s=1;s<=e;s++)this.result+=this.columnSeparator+this.putInQuotes("")},i.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},i.prototype.onNewHeaderRowColumn=function(e,s){0!=s&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))},i.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},i.prototype.onNewBodyRowColumn=function(e,s,l){0!=s&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractRowCellValue(e,s,s,ce.EXPORT_TYPE_CSV,l))},i.prototype.putInQuotes=function(e){return this.suppressQuotes?e:null==e?'""':("string"==typeof e?s=e:"function"==typeof e.toString?s=e.toString():(console.warn("unknown value type during csv conversion"),s=""),'"'+s.replace(/"/g,'""')+'"');var s},i.prototype.parse=function(){return this.result},i.prototype.beginNewLine=function(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1},i}(m0),_0=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),gc=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c},xm=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return _0(i,d),i.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})},i.prototype.getDefaultExportParams=function(){return this.gridOptionsWrapper.getDefaultExportParams("csv")},i.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("ag-grid: Export cancelled. Export is not allowed as per your configuration."),"";var s=this.getMergedParamsAndData(e),l=s.mergedParams,c=s.data,p=new Blob(["\ufeff",c],{type:window.navigator.msSaveOrOpenBlob?this.getMimeType():"octet/stream"});return y0.download(this.getFileName(l.fileName),p),c},i.prototype.exportDataAsCsv=function(e){return this.export(e)},i.prototype.getDataAsCsv=function(e){return this.getMergedParamsAndData(e).data},i.prototype.getMimeType=function(){return"text/csv;charset=utf-8;"},i.prototype.getDefaultFileName=function(){return"export.csv"},i.prototype.getDefaultFileExtension=function(){return"csv"},i.prototype.createSerializingSession=function(e){var s=this;return new DR({columnModel:s.columnModel,valueService:s.valueService,gridOptionsWrapper:s.gridOptionsWrapper,processCellCallback:e.processCellCallback||void 0,processHeaderCallback:e.processHeaderCallback||void 0,processGroupHeaderCallback:e.processGroupHeaderCallback||void 0,processRowGroupCallback:e.processRowGroupCallback||void 0,suppressQuotes:e.suppressQuotes||!1,columnSeparator:e.columnSeparator||","})},i.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressCsvExport()},gc([B("columnModel")],i.prototype,"columnModel",void 0),gc([B("valueService")],i.prototype,"valueService",void 0),gc([B("gridSerializer")],i.prototype,"gridSerializer",void 0),gc([B("gridOptionsWrapper")],i.prototype,"gridOptionsWrapper",void 0),gc([Qe],i.prototype,"postConstruct",null),gc([ht("csvCreator")],i)}(bm),C0=function(){var d=function(e,s){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var p in c)c.hasOwnProperty(p)&&(l[p]=c[p])})(e,s)};return function(i,e){function s(){this.constructor=i}d(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),uu=function(d,i,e,s){var p,l=arguments.length,c=l<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(d,i,e,s);else for(var m=d.length-1;m>=0;m--)(p=d[m])&&(c=(l<3?p(c):l>3?p(i,e,c):p(i,e))||c);return l>3&&c&&Object.defineProperty(i,e,c),c};!function(d){d[d.HEADER_GROUPING=0]="HEADER_GROUPING",d[d.HEADER=1]="HEADER",d[d.BODY=2]="BODY"}(K.aCu||(K.aCu={}));var MR=function(d){function i(){return null!==d&&d.apply(this,arguments)||this}return C0(i,d),i.prototype.serialize=function(e,s){void 0===s&&(s={});var l=this.getColumnsToExport(s.allColumns,s.columnKeys);return yt.compose(this.prepareSession(l),this.prependContent(s),this.exportColumnGroups(s,l),this.exportHeaders(s,l),this.processPinnedTopRows(s,l),this.processRows(s,l),this.processPinnedBottomRows(s,l),this.appendContent(s))(e).parse()},i.prototype.processRow=function(e,s,l,c){var p=s.shouldRowBeSkipped||function(){return!1},m=this.gridOptionsWrapper,w=m.getContext(),x=m.getApi(),A=m.getColumnApi(),I=m.isGroupRemoveSingleChildren(),U=m.isGroupHideOpenParents(),Y=m.isGroupRemoveLowestSingleChildren(),Q=this.columnModel.isPivotMode()?c.leafGroup:!c.group,He=1===c.allChildrenCount&&(I||Y&&c.leafGroup);if((s.skipGroups||s.skipRowGroups)&&s.skipGroups&&yt.doOnce(function(){return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.")},"gridSerializer-skipGroups"),!(!Q&&(s.skipRowGroups||He||U)||s.onlySelected&&!c.isSelected()||s.skipPinnedTop&&"top"===c.rowPinned||s.skipPinnedBottom&&"bottom"===c.rowPinned)&&(-1!==c.level||c.leafGroup)&&!p({node:c,api:x,context:w})){var Ze=e.onNewBodyRow();if(l.forEach(function(rn,kt){Ze.onColumn(rn,kt,c)}),s.getCustomContentBelowRow){var Fe=s.getCustomContentBelowRow({node:c,api:x,columnApi:A,context:w});Fe&&e.addCustomContent(Fe)}}},i.prototype.appendContent=function(e){return function(s){var l=e.customFooter||e.appendContent;return l&&(e.customFooter&&yt.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.")},"gridSerializer-customFooter"),s.addCustomContent(l)),s}},i.prototype.prependContent=function(e){return function(s){var l=e.customHeader||e.prependContent;return l&&(e.customHeader&&yt.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.")},"gridSerializer-customHeader"),s.addCustomContent(l)),s}},i.prototype.prepareSession=function(e){return function(s){return s.prepare(e),s}},i.prototype.exportColumnGroups=function(e,s){var l=this;return function(c){if(e.skipColumnGroupHeaders)e.columnGroups&&yt.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.")},"gridSerializer-columnGroups");else{var p=new Av,m=l.displayedGroupCreator.createDisplayedGroups(s,l.columnModel.getGridBalancedTree(),p,null);l.recursivelyAddHeaderGroups(m,c,e.processGroupHeaderCallback)}return c}},i.prototype.exportHeaders=function(e,s){return function(l){if(e.skipHeader||e.skipColumnHeaders)e.skipHeader&&yt.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.")},"gridSerializer-skipHeader");else{var c=l.onNewHeaderRow();s.forEach(function(p,m){c.onColumn(p,m,void 0)})}return l}},i.prototype.processPinnedTopRows=function(e,s){var l=this;return function(c){var p=l.processRow.bind(l,c,e,s);return l.pinnedRowModel.forEachPinnedTopRow(p),c}},i.prototype.processRows=function(e,s){var l=this;return function(c){var p=l.rowModel,m=p.getType(),w=m===ce.ROW_MODEL_TYPE_CLIENT_SIDE,x=m===ce.ROW_MODEL_TYPE_SERVER_SIDE,A=!w&&e.onlySelected,I=l.processRow.bind(l,c,e,s);return l.columnModel.isPivotMode()?w?p.forEachPivotNode(I):p.forEachNode(I):e.onlySelectedAllPages||A?l.selectionService.getSelectedNodes().forEach(I):w||x?p.forEachNodeAfterFilterAndSort(I):p.forEachNode(I),c}},i.prototype.processPinnedBottomRows=function(e,s){var l=this;return function(c){var p=l.processRow.bind(l,c,e,s);return l.pinnedRowModel.forEachPinnedBottomRow(p),c}},i.prototype.getColumnsToExport=function(e,s){void 0===e&&(e=!1);var l=this.columnModel.isPivotMode();return s&&s.length?this.columnModel.getGridColumns(s):e&&!l?(this.gridOptionsWrapper.isTreeData()?this.columnModel.getGridColumns([ce.GROUP_AUTO_COLUMN_ID]):[]).concat(this.columnModel.getAllPrimaryColumns()||[]):this.columnModel.getAllDisplayedColumns()},i.prototype.recursivelyAddHeaderGroups=function(e,s,l){var c=[];e.forEach(function(p){!p.getChildren||p.getChildren().forEach(function(w){return c.push(w)})}),e.length>0&&e[0]instanceof ri&&this.doAddHeaderHeader(s,e,l),c&&c.length>0&&this.recursivelyAddHeaderGroups(c,s,l)},i.prototype.doAddHeaderHeader=function(e,s,l){var c=this,p=e.onNewHeaderGroupingRow(),m=0;s.forEach(function(w){var A,x=w;A=l?l({columnGroup:x,api:c.gridOptionsWrapper.getApi(),columnApi:c.gridOptionsWrapper.getColumnApi(),context:c.gridOptionsWrapper.getContext()}):c.columnModel.getDisplayNameForColumnGroup(x,"header"),p.onColumn(A||"",m++,x.getLeafColumns().length-1)})},uu([B("displayedGroupCreator")],i.prototype,"displayedGroupCreator",void 0),uu([B("columnModel")],i.prototype,"columnModel",void 0),uu([B("rowModel")],i.prototype,"rowModel",void 0),uu([B("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),uu([B("selectionService")],i.prototype,"selectionService",void 0),uu([ht("gridSerializer")],i)}(Ye),OR={moduleName:K.GXE.CsvExportModule,beans:[xm,MR]},lt=(function(){function d(){}d.createHeader=function(i){void 0===i&&(i={});var l=["version"];return i.version||(i.version="1.0"),i.encoding&&l.push("encoding"),i.standalone&&l.push("standalone"),"<?xml "+l.map(function(p){return p+'="'+i[p]+'"'}).join(" ")+" ?>"},d.createXml=function(i,e){var s=this,l="";i.properties&&(i.properties.prefixedAttributes&&i.properties.prefixedAttributes.forEach(function(p){Object.keys(p.map).forEach(function(m){l+=s.returnAttributeIfPopulated(p.prefix+m,p.map[m],e)})}),i.properties.rawMap&&Object.keys(i.properties.rawMap).forEach(function(p){l+=s.returnAttributeIfPopulated(p,i.properties.rawMap[p],e)}));var c="<"+i.name+l;return i.children||null!=i.textNode?null!=i.textNode?c+">"+i.textNode+"</"+i.name+">\r\n":(c+=">\r\n",i.children&&i.children.forEach(function(p){c+=s.createXml(p,e)}),c+"</"+i.name+">\r\n"):c+"/>\r\n"},d.returnAttributeIfPopulated=function(i,e,s){if(!e&&""!==e&&0!==e)return"";var l=e;return"boolean"==typeof e&&s&&(l=s(e))," "+i+'="'+l+'"'}}(),new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]));!function(){function d(){}d.addFolders=function(i){i.forEach(this.addFolder.bind(this))},d.addFolder=function(i){this.folders.push({path:i,created:new Date,isBase64:!1})},d.addFile=function(i,e,s){void 0===s&&(s=!1),this.files.push({path:i,created:new Date,content:e,isBase64:s})},d.getContent=function(i){void 0===i&&(i="application/zip");var e=this.buildFileStream(),s=this.buildUint8Array(e);return this.clearStream(),new Blob([s],{type:i})},d.clearStream=function(){this.folders=[],this.files=[]},d.buildFileStream=function(i){void 0===i&&(i="");for(var e=this.folders.concat(this.files),s=e.length,l="",c=0,p=0,m=0,w=e;m<w.length;m++){var A=this.getHeader(w[m],c),I=A.fileHeader,U=A.folderHeader,Y=A.content;c+=I.length+Y.length,p+=U.length,i+=I+Y,l+=U}return i+l+this.buildFolderEnd(s,p,c)},d.getHeader=function(i,e){var s=i.content,l=i.path,c=i.created,p=i.isBase64,w=yt.decToHex,x=(0,yt.utf8_encode)(l),A=x!==l,I=this.convertTime(c),U=this.convertDate(c),Y="";if(A){var Q=w(1,1)+w(this.getFromCrc32Table(x),4)+x;Y="up"+w(Q.length,2)+Q}var oe=s?this.getConvertedContent(s,p):{size:0,content:""},xe=oe.size,He=oe.content,Ve="\n\0"+(A?"\0\b":"\0\0")+"\0\0"+w(I,2)+w(U,2)+w(xe?this.getFromCrc32Table(He):0,4)+w(xe,4)+w(xe,4)+w(x.length,2)+w(Y.length,2);return{fileHeader:"PK\x03\x04"+Ve+x+Y,folderHeader:"PK\x01\x02\x14\0"+Ve+"\0\0\0\0\0\0"+(s?"\0\0\0\0":"\x10\0\0\0")+w(e,4)+x+Y,content:He||""}},d.getConvertedContent=function(i,e){return void 0===e&&(e=!1),e&&(i=i.split(";base64,")[1]),{size:(i=e?atob(i):i).length,content:i}},d.buildFolderEnd=function(i,e,s){var l=yt.decToHex;return"PK\x05\x06\0\0\0\0"+l(i,2)+l(i,2)+l(e,4)+l(s,4)+"\0\0"},d.buildUint8Array=function(i){for(var e=new Uint8Array(i.length),s=0;s<e.length;s++)e[s]=i.charCodeAt(s);return e},d.getFromCrc32Table=function(i){if(!i.length)return 0;for(var e=i.length,s=new Uint8Array(e),l=0;l<e;l++)s[l]=i.charCodeAt(l);var c=-1;for(l=0;l<e;l++)c=c>>>8^lt[255&(c^s[l])];return-1^c},d.convertTime=function(i){var e=i.getHours();return e<<=6,e|=i.getMinutes(),(e<<=5)|i.getSeconds()/2},d.convertDate=function(i){var e=i.getFullYear()-1980;return e<<=4,e|=i.getMonth()+1,(e<<=5)|i.getDate()},d.folders=[],d.files=[]}();jt.register(VM,!1),jt.register(RR,!1),jt.register(OR,!1),K.j_S=Xr,K.Nk3=u0,K.plv=ko,K.rjZ=As,K.vA3=Px},854:function(yl){var K=function(de){"use strict";var ye,ze=Object.prototype,Le=ze.hasOwnProperty,Qr="function"==typeof Symbol?Symbol:{},j=Qr.iterator||"@@iterator",G=Qr.asyncIterator||"@@asyncIterator",ro=Qr.toStringTag||"@@toStringTag";function pe(pt,Je,nt){return Object.defineProperty(pt,Je,{value:nt,enumerable:!0,configurable:!0,writable:!0}),pt[Je]}try{pe({},"")}catch(pt){pe=function(nt,It,en){return nt[It]=en}}function Bc(pt,Je,nt,It){var Yt=Object.create((Je&&Je.prototype instanceof Ft?Je:Ft).prototype),Vt=new wr(It||[]);return Yt._invoke=function(pt,Je,nt){var It=Xn;return function(Yt,Vt){if(It===ve)throw new Error("Generator is already running");if(It===zs){if("throw"===Yt)throw Vt;return Cl()}for(nt.method=Yt,nt.arg=Vt;;){var jr=nt.delegate;if(jr){var hi=kn(jr,nt);if(hi){if(hi===fi)continue;return hi}}if("next"===nt.method)nt.sent=nt._sent=nt.arg;else if("throw"===nt.method){if(It===Xn)throw It=zs,nt.arg;nt.dispatchException(nt.arg)}else"return"===nt.method&&nt.abrupt("return",nt.arg);It=ve;var Lr=Us(pt,Je,nt);if("normal"===Lr.type){if(It=nt.done?zs:Pi,Lr.arg===fi)continue;return{value:Lr.arg,done:nt.done}}"throw"===Lr.type&&(It=zs,nt.method="throw",nt.arg=Lr.arg)}}}(pt,nt,Vt),Yt}function Us(pt,Je,nt){try{return{type:"normal",arg:pt.call(Je,nt)}}catch(It){return{type:"throw",arg:It}}}de.wrap=Bc;var Xn="suspendedStart",Pi="suspendedYield",ve="executing",zs="completed",fi={};function Ft(){}function Au(){}function rs(){}var Vn={};pe(Vn,j,function(){return this});var Ir=Object.getPrototypeOf,En=Ir&&Ir(Ir(bn([])));En&&En!==ze&&Le.call(En,j)&&(Vn=En);var is=rs.prototype=Ft.prototype=Object.create(Vn);function Hc(pt){["next","throw","return"].forEach(function(Je){pe(pt,Je,function(nt){return this._invoke(Je,nt)})})}function _l(pt,Je){function nt(Yt,Vt,jr,hi){var Lr=Us(pt[Yt],pt,Vt);if("throw"!==Lr.type){var js=Lr.arg,Tu=js.value;return Tu&&"object"==typeof Tu&&Le.call(Tu,"__await")?Je.resolve(Tu.__await).then(function(os){nt("next",os,jr,hi)},function(os){nt("throw",os,jr,hi)}):Je.resolve(Tu).then(function(os){js.value=os,jr(js)},function(os){return nt("throw",os,jr,hi)})}hi(Lr.arg)}var It;this._invoke=function(Yt,Vt){function jr(){return new Je(function(hi,Lr){nt(Yt,Vt,hi,Lr)})}return It=It?It.then(jr,jr):jr()}}function kn(pt,Je){var nt=pt.iterator[Je.method];if(nt===ye){if(Je.delegate=null,"throw"===Je.method){if(pt.iterator.return&&(Je.method="return",Je.arg=ye,kn(pt,Je),"throw"===Je.method))return fi;Je.method="throw",Je.arg=new TypeError("The iterator does not provide a 'throw' method")}return fi}var It=Us(nt,pt.iterator,Je.arg);if("throw"===It.type)return Je.method="throw",Je.arg=It.arg,Je.delegate=null,fi;var en=It.arg;return en?en.done?(Je[pt.resultName]=en.value,Je.next=pt.nextLoc,"return"!==Je.method&&(Je.method="next",Je.arg=ye),Je.delegate=null,fi):en:(Je.method="throw",Je.arg=new TypeError("iterator result is not an object"),Je.delegate=null,fi)}function pi(pt){var Je={tryLoc:pt[0]};1 in pt&&(Je.catchLoc=pt[1]),2 in pt&&(Je.finallyLoc=pt[2],Je.afterLoc=pt[3]),this.tryEntries.push(Je)}function Vc(pt){var Je=pt.completion||{};Je.type="normal",delete Je.arg,pt.completion=Je}function wr(pt){this.tryEntries=[{tryLoc:"root"}],pt.forEach(pi,this),this.reset(!0)}function bn(pt){if(pt){var Je=pt[j];if(Je)return Je.call(pt);if("function"==typeof pt.next)return pt;if(!isNaN(pt.length)){var nt=-1,It=function en(){for(;++nt<pt.length;)if(Le.call(pt,nt))return en.value=pt[nt],en.done=!1,en;return en.value=ye,en.done=!0,en};return It.next=It}}return{next:Cl}}function Cl(){return{value:ye,done:!0}}return Au.prototype=rs,pe(is,"constructor",rs),pe(rs,"constructor",Au),Au.displayName=pe(rs,ro,"GeneratorFunction"),de.isGeneratorFunction=function(pt){var Je="function"==typeof pt&&pt.constructor;return!!Je&&(Je===Au||"GeneratorFunction"===(Je.displayName||Je.name))},de.mark=function(pt){return Object.setPrototypeOf?Object.setPrototypeOf(pt,rs):(pt.__proto__=rs,pe(pt,ro,"GeneratorFunction")),pt.prototype=Object.create(is),pt},de.awrap=function(pt){return{__await:pt}},Hc(_l.prototype),pe(_l.prototype,G,function(){return this}),de.AsyncIterator=_l,de.async=function(pt,Je,nt,It,en){void 0===en&&(en=Promise);var Yt=new _l(Bc(pt,Je,nt,It),en);return de.isGeneratorFunction(Je)?Yt:Yt.next().then(function(Vt){return Vt.done?Vt.value:Yt.next()})},Hc(is),pe(is,ro,"Generator"),pe(is,j,function(){return this}),pe(is,"toString",function(){return"[object Generator]"}),de.keys=function(pt){var Je=[];for(var nt in pt)Je.push(nt);return Je.reverse(),function It(){for(;Je.length;){var en=Je.pop();if(en in pt)return It.value=en,It.done=!1,It}return It.done=!0,It}},de.values=bn,wr.prototype={constructor:wr,reset:function(Je){if(this.prev=0,this.next=0,this.sent=this._sent=ye,this.done=!1,this.delegate=null,this.method="next",this.arg=ye,this.tryEntries.forEach(Vc),!Je)for(var nt in this)"t"===nt.charAt(0)&&Le.call(this,nt)&&!isNaN(+nt.slice(1))&&(this[nt]=ye)},stop:function(){this.done=!0;var nt=this.tryEntries[0].completion;if("throw"===nt.type)throw nt.arg;return this.rval},dispatchException:function(Je){if(this.done)throw Je;var nt=this;function It(Lr,js){return Vt.type="throw",Vt.arg=Je,nt.next=Lr,js&&(nt.method="next",nt.arg=ye),!!js}for(var en=this.tryEntries.length-1;en>=0;--en){var Yt=this.tryEntries[en],Vt=Yt.completion;if("root"===Yt.tryLoc)return It("end");if(Yt.tryLoc<=this.prev){var jr=Le.call(Yt,"catchLoc"),hi=Le.call(Yt,"finallyLoc");if(jr&&hi){if(this.prev<Yt.catchLoc)return It(Yt.catchLoc,!0);if(this.prev<Yt.finallyLoc)return It(Yt.finallyLoc)}else if(jr){if(this.prev<Yt.catchLoc)return It(Yt.catchLoc,!0)}else{if(!hi)throw new Error("try statement without catch or finally");if(this.prev<Yt.finallyLoc)return It(Yt.finallyLoc)}}}},abrupt:function(Je,nt){for(var It=this.tryEntries.length-1;It>=0;--It){var en=this.tryEntries[It];if(en.tryLoc<=this.prev&&Le.call(en,"finallyLoc")&&this.prev<en.finallyLoc){var Yt=en;break}}Yt&&("break"===Je||"continue"===Je)&&Yt.tryLoc<=nt&&nt<=Yt.finallyLoc&&(Yt=null);var Vt=Yt?Yt.completion:{};return Vt.type=Je,Vt.arg=nt,Yt?(this.method="next",this.next=Yt.finallyLoc,fi):this.complete(Vt)},complete:function(Je,nt){if("throw"===Je.type)throw Je.arg;return"break"===Je.type||"continue"===Je.type?this.next=Je.arg:"return"===Je.type?(this.rval=this.arg=Je.arg,this.method="return",this.next="end"):"normal"===Je.type&&nt&&(this.next=nt),fi},finish:function(Je){for(var nt=this.tryEntries.length-1;nt>=0;--nt){var It=this.tryEntries[nt];if(It.finallyLoc===Je)return this.complete(It.completion,It.afterLoc),Vc(It),fi}},catch:function(Je){for(var nt=this.tryEntries.length-1;nt>=0;--nt){var It=this.tryEntries[nt];if(It.tryLoc===Je){var en=It.completion;if("throw"===en.type){var Yt=en.arg;Vc(It)}return Yt}}throw new Error("illegal catch attempt")},delegateYield:function(Je,nt,It){return this.delegate={iterator:bn(Je),resultName:nt,nextLoc:It},"next"===this.method&&(this.arg=ye),fi}},de}(yl.exports);try{regeneratorRuntime=K}catch(de){"object"==typeof globalThis?globalThis.regeneratorRuntime=K:Function("r","regeneratorRuntime = r")(K)}},757:function(yl,K,de){yl.exports=de(854)}},function(yl){yl(yl.s=999)}]);